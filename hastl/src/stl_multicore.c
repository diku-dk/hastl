// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_128057_total_runtime;
    int *futhark_mc_segmap_parloop_128057_runs;
    int64_t *futhark_mc_segmap_parloop_128057_iter;
    int64_t futhark_mc_segmap_parloop_128057_total_total_runtime;
    int futhark_mc_segmap_parloop_128057_total_runs;
    int64_t futhark_mc_segmap_parloop_128057_total_iter;
    int64_t *futhark_mc_segmap_task_128055_total_runtime;
    int *futhark_mc_segmap_task_128055_runs;
    int64_t *futhark_mc_segmap_task_128055_iter;
    int64_t futhark_mc_segmap_task_128055_total_time;
    int64_t futhark_mc_segmap_task_128055_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128069_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128069_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128069_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128069_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128069_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128069_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128071_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128071_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128071_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128071_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128071_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128071_total_iter;
    int64_t *futhark_mc_segscan_task_128066_total_runtime;
    int *futhark_mc_segscan_task_128066_runs;
    int64_t *futhark_mc_segscan_task_128066_iter;
    int64_t futhark_mc_segscan_task_128066_total_time;
    int64_t futhark_mc_segscan_task_128066_total_iter;
    int64_t *futhark_mc_segmap_parloop_128075_total_runtime;
    int *futhark_mc_segmap_parloop_128075_runs;
    int64_t *futhark_mc_segmap_parloop_128075_iter;
    int64_t futhark_mc_segmap_parloop_128075_total_total_runtime;
    int futhark_mc_segmap_parloop_128075_total_runs;
    int64_t futhark_mc_segmap_parloop_128075_total_iter;
    int64_t *futhark_mc_segmap_task_128073_total_runtime;
    int *futhark_mc_segmap_task_128073_runs;
    int64_t *futhark_mc_segmap_task_128073_iter;
    int64_t futhark_mc_segmap_task_128073_total_time;
    int64_t futhark_mc_segmap_task_128073_total_iter;
    int64_t *futhark_mc_segmap_parloop_128062_total_runtime;
    int *futhark_mc_segmap_parloop_128062_runs;
    int64_t *futhark_mc_segmap_parloop_128062_iter;
    int64_t futhark_mc_segmap_parloop_128062_total_total_runtime;
    int futhark_mc_segmap_parloop_128062_total_runs;
    int64_t futhark_mc_segmap_parloop_128062_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128060_total_runtime;
    int *futhark_mc_segmap_nested_task_128060_runs;
    int64_t *futhark_mc_segmap_nested_task_128060_iter;
    int64_t *futhark_mc_segmap_parloop_128079_total_runtime;
    int *futhark_mc_segmap_parloop_128079_runs;
    int64_t *futhark_mc_segmap_parloop_128079_iter;
    int64_t futhark_mc_segmap_parloop_128079_total_total_runtime;
    int futhark_mc_segmap_parloop_128079_total_runs;
    int64_t futhark_mc_segmap_parloop_128079_total_iter;
    int64_t *futhark_mc_segmap_task_128077_total_runtime;
    int *futhark_mc_segmap_task_128077_runs;
    int64_t *futhark_mc_segmap_task_128077_iter;
    int64_t futhark_mc_segmap_task_128077_total_time;
    int64_t futhark_mc_segmap_task_128077_total_iter;
    int64_t *futhark_mc_segmap_parloop_128088_total_runtime;
    int *futhark_mc_segmap_parloop_128088_runs;
    int64_t *futhark_mc_segmap_parloop_128088_iter;
    int64_t futhark_mc_segmap_parloop_128088_total_total_runtime;
    int futhark_mc_segmap_parloop_128088_total_runs;
    int64_t futhark_mc_segmap_parloop_128088_total_iter;
    int64_t *futhark_mc_segmap_task_128086_total_runtime;
    int *futhark_mc_segmap_task_128086_runs;
    int64_t *futhark_mc_segmap_task_128086_iter;
    int64_t futhark_mc_segmap_task_128086_total_time;
    int64_t futhark_mc_segmap_task_128086_total_iter;
    int64_t *futhark_mc_segmap_parloop_128083_total_runtime;
    int *futhark_mc_segmap_parloop_128083_runs;
    int64_t *futhark_mc_segmap_parloop_128083_iter;
    int64_t futhark_mc_segmap_parloop_128083_total_total_runtime;
    int futhark_mc_segmap_parloop_128083_total_runs;
    int64_t futhark_mc_segmap_parloop_128083_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128081_total_runtime;
    int *futhark_mc_segmap_nested_task_128081_runs;
    int64_t *futhark_mc_segmap_nested_task_128081_iter;
    int64_t *futhark_mc_segmap_parloop_128092_total_runtime;
    int *futhark_mc_segmap_parloop_128092_runs;
    int64_t *futhark_mc_segmap_parloop_128092_iter;
    int64_t futhark_mc_segmap_parloop_128092_total_total_runtime;
    int futhark_mc_segmap_parloop_128092_total_runs;
    int64_t futhark_mc_segmap_parloop_128092_total_iter;
    int64_t *futhark_mc_segmap_task_128090_total_runtime;
    int *futhark_mc_segmap_task_128090_runs;
    int64_t *futhark_mc_segmap_task_128090_iter;
    int64_t futhark_mc_segmap_task_128090_total_time;
    int64_t futhark_mc_segmap_task_128090_total_iter;
    int64_t *futhark_mc_segmap_parloop_128101_total_runtime;
    int *futhark_mc_segmap_parloop_128101_runs;
    int64_t *futhark_mc_segmap_parloop_128101_iter;
    int64_t futhark_mc_segmap_parloop_128101_total_total_runtime;
    int futhark_mc_segmap_parloop_128101_total_runs;
    int64_t futhark_mc_segmap_parloop_128101_total_iter;
    int64_t *futhark_mc_segmap_task_128099_total_runtime;
    int *futhark_mc_segmap_task_128099_runs;
    int64_t *futhark_mc_segmap_task_128099_iter;
    int64_t futhark_mc_segmap_task_128099_total_time;
    int64_t futhark_mc_segmap_task_128099_total_iter;
    int64_t *futhark_mc_segmap_parloop_128096_total_runtime;
    int *futhark_mc_segmap_parloop_128096_runs;
    int64_t *futhark_mc_segmap_parloop_128096_iter;
    int64_t futhark_mc_segmap_parloop_128096_total_total_runtime;
    int futhark_mc_segmap_parloop_128096_total_runs;
    int64_t futhark_mc_segmap_parloop_128096_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128094_total_runtime;
    int *futhark_mc_segmap_nested_task_128094_runs;
    int64_t *futhark_mc_segmap_nested_task_128094_iter;
    int64_t *futhark_mc_segmap_parloop_128105_total_runtime;
    int *futhark_mc_segmap_parloop_128105_runs;
    int64_t *futhark_mc_segmap_parloop_128105_iter;
    int64_t futhark_mc_segmap_parloop_128105_total_total_runtime;
    int futhark_mc_segmap_parloop_128105_total_runs;
    int64_t futhark_mc_segmap_parloop_128105_total_iter;
    int64_t *futhark_mc_segmap_task_128103_total_runtime;
    int *futhark_mc_segmap_task_128103_runs;
    int64_t *futhark_mc_segmap_task_128103_iter;
    int64_t futhark_mc_segmap_task_128103_total_time;
    int64_t futhark_mc_segmap_task_128103_total_iter;
    int64_t *futhark_mc_segmap_parloop_128114_total_runtime;
    int *futhark_mc_segmap_parloop_128114_runs;
    int64_t *futhark_mc_segmap_parloop_128114_iter;
    int64_t futhark_mc_segmap_parloop_128114_total_total_runtime;
    int futhark_mc_segmap_parloop_128114_total_runs;
    int64_t futhark_mc_segmap_parloop_128114_total_iter;
    int64_t *futhark_mc_segmap_task_128112_total_runtime;
    int *futhark_mc_segmap_task_128112_runs;
    int64_t *futhark_mc_segmap_task_128112_iter;
    int64_t futhark_mc_segmap_task_128112_total_time;
    int64_t futhark_mc_segmap_task_128112_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128122_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128122_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128122_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128122_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128122_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128122_total_iter;
    int64_t *futhark_mc_segred_task_128119_total_runtime;
    int *futhark_mc_segred_task_128119_runs;
    int64_t *futhark_mc_segred_task_128119_iter;
    int64_t futhark_mc_segred_task_128119_total_time;
    int64_t futhark_mc_segred_task_128119_total_iter;
    int64_t *futhark_mc_segmap_parloop_128117_total_runtime;
    int *futhark_mc_segmap_parloop_128117_runs;
    int64_t *futhark_mc_segmap_parloop_128117_iter;
    int64_t futhark_mc_segmap_parloop_128117_total_total_runtime;
    int futhark_mc_segmap_parloop_128117_total_runs;
    int64_t futhark_mc_segmap_parloop_128117_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128115_total_runtime;
    int *futhark_mc_segmap_nested_task_128115_runs;
    int64_t *futhark_mc_segmap_nested_task_128115_iter;
    int64_t *futhark_mc_segmap_parloop_128109_total_runtime;
    int *futhark_mc_segmap_parloop_128109_runs;
    int64_t *futhark_mc_segmap_parloop_128109_iter;
    int64_t futhark_mc_segmap_parloop_128109_total_total_runtime;
    int futhark_mc_segmap_parloop_128109_total_runs;
    int64_t futhark_mc_segmap_parloop_128109_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128107_total_runtime;
    int *futhark_mc_segmap_nested_task_128107_runs;
    int64_t *futhark_mc_segmap_nested_task_128107_iter;
    int64_t *futhark_mc_segmap_parloop_128126_total_runtime;
    int *futhark_mc_segmap_parloop_128126_runs;
    int64_t *futhark_mc_segmap_parloop_128126_iter;
    int64_t futhark_mc_segmap_parloop_128126_total_total_runtime;
    int futhark_mc_segmap_parloop_128126_total_runs;
    int64_t futhark_mc_segmap_parloop_128126_total_iter;
    int64_t *futhark_mc_segmap_task_128124_total_runtime;
    int *futhark_mc_segmap_task_128124_runs;
    int64_t *futhark_mc_segmap_task_128124_iter;
    int64_t futhark_mc_segmap_task_128124_total_time;
    int64_t futhark_mc_segmap_task_128124_total_iter;
    int64_t *futhark_mc_segmap_parloop_128139_total_runtime;
    int *futhark_mc_segmap_parloop_128139_runs;
    int64_t *futhark_mc_segmap_parloop_128139_iter;
    int64_t futhark_mc_segmap_parloop_128139_total_total_runtime;
    int futhark_mc_segmap_parloop_128139_total_runs;
    int64_t futhark_mc_segmap_parloop_128139_total_iter;
    int64_t *futhark_mc_segmap_task_128137_total_runtime;
    int *futhark_mc_segmap_task_128137_runs;
    int64_t *futhark_mc_segmap_task_128137_iter;
    int64_t futhark_mc_segmap_task_128137_total_time;
    int64_t futhark_mc_segmap_task_128137_total_iter;
    int64_t *futhark_mc_segmap_parloop_128143_total_runtime;
    int *futhark_mc_segmap_parloop_128143_runs;
    int64_t *futhark_mc_segmap_parloop_128143_iter;
    int64_t futhark_mc_segmap_parloop_128143_total_total_runtime;
    int futhark_mc_segmap_parloop_128143_total_runs;
    int64_t futhark_mc_segmap_parloop_128143_total_iter;
    int64_t *futhark_mc_segmap_task_128141_total_runtime;
    int *futhark_mc_segmap_task_128141_runs;
    int64_t *futhark_mc_segmap_task_128141_iter;
    int64_t futhark_mc_segmap_task_128141_total_time;
    int64_t futhark_mc_segmap_task_128141_total_iter;
    int64_t *futhark_mc_segmap_parloop_128132_total_runtime;
    int *futhark_mc_segmap_parloop_128132_runs;
    int64_t *futhark_mc_segmap_parloop_128132_iter;
    int64_t futhark_mc_segmap_parloop_128132_total_total_runtime;
    int futhark_mc_segmap_parloop_128132_total_runs;
    int64_t futhark_mc_segmap_parloop_128132_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128130_total_runtime;
    int *futhark_mc_segmap_nested_task_128130_runs;
    int64_t *futhark_mc_segmap_nested_task_128130_iter;
    int64_t *futhark_mc_segmap_parloop_128147_total_runtime;
    int *futhark_mc_segmap_parloop_128147_runs;
    int64_t *futhark_mc_segmap_parloop_128147_iter;
    int64_t futhark_mc_segmap_parloop_128147_total_total_runtime;
    int futhark_mc_segmap_parloop_128147_total_runs;
    int64_t futhark_mc_segmap_parloop_128147_total_iter;
    int64_t *futhark_mc_segmap_task_128145_total_runtime;
    int *futhark_mc_segmap_task_128145_runs;
    int64_t *futhark_mc_segmap_task_128145_iter;
    int64_t futhark_mc_segmap_task_128145_total_time;
    int64_t futhark_mc_segmap_task_128145_total_iter;
    int64_t *futhark_mc_segmap_parloop_128160_total_runtime;
    int *futhark_mc_segmap_parloop_128160_runs;
    int64_t *futhark_mc_segmap_parloop_128160_iter;
    int64_t futhark_mc_segmap_parloop_128160_total_total_runtime;
    int futhark_mc_segmap_parloop_128160_total_runs;
    int64_t futhark_mc_segmap_parloop_128160_total_iter;
    int64_t *futhark_mc_segmap_task_128158_total_runtime;
    int *futhark_mc_segmap_task_128158_runs;
    int64_t *futhark_mc_segmap_task_128158_iter;
    int64_t futhark_mc_segmap_task_128158_total_time;
    int64_t futhark_mc_segmap_task_128158_total_iter;
    int64_t *futhark_mc_segmap_parloop_128164_total_runtime;
    int *futhark_mc_segmap_parloop_128164_runs;
    int64_t *futhark_mc_segmap_parloop_128164_iter;
    int64_t futhark_mc_segmap_parloop_128164_total_total_runtime;
    int futhark_mc_segmap_parloop_128164_total_runs;
    int64_t futhark_mc_segmap_parloop_128164_total_iter;
    int64_t *futhark_mc_segmap_task_128162_total_runtime;
    int *futhark_mc_segmap_task_128162_runs;
    int64_t *futhark_mc_segmap_task_128162_iter;
    int64_t futhark_mc_segmap_task_128162_total_time;
    int64_t futhark_mc_segmap_task_128162_total_iter;
    int64_t *futhark_mc_segmap_parloop_128153_total_runtime;
    int *futhark_mc_segmap_parloop_128153_runs;
    int64_t *futhark_mc_segmap_parloop_128153_iter;
    int64_t futhark_mc_segmap_parloop_128153_total_total_runtime;
    int futhark_mc_segmap_parloop_128153_total_runs;
    int64_t futhark_mc_segmap_parloop_128153_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128151_total_runtime;
    int *futhark_mc_segmap_nested_task_128151_runs;
    int64_t *futhark_mc_segmap_nested_task_128151_iter;
    int64_t *futhark_mc_segmap_parloop_128168_total_runtime;
    int *futhark_mc_segmap_parloop_128168_runs;
    int64_t *futhark_mc_segmap_parloop_128168_iter;
    int64_t futhark_mc_segmap_parloop_128168_total_total_runtime;
    int futhark_mc_segmap_parloop_128168_total_runs;
    int64_t futhark_mc_segmap_parloop_128168_total_iter;
    int64_t *futhark_mc_segmap_task_128166_total_runtime;
    int *futhark_mc_segmap_task_128166_runs;
    int64_t *futhark_mc_segmap_task_128166_iter;
    int64_t futhark_mc_segmap_task_128166_total_time;
    int64_t futhark_mc_segmap_task_128166_total_iter;
    int64_t *futhark_mc_segmap_parloop_128177_total_runtime;
    int *futhark_mc_segmap_parloop_128177_runs;
    int64_t *futhark_mc_segmap_parloop_128177_iter;
    int64_t futhark_mc_segmap_parloop_128177_total_total_runtime;
    int futhark_mc_segmap_parloop_128177_total_runs;
    int64_t futhark_mc_segmap_parloop_128177_total_iter;
    int64_t *futhark_mc_segmap_task_128175_total_runtime;
    int *futhark_mc_segmap_task_128175_runs;
    int64_t *futhark_mc_segmap_task_128175_iter;
    int64_t futhark_mc_segmap_task_128175_total_time;
    int64_t futhark_mc_segmap_task_128175_total_iter;
    int64_t *futhark_mc_segmap_parloop_128172_total_runtime;
    int *futhark_mc_segmap_parloop_128172_runs;
    int64_t *futhark_mc_segmap_parloop_128172_iter;
    int64_t futhark_mc_segmap_parloop_128172_total_total_runtime;
    int futhark_mc_segmap_parloop_128172_total_runs;
    int64_t futhark_mc_segmap_parloop_128172_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128170_total_runtime;
    int *futhark_mc_segmap_nested_task_128170_runs;
    int64_t *futhark_mc_segmap_nested_task_128170_iter;
    int64_t *futhark_mc_segmap_parloop_128181_total_runtime;
    int *futhark_mc_segmap_parloop_128181_runs;
    int64_t *futhark_mc_segmap_parloop_128181_iter;
    int64_t futhark_mc_segmap_parloop_128181_total_total_runtime;
    int futhark_mc_segmap_parloop_128181_total_runs;
    int64_t futhark_mc_segmap_parloop_128181_total_iter;
    int64_t *futhark_mc_segmap_task_128179_total_runtime;
    int *futhark_mc_segmap_task_128179_runs;
    int64_t *futhark_mc_segmap_task_128179_iter;
    int64_t futhark_mc_segmap_task_128179_total_time;
    int64_t futhark_mc_segmap_task_128179_total_iter;
    int64_t *futhark_mc_segmap_parloop_128190_total_runtime;
    int *futhark_mc_segmap_parloop_128190_runs;
    int64_t *futhark_mc_segmap_parloop_128190_iter;
    int64_t futhark_mc_segmap_parloop_128190_total_total_runtime;
    int futhark_mc_segmap_parloop_128190_total_runs;
    int64_t futhark_mc_segmap_parloop_128190_total_iter;
    int64_t *futhark_mc_segmap_task_128188_total_runtime;
    int *futhark_mc_segmap_task_128188_runs;
    int64_t *futhark_mc_segmap_task_128188_iter;
    int64_t futhark_mc_segmap_task_128188_total_time;
    int64_t futhark_mc_segmap_task_128188_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128198_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128198_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128198_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128198_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128198_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128198_total_iter;
    int64_t *futhark_mc_segred_task_128195_total_runtime;
    int *futhark_mc_segred_task_128195_runs;
    int64_t *futhark_mc_segred_task_128195_iter;
    int64_t futhark_mc_segred_task_128195_total_time;
    int64_t futhark_mc_segred_task_128195_total_iter;
    int64_t *futhark_mc_segmap_parloop_128193_total_runtime;
    int *futhark_mc_segmap_parloop_128193_runs;
    int64_t *futhark_mc_segmap_parloop_128193_iter;
    int64_t futhark_mc_segmap_parloop_128193_total_total_runtime;
    int futhark_mc_segmap_parloop_128193_total_runs;
    int64_t futhark_mc_segmap_parloop_128193_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128191_total_runtime;
    int *futhark_mc_segmap_nested_task_128191_runs;
    int64_t *futhark_mc_segmap_nested_task_128191_iter;
    int64_t *futhark_mc_segmap_parloop_128185_total_runtime;
    int *futhark_mc_segmap_parloop_128185_runs;
    int64_t *futhark_mc_segmap_parloop_128185_iter;
    int64_t futhark_mc_segmap_parloop_128185_total_total_runtime;
    int futhark_mc_segmap_parloop_128185_total_runs;
    int64_t futhark_mc_segmap_parloop_128185_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128183_total_runtime;
    int *futhark_mc_segmap_nested_task_128183_runs;
    int64_t *futhark_mc_segmap_nested_task_128183_iter;
    int64_t *futhark_mc_segmap_parloop_128202_total_runtime;
    int *futhark_mc_segmap_parloop_128202_runs;
    int64_t *futhark_mc_segmap_parloop_128202_iter;
    int64_t futhark_mc_segmap_parloop_128202_total_total_runtime;
    int futhark_mc_segmap_parloop_128202_total_runs;
    int64_t futhark_mc_segmap_parloop_128202_total_iter;
    int64_t *futhark_mc_segmap_task_128200_total_runtime;
    int *futhark_mc_segmap_task_128200_runs;
    int64_t *futhark_mc_segmap_task_128200_iter;
    int64_t futhark_mc_segmap_task_128200_total_time;
    int64_t futhark_mc_segmap_task_128200_total_iter;
    int64_t *futhark_mc_segmap_parloop_128211_total_runtime;
    int *futhark_mc_segmap_parloop_128211_runs;
    int64_t *futhark_mc_segmap_parloop_128211_iter;
    int64_t futhark_mc_segmap_parloop_128211_total_total_runtime;
    int futhark_mc_segmap_parloop_128211_total_runs;
    int64_t futhark_mc_segmap_parloop_128211_total_iter;
    int64_t *futhark_mc_segmap_task_128209_total_runtime;
    int *futhark_mc_segmap_task_128209_runs;
    int64_t *futhark_mc_segmap_task_128209_iter;
    int64_t futhark_mc_segmap_task_128209_total_time;
    int64_t futhark_mc_segmap_task_128209_total_iter;
    int64_t *futhark_mc_segmap_parloop_128206_total_runtime;
    int *futhark_mc_segmap_parloop_128206_runs;
    int64_t *futhark_mc_segmap_parloop_128206_iter;
    int64_t futhark_mc_segmap_parloop_128206_total_total_runtime;
    int futhark_mc_segmap_parloop_128206_total_runs;
    int64_t futhark_mc_segmap_parloop_128206_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128204_total_runtime;
    int *futhark_mc_segmap_nested_task_128204_runs;
    int64_t *futhark_mc_segmap_nested_task_128204_iter;
    int64_t *futhark_mc_segmap_parloop_128215_total_runtime;
    int *futhark_mc_segmap_parloop_128215_runs;
    int64_t *futhark_mc_segmap_parloop_128215_iter;
    int64_t futhark_mc_segmap_parloop_128215_total_total_runtime;
    int futhark_mc_segmap_parloop_128215_total_runs;
    int64_t futhark_mc_segmap_parloop_128215_total_iter;
    int64_t *futhark_mc_segmap_task_128213_total_runtime;
    int *futhark_mc_segmap_task_128213_runs;
    int64_t *futhark_mc_segmap_task_128213_iter;
    int64_t futhark_mc_segmap_task_128213_total_time;
    int64_t futhark_mc_segmap_task_128213_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128229_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128229_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128229_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128229_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128229_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128229_total_iter;
    int64_t *futhark_mc_segred_task_128226_total_runtime;
    int *futhark_mc_segred_task_128226_runs;
    int64_t *futhark_mc_segred_task_128226_iter;
    int64_t futhark_mc_segred_task_128226_total_time;
    int64_t futhark_mc_segred_task_128226_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128234_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128234_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128234_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128234_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128234_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128234_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128236_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128236_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128236_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128236_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128236_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128236_total_iter;
    int64_t *futhark_mc_segscan_task_128231_total_runtime;
    int *futhark_mc_segscan_task_128231_runs;
    int64_t *futhark_mc_segscan_task_128231_iter;
    int64_t futhark_mc_segscan_task_128231_total_time;
    int64_t futhark_mc_segscan_task_128231_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128241_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128241_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128241_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128241_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128241_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128241_total_iter;
    int64_t *futhark_mc_segred_task_128238_total_runtime;
    int *futhark_mc_segred_task_128238_runs;
    int64_t *futhark_mc_segred_task_128238_iter;
    int64_t futhark_mc_segred_task_128238_total_time;
    int64_t futhark_mc_segred_task_128238_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128246_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128246_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128246_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128246_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128246_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128246_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128248_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128248_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128248_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128248_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128248_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128248_total_iter;
    int64_t *futhark_mc_segscan_task_128243_total_runtime;
    int *futhark_mc_segscan_task_128243_runs;
    int64_t *futhark_mc_segscan_task_128243_iter;
    int64_t futhark_mc_segscan_task_128243_total_time;
    int64_t futhark_mc_segscan_task_128243_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128253_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128253_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128253_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128253_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128253_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128253_total_iter;
    int64_t *futhark_mc_segred_task_128250_total_runtime;
    int *futhark_mc_segred_task_128250_runs;
    int64_t *futhark_mc_segred_task_128250_iter;
    int64_t futhark_mc_segred_task_128250_total_time;
    int64_t futhark_mc_segred_task_128250_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128258_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128258_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128258_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128258_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128258_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128258_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128260_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128260_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128260_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128260_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128260_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128260_total_iter;
    int64_t *futhark_mc_segscan_task_128255_total_runtime;
    int *futhark_mc_segscan_task_128255_runs;
    int64_t *futhark_mc_segscan_task_128255_iter;
    int64_t futhark_mc_segscan_task_128255_total_time;
    int64_t futhark_mc_segscan_task_128255_total_iter;
    int64_t *futhark_mc_segmap_parloop_128221_total_runtime;
    int *futhark_mc_segmap_parloop_128221_runs;
    int64_t *futhark_mc_segmap_parloop_128221_iter;
    int64_t futhark_mc_segmap_parloop_128221_total_total_runtime;
    int futhark_mc_segmap_parloop_128221_total_runs;
    int64_t futhark_mc_segmap_parloop_128221_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128219_total_runtime;
    int *futhark_mc_segmap_nested_task_128219_runs;
    int64_t *futhark_mc_segmap_nested_task_128219_iter;
    int64_t *futhark_mc_segmap_parloop_128264_total_runtime;
    int *futhark_mc_segmap_parloop_128264_runs;
    int64_t *futhark_mc_segmap_parloop_128264_iter;
    int64_t futhark_mc_segmap_parloop_128264_total_total_runtime;
    int futhark_mc_segmap_parloop_128264_total_runs;
    int64_t futhark_mc_segmap_parloop_128264_total_iter;
    int64_t *futhark_mc_segmap_task_128262_total_runtime;
    int *futhark_mc_segmap_task_128262_runs;
    int64_t *futhark_mc_segmap_task_128262_iter;
    int64_t futhark_mc_segmap_task_128262_total_time;
    int64_t futhark_mc_segmap_task_128262_total_iter;
    int64_t *futhark_mc_segmap_parloop_128273_total_runtime;
    int *futhark_mc_segmap_parloop_128273_runs;
    int64_t *futhark_mc_segmap_parloop_128273_iter;
    int64_t futhark_mc_segmap_parloop_128273_total_total_runtime;
    int futhark_mc_segmap_parloop_128273_total_runs;
    int64_t futhark_mc_segmap_parloop_128273_total_iter;
    int64_t *futhark_mc_segmap_task_128271_total_runtime;
    int *futhark_mc_segmap_task_128271_runs;
    int64_t *futhark_mc_segmap_task_128271_iter;
    int64_t futhark_mc_segmap_task_128271_total_time;
    int64_t futhark_mc_segmap_task_128271_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128281_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128281_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128281_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128281_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128281_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128281_total_iter;
    int64_t *futhark_mc_segred_task_128278_total_runtime;
    int *futhark_mc_segred_task_128278_runs;
    int64_t *futhark_mc_segred_task_128278_iter;
    int64_t futhark_mc_segred_task_128278_total_time;
    int64_t futhark_mc_segred_task_128278_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128286_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128286_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128286_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128286_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128286_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128286_total_iter;
    int64_t *futhark_mc_segred_task_128283_total_runtime;
    int *futhark_mc_segred_task_128283_runs;
    int64_t *futhark_mc_segred_task_128283_iter;
    int64_t futhark_mc_segred_task_128283_total_time;
    int64_t futhark_mc_segred_task_128283_total_iter;
    int64_t *futhark_mc_segmap_parloop_128276_total_runtime;
    int *futhark_mc_segmap_parloop_128276_runs;
    int64_t *futhark_mc_segmap_parloop_128276_iter;
    int64_t futhark_mc_segmap_parloop_128276_total_total_runtime;
    int futhark_mc_segmap_parloop_128276_total_runs;
    int64_t futhark_mc_segmap_parloop_128276_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128274_total_runtime;
    int *futhark_mc_segmap_nested_task_128274_runs;
    int64_t *futhark_mc_segmap_nested_task_128274_iter;
    int64_t *futhark_mc_segmap_parloop_128268_total_runtime;
    int *futhark_mc_segmap_parloop_128268_runs;
    int64_t *futhark_mc_segmap_parloop_128268_iter;
    int64_t futhark_mc_segmap_parloop_128268_total_total_runtime;
    int futhark_mc_segmap_parloop_128268_total_runs;
    int64_t futhark_mc_segmap_parloop_128268_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128266_total_runtime;
    int *futhark_mc_segmap_nested_task_128266_runs;
    int64_t *futhark_mc_segmap_nested_task_128266_iter;
    int64_t *futhark_mc_segmap_parloop_128290_total_runtime;
    int *futhark_mc_segmap_parloop_128290_runs;
    int64_t *futhark_mc_segmap_parloop_128290_iter;
    int64_t futhark_mc_segmap_parloop_128290_total_total_runtime;
    int futhark_mc_segmap_parloop_128290_total_runs;
    int64_t futhark_mc_segmap_parloop_128290_total_iter;
    int64_t *futhark_mc_segmap_task_128288_total_runtime;
    int *futhark_mc_segmap_task_128288_runs;
    int64_t *futhark_mc_segmap_task_128288_iter;
    int64_t futhark_mc_segmap_task_128288_total_time;
    int64_t futhark_mc_segmap_task_128288_total_iter;
    int64_t *futhark_mc_segmap_parloop_128301_total_runtime;
    int *futhark_mc_segmap_parloop_128301_runs;
    int64_t *futhark_mc_segmap_parloop_128301_iter;
    int64_t futhark_mc_segmap_parloop_128301_total_total_runtime;
    int futhark_mc_segmap_parloop_128301_total_runs;
    int64_t futhark_mc_segmap_parloop_128301_total_iter;
    int64_t *futhark_mc_segmap_task_128299_total_runtime;
    int *futhark_mc_segmap_task_128299_runs;
    int64_t *futhark_mc_segmap_task_128299_iter;
    int64_t futhark_mc_segmap_task_128299_total_time;
    int64_t futhark_mc_segmap_task_128299_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128311_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128311_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128311_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128311_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128311_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128311_total_iter;
    int64_t *futhark_mc_segred_task_128306_total_runtime;
    int *futhark_mc_segred_task_128306_runs;
    int64_t *futhark_mc_segred_task_128306_iter;
    int64_t futhark_mc_segred_task_128306_total_time;
    int64_t futhark_mc_segred_task_128306_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128317_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128317_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128317_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128317_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128317_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128317_total_iter;
    int64_t *futhark_mc_segred_task_128313_total_runtime;
    int *futhark_mc_segred_task_128313_runs;
    int64_t *futhark_mc_segred_task_128313_iter;
    int64_t futhark_mc_segred_task_128313_total_time;
    int64_t futhark_mc_segred_task_128313_total_iter;
    int64_t *futhark_mc_segmap_parloop_128304_total_runtime;
    int *futhark_mc_segmap_parloop_128304_runs;
    int64_t *futhark_mc_segmap_parloop_128304_iter;
    int64_t futhark_mc_segmap_parloop_128304_total_total_runtime;
    int futhark_mc_segmap_parloop_128304_total_runs;
    int64_t futhark_mc_segmap_parloop_128304_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128302_total_runtime;
    int *futhark_mc_segmap_nested_task_128302_runs;
    int64_t *futhark_mc_segmap_nested_task_128302_iter;
    int64_t *futhark_mc_segmap_parloop_128295_total_runtime;
    int *futhark_mc_segmap_parloop_128295_runs;
    int64_t *futhark_mc_segmap_parloop_128295_iter;
    int64_t futhark_mc_segmap_parloop_128295_total_total_runtime;
    int futhark_mc_segmap_parloop_128295_total_runs;
    int64_t futhark_mc_segmap_parloop_128295_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128293_total_runtime;
    int *futhark_mc_segmap_nested_task_128293_runs;
    int64_t *futhark_mc_segmap_nested_task_128293_iter;
    int64_t *futhark_mc_segmap_parloop_128321_total_runtime;
    int *futhark_mc_segmap_parloop_128321_runs;
    int64_t *futhark_mc_segmap_parloop_128321_iter;
    int64_t futhark_mc_segmap_parloop_128321_total_total_runtime;
    int futhark_mc_segmap_parloop_128321_total_runs;
    int64_t futhark_mc_segmap_parloop_128321_total_iter;
    int64_t *futhark_mc_segmap_task_128319_total_runtime;
    int *futhark_mc_segmap_task_128319_runs;
    int64_t *futhark_mc_segmap_task_128319_iter;
    int64_t futhark_mc_segmap_task_128319_total_time;
    int64_t futhark_mc_segmap_task_128319_total_iter;
    int64_t *futhark_mc_segmap_parloop_128332_total_runtime;
    int *futhark_mc_segmap_parloop_128332_runs;
    int64_t *futhark_mc_segmap_parloop_128332_iter;
    int64_t futhark_mc_segmap_parloop_128332_total_total_runtime;
    int futhark_mc_segmap_parloop_128332_total_runs;
    int64_t futhark_mc_segmap_parloop_128332_total_iter;
    int64_t *futhark_mc_segmap_task_128330_total_runtime;
    int *futhark_mc_segmap_task_128330_runs;
    int64_t *futhark_mc_segmap_task_128330_iter;
    int64_t futhark_mc_segmap_task_128330_total_time;
    int64_t futhark_mc_segmap_task_128330_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128344_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128344_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128344_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128344_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128344_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128344_total_iter;
    int64_t *futhark_mc_segred_task_128337_total_runtime;
    int *futhark_mc_segred_task_128337_runs;
    int64_t *futhark_mc_segred_task_128337_iter;
    int64_t futhark_mc_segred_task_128337_total_time;
    int64_t futhark_mc_segred_task_128337_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128350_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128350_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128350_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128350_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128350_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128350_total_iter;
    int64_t *futhark_mc_segred_task_128346_total_runtime;
    int *futhark_mc_segred_task_128346_runs;
    int64_t *futhark_mc_segred_task_128346_iter;
    int64_t futhark_mc_segred_task_128346_total_time;
    int64_t futhark_mc_segred_task_128346_total_iter;
    int64_t *futhark_mc_segmap_parloop_128335_total_runtime;
    int *futhark_mc_segmap_parloop_128335_runs;
    int64_t *futhark_mc_segmap_parloop_128335_iter;
    int64_t futhark_mc_segmap_parloop_128335_total_total_runtime;
    int futhark_mc_segmap_parloop_128335_total_runs;
    int64_t futhark_mc_segmap_parloop_128335_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128333_total_runtime;
    int *futhark_mc_segmap_nested_task_128333_runs;
    int64_t *futhark_mc_segmap_nested_task_128333_iter;
    int64_t *futhark_mc_segmap_parloop_128326_total_runtime;
    int *futhark_mc_segmap_parloop_128326_runs;
    int64_t *futhark_mc_segmap_parloop_128326_iter;
    int64_t futhark_mc_segmap_parloop_128326_total_total_runtime;
    int futhark_mc_segmap_parloop_128326_total_runs;
    int64_t futhark_mc_segmap_parloop_128326_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128324_total_runtime;
    int *futhark_mc_segmap_nested_task_128324_runs;
    int64_t *futhark_mc_segmap_nested_task_128324_iter;
    int64_t *futhark_mc_segmap_parloop_128354_total_runtime;
    int *futhark_mc_segmap_parloop_128354_runs;
    int64_t *futhark_mc_segmap_parloop_128354_iter;
    int64_t futhark_mc_segmap_parloop_128354_total_total_runtime;
    int futhark_mc_segmap_parloop_128354_total_runs;
    int64_t futhark_mc_segmap_parloop_128354_total_iter;
    int64_t *futhark_mc_segmap_task_128352_total_runtime;
    int *futhark_mc_segmap_task_128352_runs;
    int64_t *futhark_mc_segmap_task_128352_iter;
    int64_t futhark_mc_segmap_task_128352_total_time;
    int64_t futhark_mc_segmap_task_128352_total_iter;
    int64_t *futhark_mc_segmap_parloop_128364_total_runtime;
    int *futhark_mc_segmap_parloop_128364_runs;
    int64_t *futhark_mc_segmap_parloop_128364_iter;
    int64_t futhark_mc_segmap_parloop_128364_total_total_runtime;
    int futhark_mc_segmap_parloop_128364_total_runs;
    int64_t futhark_mc_segmap_parloop_128364_total_iter;
    int64_t *futhark_mc_segmap_task_128362_total_runtime;
    int *futhark_mc_segmap_task_128362_runs;
    int64_t *futhark_mc_segmap_task_128362_iter;
    int64_t futhark_mc_segmap_task_128362_total_time;
    int64_t futhark_mc_segmap_task_128362_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128374_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128374_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128374_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128374_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128374_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128374_total_iter;
    int64_t *futhark_mc_segred_task_128371_total_runtime;
    int *futhark_mc_segred_task_128371_runs;
    int64_t *futhark_mc_segred_task_128371_iter;
    int64_t futhark_mc_segred_task_128371_total_time;
    int64_t futhark_mc_segred_task_128371_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128379_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128379_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128379_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128379_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128379_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128379_total_iter;
    int64_t *futhark_mc_segred_task_128376_total_runtime;
    int *futhark_mc_segred_task_128376_runs;
    int64_t *futhark_mc_segred_task_128376_iter;
    int64_t futhark_mc_segred_task_128376_total_time;
    int64_t futhark_mc_segred_task_128376_total_iter;
    int64_t *futhark_mc_segmap_parloop_128368_total_runtime;
    int *futhark_mc_segmap_parloop_128368_runs;
    int64_t *futhark_mc_segmap_parloop_128368_iter;
    int64_t futhark_mc_segmap_parloop_128368_total_total_runtime;
    int futhark_mc_segmap_parloop_128368_total_runs;
    int64_t futhark_mc_segmap_parloop_128368_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128366_total_runtime;
    int *futhark_mc_segmap_nested_task_128366_runs;
    int64_t *futhark_mc_segmap_nested_task_128366_iter;
    int64_t *futhark_mc_segmap_parloop_128359_total_runtime;
    int *futhark_mc_segmap_parloop_128359_runs;
    int64_t *futhark_mc_segmap_parloop_128359_iter;
    int64_t futhark_mc_segmap_parloop_128359_total_total_runtime;
    int futhark_mc_segmap_parloop_128359_total_runs;
    int64_t futhark_mc_segmap_parloop_128359_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128357_total_runtime;
    int *futhark_mc_segmap_nested_task_128357_runs;
    int64_t *futhark_mc_segmap_nested_task_128357_iter;
    int64_t *futhark_mc_segmap_parloop_128383_total_runtime;
    int *futhark_mc_segmap_parloop_128383_runs;
    int64_t *futhark_mc_segmap_parloop_128383_iter;
    int64_t futhark_mc_segmap_parloop_128383_total_total_runtime;
    int futhark_mc_segmap_parloop_128383_total_runs;
    int64_t futhark_mc_segmap_parloop_128383_total_iter;
    int64_t *futhark_mc_segmap_task_128381_total_runtime;
    int *futhark_mc_segmap_task_128381_runs;
    int64_t *futhark_mc_segmap_task_128381_iter;
    int64_t futhark_mc_segmap_task_128381_total_time;
    int64_t futhark_mc_segmap_task_128381_total_iter;
    int64_t *futhark_mc_segmap_parloop_128396_total_runtime;
    int *futhark_mc_segmap_parloop_128396_runs;
    int64_t *futhark_mc_segmap_parloop_128396_iter;
    int64_t futhark_mc_segmap_parloop_128396_total_total_runtime;
    int futhark_mc_segmap_parloop_128396_total_runs;
    int64_t futhark_mc_segmap_parloop_128396_total_iter;
    int64_t *futhark_mc_segmap_task_128394_total_runtime;
    int *futhark_mc_segmap_task_128394_runs;
    int64_t *futhark_mc_segmap_task_128394_iter;
    int64_t futhark_mc_segmap_task_128394_total_time;
    int64_t futhark_mc_segmap_task_128394_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128410_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128410_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128410_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128410_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128410_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128410_total_iter;
    int64_t *futhark_mc_segred_task_128405_total_runtime;
    int *futhark_mc_segred_task_128405_runs;
    int64_t *futhark_mc_segred_task_128405_iter;
    int64_t futhark_mc_segred_task_128405_total_time;
    int64_t futhark_mc_segred_task_128405_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128416_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128416_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128416_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128416_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128416_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128416_total_iter;
    int64_t *futhark_mc_segred_task_128412_total_runtime;
    int *futhark_mc_segred_task_128412_runs;
    int64_t *futhark_mc_segred_task_128412_iter;
    int64_t futhark_mc_segred_task_128412_total_time;
    int64_t futhark_mc_segred_task_128412_total_iter;
    int64_t *futhark_mc_segmap_parloop_128401_total_runtime;
    int *futhark_mc_segmap_parloop_128401_runs;
    int64_t *futhark_mc_segmap_parloop_128401_iter;
    int64_t futhark_mc_segmap_parloop_128401_total_total_runtime;
    int futhark_mc_segmap_parloop_128401_total_runs;
    int64_t futhark_mc_segmap_parloop_128401_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128399_total_runtime;
    int *futhark_mc_segmap_nested_task_128399_runs;
    int64_t *futhark_mc_segmap_nested_task_128399_iter;
    int64_t *futhark_mc_segmap_parloop_128390_total_runtime;
    int *futhark_mc_segmap_parloop_128390_runs;
    int64_t *futhark_mc_segmap_parloop_128390_iter;
    int64_t futhark_mc_segmap_parloop_128390_total_total_runtime;
    int futhark_mc_segmap_parloop_128390_total_runs;
    int64_t futhark_mc_segmap_parloop_128390_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128388_total_runtime;
    int *futhark_mc_segmap_nested_task_128388_runs;
    int64_t *futhark_mc_segmap_nested_task_128388_iter;
    int64_t *futhark_mc_segmap_parloop_128420_total_runtime;
    int *futhark_mc_segmap_parloop_128420_runs;
    int64_t *futhark_mc_segmap_parloop_128420_iter;
    int64_t futhark_mc_segmap_parloop_128420_total_total_runtime;
    int futhark_mc_segmap_parloop_128420_total_runs;
    int64_t futhark_mc_segmap_parloop_128420_total_iter;
    int64_t *futhark_mc_segmap_task_128418_total_runtime;
    int *futhark_mc_segmap_task_128418_runs;
    int64_t *futhark_mc_segmap_task_128418_iter;
    int64_t futhark_mc_segmap_task_128418_total_time;
    int64_t futhark_mc_segmap_task_128418_total_iter;
    int64_t *futhark_mc_segmap_parloop_128435_total_runtime;
    int *futhark_mc_segmap_parloop_128435_runs;
    int64_t *futhark_mc_segmap_parloop_128435_iter;
    int64_t futhark_mc_segmap_parloop_128435_total_total_runtime;
    int futhark_mc_segmap_parloop_128435_total_runs;
    int64_t futhark_mc_segmap_parloop_128435_total_iter;
    int64_t *futhark_mc_segmap_task_128433_total_runtime;
    int *futhark_mc_segmap_task_128433_runs;
    int64_t *futhark_mc_segmap_task_128433_iter;
    int64_t futhark_mc_segmap_task_128433_total_time;
    int64_t futhark_mc_segmap_task_128433_total_iter;
    int64_t *futhark_mc_segmap_parloop_128450_total_runtime;
    int *futhark_mc_segmap_parloop_128450_runs;
    int64_t *futhark_mc_segmap_parloop_128450_iter;
    int64_t futhark_mc_segmap_parloop_128450_total_total_runtime;
    int futhark_mc_segmap_parloop_128450_total_runs;
    int64_t futhark_mc_segmap_parloop_128450_total_iter;
    int64_t *futhark_mc_segmap_task_128448_total_runtime;
    int *futhark_mc_segmap_task_128448_runs;
    int64_t *futhark_mc_segmap_task_128448_iter;
    int64_t futhark_mc_segmap_task_128448_total_time;
    int64_t futhark_mc_segmap_task_128448_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128459_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128459_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128459_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128459_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128459_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128459_total_iter;
    int64_t *futhark_mc_segred_task_128452_total_runtime;
    int *futhark_mc_segred_task_128452_runs;
    int64_t *futhark_mc_segred_task_128452_iter;
    int64_t futhark_mc_segred_task_128452_total_time;
    int64_t futhark_mc_segred_task_128452_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128465_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128465_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128465_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128465_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128465_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128465_total_iter;
    int64_t *futhark_mc_segred_task_128461_total_runtime;
    int *futhark_mc_segred_task_128461_runs;
    int64_t *futhark_mc_segred_task_128461_iter;
    int64_t futhark_mc_segred_task_128461_total_time;
    int64_t futhark_mc_segred_task_128461_total_iter;
    int64_t *futhark_mc_segmap_parloop_128442_total_runtime;
    int *futhark_mc_segmap_parloop_128442_runs;
    int64_t *futhark_mc_segmap_parloop_128442_iter;
    int64_t futhark_mc_segmap_parloop_128442_total_total_runtime;
    int futhark_mc_segmap_parloop_128442_total_runs;
    int64_t futhark_mc_segmap_parloop_128442_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128440_total_runtime;
    int *futhark_mc_segmap_nested_task_128440_runs;
    int64_t *futhark_mc_segmap_nested_task_128440_iter;
    int64_t *futhark_mc_segmap_parloop_128429_total_runtime;
    int *futhark_mc_segmap_parloop_128429_runs;
    int64_t *futhark_mc_segmap_parloop_128429_iter;
    int64_t futhark_mc_segmap_parloop_128429_total_total_runtime;
    int futhark_mc_segmap_parloop_128429_total_runs;
    int64_t futhark_mc_segmap_parloop_128429_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128427_total_runtime;
    int *futhark_mc_segmap_nested_task_128427_runs;
    int64_t *futhark_mc_segmap_nested_task_128427_iter;
    int64_t *futhark_mc_segmap_parloop_128469_total_runtime;
    int *futhark_mc_segmap_parloop_128469_runs;
    int64_t *futhark_mc_segmap_parloop_128469_iter;
    int64_t futhark_mc_segmap_parloop_128469_total_total_runtime;
    int futhark_mc_segmap_parloop_128469_total_runs;
    int64_t futhark_mc_segmap_parloop_128469_total_iter;
    int64_t *futhark_mc_segmap_task_128467_total_runtime;
    int *futhark_mc_segmap_task_128467_runs;
    int64_t *futhark_mc_segmap_task_128467_iter;
    int64_t futhark_mc_segmap_task_128467_total_time;
    int64_t futhark_mc_segmap_task_128467_total_iter;
    int64_t *futhark_mc_segmap_parloop_128478_total_runtime;
    int *futhark_mc_segmap_parloop_128478_runs;
    int64_t *futhark_mc_segmap_parloop_128478_iter;
    int64_t futhark_mc_segmap_parloop_128478_total_total_runtime;
    int futhark_mc_segmap_parloop_128478_total_runs;
    int64_t futhark_mc_segmap_parloop_128478_total_iter;
    int64_t *futhark_mc_segmap_task_128476_total_runtime;
    int *futhark_mc_segmap_task_128476_runs;
    int64_t *futhark_mc_segmap_task_128476_iter;
    int64_t futhark_mc_segmap_task_128476_total_time;
    int64_t futhark_mc_segmap_task_128476_total_iter;
    int64_t *futhark_mc_segmap_parloop_128473_total_runtime;
    int *futhark_mc_segmap_parloop_128473_runs;
    int64_t *futhark_mc_segmap_parloop_128473_iter;
    int64_t futhark_mc_segmap_parloop_128473_total_total_runtime;
    int futhark_mc_segmap_parloop_128473_total_runs;
    int64_t futhark_mc_segmap_parloop_128473_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128471_total_runtime;
    int *futhark_mc_segmap_nested_task_128471_runs;
    int64_t *futhark_mc_segmap_nested_task_128471_iter;
    int64_t *futhark_mc_segmap_parloop_128482_total_runtime;
    int *futhark_mc_segmap_parloop_128482_runs;
    int64_t *futhark_mc_segmap_parloop_128482_iter;
    int64_t futhark_mc_segmap_parloop_128482_total_total_runtime;
    int futhark_mc_segmap_parloop_128482_total_runs;
    int64_t futhark_mc_segmap_parloop_128482_total_iter;
    int64_t *futhark_mc_segmap_task_128480_total_runtime;
    int *futhark_mc_segmap_task_128480_runs;
    int64_t *futhark_mc_segmap_task_128480_iter;
    int64_t futhark_mc_segmap_task_128480_total_time;
    int64_t futhark_mc_segmap_task_128480_total_iter;
    int64_t *futhark_mc_segmap_parloop_128497_total_runtime;
    int *futhark_mc_segmap_parloop_128497_runs;
    int64_t *futhark_mc_segmap_parloop_128497_iter;
    int64_t futhark_mc_segmap_parloop_128497_total_total_runtime;
    int futhark_mc_segmap_parloop_128497_total_runs;
    int64_t futhark_mc_segmap_parloop_128497_total_iter;
    int64_t *futhark_mc_segmap_task_128495_total_runtime;
    int *futhark_mc_segmap_task_128495_runs;
    int64_t *futhark_mc_segmap_task_128495_iter;
    int64_t futhark_mc_segmap_task_128495_total_time;
    int64_t futhark_mc_segmap_task_128495_total_iter;
    int64_t *futhark_mc_segmap_parloop_128501_total_runtime;
    int *futhark_mc_segmap_parloop_128501_runs;
    int64_t *futhark_mc_segmap_parloop_128501_iter;
    int64_t futhark_mc_segmap_parloop_128501_total_total_runtime;
    int futhark_mc_segmap_parloop_128501_total_runs;
    int64_t futhark_mc_segmap_parloop_128501_total_iter;
    int64_t *futhark_mc_segmap_task_128499_total_runtime;
    int *futhark_mc_segmap_task_128499_runs;
    int64_t *futhark_mc_segmap_task_128499_iter;
    int64_t futhark_mc_segmap_task_128499_total_time;
    int64_t futhark_mc_segmap_task_128499_total_iter;
    int64_t *futhark_mc_segmap_parloop_128489_total_runtime;
    int *futhark_mc_segmap_parloop_128489_runs;
    int64_t *futhark_mc_segmap_parloop_128489_iter;
    int64_t futhark_mc_segmap_parloop_128489_total_total_runtime;
    int futhark_mc_segmap_parloop_128489_total_runs;
    int64_t futhark_mc_segmap_parloop_128489_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128487_total_runtime;
    int *futhark_mc_segmap_nested_task_128487_runs;
    int64_t *futhark_mc_segmap_nested_task_128487_iter;
    int64_t *futhark_mc_segmap_parloop_128505_total_runtime;
    int *futhark_mc_segmap_parloop_128505_runs;
    int64_t *futhark_mc_segmap_parloop_128505_iter;
    int64_t futhark_mc_segmap_parloop_128505_total_total_runtime;
    int futhark_mc_segmap_parloop_128505_total_runs;
    int64_t futhark_mc_segmap_parloop_128505_total_iter;
    int64_t *futhark_mc_segmap_task_128503_total_runtime;
    int *futhark_mc_segmap_task_128503_runs;
    int64_t *futhark_mc_segmap_task_128503_iter;
    int64_t futhark_mc_segmap_task_128503_total_time;
    int64_t futhark_mc_segmap_task_128503_total_iter;
    int64_t *futhark_mc_segmap_parloop_128514_total_runtime;
    int *futhark_mc_segmap_parloop_128514_runs;
    int64_t *futhark_mc_segmap_parloop_128514_iter;
    int64_t futhark_mc_segmap_parloop_128514_total_total_runtime;
    int futhark_mc_segmap_parloop_128514_total_runs;
    int64_t futhark_mc_segmap_parloop_128514_total_iter;
    int64_t *futhark_mc_segmap_task_128512_total_runtime;
    int *futhark_mc_segmap_task_128512_runs;
    int64_t *futhark_mc_segmap_task_128512_iter;
    int64_t futhark_mc_segmap_task_128512_total_time;
    int64_t futhark_mc_segmap_task_128512_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128522_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128522_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128522_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128522_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128522_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128522_total_iter;
    int64_t *futhark_mc_segred_task_128519_total_runtime;
    int *futhark_mc_segred_task_128519_runs;
    int64_t *futhark_mc_segred_task_128519_iter;
    int64_t futhark_mc_segred_task_128519_total_time;
    int64_t futhark_mc_segred_task_128519_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128527_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128527_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128527_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128527_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128527_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128527_total_iter;
    int64_t *futhark_mc_segred_task_128524_total_runtime;
    int *futhark_mc_segred_task_128524_runs;
    int64_t *futhark_mc_segred_task_128524_iter;
    int64_t futhark_mc_segred_task_128524_total_time;
    int64_t futhark_mc_segred_task_128524_total_iter;
    int64_t *futhark_mc_segmap_parloop_128517_total_runtime;
    int *futhark_mc_segmap_parloop_128517_runs;
    int64_t *futhark_mc_segmap_parloop_128517_iter;
    int64_t futhark_mc_segmap_parloop_128517_total_total_runtime;
    int futhark_mc_segmap_parloop_128517_total_runs;
    int64_t futhark_mc_segmap_parloop_128517_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128515_total_runtime;
    int *futhark_mc_segmap_nested_task_128515_runs;
    int64_t *futhark_mc_segmap_nested_task_128515_iter;
    int64_t *futhark_mc_segmap_parloop_128509_total_runtime;
    int *futhark_mc_segmap_parloop_128509_runs;
    int64_t *futhark_mc_segmap_parloop_128509_iter;
    int64_t futhark_mc_segmap_parloop_128509_total_total_runtime;
    int futhark_mc_segmap_parloop_128509_total_runs;
    int64_t futhark_mc_segmap_parloop_128509_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128507_total_runtime;
    int *futhark_mc_segmap_nested_task_128507_runs;
    int64_t *futhark_mc_segmap_nested_task_128507_iter;
    int64_t *futhark_mc_segmap_parloop_128531_total_runtime;
    int *futhark_mc_segmap_parloop_128531_runs;
    int64_t *futhark_mc_segmap_parloop_128531_iter;
    int64_t futhark_mc_segmap_parloop_128531_total_total_runtime;
    int futhark_mc_segmap_parloop_128531_total_runs;
    int64_t futhark_mc_segmap_parloop_128531_total_iter;
    int64_t *futhark_mc_segmap_task_128529_total_runtime;
    int *futhark_mc_segmap_task_128529_runs;
    int64_t *futhark_mc_segmap_task_128529_iter;
    int64_t futhark_mc_segmap_task_128529_total_time;
    int64_t futhark_mc_segmap_task_128529_total_iter;
    int64_t *futhark_mc_segmap_parloop_128542_total_runtime;
    int *futhark_mc_segmap_parloop_128542_runs;
    int64_t *futhark_mc_segmap_parloop_128542_iter;
    int64_t futhark_mc_segmap_parloop_128542_total_total_runtime;
    int futhark_mc_segmap_parloop_128542_total_runs;
    int64_t futhark_mc_segmap_parloop_128542_total_iter;
    int64_t *futhark_mc_segmap_task_128540_total_runtime;
    int *futhark_mc_segmap_task_128540_runs;
    int64_t *futhark_mc_segmap_task_128540_iter;
    int64_t futhark_mc_segmap_task_128540_total_time;
    int64_t futhark_mc_segmap_task_128540_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128552_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128552_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128552_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128552_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128552_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128552_total_iter;
    int64_t *futhark_mc_segred_task_128547_total_runtime;
    int *futhark_mc_segred_task_128547_runs;
    int64_t *futhark_mc_segred_task_128547_iter;
    int64_t futhark_mc_segred_task_128547_total_time;
    int64_t futhark_mc_segred_task_128547_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128558_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128558_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128558_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128558_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128558_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128558_total_iter;
    int64_t *futhark_mc_segred_task_128554_total_runtime;
    int *futhark_mc_segred_task_128554_runs;
    int64_t *futhark_mc_segred_task_128554_iter;
    int64_t futhark_mc_segred_task_128554_total_time;
    int64_t futhark_mc_segred_task_128554_total_iter;
    int64_t *futhark_mc_segmap_parloop_128545_total_runtime;
    int *futhark_mc_segmap_parloop_128545_runs;
    int64_t *futhark_mc_segmap_parloop_128545_iter;
    int64_t futhark_mc_segmap_parloop_128545_total_total_runtime;
    int futhark_mc_segmap_parloop_128545_total_runs;
    int64_t futhark_mc_segmap_parloop_128545_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128543_total_runtime;
    int *futhark_mc_segmap_nested_task_128543_runs;
    int64_t *futhark_mc_segmap_nested_task_128543_iter;
    int64_t *futhark_mc_segmap_parloop_128536_total_runtime;
    int *futhark_mc_segmap_parloop_128536_runs;
    int64_t *futhark_mc_segmap_parloop_128536_iter;
    int64_t futhark_mc_segmap_parloop_128536_total_total_runtime;
    int futhark_mc_segmap_parloop_128536_total_runs;
    int64_t futhark_mc_segmap_parloop_128536_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128534_total_runtime;
    int *futhark_mc_segmap_nested_task_128534_runs;
    int64_t *futhark_mc_segmap_nested_task_128534_iter;
    int64_t *futhark_mc_segmap_parloop_128562_total_runtime;
    int *futhark_mc_segmap_parloop_128562_runs;
    int64_t *futhark_mc_segmap_parloop_128562_iter;
    int64_t futhark_mc_segmap_parloop_128562_total_total_runtime;
    int futhark_mc_segmap_parloop_128562_total_runs;
    int64_t futhark_mc_segmap_parloop_128562_total_iter;
    int64_t *futhark_mc_segmap_task_128560_total_runtime;
    int *futhark_mc_segmap_task_128560_runs;
    int64_t *futhark_mc_segmap_task_128560_iter;
    int64_t futhark_mc_segmap_task_128560_total_time;
    int64_t futhark_mc_segmap_task_128560_total_iter;
    int64_t *futhark_mc_segmap_parloop_128573_total_runtime;
    int *futhark_mc_segmap_parloop_128573_runs;
    int64_t *futhark_mc_segmap_parloop_128573_iter;
    int64_t futhark_mc_segmap_parloop_128573_total_total_runtime;
    int futhark_mc_segmap_parloop_128573_total_runs;
    int64_t futhark_mc_segmap_parloop_128573_total_iter;
    int64_t *futhark_mc_segmap_task_128571_total_runtime;
    int *futhark_mc_segmap_task_128571_runs;
    int64_t *futhark_mc_segmap_task_128571_iter;
    int64_t futhark_mc_segmap_task_128571_total_time;
    int64_t futhark_mc_segmap_task_128571_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128585_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128585_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128585_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128585_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128585_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128585_total_iter;
    int64_t *futhark_mc_segred_task_128578_total_runtime;
    int *futhark_mc_segred_task_128578_runs;
    int64_t *futhark_mc_segred_task_128578_iter;
    int64_t futhark_mc_segred_task_128578_total_time;
    int64_t futhark_mc_segred_task_128578_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128591_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128591_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128591_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128591_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128591_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128591_total_iter;
    int64_t *futhark_mc_segred_task_128587_total_runtime;
    int *futhark_mc_segred_task_128587_runs;
    int64_t *futhark_mc_segred_task_128587_iter;
    int64_t futhark_mc_segred_task_128587_total_time;
    int64_t futhark_mc_segred_task_128587_total_iter;
    int64_t *futhark_mc_segmap_parloop_128576_total_runtime;
    int *futhark_mc_segmap_parloop_128576_runs;
    int64_t *futhark_mc_segmap_parloop_128576_iter;
    int64_t futhark_mc_segmap_parloop_128576_total_total_runtime;
    int futhark_mc_segmap_parloop_128576_total_runs;
    int64_t futhark_mc_segmap_parloop_128576_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128574_total_runtime;
    int *futhark_mc_segmap_nested_task_128574_runs;
    int64_t *futhark_mc_segmap_nested_task_128574_iter;
    int64_t *futhark_mc_segmap_parloop_128567_total_runtime;
    int *futhark_mc_segmap_parloop_128567_runs;
    int64_t *futhark_mc_segmap_parloop_128567_iter;
    int64_t futhark_mc_segmap_parloop_128567_total_total_runtime;
    int futhark_mc_segmap_parloop_128567_total_runs;
    int64_t futhark_mc_segmap_parloop_128567_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128565_total_runtime;
    int *futhark_mc_segmap_nested_task_128565_runs;
    int64_t *futhark_mc_segmap_nested_task_128565_iter;
    int64_t *futhark_mc_segmap_parloop_128595_total_runtime;
    int *futhark_mc_segmap_parloop_128595_runs;
    int64_t *futhark_mc_segmap_parloop_128595_iter;
    int64_t futhark_mc_segmap_parloop_128595_total_total_runtime;
    int futhark_mc_segmap_parloop_128595_total_runs;
    int64_t futhark_mc_segmap_parloop_128595_total_iter;
    int64_t *futhark_mc_segmap_task_128593_total_runtime;
    int *futhark_mc_segmap_task_128593_runs;
    int64_t *futhark_mc_segmap_task_128593_iter;
    int64_t futhark_mc_segmap_task_128593_total_time;
    int64_t futhark_mc_segmap_task_128593_total_iter;
    int64_t *futhark_mc_segmap_parloop_128605_total_runtime;
    int *futhark_mc_segmap_parloop_128605_runs;
    int64_t *futhark_mc_segmap_parloop_128605_iter;
    int64_t futhark_mc_segmap_parloop_128605_total_total_runtime;
    int futhark_mc_segmap_parloop_128605_total_runs;
    int64_t futhark_mc_segmap_parloop_128605_total_iter;
    int64_t *futhark_mc_segmap_task_128603_total_runtime;
    int *futhark_mc_segmap_task_128603_runs;
    int64_t *futhark_mc_segmap_task_128603_iter;
    int64_t futhark_mc_segmap_task_128603_total_time;
    int64_t futhark_mc_segmap_task_128603_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128615_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128615_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128615_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128615_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128615_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128615_total_iter;
    int64_t *futhark_mc_segred_task_128612_total_runtime;
    int *futhark_mc_segred_task_128612_runs;
    int64_t *futhark_mc_segred_task_128612_iter;
    int64_t futhark_mc_segred_task_128612_total_time;
    int64_t futhark_mc_segred_task_128612_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128620_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128620_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128620_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128620_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128620_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128620_total_iter;
    int64_t *futhark_mc_segred_task_128617_total_runtime;
    int *futhark_mc_segred_task_128617_runs;
    int64_t *futhark_mc_segred_task_128617_iter;
    int64_t futhark_mc_segred_task_128617_total_time;
    int64_t futhark_mc_segred_task_128617_total_iter;
    int64_t *futhark_mc_segmap_parloop_128609_total_runtime;
    int *futhark_mc_segmap_parloop_128609_runs;
    int64_t *futhark_mc_segmap_parloop_128609_iter;
    int64_t futhark_mc_segmap_parloop_128609_total_total_runtime;
    int futhark_mc_segmap_parloop_128609_total_runs;
    int64_t futhark_mc_segmap_parloop_128609_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128607_total_runtime;
    int *futhark_mc_segmap_nested_task_128607_runs;
    int64_t *futhark_mc_segmap_nested_task_128607_iter;
    int64_t *futhark_mc_segmap_parloop_128600_total_runtime;
    int *futhark_mc_segmap_parloop_128600_runs;
    int64_t *futhark_mc_segmap_parloop_128600_iter;
    int64_t futhark_mc_segmap_parloop_128600_total_total_runtime;
    int futhark_mc_segmap_parloop_128600_total_runs;
    int64_t futhark_mc_segmap_parloop_128600_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128598_total_runtime;
    int *futhark_mc_segmap_nested_task_128598_runs;
    int64_t *futhark_mc_segmap_nested_task_128598_iter;
    int64_t *futhark_mc_segmap_parloop_128624_total_runtime;
    int *futhark_mc_segmap_parloop_128624_runs;
    int64_t *futhark_mc_segmap_parloop_128624_iter;
    int64_t futhark_mc_segmap_parloop_128624_total_total_runtime;
    int futhark_mc_segmap_parloop_128624_total_runs;
    int64_t futhark_mc_segmap_parloop_128624_total_iter;
    int64_t *futhark_mc_segmap_task_128622_total_runtime;
    int *futhark_mc_segmap_task_128622_runs;
    int64_t *futhark_mc_segmap_task_128622_iter;
    int64_t futhark_mc_segmap_task_128622_total_time;
    int64_t futhark_mc_segmap_task_128622_total_iter;
    int64_t *futhark_mc_segmap_parloop_128637_total_runtime;
    int *futhark_mc_segmap_parloop_128637_runs;
    int64_t *futhark_mc_segmap_parloop_128637_iter;
    int64_t futhark_mc_segmap_parloop_128637_total_total_runtime;
    int futhark_mc_segmap_parloop_128637_total_runs;
    int64_t futhark_mc_segmap_parloop_128637_total_iter;
    int64_t *futhark_mc_segmap_task_128635_total_runtime;
    int *futhark_mc_segmap_task_128635_runs;
    int64_t *futhark_mc_segmap_task_128635_iter;
    int64_t futhark_mc_segmap_task_128635_total_time;
    int64_t futhark_mc_segmap_task_128635_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128651_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128651_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128651_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128651_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128651_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128651_total_iter;
    int64_t *futhark_mc_segred_task_128646_total_runtime;
    int *futhark_mc_segred_task_128646_runs;
    int64_t *futhark_mc_segred_task_128646_iter;
    int64_t futhark_mc_segred_task_128646_total_time;
    int64_t futhark_mc_segred_task_128646_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128657_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128657_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128657_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128657_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128657_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128657_total_iter;
    int64_t *futhark_mc_segred_task_128653_total_runtime;
    int *futhark_mc_segred_task_128653_runs;
    int64_t *futhark_mc_segred_task_128653_iter;
    int64_t futhark_mc_segred_task_128653_total_time;
    int64_t futhark_mc_segred_task_128653_total_iter;
    int64_t *futhark_mc_segmap_parloop_128642_total_runtime;
    int *futhark_mc_segmap_parloop_128642_runs;
    int64_t *futhark_mc_segmap_parloop_128642_iter;
    int64_t futhark_mc_segmap_parloop_128642_total_total_runtime;
    int futhark_mc_segmap_parloop_128642_total_runs;
    int64_t futhark_mc_segmap_parloop_128642_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128640_total_runtime;
    int *futhark_mc_segmap_nested_task_128640_runs;
    int64_t *futhark_mc_segmap_nested_task_128640_iter;
    int64_t *futhark_mc_segmap_parloop_128631_total_runtime;
    int *futhark_mc_segmap_parloop_128631_runs;
    int64_t *futhark_mc_segmap_parloop_128631_iter;
    int64_t futhark_mc_segmap_parloop_128631_total_total_runtime;
    int futhark_mc_segmap_parloop_128631_total_runs;
    int64_t futhark_mc_segmap_parloop_128631_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128629_total_runtime;
    int *futhark_mc_segmap_nested_task_128629_runs;
    int64_t *futhark_mc_segmap_nested_task_128629_iter;
    int64_t *futhark_mc_segmap_parloop_128661_total_runtime;
    int *futhark_mc_segmap_parloop_128661_runs;
    int64_t *futhark_mc_segmap_parloop_128661_iter;
    int64_t futhark_mc_segmap_parloop_128661_total_total_runtime;
    int futhark_mc_segmap_parloop_128661_total_runs;
    int64_t futhark_mc_segmap_parloop_128661_total_iter;
    int64_t *futhark_mc_segmap_task_128659_total_runtime;
    int *futhark_mc_segmap_task_128659_runs;
    int64_t *futhark_mc_segmap_task_128659_iter;
    int64_t futhark_mc_segmap_task_128659_total_time;
    int64_t futhark_mc_segmap_task_128659_total_iter;
    int64_t *futhark_mc_segmap_parloop_128676_total_runtime;
    int *futhark_mc_segmap_parloop_128676_runs;
    int64_t *futhark_mc_segmap_parloop_128676_iter;
    int64_t futhark_mc_segmap_parloop_128676_total_total_runtime;
    int futhark_mc_segmap_parloop_128676_total_runs;
    int64_t futhark_mc_segmap_parloop_128676_total_iter;
    int64_t *futhark_mc_segmap_task_128674_total_runtime;
    int *futhark_mc_segmap_task_128674_runs;
    int64_t *futhark_mc_segmap_task_128674_iter;
    int64_t futhark_mc_segmap_task_128674_total_time;
    int64_t futhark_mc_segmap_task_128674_total_iter;
    int64_t *futhark_mc_segmap_parloop_128691_total_runtime;
    int *futhark_mc_segmap_parloop_128691_runs;
    int64_t *futhark_mc_segmap_parloop_128691_iter;
    int64_t futhark_mc_segmap_parloop_128691_total_total_runtime;
    int futhark_mc_segmap_parloop_128691_total_runs;
    int64_t futhark_mc_segmap_parloop_128691_total_iter;
    int64_t *futhark_mc_segmap_task_128689_total_runtime;
    int *futhark_mc_segmap_task_128689_runs;
    int64_t *futhark_mc_segmap_task_128689_iter;
    int64_t futhark_mc_segmap_task_128689_total_time;
    int64_t futhark_mc_segmap_task_128689_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128700_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128700_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128700_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128700_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128700_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128700_total_iter;
    int64_t *futhark_mc_segred_task_128693_total_runtime;
    int *futhark_mc_segred_task_128693_runs;
    int64_t *futhark_mc_segred_task_128693_iter;
    int64_t futhark_mc_segred_task_128693_total_time;
    int64_t futhark_mc_segred_task_128693_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128706_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128706_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128706_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128706_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128706_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128706_total_iter;
    int64_t *futhark_mc_segred_task_128702_total_runtime;
    int *futhark_mc_segred_task_128702_runs;
    int64_t *futhark_mc_segred_task_128702_iter;
    int64_t futhark_mc_segred_task_128702_total_time;
    int64_t futhark_mc_segred_task_128702_total_iter;
    int64_t *futhark_mc_segmap_parloop_128683_total_runtime;
    int *futhark_mc_segmap_parloop_128683_runs;
    int64_t *futhark_mc_segmap_parloop_128683_iter;
    int64_t futhark_mc_segmap_parloop_128683_total_total_runtime;
    int futhark_mc_segmap_parloop_128683_total_runs;
    int64_t futhark_mc_segmap_parloop_128683_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128681_total_runtime;
    int *futhark_mc_segmap_nested_task_128681_runs;
    int64_t *futhark_mc_segmap_nested_task_128681_iter;
    int64_t *futhark_mc_segmap_parloop_128670_total_runtime;
    int *futhark_mc_segmap_parloop_128670_runs;
    int64_t *futhark_mc_segmap_parloop_128670_iter;
    int64_t futhark_mc_segmap_parloop_128670_total_total_runtime;
    int futhark_mc_segmap_parloop_128670_total_runs;
    int64_t futhark_mc_segmap_parloop_128670_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128668_total_runtime;
    int *futhark_mc_segmap_nested_task_128668_runs;
    int64_t *futhark_mc_segmap_nested_task_128668_iter;
    int64_t *futhark_mc_segmap_parloop_128710_total_runtime;
    int *futhark_mc_segmap_parloop_128710_runs;
    int64_t *futhark_mc_segmap_parloop_128710_iter;
    int64_t futhark_mc_segmap_parloop_128710_total_total_runtime;
    int futhark_mc_segmap_parloop_128710_total_runs;
    int64_t futhark_mc_segmap_parloop_128710_total_iter;
    int64_t *futhark_mc_segmap_task_128708_total_runtime;
    int *futhark_mc_segmap_task_128708_runs;
    int64_t *futhark_mc_segmap_task_128708_iter;
    int64_t futhark_mc_segmap_task_128708_total_time;
    int64_t futhark_mc_segmap_task_128708_total_iter;
    int64_t *futhark_mc_segmap_parloop_128719_total_runtime;
    int *futhark_mc_segmap_parloop_128719_runs;
    int64_t *futhark_mc_segmap_parloop_128719_iter;
    int64_t futhark_mc_segmap_parloop_128719_total_total_runtime;
    int futhark_mc_segmap_parloop_128719_total_runs;
    int64_t futhark_mc_segmap_parloop_128719_total_iter;
    int64_t *futhark_mc_segmap_task_128717_total_runtime;
    int *futhark_mc_segmap_task_128717_runs;
    int64_t *futhark_mc_segmap_task_128717_iter;
    int64_t futhark_mc_segmap_task_128717_total_time;
    int64_t futhark_mc_segmap_task_128717_total_iter;
    int64_t *futhark_mc_segmap_parloop_128714_total_runtime;
    int *futhark_mc_segmap_parloop_128714_runs;
    int64_t *futhark_mc_segmap_parloop_128714_iter;
    int64_t futhark_mc_segmap_parloop_128714_total_total_runtime;
    int futhark_mc_segmap_parloop_128714_total_runs;
    int64_t futhark_mc_segmap_parloop_128714_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128712_total_runtime;
    int *futhark_mc_segmap_nested_task_128712_runs;
    int64_t *futhark_mc_segmap_nested_task_128712_iter;
    int64_t *futhark_mc_segmap_parloop_128723_total_runtime;
    int *futhark_mc_segmap_parloop_128723_runs;
    int64_t *futhark_mc_segmap_parloop_128723_iter;
    int64_t futhark_mc_segmap_parloop_128723_total_total_runtime;
    int futhark_mc_segmap_parloop_128723_total_runs;
    int64_t futhark_mc_segmap_parloop_128723_total_iter;
    int64_t *futhark_mc_segmap_task_128721_total_runtime;
    int *futhark_mc_segmap_task_128721_runs;
    int64_t *futhark_mc_segmap_task_128721_iter;
    int64_t futhark_mc_segmap_task_128721_total_time;
    int64_t futhark_mc_segmap_task_128721_total_iter;
    int64_t *futhark_mc_segmap_parloop_128732_total_runtime;
    int *futhark_mc_segmap_parloop_128732_runs;
    int64_t *futhark_mc_segmap_parloop_128732_iter;
    int64_t futhark_mc_segmap_parloop_128732_total_total_runtime;
    int futhark_mc_segmap_parloop_128732_total_runs;
    int64_t futhark_mc_segmap_parloop_128732_total_iter;
    int64_t *futhark_mc_segmap_task_128730_total_runtime;
    int *futhark_mc_segmap_task_128730_runs;
    int64_t *futhark_mc_segmap_task_128730_iter;
    int64_t futhark_mc_segmap_task_128730_total_time;
    int64_t futhark_mc_segmap_task_128730_total_iter;
    int64_t *futhark_mc_segmap_parloop_128727_total_runtime;
    int *futhark_mc_segmap_parloop_128727_runs;
    int64_t *futhark_mc_segmap_parloop_128727_iter;
    int64_t futhark_mc_segmap_parloop_128727_total_total_runtime;
    int futhark_mc_segmap_parloop_128727_total_runs;
    int64_t futhark_mc_segmap_parloop_128727_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128725_total_runtime;
    int *futhark_mc_segmap_nested_task_128725_runs;
    int64_t *futhark_mc_segmap_nested_task_128725_iter;
    int64_t *futhark_mc_segmap_parloop_128736_total_runtime;
    int *futhark_mc_segmap_parloop_128736_runs;
    int64_t *futhark_mc_segmap_parloop_128736_iter;
    int64_t futhark_mc_segmap_parloop_128736_total_total_runtime;
    int futhark_mc_segmap_parloop_128736_total_runs;
    int64_t futhark_mc_segmap_parloop_128736_total_iter;
    int64_t *futhark_mc_segmap_task_128734_total_runtime;
    int *futhark_mc_segmap_task_128734_runs;
    int64_t *futhark_mc_segmap_task_128734_iter;
    int64_t futhark_mc_segmap_task_128734_total_time;
    int64_t futhark_mc_segmap_task_128734_total_iter;
    int64_t *futhark_mc_segmap_parloop_128745_total_runtime;
    int *futhark_mc_segmap_parloop_128745_runs;
    int64_t *futhark_mc_segmap_parloop_128745_iter;
    int64_t futhark_mc_segmap_parloop_128745_total_total_runtime;
    int futhark_mc_segmap_parloop_128745_total_runs;
    int64_t futhark_mc_segmap_parloop_128745_total_iter;
    int64_t *futhark_mc_segmap_task_128743_total_runtime;
    int *futhark_mc_segmap_task_128743_runs;
    int64_t *futhark_mc_segmap_task_128743_iter;
    int64_t futhark_mc_segmap_task_128743_total_time;
    int64_t futhark_mc_segmap_task_128743_total_iter;
    int64_t *futhark_mc_segmap_parloop_128740_total_runtime;
    int *futhark_mc_segmap_parloop_128740_runs;
    int64_t *futhark_mc_segmap_parloop_128740_iter;
    int64_t futhark_mc_segmap_parloop_128740_total_total_runtime;
    int futhark_mc_segmap_parloop_128740_total_runs;
    int64_t futhark_mc_segmap_parloop_128740_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128738_total_runtime;
    int *futhark_mc_segmap_nested_task_128738_runs;
    int64_t *futhark_mc_segmap_nested_task_128738_iter;
    int64_t *futhark_mc_segmap_parloop_128749_total_runtime;
    int *futhark_mc_segmap_parloop_128749_runs;
    int64_t *futhark_mc_segmap_parloop_128749_iter;
    int64_t futhark_mc_segmap_parloop_128749_total_total_runtime;
    int futhark_mc_segmap_parloop_128749_total_runs;
    int64_t futhark_mc_segmap_parloop_128749_total_iter;
    int64_t *futhark_mc_segmap_task_128747_total_runtime;
    int *futhark_mc_segmap_task_128747_runs;
    int64_t *futhark_mc_segmap_task_128747_iter;
    int64_t futhark_mc_segmap_task_128747_total_time;
    int64_t futhark_mc_segmap_task_128747_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128774_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128774_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128774_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128774_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128774_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128774_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128776_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128776_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128776_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128776_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128776_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128776_total_iter;
    int64_t *futhark_mc_segscan_task_128768_total_runtime;
    int *futhark_mc_segscan_task_128768_runs;
    int64_t *futhark_mc_segscan_task_128768_iter;
    int64_t futhark_mc_segscan_task_128768_total_time;
    int64_t futhark_mc_segscan_task_128768_total_iter;
    int64_t *futhark_mc_segmap_parloop_128780_total_runtime;
    int *futhark_mc_segmap_parloop_128780_runs;
    int64_t *futhark_mc_segmap_parloop_128780_iter;
    int64_t futhark_mc_segmap_parloop_128780_total_total_runtime;
    int futhark_mc_segmap_parloop_128780_total_runs;
    int64_t futhark_mc_segmap_parloop_128780_total_iter;
    int64_t *futhark_mc_segmap_task_128778_total_runtime;
    int *futhark_mc_segmap_task_128778_runs;
    int64_t *futhark_mc_segmap_task_128778_iter;
    int64_t futhark_mc_segmap_task_128778_total_time;
    int64_t futhark_mc_segmap_task_128778_total_iter;
    int64_t *futhark_mc_segmap_parloop_128759_total_runtime;
    int *futhark_mc_segmap_parloop_128759_runs;
    int64_t *futhark_mc_segmap_parloop_128759_iter;
    int64_t futhark_mc_segmap_parloop_128759_total_total_runtime;
    int futhark_mc_segmap_parloop_128759_total_runs;
    int64_t futhark_mc_segmap_parloop_128759_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128757_total_runtime;
    int *futhark_mc_segmap_nested_task_128757_runs;
    int64_t *futhark_mc_segmap_nested_task_128757_iter;
    int64_t *futhark_mc_segmap_parloop_128784_total_runtime;
    int *futhark_mc_segmap_parloop_128784_runs;
    int64_t *futhark_mc_segmap_parloop_128784_iter;
    int64_t futhark_mc_segmap_parloop_128784_total_total_runtime;
    int futhark_mc_segmap_parloop_128784_total_runs;
    int64_t futhark_mc_segmap_parloop_128784_total_iter;
    int64_t *futhark_mc_segmap_task_128782_total_runtime;
    int *futhark_mc_segmap_task_128782_runs;
    int64_t *futhark_mc_segmap_task_128782_iter;
    int64_t futhark_mc_segmap_task_128782_total_time;
    int64_t futhark_mc_segmap_task_128782_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128792_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128792_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128792_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128792_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128792_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128792_total_iter;
    int64_t *futhark_mc_segred_task_128789_total_runtime;
    int *futhark_mc_segred_task_128789_runs;
    int64_t *futhark_mc_segred_task_128789_iter;
    int64_t futhark_mc_segred_task_128789_total_time;
    int64_t futhark_mc_segred_task_128789_total_iter;
    int64_t *futhark_mc_segmap_parloop_128787_total_runtime;
    int *futhark_mc_segmap_parloop_128787_runs;
    int64_t *futhark_mc_segmap_parloop_128787_iter;
    int64_t futhark_mc_segmap_parloop_128787_total_total_runtime;
    int futhark_mc_segmap_parloop_128787_total_runs;
    int64_t futhark_mc_segmap_parloop_128787_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128785_total_runtime;
    int *futhark_mc_segmap_nested_task_128785_runs;
    int64_t *futhark_mc_segmap_nested_task_128785_iter;
    int64_t *futhark_mc_segmap_parloop_128796_total_runtime;
    int *futhark_mc_segmap_parloop_128796_runs;
    int64_t *futhark_mc_segmap_parloop_128796_iter;
    int64_t futhark_mc_segmap_parloop_128796_total_total_runtime;
    int futhark_mc_segmap_parloop_128796_total_runs;
    int64_t futhark_mc_segmap_parloop_128796_total_iter;
    int64_t *futhark_mc_segmap_task_128794_total_runtime;
    int *futhark_mc_segmap_task_128794_runs;
    int64_t *futhark_mc_segmap_task_128794_iter;
    int64_t futhark_mc_segmap_task_128794_total_time;
    int64_t futhark_mc_segmap_task_128794_total_iter;
    int64_t *futhark_mc_segmap_parloop_128805_total_runtime;
    int *futhark_mc_segmap_parloop_128805_runs;
    int64_t *futhark_mc_segmap_parloop_128805_iter;
    int64_t futhark_mc_segmap_parloop_128805_total_total_runtime;
    int futhark_mc_segmap_parloop_128805_total_runs;
    int64_t futhark_mc_segmap_parloop_128805_total_iter;
    int64_t *futhark_mc_segmap_task_128803_total_runtime;
    int *futhark_mc_segmap_task_128803_runs;
    int64_t *futhark_mc_segmap_task_128803_iter;
    int64_t futhark_mc_segmap_task_128803_total_time;
    int64_t futhark_mc_segmap_task_128803_total_iter;
    int64_t *futhark_mc_segmap_parloop_128800_total_runtime;
    int *futhark_mc_segmap_parloop_128800_runs;
    int64_t *futhark_mc_segmap_parloop_128800_iter;
    int64_t futhark_mc_segmap_parloop_128800_total_total_runtime;
    int futhark_mc_segmap_parloop_128800_total_runs;
    int64_t futhark_mc_segmap_parloop_128800_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128798_total_runtime;
    int *futhark_mc_segmap_nested_task_128798_runs;
    int64_t *futhark_mc_segmap_nested_task_128798_iter;
    int64_t *futhark_mc_segmap_parloop_128809_total_runtime;
    int *futhark_mc_segmap_parloop_128809_runs;
    int64_t *futhark_mc_segmap_parloop_128809_iter;
    int64_t futhark_mc_segmap_parloop_128809_total_total_runtime;
    int futhark_mc_segmap_parloop_128809_total_runs;
    int64_t futhark_mc_segmap_parloop_128809_total_iter;
    int64_t *futhark_mc_segmap_task_128807_total_runtime;
    int *futhark_mc_segmap_task_128807_runs;
    int64_t *futhark_mc_segmap_task_128807_iter;
    int64_t futhark_mc_segmap_task_128807_total_time;
    int64_t futhark_mc_segmap_task_128807_total_iter;
    int64_t *futhark_mc_segmap_parloop_128818_total_runtime;
    int *futhark_mc_segmap_parloop_128818_runs;
    int64_t *futhark_mc_segmap_parloop_128818_iter;
    int64_t futhark_mc_segmap_parloop_128818_total_total_runtime;
    int futhark_mc_segmap_parloop_128818_total_runs;
    int64_t futhark_mc_segmap_parloop_128818_total_iter;
    int64_t *futhark_mc_segmap_task_128816_total_runtime;
    int *futhark_mc_segmap_task_128816_runs;
    int64_t *futhark_mc_segmap_task_128816_iter;
    int64_t futhark_mc_segmap_task_128816_total_time;
    int64_t futhark_mc_segmap_task_128816_total_iter;
    int64_t *futhark_mc_segmap_parloop_128813_total_runtime;
    int *futhark_mc_segmap_parloop_128813_runs;
    int64_t *futhark_mc_segmap_parloop_128813_iter;
    int64_t futhark_mc_segmap_parloop_128813_total_total_runtime;
    int futhark_mc_segmap_parloop_128813_total_runs;
    int64_t futhark_mc_segmap_parloop_128813_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128811_total_runtime;
    int *futhark_mc_segmap_nested_task_128811_runs;
    int64_t *futhark_mc_segmap_nested_task_128811_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_128057_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128057_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128057_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128057_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128057_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128057_total_iter = 0;
    ctx->futhark_mc_segmap_task_128055_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128055_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128055_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128055_total_time = 0;
    ctx->futhark_mc_segmap_task_128055_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128069_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128069_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128069_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128071_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128071_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128071_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter = 0;
    ctx->futhark_mc_segscan_task_128066_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128066_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128066_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128066_total_time = 0;
    ctx->futhark_mc_segscan_task_128066_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128075_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128075_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128075_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128075_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128075_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128075_total_iter = 0;
    ctx->futhark_mc_segmap_task_128073_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128073_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128073_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128073_total_time = 0;
    ctx->futhark_mc_segmap_task_128073_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128062_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128062_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128062_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128062_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128062_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128062_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128060_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128060_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128060_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128079_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128079_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128079_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128079_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128079_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128079_total_iter = 0;
    ctx->futhark_mc_segmap_task_128077_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128077_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128077_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128077_total_time = 0;
    ctx->futhark_mc_segmap_task_128077_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128088_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128088_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128088_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128088_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128088_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128088_total_iter = 0;
    ctx->futhark_mc_segmap_task_128086_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128086_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128086_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128086_total_time = 0;
    ctx->futhark_mc_segmap_task_128086_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128083_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128083_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128083_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128083_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128083_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128083_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128081_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128081_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128081_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128092_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128092_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128092_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128092_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128092_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128092_total_iter = 0;
    ctx->futhark_mc_segmap_task_128090_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128090_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128090_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128090_total_time = 0;
    ctx->futhark_mc_segmap_task_128090_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128101_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128101_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128101_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128101_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128101_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128101_total_iter = 0;
    ctx->futhark_mc_segmap_task_128099_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128099_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128099_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128099_total_time = 0;
    ctx->futhark_mc_segmap_task_128099_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128096_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128096_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128096_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128096_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128096_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128096_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128094_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128094_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128094_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128105_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128105_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128105_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128105_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128105_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128105_total_iter = 0;
    ctx->futhark_mc_segmap_task_128103_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128103_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128103_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128103_total_time = 0;
    ctx->futhark_mc_segmap_task_128103_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128114_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128114_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128114_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128114_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128114_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128114_total_iter = 0;
    ctx->futhark_mc_segmap_task_128112_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128112_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128112_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128112_total_time = 0;
    ctx->futhark_mc_segmap_task_128112_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128122_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128122_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128122_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter = 0;
    ctx->futhark_mc_segred_task_128119_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128119_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128119_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128119_total_time = 0;
    ctx->futhark_mc_segred_task_128119_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128117_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128117_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128117_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128117_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128117_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128117_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128115_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128115_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128115_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128109_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128109_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128109_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128109_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128109_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128109_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128107_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128107_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128107_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128126_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128126_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128126_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128126_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128126_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128126_total_iter = 0;
    ctx->futhark_mc_segmap_task_128124_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128124_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128124_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128124_total_time = 0;
    ctx->futhark_mc_segmap_task_128124_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128139_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128139_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128139_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128139_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128139_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128139_total_iter = 0;
    ctx->futhark_mc_segmap_task_128137_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128137_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128137_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128137_total_time = 0;
    ctx->futhark_mc_segmap_task_128137_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128143_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128143_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128143_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128143_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128143_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128143_total_iter = 0;
    ctx->futhark_mc_segmap_task_128141_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128141_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128141_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128141_total_time = 0;
    ctx->futhark_mc_segmap_task_128141_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128132_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128132_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128132_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128132_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128132_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128132_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128130_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128130_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128130_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128147_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128147_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128147_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128147_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128147_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128147_total_iter = 0;
    ctx->futhark_mc_segmap_task_128145_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128145_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128145_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128145_total_time = 0;
    ctx->futhark_mc_segmap_task_128145_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128160_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128160_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128160_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128160_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128160_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128160_total_iter = 0;
    ctx->futhark_mc_segmap_task_128158_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128158_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128158_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128158_total_time = 0;
    ctx->futhark_mc_segmap_task_128158_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128164_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128164_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128164_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128164_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128164_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128164_total_iter = 0;
    ctx->futhark_mc_segmap_task_128162_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128162_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128162_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128162_total_time = 0;
    ctx->futhark_mc_segmap_task_128162_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128153_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128153_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128153_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128153_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128153_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128153_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128151_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128151_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128151_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128168_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128168_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128168_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128168_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128168_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128168_total_iter = 0;
    ctx->futhark_mc_segmap_task_128166_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128166_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128166_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128166_total_time = 0;
    ctx->futhark_mc_segmap_task_128166_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128177_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128177_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128177_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128177_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128177_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128177_total_iter = 0;
    ctx->futhark_mc_segmap_task_128175_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128175_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128175_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128175_total_time = 0;
    ctx->futhark_mc_segmap_task_128175_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128172_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128172_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128172_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128172_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128172_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128172_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128170_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128170_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128170_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128181_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128181_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128181_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128181_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128181_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128181_total_iter = 0;
    ctx->futhark_mc_segmap_task_128179_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128179_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128179_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128179_total_time = 0;
    ctx->futhark_mc_segmap_task_128179_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128190_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128190_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128190_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128190_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128190_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128190_total_iter = 0;
    ctx->futhark_mc_segmap_task_128188_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128188_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128188_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128188_total_time = 0;
    ctx->futhark_mc_segmap_task_128188_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128198_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128198_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128198_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter = 0;
    ctx->futhark_mc_segred_task_128195_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128195_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128195_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128195_total_time = 0;
    ctx->futhark_mc_segred_task_128195_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128193_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128193_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128193_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128193_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128193_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128193_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128191_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128191_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128191_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128185_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128185_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128185_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128185_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128185_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128185_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128183_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128183_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128183_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128202_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128202_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128202_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128202_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128202_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128202_total_iter = 0;
    ctx->futhark_mc_segmap_task_128200_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128200_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128200_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128200_total_time = 0;
    ctx->futhark_mc_segmap_task_128200_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128211_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128211_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128211_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128211_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128211_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128211_total_iter = 0;
    ctx->futhark_mc_segmap_task_128209_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128209_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128209_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128209_total_time = 0;
    ctx->futhark_mc_segmap_task_128209_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128206_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128206_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128206_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128206_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128206_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128206_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128204_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128204_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128204_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128215_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128215_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128215_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128215_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128215_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128215_total_iter = 0;
    ctx->futhark_mc_segmap_task_128213_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128213_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128213_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128213_total_time = 0;
    ctx->futhark_mc_segmap_task_128213_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128229_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128229_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128229_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter = 0;
    ctx->futhark_mc_segred_task_128226_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128226_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128226_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128226_total_time = 0;
    ctx->futhark_mc_segred_task_128226_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128234_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128234_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128234_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128236_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128236_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128236_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter = 0;
    ctx->futhark_mc_segscan_task_128231_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128231_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128231_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128231_total_time = 0;
    ctx->futhark_mc_segscan_task_128231_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128241_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128241_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128241_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter = 0;
    ctx->futhark_mc_segred_task_128238_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128238_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128238_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128238_total_time = 0;
    ctx->futhark_mc_segred_task_128238_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128246_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128246_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128246_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128248_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128248_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128248_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter = 0;
    ctx->futhark_mc_segscan_task_128243_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128243_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128243_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128243_total_time = 0;
    ctx->futhark_mc_segscan_task_128243_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128253_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128253_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128253_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter = 0;
    ctx->futhark_mc_segred_task_128250_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128250_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128250_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128250_total_time = 0;
    ctx->futhark_mc_segred_task_128250_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128258_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128258_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128258_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128260_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128260_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128260_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter = 0;
    ctx->futhark_mc_segscan_task_128255_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128255_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128255_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128255_total_time = 0;
    ctx->futhark_mc_segscan_task_128255_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128221_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128221_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128221_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128221_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128221_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128221_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128219_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128219_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128219_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128264_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128264_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128264_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128264_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128264_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128264_total_iter = 0;
    ctx->futhark_mc_segmap_task_128262_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128262_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128262_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128262_total_time = 0;
    ctx->futhark_mc_segmap_task_128262_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128273_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128273_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128273_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128273_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128273_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128273_total_iter = 0;
    ctx->futhark_mc_segmap_task_128271_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128271_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128271_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128271_total_time = 0;
    ctx->futhark_mc_segmap_task_128271_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128281_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128281_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128281_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter = 0;
    ctx->futhark_mc_segred_task_128278_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128278_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128278_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128278_total_time = 0;
    ctx->futhark_mc_segred_task_128278_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128286_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128286_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128286_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter = 0;
    ctx->futhark_mc_segred_task_128283_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128283_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128283_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128283_total_time = 0;
    ctx->futhark_mc_segred_task_128283_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128276_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128276_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128276_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128276_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128276_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128276_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128274_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128274_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128274_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128268_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128268_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128268_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128268_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128268_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128268_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128266_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128266_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128266_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128290_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128290_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128290_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128290_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128290_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128290_total_iter = 0;
    ctx->futhark_mc_segmap_task_128288_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128288_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128288_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128288_total_time = 0;
    ctx->futhark_mc_segmap_task_128288_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128301_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128301_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128301_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128301_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128301_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128301_total_iter = 0;
    ctx->futhark_mc_segmap_task_128299_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128299_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128299_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128299_total_time = 0;
    ctx->futhark_mc_segmap_task_128299_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128311_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128311_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128311_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter = 0;
    ctx->futhark_mc_segred_task_128306_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128306_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128306_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128306_total_time = 0;
    ctx->futhark_mc_segred_task_128306_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128317_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128317_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128317_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter = 0;
    ctx->futhark_mc_segred_task_128313_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128313_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128313_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128313_total_time = 0;
    ctx->futhark_mc_segred_task_128313_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128304_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128304_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128304_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128304_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128304_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128304_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128302_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128302_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128302_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128295_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128295_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128295_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128295_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128295_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128295_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128293_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128293_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128293_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128321_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128321_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128321_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128321_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128321_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128321_total_iter = 0;
    ctx->futhark_mc_segmap_task_128319_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128319_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128319_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128319_total_time = 0;
    ctx->futhark_mc_segmap_task_128319_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128332_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128332_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128332_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128332_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128332_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128332_total_iter = 0;
    ctx->futhark_mc_segmap_task_128330_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128330_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128330_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128330_total_time = 0;
    ctx->futhark_mc_segmap_task_128330_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128344_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128344_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128344_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter = 0;
    ctx->futhark_mc_segred_task_128337_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128337_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128337_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128337_total_time = 0;
    ctx->futhark_mc_segred_task_128337_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128350_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128350_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128350_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter = 0;
    ctx->futhark_mc_segred_task_128346_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128346_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128346_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128346_total_time = 0;
    ctx->futhark_mc_segred_task_128346_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128335_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128335_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128335_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128335_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128335_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128335_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128333_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128333_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128333_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128326_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128326_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128326_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128326_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128326_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128326_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128324_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128324_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128324_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128354_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128354_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128354_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128354_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128354_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128354_total_iter = 0;
    ctx->futhark_mc_segmap_task_128352_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128352_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128352_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128352_total_time = 0;
    ctx->futhark_mc_segmap_task_128352_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128364_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128364_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128364_total_iter = 0;
    ctx->futhark_mc_segmap_task_128362_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_total_time = 0;
    ctx->futhark_mc_segmap_task_128362_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128374_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128374_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128374_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter = 0;
    ctx->futhark_mc_segred_task_128371_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128371_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128371_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128371_total_time = 0;
    ctx->futhark_mc_segred_task_128371_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128379_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128379_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128379_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter = 0;
    ctx->futhark_mc_segred_task_128376_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128376_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128376_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128376_total_time = 0;
    ctx->futhark_mc_segred_task_128376_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128366_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128366_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128366_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128359_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128359_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128359_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128359_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128359_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128359_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128357_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128357_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128357_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128383_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128383_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128383_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128383_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128383_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128383_total_iter = 0;
    ctx->futhark_mc_segmap_task_128381_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128381_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128381_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128381_total_time = 0;
    ctx->futhark_mc_segmap_task_128381_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128396_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128396_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128396_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128396_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128396_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128396_total_iter = 0;
    ctx->futhark_mc_segmap_task_128394_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128394_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128394_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128394_total_time = 0;
    ctx->futhark_mc_segmap_task_128394_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128410_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128410_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128410_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter = 0;
    ctx->futhark_mc_segred_task_128405_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128405_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128405_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128405_total_time = 0;
    ctx->futhark_mc_segred_task_128405_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128416_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128416_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128416_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter = 0;
    ctx->futhark_mc_segred_task_128412_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128412_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128412_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128412_total_time = 0;
    ctx->futhark_mc_segred_task_128412_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128401_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128401_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128401_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128401_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128401_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128401_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128399_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128399_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128399_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128390_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128390_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128390_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128390_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128390_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128390_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128388_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128388_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128388_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128420_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128420_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128420_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128420_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128420_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128420_total_iter = 0;
    ctx->futhark_mc_segmap_task_128418_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128418_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128418_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128418_total_time = 0;
    ctx->futhark_mc_segmap_task_128418_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128435_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128435_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128435_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128435_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128435_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128435_total_iter = 0;
    ctx->futhark_mc_segmap_task_128433_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128433_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128433_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128433_total_time = 0;
    ctx->futhark_mc_segmap_task_128433_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128450_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128450_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128450_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128450_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128450_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128450_total_iter = 0;
    ctx->futhark_mc_segmap_task_128448_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128448_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128448_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128448_total_time = 0;
    ctx->futhark_mc_segmap_task_128448_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128459_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128459_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128459_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter = 0;
    ctx->futhark_mc_segred_task_128452_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128452_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128452_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128452_total_time = 0;
    ctx->futhark_mc_segred_task_128452_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128465_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128465_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128465_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter = 0;
    ctx->futhark_mc_segred_task_128461_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128461_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128461_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128461_total_time = 0;
    ctx->futhark_mc_segred_task_128461_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128442_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128442_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128442_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128442_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128442_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128442_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128440_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128440_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128440_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128429_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128429_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128429_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128429_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128429_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128429_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128427_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128427_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128427_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128469_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128469_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128469_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128469_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128469_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128469_total_iter = 0;
    ctx->futhark_mc_segmap_task_128467_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128467_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128467_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128467_total_time = 0;
    ctx->futhark_mc_segmap_task_128467_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_iter = 0;
    ctx->futhark_mc_segmap_task_128476_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128476_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128476_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128476_total_time = 0;
    ctx->futhark_mc_segmap_task_128476_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128473_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128473_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128473_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128473_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128473_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128473_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128471_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128471_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128471_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128482_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128482_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128482_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128482_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128482_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128482_total_iter = 0;
    ctx->futhark_mc_segmap_task_128480_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128480_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128480_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128480_total_time = 0;
    ctx->futhark_mc_segmap_task_128480_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128497_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128497_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128497_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128497_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128497_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128497_total_iter = 0;
    ctx->futhark_mc_segmap_task_128495_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128495_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128495_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128495_total_time = 0;
    ctx->futhark_mc_segmap_task_128495_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128501_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128501_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128501_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128501_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128501_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128501_total_iter = 0;
    ctx->futhark_mc_segmap_task_128499_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128499_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128499_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128499_total_time = 0;
    ctx->futhark_mc_segmap_task_128499_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128489_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128489_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128489_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128489_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128489_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128489_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128487_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128487_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128487_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128505_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128505_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128505_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128505_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128505_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128505_total_iter = 0;
    ctx->futhark_mc_segmap_task_128503_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128503_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128503_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128503_total_time = 0;
    ctx->futhark_mc_segmap_task_128503_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128514_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128514_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128514_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128514_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128514_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128514_total_iter = 0;
    ctx->futhark_mc_segmap_task_128512_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128512_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128512_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128512_total_time = 0;
    ctx->futhark_mc_segmap_task_128512_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128522_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128522_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128522_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter = 0;
    ctx->futhark_mc_segred_task_128519_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128519_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128519_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128519_total_time = 0;
    ctx->futhark_mc_segred_task_128519_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128527_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128527_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128527_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter = 0;
    ctx->futhark_mc_segred_task_128524_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128524_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128524_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128524_total_time = 0;
    ctx->futhark_mc_segred_task_128524_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128517_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128517_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128517_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128517_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128517_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128517_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128515_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128515_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128515_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128509_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128509_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128509_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128509_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128509_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128509_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128507_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128507_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128507_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128531_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128531_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128531_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128531_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128531_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128531_total_iter = 0;
    ctx->futhark_mc_segmap_task_128529_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128529_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128529_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128529_total_time = 0;
    ctx->futhark_mc_segmap_task_128529_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128542_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128542_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128542_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128542_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128542_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128542_total_iter = 0;
    ctx->futhark_mc_segmap_task_128540_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128540_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128540_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128540_total_time = 0;
    ctx->futhark_mc_segmap_task_128540_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128552_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128552_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128552_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter = 0;
    ctx->futhark_mc_segred_task_128547_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128547_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128547_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128547_total_time = 0;
    ctx->futhark_mc_segred_task_128547_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter = 0;
    ctx->futhark_mc_segred_task_128554_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128554_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128554_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128554_total_time = 0;
    ctx->futhark_mc_segred_task_128554_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128543_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128543_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128543_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128536_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128536_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128534_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128534_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128534_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128562_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128562_total_iter = 0;
    ctx->futhark_mc_segmap_task_128560_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_total_time = 0;
    ctx->futhark_mc_segmap_task_128560_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_iter = 0;
    ctx->futhark_mc_segmap_task_128571_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_total_time = 0;
    ctx->futhark_mc_segmap_task_128571_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128585_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128585_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128585_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter = 0;
    ctx->futhark_mc_segred_task_128578_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_total_time = 0;
    ctx->futhark_mc_segred_task_128578_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128591_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128591_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128591_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter = 0;
    ctx->futhark_mc_segred_task_128587_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128587_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128587_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128587_total_time = 0;
    ctx->futhark_mc_segred_task_128587_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128574_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128574_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128574_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128567_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128567_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128565_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128565_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128565_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128595_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128595_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128595_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128595_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128595_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128595_total_iter = 0;
    ctx->futhark_mc_segmap_task_128593_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128593_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128593_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128593_total_time = 0;
    ctx->futhark_mc_segmap_task_128593_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128605_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128605_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128605_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128605_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128605_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128605_total_iter = 0;
    ctx->futhark_mc_segmap_task_128603_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128603_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128603_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128603_total_time = 0;
    ctx->futhark_mc_segmap_task_128603_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128615_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128615_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128615_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter = 0;
    ctx->futhark_mc_segred_task_128612_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128612_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128612_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128612_total_time = 0;
    ctx->futhark_mc_segred_task_128612_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128620_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128620_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128620_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter = 0;
    ctx->futhark_mc_segred_task_128617_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128617_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128617_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128617_total_time = 0;
    ctx->futhark_mc_segred_task_128617_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128609_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128609_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128609_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128609_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128609_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128609_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128607_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128607_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128607_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128600_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128600_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128600_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128600_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128600_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128600_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128598_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128598_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128598_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128624_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128624_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128624_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128624_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128624_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128624_total_iter = 0;
    ctx->futhark_mc_segmap_task_128622_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128622_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128622_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128622_total_time = 0;
    ctx->futhark_mc_segmap_task_128622_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128637_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128637_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128637_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128637_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128637_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128637_total_iter = 0;
    ctx->futhark_mc_segmap_task_128635_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128635_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128635_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128635_total_time = 0;
    ctx->futhark_mc_segmap_task_128635_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter = 0;
    ctx->futhark_mc_segred_task_128646_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128646_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128646_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128646_total_time = 0;
    ctx->futhark_mc_segred_task_128646_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128657_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128657_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128657_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter = 0;
    ctx->futhark_mc_segred_task_128653_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128653_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128653_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128653_total_time = 0;
    ctx->futhark_mc_segred_task_128653_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128642_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128642_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128642_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128642_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128642_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128642_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128640_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128640_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128640_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128631_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128631_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128629_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128629_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128629_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128661_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128661_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128661_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128661_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128661_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128661_total_iter = 0;
    ctx->futhark_mc_segmap_task_128659_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128659_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128659_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128659_total_time = 0;
    ctx->futhark_mc_segmap_task_128659_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128676_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128676_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128676_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128676_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128676_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128676_total_iter = 0;
    ctx->futhark_mc_segmap_task_128674_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128674_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128674_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128674_total_time = 0;
    ctx->futhark_mc_segmap_task_128674_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128691_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128691_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128691_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128691_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128691_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128691_total_iter = 0;
    ctx->futhark_mc_segmap_task_128689_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128689_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128689_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128689_total_time = 0;
    ctx->futhark_mc_segmap_task_128689_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128700_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128700_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128700_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter = 0;
    ctx->futhark_mc_segred_task_128693_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128693_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128693_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128693_total_time = 0;
    ctx->futhark_mc_segred_task_128693_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128706_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128706_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128706_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter = 0;
    ctx->futhark_mc_segred_task_128702_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128702_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128702_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128702_total_time = 0;
    ctx->futhark_mc_segred_task_128702_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128683_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128683_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128683_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128683_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128683_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128683_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128681_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128681_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128681_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128670_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128670_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128670_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128670_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128670_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128670_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128668_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128668_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128668_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128710_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128710_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128710_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128710_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128710_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128710_total_iter = 0;
    ctx->futhark_mc_segmap_task_128708_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128708_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128708_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128708_total_time = 0;
    ctx->futhark_mc_segmap_task_128708_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128719_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128719_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128719_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128719_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128719_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128719_total_iter = 0;
    ctx->futhark_mc_segmap_task_128717_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128717_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128717_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128717_total_time = 0;
    ctx->futhark_mc_segmap_task_128717_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128712_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128712_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128712_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128723_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128723_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128723_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128723_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128723_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128723_total_iter = 0;
    ctx->futhark_mc_segmap_task_128721_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128721_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128721_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128721_total_time = 0;
    ctx->futhark_mc_segmap_task_128721_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128732_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128732_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128732_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128732_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128732_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128732_total_iter = 0;
    ctx->futhark_mc_segmap_task_128730_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128730_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128730_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128730_total_time = 0;
    ctx->futhark_mc_segmap_task_128730_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128727_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128727_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128727_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128727_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128727_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128727_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128725_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128725_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128725_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128736_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128736_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128736_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128736_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128736_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128736_total_iter = 0;
    ctx->futhark_mc_segmap_task_128734_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128734_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128734_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128734_total_time = 0;
    ctx->futhark_mc_segmap_task_128734_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_iter = 0;
    ctx->futhark_mc_segmap_task_128743_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128743_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128743_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128743_total_time = 0;
    ctx->futhark_mc_segmap_task_128743_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128740_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128740_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128740_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128740_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128740_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128740_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128738_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128738_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128738_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128749_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128749_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128749_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128749_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128749_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128749_total_iter = 0;
    ctx->futhark_mc_segmap_task_128747_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128747_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128747_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128747_total_time = 0;
    ctx->futhark_mc_segmap_task_128747_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128774_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128774_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128774_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128776_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128776_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128776_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter = 0;
    ctx->futhark_mc_segscan_task_128768_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128768_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128768_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128768_total_time = 0;
    ctx->futhark_mc_segscan_task_128768_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128780_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128780_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128780_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128780_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128780_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128780_total_iter = 0;
    ctx->futhark_mc_segmap_task_128778_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128778_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128778_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128778_total_time = 0;
    ctx->futhark_mc_segmap_task_128778_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128759_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128759_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128759_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128759_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128759_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128759_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128757_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128757_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128757_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128784_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128784_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128784_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128784_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128784_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128784_total_iter = 0;
    ctx->futhark_mc_segmap_task_128782_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128782_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128782_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128782_total_time = 0;
    ctx->futhark_mc_segmap_task_128782_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128792_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128792_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128792_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter = 0;
    ctx->futhark_mc_segred_task_128789_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128789_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128789_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128789_total_time = 0;
    ctx->futhark_mc_segred_task_128789_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128787_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128787_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128787_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128787_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128787_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128787_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128785_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128785_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128785_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128796_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128796_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128796_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128796_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128796_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128796_total_iter = 0;
    ctx->futhark_mc_segmap_task_128794_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128794_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128794_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128794_total_time = 0;
    ctx->futhark_mc_segmap_task_128794_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128805_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128805_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128805_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128805_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128805_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128805_total_iter = 0;
    ctx->futhark_mc_segmap_task_128803_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128803_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128803_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128803_total_time = 0;
    ctx->futhark_mc_segmap_task_128803_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128800_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128800_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128800_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128800_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128800_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128800_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128798_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128798_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128798_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128809_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128809_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128809_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128809_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128809_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128809_total_iter = 0;
    ctx->futhark_mc_segmap_task_128807_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128807_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128807_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128807_total_time = 0;
    ctx->futhark_mc_segmap_task_128807_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128818_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128818_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128818_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128818_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128818_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128818_total_iter = 0;
    ctx->futhark_mc_segmap_task_128816_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128816_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128816_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128816_total_time = 0;
    ctx->futhark_mc_segmap_task_128816_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128813_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128813_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128813_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128813_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128813_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128813_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128811_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128811_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128811_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128057         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128057_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128057_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128057_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128057_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128057_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128057_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128057_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128057_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128057_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128057_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128057_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128057_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128057_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128057_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128057_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128057_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128057_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128057_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128057_total_iter /
                (ctx->futhark_mc_segmap_parloop_128057_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128057_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128057_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128057_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128069   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128069_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128069_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128069_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128069_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128069_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128069_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128069_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128069_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128069_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128069_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128069_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128071   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128071_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128071_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128071_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128071_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128071_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128071_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128071_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128071_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128071_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128071_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128071_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128066           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128066_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128066_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128066_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128066_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128066_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128066_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128066_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128066_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128066_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128066_iter[i] /
                    (ctx->futhark_mc_segscan_task_128066_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128066_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128075         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128075_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128075_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128075_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128075_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128075_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128075_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128075_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128075_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128075_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128075_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128075_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128075_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128075_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128075_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128075_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128075_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128075_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128075_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128075_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128075_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128075_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128075_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128075_total_iter /
                (ctx->futhark_mc_segmap_parloop_128075_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128075_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128075_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128075_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128073            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128073_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128073_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128073_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128073_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128073_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128073_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128073_iter[i] /
                    (ctx->futhark_mc_segmap_task_128073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128073_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128062         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128062_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128062_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128062_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128062_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128062_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128062_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128062_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128062_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128062_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128062_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128062_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128062_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128062_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128062_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128062_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128062_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128062_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128062_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128062_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128062_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128062_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128062_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128062_total_iter /
                (ctx->futhark_mc_segmap_parloop_128062_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128062_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128062_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128062_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128055            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128055_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128055_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128055_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128055_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128055_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128055_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128055_iter[i] /
                    (ctx->futhark_mc_segmap_task_128055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128055_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128060     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128060_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128060_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128060_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128060_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128060_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128060_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128060_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128060_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128060_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128060_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128060_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128060_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128079         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128079_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128079_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128079_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128079_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128079_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128079_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128079_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128079_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128079_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128079_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128079_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128079_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128079_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128079_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128079_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128079_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128079_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128079_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128079_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128079_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128079_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128079_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128079_total_iter /
                (ctx->futhark_mc_segmap_parloop_128079_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128079_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128079_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128079_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128088         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128088_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128088_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128088_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128088_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128088_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128088_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128088_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128088_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128088_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128088_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128088_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128088_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128088_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128088_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128088_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128088_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128088_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128088_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128088_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128088_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128088_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128088_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128088_total_iter /
                (ctx->futhark_mc_segmap_parloop_128088_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128088_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128088_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128088_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128086            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128086_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128086_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128086_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128086_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128086_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128086_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128086_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128086_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128086_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128086_iter[i] /
                    (ctx->futhark_mc_segmap_task_128086_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128086_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128083         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128083_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128083_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128083_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128083_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128083_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128083_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128083_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128083_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128083_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128083_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128083_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128083_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128083_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128083_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128083_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128083_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128083_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128083_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128083_total_iter /
                (ctx->futhark_mc_segmap_parloop_128083_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128083_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128083_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128083_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128077            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128077_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128077_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128077_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128077_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128077_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128077_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128077_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128077_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128077_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128077_iter[i] /
                    (ctx->futhark_mc_segmap_task_128077_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128077_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128081     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128081_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128081_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128081_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128081_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128081_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128081_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128081_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128081_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128081_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128081_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128081_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128081_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128092         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128092_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128092_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128092_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128092_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128092_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128092_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128092_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128092_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128092_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128092_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128092_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128092_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128092_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128092_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128092_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128092_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128092_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128092_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128092_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128092_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128092_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128092_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128092_total_iter /
                (ctx->futhark_mc_segmap_parloop_128092_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128092_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128092_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128092_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128101         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128101_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128101_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128101_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128101_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128101_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128101_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128101_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128101_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128101_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128101_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128101_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128101_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128101_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128101_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128101_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128101_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128101_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128101_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128101_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128101_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128101_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128101_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128101_total_iter /
                (ctx->futhark_mc_segmap_parloop_128101_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128101_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128101_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128101_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128099            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128099_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128099_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128099_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128099_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128099_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128099_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128099_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128099_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128099_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128099_iter[i] /
                    (ctx->futhark_mc_segmap_task_128099_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128099_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128096         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128096_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128096_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128096_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128096_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128096_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128096_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128096_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128096_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128096_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128096_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128096_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128096_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128096_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128096_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128096_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128096_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128096_total_iter /
                (ctx->futhark_mc_segmap_parloop_128096_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128096_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128096_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128096_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128090            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128090_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128090_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128090_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128090_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128090_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128090_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128090_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128090_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128090_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128090_iter[i] /
                    (ctx->futhark_mc_segmap_task_128090_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128090_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128094     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128094_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128094_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128094_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128094_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128094_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128094_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128094_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128094_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128105         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128105_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128105_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128105_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128105_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128105_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128105_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128105_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128105_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128105_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128105_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128105_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128105_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128105_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128105_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128105_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128105_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128105_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128105_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128105_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128105_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128105_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128105_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128105_total_iter /
                (ctx->futhark_mc_segmap_parloop_128105_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128105_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128105_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128105_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128114         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128114_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128114_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128114_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128114_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128114_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128114_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128114_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128114_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128114_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128114_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128114_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128114_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128114_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128114_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128114_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128114_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128114_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128114_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128114_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128114_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128114_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128114_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128114_total_iter /
                (ctx->futhark_mc_segmap_parloop_128114_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128114_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128114_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128114_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128122 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128122_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128122_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128122_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128122_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128122_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128122_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128122_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128122_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128122_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128122_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128122_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128119            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128119_runs[i],
                    (long) ctx->futhark_mc_segred_task_128119_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128119_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128119_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128119_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128119_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128119_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128119_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128119_iter[i],
                    (long) ctx->futhark_mc_segred_task_128119_iter[i] /
                    (ctx->futhark_mc_segred_task_128119_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128119_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128117         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128117_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128117_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128117_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128117_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128117_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128117_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128117_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128117_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128117_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128117_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128117_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128117_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128117_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128117_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128117_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128117_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128117_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128117_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128117_total_iter /
                (ctx->futhark_mc_segmap_parloop_128117_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128117_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128117_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128117_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128112            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128112_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128112_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128112_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128112_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128112_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128112_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128112_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128112_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128112_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128112_iter[i] /
                    (ctx->futhark_mc_segmap_task_128112_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128112_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128115     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128115_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128115_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128115_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128115_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128115_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128115_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128115_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128115_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128115_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128115_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128109         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128109_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128109_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128109_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128109_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128109_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128109_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128109_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128109_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128109_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128109_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128109_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128109_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128109_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128109_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128109_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128109_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128109_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128109_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128109_total_iter /
                (ctx->futhark_mc_segmap_parloop_128109_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128109_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128109_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128109_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128103            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128103_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128103_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128103_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128103_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128103_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128103_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128103_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128103_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128103_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128103_iter[i] /
                    (ctx->futhark_mc_segmap_task_128103_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128103_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128107     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128107_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128107_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128107_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128107_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128107_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128107_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128107_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128107_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128107_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128107_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128126         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128126_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128126_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128126_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128126_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128126_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128126_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128126_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128126_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128126_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128126_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128126_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128126_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128126_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128126_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128126_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128126_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128126_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128126_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128126_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128126_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128126_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128126_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128126_total_iter /
                (ctx->futhark_mc_segmap_parloop_128126_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128126_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128126_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128126_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128139         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128139_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128139_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128139_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128139_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128139_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128139_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128139_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128139_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128139_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128139_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128139_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128139_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128139_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128139_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128139_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128139_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128139_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128139_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128139_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128139_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128139_total_iter /
                (ctx->futhark_mc_segmap_parloop_128139_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128139_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128139_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128139_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128137            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128137_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128137_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128137_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128137_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128137_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128137_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128137_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128137_iter[i] /
                    (ctx->futhark_mc_segmap_task_128137_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128137_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128143         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128143_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128143_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128143_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128143_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128143_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128143_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128143_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128143_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128143_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128143_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128143_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128143_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128143_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128143_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128143_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128143_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128143_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128143_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128143_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128143_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128143_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128143_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128143_total_iter /
                (ctx->futhark_mc_segmap_parloop_128143_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128143_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128143_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128143_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128141            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128141_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128141_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128141_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128141_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128141_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128141_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128141_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128141_iter[i] /
                    (ctx->futhark_mc_segmap_task_128141_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128141_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128132         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128132_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128132_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128132_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128132_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128132_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128132_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128132_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128132_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128132_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128132_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128132_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128132_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128132_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128132_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128132_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128132_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128132_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128132_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128132_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128132_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128132_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128132_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128132_total_iter /
                (ctx->futhark_mc_segmap_parloop_128132_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128132_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128132_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128132_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128124            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128124_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128124_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128124_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128124_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128124_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128124_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128124_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128124_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128124_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128124_iter[i] /
                    (ctx->futhark_mc_segmap_task_128124_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128124_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128130     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128130_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128130_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128130_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128130_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128130_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128130_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128130_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128130_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128130_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128130_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128130_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128130_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128147         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128147_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128147_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128147_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128147_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128147_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128147_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128147_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128147_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128147_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128147_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128147_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128147_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128147_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128147_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128147_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128147_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128147_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128147_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128147_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128147_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128147_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128147_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128147_total_iter /
                (ctx->futhark_mc_segmap_parloop_128147_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128147_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128147_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128147_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128160         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128160_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128160_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128160_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128160_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128160_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128160_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128160_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128160_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128160_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128160_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128160_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128160_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128160_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128160_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128160_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128160_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128160_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128160_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128160_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128160_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128160_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128160_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128160_total_iter /
                (ctx->futhark_mc_segmap_parloop_128160_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128160_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128160_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128160_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128158            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128158_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128158_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128158_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128158_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128158_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128158_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128158_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128158_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128158_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128158_iter[i] /
                    (ctx->futhark_mc_segmap_task_128158_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128158_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128164         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128164_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128164_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128164_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128164_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128164_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128164_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128164_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128164_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128164_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128164_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128164_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128164_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128164_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128164_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128164_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128164_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128164_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128164_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128164_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128164_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128164_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128164_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128164_total_iter /
                (ctx->futhark_mc_segmap_parloop_128164_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128164_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128164_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128164_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128162            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128162_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128162_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128162_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128162_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128162_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128162_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128162_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128162_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128162_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128162_iter[i] /
                    (ctx->futhark_mc_segmap_task_128162_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128162_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128153         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128153_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128153_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128153_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128153_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128153_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128153_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128153_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128153_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128153_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128153_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128153_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128153_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128153_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128153_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128153_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128153_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128153_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128153_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128153_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128153_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128153_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128153_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128153_total_iter /
                (ctx->futhark_mc_segmap_parloop_128153_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128153_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128153_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128153_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128145            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128145_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128145_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128145_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128145_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128145_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128145_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128145_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128145_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128145_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128145_iter[i] /
                    (ctx->futhark_mc_segmap_task_128145_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128145_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128151     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128151_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128151_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128151_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128151_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128151_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128151_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128151_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128151_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128168         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128168_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128168_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128168_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128168_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128168_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128168_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128168_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128168_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128168_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128168_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128168_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128168_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128168_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128168_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128168_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128168_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128168_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128168_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128168_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128168_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128168_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128168_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128168_total_iter /
                (ctx->futhark_mc_segmap_parloop_128168_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128168_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128168_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128168_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128177         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128177_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128177_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128177_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128177_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128177_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128177_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128177_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128177_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128177_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128177_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128177_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128177_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128177_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128177_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128177_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128177_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128177_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128177_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128177_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128177_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128177_total_iter /
                (ctx->futhark_mc_segmap_parloop_128177_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128177_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128177_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128177_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128175            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128175_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128175_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128175_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128175_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128175_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128175_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128175_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128175_iter[i] /
                    (ctx->futhark_mc_segmap_task_128175_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128175_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128172         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128172_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128172_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128172_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128172_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128172_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128172_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128172_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128172_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128172_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128172_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128172_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128172_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128172_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128172_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128172_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128172_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128172_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128172_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128172_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128172_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128172_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128172_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128172_total_iter /
                (ctx->futhark_mc_segmap_parloop_128172_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128172_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128172_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128172_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128166            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128166_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128166_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128166_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128166_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128166_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128166_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128166_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128166_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128166_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128166_iter[i] /
                    (ctx->futhark_mc_segmap_task_128166_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128166_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128170     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128170_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128170_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128170_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128170_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128170_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128170_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128170_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128170_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128170_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128170_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128170_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128170_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128181         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128181_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128181_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128181_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128181_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128181_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128181_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128181_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128181_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128181_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128181_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128181_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128181_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128181_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128181_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128181_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128181_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128181_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128181_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128181_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128181_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128181_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128181_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128181_total_iter /
                (ctx->futhark_mc_segmap_parloop_128181_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128181_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128181_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128181_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128190         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128190_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128190_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128190_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128190_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128190_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128190_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128190_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128190_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128190_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128190_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128190_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128190_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128190_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128190_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128190_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128190_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128190_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128190_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128190_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128190_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128190_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128190_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128190_total_iter /
                (ctx->futhark_mc_segmap_parloop_128190_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128190_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128190_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128190_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128198 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128198_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128198_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128198_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128198_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128198_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128198_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128198_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128198_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128198_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128198_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128198_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128195            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128195_runs[i],
                    (long) ctx->futhark_mc_segred_task_128195_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128195_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128195_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128195_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128195_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128195_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128195_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128195_iter[i],
                    (long) ctx->futhark_mc_segred_task_128195_iter[i] /
                    (ctx->futhark_mc_segred_task_128195_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128195_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128193         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128193_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128193_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128193_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128193_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128193_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128193_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128193_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128193_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128193_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128193_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128193_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128193_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128193_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128193_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128193_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128193_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128193_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128193_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128193_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128193_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128193_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128193_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128193_total_iter /
                (ctx->futhark_mc_segmap_parloop_128193_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128193_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128193_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128193_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128188            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128188_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128188_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128188_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128188_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128188_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128188_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128188_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128188_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128188_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128188_iter[i] /
                    (ctx->futhark_mc_segmap_task_128188_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128188_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128191     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128191_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128191_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128191_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128191_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128191_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128191_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128191_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128191_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128191_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128191_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128191_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128191_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128185         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128185_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128185_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128185_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128185_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128185_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128185_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128185_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128185_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128185_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128185_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128185_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128185_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128185_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128185_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128185_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128185_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128185_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128185_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128185_total_iter /
                (ctx->futhark_mc_segmap_parloop_128185_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128185_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128185_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128185_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128179            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128179_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128179_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128179_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128179_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128179_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128179_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128179_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128179_iter[i] /
                    (ctx->futhark_mc_segmap_task_128179_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128179_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128183     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128183_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128183_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128183_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128183_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128183_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128183_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128183_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128183_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128183_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128183_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128183_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128183_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128202         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128202_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128202_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128202_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128202_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128202_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128202_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128202_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128202_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128202_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128202_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128202_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128202_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128202_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128202_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128202_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128202_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128202_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128202_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128202_total_iter /
                (ctx->futhark_mc_segmap_parloop_128202_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128202_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128202_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128202_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128211         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128211_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128211_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128211_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128211_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128211_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128211_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128211_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128211_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128211_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128211_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128211_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128211_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128211_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128211_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128211_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128211_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128211_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128211_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128211_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128211_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128211_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128211_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128211_total_iter /
                (ctx->futhark_mc_segmap_parloop_128211_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128211_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128211_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128211_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128209            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128209_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128209_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128209_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128209_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128209_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128209_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128209_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128209_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128209_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128209_iter[i] /
                    (ctx->futhark_mc_segmap_task_128209_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128209_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128206         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128206_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128206_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128206_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128206_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128206_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128206_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128206_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128206_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128206_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128206_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128206_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128206_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128206_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128206_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128206_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128206_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128206_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128206_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128206_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128206_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128206_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128206_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128206_total_iter /
                (ctx->futhark_mc_segmap_parloop_128206_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128206_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128206_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128206_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128200            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128200_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128200_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128200_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128200_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128200_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128200_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128200_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128200_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128200_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128200_iter[i] /
                    (ctx->futhark_mc_segmap_task_128200_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128200_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128204     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128204_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128204_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128204_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128204_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128204_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128204_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128204_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128204_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128215         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128215_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128215_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128215_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128215_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128215_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128215_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128215_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128215_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128215_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128215_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128215_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128215_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128215_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128215_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128215_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128215_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128215_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128215_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128215_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128215_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128215_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128215_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128215_total_iter /
                (ctx->futhark_mc_segmap_parloop_128215_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128215_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128215_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128215_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128229 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128229_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128229_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128229_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128229_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128229_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128229_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128229_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128229_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128229_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128229_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128229_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128226            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128226_runs[i],
                    (long) ctx->futhark_mc_segred_task_128226_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128226_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128226_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128226_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128226_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128226_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128226_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128226_iter[i],
                    (long) ctx->futhark_mc_segred_task_128226_iter[i] /
                    (ctx->futhark_mc_segred_task_128226_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128226_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128234   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128234_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128234_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128234_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128234_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128234_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128234_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128234_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128234_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128234_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128234_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128234_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128236   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128236_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128236_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128236_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128236_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128236_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128236_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128236_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128236_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128236_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128236_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128236_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128231           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128231_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128231_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128231_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128231_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128231_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128231_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128231_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128231_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128231_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128231_iter[i] /
                    (ctx->futhark_mc_segscan_task_128231_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128231_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128241 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128241_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128241_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128241_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128241_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128241_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128241_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128241_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128241_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128241_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128241_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128241_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128238            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128238_runs[i],
                    (long) ctx->futhark_mc_segred_task_128238_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128238_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128238_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128238_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128238_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128238_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128238_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128238_iter[i],
                    (long) ctx->futhark_mc_segred_task_128238_iter[i] /
                    (ctx->futhark_mc_segred_task_128238_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128238_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128246   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128246_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128246_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128246_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128246_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128246_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128246_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128246_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128246_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128246_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128246_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128246_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128248   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128248_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128248_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128248_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128248_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128248_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128248_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128248_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128248_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128248_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128248_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128248_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128243           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128243_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128243_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128243_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128243_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128243_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128243_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128243_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128243_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128243_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128243_iter[i] /
                    (ctx->futhark_mc_segscan_task_128243_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128243_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128253 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128253_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128253_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128253_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128253_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128253_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128253_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128253_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128253_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128253_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128253_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128253_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128250            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128250_runs[i],
                    (long) ctx->futhark_mc_segred_task_128250_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128250_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128250_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128250_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128250_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128250_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128250_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128250_iter[i],
                    (long) ctx->futhark_mc_segred_task_128250_iter[i] /
                    (ctx->futhark_mc_segred_task_128250_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128250_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128258   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128258_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128258_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128258_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128258_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128258_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128258_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128258_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128258_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128258_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128258_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128258_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128260   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128260_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128260_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128260_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128260_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128260_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128260_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128260_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128260_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128260_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128260_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128260_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128255           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128255_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128255_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128255_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128255_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128255_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128255_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128255_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128255_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128255_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128255_iter[i] /
                    (ctx->futhark_mc_segscan_task_128255_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128255_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128221         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128221_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128221_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128221_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128221_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128221_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128221_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128221_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128221_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128221_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128221_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128221_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128221_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128221_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128221_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128221_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128221_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128221_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128221_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128221_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128221_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128221_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128221_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128221_total_iter /
                (ctx->futhark_mc_segmap_parloop_128221_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128221_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128221_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128221_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128213            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128213_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128213_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128213_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128213_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128213_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128213_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128213_iter[i] /
                    (ctx->futhark_mc_segmap_task_128213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128213_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128219     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128219_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128219_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128219_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128219_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128219_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128219_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128219_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128219_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128219_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128219_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128219_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128219_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128264         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128264_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128264_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128264_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128264_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128264_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128264_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128264_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128264_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128264_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128264_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128264_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128264_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128264_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128264_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128264_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128264_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128264_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128264_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128264_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128264_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128264_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128264_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128264_total_iter /
                (ctx->futhark_mc_segmap_parloop_128264_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128264_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128264_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128264_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128273         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128273_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128273_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128273_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128273_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128273_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128273_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128273_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128273_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128273_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128273_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128273_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128273_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128273_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128273_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128273_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128273_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128273_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128273_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128273_total_iter /
                (ctx->futhark_mc_segmap_parloop_128273_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128273_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128273_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128273_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128281 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128281_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128281_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128281_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128281_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128281_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128281_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128281_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128281_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128281_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128281_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128281_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128278            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128278_runs[i],
                    (long) ctx->futhark_mc_segred_task_128278_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128278_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128278_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128278_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128278_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128278_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128278_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128278_iter[i],
                    (long) ctx->futhark_mc_segred_task_128278_iter[i] /
                    (ctx->futhark_mc_segred_task_128278_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128278_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128286 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128286_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128286_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128286_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128286_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128286_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128286_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128286_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128286_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128286_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128286_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128286_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128283            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128283_runs[i],
                    (long) ctx->futhark_mc_segred_task_128283_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128283_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128283_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128283_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128283_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128283_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128283_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128283_iter[i],
                    (long) ctx->futhark_mc_segred_task_128283_iter[i] /
                    (ctx->futhark_mc_segred_task_128283_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128283_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128276         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128276_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128276_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128276_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128276_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128276_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128276_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128276_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128276_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128276_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128276_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128276_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128276_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128276_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128276_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128276_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128276_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128276_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128276_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128276_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128276_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128276_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128276_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128276_total_iter /
                (ctx->futhark_mc_segmap_parloop_128276_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128276_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128276_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128276_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128271            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128271_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128271_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128271_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128271_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128271_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128271_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128271_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128271_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128271_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128271_iter[i] /
                    (ctx->futhark_mc_segmap_task_128271_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128271_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128274     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128274_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128274_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128274_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128274_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128274_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128274_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128274_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128274_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128274_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128274_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128274_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128274_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128268         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128268_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128268_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128268_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128268_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128268_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128268_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128268_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128268_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128268_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128268_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128268_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128268_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128268_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128268_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128268_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128268_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128268_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128268_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128268_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128268_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128268_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128268_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128268_total_iter /
                (ctx->futhark_mc_segmap_parloop_128268_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128268_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128268_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128268_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128262            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128262_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128262_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128262_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128262_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128262_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128262_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128262_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128262_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128262_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128262_iter[i] /
                    (ctx->futhark_mc_segmap_task_128262_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128262_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128266     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128266_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128266_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128266_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128266_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128266_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128266_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128266_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128266_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128266_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128266_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128266_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128266_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128290         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128290_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128290_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128290_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128290_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128290_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128290_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128290_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128290_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128290_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128290_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128290_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128290_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128290_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128290_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128290_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128290_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128290_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128290_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128290_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128290_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128290_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128290_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128290_total_iter /
                (ctx->futhark_mc_segmap_parloop_128290_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128290_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128290_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128290_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128301         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128301_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128301_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128301_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128301_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128301_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128301_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128301_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128301_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128301_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128301_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128301_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128301_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128301_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128301_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128301_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128301_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128301_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128301_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128301_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128301_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128301_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128301_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128301_total_iter /
                (ctx->futhark_mc_segmap_parloop_128301_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128301_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128301_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128301_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128311 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128311_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128311_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128311_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128311_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128311_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128311_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128311_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128311_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128311_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128311_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128311_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128306            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128306_runs[i],
                    (long) ctx->futhark_mc_segred_task_128306_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128306_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128306_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128306_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128306_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128306_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128306_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128306_iter[i],
                    (long) ctx->futhark_mc_segred_task_128306_iter[i] /
                    (ctx->futhark_mc_segred_task_128306_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128306_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128317 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128317_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128317_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128317_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128317_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128317_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128317_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128317_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128317_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128317_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128317_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128317_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128313            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128313_runs[i],
                    (long) ctx->futhark_mc_segred_task_128313_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128313_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128313_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128313_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128313_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128313_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128313_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128313_iter[i],
                    (long) ctx->futhark_mc_segred_task_128313_iter[i] /
                    (ctx->futhark_mc_segred_task_128313_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128313_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128304         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128304_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128304_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128304_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128304_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128304_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128304_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128304_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128304_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128304_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128304_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128304_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128304_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128304_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128304_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128304_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128304_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128304_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128304_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128304_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128304_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128304_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128304_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128304_total_iter /
                (ctx->futhark_mc_segmap_parloop_128304_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128304_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128304_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128304_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128299            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128299_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128299_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128299_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128299_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128299_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128299_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128299_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128299_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128299_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128299_iter[i] /
                    (ctx->futhark_mc_segmap_task_128299_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128299_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128302     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128302_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128302_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128302_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128302_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128302_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128302_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128302_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128302_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128302_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128302_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128302_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128302_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128295         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128295_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128295_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128295_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128295_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128295_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128295_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128295_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128295_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128295_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128295_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128295_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128295_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128295_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128295_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128295_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128295_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128295_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128295_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128295_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128295_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128295_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128295_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128295_total_iter /
                (ctx->futhark_mc_segmap_parloop_128295_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128295_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128295_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128295_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128288            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128288_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128288_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128288_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128288_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128288_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128288_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128288_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128288_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128288_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128288_iter[i] /
                    (ctx->futhark_mc_segmap_task_128288_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128288_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128293     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128293_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128293_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128293_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128293_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128293_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128293_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128293_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128293_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128293_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128293_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128293_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128293_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128321         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128321_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128321_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128321_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128321_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128321_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128321_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128321_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128321_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128321_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128321_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128321_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128321_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128321_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128321_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128321_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128321_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128321_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128321_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128321_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128321_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128321_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128321_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128321_total_iter /
                (ctx->futhark_mc_segmap_parloop_128321_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128321_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128321_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128321_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128332         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128332_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128332_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128332_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128332_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128332_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128332_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128332_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128332_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128332_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128332_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128332_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128332_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128332_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128332_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128332_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128332_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128332_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128332_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128332_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128332_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128332_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128332_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128332_total_iter /
                (ctx->futhark_mc_segmap_parloop_128332_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128332_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128332_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128332_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128344 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128344_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128344_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128344_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128344_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128344_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128344_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128344_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128344_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128344_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128344_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128344_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128337            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128337_runs[i],
                    (long) ctx->futhark_mc_segred_task_128337_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128337_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128337_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128337_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128337_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128337_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128337_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128337_iter[i],
                    (long) ctx->futhark_mc_segred_task_128337_iter[i] /
                    (ctx->futhark_mc_segred_task_128337_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128337_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128350 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128350_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128350_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128350_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128350_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128350_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128350_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128350_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128350_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128350_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128350_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128350_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128346            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128346_runs[i],
                    (long) ctx->futhark_mc_segred_task_128346_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128346_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128346_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128346_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128346_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128346_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128346_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128346_iter[i],
                    (long) ctx->futhark_mc_segred_task_128346_iter[i] /
                    (ctx->futhark_mc_segred_task_128346_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128346_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128335         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128335_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128335_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128335_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128335_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128335_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128335_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128335_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128335_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128335_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128335_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128335_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128335_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128335_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128335_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128335_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128335_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128335_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128335_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128335_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128335_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128335_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128335_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128335_total_iter /
                (ctx->futhark_mc_segmap_parloop_128335_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128335_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128335_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128335_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128330            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128330_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128330_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128330_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128330_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128330_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128330_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128330_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128330_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128330_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128330_iter[i] /
                    (ctx->futhark_mc_segmap_task_128330_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128330_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128333     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128333_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128333_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128333_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128333_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128333_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128333_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128333_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128333_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128326         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128326_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128326_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128326_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128326_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128326_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128326_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128326_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128326_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128326_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128326_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128326_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128326_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128326_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128326_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128326_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128326_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128326_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128326_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128326_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128326_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128326_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128326_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128326_total_iter /
                (ctx->futhark_mc_segmap_parloop_128326_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128326_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128326_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128326_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128319            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128319_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128319_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128319_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128319_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128319_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128319_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128319_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128319_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128319_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128319_iter[i] /
                    (ctx->futhark_mc_segmap_task_128319_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128319_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128324     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128324_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128324_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128324_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128324_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128324_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128324_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128324_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128324_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128324_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128324_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128324_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128324_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128354         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128354_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128354_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128354_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128354_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128354_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128354_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128354_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128354_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128354_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128354_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128354_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128354_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128354_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128354_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128354_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128354_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128354_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128354_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128354_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128354_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128354_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128354_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128354_total_iter /
                (ctx->futhark_mc_segmap_parloop_128354_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128354_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128354_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128354_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128364         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128364_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128364_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128364_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128364_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128364_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128364_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128364_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128364_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128364_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128364_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128364_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128364_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128364_total_iter /
                (ctx->futhark_mc_segmap_parloop_128364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128364_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128364_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128364_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128374 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128374_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128374_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128374_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128374_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128374_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128374_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128374_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128374_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128374_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128374_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128374_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128371            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128371_runs[i],
                    (long) ctx->futhark_mc_segred_task_128371_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128371_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128371_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128371_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128371_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128371_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128371_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128371_iter[i],
                    (long) ctx->futhark_mc_segred_task_128371_iter[i] /
                    (ctx->futhark_mc_segred_task_128371_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128371_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128379 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128379_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128379_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128379_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128379_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128379_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128379_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128379_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128379_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128379_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128379_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128379_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128376            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128376_runs[i],
                    (long) ctx->futhark_mc_segred_task_128376_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128376_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128376_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128376_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128376_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128376_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128376_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128376_iter[i],
                    (long) ctx->futhark_mc_segred_task_128376_iter[i] /
                    (ctx->futhark_mc_segred_task_128376_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128376_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128368         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128368_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128368_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128368_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128368_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128368_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128368_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128368_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128368_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128368_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128368_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128368_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128368_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128368_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128368_total_iter /
                (ctx->futhark_mc_segmap_parloop_128368_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128368_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128368_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128368_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128362            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128362_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128362_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128362_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128362_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128362_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128362_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128362_iter[i] /
                    (ctx->futhark_mc_segmap_task_128362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128362_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128366     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128366_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128366_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128366_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128366_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128366_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128366_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128359         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128359_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128359_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128359_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128359_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128359_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128359_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128359_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128359_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128359_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128359_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128359_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128359_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128359_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128359_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128359_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128359_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128359_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128359_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128359_total_iter /
                (ctx->futhark_mc_segmap_parloop_128359_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128359_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128359_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128359_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128352            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128352_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128352_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128352_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128352_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128352_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128352_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128352_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128352_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128352_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128352_iter[i] /
                    (ctx->futhark_mc_segmap_task_128352_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128352_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128357     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128357_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128357_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128357_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128357_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128357_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128357_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128357_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128357_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128357_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128357_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128357_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128357_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128383         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128383_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128383_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128383_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128383_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128383_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128383_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128383_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128383_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128383_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128383_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128383_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128383_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128383_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128383_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128383_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128383_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128383_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128383_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128383_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128383_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128383_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128383_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128383_total_iter /
                (ctx->futhark_mc_segmap_parloop_128383_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128383_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128383_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128383_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128396         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128396_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128396_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128396_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128396_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128396_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128396_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128396_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128396_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128396_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128396_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128396_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128396_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128396_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128396_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128396_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128396_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128396_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128396_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128396_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128396_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128396_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128396_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128396_total_iter /
                (ctx->futhark_mc_segmap_parloop_128396_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128396_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128396_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128396_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128410 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128410_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128410_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128410_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128410_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128410_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128410_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128410_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128410_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128410_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128410_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128410_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128405            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128405_runs[i],
                    (long) ctx->futhark_mc_segred_task_128405_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128405_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128405_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128405_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128405_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128405_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128405_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128405_iter[i],
                    (long) ctx->futhark_mc_segred_task_128405_iter[i] /
                    (ctx->futhark_mc_segred_task_128405_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128405_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128416 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128416_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128416_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128416_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128416_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128416_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128416_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128416_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128416_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128416_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128416_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128416_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128412            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128412_runs[i],
                    (long) ctx->futhark_mc_segred_task_128412_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128412_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128412_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128412_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128412_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128412_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128412_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128412_iter[i],
                    (long) ctx->futhark_mc_segred_task_128412_iter[i] /
                    (ctx->futhark_mc_segred_task_128412_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128412_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128401         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128401_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128401_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128401_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128401_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128401_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128401_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128401_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128401_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128401_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128401_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128401_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128401_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128401_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128401_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128401_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128401_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128401_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128401_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128401_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128401_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128401_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128401_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128401_total_iter /
                (ctx->futhark_mc_segmap_parloop_128401_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128401_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128401_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128401_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128394            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128394_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128394_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128394_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128394_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128394_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128394_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128394_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128394_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128394_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128394_iter[i] /
                    (ctx->futhark_mc_segmap_task_128394_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128394_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128399     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128399_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128399_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128399_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128399_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128399_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128399_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128399_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128399_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128399_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128399_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128399_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128399_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128390         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128390_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128390_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128390_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128390_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128390_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128390_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128390_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128390_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128390_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128390_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128390_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128390_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128390_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128390_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128390_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128390_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128390_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128390_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128390_total_iter /
                (ctx->futhark_mc_segmap_parloop_128390_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128390_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128390_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128390_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128381            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128381_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128381_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128381_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128381_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128381_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128381_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128381_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128381_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128381_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128381_iter[i] /
                    (ctx->futhark_mc_segmap_task_128381_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128381_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128388     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128388_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128388_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128388_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128388_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128388_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128388_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128388_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128388_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128420         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128420_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128420_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128420_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128420_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128420_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128420_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128420_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128420_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128420_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128420_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128420_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128420_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128420_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128420_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128420_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128420_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128420_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128420_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128420_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128420_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128420_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128420_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128420_total_iter /
                (ctx->futhark_mc_segmap_parloop_128420_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128420_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128420_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128420_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128435         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128435_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128435_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128435_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128435_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128435_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128435_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128435_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128435_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128435_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128435_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128435_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128435_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128435_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128435_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128435_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128435_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128435_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128435_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128435_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128435_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128435_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128435_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128435_total_iter /
                (ctx->futhark_mc_segmap_parloop_128435_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128435_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128435_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128435_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128450         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128450_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128450_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128450_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128450_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128450_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128450_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128450_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128450_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128450_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128450_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128450_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128450_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128450_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128450_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128450_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128450_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128450_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128450_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128450_total_iter /
                (ctx->futhark_mc_segmap_parloop_128450_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128450_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128450_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128450_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128448            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128448_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128448_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128448_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128448_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128448_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128448_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128448_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128448_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128448_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128448_iter[i] /
                    (ctx->futhark_mc_segmap_task_128448_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128448_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128459 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128459_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128459_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128459_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128459_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128459_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128459_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128459_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128459_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128459_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128459_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128459_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128452            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128452_runs[i],
                    (long) ctx->futhark_mc_segred_task_128452_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128452_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128452_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128452_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128452_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128452_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128452_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128452_iter[i],
                    (long) ctx->futhark_mc_segred_task_128452_iter[i] /
                    (ctx->futhark_mc_segred_task_128452_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128452_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128465 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128465_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128465_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128465_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128465_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128465_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128465_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128465_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128465_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128465_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128465_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128465_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128461            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128461_runs[i],
                    (long) ctx->futhark_mc_segred_task_128461_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128461_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128461_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128461_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128461_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128461_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128461_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128461_iter[i],
                    (long) ctx->futhark_mc_segred_task_128461_iter[i] /
                    (ctx->futhark_mc_segred_task_128461_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128461_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128442         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128442_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128442_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128442_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128442_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128442_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128442_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128442_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128442_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128442_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128442_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128442_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128442_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128442_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128442_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128442_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128442_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128442_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128442_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128442_total_iter /
                (ctx->futhark_mc_segmap_parloop_128442_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128442_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128442_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128442_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128433            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128433_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128433_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128433_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128433_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128433_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128433_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128433_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128433_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128433_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128433_iter[i] /
                    (ctx->futhark_mc_segmap_task_128433_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128433_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128440     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128440_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128440_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128440_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128440_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128440_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128440_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128440_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128440_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128429         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128429_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128429_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128429_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128429_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128429_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128429_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128429_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128429_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128429_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128429_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128429_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128429_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128429_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128429_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128429_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128429_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128429_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128429_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128429_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128429_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128429_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128429_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128429_total_iter /
                (ctx->futhark_mc_segmap_parloop_128429_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128429_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128429_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128429_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128418            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128418_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128418_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128418_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128418_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128418_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128418_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128418_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128418_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128418_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128418_iter[i] /
                    (ctx->futhark_mc_segmap_task_128418_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128418_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128427     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128427_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128427_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128427_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128427_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128427_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128427_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128427_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128427_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128427_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128427_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128427_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128427_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128469         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128469_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128469_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128469_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128469_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128469_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128469_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128469_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128469_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128469_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128469_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128469_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128469_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128469_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128469_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128469_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128469_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128469_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128469_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128469_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128469_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128469_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128469_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128469_total_iter /
                (ctx->futhark_mc_segmap_parloop_128469_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128469_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128469_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128469_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128478         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128478_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128478_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128478_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128478_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128478_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128478_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128478_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128478_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128478_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128478_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128478_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128478_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128478_total_iter /
                (ctx->futhark_mc_segmap_parloop_128478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128478_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128478_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128478_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128476            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128476_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128476_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128476_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128476_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128476_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128476_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128476_iter[i] /
                    (ctx->futhark_mc_segmap_task_128476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128476_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128473         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128473_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128473_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128473_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128473_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128473_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128473_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128473_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128473_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128473_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128473_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128473_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128473_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128473_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128473_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128473_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128473_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128473_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128473_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128473_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128473_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128473_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128473_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128473_total_iter /
                (ctx->futhark_mc_segmap_parloop_128473_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128473_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128473_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128473_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128467            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128467_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128467_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128467_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128467_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128467_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128467_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128467_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128467_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128467_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128467_iter[i] /
                    (ctx->futhark_mc_segmap_task_128467_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128467_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128471     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128471_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128471_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128471_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128471_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128471_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128471_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128471_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128471_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128471_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128471_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128471_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128471_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128482         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128482_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128482_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128482_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128482_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128482_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128482_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128482_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128482_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128482_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128482_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128482_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128482_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128482_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128482_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128482_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128482_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128482_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128482_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128482_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128482_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128482_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128482_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128482_total_iter /
                (ctx->futhark_mc_segmap_parloop_128482_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128482_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128482_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128482_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128497         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128497_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128497_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128497_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128497_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128497_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128497_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128497_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128497_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128497_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128497_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128497_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128497_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128497_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128497_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128497_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128497_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128497_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128497_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128497_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128497_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128497_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128497_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128497_total_iter /
                (ctx->futhark_mc_segmap_parloop_128497_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128497_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128497_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128497_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128495            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128495_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128495_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128495_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128495_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128495_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128495_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128495_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128495_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128495_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128495_iter[i] /
                    (ctx->futhark_mc_segmap_task_128495_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128495_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128501         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128501_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128501_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128501_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128501_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128501_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128501_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128501_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128501_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128501_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128501_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128501_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128501_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128501_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128501_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128501_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128501_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128501_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128501_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128501_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128501_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128501_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128501_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128501_total_iter /
                (ctx->futhark_mc_segmap_parloop_128501_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128501_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128501_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128501_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128499            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128499_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128499_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128499_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128499_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128499_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128499_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128499_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128499_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128499_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128499_iter[i] /
                    (ctx->futhark_mc_segmap_task_128499_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128499_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128489         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128489_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128489_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128489_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128489_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128489_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128489_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128489_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128489_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128489_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128489_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128489_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128489_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128489_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128489_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128489_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128489_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128489_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128489_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128489_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128489_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128489_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128489_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128489_total_iter /
                (ctx->futhark_mc_segmap_parloop_128489_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128489_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128489_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128489_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128480            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128480_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128480_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128480_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128480_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128480_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128480_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128480_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128480_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128480_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128480_iter[i] /
                    (ctx->futhark_mc_segmap_task_128480_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128480_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128487     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128487_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128487_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128487_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128487_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128487_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128487_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128487_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128487_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128505         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128505_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128505_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128505_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128505_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128505_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128505_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128505_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128505_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128505_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128505_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128505_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128505_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128505_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128505_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128505_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128505_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128505_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128505_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128505_total_iter /
                (ctx->futhark_mc_segmap_parloop_128505_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128505_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128505_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128505_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128514         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128514_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128514_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128514_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128514_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128514_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128514_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128514_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128514_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128514_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128514_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128514_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128514_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128514_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128514_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128514_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128514_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128514_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128514_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128514_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128514_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128514_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128514_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128514_total_iter /
                (ctx->futhark_mc_segmap_parloop_128514_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128514_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128514_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128514_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128522 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128522_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128522_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128522_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128522_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128522_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128522_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128522_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128522_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128522_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128522_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128522_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128519            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128519_runs[i],
                    (long) ctx->futhark_mc_segred_task_128519_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128519_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128519_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128519_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128519_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128519_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128519_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128519_iter[i],
                    (long) ctx->futhark_mc_segred_task_128519_iter[i] /
                    (ctx->futhark_mc_segred_task_128519_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128519_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128527 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128527_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128527_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128527_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128527_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128527_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128527_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128527_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128527_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128527_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128527_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128527_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128524            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128524_runs[i],
                    (long) ctx->futhark_mc_segred_task_128524_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128524_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128524_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128524_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128524_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128524_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128524_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128524_iter[i],
                    (long) ctx->futhark_mc_segred_task_128524_iter[i] /
                    (ctx->futhark_mc_segred_task_128524_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128524_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128517         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128517_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128517_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128517_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128517_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128517_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128517_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128517_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128517_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128517_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128517_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128517_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128517_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128517_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128517_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128517_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128517_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128517_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128517_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128517_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128517_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128517_total_iter /
                (ctx->futhark_mc_segmap_parloop_128517_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128517_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128517_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128517_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128512            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128512_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128512_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128512_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128512_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128512_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128512_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128512_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128512_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128512_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128512_iter[i] /
                    (ctx->futhark_mc_segmap_task_128512_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128512_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128515     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128515_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128515_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128515_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128515_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128515_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128515_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128515_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128515_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128515_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128515_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128515_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128515_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128509         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128509_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128509_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128509_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128509_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128509_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128509_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128509_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128509_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128509_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128509_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128509_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128509_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128509_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128509_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128509_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128509_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128509_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128509_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128509_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128509_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128509_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128509_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128509_total_iter /
                (ctx->futhark_mc_segmap_parloop_128509_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128509_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128509_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128509_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128503            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128503_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128503_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128503_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128503_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128503_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128503_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128503_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128503_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128503_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128503_iter[i] /
                    (ctx->futhark_mc_segmap_task_128503_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128503_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128507     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128507_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128507_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128507_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128507_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128507_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128507_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128507_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128507_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128531         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128531_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128531_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128531_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128531_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128531_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128531_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128531_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128531_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128531_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128531_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128531_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128531_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128531_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128531_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128531_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128531_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128531_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128531_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128531_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128531_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128531_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128531_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128531_total_iter /
                (ctx->futhark_mc_segmap_parloop_128531_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128531_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128531_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128531_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128542         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128542_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128542_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128542_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128542_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128542_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128542_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128542_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128542_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128542_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128542_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128542_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128542_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128542_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128542_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128542_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128542_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128542_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128542_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128542_total_iter /
                (ctx->futhark_mc_segmap_parloop_128542_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128542_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128542_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128542_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128552 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128552_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128552_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128552_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128552_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128552_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128552_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128552_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128552_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128552_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128552_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128552_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128547            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128547_runs[i],
                    (long) ctx->futhark_mc_segred_task_128547_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128547_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128547_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128547_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128547_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128547_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128547_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128547_iter[i],
                    (long) ctx->futhark_mc_segred_task_128547_iter[i] /
                    (ctx->futhark_mc_segred_task_128547_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128547_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128558 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128558_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128554            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128554_runs[i],
                    (long) ctx->futhark_mc_segred_task_128554_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128554_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128554_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128554_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128554_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128554_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128554_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128554_iter[i],
                    (long) ctx->futhark_mc_segred_task_128554_iter[i] /
                    (ctx->futhark_mc_segred_task_128554_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128554_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128545         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128545_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128545_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128545_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128545_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128545_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128545_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128545_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128545_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128545_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128545_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128545_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128545_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128545_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128545_total_iter /
                (ctx->futhark_mc_segmap_parloop_128545_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128545_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128545_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128545_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128540            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128540_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128540_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128540_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128540_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128540_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128540_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128540_iter[i] /
                    (ctx->futhark_mc_segmap_task_128540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128540_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128543     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128543_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128543_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128543_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128543_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128543_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128543_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128543_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128543_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128536         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128536_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128536_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128536_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128536_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128536_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128536_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128536_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128536_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128536_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128536_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128536_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128536_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128536_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128536_total_iter /
                (ctx->futhark_mc_segmap_parloop_128536_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128536_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128536_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128536_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128529            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128529_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128529_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128529_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128529_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128529_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128529_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128529_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128529_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128529_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128529_iter[i] /
                    (ctx->futhark_mc_segmap_task_128529_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128529_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128534     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128534_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128534_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128534_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128534_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128534_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128534_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128534_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128534_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128534_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128534_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128534_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128534_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128562         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128562_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128562_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128562_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128562_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128562_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128562_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128562_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128562_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128562_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128562_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128562_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128562_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128562_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128562_total_iter /
                (ctx->futhark_mc_segmap_parloop_128562_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128562_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128562_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128562_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128573         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128573_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128573_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128573_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128573_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128573_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128573_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128573_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128573_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128573_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128573_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128573_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128573_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128573_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128573_total_iter /
                (ctx->futhark_mc_segmap_parloop_128573_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128573_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128573_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128573_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128585 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128585_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128585_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128585_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128585_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128585_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128585_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128585_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128585_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128585_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128578            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128578_runs[i],
                    (long) ctx->futhark_mc_segred_task_128578_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128578_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128578_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128578_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128578_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128578_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128578_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128578_iter[i],
                    (long) ctx->futhark_mc_segred_task_128578_iter[i] /
                    (ctx->futhark_mc_segred_task_128578_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128578_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128591 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128591_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128591_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128591_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128591_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128591_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128591_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128591_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128591_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128591_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128591_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128591_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128587            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128587_runs[i],
                    (long) ctx->futhark_mc_segred_task_128587_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128587_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128587_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128587_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128587_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128587_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128587_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128587_iter[i],
                    (long) ctx->futhark_mc_segred_task_128587_iter[i] /
                    (ctx->futhark_mc_segred_task_128587_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128587_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128576         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128576_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128576_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128576_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128576_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128576_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128576_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128576_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128576_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128576_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128576_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128576_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128576_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128576_total_iter /
                (ctx->futhark_mc_segmap_parloop_128576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128576_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128576_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128576_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128571            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128571_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128571_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128571_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128571_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128571_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128571_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128571_iter[i] /
                    (ctx->futhark_mc_segmap_task_128571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128571_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128574     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128574_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128574_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128574_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128574_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128574_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128574_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128567         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128567_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128567_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128567_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128567_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128567_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128567_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128567_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128567_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128567_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128567_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128567_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128567_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128567_total_iter /
                (ctx->futhark_mc_segmap_parloop_128567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128567_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128567_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128567_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128560            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128560_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128560_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128560_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128560_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128560_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128560_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128560_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128560_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128560_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128560_iter[i] /
                    (ctx->futhark_mc_segmap_task_128560_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128560_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128565     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128565_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128565_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128565_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128565_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128565_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128565_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128595         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128595_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128595_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128595_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128595_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128595_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128595_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128595_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128595_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128595_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128595_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128595_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128595_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128595_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128595_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128595_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128595_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128595_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128595_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128595_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128595_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128595_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128595_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128595_total_iter /
                (ctx->futhark_mc_segmap_parloop_128595_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128595_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128595_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128595_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128605         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128605_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128605_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128605_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128605_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128605_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128605_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128605_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128605_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128605_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128605_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128605_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128605_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128605_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128605_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128605_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128605_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128605_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128605_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128605_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128605_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128605_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128605_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128605_total_iter /
                (ctx->futhark_mc_segmap_parloop_128605_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128605_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128605_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128605_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128615 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128615_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128615_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128615_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128615_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128615_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128615_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128615_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128615_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128615_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128615_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128615_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128612            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128612_runs[i],
                    (long) ctx->futhark_mc_segred_task_128612_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128612_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128612_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128612_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128612_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128612_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128612_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128612_iter[i],
                    (long) ctx->futhark_mc_segred_task_128612_iter[i] /
                    (ctx->futhark_mc_segred_task_128612_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128612_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128620 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128620_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128620_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128620_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128620_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128620_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128620_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128620_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128620_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128620_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128620_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128620_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128617            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128617_runs[i],
                    (long) ctx->futhark_mc_segred_task_128617_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128617_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128617_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128617_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128617_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128617_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128617_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128617_iter[i],
                    (long) ctx->futhark_mc_segred_task_128617_iter[i] /
                    (ctx->futhark_mc_segred_task_128617_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128617_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128609         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128609_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128609_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128609_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128609_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128609_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128609_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128609_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128609_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128609_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128609_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128609_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128609_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128609_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128609_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128609_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128609_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128609_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128609_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128609_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128609_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128609_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128609_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128609_total_iter /
                (ctx->futhark_mc_segmap_parloop_128609_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128609_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128609_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128609_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128603            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128603_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128603_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128603_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128603_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128603_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128603_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128603_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128603_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128603_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128603_iter[i] /
                    (ctx->futhark_mc_segmap_task_128603_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128603_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128607     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128607_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128607_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128607_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128607_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128607_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128607_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128607_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128607_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128600         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128600_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128600_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128600_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128600_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128600_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128600_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128600_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128600_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128600_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128600_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128600_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128600_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128600_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128600_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128600_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128600_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128600_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128600_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128600_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128600_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128600_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128600_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128600_total_iter /
                (ctx->futhark_mc_segmap_parloop_128600_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128600_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128600_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128600_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128593            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128593_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128593_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128593_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128593_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128593_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128593_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128593_iter[i] /
                    (ctx->futhark_mc_segmap_task_128593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128593_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128598     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128598_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128598_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128598_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128598_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128598_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128598_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128598_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128598_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128624         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128624_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128624_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128624_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128624_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128624_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128624_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128624_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128624_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128624_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128624_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128624_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128624_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128624_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128624_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128624_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128624_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128624_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128624_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128624_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128624_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128624_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128624_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128624_total_iter /
                (ctx->futhark_mc_segmap_parloop_128624_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128624_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128624_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128624_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128637         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128637_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128637_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128637_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128637_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128637_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128637_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128637_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128637_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128637_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128637_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128637_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128637_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128637_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128637_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128637_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128637_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128637_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128637_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128637_total_iter /
                (ctx->futhark_mc_segmap_parloop_128637_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128637_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128637_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128637_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128651 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128651_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128646            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128646_runs[i],
                    (long) ctx->futhark_mc_segred_task_128646_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128646_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128646_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128646_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128646_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128646_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128646_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128646_iter[i],
                    (long) ctx->futhark_mc_segred_task_128646_iter[i] /
                    (ctx->futhark_mc_segred_task_128646_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128646_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128657 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128657_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128657_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128657_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128657_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128657_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128657_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128657_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128657_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128657_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128657_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128657_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128653            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128653_runs[i],
                    (long) ctx->futhark_mc_segred_task_128653_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128653_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128653_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128653_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128653_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128653_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128653_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128653_iter[i],
                    (long) ctx->futhark_mc_segred_task_128653_iter[i] /
                    (ctx->futhark_mc_segred_task_128653_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128653_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128642         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128642_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128642_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128642_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128642_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128642_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128642_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128642_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128642_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128642_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128642_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128642_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128642_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128642_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128642_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128642_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128642_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128642_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128642_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128642_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128642_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128642_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128642_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128642_total_iter /
                (ctx->futhark_mc_segmap_parloop_128642_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128642_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128642_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128642_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128635            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128635_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128635_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128635_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128635_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128635_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128635_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128635_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128635_iter[i] /
                    (ctx->futhark_mc_segmap_task_128635_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128635_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128640     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128640_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128640_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128640_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128640_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128640_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128640_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128640_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128640_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128631         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128631_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128631_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128631_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128631_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128631_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128631_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128631_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128631_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128631_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128631_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128631_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128631_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128631_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128631_total_iter /
                (ctx->futhark_mc_segmap_parloop_128631_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128631_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128631_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128631_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128622            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128622_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128622_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128622_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128622_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128622_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128622_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128622_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128622_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128622_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128622_iter[i] /
                    (ctx->futhark_mc_segmap_task_128622_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128622_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128629     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128629_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128629_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128629_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128629_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128629_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128629_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128661         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128661_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128661_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128661_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128661_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128661_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128661_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128661_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128661_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128661_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128661_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128661_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128661_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128661_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128661_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128661_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128661_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128661_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128661_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128661_total_iter /
                (ctx->futhark_mc_segmap_parloop_128661_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128661_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128661_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128661_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128676         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128676_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128676_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128676_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128676_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128676_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128676_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128676_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128676_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128676_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128676_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128676_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128676_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128676_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128676_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128676_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128676_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128676_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128676_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128676_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128676_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128676_total_iter /
                (ctx->futhark_mc_segmap_parloop_128676_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128676_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128676_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128676_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128691         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128691_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128691_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128691_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128691_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128691_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128691_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128691_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128691_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128691_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128691_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128691_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128691_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128691_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128691_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128691_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128691_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128691_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128691_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128691_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128691_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128691_total_iter /
                (ctx->futhark_mc_segmap_parloop_128691_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128691_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128691_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128691_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128689            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128689_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128689_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128689_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128689_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128689_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128689_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128689_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128689_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128689_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128689_iter[i] /
                    (ctx->futhark_mc_segmap_task_128689_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128689_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128700 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128700_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128700_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128700_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128700_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128700_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128700_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128700_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128700_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128700_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128700_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128700_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128693            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128693_runs[i],
                    (long) ctx->futhark_mc_segred_task_128693_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128693_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128693_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128693_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128693_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128693_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128693_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128693_iter[i],
                    (long) ctx->futhark_mc_segred_task_128693_iter[i] /
                    (ctx->futhark_mc_segred_task_128693_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128693_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128706 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128706_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128706_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128706_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128706_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128706_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128706_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128706_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128706_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128706_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128706_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128706_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128702            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128702_runs[i],
                    (long) ctx->futhark_mc_segred_task_128702_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128702_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128702_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128702_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128702_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128702_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128702_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128702_iter[i],
                    (long) ctx->futhark_mc_segred_task_128702_iter[i] /
                    (ctx->futhark_mc_segred_task_128702_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128702_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128683         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128683_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128683_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128683_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128683_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128683_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128683_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128683_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128683_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128683_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128683_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128683_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128683_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128683_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128683_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128683_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128683_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128683_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128683_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128683_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128683_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128683_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128683_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128683_total_iter /
                (ctx->futhark_mc_segmap_parloop_128683_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128683_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128683_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128683_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128674            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128674_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128674_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128674_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128674_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128674_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128674_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128674_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128674_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128674_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128674_iter[i] /
                    (ctx->futhark_mc_segmap_task_128674_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128674_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128681     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128681_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128681_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128681_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128681_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128681_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128681_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128681_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128681_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128681_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128681_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128681_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128681_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128670         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128670_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128670_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128670_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128670_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128670_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128670_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128670_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128670_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128670_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128670_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128670_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128670_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128670_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128670_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128670_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128670_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128670_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128670_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128670_total_iter /
                (ctx->futhark_mc_segmap_parloop_128670_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128670_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128670_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128670_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128659            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128659_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128659_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128659_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128659_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128659_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128659_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128659_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128659_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128659_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128659_iter[i] /
                    (ctx->futhark_mc_segmap_task_128659_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128659_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128668     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128668_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128668_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128668_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128668_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128668_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128668_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128668_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128668_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128710         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128710_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128710_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128710_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128710_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128710_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128710_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128710_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128710_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128710_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128710_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128710_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128710_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128710_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128710_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128710_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128710_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128710_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128710_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128710_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128710_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128710_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128710_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128710_total_iter /
                (ctx->futhark_mc_segmap_parloop_128710_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128710_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128710_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128710_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128719         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128719_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128719_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128719_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128719_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128719_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128719_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128719_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128719_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128719_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128719_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128719_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128719_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128719_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128719_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128719_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128719_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128719_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128719_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128719_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128719_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128719_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128719_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128719_total_iter /
                (ctx->futhark_mc_segmap_parloop_128719_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128719_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128719_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128719_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128717            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128717_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128717_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128717_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128717_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128717_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128717_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128717_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128717_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128717_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128717_iter[i] /
                    (ctx->futhark_mc_segmap_task_128717_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128717_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128714         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128714_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128714_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128714_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128714_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128714_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128714_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128714_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128714_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128714_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128714_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128714_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128714_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128714_total_iter /
                (ctx->futhark_mc_segmap_parloop_128714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128714_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128714_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128714_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128708            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128708_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128708_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128708_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128708_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128708_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128708_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128708_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128708_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128708_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128708_iter[i] /
                    (ctx->futhark_mc_segmap_task_128708_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128708_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128712     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128712_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128712_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128712_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128712_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128712_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128712_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128723         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128723_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128723_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128723_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128723_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128723_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128723_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128723_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128723_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128723_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128723_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128723_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128723_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128723_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128723_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128723_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128723_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128723_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128723_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128723_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128723_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128723_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128723_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128723_total_iter /
                (ctx->futhark_mc_segmap_parloop_128723_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128723_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128723_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128723_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128732         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128732_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128732_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128732_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128732_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128732_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128732_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128732_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128732_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128732_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128732_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128732_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128732_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128732_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128732_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128732_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128732_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128732_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128732_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128732_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128732_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128732_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128732_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128732_total_iter /
                (ctx->futhark_mc_segmap_parloop_128732_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128732_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128732_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128732_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128730            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128730_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128730_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128730_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128730_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128730_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128730_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128730_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128730_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128730_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128730_iter[i] /
                    (ctx->futhark_mc_segmap_task_128730_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128730_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128727         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128727_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128727_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128727_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128727_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128727_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128727_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128727_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128727_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128727_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128727_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128727_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128727_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128727_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128727_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128727_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128727_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128727_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128727_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128727_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128727_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128727_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128727_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128727_total_iter /
                (ctx->futhark_mc_segmap_parloop_128727_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128727_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128727_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128727_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128721            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128721_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128721_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128721_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128721_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128721_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128721_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128721_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128721_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128721_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128721_iter[i] /
                    (ctx->futhark_mc_segmap_task_128721_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128721_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128725     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128725_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128725_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128725_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128725_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128725_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128725_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128725_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128725_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128725_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128725_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128725_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128725_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128736         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128736_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128736_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128736_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128736_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128736_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128736_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128736_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128736_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128736_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128736_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128736_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128736_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128736_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128736_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128736_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128736_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128736_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128736_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128736_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128736_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128736_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128736_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128736_total_iter /
                (ctx->futhark_mc_segmap_parloop_128736_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128736_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128736_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128736_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128745         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128745_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128745_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128745_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128745_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128745_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128745_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128745_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128745_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128745_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128745_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128745_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128745_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128745_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128745_total_iter /
                (ctx->futhark_mc_segmap_parloop_128745_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128745_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128745_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128745_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128743            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128743_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128743_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128743_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128743_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128743_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128743_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128743_iter[i] /
                    (ctx->futhark_mc_segmap_task_128743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128743_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128740         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128740_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128740_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128740_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128740_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128740_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128740_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128740_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128740_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128740_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128740_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128740_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128740_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128740_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128740_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128740_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128740_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128740_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128740_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128740_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128740_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128740_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128740_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128740_total_iter /
                (ctx->futhark_mc_segmap_parloop_128740_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128740_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128740_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128740_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128734            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128734_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128734_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128734_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128734_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128734_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128734_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128734_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128734_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128734_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128734_iter[i] /
                    (ctx->futhark_mc_segmap_task_128734_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128734_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128738     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128738_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128738_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128738_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128738_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128738_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128738_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128738_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128738_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128738_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128738_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128738_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128738_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128749         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128749_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128749_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128749_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128749_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128749_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128749_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128749_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128749_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128749_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128749_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128749_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128749_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128749_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128749_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128749_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128749_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128749_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128749_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128749_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128749_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128749_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128749_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128749_total_iter /
                (ctx->futhark_mc_segmap_parloop_128749_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128749_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128749_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128749_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128774   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128774_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128774_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128774_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128774_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128774_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128774_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128774_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128774_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128774_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128774_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128774_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128776   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128776_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128776_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128776_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128776_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128776_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128776_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128776_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128776_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128776_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128776_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128776_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128768           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128768_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128768_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128768_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128768_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128768_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128768_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128768_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128768_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128768_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128768_iter[i] /
                    (ctx->futhark_mc_segscan_task_128768_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128768_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128780         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128780_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128780_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128780_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128780_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128780_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128780_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128780_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128780_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128780_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128780_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128780_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128780_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128780_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128780_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128780_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128780_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128780_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128780_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128780_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128780_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128780_total_iter /
                (ctx->futhark_mc_segmap_parloop_128780_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128780_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128780_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128780_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128778            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128778_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128778_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128778_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128778_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128778_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128778_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128778_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128778_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128778_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128778_iter[i] /
                    (ctx->futhark_mc_segmap_task_128778_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128778_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128759         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128759_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128759_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128759_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128759_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128759_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128759_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128759_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128759_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128759_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128759_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128759_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128759_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128759_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128759_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128759_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128759_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128759_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128759_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128759_total_iter /
                (ctx->futhark_mc_segmap_parloop_128759_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128759_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128759_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128759_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128747            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128747_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128747_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128747_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128747_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128747_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128747_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128747_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128747_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128747_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128747_iter[i] /
                    (ctx->futhark_mc_segmap_task_128747_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128747_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128757     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128757_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128757_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128757_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128757_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128757_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128757_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128757_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128757_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128757_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128757_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128757_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128757_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128784         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128784_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128784_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128784_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128784_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128784_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128784_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128784_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128784_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128784_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128784_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128784_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128784_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128784_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128784_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128784_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128784_total_iter /
                (ctx->futhark_mc_segmap_parloop_128784_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128784_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128784_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128784_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128792 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128792_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128792_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128792_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128792_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128792_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128792_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128792_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128792_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128792_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128792_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128792_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128789            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128789_runs[i],
                    (long) ctx->futhark_mc_segred_task_128789_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128789_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128789_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128789_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128789_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128789_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128789_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128789_iter[i],
                    (long) ctx->futhark_mc_segred_task_128789_iter[i] /
                    (ctx->futhark_mc_segred_task_128789_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128789_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128787         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128787_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128787_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128787_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128787_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128787_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128787_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128787_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128787_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128787_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128787_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128787_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128787_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128787_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128787_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128787_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128787_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128787_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128787_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128787_total_iter /
                (ctx->futhark_mc_segmap_parloop_128787_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128787_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128787_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128787_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128782            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128782_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128782_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128782_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128782_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128782_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128782_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128782_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128782_iter[i] /
                    (ctx->futhark_mc_segmap_task_128782_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128782_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128785     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128785_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128785_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128785_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128785_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128785_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128785_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128785_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128785_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128785_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128785_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128785_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128785_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128796         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128796_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128796_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128796_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128796_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128796_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128796_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128796_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128796_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128796_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128796_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128796_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128796_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128796_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128796_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128796_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128796_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128796_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128796_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128796_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128796_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128796_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128796_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128796_total_iter /
                (ctx->futhark_mc_segmap_parloop_128796_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128796_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128796_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128796_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128805         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128805_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128805_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128805_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128805_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128805_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128805_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128805_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128805_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128805_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128805_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128805_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128805_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128805_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128805_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128805_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128805_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128805_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128805_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128805_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128805_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128805_total_iter /
                (ctx->futhark_mc_segmap_parloop_128805_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128805_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128805_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128805_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128803            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128803_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128803_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128803_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128803_iter[i] /
                    (ctx->futhark_mc_segmap_task_128803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128803_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128800         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128800_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128800_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128800_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128800_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128800_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128800_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128800_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128800_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128800_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128800_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128800_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128800_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128800_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128800_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128800_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128800_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128800_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128800_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128800_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128800_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128800_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128800_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128800_total_iter /
                (ctx->futhark_mc_segmap_parloop_128800_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128800_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128800_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128800_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128794            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128794_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128794_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128794_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128794_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128794_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128794_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128794_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128794_iter[i] /
                    (ctx->futhark_mc_segmap_task_128794_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128794_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128798     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128798_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128798_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128798_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128798_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128798_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128798_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128798_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128798_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128798_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128798_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128798_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128798_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128809         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128809_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128809_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128809_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128809_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128809_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128809_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128809_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128809_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128809_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128809_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128809_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128809_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128809_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128809_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128809_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128809_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128809_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128809_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128809_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128809_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128809_total_iter /
                (ctx->futhark_mc_segmap_parloop_128809_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128809_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128809_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128809_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128818         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128818_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128818_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128818_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128818_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128818_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128818_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128818_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128818_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128818_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128818_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128818_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128818_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128818_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128818_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128818_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128818_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128818_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128818_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128818_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128818_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128818_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128818_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128818_total_iter /
                (ctx->futhark_mc_segmap_parloop_128818_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128818_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128818_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128818_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128816            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128816_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128816_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128816_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128816_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128816_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128816_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128816_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128816_iter[i] /
                    (ctx->futhark_mc_segmap_task_128816_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128816_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128813         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128813_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128813_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128813_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128813_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128813_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128813_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128813_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128813_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128813_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128813_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128813_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128813_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128813_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128813_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128813_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128813_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128813_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128813_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128813_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128813_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128813_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128813_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128813_total_iter /
                (ctx->futhark_mc_segmap_parloop_128813_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128813_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128813_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128813_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128807            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128807_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128807_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128807_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128807_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128807_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128807_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128807_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128807_iter[i] /
                    (ctx->futhark_mc_segmap_task_128807_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128807_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128811     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128811_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128811_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128811_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128811_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128811_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128811_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128811_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128811_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128811_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128811_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128811_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128811_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_128030,
                             struct memblock *mem_out_p_128031,
                             struct memblock *mem_out_p_128032,
                             struct memblock Y_mem_119377, int64_t m_112519,
                             int64_t n_112520, int64_t n_p_112522,
                             int64_t t_window_112523, int64_t l_window_112524,
                             int64_t t_degree_112525, int64_t l_degree_112526,
                             int64_t t_jump_112527, int64_t l_jump_112528,
                             int64_t inner_112529, int64_t outer_112530,
                             int64_t jump_threshold_112531,
                             int64_t max_group_sizze_112532);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_128054 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    char *free_Y_mem_119377;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
};
struct futhark_mc_segmap_parloop_struct_128056 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    char *free_Y_mem_119377;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
};
static int futhark_mc_segmap_parloop_128057(void *args, int64_t start,
                                            int64_t end, int flat_tid_114691,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128056
    *futhark_mc_segmap_parloop_struct_128056 =
    (struct futhark_mc_segmap_parloop_struct_128056 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128056->ctx;
    uint64_t futhark_mc_segmap_parloop_128057_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128057_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128056->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128056->free_n_112520;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128056->free_i_112596;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128056->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128056->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128056->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128056->free_mem_119420,
                                  .size =0, .references =NULL};
    size_t mem_119386_cached_sizze_128058 = 0;
    char *mem_119386 = NULL;
    size_t mem_119401_cached_sizze_128059 = 0;
    char *mem_119401 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121234 = start;
    
    if (mem_119386_cached_sizze_128058 < (size_t) bytes_119378) {
        mem_119386 = realloc(mem_119386, bytes_119378);
        mem_119386_cached_sizze_128058 = bytes_119378;
    }
    if (mem_119401_cached_sizze_128059 < (size_t) bytes_119378) {
        mem_119401 = realloc(mem_119401, bytes_119378);
        mem_119401_cached_sizze_128059 = bytes_119378;
    }
    for (; iter_121234 < end; iter_121234++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121253 = m_112519;
        int64_t gtid_114692 = iter_121234;
        int64_t remnant_121254 = iter_121234 - gtid_114692;
        int64_t discard_118753;
        int64_t scanacc_121236 = (int64_t) 0;
        
        for (int64_t i_121235 = 0; i_121235 < n_112520; i_121235++) {
            float x_121238 = ((float *) Y_mem_119377.mem)[gtid_114692 *
                                                          n_112520 + i_121235];
            bool isnan_res_121239;
            
            isnan_res_121239 = futrts_isnan32(x_121238);
            
            bool defunc_0_p_res_121240 = !isnan_res_121239;
            int64_t defunc_0_f_res_121241 =
                    btoi_bool_i64(defunc_0_p_res_121240);
            int64_t defunc_1_op_res_121242 = add64(defunc_0_f_res_121241,
                                                   scanacc_121236);
            
            ((int64_t *) mem_119386)[i_121235] = defunc_1_op_res_121242;
            
            int64_t scanacc_tmp_121255 = defunc_1_op_res_121242;
            
            scanacc_121236 = scanacc_tmp_121255;
        }
        discard_118753 = scanacc_121236;
        
        int64_t last_res_112613 = ((int64_t *) mem_119386)[i_112596];
        
        for (int64_t i_121257 = 0; i_121257 < n_112520; i_121257++) {
            ((int64_t *) mem_119401)[i_121257] = (int64_t) -1;
        }
        for (int64_t write_iter_121244 = 0; write_iter_121244 < n_112520;
             write_iter_121244++) {
            float write_iv_121246 = ((float *) Y_mem_119377.mem)[gtid_114692 *
                                                                 n_112520 +
                                                                 write_iter_121244];
            bool isnan_res_121247;
            
            isnan_res_121247 = futrts_isnan32(write_iv_121246);
            
            bool defunc_0_p_res_121248 = !isnan_res_121247;
            int64_t defunc_1_f_res_121249;
            
            if (defunc_0_p_res_121248) {
                int64_t write_iv_121250 =
                        ((int64_t *) mem_119386)[write_iter_121244];
                int64_t defunc_1_f_res_t_res_121251 = sub64(write_iv_121250,
                                                            (int64_t) 1);
                
                defunc_1_f_res_121249 = defunc_1_f_res_t_res_121251;
            } else {
                defunc_1_f_res_121249 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_121249) &&
                slt64(defunc_1_f_res_121249, n_112520)) {
                ((int64_t *) mem_119401)[defunc_1_f_res_121249] =
                    write_iter_121244;
            }
        }
        memmove(mem_119417.mem + gtid_114692 * n_112520 * (int64_t) 8,
                mem_119401 + (int64_t) 0, n_112520 * (int64_t) 8);
        ((int64_t *) mem_119420.mem)[gtid_114692] = last_res_112613;
    }
    
  cleanup:
    { }
    free(mem_119386);
    free(mem_119401);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128057_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128057_end -
                 futhark_mc_segmap_parloop_128057_start;
        
        ctx->futhark_mc_segmap_parloop_128057_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128057_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128057_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128055(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114691 = tid;
    int num_tasks_121233 = info.nsubtasks;
    struct futhark_mc_task_128054 *futhark_mc_task_128054 =
                                  (struct futhark_mc_task_128054 *) args;
    struct futhark_context *ctx = futhark_mc_task_128054->ctx;
    uint64_t futhark_mc_segmap_task_128055_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128055_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128054->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128054->free_n_112520;
    int64_t i_112596 = futhark_mc_task_128054->free_i_112596;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128054->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119378 = futhark_mc_task_128054->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128054->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128054->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t iter_121234;
    struct futhark_mc_segmap_parloop_struct_128056
    futhark_mc_segmap_parloop_struct_128056;
    
    futhark_mc_segmap_parloop_struct_128056.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128056.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128056.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128056.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128056.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128056.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128056.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128056.free_mem_119420 = mem_119420.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128057_task;
    
    futhark_mc_segmap_parloop_128057_task.name =
        "futhark_mc_segmap_parloop_128057";
    futhark_mc_segmap_parloop_128057_task.fn = futhark_mc_segmap_parloop_128057;
    futhark_mc_segmap_parloop_128057_task.args =
        &futhark_mc_segmap_parloop_struct_128056;
    futhark_mc_segmap_parloop_128057_task.iterations = iterations;
    futhark_mc_segmap_parloop_128057_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128057_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128057_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128057_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128057_task);
    
    if (futhark_mc_segmap_parloop_128057_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128057_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128057_total_end -
                 futhark_mc_segmap_parloop_128057_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128057_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128057_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128057_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128055_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128055_end -
                 futhark_mc_segmap_task_128055_start;
        
        ctx->futhark_mc_segmap_task_128055_runs[tid]++;
        ctx->futhark_mc_segmap_task_128055_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128055_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128061 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    char *free_Y_mem_119377;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
};
struct futhark_mc_task_128065 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114694;
    char *free_Y_mem_119377;
    char *free_mem_119380;
};
struct futhark_mc_scan_stage_1_parloop_struct_128068 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114694;
    char *free_Y_mem_119377;
    char *free_mem_119380;
};
static int futhark_mc_scan_stage_1_parloop_128069(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_114695, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128068
    *futhark_mc_scan_stage_1_parloop_struct_128068 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128068 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128068->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128069_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128069_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_scan_stage_1_parloop_struct_128068->free_n_112520;
    int64_t gtid_114694 =
            futhark_mc_scan_stage_1_parloop_struct_128068->free_gtid_114694;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_128068->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119380 = {.desc ="mem_119380", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128068->free_mem_119380,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121276 = start;
    int64_t x_121260;
    int64_t x_121261;
    
    x_121260 = (int64_t) 0;
    for (; iter_121276 < end; iter_121276++) {
        int64_t gtid_114696 = iter_121276;
        
        // stage 1 scan body
        {
            float x_121263 = ((float *) Y_mem_119377.mem)[gtid_114694 *
                                                          n_112520 +
                                                          gtid_114696];
            bool isnan_res_121264;
            
            isnan_res_121264 = futrts_isnan32(x_121263);
            
            bool defunc_0_p_res_121265 = !isnan_res_121264;
            int64_t defunc_0_f_res_121266 =
                    btoi_bool_i64(defunc_0_p_res_121265);
            
            // write mapped values results to memory
            { }
            x_121260 = x_121260;
            // Read next values
            {
                x_121261 = defunc_0_f_res_121266;
            }
            
            int64_t defunc_1_op_res_121262 = add64(x_121260, x_121261);
            
            ((int64_t *) mem_119380.mem)[gtid_114696] = defunc_1_op_res_121262;
            x_121260 = defunc_1_op_res_121262;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128069_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128069_end -
                 futhark_mc_scan_stage_1_parloop_128069_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128069_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128069_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128069_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128070 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114694;
    char *free_Y_mem_119377;
    char *free_mem_119380;
};
static int futhark_mc_scan_stage_3_parloop_128071(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_114695, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128070
    *futhark_mc_scan_stage_3_parloop_struct_128070 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128070 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128070->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128071_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128071_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_scan_stage_3_parloop_struct_128070->free_n_112520;
    int64_t gtid_114694 =
            futhark_mc_scan_stage_3_parloop_struct_128070->free_gtid_114694;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_128070->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119380 = {.desc ="mem_119380", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128070->free_mem_119380,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121288 = start;
    int64_t x_121285;
    int64_t x_121286;
    
    if (iter_121288 == (int64_t) 0) {
        x_121285 = (int64_t) 0;
    } else {
        x_121285 = ((int64_t *) mem_119380.mem)[iter_121288 - (int64_t) 1];
    }
    for (; iter_121288 < end; iter_121288++) {
        int64_t gtid_114696 = iter_121288;
        
        // stage 3 scan body
        {
            float x_121263 = ((float *) Y_mem_119377.mem)[gtid_114694 *
                                                          n_112520 +
                                                          gtid_114696];
            bool isnan_res_121264;
            
            isnan_res_121264 = futrts_isnan32(x_121263);
            
            bool defunc_0_p_res_121265 = !isnan_res_121264;
            int64_t defunc_0_f_res_121266 =
                    btoi_bool_i64(defunc_0_p_res_121265);
            
            x_121285 = x_121285;
            x_121286 = defunc_0_f_res_121266;
            
            int64_t defunc_1_op_res_121287 = add64(x_121285, x_121286);
            
            ((int64_t *) mem_119380.mem)[gtid_114696] = defunc_1_op_res_121287;
            x_121285 = defunc_1_op_res_121287;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128071_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128071_end -
                 futhark_mc_scan_stage_3_parloop_128071_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128071_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128071_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128071_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128066(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114695 = tid;
    int num_tasks_121275 = info.nsubtasks;
    struct futhark_mc_task_128065 *futhark_mc_task_128065 =
                                  (struct futhark_mc_task_128065 *) args;
    struct futhark_context *ctx = futhark_mc_task_128065->ctx;
    uint64_t futhark_mc_segscan_task_128066_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128066_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128065->free_n_112520;
    int64_t gtid_114694 = futhark_mc_task_128065->free_gtid_114694;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128065->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119380 = {.desc ="mem_119380", .mem =
                                  futhark_mc_task_128065->free_mem_119380,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_121282_cached_sizze_128067 = 0;
    char *scan_stage_2_accum_mem_121282 = NULL;
    int64_t iter_121276;
    struct futhark_mc_scan_stage_1_parloop_struct_128068
    futhark_mc_scan_stage_1_parloop_struct_128068;
    
    futhark_mc_scan_stage_1_parloop_struct_128068.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128068.free_n_112520 = n_112520;
    futhark_mc_scan_stage_1_parloop_struct_128068.free_gtid_114694 =
        gtid_114694;
    futhark_mc_scan_stage_1_parloop_struct_128068.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_scan_stage_1_parloop_struct_128068.free_mem_119380 =
        mem_119380.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128069_task;
    
    futhark_mc_scan_stage_1_parloop_128069_task.name =
        "futhark_mc_scan_stage_1_parloop_128069";
    futhark_mc_scan_stage_1_parloop_128069_task.fn =
        futhark_mc_scan_stage_1_parloop_128069;
    futhark_mc_scan_stage_1_parloop_128069_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128068;
    futhark_mc_scan_stage_1_parloop_128069_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128069_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128069_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128069_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128069_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128069_task);
    
    if (futhark_mc_scan_stage_1_parloop_128069_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128069_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128069_total_end -
                 futhark_mc_scan_stage_1_parloop_128069_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128069_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128069_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128069_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_121275)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_121277;
        int64_t x_121278;
        int64_t offset_121280 = (int64_t) 0;
        int64_t offset_index_121281 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_121282_cached_sizze_128067 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_121282 =
                realloc(scan_stage_2_accum_mem_121282, (int64_t) 8);
            scan_stage_2_accum_mem_121282_cached_sizze_128067 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_121282)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_121284 = 0; i_121284 < num_tasks_121275 - 1;
             i_121284++) {
            offset_121280 = squot64(n_112520, sext_i32_i64(num_tasks_121275));
            if (slt64(sext_i32_i64(i_121284), srem64(n_112520,
                                                     sext_i32_i64(num_tasks_121275)))) {
                offset_121280 += (int64_t) 1;
            }
            offset_index_121281 += offset_121280;
            
            int64_t gtid_114696 = offset_index_121281;
            float x_121263 = ((float *) Y_mem_119377.mem)[gtid_114694 *
                                                          n_112520 +
                                                          gtid_114696];
            bool isnan_res_121264;
            
            isnan_res_121264 = futrts_isnan32(x_121263);
            
            bool defunc_0_p_res_121265 = !isnan_res_121264;
            int64_t defunc_0_f_res_121266 =
                    btoi_bool_i64(defunc_0_p_res_121265);
            
            // Read carry in
            {
                x_121277 =
                    ((int64_t *) scan_stage_2_accum_mem_121282)[(int64_t) 0];
            }
            // Read next values
            {
                x_121278 = ((int64_t *) mem_119380.mem)[offset_index_121281 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_121279 = add64(x_121277, x_121278);
            
            ((int64_t *) mem_119380.mem)[offset_index_121281 - (int64_t) 1] =
                defunc_1_op_res_121279;
            ((int64_t *) scan_stage_2_accum_mem_121282)[(int64_t) 0] =
                defunc_1_op_res_121279;
        }
        
        int64_t iter_121288 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128070
        futhark_mc_scan_stage_3_parloop_struct_128070;
        
        futhark_mc_scan_stage_3_parloop_struct_128070.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128070.free_n_112520 = n_112520;
        futhark_mc_scan_stage_3_parloop_struct_128070.free_gtid_114694 =
            gtid_114694;
        futhark_mc_scan_stage_3_parloop_struct_128070.free_Y_mem_119377 =
            Y_mem_119377.mem;
        futhark_mc_scan_stage_3_parloop_struct_128070.free_mem_119380 =
            mem_119380.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128071_task;
        
        futhark_mc_scan_stage_3_parloop_128071_task.name =
            "futhark_mc_scan_stage_3_parloop_128071";
        futhark_mc_scan_stage_3_parloop_128071_task.fn =
            futhark_mc_scan_stage_3_parloop_128071;
        futhark_mc_scan_stage_3_parloop_128071_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128070;
        futhark_mc_scan_stage_3_parloop_128071_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128071_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128071_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128071_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128071_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128071_task);
        
        if (futhark_mc_scan_stage_3_parloop_128071_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128071_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128071_total_end -
                     futhark_mc_scan_stage_3_parloop_128071_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128071_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128071_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128071_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_121282);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128066_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128066_end -
                 futhark_mc_segscan_task_128066_start;
        
        ctx->futhark_mc_segscan_task_128066_runs[tid]++;
        ctx->futhark_mc_segscan_task_128066_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128066_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128072 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114694;
    char *free_Y_mem_119377;
    char *free_mem_119380;
    char *free_mem_119383;
};
struct futhark_mc_segmap_parloop_struct_128074 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114694;
    char *free_Y_mem_119377;
    char *free_mem_119380;
    char *free_mem_119383;
};
static int futhark_mc_segmap_parloop_128075(void *args, int64_t start,
                                            int64_t end, int flat_tid_114697,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128074
    *futhark_mc_segmap_parloop_struct_128074 =
    (struct futhark_mc_segmap_parloop_struct_128074 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128074->ctx;
    uint64_t futhark_mc_segmap_parloop_128075_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128075_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128074->free_n_112520;
    int64_t gtid_114694 =
            futhark_mc_segmap_parloop_struct_128074->free_gtid_114694;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128074->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119380 = {.desc ="mem_119380", .mem =
                                  futhark_mc_segmap_parloop_struct_128074->free_mem_119380,
                                  .size =0, .references =NULL};
    struct memblock mem_119383 = {.desc ="mem_119383", .mem =
                                  futhark_mc_segmap_parloop_struct_128074->free_mem_119383,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121291 = start;
    
    for (; iter_121291 < end; iter_121291++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121294 = n_112520;
        int64_t gtid_114698 = iter_121291;
        int64_t remnant_121295 = iter_121291 - gtid_114698;
        float x_121267 = ((float *) Y_mem_119377.mem)[gtid_114694 * n_112520 +
                                                      gtid_114698];
        bool isnan_res_121268;
        
        isnan_res_121268 = futrts_isnan32(x_121267);
        
        bool defunc_0_p_res_121269 = !isnan_res_121268;
        int64_t defunc_1_f_res_121270;
        
        if (defunc_0_p_res_121269) {
            int64_t x_121292 = ((int64_t *) mem_119380.mem)[gtid_114698];
            int64_t defunc_1_f_res_t_res_121293 = sub64(x_121292, (int64_t) 1);
            
            defunc_1_f_res_121270 = defunc_1_f_res_t_res_121293;
        } else {
            defunc_1_f_res_121270 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_121270) &&
            slt64(defunc_1_f_res_121270, n_112520)) {
            ((int64_t *) mem_119383.mem)[defunc_1_f_res_121270] = gtid_114698;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128075_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128075_end -
                 futhark_mc_segmap_parloop_128075_start;
        
        ctx->futhark_mc_segmap_parloop_128075_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128075_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128075_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128073(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114697 = tid;
    int num_tasks_121290 = info.nsubtasks;
    struct futhark_mc_task_128072 *futhark_mc_task_128072 =
                                  (struct futhark_mc_task_128072 *) args;
    struct futhark_context *ctx = futhark_mc_task_128072->ctx;
    uint64_t futhark_mc_segmap_task_128073_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128073_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128072->free_n_112520;
    int64_t gtid_114694 = futhark_mc_task_128072->free_gtid_114694;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128072->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119380 = {.desc ="mem_119380", .mem =
                                  futhark_mc_task_128072->free_mem_119380,
                                  .size =0, .references =NULL};
    struct memblock mem_119383 = {.desc ="mem_119383", .mem =
                                  futhark_mc_task_128072->free_mem_119383,
                                  .size =0, .references =NULL};
    int64_t iter_121291;
    struct futhark_mc_segmap_parloop_struct_128074
    futhark_mc_segmap_parloop_struct_128074;
    
    futhark_mc_segmap_parloop_struct_128074.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128074.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128074.free_gtid_114694 = gtid_114694;
    futhark_mc_segmap_parloop_struct_128074.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128074.free_mem_119380 = mem_119380.mem;
    futhark_mc_segmap_parloop_struct_128074.free_mem_119383 = mem_119383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128075_task;
    
    futhark_mc_segmap_parloop_128075_task.name =
        "futhark_mc_segmap_parloop_128075";
    futhark_mc_segmap_parloop_128075_task.fn = futhark_mc_segmap_parloop_128075;
    futhark_mc_segmap_parloop_128075_task.args =
        &futhark_mc_segmap_parloop_struct_128074;
    futhark_mc_segmap_parloop_128075_task.iterations = iterations;
    futhark_mc_segmap_parloop_128075_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128075_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128075_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128075_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128075_task);
    
    if (futhark_mc_segmap_parloop_128075_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128075_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128075_total_end -
                 futhark_mc_segmap_parloop_128075_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128075_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128075_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128075_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128073_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128073_end -
                 futhark_mc_segmap_task_128073_start;
        
        ctx->futhark_mc_segmap_task_128073_runs[tid]++;
        ctx->futhark_mc_segmap_task_128073_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128073_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128062(void *args, int64_t start,
                                            int64_t end, int flat_tid_114693,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128061
    *futhark_mc_segmap_parloop_struct_128061 =
    (struct futhark_mc_segmap_parloop_struct_128061 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128061->ctx;
    uint64_t futhark_mc_segmap_parloop_128062_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128062_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128061->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128061->free_n_112520;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128061->free_i_112596;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128061->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128061->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128061->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128061->free_mem_119420,
                                  .size =0, .references =NULL};
    size_t mem_119380_cached_sizze_128063 = 0;
    char *mem_119380 = NULL;
    size_t mem_119383_cached_sizze_128064 = 0;
    char *mem_119383 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121259 = start;
    
    if (mem_119380_cached_sizze_128063 < (size_t) bytes_119378) {
        mem_119380 = realloc(mem_119380, bytes_119378);
        mem_119380_cached_sizze_128063 = bytes_119378;
    }
    if (mem_119383_cached_sizze_128064 < (size_t) bytes_119378) {
        mem_119383 = realloc(mem_119383, bytes_119378);
        mem_119383_cached_sizze_128064 = bytes_119378;
    }
    for (; iter_121259 < end; iter_121259++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121273 = m_112519;
        int64_t gtid_114694 = iter_121259;
        int64_t remnant_121274 = iter_121259 - gtid_114694;
        int64_t flat_tid_114695 = (int64_t) 0;
        int32_t num_tasks_121275;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128065 futhark_mc_task_128065;
        
        futhark_mc_task_128065.ctx = ctx;
        futhark_mc_task_128065.free_n_112520 = n_112520;
        futhark_mc_task_128065.free_gtid_114694 = gtid_114694;
        futhark_mc_task_128065.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128065.free_mem_119380 = mem_119380;
        
        struct scheduler_segop futhark_mc_task_128065_task;
        
        futhark_mc_task_128065_task.args = &futhark_mc_task_128065;
        futhark_mc_task_128065_task.top_level_fn =
            futhark_mc_segscan_task_128066;
        futhark_mc_task_128065_task.name = "futhark_mc_segscan_task_128066";
        futhark_mc_task_128065_task.iterations = n_112520;
        futhark_mc_task_128065_task.task_time =
            &ctx->futhark_mc_segscan_task_128066_total_time;
        futhark_mc_task_128065_task.task_iter =
            &ctx->futhark_mc_segscan_task_128066_total_iter;
        futhark_mc_task_128065_task.sched = STATIC;
        futhark_mc_task_128065_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128066_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128065_task);
        
        if (futhark_mc_segscan_task_128066_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_114708 = ((int64_t *) mem_119380)[i_112596];
        
        for (int64_t i_121289 = 0; i_121289 < n_112520; i_121289++) {
            ((int64_t *) mem_119383)[i_121289] = (int64_t) -1;
        }
        
        int64_t flat_tid_114697 = (int64_t) 0;
        int32_t num_tasks_121290;
        struct futhark_mc_task_128072 futhark_mc_task_128072;
        
        futhark_mc_task_128072.ctx = ctx;
        futhark_mc_task_128072.free_n_112520 = n_112520;
        futhark_mc_task_128072.free_gtid_114694 = gtid_114694;
        futhark_mc_task_128072.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128072.free_mem_119380 = mem_119380;
        futhark_mc_task_128072.free_mem_119383 = mem_119383;
        
        struct scheduler_segop futhark_mc_task_128072_task;
        
        futhark_mc_task_128072_task.args = &futhark_mc_task_128072;
        futhark_mc_task_128072_task.top_level_fn =
            futhark_mc_segmap_task_128073;
        futhark_mc_task_128072_task.name = "futhark_mc_segmap_task_128073";
        futhark_mc_task_128072_task.iterations = n_112520;
        futhark_mc_task_128072_task.task_time =
            &ctx->futhark_mc_segmap_task_128073_total_time;
        futhark_mc_task_128072_task.task_iter =
            &ctx->futhark_mc_segmap_task_128073_total_iter;
        futhark_mc_task_128072_task.sched = STATIC;
        futhark_mc_task_128072_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128073_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128072_task);
        
        if (futhark_mc_segmap_task_128073_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119417.mem + gtid_114694 * n_112520 * (int64_t) 8,
                mem_119383 + (int64_t) 0, n_112520 * (int64_t) 8);
        ((int64_t *) mem_119420.mem)[gtid_114694] = last_res_114708;
    }
    
  cleanup:
    { }
    free(mem_119380);
    free(mem_119383);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128062_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128062_end -
                 futhark_mc_segmap_parloop_128062_start;
        
        ctx->futhark_mc_segmap_parloop_128062_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128062_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128062_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128060(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114693 = tid;
    int num_tasks_121233 = info.nsubtasks;
    struct futhark_mc_task_128054 *futhark_mc_task_128054 =
                                  (struct futhark_mc_task_128054 *) args;
    struct futhark_context *ctx = futhark_mc_task_128054->ctx;
    uint64_t futhark_mc_segmap_nested_task_128060_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128060_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128054->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128054->free_n_112520;
    int64_t i_112596 = futhark_mc_task_128054->free_i_112596;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128054->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119378 = futhark_mc_task_128054->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128054->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128054->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t iter_121259;
    struct futhark_mc_segmap_parloop_struct_128061
    futhark_mc_segmap_parloop_struct_128061;
    
    futhark_mc_segmap_parloop_struct_128061.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128061.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128061.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128061.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128061.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128061.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128061.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128061.free_mem_119420 = mem_119420.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128062_task;
    
    futhark_mc_segmap_parloop_128062_task.name =
        "futhark_mc_segmap_parloop_128062";
    futhark_mc_segmap_parloop_128062_task.fn = futhark_mc_segmap_parloop_128062;
    futhark_mc_segmap_parloop_128062_task.args =
        &futhark_mc_segmap_parloop_struct_128061;
    futhark_mc_segmap_parloop_128062_task.iterations = iterations;
    futhark_mc_segmap_parloop_128062_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128062_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128062_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128062_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128062_task);
    
    if (futhark_mc_segmap_parloop_128062_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128062_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128062_total_end -
                 futhark_mc_segmap_parloop_128062_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128062_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128062_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128062_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128060_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128060_end -
                 futhark_mc_segmap_nested_task_128060_start;
        
        ctx->futhark_mc_segmap_nested_task_128060_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128060_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128060_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128076 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_119442;
};
struct futhark_mc_segmap_parloop_struct_128078 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_119442;
};
static int futhark_mc_segmap_parloop_128079(void *args, int64_t start,
                                            int64_t end, int flat_tid_114718,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128078
    *futhark_mc_segmap_parloop_struct_128078 =
    (struct futhark_mc_segmap_parloop_struct_128078 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128078->ctx;
    uint64_t futhark_mc_segmap_parloop_128079_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128079_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128078->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128078->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128078->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128078->free_bytes_119421;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128078->free_mem_119442,
                                  .size =0, .references =NULL};
    size_t mem_119426_cached_sizze_128080 = 0;
    char *mem_119426 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121297 = start;
    
    if (mem_119426_cached_sizze_128080 < (size_t) bytes_119421) {
        mem_119426 = realloc(mem_119426, bytes_119421);
        mem_119426_cached_sizze_128080 = bytes_119421;
    }
    for (; iter_121297 < end; iter_121297++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121303 = m_112519;
        int64_t gtid_114719 = iter_121297;
        int64_t remnant_121304 = iter_121297 - gtid_114719;
        
        for (int64_t i_121298 = 0; i_121298 < n_112520; i_121298++) {
            int64_t x_121300 = ((int64_t *) mem_119417.mem)[gtid_114719 *
                                                            n_112520 +
                                                            i_121298];
            float i64_res_121301 = sitofp_i64_f32(x_121300);
            
            ((float *) mem_119426)[i_121298] = i64_res_121301;
        }
        memmove(mem_119442.mem + gtid_114719 * n_112520 * (int64_t) 4,
                mem_119426 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119426);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128079_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128079_end -
                 futhark_mc_segmap_parloop_128079_start;
        
        ctx->futhark_mc_segmap_parloop_128079_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128079_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128079_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128077(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114718 = tid;
    int num_tasks_121296 = info.nsubtasks;
    struct futhark_mc_task_128076 *futhark_mc_task_128076 =
                                  (struct futhark_mc_task_128076 *) args;
    struct futhark_context *ctx = futhark_mc_task_128076->ctx;
    uint64_t futhark_mc_segmap_task_128077_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128077_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128076->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128076->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128076->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128076->free_bytes_119421;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128076->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t iter_121297;
    struct futhark_mc_segmap_parloop_struct_128078
    futhark_mc_segmap_parloop_struct_128078;
    
    futhark_mc_segmap_parloop_struct_128078.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128078.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128078.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128078.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128078.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128078.free_mem_119442 = mem_119442.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128079_task;
    
    futhark_mc_segmap_parloop_128079_task.name =
        "futhark_mc_segmap_parloop_128079";
    futhark_mc_segmap_parloop_128079_task.fn = futhark_mc_segmap_parloop_128079;
    futhark_mc_segmap_parloop_128079_task.args =
        &futhark_mc_segmap_parloop_struct_128078;
    futhark_mc_segmap_parloop_128079_task.iterations = iterations;
    futhark_mc_segmap_parloop_128079_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128079_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128079_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128079_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128079_task);
    
    if (futhark_mc_segmap_parloop_128079_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128079_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128079_total_end -
                 futhark_mc_segmap_parloop_128079_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128079_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128079_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128079_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128077_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128077_end -
                 futhark_mc_segmap_task_128077_start;
        
        ctx->futhark_mc_segmap_task_128077_runs[tid]++;
        ctx->futhark_mc_segmap_task_128077_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128077_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128082 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_119442;
};
struct futhark_mc_task_128085 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114721;
    char *free_mem_119417;
    char *free_mem_119423;
};
struct futhark_mc_segmap_parloop_struct_128087 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114721;
    char *free_mem_119417;
    char *free_mem_119423;
};
static int futhark_mc_segmap_parloop_128088(void *args, int64_t start,
                                            int64_t end, int flat_tid_114722,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128087
    *futhark_mc_segmap_parloop_struct_128087 =
    (struct futhark_mc_segmap_parloop_struct_128087 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128087->ctx;
    uint64_t futhark_mc_segmap_parloop_128088_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128088_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128087->free_n_112520;
    int64_t gtid_114721 =
            futhark_mc_segmap_parloop_struct_128087->free_gtid_114721;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128087->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119423 = {.desc ="mem_119423", .mem =
                                  futhark_mc_segmap_parloop_struct_128087->free_mem_119423,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121312 = start;
    
    for (; iter_121312 < end; iter_121312++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121313 = n_112520;
        int64_t gtid_114723 = iter_121312;
        int64_t remnant_121314 = iter_121312 - gtid_114723;
        int64_t x_121307 = ((int64_t *) mem_119417.mem)[gtid_114721 * n_112520 +
                                                        gtid_114723];
        float i64_res_121308 = sitofp_i64_f32(x_121307);
        
        ((float *) mem_119423.mem)[gtid_114723] = i64_res_121308;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128088_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128088_end -
                 futhark_mc_segmap_parloop_128088_start;
        
        ctx->futhark_mc_segmap_parloop_128088_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128088_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128088_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128086(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114722 = tid;
    int num_tasks_121311 = info.nsubtasks;
    struct futhark_mc_task_128085 *futhark_mc_task_128085 =
                                  (struct futhark_mc_task_128085 *) args;
    struct futhark_context *ctx = futhark_mc_task_128085->ctx;
    uint64_t futhark_mc_segmap_task_128086_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128086_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128085->free_n_112520;
    int64_t gtid_114721 = futhark_mc_task_128085->free_gtid_114721;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128085->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119423 = {.desc ="mem_119423", .mem =
                                  futhark_mc_task_128085->free_mem_119423,
                                  .size =0, .references =NULL};
    int64_t iter_121312;
    struct futhark_mc_segmap_parloop_struct_128087
    futhark_mc_segmap_parloop_struct_128087;
    
    futhark_mc_segmap_parloop_struct_128087.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128087.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128087.free_gtid_114721 = gtid_114721;
    futhark_mc_segmap_parloop_struct_128087.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128087.free_mem_119423 = mem_119423.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128088_task;
    
    futhark_mc_segmap_parloop_128088_task.name =
        "futhark_mc_segmap_parloop_128088";
    futhark_mc_segmap_parloop_128088_task.fn = futhark_mc_segmap_parloop_128088;
    futhark_mc_segmap_parloop_128088_task.args =
        &futhark_mc_segmap_parloop_struct_128087;
    futhark_mc_segmap_parloop_128088_task.iterations = iterations;
    futhark_mc_segmap_parloop_128088_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128088_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128088_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128088_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128088_task);
    
    if (futhark_mc_segmap_parloop_128088_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128088_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128088_total_end -
                 futhark_mc_segmap_parloop_128088_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128088_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128088_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128088_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128086_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128086_end -
                 futhark_mc_segmap_task_128086_start;
        
        ctx->futhark_mc_segmap_task_128086_runs[tid]++;
        ctx->futhark_mc_segmap_task_128086_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128086_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128083(void *args, int64_t start,
                                            int64_t end, int flat_tid_114720,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128082
    *futhark_mc_segmap_parloop_struct_128082 =
    (struct futhark_mc_segmap_parloop_struct_128082 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128082->ctx;
    uint64_t futhark_mc_segmap_parloop_128083_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128083_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128082->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128082->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128082->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128082->free_bytes_119421;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128082->free_mem_119442,
                                  .size =0, .references =NULL};
    size_t mem_119423_cached_sizze_128084 = 0;
    char *mem_119423 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121306 = start;
    
    if (mem_119423_cached_sizze_128084 < (size_t) bytes_119421) {
        mem_119423 = realloc(mem_119423, bytes_119421);
        mem_119423_cached_sizze_128084 = bytes_119421;
    }
    for (; iter_121306 < end; iter_121306++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121309 = m_112519;
        int64_t gtid_114721 = iter_121306;
        int64_t remnant_121310 = iter_121306 - gtid_114721;
        int64_t flat_tid_114722 = (int64_t) 0;
        int32_t num_tasks_121311;
        struct futhark_mc_task_128085 futhark_mc_task_128085;
        
        futhark_mc_task_128085.ctx = ctx;
        futhark_mc_task_128085.free_n_112520 = n_112520;
        futhark_mc_task_128085.free_gtid_114721 = gtid_114721;
        futhark_mc_task_128085.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128085.free_mem_119423 = mem_119423;
        
        struct scheduler_segop futhark_mc_task_128085_task;
        
        futhark_mc_task_128085_task.args = &futhark_mc_task_128085;
        futhark_mc_task_128085_task.top_level_fn =
            futhark_mc_segmap_task_128086;
        futhark_mc_task_128085_task.name = "futhark_mc_segmap_task_128086";
        futhark_mc_task_128085_task.iterations = n_112520;
        futhark_mc_task_128085_task.task_time =
            &ctx->futhark_mc_segmap_task_128086_total_time;
        futhark_mc_task_128085_task.task_iter =
            &ctx->futhark_mc_segmap_task_128086_total_iter;
        futhark_mc_task_128085_task.sched = STATIC;
        futhark_mc_task_128085_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128086_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128085_task);
        
        if (futhark_mc_segmap_task_128086_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119442.mem + gtid_114721 * n_112520 * (int64_t) 4,
                mem_119423 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119423);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128083_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128083_end -
                 futhark_mc_segmap_parloop_128083_start;
        
        ctx->futhark_mc_segmap_parloop_128083_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128083_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128083_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128081(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114720 = tid;
    int num_tasks_121296 = info.nsubtasks;
    struct futhark_mc_task_128076 *futhark_mc_task_128076 =
                                  (struct futhark_mc_task_128076 *) args;
    struct futhark_context *ctx = futhark_mc_task_128076->ctx;
    uint64_t futhark_mc_segmap_nested_task_128081_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128081_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128076->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128076->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128076->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128076->free_bytes_119421;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128076->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t iter_121306;
    struct futhark_mc_segmap_parloop_struct_128082
    futhark_mc_segmap_parloop_struct_128082;
    
    futhark_mc_segmap_parloop_struct_128082.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128082.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128082.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128082.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128082.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128082.free_mem_119442 = mem_119442.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128083_task;
    
    futhark_mc_segmap_parloop_128083_task.name =
        "futhark_mc_segmap_parloop_128083";
    futhark_mc_segmap_parloop_128083_task.fn = futhark_mc_segmap_parloop_128083;
    futhark_mc_segmap_parloop_128083_task.args =
        &futhark_mc_segmap_parloop_struct_128082;
    futhark_mc_segmap_parloop_128083_task.iterations = iterations;
    futhark_mc_segmap_parloop_128083_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128083_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128083_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128083_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128083_task);
    
    if (futhark_mc_segmap_parloop_128083_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128083_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128083_total_end -
                 futhark_mc_segmap_parloop_128083_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128083_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128083_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128083_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128081_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128081_end -
                 futhark_mc_segmap_nested_task_128081_start;
        
        ctx->futhark_mc_segmap_nested_task_128081_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128081_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128081_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128089 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_i_112596;
    int64_t free_bytes_119443;
    char *free_mem_119464;
};
struct futhark_mc_segmap_parloop_struct_128091 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_i_112596;
    int64_t free_bytes_119443;
    char *free_mem_119464;
};
static int futhark_mc_segmap_parloop_128092(void *args, int64_t start,
                                            int64_t end, int flat_tid_114728,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128091
    *futhark_mc_segmap_parloop_struct_128091 =
    (struct futhark_mc_segmap_parloop_struct_128091 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128091->ctx;
    uint64_t futhark_mc_segmap_parloop_128092_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128092_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128091->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128091->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128091->free_i_112596;
    int64_t bytes_119443 =
            futhark_mc_segmap_parloop_struct_128091->free_bytes_119443;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128091->free_mem_119464,
                                  .size =0, .references =NULL};
    size_t mem_119448_cached_sizze_128093 = 0;
    char *mem_119448 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121316 = start;
    
    if (mem_119448_cached_sizze_128093 < (size_t) bytes_119443) {
        mem_119448 = realloc(mem_119448, bytes_119443);
        mem_119448_cached_sizze_128093 = bytes_119443;
    }
    for (; iter_121316 < end; iter_121316++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121324 = n_p_112522;
        int64_t gtid_114729 = iter_121316;
        int64_t remnant_121325 = iter_121316 - gtid_114729;
        
        for (int64_t i_121317 = 0; i_121317 < css_chunk_len_112566;
             i_121317++) {
            int64_t y_121319 = mul64(n_p_112522, i_121317);
            int64_t res_idx_121320 = add64(y_121319, gtid_114729);
            bool cond_121321 = slt64(i_112596, res_idx_121320);
            int64_t defunc_0_f_res_121322;
            
            if (cond_121321) {
                defunc_0_f_res_121322 = (int64_t) -1;
            } else {
                defunc_0_f_res_121322 = res_idx_121320;
            }
            ((int64_t *) mem_119448)[i_121317] = defunc_0_f_res_121322;
        }
        memmove(mem_119464.mem + gtid_114729 * css_chunk_len_112566 *
                (int64_t) 8, mem_119448 + (int64_t) 0, css_chunk_len_112566 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_119448);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128092_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128092_end -
                 futhark_mc_segmap_parloop_128092_start;
        
        ctx->futhark_mc_segmap_parloop_128092_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128092_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128092_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128090(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114728 = tid;
    int num_tasks_121315 = info.nsubtasks;
    struct futhark_mc_task_128089 *futhark_mc_task_128089 =
                                  (struct futhark_mc_task_128089 *) args;
    struct futhark_context *ctx = futhark_mc_task_128089->ctx;
    uint64_t futhark_mc_segmap_task_128090_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128090_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128089->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128089->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_task_128089->free_i_112596;
    int64_t bytes_119443 = futhark_mc_task_128089->free_bytes_119443;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128089->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t iter_121316;
    struct futhark_mc_segmap_parloop_struct_128091
    futhark_mc_segmap_parloop_struct_128091;
    
    futhark_mc_segmap_parloop_struct_128091.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128091.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128091.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128091.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128091.free_bytes_119443 = bytes_119443;
    futhark_mc_segmap_parloop_struct_128091.free_mem_119464 = mem_119464.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128092_task;
    
    futhark_mc_segmap_parloop_128092_task.name =
        "futhark_mc_segmap_parloop_128092";
    futhark_mc_segmap_parloop_128092_task.fn = futhark_mc_segmap_parloop_128092;
    futhark_mc_segmap_parloop_128092_task.args =
        &futhark_mc_segmap_parloop_struct_128091;
    futhark_mc_segmap_parloop_128092_task.iterations = iterations;
    futhark_mc_segmap_parloop_128092_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128092_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128092_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128092_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128092_task);
    
    if (futhark_mc_segmap_parloop_128092_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128092_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128092_total_end -
                 futhark_mc_segmap_parloop_128092_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128092_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128092_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128092_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128090_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128090_end -
                 futhark_mc_segmap_task_128090_start;
        
        ctx->futhark_mc_segmap_task_128090_runs[tid]++;
        ctx->futhark_mc_segmap_task_128090_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128090_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128095 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_i_112596;
    int64_t free_bytes_119443;
    char *free_mem_119464;
};
struct futhark_mc_task_128098 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_i_112596;
    int64_t free_gtid_114731;
    char *free_mem_119445;
};
struct futhark_mc_segmap_parloop_struct_128100 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_i_112596;
    int64_t free_gtid_114731;
    char *free_mem_119445;
};
static int futhark_mc_segmap_parloop_128101(void *args, int64_t start,
                                            int64_t end, int flat_tid_114732,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128100
    *futhark_mc_segmap_parloop_struct_128100 =
    (struct futhark_mc_segmap_parloop_struct_128100 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128100->ctx;
    uint64_t futhark_mc_segmap_parloop_128101_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128101_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128100->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128100->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128100->free_i_112596;
    int64_t gtid_114731 =
            futhark_mc_segmap_parloop_struct_128100->free_gtid_114731;
    struct memblock mem_119445 = {.desc ="mem_119445", .mem =
                                  futhark_mc_segmap_parloop_struct_128100->free_mem_119445,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121335 = start;
    
    for (; iter_121335 < end; iter_121335++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121336 = css_chunk_len_112566;
        int64_t gtid_114733 = iter_121335;
        int64_t remnant_121337 = iter_121335 - gtid_114733;
        int64_t y_121328 = mul64(n_p_112522, gtid_114733);
        int64_t res_idx_121329 = add64(gtid_114731, y_121328);
        bool cond_121330 = slt64(i_112596, res_idx_121329);
        int64_t defunc_0_f_res_121331;
        
        if (cond_121330) {
            defunc_0_f_res_121331 = (int64_t) -1;
        } else {
            defunc_0_f_res_121331 = res_idx_121329;
        }
        ((int64_t *) mem_119445.mem)[gtid_114733] = defunc_0_f_res_121331;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128101_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128101_end -
                 futhark_mc_segmap_parloop_128101_start;
        
        ctx->futhark_mc_segmap_parloop_128101_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128101_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128101_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128099(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114732 = tid;
    int num_tasks_121334 = info.nsubtasks;
    struct futhark_mc_task_128098 *futhark_mc_task_128098 =
                                  (struct futhark_mc_task_128098 *) args;
    struct futhark_context *ctx = futhark_mc_task_128098->ctx;
    uint64_t futhark_mc_segmap_task_128099_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128099_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128098->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128098->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_task_128098->free_i_112596;
    int64_t gtid_114731 = futhark_mc_task_128098->free_gtid_114731;
    struct memblock mem_119445 = {.desc ="mem_119445", .mem =
                                  futhark_mc_task_128098->free_mem_119445,
                                  .size =0, .references =NULL};
    int64_t iter_121335;
    struct futhark_mc_segmap_parloop_struct_128100
    futhark_mc_segmap_parloop_struct_128100;
    
    futhark_mc_segmap_parloop_struct_128100.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128100.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128100.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128100.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128100.free_gtid_114731 = gtid_114731;
    futhark_mc_segmap_parloop_struct_128100.free_mem_119445 = mem_119445.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128101_task;
    
    futhark_mc_segmap_parloop_128101_task.name =
        "futhark_mc_segmap_parloop_128101";
    futhark_mc_segmap_parloop_128101_task.fn = futhark_mc_segmap_parloop_128101;
    futhark_mc_segmap_parloop_128101_task.args =
        &futhark_mc_segmap_parloop_struct_128100;
    futhark_mc_segmap_parloop_128101_task.iterations = iterations;
    futhark_mc_segmap_parloop_128101_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128101_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128101_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128101_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128101_task);
    
    if (futhark_mc_segmap_parloop_128101_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128101_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128101_total_end -
                 futhark_mc_segmap_parloop_128101_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128101_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128101_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128101_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128099_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128099_end -
                 futhark_mc_segmap_task_128099_start;
        
        ctx->futhark_mc_segmap_task_128099_runs[tid]++;
        ctx->futhark_mc_segmap_task_128099_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128099_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128096(void *args, int64_t start,
                                            int64_t end, int flat_tid_114730,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128095
    *futhark_mc_segmap_parloop_struct_128095 =
    (struct futhark_mc_segmap_parloop_struct_128095 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128095->ctx;
    uint64_t futhark_mc_segmap_parloop_128096_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128096_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128095->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128095->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128095->free_i_112596;
    int64_t bytes_119443 =
            futhark_mc_segmap_parloop_struct_128095->free_bytes_119443;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128095->free_mem_119464,
                                  .size =0, .references =NULL};
    size_t mem_119445_cached_sizze_128097 = 0;
    char *mem_119445 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121327 = start;
    
    if (mem_119445_cached_sizze_128097 < (size_t) bytes_119443) {
        mem_119445 = realloc(mem_119445, bytes_119443);
        mem_119445_cached_sizze_128097 = bytes_119443;
    }
    for (; iter_121327 < end; iter_121327++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121332 = n_p_112522;
        int64_t gtid_114731 = iter_121327;
        int64_t remnant_121333 = iter_121327 - gtid_114731;
        int64_t flat_tid_114732 = (int64_t) 0;
        int32_t num_tasks_121334;
        struct futhark_mc_task_128098 futhark_mc_task_128098;
        
        futhark_mc_task_128098.ctx = ctx;
        futhark_mc_task_128098.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128098.free_css_chunk_len_112566 = css_chunk_len_112566;
        futhark_mc_task_128098.free_i_112596 = i_112596;
        futhark_mc_task_128098.free_gtid_114731 = gtid_114731;
        futhark_mc_task_128098.free_mem_119445 = mem_119445;
        
        struct scheduler_segop futhark_mc_task_128098_task;
        
        futhark_mc_task_128098_task.args = &futhark_mc_task_128098;
        futhark_mc_task_128098_task.top_level_fn =
            futhark_mc_segmap_task_128099;
        futhark_mc_task_128098_task.name = "futhark_mc_segmap_task_128099";
        futhark_mc_task_128098_task.iterations = css_chunk_len_112566;
        futhark_mc_task_128098_task.task_time =
            &ctx->futhark_mc_segmap_task_128099_total_time;
        futhark_mc_task_128098_task.task_iter =
            &ctx->futhark_mc_segmap_task_128099_total_iter;
        futhark_mc_task_128098_task.sched = STATIC;
        futhark_mc_task_128098_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128099_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128098_task);
        
        if (futhark_mc_segmap_task_128099_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119464.mem + gtid_114731 * css_chunk_len_112566 *
                (int64_t) 8, mem_119445 + (int64_t) 0, css_chunk_len_112566 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_119445);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128096_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128096_end -
                 futhark_mc_segmap_parloop_128096_start;
        
        ctx->futhark_mc_segmap_parloop_128096_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128096_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128096_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128094(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114730 = tid;
    int num_tasks_121315 = info.nsubtasks;
    struct futhark_mc_task_128089 *futhark_mc_task_128089 =
                                  (struct futhark_mc_task_128089 *) args;
    struct futhark_context *ctx = futhark_mc_task_128089->ctx;
    uint64_t futhark_mc_segmap_nested_task_128094_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128094_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128089->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128089->free_css_chunk_len_112566;
    int64_t i_112596 = futhark_mc_task_128089->free_i_112596;
    int64_t bytes_119443 = futhark_mc_task_128089->free_bytes_119443;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128089->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t iter_121327;
    struct futhark_mc_segmap_parloop_struct_128095
    futhark_mc_segmap_parloop_struct_128095;
    
    futhark_mc_segmap_parloop_struct_128095.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128095.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128095.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128095.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128095.free_bytes_119443 = bytes_119443;
    futhark_mc_segmap_parloop_struct_128095.free_mem_119464 = mem_119464.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128096_task;
    
    futhark_mc_segmap_parloop_128096_task.name =
        "futhark_mc_segmap_parloop_128096";
    futhark_mc_segmap_parloop_128096_task.fn = futhark_mc_segmap_parloop_128096;
    futhark_mc_segmap_parloop_128096_task.args =
        &futhark_mc_segmap_parloop_struct_128095;
    futhark_mc_segmap_parloop_128096_task.iterations = iterations;
    futhark_mc_segmap_parloop_128096_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128096_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128096_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128096_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128096_task);
    
    if (futhark_mc_segmap_parloop_128096_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128096_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128096_total_end -
                 futhark_mc_segmap_parloop_128096_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128096_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128096_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128096_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128094_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128094_end -
                 futhark_mc_segmap_nested_task_128094_start;
        
        ctx->futhark_mc_segmap_nested_task_128094_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128094_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128094_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128102 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
};
struct futhark_mc_segmap_parloop_struct_128104 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
};
static int futhark_mc_segmap_parloop_128105(void *args, int64_t start,
                                            int64_t end, int flat_tid_114741,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128104
    *futhark_mc_segmap_parloop_struct_128104 =
    (struct futhark_mc_segmap_parloop_struct_128104 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128104->ctx;
    uint64_t futhark_mc_segmap_parloop_128105_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128105_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128104->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128104->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128104->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128104->free_css_chunk_len_112566;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128104->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128104->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 =
            futhark_mc_segmap_parloop_struct_128104->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128104->free_mem_119486,
                                  .size =0, .references =NULL};
    size_t mem_119470_cached_sizze_128106 = 0;
    char *mem_119470 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121339 = start;
    
    if (mem_119470_cached_sizze_128106 < (size_t) bytes_119465) {
        mem_119470 = realloc(mem_119470, bytes_119465);
        mem_119470_cached_sizze_128106 = bytes_119465;
    }
    for (; iter_121339 < end; iter_121339++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121358 = m_112519;
        int64_t gtid_114742 = iter_121339;
        int64_t remnant_121359 = iter_121339 - gtid_114742;
        
        for (int64_t i_121340 = 0; i_121340 < n_p_112522; i_121340++) {
            float defunc_2_reduce_res_121342;
            float redout_121344 = 0.0F;
            
            for (int64_t i_121343 = 0; i_121343 < css_chunk_len_112566;
                 i_121343++) {
                int64_t x_121345 = ((int64_t *) mem_119464.mem)[i_121340 *
                                                                css_chunk_len_112566 +
                                                                i_121343];
                bool cond_121346 = sle64((int64_t) 0, x_121345);
                float defunc_0_f_res_121347;
                
                if (cond_121346) {
                    bool y_121348 = slt64(x_121345, n_112520);
                    bool bounds_check_121349 = cond_121346 && y_121348;
                    bool index_certs_121350;
                    
                    if (!bounds_check_121349) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_121345,
                                      "] out of bounds for array of shape [",
                                      (long long) n_112520, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_121351 =
                          ((float *) Y_mem_119377.mem)[gtid_114742 * n_112520 +
                                                       x_121345];
                    
                    defunc_0_f_res_121347 = defunc_0_f_res_t_res_121351;
                } else {
                    defunc_0_f_res_121347 = NAN;
                }
                
                bool isnan_res_121352;
                
                isnan_res_121352 = futrts_isnan32(defunc_0_f_res_121347);
                
                float defunc_0_f_res_121353;
                
                if (isnan_res_121352) {
                    defunc_0_f_res_121353 = 0.0F;
                } else {
                    defunc_0_f_res_121353 = 1.0F;
                }
                
                float defunc_1_op_res_121354 = defunc_0_f_res_121353 +
                      redout_121344;
                float redout_tmp_121361 = defunc_1_op_res_121354;
                
                redout_121344 = redout_tmp_121361;
            }
            defunc_2_reduce_res_121342 = redout_121344;
            
            bool sub_series_is_not_all_nan_121355 = 0.0F <
                 defunc_2_reduce_res_121342;
            bool assert_c_121356;
            
            if (!sub_series_is_not_all_nan_121355) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "Assertion is false: sub_series_is_not_all_nan",
                                       "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
                return 1;
            }
            ((float *) mem_119470)[i_121340] = defunc_2_reduce_res_121342;
        }
        memmove(mem_119486.mem + gtid_114742 * n_p_112522 * (int64_t) 4,
                mem_119470 + (int64_t) 0, n_p_112522 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119470);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128105_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128105_end -
                 futhark_mc_segmap_parloop_128105_start;
        
        ctx->futhark_mc_segmap_parloop_128105_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128105_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128105_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128103(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114741 = tid;
    int num_tasks_121338 = info.nsubtasks;
    struct futhark_mc_task_128102 *futhark_mc_task_128102 =
                                  (struct futhark_mc_task_128102 *) args;
    struct futhark_context *ctx = futhark_mc_task_128102->ctx;
    uint64_t futhark_mc_segmap_task_128103_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128103_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128102->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128102->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128102->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128102->free_css_chunk_len_112566;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128102->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128102->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 = futhark_mc_task_128102->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128102->free_mem_119486,
                                  .size =0, .references =NULL};
    int64_t iter_121339;
    struct futhark_mc_segmap_parloop_struct_128104
    futhark_mc_segmap_parloop_struct_128104;
    
    futhark_mc_segmap_parloop_struct_128104.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128104.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128104.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128104.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128104.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128104.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128104.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128104.free_bytes_119465 = bytes_119465;
    futhark_mc_segmap_parloop_struct_128104.free_mem_119486 = mem_119486.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128105_task;
    
    futhark_mc_segmap_parloop_128105_task.name =
        "futhark_mc_segmap_parloop_128105";
    futhark_mc_segmap_parloop_128105_task.fn = futhark_mc_segmap_parloop_128105;
    futhark_mc_segmap_parloop_128105_task.args =
        &futhark_mc_segmap_parloop_struct_128104;
    futhark_mc_segmap_parloop_128105_task.iterations = iterations;
    futhark_mc_segmap_parloop_128105_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128105_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128105_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128105_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128105_task);
    
    if (futhark_mc_segmap_parloop_128105_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128105_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128105_total_end -
                 futhark_mc_segmap_parloop_128105_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128105_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128105_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128105_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128103_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128103_end -
                 futhark_mc_segmap_task_128103_start;
        
        ctx->futhark_mc_segmap_task_128103_runs[tid]++;
        ctx->futhark_mc_segmap_task_128103_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128103_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128108 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
};
struct futhark_mc_task_128111 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_114744;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    char *free_mem_119467;
};
struct futhark_mc_segmap_parloop_struct_128113 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_114744;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    char *free_mem_119467;
};
static int futhark_mc_segmap_parloop_128114(void *args, int64_t start,
                                            int64_t end, int flat_tid_114745,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128113
    *futhark_mc_segmap_parloop_struct_128113 =
    (struct futhark_mc_segmap_parloop_struct_128113 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128113->ctx;
    uint64_t futhark_mc_segmap_parloop_128114_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128114_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128113->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128113->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128113->free_css_chunk_len_112566;
    int64_t gtid_114744 =
            futhark_mc_segmap_parloop_struct_128113->free_gtid_114744;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128113->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128113->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119467 = {.desc ="mem_119467", .mem =
                                  futhark_mc_segmap_parloop_struct_128113->free_mem_119467,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121396 = start;
    
    for (; iter_121396 < end; iter_121396++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121409 = n_p_112522;
        int64_t gtid_114746 = iter_121396;
        int64_t remnant_121410 = iter_121396 - gtid_114746;
        float defunc_2_reduce_res_121378;
        float redout_121398 = 0.0F;
        
        for (int64_t i_121397 = 0; i_121397 < css_chunk_len_112566;
             i_121397++) {
            int64_t x_121399 = ((int64_t *) mem_119464.mem)[gtid_114746 *
                                                            css_chunk_len_112566 +
                                                            i_121397];
            bool cond_121400 = sle64((int64_t) 0, x_121399);
            float defunc_0_f_res_121401;
            
            if (cond_121400) {
                bool y_121402 = slt64(x_121399, n_112520);
                bool bounds_check_121403 = cond_121400 && y_121402;
                bool index_certs_121404;
                
                if (!bounds_check_121403) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_121399,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_121405 =
                      ((float *) Y_mem_119377.mem)[gtid_114744 * n_112520 +
                                                   x_121399];
                
                defunc_0_f_res_121401 = defunc_0_f_res_t_res_121405;
            } else {
                defunc_0_f_res_121401 = NAN;
            }
            
            bool isnan_res_121406;
            
            isnan_res_121406 = futrts_isnan32(defunc_0_f_res_121401);
            
            float defunc_0_f_res_121407;
            
            if (isnan_res_121406) {
                defunc_0_f_res_121407 = 0.0F;
            } else {
                defunc_0_f_res_121407 = 1.0F;
            }
            
            float defunc_1_op_res_121408 = defunc_0_f_res_121407 +
                  redout_121398;
            float redout_tmp_121411 = defunc_1_op_res_121408;
            
            redout_121398 = redout_tmp_121411;
        }
        defunc_2_reduce_res_121378 = redout_121398;
        
        bool sub_series_is_not_all_nan_121391 = 0.0F <
             defunc_2_reduce_res_121378;
        bool assert_c_121392;
        
        if (!sub_series_is_not_all_nan_121391) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_119467.mem)[gtid_114746] = defunc_2_reduce_res_121378;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128114_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128114_end -
                 futhark_mc_segmap_parloop_128114_start;
        
        ctx->futhark_mc_segmap_parloop_128114_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128114_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128114_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128112(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114745 = tid;
    int num_tasks_121395 = info.nsubtasks;
    struct futhark_mc_task_128111 *futhark_mc_task_128111 =
                                  (struct futhark_mc_task_128111 *) args;
    struct futhark_context *ctx = futhark_mc_task_128111->ctx;
    uint64_t futhark_mc_segmap_task_128112_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128112_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128111->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128111->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128111->free_css_chunk_len_112566;
    int64_t gtid_114744 = futhark_mc_task_128111->free_gtid_114744;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128111->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128111->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119467 = {.desc ="mem_119467", .mem =
                                  futhark_mc_task_128111->free_mem_119467,
                                  .size =0, .references =NULL};
    int64_t iter_121396;
    struct futhark_mc_segmap_parloop_struct_128113
    futhark_mc_segmap_parloop_struct_128113;
    
    futhark_mc_segmap_parloop_struct_128113.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128113.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128113.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128113.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128113.free_gtid_114744 = gtid_114744;
    futhark_mc_segmap_parloop_struct_128113.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128113.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128113.free_mem_119467 = mem_119467.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128114_task;
    
    futhark_mc_segmap_parloop_128114_task.name =
        "futhark_mc_segmap_parloop_128114";
    futhark_mc_segmap_parloop_128114_task.fn = futhark_mc_segmap_parloop_128114;
    futhark_mc_segmap_parloop_128114_task.args =
        &futhark_mc_segmap_parloop_struct_128113;
    futhark_mc_segmap_parloop_128114_task.iterations = iterations;
    futhark_mc_segmap_parloop_128114_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128114_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128114_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128114_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128114_task);
    
    if (futhark_mc_segmap_parloop_128114_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128114_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128114_total_end -
                 futhark_mc_segmap_parloop_128114_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128114_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128114_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128114_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128112_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128112_end -
                 futhark_mc_segmap_task_128112_start;
        
        ctx->futhark_mc_segmap_task_128112_runs[tid]++;
        ctx->futhark_mc_segmap_task_128112_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128112_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128116 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_114744;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    char *free_mem_119467;
};
struct futhark_mc_task_128118 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_114744;
    int64_t free_gtid_114748;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    float *retval_defunc_2_reduce_res_121363;
};
struct futhark_mc_segred_stage_1_parloop_struct_128121 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_114744;
    int64_t free_gtid_114748;
    char *free_Y_mem_119377;
    char *free_mem_119464;
    char *free_reduce_stage_1_tid_res_arr_mem_121428;
};
static int futhark_mc_segred_stage_1_parloop_128122(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_114749,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128121
    *futhark_mc_segred_stage_1_parloop_struct_128121 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128121 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128121->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128122_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128122_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128121->free_n_112520;
    int64_t css_chunk_len_112566 =
            futhark_mc_segred_stage_1_parloop_struct_128121->free_css_chunk_len_112566;
    int64_t gtid_114744 =
            futhark_mc_segred_stage_1_parloop_struct_128121->free_gtid_114744;
    int64_t gtid_114748 =
            futhark_mc_segred_stage_1_parloop_struct_128121->free_gtid_114748;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segred_stage_1_parloop_struct_128121->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128121->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_121428 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_121428",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128121->free_reduce_stage_1_tid_res_arr_mem_121428,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121430 = start;
    float x_121413;
    float x_121414;
    float local_acc_121431 = 0.0F;
    
    for (; iter_121430 < end; iter_121430++) {
        int64_t gtid_114750 = iter_121430;
        int64_t x_121416 = ((int64_t *) mem_119464.mem)[gtid_114748 *
                                                        css_chunk_len_112566 +
                                                        gtid_114750];
        bool cond_121417 = sle64((int64_t) 0, x_121416);
        float defunc_0_f_res_121418;
        
        if (cond_121417) {
            bool y_121419 = slt64(x_121416, n_112520);
            bool bounds_check_121420 = cond_121417 && y_121419;
            bool index_certs_121421;
            
            if (!bounds_check_121420) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_121416,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_121422 =
                  ((float *) Y_mem_119377.mem)[gtid_114744 * n_112520 +
                                               x_121416];
            
            defunc_0_f_res_121418 = defunc_0_f_res_t_res_121422;
        } else {
            defunc_0_f_res_121418 = NAN;
        }
        
        bool isnan_res_121423;
        
        isnan_res_121423 = futrts_isnan32(defunc_0_f_res_121418);
        
        float defunc_0_f_res_121424;
        
        if (isnan_res_121423) {
            defunc_0_f_res_121424 = 0.0F;
        } else {
            defunc_0_f_res_121424 = 1.0F;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_121413 = local_acc_121431;
        }
        // Load next params
        {
            x_121414 = defunc_0_f_res_121424;
        }
        // Red body
        {
            float defunc_1_op_res_121415 = x_121413 + x_121414;
            
            local_acc_121431 = defunc_1_op_res_121415;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_121428.mem)[flat_tid_114749] =
        local_acc_121431;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128122_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128122_end -
                 futhark_mc_segred_stage_1_parloop_128122_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128122_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128122_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128122_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128119(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114749 = tid;
    int num_tasks_121427 = info.nsubtasks;
    struct futhark_mc_task_128118 *futhark_mc_task_128118 =
                                  (struct futhark_mc_task_128118 *) args;
    struct futhark_context *ctx = futhark_mc_task_128118->ctx;
    uint64_t futhark_mc_segred_task_128119_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128119_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128118->free_n_112520;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128118->free_css_chunk_len_112566;
    int64_t gtid_114744 = futhark_mc_task_128118->free_gtid_114744;
    int64_t gtid_114748 = futhark_mc_task_128118->free_gtid_114748;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128118->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128118->free_mem_119464,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_121363 =
          *futhark_mc_task_128118->retval_defunc_2_reduce_res_121363;
    size_t reduce_stage_1_tid_res_arr_mem_121428_cached_sizze_128120 = 0;
    char *reduce_stage_1_tid_res_arr_mem_121428 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_121428_cached_sizze_128120 <
        (size_t) ((int64_t) 4 * num_tasks_121427)) {
        reduce_stage_1_tid_res_arr_mem_121428 =
            realloc(reduce_stage_1_tid_res_arr_mem_121428, (int64_t) 4 *
                    num_tasks_121427);
        reduce_stage_1_tid_res_arr_mem_121428_cached_sizze_128120 =
            (int64_t) 4 * num_tasks_121427;
    }
    
    int64_t iter_121430;
    struct futhark_mc_segred_stage_1_parloop_struct_128121
    futhark_mc_segred_stage_1_parloop_struct_128121;
    
    futhark_mc_segred_stage_1_parloop_struct_128121.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_gtid_114744 =
        gtid_114744;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_gtid_114748 =
        gtid_114748;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_mem_119464 =
        mem_119464.mem;
    futhark_mc_segred_stage_1_parloop_struct_128121.free_reduce_stage_1_tid_res_arr_mem_121428 =
        reduce_stage_1_tid_res_arr_mem_121428;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128122_task;
    
    futhark_mc_segred_stage_1_parloop_128122_task.name =
        "futhark_mc_segred_stage_1_parloop_128122";
    futhark_mc_segred_stage_1_parloop_128122_task.fn =
        futhark_mc_segred_stage_1_parloop_128122;
    futhark_mc_segred_stage_1_parloop_128122_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128121;
    futhark_mc_segred_stage_1_parloop_128122_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128122_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128122_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128122_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128122_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128122_task);
    
    if (futhark_mc_segred_stage_1_parloop_128122_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128122_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128122_total_end -
                 futhark_mc_segred_stage_1_parloop_128122_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128122_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128122_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128122_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_121363 = 0.0F;
    }
    
    float x_121432;
    float x_121433;
    
    for (int32_t i_121435 = 0; i_121435 < num_tasks_121427; i_121435++) {
        flat_tid_114749 = i_121435;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_121432 = defunc_2_reduce_res_121363;
            }
            // load next params
            {
                x_121433 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_121428)[flat_tid_114749];
            }
            // red body
            {
                float defunc_1_op_res_121434 = x_121432 + x_121433;
                
                defunc_2_reduce_res_121363 = defunc_1_op_res_121434;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_121428);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128119_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128119_end -
                 futhark_mc_segred_task_128119_start;
        
        ctx->futhark_mc_segred_task_128119_runs[tid]++;
        ctx->futhark_mc_segred_task_128119_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128119_iter[tid] += iterations;
    }
    *futhark_mc_task_128118->retval_defunc_2_reduce_res_121363 =
        defunc_2_reduce_res_121363;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128117(void *args, int64_t start,
                                            int64_t end, int flat_tid_114747,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128116
    *futhark_mc_segmap_parloop_struct_128116 =
    (struct futhark_mc_segmap_parloop_struct_128116 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128116->ctx;
    uint64_t futhark_mc_segmap_parloop_128117_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128117_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128116->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128116->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128116->free_css_chunk_len_112566;
    int64_t gtid_114744 =
            futhark_mc_segmap_parloop_struct_128116->free_gtid_114744;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128116->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128116->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119467 = {.desc ="mem_119467", .mem =
                                  futhark_mc_segmap_parloop_struct_128116->free_mem_119467,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121412 = start;
    
    for (; iter_121412 < end; iter_121412++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121425 = n_p_112522;
        int64_t gtid_114748 = iter_121412;
        int64_t remnant_121426 = iter_121412 - gtid_114748;
        float defunc_2_reduce_res_121363;
        int64_t flat_tid_114749 = (int64_t) 0;
        int32_t num_tasks_121427;
        struct futhark_mc_task_128118 futhark_mc_task_128118;
        
        futhark_mc_task_128118.ctx = ctx;
        futhark_mc_task_128118.free_n_112520 = n_112520;
        futhark_mc_task_128118.free_css_chunk_len_112566 = css_chunk_len_112566;
        futhark_mc_task_128118.free_gtid_114744 = gtid_114744;
        futhark_mc_task_128118.free_gtid_114748 = gtid_114748;
        futhark_mc_task_128118.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128118.free_mem_119464 = mem_119464.mem;
        futhark_mc_task_128118.retval_defunc_2_reduce_res_121363 =
            &defunc_2_reduce_res_121363;
        
        struct scheduler_segop futhark_mc_task_128118_task;
        
        futhark_mc_task_128118_task.args = &futhark_mc_task_128118;
        futhark_mc_task_128118_task.top_level_fn =
            futhark_mc_segred_task_128119;
        futhark_mc_task_128118_task.name = "futhark_mc_segred_task_128119";
        futhark_mc_task_128118_task.iterations = css_chunk_len_112566;
        futhark_mc_task_128118_task.task_time =
            &ctx->futhark_mc_segred_task_128119_total_time;
        futhark_mc_task_128118_task.task_iter =
            &ctx->futhark_mc_segred_task_128119_total_iter;
        futhark_mc_task_128118_task.sched = STATIC;
        futhark_mc_task_128118_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128119_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128118_task);
        
        if (futhark_mc_segred_task_128119_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        bool sub_series_is_not_all_nan_121376 = 0.0F <
             defunc_2_reduce_res_121363;
        bool assert_c_121377;
        
        if (!sub_series_is_not_all_nan_121376) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_119467.mem)[gtid_114748] = defunc_2_reduce_res_121363;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128117_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128117_end -
                 futhark_mc_segmap_parloop_128117_start;
        
        ctx->futhark_mc_segmap_parloop_128117_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128117_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128117_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128115(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114747 = tid;
    int num_tasks_121395 = info.nsubtasks;
    struct futhark_mc_task_128111 *futhark_mc_task_128111 =
                                  (struct futhark_mc_task_128111 *) args;
    struct futhark_context *ctx = futhark_mc_task_128111->ctx;
    uint64_t futhark_mc_segmap_nested_task_128115_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128115_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128111->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128111->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128111->free_css_chunk_len_112566;
    int64_t gtid_114744 = futhark_mc_task_128111->free_gtid_114744;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128111->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128111->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119467 = {.desc ="mem_119467", .mem =
                                  futhark_mc_task_128111->free_mem_119467,
                                  .size =0, .references =NULL};
    int64_t iter_121412;
    struct futhark_mc_segmap_parloop_struct_128116
    futhark_mc_segmap_parloop_struct_128116;
    
    futhark_mc_segmap_parloop_struct_128116.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128116.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128116.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128116.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128116.free_gtid_114744 = gtid_114744;
    futhark_mc_segmap_parloop_struct_128116.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128116.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128116.free_mem_119467 = mem_119467.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128117_task;
    
    futhark_mc_segmap_parloop_128117_task.name =
        "futhark_mc_segmap_parloop_128117";
    futhark_mc_segmap_parloop_128117_task.fn = futhark_mc_segmap_parloop_128117;
    futhark_mc_segmap_parloop_128117_task.args =
        &futhark_mc_segmap_parloop_struct_128116;
    futhark_mc_segmap_parloop_128117_task.iterations = iterations;
    futhark_mc_segmap_parloop_128117_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128117_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128117_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128117_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128117_task);
    
    if (futhark_mc_segmap_parloop_128117_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128117_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128117_total_end -
                 futhark_mc_segmap_parloop_128117_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128117_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128117_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128117_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128115_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128115_end -
                 futhark_mc_segmap_nested_task_128115_start;
        
        ctx->futhark_mc_segmap_nested_task_128115_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128115_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128115_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128109(void *args, int64_t start,
                                            int64_t end, int flat_tid_114743,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128108
    *futhark_mc_segmap_parloop_struct_128108 =
    (struct futhark_mc_segmap_parloop_struct_128108 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128108->ctx;
    uint64_t futhark_mc_segmap_parloop_128109_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128109_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128108->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128108->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128108->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128108->free_css_chunk_len_112566;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128108->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128108->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 =
            futhark_mc_segmap_parloop_struct_128108->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128108->free_mem_119486,
                                  .size =0, .references =NULL};
    size_t mem_119467_cached_sizze_128110 = 0;
    char *mem_119467 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121362 = start;
    
    if (mem_119467_cached_sizze_128110 < (size_t) bytes_119465) {
        mem_119467 = realloc(mem_119467, bytes_119465);
        mem_119467_cached_sizze_128110 = bytes_119465;
    }
    for (; iter_121362 < end; iter_121362++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121393 = m_112519;
        int64_t gtid_114744 = iter_121362;
        int64_t remnant_121394 = iter_121362 - gtid_114744;
        int64_t flat_tid_114745 = (int64_t) 0;
        int32_t num_tasks_121395;
        int64_t flat_tid_114747 = (int64_t) 0;
        struct futhark_mc_task_128111 futhark_mc_task_128111;
        
        futhark_mc_task_128111.ctx = ctx;
        futhark_mc_task_128111.free_n_112520 = n_112520;
        futhark_mc_task_128111.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128111.free_css_chunk_len_112566 = css_chunk_len_112566;
        futhark_mc_task_128111.free_gtid_114744 = gtid_114744;
        futhark_mc_task_128111.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128111.free_mem_119464 = mem_119464.mem;
        futhark_mc_task_128111.free_mem_119467 = mem_119467;
        
        struct scheduler_segop futhark_mc_task_128111_task;
        
        futhark_mc_task_128111_task.args = &futhark_mc_task_128111;
        futhark_mc_task_128111_task.top_level_fn =
            futhark_mc_segmap_task_128112;
        futhark_mc_task_128111_task.name = "futhark_mc_segmap_task_128112";
        futhark_mc_task_128111_task.iterations = n_p_112522;
        futhark_mc_task_128111_task.task_time =
            &ctx->futhark_mc_segmap_task_128112_total_time;
        futhark_mc_task_128111_task.task_iter =
            &ctx->futhark_mc_segmap_task_128112_total_iter;
        futhark_mc_task_128111_task.sched = STATIC;
        futhark_mc_task_128111_task.nested_fn =
            futhark_mc_segmap_nested_task_128115;
        
        int futhark_mc_segmap_task_128112_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128111_task);
        
        if (futhark_mc_segmap_task_128112_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119486.mem + gtid_114744 * n_p_112522 * (int64_t) 4,
                mem_119467 + (int64_t) 0, n_p_112522 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119467);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128109_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128109_end -
                 futhark_mc_segmap_parloop_128109_start;
        
        ctx->futhark_mc_segmap_parloop_128109_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128109_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128109_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128107(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114743 = tid;
    int num_tasks_121338 = info.nsubtasks;
    struct futhark_mc_task_128102 *futhark_mc_task_128102 =
                                  (struct futhark_mc_task_128102 *) args;
    struct futhark_context *ctx = futhark_mc_task_128102->ctx;
    uint64_t futhark_mc_segmap_nested_task_128107_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128107_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128102->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128102->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128102->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128102->free_css_chunk_len_112566;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128102->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128102->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 = futhark_mc_task_128102->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128102->free_mem_119486,
                                  .size =0, .references =NULL};
    int64_t iter_121362;
    struct futhark_mc_segmap_parloop_struct_128108
    futhark_mc_segmap_parloop_struct_128108;
    
    futhark_mc_segmap_parloop_struct_128108.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128108.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128108.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128108.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128108.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128108.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128108.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128108.free_bytes_119465 = bytes_119465;
    futhark_mc_segmap_parloop_struct_128108.free_mem_119486 = mem_119486.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128109_task;
    
    futhark_mc_segmap_parloop_128109_task.name =
        "futhark_mc_segmap_parloop_128109";
    futhark_mc_segmap_parloop_128109_task.fn = futhark_mc_segmap_parloop_128109;
    futhark_mc_segmap_parloop_128109_task.args =
        &futhark_mc_segmap_parloop_struct_128108;
    futhark_mc_segmap_parloop_128109_task.iterations = iterations;
    futhark_mc_segmap_parloop_128109_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128109_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128109_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128109_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128109_task);
    
    if (futhark_mc_segmap_parloop_128109_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128109_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128109_total_end -
                 futhark_mc_segmap_parloop_128109_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128109_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128109_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128109_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128107_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128107_end -
                 futhark_mc_segmap_nested_task_128107_start;
        
        ctx->futhark_mc_segmap_nested_task_128107_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128107_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128107_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128123 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112668;
    bool free_loop_cond_112673;
    float free_i64_res_112674;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119490;
    int64_t free_bytes_119493;
    char *free_mem_119544;
    char *free_mem_119548;
};
struct futhark_mc_segmap_parloop_struct_128125 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112668;
    bool free_loop_cond_112673;
    float free_i64_res_112674;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119490;
    int64_t free_bytes_119493;
    char *free_mem_119544;
    char *free_mem_119548;
};
static int futhark_mc_segmap_parloop_128126(void *args, int64_t start,
                                            int64_t end, int flat_tid_114801,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128125
    *futhark_mc_segmap_parloop_struct_128125 =
    (struct futhark_mc_segmap_parloop_struct_128125 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128125->ctx;
    uint64_t futhark_mc_segmap_parloop_128126_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128126_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128125->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128125->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128125->free_l_window_112524;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128125->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128125->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128125->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128125->free_x_112597;
    int64_t min_res_112668 =
            futhark_mc_segmap_parloop_struct_128125->free_min_res_112668;
    bool loop_cond_112673 =
         futhark_mc_segmap_parloop_struct_128125->free_loop_cond_112673;
    float i64_res_112674 =
          futhark_mc_segmap_parloop_struct_128125->free_i64_res_112674;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128125->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128125->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128125->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128125->free_bytes_119490;
    int64_t bytes_119493 =
            futhark_mc_segmap_parloop_struct_128125->free_bytes_119493;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128125->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128125->free_mem_119548,
                                  .size =0, .references =NULL};
    size_t mem_119498_cached_sizze_128127 = 0;
    char *mem_119498 = NULL;
    size_t mem_119513_cached_sizze_128128 = 0;
    char *mem_119513 = NULL;
    size_t mem_119516_cached_sizze_128129 = 0;
    char *mem_119516 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121437 = start;
    
    if (mem_119498_cached_sizze_128127 < (size_t) bytes_119378) {
        mem_119498 = realloc(mem_119498, bytes_119378);
        mem_119498_cached_sizze_128127 = bytes_119378;
    }
    if (mem_119513_cached_sizze_128128 < (size_t) bytes_119490) {
        mem_119513 = realloc(mem_119513, bytes_119490);
        mem_119513_cached_sizze_128128 = bytes_119490;
    }
    if (mem_119516_cached_sizze_128129 < (size_t) bytes_119493) {
        mem_119516 = realloc(mem_119516, bytes_119493);
        mem_119516_cached_sizze_128129 = bytes_119493;
    }
    for (; iter_121437 < end; iter_121437++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121534 = m_112519;
        int64_t gtid_114802 = iter_121437;
        int64_t remnant_121535 = iter_121437 - gtid_114802;
        int64_t x_112678 = ((int64_t *) mem_119420.mem)[gtid_114802];
        
        for (int64_t i_121438 = 0; i_121438 < n_112520; i_121438++) {
            int64_t x_121440 = ((int64_t *) mem_119417.mem)[gtid_114802 *
                                                            n_112520 +
                                                            i_121438];
            int64_t defunc_0_f_res_121441 = add64((int64_t) 1, x_121440);
            
            ((int64_t *) mem_119498)[i_121438] = defunc_0_f_res_121441;
        }
        
        int64_t min_arg_112682 = sub64(x_112678, (int64_t) 1);
        int64_t min_arg_112683 = sub64(x_112678, min_res_112668);
        int64_t min_res_112684 = smin64(l_window_112524, x_112678);
        float i64_res_112685 = sitofp_i64_f32(x_112678);
        float x_112686 = i64_res_112674 - i64_res_112685;
        float max_arg_112687 = x_112686 / 2.0F;
        float max_res_112688 = fmax32(0.0F, max_arg_112687);
        
        for (int64_t i_121443 = 0; i_121443 < l_n_m_112570; i_121443++) {
            int64_t min_arg_121446 = mul64(l_jump_112528, i_121443);
            int64_t min_res_121447 = smin64(i_112596, min_arg_121446);
            int64_t defunc_0_g_res_121448 = add64((int64_t) 1, min_res_121447);
            bool init_idx_121449;
            int64_t init_idx_121450;
            int64_t init_idx_121451;
            bool loop_while_121452;
            int64_t low_121453;
            int64_t high_121454;
            
            loop_while_121452 = x_112597;
            low_121453 = (int64_t) 0;
            high_121454 = i_112596;
            while (loop_while_121452) {
                int64_t x_121455 = add64(low_121453, high_121454);
                int64_t mid_121456 = sdiv64(x_121455, (int64_t) 2);
                bool x_121457 = sle64((int64_t) 0, mid_121456);
                bool y_121458 = slt64(mid_121456, n_112520);
                bool bounds_check_121459 = x_121457 && y_121458;
                bool index_certs_121460;
                
                if (!bounds_check_121459) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_121456,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t mid_id_121461 = ((int64_t *) mem_119498)[mid_121456];
                bool cond_121462 = slt64(mid_id_121461, (int64_t) 0);
                int64_t mid_idx_121463;
                
                if (cond_121462) {
                    mid_idx_121463 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_121463 = mid_id_121461;
                }
                
                bool cond_121464 = sle64(defunc_0_g_res_121448, mid_idx_121463);
                int64_t loopres_121465;
                int64_t loopres_121466;
                
                if (cond_121464) {
                    int64_t loopres_t_res_121467 = sub64(mid_121456,
                                                         (int64_t) 1);
                    
                    loopres_121465 = low_121453;
                    loopres_121466 = loopres_t_res_121467;
                } else {
                    int64_t loopres_f_res_121468 = add64((int64_t) 1,
                                                         mid_121456);
                    
                    loopres_121465 = loopres_f_res_121468;
                    loopres_121466 = high_121454;
                }
                
                bool loop_cond_121469 = sle64(loopres_121465, loopres_121466);
                bool loop_while_tmp_121539 = loop_cond_121469;
                int64_t low_tmp_121540 = loopres_121465;
                int64_t high_tmp_121541 = loopres_121466;
                
                loop_while_121452 = loop_while_tmp_121539;
                low_121453 = low_tmp_121540;
                high_121454 = high_tmp_121541;
            }
            init_idx_121449 = loop_while_121452;
            init_idx_121450 = low_121453;
            init_idx_121451 = high_121454;
            
            bool idx_121470;
            int64_t idx_121471;
            int64_t idx_121472;
            int64_t idx_121473;
            bool loop_while_121474;
            int64_t l_idx_121475;
            int64_t r_idx_121476;
            int64_t span_121477;
            
            loop_while_121474 = loop_cond_112673;
            l_idx_121475 = init_idx_121450;
            r_idx_121476 = init_idx_121450;
            span_121477 = (int64_t) 1;
            while (loop_while_121474) {
                int64_t max_arg_121478 = sub64(l_idx_121475, (int64_t) 1);
                int64_t max_res_121479 = smax64((int64_t) 0, max_arg_121478);
                int64_t min_arg_121480 = add64((int64_t) 1, r_idx_121476);
                int64_t min_res_121481 = smin64(min_arg_112682, min_arg_121480);
                bool x_121482 = sle64((int64_t) 0, max_res_121479);
                bool y_121483 = slt64(max_res_121479, n_112520);
                bool bounds_check_121484 = x_121482 && y_121483;
                bool index_certs_121485;
                
                if (!bounds_check_121484) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_121479,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121486 = ((int64_t *) mem_119498)[max_res_121479];
                int64_t abs_arg_121487 = sub64(x_121486, defunc_0_g_res_121448);
                int64_t abs_res_121488 = abs64(abs_arg_121487);
                bool x_121489 = sle64((int64_t) 0, min_res_121481);
                bool y_121490 = slt64(min_res_121481, n_112520);
                bool bounds_check_121491 = x_121489 && y_121490;
                bool index_certs_121492;
                
                if (!bounds_check_121491) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_121481,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121493 = ((int64_t *) mem_119498)[min_res_121481];
                int64_t abs_arg_121494 = sub64(x_121493, defunc_0_g_res_121448);
                int64_t abs_res_121495 = abs64(abs_arg_121494);
                bool cond_121496 = max_res_121479 == l_idx_121475;
                int64_t loopres_121497;
                int64_t loopres_121498;
                int64_t loopres_121499;
                
                if (cond_121496) {
                    loopres_121497 = l_idx_121475;
                    loopres_121498 = r_idx_121476;
                    loopres_121499 = min_res_112668;
                } else {
                    bool cond_121500 = slt64(abs_res_121488, abs_res_121495);
                    bool cond_f_res_121501 = min_res_121481 == r_idx_121476;
                    bool x_121502 = !cond_121500;
                    bool y_121503 = cond_f_res_121501 && x_121502;
                    bool cond_121504 = cond_121500 || y_121503;
                    int64_t loopres_f_res_121505;
                    
                    if (cond_121504) {
                        loopres_f_res_121505 = max_res_121479;
                    } else {
                        loopres_f_res_121505 = l_idx_121475;
                    }
                    
                    int64_t loopres_f_res_121506;
                    
                    if (cond_121504) {
                        loopres_f_res_121506 = r_idx_121476;
                    } else {
                        loopres_f_res_121506 = min_res_121481;
                    }
                    
                    int64_t loopres_f_res_121507;
                    
                    if (cond_121504) {
                        int64_t loopres_f_res_t_res_121508 = add64((int64_t) 1,
                                                                   span_121477);
                        
                        loopres_f_res_121507 = loopres_f_res_t_res_121508;
                    } else {
                        int64_t loopres_f_res_f_res_121509 = add64((int64_t) 1,
                                                                   span_121477);
                        
                        loopres_f_res_121507 = loopres_f_res_f_res_121509;
                    }
                    loopres_121497 = loopres_f_res_121505;
                    loopres_121498 = loopres_f_res_121506;
                    loopres_121499 = loopres_f_res_121507;
                }
                
                bool loop_cond_121510 = slt64(loopres_121499, min_res_112668);
                bool loop_while_tmp_121542 = loop_cond_121510;
                int64_t l_idx_tmp_121543 = loopres_121497;
                int64_t r_idx_tmp_121544 = loopres_121498;
                int64_t span_tmp_121545 = loopres_121499;
                
                loop_while_121474 = loop_while_tmp_121542;
                l_idx_121475 = l_idx_tmp_121543;
                r_idx_121476 = r_idx_tmp_121544;
                span_121477 = span_tmp_121545;
            }
            idx_121470 = loop_while_121474;
            idx_121471 = l_idx_121475;
            idx_121472 = r_idx_121476;
            idx_121473 = span_121477;
            
            int64_t min_res_121511 = smin64(min_arg_112683, idx_121471);
            int64_t max_res_121512 = smax64((int64_t) 0, min_res_121511);
            int64_t x_121513 = add64(min_res_112684, max_res_121512);
            int64_t r_121514 = sub64(x_121513, (int64_t) 1);
            bool x_121515 = sle64((int64_t) 0, r_121514);
            bool y_121516 = slt64(r_121514, n_112520);
            bool bounds_check_121517 = x_121515 && y_121516;
            bool index_certs_121518;
            
            if (!bounds_check_121517) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_121514,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121519 = ((int64_t *) mem_119417.mem)[gtid_114802 *
                                                            n_112520 +
                                                            r_121514];
            int64_t abs_arg_121520 = sub64(x_121519, min_res_121447);
            int64_t abs_res_121521 = abs64(abs_arg_121520);
            bool x_121522 = sle64((int64_t) 0, max_res_121512);
            bool y_121523 = slt64(max_res_121512, n_112520);
            bool bounds_check_121524 = x_121522 && y_121523;
            bool index_certs_121525;
            
            if (!bounds_check_121524) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_121512,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121526 = ((int64_t *) mem_119417.mem)[gtid_114802 *
                                                            n_112520 +
                                                            max_res_121512];
            int64_t abs_arg_121527 = sub64(x_121526, min_res_121447);
            int64_t abs_res_121528 = abs64(abs_arg_121527);
            int64_t max_res_121529 = smax64(abs_res_121521, abs_res_121528);
            float defunc_0_f_res_121530 = sitofp_i64_f32(max_res_121529);
            float defunc_1_f_res_121531 = max_res_112688 +
                  defunc_0_f_res_121530;
            
            ((float *) mem_119513)[i_121443] = defunc_1_f_res_121531;
            ((int64_t *) mem_119516)[i_121443] = max_res_121512;
        }
        memmove(mem_119544.mem + gtid_114802 * l_n_m_112570 * (int64_t) 8,
                mem_119516 + (int64_t) 0, l_n_m_112570 * (int64_t) 8);
        memmove(mem_119548.mem + gtid_114802 * l_n_m_112570 * (int64_t) 4,
                mem_119513 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119498);
    free(mem_119513);
    free(mem_119516);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128126_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128126_end -
                 futhark_mc_segmap_parloop_128126_start;
        
        ctx->futhark_mc_segmap_parloop_128126_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128126_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128126_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128124(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114801 = tid;
    int num_tasks_121436 = info.nsubtasks;
    struct futhark_mc_task_128123 *futhark_mc_task_128123 =
                                  (struct futhark_mc_task_128123 *) args;
    struct futhark_context *ctx = futhark_mc_task_128123->ctx;
    uint64_t futhark_mc_segmap_task_128124_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128124_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128123->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128123->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128123->free_l_window_112524;
    int64_t l_jump_112528 = futhark_mc_task_128123->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128123->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128123->free_i_112596;
    bool x_112597 = futhark_mc_task_128123->free_x_112597;
    int64_t min_res_112668 = futhark_mc_task_128123->free_min_res_112668;
    bool loop_cond_112673 = futhark_mc_task_128123->free_loop_cond_112673;
    float i64_res_112674 = futhark_mc_task_128123->free_i64_res_112674;
    int64_t bytes_119378 = futhark_mc_task_128123->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128123->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128123->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119490 = futhark_mc_task_128123->free_bytes_119490;
    int64_t bytes_119493 = futhark_mc_task_128123->free_bytes_119493;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128123->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128123->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t iter_121437;
    struct futhark_mc_segmap_parloop_struct_128125
    futhark_mc_segmap_parloop_struct_128125;
    
    futhark_mc_segmap_parloop_struct_128125.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128125.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128125.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128125.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128125.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128125.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128125.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128125.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128125.free_min_res_112668 =
        min_res_112668;
    futhark_mc_segmap_parloop_struct_128125.free_loop_cond_112673 =
        loop_cond_112673;
    futhark_mc_segmap_parloop_struct_128125.free_i64_res_112674 =
        i64_res_112674;
    futhark_mc_segmap_parloop_struct_128125.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128125.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128125.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128125.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128125.free_bytes_119493 = bytes_119493;
    futhark_mc_segmap_parloop_struct_128125.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128125.free_mem_119548 = mem_119548.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128126_task;
    
    futhark_mc_segmap_parloop_128126_task.name =
        "futhark_mc_segmap_parloop_128126";
    futhark_mc_segmap_parloop_128126_task.fn = futhark_mc_segmap_parloop_128126;
    futhark_mc_segmap_parloop_128126_task.args =
        &futhark_mc_segmap_parloop_struct_128125;
    futhark_mc_segmap_parloop_128126_task.iterations = iterations;
    futhark_mc_segmap_parloop_128126_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128126_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128126_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128126_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128126_task);
    
    if (futhark_mc_segmap_parloop_128126_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128126_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128126_total_end -
                 futhark_mc_segmap_parloop_128126_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128126_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128126_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128126_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128124_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128124_end -
                 futhark_mc_segmap_task_128124_start;
        
        ctx->futhark_mc_segmap_task_128124_runs[tid]++;
        ctx->futhark_mc_segmap_task_128124_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128124_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128131 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112668;
    bool free_loop_cond_112673;
    float free_i64_res_112674;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119490;
    int64_t free_bytes_119493;
    char *free_mem_119544;
    char *free_mem_119548;
};
struct futhark_mc_task_128136 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114804;
    char *free_mem_119417;
    char *free_mem_119489;
};
struct futhark_mc_segmap_parloop_struct_128138 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114804;
    char *free_mem_119417;
    char *free_mem_119489;
};
static int futhark_mc_segmap_parloop_128139(void *args, int64_t start,
                                            int64_t end, int flat_tid_114805,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128138
    *futhark_mc_segmap_parloop_struct_128138 =
    (struct futhark_mc_segmap_parloop_struct_128138 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128138->ctx;
    uint64_t futhark_mc_segmap_parloop_128139_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128139_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128138->free_n_112520;
    int64_t gtid_114804 =
            futhark_mc_segmap_parloop_struct_128138->free_gtid_114804;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128138->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119489 = {.desc ="mem_119489", .mem =
                                  futhark_mc_segmap_parloop_struct_128138->free_mem_119489,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121638 = start;
    
    for (; iter_121638 < end; iter_121638++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121639 = n_112520;
        int64_t gtid_114806 = iter_121638;
        int64_t remnant_121640 = iter_121638 - gtid_114806;
        int64_t x_121547 = ((int64_t *) mem_119417.mem)[gtid_114804 * n_112520 +
                                                        gtid_114806];
        int64_t defunc_0_f_res_121548 = add64((int64_t) 1, x_121547);
        
        ((int64_t *) mem_119489.mem)[gtid_114806] = defunc_0_f_res_121548;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128139_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128139_end -
                 futhark_mc_segmap_parloop_128139_start;
        
        ctx->futhark_mc_segmap_parloop_128139_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128139_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128139_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128137(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114805 = tid;
    int num_tasks_121637 = info.nsubtasks;
    struct futhark_mc_task_128136 *futhark_mc_task_128136 =
                                  (struct futhark_mc_task_128136 *) args;
    struct futhark_context *ctx = futhark_mc_task_128136->ctx;
    uint64_t futhark_mc_segmap_task_128137_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128137_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128136->free_n_112520;
    int64_t gtid_114804 = futhark_mc_task_128136->free_gtid_114804;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128136->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119489 = {.desc ="mem_119489", .mem =
                                  futhark_mc_task_128136->free_mem_119489,
                                  .size =0, .references =NULL};
    int64_t iter_121638;
    struct futhark_mc_segmap_parloop_struct_128138
    futhark_mc_segmap_parloop_struct_128138;
    
    futhark_mc_segmap_parloop_struct_128138.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128138.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128138.free_gtid_114804 = gtid_114804;
    futhark_mc_segmap_parloop_struct_128138.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128138.free_mem_119489 = mem_119489.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128139_task;
    
    futhark_mc_segmap_parloop_128139_task.name =
        "futhark_mc_segmap_parloop_128139";
    futhark_mc_segmap_parloop_128139_task.fn = futhark_mc_segmap_parloop_128139;
    futhark_mc_segmap_parloop_128139_task.args =
        &futhark_mc_segmap_parloop_struct_128138;
    futhark_mc_segmap_parloop_128139_task.iterations = iterations;
    futhark_mc_segmap_parloop_128139_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128139_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128139_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128139_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128139_task);
    
    if (futhark_mc_segmap_parloop_128139_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128139_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128139_total_end -
                 futhark_mc_segmap_parloop_128139_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128139_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128139_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128139_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128137_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128137_end -
                 futhark_mc_segmap_task_128137_start;
        
        ctx->futhark_mc_segmap_task_128137_runs[tid]++;
        ctx->futhark_mc_segmap_task_128137_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128137_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128140 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112668;
    bool free_loop_cond_112673;
    int64_t free_gtid_114804;
    int64_t free_min_arg_114814;
    int64_t free_min_arg_114815;
    int64_t free_min_res_114816;
    float free_max_res_114820;
    char *free_mem_119417;
    char *free_mem_119489;
    char *free_mem_119492;
    char *free_mem_119495;
};
struct futhark_mc_segmap_parloop_struct_128142 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112668;
    bool free_loop_cond_112673;
    int64_t free_gtid_114804;
    int64_t free_min_arg_114814;
    int64_t free_min_arg_114815;
    int64_t free_min_res_114816;
    float free_max_res_114820;
    char *free_mem_119417;
    char *free_mem_119489;
    char *free_mem_119492;
    char *free_mem_119495;
};
static int futhark_mc_segmap_parloop_128143(void *args, int64_t start,
                                            int64_t end, int flat_tid_114807,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128142
    *futhark_mc_segmap_parloop_struct_128142 =
    (struct futhark_mc_segmap_parloop_struct_128142 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128142->ctx;
    uint64_t futhark_mc_segmap_parloop_128143_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128143_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128142->free_n_112520;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128142->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128142->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128142->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128142->free_x_112597;
    int64_t min_res_112668 =
            futhark_mc_segmap_parloop_struct_128142->free_min_res_112668;
    bool loop_cond_112673 =
         futhark_mc_segmap_parloop_struct_128142->free_loop_cond_112673;
    int64_t gtid_114804 =
            futhark_mc_segmap_parloop_struct_128142->free_gtid_114804;
    int64_t min_arg_114814 =
            futhark_mc_segmap_parloop_struct_128142->free_min_arg_114814;
    int64_t min_arg_114815 =
            futhark_mc_segmap_parloop_struct_128142->free_min_arg_114815;
    int64_t min_res_114816 =
            futhark_mc_segmap_parloop_struct_128142->free_min_res_114816;
    float max_res_114820 =
          futhark_mc_segmap_parloop_struct_128142->free_max_res_114820;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128142->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119489 = {.desc ="mem_119489", .mem =
                                  futhark_mc_segmap_parloop_struct_128142->free_mem_119489,
                                  .size =0, .references =NULL};
    struct memblock mem_119492 = {.desc ="mem_119492", .mem =
                                  futhark_mc_segmap_parloop_struct_128142->free_mem_119492,
                                  .size =0, .references =NULL};
    struct memblock mem_119495 = {.desc ="mem_119495", .mem =
                                  futhark_mc_segmap_parloop_struct_128142->free_mem_119495,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121642 = start;
    
    for (; iter_121642 < end; iter_121642++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121698 = l_n_m_112570;
        int64_t gtid_114808 = iter_121642;
        int64_t remnant_121699 = iter_121642 - gtid_114808;
        int64_t min_arg_121549 = mul64(l_jump_112528, gtid_114808);
        int64_t min_res_121550 = smin64(i_112596, min_arg_121549);
        int64_t defunc_0_g_res_121551 = add64((int64_t) 1, min_res_121550);
        bool init_idx_121552;
        int64_t init_idx_121553;
        int64_t init_idx_121554;
        bool loop_while_121643;
        int64_t low_121644;
        int64_t high_121645;
        
        loop_while_121643 = x_112597;
        low_121644 = (int64_t) 0;
        high_121645 = i_112596;
        while (loop_while_121643) {
            int64_t x_121646 = add64(low_121644, high_121645);
            int64_t mid_121647 = sdiv64(x_121646, (int64_t) 2);
            bool x_121648 = sle64((int64_t) 0, mid_121647);
            bool y_121649 = slt64(mid_121647, n_112520);
            bool bounds_check_121650 = x_121648 && y_121649;
            bool index_certs_121651;
            
            if (!bounds_check_121650) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_121647,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t mid_id_121652 = ((int64_t *) mem_119489.mem)[mid_121647];
            bool cond_121653 = slt64(mid_id_121652, (int64_t) 0);
            int64_t mid_idx_121654;
            
            if (cond_121653) {
                mid_idx_121654 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_121654 = mid_id_121652;
            }
            
            bool cond_121655 = sle64(defunc_0_g_res_121551, mid_idx_121654);
            int64_t loopres_121656;
            int64_t loopres_121657;
            
            if (cond_121655) {
                int64_t loopres_t_res_121658 = sub64(mid_121647, (int64_t) 1);
                
                loopres_121656 = low_121644;
                loopres_121657 = loopres_t_res_121658;
            } else {
                int64_t loopres_f_res_121659 = add64((int64_t) 1, mid_121647);
                
                loopres_121656 = loopres_f_res_121659;
                loopres_121657 = high_121645;
            }
            
            bool loop_cond_121660 = sle64(loopres_121656, loopres_121657);
            bool loop_while_tmp_121700 = loop_cond_121660;
            int64_t low_tmp_121701 = loopres_121656;
            int64_t high_tmp_121702 = loopres_121657;
            
            loop_while_121643 = loop_while_tmp_121700;
            low_121644 = low_tmp_121701;
            high_121645 = high_tmp_121702;
        }
        init_idx_121552 = loop_while_121643;
        init_idx_121553 = low_121644;
        init_idx_121554 = high_121645;
        
        bool idx_121573;
        int64_t idx_121574;
        int64_t idx_121575;
        int64_t idx_121576;
        bool loop_while_121661;
        int64_t l_idx_121662;
        int64_t r_idx_121663;
        int64_t span_121664;
        
        loop_while_121661 = loop_cond_112673;
        l_idx_121662 = init_idx_121553;
        r_idx_121663 = init_idx_121553;
        span_121664 = (int64_t) 1;
        while (loop_while_121661) {
            int64_t max_arg_121665 = sub64(l_idx_121662, (int64_t) 1);
            int64_t max_res_121666 = smax64((int64_t) 0, max_arg_121665);
            int64_t min_arg_121667 = add64((int64_t) 1, r_idx_121663);
            int64_t min_res_121668 = smin64(min_arg_114814, min_arg_121667);
            bool x_121669 = sle64((int64_t) 0, max_res_121666);
            bool y_121670 = slt64(max_res_121666, n_112520);
            bool bounds_check_121671 = x_121669 && y_121670;
            bool index_certs_121672;
            
            if (!bounds_check_121671) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_121666,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121673 = ((int64_t *) mem_119489.mem)[max_res_121666];
            int64_t abs_arg_121674 = sub64(x_121673, defunc_0_g_res_121551);
            int64_t abs_res_121675 = abs64(abs_arg_121674);
            bool x_121676 = sle64((int64_t) 0, min_res_121668);
            bool y_121677 = slt64(min_res_121668, n_112520);
            bool bounds_check_121678 = x_121676 && y_121677;
            bool index_certs_121679;
            
            if (!bounds_check_121678) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_121668,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121680 = ((int64_t *) mem_119489.mem)[min_res_121668];
            int64_t abs_arg_121681 = sub64(x_121680, defunc_0_g_res_121551);
            int64_t abs_res_121682 = abs64(abs_arg_121681);
            bool cond_121683 = max_res_121666 == l_idx_121662;
            int64_t loopres_121684;
            int64_t loopres_121685;
            int64_t loopres_121686;
            
            if (cond_121683) {
                loopres_121684 = l_idx_121662;
                loopres_121685 = r_idx_121663;
                loopres_121686 = min_res_112668;
            } else {
                bool cond_121687 = slt64(abs_res_121675, abs_res_121682);
                bool cond_f_res_121688 = min_res_121668 == r_idx_121663;
                bool x_121689 = !cond_121687;
                bool y_121690 = cond_f_res_121688 && x_121689;
                bool cond_121691 = cond_121687 || y_121690;
                int64_t loopres_f_res_121692;
                
                if (cond_121691) {
                    loopres_f_res_121692 = max_res_121666;
                } else {
                    loopres_f_res_121692 = l_idx_121662;
                }
                
                int64_t loopres_f_res_121693;
                
                if (cond_121691) {
                    loopres_f_res_121693 = r_idx_121663;
                } else {
                    loopres_f_res_121693 = min_res_121668;
                }
                
                int64_t loopres_f_res_121694;
                
                if (cond_121691) {
                    int64_t loopres_f_res_t_res_121695 = add64((int64_t) 1,
                                                               span_121664);
                    
                    loopres_f_res_121694 = loopres_f_res_t_res_121695;
                } else {
                    int64_t loopres_f_res_f_res_121696 = add64((int64_t) 1,
                                                               span_121664);
                    
                    loopres_f_res_121694 = loopres_f_res_f_res_121696;
                }
                loopres_121684 = loopres_f_res_121692;
                loopres_121685 = loopres_f_res_121693;
                loopres_121686 = loopres_f_res_121694;
            }
            
            bool loop_cond_121697 = slt64(loopres_121686, min_res_112668);
            bool loop_while_tmp_121703 = loop_cond_121697;
            int64_t l_idx_tmp_121704 = loopres_121684;
            int64_t r_idx_tmp_121705 = loopres_121685;
            int64_t span_tmp_121706 = loopres_121686;
            
            loop_while_121661 = loop_while_tmp_121703;
            l_idx_121662 = l_idx_tmp_121704;
            r_idx_121663 = r_idx_tmp_121705;
            span_121664 = span_tmp_121706;
        }
        idx_121573 = loop_while_121661;
        idx_121574 = l_idx_121662;
        idx_121575 = r_idx_121663;
        idx_121576 = span_121664;
        
        int64_t min_res_121614 = smin64(min_arg_114815, idx_121574);
        int64_t max_res_121615 = smax64((int64_t) 0, min_res_121614);
        int64_t x_121616 = add64(min_res_114816, max_res_121615);
        int64_t r_121617 = sub64(x_121616, (int64_t) 1);
        bool x_121618 = sle64((int64_t) 0, r_121617);
        bool y_121619 = slt64(r_121617, n_112520);
        bool bounds_check_121620 = x_121618 && y_121619;
        bool index_certs_121621;
        
        if (!bounds_check_121620) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_121617,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112520, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121622 = ((int64_t *) mem_119417.mem)[gtid_114804 * n_112520 +
                                                        r_121617];
        int64_t abs_arg_121623 = sub64(x_121622, min_res_121550);
        int64_t abs_res_121624 = abs64(abs_arg_121623);
        bool x_121625 = sle64((int64_t) 0, max_res_121615);
        bool y_121626 = slt64(max_res_121615, n_112520);
        bool bounds_check_121627 = x_121625 && y_121626;
        bool index_certs_121628;
        
        if (!bounds_check_121627) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_121615,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112520, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121629 = ((int64_t *) mem_119417.mem)[gtid_114804 * n_112520 +
                                                        max_res_121615];
        int64_t abs_arg_121630 = sub64(x_121629, min_res_121550);
        int64_t abs_res_121631 = abs64(abs_arg_121630);
        int64_t max_res_121632 = smax64(abs_res_121624, abs_res_121631);
        float defunc_0_f_res_121633 = sitofp_i64_f32(max_res_121632);
        float defunc_1_f_res_121634 = max_res_114820 + defunc_0_f_res_121633;
        
        ((float *) mem_119492.mem)[gtid_114808] = defunc_1_f_res_121634;
        ((int64_t *) mem_119495.mem)[gtid_114808] = max_res_121615;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128143_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128143_end -
                 futhark_mc_segmap_parloop_128143_start;
        
        ctx->futhark_mc_segmap_parloop_128143_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128143_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128143_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128141(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114807 = tid;
    int num_tasks_121641 = info.nsubtasks;
    struct futhark_mc_task_128140 *futhark_mc_task_128140 =
                                  (struct futhark_mc_task_128140 *) args;
    struct futhark_context *ctx = futhark_mc_task_128140->ctx;
    uint64_t futhark_mc_segmap_task_128141_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128141_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128140->free_n_112520;
    int64_t l_jump_112528 = futhark_mc_task_128140->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128140->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128140->free_i_112596;
    bool x_112597 = futhark_mc_task_128140->free_x_112597;
    int64_t min_res_112668 = futhark_mc_task_128140->free_min_res_112668;
    bool loop_cond_112673 = futhark_mc_task_128140->free_loop_cond_112673;
    int64_t gtid_114804 = futhark_mc_task_128140->free_gtid_114804;
    int64_t min_arg_114814 = futhark_mc_task_128140->free_min_arg_114814;
    int64_t min_arg_114815 = futhark_mc_task_128140->free_min_arg_114815;
    int64_t min_res_114816 = futhark_mc_task_128140->free_min_res_114816;
    float max_res_114820 = futhark_mc_task_128140->free_max_res_114820;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128140->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119489 = {.desc ="mem_119489", .mem =
                                  futhark_mc_task_128140->free_mem_119489,
                                  .size =0, .references =NULL};
    struct memblock mem_119492 = {.desc ="mem_119492", .mem =
                                  futhark_mc_task_128140->free_mem_119492,
                                  .size =0, .references =NULL};
    struct memblock mem_119495 = {.desc ="mem_119495", .mem =
                                  futhark_mc_task_128140->free_mem_119495,
                                  .size =0, .references =NULL};
    int64_t iter_121642;
    struct futhark_mc_segmap_parloop_struct_128142
    futhark_mc_segmap_parloop_struct_128142;
    
    futhark_mc_segmap_parloop_struct_128142.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128142.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128142.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128142.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128142.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128142.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128142.free_min_res_112668 =
        min_res_112668;
    futhark_mc_segmap_parloop_struct_128142.free_loop_cond_112673 =
        loop_cond_112673;
    futhark_mc_segmap_parloop_struct_128142.free_gtid_114804 = gtid_114804;
    futhark_mc_segmap_parloop_struct_128142.free_min_arg_114814 =
        min_arg_114814;
    futhark_mc_segmap_parloop_struct_128142.free_min_arg_114815 =
        min_arg_114815;
    futhark_mc_segmap_parloop_struct_128142.free_min_res_114816 =
        min_res_114816;
    futhark_mc_segmap_parloop_struct_128142.free_max_res_114820 =
        max_res_114820;
    futhark_mc_segmap_parloop_struct_128142.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128142.free_mem_119489 = mem_119489.mem;
    futhark_mc_segmap_parloop_struct_128142.free_mem_119492 = mem_119492.mem;
    futhark_mc_segmap_parloop_struct_128142.free_mem_119495 = mem_119495.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128143_task;
    
    futhark_mc_segmap_parloop_128143_task.name =
        "futhark_mc_segmap_parloop_128143";
    futhark_mc_segmap_parloop_128143_task.fn = futhark_mc_segmap_parloop_128143;
    futhark_mc_segmap_parloop_128143_task.args =
        &futhark_mc_segmap_parloop_struct_128142;
    futhark_mc_segmap_parloop_128143_task.iterations = iterations;
    futhark_mc_segmap_parloop_128143_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128143_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128143_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128143_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128143_task);
    
    if (futhark_mc_segmap_parloop_128143_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128143_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128143_total_end -
                 futhark_mc_segmap_parloop_128143_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128143_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128143_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128143_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128141_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128141_end -
                 futhark_mc_segmap_task_128141_start;
        
        ctx->futhark_mc_segmap_task_128141_runs[tid]++;
        ctx->futhark_mc_segmap_task_128141_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128141_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128132(void *args, int64_t start,
                                            int64_t end, int flat_tid_114803,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128131
    *futhark_mc_segmap_parloop_struct_128131 =
    (struct futhark_mc_segmap_parloop_struct_128131 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128131->ctx;
    uint64_t futhark_mc_segmap_parloop_128132_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128132_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128131->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128131->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128131->free_l_window_112524;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128131->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128131->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128131->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128131->free_x_112597;
    int64_t min_res_112668 =
            futhark_mc_segmap_parloop_struct_128131->free_min_res_112668;
    bool loop_cond_112673 =
         futhark_mc_segmap_parloop_struct_128131->free_loop_cond_112673;
    float i64_res_112674 =
          futhark_mc_segmap_parloop_struct_128131->free_i64_res_112674;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128131->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128131->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128131->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128131->free_bytes_119490;
    int64_t bytes_119493 =
            futhark_mc_segmap_parloop_struct_128131->free_bytes_119493;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128131->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128131->free_mem_119548,
                                  .size =0, .references =NULL};
    size_t mem_119489_cached_sizze_128133 = 0;
    char *mem_119489 = NULL;
    size_t mem_119492_cached_sizze_128134 = 0;
    char *mem_119492 = NULL;
    size_t mem_119495_cached_sizze_128135 = 0;
    char *mem_119495 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121546 = start;
    
    if (mem_119489_cached_sizze_128133 < (size_t) bytes_119378) {
        mem_119489 = realloc(mem_119489, bytes_119378);
        mem_119489_cached_sizze_128133 = bytes_119378;
    }
    if (mem_119492_cached_sizze_128134 < (size_t) bytes_119490) {
        mem_119492 = realloc(mem_119492, bytes_119490);
        mem_119492_cached_sizze_128134 = bytes_119490;
    }
    if (mem_119495_cached_sizze_128135 < (size_t) bytes_119493) {
        mem_119495 = realloc(mem_119495, bytes_119493);
        mem_119495_cached_sizze_128135 = bytes_119493;
    }
    for (; iter_121546 < end; iter_121546++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121635 = m_112519;
        int64_t gtid_114804 = iter_121546;
        int64_t remnant_121636 = iter_121546 - gtid_114804;
        int64_t x_114810 = ((int64_t *) mem_119420.mem)[gtid_114804];
        int64_t flat_tid_114805 = (int64_t) 0;
        int32_t num_tasks_121637;
        struct futhark_mc_task_128136 futhark_mc_task_128136;
        
        futhark_mc_task_128136.ctx = ctx;
        futhark_mc_task_128136.free_n_112520 = n_112520;
        futhark_mc_task_128136.free_gtid_114804 = gtid_114804;
        futhark_mc_task_128136.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128136.free_mem_119489 = mem_119489;
        
        struct scheduler_segop futhark_mc_task_128136_task;
        
        futhark_mc_task_128136_task.args = &futhark_mc_task_128136;
        futhark_mc_task_128136_task.top_level_fn =
            futhark_mc_segmap_task_128137;
        futhark_mc_task_128136_task.name = "futhark_mc_segmap_task_128137";
        futhark_mc_task_128136_task.iterations = n_112520;
        futhark_mc_task_128136_task.task_time =
            &ctx->futhark_mc_segmap_task_128137_total_time;
        futhark_mc_task_128136_task.task_iter =
            &ctx->futhark_mc_segmap_task_128137_total_iter;
        futhark_mc_task_128136_task.sched = STATIC;
        futhark_mc_task_128136_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128137_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128136_task);
        
        if (futhark_mc_segmap_task_128137_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_114814 = sub64(x_114810, (int64_t) 1);
        int64_t min_arg_114815 = sub64(x_114810, min_res_112668);
        int64_t min_res_114816 = smin64(l_window_112524, x_114810);
        float i64_res_114817 = sitofp_i64_f32(x_114810);
        float x_114818 = i64_res_112674 - i64_res_114817;
        float max_arg_114819 = x_114818 / 2.0F;
        float max_res_114820 = fmax32(0.0F, max_arg_114819);
        int64_t flat_tid_114807 = (int64_t) 0;
        int32_t num_tasks_121641;
        struct futhark_mc_task_128140 futhark_mc_task_128140;
        
        futhark_mc_task_128140.ctx = ctx;
        futhark_mc_task_128140.free_n_112520 = n_112520;
        futhark_mc_task_128140.free_l_jump_112528 = l_jump_112528;
        futhark_mc_task_128140.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128140.free_i_112596 = i_112596;
        futhark_mc_task_128140.free_x_112597 = x_112597;
        futhark_mc_task_128140.free_min_res_112668 = min_res_112668;
        futhark_mc_task_128140.free_loop_cond_112673 = loop_cond_112673;
        futhark_mc_task_128140.free_gtid_114804 = gtid_114804;
        futhark_mc_task_128140.free_min_arg_114814 = min_arg_114814;
        futhark_mc_task_128140.free_min_arg_114815 = min_arg_114815;
        futhark_mc_task_128140.free_min_res_114816 = min_res_114816;
        futhark_mc_task_128140.free_max_res_114820 = max_res_114820;
        futhark_mc_task_128140.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128140.free_mem_119489 = mem_119489;
        futhark_mc_task_128140.free_mem_119492 = mem_119492;
        futhark_mc_task_128140.free_mem_119495 = mem_119495;
        
        struct scheduler_segop futhark_mc_task_128140_task;
        
        futhark_mc_task_128140_task.args = &futhark_mc_task_128140;
        futhark_mc_task_128140_task.top_level_fn =
            futhark_mc_segmap_task_128141;
        futhark_mc_task_128140_task.name = "futhark_mc_segmap_task_128141";
        futhark_mc_task_128140_task.iterations = l_n_m_112570;
        futhark_mc_task_128140_task.task_time =
            &ctx->futhark_mc_segmap_task_128141_total_time;
        futhark_mc_task_128140_task.task_iter =
            &ctx->futhark_mc_segmap_task_128141_total_iter;
        futhark_mc_task_128140_task.sched = DYNAMIC;
        futhark_mc_task_128140_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128141_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128140_task);
        
        if (futhark_mc_segmap_task_128141_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119544.mem + gtid_114804 * l_n_m_112570 * (int64_t) 8,
                mem_119495 + (int64_t) 0, l_n_m_112570 * (int64_t) 8);
        memmove(mem_119548.mem + gtid_114804 * l_n_m_112570 * (int64_t) 4,
                mem_119492 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119489);
    free(mem_119492);
    free(mem_119495);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128132_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128132_end -
                 futhark_mc_segmap_parloop_128132_start;
        
        ctx->futhark_mc_segmap_parloop_128132_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128132_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128132_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128130(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114803 = tid;
    int num_tasks_121436 = info.nsubtasks;
    struct futhark_mc_task_128123 *futhark_mc_task_128123 =
                                  (struct futhark_mc_task_128123 *) args;
    struct futhark_context *ctx = futhark_mc_task_128123->ctx;
    uint64_t futhark_mc_segmap_nested_task_128130_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128130_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128123->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128123->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128123->free_l_window_112524;
    int64_t l_jump_112528 = futhark_mc_task_128123->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128123->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128123->free_i_112596;
    bool x_112597 = futhark_mc_task_128123->free_x_112597;
    int64_t min_res_112668 = futhark_mc_task_128123->free_min_res_112668;
    bool loop_cond_112673 = futhark_mc_task_128123->free_loop_cond_112673;
    float i64_res_112674 = futhark_mc_task_128123->free_i64_res_112674;
    int64_t bytes_119378 = futhark_mc_task_128123->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128123->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128123->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119490 = futhark_mc_task_128123->free_bytes_119490;
    int64_t bytes_119493 = futhark_mc_task_128123->free_bytes_119493;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128123->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128123->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t iter_121546;
    struct futhark_mc_segmap_parloop_struct_128131
    futhark_mc_segmap_parloop_struct_128131;
    
    futhark_mc_segmap_parloop_struct_128131.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128131.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128131.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128131.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128131.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128131.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128131.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128131.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128131.free_min_res_112668 =
        min_res_112668;
    futhark_mc_segmap_parloop_struct_128131.free_loop_cond_112673 =
        loop_cond_112673;
    futhark_mc_segmap_parloop_struct_128131.free_i64_res_112674 =
        i64_res_112674;
    futhark_mc_segmap_parloop_struct_128131.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128131.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128131.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128131.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128131.free_bytes_119493 = bytes_119493;
    futhark_mc_segmap_parloop_struct_128131.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128131.free_mem_119548 = mem_119548.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128132_task;
    
    futhark_mc_segmap_parloop_128132_task.name =
        "futhark_mc_segmap_parloop_128132";
    futhark_mc_segmap_parloop_128132_task.fn = futhark_mc_segmap_parloop_128132;
    futhark_mc_segmap_parloop_128132_task.args =
        &futhark_mc_segmap_parloop_struct_128131;
    futhark_mc_segmap_parloop_128132_task.iterations = iterations;
    futhark_mc_segmap_parloop_128132_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128132_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128132_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128132_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128132_task);
    
    if (futhark_mc_segmap_parloop_128132_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128132_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128132_total_end -
                 futhark_mc_segmap_parloop_128132_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128132_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128132_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128132_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128130_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128130_end -
                 futhark_mc_segmap_nested_task_128130_start;
        
        ctx->futhark_mc_segmap_nested_task_128130_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128130_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128130_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128144 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112780;
    bool free_loop_cond_112785;
    float free_i64_res_112786;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119552;
    int64_t free_bytes_119555;
    char *free_mem_119606;
    char *free_mem_119610;
};
struct futhark_mc_segmap_parloop_struct_128146 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112780;
    bool free_loop_cond_112785;
    float free_i64_res_112786;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119552;
    int64_t free_bytes_119555;
    char *free_mem_119606;
    char *free_mem_119610;
};
static int futhark_mc_segmap_parloop_128147(void *args, int64_t start,
                                            int64_t end, int flat_tid_114910,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128146
    *futhark_mc_segmap_parloop_struct_128146 =
    (struct futhark_mc_segmap_parloop_struct_128146 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128146->ctx;
    uint64_t futhark_mc_segmap_parloop_128147_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128147_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128146->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128146->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128146->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128146->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128146->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128146->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128146->free_x_112597;
    int64_t min_res_112780 =
            futhark_mc_segmap_parloop_struct_128146->free_min_res_112780;
    bool loop_cond_112785 =
         futhark_mc_segmap_parloop_struct_128146->free_loop_cond_112785;
    float i64_res_112786 =
          futhark_mc_segmap_parloop_struct_128146->free_i64_res_112786;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128146->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128146->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128146->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128146->free_bytes_119552;
    int64_t bytes_119555 =
            futhark_mc_segmap_parloop_struct_128146->free_bytes_119555;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128146->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128146->free_mem_119610,
                                  .size =0, .references =NULL};
    size_t mem_119560_cached_sizze_128148 = 0;
    char *mem_119560 = NULL;
    size_t mem_119575_cached_sizze_128149 = 0;
    char *mem_119575 = NULL;
    size_t mem_119578_cached_sizze_128150 = 0;
    char *mem_119578 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121708 = start;
    
    if (mem_119560_cached_sizze_128148 < (size_t) bytes_119378) {
        mem_119560 = realloc(mem_119560, bytes_119378);
        mem_119560_cached_sizze_128148 = bytes_119378;
    }
    if (mem_119575_cached_sizze_128149 < (size_t) bytes_119552) {
        mem_119575 = realloc(mem_119575, bytes_119552);
        mem_119575_cached_sizze_128149 = bytes_119552;
    }
    if (mem_119578_cached_sizze_128150 < (size_t) bytes_119555) {
        mem_119578 = realloc(mem_119578, bytes_119555);
        mem_119578_cached_sizze_128150 = bytes_119555;
    }
    for (; iter_121708 < end; iter_121708++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121805 = m_112519;
        int64_t gtid_114911 = iter_121708;
        int64_t remnant_121806 = iter_121708 - gtid_114911;
        int64_t x_112790 = ((int64_t *) mem_119420.mem)[gtid_114911];
        
        for (int64_t i_121709 = 0; i_121709 < n_112520; i_121709++) {
            int64_t x_121711 = ((int64_t *) mem_119417.mem)[gtid_114911 *
                                                            n_112520 +
                                                            i_121709];
            int64_t defunc_0_f_res_121712 = add64((int64_t) 1, x_121711);
            
            ((int64_t *) mem_119560)[i_121709] = defunc_0_f_res_121712;
        }
        
        int64_t min_arg_112794 = sub64(x_112790, (int64_t) 1);
        int64_t min_arg_112795 = sub64(x_112790, min_res_112780);
        int64_t min_res_112796 = smin64(t_window_112523, x_112790);
        float i64_res_112797 = sitofp_i64_f32(x_112790);
        float x_112798 = i64_res_112786 - i64_res_112797;
        float max_arg_112799 = x_112798 / 2.0F;
        float max_res_112800 = fmax32(0.0F, max_arg_112799);
        
        for (int64_t i_121714 = 0; i_121714 < t_n_m_112577; i_121714++) {
            int64_t min_arg_121717 = mul64(t_jump_112527, i_121714);
            int64_t min_res_121718 = smin64(i_112596, min_arg_121717);
            int64_t defunc_0_g_res_121719 = add64((int64_t) 1, min_res_121718);
            bool init_idx_121720;
            int64_t init_idx_121721;
            int64_t init_idx_121722;
            bool loop_while_121723;
            int64_t low_121724;
            int64_t high_121725;
            
            loop_while_121723 = x_112597;
            low_121724 = (int64_t) 0;
            high_121725 = i_112596;
            while (loop_while_121723) {
                int64_t x_121726 = add64(low_121724, high_121725);
                int64_t mid_121727 = sdiv64(x_121726, (int64_t) 2);
                bool x_121728 = sle64((int64_t) 0, mid_121727);
                bool y_121729 = slt64(mid_121727, n_112520);
                bool bounds_check_121730 = x_121728 && y_121729;
                bool index_certs_121731;
                
                if (!bounds_check_121730) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_121727,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t mid_id_121732 = ((int64_t *) mem_119560)[mid_121727];
                bool cond_121733 = slt64(mid_id_121732, (int64_t) 0);
                int64_t mid_idx_121734;
                
                if (cond_121733) {
                    mid_idx_121734 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_121734 = mid_id_121732;
                }
                
                bool cond_121735 = sle64(defunc_0_g_res_121719, mid_idx_121734);
                int64_t loopres_121736;
                int64_t loopres_121737;
                
                if (cond_121735) {
                    int64_t loopres_t_res_121738 = sub64(mid_121727,
                                                         (int64_t) 1);
                    
                    loopres_121736 = low_121724;
                    loopres_121737 = loopres_t_res_121738;
                } else {
                    int64_t loopres_f_res_121739 = add64((int64_t) 1,
                                                         mid_121727);
                    
                    loopres_121736 = loopres_f_res_121739;
                    loopres_121737 = high_121725;
                }
                
                bool loop_cond_121740 = sle64(loopres_121736, loopres_121737);
                bool loop_while_tmp_121810 = loop_cond_121740;
                int64_t low_tmp_121811 = loopres_121736;
                int64_t high_tmp_121812 = loopres_121737;
                
                loop_while_121723 = loop_while_tmp_121810;
                low_121724 = low_tmp_121811;
                high_121725 = high_tmp_121812;
            }
            init_idx_121720 = loop_while_121723;
            init_idx_121721 = low_121724;
            init_idx_121722 = high_121725;
            
            bool idx_121741;
            int64_t idx_121742;
            int64_t idx_121743;
            int64_t idx_121744;
            bool loop_while_121745;
            int64_t l_idx_121746;
            int64_t r_idx_121747;
            int64_t span_121748;
            
            loop_while_121745 = loop_cond_112785;
            l_idx_121746 = init_idx_121721;
            r_idx_121747 = init_idx_121721;
            span_121748 = (int64_t) 1;
            while (loop_while_121745) {
                int64_t max_arg_121749 = sub64(l_idx_121746, (int64_t) 1);
                int64_t max_res_121750 = smax64((int64_t) 0, max_arg_121749);
                int64_t min_arg_121751 = add64((int64_t) 1, r_idx_121747);
                int64_t min_res_121752 = smin64(min_arg_112794, min_arg_121751);
                bool x_121753 = sle64((int64_t) 0, max_res_121750);
                bool y_121754 = slt64(max_res_121750, n_112520);
                bool bounds_check_121755 = x_121753 && y_121754;
                bool index_certs_121756;
                
                if (!bounds_check_121755) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_121750,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121757 = ((int64_t *) mem_119560)[max_res_121750];
                int64_t abs_arg_121758 = sub64(x_121757, defunc_0_g_res_121719);
                int64_t abs_res_121759 = abs64(abs_arg_121758);
                bool x_121760 = sle64((int64_t) 0, min_res_121752);
                bool y_121761 = slt64(min_res_121752, n_112520);
                bool bounds_check_121762 = x_121760 && y_121761;
                bool index_certs_121763;
                
                if (!bounds_check_121762) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_121752,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121764 = ((int64_t *) mem_119560)[min_res_121752];
                int64_t abs_arg_121765 = sub64(x_121764, defunc_0_g_res_121719);
                int64_t abs_res_121766 = abs64(abs_arg_121765);
                bool cond_121767 = max_res_121750 == l_idx_121746;
                int64_t loopres_121768;
                int64_t loopres_121769;
                int64_t loopres_121770;
                
                if (cond_121767) {
                    loopres_121768 = l_idx_121746;
                    loopres_121769 = r_idx_121747;
                    loopres_121770 = min_res_112780;
                } else {
                    bool cond_121771 = slt64(abs_res_121759, abs_res_121766);
                    bool cond_f_res_121772 = min_res_121752 == r_idx_121747;
                    bool x_121773 = !cond_121771;
                    bool y_121774 = cond_f_res_121772 && x_121773;
                    bool cond_121775 = cond_121771 || y_121774;
                    int64_t loopres_f_res_121776;
                    
                    if (cond_121775) {
                        loopres_f_res_121776 = max_res_121750;
                    } else {
                        loopres_f_res_121776 = l_idx_121746;
                    }
                    
                    int64_t loopres_f_res_121777;
                    
                    if (cond_121775) {
                        loopres_f_res_121777 = r_idx_121747;
                    } else {
                        loopres_f_res_121777 = min_res_121752;
                    }
                    
                    int64_t loopres_f_res_121778;
                    
                    if (cond_121775) {
                        int64_t loopres_f_res_t_res_121779 = add64((int64_t) 1,
                                                                   span_121748);
                        
                        loopres_f_res_121778 = loopres_f_res_t_res_121779;
                    } else {
                        int64_t loopres_f_res_f_res_121780 = add64((int64_t) 1,
                                                                   span_121748);
                        
                        loopres_f_res_121778 = loopres_f_res_f_res_121780;
                    }
                    loopres_121768 = loopres_f_res_121776;
                    loopres_121769 = loopres_f_res_121777;
                    loopres_121770 = loopres_f_res_121778;
                }
                
                bool loop_cond_121781 = slt64(loopres_121770, min_res_112780);
                bool loop_while_tmp_121813 = loop_cond_121781;
                int64_t l_idx_tmp_121814 = loopres_121768;
                int64_t r_idx_tmp_121815 = loopres_121769;
                int64_t span_tmp_121816 = loopres_121770;
                
                loop_while_121745 = loop_while_tmp_121813;
                l_idx_121746 = l_idx_tmp_121814;
                r_idx_121747 = r_idx_tmp_121815;
                span_121748 = span_tmp_121816;
            }
            idx_121741 = loop_while_121745;
            idx_121742 = l_idx_121746;
            idx_121743 = r_idx_121747;
            idx_121744 = span_121748;
            
            int64_t min_res_121782 = smin64(min_arg_112795, idx_121742);
            int64_t max_res_121783 = smax64((int64_t) 0, min_res_121782);
            int64_t x_121784 = add64(min_res_112796, max_res_121783);
            int64_t r_121785 = sub64(x_121784, (int64_t) 1);
            bool x_121786 = sle64((int64_t) 0, r_121785);
            bool y_121787 = slt64(r_121785, n_112520);
            bool bounds_check_121788 = x_121786 && y_121787;
            bool index_certs_121789;
            
            if (!bounds_check_121788) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_121785,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121790 = ((int64_t *) mem_119417.mem)[gtid_114911 *
                                                            n_112520 +
                                                            r_121785];
            int64_t abs_arg_121791 = sub64(x_121790, min_res_121718);
            int64_t abs_res_121792 = abs64(abs_arg_121791);
            bool x_121793 = sle64((int64_t) 0, max_res_121783);
            bool y_121794 = slt64(max_res_121783, n_112520);
            bool bounds_check_121795 = x_121793 && y_121794;
            bool index_certs_121796;
            
            if (!bounds_check_121795) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_121783,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121797 = ((int64_t *) mem_119417.mem)[gtid_114911 *
                                                            n_112520 +
                                                            max_res_121783];
            int64_t abs_arg_121798 = sub64(x_121797, min_res_121718);
            int64_t abs_res_121799 = abs64(abs_arg_121798);
            int64_t max_res_121800 = smax64(abs_res_121792, abs_res_121799);
            float defunc_0_f_res_121801 = sitofp_i64_f32(max_res_121800);
            float defunc_1_f_res_121802 = max_res_112800 +
                  defunc_0_f_res_121801;
            
            ((float *) mem_119575)[i_121714] = defunc_1_f_res_121802;
            ((int64_t *) mem_119578)[i_121714] = max_res_121783;
        }
        memmove(mem_119606.mem + gtid_114911 * t_n_m_112577 * (int64_t) 8,
                mem_119578 + (int64_t) 0, t_n_m_112577 * (int64_t) 8);
        memmove(mem_119610.mem + gtid_114911 * t_n_m_112577 * (int64_t) 4,
                mem_119575 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119560);
    free(mem_119575);
    free(mem_119578);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128147_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128147_end -
                 futhark_mc_segmap_parloop_128147_start;
        
        ctx->futhark_mc_segmap_parloop_128147_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128147_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128147_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128145(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114910 = tid;
    int num_tasks_121707 = info.nsubtasks;
    struct futhark_mc_task_128144 *futhark_mc_task_128144 =
                                  (struct futhark_mc_task_128144 *) args;
    struct futhark_context *ctx = futhark_mc_task_128144->ctx;
    uint64_t futhark_mc_segmap_task_128145_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128145_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128144->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128144->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128144->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128144->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128144->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128144->free_i_112596;
    bool x_112597 = futhark_mc_task_128144->free_x_112597;
    int64_t min_res_112780 = futhark_mc_task_128144->free_min_res_112780;
    bool loop_cond_112785 = futhark_mc_task_128144->free_loop_cond_112785;
    float i64_res_112786 = futhark_mc_task_128144->free_i64_res_112786;
    int64_t bytes_119378 = futhark_mc_task_128144->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128144->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128144->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128144->free_bytes_119552;
    int64_t bytes_119555 = futhark_mc_task_128144->free_bytes_119555;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128144->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128144->free_mem_119610,
                                  .size =0, .references =NULL};
    int64_t iter_121708;
    struct futhark_mc_segmap_parloop_struct_128146
    futhark_mc_segmap_parloop_struct_128146;
    
    futhark_mc_segmap_parloop_struct_128146.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128146.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128146.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128146.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128146.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128146.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128146.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128146.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128146.free_min_res_112780 =
        min_res_112780;
    futhark_mc_segmap_parloop_struct_128146.free_loop_cond_112785 =
        loop_cond_112785;
    futhark_mc_segmap_parloop_struct_128146.free_i64_res_112786 =
        i64_res_112786;
    futhark_mc_segmap_parloop_struct_128146.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128146.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128146.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128146.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128146.free_bytes_119555 = bytes_119555;
    futhark_mc_segmap_parloop_struct_128146.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128146.free_mem_119610 = mem_119610.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128147_task;
    
    futhark_mc_segmap_parloop_128147_task.name =
        "futhark_mc_segmap_parloop_128147";
    futhark_mc_segmap_parloop_128147_task.fn = futhark_mc_segmap_parloop_128147;
    futhark_mc_segmap_parloop_128147_task.args =
        &futhark_mc_segmap_parloop_struct_128146;
    futhark_mc_segmap_parloop_128147_task.iterations = iterations;
    futhark_mc_segmap_parloop_128147_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128147_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128147_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128147_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128147_task);
    
    if (futhark_mc_segmap_parloop_128147_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128147_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128147_total_end -
                 futhark_mc_segmap_parloop_128147_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128147_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128147_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128147_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128145_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128145_end -
                 futhark_mc_segmap_task_128145_start;
        
        ctx->futhark_mc_segmap_task_128145_runs[tid]++;
        ctx->futhark_mc_segmap_task_128145_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128145_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128152 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112780;
    bool free_loop_cond_112785;
    float free_i64_res_112786;
    int64_t free_bytes_119378;
    char *free_mem_119417;
    char *free_mem_119420;
    int64_t free_bytes_119552;
    int64_t free_bytes_119555;
    char *free_mem_119606;
    char *free_mem_119610;
};
struct futhark_mc_task_128157 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114913;
    char *free_mem_119417;
    char *free_mem_119551;
};
struct futhark_mc_segmap_parloop_struct_128159 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_114913;
    char *free_mem_119417;
    char *free_mem_119551;
};
static int futhark_mc_segmap_parloop_128160(void *args, int64_t start,
                                            int64_t end, int flat_tid_114914,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128159
    *futhark_mc_segmap_parloop_struct_128159 =
    (struct futhark_mc_segmap_parloop_struct_128159 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128159->ctx;
    uint64_t futhark_mc_segmap_parloop_128160_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128160_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128159->free_n_112520;
    int64_t gtid_114913 =
            futhark_mc_segmap_parloop_struct_128159->free_gtid_114913;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128159->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119551 = {.desc ="mem_119551", .mem =
                                  futhark_mc_segmap_parloop_struct_128159->free_mem_119551,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121909 = start;
    
    for (; iter_121909 < end; iter_121909++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121910 = n_112520;
        int64_t gtid_114915 = iter_121909;
        int64_t remnant_121911 = iter_121909 - gtid_114915;
        int64_t x_121818 = ((int64_t *) mem_119417.mem)[gtid_114913 * n_112520 +
                                                        gtid_114915];
        int64_t defunc_0_f_res_121819 = add64((int64_t) 1, x_121818);
        
        ((int64_t *) mem_119551.mem)[gtid_114915] = defunc_0_f_res_121819;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128160_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128160_end -
                 futhark_mc_segmap_parloop_128160_start;
        
        ctx->futhark_mc_segmap_parloop_128160_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128160_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128160_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128158(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114914 = tid;
    int num_tasks_121908 = info.nsubtasks;
    struct futhark_mc_task_128157 *futhark_mc_task_128157 =
                                  (struct futhark_mc_task_128157 *) args;
    struct futhark_context *ctx = futhark_mc_task_128157->ctx;
    uint64_t futhark_mc_segmap_task_128158_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128158_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128157->free_n_112520;
    int64_t gtid_114913 = futhark_mc_task_128157->free_gtid_114913;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128157->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119551 = {.desc ="mem_119551", .mem =
                                  futhark_mc_task_128157->free_mem_119551,
                                  .size =0, .references =NULL};
    int64_t iter_121909;
    struct futhark_mc_segmap_parloop_struct_128159
    futhark_mc_segmap_parloop_struct_128159;
    
    futhark_mc_segmap_parloop_struct_128159.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128159.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128159.free_gtid_114913 = gtid_114913;
    futhark_mc_segmap_parloop_struct_128159.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128159.free_mem_119551 = mem_119551.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128160_task;
    
    futhark_mc_segmap_parloop_128160_task.name =
        "futhark_mc_segmap_parloop_128160";
    futhark_mc_segmap_parloop_128160_task.fn = futhark_mc_segmap_parloop_128160;
    futhark_mc_segmap_parloop_128160_task.args =
        &futhark_mc_segmap_parloop_struct_128159;
    futhark_mc_segmap_parloop_128160_task.iterations = iterations;
    futhark_mc_segmap_parloop_128160_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128160_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128160_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128160_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128160_task);
    
    if (futhark_mc_segmap_parloop_128160_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128160_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128160_total_end -
                 futhark_mc_segmap_parloop_128160_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128160_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128160_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128160_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128158_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128158_end -
                 futhark_mc_segmap_task_128158_start;
        
        ctx->futhark_mc_segmap_task_128158_runs[tid]++;
        ctx->futhark_mc_segmap_task_128158_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128158_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128161 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112780;
    bool free_loop_cond_112785;
    int64_t free_gtid_114913;
    int64_t free_min_arg_114923;
    int64_t free_min_arg_114924;
    int64_t free_min_res_114925;
    float free_max_res_114929;
    char *free_mem_119417;
    char *free_mem_119551;
    char *free_mem_119554;
    char *free_mem_119557;
};
struct futhark_mc_segmap_parloop_struct_128163 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    bool free_x_112597;
    int64_t free_min_res_112780;
    bool free_loop_cond_112785;
    int64_t free_gtid_114913;
    int64_t free_min_arg_114923;
    int64_t free_min_arg_114924;
    int64_t free_min_res_114925;
    float free_max_res_114929;
    char *free_mem_119417;
    char *free_mem_119551;
    char *free_mem_119554;
    char *free_mem_119557;
};
static int futhark_mc_segmap_parloop_128164(void *args, int64_t start,
                                            int64_t end, int flat_tid_114916,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128163
    *futhark_mc_segmap_parloop_struct_128163 =
    (struct futhark_mc_segmap_parloop_struct_128163 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128163->ctx;
    uint64_t futhark_mc_segmap_parloop_128164_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128164_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128163->free_n_112520;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128163->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128163->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128163->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128163->free_x_112597;
    int64_t min_res_112780 =
            futhark_mc_segmap_parloop_struct_128163->free_min_res_112780;
    bool loop_cond_112785 =
         futhark_mc_segmap_parloop_struct_128163->free_loop_cond_112785;
    int64_t gtid_114913 =
            futhark_mc_segmap_parloop_struct_128163->free_gtid_114913;
    int64_t min_arg_114923 =
            futhark_mc_segmap_parloop_struct_128163->free_min_arg_114923;
    int64_t min_arg_114924 =
            futhark_mc_segmap_parloop_struct_128163->free_min_arg_114924;
    int64_t min_res_114925 =
            futhark_mc_segmap_parloop_struct_128163->free_min_res_114925;
    float max_res_114929 =
          futhark_mc_segmap_parloop_struct_128163->free_max_res_114929;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128163->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119551 = {.desc ="mem_119551", .mem =
                                  futhark_mc_segmap_parloop_struct_128163->free_mem_119551,
                                  .size =0, .references =NULL};
    struct memblock mem_119554 = {.desc ="mem_119554", .mem =
                                  futhark_mc_segmap_parloop_struct_128163->free_mem_119554,
                                  .size =0, .references =NULL};
    struct memblock mem_119557 = {.desc ="mem_119557", .mem =
                                  futhark_mc_segmap_parloop_struct_128163->free_mem_119557,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121913 = start;
    
    for (; iter_121913 < end; iter_121913++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121969 = t_n_m_112577;
        int64_t gtid_114917 = iter_121913;
        int64_t remnant_121970 = iter_121913 - gtid_114917;
        int64_t min_arg_121820 = mul64(t_jump_112527, gtid_114917);
        int64_t min_res_121821 = smin64(i_112596, min_arg_121820);
        int64_t defunc_0_g_res_121822 = add64((int64_t) 1, min_res_121821);
        bool init_idx_121823;
        int64_t init_idx_121824;
        int64_t init_idx_121825;
        bool loop_while_121914;
        int64_t low_121915;
        int64_t high_121916;
        
        loop_while_121914 = x_112597;
        low_121915 = (int64_t) 0;
        high_121916 = i_112596;
        while (loop_while_121914) {
            int64_t x_121917 = add64(low_121915, high_121916);
            int64_t mid_121918 = sdiv64(x_121917, (int64_t) 2);
            bool x_121919 = sle64((int64_t) 0, mid_121918);
            bool y_121920 = slt64(mid_121918, n_112520);
            bool bounds_check_121921 = x_121919 && y_121920;
            bool index_certs_121922;
            
            if (!bounds_check_121921) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_121918,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t mid_id_121923 = ((int64_t *) mem_119551.mem)[mid_121918];
            bool cond_121924 = slt64(mid_id_121923, (int64_t) 0);
            int64_t mid_idx_121925;
            
            if (cond_121924) {
                mid_idx_121925 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_121925 = mid_id_121923;
            }
            
            bool cond_121926 = sle64(defunc_0_g_res_121822, mid_idx_121925);
            int64_t loopres_121927;
            int64_t loopres_121928;
            
            if (cond_121926) {
                int64_t loopres_t_res_121929 = sub64(mid_121918, (int64_t) 1);
                
                loopres_121927 = low_121915;
                loopres_121928 = loopres_t_res_121929;
            } else {
                int64_t loopres_f_res_121930 = add64((int64_t) 1, mid_121918);
                
                loopres_121927 = loopres_f_res_121930;
                loopres_121928 = high_121916;
            }
            
            bool loop_cond_121931 = sle64(loopres_121927, loopres_121928);
            bool loop_while_tmp_121971 = loop_cond_121931;
            int64_t low_tmp_121972 = loopres_121927;
            int64_t high_tmp_121973 = loopres_121928;
            
            loop_while_121914 = loop_while_tmp_121971;
            low_121915 = low_tmp_121972;
            high_121916 = high_tmp_121973;
        }
        init_idx_121823 = loop_while_121914;
        init_idx_121824 = low_121915;
        init_idx_121825 = high_121916;
        
        bool idx_121844;
        int64_t idx_121845;
        int64_t idx_121846;
        int64_t idx_121847;
        bool loop_while_121932;
        int64_t l_idx_121933;
        int64_t r_idx_121934;
        int64_t span_121935;
        
        loop_while_121932 = loop_cond_112785;
        l_idx_121933 = init_idx_121824;
        r_idx_121934 = init_idx_121824;
        span_121935 = (int64_t) 1;
        while (loop_while_121932) {
            int64_t max_arg_121936 = sub64(l_idx_121933, (int64_t) 1);
            int64_t max_res_121937 = smax64((int64_t) 0, max_arg_121936);
            int64_t min_arg_121938 = add64((int64_t) 1, r_idx_121934);
            int64_t min_res_121939 = smin64(min_arg_114923, min_arg_121938);
            bool x_121940 = sle64((int64_t) 0, max_res_121937);
            bool y_121941 = slt64(max_res_121937, n_112520);
            bool bounds_check_121942 = x_121940 && y_121941;
            bool index_certs_121943;
            
            if (!bounds_check_121942) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_121937,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121944 = ((int64_t *) mem_119551.mem)[max_res_121937];
            int64_t abs_arg_121945 = sub64(x_121944, defunc_0_g_res_121822);
            int64_t abs_res_121946 = abs64(abs_arg_121945);
            bool x_121947 = sle64((int64_t) 0, min_res_121939);
            bool y_121948 = slt64(min_res_121939, n_112520);
            bool bounds_check_121949 = x_121947 && y_121948;
            bool index_certs_121950;
            
            if (!bounds_check_121949) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_121939,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  loess.fut:365:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-374:7\n   #4  loess.fut:409:15-61\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121951 = ((int64_t *) mem_119551.mem)[min_res_121939];
            int64_t abs_arg_121952 = sub64(x_121951, defunc_0_g_res_121822);
            int64_t abs_res_121953 = abs64(abs_arg_121952);
            bool cond_121954 = max_res_121937 == l_idx_121933;
            int64_t loopres_121955;
            int64_t loopres_121956;
            int64_t loopres_121957;
            
            if (cond_121954) {
                loopres_121955 = l_idx_121933;
                loopres_121956 = r_idx_121934;
                loopres_121957 = min_res_112780;
            } else {
                bool cond_121958 = slt64(abs_res_121946, abs_res_121953);
                bool cond_f_res_121959 = min_res_121939 == r_idx_121934;
                bool x_121960 = !cond_121958;
                bool y_121961 = cond_f_res_121959 && x_121960;
                bool cond_121962 = cond_121958 || y_121961;
                int64_t loopres_f_res_121963;
                
                if (cond_121962) {
                    loopres_f_res_121963 = max_res_121937;
                } else {
                    loopres_f_res_121963 = l_idx_121933;
                }
                
                int64_t loopres_f_res_121964;
                
                if (cond_121962) {
                    loopres_f_res_121964 = r_idx_121934;
                } else {
                    loopres_f_res_121964 = min_res_121939;
                }
                
                int64_t loopres_f_res_121965;
                
                if (cond_121962) {
                    int64_t loopres_f_res_t_res_121966 = add64((int64_t) 1,
                                                               span_121935);
                    
                    loopres_f_res_121965 = loopres_f_res_t_res_121966;
                } else {
                    int64_t loopres_f_res_f_res_121967 = add64((int64_t) 1,
                                                               span_121935);
                    
                    loopres_f_res_121965 = loopres_f_res_f_res_121967;
                }
                loopres_121955 = loopres_f_res_121963;
                loopres_121956 = loopres_f_res_121964;
                loopres_121957 = loopres_f_res_121965;
            }
            
            bool loop_cond_121968 = slt64(loopres_121957, min_res_112780);
            bool loop_while_tmp_121974 = loop_cond_121968;
            int64_t l_idx_tmp_121975 = loopres_121955;
            int64_t r_idx_tmp_121976 = loopres_121956;
            int64_t span_tmp_121977 = loopres_121957;
            
            loop_while_121932 = loop_while_tmp_121974;
            l_idx_121933 = l_idx_tmp_121975;
            r_idx_121934 = r_idx_tmp_121976;
            span_121935 = span_tmp_121977;
        }
        idx_121844 = loop_while_121932;
        idx_121845 = l_idx_121933;
        idx_121846 = r_idx_121934;
        idx_121847 = span_121935;
        
        int64_t min_res_121885 = smin64(min_arg_114924, idx_121845);
        int64_t max_res_121886 = smax64((int64_t) 0, min_res_121885);
        int64_t x_121887 = add64(min_res_114925, max_res_121886);
        int64_t r_121888 = sub64(x_121887, (int64_t) 1);
        bool x_121889 = sle64((int64_t) 0, r_121888);
        bool y_121890 = slt64(r_121888, n_112520);
        bool bounds_check_121891 = x_121889 && y_121890;
        bool index_certs_121892;
        
        if (!bounds_check_121891) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_121888,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112520, "].",
                                   "-> #0  loess.fut:391:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121893 = ((int64_t *) mem_119417.mem)[gtid_114913 * n_112520 +
                                                        r_121888];
        int64_t abs_arg_121894 = sub64(x_121893, min_res_121821);
        int64_t abs_res_121895 = abs64(abs_arg_121894);
        bool x_121896 = sle64((int64_t) 0, max_res_121886);
        bool y_121897 = slt64(max_res_121886, n_112520);
        bool bounds_check_121898 = x_121896 && y_121897;
        bool index_certs_121899;
        
        if (!bounds_check_121898) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) max_res_121886,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112520, "].",
                                   "-> #0  loess.fut:390:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:386:3-394:25\n   #4  loess.fut:410:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121900 = ((int64_t *) mem_119417.mem)[gtid_114913 * n_112520 +
                                                        max_res_121886];
        int64_t abs_arg_121901 = sub64(x_121900, min_res_121821);
        int64_t abs_res_121902 = abs64(abs_arg_121901);
        int64_t max_res_121903 = smax64(abs_res_121895, abs_res_121902);
        float defunc_0_f_res_121904 = sitofp_i64_f32(max_res_121903);
        float defunc_1_f_res_121905 = max_res_114929 + defunc_0_f_res_121904;
        
        ((float *) mem_119554.mem)[gtid_114917] = defunc_1_f_res_121905;
        ((int64_t *) mem_119557.mem)[gtid_114917] = max_res_121886;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128164_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128164_end -
                 futhark_mc_segmap_parloop_128164_start;
        
        ctx->futhark_mc_segmap_parloop_128164_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128164_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128164_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128162(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114916 = tid;
    int num_tasks_121912 = info.nsubtasks;
    struct futhark_mc_task_128161 *futhark_mc_task_128161 =
                                  (struct futhark_mc_task_128161 *) args;
    struct futhark_context *ctx = futhark_mc_task_128161->ctx;
    uint64_t futhark_mc_segmap_task_128162_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128162_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128161->free_n_112520;
    int64_t t_jump_112527 = futhark_mc_task_128161->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128161->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128161->free_i_112596;
    bool x_112597 = futhark_mc_task_128161->free_x_112597;
    int64_t min_res_112780 = futhark_mc_task_128161->free_min_res_112780;
    bool loop_cond_112785 = futhark_mc_task_128161->free_loop_cond_112785;
    int64_t gtid_114913 = futhark_mc_task_128161->free_gtid_114913;
    int64_t min_arg_114923 = futhark_mc_task_128161->free_min_arg_114923;
    int64_t min_arg_114924 = futhark_mc_task_128161->free_min_arg_114924;
    int64_t min_res_114925 = futhark_mc_task_128161->free_min_res_114925;
    float max_res_114929 = futhark_mc_task_128161->free_max_res_114929;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128161->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119551 = {.desc ="mem_119551", .mem =
                                  futhark_mc_task_128161->free_mem_119551,
                                  .size =0, .references =NULL};
    struct memblock mem_119554 = {.desc ="mem_119554", .mem =
                                  futhark_mc_task_128161->free_mem_119554,
                                  .size =0, .references =NULL};
    struct memblock mem_119557 = {.desc ="mem_119557", .mem =
                                  futhark_mc_task_128161->free_mem_119557,
                                  .size =0, .references =NULL};
    int64_t iter_121913;
    struct futhark_mc_segmap_parloop_struct_128163
    futhark_mc_segmap_parloop_struct_128163;
    
    futhark_mc_segmap_parloop_struct_128163.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128163.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128163.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128163.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128163.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128163.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128163.free_min_res_112780 =
        min_res_112780;
    futhark_mc_segmap_parloop_struct_128163.free_loop_cond_112785 =
        loop_cond_112785;
    futhark_mc_segmap_parloop_struct_128163.free_gtid_114913 = gtid_114913;
    futhark_mc_segmap_parloop_struct_128163.free_min_arg_114923 =
        min_arg_114923;
    futhark_mc_segmap_parloop_struct_128163.free_min_arg_114924 =
        min_arg_114924;
    futhark_mc_segmap_parloop_struct_128163.free_min_res_114925 =
        min_res_114925;
    futhark_mc_segmap_parloop_struct_128163.free_max_res_114929 =
        max_res_114929;
    futhark_mc_segmap_parloop_struct_128163.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128163.free_mem_119551 = mem_119551.mem;
    futhark_mc_segmap_parloop_struct_128163.free_mem_119554 = mem_119554.mem;
    futhark_mc_segmap_parloop_struct_128163.free_mem_119557 = mem_119557.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128164_task;
    
    futhark_mc_segmap_parloop_128164_task.name =
        "futhark_mc_segmap_parloop_128164";
    futhark_mc_segmap_parloop_128164_task.fn = futhark_mc_segmap_parloop_128164;
    futhark_mc_segmap_parloop_128164_task.args =
        &futhark_mc_segmap_parloop_struct_128163;
    futhark_mc_segmap_parloop_128164_task.iterations = iterations;
    futhark_mc_segmap_parloop_128164_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128164_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128164_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128164_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128164_task);
    
    if (futhark_mc_segmap_parloop_128164_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128164_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128164_total_end -
                 futhark_mc_segmap_parloop_128164_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128164_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128164_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128164_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128162_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128162_end -
                 futhark_mc_segmap_task_128162_start;
        
        ctx->futhark_mc_segmap_task_128162_runs[tid]++;
        ctx->futhark_mc_segmap_task_128162_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128162_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128153(void *args, int64_t start,
                                            int64_t end, int flat_tid_114912,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128152
    *futhark_mc_segmap_parloop_struct_128152 =
    (struct futhark_mc_segmap_parloop_struct_128152 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128152->ctx;
    uint64_t futhark_mc_segmap_parloop_128153_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128153_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128152->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128152->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128152->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128152->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128152->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128152->free_i_112596;
    bool x_112597 = futhark_mc_segmap_parloop_struct_128152->free_x_112597;
    int64_t min_res_112780 =
            futhark_mc_segmap_parloop_struct_128152->free_min_res_112780;
    bool loop_cond_112785 =
         futhark_mc_segmap_parloop_struct_128152->free_loop_cond_112785;
    float i64_res_112786 =
          futhark_mc_segmap_parloop_struct_128152->free_i64_res_112786;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128152->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128152->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128152->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128152->free_bytes_119552;
    int64_t bytes_119555 =
            futhark_mc_segmap_parloop_struct_128152->free_bytes_119555;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128152->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128152->free_mem_119610,
                                  .size =0, .references =NULL};
    size_t mem_119551_cached_sizze_128154 = 0;
    char *mem_119551 = NULL;
    size_t mem_119554_cached_sizze_128155 = 0;
    char *mem_119554 = NULL;
    size_t mem_119557_cached_sizze_128156 = 0;
    char *mem_119557 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121817 = start;
    
    if (mem_119551_cached_sizze_128154 < (size_t) bytes_119378) {
        mem_119551 = realloc(mem_119551, bytes_119378);
        mem_119551_cached_sizze_128154 = bytes_119378;
    }
    if (mem_119554_cached_sizze_128155 < (size_t) bytes_119552) {
        mem_119554 = realloc(mem_119554, bytes_119552);
        mem_119554_cached_sizze_128155 = bytes_119552;
    }
    if (mem_119557_cached_sizze_128156 < (size_t) bytes_119555) {
        mem_119557 = realloc(mem_119557, bytes_119555);
        mem_119557_cached_sizze_128156 = bytes_119555;
    }
    for (; iter_121817 < end; iter_121817++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121906 = m_112519;
        int64_t gtid_114913 = iter_121817;
        int64_t remnant_121907 = iter_121817 - gtid_114913;
        int64_t x_114919 = ((int64_t *) mem_119420.mem)[gtid_114913];
        int64_t flat_tid_114914 = (int64_t) 0;
        int32_t num_tasks_121908;
        struct futhark_mc_task_128157 futhark_mc_task_128157;
        
        futhark_mc_task_128157.ctx = ctx;
        futhark_mc_task_128157.free_n_112520 = n_112520;
        futhark_mc_task_128157.free_gtid_114913 = gtid_114913;
        futhark_mc_task_128157.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128157.free_mem_119551 = mem_119551;
        
        struct scheduler_segop futhark_mc_task_128157_task;
        
        futhark_mc_task_128157_task.args = &futhark_mc_task_128157;
        futhark_mc_task_128157_task.top_level_fn =
            futhark_mc_segmap_task_128158;
        futhark_mc_task_128157_task.name = "futhark_mc_segmap_task_128158";
        futhark_mc_task_128157_task.iterations = n_112520;
        futhark_mc_task_128157_task.task_time =
            &ctx->futhark_mc_segmap_task_128158_total_time;
        futhark_mc_task_128157_task.task_iter =
            &ctx->futhark_mc_segmap_task_128158_total_iter;
        futhark_mc_task_128157_task.sched = STATIC;
        futhark_mc_task_128157_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128158_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128157_task);
        
        if (futhark_mc_segmap_task_128158_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_114923 = sub64(x_114919, (int64_t) 1);
        int64_t min_arg_114924 = sub64(x_114919, min_res_112780);
        int64_t min_res_114925 = smin64(t_window_112523, x_114919);
        float i64_res_114926 = sitofp_i64_f32(x_114919);
        float x_114927 = i64_res_112786 - i64_res_114926;
        float max_arg_114928 = x_114927 / 2.0F;
        float max_res_114929 = fmax32(0.0F, max_arg_114928);
        int64_t flat_tid_114916 = (int64_t) 0;
        int32_t num_tasks_121912;
        struct futhark_mc_task_128161 futhark_mc_task_128161;
        
        futhark_mc_task_128161.ctx = ctx;
        futhark_mc_task_128161.free_n_112520 = n_112520;
        futhark_mc_task_128161.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128161.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128161.free_i_112596 = i_112596;
        futhark_mc_task_128161.free_x_112597 = x_112597;
        futhark_mc_task_128161.free_min_res_112780 = min_res_112780;
        futhark_mc_task_128161.free_loop_cond_112785 = loop_cond_112785;
        futhark_mc_task_128161.free_gtid_114913 = gtid_114913;
        futhark_mc_task_128161.free_min_arg_114923 = min_arg_114923;
        futhark_mc_task_128161.free_min_arg_114924 = min_arg_114924;
        futhark_mc_task_128161.free_min_res_114925 = min_res_114925;
        futhark_mc_task_128161.free_max_res_114929 = max_res_114929;
        futhark_mc_task_128161.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128161.free_mem_119551 = mem_119551;
        futhark_mc_task_128161.free_mem_119554 = mem_119554;
        futhark_mc_task_128161.free_mem_119557 = mem_119557;
        
        struct scheduler_segop futhark_mc_task_128161_task;
        
        futhark_mc_task_128161_task.args = &futhark_mc_task_128161;
        futhark_mc_task_128161_task.top_level_fn =
            futhark_mc_segmap_task_128162;
        futhark_mc_task_128161_task.name = "futhark_mc_segmap_task_128162";
        futhark_mc_task_128161_task.iterations = t_n_m_112577;
        futhark_mc_task_128161_task.task_time =
            &ctx->futhark_mc_segmap_task_128162_total_time;
        futhark_mc_task_128161_task.task_iter =
            &ctx->futhark_mc_segmap_task_128162_total_iter;
        futhark_mc_task_128161_task.sched = DYNAMIC;
        futhark_mc_task_128161_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128162_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128161_task);
        
        if (futhark_mc_segmap_task_128162_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119606.mem + gtid_114913 * t_n_m_112577 * (int64_t) 8,
                mem_119557 + (int64_t) 0, t_n_m_112577 * (int64_t) 8);
        memmove(mem_119610.mem + gtid_114913 * t_n_m_112577 * (int64_t) 4,
                mem_119554 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119551);
    free(mem_119554);
    free(mem_119557);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128153_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128153_end -
                 futhark_mc_segmap_parloop_128153_start;
        
        ctx->futhark_mc_segmap_parloop_128153_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128153_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128153_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128151(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114912 = tid;
    int num_tasks_121707 = info.nsubtasks;
    struct futhark_mc_task_128144 *futhark_mc_task_128144 =
                                  (struct futhark_mc_task_128144 *) args;
    struct futhark_context *ctx = futhark_mc_task_128144->ctx;
    uint64_t futhark_mc_segmap_nested_task_128151_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128151_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128144->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128144->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128144->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128144->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128144->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128144->free_i_112596;
    bool x_112597 = futhark_mc_task_128144->free_x_112597;
    int64_t min_res_112780 = futhark_mc_task_128144->free_min_res_112780;
    bool loop_cond_112785 = futhark_mc_task_128144->free_loop_cond_112785;
    float i64_res_112786 = futhark_mc_task_128144->free_i64_res_112786;
    int64_t bytes_119378 = futhark_mc_task_128144->free_bytes_119378;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128144->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128144->free_mem_119420,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128144->free_bytes_119552;
    int64_t bytes_119555 = futhark_mc_task_128144->free_bytes_119555;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128144->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128144->free_mem_119610,
                                  .size =0, .references =NULL};
    int64_t iter_121817;
    struct futhark_mc_segmap_parloop_struct_128152
    futhark_mc_segmap_parloop_struct_128152;
    
    futhark_mc_segmap_parloop_struct_128152.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128152.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128152.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128152.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128152.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128152.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128152.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128152.free_x_112597 = x_112597;
    futhark_mc_segmap_parloop_struct_128152.free_min_res_112780 =
        min_res_112780;
    futhark_mc_segmap_parloop_struct_128152.free_loop_cond_112785 =
        loop_cond_112785;
    futhark_mc_segmap_parloop_struct_128152.free_i64_res_112786 =
        i64_res_112786;
    futhark_mc_segmap_parloop_struct_128152.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128152.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128152.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128152.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128152.free_bytes_119555 = bytes_119555;
    futhark_mc_segmap_parloop_struct_128152.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128152.free_mem_119610 = mem_119610.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128153_task;
    
    futhark_mc_segmap_parloop_128153_task.name =
        "futhark_mc_segmap_parloop_128153";
    futhark_mc_segmap_parloop_128153_task.fn = futhark_mc_segmap_parloop_128153;
    futhark_mc_segmap_parloop_128153_task.args =
        &futhark_mc_segmap_parloop_struct_128152;
    futhark_mc_segmap_parloop_128153_task.iterations = iterations;
    futhark_mc_segmap_parloop_128153_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128153_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128153_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128153_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128153_task);
    
    if (futhark_mc_segmap_parloop_128153_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128153_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128153_total_end -
                 futhark_mc_segmap_parloop_128153_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128153_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128153_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128153_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128151_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128151_end -
                 futhark_mc_segmap_nested_task_128151_start;
        
        ctx->futhark_mc_segmap_nested_task_128151_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128151_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128151_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128165 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119660;
    char *free_mem_param_119664;
    char *free_mem_119686;
};
struct futhark_mc_segmap_parloop_struct_128167 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119660;
    char *free_mem_param_119664;
    char *free_mem_119686;
};
static int futhark_mc_segmap_parloop_128168(void *args, int64_t start,
                                            int64_t end, int flat_tid_115019,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128167
    *futhark_mc_segmap_parloop_struct_128167 =
    (struct futhark_mc_segmap_parloop_struct_128167 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128167->ctx;
    uint64_t futhark_mc_segmap_parloop_128168_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128168_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128167->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128167->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128167->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128167->free_bytes_119421;
    int64_t ctx_param_ext_119660 =
            futhark_mc_segmap_parloop_struct_128167->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_segmap_parloop_struct_128167->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128167->free_mem_119686,
                                  .size =0, .references =NULL};
    size_t mem_119670_cached_sizze_128169 = 0;
    char *mem_119670 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122004 = start;
    
    if (mem_119670_cached_sizze_128169 < (size_t) bytes_119421) {
        mem_119670 = realloc(mem_119670, bytes_119421);
        mem_119670_cached_sizze_128169 = bytes_119421;
    }
    for (; iter_122004 < end; iter_122004++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122011 = m_112519;
        int64_t gtid_115020 = iter_122004;
        int64_t remnant_122012 = iter_122004 - gtid_115020;
        
        for (int64_t i_122005 = 0; i_122005 < n_112520; i_122005++) {
            float x_122007 = ((float *) Y_mem_119377.mem)[gtid_115020 *
                                                          n_112520 + i_122005];
            float x_122008 = ((float *) mem_param_119664.mem)[gtid_115020 *
                                                              ctx_param_ext_119660 +
                                                              i_122005];
            float defunc_1_f_res_122009 = x_122007 - x_122008;
            
            ((float *) mem_119670)[i_122005] = defunc_1_f_res_122009;
        }
        memmove(mem_119686.mem + gtid_115020 * n_112520 * (int64_t) 4,
                mem_119670 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119670);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128168_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128168_end -
                 futhark_mc_segmap_parloop_128168_start;
        
        ctx->futhark_mc_segmap_parloop_128168_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128168_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128168_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128166(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115019 = tid;
    int num_tasks_122003 = info.nsubtasks;
    struct futhark_mc_task_128165 *futhark_mc_task_128165 =
                                  (struct futhark_mc_task_128165 *) args;
    struct futhark_context *ctx = futhark_mc_task_128165->ctx;
    uint64_t futhark_mc_segmap_task_128166_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128166_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128165->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128165->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128165->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128165->free_bytes_119421;
    int64_t ctx_param_ext_119660 =
            futhark_mc_task_128165->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_task_128165->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128165->free_mem_119686,
                                  .size =0, .references =NULL};
    int64_t iter_122004;
    struct futhark_mc_segmap_parloop_struct_128167
    futhark_mc_segmap_parloop_struct_128167;
    
    futhark_mc_segmap_parloop_struct_128167.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128167.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128167.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128167.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128167.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128167.free_ctx_param_ext_119660 =
        ctx_param_ext_119660;
    futhark_mc_segmap_parloop_struct_128167.free_mem_param_119664 =
        mem_param_119664.mem;
    futhark_mc_segmap_parloop_struct_128167.free_mem_119686 = mem_119686.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128168_task;
    
    futhark_mc_segmap_parloop_128168_task.name =
        "futhark_mc_segmap_parloop_128168";
    futhark_mc_segmap_parloop_128168_task.fn = futhark_mc_segmap_parloop_128168;
    futhark_mc_segmap_parloop_128168_task.args =
        &futhark_mc_segmap_parloop_struct_128167;
    futhark_mc_segmap_parloop_128168_task.iterations = iterations;
    futhark_mc_segmap_parloop_128168_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128168_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128168_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128168_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128168_task);
    
    if (futhark_mc_segmap_parloop_128168_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128168_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128168_total_end -
                 futhark_mc_segmap_parloop_128168_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128168_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128168_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128168_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128166_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128166_end -
                 futhark_mc_segmap_task_128166_start;
        
        ctx->futhark_mc_segmap_task_128166_runs[tid]++;
        ctx->futhark_mc_segmap_task_128166_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128166_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128171 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119660;
    char *free_mem_param_119664;
    char *free_mem_119686;
};
struct futhark_mc_task_128174 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115022;
    char *free_Y_mem_119377;
    int64_t free_ctx_param_ext_119660;
    char *free_mem_param_119664;
    char *free_mem_119667;
};
struct futhark_mc_segmap_parloop_struct_128176 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115022;
    char *free_Y_mem_119377;
    int64_t free_ctx_param_ext_119660;
    char *free_mem_param_119664;
    char *free_mem_119667;
};
static int futhark_mc_segmap_parloop_128177(void *args, int64_t start,
                                            int64_t end, int flat_tid_115023,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128176
    *futhark_mc_segmap_parloop_struct_128176 =
    (struct futhark_mc_segmap_parloop_struct_128176 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128176->ctx;
    uint64_t futhark_mc_segmap_parloop_128177_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128177_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128176->free_n_112520;
    int64_t gtid_115022 =
            futhark_mc_segmap_parloop_struct_128176->free_gtid_115022;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128176->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_119660 =
            futhark_mc_segmap_parloop_struct_128176->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_segmap_parloop_struct_128176->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119667 = {.desc ="mem_119667", .mem =
                                  futhark_mc_segmap_parloop_struct_128176->free_mem_119667,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122021 = start;
    
    for (; iter_122021 < end; iter_122021++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122022 = n_112520;
        int64_t gtid_115024 = iter_122021;
        int64_t remnant_122023 = iter_122021 - gtid_115024;
        float x_122015 = ((float *) Y_mem_119377.mem)[gtid_115022 * n_112520 +
                                                      gtid_115024];
        float x_122016 = ((float *) mem_param_119664.mem)[gtid_115022 *
                                                          ctx_param_ext_119660 +
                                                          gtid_115024];
        float defunc_1_f_res_122017 = x_122015 - x_122016;
        
        ((float *) mem_119667.mem)[gtid_115024] = defunc_1_f_res_122017;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128177_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128177_end -
                 futhark_mc_segmap_parloop_128177_start;
        
        ctx->futhark_mc_segmap_parloop_128177_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128177_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128177_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128175(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115023 = tid;
    int num_tasks_122020 = info.nsubtasks;
    struct futhark_mc_task_128174 *futhark_mc_task_128174 =
                                  (struct futhark_mc_task_128174 *) args;
    struct futhark_context *ctx = futhark_mc_task_128174->ctx;
    uint64_t futhark_mc_segmap_task_128175_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128175_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128174->free_n_112520;
    int64_t gtid_115022 = futhark_mc_task_128174->free_gtid_115022;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128174->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_119660 =
            futhark_mc_task_128174->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_task_128174->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119667 = {.desc ="mem_119667", .mem =
                                  futhark_mc_task_128174->free_mem_119667,
                                  .size =0, .references =NULL};
    int64_t iter_122021;
    struct futhark_mc_segmap_parloop_struct_128176
    futhark_mc_segmap_parloop_struct_128176;
    
    futhark_mc_segmap_parloop_struct_128176.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128176.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128176.free_gtid_115022 = gtid_115022;
    futhark_mc_segmap_parloop_struct_128176.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128176.free_ctx_param_ext_119660 =
        ctx_param_ext_119660;
    futhark_mc_segmap_parloop_struct_128176.free_mem_param_119664 =
        mem_param_119664.mem;
    futhark_mc_segmap_parloop_struct_128176.free_mem_119667 = mem_119667.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128177_task;
    
    futhark_mc_segmap_parloop_128177_task.name =
        "futhark_mc_segmap_parloop_128177";
    futhark_mc_segmap_parloop_128177_task.fn = futhark_mc_segmap_parloop_128177;
    futhark_mc_segmap_parloop_128177_task.args =
        &futhark_mc_segmap_parloop_struct_128176;
    futhark_mc_segmap_parloop_128177_task.iterations = iterations;
    futhark_mc_segmap_parloop_128177_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128177_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128177_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128177_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128177_task);
    
    if (futhark_mc_segmap_parloop_128177_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128177_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128177_total_end -
                 futhark_mc_segmap_parloop_128177_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128177_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128177_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128177_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128175_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128175_end -
                 futhark_mc_segmap_task_128175_start;
        
        ctx->futhark_mc_segmap_task_128175_runs[tid]++;
        ctx->futhark_mc_segmap_task_128175_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128175_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128172(void *args, int64_t start,
                                            int64_t end, int flat_tid_115021,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128171
    *futhark_mc_segmap_parloop_struct_128171 =
    (struct futhark_mc_segmap_parloop_struct_128171 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128171->ctx;
    uint64_t futhark_mc_segmap_parloop_128172_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128172_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128171->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128171->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128171->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128171->free_bytes_119421;
    int64_t ctx_param_ext_119660 =
            futhark_mc_segmap_parloop_struct_128171->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_segmap_parloop_struct_128171->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128171->free_mem_119686,
                                  .size =0, .references =NULL};
    size_t mem_119667_cached_sizze_128173 = 0;
    char *mem_119667 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122014 = start;
    
    if (mem_119667_cached_sizze_128173 < (size_t) bytes_119421) {
        mem_119667 = realloc(mem_119667, bytes_119421);
        mem_119667_cached_sizze_128173 = bytes_119421;
    }
    for (; iter_122014 < end; iter_122014++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122018 = m_112519;
        int64_t gtid_115022 = iter_122014;
        int64_t remnant_122019 = iter_122014 - gtid_115022;
        int64_t flat_tid_115023 = (int64_t) 0;
        int32_t num_tasks_122020;
        struct futhark_mc_task_128174 futhark_mc_task_128174;
        
        futhark_mc_task_128174.ctx = ctx;
        futhark_mc_task_128174.free_n_112520 = n_112520;
        futhark_mc_task_128174.free_gtid_115022 = gtid_115022;
        futhark_mc_task_128174.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128174.free_ctx_param_ext_119660 = ctx_param_ext_119660;
        futhark_mc_task_128174.free_mem_param_119664 = mem_param_119664.mem;
        futhark_mc_task_128174.free_mem_119667 = mem_119667;
        
        struct scheduler_segop futhark_mc_task_128174_task;
        
        futhark_mc_task_128174_task.args = &futhark_mc_task_128174;
        futhark_mc_task_128174_task.top_level_fn =
            futhark_mc_segmap_task_128175;
        futhark_mc_task_128174_task.name = "futhark_mc_segmap_task_128175";
        futhark_mc_task_128174_task.iterations = n_112520;
        futhark_mc_task_128174_task.task_time =
            &ctx->futhark_mc_segmap_task_128175_total_time;
        futhark_mc_task_128174_task.task_iter =
            &ctx->futhark_mc_segmap_task_128175_total_iter;
        futhark_mc_task_128174_task.sched = STATIC;
        futhark_mc_task_128174_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128175_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128174_task);
        
        if (futhark_mc_segmap_task_128175_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119686.mem + gtid_115022 * n_112520 * (int64_t) 4,
                mem_119667 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119667);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128172_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128172_end -
                 futhark_mc_segmap_parloop_128172_start;
        
        ctx->futhark_mc_segmap_parloop_128172_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128172_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128172_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128170(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115021 = tid;
    int num_tasks_122003 = info.nsubtasks;
    struct futhark_mc_task_128165 *futhark_mc_task_128165 =
                                  (struct futhark_mc_task_128165 *) args;
    struct futhark_context *ctx = futhark_mc_task_128165->ctx;
    uint64_t futhark_mc_segmap_nested_task_128170_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128170_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128165->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128165->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128165->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128165->free_bytes_119421;
    int64_t ctx_param_ext_119660 =
            futhark_mc_task_128165->free_ctx_param_ext_119660;
    struct memblock mem_param_119664 = {.desc ="mem_param_119664", .mem =
                                        futhark_mc_task_128165->free_mem_param_119664,
                                        .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128165->free_mem_119686,
                                  .size =0, .references =NULL};
    int64_t iter_122014;
    struct futhark_mc_segmap_parloop_struct_128171
    futhark_mc_segmap_parloop_struct_128171;
    
    futhark_mc_segmap_parloop_struct_128171.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128171.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128171.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128171.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128171.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128171.free_ctx_param_ext_119660 =
        ctx_param_ext_119660;
    futhark_mc_segmap_parloop_struct_128171.free_mem_param_119664 =
        mem_param_119664.mem;
    futhark_mc_segmap_parloop_struct_128171.free_mem_119686 = mem_119686.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128172_task;
    
    futhark_mc_segmap_parloop_128172_task.name =
        "futhark_mc_segmap_parloop_128172";
    futhark_mc_segmap_parloop_128172_task.fn = futhark_mc_segmap_parloop_128172;
    futhark_mc_segmap_parloop_128172_task.args =
        &futhark_mc_segmap_parloop_struct_128171;
    futhark_mc_segmap_parloop_128172_task.iterations = iterations;
    futhark_mc_segmap_parloop_128172_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128172_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128172_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128172_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128172_task);
    
    if (futhark_mc_segmap_parloop_128172_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128172_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128172_total_end -
                 futhark_mc_segmap_parloop_128172_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128172_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128172_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128172_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128170_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128170_end -
                 futhark_mc_segmap_nested_task_128170_start;
        
        ctx->futhark_mc_segmap_nested_task_128170_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128170_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128170_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128178 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119708;
};
struct futhark_mc_segmap_parloop_struct_128180 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119708;
};
static int futhark_mc_segmap_parloop_128181(void *args, int64_t start,
                                            int64_t end, int flat_tid_115031,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128180
    *futhark_mc_segmap_parloop_struct_128180 =
    (struct futhark_mc_segmap_parloop_struct_128180 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128180->ctx;
    uint64_t futhark_mc_segmap_parloop_128181_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128181_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128180->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128180->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128180->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128180->free_css_chunk_len_112566;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128180->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 =
            futhark_mc_segmap_parloop_struct_128180->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128180->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128180->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_segmap_parloop_struct_128180->free_mem_119708,
                                  .size =0, .references =NULL};
    size_t mem_119692_cached_sizze_128182 = 0;
    char *mem_119692 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122025 = start;
    
    if (mem_119692_cached_sizze_128182 < (size_t) bytes_119465) {
        mem_119692 = realloc(mem_119692, bytes_119465);
        mem_119692_cached_sizze_128182 = bytes_119465;
    }
    for (; iter_122025 < end; iter_122025++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122044 = m_112519;
        int64_t gtid_115032 = iter_122025;
        int64_t remnant_122045 = iter_122025 - gtid_115032;
        
        for (int64_t i_122026 = 0; i_122026 < n_p_112522; i_122026++) {
            float x_122028 = ((float *) mem_119486.mem)[gtid_115032 *
                                                        n_p_112522 + i_122026];
            float defunc_2_reduce_res_122029;
            float redout_122031 = 0.0F;
            
            for (int64_t i_122030 = 0; i_122030 < css_chunk_len_112566;
                 i_122030++) {
                int64_t x_122032 = ((int64_t *) mem_119464.mem)[i_122026 *
                                                                css_chunk_len_112566 +
                                                                i_122030];
                bool cond_122033 = sle64((int64_t) 0, x_122032);
                float defunc_0_f_res_122034;
                
                if (cond_122033) {
                    bool y_122035 = slt64(x_122032, n_112520);
                    bool bounds_check_122036 = cond_122033 && y_122035;
                    bool index_certs_122037;
                    
                    if (!bounds_check_122036) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_122032,
                                      "] out of bounds for array of shape [",
                                      (long long) n_112520, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_122038 =
                          ((float *) mem_119686.mem)[gtid_115032 * n_112520 +
                                                     x_122032];
                    
                    defunc_0_f_res_122034 = defunc_0_f_res_t_res_122038;
                } else {
                    defunc_0_f_res_122034 = NAN;
                }
                
                bool isnan_res_122039;
                
                isnan_res_122039 = futrts_isnan32(defunc_0_f_res_122034);
                
                float defunc_0_f_res_122040;
                
                if (isnan_res_122039) {
                    defunc_0_f_res_122040 = 0.0F;
                } else {
                    defunc_0_f_res_122040 = defunc_0_f_res_122034;
                }
                
                float defunc_1_op_res_122041 = defunc_0_f_res_122040 +
                      redout_122031;
                float redout_tmp_122047 = defunc_1_op_res_122041;
                
                redout_122031 = redout_tmp_122047;
            }
            defunc_2_reduce_res_122029 = redout_122031;
            
            float defunc_1_f_res_122042 = defunc_2_reduce_res_122029 / x_122028;
            
            ((float *) mem_119692)[i_122026] = defunc_1_f_res_122042;
        }
        memmove(mem_119708.mem + gtid_115032 * n_p_112522 * (int64_t) 4,
                mem_119692 + (int64_t) 0, n_p_112522 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119692);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128181_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128181_end -
                 futhark_mc_segmap_parloop_128181_start;
        
        ctx->futhark_mc_segmap_parloop_128181_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128181_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128181_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128179(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115031 = tid;
    int num_tasks_122024 = info.nsubtasks;
    struct futhark_mc_task_128178 *futhark_mc_task_128178 =
                                  (struct futhark_mc_task_128178 *) args;
    struct futhark_context *ctx = futhark_mc_task_128178->ctx;
    uint64_t futhark_mc_segmap_task_128179_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128179_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128178->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128178->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128178->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128178->free_css_chunk_len_112566;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128178->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 = futhark_mc_task_128178->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128178->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128178->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_task_128178->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t iter_122025;
    struct futhark_mc_segmap_parloop_struct_128180
    futhark_mc_segmap_parloop_struct_128180;
    
    futhark_mc_segmap_parloop_struct_128180.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128180.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128180.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128180.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128180.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128180.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128180.free_bytes_119465 = bytes_119465;
    futhark_mc_segmap_parloop_struct_128180.free_mem_119486 = mem_119486.mem;
    futhark_mc_segmap_parloop_struct_128180.free_mem_119686 = mem_119686.mem;
    futhark_mc_segmap_parloop_struct_128180.free_mem_119708 = mem_119708.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128181_task;
    
    futhark_mc_segmap_parloop_128181_task.name =
        "futhark_mc_segmap_parloop_128181";
    futhark_mc_segmap_parloop_128181_task.fn = futhark_mc_segmap_parloop_128181;
    futhark_mc_segmap_parloop_128181_task.args =
        &futhark_mc_segmap_parloop_struct_128180;
    futhark_mc_segmap_parloop_128181_task.iterations = iterations;
    futhark_mc_segmap_parloop_128181_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128181_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128181_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128181_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128181_task);
    
    if (futhark_mc_segmap_parloop_128181_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128181_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128181_total_end -
                 futhark_mc_segmap_parloop_128181_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128181_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128181_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128181_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128179_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128179_end -
                 futhark_mc_segmap_task_128179_start;
        
        ctx->futhark_mc_segmap_task_128179_runs[tid]++;
        ctx->futhark_mc_segmap_task_128179_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128179_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128184 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    char *free_mem_119464;
    int64_t free_bytes_119465;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119708;
};
struct futhark_mc_task_128187 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_115034;
    char *free_mem_119464;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119689;
};
struct futhark_mc_segmap_parloop_struct_128189 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_115034;
    char *free_mem_119464;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119689;
};
static int futhark_mc_segmap_parloop_128190(void *args, int64_t start,
                                            int64_t end, int flat_tid_115035,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128189
    *futhark_mc_segmap_parloop_struct_128189 =
    (struct futhark_mc_segmap_parloop_struct_128189 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128189->ctx;
    uint64_t futhark_mc_segmap_parloop_128190_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128190_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128189->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128189->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128189->free_css_chunk_len_112566;
    int64_t gtid_115034 =
            futhark_mc_segmap_parloop_struct_128189->free_gtid_115034;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128189->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128189->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128189->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119689 = {.desc ="mem_119689", .mem =
                                  futhark_mc_segmap_parloop_struct_128189->free_mem_119689,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122082 = start;
    
    for (; iter_122082 < end; iter_122082++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122095 = n_p_112522;
        int64_t gtid_115036 = iter_122082;
        int64_t remnant_122096 = iter_122082 - gtid_115036;
        float x_122064 = ((float *) mem_119486.mem)[gtid_115034 * n_p_112522 +
                                                    gtid_115036];
        float defunc_2_reduce_res_122065;
        float redout_122084 = 0.0F;
        
        for (int64_t i_122083 = 0; i_122083 < css_chunk_len_112566;
             i_122083++) {
            int64_t x_122085 = ((int64_t *) mem_119464.mem)[gtid_115036 *
                                                            css_chunk_len_112566 +
                                                            i_122083];
            bool cond_122086 = sle64((int64_t) 0, x_122085);
            float defunc_0_f_res_122087;
            
            if (cond_122086) {
                bool y_122088 = slt64(x_122085, n_112520);
                bool bounds_check_122089 = cond_122086 && y_122088;
                bool index_certs_122090;
                
                if (!bounds_check_122089) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_122085,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_122091 =
                      ((float *) mem_119686.mem)[gtid_115034 * n_112520 +
                                                 x_122085];
                
                defunc_0_f_res_122087 = defunc_0_f_res_t_res_122091;
            } else {
                defunc_0_f_res_122087 = NAN;
            }
            
            bool isnan_res_122092;
            
            isnan_res_122092 = futrts_isnan32(defunc_0_f_res_122087);
            
            float defunc_0_f_res_122093;
            
            if (isnan_res_122092) {
                defunc_0_f_res_122093 = 0.0F;
            } else {
                defunc_0_f_res_122093 = defunc_0_f_res_122087;
            }
            
            float defunc_1_op_res_122094 = defunc_0_f_res_122093 +
                  redout_122084;
            float redout_tmp_122097 = defunc_1_op_res_122094;
            
            redout_122084 = redout_tmp_122097;
        }
        defunc_2_reduce_res_122065 = redout_122084;
        
        float defunc_1_f_res_122078 = defunc_2_reduce_res_122065 / x_122064;
        
        ((float *) mem_119689.mem)[gtid_115036] = defunc_1_f_res_122078;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128190_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128190_end -
                 futhark_mc_segmap_parloop_128190_start;
        
        ctx->futhark_mc_segmap_parloop_128190_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128190_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128190_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128188(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115035 = tid;
    int num_tasks_122081 = info.nsubtasks;
    struct futhark_mc_task_128187 *futhark_mc_task_128187 =
                                  (struct futhark_mc_task_128187 *) args;
    struct futhark_context *ctx = futhark_mc_task_128187->ctx;
    uint64_t futhark_mc_segmap_task_128188_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128188_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128187->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128187->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128187->free_css_chunk_len_112566;
    int64_t gtid_115034 = futhark_mc_task_128187->free_gtid_115034;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128187->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128187->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128187->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119689 = {.desc ="mem_119689", .mem =
                                  futhark_mc_task_128187->free_mem_119689,
                                  .size =0, .references =NULL};
    int64_t iter_122082;
    struct futhark_mc_segmap_parloop_struct_128189
    futhark_mc_segmap_parloop_struct_128189;
    
    futhark_mc_segmap_parloop_struct_128189.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128189.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128189.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128189.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128189.free_gtid_115034 = gtid_115034;
    futhark_mc_segmap_parloop_struct_128189.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128189.free_mem_119486 = mem_119486.mem;
    futhark_mc_segmap_parloop_struct_128189.free_mem_119686 = mem_119686.mem;
    futhark_mc_segmap_parloop_struct_128189.free_mem_119689 = mem_119689.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128190_task;
    
    futhark_mc_segmap_parloop_128190_task.name =
        "futhark_mc_segmap_parloop_128190";
    futhark_mc_segmap_parloop_128190_task.fn = futhark_mc_segmap_parloop_128190;
    futhark_mc_segmap_parloop_128190_task.args =
        &futhark_mc_segmap_parloop_struct_128189;
    futhark_mc_segmap_parloop_128190_task.iterations = iterations;
    futhark_mc_segmap_parloop_128190_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128190_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128190_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128190_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128190_task);
    
    if (futhark_mc_segmap_parloop_128190_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128190_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128190_total_end -
                 futhark_mc_segmap_parloop_128190_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128190_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128190_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128190_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128188_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128188_end -
                 futhark_mc_segmap_task_128188_start;
        
        ctx->futhark_mc_segmap_task_128188_runs[tid]++;
        ctx->futhark_mc_segmap_task_128188_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128188_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128192 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_115034;
    char *free_mem_119464;
    char *free_mem_119486;
    char *free_mem_119686;
    char *free_mem_119689;
};
struct futhark_mc_task_128194 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_115034;
    int64_t free_gtid_115038;
    char *free_mem_119464;
    char *free_mem_119686;
    float *retval_defunc_2_reduce_res_122050;
};
struct futhark_mc_segred_stage_1_parloop_struct_128197 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_css_chunk_len_112566;
    int64_t free_gtid_115034;
    int64_t free_gtid_115038;
    char *free_mem_119464;
    char *free_mem_119686;
    char *free_reduce_stage_1_tid_res_arr_mem_122114;
};
static int futhark_mc_segred_stage_1_parloop_128198(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115039,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128197
    *futhark_mc_segred_stage_1_parloop_struct_128197 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128197 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128197->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128198_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128198_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128197->free_n_112520;
    int64_t css_chunk_len_112566 =
            futhark_mc_segred_stage_1_parloop_struct_128197->free_css_chunk_len_112566;
    int64_t gtid_115034 =
            futhark_mc_segred_stage_1_parloop_struct_128197->free_gtid_115034;
    int64_t gtid_115038 =
            futhark_mc_segred_stage_1_parloop_struct_128197->free_gtid_115038;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128197->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128197->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122114 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122114",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128197->free_reduce_stage_1_tid_res_arr_mem_122114,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122116 = start;
    float x_122099;
    float x_122100;
    float local_acc_122117 = 0.0F;
    
    for (; iter_122116 < end; iter_122116++) {
        int64_t gtid_115040 = iter_122116;
        int64_t x_122102 = ((int64_t *) mem_119464.mem)[gtid_115038 *
                                                        css_chunk_len_112566 +
                                                        gtid_115040];
        bool cond_122103 = sle64((int64_t) 0, x_122102);
        float defunc_0_f_res_122104;
        
        if (cond_122103) {
            bool y_122105 = slt64(x_122102, n_112520);
            bool bounds_check_122106 = cond_122103 && y_122105;
            bool index_certs_122107;
            
            if (!bounds_check_122106) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_122102,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_122108 =
                  ((float *) mem_119686.mem)[gtid_115034 * n_112520 + x_122102];
            
            defunc_0_f_res_122104 = defunc_0_f_res_t_res_122108;
        } else {
            defunc_0_f_res_122104 = NAN;
        }
        
        bool isnan_res_122109;
        
        isnan_res_122109 = futrts_isnan32(defunc_0_f_res_122104);
        
        float defunc_0_f_res_122110;
        
        if (isnan_res_122109) {
            defunc_0_f_res_122110 = 0.0F;
        } else {
            defunc_0_f_res_122110 = defunc_0_f_res_122104;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_122099 = local_acc_122117;
        }
        // Load next params
        {
            x_122100 = defunc_0_f_res_122110;
        }
        // Red body
        {
            float defunc_1_op_res_122101 = x_122099 + x_122100;
            
            local_acc_122117 = defunc_1_op_res_122101;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122114.mem)[flat_tid_115039] =
        local_acc_122117;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128198_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128198_end -
                 futhark_mc_segred_stage_1_parloop_128198_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128198_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128198_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128198_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128195(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115039 = tid;
    int num_tasks_122113 = info.nsubtasks;
    struct futhark_mc_task_128194 *futhark_mc_task_128194 =
                                  (struct futhark_mc_task_128194 *) args;
    struct futhark_context *ctx = futhark_mc_task_128194->ctx;
    uint64_t futhark_mc_segred_task_128195_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128195_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128194->free_n_112520;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128194->free_css_chunk_len_112566;
    int64_t gtid_115034 = futhark_mc_task_128194->free_gtid_115034;
    int64_t gtid_115038 = futhark_mc_task_128194->free_gtid_115038;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128194->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128194->free_mem_119686,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_122050 =
          *futhark_mc_task_128194->retval_defunc_2_reduce_res_122050;
    size_t reduce_stage_1_tid_res_arr_mem_122114_cached_sizze_128196 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122114 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122114_cached_sizze_128196 <
        (size_t) ((int64_t) 4 * num_tasks_122113)) {
        reduce_stage_1_tid_res_arr_mem_122114 =
            realloc(reduce_stage_1_tid_res_arr_mem_122114, (int64_t) 4 *
                    num_tasks_122113);
        reduce_stage_1_tid_res_arr_mem_122114_cached_sizze_128196 =
            (int64_t) 4 * num_tasks_122113;
    }
    
    int64_t iter_122116;
    struct futhark_mc_segred_stage_1_parloop_struct_128197
    futhark_mc_segred_stage_1_parloop_struct_128197;
    
    futhark_mc_segred_stage_1_parloop_struct_128197.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_gtid_115034 =
        gtid_115034;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_gtid_115038 =
        gtid_115038;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_mem_119464 =
        mem_119464.mem;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_mem_119686 =
        mem_119686.mem;
    futhark_mc_segred_stage_1_parloop_struct_128197.free_reduce_stage_1_tid_res_arr_mem_122114 =
        reduce_stage_1_tid_res_arr_mem_122114;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128198_task;
    
    futhark_mc_segred_stage_1_parloop_128198_task.name =
        "futhark_mc_segred_stage_1_parloop_128198";
    futhark_mc_segred_stage_1_parloop_128198_task.fn =
        futhark_mc_segred_stage_1_parloop_128198;
    futhark_mc_segred_stage_1_parloop_128198_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128197;
    futhark_mc_segred_stage_1_parloop_128198_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128198_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128198_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128198_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128198_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128198_task);
    
    if (futhark_mc_segred_stage_1_parloop_128198_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128198_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128198_total_end -
                 futhark_mc_segred_stage_1_parloop_128198_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128198_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128198_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128198_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122050 = 0.0F;
    }
    
    float x_122118;
    float x_122119;
    
    for (int32_t i_122121 = 0; i_122121 < num_tasks_122113; i_122121++) {
        flat_tid_115039 = i_122121;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122118 = defunc_2_reduce_res_122050;
            }
            // load next params
            {
                x_122119 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122114)[flat_tid_115039];
            }
            // red body
            {
                float defunc_1_op_res_122120 = x_122118 + x_122119;
                
                defunc_2_reduce_res_122050 = defunc_1_op_res_122120;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122114);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128195_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128195_end -
                 futhark_mc_segred_task_128195_start;
        
        ctx->futhark_mc_segred_task_128195_runs[tid]++;
        ctx->futhark_mc_segred_task_128195_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128195_iter[tid] += iterations;
    }
    *futhark_mc_task_128194->retval_defunc_2_reduce_res_122050 =
        defunc_2_reduce_res_122050;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128193(void *args, int64_t start,
                                            int64_t end, int flat_tid_115037,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128192
    *futhark_mc_segmap_parloop_struct_128192 =
    (struct futhark_mc_segmap_parloop_struct_128192 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128192->ctx;
    uint64_t futhark_mc_segmap_parloop_128193_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128193_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128192->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128192->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128192->free_css_chunk_len_112566;
    int64_t gtid_115034 =
            futhark_mc_segmap_parloop_struct_128192->free_gtid_115034;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128192->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128192->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128192->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119689 = {.desc ="mem_119689", .mem =
                                  futhark_mc_segmap_parloop_struct_128192->free_mem_119689,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122098 = start;
    
    for (; iter_122098 < end; iter_122098++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122111 = n_p_112522;
        int64_t gtid_115038 = iter_122098;
        int64_t remnant_122112 = iter_122098 - gtid_115038;
        float x_122049 = ((float *) mem_119486.mem)[gtid_115034 * n_p_112522 +
                                                    gtid_115038];
        float defunc_2_reduce_res_122050;
        int64_t flat_tid_115039 = (int64_t) 0;
        int32_t num_tasks_122113;
        struct futhark_mc_task_128194 futhark_mc_task_128194;
        
        futhark_mc_task_128194.ctx = ctx;
        futhark_mc_task_128194.free_n_112520 = n_112520;
        futhark_mc_task_128194.free_css_chunk_len_112566 = css_chunk_len_112566;
        futhark_mc_task_128194.free_gtid_115034 = gtid_115034;
        futhark_mc_task_128194.free_gtid_115038 = gtid_115038;
        futhark_mc_task_128194.free_mem_119464 = mem_119464.mem;
        futhark_mc_task_128194.free_mem_119686 = mem_119686.mem;
        futhark_mc_task_128194.retval_defunc_2_reduce_res_122050 =
            &defunc_2_reduce_res_122050;
        
        struct scheduler_segop futhark_mc_task_128194_task;
        
        futhark_mc_task_128194_task.args = &futhark_mc_task_128194;
        futhark_mc_task_128194_task.top_level_fn =
            futhark_mc_segred_task_128195;
        futhark_mc_task_128194_task.name = "futhark_mc_segred_task_128195";
        futhark_mc_task_128194_task.iterations = css_chunk_len_112566;
        futhark_mc_task_128194_task.task_time =
            &ctx->futhark_mc_segred_task_128195_total_time;
        futhark_mc_task_128194_task.task_iter =
            &ctx->futhark_mc_segred_task_128195_total_iter;
        futhark_mc_task_128194_task.sched = STATIC;
        futhark_mc_task_128194_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128195_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128194_task);
        
        if (futhark_mc_segred_task_128195_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_1_f_res_122063 = defunc_2_reduce_res_122050 / x_122049;
        
        ((float *) mem_119689.mem)[gtid_115038] = defunc_1_f_res_122063;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128193_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128193_end -
                 futhark_mc_segmap_parloop_128193_start;
        
        ctx->futhark_mc_segmap_parloop_128193_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128193_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128193_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128191(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115037 = tid;
    int num_tasks_122081 = info.nsubtasks;
    struct futhark_mc_task_128187 *futhark_mc_task_128187 =
                                  (struct futhark_mc_task_128187 *) args;
    struct futhark_context *ctx = futhark_mc_task_128187->ctx;
    uint64_t futhark_mc_segmap_nested_task_128191_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128191_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128187->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128187->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128187->free_css_chunk_len_112566;
    int64_t gtid_115034 = futhark_mc_task_128187->free_gtid_115034;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128187->free_mem_119464,
                                  .size =0, .references =NULL};
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128187->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128187->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119689 = {.desc ="mem_119689", .mem =
                                  futhark_mc_task_128187->free_mem_119689,
                                  .size =0, .references =NULL};
    int64_t iter_122098;
    struct futhark_mc_segmap_parloop_struct_128192
    futhark_mc_segmap_parloop_struct_128192;
    
    futhark_mc_segmap_parloop_struct_128192.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128192.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128192.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128192.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128192.free_gtid_115034 = gtid_115034;
    futhark_mc_segmap_parloop_struct_128192.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128192.free_mem_119486 = mem_119486.mem;
    futhark_mc_segmap_parloop_struct_128192.free_mem_119686 = mem_119686.mem;
    futhark_mc_segmap_parloop_struct_128192.free_mem_119689 = mem_119689.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128193_task;
    
    futhark_mc_segmap_parloop_128193_task.name =
        "futhark_mc_segmap_parloop_128193";
    futhark_mc_segmap_parloop_128193_task.fn = futhark_mc_segmap_parloop_128193;
    futhark_mc_segmap_parloop_128193_task.args =
        &futhark_mc_segmap_parloop_struct_128192;
    futhark_mc_segmap_parloop_128193_task.iterations = iterations;
    futhark_mc_segmap_parloop_128193_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128193_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128193_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128193_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128193_task);
    
    if (futhark_mc_segmap_parloop_128193_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128193_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128193_total_end -
                 futhark_mc_segmap_parloop_128193_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128193_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128193_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128193_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128191_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128191_end -
                 futhark_mc_segmap_nested_task_128191_start;
        
        ctx->futhark_mc_segmap_nested_task_128191_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128191_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128191_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128185(void *args, int64_t start,
                                            int64_t end, int flat_tid_115033,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128184
    *futhark_mc_segmap_parloop_struct_128184 =
    (struct futhark_mc_segmap_parloop_struct_128184 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128184->ctx;
    uint64_t futhark_mc_segmap_parloop_128185_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128185_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128184->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128184->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128184->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_segmap_parloop_struct_128184->free_css_chunk_len_112566;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_segmap_parloop_struct_128184->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 =
            futhark_mc_segmap_parloop_struct_128184->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_segmap_parloop_struct_128184->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_segmap_parloop_struct_128184->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_segmap_parloop_struct_128184->free_mem_119708,
                                  .size =0, .references =NULL};
    size_t mem_119689_cached_sizze_128186 = 0;
    char *mem_119689 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122048 = start;
    
    if (mem_119689_cached_sizze_128186 < (size_t) bytes_119465) {
        mem_119689 = realloc(mem_119689, bytes_119465);
        mem_119689_cached_sizze_128186 = bytes_119465;
    }
    for (; iter_122048 < end; iter_122048++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122079 = m_112519;
        int64_t gtid_115034 = iter_122048;
        int64_t remnant_122080 = iter_122048 - gtid_115034;
        int64_t flat_tid_115035 = (int64_t) 0;
        int32_t num_tasks_122081;
        int64_t flat_tid_115037 = (int64_t) 0;
        struct futhark_mc_task_128187 futhark_mc_task_128187;
        
        futhark_mc_task_128187.ctx = ctx;
        futhark_mc_task_128187.free_n_112520 = n_112520;
        futhark_mc_task_128187.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128187.free_css_chunk_len_112566 = css_chunk_len_112566;
        futhark_mc_task_128187.free_gtid_115034 = gtid_115034;
        futhark_mc_task_128187.free_mem_119464 = mem_119464.mem;
        futhark_mc_task_128187.free_mem_119486 = mem_119486.mem;
        futhark_mc_task_128187.free_mem_119686 = mem_119686.mem;
        futhark_mc_task_128187.free_mem_119689 = mem_119689;
        
        struct scheduler_segop futhark_mc_task_128187_task;
        
        futhark_mc_task_128187_task.args = &futhark_mc_task_128187;
        futhark_mc_task_128187_task.top_level_fn =
            futhark_mc_segmap_task_128188;
        futhark_mc_task_128187_task.name = "futhark_mc_segmap_task_128188";
        futhark_mc_task_128187_task.iterations = n_p_112522;
        futhark_mc_task_128187_task.task_time =
            &ctx->futhark_mc_segmap_task_128188_total_time;
        futhark_mc_task_128187_task.task_iter =
            &ctx->futhark_mc_segmap_task_128188_total_iter;
        futhark_mc_task_128187_task.sched = STATIC;
        futhark_mc_task_128187_task.nested_fn =
            futhark_mc_segmap_nested_task_128191;
        
        int futhark_mc_segmap_task_128188_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128187_task);
        
        if (futhark_mc_segmap_task_128188_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119708.mem + gtid_115034 * n_p_112522 * (int64_t) 4,
                mem_119689 + (int64_t) 0, n_p_112522 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119689);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128185_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128185_end -
                 futhark_mc_segmap_parloop_128185_start;
        
        ctx->futhark_mc_segmap_parloop_128185_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128185_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128185_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128183(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115033 = tid;
    int num_tasks_122024 = info.nsubtasks;
    struct futhark_mc_task_128178 *futhark_mc_task_128178 =
                                  (struct futhark_mc_task_128178 *) args;
    struct futhark_context *ctx = futhark_mc_task_128178->ctx;
    uint64_t futhark_mc_segmap_nested_task_128183_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128183_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128178->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128178->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128178->free_n_p_112522;
    int64_t css_chunk_len_112566 =
            futhark_mc_task_128178->free_css_chunk_len_112566;
    struct memblock mem_119464 = {.desc ="mem_119464", .mem =
                                  futhark_mc_task_128178->free_mem_119464,
                                  .size =0, .references =NULL};
    int64_t bytes_119465 = futhark_mc_task_128178->free_bytes_119465;
    struct memblock mem_119486 = {.desc ="mem_119486", .mem =
                                  futhark_mc_task_128178->free_mem_119486,
                                  .size =0, .references =NULL};
    struct memblock mem_119686 = {.desc ="mem_119686", .mem =
                                  futhark_mc_task_128178->free_mem_119686,
                                  .size =0, .references =NULL};
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_task_128178->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t iter_122048;
    struct futhark_mc_segmap_parloop_struct_128184
    futhark_mc_segmap_parloop_struct_128184;
    
    futhark_mc_segmap_parloop_struct_128184.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128184.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128184.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128184.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128184.free_css_chunk_len_112566 =
        css_chunk_len_112566;
    futhark_mc_segmap_parloop_struct_128184.free_mem_119464 = mem_119464.mem;
    futhark_mc_segmap_parloop_struct_128184.free_bytes_119465 = bytes_119465;
    futhark_mc_segmap_parloop_struct_128184.free_mem_119486 = mem_119486.mem;
    futhark_mc_segmap_parloop_struct_128184.free_mem_119686 = mem_119686.mem;
    futhark_mc_segmap_parloop_struct_128184.free_mem_119708 = mem_119708.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128185_task;
    
    futhark_mc_segmap_parloop_128185_task.name =
        "futhark_mc_segmap_parloop_128185";
    futhark_mc_segmap_parloop_128185_task.fn = futhark_mc_segmap_parloop_128185;
    futhark_mc_segmap_parloop_128185_task.args =
        &futhark_mc_segmap_parloop_struct_128184;
    futhark_mc_segmap_parloop_128185_task.iterations = iterations;
    futhark_mc_segmap_parloop_128185_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128185_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128185_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128185_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128185_task);
    
    if (futhark_mc_segmap_parloop_128185_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128185_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128185_total_end -
                 futhark_mc_segmap_parloop_128185_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128185_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128185_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128185_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128183_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128183_end -
                 futhark_mc_segmap_nested_task_128183_start;
        
        ctx->futhark_mc_segmap_nested_task_128183_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128183_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128183_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128199 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_mem_119708;
    int64_t free_bytes_119709;
    char *free_mem_119730;
};
struct futhark_mc_segmap_parloop_struct_128201 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_mem_119708;
    int64_t free_bytes_119709;
    char *free_mem_119730;
};
static int futhark_mc_segmap_parloop_128202(void *args, int64_t start,
                                            int64_t end, int flat_tid_115092,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128201
    *futhark_mc_segmap_parloop_struct_128201 =
    (struct futhark_mc_segmap_parloop_struct_128201 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128201->ctx;
    uint64_t futhark_mc_segmap_parloop_128202_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128202_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128201->free_m_112519;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128201->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128201->free_C_len_112568;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_segmap_parloop_struct_128201->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t bytes_119709 =
            futhark_mc_segmap_parloop_struct_128201->free_bytes_119709;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128201->free_mem_119730,
                                  .size =0, .references =NULL};
    size_t mem_119714_cached_sizze_128203 = 0;
    char *mem_119714 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122123 = start;
    
    if (mem_119714_cached_sizze_128203 < (size_t) bytes_119709) {
        mem_119714 = realloc(mem_119714, bytes_119709);
        mem_119714_cached_sizze_128203 = bytes_119709;
    }
    for (; iter_122123 < end; iter_122123++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122133 = m_112519;
        int64_t gtid_115093 = iter_122123;
        int64_t remnant_122134 = iter_122123 - gtid_115093;
        
        for (int64_t i_122124 = 0; i_122124 < C_len_112568; i_122124++) {
            int64_t i_122126 = smod64(i_122124, n_p_112522);
            bool x_122127 = sle64((int64_t) 0, i_122126);
            bool y_122128 = slt64(i_122126, n_p_112522);
            bool bounds_check_122129 = x_122127 && y_122128;
            bool index_certs_122130;
            
            if (!bounds_check_122129) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_122126,
                              "] out of bounds for array of shape [",
                              (long long) n_p_112522, "].",
                              "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            memmove(mem_119714 + i_122124 * (int64_t) 4, mem_119708.mem +
                    (gtid_115093 * n_p_112522 + i_122126) * (int64_t) 4,
                    (int64_t) 4);
        }
        memmove(mem_119730.mem + gtid_115093 * C_len_112568 * (int64_t) 4,
                mem_119714 + (int64_t) 0, C_len_112568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119714);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128202_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128202_end -
                 futhark_mc_segmap_parloop_128202_start;
        
        ctx->futhark_mc_segmap_parloop_128202_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128202_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128202_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128200(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115092 = tid;
    int num_tasks_122122 = info.nsubtasks;
    struct futhark_mc_task_128199 *futhark_mc_task_128199 =
                                  (struct futhark_mc_task_128199 *) args;
    struct futhark_context *ctx = futhark_mc_task_128199->ctx;
    uint64_t futhark_mc_segmap_task_128200_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128200_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128199->free_m_112519;
    int64_t n_p_112522 = futhark_mc_task_128199->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128199->free_C_len_112568;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_task_128199->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t bytes_119709 = futhark_mc_task_128199->free_bytes_119709;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128199->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t iter_122123;
    struct futhark_mc_segmap_parloop_struct_128201
    futhark_mc_segmap_parloop_struct_128201;
    
    futhark_mc_segmap_parloop_struct_128201.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128201.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128201.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128201.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128201.free_mem_119708 = mem_119708.mem;
    futhark_mc_segmap_parloop_struct_128201.free_bytes_119709 = bytes_119709;
    futhark_mc_segmap_parloop_struct_128201.free_mem_119730 = mem_119730.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128202_task;
    
    futhark_mc_segmap_parloop_128202_task.name =
        "futhark_mc_segmap_parloop_128202";
    futhark_mc_segmap_parloop_128202_task.fn = futhark_mc_segmap_parloop_128202;
    futhark_mc_segmap_parloop_128202_task.args =
        &futhark_mc_segmap_parloop_struct_128201;
    futhark_mc_segmap_parloop_128202_task.iterations = iterations;
    futhark_mc_segmap_parloop_128202_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128202_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128202_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128202_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128202_task);
    
    if (futhark_mc_segmap_parloop_128202_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128202_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128202_total_end -
                 futhark_mc_segmap_parloop_128202_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128202_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128202_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128202_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128200_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128200_end -
                 futhark_mc_segmap_task_128200_start;
        
        ctx->futhark_mc_segmap_task_128200_runs[tid]++;
        ctx->futhark_mc_segmap_task_128200_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128200_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128205 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_mem_119708;
    int64_t free_bytes_119709;
    char *free_mem_119730;
};
struct futhark_mc_task_128208 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    int64_t free_gtid_115095;
    char *free_mem_119708;
    char *free_mem_119711;
};
struct futhark_mc_segmap_parloop_struct_128210 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    int64_t free_gtid_115095;
    char *free_mem_119708;
    char *free_mem_119711;
};
static int futhark_mc_segmap_parloop_128211(void *args, int64_t start,
                                            int64_t end, int flat_tid_115096,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128210
    *futhark_mc_segmap_parloop_struct_128210 =
    (struct futhark_mc_segmap_parloop_struct_128210 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128210->ctx;
    uint64_t futhark_mc_segmap_parloop_128211_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128211_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128210->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128210->free_C_len_112568;
    int64_t gtid_115095 =
            futhark_mc_segmap_parloop_struct_128210->free_gtid_115095;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_segmap_parloop_struct_128210->free_mem_119708,
                                  .size =0, .references =NULL};
    struct memblock mem_119711 = {.desc ="mem_119711", .mem =
                                  futhark_mc_segmap_parloop_struct_128210->free_mem_119711,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122146 = start;
    
    for (; iter_122146 < end; iter_122146++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122147 = C_len_112568;
        int64_t gtid_115097 = iter_122146;
        int64_t remnant_122148 = iter_122146 - gtid_115097;
        int64_t i_122137 = smod64(gtid_115097, n_p_112522);
        bool x_122138 = sle64((int64_t) 0, i_122137);
        bool y_122139 = slt64(i_122137, n_p_112522);
        bool bounds_check_122140 = x_122138 && y_122139;
        bool index_certs_122141;
        
        if (!bounds_check_122140) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_122137,
                                   "] out of bounds for array of shape [",
                                   (long long) n_p_112522, "].",
                                   "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float defunc_0_f_res_122142 = ((float *) mem_119708.mem)[gtid_115095 *
                                                                 n_p_112522 +
                                                                 i_122137];
        
        ((float *) mem_119711.mem)[gtid_115097] = defunc_0_f_res_122142;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128211_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128211_end -
                 futhark_mc_segmap_parloop_128211_start;
        
        ctx->futhark_mc_segmap_parloop_128211_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128211_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128211_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128209(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115096 = tid;
    int num_tasks_122145 = info.nsubtasks;
    struct futhark_mc_task_128208 *futhark_mc_task_128208 =
                                  (struct futhark_mc_task_128208 *) args;
    struct futhark_context *ctx = futhark_mc_task_128208->ctx;
    uint64_t futhark_mc_segmap_task_128209_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128209_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128208->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128208->free_C_len_112568;
    int64_t gtid_115095 = futhark_mc_task_128208->free_gtid_115095;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_task_128208->free_mem_119708,
                                  .size =0, .references =NULL};
    struct memblock mem_119711 = {.desc ="mem_119711", .mem =
                                  futhark_mc_task_128208->free_mem_119711,
                                  .size =0, .references =NULL};
    int64_t iter_122146;
    struct futhark_mc_segmap_parloop_struct_128210
    futhark_mc_segmap_parloop_struct_128210;
    
    futhark_mc_segmap_parloop_struct_128210.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128210.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128210.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128210.free_gtid_115095 = gtid_115095;
    futhark_mc_segmap_parloop_struct_128210.free_mem_119708 = mem_119708.mem;
    futhark_mc_segmap_parloop_struct_128210.free_mem_119711 = mem_119711.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128211_task;
    
    futhark_mc_segmap_parloop_128211_task.name =
        "futhark_mc_segmap_parloop_128211";
    futhark_mc_segmap_parloop_128211_task.fn = futhark_mc_segmap_parloop_128211;
    futhark_mc_segmap_parloop_128211_task.args =
        &futhark_mc_segmap_parloop_struct_128210;
    futhark_mc_segmap_parloop_128211_task.iterations = iterations;
    futhark_mc_segmap_parloop_128211_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128211_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128211_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128211_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128211_task);
    
    if (futhark_mc_segmap_parloop_128211_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128211_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128211_total_end -
                 futhark_mc_segmap_parloop_128211_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128211_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128211_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128211_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128209_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128209_end -
                 futhark_mc_segmap_task_128209_start;
        
        ctx->futhark_mc_segmap_task_128209_runs[tid]++;
        ctx->futhark_mc_segmap_task_128209_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128209_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128206(void *args, int64_t start,
                                            int64_t end, int flat_tid_115094,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128205
    *futhark_mc_segmap_parloop_struct_128205 =
    (struct futhark_mc_segmap_parloop_struct_128205 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128205->ctx;
    uint64_t futhark_mc_segmap_parloop_128206_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128206_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128205->free_m_112519;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128205->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128205->free_C_len_112568;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_segmap_parloop_struct_128205->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t bytes_119709 =
            futhark_mc_segmap_parloop_struct_128205->free_bytes_119709;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128205->free_mem_119730,
                                  .size =0, .references =NULL};
    size_t mem_119711_cached_sizze_128207 = 0;
    char *mem_119711 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122136 = start;
    
    if (mem_119711_cached_sizze_128207 < (size_t) bytes_119709) {
        mem_119711 = realloc(mem_119711, bytes_119709);
        mem_119711_cached_sizze_128207 = bytes_119709;
    }
    for (; iter_122136 < end; iter_122136++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122143 = m_112519;
        int64_t gtid_115095 = iter_122136;
        int64_t remnant_122144 = iter_122136 - gtid_115095;
        int64_t flat_tid_115096 = (int64_t) 0;
        int32_t num_tasks_122145;
        struct futhark_mc_task_128208 futhark_mc_task_128208;
        
        futhark_mc_task_128208.ctx = ctx;
        futhark_mc_task_128208.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128208.free_C_len_112568 = C_len_112568;
        futhark_mc_task_128208.free_gtid_115095 = gtid_115095;
        futhark_mc_task_128208.free_mem_119708 = mem_119708.mem;
        futhark_mc_task_128208.free_mem_119711 = mem_119711;
        
        struct scheduler_segop futhark_mc_task_128208_task;
        
        futhark_mc_task_128208_task.args = &futhark_mc_task_128208;
        futhark_mc_task_128208_task.top_level_fn =
            futhark_mc_segmap_task_128209;
        futhark_mc_task_128208_task.name = "futhark_mc_segmap_task_128209";
        futhark_mc_task_128208_task.iterations = C_len_112568;
        futhark_mc_task_128208_task.task_time =
            &ctx->futhark_mc_segmap_task_128209_total_time;
        futhark_mc_task_128208_task.task_iter =
            &ctx->futhark_mc_segmap_task_128209_total_iter;
        futhark_mc_task_128208_task.sched = STATIC;
        futhark_mc_task_128208_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128209_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128208_task);
        
        if (futhark_mc_segmap_task_128209_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119730.mem + gtid_115095 * C_len_112568 * (int64_t) 4,
                mem_119711 + (int64_t) 0, C_len_112568 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119711);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128206_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128206_end -
                 futhark_mc_segmap_parloop_128206_start;
        
        ctx->futhark_mc_segmap_parloop_128206_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128206_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128206_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128204(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115094 = tid;
    int num_tasks_122122 = info.nsubtasks;
    struct futhark_mc_task_128199 *futhark_mc_task_128199 =
                                  (struct futhark_mc_task_128199 *) args;
    struct futhark_context *ctx = futhark_mc_task_128199->ctx;
    uint64_t futhark_mc_segmap_nested_task_128204_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128204_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128199->free_m_112519;
    int64_t n_p_112522 = futhark_mc_task_128199->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128199->free_C_len_112568;
    struct memblock mem_119708 = {.desc ="mem_119708", .mem =
                                  futhark_mc_task_128199->free_mem_119708,
                                  .size =0, .references =NULL};
    int64_t bytes_119709 = futhark_mc_task_128199->free_bytes_119709;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128199->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t iter_122136;
    struct futhark_mc_segmap_parloop_struct_128205
    futhark_mc_segmap_parloop_struct_128205;
    
    futhark_mc_segmap_parloop_struct_128205.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128205.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128205.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128205.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128205.free_mem_119708 = mem_119708.mem;
    futhark_mc_segmap_parloop_struct_128205.free_bytes_119709 = bytes_119709;
    futhark_mc_segmap_parloop_struct_128205.free_mem_119730 = mem_119730.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128206_task;
    
    futhark_mc_segmap_parloop_128206_task.name =
        "futhark_mc_segmap_parloop_128206";
    futhark_mc_segmap_parloop_128206_task.fn = futhark_mc_segmap_parloop_128206;
    futhark_mc_segmap_parloop_128206_task.args =
        &futhark_mc_segmap_parloop_struct_128205;
    futhark_mc_segmap_parloop_128206_task.iterations = iterations;
    futhark_mc_segmap_parloop_128206_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128206_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128206_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128206_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128206_task);
    
    if (futhark_mc_segmap_parloop_128206_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128206_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128206_total_end -
                 futhark_mc_segmap_parloop_128206_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128206_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128206_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128206_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128204_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128204_end -
                 futhark_mc_segmap_nested_task_128204_start;
        
        ctx->futhark_mc_segmap_nested_task_128204_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128204_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128204_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128212 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_lifted_single_ma_arg_112912;
    int64_t free_lifted_single_ma_arg_112929;
    int64_t free_bytes_119421;
    char *free_mem_119730;
    int64_t free_bytes_119731;
    int64_t free_bytes_119734;
    char *free_mem_119788;
};
struct futhark_mc_segmap_parloop_struct_128214 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_lifted_single_ma_arg_112912;
    int64_t free_lifted_single_ma_arg_112929;
    int64_t free_bytes_119421;
    char *free_mem_119730;
    int64_t free_bytes_119731;
    int64_t free_bytes_119734;
    char *free_mem_119788;
};
static int futhark_mc_segmap_parloop_128215(void *args, int64_t start,
                                            int64_t end, int flat_tid_115107,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128214
    *futhark_mc_segmap_parloop_struct_128214 =
    (struct futhark_mc_segmap_parloop_struct_128214 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128214->ctx;
    uint64_t futhark_mc_segmap_parloop_128215_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128215_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128214->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128214->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128214->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_segmap_parloop_struct_128214->free_i64_res_112562;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128214->free_C_len_112568;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_segmap_parloop_struct_128214->free_lifted_single_ma_arg_112912;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_segmap_parloop_struct_128214->free_lifted_single_ma_arg_112929;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128214->free_bytes_119421;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128214->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t bytes_119731 =
            futhark_mc_segmap_parloop_struct_128214->free_bytes_119731;
    int64_t bytes_119734 =
            futhark_mc_segmap_parloop_struct_128214->free_bytes_119734;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128214->free_mem_119788,
                                  .size =0, .references =NULL};
    size_t mem_119742_cached_sizze_128216 = 0;
    char *mem_119742 = NULL;
    size_t mem_119757_cached_sizze_128217 = 0;
    char *mem_119757 = NULL;
    size_t mem_119772_cached_sizze_128218 = 0;
    char *mem_119772 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122150 = start;
    
    if (mem_119742_cached_sizze_128216 < (size_t) bytes_119731) {
        mem_119742 = realloc(mem_119742, bytes_119731);
        mem_119742_cached_sizze_128216 = bytes_119731;
    }
    if (mem_119757_cached_sizze_128217 < (size_t) bytes_119734) {
        mem_119757 = realloc(mem_119757, bytes_119734);
        mem_119757_cached_sizze_128217 = bytes_119734;
    }
    if (mem_119772_cached_sizze_128218 < (size_t) bytes_119421) {
        mem_119772 = realloc(mem_119772, bytes_119421);
        mem_119772_cached_sizze_128218 = bytes_119421;
    }
    for (; iter_122150 < end; iter_122150++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122233 = m_112519;
        int64_t gtid_115108 = iter_122150;
        int64_t remnant_122234 = iter_122150 - gtid_115108;
        float defunc_2_reduce_res_113027;
        float redout_122152 = 0.0F;
        
        for (int64_t i_122151 = 0; i_122151 < n_p_112522; i_122151++) {
            float x_122153 = ((float *) mem_119730.mem)[gtid_115108 *
                                                        C_len_112568 +
                                                        i_122151];
            float defunc_1_op_res_122154 = x_122153 + redout_122152;
            float redout_tmp_122235 = defunc_1_op_res_122154;
            
            redout_122152 = redout_tmp_122235;
        }
        defunc_2_reduce_res_113027 = redout_122152;
        
        float discard_118821;
        float scanacc_122156 = 0.0F;
        
        for (int64_t i_122155 = 0; i_122155 < lifted_single_ma_arg_112912;
             i_122155++) {
            bool cond_122158 = i_122155 == (int64_t) 0;
            float defunc_0_f_res_122159;
            
            if (cond_122158) {
                float defunc_0_f_res_t_res_122160 = defunc_2_reduce_res_113027 /
                      i64_res_112562;
                
                defunc_0_f_res_122159 = defunc_0_f_res_t_res_122160;
            } else {
                int64_t x_122161 = add64(n_p_112522, i_122155);
                int64_t i_122162 = sub64(x_122161, (int64_t) 1);
                bool x_122163 = sle64((int64_t) 0, i_122162);
                bool y_122164 = slt64(i_122162, C_len_112568);
                bool bounds_check_122165 = x_122163 && y_122164;
                bool index_certs_122166;
                
                if (!bounds_check_122165) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122162,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122167 = ((float *) mem_119730.mem)[gtid_115108 *
                                                            C_len_112568 +
                                                            i_122162];
                int64_t i_122168 = sub64(i_122155, (int64_t) 1);
                bool x_122169 = sle64((int64_t) 0, i_122168);
                bool y_122170 = slt64(i_122168, C_len_112568);
                bool bounds_check_122171 = x_122169 && y_122170;
                bool index_certs_122172;
                
                if (!bounds_check_122171) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122168,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122173 = ((float *) mem_119730.mem)[gtid_115108 *
                                                            C_len_112568 +
                                                            i_122168];
                float x_122174 = x_122167 - y_122173;
                float defunc_0_f_res_f_res_122175 = x_122174 / i64_res_112562;
                
                defunc_0_f_res_122159 = defunc_0_f_res_f_res_122175;
            }
            
            float defunc_1_op_res_122176 = defunc_0_f_res_122159 +
                  scanacc_122156;
            
            ((float *) mem_119742)[i_122155] = defunc_1_op_res_122176;
            
            float scanacc_tmp_122236 = defunc_1_op_res_122176;
            
            scanacc_122156 = scanacc_tmp_122236;
        }
        discard_118821 = scanacc_122156;
        
        float defunc_2_reduce_res_113056;
        float redout_122179 = 0.0F;
        
        for (int64_t i_122178 = 0; i_122178 < n_p_112522; i_122178++) {
            float x_122180 = ((float *) mem_119742)[i_122178];
            float defunc_1_op_res_122181 = x_122180 + redout_122179;
            float redout_tmp_122238 = defunc_1_op_res_122181;
            
            redout_122179 = redout_tmp_122238;
        }
        defunc_2_reduce_res_113056 = redout_122179;
        
        float discard_118829;
        float scanacc_122183 = 0.0F;
        
        for (int64_t i_122182 = 0; i_122182 < lifted_single_ma_arg_112929;
             i_122182++) {
            bool cond_122185 = i_122182 == (int64_t) 0;
            float defunc_0_f_res_122186;
            
            if (cond_122185) {
                float defunc_0_f_res_t_res_122187 = defunc_2_reduce_res_113056 /
                      i64_res_112562;
                
                defunc_0_f_res_122186 = defunc_0_f_res_t_res_122187;
            } else {
                int64_t x_122188 = add64(n_p_112522, i_122182);
                int64_t i_122189 = sub64(x_122188, (int64_t) 1);
                bool x_122190 = sle64((int64_t) 0, i_122189);
                bool y_122191 = slt64(i_122189, lifted_single_ma_arg_112912);
                bool bounds_check_122192 = x_122190 && y_122191;
                bool index_certs_122193;
                
                if (!bounds_check_122192) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122189,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122194 = ((float *) mem_119742)[i_122189];
                int64_t i_122195 = sub64(i_122182, (int64_t) 1);
                bool x_122196 = sle64((int64_t) 0, i_122195);
                bool y_122197 = slt64(i_122195, lifted_single_ma_arg_112912);
                bool bounds_check_122198 = x_122196 && y_122197;
                bool index_certs_122199;
                
                if (!bounds_check_122198) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122195,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122200 = ((float *) mem_119742)[i_122195];
                float x_122201 = x_122194 - y_122200;
                float defunc_0_f_res_f_res_122202 = x_122201 / i64_res_112562;
                
                defunc_0_f_res_122186 = defunc_0_f_res_f_res_122202;
            }
            
            float defunc_1_op_res_122203 = defunc_0_f_res_122186 +
                  scanacc_122183;
            
            ((float *) mem_119757)[i_122182] = defunc_1_op_res_122203;
            
            float scanacc_tmp_122239 = defunc_1_op_res_122203;
            
            scanacc_122183 = scanacc_tmp_122239;
        }
        discard_118829 = scanacc_122183;
        
        float defunc_2_reduce_res_113085;
        float redout_122206 = 0.0F;
        
        for (int32_t i_122205 = 0; i_122205 < 3; i_122205++) {
            int64_t i_122207 = sext_i32_i64(i_122205);
            float x_122208 = ((float *) mem_119757)[i_122207];
            float defunc_1_op_res_122209 = x_122208 + redout_122206;
            float redout_tmp_122241 = defunc_1_op_res_122209;
            
            redout_122206 = redout_tmp_122241;
        }
        defunc_2_reduce_res_113085 = redout_122206;
        
        float discard_118837;
        float scanacc_122211 = 0.0F;
        
        for (int64_t i_122210 = 0; i_122210 < n_112520; i_122210++) {
            bool cond_122213 = i_122210 == (int64_t) 0;
            float defunc_0_f_res_122214;
            
            if (cond_122213) {
                float defunc_0_f_res_t_res_122215 = defunc_2_reduce_res_113085 /
                      3.0F;
                
                defunc_0_f_res_122214 = defunc_0_f_res_t_res_122215;
            } else {
                int64_t x_122216 = add64((int64_t) 3, i_122210);
                int64_t i_122217 = sub64(x_122216, (int64_t) 1);
                bool x_122218 = sle64((int64_t) 0, i_122217);
                bool y_122219 = slt64(i_122217, lifted_single_ma_arg_112929);
                bool bounds_check_122220 = x_122218 && y_122219;
                bool index_certs_122221;
                
                if (!bounds_check_122220) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122217,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122222 = ((float *) mem_119757)[i_122217];
                int64_t i_122223 = sub64(i_122210, (int64_t) 1);
                bool x_122224 = sle64((int64_t) 0, i_122223);
                bool y_122225 = slt64(i_122223, lifted_single_ma_arg_112929);
                bool bounds_check_122226 = x_122224 && y_122225;
                bool index_certs_122227;
                
                if (!bounds_check_122226) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122223,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122228 = ((float *) mem_119757)[i_122223];
                float x_122229 = x_122222 - y_122228;
                float defunc_0_f_res_f_res_122230 = x_122229 / 3.0F;
                
                defunc_0_f_res_122214 = defunc_0_f_res_f_res_122230;
            }
            
            float defunc_1_op_res_122231 = defunc_0_f_res_122214 +
                  scanacc_122211;
            
            ((float *) mem_119772)[i_122210] = defunc_1_op_res_122231;
            
            float scanacc_tmp_122242 = defunc_1_op_res_122231;
            
            scanacc_122211 = scanacc_tmp_122242;
        }
        discard_118837 = scanacc_122211;
        memmove(mem_119788.mem + gtid_115108 * n_112520 * (int64_t) 4,
                mem_119772 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119742);
    free(mem_119757);
    free(mem_119772);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128215_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128215_end -
                 futhark_mc_segmap_parloop_128215_start;
        
        ctx->futhark_mc_segmap_parloop_128215_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128215_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128215_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128213(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115107 = tid;
    int num_tasks_122149 = info.nsubtasks;
    struct futhark_mc_task_128212 *futhark_mc_task_128212 =
                                  (struct futhark_mc_task_128212 *) args;
    struct futhark_context *ctx = futhark_mc_task_128212->ctx;
    uint64_t futhark_mc_segmap_task_128213_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128213_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128212->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128212->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128212->free_n_p_112522;
    float i64_res_112562 = futhark_mc_task_128212->free_i64_res_112562;
    int64_t C_len_112568 = futhark_mc_task_128212->free_C_len_112568;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_task_128212->free_lifted_single_ma_arg_112912;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_task_128212->free_lifted_single_ma_arg_112929;
    int64_t bytes_119421 = futhark_mc_task_128212->free_bytes_119421;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128212->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t bytes_119731 = futhark_mc_task_128212->free_bytes_119731;
    int64_t bytes_119734 = futhark_mc_task_128212->free_bytes_119734;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128212->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t iter_122150;
    struct futhark_mc_segmap_parloop_struct_128214
    futhark_mc_segmap_parloop_struct_128214;
    
    futhark_mc_segmap_parloop_struct_128214.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128214.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128214.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128214.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128214.free_i64_res_112562 =
        i64_res_112562;
    futhark_mc_segmap_parloop_struct_128214.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128214.free_lifted_single_ma_arg_112912 =
        lifted_single_ma_arg_112912;
    futhark_mc_segmap_parloop_struct_128214.free_lifted_single_ma_arg_112929 =
        lifted_single_ma_arg_112929;
    futhark_mc_segmap_parloop_struct_128214.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128214.free_mem_119730 = mem_119730.mem;
    futhark_mc_segmap_parloop_struct_128214.free_bytes_119731 = bytes_119731;
    futhark_mc_segmap_parloop_struct_128214.free_bytes_119734 = bytes_119734;
    futhark_mc_segmap_parloop_struct_128214.free_mem_119788 = mem_119788.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128215_task;
    
    futhark_mc_segmap_parloop_128215_task.name =
        "futhark_mc_segmap_parloop_128215";
    futhark_mc_segmap_parloop_128215_task.fn = futhark_mc_segmap_parloop_128215;
    futhark_mc_segmap_parloop_128215_task.args =
        &futhark_mc_segmap_parloop_struct_128214;
    futhark_mc_segmap_parloop_128215_task.iterations = iterations;
    futhark_mc_segmap_parloop_128215_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128215_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128215_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128215_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128215_task);
    
    if (futhark_mc_segmap_parloop_128215_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128215_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128215_total_end -
                 futhark_mc_segmap_parloop_128215_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128215_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128215_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128215_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128213_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128213_end -
                 futhark_mc_segmap_task_128213_start;
        
        ctx->futhark_mc_segmap_task_128213_runs[tid]++;
        ctx->futhark_mc_segmap_task_128213_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128213_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128220 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_lifted_single_ma_arg_112912;
    int64_t free_lifted_single_ma_arg_112929;
    int64_t free_bytes_119421;
    char *free_mem_119730;
    int64_t free_bytes_119731;
    int64_t free_bytes_119734;
    char *free_mem_119788;
};
struct futhark_mc_task_128225 {
    struct futhark_context *ctx;
    int64_t free_C_len_112568;
    int64_t free_gtid_115110;
    char *free_mem_119730;
    float *retval_defunc_2_reduce_res_115125;
};
struct futhark_mc_segred_stage_1_parloop_struct_128228 {
    struct futhark_context *ctx;
    int64_t free_C_len_112568;
    int64_t free_gtid_115110;
    char *free_mem_119730;
    char *free_reduce_stage_1_tid_res_arr_mem_122323;
};
static int futhark_mc_segred_stage_1_parloop_128229(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115111,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128228
    *futhark_mc_segred_stage_1_parloop_struct_128228 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128228 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128228->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128229_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128229_start = get_wall_time();
    
    int64_t C_len_112568 =
            futhark_mc_segred_stage_1_parloop_struct_128228->free_C_len_112568;
    int64_t gtid_115110 =
            futhark_mc_segred_stage_1_parloop_struct_128228->free_gtid_115110;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128228->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122323 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122323",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128228->free_reduce_stage_1_tid_res_arr_mem_122323,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122325 = start;
    float x_122245;
    float x_122246;
    float local_acc_122326 = 0.0F;
    
    for (; iter_122325 < end; iter_122325++) {
        int64_t gtid_115112 = iter_122325;
        float x_122248 = ((float *) mem_119730.mem)[gtid_115110 * C_len_112568 +
                                                    gtid_115112];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122245 = local_acc_122326;
        }
        // Load next params
        {
            x_122246 = x_122248;
        }
        // Red body
        {
            float defunc_1_op_res_122247 = x_122245 + x_122246;
            
            local_acc_122326 = defunc_1_op_res_122247;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122323.mem)[flat_tid_115111] =
        local_acc_122326;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128229_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128229_end -
                 futhark_mc_segred_stage_1_parloop_128229_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128229_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128229_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128229_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128226(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115111 = tid;
    int num_tasks_122322 = info.nsubtasks;
    struct futhark_mc_task_128225 *futhark_mc_task_128225 =
                                  (struct futhark_mc_task_128225 *) args;
    struct futhark_context *ctx = futhark_mc_task_128225->ctx;
    uint64_t futhark_mc_segred_task_128226_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128226_start = get_wall_time();
    
    int64_t C_len_112568 = futhark_mc_task_128225->free_C_len_112568;
    int64_t gtid_115110 = futhark_mc_task_128225->free_gtid_115110;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128225->free_mem_119730,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115125 =
          *futhark_mc_task_128225->retval_defunc_2_reduce_res_115125;
    size_t reduce_stage_1_tid_res_arr_mem_122323_cached_sizze_128227 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122323 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122323_cached_sizze_128227 <
        (size_t) ((int64_t) 4 * num_tasks_122322)) {
        reduce_stage_1_tid_res_arr_mem_122323 =
            realloc(reduce_stage_1_tid_res_arr_mem_122323, (int64_t) 4 *
                    num_tasks_122322);
        reduce_stage_1_tid_res_arr_mem_122323_cached_sizze_128227 =
            (int64_t) 4 * num_tasks_122322;
    }
    
    int64_t iter_122325;
    struct futhark_mc_segred_stage_1_parloop_struct_128228
    futhark_mc_segred_stage_1_parloop_struct_128228;
    
    futhark_mc_segred_stage_1_parloop_struct_128228.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128228.free_C_len_112568 =
        C_len_112568;
    futhark_mc_segred_stage_1_parloop_struct_128228.free_gtid_115110 =
        gtid_115110;
    futhark_mc_segred_stage_1_parloop_struct_128228.free_mem_119730 =
        mem_119730.mem;
    futhark_mc_segred_stage_1_parloop_struct_128228.free_reduce_stage_1_tid_res_arr_mem_122323 =
        reduce_stage_1_tid_res_arr_mem_122323;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128229_task;
    
    futhark_mc_segred_stage_1_parloop_128229_task.name =
        "futhark_mc_segred_stage_1_parloop_128229";
    futhark_mc_segred_stage_1_parloop_128229_task.fn =
        futhark_mc_segred_stage_1_parloop_128229;
    futhark_mc_segred_stage_1_parloop_128229_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128228;
    futhark_mc_segred_stage_1_parloop_128229_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128229_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128229_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128229_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128229_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128229_task);
    
    if (futhark_mc_segred_stage_1_parloop_128229_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128229_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128229_total_end -
                 futhark_mc_segred_stage_1_parloop_128229_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128229_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128229_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128229_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115125 = 0.0F;
    }
    
    float x_122327;
    float x_122328;
    
    for (int32_t i_122330 = 0; i_122330 < num_tasks_122322; i_122330++) {
        flat_tid_115111 = i_122330;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122327 = defunc_2_reduce_res_115125;
            }
            // load next params
            {
                x_122328 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122323)[flat_tid_115111];
            }
            // red body
            {
                float defunc_1_op_res_122329 = x_122327 + x_122328;
                
                defunc_2_reduce_res_115125 = defunc_1_op_res_122329;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122323);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128226_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128226_end -
                 futhark_mc_segred_task_128226_start;
        
        ctx->futhark_mc_segred_task_128226_runs[tid]++;
        ctx->futhark_mc_segred_task_128226_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128226_iter[tid] += iterations;
    }
    *futhark_mc_task_128225->retval_defunc_2_reduce_res_115125 =
        defunc_2_reduce_res_115125;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128230 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_lifted_single_ma_arg_112912;
    int64_t free_gtid_115110;
    float free_defunc_2_reduce_res_115125;
    char *free_mem_119730;
    char *free_mem_119733;
};
struct futhark_mc_scan_stage_1_parloop_struct_128233 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_gtid_115110;
    float free_defunc_2_reduce_res_115125;
    char *free_mem_119730;
    char *free_mem_119733;
};
static int futhark_mc_scan_stage_1_parloop_128234(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115113, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128233
    *futhark_mc_scan_stage_1_parloop_struct_128233 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128233 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128233->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128234_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128234_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_scan_stage_1_parloop_struct_128233->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_scan_stage_1_parloop_struct_128233->free_i64_res_112562;
    int64_t C_len_112568 =
            futhark_mc_scan_stage_1_parloop_struct_128233->free_C_len_112568;
    int64_t gtid_115110 =
            futhark_mc_scan_stage_1_parloop_struct_128233->free_gtid_115110;
    float defunc_2_reduce_res_115125 =
          futhark_mc_scan_stage_1_parloop_struct_128233->free_defunc_2_reduce_res_115125;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128233->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128233->free_mem_119733,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122332 = start;
    float x_122249;
    float x_122250;
    
    x_122249 = 0.0F;
    for (; iter_122332 < end; iter_122332++) {
        int64_t gtid_115114 = iter_122332;
        
        // stage 1 scan body
        {
            bool cond_122252 = gtid_115114 == (int64_t) 0;
            float defunc_0_f_res_122253;
            
            if (cond_122252) {
                float defunc_0_f_res_t_res_122254 = defunc_2_reduce_res_115125 /
                      i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_t_res_122254;
            } else {
                int64_t x_122255 = add64(n_p_112522, gtid_115114);
                int64_t i_122256 = sub64(x_122255, (int64_t) 1);
                bool x_122257 = sle64((int64_t) 0, i_122256);
                bool y_122258 = slt64(i_122256, C_len_112568);
                bool bounds_check_122259 = x_122257 && y_122258;
                bool index_certs_122260;
                
                if (!bounds_check_122259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122261 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122256];
                int64_t i_122262 = sub64(gtid_115114, (int64_t) 1);
                bool x_122263 = sle64((int64_t) 0, i_122262);
                bool y_122264 = slt64(i_122262, C_len_112568);
                bool bounds_check_122265 = x_122263 && y_122264;
                bool index_certs_122266;
                
                if (!bounds_check_122265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122267 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122262];
                float x_122268 = x_122261 - y_122267;
                float defunc_0_f_res_f_res_122269 = x_122268 / i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_f_res_122269;
            }
            // write mapped values results to memory
            { }
            x_122249 = x_122249;
            // Read next values
            {
                x_122250 = defunc_0_f_res_122253;
            }
            
            float defunc_1_op_res_122251 = x_122249 + x_122250;
            
            ((float *) mem_119733.mem)[gtid_115114] = defunc_1_op_res_122251;
            x_122249 = defunc_1_op_res_122251;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128234_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128234_end -
                 futhark_mc_scan_stage_1_parloop_128234_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128234_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128234_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128234_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128235 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_C_len_112568;
    int64_t free_gtid_115110;
    float free_defunc_2_reduce_res_115125;
    char *free_mem_119730;
    char *free_mem_119733;
};
static int futhark_mc_scan_stage_3_parloop_128236(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115113, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128235
    *futhark_mc_scan_stage_3_parloop_struct_128235 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128235 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128235->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128236_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128236_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_scan_stage_3_parloop_struct_128235->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_scan_stage_3_parloop_struct_128235->free_i64_res_112562;
    int64_t C_len_112568 =
            futhark_mc_scan_stage_3_parloop_struct_128235->free_C_len_112568;
    int64_t gtid_115110 =
            futhark_mc_scan_stage_3_parloop_struct_128235->free_gtid_115110;
    float defunc_2_reduce_res_115125 =
          futhark_mc_scan_stage_3_parloop_struct_128235->free_defunc_2_reduce_res_115125;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128235->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128235->free_mem_119733,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122344 = start;
    float x_122341;
    float x_122342;
    
    if (iter_122344 == (int64_t) 0) {
        x_122341 = 0.0F;
    } else {
        x_122341 = ((float *) mem_119733.mem)[iter_122344 - (int64_t) 1];
    }
    for (; iter_122344 < end; iter_122344++) {
        int64_t gtid_115114 = iter_122344;
        
        // stage 3 scan body
        {
            bool cond_122252 = gtid_115114 == (int64_t) 0;
            float defunc_0_f_res_122253;
            
            if (cond_122252) {
                float defunc_0_f_res_t_res_122254 = defunc_2_reduce_res_115125 /
                      i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_t_res_122254;
            } else {
                int64_t x_122255 = add64(n_p_112522, gtid_115114);
                int64_t i_122256 = sub64(x_122255, (int64_t) 1);
                bool x_122257 = sle64((int64_t) 0, i_122256);
                bool y_122258 = slt64(i_122256, C_len_112568);
                bool bounds_check_122259 = x_122257 && y_122258;
                bool index_certs_122260;
                
                if (!bounds_check_122259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122261 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122256];
                int64_t i_122262 = sub64(gtid_115114, (int64_t) 1);
                bool x_122263 = sle64((int64_t) 0, i_122262);
                bool y_122264 = slt64(i_122262, C_len_112568);
                bool bounds_check_122265 = x_122263 && y_122264;
                bool index_certs_122266;
                
                if (!bounds_check_122265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122267 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122262];
                float x_122268 = x_122261 - y_122267;
                float defunc_0_f_res_f_res_122269 = x_122268 / i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_f_res_122269;
            }
            x_122341 = x_122341;
            x_122342 = defunc_0_f_res_122253;
            
            float defunc_1_op_res_122343 = x_122341 + x_122342;
            
            ((float *) mem_119733.mem)[gtid_115114] = defunc_1_op_res_122343;
            x_122341 = defunc_1_op_res_122343;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128236_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128236_end -
                 futhark_mc_scan_stage_3_parloop_128236_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128236_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128236_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128236_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128231(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115113 = tid;
    int num_tasks_122331 = info.nsubtasks;
    struct futhark_mc_task_128230 *futhark_mc_task_128230 =
                                  (struct futhark_mc_task_128230 *) args;
    struct futhark_context *ctx = futhark_mc_task_128230->ctx;
    uint64_t futhark_mc_segscan_task_128231_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128231_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128230->free_n_p_112522;
    float i64_res_112562 = futhark_mc_task_128230->free_i64_res_112562;
    int64_t C_len_112568 = futhark_mc_task_128230->free_C_len_112568;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_task_128230->free_lifted_single_ma_arg_112912;
    int64_t gtid_115110 = futhark_mc_task_128230->free_gtid_115110;
    float defunc_2_reduce_res_115125 =
          futhark_mc_task_128230->free_defunc_2_reduce_res_115125;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128230->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_task_128230->free_mem_119733,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122338_cached_sizze_128232 = 0;
    char *scan_stage_2_accum_mem_122338 = NULL;
    int64_t iter_122332;
    struct futhark_mc_scan_stage_1_parloop_struct_128233
    futhark_mc_scan_stage_1_parloop_struct_128233;
    
    futhark_mc_scan_stage_1_parloop_struct_128233.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_n_p_112522 = n_p_112522;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_i64_res_112562 =
        i64_res_112562;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_C_len_112568 =
        C_len_112568;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_gtid_115110 =
        gtid_115110;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_defunc_2_reduce_res_115125 =
        defunc_2_reduce_res_115125;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_mem_119730 =
        mem_119730.mem;
    futhark_mc_scan_stage_1_parloop_struct_128233.free_mem_119733 =
        mem_119733.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128234_task;
    
    futhark_mc_scan_stage_1_parloop_128234_task.name =
        "futhark_mc_scan_stage_1_parloop_128234";
    futhark_mc_scan_stage_1_parloop_128234_task.fn =
        futhark_mc_scan_stage_1_parloop_128234;
    futhark_mc_scan_stage_1_parloop_128234_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128233;
    futhark_mc_scan_stage_1_parloop_128234_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128234_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128234_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128234_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128234_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128234_task);
    
    if (futhark_mc_scan_stage_1_parloop_128234_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128234_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128234_total_end -
                 futhark_mc_scan_stage_1_parloop_128234_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128234_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128234_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128234_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122331)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122333;
        float x_122334;
        int64_t offset_122336 = (int64_t) 0;
        int64_t offset_index_122337 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122338_cached_sizze_128232 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122338 =
                realloc(scan_stage_2_accum_mem_122338, (int64_t) 4);
            scan_stage_2_accum_mem_122338_cached_sizze_128232 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122338)[(int64_t) 0] = 0.0F;
        for (int32_t i_122340 = 0; i_122340 < num_tasks_122331 - 1;
             i_122340++) {
            offset_122336 = squot64(lifted_single_ma_arg_112912,
                                    sext_i32_i64(num_tasks_122331));
            if (slt64(sext_i32_i64(i_122340),
                      srem64(lifted_single_ma_arg_112912,
                             sext_i32_i64(num_tasks_122331)))) {
                offset_122336 += (int64_t) 1;
            }
            offset_index_122337 += offset_122336;
            
            int64_t gtid_115114 = offset_index_122337;
            bool cond_122252 = gtid_115114 == (int64_t) 0;
            float defunc_0_f_res_122253;
            
            if (cond_122252) {
                float defunc_0_f_res_t_res_122254 = defunc_2_reduce_res_115125 /
                      i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_t_res_122254;
            } else {
                int64_t x_122255 = add64(n_p_112522, gtid_115114);
                int64_t i_122256 = sub64(x_122255, (int64_t) 1);
                bool x_122257 = sle64((int64_t) 0, i_122256);
                bool y_122258 = slt64(i_122256, C_len_112568);
                bool bounds_check_122259 = x_122257 && y_122258;
                bool index_certs_122260;
                
                if (!bounds_check_122259) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122256,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122261 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122256];
                int64_t i_122262 = sub64(gtid_115114, (int64_t) 1);
                bool x_122263 = sle64((int64_t) 0, i_122262);
                bool y_122264 = slt64(i_122262, C_len_112568);
                bool bounds_check_122265 = x_122263 && y_122264;
                bool index_certs_122266;
                
                if (!bounds_check_122265) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122262,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112568, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122267 = ((float *) mem_119730.mem)[gtid_115110 *
                                                            C_len_112568 +
                                                            i_122262];
                float x_122268 = x_122261 - y_122267;
                float defunc_0_f_res_f_res_122269 = x_122268 / i64_res_112562;
                
                defunc_0_f_res_122253 = defunc_0_f_res_f_res_122269;
            }
            // Read carry in
            {
                x_122333 =
                    ((float *) scan_stage_2_accum_mem_122338)[(int64_t) 0];
            }
            // Read next values
            {
                x_122334 = ((float *) mem_119733.mem)[offset_index_122337 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122335 = x_122333 + x_122334;
            
            ((float *) mem_119733.mem)[offset_index_122337 - (int64_t) 1] =
                defunc_1_op_res_122335;
            ((float *) scan_stage_2_accum_mem_122338)[(int64_t) 0] =
                defunc_1_op_res_122335;
        }
        
        int64_t iter_122344 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128235
        futhark_mc_scan_stage_3_parloop_struct_128235;
        
        futhark_mc_scan_stage_3_parloop_struct_128235.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_n_p_112522 =
            n_p_112522;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_i64_res_112562 =
            i64_res_112562;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_C_len_112568 =
            C_len_112568;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_gtid_115110 =
            gtid_115110;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_defunc_2_reduce_res_115125 =
            defunc_2_reduce_res_115125;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_mem_119730 =
            mem_119730.mem;
        futhark_mc_scan_stage_3_parloop_struct_128235.free_mem_119733 =
            mem_119733.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128236_task;
        
        futhark_mc_scan_stage_3_parloop_128236_task.name =
            "futhark_mc_scan_stage_3_parloop_128236";
        futhark_mc_scan_stage_3_parloop_128236_task.fn =
            futhark_mc_scan_stage_3_parloop_128236;
        futhark_mc_scan_stage_3_parloop_128236_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128235;
        futhark_mc_scan_stage_3_parloop_128236_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128236_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128236_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128236_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128236_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128236_task);
        
        if (futhark_mc_scan_stage_3_parloop_128236_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128236_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128236_total_end -
                     futhark_mc_scan_stage_3_parloop_128236_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128236_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128236_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128236_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122338);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128231_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128231_end -
                 futhark_mc_segscan_task_128231_start;
        
        ctx->futhark_mc_segscan_task_128231_runs[tid]++;
        ctx->futhark_mc_segscan_task_128231_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128231_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128237 {
    struct futhark_context *ctx;
    char *free_mem_119733;
    float *retval_defunc_2_reduce_res_115154;
};
struct futhark_mc_segred_stage_1_parloop_struct_128240 {
    struct futhark_context *ctx;
    char *free_mem_119733;
    char *free_reduce_stage_1_tid_res_arr_mem_122346;
};
static int futhark_mc_segred_stage_1_parloop_128241(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115115,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128240
    *futhark_mc_segred_stage_1_parloop_struct_128240 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128240 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128240->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128241_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128241_start = get_wall_time();
    
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128240->free_mem_119733,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122346 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122346",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128240->free_reduce_stage_1_tid_res_arr_mem_122346,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122348 = start;
    float x_122270;
    float x_122271;
    float local_acc_122349 = 0.0F;
    
    for (; iter_122348 < end; iter_122348++) {
        int64_t gtid_115116 = iter_122348;
        float x_122273 = ((float *) mem_119733.mem)[gtid_115116];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122270 = local_acc_122349;
        }
        // Load next params
        {
            x_122271 = x_122273;
        }
        // Red body
        {
            float defunc_1_op_res_122272 = x_122270 + x_122271;
            
            local_acc_122349 = defunc_1_op_res_122272;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122346.mem)[flat_tid_115115] =
        local_acc_122349;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128241_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128241_end -
                 futhark_mc_segred_stage_1_parloop_128241_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128241_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128241_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128241_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128238(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115115 = tid;
    int num_tasks_122345 = info.nsubtasks;
    struct futhark_mc_task_128237 *futhark_mc_task_128237 =
                                  (struct futhark_mc_task_128237 *) args;
    struct futhark_context *ctx = futhark_mc_task_128237->ctx;
    uint64_t futhark_mc_segred_task_128238_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128238_start = get_wall_time();
    
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_task_128237->free_mem_119733,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115154 =
          *futhark_mc_task_128237->retval_defunc_2_reduce_res_115154;
    size_t reduce_stage_1_tid_res_arr_mem_122346_cached_sizze_128239 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122346 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122346_cached_sizze_128239 <
        (size_t) ((int64_t) 4 * num_tasks_122345)) {
        reduce_stage_1_tid_res_arr_mem_122346 =
            realloc(reduce_stage_1_tid_res_arr_mem_122346, (int64_t) 4 *
                    num_tasks_122345);
        reduce_stage_1_tid_res_arr_mem_122346_cached_sizze_128239 =
            (int64_t) 4 * num_tasks_122345;
    }
    
    int64_t iter_122348;
    struct futhark_mc_segred_stage_1_parloop_struct_128240
    futhark_mc_segred_stage_1_parloop_struct_128240;
    
    futhark_mc_segred_stage_1_parloop_struct_128240.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128240.free_mem_119733 =
        mem_119733.mem;
    futhark_mc_segred_stage_1_parloop_struct_128240.free_reduce_stage_1_tid_res_arr_mem_122346 =
        reduce_stage_1_tid_res_arr_mem_122346;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128241_task;
    
    futhark_mc_segred_stage_1_parloop_128241_task.name =
        "futhark_mc_segred_stage_1_parloop_128241";
    futhark_mc_segred_stage_1_parloop_128241_task.fn =
        futhark_mc_segred_stage_1_parloop_128241;
    futhark_mc_segred_stage_1_parloop_128241_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128240;
    futhark_mc_segred_stage_1_parloop_128241_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128241_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128241_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128241_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128241_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128241_task);
    
    if (futhark_mc_segred_stage_1_parloop_128241_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128241_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128241_total_end -
                 futhark_mc_segred_stage_1_parloop_128241_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128241_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128241_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128241_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115154 = 0.0F;
    }
    
    float x_122350;
    float x_122351;
    
    for (int32_t i_122353 = 0; i_122353 < num_tasks_122345; i_122353++) {
        flat_tid_115115 = i_122353;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122350 = defunc_2_reduce_res_115154;
            }
            // load next params
            {
                x_122351 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122346)[flat_tid_115115];
            }
            // red body
            {
                float defunc_1_op_res_122352 = x_122350 + x_122351;
                
                defunc_2_reduce_res_115154 = defunc_1_op_res_122352;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122346);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128238_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128238_end -
                 futhark_mc_segred_task_128238_start;
        
        ctx->futhark_mc_segred_task_128238_runs[tid]++;
        ctx->futhark_mc_segred_task_128238_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128238_iter[tid] += iterations;
    }
    *futhark_mc_task_128237->retval_defunc_2_reduce_res_115154 =
        defunc_2_reduce_res_115154;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128242 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_lifted_single_ma_arg_112912;
    int64_t free_lifted_single_ma_arg_112929;
    float free_defunc_2_reduce_res_115154;
    char *free_mem_119733;
    char *free_mem_119736;
};
struct futhark_mc_scan_stage_1_parloop_struct_128245 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_lifted_single_ma_arg_112912;
    float free_defunc_2_reduce_res_115154;
    char *free_mem_119733;
    char *free_mem_119736;
};
static int futhark_mc_scan_stage_1_parloop_128246(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115117, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128245
    *futhark_mc_scan_stage_1_parloop_struct_128245 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128245 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128245->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128246_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128246_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_scan_stage_1_parloop_struct_128245->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_scan_stage_1_parloop_struct_128245->free_i64_res_112562;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_scan_stage_1_parloop_struct_128245->free_lifted_single_ma_arg_112912;
    float defunc_2_reduce_res_115154 =
          futhark_mc_scan_stage_1_parloop_struct_128245->free_defunc_2_reduce_res_115154;
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128245->free_mem_119733,
                                  .size =0, .references =NULL};
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128245->free_mem_119736,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122355 = start;
    float x_122274;
    float x_122275;
    
    x_122274 = 0.0F;
    for (; iter_122355 < end; iter_122355++) {
        int64_t gtid_115118 = iter_122355;
        
        // stage 1 scan body
        {
            bool cond_122277 = gtid_115118 == (int64_t) 0;
            float defunc_0_f_res_122278;
            
            if (cond_122277) {
                float defunc_0_f_res_t_res_122279 = defunc_2_reduce_res_115154 /
                      i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_t_res_122279;
            } else {
                int64_t x_122280 = add64(n_p_112522, gtid_115118);
                int64_t i_122281 = sub64(x_122280, (int64_t) 1);
                bool x_122282 = sle64((int64_t) 0, i_122281);
                bool y_122283 = slt64(i_122281, lifted_single_ma_arg_112912);
                bool bounds_check_122284 = x_122282 && y_122283;
                bool index_certs_122285;
                
                if (!bounds_check_122284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122286 = ((float *) mem_119733.mem)[i_122281];
                int64_t i_122287 = sub64(gtid_115118, (int64_t) 1);
                bool x_122288 = sle64((int64_t) 0, i_122287);
                bool y_122289 = slt64(i_122287, lifted_single_ma_arg_112912);
                bool bounds_check_122290 = x_122288 && y_122289;
                bool index_certs_122291;
                
                if (!bounds_check_122290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122292 = ((float *) mem_119733.mem)[i_122287];
                float x_122293 = x_122286 - y_122292;
                float defunc_0_f_res_f_res_122294 = x_122293 / i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_f_res_122294;
            }
            // write mapped values results to memory
            { }
            x_122274 = x_122274;
            // Read next values
            {
                x_122275 = defunc_0_f_res_122278;
            }
            
            float defunc_1_op_res_122276 = x_122274 + x_122275;
            
            ((float *) mem_119736.mem)[gtid_115118] = defunc_1_op_res_122276;
            x_122274 = defunc_1_op_res_122276;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128246_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128246_end -
                 futhark_mc_scan_stage_1_parloop_128246_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128246_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128246_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128246_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128247 {
    struct futhark_context *ctx;
    int64_t free_n_p_112522;
    float free_i64_res_112562;
    int64_t free_lifted_single_ma_arg_112912;
    float free_defunc_2_reduce_res_115154;
    char *free_mem_119733;
    char *free_mem_119736;
};
static int futhark_mc_scan_stage_3_parloop_128248(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115117, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128247
    *futhark_mc_scan_stage_3_parloop_struct_128247 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128247 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128247->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128248_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128248_start = get_wall_time();
    
    int64_t n_p_112522 =
            futhark_mc_scan_stage_3_parloop_struct_128247->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_scan_stage_3_parloop_struct_128247->free_i64_res_112562;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_scan_stage_3_parloop_struct_128247->free_lifted_single_ma_arg_112912;
    float defunc_2_reduce_res_115154 =
          futhark_mc_scan_stage_3_parloop_struct_128247->free_defunc_2_reduce_res_115154;
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128247->free_mem_119733,
                                  .size =0, .references =NULL};
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128247->free_mem_119736,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122367 = start;
    float x_122364;
    float x_122365;
    
    if (iter_122367 == (int64_t) 0) {
        x_122364 = 0.0F;
    } else {
        x_122364 = ((float *) mem_119736.mem)[iter_122367 - (int64_t) 1];
    }
    for (; iter_122367 < end; iter_122367++) {
        int64_t gtid_115118 = iter_122367;
        
        // stage 3 scan body
        {
            bool cond_122277 = gtid_115118 == (int64_t) 0;
            float defunc_0_f_res_122278;
            
            if (cond_122277) {
                float defunc_0_f_res_t_res_122279 = defunc_2_reduce_res_115154 /
                      i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_t_res_122279;
            } else {
                int64_t x_122280 = add64(n_p_112522, gtid_115118);
                int64_t i_122281 = sub64(x_122280, (int64_t) 1);
                bool x_122282 = sle64((int64_t) 0, i_122281);
                bool y_122283 = slt64(i_122281, lifted_single_ma_arg_112912);
                bool bounds_check_122284 = x_122282 && y_122283;
                bool index_certs_122285;
                
                if (!bounds_check_122284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122286 = ((float *) mem_119733.mem)[i_122281];
                int64_t i_122287 = sub64(gtid_115118, (int64_t) 1);
                bool x_122288 = sle64((int64_t) 0, i_122287);
                bool y_122289 = slt64(i_122287, lifted_single_ma_arg_112912);
                bool bounds_check_122290 = x_122288 && y_122289;
                bool index_certs_122291;
                
                if (!bounds_check_122290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122292 = ((float *) mem_119733.mem)[i_122287];
                float x_122293 = x_122286 - y_122292;
                float defunc_0_f_res_f_res_122294 = x_122293 / i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_f_res_122294;
            }
            x_122364 = x_122364;
            x_122365 = defunc_0_f_res_122278;
            
            float defunc_1_op_res_122366 = x_122364 + x_122365;
            
            ((float *) mem_119736.mem)[gtid_115118] = defunc_1_op_res_122366;
            x_122364 = defunc_1_op_res_122366;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128248_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128248_end -
                 futhark_mc_scan_stage_3_parloop_128248_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128248_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128248_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128248_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128243(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115117 = tid;
    int num_tasks_122354 = info.nsubtasks;
    struct futhark_mc_task_128242 *futhark_mc_task_128242 =
                                  (struct futhark_mc_task_128242 *) args;
    struct futhark_context *ctx = futhark_mc_task_128242->ctx;
    uint64_t futhark_mc_segscan_task_128243_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128243_start = get_wall_time();
    
    int64_t n_p_112522 = futhark_mc_task_128242->free_n_p_112522;
    float i64_res_112562 = futhark_mc_task_128242->free_i64_res_112562;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_task_128242->free_lifted_single_ma_arg_112912;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_task_128242->free_lifted_single_ma_arg_112929;
    float defunc_2_reduce_res_115154 =
          futhark_mc_task_128242->free_defunc_2_reduce_res_115154;
    struct memblock mem_119733 = {.desc ="mem_119733", .mem =
                                  futhark_mc_task_128242->free_mem_119733,
                                  .size =0, .references =NULL};
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_task_128242->free_mem_119736,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122361_cached_sizze_128244 = 0;
    char *scan_stage_2_accum_mem_122361 = NULL;
    int64_t iter_122355;
    struct futhark_mc_scan_stage_1_parloop_struct_128245
    futhark_mc_scan_stage_1_parloop_struct_128245;
    
    futhark_mc_scan_stage_1_parloop_struct_128245.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_n_p_112522 = n_p_112522;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_i64_res_112562 =
        i64_res_112562;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_lifted_single_ma_arg_112912 =
        lifted_single_ma_arg_112912;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_defunc_2_reduce_res_115154 =
        defunc_2_reduce_res_115154;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_mem_119733 =
        mem_119733.mem;
    futhark_mc_scan_stage_1_parloop_struct_128245.free_mem_119736 =
        mem_119736.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128246_task;
    
    futhark_mc_scan_stage_1_parloop_128246_task.name =
        "futhark_mc_scan_stage_1_parloop_128246";
    futhark_mc_scan_stage_1_parloop_128246_task.fn =
        futhark_mc_scan_stage_1_parloop_128246;
    futhark_mc_scan_stage_1_parloop_128246_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128245;
    futhark_mc_scan_stage_1_parloop_128246_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128246_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128246_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128246_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128246_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128246_task);
    
    if (futhark_mc_scan_stage_1_parloop_128246_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128246_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128246_total_end -
                 futhark_mc_scan_stage_1_parloop_128246_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128246_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128246_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128246_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122354)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122356;
        float x_122357;
        int64_t offset_122359 = (int64_t) 0;
        int64_t offset_index_122360 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122361_cached_sizze_128244 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122361 =
                realloc(scan_stage_2_accum_mem_122361, (int64_t) 4);
            scan_stage_2_accum_mem_122361_cached_sizze_128244 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122361)[(int64_t) 0] = 0.0F;
        for (int32_t i_122363 = 0; i_122363 < num_tasks_122354 - 1;
             i_122363++) {
            offset_122359 = squot64(lifted_single_ma_arg_112929,
                                    sext_i32_i64(num_tasks_122354));
            if (slt64(sext_i32_i64(i_122363),
                      srem64(lifted_single_ma_arg_112929,
                             sext_i32_i64(num_tasks_122354)))) {
                offset_122359 += (int64_t) 1;
            }
            offset_index_122360 += offset_122359;
            
            int64_t gtid_115118 = offset_index_122360;
            bool cond_122277 = gtid_115118 == (int64_t) 0;
            float defunc_0_f_res_122278;
            
            if (cond_122277) {
                float defunc_0_f_res_t_res_122279 = defunc_2_reduce_res_115154 /
                      i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_t_res_122279;
            } else {
                int64_t x_122280 = add64(n_p_112522, gtid_115118);
                int64_t i_122281 = sub64(x_122280, (int64_t) 1);
                bool x_122282 = sle64((int64_t) 0, i_122281);
                bool y_122283 = slt64(i_122281, lifted_single_ma_arg_112912);
                bool bounds_check_122284 = x_122282 && y_122283;
                bool index_certs_122285;
                
                if (!bounds_check_122284) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122281,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122286 = ((float *) mem_119733.mem)[i_122281];
                int64_t i_122287 = sub64(gtid_115118, (int64_t) 1);
                bool x_122288 = sle64((int64_t) 0, i_122287);
                bool y_122289 = slt64(i_122287, lifted_single_ma_arg_112912);
                bool bounds_check_122290 = x_122288 && y_122289;
                bool index_certs_122291;
                
                if (!bounds_check_122290) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122287,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112912, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122292 = ((float *) mem_119733.mem)[i_122287];
                float x_122293 = x_122286 - y_122292;
                float defunc_0_f_res_f_res_122294 = x_122293 / i64_res_112562;
                
                defunc_0_f_res_122278 = defunc_0_f_res_f_res_122294;
            }
            // Read carry in
            {
                x_122356 =
                    ((float *) scan_stage_2_accum_mem_122361)[(int64_t) 0];
            }
            // Read next values
            {
                x_122357 = ((float *) mem_119736.mem)[offset_index_122360 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122358 = x_122356 + x_122357;
            
            ((float *) mem_119736.mem)[offset_index_122360 - (int64_t) 1] =
                defunc_1_op_res_122358;
            ((float *) scan_stage_2_accum_mem_122361)[(int64_t) 0] =
                defunc_1_op_res_122358;
        }
        
        int64_t iter_122367 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128247
        futhark_mc_scan_stage_3_parloop_struct_128247;
        
        futhark_mc_scan_stage_3_parloop_struct_128247.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_n_p_112522 =
            n_p_112522;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_i64_res_112562 =
            i64_res_112562;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_lifted_single_ma_arg_112912 =
            lifted_single_ma_arg_112912;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_defunc_2_reduce_res_115154 =
            defunc_2_reduce_res_115154;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_mem_119733 =
            mem_119733.mem;
        futhark_mc_scan_stage_3_parloop_struct_128247.free_mem_119736 =
            mem_119736.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128248_task;
        
        futhark_mc_scan_stage_3_parloop_128248_task.name =
            "futhark_mc_scan_stage_3_parloop_128248";
        futhark_mc_scan_stage_3_parloop_128248_task.fn =
            futhark_mc_scan_stage_3_parloop_128248;
        futhark_mc_scan_stage_3_parloop_128248_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128247;
        futhark_mc_scan_stage_3_parloop_128248_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128248_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128248_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128248_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128248_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128248_task);
        
        if (futhark_mc_scan_stage_3_parloop_128248_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128248_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128248_total_end -
                     futhark_mc_scan_stage_3_parloop_128248_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128248_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128248_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128248_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122361);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128243_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128243_end -
                 futhark_mc_segscan_task_128243_start;
        
        ctx->futhark_mc_segscan_task_128243_runs[tid]++;
        ctx->futhark_mc_segscan_task_128243_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128243_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128249 {
    struct futhark_context *ctx;
    char *free_mem_119736;
    float *retval_defunc_2_reduce_res_115183;
};
struct futhark_mc_segred_stage_1_parloop_struct_128252 {
    struct futhark_context *ctx;
    char *free_mem_119736;
    char *free_reduce_stage_1_tid_res_arr_mem_122369;
};
static int futhark_mc_segred_stage_1_parloop_128253(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115119,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128252
    *futhark_mc_segred_stage_1_parloop_struct_128252 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128252 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128252->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128253_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128253_start = get_wall_time();
    
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128252->free_mem_119736,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122369 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122369",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128252->free_reduce_stage_1_tid_res_arr_mem_122369,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122371 = start;
    float x_122295;
    float x_122296;
    float local_acc_122372 = 0.0F;
    
    for (; iter_122371 < end; iter_122371++) {
        int64_t gtid_115120 = iter_122371;
        float x_122298 = ((float *) mem_119736.mem)[gtid_115120];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122295 = local_acc_122372;
        }
        // Load next params
        {
            x_122296 = x_122298;
        }
        // Red body
        {
            float defunc_1_op_res_122297 = x_122295 + x_122296;
            
            local_acc_122372 = defunc_1_op_res_122297;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122369.mem)[flat_tid_115119] =
        local_acc_122372;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128253_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128253_end -
                 futhark_mc_segred_stage_1_parloop_128253_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128253_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128253_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128253_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128250(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115119 = tid;
    int num_tasks_122368 = info.nsubtasks;
    struct futhark_mc_task_128249 *futhark_mc_task_128249 =
                                  (struct futhark_mc_task_128249 *) args;
    struct futhark_context *ctx = futhark_mc_task_128249->ctx;
    uint64_t futhark_mc_segred_task_128250_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128250_start = get_wall_time();
    
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_task_128249->free_mem_119736,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115183 =
          *futhark_mc_task_128249->retval_defunc_2_reduce_res_115183;
    size_t reduce_stage_1_tid_res_arr_mem_122369_cached_sizze_128251 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122369 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122369_cached_sizze_128251 <
        (size_t) ((int64_t) 4 * num_tasks_122368)) {
        reduce_stage_1_tid_res_arr_mem_122369 =
            realloc(reduce_stage_1_tid_res_arr_mem_122369, (int64_t) 4 *
                    num_tasks_122368);
        reduce_stage_1_tid_res_arr_mem_122369_cached_sizze_128251 =
            (int64_t) 4 * num_tasks_122368;
    }
    
    int64_t iter_122371;
    struct futhark_mc_segred_stage_1_parloop_struct_128252
    futhark_mc_segred_stage_1_parloop_struct_128252;
    
    futhark_mc_segred_stage_1_parloop_struct_128252.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128252.free_mem_119736 =
        mem_119736.mem;
    futhark_mc_segred_stage_1_parloop_struct_128252.free_reduce_stage_1_tid_res_arr_mem_122369 =
        reduce_stage_1_tid_res_arr_mem_122369;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128253_task;
    
    futhark_mc_segred_stage_1_parloop_128253_task.name =
        "futhark_mc_segred_stage_1_parloop_128253";
    futhark_mc_segred_stage_1_parloop_128253_task.fn =
        futhark_mc_segred_stage_1_parloop_128253;
    futhark_mc_segred_stage_1_parloop_128253_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128252;
    futhark_mc_segred_stage_1_parloop_128253_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128253_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128253_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128253_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128253_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128253_task);
    
    if (futhark_mc_segred_stage_1_parloop_128253_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128253_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128253_total_end -
                 futhark_mc_segred_stage_1_parloop_128253_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128253_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128253_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128253_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115183 = 0.0F;
    }
    
    float x_122373;
    float x_122374;
    
    for (int32_t i_122376 = 0; i_122376 < num_tasks_122368; i_122376++) {
        flat_tid_115119 = i_122376;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122373 = defunc_2_reduce_res_115183;
            }
            // load next params
            {
                x_122374 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122369)[flat_tid_115119];
            }
            // red body
            {
                float defunc_1_op_res_122375 = x_122373 + x_122374;
                
                defunc_2_reduce_res_115183 = defunc_1_op_res_122375;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122369);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128250_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128250_end -
                 futhark_mc_segred_task_128250_start;
        
        ctx->futhark_mc_segred_task_128250_runs[tid]++;
        ctx->futhark_mc_segred_task_128250_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128250_iter[tid] += iterations;
    }
    *futhark_mc_task_128249->retval_defunc_2_reduce_res_115183 =
        defunc_2_reduce_res_115183;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128254 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_lifted_single_ma_arg_112929;
    float free_defunc_2_reduce_res_115183;
    char *free_mem_119736;
    char *free_mem_119739;
};
struct futhark_mc_scan_stage_1_parloop_struct_128257 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_112929;
    float free_defunc_2_reduce_res_115183;
    char *free_mem_119736;
    char *free_mem_119739;
};
static int futhark_mc_scan_stage_1_parloop_128258(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115121, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128257
    *futhark_mc_scan_stage_1_parloop_struct_128257 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128257 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128257->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128258_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128258_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_scan_stage_1_parloop_struct_128257->free_lifted_single_ma_arg_112929;
    float defunc_2_reduce_res_115183 =
          futhark_mc_scan_stage_1_parloop_struct_128257->free_defunc_2_reduce_res_115183;
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128257->free_mem_119736,
                                  .size =0, .references =NULL};
    struct memblock mem_119739 = {.desc ="mem_119739", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128257->free_mem_119739,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122378 = start;
    float x_122299;
    float x_122300;
    
    x_122299 = 0.0F;
    for (; iter_122378 < end; iter_122378++) {
        int64_t gtid_115122 = iter_122378;
        
        // stage 1 scan body
        {
            bool cond_122302 = gtid_115122 == (int64_t) 0;
            float defunc_0_f_res_122303;
            
            if (cond_122302) {
                float defunc_0_f_res_t_res_122304 = defunc_2_reduce_res_115183 /
                      3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_t_res_122304;
            } else {
                int64_t x_122305 = add64((int64_t) 3, gtid_115122);
                int64_t i_122306 = sub64(x_122305, (int64_t) 1);
                bool x_122307 = sle64((int64_t) 0, i_122306);
                bool y_122308 = slt64(i_122306, lifted_single_ma_arg_112929);
                bool bounds_check_122309 = x_122307 && y_122308;
                bool index_certs_122310;
                
                if (!bounds_check_122309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122311 = ((float *) mem_119736.mem)[i_122306];
                int64_t i_122312 = sub64(gtid_115122, (int64_t) 1);
                bool x_122313 = sle64((int64_t) 0, i_122312);
                bool y_122314 = slt64(i_122312, lifted_single_ma_arg_112929);
                bool bounds_check_122315 = x_122313 && y_122314;
                bool index_certs_122316;
                
                if (!bounds_check_122315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122317 = ((float *) mem_119736.mem)[i_122312];
                float x_122318 = x_122311 - y_122317;
                float defunc_0_f_res_f_res_122319 = x_122318 / 3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_f_res_122319;
            }
            // write mapped values results to memory
            { }
            x_122299 = x_122299;
            // Read next values
            {
                x_122300 = defunc_0_f_res_122303;
            }
            
            float defunc_1_op_res_122301 = x_122299 + x_122300;
            
            ((float *) mem_119739.mem)[gtid_115122] = defunc_1_op_res_122301;
            x_122299 = defunc_1_op_res_122301;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128258_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128258_end -
                 futhark_mc_scan_stage_1_parloop_128258_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128258_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128258_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128258_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128259 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_112929;
    float free_defunc_2_reduce_res_115183;
    char *free_mem_119736;
    char *free_mem_119739;
};
static int futhark_mc_scan_stage_3_parloop_128260(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115121, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128259
    *futhark_mc_scan_stage_3_parloop_struct_128259 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128259 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128259->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128260_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128260_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_scan_stage_3_parloop_struct_128259->free_lifted_single_ma_arg_112929;
    float defunc_2_reduce_res_115183 =
          futhark_mc_scan_stage_3_parloop_struct_128259->free_defunc_2_reduce_res_115183;
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128259->free_mem_119736,
                                  .size =0, .references =NULL};
    struct memblock mem_119739 = {.desc ="mem_119739", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128259->free_mem_119739,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122390 = start;
    float x_122387;
    float x_122388;
    
    if (iter_122390 == (int64_t) 0) {
        x_122387 = 0.0F;
    } else {
        x_122387 = ((float *) mem_119739.mem)[iter_122390 - (int64_t) 1];
    }
    for (; iter_122390 < end; iter_122390++) {
        int64_t gtid_115122 = iter_122390;
        
        // stage 3 scan body
        {
            bool cond_122302 = gtid_115122 == (int64_t) 0;
            float defunc_0_f_res_122303;
            
            if (cond_122302) {
                float defunc_0_f_res_t_res_122304 = defunc_2_reduce_res_115183 /
                      3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_t_res_122304;
            } else {
                int64_t x_122305 = add64((int64_t) 3, gtid_115122);
                int64_t i_122306 = sub64(x_122305, (int64_t) 1);
                bool x_122307 = sle64((int64_t) 0, i_122306);
                bool y_122308 = slt64(i_122306, lifted_single_ma_arg_112929);
                bool bounds_check_122309 = x_122307 && y_122308;
                bool index_certs_122310;
                
                if (!bounds_check_122309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122311 = ((float *) mem_119736.mem)[i_122306];
                int64_t i_122312 = sub64(gtid_115122, (int64_t) 1);
                bool x_122313 = sle64((int64_t) 0, i_122312);
                bool y_122314 = slt64(i_122312, lifted_single_ma_arg_112929);
                bool bounds_check_122315 = x_122313 && y_122314;
                bool index_certs_122316;
                
                if (!bounds_check_122315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122317 = ((float *) mem_119736.mem)[i_122312];
                float x_122318 = x_122311 - y_122317;
                float defunc_0_f_res_f_res_122319 = x_122318 / 3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_f_res_122319;
            }
            x_122387 = x_122387;
            x_122388 = defunc_0_f_res_122303;
            
            float defunc_1_op_res_122389 = x_122387 + x_122388;
            
            ((float *) mem_119739.mem)[gtid_115122] = defunc_1_op_res_122389;
            x_122387 = defunc_1_op_res_122389;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128260_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128260_end -
                 futhark_mc_scan_stage_3_parloop_128260_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128260_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128260_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128260_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128255(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115121 = tid;
    int num_tasks_122377 = info.nsubtasks;
    struct futhark_mc_task_128254 *futhark_mc_task_128254 =
                                  (struct futhark_mc_task_128254 *) args;
    struct futhark_context *ctx = futhark_mc_task_128254->ctx;
    uint64_t futhark_mc_segscan_task_128255_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128255_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128254->free_n_112520;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_task_128254->free_lifted_single_ma_arg_112929;
    float defunc_2_reduce_res_115183 =
          futhark_mc_task_128254->free_defunc_2_reduce_res_115183;
    struct memblock mem_119736 = {.desc ="mem_119736", .mem =
                                  futhark_mc_task_128254->free_mem_119736,
                                  .size =0, .references =NULL};
    struct memblock mem_119739 = {.desc ="mem_119739", .mem =
                                  futhark_mc_task_128254->free_mem_119739,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122384_cached_sizze_128256 = 0;
    char *scan_stage_2_accum_mem_122384 = NULL;
    int64_t iter_122378;
    struct futhark_mc_scan_stage_1_parloop_struct_128257
    futhark_mc_scan_stage_1_parloop_struct_128257;
    
    futhark_mc_scan_stage_1_parloop_struct_128257.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128257.free_lifted_single_ma_arg_112929 =
        lifted_single_ma_arg_112929;
    futhark_mc_scan_stage_1_parloop_struct_128257.free_defunc_2_reduce_res_115183 =
        defunc_2_reduce_res_115183;
    futhark_mc_scan_stage_1_parloop_struct_128257.free_mem_119736 =
        mem_119736.mem;
    futhark_mc_scan_stage_1_parloop_struct_128257.free_mem_119739 =
        mem_119739.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128258_task;
    
    futhark_mc_scan_stage_1_parloop_128258_task.name =
        "futhark_mc_scan_stage_1_parloop_128258";
    futhark_mc_scan_stage_1_parloop_128258_task.fn =
        futhark_mc_scan_stage_1_parloop_128258;
    futhark_mc_scan_stage_1_parloop_128258_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128257;
    futhark_mc_scan_stage_1_parloop_128258_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128258_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128258_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128258_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128258_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128258_task);
    
    if (futhark_mc_scan_stage_1_parloop_128258_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128258_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128258_total_end -
                 futhark_mc_scan_stage_1_parloop_128258_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128258_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128258_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128258_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122377)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122379;
        float x_122380;
        int64_t offset_122382 = (int64_t) 0;
        int64_t offset_index_122383 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122384_cached_sizze_128256 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122384 =
                realloc(scan_stage_2_accum_mem_122384, (int64_t) 4);
            scan_stage_2_accum_mem_122384_cached_sizze_128256 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122384)[(int64_t) 0] = 0.0F;
        for (int32_t i_122386 = 0; i_122386 < num_tasks_122377 - 1;
             i_122386++) {
            offset_122382 = squot64(n_112520, sext_i32_i64(num_tasks_122377));
            if (slt64(sext_i32_i64(i_122386), srem64(n_112520,
                                                     sext_i32_i64(num_tasks_122377)))) {
                offset_122382 += (int64_t) 1;
            }
            offset_index_122383 += offset_122382;
            
            int64_t gtid_115122 = offset_index_122383;
            bool cond_122302 = gtid_115122 == (int64_t) 0;
            float defunc_0_f_res_122303;
            
            if (cond_122302) {
                float defunc_0_f_res_t_res_122304 = defunc_2_reduce_res_115183 /
                      3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_t_res_122304;
            } else {
                int64_t x_122305 = add64((int64_t) 3, gtid_115122);
                int64_t i_122306 = sub64(x_122305, (int64_t) 1);
                bool x_122307 = sle64((int64_t) 0, i_122306);
                bool y_122308 = slt64(i_122306, lifted_single_ma_arg_112929);
                bool bounds_check_122309 = x_122307 && y_122308;
                bool index_certs_122310;
                
                if (!bounds_check_122309) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122306,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122311 = ((float *) mem_119736.mem)[i_122306];
                int64_t i_122312 = sub64(gtid_115122, (int64_t) 1);
                bool x_122313 = sle64((int64_t) 0, i_122312);
                bool y_122314 = slt64(i_122312, lifted_single_ma_arg_112929);
                bool bounds_check_122315 = x_122313 && y_122314;
                bool index_certs_122316;
                
                if (!bounds_check_122315) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122312,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_112929, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122317 = ((float *) mem_119736.mem)[i_122312];
                float x_122318 = x_122311 - y_122317;
                float defunc_0_f_res_f_res_122319 = x_122318 / 3.0F;
                
                defunc_0_f_res_122303 = defunc_0_f_res_f_res_122319;
            }
            // Read carry in
            {
                x_122379 =
                    ((float *) scan_stage_2_accum_mem_122384)[(int64_t) 0];
            }
            // Read next values
            {
                x_122380 = ((float *) mem_119739.mem)[offset_index_122383 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122381 = x_122379 + x_122380;
            
            ((float *) mem_119739.mem)[offset_index_122383 - (int64_t) 1] =
                defunc_1_op_res_122381;
            ((float *) scan_stage_2_accum_mem_122384)[(int64_t) 0] =
                defunc_1_op_res_122381;
        }
        
        int64_t iter_122390 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128259
        futhark_mc_scan_stage_3_parloop_struct_128259;
        
        futhark_mc_scan_stage_3_parloop_struct_128259.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128259.free_lifted_single_ma_arg_112929 =
            lifted_single_ma_arg_112929;
        futhark_mc_scan_stage_3_parloop_struct_128259.free_defunc_2_reduce_res_115183 =
            defunc_2_reduce_res_115183;
        futhark_mc_scan_stage_3_parloop_struct_128259.free_mem_119736 =
            mem_119736.mem;
        futhark_mc_scan_stage_3_parloop_struct_128259.free_mem_119739 =
            mem_119739.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128260_task;
        
        futhark_mc_scan_stage_3_parloop_128260_task.name =
            "futhark_mc_scan_stage_3_parloop_128260";
        futhark_mc_scan_stage_3_parloop_128260_task.fn =
            futhark_mc_scan_stage_3_parloop_128260;
        futhark_mc_scan_stage_3_parloop_128260_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128259;
        futhark_mc_scan_stage_3_parloop_128260_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128260_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128260_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128260_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128260_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128260_task);
        
        if (futhark_mc_scan_stage_3_parloop_128260_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128260_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128260_total_end -
                     futhark_mc_scan_stage_3_parloop_128260_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128260_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128260_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128260_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122384);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128255_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128255_end -
                 futhark_mc_segscan_task_128255_start;
        
        ctx->futhark_mc_segscan_task_128255_runs[tid]++;
        ctx->futhark_mc_segscan_task_128255_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128255_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128221(void *args, int64_t start,
                                            int64_t end, int flat_tid_115109,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128220
    *futhark_mc_segmap_parloop_struct_128220 =
    (struct futhark_mc_segmap_parloop_struct_128220 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128220->ctx;
    uint64_t futhark_mc_segmap_parloop_128221_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128221_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128220->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128220->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128220->free_n_p_112522;
    float i64_res_112562 =
          futhark_mc_segmap_parloop_struct_128220->free_i64_res_112562;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128220->free_C_len_112568;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_segmap_parloop_struct_128220->free_lifted_single_ma_arg_112912;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_segmap_parloop_struct_128220->free_lifted_single_ma_arg_112929;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128220->free_bytes_119421;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128220->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t bytes_119731 =
            futhark_mc_segmap_parloop_struct_128220->free_bytes_119731;
    int64_t bytes_119734 =
            futhark_mc_segmap_parloop_struct_128220->free_bytes_119734;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128220->free_mem_119788,
                                  .size =0, .references =NULL};
    size_t mem_119733_cached_sizze_128222 = 0;
    char *mem_119733 = NULL;
    size_t mem_119736_cached_sizze_128223 = 0;
    char *mem_119736 = NULL;
    size_t mem_119739_cached_sizze_128224 = 0;
    char *mem_119739 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122244 = start;
    
    if (mem_119733_cached_sizze_128222 < (size_t) bytes_119731) {
        mem_119733 = realloc(mem_119733, bytes_119731);
        mem_119733_cached_sizze_128222 = bytes_119731;
    }
    if (mem_119736_cached_sizze_128223 < (size_t) bytes_119734) {
        mem_119736 = realloc(mem_119736, bytes_119734);
        mem_119736_cached_sizze_128223 = bytes_119734;
    }
    if (mem_119739_cached_sizze_128224 < (size_t) bytes_119421) {
        mem_119739 = realloc(mem_119739, bytes_119421);
        mem_119739_cached_sizze_128224 = bytes_119421;
    }
    for (; iter_122244 < end; iter_122244++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122320 = m_112519;
        int64_t gtid_115110 = iter_122244;
        int64_t remnant_122321 = iter_122244 - gtid_115110;
        float defunc_2_reduce_res_115125;
        int64_t flat_tid_115111 = (int64_t) 0;
        int32_t num_tasks_122322;
        struct futhark_mc_task_128225 futhark_mc_task_128225;
        
        futhark_mc_task_128225.ctx = ctx;
        futhark_mc_task_128225.free_C_len_112568 = C_len_112568;
        futhark_mc_task_128225.free_gtid_115110 = gtid_115110;
        futhark_mc_task_128225.free_mem_119730 = mem_119730.mem;
        futhark_mc_task_128225.retval_defunc_2_reduce_res_115125 =
            &defunc_2_reduce_res_115125;
        
        struct scheduler_segop futhark_mc_task_128225_task;
        
        futhark_mc_task_128225_task.args = &futhark_mc_task_128225;
        futhark_mc_task_128225_task.top_level_fn =
            futhark_mc_segred_task_128226;
        futhark_mc_task_128225_task.name = "futhark_mc_segred_task_128226";
        futhark_mc_task_128225_task.iterations = n_p_112522;
        futhark_mc_task_128225_task.task_time =
            &ctx->futhark_mc_segred_task_128226_total_time;
        futhark_mc_task_128225_task.task_iter =
            &ctx->futhark_mc_segred_task_128226_total_iter;
        futhark_mc_task_128225_task.sched = STATIC;
        futhark_mc_task_128225_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128226_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128225_task);
        
        if (futhark_mc_segred_task_128226_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115113 = (int64_t) 0;
        int32_t num_tasks_122331;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128230 futhark_mc_task_128230;
        
        futhark_mc_task_128230.ctx = ctx;
        futhark_mc_task_128230.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128230.free_i64_res_112562 = i64_res_112562;
        futhark_mc_task_128230.free_C_len_112568 = C_len_112568;
        futhark_mc_task_128230.free_lifted_single_ma_arg_112912 =
            lifted_single_ma_arg_112912;
        futhark_mc_task_128230.free_gtid_115110 = gtid_115110;
        futhark_mc_task_128230.free_defunc_2_reduce_res_115125 =
            defunc_2_reduce_res_115125;
        futhark_mc_task_128230.free_mem_119730 = mem_119730.mem;
        futhark_mc_task_128230.free_mem_119733 = mem_119733;
        
        struct scheduler_segop futhark_mc_task_128230_task;
        
        futhark_mc_task_128230_task.args = &futhark_mc_task_128230;
        futhark_mc_task_128230_task.top_level_fn =
            futhark_mc_segscan_task_128231;
        futhark_mc_task_128230_task.name = "futhark_mc_segscan_task_128231";
        futhark_mc_task_128230_task.iterations = lifted_single_ma_arg_112912;
        futhark_mc_task_128230_task.task_time =
            &ctx->futhark_mc_segscan_task_128231_total_time;
        futhark_mc_task_128230_task.task_iter =
            &ctx->futhark_mc_segscan_task_128231_total_iter;
        futhark_mc_task_128230_task.sched = STATIC;
        futhark_mc_task_128230_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128231_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128230_task);
        
        if (futhark_mc_segscan_task_128231_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_115154;
        int64_t flat_tid_115115 = (int64_t) 0;
        int32_t num_tasks_122345;
        struct futhark_mc_task_128237 futhark_mc_task_128237;
        
        futhark_mc_task_128237.ctx = ctx;
        futhark_mc_task_128237.free_mem_119733 = mem_119733;
        futhark_mc_task_128237.retval_defunc_2_reduce_res_115154 =
            &defunc_2_reduce_res_115154;
        
        struct scheduler_segop futhark_mc_task_128237_task;
        
        futhark_mc_task_128237_task.args = &futhark_mc_task_128237;
        futhark_mc_task_128237_task.top_level_fn =
            futhark_mc_segred_task_128238;
        futhark_mc_task_128237_task.name = "futhark_mc_segred_task_128238";
        futhark_mc_task_128237_task.iterations = n_p_112522;
        futhark_mc_task_128237_task.task_time =
            &ctx->futhark_mc_segred_task_128238_total_time;
        futhark_mc_task_128237_task.task_iter =
            &ctx->futhark_mc_segred_task_128238_total_iter;
        futhark_mc_task_128237_task.sched = STATIC;
        futhark_mc_task_128237_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128238_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128237_task);
        
        if (futhark_mc_segred_task_128238_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115117 = (int64_t) 0;
        int32_t num_tasks_122354;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128242 futhark_mc_task_128242;
        
        futhark_mc_task_128242.ctx = ctx;
        futhark_mc_task_128242.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128242.free_i64_res_112562 = i64_res_112562;
        futhark_mc_task_128242.free_lifted_single_ma_arg_112912 =
            lifted_single_ma_arg_112912;
        futhark_mc_task_128242.free_lifted_single_ma_arg_112929 =
            lifted_single_ma_arg_112929;
        futhark_mc_task_128242.free_defunc_2_reduce_res_115154 =
            defunc_2_reduce_res_115154;
        futhark_mc_task_128242.free_mem_119733 = mem_119733;
        futhark_mc_task_128242.free_mem_119736 = mem_119736;
        
        struct scheduler_segop futhark_mc_task_128242_task;
        
        futhark_mc_task_128242_task.args = &futhark_mc_task_128242;
        futhark_mc_task_128242_task.top_level_fn =
            futhark_mc_segscan_task_128243;
        futhark_mc_task_128242_task.name = "futhark_mc_segscan_task_128243";
        futhark_mc_task_128242_task.iterations = lifted_single_ma_arg_112929;
        futhark_mc_task_128242_task.task_time =
            &ctx->futhark_mc_segscan_task_128243_total_time;
        futhark_mc_task_128242_task.task_iter =
            &ctx->futhark_mc_segscan_task_128243_total_iter;
        futhark_mc_task_128242_task.sched = STATIC;
        futhark_mc_task_128242_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128243_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128242_task);
        
        if (futhark_mc_segscan_task_128243_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_115183;
        int64_t flat_tid_115119 = (int64_t) 0;
        int32_t num_tasks_122368;
        struct futhark_mc_task_128249 futhark_mc_task_128249;
        
        futhark_mc_task_128249.ctx = ctx;
        futhark_mc_task_128249.free_mem_119736 = mem_119736;
        futhark_mc_task_128249.retval_defunc_2_reduce_res_115183 =
            &defunc_2_reduce_res_115183;
        
        struct scheduler_segop futhark_mc_task_128249_task;
        
        futhark_mc_task_128249_task.args = &futhark_mc_task_128249;
        futhark_mc_task_128249_task.top_level_fn =
            futhark_mc_segred_task_128250;
        futhark_mc_task_128249_task.name = "futhark_mc_segred_task_128250";
        futhark_mc_task_128249_task.iterations = (int64_t) 3;
        futhark_mc_task_128249_task.task_time =
            &ctx->futhark_mc_segred_task_128250_total_time;
        futhark_mc_task_128249_task.task_iter =
            &ctx->futhark_mc_segred_task_128250_total_iter;
        futhark_mc_task_128249_task.sched = STATIC;
        futhark_mc_task_128249_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128250_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128249_task);
        
        if (futhark_mc_segred_task_128250_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115121 = (int64_t) 0;
        int32_t num_tasks_122377;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128254 futhark_mc_task_128254;
        
        futhark_mc_task_128254.ctx = ctx;
        futhark_mc_task_128254.free_n_112520 = n_112520;
        futhark_mc_task_128254.free_lifted_single_ma_arg_112929 =
            lifted_single_ma_arg_112929;
        futhark_mc_task_128254.free_defunc_2_reduce_res_115183 =
            defunc_2_reduce_res_115183;
        futhark_mc_task_128254.free_mem_119736 = mem_119736;
        futhark_mc_task_128254.free_mem_119739 = mem_119739;
        
        struct scheduler_segop futhark_mc_task_128254_task;
        
        futhark_mc_task_128254_task.args = &futhark_mc_task_128254;
        futhark_mc_task_128254_task.top_level_fn =
            futhark_mc_segscan_task_128255;
        futhark_mc_task_128254_task.name = "futhark_mc_segscan_task_128255";
        futhark_mc_task_128254_task.iterations = n_112520;
        futhark_mc_task_128254_task.task_time =
            &ctx->futhark_mc_segscan_task_128255_total_time;
        futhark_mc_task_128254_task.task_iter =
            &ctx->futhark_mc_segscan_task_128255_total_iter;
        futhark_mc_task_128254_task.sched = STATIC;
        futhark_mc_task_128254_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128255_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128254_task);
        
        if (futhark_mc_segscan_task_128255_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119788.mem + gtid_115110 * n_112520 * (int64_t) 4,
                mem_119739 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119733);
    free(mem_119736);
    free(mem_119739);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128221_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128221_end -
                 futhark_mc_segmap_parloop_128221_start;
        
        ctx->futhark_mc_segmap_parloop_128221_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128221_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128221_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128219(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115109 = tid;
    int num_tasks_122149 = info.nsubtasks;
    struct futhark_mc_task_128212 *futhark_mc_task_128212 =
                                  (struct futhark_mc_task_128212 *) args;
    struct futhark_context *ctx = futhark_mc_task_128212->ctx;
    uint64_t futhark_mc_segmap_nested_task_128219_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128219_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128212->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128212->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128212->free_n_p_112522;
    float i64_res_112562 = futhark_mc_task_128212->free_i64_res_112562;
    int64_t C_len_112568 = futhark_mc_task_128212->free_C_len_112568;
    int64_t lifted_single_ma_arg_112912 =
            futhark_mc_task_128212->free_lifted_single_ma_arg_112912;
    int64_t lifted_single_ma_arg_112929 =
            futhark_mc_task_128212->free_lifted_single_ma_arg_112929;
    int64_t bytes_119421 = futhark_mc_task_128212->free_bytes_119421;
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128212->free_mem_119730,
                                  .size =0, .references =NULL};
    int64_t bytes_119731 = futhark_mc_task_128212->free_bytes_119731;
    int64_t bytes_119734 = futhark_mc_task_128212->free_bytes_119734;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128212->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t iter_122244;
    struct futhark_mc_segmap_parloop_struct_128220
    futhark_mc_segmap_parloop_struct_128220;
    
    futhark_mc_segmap_parloop_struct_128220.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128220.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128220.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128220.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128220.free_i64_res_112562 =
        i64_res_112562;
    futhark_mc_segmap_parloop_struct_128220.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128220.free_lifted_single_ma_arg_112912 =
        lifted_single_ma_arg_112912;
    futhark_mc_segmap_parloop_struct_128220.free_lifted_single_ma_arg_112929 =
        lifted_single_ma_arg_112929;
    futhark_mc_segmap_parloop_struct_128220.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128220.free_mem_119730 = mem_119730.mem;
    futhark_mc_segmap_parloop_struct_128220.free_bytes_119731 = bytes_119731;
    futhark_mc_segmap_parloop_struct_128220.free_bytes_119734 = bytes_119734;
    futhark_mc_segmap_parloop_struct_128220.free_mem_119788 = mem_119788.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128221_task;
    
    futhark_mc_segmap_parloop_128221_task.name =
        "futhark_mc_segmap_parloop_128221";
    futhark_mc_segmap_parloop_128221_task.fn = futhark_mc_segmap_parloop_128221;
    futhark_mc_segmap_parloop_128221_task.args =
        &futhark_mc_segmap_parloop_struct_128220;
    futhark_mc_segmap_parloop_128221_task.iterations = iterations;
    futhark_mc_segmap_parloop_128221_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128221_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128221_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128221_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128221_task);
    
    if (futhark_mc_segmap_parloop_128221_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128221_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128221_total_end -
                 futhark_mc_segmap_parloop_128221_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128221_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128221_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128221_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128219_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128219_end -
                 futhark_mc_segmap_nested_task_128219_start;
        
        ctx->futhark_mc_segmap_nested_task_128219_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128219_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128219_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128261 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119814;
};
struct futhark_mc_segmap_parloop_struct_128263 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119814;
};
static int futhark_mc_segmap_parloop_128264(void *args, int64_t start,
                                            int64_t end, int flat_tid_115211,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128263
    *futhark_mc_segmap_parloop_struct_128263 =
    (struct futhark_mc_segmap_parloop_struct_128263 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128263->ctx;
    uint64_t futhark_mc_segmap_parloop_128264_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128264_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128263->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128263->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128263->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128263->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128263->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128263->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128263->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128263->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128263->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128263->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128263->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128263->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128263->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128263->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119814 = {.desc ="mem_119814", .mem =
                                  futhark_mc_segmap_parloop_struct_128263->free_mem_119814,
                                  .size =0, .references =NULL};
    size_t mem_119798_cached_sizze_128265 = 0;
    char *mem_119798 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122394 = start;
    
    if (mem_119798_cached_sizze_128265 < (size_t) bytes_119490) {
        mem_119798 = realloc(mem_119798, bytes_119490);
        mem_119798_cached_sizze_128265 = bytes_119490;
    }
    for (; iter_122394 < end; iter_122394++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122451 = m_112519;
        int64_t gtid_115212 = iter_122394;
        int64_t remnant_122452 = iter_122394 - gtid_115212;
        
        for (int64_t i_122395 = 0; i_122395 < l_n_m_112570; i_122395++) {
            int64_t x_122397 = ((int64_t *) mem_119544.mem)[gtid_115212 *
                                                            l_n_m_112570 +
                                                            i_122395];
            float x_122398 = ((float *) mem_119548.mem)[gtid_115212 *
                                                        l_n_m_112570 +
                                                        i_122395];
            int64_t min_arg_122399 = mul64(t_jump_112527, i_122395);
            int64_t min_res_122400 = smin64(i_112596, min_arg_122399);
            float defunc_0_f_res_122401 = sitofp_i64_f32(min_res_122400);
            float defunc_2_reduce_res_122402;
            float redout_122404 = 0.0F;
            
            for (int64_t i_122403 = 0; i_122403 < l_window_112524; i_122403++) {
                bool cond_122405 = sle64(n_112520, i_122403);
                float defunc_0_f_res_122406;
                
                if (cond_122405) {
                    defunc_0_f_res_122406 = 0.0F;
                } else {
                    int64_t i_122407 = add64(x_122397, i_122403);
                    float index_primexp_122408 = sitofp_i64_f32(i_122407);
                    float defunc_0_f_res_f_res_122409 = 1.0F +
                          index_primexp_122408;
                    
                    defunc_0_f_res_122406 = defunc_0_f_res_f_res_122409;
                }
                
                float defunc_0_f_res_122410;
                
                if (cond_122405) {
                    defunc_0_f_res_122410 = 0.0F;
                } else {
                    int64_t i_122411 = add64(x_122397, i_122403);
                    float x_122412 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115212 *
                                                            ctx_param_ext_119638 +
                                                            i_122411 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_122410 = x_122412;
                }
                
                float x_j_122413 = defunc_0_f_res_122406 -
                      defunc_0_f_res_122401;
                float abs_res_122414 = (float) fabs(x_j_122413);
                float tmp1_122415 = abs_res_122414 / x_122398;
                float x_122416 = tmp1_122415 * tmp1_122415;
                float y_122417 = tmp1_122415 * x_122416;
                float tmp2_122418 = 1.0F - y_122417;
                float x_122419 = tmp2_122418 * tmp2_122418;
                float tmp3_122420 = tmp2_122418 * x_122419;
                float w_j_122421 = defunc_0_f_res_122410 * tmp3_122420;
                float defunc_1_op_res_122422 = w_j_122421 + redout_122404;
                float redout_tmp_122454 = defunc_1_op_res_122422;
                
                redout_122404 = redout_tmp_122454;
            }
            defunc_2_reduce_res_122402 = redout_122404;
            
            float a0_122423 = 1.0F / defunc_2_reduce_res_122402;
            float defunc_2_reduce_res_122424;
            float redout_122426 = 0.0F;
            
            for (int64_t i_122425 = 0; i_122425 < l_window_112524; i_122425++) {
                bool cond_122427 = sle64(n_112520, i_122425);
                float defunc_0_f_res_122428;
                
                if (cond_122427) {
                    defunc_0_f_res_122428 = 0.0F;
                } else {
                    int64_t i_122429 = add64(x_122397, i_122425);
                    float index_primexp_122430 = sitofp_i64_f32(i_122429);
                    float defunc_0_f_res_f_res_122431 = 1.0F +
                          index_primexp_122430;
                    
                    defunc_0_f_res_122428 = defunc_0_f_res_f_res_122431;
                }
                
                float defunc_0_f_res_122432;
                
                if (cond_122427) {
                    defunc_0_f_res_122432 = 0.0F;
                } else {
                    int64_t i_122433 = add64(x_122397, i_122425);
                    float x_122434 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115212 *
                                                            ctx_param_ext_119638 +
                                                            i_122433 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_122432 = x_122434;
                }
                
                float x_j_122435 = defunc_0_f_res_122428 -
                      defunc_0_f_res_122401;
                float abs_res_122436 = (float) fabs(x_j_122435);
                float tmp1_122437 = abs_res_122436 / x_122398;
                float x_122438 = tmp1_122437 * tmp1_122437;
                float y_122439 = tmp1_122437 * x_122438;
                float tmp2_122440 = 1.0F - y_122439;
                float x_122441 = tmp2_122440 * tmp2_122440;
                float tmp3_122442 = tmp2_122440 * x_122441;
                float tmp4_122443 = defunc_0_f_res_122432 * tmp3_122442;
                float defunc_0_f_res_122444;
                
                if (cond_122427) {
                    defunc_0_f_res_122444 = 0.0F;
                } else {
                    int64_t i_122445 = add64(x_122397, i_122425);
                    float x_122446 = ((float *) mem_119788.mem)[gtid_115212 *
                                                                n_112520 +
                                                                i_122445];
                    
                    defunc_0_f_res_122444 = x_122446;
                }
                
                float x_122447 = a0_122423 * tmp4_122443;
                float defunc_9_fit_fun_res_122448 = defunc_0_f_res_122444 *
                      x_122447;
                float defunc_1_op_res_122449 = defunc_9_fit_fun_res_122448 +
                      redout_122426;
                float redout_tmp_122455 = defunc_1_op_res_122449;
                
                redout_122426 = redout_tmp_122455;
            }
            defunc_2_reduce_res_122424 = redout_122426;
            ((float *) mem_119798)[i_122395] = defunc_2_reduce_res_122424;
        }
        memmove(mem_119814.mem + gtid_115212 * l_n_m_112570 * (int64_t) 4,
                mem_119798 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119798);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128264_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128264_end -
                 futhark_mc_segmap_parloop_128264_start;
        
        ctx->futhark_mc_segmap_parloop_128264_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128264_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128264_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128262(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115211 = tid;
    int num_tasks_122393 = info.nsubtasks;
    struct futhark_mc_task_128261 *futhark_mc_task_128261 =
                                  (struct futhark_mc_task_128261 *) args;
    struct futhark_context *ctx = futhark_mc_task_128261->ctx;
    uint64_t futhark_mc_segmap_task_128262_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128262_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128261->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128261->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128261->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128261->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128261->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128261->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128261->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128261->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128261->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128261->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128261->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128261->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128261->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128261->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119814 = {.desc ="mem_119814", .mem =
                                  futhark_mc_task_128261->free_mem_119814,
                                  .size =0, .references =NULL};
    int64_t iter_122394;
    struct futhark_mc_segmap_parloop_struct_128263
    futhark_mc_segmap_parloop_struct_128263;
    
    futhark_mc_segmap_parloop_struct_128263.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128263.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128263.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128263.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128263.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128263.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128263.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128263.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128263.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128263.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128263.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128263.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128263.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128263.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128263.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128263.free_mem_119814 = mem_119814.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128264_task;
    
    futhark_mc_segmap_parloop_128264_task.name =
        "futhark_mc_segmap_parloop_128264";
    futhark_mc_segmap_parloop_128264_task.fn = futhark_mc_segmap_parloop_128264;
    futhark_mc_segmap_parloop_128264_task.args =
        &futhark_mc_segmap_parloop_struct_128263;
    futhark_mc_segmap_parloop_128264_task.iterations = iterations;
    futhark_mc_segmap_parloop_128264_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128264_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128264_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128264_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128264_task);
    
    if (futhark_mc_segmap_parloop_128264_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128264_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128264_total_end -
                 futhark_mc_segmap_parloop_128264_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128264_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128264_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128264_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128262_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128262_end -
                 futhark_mc_segmap_task_128262_start;
        
        ctx->futhark_mc_segmap_task_128262_runs[tid]++;
        ctx->futhark_mc_segmap_task_128262_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128262_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128267 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119814;
};
struct futhark_mc_task_128270 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115214;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119795;
};
struct futhark_mc_segmap_parloop_struct_128272 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115214;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119795;
};
static int futhark_mc_segmap_parloop_128273(void *args, int64_t start,
                                            int64_t end, int flat_tid_115215,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128272
    *futhark_mc_segmap_parloop_struct_128272 =
    (struct futhark_mc_segmap_parloop_struct_128272 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128272->ctx;
    uint64_t futhark_mc_segmap_parloop_128273_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128273_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128272->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128272->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128272->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128272->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128272->free_i_112596;
    int64_t gtid_115214 =
            futhark_mc_segmap_parloop_struct_128272->free_gtid_115214;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128272->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128272->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128272->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128272->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128272->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128272->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128272->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119795 = {.desc ="mem_119795", .mem =
                                  futhark_mc_segmap_parloop_struct_128272->free_mem_119795,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122566 = start;
    
    for (; iter_122566 < end; iter_122566++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122612 = l_n_m_112570;
        int64_t gtid_115216 = iter_122566;
        int64_t remnant_122613 = iter_122566 - gtid_115216;
        int64_t x_122510 = ((int64_t *) mem_119544.mem)[gtid_115214 *
                                                        l_n_m_112570 +
                                                        gtid_115216];
        float x_122511 = ((float *) mem_119548.mem)[gtid_115214 * l_n_m_112570 +
                                                    gtid_115216];
        int64_t min_arg_122512 = mul64(t_jump_112527, gtid_115216);
        int64_t min_res_122513 = smin64(i_112596, min_arg_122512);
        float defunc_0_f_res_122514 = sitofp_i64_f32(min_res_122513);
        float defunc_2_reduce_res_122515;
        float redout_122568 = 0.0F;
        
        for (int64_t i_122567 = 0; i_122567 < l_window_112524; i_122567++) {
            bool cond_122569 = sle64(n_112520, i_122567);
            float defunc_0_f_res_122570;
            
            if (cond_122569) {
                defunc_0_f_res_122570 = 0.0F;
            } else {
                int64_t i_122571 = add64(x_122510, i_122567);
                float index_primexp_122572 = sitofp_i64_f32(i_122571);
                float defunc_0_f_res_f_res_122573 = 1.0F + index_primexp_122572;
                
                defunc_0_f_res_122570 = defunc_0_f_res_f_res_122573;
            }
            
            float defunc_0_f_res_122574;
            
            if (cond_122569) {
                defunc_0_f_res_122574 = 0.0F;
            } else {
                int64_t i_122575 = add64(x_122510, i_122567);
                float x_122576 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115214 *
                                                        ctx_param_ext_119638 +
                                                        i_122575 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_122574 = x_122576;
            }
            
            float x_j_122577 = defunc_0_f_res_122570 - defunc_0_f_res_122514;
            float abs_res_122578 = (float) fabs(x_j_122577);
            float tmp1_122579 = abs_res_122578 / x_122511;
            float x_122580 = tmp1_122579 * tmp1_122579;
            float y_122581 = tmp1_122579 * x_122580;
            float tmp2_122582 = 1.0F - y_122581;
            float x_122583 = tmp2_122582 * tmp2_122582;
            float tmp3_122584 = tmp2_122582 * x_122583;
            float w_j_122585 = defunc_0_f_res_122574 * tmp3_122584;
            float defunc_1_op_res_122586 = w_j_122585 + redout_122568;
            float redout_tmp_122614 = defunc_1_op_res_122586;
            
            redout_122568 = redout_tmp_122614;
        }
        defunc_2_reduce_res_122515 = redout_122568;
        
        float a0_122536 = 1.0F / defunc_2_reduce_res_122515;
        float defunc_2_reduce_res_122537;
        float redout_122588 = 0.0F;
        
        for (int64_t i_122587 = 0; i_122587 < l_window_112524; i_122587++) {
            bool cond_122589 = sle64(n_112520, i_122587);
            float defunc_0_f_res_122590;
            
            if (cond_122589) {
                defunc_0_f_res_122590 = 0.0F;
            } else {
                int64_t i_122591 = add64(x_122510, i_122587);
                float index_primexp_122592 = sitofp_i64_f32(i_122591);
                float defunc_0_f_res_f_res_122593 = 1.0F + index_primexp_122592;
                
                defunc_0_f_res_122590 = defunc_0_f_res_f_res_122593;
            }
            
            float defunc_0_f_res_122594;
            
            if (cond_122589) {
                defunc_0_f_res_122594 = 0.0F;
            } else {
                int64_t i_122595 = add64(x_122510, i_122587);
                float x_122596 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115214 *
                                                        ctx_param_ext_119638 +
                                                        i_122595 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_122594 = x_122596;
            }
            
            float x_j_122597 = defunc_0_f_res_122590 - defunc_0_f_res_122514;
            float abs_res_122598 = (float) fabs(x_j_122597);
            float tmp1_122599 = abs_res_122598 / x_122511;
            float x_122600 = tmp1_122599 * tmp1_122599;
            float y_122601 = tmp1_122599 * x_122600;
            float tmp2_122602 = 1.0F - y_122601;
            float x_122603 = tmp2_122602 * tmp2_122602;
            float tmp3_122604 = tmp2_122602 * x_122603;
            float tmp4_122605 = defunc_0_f_res_122594 * tmp3_122604;
            float defunc_0_f_res_122606;
            
            if (cond_122589) {
                defunc_0_f_res_122606 = 0.0F;
            } else {
                int64_t i_122607 = add64(x_122510, i_122587);
                float x_122608 = ((float *) mem_119788.mem)[gtid_115214 *
                                                            n_112520 +
                                                            i_122607];
                
                defunc_0_f_res_122606 = x_122608;
            }
            
            float x_122609 = a0_122536 * tmp4_122605;
            float defunc_9_fit_fun_res_122610 = defunc_0_f_res_122606 *
                  x_122609;
            float defunc_1_op_res_122611 = defunc_9_fit_fun_res_122610 +
                  redout_122588;
            float redout_tmp_122615 = defunc_1_op_res_122611;
            
            redout_122588 = redout_tmp_122615;
        }
        defunc_2_reduce_res_122537 = redout_122588;
        ((float *) mem_119795.mem)[gtid_115216] = defunc_2_reduce_res_122537;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128273_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128273_end -
                 futhark_mc_segmap_parloop_128273_start;
        
        ctx->futhark_mc_segmap_parloop_128273_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128273_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128273_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128271(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115215 = tid;
    int num_tasks_122565 = info.nsubtasks;
    struct futhark_mc_task_128270 *futhark_mc_task_128270 =
                                  (struct futhark_mc_task_128270 *) args;
    struct futhark_context *ctx = futhark_mc_task_128270->ctx;
    uint64_t futhark_mc_segmap_task_128271_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128271_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128270->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128270->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128270->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128270->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128270->free_i_112596;
    int64_t gtid_115214 = futhark_mc_task_128270->free_gtid_115214;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128270->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128270->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128270->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128270->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128270->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128270->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128270->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119795 = {.desc ="mem_119795", .mem =
                                  futhark_mc_task_128270->free_mem_119795,
                                  .size =0, .references =NULL};
    int64_t iter_122566;
    struct futhark_mc_segmap_parloop_struct_128272
    futhark_mc_segmap_parloop_struct_128272;
    
    futhark_mc_segmap_parloop_struct_128272.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128272.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128272.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128272.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128272.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128272.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128272.free_gtid_115214 = gtid_115214;
    futhark_mc_segmap_parloop_struct_128272.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128272.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128272.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128272.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128272.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128272.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128272.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128272.free_mem_119795 = mem_119795.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128273_task;
    
    futhark_mc_segmap_parloop_128273_task.name =
        "futhark_mc_segmap_parloop_128273";
    futhark_mc_segmap_parloop_128273_task.fn = futhark_mc_segmap_parloop_128273;
    futhark_mc_segmap_parloop_128273_task.args =
        &futhark_mc_segmap_parloop_struct_128272;
    futhark_mc_segmap_parloop_128273_task.iterations = iterations;
    futhark_mc_segmap_parloop_128273_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128273_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128273_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128273_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128273_task);
    
    if (futhark_mc_segmap_parloop_128273_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128273_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128273_total_end -
                 futhark_mc_segmap_parloop_128273_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128273_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128273_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128273_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128271_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128271_end -
                 futhark_mc_segmap_task_128271_start;
        
        ctx->futhark_mc_segmap_task_128271_runs[tid]++;
        ctx->futhark_mc_segmap_task_128271_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128271_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128275 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115214;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119795;
};
struct futhark_mc_task_128277 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115214;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_122457;
    float free_x_122458;
    float free_defunc_0_f_res_122461;
    float *retval_defunc_2_reduce_res_122462;
};
struct futhark_mc_segred_stage_1_parloop_struct_128280 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115214;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_122457;
    float free_x_122458;
    float free_defunc_0_f_res_122461;
    char *free_reduce_stage_1_tid_res_arr_mem_122665;
};
static int futhark_mc_segred_stage_1_parloop_128281(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115219,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128280
    *futhark_mc_segred_stage_1_parloop_struct_128280 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128280 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128280->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128281_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128281_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_n_112520;
    int64_t gtid_115214 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_gtid_115214;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128280->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_122457 =
            futhark_mc_segred_stage_1_parloop_struct_128280->free_x_122457;
    float x_122458 =
          futhark_mc_segred_stage_1_parloop_struct_128280->free_x_122458;
    float defunc_0_f_res_122461 =
          futhark_mc_segred_stage_1_parloop_struct_128280->free_defunc_0_f_res_122461;
    struct memblock reduce_stage_1_tid_res_arr_mem_122665 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122665",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128280->free_reduce_stage_1_tid_res_arr_mem_122665,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122667 = start;
    float x_122617;
    float x_122618;
    float local_acc_122668 = 0.0F;
    
    for (; iter_122667 < end; iter_122667++) {
        int64_t gtid_115220 = iter_122667;
        bool cond_122620 = sle64(n_112520, gtid_115220);
        float defunc_0_f_res_122621;
        
        if (cond_122620) {
            defunc_0_f_res_122621 = 0.0F;
        } else {
            int64_t i_122622 = add64(gtid_115220, x_122457);
            float index_primexp_122623 = sitofp_i64_f32(i_122622);
            float defunc_0_f_res_f_res_122624 = 1.0F + index_primexp_122623;
            
            defunc_0_f_res_122621 = defunc_0_f_res_f_res_122624;
        }
        
        float defunc_0_f_res_122625;
        
        if (cond_122620) {
            defunc_0_f_res_122625 = 0.0F;
        } else {
            int64_t i_122626 = add64(gtid_115220, x_122457);
            float x_122627 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115214 *
                                                    ctx_param_ext_119638 +
                                                    i_122626 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_122625 = x_122627;
        }
        
        float x_j_122628 = defunc_0_f_res_122621 - defunc_0_f_res_122461;
        float abs_res_122629 = (float) fabs(x_j_122628);
        float tmp1_122630 = abs_res_122629 / x_122458;
        float x_122631 = tmp1_122630 * tmp1_122630;
        float y_122632 = tmp1_122630 * x_122631;
        float tmp2_122633 = 1.0F - y_122632;
        float x_122634 = tmp2_122633 * tmp2_122633;
        float tmp3_122635 = tmp2_122633 * x_122634;
        float w_j_122636 = defunc_0_f_res_122625 * tmp3_122635;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122617 = local_acc_122668;
        }
        // Load next params
        {
            x_122618 = w_j_122636;
        }
        // Red body
        {
            float defunc_1_op_res_122619 = x_122617 + x_122618;
            
            local_acc_122668 = defunc_1_op_res_122619;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122665.mem)[flat_tid_115219] =
        local_acc_122668;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128281_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128281_end -
                 futhark_mc_segred_stage_1_parloop_128281_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128281_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128281_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128281_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128278(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115219 = tid;
    int num_tasks_122664 = info.nsubtasks;
    struct futhark_mc_task_128277 *futhark_mc_task_128277 =
                                  (struct futhark_mc_task_128277 *) args;
    struct futhark_context *ctx = futhark_mc_task_128277->ctx;
    uint64_t futhark_mc_segred_task_128278_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128278_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128277->free_n_112520;
    int64_t gtid_115214 = futhark_mc_task_128277->free_gtid_115214;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128277->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128277->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128277->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128277->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_122457 = futhark_mc_task_128277->free_x_122457;
    float x_122458 = futhark_mc_task_128277->free_x_122458;
    float defunc_0_f_res_122461 =
          futhark_mc_task_128277->free_defunc_0_f_res_122461;
    float defunc_2_reduce_res_122462 =
          *futhark_mc_task_128277->retval_defunc_2_reduce_res_122462;
    size_t reduce_stage_1_tid_res_arr_mem_122665_cached_sizze_128279 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122665 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122665_cached_sizze_128279 <
        (size_t) ((int64_t) 4 * num_tasks_122664)) {
        reduce_stage_1_tid_res_arr_mem_122665 =
            realloc(reduce_stage_1_tid_res_arr_mem_122665, (int64_t) 4 *
                    num_tasks_122664);
        reduce_stage_1_tid_res_arr_mem_122665_cached_sizze_128279 =
            (int64_t) 4 * num_tasks_122664;
    }
    
    int64_t iter_122667;
    struct futhark_mc_segred_stage_1_parloop_struct_128280
    futhark_mc_segred_stage_1_parloop_struct_128280;
    
    futhark_mc_segred_stage_1_parloop_struct_128280.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_gtid_115214 =
        gtid_115214;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_x_122457 = x_122457;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_x_122458 = x_122458;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_defunc_0_f_res_122461 =
        defunc_0_f_res_122461;
    futhark_mc_segred_stage_1_parloop_struct_128280.free_reduce_stage_1_tid_res_arr_mem_122665 =
        reduce_stage_1_tid_res_arr_mem_122665;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128281_task;
    
    futhark_mc_segred_stage_1_parloop_128281_task.name =
        "futhark_mc_segred_stage_1_parloop_128281";
    futhark_mc_segred_stage_1_parloop_128281_task.fn =
        futhark_mc_segred_stage_1_parloop_128281;
    futhark_mc_segred_stage_1_parloop_128281_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128280;
    futhark_mc_segred_stage_1_parloop_128281_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128281_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128281_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128281_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128281_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128281_task);
    
    if (futhark_mc_segred_stage_1_parloop_128281_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128281_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128281_total_end -
                 futhark_mc_segred_stage_1_parloop_128281_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128281_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128281_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128281_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122462 = 0.0F;
    }
    
    float x_122669;
    float x_122670;
    
    for (int32_t i_122672 = 0; i_122672 < num_tasks_122664; i_122672++) {
        flat_tid_115219 = i_122672;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122669 = defunc_2_reduce_res_122462;
            }
            // load next params
            {
                x_122670 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122665)[flat_tid_115219];
            }
            // red body
            {
                float defunc_1_op_res_122671 = x_122669 + x_122670;
                
                defunc_2_reduce_res_122462 = defunc_1_op_res_122671;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122665);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128278_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128278_end -
                 futhark_mc_segred_task_128278_start;
        
        ctx->futhark_mc_segred_task_128278_runs[tid]++;
        ctx->futhark_mc_segred_task_128278_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128278_iter[tid] += iterations;
    }
    *futhark_mc_task_128277->retval_defunc_2_reduce_res_122462 =
        defunc_2_reduce_res_122462;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128282 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115214;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_122457;
    float free_x_122458;
    float free_defunc_0_f_res_122461;
    float free_a0_122483;
    float *retval_defunc_2_reduce_res_122484;
};
struct futhark_mc_segred_stage_1_parloop_struct_128285 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115214;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_122457;
    float free_x_122458;
    float free_defunc_0_f_res_122461;
    float free_a0_122483;
    char *free_reduce_stage_1_tid_res_arr_mem_122674;
};
static int futhark_mc_segred_stage_1_parloop_128286(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115221,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128285
    *futhark_mc_segred_stage_1_parloop_struct_128285 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128285 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128285->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128286_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128286_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_n_112520;
    int64_t gtid_115214 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_gtid_115214;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128285->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128285->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_122457 =
            futhark_mc_segred_stage_1_parloop_struct_128285->free_x_122457;
    float x_122458 =
          futhark_mc_segred_stage_1_parloop_struct_128285->free_x_122458;
    float defunc_0_f_res_122461 =
          futhark_mc_segred_stage_1_parloop_struct_128285->free_defunc_0_f_res_122461;
    float a0_122483 =
          futhark_mc_segred_stage_1_parloop_struct_128285->free_a0_122483;
    struct memblock reduce_stage_1_tid_res_arr_mem_122674 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122674",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128285->free_reduce_stage_1_tid_res_arr_mem_122674,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122676 = start;
    float x_122637;
    float x_122638;
    float local_acc_122677 = 0.0F;
    
    for (; iter_122676 < end; iter_122676++) {
        int64_t gtid_115222 = iter_122676;
        bool cond_122640 = sle64(n_112520, gtid_115222);
        float defunc_0_f_res_122641;
        
        if (cond_122640) {
            defunc_0_f_res_122641 = 0.0F;
        } else {
            int64_t i_122642 = add64(gtid_115222, x_122457);
            float index_primexp_122643 = sitofp_i64_f32(i_122642);
            float defunc_0_f_res_f_res_122644 = 1.0F + index_primexp_122643;
            
            defunc_0_f_res_122641 = defunc_0_f_res_f_res_122644;
        }
        
        float defunc_0_f_res_122645;
        
        if (cond_122640) {
            defunc_0_f_res_122645 = 0.0F;
        } else {
            int64_t i_122646 = add64(gtid_115222, x_122457);
            float x_122647 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115214 *
                                                    ctx_param_ext_119638 +
                                                    i_122646 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_122645 = x_122647;
        }
        
        float x_j_122648 = defunc_0_f_res_122641 - defunc_0_f_res_122461;
        float abs_res_122649 = (float) fabs(x_j_122648);
        float tmp1_122650 = abs_res_122649 / x_122458;
        float x_122651 = tmp1_122650 * tmp1_122650;
        float y_122652 = tmp1_122650 * x_122651;
        float tmp2_122653 = 1.0F - y_122652;
        float x_122654 = tmp2_122653 * tmp2_122653;
        float tmp3_122655 = tmp2_122653 * x_122654;
        float tmp4_122656 = defunc_0_f_res_122645 * tmp3_122655;
        float defunc_0_f_res_122657;
        
        if (cond_122640) {
            defunc_0_f_res_122657 = 0.0F;
        } else {
            int64_t i_122658 = add64(gtid_115222, x_122457);
            float x_122659 = ((float *) mem_119788.mem)[gtid_115214 * n_112520 +
                                                        i_122658];
            
            defunc_0_f_res_122657 = x_122659;
        }
        
        float x_122660 = a0_122483 * tmp4_122656;
        float defunc_9_fit_fun_res_122661 = defunc_0_f_res_122657 * x_122660;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122637 = local_acc_122677;
        }
        // Load next params
        {
            x_122638 = defunc_9_fit_fun_res_122661;
        }
        // Red body
        {
            float defunc_1_op_res_122639 = x_122637 + x_122638;
            
            local_acc_122677 = defunc_1_op_res_122639;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122674.mem)[flat_tid_115221] =
        local_acc_122677;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128286_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128286_end -
                 futhark_mc_segred_stage_1_parloop_128286_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128286_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128286_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128286_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128283(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115221 = tid;
    int num_tasks_122673 = info.nsubtasks;
    struct futhark_mc_task_128282 *futhark_mc_task_128282 =
                                  (struct futhark_mc_task_128282 *) args;
    struct futhark_context *ctx = futhark_mc_task_128282->ctx;
    uint64_t futhark_mc_segred_task_128283_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128283_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128282->free_n_112520;
    int64_t gtid_115214 = futhark_mc_task_128282->free_gtid_115214;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128282->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128282->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128282->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128282->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128282->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_122457 = futhark_mc_task_128282->free_x_122457;
    float x_122458 = futhark_mc_task_128282->free_x_122458;
    float defunc_0_f_res_122461 =
          futhark_mc_task_128282->free_defunc_0_f_res_122461;
    float a0_122483 = futhark_mc_task_128282->free_a0_122483;
    float defunc_2_reduce_res_122484 =
          *futhark_mc_task_128282->retval_defunc_2_reduce_res_122484;
    size_t reduce_stage_1_tid_res_arr_mem_122674_cached_sizze_128284 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122674 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122674_cached_sizze_128284 <
        (size_t) ((int64_t) 4 * num_tasks_122673)) {
        reduce_stage_1_tid_res_arr_mem_122674 =
            realloc(reduce_stage_1_tid_res_arr_mem_122674, (int64_t) 4 *
                    num_tasks_122673);
        reduce_stage_1_tid_res_arr_mem_122674_cached_sizze_128284 =
            (int64_t) 4 * num_tasks_122673;
    }
    
    int64_t iter_122676;
    struct futhark_mc_segred_stage_1_parloop_struct_128285
    futhark_mc_segred_stage_1_parloop_struct_128285;
    
    futhark_mc_segred_stage_1_parloop_struct_128285.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_gtid_115214 =
        gtid_115214;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_x_122457 = x_122457;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_x_122458 = x_122458;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_defunc_0_f_res_122461 =
        defunc_0_f_res_122461;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_a0_122483 = a0_122483;
    futhark_mc_segred_stage_1_parloop_struct_128285.free_reduce_stage_1_tid_res_arr_mem_122674 =
        reduce_stage_1_tid_res_arr_mem_122674;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128286_task;
    
    futhark_mc_segred_stage_1_parloop_128286_task.name =
        "futhark_mc_segred_stage_1_parloop_128286";
    futhark_mc_segred_stage_1_parloop_128286_task.fn =
        futhark_mc_segred_stage_1_parloop_128286;
    futhark_mc_segred_stage_1_parloop_128286_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128285;
    futhark_mc_segred_stage_1_parloop_128286_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128286_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128286_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128286_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128286_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128286_task);
    
    if (futhark_mc_segred_stage_1_parloop_128286_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128286_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128286_total_end -
                 futhark_mc_segred_stage_1_parloop_128286_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128286_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128286_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128286_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122484 = 0.0F;
    }
    
    float x_122678;
    float x_122679;
    
    for (int32_t i_122681 = 0; i_122681 < num_tasks_122673; i_122681++) {
        flat_tid_115221 = i_122681;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122678 = defunc_2_reduce_res_122484;
            }
            // load next params
            {
                x_122679 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122674)[flat_tid_115221];
            }
            // red body
            {
                float defunc_1_op_res_122680 = x_122678 + x_122679;
                
                defunc_2_reduce_res_122484 = defunc_1_op_res_122680;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122674);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128283_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128283_end -
                 futhark_mc_segred_task_128283_start;
        
        ctx->futhark_mc_segred_task_128283_runs[tid]++;
        ctx->futhark_mc_segred_task_128283_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128283_iter[tid] += iterations;
    }
    *futhark_mc_task_128282->retval_defunc_2_reduce_res_122484 =
        defunc_2_reduce_res_122484;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128276(void *args, int64_t start,
                                            int64_t end, int flat_tid_115217,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128275
    *futhark_mc_segmap_parloop_struct_128275 =
    (struct futhark_mc_segmap_parloop_struct_128275 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128275->ctx;
    uint64_t futhark_mc_segmap_parloop_128276_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128276_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128275->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128275->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128275->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128275->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128275->free_i_112596;
    int64_t gtid_115214 =
            futhark_mc_segmap_parloop_struct_128275->free_gtid_115214;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128275->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128275->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128275->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128275->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128275->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128275->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128275->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119795 = {.desc ="mem_119795", .mem =
                                  futhark_mc_segmap_parloop_struct_128275->free_mem_119795,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122616 = start;
    
    for (; iter_122616 < end; iter_122616++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122662 = l_n_m_112570;
        int64_t gtid_115218 = iter_122616;
        int64_t remnant_122663 = iter_122616 - gtid_115218;
        int64_t x_122457 = ((int64_t *) mem_119544.mem)[gtid_115214 *
                                                        l_n_m_112570 +
                                                        gtid_115218];
        float x_122458 = ((float *) mem_119548.mem)[gtid_115214 * l_n_m_112570 +
                                                    gtid_115218];
        int64_t min_arg_122459 = mul64(t_jump_112527, gtid_115218);
        int64_t min_res_122460 = smin64(i_112596, min_arg_122459);
        float defunc_0_f_res_122461 = sitofp_i64_f32(min_res_122460);
        float defunc_2_reduce_res_122462;
        int64_t flat_tid_115219 = (int64_t) 0;
        int32_t num_tasks_122664;
        struct futhark_mc_task_128277 futhark_mc_task_128277;
        
        futhark_mc_task_128277.ctx = ctx;
        futhark_mc_task_128277.free_n_112520 = n_112520;
        futhark_mc_task_128277.free_gtid_115214 = gtid_115214;
        futhark_mc_task_128277.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128277.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128277.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128277.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128277.free_x_122457 = x_122457;
        futhark_mc_task_128277.free_x_122458 = x_122458;
        futhark_mc_task_128277.free_defunc_0_f_res_122461 =
            defunc_0_f_res_122461;
        futhark_mc_task_128277.retval_defunc_2_reduce_res_122462 =
            &defunc_2_reduce_res_122462;
        
        struct scheduler_segop futhark_mc_task_128277_task;
        
        futhark_mc_task_128277_task.args = &futhark_mc_task_128277;
        futhark_mc_task_128277_task.top_level_fn =
            futhark_mc_segred_task_128278;
        futhark_mc_task_128277_task.name = "futhark_mc_segred_task_128278";
        futhark_mc_task_128277_task.iterations = l_window_112524;
        futhark_mc_task_128277_task.task_time =
            &ctx->futhark_mc_segred_task_128278_total_time;
        futhark_mc_task_128277_task.task_iter =
            &ctx->futhark_mc_segred_task_128278_total_iter;
        futhark_mc_task_128277_task.sched = STATIC;
        futhark_mc_task_128277_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128278_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128277_task);
        
        if (futhark_mc_segred_task_128278_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_122483 = 1.0F / defunc_2_reduce_res_122462;
        float defunc_2_reduce_res_122484;
        int64_t flat_tid_115221 = (int64_t) 0;
        int32_t num_tasks_122673;
        struct futhark_mc_task_128282 futhark_mc_task_128282;
        
        futhark_mc_task_128282.ctx = ctx;
        futhark_mc_task_128282.free_n_112520 = n_112520;
        futhark_mc_task_128282.free_gtid_115214 = gtid_115214;
        futhark_mc_task_128282.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128282.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128282.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128282.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128282.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128282.free_x_122457 = x_122457;
        futhark_mc_task_128282.free_x_122458 = x_122458;
        futhark_mc_task_128282.free_defunc_0_f_res_122461 =
            defunc_0_f_res_122461;
        futhark_mc_task_128282.free_a0_122483 = a0_122483;
        futhark_mc_task_128282.retval_defunc_2_reduce_res_122484 =
            &defunc_2_reduce_res_122484;
        
        struct scheduler_segop futhark_mc_task_128282_task;
        
        futhark_mc_task_128282_task.args = &futhark_mc_task_128282;
        futhark_mc_task_128282_task.top_level_fn =
            futhark_mc_segred_task_128283;
        futhark_mc_task_128282_task.name = "futhark_mc_segred_task_128283";
        futhark_mc_task_128282_task.iterations = l_window_112524;
        futhark_mc_task_128282_task.task_time =
            &ctx->futhark_mc_segred_task_128283_total_time;
        futhark_mc_task_128282_task.task_iter =
            &ctx->futhark_mc_segred_task_128283_total_iter;
        futhark_mc_task_128282_task.sched = STATIC;
        futhark_mc_task_128282_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128283_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128282_task);
        
        if (futhark_mc_segred_task_128283_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_119795.mem)[gtid_115218] = defunc_2_reduce_res_122484;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128276_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128276_end -
                 futhark_mc_segmap_parloop_128276_start;
        
        ctx->futhark_mc_segmap_parloop_128276_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128276_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128276_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128274(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115217 = tid;
    int num_tasks_122565 = info.nsubtasks;
    struct futhark_mc_task_128270 *futhark_mc_task_128270 =
                                  (struct futhark_mc_task_128270 *) args;
    struct futhark_context *ctx = futhark_mc_task_128270->ctx;
    uint64_t futhark_mc_segmap_nested_task_128274_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128274_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128270->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128270->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128270->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128270->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128270->free_i_112596;
    int64_t gtid_115214 = futhark_mc_task_128270->free_gtid_115214;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128270->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128270->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128270->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128270->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128270->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128270->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128270->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119795 = {.desc ="mem_119795", .mem =
                                  futhark_mc_task_128270->free_mem_119795,
                                  .size =0, .references =NULL};
    int64_t iter_122616;
    struct futhark_mc_segmap_parloop_struct_128275
    futhark_mc_segmap_parloop_struct_128275;
    
    futhark_mc_segmap_parloop_struct_128275.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128275.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128275.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128275.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128275.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128275.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128275.free_gtid_115214 = gtid_115214;
    futhark_mc_segmap_parloop_struct_128275.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128275.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128275.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128275.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128275.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128275.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128275.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128275.free_mem_119795 = mem_119795.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128276_task;
    
    futhark_mc_segmap_parloop_128276_task.name =
        "futhark_mc_segmap_parloop_128276";
    futhark_mc_segmap_parloop_128276_task.fn = futhark_mc_segmap_parloop_128276;
    futhark_mc_segmap_parloop_128276_task.args =
        &futhark_mc_segmap_parloop_struct_128275;
    futhark_mc_segmap_parloop_128276_task.iterations = iterations;
    futhark_mc_segmap_parloop_128276_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128276_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128276_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128276_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128276_task);
    
    if (futhark_mc_segmap_parloop_128276_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128276_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128276_total_end -
                 futhark_mc_segmap_parloop_128276_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128276_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128276_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128276_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128274_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128274_end -
                 futhark_mc_segmap_nested_task_128274_start;
        
        ctx->futhark_mc_segmap_nested_task_128274_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128274_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128274_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128268(void *args, int64_t start,
                                            int64_t end, int flat_tid_115213,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128267
    *futhark_mc_segmap_parloop_struct_128267 =
    (struct futhark_mc_segmap_parloop_struct_128267 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128267->ctx;
    uint64_t futhark_mc_segmap_parloop_128268_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128268_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128267->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128267->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128267->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128267->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128267->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128267->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128267->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128267->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128267->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128267->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128267->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128267->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128267->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128267->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119814 = {.desc ="mem_119814", .mem =
                                  futhark_mc_segmap_parloop_struct_128267->free_mem_119814,
                                  .size =0, .references =NULL};
    size_t mem_119795_cached_sizze_128269 = 0;
    char *mem_119795 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122456 = start;
    
    if (mem_119795_cached_sizze_128269 < (size_t) bytes_119490) {
        mem_119795 = realloc(mem_119795, bytes_119490);
        mem_119795_cached_sizze_128269 = bytes_119490;
    }
    for (; iter_122456 < end; iter_122456++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122563 = m_112519;
        int64_t gtid_115214 = iter_122456;
        int64_t remnant_122564 = iter_122456 - gtid_115214;
        int64_t flat_tid_115215 = (int64_t) 0;
        int32_t num_tasks_122565;
        int64_t flat_tid_115217 = (int64_t) 0;
        struct futhark_mc_task_128270 futhark_mc_task_128270;
        
        futhark_mc_task_128270.ctx = ctx;
        futhark_mc_task_128270.free_n_112520 = n_112520;
        futhark_mc_task_128270.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128270.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128270.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128270.free_i_112596 = i_112596;
        futhark_mc_task_128270.free_gtid_115214 = gtid_115214;
        futhark_mc_task_128270.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128270.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128270.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128270.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128270.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128270.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128270.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128270.free_mem_119795 = mem_119795;
        
        struct scheduler_segop futhark_mc_task_128270_task;
        
        futhark_mc_task_128270_task.args = &futhark_mc_task_128270;
        futhark_mc_task_128270_task.top_level_fn =
            futhark_mc_segmap_task_128271;
        futhark_mc_task_128270_task.name = "futhark_mc_segmap_task_128271";
        futhark_mc_task_128270_task.iterations = l_n_m_112570;
        futhark_mc_task_128270_task.task_time =
            &ctx->futhark_mc_segmap_task_128271_total_time;
        futhark_mc_task_128270_task.task_iter =
            &ctx->futhark_mc_segmap_task_128271_total_iter;
        futhark_mc_task_128270_task.sched = STATIC;
        futhark_mc_task_128270_task.nested_fn =
            futhark_mc_segmap_nested_task_128274;
        
        int futhark_mc_segmap_task_128271_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128270_task);
        
        if (futhark_mc_segmap_task_128271_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119814.mem + gtid_115214 * l_n_m_112570 * (int64_t) 4,
                mem_119795 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119795);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128268_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128268_end -
                 futhark_mc_segmap_parloop_128268_start;
        
        ctx->futhark_mc_segmap_parloop_128268_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128268_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128268_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128266(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115213 = tid;
    int num_tasks_122393 = info.nsubtasks;
    struct futhark_mc_task_128261 *futhark_mc_task_128261 =
                                  (struct futhark_mc_task_128261 *) args;
    struct futhark_context *ctx = futhark_mc_task_128261->ctx;
    uint64_t futhark_mc_segmap_nested_task_128266_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128266_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128261->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128261->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128261->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128261->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128261->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128261->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128261->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128261->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128261->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128261->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128261->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128261->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128261->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128261->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119814 = {.desc ="mem_119814", .mem =
                                  futhark_mc_task_128261->free_mem_119814,
                                  .size =0, .references =NULL};
    int64_t iter_122456;
    struct futhark_mc_segmap_parloop_struct_128267
    futhark_mc_segmap_parloop_struct_128267;
    
    futhark_mc_segmap_parloop_struct_128267.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128267.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128267.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128267.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128267.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128267.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128267.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128267.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128267.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128267.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128267.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128267.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128267.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128267.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128267.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128267.free_mem_119814 = mem_119814.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128268_task;
    
    futhark_mc_segmap_parloop_128268_task.name =
        "futhark_mc_segmap_parloop_128268";
    futhark_mc_segmap_parloop_128268_task.fn = futhark_mc_segmap_parloop_128268;
    futhark_mc_segmap_parloop_128268_task.args =
        &futhark_mc_segmap_parloop_struct_128267;
    futhark_mc_segmap_parloop_128268_task.iterations = iterations;
    futhark_mc_segmap_parloop_128268_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128268_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128268_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128268_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128268_task);
    
    if (futhark_mc_segmap_parloop_128268_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128268_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128268_total_end -
                 futhark_mc_segmap_parloop_128268_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128268_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128268_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128268_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128266_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128266_end -
                 futhark_mc_segmap_nested_task_128266_start;
        
        ctx->futhark_mc_segmap_nested_task_128266_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128266_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128266_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128287 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119854;
    char *free_mem_119858;
};
struct futhark_mc_segmap_parloop_struct_128289 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119854;
    char *free_mem_119858;
};
static int futhark_mc_segmap_parloop_128290(void *args, int64_t start,
                                            int64_t end, int flat_tid_115396,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128289
    *futhark_mc_segmap_parloop_struct_128289 =
    (struct futhark_mc_segmap_parloop_struct_128289 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128289->ctx;
    uint64_t futhark_mc_segmap_parloop_128290_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128290_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128289->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128289->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128289->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128289->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128289->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128289->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128289->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128289->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128289->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128289->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128289->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128289->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128289->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128289->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119854 = {.desc ="mem_119854", .mem =
                                  futhark_mc_segmap_parloop_struct_128289->free_mem_119854,
                                  .size =0, .references =NULL};
    struct memblock mem_119858 = {.desc ="mem_119858", .mem =
                                  futhark_mc_segmap_parloop_struct_128289->free_mem_119858,
                                  .size =0, .references =NULL};
    size_t mem_119823_cached_sizze_128291 = 0;
    char *mem_119823 = NULL;
    size_t mem_119826_cached_sizze_128292 = 0;
    char *mem_119826 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122683 = start;
    
    if (mem_119823_cached_sizze_128291 < (size_t) bytes_119490) {
        mem_119823 = realloc(mem_119823, bytes_119490);
        mem_119823_cached_sizze_128291 = bytes_119490;
    }
    if (mem_119826_cached_sizze_128292 < (size_t) bytes_119490) {
        mem_119826 = realloc(mem_119826, bytes_119490);
        mem_119826_cached_sizze_128292 = bytes_119490;
    }
    for (; iter_122683 < end; iter_122683++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122767 = m_112519;
        int64_t gtid_115397 = iter_122683;
        int64_t remnant_122768 = iter_122683 - gtid_115397;
        
        for (int64_t i_122684 = 0; i_122684 < l_n_m_112570; i_122684++) {
            int64_t x_122687 = ((int64_t *) mem_119544.mem)[gtid_115397 *
                                                            l_n_m_112570 +
                                                            i_122684];
            float x_122688 = ((float *) mem_119548.mem)[gtid_115397 *
                                                        l_n_m_112570 +
                                                        i_122684];
            int64_t min_arg_122689 = mul64(t_jump_112527, i_122684);
            int64_t min_res_122690 = smin64(i_112596, min_arg_122689);
            float defunc_0_f_res_122691 = sitofp_i64_f32(min_res_122690);
            float defunc_2_reduce_res_122692;
            float defunc_2_reduce_res_122693;
            float defunc_2_reduce_res_122694;
            float redout_122696;
            float redout_122697;
            float redout_122698;
            
            redout_122696 = 0.0F;
            redout_122697 = 0.0F;
            redout_122698 = 0.0F;
            for (int64_t i_122695 = 0; i_122695 < l_window_112524; i_122695++) {
                bool cond_122699 = sle64(n_112520, i_122695);
                float defunc_0_f_res_122700;
                
                if (cond_122699) {
                    defunc_0_f_res_122700 = 0.0F;
                } else {
                    int64_t i_122701 = add64(x_122687, i_122695);
                    float index_primexp_122702 = sitofp_i64_f32(i_122701);
                    float defunc_0_f_res_f_res_122703 = 1.0F +
                          index_primexp_122702;
                    
                    defunc_0_f_res_122700 = defunc_0_f_res_f_res_122703;
                }
                
                float defunc_0_f_res_122704;
                
                if (cond_122699) {
                    defunc_0_f_res_122704 = 0.0F;
                } else {
                    int64_t i_122705 = add64(x_122687, i_122695);
                    float x_122706 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115397 *
                                                            ctx_param_ext_119638 +
                                                            i_122705 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_122704 = x_122706;
                }
                
                float x_j_122707 = defunc_0_f_res_122700 -
                      defunc_0_f_res_122691;
                float abs_res_122708 = (float) fabs(x_j_122707);
                float tmp1_122709 = abs_res_122708 / x_122688;
                float x_122710 = tmp1_122709 * tmp1_122709;
                float y_122711 = tmp1_122709 * x_122710;
                float tmp2_122712 = 1.0F - y_122711;
                float x_122713 = tmp2_122712 * tmp2_122712;
                float tmp3_122714 = tmp2_122712 * x_122713;
                float w_j_122715 = defunc_0_f_res_122704 * tmp3_122714;
                float xw_j_122716 = x_j_122707 * w_j_122715;
                float x2w_j_122717 = x_j_122707 * xw_j_122716;
                float defunc_1_op_res_122718 = w_j_122715 + redout_122696;
                float defunc_1_op_res_122719 = xw_j_122716 + redout_122697;
                float defunc_1_op_res_122720 = x2w_j_122717 + redout_122698;
                float redout_tmp_122771 = defunc_1_op_res_122718;
                float redout_tmp_122772 = defunc_1_op_res_122719;
                float redout_tmp_122773 = defunc_1_op_res_122720;
                
                redout_122696 = redout_tmp_122771;
                redout_122697 = redout_tmp_122772;
                redout_122698 = redout_tmp_122773;
            }
            defunc_2_reduce_res_122692 = redout_122696;
            defunc_2_reduce_res_122693 = redout_122697;
            defunc_2_reduce_res_122694 = redout_122698;
            
            float x_122721 = defunc_2_reduce_res_122692 *
                  defunc_2_reduce_res_122694;
            float y_122722 = defunc_2_reduce_res_122693 *
                  defunc_2_reduce_res_122693;
            float y_122723 = x_122721 - y_122722;
            float det1_122724 = 1.0F / y_122723;
            float a11_122725 = defunc_2_reduce_res_122694 * det1_122724;
            float negate_arg_122726 = defunc_2_reduce_res_122693 * det1_122724;
            float b11_122727 = 0.0F - negate_arg_122726;
            float c11_122728 = defunc_2_reduce_res_122692 * det1_122724;
            float defunc_2_reduce_res_122729;
            float defunc_2_reduce_res_122730;
            float redout_122732;
            float redout_122733;
            
            redout_122732 = 0.0F;
            redout_122733 = 0.0F;
            for (int64_t i_122731 = 0; i_122731 < l_window_112524; i_122731++) {
                bool cond_122734 = sle64(n_112520, i_122731);
                float defunc_0_f_res_122735;
                
                if (cond_122734) {
                    defunc_0_f_res_122735 = 0.0F;
                } else {
                    int64_t i_122736 = add64(x_122687, i_122731);
                    float index_primexp_122737 = sitofp_i64_f32(i_122736);
                    float defunc_0_f_res_f_res_122738 = 1.0F +
                          index_primexp_122737;
                    
                    defunc_0_f_res_122735 = defunc_0_f_res_f_res_122738;
                }
                
                float defunc_0_f_res_122739;
                
                if (cond_122734) {
                    defunc_0_f_res_122739 = 0.0F;
                } else {
                    int64_t i_122740 = add64(x_122687, i_122731);
                    float x_122741 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115397 *
                                                            ctx_param_ext_119638 +
                                                            i_122740 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_122739 = x_122741;
                }
                
                float x_j_122742 = defunc_0_f_res_122735 -
                      defunc_0_f_res_122691;
                float abs_res_122743 = (float) fabs(x_j_122742);
                float tmp1_122744 = abs_res_122743 / x_122688;
                float x_122745 = tmp1_122744 * tmp1_122744;
                float y_122746 = tmp1_122744 * x_122745;
                float tmp2_122747 = 1.0F - y_122746;
                float x_122748 = tmp2_122747 * tmp2_122747;
                float tmp3_122749 = tmp2_122747 * x_122748;
                float tmp4_122750 = defunc_0_f_res_122739 * tmp3_122749;
                float defunc_1_f_res_122751 = x_j_122742 * tmp4_122750;
                float defunc_0_f_res_122752;
                
                if (cond_122734) {
                    defunc_0_f_res_122752 = 0.0F;
                } else {
                    int64_t i_122753 = add64(x_122687, i_122731);
                    float x_122754 = ((float *) mem_119788.mem)[gtid_115397 *
                                                                n_112520 +
                                                                i_122753];
                    
                    defunc_0_f_res_122752 = x_122754;
                }
                
                float x_122755 = a11_122725 * tmp4_122750;
                float y_122756 = b11_122727 * defunc_1_f_res_122751;
                float x_122757 = x_122755 + y_122756;
                float defunc_9_fit_fun_res_122758 = defunc_0_f_res_122752 *
                      x_122757;
                float x_122759 = b11_122727 * tmp4_122750;
                float y_122760 = c11_122728 * defunc_1_f_res_122751;
                float x_122761 = x_122759 + y_122760;
                float defunc_9_slope_fun_res_122762 = defunc_0_f_res_122752 *
                      x_122761;
                float defunc_1_op_res_122763 = defunc_9_fit_fun_res_122758 +
                      redout_122732;
                float defunc_1_op_res_122764 = defunc_9_slope_fun_res_122762 +
                      redout_122733;
                float redout_tmp_122774 = defunc_1_op_res_122763;
                float redout_tmp_122775 = defunc_1_op_res_122764;
                
                redout_122732 = redout_tmp_122774;
                redout_122733 = redout_tmp_122775;
            }
            defunc_2_reduce_res_122729 = redout_122732;
            defunc_2_reduce_res_122730 = redout_122733;
            ((float *) mem_119823)[i_122684] = defunc_2_reduce_res_122729;
            ((float *) mem_119826)[i_122684] = defunc_2_reduce_res_122730;
        }
        memmove(mem_119854.mem + gtid_115397 * l_n_m_112570 * (int64_t) 4,
                mem_119823 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_119858.mem + gtid_115397 * l_n_m_112570 * (int64_t) 4,
                mem_119826 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119823);
    free(mem_119826);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128290_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128290_end -
                 futhark_mc_segmap_parloop_128290_start;
        
        ctx->futhark_mc_segmap_parloop_128290_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128290_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128290_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128288(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115396 = tid;
    int num_tasks_122682 = info.nsubtasks;
    struct futhark_mc_task_128287 *futhark_mc_task_128287 =
                                  (struct futhark_mc_task_128287 *) args;
    struct futhark_context *ctx = futhark_mc_task_128287->ctx;
    uint64_t futhark_mc_segmap_task_128288_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128288_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128287->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128287->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128287->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128287->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128287->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128287->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128287->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128287->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128287->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128287->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128287->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128287->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128287->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128287->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119854 = {.desc ="mem_119854", .mem =
                                  futhark_mc_task_128287->free_mem_119854,
                                  .size =0, .references =NULL};
    struct memblock mem_119858 = {.desc ="mem_119858", .mem =
                                  futhark_mc_task_128287->free_mem_119858,
                                  .size =0, .references =NULL};
    int64_t iter_122683;
    struct futhark_mc_segmap_parloop_struct_128289
    futhark_mc_segmap_parloop_struct_128289;
    
    futhark_mc_segmap_parloop_struct_128289.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128289.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128289.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128289.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128289.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128289.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128289.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128289.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128289.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128289.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128289.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128289.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128289.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128289.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128289.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128289.free_mem_119854 = mem_119854.mem;
    futhark_mc_segmap_parloop_struct_128289.free_mem_119858 = mem_119858.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128290_task;
    
    futhark_mc_segmap_parloop_128290_task.name =
        "futhark_mc_segmap_parloop_128290";
    futhark_mc_segmap_parloop_128290_task.fn = futhark_mc_segmap_parloop_128290;
    futhark_mc_segmap_parloop_128290_task.args =
        &futhark_mc_segmap_parloop_struct_128289;
    futhark_mc_segmap_parloop_128290_task.iterations = iterations;
    futhark_mc_segmap_parloop_128290_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128290_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128290_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128290_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128290_task);
    
    if (futhark_mc_segmap_parloop_128290_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128290_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128290_total_end -
                 futhark_mc_segmap_parloop_128290_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128290_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128290_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128290_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128288_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128288_end -
                 futhark_mc_segmap_task_128288_start;
        
        ctx->futhark_mc_segmap_task_128288_runs[tid]++;
        ctx->futhark_mc_segmap_task_128288_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128288_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128294 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119854;
    char *free_mem_119858;
};
struct futhark_mc_task_128298 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115399;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119817;
    char *free_mem_119820;
};
struct futhark_mc_segmap_parloop_struct_128300 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115399;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119817;
    char *free_mem_119820;
};
static int futhark_mc_segmap_parloop_128301(void *args, int64_t start,
                                            int64_t end, int flat_tid_115400,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128300
    *futhark_mc_segmap_parloop_struct_128300 =
    (struct futhark_mc_segmap_parloop_struct_128300 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128300->ctx;
    uint64_t futhark_mc_segmap_parloop_128301_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128301_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128300->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128300->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128300->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128300->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128300->free_i_112596;
    int64_t gtid_115399 =
            futhark_mc_segmap_parloop_struct_128300->free_gtid_115399;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128300->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128300->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128300->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128300->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128300->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128300->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128300->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119817 = {.desc ="mem_119817", .mem =
                                  futhark_mc_segmap_parloop_struct_128300->free_mem_119817,
                                  .size =0, .references =NULL};
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128300->free_mem_119820,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122939 = start;
    
    for (; iter_122939 < end; iter_122939++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123000 = l_n_m_112570;
        int64_t gtid_115401 = iter_122939;
        int64_t remnant_123001 = iter_122939 - gtid_115401;
        int64_t x_122858 = ((int64_t *) mem_119544.mem)[gtid_115399 *
                                                        l_n_m_112570 +
                                                        gtid_115401];
        float x_122859 = ((float *) mem_119548.mem)[gtid_115399 * l_n_m_112570 +
                                                    gtid_115401];
        int64_t min_arg_122860 = mul64(t_jump_112527, gtid_115401);
        int64_t min_res_122861 = smin64(i_112596, min_arg_122860);
        float defunc_0_f_res_122862 = sitofp_i64_f32(min_res_122861);
        float defunc_2_reduce_res_122863;
        float defunc_2_reduce_res_122864;
        float defunc_2_reduce_res_122865;
        float redout_122941;
        float redout_122942;
        float redout_122943;
        
        redout_122941 = 0.0F;
        redout_122942 = 0.0F;
        redout_122943 = 0.0F;
        for (int64_t i_122940 = 0; i_122940 < l_window_112524; i_122940++) {
            bool cond_122944 = sle64(n_112520, i_122940);
            float defunc_0_f_res_122945;
            
            if (cond_122944) {
                defunc_0_f_res_122945 = 0.0F;
            } else {
                int64_t i_122946 = add64(x_122858, i_122940);
                float index_primexp_122947 = sitofp_i64_f32(i_122946);
                float defunc_0_f_res_f_res_122948 = 1.0F + index_primexp_122947;
                
                defunc_0_f_res_122945 = defunc_0_f_res_f_res_122948;
            }
            
            float defunc_0_f_res_122949;
            
            if (cond_122944) {
                defunc_0_f_res_122949 = 0.0F;
            } else {
                int64_t i_122950 = add64(x_122858, i_122940);
                float x_122951 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115399 *
                                                        ctx_param_ext_119638 +
                                                        i_122950 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_122949 = x_122951;
            }
            
            float x_j_122952 = defunc_0_f_res_122945 - defunc_0_f_res_122862;
            float abs_res_122953 = (float) fabs(x_j_122952);
            float tmp1_122954 = abs_res_122953 / x_122859;
            float x_122955 = tmp1_122954 * tmp1_122954;
            float y_122956 = tmp1_122954 * x_122955;
            float tmp2_122957 = 1.0F - y_122956;
            float x_122958 = tmp2_122957 * tmp2_122957;
            float tmp3_122959 = tmp2_122957 * x_122958;
            float w_j_122960 = defunc_0_f_res_122949 * tmp3_122959;
            float xw_j_122961 = x_j_122952 * w_j_122960;
            float x2w_j_122962 = x_j_122952 * xw_j_122961;
            float defunc_1_op_res_122963 = w_j_122960 + redout_122941;
            float defunc_1_op_res_122964 = xw_j_122961 + redout_122942;
            float defunc_1_op_res_122965 = x2w_j_122962 + redout_122943;
            float redout_tmp_123002 = defunc_1_op_res_122963;
            float redout_tmp_123003 = defunc_1_op_res_122964;
            float redout_tmp_123004 = defunc_1_op_res_122965;
            
            redout_122941 = redout_tmp_123002;
            redout_122942 = redout_tmp_123003;
            redout_122943 = redout_tmp_123004;
        }
        defunc_2_reduce_res_122863 = redout_122941;
        defunc_2_reduce_res_122864 = redout_122942;
        defunc_2_reduce_res_122865 = redout_122943;
        
        float x_122892 = defunc_2_reduce_res_122863 *
              defunc_2_reduce_res_122865;
        float y_122893 = defunc_2_reduce_res_122864 *
              defunc_2_reduce_res_122864;
        float y_122894 = x_122892 - y_122893;
        float det1_122895 = 1.0F / y_122894;
        float a11_122896 = defunc_2_reduce_res_122865 * det1_122895;
        float negate_arg_122897 = defunc_2_reduce_res_122864 * det1_122895;
        float b11_122898 = 0.0F - negate_arg_122897;
        float c11_122899 = defunc_2_reduce_res_122863 * det1_122895;
        float defunc_2_reduce_res_122900;
        float defunc_2_reduce_res_122901;
        float redout_122967;
        float redout_122968;
        
        redout_122967 = 0.0F;
        redout_122968 = 0.0F;
        for (int64_t i_122966 = 0; i_122966 < l_window_112524; i_122966++) {
            bool cond_122969 = sle64(n_112520, i_122966);
            float defunc_0_f_res_122970;
            
            if (cond_122969) {
                defunc_0_f_res_122970 = 0.0F;
            } else {
                int64_t i_122971 = add64(x_122858, i_122966);
                float index_primexp_122972 = sitofp_i64_f32(i_122971);
                float defunc_0_f_res_f_res_122973 = 1.0F + index_primexp_122972;
                
                defunc_0_f_res_122970 = defunc_0_f_res_f_res_122973;
            }
            
            float defunc_0_f_res_122974;
            
            if (cond_122969) {
                defunc_0_f_res_122974 = 0.0F;
            } else {
                int64_t i_122975 = add64(x_122858, i_122966);
                float x_122976 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115399 *
                                                        ctx_param_ext_119638 +
                                                        i_122975 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_122974 = x_122976;
            }
            
            float x_j_122977 = defunc_0_f_res_122970 - defunc_0_f_res_122862;
            float abs_res_122978 = (float) fabs(x_j_122977);
            float tmp1_122979 = abs_res_122978 / x_122859;
            float x_122980 = tmp1_122979 * tmp1_122979;
            float y_122981 = tmp1_122979 * x_122980;
            float tmp2_122982 = 1.0F - y_122981;
            float x_122983 = tmp2_122982 * tmp2_122982;
            float tmp3_122984 = tmp2_122982 * x_122983;
            float tmp4_122985 = defunc_0_f_res_122974 * tmp3_122984;
            float defunc_1_f_res_122986 = x_j_122977 * tmp4_122985;
            float defunc_0_f_res_122987;
            
            if (cond_122969) {
                defunc_0_f_res_122987 = 0.0F;
            } else {
                int64_t i_122988 = add64(x_122858, i_122966);
                float x_122989 = ((float *) mem_119788.mem)[gtid_115399 *
                                                            n_112520 +
                                                            i_122988];
                
                defunc_0_f_res_122987 = x_122989;
            }
            
            float x_122990 = a11_122896 * tmp4_122985;
            float y_122991 = b11_122898 * defunc_1_f_res_122986;
            float x_122992 = x_122990 + y_122991;
            float defunc_9_fit_fun_res_122993 = defunc_0_f_res_122987 *
                  x_122992;
            float x_122994 = b11_122898 * tmp4_122985;
            float y_122995 = c11_122899 * defunc_1_f_res_122986;
            float x_122996 = x_122994 + y_122995;
            float defunc_9_slope_fun_res_122997 = defunc_0_f_res_122987 *
                  x_122996;
            float defunc_1_op_res_122998 = defunc_9_fit_fun_res_122993 +
                  redout_122967;
            float defunc_1_op_res_122999 = defunc_9_slope_fun_res_122997 +
                  redout_122968;
            float redout_tmp_123005 = defunc_1_op_res_122998;
            float redout_tmp_123006 = defunc_1_op_res_122999;
            
            redout_122967 = redout_tmp_123005;
            redout_122968 = redout_tmp_123006;
        }
        defunc_2_reduce_res_122900 = redout_122967;
        defunc_2_reduce_res_122901 = redout_122968;
        ((float *) mem_119817.mem)[gtid_115401] = defunc_2_reduce_res_122900;
        ((float *) mem_119820.mem)[gtid_115401] = defunc_2_reduce_res_122901;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128301_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128301_end -
                 futhark_mc_segmap_parloop_128301_start;
        
        ctx->futhark_mc_segmap_parloop_128301_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128301_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128301_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128299(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115400 = tid;
    int num_tasks_122938 = info.nsubtasks;
    struct futhark_mc_task_128298 *futhark_mc_task_128298 =
                                  (struct futhark_mc_task_128298 *) args;
    struct futhark_context *ctx = futhark_mc_task_128298->ctx;
    uint64_t futhark_mc_segmap_task_128299_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128299_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128298->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128298->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128298->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128298->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128298->free_i_112596;
    int64_t gtid_115399 = futhark_mc_task_128298->free_gtid_115399;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128298->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128298->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128298->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128298->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128298->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128298->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128298->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119817 = {.desc ="mem_119817", .mem =
                                  futhark_mc_task_128298->free_mem_119817,
                                  .size =0, .references =NULL};
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128298->free_mem_119820,
                                  .size =0, .references =NULL};
    int64_t iter_122939;
    struct futhark_mc_segmap_parloop_struct_128300
    futhark_mc_segmap_parloop_struct_128300;
    
    futhark_mc_segmap_parloop_struct_128300.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128300.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128300.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128300.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128300.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128300.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128300.free_gtid_115399 = gtid_115399;
    futhark_mc_segmap_parloop_struct_128300.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128300.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128300.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128300.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128300.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128300.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128300.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128300.free_mem_119817 = mem_119817.mem;
    futhark_mc_segmap_parloop_struct_128300.free_mem_119820 = mem_119820.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128301_task;
    
    futhark_mc_segmap_parloop_128301_task.name =
        "futhark_mc_segmap_parloop_128301";
    futhark_mc_segmap_parloop_128301_task.fn = futhark_mc_segmap_parloop_128301;
    futhark_mc_segmap_parloop_128301_task.args =
        &futhark_mc_segmap_parloop_struct_128300;
    futhark_mc_segmap_parloop_128301_task.iterations = iterations;
    futhark_mc_segmap_parloop_128301_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128301_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128301_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128301_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128301_task);
    
    if (futhark_mc_segmap_parloop_128301_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128301_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128301_total_end -
                 futhark_mc_segmap_parloop_128301_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128301_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128301_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128301_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128299_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128299_end -
                 futhark_mc_segmap_task_128299_start;
        
        ctx->futhark_mc_segmap_task_128299_runs[tid]++;
        ctx->futhark_mc_segmap_task_128299_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128299_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128303 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115399;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119817;
    char *free_mem_119820;
};
struct futhark_mc_task_128305 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115399;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_122777;
    float free_x_122778;
    float free_defunc_0_f_res_122781;
    float *retval_defunc_2_reduce_res_122782;
    float *retval_defunc_2_reduce_res_122783;
    float *retval_defunc_2_reduce_res_122784;
};
struct futhark_mc_segred_stage_1_parloop_struct_128310 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115399;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_122777;
    float free_x_122778;
    float free_defunc_0_f_res_122781;
    char *free_reduce_stage_1_tid_res_arr_mem_123074;
    char *free_reduce_stage_1_tid_res_arr_mem_123076;
    char *free_reduce_stage_1_tid_res_arr_mem_123078;
};
static int futhark_mc_segred_stage_1_parloop_128311(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115404,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128310
    *futhark_mc_segred_stage_1_parloop_struct_128310 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128310 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128310->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128311_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128311_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_n_112520;
    int64_t gtid_115399 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_gtid_115399;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128310->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_122777 =
            futhark_mc_segred_stage_1_parloop_struct_128310->free_x_122777;
    float x_122778 =
          futhark_mc_segred_stage_1_parloop_struct_128310->free_x_122778;
    float defunc_0_f_res_122781 =
          futhark_mc_segred_stage_1_parloop_struct_128310->free_defunc_0_f_res_122781;
    struct memblock reduce_stage_1_tid_res_arr_mem_123074 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123074",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128310->free_reduce_stage_1_tid_res_arr_mem_123074,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123076 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123076",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128310->free_reduce_stage_1_tid_res_arr_mem_123076,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123078 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123078",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128310->free_reduce_stage_1_tid_res_arr_mem_123078,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123080 = start;
    float x_123008;
    float x_123009;
    float x_123011;
    float x_123012;
    float x_123014;
    float x_123015;
    float local_acc_123081 = 0.0F;
    float local_acc_123082 = 0.0F;
    float local_acc_123083 = 0.0F;
    
    for (; iter_123080 < end; iter_123080++) {
        int64_t gtid_115405 = iter_123080;
        bool cond_123017 = sle64(n_112520, gtid_115405);
        float defunc_0_f_res_123018;
        
        if (cond_123017) {
            defunc_0_f_res_123018 = 0.0F;
        } else {
            int64_t i_123019 = add64(gtid_115405, x_122777);
            float index_primexp_123020 = sitofp_i64_f32(i_123019);
            float defunc_0_f_res_f_res_123021 = 1.0F + index_primexp_123020;
            
            defunc_0_f_res_123018 = defunc_0_f_res_f_res_123021;
        }
        
        float defunc_0_f_res_123022;
        
        if (cond_123017) {
            defunc_0_f_res_123022 = 0.0F;
        } else {
            int64_t i_123023 = add64(gtid_115405, x_122777);
            float x_123024 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115399 *
                                                    ctx_param_ext_119638 +
                                                    i_123023 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_123022 = x_123024;
        }
        
        float x_j_123025 = defunc_0_f_res_123018 - defunc_0_f_res_122781;
        float abs_res_123026 = (float) fabs(x_j_123025);
        float tmp1_123027 = abs_res_123026 / x_122778;
        float x_123028 = tmp1_123027 * tmp1_123027;
        float y_123029 = tmp1_123027 * x_123028;
        float tmp2_123030 = 1.0F - y_123029;
        float x_123031 = tmp2_123030 * tmp2_123030;
        float tmp3_123032 = tmp2_123030 * x_123031;
        float w_j_123033 = defunc_0_f_res_123022 * tmp3_123032;
        float xw_j_123034 = x_j_123025 * w_j_123033;
        float x2w_j_123035 = x_j_123025 * xw_j_123034;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123008 = local_acc_123081;
        }
        // Load next params
        {
            x_123009 = w_j_123033;
        }
        // Red body
        {
            float defunc_1_op_res_123010 = x_123008 + x_123009;
            
            local_acc_123081 = defunc_1_op_res_123010;
        }
        // Load accum params
        {
            x_123011 = local_acc_123082;
        }
        // Load next params
        {
            x_123012 = xw_j_123034;
        }
        // Red body
        {
            float defunc_1_op_res_123013 = x_123011 + x_123012;
            
            local_acc_123082 = defunc_1_op_res_123013;
        }
        // Load accum params
        {
            x_123014 = local_acc_123083;
        }
        // Load next params
        {
            x_123015 = x2w_j_123035;
        }
        // Red body
        {
            float defunc_1_op_res_123016 = x_123014 + x_123015;
            
            local_acc_123083 = defunc_1_op_res_123016;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123074.mem)[flat_tid_115404] =
        local_acc_123081;
    ((float *) reduce_stage_1_tid_res_arr_mem_123076.mem)[flat_tid_115404] =
        local_acc_123082;
    ((float *) reduce_stage_1_tid_res_arr_mem_123078.mem)[flat_tid_115404] =
        local_acc_123083;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128311_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128311_end -
                 futhark_mc_segred_stage_1_parloop_128311_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128311_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128311_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128311_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128306(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115404 = tid;
    int num_tasks_123073 = info.nsubtasks;
    struct futhark_mc_task_128305 *futhark_mc_task_128305 =
                                  (struct futhark_mc_task_128305 *) args;
    struct futhark_context *ctx = futhark_mc_task_128305->ctx;
    uint64_t futhark_mc_segred_task_128306_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128306_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128305->free_n_112520;
    int64_t gtid_115399 = futhark_mc_task_128305->free_gtid_115399;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128305->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128305->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128305->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128305->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_122777 = futhark_mc_task_128305->free_x_122777;
    float x_122778 = futhark_mc_task_128305->free_x_122778;
    float defunc_0_f_res_122781 =
          futhark_mc_task_128305->free_defunc_0_f_res_122781;
    float defunc_2_reduce_res_122782 =
          *futhark_mc_task_128305->retval_defunc_2_reduce_res_122782;
    float defunc_2_reduce_res_122783 =
          *futhark_mc_task_128305->retval_defunc_2_reduce_res_122783;
    float defunc_2_reduce_res_122784 =
          *futhark_mc_task_128305->retval_defunc_2_reduce_res_122784;
    size_t reduce_stage_1_tid_res_arr_mem_123074_cached_sizze_128307 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123074 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123076_cached_sizze_128308 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123076 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123078_cached_sizze_128309 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123078 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123074_cached_sizze_128307 <
        (size_t) ((int64_t) 4 * num_tasks_123073)) {
        reduce_stage_1_tid_res_arr_mem_123074 =
            realloc(reduce_stage_1_tid_res_arr_mem_123074, (int64_t) 4 *
                    num_tasks_123073);
        reduce_stage_1_tid_res_arr_mem_123074_cached_sizze_128307 =
            (int64_t) 4 * num_tasks_123073;
    }
    if (reduce_stage_1_tid_res_arr_mem_123076_cached_sizze_128308 <
        (size_t) ((int64_t) 4 * num_tasks_123073)) {
        reduce_stage_1_tid_res_arr_mem_123076 =
            realloc(reduce_stage_1_tid_res_arr_mem_123076, (int64_t) 4 *
                    num_tasks_123073);
        reduce_stage_1_tid_res_arr_mem_123076_cached_sizze_128308 =
            (int64_t) 4 * num_tasks_123073;
    }
    if (reduce_stage_1_tid_res_arr_mem_123078_cached_sizze_128309 <
        (size_t) ((int64_t) 4 * num_tasks_123073)) {
        reduce_stage_1_tid_res_arr_mem_123078 =
            realloc(reduce_stage_1_tid_res_arr_mem_123078, (int64_t) 4 *
                    num_tasks_123073);
        reduce_stage_1_tid_res_arr_mem_123078_cached_sizze_128309 =
            (int64_t) 4 * num_tasks_123073;
    }
    
    int64_t iter_123080;
    struct futhark_mc_segred_stage_1_parloop_struct_128310
    futhark_mc_segred_stage_1_parloop_struct_128310;
    
    futhark_mc_segred_stage_1_parloop_struct_128310.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_gtid_115399 =
        gtid_115399;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_x_122777 = x_122777;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_x_122778 = x_122778;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_defunc_0_f_res_122781 =
        defunc_0_f_res_122781;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_reduce_stage_1_tid_res_arr_mem_123074 =
        reduce_stage_1_tid_res_arr_mem_123074;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_reduce_stage_1_tid_res_arr_mem_123076 =
        reduce_stage_1_tid_res_arr_mem_123076;
    futhark_mc_segred_stage_1_parloop_struct_128310.free_reduce_stage_1_tid_res_arr_mem_123078 =
        reduce_stage_1_tid_res_arr_mem_123078;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128311_task;
    
    futhark_mc_segred_stage_1_parloop_128311_task.name =
        "futhark_mc_segred_stage_1_parloop_128311";
    futhark_mc_segred_stage_1_parloop_128311_task.fn =
        futhark_mc_segred_stage_1_parloop_128311;
    futhark_mc_segred_stage_1_parloop_128311_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128310;
    futhark_mc_segred_stage_1_parloop_128311_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128311_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128311_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128311_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128311_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128311_task);
    
    if (futhark_mc_segred_stage_1_parloop_128311_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128311_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128311_total_end -
                 futhark_mc_segred_stage_1_parloop_128311_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128311_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128311_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128311_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122782 = 0.0F;
        defunc_2_reduce_res_122783 = 0.0F;
        defunc_2_reduce_res_122784 = 0.0F;
    }
    
    float x_123084;
    float x_123085;
    float x_123087;
    float x_123088;
    float x_123090;
    float x_123091;
    
    for (int32_t i_123093 = 0; i_123093 < num_tasks_123073; i_123093++) {
        flat_tid_115404 = i_123093;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123084 = defunc_2_reduce_res_122782;
            }
            // load next params
            {
                x_123085 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123074)[flat_tid_115404];
            }
            // red body
            {
                float defunc_1_op_res_123086 = x_123084 + x_123085;
                
                defunc_2_reduce_res_122782 = defunc_1_op_res_123086;
            }
            // load acc params
            {
                x_123087 = defunc_2_reduce_res_122783;
            }
            // load next params
            {
                x_123088 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123076)[flat_tid_115404];
            }
            // red body
            {
                float defunc_1_op_res_123089 = x_123087 + x_123088;
                
                defunc_2_reduce_res_122783 = defunc_1_op_res_123089;
            }
            // load acc params
            {
                x_123090 = defunc_2_reduce_res_122784;
            }
            // load next params
            {
                x_123091 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123078)[flat_tid_115404];
            }
            // red body
            {
                float defunc_1_op_res_123092 = x_123090 + x_123091;
                
                defunc_2_reduce_res_122784 = defunc_1_op_res_123092;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123074);
    free(reduce_stage_1_tid_res_arr_mem_123076);
    free(reduce_stage_1_tid_res_arr_mem_123078);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128306_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128306_end -
                 futhark_mc_segred_task_128306_start;
        
        ctx->futhark_mc_segred_task_128306_runs[tid]++;
        ctx->futhark_mc_segred_task_128306_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128306_iter[tid] += iterations;
    }
    *futhark_mc_task_128305->retval_defunc_2_reduce_res_122782 =
        defunc_2_reduce_res_122782;
    *futhark_mc_task_128305->retval_defunc_2_reduce_res_122783 =
        defunc_2_reduce_res_122783;
    *futhark_mc_task_128305->retval_defunc_2_reduce_res_122784 =
        defunc_2_reduce_res_122784;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128312 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115399;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_122777;
    float free_x_122778;
    float free_defunc_0_f_res_122781;
    float free_a11_122817;
    float free_b11_122819;
    float free_c11_122820;
    float *retval_defunc_2_reduce_res_122821;
    float *retval_defunc_2_reduce_res_122822;
};
struct futhark_mc_segred_stage_1_parloop_struct_128316 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115399;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_122777;
    float free_x_122778;
    float free_defunc_0_f_res_122781;
    float free_a11_122817;
    float free_b11_122819;
    float free_c11_122820;
    char *free_reduce_stage_1_tid_res_arr_mem_123095;
    char *free_reduce_stage_1_tid_res_arr_mem_123097;
};
static int futhark_mc_segred_stage_1_parloop_128317(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115406,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128316
    *futhark_mc_segred_stage_1_parloop_struct_128316 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128316 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128316->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128317_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128317_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_n_112520;
    int64_t gtid_115399 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_gtid_115399;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128316->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128316->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_122777 =
            futhark_mc_segred_stage_1_parloop_struct_128316->free_x_122777;
    float x_122778 =
          futhark_mc_segred_stage_1_parloop_struct_128316->free_x_122778;
    float defunc_0_f_res_122781 =
          futhark_mc_segred_stage_1_parloop_struct_128316->free_defunc_0_f_res_122781;
    float a11_122817 =
          futhark_mc_segred_stage_1_parloop_struct_128316->free_a11_122817;
    float b11_122819 =
          futhark_mc_segred_stage_1_parloop_struct_128316->free_b11_122819;
    float c11_122820 =
          futhark_mc_segred_stage_1_parloop_struct_128316->free_c11_122820;
    struct memblock reduce_stage_1_tid_res_arr_mem_123095 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123095",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128316->free_reduce_stage_1_tid_res_arr_mem_123095,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123097 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123097",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128316->free_reduce_stage_1_tid_res_arr_mem_123097,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123099 = start;
    float x_123036;
    float x_123037;
    float x_123039;
    float x_123040;
    float local_acc_123100 = 0.0F;
    float local_acc_123101 = 0.0F;
    
    for (; iter_123099 < end; iter_123099++) {
        int64_t gtid_115407 = iter_123099;
        bool cond_123042 = sle64(n_112520, gtid_115407);
        float defunc_0_f_res_123043;
        
        if (cond_123042) {
            defunc_0_f_res_123043 = 0.0F;
        } else {
            int64_t i_123044 = add64(gtid_115407, x_122777);
            float index_primexp_123045 = sitofp_i64_f32(i_123044);
            float defunc_0_f_res_f_res_123046 = 1.0F + index_primexp_123045;
            
            defunc_0_f_res_123043 = defunc_0_f_res_f_res_123046;
        }
        
        float defunc_0_f_res_123047;
        
        if (cond_123042) {
            defunc_0_f_res_123047 = 0.0F;
        } else {
            int64_t i_123048 = add64(gtid_115407, x_122777);
            float x_123049 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115399 *
                                                    ctx_param_ext_119638 +
                                                    i_123048 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_123047 = x_123049;
        }
        
        float x_j_123050 = defunc_0_f_res_123043 - defunc_0_f_res_122781;
        float abs_res_123051 = (float) fabs(x_j_123050);
        float tmp1_123052 = abs_res_123051 / x_122778;
        float x_123053 = tmp1_123052 * tmp1_123052;
        float y_123054 = tmp1_123052 * x_123053;
        float tmp2_123055 = 1.0F - y_123054;
        float x_123056 = tmp2_123055 * tmp2_123055;
        float tmp3_123057 = tmp2_123055 * x_123056;
        float tmp4_123058 = defunc_0_f_res_123047 * tmp3_123057;
        float defunc_1_f_res_123059 = x_j_123050 * tmp4_123058;
        float defunc_0_f_res_123060;
        
        if (cond_123042) {
            defunc_0_f_res_123060 = 0.0F;
        } else {
            int64_t i_123061 = add64(gtid_115407, x_122777);
            float x_123062 = ((float *) mem_119788.mem)[gtid_115399 * n_112520 +
                                                        i_123061];
            
            defunc_0_f_res_123060 = x_123062;
        }
        
        float x_123063 = a11_122817 * tmp4_123058;
        float y_123064 = b11_122819 * defunc_1_f_res_123059;
        float x_123065 = x_123063 + y_123064;
        float defunc_9_fit_fun_res_123066 = defunc_0_f_res_123060 * x_123065;
        float x_123067 = b11_122819 * tmp4_123058;
        float y_123068 = c11_122820 * defunc_1_f_res_123059;
        float x_123069 = x_123067 + y_123068;
        float defunc_9_slope_fun_res_123070 = defunc_0_f_res_123060 * x_123069;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123036 = local_acc_123100;
        }
        // Load next params
        {
            x_123037 = defunc_9_fit_fun_res_123066;
        }
        // Red body
        {
            float defunc_1_op_res_123038 = x_123036 + x_123037;
            
            local_acc_123100 = defunc_1_op_res_123038;
        }
        // Load accum params
        {
            x_123039 = local_acc_123101;
        }
        // Load next params
        {
            x_123040 = defunc_9_slope_fun_res_123070;
        }
        // Red body
        {
            float defunc_1_op_res_123041 = x_123039 + x_123040;
            
            local_acc_123101 = defunc_1_op_res_123041;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123095.mem)[flat_tid_115406] =
        local_acc_123100;
    ((float *) reduce_stage_1_tid_res_arr_mem_123097.mem)[flat_tid_115406] =
        local_acc_123101;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128317_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128317_end -
                 futhark_mc_segred_stage_1_parloop_128317_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128317_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128317_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128317_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128313(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115406 = tid;
    int num_tasks_123094 = info.nsubtasks;
    struct futhark_mc_task_128312 *futhark_mc_task_128312 =
                                  (struct futhark_mc_task_128312 *) args;
    struct futhark_context *ctx = futhark_mc_task_128312->ctx;
    uint64_t futhark_mc_segred_task_128313_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128313_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128312->free_n_112520;
    int64_t gtid_115399 = futhark_mc_task_128312->free_gtid_115399;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128312->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128312->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128312->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128312->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128312->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_122777 = futhark_mc_task_128312->free_x_122777;
    float x_122778 = futhark_mc_task_128312->free_x_122778;
    float defunc_0_f_res_122781 =
          futhark_mc_task_128312->free_defunc_0_f_res_122781;
    float a11_122817 = futhark_mc_task_128312->free_a11_122817;
    float b11_122819 = futhark_mc_task_128312->free_b11_122819;
    float c11_122820 = futhark_mc_task_128312->free_c11_122820;
    float defunc_2_reduce_res_122821 =
          *futhark_mc_task_128312->retval_defunc_2_reduce_res_122821;
    float defunc_2_reduce_res_122822 =
          *futhark_mc_task_128312->retval_defunc_2_reduce_res_122822;
    size_t reduce_stage_1_tid_res_arr_mem_123095_cached_sizze_128314 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123095 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123097_cached_sizze_128315 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123097 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123095_cached_sizze_128314 <
        (size_t) ((int64_t) 4 * num_tasks_123094)) {
        reduce_stage_1_tid_res_arr_mem_123095 =
            realloc(reduce_stage_1_tid_res_arr_mem_123095, (int64_t) 4 *
                    num_tasks_123094);
        reduce_stage_1_tid_res_arr_mem_123095_cached_sizze_128314 =
            (int64_t) 4 * num_tasks_123094;
    }
    if (reduce_stage_1_tid_res_arr_mem_123097_cached_sizze_128315 <
        (size_t) ((int64_t) 4 * num_tasks_123094)) {
        reduce_stage_1_tid_res_arr_mem_123097 =
            realloc(reduce_stage_1_tid_res_arr_mem_123097, (int64_t) 4 *
                    num_tasks_123094);
        reduce_stage_1_tid_res_arr_mem_123097_cached_sizze_128315 =
            (int64_t) 4 * num_tasks_123094;
    }
    
    int64_t iter_123099;
    struct futhark_mc_segred_stage_1_parloop_struct_128316
    futhark_mc_segred_stage_1_parloop_struct_128316;
    
    futhark_mc_segred_stage_1_parloop_struct_128316.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_gtid_115399 =
        gtid_115399;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_x_122777 = x_122777;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_x_122778 = x_122778;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_defunc_0_f_res_122781 =
        defunc_0_f_res_122781;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_a11_122817 =
        a11_122817;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_b11_122819 =
        b11_122819;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_c11_122820 =
        c11_122820;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_reduce_stage_1_tid_res_arr_mem_123095 =
        reduce_stage_1_tid_res_arr_mem_123095;
    futhark_mc_segred_stage_1_parloop_struct_128316.free_reduce_stage_1_tid_res_arr_mem_123097 =
        reduce_stage_1_tid_res_arr_mem_123097;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128317_task;
    
    futhark_mc_segred_stage_1_parloop_128317_task.name =
        "futhark_mc_segred_stage_1_parloop_128317";
    futhark_mc_segred_stage_1_parloop_128317_task.fn =
        futhark_mc_segred_stage_1_parloop_128317;
    futhark_mc_segred_stage_1_parloop_128317_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128316;
    futhark_mc_segred_stage_1_parloop_128317_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128317_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128317_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128317_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128317_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128317_task);
    
    if (futhark_mc_segred_stage_1_parloop_128317_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128317_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128317_total_end -
                 futhark_mc_segred_stage_1_parloop_128317_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128317_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128317_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128317_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122821 = 0.0F;
        defunc_2_reduce_res_122822 = 0.0F;
    }
    
    float x_123102;
    float x_123103;
    float x_123105;
    float x_123106;
    
    for (int32_t i_123108 = 0; i_123108 < num_tasks_123094; i_123108++) {
        flat_tid_115406 = i_123108;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123102 = defunc_2_reduce_res_122821;
            }
            // load next params
            {
                x_123103 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123095)[flat_tid_115406];
            }
            // red body
            {
                float defunc_1_op_res_123104 = x_123102 + x_123103;
                
                defunc_2_reduce_res_122821 = defunc_1_op_res_123104;
            }
            // load acc params
            {
                x_123105 = defunc_2_reduce_res_122822;
            }
            // load next params
            {
                x_123106 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123097)[flat_tid_115406];
            }
            // red body
            {
                float defunc_1_op_res_123107 = x_123105 + x_123106;
                
                defunc_2_reduce_res_122822 = defunc_1_op_res_123107;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123095);
    free(reduce_stage_1_tid_res_arr_mem_123097);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128313_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128313_end -
                 futhark_mc_segred_task_128313_start;
        
        ctx->futhark_mc_segred_task_128313_runs[tid]++;
        ctx->futhark_mc_segred_task_128313_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128313_iter[tid] += iterations;
    }
    *futhark_mc_task_128312->retval_defunc_2_reduce_res_122821 =
        defunc_2_reduce_res_122821;
    *futhark_mc_task_128312->retval_defunc_2_reduce_res_122822 =
        defunc_2_reduce_res_122822;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128304(void *args, int64_t start,
                                            int64_t end, int flat_tid_115402,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128303
    *futhark_mc_segmap_parloop_struct_128303 =
    (struct futhark_mc_segmap_parloop_struct_128303 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128303->ctx;
    uint64_t futhark_mc_segmap_parloop_128304_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128304_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128303->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128303->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128303->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128303->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128303->free_i_112596;
    int64_t gtid_115399 =
            futhark_mc_segmap_parloop_struct_128303->free_gtid_115399;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128303->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128303->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128303->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128303->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128303->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128303->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128303->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119817 = {.desc ="mem_119817", .mem =
                                  futhark_mc_segmap_parloop_struct_128303->free_mem_119817,
                                  .size =0, .references =NULL};
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128303->free_mem_119820,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123007 = start;
    
    for (; iter_123007 < end; iter_123007++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123071 = l_n_m_112570;
        int64_t gtid_115403 = iter_123007;
        int64_t remnant_123072 = iter_123007 - gtid_115403;
        int64_t x_122777 = ((int64_t *) mem_119544.mem)[gtid_115399 *
                                                        l_n_m_112570 +
                                                        gtid_115403];
        float x_122778 = ((float *) mem_119548.mem)[gtid_115399 * l_n_m_112570 +
                                                    gtid_115403];
        int64_t min_arg_122779 = mul64(t_jump_112527, gtid_115403);
        int64_t min_res_122780 = smin64(i_112596, min_arg_122779);
        float defunc_0_f_res_122781 = sitofp_i64_f32(min_res_122780);
        float defunc_2_reduce_res_122782;
        float defunc_2_reduce_res_122783;
        float defunc_2_reduce_res_122784;
        int64_t flat_tid_115404 = (int64_t) 0;
        int32_t num_tasks_123073;
        struct futhark_mc_task_128305 futhark_mc_task_128305;
        
        futhark_mc_task_128305.ctx = ctx;
        futhark_mc_task_128305.free_n_112520 = n_112520;
        futhark_mc_task_128305.free_gtid_115399 = gtid_115399;
        futhark_mc_task_128305.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128305.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128305.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128305.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128305.free_x_122777 = x_122777;
        futhark_mc_task_128305.free_x_122778 = x_122778;
        futhark_mc_task_128305.free_defunc_0_f_res_122781 =
            defunc_0_f_res_122781;
        futhark_mc_task_128305.retval_defunc_2_reduce_res_122782 =
            &defunc_2_reduce_res_122782;
        futhark_mc_task_128305.retval_defunc_2_reduce_res_122783 =
            &defunc_2_reduce_res_122783;
        futhark_mc_task_128305.retval_defunc_2_reduce_res_122784 =
            &defunc_2_reduce_res_122784;
        
        struct scheduler_segop futhark_mc_task_128305_task;
        
        futhark_mc_task_128305_task.args = &futhark_mc_task_128305;
        futhark_mc_task_128305_task.top_level_fn =
            futhark_mc_segred_task_128306;
        futhark_mc_task_128305_task.name = "futhark_mc_segred_task_128306";
        futhark_mc_task_128305_task.iterations = l_window_112524;
        futhark_mc_task_128305_task.task_time =
            &ctx->futhark_mc_segred_task_128306_total_time;
        futhark_mc_task_128305_task.task_iter =
            &ctx->futhark_mc_segred_task_128306_total_iter;
        futhark_mc_task_128305_task.sched = STATIC;
        futhark_mc_task_128305_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128306_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128305_task);
        
        if (futhark_mc_segred_task_128306_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_122813 = defunc_2_reduce_res_122782 *
              defunc_2_reduce_res_122784;
        float y_122814 = defunc_2_reduce_res_122783 *
              defunc_2_reduce_res_122783;
        float y_122815 = x_122813 - y_122814;
        float det1_122816 = 1.0F / y_122815;
        float a11_122817 = defunc_2_reduce_res_122784 * det1_122816;
        float negate_arg_122818 = defunc_2_reduce_res_122783 * det1_122816;
        float b11_122819 = 0.0F - negate_arg_122818;
        float c11_122820 = defunc_2_reduce_res_122782 * det1_122816;
        float defunc_2_reduce_res_122821;
        float defunc_2_reduce_res_122822;
        int64_t flat_tid_115406 = (int64_t) 0;
        int32_t num_tasks_123094;
        struct futhark_mc_task_128312 futhark_mc_task_128312;
        
        futhark_mc_task_128312.ctx = ctx;
        futhark_mc_task_128312.free_n_112520 = n_112520;
        futhark_mc_task_128312.free_gtid_115399 = gtid_115399;
        futhark_mc_task_128312.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128312.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128312.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128312.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128312.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128312.free_x_122777 = x_122777;
        futhark_mc_task_128312.free_x_122778 = x_122778;
        futhark_mc_task_128312.free_defunc_0_f_res_122781 =
            defunc_0_f_res_122781;
        futhark_mc_task_128312.free_a11_122817 = a11_122817;
        futhark_mc_task_128312.free_b11_122819 = b11_122819;
        futhark_mc_task_128312.free_c11_122820 = c11_122820;
        futhark_mc_task_128312.retval_defunc_2_reduce_res_122821 =
            &defunc_2_reduce_res_122821;
        futhark_mc_task_128312.retval_defunc_2_reduce_res_122822 =
            &defunc_2_reduce_res_122822;
        
        struct scheduler_segop futhark_mc_task_128312_task;
        
        futhark_mc_task_128312_task.args = &futhark_mc_task_128312;
        futhark_mc_task_128312_task.top_level_fn =
            futhark_mc_segred_task_128313;
        futhark_mc_task_128312_task.name = "futhark_mc_segred_task_128313";
        futhark_mc_task_128312_task.iterations = l_window_112524;
        futhark_mc_task_128312_task.task_time =
            &ctx->futhark_mc_segred_task_128313_total_time;
        futhark_mc_task_128312_task.task_iter =
            &ctx->futhark_mc_segred_task_128313_total_iter;
        futhark_mc_task_128312_task.sched = STATIC;
        futhark_mc_task_128312_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128313_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128312_task);
        
        if (futhark_mc_segred_task_128313_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_119817.mem)[gtid_115403] = defunc_2_reduce_res_122821;
        ((float *) mem_119820.mem)[gtid_115403] = defunc_2_reduce_res_122822;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128304_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128304_end -
                 futhark_mc_segmap_parloop_128304_start;
        
        ctx->futhark_mc_segmap_parloop_128304_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128304_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128304_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128302(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115402 = tid;
    int num_tasks_122938 = info.nsubtasks;
    struct futhark_mc_task_128298 *futhark_mc_task_128298 =
                                  (struct futhark_mc_task_128298 *) args;
    struct futhark_context *ctx = futhark_mc_task_128298->ctx;
    uint64_t futhark_mc_segmap_nested_task_128302_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128302_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128298->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128298->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128298->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128298->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128298->free_i_112596;
    int64_t gtid_115399 = futhark_mc_task_128298->free_gtid_115399;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128298->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128298->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128298->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128298->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128298->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128298->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128298->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119817 = {.desc ="mem_119817", .mem =
                                  futhark_mc_task_128298->free_mem_119817,
                                  .size =0, .references =NULL};
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128298->free_mem_119820,
                                  .size =0, .references =NULL};
    int64_t iter_123007;
    struct futhark_mc_segmap_parloop_struct_128303
    futhark_mc_segmap_parloop_struct_128303;
    
    futhark_mc_segmap_parloop_struct_128303.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128303.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128303.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128303.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128303.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128303.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128303.free_gtid_115399 = gtid_115399;
    futhark_mc_segmap_parloop_struct_128303.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128303.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128303.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128303.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128303.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128303.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128303.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128303.free_mem_119817 = mem_119817.mem;
    futhark_mc_segmap_parloop_struct_128303.free_mem_119820 = mem_119820.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128304_task;
    
    futhark_mc_segmap_parloop_128304_task.name =
        "futhark_mc_segmap_parloop_128304";
    futhark_mc_segmap_parloop_128304_task.fn = futhark_mc_segmap_parloop_128304;
    futhark_mc_segmap_parloop_128304_task.args =
        &futhark_mc_segmap_parloop_struct_128303;
    futhark_mc_segmap_parloop_128304_task.iterations = iterations;
    futhark_mc_segmap_parloop_128304_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128304_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128304_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128304_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128304_task);
    
    if (futhark_mc_segmap_parloop_128304_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128304_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128304_total_end -
                 futhark_mc_segmap_parloop_128304_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128304_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128304_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128304_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128302_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128302_end -
                 futhark_mc_segmap_nested_task_128302_start;
        
        ctx->futhark_mc_segmap_nested_task_128302_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128302_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128302_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128295(void *args, int64_t start,
                                            int64_t end, int flat_tid_115398,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128294
    *futhark_mc_segmap_parloop_struct_128294 =
    (struct futhark_mc_segmap_parloop_struct_128294 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128294->ctx;
    uint64_t futhark_mc_segmap_parloop_128295_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128295_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128294->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128294->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128294->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128294->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128294->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128294->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128294->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128294->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128294->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128294->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128294->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128294->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128294->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128294->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119854 = {.desc ="mem_119854", .mem =
                                  futhark_mc_segmap_parloop_struct_128294->free_mem_119854,
                                  .size =0, .references =NULL};
    struct memblock mem_119858 = {.desc ="mem_119858", .mem =
                                  futhark_mc_segmap_parloop_struct_128294->free_mem_119858,
                                  .size =0, .references =NULL};
    size_t mem_119817_cached_sizze_128296 = 0;
    char *mem_119817 = NULL;
    size_t mem_119820_cached_sizze_128297 = 0;
    char *mem_119820 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122776 = start;
    
    if (mem_119817_cached_sizze_128296 < (size_t) bytes_119490) {
        mem_119817 = realloc(mem_119817, bytes_119490);
        mem_119817_cached_sizze_128296 = bytes_119490;
    }
    if (mem_119820_cached_sizze_128297 < (size_t) bytes_119490) {
        mem_119820 = realloc(mem_119820, bytes_119490);
        mem_119820_cached_sizze_128297 = bytes_119490;
    }
    for (; iter_122776 < end; iter_122776++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122936 = m_112519;
        int64_t gtid_115399 = iter_122776;
        int64_t remnant_122937 = iter_122776 - gtid_115399;
        int64_t flat_tid_115400 = (int64_t) 0;
        int32_t num_tasks_122938;
        int64_t flat_tid_115402 = (int64_t) 0;
        struct futhark_mc_task_128298 futhark_mc_task_128298;
        
        futhark_mc_task_128298.ctx = ctx;
        futhark_mc_task_128298.free_n_112520 = n_112520;
        futhark_mc_task_128298.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128298.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128298.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128298.free_i_112596 = i_112596;
        futhark_mc_task_128298.free_gtid_115399 = gtid_115399;
        futhark_mc_task_128298.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128298.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128298.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128298.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128298.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128298.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128298.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128298.free_mem_119817 = mem_119817;
        futhark_mc_task_128298.free_mem_119820 = mem_119820;
        
        struct scheduler_segop futhark_mc_task_128298_task;
        
        futhark_mc_task_128298_task.args = &futhark_mc_task_128298;
        futhark_mc_task_128298_task.top_level_fn =
            futhark_mc_segmap_task_128299;
        futhark_mc_task_128298_task.name = "futhark_mc_segmap_task_128299";
        futhark_mc_task_128298_task.iterations = l_n_m_112570;
        futhark_mc_task_128298_task.task_time =
            &ctx->futhark_mc_segmap_task_128299_total_time;
        futhark_mc_task_128298_task.task_iter =
            &ctx->futhark_mc_segmap_task_128299_total_iter;
        futhark_mc_task_128298_task.sched = STATIC;
        futhark_mc_task_128298_task.nested_fn =
            futhark_mc_segmap_nested_task_128302;
        
        int futhark_mc_segmap_task_128299_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128298_task);
        
        if (futhark_mc_segmap_task_128299_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119854.mem + gtid_115399 * l_n_m_112570 * (int64_t) 4,
                mem_119817 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_119858.mem + gtid_115399 * l_n_m_112570 * (int64_t) 4,
                mem_119820 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119817);
    free(mem_119820);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128295_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128295_end -
                 futhark_mc_segmap_parloop_128295_start;
        
        ctx->futhark_mc_segmap_parloop_128295_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128295_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128295_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128293(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115398 = tid;
    int num_tasks_122682 = info.nsubtasks;
    struct futhark_mc_task_128287 *futhark_mc_task_128287 =
                                  (struct futhark_mc_task_128287 *) args;
    struct futhark_context *ctx = futhark_mc_task_128287->ctx;
    uint64_t futhark_mc_segmap_nested_task_128293_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128293_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128287->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128287->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128287->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128287->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128287->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128287->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128287->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128287->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128287->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128287->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128287->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128287->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128287->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128287->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119854 = {.desc ="mem_119854", .mem =
                                  futhark_mc_task_128287->free_mem_119854,
                                  .size =0, .references =NULL};
    struct memblock mem_119858 = {.desc ="mem_119858", .mem =
                                  futhark_mc_task_128287->free_mem_119858,
                                  .size =0, .references =NULL};
    int64_t iter_122776;
    struct futhark_mc_segmap_parloop_struct_128294
    futhark_mc_segmap_parloop_struct_128294;
    
    futhark_mc_segmap_parloop_struct_128294.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128294.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128294.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128294.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128294.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128294.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128294.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128294.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128294.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128294.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128294.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128294.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128294.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128294.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128294.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128294.free_mem_119854 = mem_119854.mem;
    futhark_mc_segmap_parloop_struct_128294.free_mem_119858 = mem_119858.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128295_task;
    
    futhark_mc_segmap_parloop_128295_task.name =
        "futhark_mc_segmap_parloop_128295";
    futhark_mc_segmap_parloop_128295_task.fn = futhark_mc_segmap_parloop_128295;
    futhark_mc_segmap_parloop_128295_task.args =
        &futhark_mc_segmap_parloop_struct_128294;
    futhark_mc_segmap_parloop_128295_task.iterations = iterations;
    futhark_mc_segmap_parloop_128295_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128295_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128295_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128295_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128295_task);
    
    if (futhark_mc_segmap_parloop_128295_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128295_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128295_total_end -
                 futhark_mc_segmap_parloop_128295_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128295_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128295_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128295_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128293_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128293_end -
                 futhark_mc_segmap_nested_task_128293_start;
        
        ctx->futhark_mc_segmap_nested_task_128293_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128293_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128293_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128318 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119898;
    char *free_mem_119902;
};
struct futhark_mc_segmap_parloop_struct_128320 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119898;
    char *free_mem_119902;
};
static int futhark_mc_segmap_parloop_128321(void *args, int64_t start,
                                            int64_t end, int flat_tid_115666,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128320
    *futhark_mc_segmap_parloop_struct_128320 =
    (struct futhark_mc_segmap_parloop_struct_128320 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128320->ctx;
    uint64_t futhark_mc_segmap_parloop_128321_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128321_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128320->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128320->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128320->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128320->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128320->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128320->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128320->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128320->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128320->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128320->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128320->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128320->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128320->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128320->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119898 = {.desc ="mem_119898", .mem =
                                  futhark_mc_segmap_parloop_struct_128320->free_mem_119898,
                                  .size =0, .references =NULL};
    struct memblock mem_119902 = {.desc ="mem_119902", .mem =
                                  futhark_mc_segmap_parloop_struct_128320->free_mem_119902,
                                  .size =0, .references =NULL};
    size_t mem_119867_cached_sizze_128322 = 0;
    char *mem_119867 = NULL;
    size_t mem_119870_cached_sizze_128323 = 0;
    char *mem_119870 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123110 = start;
    
    if (mem_119867_cached_sizze_128322 < (size_t) bytes_119490) {
        mem_119867 = realloc(mem_119867, bytes_119490);
        mem_119867_cached_sizze_128322 = bytes_119490;
    }
    if (mem_119870_cached_sizze_128323 < (size_t) bytes_119490) {
        mem_119870 = realloc(mem_119870, bytes_119490);
        mem_119870_cached_sizze_128323 = bytes_119490;
    }
    for (; iter_123110 < end; iter_123110++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123224 = m_112519;
        int64_t gtid_115667 = iter_123110;
        int64_t remnant_123225 = iter_123110 - gtid_115667;
        
        for (int64_t i_123111 = 0; i_123111 < l_n_m_112570; i_123111++) {
            int64_t x_123114 = ((int64_t *) mem_119544.mem)[gtid_115667 *
                                                            l_n_m_112570 +
                                                            i_123111];
            float x_123115 = ((float *) mem_119548.mem)[gtid_115667 *
                                                        l_n_m_112570 +
                                                        i_123111];
            int64_t min_arg_123116 = mul64(t_jump_112527, i_123111);
            int64_t min_res_123117 = smin64(i_112596, min_arg_123116);
            float defunc_0_f_res_123118 = sitofp_i64_f32(min_res_123117);
            float defunc_2_reduce_res_123119;
            float defunc_2_reduce_res_123120;
            float defunc_2_reduce_res_123121;
            float defunc_2_reduce_res_123122;
            float defunc_2_reduce_res_123123;
            float redout_123125;
            float redout_123126;
            float redout_123127;
            float redout_123128;
            float redout_123129;
            
            redout_123125 = 0.0F;
            redout_123126 = 0.0F;
            redout_123127 = 0.0F;
            redout_123128 = 0.0F;
            redout_123129 = 0.0F;
            for (int64_t i_123124 = 0; i_123124 < l_window_112524; i_123124++) {
                bool cond_123130 = sle64(n_112520, i_123124);
                float defunc_0_f_res_123131;
                
                if (cond_123130) {
                    defunc_0_f_res_123131 = 0.0F;
                } else {
                    int64_t i_123132 = add64(x_123114, i_123124);
                    float index_primexp_123133 = sitofp_i64_f32(i_123132);
                    float defunc_0_f_res_f_res_123134 = 1.0F +
                          index_primexp_123133;
                    
                    defunc_0_f_res_123131 = defunc_0_f_res_f_res_123134;
                }
                
                float defunc_0_f_res_123135;
                
                if (cond_123130) {
                    defunc_0_f_res_123135 = 0.0F;
                } else {
                    int64_t i_123136 = add64(x_123114, i_123124);
                    float x_123137 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115667 *
                                                            ctx_param_ext_119638 +
                                                            i_123136 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_123135 = x_123137;
                }
                
                float x_j_123138 = defunc_0_f_res_123131 -
                      defunc_0_f_res_123118;
                float abs_res_123139 = (float) fabs(x_j_123138);
                float tmp1_123140 = abs_res_123139 / x_123115;
                float x_123141 = tmp1_123140 * tmp1_123140;
                float y_123142 = tmp1_123140 * x_123141;
                float tmp2_123143 = 1.0F - y_123142;
                float x_123144 = tmp2_123143 * tmp2_123143;
                float tmp3_123145 = tmp2_123143 * x_123144;
                float w_j_123146 = defunc_0_f_res_123135 * tmp3_123145;
                float xw_j_123147 = x_j_123138 * w_j_123146;
                float x2w_j_123148 = x_j_123138 * xw_j_123147;
                float x3w_j_123149 = x_j_123138 * x2w_j_123148;
                float x4w_j_123150 = x_j_123138 * x3w_j_123149;
                float defunc_1_op_res_123151 = w_j_123146 + redout_123125;
                float defunc_1_op_res_123152 = xw_j_123147 + redout_123126;
                float defunc_1_op_res_123153 = x2w_j_123148 + redout_123127;
                float defunc_1_op_res_123154 = x3w_j_123149 + redout_123128;
                float defunc_1_op_res_123155 = x4w_j_123150 + redout_123129;
                float redout_tmp_123228 = defunc_1_op_res_123151;
                float redout_tmp_123229 = defunc_1_op_res_123152;
                float redout_tmp_123230 = defunc_1_op_res_123153;
                float redout_tmp_123231 = defunc_1_op_res_123154;
                float redout_tmp_123232 = defunc_1_op_res_123155;
                
                redout_123125 = redout_tmp_123228;
                redout_123126 = redout_tmp_123229;
                redout_123127 = redout_tmp_123230;
                redout_123128 = redout_tmp_123231;
                redout_123129 = redout_tmp_123232;
            }
            defunc_2_reduce_res_123119 = redout_123125;
            defunc_2_reduce_res_123120 = redout_123126;
            defunc_2_reduce_res_123121 = redout_123127;
            defunc_2_reduce_res_123122 = redout_123128;
            defunc_2_reduce_res_123123 = redout_123129;
            
            float x_123156 = defunc_2_reduce_res_123121 *
                  defunc_2_reduce_res_123123;
            float y_123157 = defunc_2_reduce_res_123122 *
                  defunc_2_reduce_res_123122;
            float a12_123158 = x_123156 - y_123157;
            float x_123159 = defunc_2_reduce_res_123121 *
                  defunc_2_reduce_res_123122;
            float y_123160 = defunc_2_reduce_res_123120 *
                  defunc_2_reduce_res_123123;
            float b12_123161 = x_123159 - y_123160;
            float x_123162 = defunc_2_reduce_res_123120 *
                  defunc_2_reduce_res_123122;
            float y_123163 = defunc_2_reduce_res_123121 *
                  defunc_2_reduce_res_123121;
            float c12_123164 = x_123162 - y_123163;
            float x_123165 = defunc_2_reduce_res_123119 *
                  defunc_2_reduce_res_123123;
            float b2_123166 = x_123165 - y_123163;
            float x_123167 = defunc_2_reduce_res_123120 *
                  defunc_2_reduce_res_123121;
            float y_123168 = defunc_2_reduce_res_123119 *
                  defunc_2_reduce_res_123122;
            float c2_123169 = x_123167 - y_123168;
            float x_123170 = defunc_2_reduce_res_123119 * a12_123158;
            float y_123171 = defunc_2_reduce_res_123120 * b12_123161;
            float x_123172 = x_123170 + y_123171;
            float y_123173 = defunc_2_reduce_res_123121 * c12_123164;
            float y_123174 = x_123172 + y_123173;
            float det_123175 = 1.0F / y_123174;
            float a12_123176 = a12_123158 * det_123175;
            float b12_123177 = b12_123161 * det_123175;
            float c12_123178 = c12_123164 * det_123175;
            float b2_123179 = b2_123166 * det_123175;
            float c2_123180 = c2_123169 * det_123175;
            float defunc_2_reduce_res_123181;
            float defunc_2_reduce_res_123182;
            float redout_123184;
            float redout_123185;
            
            redout_123184 = 0.0F;
            redout_123185 = 0.0F;
            for (int64_t i_123183 = 0; i_123183 < l_window_112524; i_123183++) {
                bool cond_123186 = sle64(n_112520, i_123183);
                float defunc_0_f_res_123187;
                
                if (cond_123186) {
                    defunc_0_f_res_123187 = 0.0F;
                } else {
                    int64_t i_123188 = add64(x_123114, i_123183);
                    float index_primexp_123189 = sitofp_i64_f32(i_123188);
                    float defunc_0_f_res_f_res_123190 = 1.0F +
                          index_primexp_123189;
                    
                    defunc_0_f_res_123187 = defunc_0_f_res_f_res_123190;
                }
                
                float defunc_0_f_res_123191;
                
                if (cond_123186) {
                    defunc_0_f_res_123191 = 0.0F;
                } else {
                    int64_t i_123192 = add64(x_123114, i_123183);
                    float x_123193 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_115667 *
                                                            ctx_param_ext_119638 +
                                                            i_123192 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_123191 = x_123193;
                }
                
                float x_j_123194 = defunc_0_f_res_123187 -
                      defunc_0_f_res_123118;
                float abs_res_123195 = (float) fabs(x_j_123194);
                float tmp1_123196 = abs_res_123195 / x_123115;
                float x_123197 = tmp1_123196 * tmp1_123196;
                float y_123198 = tmp1_123196 * x_123197;
                float tmp2_123199 = 1.0F - y_123198;
                float x_123200 = tmp2_123199 * tmp2_123199;
                float tmp3_123201 = tmp2_123199 * x_123200;
                float tmp4_123202 = defunc_0_f_res_123191 * tmp3_123201;
                float defunc_1_f_res_123203 = x_j_123194 * tmp4_123202;
                float defunc_1_f_res_123204 = x_j_123194 *
                      defunc_1_f_res_123203;
                float defunc_0_f_res_123205;
                
                if (cond_123186) {
                    defunc_0_f_res_123205 = 0.0F;
                } else {
                    int64_t i_123206 = add64(x_123114, i_123183);
                    float x_123207 = ((float *) mem_119788.mem)[gtid_115667 *
                                                                n_112520 +
                                                                i_123206];
                    
                    defunc_0_f_res_123205 = x_123207;
                }
                
                float x_123208 = a12_123176 * tmp4_123202;
                float y_123209 = b12_123177 * defunc_1_f_res_123203;
                float x_123210 = x_123208 + y_123209;
                float y_123211 = c12_123178 * defunc_1_f_res_123204;
                float x_123212 = x_123210 + y_123211;
                float defunc_9_fit_fun_res_123213 = defunc_0_f_res_123205 *
                      x_123212;
                float x_123214 = b12_123177 * tmp4_123202;
                float y_123215 = b2_123179 * defunc_1_f_res_123203;
                float x_123216 = x_123214 + y_123215;
                float y_123217 = c2_123180 * defunc_1_f_res_123204;
                float x_123218 = x_123216 + y_123217;
                float defunc_9_slope_fun_res_123219 = defunc_0_f_res_123205 *
                      x_123218;
                float defunc_1_op_res_123220 = defunc_9_fit_fun_res_123213 +
                      redout_123184;
                float defunc_1_op_res_123221 = defunc_9_slope_fun_res_123219 +
                      redout_123185;
                float redout_tmp_123233 = defunc_1_op_res_123220;
                float redout_tmp_123234 = defunc_1_op_res_123221;
                
                redout_123184 = redout_tmp_123233;
                redout_123185 = redout_tmp_123234;
            }
            defunc_2_reduce_res_123181 = redout_123184;
            defunc_2_reduce_res_123182 = redout_123185;
            ((float *) mem_119867)[i_123111] = defunc_2_reduce_res_123181;
            ((float *) mem_119870)[i_123111] = defunc_2_reduce_res_123182;
        }
        memmove(mem_119898.mem + gtid_115667 * l_n_m_112570 * (int64_t) 4,
                mem_119867 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_119902.mem + gtid_115667 * l_n_m_112570 * (int64_t) 4,
                mem_119870 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119867);
    free(mem_119870);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128321_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128321_end -
                 futhark_mc_segmap_parloop_128321_start;
        
        ctx->futhark_mc_segmap_parloop_128321_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128321_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128321_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128319(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115666 = tid;
    int num_tasks_123109 = info.nsubtasks;
    struct futhark_mc_task_128318 *futhark_mc_task_128318 =
                                  (struct futhark_mc_task_128318 *) args;
    struct futhark_context *ctx = futhark_mc_task_128318->ctx;
    uint64_t futhark_mc_segmap_task_128319_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128319_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128318->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128318->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128318->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128318->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128318->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128318->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128318->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128318->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128318->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128318->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128318->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128318->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128318->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128318->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119898 = {.desc ="mem_119898", .mem =
                                  futhark_mc_task_128318->free_mem_119898,
                                  .size =0, .references =NULL};
    struct memblock mem_119902 = {.desc ="mem_119902", .mem =
                                  futhark_mc_task_128318->free_mem_119902,
                                  .size =0, .references =NULL};
    int64_t iter_123110;
    struct futhark_mc_segmap_parloop_struct_128320
    futhark_mc_segmap_parloop_struct_128320;
    
    futhark_mc_segmap_parloop_struct_128320.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128320.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128320.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128320.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128320.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128320.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128320.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128320.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128320.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128320.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128320.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128320.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128320.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128320.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128320.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128320.free_mem_119898 = mem_119898.mem;
    futhark_mc_segmap_parloop_struct_128320.free_mem_119902 = mem_119902.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128321_task;
    
    futhark_mc_segmap_parloop_128321_task.name =
        "futhark_mc_segmap_parloop_128321";
    futhark_mc_segmap_parloop_128321_task.fn = futhark_mc_segmap_parloop_128321;
    futhark_mc_segmap_parloop_128321_task.args =
        &futhark_mc_segmap_parloop_struct_128320;
    futhark_mc_segmap_parloop_128321_task.iterations = iterations;
    futhark_mc_segmap_parloop_128321_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128321_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128321_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128321_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128321_task);
    
    if (futhark_mc_segmap_parloop_128321_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128321_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128321_total_end -
                 futhark_mc_segmap_parloop_128321_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128321_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128321_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128321_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128319_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128319_end -
                 futhark_mc_segmap_task_128319_start;
        
        ctx->futhark_mc_segmap_task_128319_runs[tid]++;
        ctx->futhark_mc_segmap_task_128319_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128319_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128325 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119898;
    char *free_mem_119902;
};
struct futhark_mc_task_128329 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115669;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119861;
    char *free_mem_119864;
};
struct futhark_mc_segmap_parloop_struct_128331 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115669;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119861;
    char *free_mem_119864;
};
static int futhark_mc_segmap_parloop_128332(void *args, int64_t start,
                                            int64_t end, int flat_tid_115670,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128331
    *futhark_mc_segmap_parloop_struct_128331 =
    (struct futhark_mc_segmap_parloop_struct_128331 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128331->ctx;
    uint64_t futhark_mc_segmap_parloop_128332_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128332_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128331->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128331->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128331->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128331->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128331->free_i_112596;
    int64_t gtid_115669 =
            futhark_mc_segmap_parloop_struct_128331->free_gtid_115669;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128331->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128331->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128331->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128331->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128331->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128331->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128331->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119861 = {.desc ="mem_119861", .mem =
                                  futhark_mc_segmap_parloop_struct_128331->free_mem_119861,
                                  .size =0, .references =NULL};
    struct memblock mem_119864 = {.desc ="mem_119864", .mem =
                                  futhark_mc_segmap_parloop_struct_128331->free_mem_119864,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123460 = start;
    
    for (; iter_123460 < end; iter_123460++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123532 = l_n_m_112570;
        int64_t gtid_115671 = iter_123460;
        int64_t remnant_123533 = iter_123460 - gtid_115671;
        int64_t x_123349 = ((int64_t *) mem_119544.mem)[gtid_115669 *
                                                        l_n_m_112570 +
                                                        gtid_115671];
        float x_123350 = ((float *) mem_119548.mem)[gtid_115669 * l_n_m_112570 +
                                                    gtid_115671];
        int64_t min_arg_123351 = mul64(t_jump_112527, gtid_115671);
        int64_t min_res_123352 = smin64(i_112596, min_arg_123351);
        float defunc_0_f_res_123353 = sitofp_i64_f32(min_res_123352);
        float defunc_2_reduce_res_123354;
        float defunc_2_reduce_res_123355;
        float defunc_2_reduce_res_123356;
        float defunc_2_reduce_res_123357;
        float defunc_2_reduce_res_123358;
        float redout_123462;
        float redout_123463;
        float redout_123464;
        float redout_123465;
        float redout_123466;
        
        redout_123462 = 0.0F;
        redout_123463 = 0.0F;
        redout_123464 = 0.0F;
        redout_123465 = 0.0F;
        redout_123466 = 0.0F;
        for (int64_t i_123461 = 0; i_123461 < l_window_112524; i_123461++) {
            bool cond_123467 = sle64(n_112520, i_123461);
            float defunc_0_f_res_123468;
            
            if (cond_123467) {
                defunc_0_f_res_123468 = 0.0F;
            } else {
                int64_t i_123469 = add64(x_123349, i_123461);
                float index_primexp_123470 = sitofp_i64_f32(i_123469);
                float defunc_0_f_res_f_res_123471 = 1.0F + index_primexp_123470;
                
                defunc_0_f_res_123468 = defunc_0_f_res_f_res_123471;
            }
            
            float defunc_0_f_res_123472;
            
            if (cond_123467) {
                defunc_0_f_res_123472 = 0.0F;
            } else {
                int64_t i_123473 = add64(x_123349, i_123461);
                float x_123474 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115669 *
                                                        ctx_param_ext_119638 +
                                                        i_123473 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_123472 = x_123474;
            }
            
            float x_j_123475 = defunc_0_f_res_123468 - defunc_0_f_res_123353;
            float abs_res_123476 = (float) fabs(x_j_123475);
            float tmp1_123477 = abs_res_123476 / x_123350;
            float x_123478 = tmp1_123477 * tmp1_123477;
            float y_123479 = tmp1_123477 * x_123478;
            float tmp2_123480 = 1.0F - y_123479;
            float x_123481 = tmp2_123480 * tmp2_123480;
            float tmp3_123482 = tmp2_123480 * x_123481;
            float w_j_123483 = defunc_0_f_res_123472 * tmp3_123482;
            float xw_j_123484 = x_j_123475 * w_j_123483;
            float x2w_j_123485 = x_j_123475 * xw_j_123484;
            float x3w_j_123486 = x_j_123475 * x2w_j_123485;
            float x4w_j_123487 = x_j_123475 * x3w_j_123486;
            float defunc_1_op_res_123488 = w_j_123483 + redout_123462;
            float defunc_1_op_res_123489 = xw_j_123484 + redout_123463;
            float defunc_1_op_res_123490 = x2w_j_123485 + redout_123464;
            float defunc_1_op_res_123491 = x3w_j_123486 + redout_123465;
            float defunc_1_op_res_123492 = x4w_j_123487 + redout_123466;
            float redout_tmp_123534 = defunc_1_op_res_123488;
            float redout_tmp_123535 = defunc_1_op_res_123489;
            float redout_tmp_123536 = defunc_1_op_res_123490;
            float redout_tmp_123537 = defunc_1_op_res_123491;
            float redout_tmp_123538 = defunc_1_op_res_123492;
            
            redout_123462 = redout_tmp_123534;
            redout_123463 = redout_tmp_123535;
            redout_123464 = redout_tmp_123536;
            redout_123465 = redout_tmp_123537;
            redout_123466 = redout_tmp_123538;
        }
        defunc_2_reduce_res_123354 = redout_123462;
        defunc_2_reduce_res_123355 = redout_123463;
        defunc_2_reduce_res_123356 = redout_123464;
        defunc_2_reduce_res_123357 = redout_123465;
        defunc_2_reduce_res_123358 = redout_123466;
        
        float x_123391 = defunc_2_reduce_res_123356 *
              defunc_2_reduce_res_123358;
        float y_123392 = defunc_2_reduce_res_123357 *
              defunc_2_reduce_res_123357;
        float a12_123393 = x_123391 - y_123392;
        float x_123394 = defunc_2_reduce_res_123356 *
              defunc_2_reduce_res_123357;
        float y_123395 = defunc_2_reduce_res_123355 *
              defunc_2_reduce_res_123358;
        float b12_123396 = x_123394 - y_123395;
        float x_123397 = defunc_2_reduce_res_123355 *
              defunc_2_reduce_res_123357;
        float y_123398 = defunc_2_reduce_res_123356 *
              defunc_2_reduce_res_123356;
        float c12_123399 = x_123397 - y_123398;
        float x_123400 = defunc_2_reduce_res_123354 *
              defunc_2_reduce_res_123358;
        float b2_123401 = x_123400 - y_123398;
        float x_123402 = defunc_2_reduce_res_123355 *
              defunc_2_reduce_res_123356;
        float y_123403 = defunc_2_reduce_res_123354 *
              defunc_2_reduce_res_123357;
        float c2_123404 = x_123402 - y_123403;
        float x_123405 = defunc_2_reduce_res_123354 * a12_123393;
        float y_123406 = defunc_2_reduce_res_123355 * b12_123396;
        float x_123407 = x_123405 + y_123406;
        float y_123408 = defunc_2_reduce_res_123356 * c12_123399;
        float y_123409 = x_123407 + y_123408;
        float det_123410 = 1.0F / y_123409;
        float a12_123411 = a12_123393 * det_123410;
        float b12_123412 = b12_123396 * det_123410;
        float c12_123413 = c12_123399 * det_123410;
        float b2_123414 = b2_123401 * det_123410;
        float c2_123415 = c2_123404 * det_123410;
        float defunc_2_reduce_res_123416;
        float defunc_2_reduce_res_123417;
        float redout_123494;
        float redout_123495;
        
        redout_123494 = 0.0F;
        redout_123495 = 0.0F;
        for (int64_t i_123493 = 0; i_123493 < l_window_112524; i_123493++) {
            bool cond_123496 = sle64(n_112520, i_123493);
            float defunc_0_f_res_123497;
            
            if (cond_123496) {
                defunc_0_f_res_123497 = 0.0F;
            } else {
                int64_t i_123498 = add64(x_123349, i_123493);
                float index_primexp_123499 = sitofp_i64_f32(i_123498);
                float defunc_0_f_res_f_res_123500 = 1.0F + index_primexp_123499;
                
                defunc_0_f_res_123497 = defunc_0_f_res_f_res_123500;
            }
            
            float defunc_0_f_res_123501;
            
            if (cond_123496) {
                defunc_0_f_res_123501 = 0.0F;
            } else {
                int64_t i_123502 = add64(x_123349, i_123493);
                float x_123503 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_115669 *
                                                        ctx_param_ext_119638 +
                                                        i_123502 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_123501 = x_123503;
            }
            
            float x_j_123504 = defunc_0_f_res_123497 - defunc_0_f_res_123353;
            float abs_res_123505 = (float) fabs(x_j_123504);
            float tmp1_123506 = abs_res_123505 / x_123350;
            float x_123507 = tmp1_123506 * tmp1_123506;
            float y_123508 = tmp1_123506 * x_123507;
            float tmp2_123509 = 1.0F - y_123508;
            float x_123510 = tmp2_123509 * tmp2_123509;
            float tmp3_123511 = tmp2_123509 * x_123510;
            float tmp4_123512 = defunc_0_f_res_123501 * tmp3_123511;
            float defunc_1_f_res_123513 = x_j_123504 * tmp4_123512;
            float defunc_1_f_res_123514 = x_j_123504 * defunc_1_f_res_123513;
            float defunc_0_f_res_123515;
            
            if (cond_123496) {
                defunc_0_f_res_123515 = 0.0F;
            } else {
                int64_t i_123516 = add64(x_123349, i_123493);
                float x_123517 = ((float *) mem_119788.mem)[gtid_115669 *
                                                            n_112520 +
                                                            i_123516];
                
                defunc_0_f_res_123515 = x_123517;
            }
            
            float x_123518 = a12_123411 * tmp4_123512;
            float y_123519 = b12_123412 * defunc_1_f_res_123513;
            float x_123520 = x_123518 + y_123519;
            float y_123521 = c12_123413 * defunc_1_f_res_123514;
            float x_123522 = x_123520 + y_123521;
            float defunc_9_fit_fun_res_123523 = defunc_0_f_res_123515 *
                  x_123522;
            float x_123524 = b12_123412 * tmp4_123512;
            float y_123525 = b2_123414 * defunc_1_f_res_123513;
            float x_123526 = x_123524 + y_123525;
            float y_123527 = c2_123415 * defunc_1_f_res_123514;
            float x_123528 = x_123526 + y_123527;
            float defunc_9_slope_fun_res_123529 = defunc_0_f_res_123515 *
                  x_123528;
            float defunc_1_op_res_123530 = defunc_9_fit_fun_res_123523 +
                  redout_123494;
            float defunc_1_op_res_123531 = defunc_9_slope_fun_res_123529 +
                  redout_123495;
            float redout_tmp_123539 = defunc_1_op_res_123530;
            float redout_tmp_123540 = defunc_1_op_res_123531;
            
            redout_123494 = redout_tmp_123539;
            redout_123495 = redout_tmp_123540;
        }
        defunc_2_reduce_res_123416 = redout_123494;
        defunc_2_reduce_res_123417 = redout_123495;
        ((float *) mem_119861.mem)[gtid_115671] = defunc_2_reduce_res_123416;
        ((float *) mem_119864.mem)[gtid_115671] = defunc_2_reduce_res_123417;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128332_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128332_end -
                 futhark_mc_segmap_parloop_128332_start;
        
        ctx->futhark_mc_segmap_parloop_128332_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128332_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128332_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128330(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115670 = tid;
    int num_tasks_123459 = info.nsubtasks;
    struct futhark_mc_task_128329 *futhark_mc_task_128329 =
                                  (struct futhark_mc_task_128329 *) args;
    struct futhark_context *ctx = futhark_mc_task_128329->ctx;
    uint64_t futhark_mc_segmap_task_128330_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128330_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128329->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128329->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128329->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128329->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128329->free_i_112596;
    int64_t gtid_115669 = futhark_mc_task_128329->free_gtid_115669;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128329->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128329->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128329->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128329->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128329->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128329->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128329->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119861 = {.desc ="mem_119861", .mem =
                                  futhark_mc_task_128329->free_mem_119861,
                                  .size =0, .references =NULL};
    struct memblock mem_119864 = {.desc ="mem_119864", .mem =
                                  futhark_mc_task_128329->free_mem_119864,
                                  .size =0, .references =NULL};
    int64_t iter_123460;
    struct futhark_mc_segmap_parloop_struct_128331
    futhark_mc_segmap_parloop_struct_128331;
    
    futhark_mc_segmap_parloop_struct_128331.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128331.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128331.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128331.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128331.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128331.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128331.free_gtid_115669 = gtid_115669;
    futhark_mc_segmap_parloop_struct_128331.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128331.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128331.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128331.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128331.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128331.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128331.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128331.free_mem_119861 = mem_119861.mem;
    futhark_mc_segmap_parloop_struct_128331.free_mem_119864 = mem_119864.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128332_task;
    
    futhark_mc_segmap_parloop_128332_task.name =
        "futhark_mc_segmap_parloop_128332";
    futhark_mc_segmap_parloop_128332_task.fn = futhark_mc_segmap_parloop_128332;
    futhark_mc_segmap_parloop_128332_task.args =
        &futhark_mc_segmap_parloop_struct_128331;
    futhark_mc_segmap_parloop_128332_task.iterations = iterations;
    futhark_mc_segmap_parloop_128332_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128332_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128332_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128332_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128332_task);
    
    if (futhark_mc_segmap_parloop_128332_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128332_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128332_total_end -
                 futhark_mc_segmap_parloop_128332_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128332_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128332_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128332_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128330_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128330_end -
                 futhark_mc_segmap_task_128330_start;
        
        ctx->futhark_mc_segmap_task_128330_runs[tid]++;
        ctx->futhark_mc_segmap_task_128330_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128330_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128334 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_115669;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    char *free_mem_119861;
    char *free_mem_119864;
};
struct futhark_mc_task_128336 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115669;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123236;
    float free_x_123237;
    float free_defunc_0_f_res_123240;
    float *retval_defunc_2_reduce_res_123241;
    float *retval_defunc_2_reduce_res_123242;
    float *retval_defunc_2_reduce_res_123243;
    float *retval_defunc_2_reduce_res_123244;
    float *retval_defunc_2_reduce_res_123245;
};
struct futhark_mc_segred_stage_1_parloop_struct_128343 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115669;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123236;
    float free_x_123237;
    float free_defunc_0_f_res_123240;
    char *free_reduce_stage_1_tid_res_arr_mem_123621;
    char *free_reduce_stage_1_tid_res_arr_mem_123623;
    char *free_reduce_stage_1_tid_res_arr_mem_123625;
    char *free_reduce_stage_1_tid_res_arr_mem_123627;
    char *free_reduce_stage_1_tid_res_arr_mem_123629;
};
static int futhark_mc_segred_stage_1_parloop_128344(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115674,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128343
    *futhark_mc_segred_stage_1_parloop_struct_128343 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128343 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128343->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128344_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128344_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_n_112520;
    int64_t gtid_115669 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_gtid_115669;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128343->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123236 =
            futhark_mc_segred_stage_1_parloop_struct_128343->free_x_123236;
    float x_123237 =
          futhark_mc_segred_stage_1_parloop_struct_128343->free_x_123237;
    float defunc_0_f_res_123240 =
          futhark_mc_segred_stage_1_parloop_struct_128343->free_defunc_0_f_res_123240;
    struct memblock reduce_stage_1_tid_res_arr_mem_123621 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123621",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128343->free_reduce_stage_1_tid_res_arr_mem_123621,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123623 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123623",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128343->free_reduce_stage_1_tid_res_arr_mem_123623,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123625 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123625",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128343->free_reduce_stage_1_tid_res_arr_mem_123625,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123627 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123627",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128343->free_reduce_stage_1_tid_res_arr_mem_123627,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123629 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123629",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128343->free_reduce_stage_1_tid_res_arr_mem_123629,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123631 = start;
    float x_123542;
    float x_123543;
    float x_123545;
    float x_123546;
    float x_123548;
    float x_123549;
    float x_123551;
    float x_123552;
    float x_123554;
    float x_123555;
    float local_acc_123632 = 0.0F;
    float local_acc_123633 = 0.0F;
    float local_acc_123634 = 0.0F;
    float local_acc_123635 = 0.0F;
    float local_acc_123636 = 0.0F;
    
    for (; iter_123631 < end; iter_123631++) {
        int64_t gtid_115675 = iter_123631;
        bool cond_123557 = sle64(n_112520, gtid_115675);
        float defunc_0_f_res_123558;
        
        if (cond_123557) {
            defunc_0_f_res_123558 = 0.0F;
        } else {
            int64_t i_123559 = add64(gtid_115675, x_123236);
            float index_primexp_123560 = sitofp_i64_f32(i_123559);
            float defunc_0_f_res_f_res_123561 = 1.0F + index_primexp_123560;
            
            defunc_0_f_res_123558 = defunc_0_f_res_f_res_123561;
        }
        
        float defunc_0_f_res_123562;
        
        if (cond_123557) {
            defunc_0_f_res_123562 = 0.0F;
        } else {
            int64_t i_123563 = add64(gtid_115675, x_123236);
            float x_123564 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115669 *
                                                    ctx_param_ext_119638 +
                                                    i_123563 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_123562 = x_123564;
        }
        
        float x_j_123565 = defunc_0_f_res_123558 - defunc_0_f_res_123240;
        float abs_res_123566 = (float) fabs(x_j_123565);
        float tmp1_123567 = abs_res_123566 / x_123237;
        float x_123568 = tmp1_123567 * tmp1_123567;
        float y_123569 = tmp1_123567 * x_123568;
        float tmp2_123570 = 1.0F - y_123569;
        float x_123571 = tmp2_123570 * tmp2_123570;
        float tmp3_123572 = tmp2_123570 * x_123571;
        float w_j_123573 = defunc_0_f_res_123562 * tmp3_123572;
        float xw_j_123574 = x_j_123565 * w_j_123573;
        float x2w_j_123575 = x_j_123565 * xw_j_123574;
        float x3w_j_123576 = x_j_123565 * x2w_j_123575;
        float x4w_j_123577 = x_j_123565 * x3w_j_123576;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123542 = local_acc_123632;
        }
        // Load next params
        {
            x_123543 = w_j_123573;
        }
        // Red body
        {
            float defunc_1_op_res_123544 = x_123542 + x_123543;
            
            local_acc_123632 = defunc_1_op_res_123544;
        }
        // Load accum params
        {
            x_123545 = local_acc_123633;
        }
        // Load next params
        {
            x_123546 = xw_j_123574;
        }
        // Red body
        {
            float defunc_1_op_res_123547 = x_123545 + x_123546;
            
            local_acc_123633 = defunc_1_op_res_123547;
        }
        // Load accum params
        {
            x_123548 = local_acc_123634;
        }
        // Load next params
        {
            x_123549 = x2w_j_123575;
        }
        // Red body
        {
            float defunc_1_op_res_123550 = x_123548 + x_123549;
            
            local_acc_123634 = defunc_1_op_res_123550;
        }
        // Load accum params
        {
            x_123551 = local_acc_123635;
        }
        // Load next params
        {
            x_123552 = x3w_j_123576;
        }
        // Red body
        {
            float defunc_1_op_res_123553 = x_123551 + x_123552;
            
            local_acc_123635 = defunc_1_op_res_123553;
        }
        // Load accum params
        {
            x_123554 = local_acc_123636;
        }
        // Load next params
        {
            x_123555 = x4w_j_123577;
        }
        // Red body
        {
            float defunc_1_op_res_123556 = x_123554 + x_123555;
            
            local_acc_123636 = defunc_1_op_res_123556;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123621.mem)[flat_tid_115674] =
        local_acc_123632;
    ((float *) reduce_stage_1_tid_res_arr_mem_123623.mem)[flat_tid_115674] =
        local_acc_123633;
    ((float *) reduce_stage_1_tid_res_arr_mem_123625.mem)[flat_tid_115674] =
        local_acc_123634;
    ((float *) reduce_stage_1_tid_res_arr_mem_123627.mem)[flat_tid_115674] =
        local_acc_123635;
    ((float *) reduce_stage_1_tid_res_arr_mem_123629.mem)[flat_tid_115674] =
        local_acc_123636;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128344_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128344_end -
                 futhark_mc_segred_stage_1_parloop_128344_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128344_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128344_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128344_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128337(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115674 = tid;
    int num_tasks_123620 = info.nsubtasks;
    struct futhark_mc_task_128336 *futhark_mc_task_128336 =
                                  (struct futhark_mc_task_128336 *) args;
    struct futhark_context *ctx = futhark_mc_task_128336->ctx;
    uint64_t futhark_mc_segred_task_128337_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128337_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128336->free_n_112520;
    int64_t gtid_115669 = futhark_mc_task_128336->free_gtid_115669;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128336->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128336->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128336->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128336->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123236 = futhark_mc_task_128336->free_x_123236;
    float x_123237 = futhark_mc_task_128336->free_x_123237;
    float defunc_0_f_res_123240 =
          futhark_mc_task_128336->free_defunc_0_f_res_123240;
    float defunc_2_reduce_res_123241 =
          *futhark_mc_task_128336->retval_defunc_2_reduce_res_123241;
    float defunc_2_reduce_res_123242 =
          *futhark_mc_task_128336->retval_defunc_2_reduce_res_123242;
    float defunc_2_reduce_res_123243 =
          *futhark_mc_task_128336->retval_defunc_2_reduce_res_123243;
    float defunc_2_reduce_res_123244 =
          *futhark_mc_task_128336->retval_defunc_2_reduce_res_123244;
    float defunc_2_reduce_res_123245 =
          *futhark_mc_task_128336->retval_defunc_2_reduce_res_123245;
    size_t reduce_stage_1_tid_res_arr_mem_123621_cached_sizze_128338 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123621 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123623_cached_sizze_128339 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123623 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123625_cached_sizze_128340 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123625 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123627_cached_sizze_128341 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123627 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123629_cached_sizze_128342 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123629 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123621_cached_sizze_128338 <
        (size_t) ((int64_t) 4 * num_tasks_123620)) {
        reduce_stage_1_tid_res_arr_mem_123621 =
            realloc(reduce_stage_1_tid_res_arr_mem_123621, (int64_t) 4 *
                    num_tasks_123620);
        reduce_stage_1_tid_res_arr_mem_123621_cached_sizze_128338 =
            (int64_t) 4 * num_tasks_123620;
    }
    if (reduce_stage_1_tid_res_arr_mem_123623_cached_sizze_128339 <
        (size_t) ((int64_t) 4 * num_tasks_123620)) {
        reduce_stage_1_tid_res_arr_mem_123623 =
            realloc(reduce_stage_1_tid_res_arr_mem_123623, (int64_t) 4 *
                    num_tasks_123620);
        reduce_stage_1_tid_res_arr_mem_123623_cached_sizze_128339 =
            (int64_t) 4 * num_tasks_123620;
    }
    if (reduce_stage_1_tid_res_arr_mem_123625_cached_sizze_128340 <
        (size_t) ((int64_t) 4 * num_tasks_123620)) {
        reduce_stage_1_tid_res_arr_mem_123625 =
            realloc(reduce_stage_1_tid_res_arr_mem_123625, (int64_t) 4 *
                    num_tasks_123620);
        reduce_stage_1_tid_res_arr_mem_123625_cached_sizze_128340 =
            (int64_t) 4 * num_tasks_123620;
    }
    if (reduce_stage_1_tid_res_arr_mem_123627_cached_sizze_128341 <
        (size_t) ((int64_t) 4 * num_tasks_123620)) {
        reduce_stage_1_tid_res_arr_mem_123627 =
            realloc(reduce_stage_1_tid_res_arr_mem_123627, (int64_t) 4 *
                    num_tasks_123620);
        reduce_stage_1_tid_res_arr_mem_123627_cached_sizze_128341 =
            (int64_t) 4 * num_tasks_123620;
    }
    if (reduce_stage_1_tid_res_arr_mem_123629_cached_sizze_128342 <
        (size_t) ((int64_t) 4 * num_tasks_123620)) {
        reduce_stage_1_tid_res_arr_mem_123629 =
            realloc(reduce_stage_1_tid_res_arr_mem_123629, (int64_t) 4 *
                    num_tasks_123620);
        reduce_stage_1_tid_res_arr_mem_123629_cached_sizze_128342 =
            (int64_t) 4 * num_tasks_123620;
    }
    
    int64_t iter_123631;
    struct futhark_mc_segred_stage_1_parloop_struct_128343
    futhark_mc_segred_stage_1_parloop_struct_128343;
    
    futhark_mc_segred_stage_1_parloop_struct_128343.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_gtid_115669 =
        gtid_115669;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_x_123236 = x_123236;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_x_123237 = x_123237;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_defunc_0_f_res_123240 =
        defunc_0_f_res_123240;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_reduce_stage_1_tid_res_arr_mem_123621 =
        reduce_stage_1_tid_res_arr_mem_123621;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_reduce_stage_1_tid_res_arr_mem_123623 =
        reduce_stage_1_tid_res_arr_mem_123623;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_reduce_stage_1_tid_res_arr_mem_123625 =
        reduce_stage_1_tid_res_arr_mem_123625;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_reduce_stage_1_tid_res_arr_mem_123627 =
        reduce_stage_1_tid_res_arr_mem_123627;
    futhark_mc_segred_stage_1_parloop_struct_128343.free_reduce_stage_1_tid_res_arr_mem_123629 =
        reduce_stage_1_tid_res_arr_mem_123629;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128344_task;
    
    futhark_mc_segred_stage_1_parloop_128344_task.name =
        "futhark_mc_segred_stage_1_parloop_128344";
    futhark_mc_segred_stage_1_parloop_128344_task.fn =
        futhark_mc_segred_stage_1_parloop_128344;
    futhark_mc_segred_stage_1_parloop_128344_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128343;
    futhark_mc_segred_stage_1_parloop_128344_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128344_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128344_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128344_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128344_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128344_task);
    
    if (futhark_mc_segred_stage_1_parloop_128344_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128344_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128344_total_end -
                 futhark_mc_segred_stage_1_parloop_128344_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128344_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128344_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128344_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123241 = 0.0F;
        defunc_2_reduce_res_123242 = 0.0F;
        defunc_2_reduce_res_123243 = 0.0F;
        defunc_2_reduce_res_123244 = 0.0F;
        defunc_2_reduce_res_123245 = 0.0F;
    }
    
    float x_123637;
    float x_123638;
    float x_123640;
    float x_123641;
    float x_123643;
    float x_123644;
    float x_123646;
    float x_123647;
    float x_123649;
    float x_123650;
    
    for (int32_t i_123652 = 0; i_123652 < num_tasks_123620; i_123652++) {
        flat_tid_115674 = i_123652;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123637 = defunc_2_reduce_res_123241;
            }
            // load next params
            {
                x_123638 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123621)[flat_tid_115674];
            }
            // red body
            {
                float defunc_1_op_res_123639 = x_123637 + x_123638;
                
                defunc_2_reduce_res_123241 = defunc_1_op_res_123639;
            }
            // load acc params
            {
                x_123640 = defunc_2_reduce_res_123242;
            }
            // load next params
            {
                x_123641 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123623)[flat_tid_115674];
            }
            // red body
            {
                float defunc_1_op_res_123642 = x_123640 + x_123641;
                
                defunc_2_reduce_res_123242 = defunc_1_op_res_123642;
            }
            // load acc params
            {
                x_123643 = defunc_2_reduce_res_123243;
            }
            // load next params
            {
                x_123644 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123625)[flat_tid_115674];
            }
            // red body
            {
                float defunc_1_op_res_123645 = x_123643 + x_123644;
                
                defunc_2_reduce_res_123243 = defunc_1_op_res_123645;
            }
            // load acc params
            {
                x_123646 = defunc_2_reduce_res_123244;
            }
            // load next params
            {
                x_123647 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123627)[flat_tid_115674];
            }
            // red body
            {
                float defunc_1_op_res_123648 = x_123646 + x_123647;
                
                defunc_2_reduce_res_123244 = defunc_1_op_res_123648;
            }
            // load acc params
            {
                x_123649 = defunc_2_reduce_res_123245;
            }
            // load next params
            {
                x_123650 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123629)[flat_tid_115674];
            }
            // red body
            {
                float defunc_1_op_res_123651 = x_123649 + x_123650;
                
                defunc_2_reduce_res_123245 = defunc_1_op_res_123651;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123621);
    free(reduce_stage_1_tid_res_arr_mem_123623);
    free(reduce_stage_1_tid_res_arr_mem_123625);
    free(reduce_stage_1_tid_res_arr_mem_123627);
    free(reduce_stage_1_tid_res_arr_mem_123629);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128337_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128337_end -
                 futhark_mc_segred_task_128337_start;
        
        ctx->futhark_mc_segred_task_128337_runs[tid]++;
        ctx->futhark_mc_segred_task_128337_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128337_iter[tid] += iterations;
    }
    *futhark_mc_task_128336->retval_defunc_2_reduce_res_123241 =
        defunc_2_reduce_res_123241;
    *futhark_mc_task_128336->retval_defunc_2_reduce_res_123242 =
        defunc_2_reduce_res_123242;
    *futhark_mc_task_128336->retval_defunc_2_reduce_res_123243 =
        defunc_2_reduce_res_123243;
    *futhark_mc_task_128336->retval_defunc_2_reduce_res_123244 =
        defunc_2_reduce_res_123244;
    *futhark_mc_task_128336->retval_defunc_2_reduce_res_123245 =
        defunc_2_reduce_res_123245;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128345 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115669;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_123236;
    float free_x_123237;
    float free_defunc_0_f_res_123240;
    float free_a12_123302;
    float free_b12_123303;
    float free_c12_123304;
    float free_b2_123305;
    float free_c2_123306;
    float *retval_defunc_2_reduce_res_123307;
    float *retval_defunc_2_reduce_res_123308;
};
struct futhark_mc_segred_stage_1_parloop_struct_128349 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_115669;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_x_123236;
    float free_x_123237;
    float free_defunc_0_f_res_123240;
    float free_a12_123302;
    float free_b12_123303;
    float free_c12_123304;
    float free_b2_123305;
    float free_c2_123306;
    char *free_reduce_stage_1_tid_res_arr_mem_123654;
    char *free_reduce_stage_1_tid_res_arr_mem_123656;
};
static int futhark_mc_segred_stage_1_parloop_128350(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115676,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128349
    *futhark_mc_segred_stage_1_parloop_struct_128349 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128349 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128349->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128350_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128350_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_n_112520;
    int64_t gtid_115669 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_gtid_115669;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128349->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128349->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123236 =
            futhark_mc_segred_stage_1_parloop_struct_128349->free_x_123236;
    float x_123237 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_x_123237;
    float defunc_0_f_res_123240 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_defunc_0_f_res_123240;
    float a12_123302 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_a12_123302;
    float b12_123303 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_b12_123303;
    float c12_123304 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_c12_123304;
    float b2_123305 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_b2_123305;
    float c2_123306 =
          futhark_mc_segred_stage_1_parloop_struct_128349->free_c2_123306;
    struct memblock reduce_stage_1_tid_res_arr_mem_123654 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123654",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128349->free_reduce_stage_1_tid_res_arr_mem_123654,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123656 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123656",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128349->free_reduce_stage_1_tid_res_arr_mem_123656,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123658 = start;
    float x_123578;
    float x_123579;
    float x_123581;
    float x_123582;
    float local_acc_123659 = 0.0F;
    float local_acc_123660 = 0.0F;
    
    for (; iter_123658 < end; iter_123658++) {
        int64_t gtid_115677 = iter_123658;
        bool cond_123584 = sle64(n_112520, gtid_115677);
        float defunc_0_f_res_123585;
        
        if (cond_123584) {
            defunc_0_f_res_123585 = 0.0F;
        } else {
            int64_t i_123586 = add64(gtid_115677, x_123236);
            float index_primexp_123587 = sitofp_i64_f32(i_123586);
            float defunc_0_f_res_f_res_123588 = 1.0F + index_primexp_123587;
            
            defunc_0_f_res_123585 = defunc_0_f_res_f_res_123588;
        }
        
        float defunc_0_f_res_123589;
        
        if (cond_123584) {
            defunc_0_f_res_123589 = 0.0F;
        } else {
            int64_t i_123590 = add64(gtid_115677, x_123236);
            float x_123591 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_115669 *
                                                    ctx_param_ext_119638 +
                                                    i_123590 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_123589 = x_123591;
        }
        
        float x_j_123592 = defunc_0_f_res_123585 - defunc_0_f_res_123240;
        float abs_res_123593 = (float) fabs(x_j_123592);
        float tmp1_123594 = abs_res_123593 / x_123237;
        float x_123595 = tmp1_123594 * tmp1_123594;
        float y_123596 = tmp1_123594 * x_123595;
        float tmp2_123597 = 1.0F - y_123596;
        float x_123598 = tmp2_123597 * tmp2_123597;
        float tmp3_123599 = tmp2_123597 * x_123598;
        float tmp4_123600 = defunc_0_f_res_123589 * tmp3_123599;
        float defunc_1_f_res_123601 = x_j_123592 * tmp4_123600;
        float defunc_1_f_res_123602 = x_j_123592 * defunc_1_f_res_123601;
        float defunc_0_f_res_123603;
        
        if (cond_123584) {
            defunc_0_f_res_123603 = 0.0F;
        } else {
            int64_t i_123604 = add64(gtid_115677, x_123236);
            float x_123605 = ((float *) mem_119788.mem)[gtid_115669 * n_112520 +
                                                        i_123604];
            
            defunc_0_f_res_123603 = x_123605;
        }
        
        float x_123606 = a12_123302 * tmp4_123600;
        float y_123607 = b12_123303 * defunc_1_f_res_123601;
        float x_123608 = x_123606 + y_123607;
        float y_123609 = c12_123304 * defunc_1_f_res_123602;
        float x_123610 = x_123608 + y_123609;
        float defunc_9_fit_fun_res_123611 = defunc_0_f_res_123603 * x_123610;
        float x_123612 = b12_123303 * tmp4_123600;
        float y_123613 = b2_123305 * defunc_1_f_res_123601;
        float x_123614 = x_123612 + y_123613;
        float y_123615 = c2_123306 * defunc_1_f_res_123602;
        float x_123616 = x_123614 + y_123615;
        float defunc_9_slope_fun_res_123617 = defunc_0_f_res_123603 * x_123616;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123578 = local_acc_123659;
        }
        // Load next params
        {
            x_123579 = defunc_9_fit_fun_res_123611;
        }
        // Red body
        {
            float defunc_1_op_res_123580 = x_123578 + x_123579;
            
            local_acc_123659 = defunc_1_op_res_123580;
        }
        // Load accum params
        {
            x_123581 = local_acc_123660;
        }
        // Load next params
        {
            x_123582 = defunc_9_slope_fun_res_123617;
        }
        // Red body
        {
            float defunc_1_op_res_123583 = x_123581 + x_123582;
            
            local_acc_123660 = defunc_1_op_res_123583;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123654.mem)[flat_tid_115676] =
        local_acc_123659;
    ((float *) reduce_stage_1_tid_res_arr_mem_123656.mem)[flat_tid_115676] =
        local_acc_123660;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128350_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128350_end -
                 futhark_mc_segred_stage_1_parloop_128350_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128350_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128350_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128350_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128346(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115676 = tid;
    int num_tasks_123653 = info.nsubtasks;
    struct futhark_mc_task_128345 *futhark_mc_task_128345 =
                                  (struct futhark_mc_task_128345 *) args;
    struct futhark_context *ctx = futhark_mc_task_128345->ctx;
    uint64_t futhark_mc_segred_task_128346_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128346_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128345->free_n_112520;
    int64_t gtid_115669 = futhark_mc_task_128345->free_gtid_115669;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128345->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128345->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128345->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128345->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128345->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123236 = futhark_mc_task_128345->free_x_123236;
    float x_123237 = futhark_mc_task_128345->free_x_123237;
    float defunc_0_f_res_123240 =
          futhark_mc_task_128345->free_defunc_0_f_res_123240;
    float a12_123302 = futhark_mc_task_128345->free_a12_123302;
    float b12_123303 = futhark_mc_task_128345->free_b12_123303;
    float c12_123304 = futhark_mc_task_128345->free_c12_123304;
    float b2_123305 = futhark_mc_task_128345->free_b2_123305;
    float c2_123306 = futhark_mc_task_128345->free_c2_123306;
    float defunc_2_reduce_res_123307 =
          *futhark_mc_task_128345->retval_defunc_2_reduce_res_123307;
    float defunc_2_reduce_res_123308 =
          *futhark_mc_task_128345->retval_defunc_2_reduce_res_123308;
    size_t reduce_stage_1_tid_res_arr_mem_123654_cached_sizze_128347 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123654 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123656_cached_sizze_128348 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123656 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123654_cached_sizze_128347 <
        (size_t) ((int64_t) 4 * num_tasks_123653)) {
        reduce_stage_1_tid_res_arr_mem_123654 =
            realloc(reduce_stage_1_tid_res_arr_mem_123654, (int64_t) 4 *
                    num_tasks_123653);
        reduce_stage_1_tid_res_arr_mem_123654_cached_sizze_128347 =
            (int64_t) 4 * num_tasks_123653;
    }
    if (reduce_stage_1_tid_res_arr_mem_123656_cached_sizze_128348 <
        (size_t) ((int64_t) 4 * num_tasks_123653)) {
        reduce_stage_1_tid_res_arr_mem_123656 =
            realloc(reduce_stage_1_tid_res_arr_mem_123656, (int64_t) 4 *
                    num_tasks_123653);
        reduce_stage_1_tid_res_arr_mem_123656_cached_sizze_128348 =
            (int64_t) 4 * num_tasks_123653;
    }
    
    int64_t iter_123658;
    struct futhark_mc_segred_stage_1_parloop_struct_128349
    futhark_mc_segred_stage_1_parloop_struct_128349;
    
    futhark_mc_segred_stage_1_parloop_struct_128349.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_gtid_115669 =
        gtid_115669;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_x_123236 = x_123236;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_x_123237 = x_123237;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_defunc_0_f_res_123240 =
        defunc_0_f_res_123240;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_a12_123302 =
        a12_123302;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_b12_123303 =
        b12_123303;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_c12_123304 =
        c12_123304;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_b2_123305 = b2_123305;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_c2_123306 = c2_123306;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_reduce_stage_1_tid_res_arr_mem_123654 =
        reduce_stage_1_tid_res_arr_mem_123654;
    futhark_mc_segred_stage_1_parloop_struct_128349.free_reduce_stage_1_tid_res_arr_mem_123656 =
        reduce_stage_1_tid_res_arr_mem_123656;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128350_task;
    
    futhark_mc_segred_stage_1_parloop_128350_task.name =
        "futhark_mc_segred_stage_1_parloop_128350";
    futhark_mc_segred_stage_1_parloop_128350_task.fn =
        futhark_mc_segred_stage_1_parloop_128350;
    futhark_mc_segred_stage_1_parloop_128350_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128349;
    futhark_mc_segred_stage_1_parloop_128350_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128350_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128350_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128350_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128350_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128350_task);
    
    if (futhark_mc_segred_stage_1_parloop_128350_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128350_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128350_total_end -
                 futhark_mc_segred_stage_1_parloop_128350_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128350_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128350_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128350_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123307 = 0.0F;
        defunc_2_reduce_res_123308 = 0.0F;
    }
    
    float x_123661;
    float x_123662;
    float x_123664;
    float x_123665;
    
    for (int32_t i_123667 = 0; i_123667 < num_tasks_123653; i_123667++) {
        flat_tid_115676 = i_123667;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123661 = defunc_2_reduce_res_123307;
            }
            // load next params
            {
                x_123662 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123654)[flat_tid_115676];
            }
            // red body
            {
                float defunc_1_op_res_123663 = x_123661 + x_123662;
                
                defunc_2_reduce_res_123307 = defunc_1_op_res_123663;
            }
            // load acc params
            {
                x_123664 = defunc_2_reduce_res_123308;
            }
            // load next params
            {
                x_123665 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123656)[flat_tid_115676];
            }
            // red body
            {
                float defunc_1_op_res_123666 = x_123664 + x_123665;
                
                defunc_2_reduce_res_123308 = defunc_1_op_res_123666;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123654);
    free(reduce_stage_1_tid_res_arr_mem_123656);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128346_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128346_end -
                 futhark_mc_segred_task_128346_start;
        
        ctx->futhark_mc_segred_task_128346_runs[tid]++;
        ctx->futhark_mc_segred_task_128346_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128346_iter[tid] += iterations;
    }
    *futhark_mc_task_128345->retval_defunc_2_reduce_res_123307 =
        defunc_2_reduce_res_123307;
    *futhark_mc_task_128345->retval_defunc_2_reduce_res_123308 =
        defunc_2_reduce_res_123308;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128335(void *args, int64_t start,
                                            int64_t end, int flat_tid_115672,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128334
    *futhark_mc_segmap_parloop_struct_128334 =
    (struct futhark_mc_segmap_parloop_struct_128334 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128334->ctx;
    uint64_t futhark_mc_segmap_parloop_128335_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128335_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128334->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128334->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128334->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128334->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128334->free_i_112596;
    int64_t gtid_115669 =
            futhark_mc_segmap_parloop_struct_128334->free_gtid_115669;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128334->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128334->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128334->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128334->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128334->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128334->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128334->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119861 = {.desc ="mem_119861", .mem =
                                  futhark_mc_segmap_parloop_struct_128334->free_mem_119861,
                                  .size =0, .references =NULL};
    struct memblock mem_119864 = {.desc ="mem_119864", .mem =
                                  futhark_mc_segmap_parloop_struct_128334->free_mem_119864,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123541 = start;
    
    for (; iter_123541 < end; iter_123541++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123618 = l_n_m_112570;
        int64_t gtid_115673 = iter_123541;
        int64_t remnant_123619 = iter_123541 - gtid_115673;
        int64_t x_123236 = ((int64_t *) mem_119544.mem)[gtid_115669 *
                                                        l_n_m_112570 +
                                                        gtid_115673];
        float x_123237 = ((float *) mem_119548.mem)[gtid_115669 * l_n_m_112570 +
                                                    gtid_115673];
        int64_t min_arg_123238 = mul64(t_jump_112527, gtid_115673);
        int64_t min_res_123239 = smin64(i_112596, min_arg_123238);
        float defunc_0_f_res_123240 = sitofp_i64_f32(min_res_123239);
        float defunc_2_reduce_res_123241;
        float defunc_2_reduce_res_123242;
        float defunc_2_reduce_res_123243;
        float defunc_2_reduce_res_123244;
        float defunc_2_reduce_res_123245;
        int64_t flat_tid_115674 = (int64_t) 0;
        int32_t num_tasks_123620;
        struct futhark_mc_task_128336 futhark_mc_task_128336;
        
        futhark_mc_task_128336.ctx = ctx;
        futhark_mc_task_128336.free_n_112520 = n_112520;
        futhark_mc_task_128336.free_gtid_115669 = gtid_115669;
        futhark_mc_task_128336.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128336.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128336.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128336.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128336.free_x_123236 = x_123236;
        futhark_mc_task_128336.free_x_123237 = x_123237;
        futhark_mc_task_128336.free_defunc_0_f_res_123240 =
            defunc_0_f_res_123240;
        futhark_mc_task_128336.retval_defunc_2_reduce_res_123241 =
            &defunc_2_reduce_res_123241;
        futhark_mc_task_128336.retval_defunc_2_reduce_res_123242 =
            &defunc_2_reduce_res_123242;
        futhark_mc_task_128336.retval_defunc_2_reduce_res_123243 =
            &defunc_2_reduce_res_123243;
        futhark_mc_task_128336.retval_defunc_2_reduce_res_123244 =
            &defunc_2_reduce_res_123244;
        futhark_mc_task_128336.retval_defunc_2_reduce_res_123245 =
            &defunc_2_reduce_res_123245;
        
        struct scheduler_segop futhark_mc_task_128336_task;
        
        futhark_mc_task_128336_task.args = &futhark_mc_task_128336;
        futhark_mc_task_128336_task.top_level_fn =
            futhark_mc_segred_task_128337;
        futhark_mc_task_128336_task.name = "futhark_mc_segred_task_128337";
        futhark_mc_task_128336_task.iterations = l_window_112524;
        futhark_mc_task_128336_task.task_time =
            &ctx->futhark_mc_segred_task_128337_total_time;
        futhark_mc_task_128336_task.task_iter =
            &ctx->futhark_mc_segred_task_128337_total_iter;
        futhark_mc_task_128336_task.sched = STATIC;
        futhark_mc_task_128336_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128337_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128336_task);
        
        if (futhark_mc_segred_task_128337_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_123282 = defunc_2_reduce_res_123243 *
              defunc_2_reduce_res_123245;
        float y_123283 = defunc_2_reduce_res_123244 *
              defunc_2_reduce_res_123244;
        float a12_123284 = x_123282 - y_123283;
        float x_123285 = defunc_2_reduce_res_123243 *
              defunc_2_reduce_res_123244;
        float y_123286 = defunc_2_reduce_res_123242 *
              defunc_2_reduce_res_123245;
        float b12_123287 = x_123285 - y_123286;
        float x_123288 = defunc_2_reduce_res_123242 *
              defunc_2_reduce_res_123244;
        float y_123289 = defunc_2_reduce_res_123243 *
              defunc_2_reduce_res_123243;
        float c12_123290 = x_123288 - y_123289;
        float x_123291 = defunc_2_reduce_res_123241 *
              defunc_2_reduce_res_123245;
        float b2_123292 = x_123291 - y_123289;
        float x_123293 = defunc_2_reduce_res_123242 *
              defunc_2_reduce_res_123243;
        float y_123294 = defunc_2_reduce_res_123241 *
              defunc_2_reduce_res_123244;
        float c2_123295 = x_123293 - y_123294;
        float x_123296 = defunc_2_reduce_res_123241 * a12_123284;
        float y_123297 = defunc_2_reduce_res_123242 * b12_123287;
        float x_123298 = x_123296 + y_123297;
        float y_123299 = defunc_2_reduce_res_123243 * c12_123290;
        float y_123300 = x_123298 + y_123299;
        float det_123301 = 1.0F / y_123300;
        float a12_123302 = a12_123284 * det_123301;
        float b12_123303 = b12_123287 * det_123301;
        float c12_123304 = c12_123290 * det_123301;
        float b2_123305 = b2_123292 * det_123301;
        float c2_123306 = c2_123295 * det_123301;
        float defunc_2_reduce_res_123307;
        float defunc_2_reduce_res_123308;
        int64_t flat_tid_115676 = (int64_t) 0;
        int32_t num_tasks_123653;
        struct futhark_mc_task_128345 futhark_mc_task_128345;
        
        futhark_mc_task_128345.ctx = ctx;
        futhark_mc_task_128345.free_n_112520 = n_112520;
        futhark_mc_task_128345.free_gtid_115669 = gtid_115669;
        futhark_mc_task_128345.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128345.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128345.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128345.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128345.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128345.free_x_123236 = x_123236;
        futhark_mc_task_128345.free_x_123237 = x_123237;
        futhark_mc_task_128345.free_defunc_0_f_res_123240 =
            defunc_0_f_res_123240;
        futhark_mc_task_128345.free_a12_123302 = a12_123302;
        futhark_mc_task_128345.free_b12_123303 = b12_123303;
        futhark_mc_task_128345.free_c12_123304 = c12_123304;
        futhark_mc_task_128345.free_b2_123305 = b2_123305;
        futhark_mc_task_128345.free_c2_123306 = c2_123306;
        futhark_mc_task_128345.retval_defunc_2_reduce_res_123307 =
            &defunc_2_reduce_res_123307;
        futhark_mc_task_128345.retval_defunc_2_reduce_res_123308 =
            &defunc_2_reduce_res_123308;
        
        struct scheduler_segop futhark_mc_task_128345_task;
        
        futhark_mc_task_128345_task.args = &futhark_mc_task_128345;
        futhark_mc_task_128345_task.top_level_fn =
            futhark_mc_segred_task_128346;
        futhark_mc_task_128345_task.name = "futhark_mc_segred_task_128346";
        futhark_mc_task_128345_task.iterations = l_window_112524;
        futhark_mc_task_128345_task.task_time =
            &ctx->futhark_mc_segred_task_128346_total_time;
        futhark_mc_task_128345_task.task_iter =
            &ctx->futhark_mc_segred_task_128346_total_iter;
        futhark_mc_task_128345_task.sched = STATIC;
        futhark_mc_task_128345_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128346_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128345_task);
        
        if (futhark_mc_segred_task_128346_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_119861.mem)[gtid_115673] = defunc_2_reduce_res_123307;
        ((float *) mem_119864.mem)[gtid_115673] = defunc_2_reduce_res_123308;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128335_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128335_end -
                 futhark_mc_segmap_parloop_128335_start;
        
        ctx->futhark_mc_segmap_parloop_128335_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128335_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128335_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128333(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115672 = tid;
    int num_tasks_123459 = info.nsubtasks;
    struct futhark_mc_task_128329 *futhark_mc_task_128329 =
                                  (struct futhark_mc_task_128329 *) args;
    struct futhark_context *ctx = futhark_mc_task_128329->ctx;
    uint64_t futhark_mc_segmap_nested_task_128333_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128333_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128329->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128329->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128329->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128329->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128329->free_i_112596;
    int64_t gtid_115669 = futhark_mc_task_128329->free_gtid_115669;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128329->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128329->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128329->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128329->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128329->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128329->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128329->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119861 = {.desc ="mem_119861", .mem =
                                  futhark_mc_task_128329->free_mem_119861,
                                  .size =0, .references =NULL};
    struct memblock mem_119864 = {.desc ="mem_119864", .mem =
                                  futhark_mc_task_128329->free_mem_119864,
                                  .size =0, .references =NULL};
    int64_t iter_123541;
    struct futhark_mc_segmap_parloop_struct_128334
    futhark_mc_segmap_parloop_struct_128334;
    
    futhark_mc_segmap_parloop_struct_128334.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128334.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128334.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128334.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128334.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128334.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128334.free_gtid_115669 = gtid_115669;
    futhark_mc_segmap_parloop_struct_128334.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128334.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128334.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128334.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128334.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128334.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128334.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128334.free_mem_119861 = mem_119861.mem;
    futhark_mc_segmap_parloop_struct_128334.free_mem_119864 = mem_119864.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128335_task;
    
    futhark_mc_segmap_parloop_128335_task.name =
        "futhark_mc_segmap_parloop_128335";
    futhark_mc_segmap_parloop_128335_task.fn = futhark_mc_segmap_parloop_128335;
    futhark_mc_segmap_parloop_128335_task.args =
        &futhark_mc_segmap_parloop_struct_128334;
    futhark_mc_segmap_parloop_128335_task.iterations = iterations;
    futhark_mc_segmap_parloop_128335_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128335_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128335_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128335_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128335_task);
    
    if (futhark_mc_segmap_parloop_128335_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128335_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128335_total_end -
                 futhark_mc_segmap_parloop_128335_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128335_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128335_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128335_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128333_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128333_end -
                 futhark_mc_segmap_nested_task_128333_start;
        
        ctx->futhark_mc_segmap_nested_task_128333_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128333_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128333_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128326(void *args, int64_t start,
                                            int64_t end, int flat_tid_115668,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128325
    *futhark_mc_segmap_parloop_struct_128325 =
    (struct futhark_mc_segmap_parloop_struct_128325 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128325->ctx;
    uint64_t futhark_mc_segmap_parloop_128326_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128326_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128325->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128325->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128325->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128325->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128325->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128325->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128325->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128325->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128325->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128325->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128325->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128325->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128325->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128325->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119898 = {.desc ="mem_119898", .mem =
                                  futhark_mc_segmap_parloop_struct_128325->free_mem_119898,
                                  .size =0, .references =NULL};
    struct memblock mem_119902 = {.desc ="mem_119902", .mem =
                                  futhark_mc_segmap_parloop_struct_128325->free_mem_119902,
                                  .size =0, .references =NULL};
    size_t mem_119861_cached_sizze_128327 = 0;
    char *mem_119861 = NULL;
    size_t mem_119864_cached_sizze_128328 = 0;
    char *mem_119864 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123235 = start;
    
    if (mem_119861_cached_sizze_128327 < (size_t) bytes_119490) {
        mem_119861 = realloc(mem_119861, bytes_119490);
        mem_119861_cached_sizze_128327 = bytes_119490;
    }
    if (mem_119864_cached_sizze_128328 < (size_t) bytes_119490) {
        mem_119864 = realloc(mem_119864, bytes_119490);
        mem_119864_cached_sizze_128328 = bytes_119490;
    }
    for (; iter_123235 < end; iter_123235++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123457 = m_112519;
        int64_t gtid_115669 = iter_123235;
        int64_t remnant_123458 = iter_123235 - gtid_115669;
        int64_t flat_tid_115670 = (int64_t) 0;
        int32_t num_tasks_123459;
        int64_t flat_tid_115672 = (int64_t) 0;
        struct futhark_mc_task_128329 futhark_mc_task_128329;
        
        futhark_mc_task_128329.ctx = ctx;
        futhark_mc_task_128329.free_n_112520 = n_112520;
        futhark_mc_task_128329.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128329.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128329.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128329.free_i_112596 = i_112596;
        futhark_mc_task_128329.free_gtid_115669 = gtid_115669;
        futhark_mc_task_128329.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128329.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128329.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128329.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128329.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128329.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128329.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128329.free_mem_119861 = mem_119861;
        futhark_mc_task_128329.free_mem_119864 = mem_119864;
        
        struct scheduler_segop futhark_mc_task_128329_task;
        
        futhark_mc_task_128329_task.args = &futhark_mc_task_128329;
        futhark_mc_task_128329_task.top_level_fn =
            futhark_mc_segmap_task_128330;
        futhark_mc_task_128329_task.name = "futhark_mc_segmap_task_128330";
        futhark_mc_task_128329_task.iterations = l_n_m_112570;
        futhark_mc_task_128329_task.task_time =
            &ctx->futhark_mc_segmap_task_128330_total_time;
        futhark_mc_task_128329_task.task_iter =
            &ctx->futhark_mc_segmap_task_128330_total_iter;
        futhark_mc_task_128329_task.sched = STATIC;
        futhark_mc_task_128329_task.nested_fn =
            futhark_mc_segmap_nested_task_128333;
        
        int futhark_mc_segmap_task_128330_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128329_task);
        
        if (futhark_mc_segmap_task_128330_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119898.mem + gtid_115669 * l_n_m_112570 * (int64_t) 4,
                mem_119861 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_119902.mem + gtid_115669 * l_n_m_112570 * (int64_t) 4,
                mem_119864 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119861);
    free(mem_119864);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128326_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128326_end -
                 futhark_mc_segmap_parloop_128326_start;
        
        ctx->futhark_mc_segmap_parloop_128326_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128326_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128326_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128324(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115668 = tid;
    int num_tasks_123109 = info.nsubtasks;
    struct futhark_mc_task_128318 *futhark_mc_task_128318 =
                                  (struct futhark_mc_task_128318 *) args;
    struct futhark_context *ctx = futhark_mc_task_128318->ctx;
    uint64_t futhark_mc_segmap_nested_task_128324_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128324_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128318->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128318->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128318->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128318->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128318->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128318->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128318->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128318->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128318->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128318->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128318->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128318->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128318->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128318->free_mem_119788,
                                  .size =0, .references =NULL};
    struct memblock mem_119898 = {.desc ="mem_119898", .mem =
                                  futhark_mc_task_128318->free_mem_119898,
                                  .size =0, .references =NULL};
    struct memblock mem_119902 = {.desc ="mem_119902", .mem =
                                  futhark_mc_task_128318->free_mem_119902,
                                  .size =0, .references =NULL};
    int64_t iter_123235;
    struct futhark_mc_segmap_parloop_struct_128325
    futhark_mc_segmap_parloop_struct_128325;
    
    futhark_mc_segmap_parloop_struct_128325.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128325.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128325.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128325.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128325.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128325.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128325.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128325.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128325.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128325.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128325.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128325.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128325.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128325.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128325.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128325.free_mem_119898 = mem_119898.mem;
    futhark_mc_segmap_parloop_struct_128325.free_mem_119902 = mem_119902.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128326_task;
    
    futhark_mc_segmap_parloop_128326_task.name =
        "futhark_mc_segmap_parloop_128326";
    futhark_mc_segmap_parloop_128326_task.fn = futhark_mc_segmap_parloop_128326;
    futhark_mc_segmap_parloop_128326_task.args =
        &futhark_mc_segmap_parloop_struct_128325;
    futhark_mc_segmap_parloop_128326_task.iterations = iterations;
    futhark_mc_segmap_parloop_128326_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128326_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128326_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128326_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128326_task);
    
    if (futhark_mc_segmap_parloop_128326_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128326_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128326_total_end -
                 futhark_mc_segmap_parloop_128326_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128326_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128326_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128326_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128324_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128324_end -
                 futhark_mc_segmap_nested_task_128324_start;
        
        ctx->futhark_mc_segmap_nested_task_128324_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128324_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128324_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128351 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119965;
};
struct futhark_mc_segmap_parloop_struct_128353 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119965;
};
static int futhark_mc_segmap_parloop_128354(void *args, int64_t start,
                                            int64_t end, int flat_tid_116032,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128353
    *futhark_mc_segmap_parloop_struct_128353 =
    (struct futhark_mc_segmap_parloop_struct_128353 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128353->ctx;
    uint64_t futhark_mc_segmap_parloop_128354_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128354_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128353->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128353->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128353->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128353->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128353->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128353->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128353->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128353->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128353->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128353->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128353->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128353->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128353->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128353->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 =
            futhark_mc_segmap_parloop_struct_128353->free_bytes_119911;
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_segmap_parloop_struct_128353->free_mem_119965,
                                  .size =0, .references =NULL};
    size_t mem_119934_cached_sizze_128355 = 0;
    char *mem_119934 = NULL;
    size_t mem_119944_cached_sizze_128356 = 0;
    char *mem_119944 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123671 = start;
    
    if (mem_119934_cached_sizze_128355 < (size_t) bytes_119490) {
        mem_119934 = realloc(mem_119934, bytes_119490);
        mem_119934_cached_sizze_128355 = bytes_119490;
    }
    if (mem_119944_cached_sizze_128356 < (size_t) bytes_119911) {
        mem_119944 = realloc(mem_119944, bytes_119911);
        mem_119944_cached_sizze_128356 = bytes_119911;
    }
    for (; iter_123671 < end; iter_123671++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123717 = m_112519;
        int64_t gtid_116033 = iter_123671;
        int64_t remnant_123718 = iter_123671 - gtid_116033;
        
        for (int64_t i_123672 = 0; i_123672 < l_n_m_112570; i_123672++) {
            int64_t x_123674 = ((int64_t *) mem_119544.mem)[gtid_116033 *
                                                            l_n_m_112570 +
                                                            i_123672];
            float x_123675 = ((float *) mem_119548.mem)[gtid_116033 *
                                                        l_n_m_112570 +
                                                        i_123672];
            int64_t min_arg_123676 = mul64(t_jump_112527, i_123672);
            int64_t min_res_123677 = smin64(i_112596, min_arg_123676);
            float defunc_0_f_res_123678 = sitofp_i64_f32(min_res_123677);
            float defunc_2_reduce_res_123680;
            float redout_123683 = 0.0F;
            
            for (int64_t i_123682 = 0; i_123682 < l_window_112524; i_123682++) {
                bool cond_123685 = sle64(n_112520, i_123682);
                float defunc_0_f_res_123686;
                
                if (cond_123685) {
                    defunc_0_f_res_123686 = 0.0F;
                } else {
                    int64_t i_123687 = add64(x_123674, i_123682);
                    float index_primexp_123688 = sitofp_i64_f32(i_123687);
                    float defunc_0_f_res_f_res_123689 = 1.0F +
                          index_primexp_123688;
                    
                    defunc_0_f_res_123686 = defunc_0_f_res_f_res_123689;
                }
                
                float defunc_0_f_res_123690;
                
                if (cond_123685) {
                    defunc_0_f_res_123690 = 0.0F;
                } else {
                    int64_t i_123691 = add64(x_123674, i_123682);
                    float x_123692 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_116033 *
                                                            ctx_param_ext_119638 +
                                                            i_123691 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_123690 = x_123692;
                }
                
                float x_j_123693 = defunc_0_f_res_123686 -
                      defunc_0_f_res_123678;
                float abs_res_123694 = (float) fabs(x_j_123693);
                float tmp1_123695 = abs_res_123694 / x_123675;
                float x_123696 = tmp1_123695 * tmp1_123695;
                float y_123697 = tmp1_123695 * x_123696;
                float tmp2_123698 = 1.0F - y_123697;
                float x_123699 = tmp2_123698 * tmp2_123698;
                float tmp3_123700 = tmp2_123698 * x_123699;
                float tmp4_123701 = defunc_0_f_res_123690 * tmp3_123700;
                float defunc_1_op_res_123702 = tmp4_123701 + redout_123683;
                
                ((float *) mem_119944)[i_123682] = tmp4_123701;
                
                float redout_tmp_123720 = defunc_1_op_res_123702;
                
                redout_123683 = redout_tmp_123720;
            }
            defunc_2_reduce_res_123680 = redout_123683;
            
            float a0_123704 = 1.0F / defunc_2_reduce_res_123680;
            float defunc_2_reduce_res_123705;
            float redout_123707 = 0.0F;
            
            for (int64_t i_123706 = 0; i_123706 < l_window_112524; i_123706++) {
                float x_123708 = ((float *) mem_119944)[i_123706];
                bool cond_123709 = sle64(n_112520, i_123706);
                float defunc_0_f_res_123710;
                
                if (cond_123709) {
                    defunc_0_f_res_123710 = 0.0F;
                } else {
                    int64_t i_123711 = add64(x_123674, i_123706);
                    float x_123712 = ((float *) mem_119788.mem)[gtid_116033 *
                                                                n_112520 +
                                                                i_123711];
                    
                    defunc_0_f_res_123710 = x_123712;
                }
                
                float x_123713 = a0_123704 * x_123708;
                float defunc_9_fit_fun_res_123714 = defunc_0_f_res_123710 *
                      x_123713;
                float defunc_1_op_res_123715 = defunc_9_fit_fun_res_123714 +
                      redout_123707;
                float redout_tmp_123722 = defunc_1_op_res_123715;
                
                redout_123707 = redout_tmp_123722;
            }
            defunc_2_reduce_res_123705 = redout_123707;
            ((float *) mem_119934)[i_123672] = defunc_2_reduce_res_123705;
        }
        memmove(mem_119965.mem + gtid_116033 * l_n_m_112570 * (int64_t) 4,
                mem_119934 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119934);
    free(mem_119944);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128354_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128354_end -
                 futhark_mc_segmap_parloop_128354_start;
        
        ctx->futhark_mc_segmap_parloop_128354_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128354_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128354_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128352(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116032 = tid;
    int num_tasks_123670 = info.nsubtasks;
    struct futhark_mc_task_128351 *futhark_mc_task_128351 =
                                  (struct futhark_mc_task_128351 *) args;
    struct futhark_context *ctx = futhark_mc_task_128351->ctx;
    uint64_t futhark_mc_segmap_task_128352_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128352_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128351->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128351->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128351->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128351->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128351->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128351->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128351->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128351->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128351->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128351->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128351->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128351->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128351->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128351->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 = futhark_mc_task_128351->free_bytes_119911;
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_task_128351->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iter_123671;
    struct futhark_mc_segmap_parloop_struct_128353
    futhark_mc_segmap_parloop_struct_128353;
    
    futhark_mc_segmap_parloop_struct_128353.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128353.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128353.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128353.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128353.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128353.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128353.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128353.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128353.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128353.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128353.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128353.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128353.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128353.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128353.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128353.free_bytes_119911 = bytes_119911;
    futhark_mc_segmap_parloop_struct_128353.free_mem_119965 = mem_119965.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128354_task;
    
    futhark_mc_segmap_parloop_128354_task.name =
        "futhark_mc_segmap_parloop_128354";
    futhark_mc_segmap_parloop_128354_task.fn = futhark_mc_segmap_parloop_128354;
    futhark_mc_segmap_parloop_128354_task.args =
        &futhark_mc_segmap_parloop_struct_128353;
    futhark_mc_segmap_parloop_128354_task.iterations = iterations;
    futhark_mc_segmap_parloop_128354_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128354_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128354_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128354_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128354_task);
    
    if (futhark_mc_segmap_parloop_128354_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128354_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128354_total_end -
                 futhark_mc_segmap_parloop_128354_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128354_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128354_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128354_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128352_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128352_end -
                 futhark_mc_segmap_task_128352_start;
        
        ctx->futhark_mc_segmap_task_128352_runs[tid]++;
        ctx->futhark_mc_segmap_task_128352_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128352_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128358 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119965;
};
struct futhark_mc_task_128361 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116035;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119931;
};
struct futhark_mc_segmap_parloop_struct_128363 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116035;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119931;
};
static int futhark_mc_segmap_parloop_128364(void *args, int64_t start,
                                            int64_t end, int flat_tid_116036,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128363
    *futhark_mc_segmap_parloop_struct_128363 =
    (struct futhark_mc_segmap_parloop_struct_128363 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128363->ctx;
    uint64_t futhark_mc_segmap_parloop_128364_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128364_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128363->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128363->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128363->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128363->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128363->free_i_112596;
    int64_t gtid_116035 =
            futhark_mc_segmap_parloop_struct_128363->free_gtid_116035;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128363->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128363->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128363->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128363->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128363->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128363->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128363->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 =
            futhark_mc_segmap_parloop_struct_128363->free_bytes_119911;
    struct memblock mem_119931 = {.desc ="mem_119931", .mem =
                                  futhark_mc_segmap_parloop_struct_128363->free_mem_119931,
                                  .size =0, .references =NULL};
    size_t mem_123769_cached_sizze_128365 = 0;
    char *mem_123769 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123810 = start;
    
    if (mem_123769_cached_sizze_128365 < (size_t) bytes_119911) {
        mem_123769 = realloc(mem_123769, bytes_119911);
        mem_123769_cached_sizze_128365 = bytes_119911;
    }
    for (; iter_123810 < end; iter_123810++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123843 = l_n_m_112570;
        int64_t gtid_116037 = iter_123810;
        int64_t remnant_123844 = iter_123810 - gtid_116037;
        int64_t x_123764 = ((int64_t *) mem_119544.mem)[gtid_116035 *
                                                        l_n_m_112570 +
                                                        gtid_116037];
        float x_123765 = ((float *) mem_119548.mem)[gtid_116035 * l_n_m_112570 +
                                                    gtid_116037];
        int64_t min_arg_123766 = mul64(t_jump_112527, gtid_116037);
        int64_t min_res_123767 = smin64(i_112596, min_arg_123766);
        float defunc_0_f_res_123768 = sitofp_i64_f32(min_res_123767);
        float defunc_2_reduce_res_123771;
        float redout_123812 = 0.0F;
        
        for (int64_t i_123811 = 0; i_123811 < l_window_112524; i_123811++) {
            bool cond_123814 = sle64(n_112520, i_123811);
            float defunc_0_f_res_123815;
            
            if (cond_123814) {
                defunc_0_f_res_123815 = 0.0F;
            } else {
                int64_t i_123816 = add64(x_123764, i_123811);
                float index_primexp_123817 = sitofp_i64_f32(i_123816);
                float defunc_0_f_res_f_res_123818 = 1.0F + index_primexp_123817;
                
                defunc_0_f_res_123815 = defunc_0_f_res_f_res_123818;
            }
            
            float defunc_0_f_res_123819;
            
            if (cond_123814) {
                defunc_0_f_res_123819 = 0.0F;
            } else {
                int64_t i_123820 = add64(x_123764, i_123811);
                float x_123821 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_116035 *
                                                        ctx_param_ext_119638 +
                                                        i_123820 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_123819 = x_123821;
            }
            
            float x_j_123822 = defunc_0_f_res_123815 - defunc_0_f_res_123768;
            float abs_res_123823 = (float) fabs(x_j_123822);
            float tmp1_123824 = abs_res_123823 / x_123765;
            float x_123825 = tmp1_123824 * tmp1_123824;
            float y_123826 = tmp1_123824 * x_123825;
            float tmp2_123827 = 1.0F - y_123826;
            float x_123828 = tmp2_123827 * tmp2_123827;
            float tmp3_123829 = tmp2_123827 * x_123828;
            float tmp4_123830 = defunc_0_f_res_123819 * tmp3_123829;
            float defunc_1_op_res_123831 = tmp4_123830 + redout_123812;
            
            ((float *) mem_123769)[i_123811] = tmp4_123830;
            
            float redout_tmp_123845 = defunc_1_op_res_123831;
            
            redout_123812 = redout_tmp_123845;
        }
        defunc_2_reduce_res_123771 = redout_123812;
        
        float a0_123795 = 1.0F / defunc_2_reduce_res_123771;
        float defunc_2_reduce_res_123796;
        float redout_123834 = 0.0F;
        
        for (int64_t i_123833 = 0; i_123833 < l_window_112524; i_123833++) {
            float x_123835 = ((float *) mem_123769)[i_123833];
            bool cond_123836 = sle64(n_112520, i_123833);
            float defunc_0_f_res_123837;
            
            if (cond_123836) {
                defunc_0_f_res_123837 = 0.0F;
            } else {
                int64_t i_123838 = add64(x_123764, i_123833);
                float x_123839 = ((float *) mem_119788.mem)[gtid_116035 *
                                                            n_112520 +
                                                            i_123838];
                
                defunc_0_f_res_123837 = x_123839;
            }
            
            float x_123840 = a0_123795 * x_123835;
            float defunc_9_fit_fun_res_123841 = defunc_0_f_res_123837 *
                  x_123840;
            float defunc_1_op_res_123842 = defunc_9_fit_fun_res_123841 +
                  redout_123834;
            float redout_tmp_123847 = defunc_1_op_res_123842;
            
            redout_123834 = redout_tmp_123847;
        }
        defunc_2_reduce_res_123796 = redout_123834;
        ((float *) mem_119931.mem)[gtid_116037] = defunc_2_reduce_res_123796;
    }
    
  cleanup:
    { }
    free(mem_123769);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128364_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128364_end -
                 futhark_mc_segmap_parloop_128364_start;
        
        ctx->futhark_mc_segmap_parloop_128364_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128364_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128364_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128362(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116036 = tid;
    int num_tasks_123809 = info.nsubtasks;
    struct futhark_mc_task_128361 *futhark_mc_task_128361 =
                                  (struct futhark_mc_task_128361 *) args;
    struct futhark_context *ctx = futhark_mc_task_128361->ctx;
    uint64_t futhark_mc_segmap_task_128362_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128362_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128361->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128361->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128361->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128361->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128361->free_i_112596;
    int64_t gtid_116035 = futhark_mc_task_128361->free_gtid_116035;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128361->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128361->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128361->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128361->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128361->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128361->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128361->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 = futhark_mc_task_128361->free_bytes_119911;
    struct memblock mem_119931 = {.desc ="mem_119931", .mem =
                                  futhark_mc_task_128361->free_mem_119931,
                                  .size =0, .references =NULL};
    int64_t iter_123810;
    struct futhark_mc_segmap_parloop_struct_128363
    futhark_mc_segmap_parloop_struct_128363;
    
    futhark_mc_segmap_parloop_struct_128363.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128363.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128363.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128363.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128363.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128363.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128363.free_gtid_116035 = gtid_116035;
    futhark_mc_segmap_parloop_struct_128363.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128363.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128363.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128363.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128363.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128363.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128363.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128363.free_bytes_119911 = bytes_119911;
    futhark_mc_segmap_parloop_struct_128363.free_mem_119931 = mem_119931.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128364_task;
    
    futhark_mc_segmap_parloop_128364_task.name =
        "futhark_mc_segmap_parloop_128364";
    futhark_mc_segmap_parloop_128364_task.fn = futhark_mc_segmap_parloop_128364;
    futhark_mc_segmap_parloop_128364_task.args =
        &futhark_mc_segmap_parloop_struct_128363;
    futhark_mc_segmap_parloop_128364_task.iterations = iterations;
    futhark_mc_segmap_parloop_128364_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128364_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128364_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128364_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128364_task);
    
    if (futhark_mc_segmap_parloop_128364_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128364_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128364_total_end -
                 futhark_mc_segmap_parloop_128364_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128362_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128362_end -
                 futhark_mc_segmap_task_128362_start;
        
        ctx->futhark_mc_segmap_task_128362_runs[tid]++;
        ctx->futhark_mc_segmap_task_128362_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128362_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128367 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116035;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119911;
    char *free_mem_119931;
};
struct futhark_mc_task_128370 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116035;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123724;
    float free_x_123725;
    float free_defunc_0_f_res_123728;
    float *retval_defunc_2_reduce_res_123730;
    char *retval_mem_123729;
};
struct futhark_mc_segred_stage_1_parloop_struct_128373 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116035;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123724;
    float free_x_123725;
    float free_defunc_0_f_res_123728;
    char *free_mem_123729;
    char *free_reduce_stage_1_tid_res_arr_mem_123882;
};
static int futhark_mc_segred_stage_1_parloop_128374(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116040,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128373
    *futhark_mc_segred_stage_1_parloop_struct_128373 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128373 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128373->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128374_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128374_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_n_112520;
    int64_t gtid_116035 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_gtid_116035;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128373->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123724 =
            futhark_mc_segred_stage_1_parloop_struct_128373->free_x_123724;
    float x_123725 =
          futhark_mc_segred_stage_1_parloop_struct_128373->free_x_123725;
    float defunc_0_f_res_123728 =
          futhark_mc_segred_stage_1_parloop_struct_128373->free_defunc_0_f_res_123728;
    struct memblock mem_123729 = {.desc ="mem_123729", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128373->free_mem_123729,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123882 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123882",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128373->free_reduce_stage_1_tid_res_arr_mem_123882,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123884 = start;
    float x_123849;
    float x_123850;
    float local_acc_123885 = 0.0F;
    
    for (; iter_123884 < end; iter_123884++) {
        int64_t gtid_116041 = iter_123884;
        bool cond_123852 = sle64(n_112520, gtid_116041);
        float defunc_0_f_res_123853;
        
        if (cond_123852) {
            defunc_0_f_res_123853 = 0.0F;
        } else {
            int64_t i_123854 = add64(gtid_116041, x_123724);
            float index_primexp_123855 = sitofp_i64_f32(i_123854);
            float defunc_0_f_res_f_res_123856 = 1.0F + index_primexp_123855;
            
            defunc_0_f_res_123853 = defunc_0_f_res_f_res_123856;
        }
        
        float defunc_0_f_res_123857;
        
        if (cond_123852) {
            defunc_0_f_res_123857 = 0.0F;
        } else {
            int64_t i_123858 = add64(gtid_116041, x_123724);
            float x_123859 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_116035 *
                                                    ctx_param_ext_119638 +
                                                    i_123858 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_123857 = x_123859;
        }
        
        float x_j_123860 = defunc_0_f_res_123853 - defunc_0_f_res_123728;
        float abs_res_123861 = (float) fabs(x_j_123860);
        float tmp1_123862 = abs_res_123861 / x_123725;
        float x_123863 = tmp1_123862 * tmp1_123862;
        float y_123864 = tmp1_123862 * x_123863;
        float tmp2_123865 = 1.0F - y_123864;
        float x_123866 = tmp2_123865 * tmp2_123865;
        float tmp3_123867 = tmp2_123865 * x_123866;
        float tmp4_123868 = defunc_0_f_res_123857 * tmp3_123867;
        
        // save map-out results
        {
            ((float *) mem_123729.mem)[gtid_116041] = tmp4_123868;
        }
        // Load accum params
        {
            x_123849 = local_acc_123885;
        }
        // Load next params
        {
            x_123850 = tmp4_123868;
        }
        // Red body
        {
            float defunc_1_op_res_123851 = x_123849 + x_123850;
            
            local_acc_123885 = defunc_1_op_res_123851;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123882.mem)[flat_tid_116040] =
        local_acc_123885;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128374_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128374_end -
                 futhark_mc_segred_stage_1_parloop_128374_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128374_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128374_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128374_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128371(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116040 = tid;
    int num_tasks_123881 = info.nsubtasks;
    struct futhark_mc_task_128370 *futhark_mc_task_128370 =
                                  (struct futhark_mc_task_128370 *) args;
    struct futhark_context *ctx = futhark_mc_task_128370->ctx;
    uint64_t futhark_mc_segred_task_128371_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128371_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128370->free_n_112520;
    int64_t gtid_116035 = futhark_mc_task_128370->free_gtid_116035;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128370->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128370->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128370->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128370->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123724 = futhark_mc_task_128370->free_x_123724;
    float x_123725 = futhark_mc_task_128370->free_x_123725;
    float defunc_0_f_res_123728 =
          futhark_mc_task_128370->free_defunc_0_f_res_123728;
    float defunc_2_reduce_res_123730 =
          *futhark_mc_task_128370->retval_defunc_2_reduce_res_123730;
    struct memblock mem_123729 = {.desc ="mem_123729", .mem =
                                  futhark_mc_task_128370->retval_mem_123729,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_123882_cached_sizze_128372 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123882 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123882_cached_sizze_128372 <
        (size_t) ((int64_t) 4 * num_tasks_123881)) {
        reduce_stage_1_tid_res_arr_mem_123882 =
            realloc(reduce_stage_1_tid_res_arr_mem_123882, (int64_t) 4 *
                    num_tasks_123881);
        reduce_stage_1_tid_res_arr_mem_123882_cached_sizze_128372 =
            (int64_t) 4 * num_tasks_123881;
    }
    
    int64_t iter_123884;
    struct futhark_mc_segred_stage_1_parloop_struct_128373
    futhark_mc_segred_stage_1_parloop_struct_128373;
    
    futhark_mc_segred_stage_1_parloop_struct_128373.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_gtid_116035 =
        gtid_116035;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_x_123724 = x_123724;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_x_123725 = x_123725;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_defunc_0_f_res_123728 =
        defunc_0_f_res_123728;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_mem_123729 =
        mem_123729.mem;
    futhark_mc_segred_stage_1_parloop_struct_128373.free_reduce_stage_1_tid_res_arr_mem_123882 =
        reduce_stage_1_tid_res_arr_mem_123882;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128374_task;
    
    futhark_mc_segred_stage_1_parloop_128374_task.name =
        "futhark_mc_segred_stage_1_parloop_128374";
    futhark_mc_segred_stage_1_parloop_128374_task.fn =
        futhark_mc_segred_stage_1_parloop_128374;
    futhark_mc_segred_stage_1_parloop_128374_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128373;
    futhark_mc_segred_stage_1_parloop_128374_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128374_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128374_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128374_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128374_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128374_task);
    
    if (futhark_mc_segred_stage_1_parloop_128374_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128374_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128374_total_end -
                 futhark_mc_segred_stage_1_parloop_128374_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128374_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128374_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128374_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123730 = 0.0F;
    }
    
    float x_123886;
    float x_123887;
    
    for (int32_t i_123889 = 0; i_123889 < num_tasks_123881; i_123889++) {
        flat_tid_116040 = i_123889;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123886 = defunc_2_reduce_res_123730;
            }
            // load next params
            {
                x_123887 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123882)[flat_tid_116040];
            }
            // red body
            {
                float defunc_1_op_res_123888 = x_123886 + x_123887;
                
                defunc_2_reduce_res_123730 = defunc_1_op_res_123888;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123882);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128371_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128371_end -
                 futhark_mc_segred_task_128371_start;
        
        ctx->futhark_mc_segred_task_128371_runs[tid]++;
        ctx->futhark_mc_segred_task_128371_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128371_iter[tid] += iterations;
    }
    *futhark_mc_task_128370->retval_defunc_2_reduce_res_123730 =
        defunc_2_reduce_res_123730;
    futhark_mc_task_128370->retval_mem_123729 = mem_123729.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128375 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116035;
    char *free_mem_119788;
    int64_t free_x_123724;
    char *free_mem_123729;
    float free_a0_123752;
    float *retval_defunc_2_reduce_res_123753;
};
struct futhark_mc_segred_stage_1_parloop_struct_128378 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116035;
    char *free_mem_119788;
    int64_t free_x_123724;
    char *free_mem_123729;
    float free_a0_123752;
    char *free_reduce_stage_1_tid_res_arr_mem_123891;
};
static int futhark_mc_segred_stage_1_parloop_128379(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116042,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128378
    *futhark_mc_segred_stage_1_parloop_struct_128378 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128378 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128378->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128379_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128379_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128378->free_n_112520;
    int64_t gtid_116035 =
            futhark_mc_segred_stage_1_parloop_struct_128378->free_gtid_116035;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128378->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123724 =
            futhark_mc_segred_stage_1_parloop_struct_128378->free_x_123724;
    struct memblock mem_123729 = {.desc ="mem_123729", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128378->free_mem_123729,
                                  .size =0, .references =NULL};
    float a0_123752 =
          futhark_mc_segred_stage_1_parloop_struct_128378->free_a0_123752;
    struct memblock reduce_stage_1_tid_res_arr_mem_123891 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123891",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128378->free_reduce_stage_1_tid_res_arr_mem_123891,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123893 = start;
    float x_123869;
    float x_123870;
    float local_acc_123894 = 0.0F;
    
    for (; iter_123893 < end; iter_123893++) {
        int64_t gtid_116043 = iter_123893;
        float x_123872 = ((float *) mem_123729.mem)[gtid_116043];
        bool cond_123873 = sle64(n_112520, gtid_116043);
        float defunc_0_f_res_123874;
        
        if (cond_123873) {
            defunc_0_f_res_123874 = 0.0F;
        } else {
            int64_t i_123875 = add64(gtid_116043, x_123724);
            float x_123876 = ((float *) mem_119788.mem)[gtid_116035 * n_112520 +
                                                        i_123875];
            
            defunc_0_f_res_123874 = x_123876;
        }
        
        float x_123877 = a0_123752 * x_123872;
        float defunc_9_fit_fun_res_123878 = defunc_0_f_res_123874 * x_123877;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123869 = local_acc_123894;
        }
        // Load next params
        {
            x_123870 = defunc_9_fit_fun_res_123878;
        }
        // Red body
        {
            float defunc_1_op_res_123871 = x_123869 + x_123870;
            
            local_acc_123894 = defunc_1_op_res_123871;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123891.mem)[flat_tid_116042] =
        local_acc_123894;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128379_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128379_end -
                 futhark_mc_segred_stage_1_parloop_128379_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128379_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128379_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128379_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128376(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116042 = tid;
    int num_tasks_123890 = info.nsubtasks;
    struct futhark_mc_task_128375 *futhark_mc_task_128375 =
                                  (struct futhark_mc_task_128375 *) args;
    struct futhark_context *ctx = futhark_mc_task_128375->ctx;
    uint64_t futhark_mc_segred_task_128376_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128376_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128375->free_n_112520;
    int64_t gtid_116035 = futhark_mc_task_128375->free_gtid_116035;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128375->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123724 = futhark_mc_task_128375->free_x_123724;
    struct memblock mem_123729 = {.desc ="mem_123729", .mem =
                                  futhark_mc_task_128375->free_mem_123729,
                                  .size =0, .references =NULL};
    float a0_123752 = futhark_mc_task_128375->free_a0_123752;
    float defunc_2_reduce_res_123753 =
          *futhark_mc_task_128375->retval_defunc_2_reduce_res_123753;
    size_t reduce_stage_1_tid_res_arr_mem_123891_cached_sizze_128377 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123891 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123891_cached_sizze_128377 <
        (size_t) ((int64_t) 4 * num_tasks_123890)) {
        reduce_stage_1_tid_res_arr_mem_123891 =
            realloc(reduce_stage_1_tid_res_arr_mem_123891, (int64_t) 4 *
                    num_tasks_123890);
        reduce_stage_1_tid_res_arr_mem_123891_cached_sizze_128377 =
            (int64_t) 4 * num_tasks_123890;
    }
    
    int64_t iter_123893;
    struct futhark_mc_segred_stage_1_parloop_struct_128378
    futhark_mc_segred_stage_1_parloop_struct_128378;
    
    futhark_mc_segred_stage_1_parloop_struct_128378.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_gtid_116035 =
        gtid_116035;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_x_123724 = x_123724;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_mem_123729 =
        mem_123729.mem;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_a0_123752 = a0_123752;
    futhark_mc_segred_stage_1_parloop_struct_128378.free_reduce_stage_1_tid_res_arr_mem_123891 =
        reduce_stage_1_tid_res_arr_mem_123891;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128379_task;
    
    futhark_mc_segred_stage_1_parloop_128379_task.name =
        "futhark_mc_segred_stage_1_parloop_128379";
    futhark_mc_segred_stage_1_parloop_128379_task.fn =
        futhark_mc_segred_stage_1_parloop_128379;
    futhark_mc_segred_stage_1_parloop_128379_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128378;
    futhark_mc_segred_stage_1_parloop_128379_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128379_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128379_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128379_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128379_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128379_task);
    
    if (futhark_mc_segred_stage_1_parloop_128379_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128379_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128379_total_end -
                 futhark_mc_segred_stage_1_parloop_128379_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128379_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128379_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128379_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123753 = 0.0F;
    }
    
    float x_123895;
    float x_123896;
    
    for (int32_t i_123898 = 0; i_123898 < num_tasks_123890; i_123898++) {
        flat_tid_116042 = i_123898;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123895 = defunc_2_reduce_res_123753;
            }
            // load next params
            {
                x_123896 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123891)[flat_tid_116042];
            }
            // red body
            {
                float defunc_1_op_res_123897 = x_123895 + x_123896;
                
                defunc_2_reduce_res_123753 = defunc_1_op_res_123897;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123891);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128376_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128376_end -
                 futhark_mc_segred_task_128376_start;
        
        ctx->futhark_mc_segred_task_128376_runs[tid]++;
        ctx->futhark_mc_segred_task_128376_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128376_iter[tid] += iterations;
    }
    *futhark_mc_task_128375->retval_defunc_2_reduce_res_123753 =
        defunc_2_reduce_res_123753;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128368(void *args, int64_t start,
                                            int64_t end, int flat_tid_116038,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128367
    *futhark_mc_segmap_parloop_struct_128367 =
    (struct futhark_mc_segmap_parloop_struct_128367 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128367->ctx;
    uint64_t futhark_mc_segmap_parloop_128368_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128368_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128367->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128367->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128367->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128367->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128367->free_i_112596;
    int64_t gtid_116035 =
            futhark_mc_segmap_parloop_struct_128367->free_gtid_116035;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128367->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128367->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128367->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128367->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128367->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128367->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128367->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 =
            futhark_mc_segmap_parloop_struct_128367->free_bytes_119911;
    struct memblock mem_119931 = {.desc ="mem_119931", .mem =
                                  futhark_mc_segmap_parloop_struct_128367->free_mem_119931,
                                  .size =0, .references =NULL};
    size_t mem_123729_cached_sizze_128369 = 0;
    char *mem_123729 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123848 = start;
    
    if (mem_123729_cached_sizze_128369 < (size_t) bytes_119911) {
        mem_123729 = realloc(mem_123729, bytes_119911);
        mem_123729_cached_sizze_128369 = bytes_119911;
    }
    for (; iter_123848 < end; iter_123848++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123879 = l_n_m_112570;
        int64_t gtid_116039 = iter_123848;
        int64_t remnant_123880 = iter_123848 - gtid_116039;
        int64_t x_123724 = ((int64_t *) mem_119544.mem)[gtid_116035 *
                                                        l_n_m_112570 +
                                                        gtid_116039];
        float x_123725 = ((float *) mem_119548.mem)[gtid_116035 * l_n_m_112570 +
                                                    gtid_116039];
        int64_t min_arg_123726 = mul64(t_jump_112527, gtid_116039);
        int64_t min_res_123727 = smin64(i_112596, min_arg_123726);
        float defunc_0_f_res_123728 = sitofp_i64_f32(min_res_123727);
        float defunc_2_reduce_res_123730;
        int64_t flat_tid_116040 = (int64_t) 0;
        int32_t num_tasks_123881;
        struct futhark_mc_task_128370 futhark_mc_task_128370;
        
        futhark_mc_task_128370.ctx = ctx;
        futhark_mc_task_128370.free_n_112520 = n_112520;
        futhark_mc_task_128370.free_gtid_116035 = gtid_116035;
        futhark_mc_task_128370.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128370.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128370.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128370.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128370.free_x_123724 = x_123724;
        futhark_mc_task_128370.free_x_123725 = x_123725;
        futhark_mc_task_128370.free_defunc_0_f_res_123728 =
            defunc_0_f_res_123728;
        futhark_mc_task_128370.retval_defunc_2_reduce_res_123730 =
            &defunc_2_reduce_res_123730;
        futhark_mc_task_128370.retval_mem_123729 = mem_123729;
        
        struct scheduler_segop futhark_mc_task_128370_task;
        
        futhark_mc_task_128370_task.args = &futhark_mc_task_128370;
        futhark_mc_task_128370_task.top_level_fn =
            futhark_mc_segred_task_128371;
        futhark_mc_task_128370_task.name = "futhark_mc_segred_task_128371";
        futhark_mc_task_128370_task.iterations = l_window_112524;
        futhark_mc_task_128370_task.task_time =
            &ctx->futhark_mc_segred_task_128371_total_time;
        futhark_mc_task_128370_task.task_iter =
            &ctx->futhark_mc_segred_task_128371_total_iter;
        futhark_mc_task_128370_task.sched = STATIC;
        futhark_mc_task_128370_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128371_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128370_task);
        
        if (futhark_mc_segred_task_128371_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_123752 = 1.0F / defunc_2_reduce_res_123730;
        float defunc_2_reduce_res_123753;
        int64_t flat_tid_116042 = (int64_t) 0;
        int32_t num_tasks_123890;
        struct futhark_mc_task_128375 futhark_mc_task_128375;
        
        futhark_mc_task_128375.ctx = ctx;
        futhark_mc_task_128375.free_n_112520 = n_112520;
        futhark_mc_task_128375.free_gtid_116035 = gtid_116035;
        futhark_mc_task_128375.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128375.free_x_123724 = x_123724;
        futhark_mc_task_128375.free_mem_123729 = mem_123729;
        futhark_mc_task_128375.free_a0_123752 = a0_123752;
        futhark_mc_task_128375.retval_defunc_2_reduce_res_123753 =
            &defunc_2_reduce_res_123753;
        
        struct scheduler_segop futhark_mc_task_128375_task;
        
        futhark_mc_task_128375_task.args = &futhark_mc_task_128375;
        futhark_mc_task_128375_task.top_level_fn =
            futhark_mc_segred_task_128376;
        futhark_mc_task_128375_task.name = "futhark_mc_segred_task_128376";
        futhark_mc_task_128375_task.iterations = l_window_112524;
        futhark_mc_task_128375_task.task_time =
            &ctx->futhark_mc_segred_task_128376_total_time;
        futhark_mc_task_128375_task.task_iter =
            &ctx->futhark_mc_segred_task_128376_total_iter;
        futhark_mc_task_128375_task.sched = STATIC;
        futhark_mc_task_128375_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128376_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128375_task);
        
        if (futhark_mc_segred_task_128376_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_119931.mem)[gtid_116039] = defunc_2_reduce_res_123753;
    }
    
  cleanup:
    { }
    free(mem_123729);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128368_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128368_end -
                 futhark_mc_segmap_parloop_128368_start;
        
        ctx->futhark_mc_segmap_parloop_128368_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128368_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128368_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128366(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116038 = tid;
    int num_tasks_123809 = info.nsubtasks;
    struct futhark_mc_task_128361 *futhark_mc_task_128361 =
                                  (struct futhark_mc_task_128361 *) args;
    struct futhark_context *ctx = futhark_mc_task_128361->ctx;
    uint64_t futhark_mc_segmap_nested_task_128366_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128366_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128361->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128361->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128361->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128361->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128361->free_i_112596;
    int64_t gtid_116035 = futhark_mc_task_128361->free_gtid_116035;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128361->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128361->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128361->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128361->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128361->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128361->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128361->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 = futhark_mc_task_128361->free_bytes_119911;
    struct memblock mem_119931 = {.desc ="mem_119931", .mem =
                                  futhark_mc_task_128361->free_mem_119931,
                                  .size =0, .references =NULL};
    int64_t iter_123848;
    struct futhark_mc_segmap_parloop_struct_128367
    futhark_mc_segmap_parloop_struct_128367;
    
    futhark_mc_segmap_parloop_struct_128367.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128367.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128367.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128367.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128367.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128367.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128367.free_gtid_116035 = gtid_116035;
    futhark_mc_segmap_parloop_struct_128367.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128367.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128367.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128367.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128367.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128367.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128367.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128367.free_bytes_119911 = bytes_119911;
    futhark_mc_segmap_parloop_struct_128367.free_mem_119931 = mem_119931.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128368_task;
    
    futhark_mc_segmap_parloop_128368_task.name =
        "futhark_mc_segmap_parloop_128368";
    futhark_mc_segmap_parloop_128368_task.fn = futhark_mc_segmap_parloop_128368;
    futhark_mc_segmap_parloop_128368_task.args =
        &futhark_mc_segmap_parloop_struct_128367;
    futhark_mc_segmap_parloop_128368_task.iterations = iterations;
    futhark_mc_segmap_parloop_128368_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128368_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128368_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128368_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128368_task);
    
    if (futhark_mc_segmap_parloop_128368_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128368_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128368_total_end -
                 futhark_mc_segmap_parloop_128368_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128366_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128366_end -
                 futhark_mc_segmap_nested_task_128366_start;
        
        ctx->futhark_mc_segmap_nested_task_128366_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128366_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128366_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128359(void *args, int64_t start,
                                            int64_t end, int flat_tid_116034,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128358
    *futhark_mc_segmap_parloop_struct_128358 =
    (struct futhark_mc_segmap_parloop_struct_128358 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128358->ctx;
    uint64_t futhark_mc_segmap_parloop_128359_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128359_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128358->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128358->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128358->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128358->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128358->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128358->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128358->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128358->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128358->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128358->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128358->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128358->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128358->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128358->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 =
            futhark_mc_segmap_parloop_struct_128358->free_bytes_119911;
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_segmap_parloop_struct_128358->free_mem_119965,
                                  .size =0, .references =NULL};
    size_t mem_119931_cached_sizze_128360 = 0;
    char *mem_119931 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123723 = start;
    
    if (mem_119931_cached_sizze_128360 < (size_t) bytes_119490) {
        mem_119931 = realloc(mem_119931, bytes_119490);
        mem_119931_cached_sizze_128360 = bytes_119490;
    }
    for (; iter_123723 < end; iter_123723++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123807 = m_112519;
        int64_t gtid_116035 = iter_123723;
        int64_t remnant_123808 = iter_123723 - gtid_116035;
        int64_t flat_tid_116036 = (int64_t) 0;
        int32_t num_tasks_123809;
        int64_t flat_tid_116038 = (int64_t) 0;
        struct futhark_mc_task_128361 futhark_mc_task_128361;
        
        futhark_mc_task_128361.ctx = ctx;
        futhark_mc_task_128361.free_n_112520 = n_112520;
        futhark_mc_task_128361.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128361.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128361.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128361.free_i_112596 = i_112596;
        futhark_mc_task_128361.free_gtid_116035 = gtid_116035;
        futhark_mc_task_128361.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128361.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128361.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128361.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128361.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128361.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128361.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128361.free_bytes_119911 = bytes_119911;
        futhark_mc_task_128361.free_mem_119931 = mem_119931;
        
        struct scheduler_segop futhark_mc_task_128361_task;
        
        futhark_mc_task_128361_task.args = &futhark_mc_task_128361;
        futhark_mc_task_128361_task.top_level_fn =
            futhark_mc_segmap_task_128362;
        futhark_mc_task_128361_task.name = "futhark_mc_segmap_task_128362";
        futhark_mc_task_128361_task.iterations = l_n_m_112570;
        futhark_mc_task_128361_task.task_time =
            &ctx->futhark_mc_segmap_task_128362_total_time;
        futhark_mc_task_128361_task.task_iter =
            &ctx->futhark_mc_segmap_task_128362_total_iter;
        futhark_mc_task_128361_task.sched = STATIC;
        futhark_mc_task_128361_task.nested_fn =
            futhark_mc_segmap_nested_task_128366;
        
        int futhark_mc_segmap_task_128362_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128361_task);
        
        if (futhark_mc_segmap_task_128362_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119965.mem + gtid_116035 * l_n_m_112570 * (int64_t) 4,
                mem_119931 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119931);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128359_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128359_end -
                 futhark_mc_segmap_parloop_128359_start;
        
        ctx->futhark_mc_segmap_parloop_128359_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128359_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128359_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128357(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116034 = tid;
    int num_tasks_123670 = info.nsubtasks;
    struct futhark_mc_task_128351 *futhark_mc_task_128351 =
                                  (struct futhark_mc_task_128351 *) args;
    struct futhark_context *ctx = futhark_mc_task_128351->ctx;
    uint64_t futhark_mc_segmap_nested_task_128357_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128357_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128351->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128351->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128351->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128351->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128351->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128351->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128351->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128351->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128351->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128351->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128351->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128351->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128351->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128351->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119911 = futhark_mc_task_128351->free_bytes_119911;
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_task_128351->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iter_123723;
    struct futhark_mc_segmap_parloop_struct_128358
    futhark_mc_segmap_parloop_struct_128358;
    
    futhark_mc_segmap_parloop_struct_128358.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128358.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128358.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128358.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128358.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128358.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128358.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128358.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128358.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128358.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128358.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128358.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128358.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128358.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128358.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128358.free_bytes_119911 = bytes_119911;
    futhark_mc_segmap_parloop_struct_128358.free_mem_119965 = mem_119965.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128359_task;
    
    futhark_mc_segmap_parloop_128359_task.name =
        "futhark_mc_segmap_parloop_128359";
    futhark_mc_segmap_parloop_128359_task.fn = futhark_mc_segmap_parloop_128359;
    futhark_mc_segmap_parloop_128359_task.args =
        &futhark_mc_segmap_parloop_struct_128358;
    futhark_mc_segmap_parloop_128359_task.iterations = iterations;
    futhark_mc_segmap_parloop_128359_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128359_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128359_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128359_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128359_task);
    
    if (futhark_mc_segmap_parloop_128359_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128359_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128359_total_end -
                 futhark_mc_segmap_parloop_128359_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128359_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128359_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128359_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128357_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128357_end -
                 futhark_mc_segmap_nested_task_128357_start;
        
        ctx->futhark_mc_segmap_nested_task_128357_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128357_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128357_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128380 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120071;
    char *free_mem_120075;
};
struct futhark_mc_segmap_parloop_struct_128382 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120071;
    char *free_mem_120075;
};
static int futhark_mc_segmap_parloop_128383(void *args, int64_t start,
                                            int64_t end, int flat_tid_116175,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128382
    *futhark_mc_segmap_parloop_struct_128382 =
    (struct futhark_mc_segmap_parloop_struct_128382 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128382->ctx;
    uint64_t futhark_mc_segmap_parloop_128383_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128383_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128382->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128382->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128382->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128382->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128382->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128382->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128382->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128382->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128382->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128382->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128382->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128382->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128382->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128382->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 =
            futhark_mc_segmap_parloop_struct_128382->free_bytes_119966;
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_segmap_parloop_struct_128382->free_mem_120071,
                                  .size =0, .references =NULL};
    struct memblock mem_120075 = {.desc ="mem_120075", .mem =
                                  futhark_mc_segmap_parloop_struct_128382->free_mem_120075,
                                  .size =0, .references =NULL};
    size_t mem_120010_cached_sizze_128384 = 0;
    char *mem_120010 = NULL;
    size_t mem_120013_cached_sizze_128385 = 0;
    char *mem_120013 = NULL;
    size_t mem_120030_cached_sizze_128386 = 0;
    char *mem_120030 = NULL;
    size_t mem_120033_cached_sizze_128387 = 0;
    char *mem_120033 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123900 = start;
    
    if (mem_120010_cached_sizze_128384 < (size_t) bytes_119490) {
        mem_120010 = realloc(mem_120010, bytes_119490);
        mem_120010_cached_sizze_128384 = bytes_119490;
    }
    if (mem_120013_cached_sizze_128385 < (size_t) bytes_119490) {
        mem_120013 = realloc(mem_120013, bytes_119490);
        mem_120013_cached_sizze_128385 = bytes_119490;
    }
    if (mem_120030_cached_sizze_128386 < (size_t) bytes_119966) {
        mem_120030 = realloc(mem_120030, bytes_119966);
        mem_120030_cached_sizze_128386 = bytes_119966;
    }
    if (mem_120033_cached_sizze_128387 < (size_t) bytes_119966) {
        mem_120033 = realloc(mem_120033, bytes_119966);
        mem_120033_cached_sizze_128387 = bytes_119966;
    }
    for (; iter_123900 < end; iter_123900++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123977 = m_112519;
        int64_t gtid_116176 = iter_123900;
        int64_t remnant_123978 = iter_123900 - gtid_116176;
        
        for (int64_t i_123901 = 0; i_123901 < l_n_m_112570; i_123901++) {
            int64_t x_123904 = ((int64_t *) mem_119544.mem)[gtid_116176 *
                                                            l_n_m_112570 +
                                                            i_123901];
            float x_123905 = ((float *) mem_119548.mem)[gtid_116176 *
                                                        l_n_m_112570 +
                                                        i_123901];
            int64_t min_arg_123906 = mul64(t_jump_112527, i_123901);
            int64_t min_res_123907 = smin64(i_112596, min_arg_123906);
            float defunc_0_f_res_123908 = sitofp_i64_f32(min_res_123907);
            float defunc_2_reduce_res_123911;
            float defunc_2_reduce_res_123912;
            float defunc_2_reduce_res_123913;
            float redout_123917;
            float redout_123918;
            float redout_123919;
            
            redout_123917 = 0.0F;
            redout_123918 = 0.0F;
            redout_123919 = 0.0F;
            for (int64_t i_123916 = 0; i_123916 < l_window_112524; i_123916++) {
                bool cond_123922 = sle64(n_112520, i_123916);
                float defunc_0_f_res_123923;
                
                if (cond_123922) {
                    defunc_0_f_res_123923 = 0.0F;
                } else {
                    int64_t i_123924 = add64(x_123904, i_123916);
                    float index_primexp_123925 = sitofp_i64_f32(i_123924);
                    float defunc_0_f_res_f_res_123926 = 1.0F +
                          index_primexp_123925;
                    
                    defunc_0_f_res_123923 = defunc_0_f_res_f_res_123926;
                }
                
                float defunc_0_f_res_123927;
                
                if (cond_123922) {
                    defunc_0_f_res_123927 = 0.0F;
                } else {
                    int64_t i_123928 = add64(x_123904, i_123916);
                    float x_123929 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_116176 *
                                                            ctx_param_ext_119638 +
                                                            i_123928 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_123927 = x_123929;
                }
                
                float x_j_123930 = defunc_0_f_res_123923 -
                      defunc_0_f_res_123908;
                float abs_res_123931 = (float) fabs(x_j_123930);
                float tmp1_123932 = abs_res_123931 / x_123905;
                float x_123933 = tmp1_123932 * tmp1_123932;
                float y_123934 = tmp1_123932 * x_123933;
                float tmp2_123935 = 1.0F - y_123934;
                float x_123936 = tmp2_123935 * tmp2_123935;
                float tmp3_123937 = tmp2_123935 * x_123936;
                float tmp4_123938 = defunc_0_f_res_123927 * tmp3_123937;
                float defunc_1_f_res_123939 = x_j_123930 * tmp4_123938;
                float defunc_1_f_res_123940 = x_j_123930 *
                      defunc_1_f_res_123939;
                float defunc_1_op_res_123941 = tmp4_123938 + redout_123917;
                float defunc_1_op_res_123942 = defunc_1_f_res_123939 +
                      redout_123918;
                float defunc_1_op_res_123943 = defunc_1_f_res_123940 +
                      redout_123919;
                
                ((float *) mem_120030)[i_123916] = defunc_1_f_res_123939;
                ((float *) mem_120033)[i_123916] = tmp4_123938;
                
                float redout_tmp_123981 = defunc_1_op_res_123941;
                float redout_tmp_123982 = defunc_1_op_res_123942;
                float redout_tmp_123983 = defunc_1_op_res_123943;
                
                redout_123917 = redout_tmp_123981;
                redout_123918 = redout_tmp_123982;
                redout_123919 = redout_tmp_123983;
            }
            defunc_2_reduce_res_123911 = redout_123917;
            defunc_2_reduce_res_123912 = redout_123918;
            defunc_2_reduce_res_123913 = redout_123919;
            
            float x_123946 = defunc_2_reduce_res_123911 *
                  defunc_2_reduce_res_123913;
            float y_123947 = defunc_2_reduce_res_123912 *
                  defunc_2_reduce_res_123912;
            float y_123948 = x_123946 - y_123947;
            float det1_123949 = 1.0F / y_123948;
            float a11_123950 = defunc_2_reduce_res_123913 * det1_123949;
            float negate_arg_123951 = defunc_2_reduce_res_123912 * det1_123949;
            float b11_123952 = 0.0F - negate_arg_123951;
            float c11_123953 = defunc_2_reduce_res_123911 * det1_123949;
            float defunc_2_reduce_res_123954;
            float defunc_2_reduce_res_123955;
            float redout_123957;
            float redout_123958;
            
            redout_123957 = 0.0F;
            redout_123958 = 0.0F;
            for (int64_t i_123956 = 0; i_123956 < l_window_112524; i_123956++) {
                float x_123959 = ((float *) mem_120033)[i_123956];
                float x_123960 = ((float *) mem_120030)[i_123956];
                bool cond_123961 = sle64(n_112520, i_123956);
                float defunc_0_f_res_123962;
                
                if (cond_123961) {
                    defunc_0_f_res_123962 = 0.0F;
                } else {
                    int64_t i_123963 = add64(x_123904, i_123956);
                    float x_123964 = ((float *) mem_119788.mem)[gtid_116176 *
                                                                n_112520 +
                                                                i_123963];
                    
                    defunc_0_f_res_123962 = x_123964;
                }
                
                float x_123965 = a11_123950 * x_123959;
                float y_123966 = b11_123952 * x_123960;
                float x_123967 = x_123965 + y_123966;
                float defunc_9_fit_fun_res_123968 = defunc_0_f_res_123962 *
                      x_123967;
                float x_123969 = b11_123952 * x_123959;
                float y_123970 = c11_123953 * x_123960;
                float x_123971 = x_123969 + y_123970;
                float defunc_9_slope_fun_res_123972 = defunc_0_f_res_123962 *
                      x_123971;
                float defunc_1_op_res_123973 = defunc_9_fit_fun_res_123968 +
                      redout_123957;
                float defunc_1_op_res_123974 = defunc_9_slope_fun_res_123972 +
                      redout_123958;
                float redout_tmp_123986 = defunc_1_op_res_123973;
                float redout_tmp_123987 = defunc_1_op_res_123974;
                
                redout_123957 = redout_tmp_123986;
                redout_123958 = redout_tmp_123987;
            }
            defunc_2_reduce_res_123954 = redout_123957;
            defunc_2_reduce_res_123955 = redout_123958;
            ((float *) mem_120010)[i_123901] = defunc_2_reduce_res_123954;
            ((float *) mem_120013)[i_123901] = defunc_2_reduce_res_123955;
        }
        memmove(mem_120071.mem + gtid_116176 * l_n_m_112570 * (int64_t) 4,
                mem_120010 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_120075.mem + gtid_116176 * l_n_m_112570 * (int64_t) 4,
                mem_120013 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120010);
    free(mem_120013);
    free(mem_120030);
    free(mem_120033);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128383_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128383_end -
                 futhark_mc_segmap_parloop_128383_start;
        
        ctx->futhark_mc_segmap_parloop_128383_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128383_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128383_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128381(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116175 = tid;
    int num_tasks_123899 = info.nsubtasks;
    struct futhark_mc_task_128380 *futhark_mc_task_128380 =
                                  (struct futhark_mc_task_128380 *) args;
    struct futhark_context *ctx = futhark_mc_task_128380->ctx;
    uint64_t futhark_mc_segmap_task_128381_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128381_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128380->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128380->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128380->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128380->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128380->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128380->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128380->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128380->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128380->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128380->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128380->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128380->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128380->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128380->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 = futhark_mc_task_128380->free_bytes_119966;
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_task_128380->free_mem_120071,
                                  .size =0, .references =NULL};
    struct memblock mem_120075 = {.desc ="mem_120075", .mem =
                                  futhark_mc_task_128380->free_mem_120075,
                                  .size =0, .references =NULL};
    int64_t iter_123900;
    struct futhark_mc_segmap_parloop_struct_128382
    futhark_mc_segmap_parloop_struct_128382;
    
    futhark_mc_segmap_parloop_struct_128382.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128382.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128382.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128382.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128382.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128382.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128382.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128382.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128382.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128382.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128382.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128382.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128382.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128382.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128382.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128382.free_bytes_119966 = bytes_119966;
    futhark_mc_segmap_parloop_struct_128382.free_mem_120071 = mem_120071.mem;
    futhark_mc_segmap_parloop_struct_128382.free_mem_120075 = mem_120075.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128383_task;
    
    futhark_mc_segmap_parloop_128383_task.name =
        "futhark_mc_segmap_parloop_128383";
    futhark_mc_segmap_parloop_128383_task.fn = futhark_mc_segmap_parloop_128383;
    futhark_mc_segmap_parloop_128383_task.args =
        &futhark_mc_segmap_parloop_struct_128382;
    futhark_mc_segmap_parloop_128383_task.iterations = iterations;
    futhark_mc_segmap_parloop_128383_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128383_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128383_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128383_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128383_task);
    
    if (futhark_mc_segmap_parloop_128383_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128383_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128383_total_end -
                 futhark_mc_segmap_parloop_128383_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128383_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128383_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128383_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128381_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128381_end -
                 futhark_mc_segmap_task_128381_start;
        
        ctx->futhark_mc_segmap_task_128381_runs[tid]++;
        ctx->futhark_mc_segmap_task_128381_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128381_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128389 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120071;
    char *free_mem_120075;
};
struct futhark_mc_task_128393 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116178;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120004;
    char *free_mem_120007;
};
struct futhark_mc_segmap_parloop_struct_128395 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116178;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120004;
    char *free_mem_120007;
};
static int futhark_mc_segmap_parloop_128396(void *args, int64_t start,
                                            int64_t end, int flat_tid_116179,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128395
    *futhark_mc_segmap_parloop_struct_128395 =
    (struct futhark_mc_segmap_parloop_struct_128395 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128395->ctx;
    uint64_t futhark_mc_segmap_parloop_128396_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128396_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128395->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128395->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128395->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128395->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128395->free_i_112596;
    int64_t gtid_116178 =
            futhark_mc_segmap_parloop_struct_128395->free_gtid_116178;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128395->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128395->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128395->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128395->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128395->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128395->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128395->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 =
            futhark_mc_segmap_parloop_struct_128395->free_bytes_119966;
    struct memblock mem_120004 = {.desc ="mem_120004", .mem =
                                  futhark_mc_segmap_parloop_struct_128395->free_mem_120004,
                                  .size =0, .references =NULL};
    struct memblock mem_120007 = {.desc ="mem_120007", .mem =
                                  futhark_mc_segmap_parloop_struct_128395->free_mem_120007,
                                  .size =0, .references =NULL};
    size_t mem_124064_cached_sizze_128397 = 0;
    char *mem_124064 = NULL;
    size_t mem_124066_cached_sizze_128398 = 0;
    char *mem_124066 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124135 = start;
    
    if (mem_124064_cached_sizze_128397 < (size_t) bytes_119966) {
        mem_124064 = realloc(mem_124064, bytes_119966);
        mem_124064_cached_sizze_128397 = bytes_119966;
    }
    if (mem_124066_cached_sizze_128398 < (size_t) bytes_119966) {
        mem_124066 = realloc(mem_124066, bytes_119966);
        mem_124066_cached_sizze_128398 = bytes_119966;
    }
    for (; iter_124135 < end; iter_124135++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124185 = l_n_m_112570;
        int64_t gtid_116180 = iter_124135;
        int64_t remnant_124186 = iter_124135 - gtid_116180;
        int64_t x_124059 = ((int64_t *) mem_119544.mem)[gtid_116178 *
                                                        l_n_m_112570 +
                                                        gtid_116180];
        float x_124060 = ((float *) mem_119548.mem)[gtid_116178 * l_n_m_112570 +
                                                    gtid_116180];
        int64_t min_arg_124061 = mul64(t_jump_112527, gtid_116180);
        int64_t min_res_124062 = smin64(i_112596, min_arg_124061);
        float defunc_0_f_res_124063 = sitofp_i64_f32(min_res_124062);
        float defunc_2_reduce_res_124068;
        float defunc_2_reduce_res_124069;
        float defunc_2_reduce_res_124070;
        float redout_124137;
        float redout_124138;
        float redout_124139;
        
        redout_124137 = 0.0F;
        redout_124138 = 0.0F;
        redout_124139 = 0.0F;
        for (int64_t i_124136 = 0; i_124136 < l_window_112524; i_124136++) {
            bool cond_124142 = sle64(n_112520, i_124136);
            float defunc_0_f_res_124143;
            
            if (cond_124142) {
                defunc_0_f_res_124143 = 0.0F;
            } else {
                int64_t i_124144 = add64(x_124059, i_124136);
                float index_primexp_124145 = sitofp_i64_f32(i_124144);
                float defunc_0_f_res_f_res_124146 = 1.0F + index_primexp_124145;
                
                defunc_0_f_res_124143 = defunc_0_f_res_f_res_124146;
            }
            
            float defunc_0_f_res_124147;
            
            if (cond_124142) {
                defunc_0_f_res_124147 = 0.0F;
            } else {
                int64_t i_124148 = add64(x_124059, i_124136);
                float x_124149 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_116178 *
                                                        ctx_param_ext_119638 +
                                                        i_124148 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_124147 = x_124149;
            }
            
            float x_j_124150 = defunc_0_f_res_124143 - defunc_0_f_res_124063;
            float abs_res_124151 = (float) fabs(x_j_124150);
            float tmp1_124152 = abs_res_124151 / x_124060;
            float x_124153 = tmp1_124152 * tmp1_124152;
            float y_124154 = tmp1_124152 * x_124153;
            float tmp2_124155 = 1.0F - y_124154;
            float x_124156 = tmp2_124155 * tmp2_124155;
            float tmp3_124157 = tmp2_124155 * x_124156;
            float tmp4_124158 = defunc_0_f_res_124147 * tmp3_124157;
            float defunc_1_f_res_124159 = x_j_124150 * tmp4_124158;
            float defunc_1_f_res_124160 = x_j_124150 * defunc_1_f_res_124159;
            float defunc_1_op_res_124161 = tmp4_124158 + redout_124137;
            float defunc_1_op_res_124162 = defunc_1_f_res_124159 +
                  redout_124138;
            float defunc_1_op_res_124163 = defunc_1_f_res_124160 +
                  redout_124139;
            
            ((float *) mem_124064)[i_124136] = defunc_1_f_res_124159;
            ((float *) mem_124066)[i_124136] = tmp4_124158;
            
            float redout_tmp_124187 = defunc_1_op_res_124161;
            float redout_tmp_124188 = defunc_1_op_res_124162;
            float redout_tmp_124189 = defunc_1_op_res_124163;
            
            redout_124137 = redout_tmp_124187;
            redout_124138 = redout_tmp_124188;
            redout_124139 = redout_tmp_124189;
        }
        defunc_2_reduce_res_124068 = redout_124137;
        defunc_2_reduce_res_124069 = redout_124138;
        defunc_2_reduce_res_124070 = redout_124139;
        
        float x_124103 = defunc_2_reduce_res_124068 *
              defunc_2_reduce_res_124070;
        float y_124104 = defunc_2_reduce_res_124069 *
              defunc_2_reduce_res_124069;
        float y_124105 = x_124103 - y_124104;
        float det1_124106 = 1.0F / y_124105;
        float a11_124107 = defunc_2_reduce_res_124070 * det1_124106;
        float negate_arg_124108 = defunc_2_reduce_res_124069 * det1_124106;
        float b11_124109 = 0.0F - negate_arg_124108;
        float c11_124110 = defunc_2_reduce_res_124068 * det1_124106;
        float defunc_2_reduce_res_124111;
        float defunc_2_reduce_res_124112;
        float redout_124167;
        float redout_124168;
        
        redout_124167 = 0.0F;
        redout_124168 = 0.0F;
        for (int64_t i_124166 = 0; i_124166 < l_window_112524; i_124166++) {
            float x_124169 = ((float *) mem_124066)[i_124166];
            float x_124170 = ((float *) mem_124064)[i_124166];
            bool cond_124171 = sle64(n_112520, i_124166);
            float defunc_0_f_res_124172;
            
            if (cond_124171) {
                defunc_0_f_res_124172 = 0.0F;
            } else {
                int64_t i_124173 = add64(x_124059, i_124166);
                float x_124174 = ((float *) mem_119788.mem)[gtid_116178 *
                                                            n_112520 +
                                                            i_124173];
                
                defunc_0_f_res_124172 = x_124174;
            }
            
            float x_124175 = a11_124107 * x_124169;
            float y_124176 = b11_124109 * x_124170;
            float x_124177 = x_124175 + y_124176;
            float defunc_9_fit_fun_res_124178 = defunc_0_f_res_124172 *
                  x_124177;
            float x_124179 = b11_124109 * x_124169;
            float y_124180 = c11_124110 * x_124170;
            float x_124181 = x_124179 + y_124180;
            float defunc_9_slope_fun_res_124182 = defunc_0_f_res_124172 *
                  x_124181;
            float defunc_1_op_res_124183 = defunc_9_fit_fun_res_124178 +
                  redout_124167;
            float defunc_1_op_res_124184 = defunc_9_slope_fun_res_124182 +
                  redout_124168;
            float redout_tmp_124192 = defunc_1_op_res_124183;
            float redout_tmp_124193 = defunc_1_op_res_124184;
            
            redout_124167 = redout_tmp_124192;
            redout_124168 = redout_tmp_124193;
        }
        defunc_2_reduce_res_124111 = redout_124167;
        defunc_2_reduce_res_124112 = redout_124168;
        ((float *) mem_120004.mem)[gtid_116180] = defunc_2_reduce_res_124111;
        ((float *) mem_120007.mem)[gtid_116180] = defunc_2_reduce_res_124112;
    }
    
  cleanup:
    { }
    free(mem_124064);
    free(mem_124066);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128396_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128396_end -
                 futhark_mc_segmap_parloop_128396_start;
        
        ctx->futhark_mc_segmap_parloop_128396_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128396_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128396_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128394(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116179 = tid;
    int num_tasks_124134 = info.nsubtasks;
    struct futhark_mc_task_128393 *futhark_mc_task_128393 =
                                  (struct futhark_mc_task_128393 *) args;
    struct futhark_context *ctx = futhark_mc_task_128393->ctx;
    uint64_t futhark_mc_segmap_task_128394_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128394_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128393->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128393->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128393->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128393->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128393->free_i_112596;
    int64_t gtid_116178 = futhark_mc_task_128393->free_gtid_116178;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128393->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128393->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128393->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128393->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128393->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128393->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128393->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 = futhark_mc_task_128393->free_bytes_119966;
    struct memblock mem_120004 = {.desc ="mem_120004", .mem =
                                  futhark_mc_task_128393->free_mem_120004,
                                  .size =0, .references =NULL};
    struct memblock mem_120007 = {.desc ="mem_120007", .mem =
                                  futhark_mc_task_128393->free_mem_120007,
                                  .size =0, .references =NULL};
    int64_t iter_124135;
    struct futhark_mc_segmap_parloop_struct_128395
    futhark_mc_segmap_parloop_struct_128395;
    
    futhark_mc_segmap_parloop_struct_128395.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128395.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128395.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128395.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128395.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128395.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128395.free_gtid_116178 = gtid_116178;
    futhark_mc_segmap_parloop_struct_128395.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128395.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128395.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128395.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128395.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128395.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128395.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128395.free_bytes_119966 = bytes_119966;
    futhark_mc_segmap_parloop_struct_128395.free_mem_120004 = mem_120004.mem;
    futhark_mc_segmap_parloop_struct_128395.free_mem_120007 = mem_120007.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128396_task;
    
    futhark_mc_segmap_parloop_128396_task.name =
        "futhark_mc_segmap_parloop_128396";
    futhark_mc_segmap_parloop_128396_task.fn = futhark_mc_segmap_parloop_128396;
    futhark_mc_segmap_parloop_128396_task.args =
        &futhark_mc_segmap_parloop_struct_128395;
    futhark_mc_segmap_parloop_128396_task.iterations = iterations;
    futhark_mc_segmap_parloop_128396_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128396_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128396_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128396_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128396_task);
    
    if (futhark_mc_segmap_parloop_128396_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128396_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128396_total_end -
                 futhark_mc_segmap_parloop_128396_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128396_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128396_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128396_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128394_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128394_end -
                 futhark_mc_segmap_task_128394_start;
        
        ctx->futhark_mc_segmap_task_128394_runs[tid]++;
        ctx->futhark_mc_segmap_task_128394_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128394_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128400 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116178;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_119966;
    char *free_mem_120004;
    char *free_mem_120007;
};
struct futhark_mc_task_128404 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116178;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123989;
    float free_x_123990;
    float free_defunc_0_f_res_123993;
    float *retval_defunc_2_reduce_res_123996;
    float *retval_defunc_2_reduce_res_123997;
    float *retval_defunc_2_reduce_res_123998;
    char *retval_mem_123994;
    char *retval_mem_123995;
};
struct futhark_mc_segred_stage_1_parloop_struct_128409 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116178;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_123989;
    float free_x_123990;
    float free_defunc_0_f_res_123993;
    char *free_mem_123994;
    char *free_mem_123995;
    char *free_reduce_stage_1_tid_res_arr_mem_124246;
    char *free_reduce_stage_1_tid_res_arr_mem_124248;
    char *free_reduce_stage_1_tid_res_arr_mem_124250;
};
static int futhark_mc_segred_stage_1_parloop_128410(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116183,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128409
    *futhark_mc_segred_stage_1_parloop_struct_128409 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128409 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128409->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128410_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128410_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_n_112520;
    int64_t gtid_116178 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_gtid_116178;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128409->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123989 =
            futhark_mc_segred_stage_1_parloop_struct_128409->free_x_123989;
    float x_123990 =
          futhark_mc_segred_stage_1_parloop_struct_128409->free_x_123990;
    float defunc_0_f_res_123993 =
          futhark_mc_segred_stage_1_parloop_struct_128409->free_defunc_0_f_res_123993;
    struct memblock mem_123994 = {.desc ="mem_123994", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128409->free_mem_123994,
                                  .size =0, .references =NULL};
    struct memblock mem_123995 = {.desc ="mem_123995", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128409->free_mem_123995,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124246 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124246",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128409->free_reduce_stage_1_tid_res_arr_mem_124246,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124248 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124248",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128409->free_reduce_stage_1_tid_res_arr_mem_124248,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124250 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124250",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128409->free_reduce_stage_1_tid_res_arr_mem_124250,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124252 = start;
    float x_124195;
    float x_124196;
    float x_124198;
    float x_124199;
    float x_124201;
    float x_124202;
    float local_acc_124253 = 0.0F;
    float local_acc_124254 = 0.0F;
    float local_acc_124255 = 0.0F;
    
    for (; iter_124252 < end; iter_124252++) {
        int64_t gtid_116184 = iter_124252;
        bool cond_124204 = sle64(n_112520, gtid_116184);
        float defunc_0_f_res_124205;
        
        if (cond_124204) {
            defunc_0_f_res_124205 = 0.0F;
        } else {
            int64_t i_124206 = add64(gtid_116184, x_123989);
            float index_primexp_124207 = sitofp_i64_f32(i_124206);
            float defunc_0_f_res_f_res_124208 = 1.0F + index_primexp_124207;
            
            defunc_0_f_res_124205 = defunc_0_f_res_f_res_124208;
        }
        
        float defunc_0_f_res_124209;
        
        if (cond_124204) {
            defunc_0_f_res_124209 = 0.0F;
        } else {
            int64_t i_124210 = add64(gtid_116184, x_123989);
            float x_124211 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_116178 *
                                                    ctx_param_ext_119638 +
                                                    i_124210 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_124209 = x_124211;
        }
        
        float x_j_124212 = defunc_0_f_res_124205 - defunc_0_f_res_123993;
        float abs_res_124213 = (float) fabs(x_j_124212);
        float tmp1_124214 = abs_res_124213 / x_123990;
        float x_124215 = tmp1_124214 * tmp1_124214;
        float y_124216 = tmp1_124214 * x_124215;
        float tmp2_124217 = 1.0F - y_124216;
        float x_124218 = tmp2_124217 * tmp2_124217;
        float tmp3_124219 = tmp2_124217 * x_124218;
        float tmp4_124220 = defunc_0_f_res_124209 * tmp3_124219;
        float defunc_1_f_res_124221 = x_j_124212 * tmp4_124220;
        float defunc_1_f_res_124222 = x_j_124212 * defunc_1_f_res_124221;
        
        // save map-out results
        {
            ((float *) mem_123994.mem)[gtid_116184] = defunc_1_f_res_124221;
            ((float *) mem_123995.mem)[gtid_116184] = tmp4_124220;
        }
        // Load accum params
        {
            x_124195 = local_acc_124253;
        }
        // Load next params
        {
            x_124196 = tmp4_124220;
        }
        // Red body
        {
            float defunc_1_op_res_124197 = x_124195 + x_124196;
            
            local_acc_124253 = defunc_1_op_res_124197;
        }
        // Load accum params
        {
            x_124198 = local_acc_124254;
        }
        // Load next params
        {
            x_124199 = defunc_1_f_res_124221;
        }
        // Red body
        {
            float defunc_1_op_res_124200 = x_124198 + x_124199;
            
            local_acc_124254 = defunc_1_op_res_124200;
        }
        // Load accum params
        {
            x_124201 = local_acc_124255;
        }
        // Load next params
        {
            x_124202 = defunc_1_f_res_124222;
        }
        // Red body
        {
            float defunc_1_op_res_124203 = x_124201 + x_124202;
            
            local_acc_124255 = defunc_1_op_res_124203;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124246.mem)[flat_tid_116183] =
        local_acc_124253;
    ((float *) reduce_stage_1_tid_res_arr_mem_124248.mem)[flat_tid_116183] =
        local_acc_124254;
    ((float *) reduce_stage_1_tid_res_arr_mem_124250.mem)[flat_tid_116183] =
        local_acc_124255;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128410_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128410_end -
                 futhark_mc_segred_stage_1_parloop_128410_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128410_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128410_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128410_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128405(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116183 = tid;
    int num_tasks_124245 = info.nsubtasks;
    struct futhark_mc_task_128404 *futhark_mc_task_128404 =
                                  (struct futhark_mc_task_128404 *) args;
    struct futhark_context *ctx = futhark_mc_task_128404->ctx;
    uint64_t futhark_mc_segred_task_128405_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128405_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128404->free_n_112520;
    int64_t gtid_116178 = futhark_mc_task_128404->free_gtid_116178;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128404->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128404->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128404->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128404->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_123989 = futhark_mc_task_128404->free_x_123989;
    float x_123990 = futhark_mc_task_128404->free_x_123990;
    float defunc_0_f_res_123993 =
          futhark_mc_task_128404->free_defunc_0_f_res_123993;
    float defunc_2_reduce_res_123996 =
          *futhark_mc_task_128404->retval_defunc_2_reduce_res_123996;
    float defunc_2_reduce_res_123997 =
          *futhark_mc_task_128404->retval_defunc_2_reduce_res_123997;
    float defunc_2_reduce_res_123998 =
          *futhark_mc_task_128404->retval_defunc_2_reduce_res_123998;
    struct memblock mem_123994 = {.desc ="mem_123994", .mem =
                                  futhark_mc_task_128404->retval_mem_123994,
                                  .size =0, .references =NULL};
    struct memblock mem_123995 = {.desc ="mem_123995", .mem =
                                  futhark_mc_task_128404->retval_mem_123995,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_124246_cached_sizze_128406 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124246 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124248_cached_sizze_128407 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124248 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124250_cached_sizze_128408 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124250 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124246_cached_sizze_128406 <
        (size_t) ((int64_t) 4 * num_tasks_124245)) {
        reduce_stage_1_tid_res_arr_mem_124246 =
            realloc(reduce_stage_1_tid_res_arr_mem_124246, (int64_t) 4 *
                    num_tasks_124245);
        reduce_stage_1_tid_res_arr_mem_124246_cached_sizze_128406 =
            (int64_t) 4 * num_tasks_124245;
    }
    if (reduce_stage_1_tid_res_arr_mem_124248_cached_sizze_128407 <
        (size_t) ((int64_t) 4 * num_tasks_124245)) {
        reduce_stage_1_tid_res_arr_mem_124248 =
            realloc(reduce_stage_1_tid_res_arr_mem_124248, (int64_t) 4 *
                    num_tasks_124245);
        reduce_stage_1_tid_res_arr_mem_124248_cached_sizze_128407 =
            (int64_t) 4 * num_tasks_124245;
    }
    if (reduce_stage_1_tid_res_arr_mem_124250_cached_sizze_128408 <
        (size_t) ((int64_t) 4 * num_tasks_124245)) {
        reduce_stage_1_tid_res_arr_mem_124250 =
            realloc(reduce_stage_1_tid_res_arr_mem_124250, (int64_t) 4 *
                    num_tasks_124245);
        reduce_stage_1_tid_res_arr_mem_124250_cached_sizze_128408 =
            (int64_t) 4 * num_tasks_124245;
    }
    
    int64_t iter_124252;
    struct futhark_mc_segred_stage_1_parloop_struct_128409
    futhark_mc_segred_stage_1_parloop_struct_128409;
    
    futhark_mc_segred_stage_1_parloop_struct_128409.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_gtid_116178 =
        gtid_116178;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_x_123989 = x_123989;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_x_123990 = x_123990;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_defunc_0_f_res_123993 =
        defunc_0_f_res_123993;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_mem_123994 =
        mem_123994.mem;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_mem_123995 =
        mem_123995.mem;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_reduce_stage_1_tid_res_arr_mem_124246 =
        reduce_stage_1_tid_res_arr_mem_124246;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_reduce_stage_1_tid_res_arr_mem_124248 =
        reduce_stage_1_tid_res_arr_mem_124248;
    futhark_mc_segred_stage_1_parloop_struct_128409.free_reduce_stage_1_tid_res_arr_mem_124250 =
        reduce_stage_1_tid_res_arr_mem_124250;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128410_task;
    
    futhark_mc_segred_stage_1_parloop_128410_task.name =
        "futhark_mc_segred_stage_1_parloop_128410";
    futhark_mc_segred_stage_1_parloop_128410_task.fn =
        futhark_mc_segred_stage_1_parloop_128410;
    futhark_mc_segred_stage_1_parloop_128410_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128409;
    futhark_mc_segred_stage_1_parloop_128410_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128410_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128410_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128410_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128410_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128410_task);
    
    if (futhark_mc_segred_stage_1_parloop_128410_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128410_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128410_total_end -
                 futhark_mc_segred_stage_1_parloop_128410_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128410_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128410_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128410_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123996 = 0.0F;
        defunc_2_reduce_res_123997 = 0.0F;
        defunc_2_reduce_res_123998 = 0.0F;
    }
    
    float x_124256;
    float x_124257;
    float x_124259;
    float x_124260;
    float x_124262;
    float x_124263;
    
    for (int32_t i_124265 = 0; i_124265 < num_tasks_124245; i_124265++) {
        flat_tid_116183 = i_124265;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124256 = defunc_2_reduce_res_123996;
            }
            // load next params
            {
                x_124257 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124246)[flat_tid_116183];
            }
            // red body
            {
                float defunc_1_op_res_124258 = x_124256 + x_124257;
                
                defunc_2_reduce_res_123996 = defunc_1_op_res_124258;
            }
            // load acc params
            {
                x_124259 = defunc_2_reduce_res_123997;
            }
            // load next params
            {
                x_124260 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124248)[flat_tid_116183];
            }
            // red body
            {
                float defunc_1_op_res_124261 = x_124259 + x_124260;
                
                defunc_2_reduce_res_123997 = defunc_1_op_res_124261;
            }
            // load acc params
            {
                x_124262 = defunc_2_reduce_res_123998;
            }
            // load next params
            {
                x_124263 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124250)[flat_tid_116183];
            }
            // red body
            {
                float defunc_1_op_res_124264 = x_124262 + x_124263;
                
                defunc_2_reduce_res_123998 = defunc_1_op_res_124264;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124246);
    free(reduce_stage_1_tid_res_arr_mem_124248);
    free(reduce_stage_1_tid_res_arr_mem_124250);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128405_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128405_end -
                 futhark_mc_segred_task_128405_start;
        
        ctx->futhark_mc_segred_task_128405_runs[tid]++;
        ctx->futhark_mc_segred_task_128405_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128405_iter[tid] += iterations;
    }
    *futhark_mc_task_128404->retval_defunc_2_reduce_res_123996 =
        defunc_2_reduce_res_123996;
    *futhark_mc_task_128404->retval_defunc_2_reduce_res_123997 =
        defunc_2_reduce_res_123997;
    *futhark_mc_task_128404->retval_defunc_2_reduce_res_123998 =
        defunc_2_reduce_res_123998;
    futhark_mc_task_128404->retval_mem_123994 = mem_123994.mem;
    futhark_mc_task_128404->retval_mem_123995 = mem_123995.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128411 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116178;
    char *free_mem_119788;
    int64_t free_x_123989;
    char *free_mem_123994;
    char *free_mem_123995;
    float free_a11_124033;
    float free_b11_124035;
    float free_c11_124036;
    float *retval_defunc_2_reduce_res_124037;
    float *retval_defunc_2_reduce_res_124038;
};
struct futhark_mc_segred_stage_1_parloop_struct_128415 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116178;
    char *free_mem_119788;
    int64_t free_x_123989;
    char *free_mem_123994;
    char *free_mem_123995;
    float free_a11_124033;
    float free_b11_124035;
    float free_c11_124036;
    char *free_reduce_stage_1_tid_res_arr_mem_124267;
    char *free_reduce_stage_1_tid_res_arr_mem_124269;
};
static int futhark_mc_segred_stage_1_parloop_128416(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116185,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128415
    *futhark_mc_segred_stage_1_parloop_struct_128415 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128415 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128415->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128416_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128416_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128415->free_n_112520;
    int64_t gtid_116178 =
            futhark_mc_segred_stage_1_parloop_struct_128415->free_gtid_116178;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128415->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123989 =
            futhark_mc_segred_stage_1_parloop_struct_128415->free_x_123989;
    struct memblock mem_123994 = {.desc ="mem_123994", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128415->free_mem_123994,
                                  .size =0, .references =NULL};
    struct memblock mem_123995 = {.desc ="mem_123995", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128415->free_mem_123995,
                                  .size =0, .references =NULL};
    float a11_124033 =
          futhark_mc_segred_stage_1_parloop_struct_128415->free_a11_124033;
    float b11_124035 =
          futhark_mc_segred_stage_1_parloop_struct_128415->free_b11_124035;
    float c11_124036 =
          futhark_mc_segred_stage_1_parloop_struct_128415->free_c11_124036;
    struct memblock reduce_stage_1_tid_res_arr_mem_124267 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124267",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128415->free_reduce_stage_1_tid_res_arr_mem_124267,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124269 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124269",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128415->free_reduce_stage_1_tid_res_arr_mem_124269,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124271 = start;
    float x_124223;
    float x_124224;
    float x_124226;
    float x_124227;
    float local_acc_124272 = 0.0F;
    float local_acc_124273 = 0.0F;
    
    for (; iter_124271 < end; iter_124271++) {
        int64_t gtid_116186 = iter_124271;
        float x_124229 = ((float *) mem_123995.mem)[gtid_116186];
        float x_124230 = ((float *) mem_123994.mem)[gtid_116186];
        bool cond_124231 = sle64(n_112520, gtid_116186);
        float defunc_0_f_res_124232;
        
        if (cond_124231) {
            defunc_0_f_res_124232 = 0.0F;
        } else {
            int64_t i_124233 = add64(gtid_116186, x_123989);
            float x_124234 = ((float *) mem_119788.mem)[gtid_116178 * n_112520 +
                                                        i_124233];
            
            defunc_0_f_res_124232 = x_124234;
        }
        
        float x_124235 = a11_124033 * x_124229;
        float y_124236 = b11_124035 * x_124230;
        float x_124237 = x_124235 + y_124236;
        float defunc_9_fit_fun_res_124238 = defunc_0_f_res_124232 * x_124237;
        float x_124239 = b11_124035 * x_124229;
        float y_124240 = c11_124036 * x_124230;
        float x_124241 = x_124239 + y_124240;
        float defunc_9_slope_fun_res_124242 = defunc_0_f_res_124232 * x_124241;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124223 = local_acc_124272;
        }
        // Load next params
        {
            x_124224 = defunc_9_fit_fun_res_124238;
        }
        // Red body
        {
            float defunc_1_op_res_124225 = x_124223 + x_124224;
            
            local_acc_124272 = defunc_1_op_res_124225;
        }
        // Load accum params
        {
            x_124226 = local_acc_124273;
        }
        // Load next params
        {
            x_124227 = defunc_9_slope_fun_res_124242;
        }
        // Red body
        {
            float defunc_1_op_res_124228 = x_124226 + x_124227;
            
            local_acc_124273 = defunc_1_op_res_124228;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124267.mem)[flat_tid_116185] =
        local_acc_124272;
    ((float *) reduce_stage_1_tid_res_arr_mem_124269.mem)[flat_tid_116185] =
        local_acc_124273;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128416_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128416_end -
                 futhark_mc_segred_stage_1_parloop_128416_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128416_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128416_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128416_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128412(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116185 = tid;
    int num_tasks_124266 = info.nsubtasks;
    struct futhark_mc_task_128411 *futhark_mc_task_128411 =
                                  (struct futhark_mc_task_128411 *) args;
    struct futhark_context *ctx = futhark_mc_task_128411->ctx;
    uint64_t futhark_mc_segred_task_128412_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128412_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128411->free_n_112520;
    int64_t gtid_116178 = futhark_mc_task_128411->free_gtid_116178;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128411->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_123989 = futhark_mc_task_128411->free_x_123989;
    struct memblock mem_123994 = {.desc ="mem_123994", .mem =
                                  futhark_mc_task_128411->free_mem_123994,
                                  .size =0, .references =NULL};
    struct memblock mem_123995 = {.desc ="mem_123995", .mem =
                                  futhark_mc_task_128411->free_mem_123995,
                                  .size =0, .references =NULL};
    float a11_124033 = futhark_mc_task_128411->free_a11_124033;
    float b11_124035 = futhark_mc_task_128411->free_b11_124035;
    float c11_124036 = futhark_mc_task_128411->free_c11_124036;
    float defunc_2_reduce_res_124037 =
          *futhark_mc_task_128411->retval_defunc_2_reduce_res_124037;
    float defunc_2_reduce_res_124038 =
          *futhark_mc_task_128411->retval_defunc_2_reduce_res_124038;
    size_t reduce_stage_1_tid_res_arr_mem_124267_cached_sizze_128413 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124267 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124269_cached_sizze_128414 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124269 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124267_cached_sizze_128413 <
        (size_t) ((int64_t) 4 * num_tasks_124266)) {
        reduce_stage_1_tid_res_arr_mem_124267 =
            realloc(reduce_stage_1_tid_res_arr_mem_124267, (int64_t) 4 *
                    num_tasks_124266);
        reduce_stage_1_tid_res_arr_mem_124267_cached_sizze_128413 =
            (int64_t) 4 * num_tasks_124266;
    }
    if (reduce_stage_1_tid_res_arr_mem_124269_cached_sizze_128414 <
        (size_t) ((int64_t) 4 * num_tasks_124266)) {
        reduce_stage_1_tid_res_arr_mem_124269 =
            realloc(reduce_stage_1_tid_res_arr_mem_124269, (int64_t) 4 *
                    num_tasks_124266);
        reduce_stage_1_tid_res_arr_mem_124269_cached_sizze_128414 =
            (int64_t) 4 * num_tasks_124266;
    }
    
    int64_t iter_124271;
    struct futhark_mc_segred_stage_1_parloop_struct_128415
    futhark_mc_segred_stage_1_parloop_struct_128415;
    
    futhark_mc_segred_stage_1_parloop_struct_128415.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_gtid_116178 =
        gtid_116178;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_x_123989 = x_123989;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_mem_123994 =
        mem_123994.mem;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_mem_123995 =
        mem_123995.mem;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_a11_124033 =
        a11_124033;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_b11_124035 =
        b11_124035;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_c11_124036 =
        c11_124036;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_reduce_stage_1_tid_res_arr_mem_124267 =
        reduce_stage_1_tid_res_arr_mem_124267;
    futhark_mc_segred_stage_1_parloop_struct_128415.free_reduce_stage_1_tid_res_arr_mem_124269 =
        reduce_stage_1_tid_res_arr_mem_124269;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128416_task;
    
    futhark_mc_segred_stage_1_parloop_128416_task.name =
        "futhark_mc_segred_stage_1_parloop_128416";
    futhark_mc_segred_stage_1_parloop_128416_task.fn =
        futhark_mc_segred_stage_1_parloop_128416;
    futhark_mc_segred_stage_1_parloop_128416_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128415;
    futhark_mc_segred_stage_1_parloop_128416_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128416_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128416_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128416_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128416_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128416_task);
    
    if (futhark_mc_segred_stage_1_parloop_128416_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128416_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128416_total_end -
                 futhark_mc_segred_stage_1_parloop_128416_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128416_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128416_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128416_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124037 = 0.0F;
        defunc_2_reduce_res_124038 = 0.0F;
    }
    
    float x_124274;
    float x_124275;
    float x_124277;
    float x_124278;
    
    for (int32_t i_124280 = 0; i_124280 < num_tasks_124266; i_124280++) {
        flat_tid_116185 = i_124280;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124274 = defunc_2_reduce_res_124037;
            }
            // load next params
            {
                x_124275 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124267)[flat_tid_116185];
            }
            // red body
            {
                float defunc_1_op_res_124276 = x_124274 + x_124275;
                
                defunc_2_reduce_res_124037 = defunc_1_op_res_124276;
            }
            // load acc params
            {
                x_124277 = defunc_2_reduce_res_124038;
            }
            // load next params
            {
                x_124278 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124269)[flat_tid_116185];
            }
            // red body
            {
                float defunc_1_op_res_124279 = x_124277 + x_124278;
                
                defunc_2_reduce_res_124038 = defunc_1_op_res_124279;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124267);
    free(reduce_stage_1_tid_res_arr_mem_124269);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128412_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128412_end -
                 futhark_mc_segred_task_128412_start;
        
        ctx->futhark_mc_segred_task_128412_runs[tid]++;
        ctx->futhark_mc_segred_task_128412_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128412_iter[tid] += iterations;
    }
    *futhark_mc_task_128411->retval_defunc_2_reduce_res_124037 =
        defunc_2_reduce_res_124037;
    *futhark_mc_task_128411->retval_defunc_2_reduce_res_124038 =
        defunc_2_reduce_res_124038;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128401(void *args, int64_t start,
                                            int64_t end, int flat_tid_116181,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128400
    *futhark_mc_segmap_parloop_struct_128400 =
    (struct futhark_mc_segmap_parloop_struct_128400 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128400->ctx;
    uint64_t futhark_mc_segmap_parloop_128401_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128401_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128400->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128400->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128400->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128400->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128400->free_i_112596;
    int64_t gtid_116178 =
            futhark_mc_segmap_parloop_struct_128400->free_gtid_116178;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128400->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128400->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128400->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128400->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128400->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128400->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128400->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 =
            futhark_mc_segmap_parloop_struct_128400->free_bytes_119966;
    struct memblock mem_120004 = {.desc ="mem_120004", .mem =
                                  futhark_mc_segmap_parloop_struct_128400->free_mem_120004,
                                  .size =0, .references =NULL};
    struct memblock mem_120007 = {.desc ="mem_120007", .mem =
                                  futhark_mc_segmap_parloop_struct_128400->free_mem_120007,
                                  .size =0, .references =NULL};
    size_t mem_123994_cached_sizze_128402 = 0;
    char *mem_123994 = NULL;
    size_t mem_123995_cached_sizze_128403 = 0;
    char *mem_123995 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124194 = start;
    
    if (mem_123994_cached_sizze_128402 < (size_t) bytes_119966) {
        mem_123994 = realloc(mem_123994, bytes_119966);
        mem_123994_cached_sizze_128402 = bytes_119966;
    }
    if (mem_123995_cached_sizze_128403 < (size_t) bytes_119966) {
        mem_123995 = realloc(mem_123995, bytes_119966);
        mem_123995_cached_sizze_128403 = bytes_119966;
    }
    for (; iter_124194 < end; iter_124194++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124243 = l_n_m_112570;
        int64_t gtid_116182 = iter_124194;
        int64_t remnant_124244 = iter_124194 - gtid_116182;
        int64_t x_123989 = ((int64_t *) mem_119544.mem)[gtid_116178 *
                                                        l_n_m_112570 +
                                                        gtid_116182];
        float x_123990 = ((float *) mem_119548.mem)[gtid_116178 * l_n_m_112570 +
                                                    gtid_116182];
        int64_t min_arg_123991 = mul64(t_jump_112527, gtid_116182);
        int64_t min_res_123992 = smin64(i_112596, min_arg_123991);
        float defunc_0_f_res_123993 = sitofp_i64_f32(min_res_123992);
        float defunc_2_reduce_res_123996;
        float defunc_2_reduce_res_123997;
        float defunc_2_reduce_res_123998;
        int64_t flat_tid_116183 = (int64_t) 0;
        int32_t num_tasks_124245;
        struct futhark_mc_task_128404 futhark_mc_task_128404;
        
        futhark_mc_task_128404.ctx = ctx;
        futhark_mc_task_128404.free_n_112520 = n_112520;
        futhark_mc_task_128404.free_gtid_116178 = gtid_116178;
        futhark_mc_task_128404.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128404.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128404.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128404.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128404.free_x_123989 = x_123989;
        futhark_mc_task_128404.free_x_123990 = x_123990;
        futhark_mc_task_128404.free_defunc_0_f_res_123993 =
            defunc_0_f_res_123993;
        futhark_mc_task_128404.retval_defunc_2_reduce_res_123996 =
            &defunc_2_reduce_res_123996;
        futhark_mc_task_128404.retval_defunc_2_reduce_res_123997 =
            &defunc_2_reduce_res_123997;
        futhark_mc_task_128404.retval_defunc_2_reduce_res_123998 =
            &defunc_2_reduce_res_123998;
        futhark_mc_task_128404.retval_mem_123994 = mem_123994;
        futhark_mc_task_128404.retval_mem_123995 = mem_123995;
        
        struct scheduler_segop futhark_mc_task_128404_task;
        
        futhark_mc_task_128404_task.args = &futhark_mc_task_128404;
        futhark_mc_task_128404_task.top_level_fn =
            futhark_mc_segred_task_128405;
        futhark_mc_task_128404_task.name = "futhark_mc_segred_task_128405";
        futhark_mc_task_128404_task.iterations = l_window_112524;
        futhark_mc_task_128404_task.task_time =
            &ctx->futhark_mc_segred_task_128405_total_time;
        futhark_mc_task_128404_task.task_iter =
            &ctx->futhark_mc_segred_task_128405_total_iter;
        futhark_mc_task_128404_task.sched = STATIC;
        futhark_mc_task_128404_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128405_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128404_task);
        
        if (futhark_mc_segred_task_128405_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_124029 = defunc_2_reduce_res_123996 *
              defunc_2_reduce_res_123998;
        float y_124030 = defunc_2_reduce_res_123997 *
              defunc_2_reduce_res_123997;
        float y_124031 = x_124029 - y_124030;
        float det1_124032 = 1.0F / y_124031;
        float a11_124033 = defunc_2_reduce_res_123998 * det1_124032;
        float negate_arg_124034 = defunc_2_reduce_res_123997 * det1_124032;
        float b11_124035 = 0.0F - negate_arg_124034;
        float c11_124036 = defunc_2_reduce_res_123996 * det1_124032;
        float defunc_2_reduce_res_124037;
        float defunc_2_reduce_res_124038;
        int64_t flat_tid_116185 = (int64_t) 0;
        int32_t num_tasks_124266;
        struct futhark_mc_task_128411 futhark_mc_task_128411;
        
        futhark_mc_task_128411.ctx = ctx;
        futhark_mc_task_128411.free_n_112520 = n_112520;
        futhark_mc_task_128411.free_gtid_116178 = gtid_116178;
        futhark_mc_task_128411.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128411.free_x_123989 = x_123989;
        futhark_mc_task_128411.free_mem_123994 = mem_123994;
        futhark_mc_task_128411.free_mem_123995 = mem_123995;
        futhark_mc_task_128411.free_a11_124033 = a11_124033;
        futhark_mc_task_128411.free_b11_124035 = b11_124035;
        futhark_mc_task_128411.free_c11_124036 = c11_124036;
        futhark_mc_task_128411.retval_defunc_2_reduce_res_124037 =
            &defunc_2_reduce_res_124037;
        futhark_mc_task_128411.retval_defunc_2_reduce_res_124038 =
            &defunc_2_reduce_res_124038;
        
        struct scheduler_segop futhark_mc_task_128411_task;
        
        futhark_mc_task_128411_task.args = &futhark_mc_task_128411;
        futhark_mc_task_128411_task.top_level_fn =
            futhark_mc_segred_task_128412;
        futhark_mc_task_128411_task.name = "futhark_mc_segred_task_128412";
        futhark_mc_task_128411_task.iterations = l_window_112524;
        futhark_mc_task_128411_task.task_time =
            &ctx->futhark_mc_segred_task_128412_total_time;
        futhark_mc_task_128411_task.task_iter =
            &ctx->futhark_mc_segred_task_128412_total_iter;
        futhark_mc_task_128411_task.sched = STATIC;
        futhark_mc_task_128411_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128412_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128411_task);
        
        if (futhark_mc_segred_task_128412_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120004.mem)[gtid_116182] = defunc_2_reduce_res_124037;
        ((float *) mem_120007.mem)[gtid_116182] = defunc_2_reduce_res_124038;
    }
    
  cleanup:
    { }
    free(mem_123994);
    free(mem_123995);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128401_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128401_end -
                 futhark_mc_segmap_parloop_128401_start;
        
        ctx->futhark_mc_segmap_parloop_128401_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128401_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128401_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128399(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116181 = tid;
    int num_tasks_124134 = info.nsubtasks;
    struct futhark_mc_task_128393 *futhark_mc_task_128393 =
                                  (struct futhark_mc_task_128393 *) args;
    struct futhark_context *ctx = futhark_mc_task_128393->ctx;
    uint64_t futhark_mc_segmap_nested_task_128399_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128399_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128393->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128393->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128393->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128393->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128393->free_i_112596;
    int64_t gtid_116178 = futhark_mc_task_128393->free_gtid_116178;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128393->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128393->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128393->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128393->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128393->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128393->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128393->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 = futhark_mc_task_128393->free_bytes_119966;
    struct memblock mem_120004 = {.desc ="mem_120004", .mem =
                                  futhark_mc_task_128393->free_mem_120004,
                                  .size =0, .references =NULL};
    struct memblock mem_120007 = {.desc ="mem_120007", .mem =
                                  futhark_mc_task_128393->free_mem_120007,
                                  .size =0, .references =NULL};
    int64_t iter_124194;
    struct futhark_mc_segmap_parloop_struct_128400
    futhark_mc_segmap_parloop_struct_128400;
    
    futhark_mc_segmap_parloop_struct_128400.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128400.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128400.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128400.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128400.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128400.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128400.free_gtid_116178 = gtid_116178;
    futhark_mc_segmap_parloop_struct_128400.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128400.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128400.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128400.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128400.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128400.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128400.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128400.free_bytes_119966 = bytes_119966;
    futhark_mc_segmap_parloop_struct_128400.free_mem_120004 = mem_120004.mem;
    futhark_mc_segmap_parloop_struct_128400.free_mem_120007 = mem_120007.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128401_task;
    
    futhark_mc_segmap_parloop_128401_task.name =
        "futhark_mc_segmap_parloop_128401";
    futhark_mc_segmap_parloop_128401_task.fn = futhark_mc_segmap_parloop_128401;
    futhark_mc_segmap_parloop_128401_task.args =
        &futhark_mc_segmap_parloop_struct_128400;
    futhark_mc_segmap_parloop_128401_task.iterations = iterations;
    futhark_mc_segmap_parloop_128401_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128401_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128401_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128401_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128401_task);
    
    if (futhark_mc_segmap_parloop_128401_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128401_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128401_total_end -
                 futhark_mc_segmap_parloop_128401_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128401_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128401_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128401_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128399_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128399_end -
                 futhark_mc_segmap_nested_task_128399_start;
        
        ctx->futhark_mc_segmap_nested_task_128399_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128399_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128399_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128390(void *args, int64_t start,
                                            int64_t end, int flat_tid_116177,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128389
    *futhark_mc_segmap_parloop_struct_128389 =
    (struct futhark_mc_segmap_parloop_struct_128389 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128389->ctx;
    uint64_t futhark_mc_segmap_parloop_128390_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128390_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128389->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128389->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128389->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128389->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128389->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128389->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128389->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128389->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128389->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128389->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128389->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128389->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128389->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128389->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 =
            futhark_mc_segmap_parloop_struct_128389->free_bytes_119966;
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_segmap_parloop_struct_128389->free_mem_120071,
                                  .size =0, .references =NULL};
    struct memblock mem_120075 = {.desc ="mem_120075", .mem =
                                  futhark_mc_segmap_parloop_struct_128389->free_mem_120075,
                                  .size =0, .references =NULL};
    size_t mem_120004_cached_sizze_128391 = 0;
    char *mem_120004 = NULL;
    size_t mem_120007_cached_sizze_128392 = 0;
    char *mem_120007 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123988 = start;
    
    if (mem_120004_cached_sizze_128391 < (size_t) bytes_119490) {
        mem_120004 = realloc(mem_120004, bytes_119490);
        mem_120004_cached_sizze_128391 = bytes_119490;
    }
    if (mem_120007_cached_sizze_128392 < (size_t) bytes_119490) {
        mem_120007 = realloc(mem_120007, bytes_119490);
        mem_120007_cached_sizze_128392 = bytes_119490;
    }
    for (; iter_123988 < end; iter_123988++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124132 = m_112519;
        int64_t gtid_116178 = iter_123988;
        int64_t remnant_124133 = iter_123988 - gtid_116178;
        int64_t flat_tid_116179 = (int64_t) 0;
        int32_t num_tasks_124134;
        int64_t flat_tid_116181 = (int64_t) 0;
        struct futhark_mc_task_128393 futhark_mc_task_128393;
        
        futhark_mc_task_128393.ctx = ctx;
        futhark_mc_task_128393.free_n_112520 = n_112520;
        futhark_mc_task_128393.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128393.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128393.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128393.free_i_112596 = i_112596;
        futhark_mc_task_128393.free_gtid_116178 = gtid_116178;
        futhark_mc_task_128393.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128393.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128393.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128393.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128393.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128393.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128393.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128393.free_bytes_119966 = bytes_119966;
        futhark_mc_task_128393.free_mem_120004 = mem_120004;
        futhark_mc_task_128393.free_mem_120007 = mem_120007;
        
        struct scheduler_segop futhark_mc_task_128393_task;
        
        futhark_mc_task_128393_task.args = &futhark_mc_task_128393;
        futhark_mc_task_128393_task.top_level_fn =
            futhark_mc_segmap_task_128394;
        futhark_mc_task_128393_task.name = "futhark_mc_segmap_task_128394";
        futhark_mc_task_128393_task.iterations = l_n_m_112570;
        futhark_mc_task_128393_task.task_time =
            &ctx->futhark_mc_segmap_task_128394_total_time;
        futhark_mc_task_128393_task.task_iter =
            &ctx->futhark_mc_segmap_task_128394_total_iter;
        futhark_mc_task_128393_task.sched = STATIC;
        futhark_mc_task_128393_task.nested_fn =
            futhark_mc_segmap_nested_task_128399;
        
        int futhark_mc_segmap_task_128394_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128393_task);
        
        if (futhark_mc_segmap_task_128394_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120071.mem + gtid_116178 * l_n_m_112570 * (int64_t) 4,
                mem_120004 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_120075.mem + gtid_116178 * l_n_m_112570 * (int64_t) 4,
                mem_120007 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120004);
    free(mem_120007);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128390_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128390_end -
                 futhark_mc_segmap_parloop_128390_start;
        
        ctx->futhark_mc_segmap_parloop_128390_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128390_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128390_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128388(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116177 = tid;
    int num_tasks_123899 = info.nsubtasks;
    struct futhark_mc_task_128380 *futhark_mc_task_128380 =
                                  (struct futhark_mc_task_128380 *) args;
    struct futhark_context *ctx = futhark_mc_task_128380->ctx;
    uint64_t futhark_mc_segmap_nested_task_128388_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128388_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128380->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128380->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128380->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128380->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128380->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128380->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128380->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128380->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128380->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128380->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128380->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128380->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128380->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128380->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_119966 = futhark_mc_task_128380->free_bytes_119966;
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_task_128380->free_mem_120071,
                                  .size =0, .references =NULL};
    struct memblock mem_120075 = {.desc ="mem_120075", .mem =
                                  futhark_mc_task_128380->free_mem_120075,
                                  .size =0, .references =NULL};
    int64_t iter_123988;
    struct futhark_mc_segmap_parloop_struct_128389
    futhark_mc_segmap_parloop_struct_128389;
    
    futhark_mc_segmap_parloop_struct_128389.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128389.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128389.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128389.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128389.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128389.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128389.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128389.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128389.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128389.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128389.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128389.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128389.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128389.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128389.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128389.free_bytes_119966 = bytes_119966;
    futhark_mc_segmap_parloop_struct_128389.free_mem_120071 = mem_120071.mem;
    futhark_mc_segmap_parloop_struct_128389.free_mem_120075 = mem_120075.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128390_task;
    
    futhark_mc_segmap_parloop_128390_task.name =
        "futhark_mc_segmap_parloop_128390";
    futhark_mc_segmap_parloop_128390_task.fn = futhark_mc_segmap_parloop_128390;
    futhark_mc_segmap_parloop_128390_task.args =
        &futhark_mc_segmap_parloop_struct_128389;
    futhark_mc_segmap_parloop_128390_task.iterations = iterations;
    futhark_mc_segmap_parloop_128390_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128390_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128390_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128390_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128390_task);
    
    if (futhark_mc_segmap_parloop_128390_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128390_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128390_total_end -
                 futhark_mc_segmap_parloop_128390_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128390_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128390_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128390_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128388_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128388_end -
                 futhark_mc_segmap_nested_task_128388_start;
        
        ctx->futhark_mc_segmap_nested_task_128388_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128388_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128388_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128417 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120247;
    char *free_mem_120251;
};
struct futhark_mc_segmap_parloop_struct_128419 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120247;
    char *free_mem_120251;
};
static int futhark_mc_segmap_parloop_128420(void *args, int64_t start,
                                            int64_t end, int flat_tid_116406,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128419
    *futhark_mc_segmap_parloop_struct_128419 =
    (struct futhark_mc_segmap_parloop_struct_128419 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128419->ctx;
    uint64_t futhark_mc_segmap_parloop_128420_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128420_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128419->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128419->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128419->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128419->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128419->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128419->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128419->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128419->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128419->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128419->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128419->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128419->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128419->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128419->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 =
            futhark_mc_segmap_parloop_struct_128419->free_bytes_120076;
    struct memblock mem_120247 = {.desc ="mem_120247", .mem =
                                  futhark_mc_segmap_parloop_struct_128419->free_mem_120247,
                                  .size =0, .references =NULL};
    struct memblock mem_120251 = {.desc ="mem_120251", .mem =
                                  futhark_mc_segmap_parloop_struct_128419->free_mem_120251,
                                  .size =0, .references =NULL};
    size_t mem_120156_cached_sizze_128421 = 0;
    char *mem_120156 = NULL;
    size_t mem_120159_cached_sizze_128422 = 0;
    char *mem_120159 = NULL;
    size_t mem_120176_cached_sizze_128423 = 0;
    char *mem_120176 = NULL;
    size_t mem_120179_cached_sizze_128424 = 0;
    char *mem_120179 = NULL;
    size_t mem_120206_cached_sizze_128425 = 0;
    char *mem_120206 = NULL;
    size_t mem_120209_cached_sizze_128426 = 0;
    char *mem_120209 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124282 = start;
    
    if (mem_120156_cached_sizze_128421 < (size_t) bytes_119490) {
        mem_120156 = realloc(mem_120156, bytes_119490);
        mem_120156_cached_sizze_128421 = bytes_119490;
    }
    if (mem_120159_cached_sizze_128422 < (size_t) bytes_119490) {
        mem_120159 = realloc(mem_120159, bytes_119490);
        mem_120159_cached_sizze_128422 = bytes_119490;
    }
    if (mem_120176_cached_sizze_128423 < (size_t) bytes_120076) {
        mem_120176 = realloc(mem_120176, bytes_120076);
        mem_120176_cached_sizze_128423 = bytes_120076;
    }
    if (mem_120179_cached_sizze_128424 < (size_t) bytes_120076) {
        mem_120179 = realloc(mem_120179, bytes_120076);
        mem_120179_cached_sizze_128424 = bytes_120076;
    }
    if (mem_120206_cached_sizze_128425 < (size_t) bytes_120076) {
        mem_120206 = realloc(mem_120206, bytes_120076);
        mem_120206_cached_sizze_128425 = bytes_120076;
    }
    if (mem_120209_cached_sizze_128426 < (size_t) bytes_120076) {
        mem_120209 = realloc(mem_120209, bytes_120076);
        mem_120209_cached_sizze_128426 = bytes_120076;
    }
    for (; iter_124282 < end; iter_124282++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124400 = m_112519;
        int64_t gtid_116407 = iter_124282;
        int64_t remnant_124401 = iter_124282 - gtid_116407;
        
        for (int64_t i_124283 = 0; i_124283 < l_n_m_112570; i_124283++) {
            int64_t x_124286 = ((int64_t *) mem_119544.mem)[gtid_116407 *
                                                            l_n_m_112570 +
                                                            i_124283];
            float x_124287 = ((float *) mem_119548.mem)[gtid_116407 *
                                                        l_n_m_112570 +
                                                        i_124283];
            int64_t min_arg_124288 = mul64(t_jump_112527, i_124283);
            int64_t min_res_124289 = smin64(i_112596, min_arg_124288);
            float defunc_0_f_res_124290 = sitofp_i64_f32(min_res_124289);
            
            for (int64_t i_124295 = 0; i_124295 < l_window_112524; i_124295++) {
                bool cond_124298 = sle64(n_112520, i_124295);
                float defunc_0_f_res_124299;
                
                if (cond_124298) {
                    defunc_0_f_res_124299 = 0.0F;
                } else {
                    int64_t i_124300 = add64(x_124286, i_124295);
                    float index_primexp_124301 = sitofp_i64_f32(i_124300);
                    float defunc_0_f_res_f_res_124302 = 1.0F +
                          index_primexp_124301;
                    
                    defunc_0_f_res_124299 = defunc_0_f_res_f_res_124302;
                }
                
                float defunc_0_f_res_124303;
                
                if (cond_124298) {
                    defunc_0_f_res_124303 = 0.0F;
                } else {
                    int64_t i_124304 = add64(x_124286, i_124295);
                    float x_124305 =
                          ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                           (gtid_116407 *
                                                            ctx_param_ext_119638 +
                                                            i_124304 *
                                                            ctx_param_ext_119640)];
                    
                    defunc_0_f_res_124303 = x_124305;
                }
                
                float x_j_124306 = defunc_0_f_res_124299 -
                      defunc_0_f_res_124290;
                float abs_res_124307 = (float) fabs(x_j_124306);
                float tmp1_124308 = abs_res_124307 / x_124287;
                float x_124309 = tmp1_124308 * tmp1_124308;
                float y_124310 = tmp1_124308 * x_124309;
                float tmp2_124311 = 1.0F - y_124310;
                float x_124312 = tmp2_124311 * tmp2_124311;
                float tmp3_124313 = tmp2_124311 * x_124312;
                float tmp4_124314 = defunc_0_f_res_124303 * tmp3_124313;
                
                ((float *) mem_120176)[i_124295] = x_j_124306;
                ((float *) mem_120179)[i_124295] = tmp4_124314;
            }
            
            float defunc_2_reduce_res_124319;
            float defunc_2_reduce_res_124320;
            float defunc_2_reduce_res_124321;
            float defunc_2_reduce_res_124322;
            float defunc_2_reduce_res_124323;
            float redout_124327;
            float redout_124328;
            float redout_124329;
            float redout_124330;
            float redout_124331;
            
            redout_124327 = 0.0F;
            redout_124328 = 0.0F;
            redout_124329 = 0.0F;
            redout_124330 = 0.0F;
            redout_124331 = 0.0F;
            for (int64_t i_124326 = 0; i_124326 < l_window_112524; i_124326++) {
                float x_124334 = ((float *) mem_120176)[i_124326];
                float x_124335 = ((float *) mem_120179)[i_124326];
                float defunc_1_f_res_124336 = x_124334 * x_124335;
                float defunc_1_f_res_124337 = x_124334 * defunc_1_f_res_124336;
                float defunc_1_f_res_124338 = x_124334 * defunc_1_f_res_124337;
                float defunc_1_f_res_124339 = x_124334 * defunc_1_f_res_124338;
                float defunc_1_op_res_124340 = x_124335 + redout_124327;
                float defunc_1_op_res_124341 = defunc_1_f_res_124336 +
                      redout_124328;
                float defunc_1_op_res_124342 = defunc_1_f_res_124337 +
                      redout_124329;
                float defunc_1_op_res_124343 = defunc_1_f_res_124338 +
                      redout_124330;
                float defunc_1_op_res_124344 = defunc_1_f_res_124339 +
                      redout_124331;
                
                ((float *) mem_120206)[i_124326] = defunc_1_f_res_124337;
                ((float *) mem_120209)[i_124326] = defunc_1_f_res_124336;
                
                float redout_tmp_124406 = defunc_1_op_res_124340;
                float redout_tmp_124407 = defunc_1_op_res_124341;
                float redout_tmp_124408 = defunc_1_op_res_124342;
                float redout_tmp_124409 = defunc_1_op_res_124343;
                float redout_tmp_124410 = defunc_1_op_res_124344;
                
                redout_124327 = redout_tmp_124406;
                redout_124328 = redout_tmp_124407;
                redout_124329 = redout_tmp_124408;
                redout_124330 = redout_tmp_124409;
                redout_124331 = redout_tmp_124410;
            }
            defunc_2_reduce_res_124319 = redout_124327;
            defunc_2_reduce_res_124320 = redout_124328;
            defunc_2_reduce_res_124321 = redout_124329;
            defunc_2_reduce_res_124322 = redout_124330;
            defunc_2_reduce_res_124323 = redout_124331;
            
            float x_124347 = defunc_2_reduce_res_124321 *
                  defunc_2_reduce_res_124323;
            float y_124348 = defunc_2_reduce_res_124322 *
                  defunc_2_reduce_res_124322;
            float a12_124349 = x_124347 - y_124348;
            float x_124350 = defunc_2_reduce_res_124321 *
                  defunc_2_reduce_res_124322;
            float y_124351 = defunc_2_reduce_res_124320 *
                  defunc_2_reduce_res_124323;
            float b12_124352 = x_124350 - y_124351;
            float x_124353 = defunc_2_reduce_res_124320 *
                  defunc_2_reduce_res_124322;
            float y_124354 = defunc_2_reduce_res_124321 *
                  defunc_2_reduce_res_124321;
            float c12_124355 = x_124353 - y_124354;
            float x_124356 = defunc_2_reduce_res_124319 *
                  defunc_2_reduce_res_124323;
            float b2_124357 = x_124356 - y_124354;
            float x_124358 = defunc_2_reduce_res_124320 *
                  defunc_2_reduce_res_124321;
            float y_124359 = defunc_2_reduce_res_124319 *
                  defunc_2_reduce_res_124322;
            float c2_124360 = x_124358 - y_124359;
            float x_124361 = defunc_2_reduce_res_124319 * a12_124349;
            float y_124362 = defunc_2_reduce_res_124320 * b12_124352;
            float x_124363 = x_124361 + y_124362;
            float y_124364 = defunc_2_reduce_res_124321 * c12_124355;
            float y_124365 = x_124363 + y_124364;
            float det_124366 = 1.0F / y_124365;
            float a12_124367 = a12_124349 * det_124366;
            float b12_124368 = b12_124352 * det_124366;
            float c12_124369 = c12_124355 * det_124366;
            float b2_124370 = b2_124357 * det_124366;
            float c2_124371 = c2_124360 * det_124366;
            float defunc_2_reduce_res_124372;
            float defunc_2_reduce_res_124373;
            float redout_124375;
            float redout_124376;
            
            redout_124375 = 0.0F;
            redout_124376 = 0.0F;
            for (int64_t i_124374 = 0; i_124374 < l_window_112524; i_124374++) {
                float x_124377 = ((float *) mem_120179)[i_124374];
                float x_124378 = ((float *) mem_120209)[i_124374];
                float x_124379 = ((float *) mem_120206)[i_124374];
                bool cond_124380 = sle64(n_112520, i_124374);
                float defunc_0_f_res_124381;
                
                if (cond_124380) {
                    defunc_0_f_res_124381 = 0.0F;
                } else {
                    int64_t i_124382 = add64(x_124286, i_124374);
                    float x_124383 = ((float *) mem_119788.mem)[gtid_116407 *
                                                                n_112520 +
                                                                i_124382];
                    
                    defunc_0_f_res_124381 = x_124383;
                }
                
                float x_124384 = a12_124367 * x_124377;
                float y_124385 = b12_124368 * x_124378;
                float x_124386 = x_124384 + y_124385;
                float y_124387 = c12_124369 * x_124379;
                float x_124388 = x_124386 + y_124387;
                float defunc_9_fit_fun_res_124389 = defunc_0_f_res_124381 *
                      x_124388;
                float x_124390 = b12_124368 * x_124377;
                float y_124391 = b2_124370 * x_124378;
                float x_124392 = x_124390 + y_124391;
                float y_124393 = c2_124371 * x_124379;
                float x_124394 = x_124392 + y_124393;
                float defunc_9_slope_fun_res_124395 = defunc_0_f_res_124381 *
                      x_124394;
                float defunc_1_op_res_124396 = defunc_9_fit_fun_res_124389 +
                      redout_124375;
                float defunc_1_op_res_124397 = defunc_9_slope_fun_res_124395 +
                      redout_124376;
                float redout_tmp_124413 = defunc_1_op_res_124396;
                float redout_tmp_124414 = defunc_1_op_res_124397;
                
                redout_124375 = redout_tmp_124413;
                redout_124376 = redout_tmp_124414;
            }
            defunc_2_reduce_res_124372 = redout_124375;
            defunc_2_reduce_res_124373 = redout_124376;
            ((float *) mem_120156)[i_124283] = defunc_2_reduce_res_124372;
            ((float *) mem_120159)[i_124283] = defunc_2_reduce_res_124373;
        }
        memmove(mem_120247.mem + gtid_116407 * l_n_m_112570 * (int64_t) 4,
                mem_120156 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_120251.mem + gtid_116407 * l_n_m_112570 * (int64_t) 4,
                mem_120159 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120156);
    free(mem_120159);
    free(mem_120176);
    free(mem_120179);
    free(mem_120206);
    free(mem_120209);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128420_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128420_end -
                 futhark_mc_segmap_parloop_128420_start;
        
        ctx->futhark_mc_segmap_parloop_128420_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128420_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128420_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128418(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116406 = tid;
    int num_tasks_124281 = info.nsubtasks;
    struct futhark_mc_task_128417 *futhark_mc_task_128417 =
                                  (struct futhark_mc_task_128417 *) args;
    struct futhark_context *ctx = futhark_mc_task_128417->ctx;
    uint64_t futhark_mc_segmap_task_128418_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128418_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128417->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128417->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128417->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128417->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128417->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128417->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128417->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128417->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128417->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128417->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128417->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128417->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128417->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128417->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 = futhark_mc_task_128417->free_bytes_120076;
    struct memblock mem_120247 = {.desc ="mem_120247", .mem =
                                  futhark_mc_task_128417->free_mem_120247,
                                  .size =0, .references =NULL};
    struct memblock mem_120251 = {.desc ="mem_120251", .mem =
                                  futhark_mc_task_128417->free_mem_120251,
                                  .size =0, .references =NULL};
    int64_t iter_124282;
    struct futhark_mc_segmap_parloop_struct_128419
    futhark_mc_segmap_parloop_struct_128419;
    
    futhark_mc_segmap_parloop_struct_128419.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128419.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128419.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128419.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128419.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128419.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128419.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128419.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128419.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128419.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128419.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128419.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128419.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128419.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128419.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128419.free_bytes_120076 = bytes_120076;
    futhark_mc_segmap_parloop_struct_128419.free_mem_120247 = mem_120247.mem;
    futhark_mc_segmap_parloop_struct_128419.free_mem_120251 = mem_120251.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128420_task;
    
    futhark_mc_segmap_parloop_128420_task.name =
        "futhark_mc_segmap_parloop_128420";
    futhark_mc_segmap_parloop_128420_task.fn = futhark_mc_segmap_parloop_128420;
    futhark_mc_segmap_parloop_128420_task.args =
        &futhark_mc_segmap_parloop_struct_128419;
    futhark_mc_segmap_parloop_128420_task.iterations = iterations;
    futhark_mc_segmap_parloop_128420_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128420_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128420_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128420_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128420_task);
    
    if (futhark_mc_segmap_parloop_128420_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128420_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128420_total_end -
                 futhark_mc_segmap_parloop_128420_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128420_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128420_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128420_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128418_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128418_end -
                 futhark_mc_segmap_task_128418_start;
        
        ctx->futhark_mc_segmap_task_128418_runs[tid]++;
        ctx->futhark_mc_segmap_task_128418_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128418_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128428 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_bytes_119490;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120247;
    char *free_mem_120251;
};
struct futhark_mc_task_128432 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116409;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120150;
    char *free_mem_120153;
};
struct futhark_mc_segmap_parloop_struct_128434 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116409;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120150;
    char *free_mem_120153;
};
static int futhark_mc_segmap_parloop_128435(void *args, int64_t start,
                                            int64_t end, int flat_tid_116410,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128434
    *futhark_mc_segmap_parloop_struct_128434 =
    (struct futhark_mc_segmap_parloop_struct_128434 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128434->ctx;
    uint64_t futhark_mc_segmap_parloop_128435_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128435_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128434->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128434->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128434->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128434->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128434->free_i_112596;
    int64_t gtid_116409 =
            futhark_mc_segmap_parloop_struct_128434->free_gtid_116409;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128434->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128434->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128434->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128434->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128434->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128434->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128434->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 =
            futhark_mc_segmap_parloop_struct_128434->free_bytes_120076;
    struct memblock mem_120150 = {.desc ="mem_120150", .mem =
                                  futhark_mc_segmap_parloop_struct_128434->free_mem_120150,
                                  .size =0, .references =NULL};
    struct memblock mem_120153 = {.desc ="mem_120153", .mem =
                                  futhark_mc_segmap_parloop_struct_128434->free_mem_120153,
                                  .size =0, .references =NULL};
    size_t mem_124529_cached_sizze_128436 = 0;
    char *mem_124529 = NULL;
    size_t mem_124531_cached_sizze_128437 = 0;
    char *mem_124531 = NULL;
    size_t mem_124557_cached_sizze_128438 = 0;
    char *mem_124557 = NULL;
    size_t mem_124559_cached_sizze_128439 = 0;
    char *mem_124559 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124643 = start;
    
    if (mem_124529_cached_sizze_128436 < (size_t) bytes_120076) {
        mem_124529 = realloc(mem_124529, bytes_120076);
        mem_124529_cached_sizze_128436 = bytes_120076;
    }
    if (mem_124531_cached_sizze_128437 < (size_t) bytes_120076) {
        mem_124531 = realloc(mem_124531, bytes_120076);
        mem_124531_cached_sizze_128437 = bytes_120076;
    }
    if (mem_124557_cached_sizze_128438 < (size_t) bytes_120076) {
        mem_124557 = realloc(mem_124557, bytes_120076);
        mem_124557_cached_sizze_128438 = bytes_120076;
    }
    if (mem_124559_cached_sizze_128439 < (size_t) bytes_120076) {
        mem_124559 = realloc(mem_124559, bytes_120076);
        mem_124559_cached_sizze_128439 = bytes_120076;
    }
    for (; iter_124643 < end; iter_124643++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124711 = l_n_m_112570;
        int64_t gtid_116411 = iter_124643;
        int64_t remnant_124712 = iter_124643 - gtid_116411;
        int64_t x_124524 = ((int64_t *) mem_119544.mem)[gtid_116409 *
                                                        l_n_m_112570 +
                                                        gtid_116411];
        float x_124525 = ((float *) mem_119548.mem)[gtid_116409 * l_n_m_112570 +
                                                    gtid_116411];
        int64_t min_arg_124526 = mul64(t_jump_112527, gtid_116411);
        int64_t min_res_124527 = smin64(i_112596, min_arg_124526);
        float defunc_0_f_res_124528 = sitofp_i64_f32(min_res_124527);
        
        for (int64_t i_124644 = 0; i_124644 < l_window_112524; i_124644++) {
            bool cond_124647 = sle64(n_112520, i_124644);
            float defunc_0_f_res_124648;
            
            if (cond_124647) {
                defunc_0_f_res_124648 = 0.0F;
            } else {
                int64_t i_124649 = add64(x_124524, i_124644);
                float index_primexp_124650 = sitofp_i64_f32(i_124649);
                float defunc_0_f_res_f_res_124651 = 1.0F + index_primexp_124650;
                
                defunc_0_f_res_124648 = defunc_0_f_res_f_res_124651;
            }
            
            float defunc_0_f_res_124652;
            
            if (cond_124647) {
                defunc_0_f_res_124652 = 0.0F;
            } else {
                int64_t i_124653 = add64(x_124524, i_124644);
                float x_124654 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_116409 *
                                                        ctx_param_ext_119638 +
                                                        i_124653 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_124652 = x_124654;
            }
            
            float x_j_124655 = defunc_0_f_res_124648 - defunc_0_f_res_124528;
            float abs_res_124656 = (float) fabs(x_j_124655);
            float tmp1_124657 = abs_res_124656 / x_124525;
            float x_124658 = tmp1_124657 * tmp1_124657;
            float y_124659 = tmp1_124657 * x_124658;
            float tmp2_124660 = 1.0F - y_124659;
            float x_124661 = tmp2_124660 * tmp2_124660;
            float tmp3_124662 = tmp2_124660 * x_124661;
            float tmp4_124663 = defunc_0_f_res_124652 * tmp3_124662;
            
            ((float *) mem_124529)[i_124644] = x_j_124655;
            ((float *) mem_124531)[i_124644] = tmp4_124663;
        }
        
        float defunc_2_reduce_res_124561;
        float defunc_2_reduce_res_124562;
        float defunc_2_reduce_res_124563;
        float defunc_2_reduce_res_124564;
        float defunc_2_reduce_res_124565;
        float redout_124667;
        float redout_124668;
        float redout_124669;
        float redout_124670;
        float redout_124671;
        
        redout_124667 = 0.0F;
        redout_124668 = 0.0F;
        redout_124669 = 0.0F;
        redout_124670 = 0.0F;
        redout_124671 = 0.0F;
        for (int64_t i_124666 = 0; i_124666 < l_window_112524; i_124666++) {
            float x_124674 = ((float *) mem_124529)[i_124666];
            float x_124675 = ((float *) mem_124531)[i_124666];
            float defunc_1_f_res_124676 = x_124674 * x_124675;
            float defunc_1_f_res_124677 = x_124674 * defunc_1_f_res_124676;
            float defunc_1_f_res_124678 = x_124674 * defunc_1_f_res_124677;
            float defunc_1_f_res_124679 = x_124674 * defunc_1_f_res_124678;
            float defunc_1_op_res_124680 = x_124675 + redout_124667;
            float defunc_1_op_res_124681 = defunc_1_f_res_124676 +
                  redout_124668;
            float defunc_1_op_res_124682 = defunc_1_f_res_124677 +
                  redout_124669;
            float defunc_1_op_res_124683 = defunc_1_f_res_124678 +
                  redout_124670;
            float defunc_1_op_res_124684 = defunc_1_f_res_124679 +
                  redout_124671;
            
            ((float *) mem_124557)[i_124666] = defunc_1_f_res_124677;
            ((float *) mem_124559)[i_124666] = defunc_1_f_res_124676;
            
            float redout_tmp_124715 = defunc_1_op_res_124680;
            float redout_tmp_124716 = defunc_1_op_res_124681;
            float redout_tmp_124717 = defunc_1_op_res_124682;
            float redout_tmp_124718 = defunc_1_op_res_124683;
            float redout_tmp_124719 = defunc_1_op_res_124684;
            
            redout_124667 = redout_tmp_124715;
            redout_124668 = redout_tmp_124716;
            redout_124669 = redout_tmp_124717;
            redout_124670 = redout_tmp_124718;
            redout_124671 = redout_tmp_124719;
        }
        defunc_2_reduce_res_124561 = redout_124667;
        defunc_2_reduce_res_124562 = redout_124668;
        defunc_2_reduce_res_124563 = redout_124669;
        defunc_2_reduce_res_124564 = redout_124670;
        defunc_2_reduce_res_124565 = redout_124671;
        
        float x_124589 = defunc_2_reduce_res_124563 *
              defunc_2_reduce_res_124565;
        float y_124590 = defunc_2_reduce_res_124564 *
              defunc_2_reduce_res_124564;
        float a12_124591 = x_124589 - y_124590;
        float x_124592 = defunc_2_reduce_res_124563 *
              defunc_2_reduce_res_124564;
        float y_124593 = defunc_2_reduce_res_124562 *
              defunc_2_reduce_res_124565;
        float b12_124594 = x_124592 - y_124593;
        float x_124595 = defunc_2_reduce_res_124562 *
              defunc_2_reduce_res_124564;
        float y_124596 = defunc_2_reduce_res_124563 *
              defunc_2_reduce_res_124563;
        float c12_124597 = x_124595 - y_124596;
        float x_124598 = defunc_2_reduce_res_124561 *
              defunc_2_reduce_res_124565;
        float b2_124599 = x_124598 - y_124596;
        float x_124600 = defunc_2_reduce_res_124562 *
              defunc_2_reduce_res_124563;
        float y_124601 = defunc_2_reduce_res_124561 *
              defunc_2_reduce_res_124564;
        float c2_124602 = x_124600 - y_124601;
        float x_124603 = defunc_2_reduce_res_124561 * a12_124591;
        float y_124604 = defunc_2_reduce_res_124562 * b12_124594;
        float x_124605 = x_124603 + y_124604;
        float y_124606 = defunc_2_reduce_res_124563 * c12_124597;
        float y_124607 = x_124605 + y_124606;
        float det_124608 = 1.0F / y_124607;
        float a12_124609 = a12_124591 * det_124608;
        float b12_124610 = b12_124594 * det_124608;
        float c12_124611 = c12_124597 * det_124608;
        float b2_124612 = b2_124599 * det_124608;
        float c2_124613 = c2_124602 * det_124608;
        float defunc_2_reduce_res_124614;
        float defunc_2_reduce_res_124615;
        float redout_124688;
        float redout_124689;
        
        redout_124688 = 0.0F;
        redout_124689 = 0.0F;
        for (int64_t i_124687 = 0; i_124687 < l_window_112524; i_124687++) {
            float x_124690 = ((float *) mem_124531)[i_124687];
            float x_124691 = ((float *) mem_124559)[i_124687];
            float x_124692 = ((float *) mem_124557)[i_124687];
            bool cond_124693 = sle64(n_112520, i_124687);
            float defunc_0_f_res_124694;
            
            if (cond_124693) {
                defunc_0_f_res_124694 = 0.0F;
            } else {
                int64_t i_124695 = add64(x_124524, i_124687);
                float x_124696 = ((float *) mem_119788.mem)[gtid_116409 *
                                                            n_112520 +
                                                            i_124695];
                
                defunc_0_f_res_124694 = x_124696;
            }
            
            float x_124697 = a12_124609 * x_124690;
            float y_124698 = b12_124610 * x_124691;
            float x_124699 = x_124697 + y_124698;
            float y_124700 = c12_124611 * x_124692;
            float x_124701 = x_124699 + y_124700;
            float defunc_9_fit_fun_res_124702 = defunc_0_f_res_124694 *
                  x_124701;
            float x_124703 = b12_124610 * x_124690;
            float y_124704 = b2_124612 * x_124691;
            float x_124705 = x_124703 + y_124704;
            float y_124706 = c2_124613 * x_124692;
            float x_124707 = x_124705 + y_124706;
            float defunc_9_slope_fun_res_124708 = defunc_0_f_res_124694 *
                  x_124707;
            float defunc_1_op_res_124709 = defunc_9_fit_fun_res_124702 +
                  redout_124688;
            float defunc_1_op_res_124710 = defunc_9_slope_fun_res_124708 +
                  redout_124689;
            float redout_tmp_124722 = defunc_1_op_res_124709;
            float redout_tmp_124723 = defunc_1_op_res_124710;
            
            redout_124688 = redout_tmp_124722;
            redout_124689 = redout_tmp_124723;
        }
        defunc_2_reduce_res_124614 = redout_124688;
        defunc_2_reduce_res_124615 = redout_124689;
        ((float *) mem_120150.mem)[gtid_116411] = defunc_2_reduce_res_124614;
        ((float *) mem_120153.mem)[gtid_116411] = defunc_2_reduce_res_124615;
    }
    
  cleanup:
    { }
    free(mem_124529);
    free(mem_124531);
    free(mem_124557);
    free(mem_124559);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128435_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128435_end -
                 futhark_mc_segmap_parloop_128435_start;
        
        ctx->futhark_mc_segmap_parloop_128435_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128435_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128435_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128433(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116410 = tid;
    int num_tasks_124642 = info.nsubtasks;
    struct futhark_mc_task_128432 *futhark_mc_task_128432 =
                                  (struct futhark_mc_task_128432 *) args;
    struct futhark_context *ctx = futhark_mc_task_128432->ctx;
    uint64_t futhark_mc_segmap_task_128433_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128433_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128432->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128432->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128432->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128432->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128432->free_i_112596;
    int64_t gtid_116409 = futhark_mc_task_128432->free_gtid_116409;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128432->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128432->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128432->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128432->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128432->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128432->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128432->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 = futhark_mc_task_128432->free_bytes_120076;
    struct memblock mem_120150 = {.desc ="mem_120150", .mem =
                                  futhark_mc_task_128432->free_mem_120150,
                                  .size =0, .references =NULL};
    struct memblock mem_120153 = {.desc ="mem_120153", .mem =
                                  futhark_mc_task_128432->free_mem_120153,
                                  .size =0, .references =NULL};
    int64_t iter_124643;
    struct futhark_mc_segmap_parloop_struct_128434
    futhark_mc_segmap_parloop_struct_128434;
    
    futhark_mc_segmap_parloop_struct_128434.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128434.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128434.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128434.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128434.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128434.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128434.free_gtid_116409 = gtid_116409;
    futhark_mc_segmap_parloop_struct_128434.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128434.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128434.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128434.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128434.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128434.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128434.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128434.free_bytes_120076 = bytes_120076;
    futhark_mc_segmap_parloop_struct_128434.free_mem_120150 = mem_120150.mem;
    futhark_mc_segmap_parloop_struct_128434.free_mem_120153 = mem_120153.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128435_task;
    
    futhark_mc_segmap_parloop_128435_task.name =
        "futhark_mc_segmap_parloop_128435";
    futhark_mc_segmap_parloop_128435_task.fn = futhark_mc_segmap_parloop_128435;
    futhark_mc_segmap_parloop_128435_task.args =
        &futhark_mc_segmap_parloop_struct_128434;
    futhark_mc_segmap_parloop_128435_task.iterations = iterations;
    futhark_mc_segmap_parloop_128435_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128435_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128435_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128435_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128435_task);
    
    if (futhark_mc_segmap_parloop_128435_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128435_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128435_total_end -
                 futhark_mc_segmap_parloop_128435_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128435_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128435_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128435_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128433_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128433_end -
                 futhark_mc_segmap_task_128433_start;
        
        ctx->futhark_mc_segmap_task_128433_runs[tid]++;
        ctx->futhark_mc_segmap_task_128433_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128433_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128441 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_t_jump_112527;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_gtid_116409;
    char *free_mem_119544;
    char *free_mem_119548;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119788;
    int64_t free_bytes_120076;
    char *free_mem_120150;
    char *free_mem_120153;
};
struct futhark_mc_task_128447 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_gtid_116409;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_124416;
    float free_x_124417;
    float free_defunc_0_f_res_124420;
    char *free_mem_124421;
    char *free_mem_124422;
};
struct futhark_mc_segmap_parloop_struct_128449 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_window_112524;
    int64_t free_gtid_116409;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    int64_t free_x_124416;
    float free_x_124417;
    float free_defunc_0_f_res_124420;
    char *free_mem_124421;
    char *free_mem_124422;
};
static int futhark_mc_segmap_parloop_128450(void *args, int64_t start,
                                            int64_t end, int flat_tid_116414,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128449
    *futhark_mc_segmap_parloop_struct_128449 =
    (struct futhark_mc_segmap_parloop_struct_128449 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128449->ctx;
    uint64_t futhark_mc_segmap_parloop_128450_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128450_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128449->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128449->free_l_window_112524;
    int64_t gtid_116409 =
            futhark_mc_segmap_parloop_struct_128449->free_gtid_116409;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128449->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128449->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128449->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128449->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_124416 = futhark_mc_segmap_parloop_struct_128449->free_x_124416;
    float x_124417 = futhark_mc_segmap_parloop_struct_128449->free_x_124417;
    float defunc_0_f_res_124420 =
          futhark_mc_segmap_parloop_struct_128449->free_defunc_0_f_res_124420;
    struct memblock mem_124421 = {.desc ="mem_124421", .mem =
                                  futhark_mc_segmap_parloop_struct_128449->free_mem_124421,
                                  .size =0, .references =NULL};
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_segmap_parloop_struct_128449->free_mem_124422,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124791 = start;
    
    for (; iter_124791 < end; iter_124791++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124797 = l_window_112524;
        int64_t gtid_116415 = iter_124791;
        int64_t remnant_124798 = iter_124791 - gtid_116415;
        bool cond_124725 = sle64(n_112520, gtid_116415);
        float defunc_0_f_res_124726;
        
        if (cond_124725) {
            defunc_0_f_res_124726 = 0.0F;
        } else {
            int64_t i_124792 = add64(gtid_116415, x_124416);
            float index_primexp_124793 = sitofp_i64_f32(i_124792);
            float defunc_0_f_res_f_res_124794 = 1.0F + index_primexp_124793;
            
            defunc_0_f_res_124726 = defunc_0_f_res_f_res_124794;
        }
        
        float defunc_0_f_res_124730;
        
        if (cond_124725) {
            defunc_0_f_res_124730 = 0.0F;
        } else {
            int64_t i_124795 = add64(gtid_116415, x_124416);
            float x_124796 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_116409 *
                                                    ctx_param_ext_119638 +
                                                    i_124795 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_124730 = x_124796;
        }
        
        float x_j_124733 = defunc_0_f_res_124726 - defunc_0_f_res_124420;
        float abs_res_124734 = (float) fabs(x_j_124733);
        float tmp1_124735 = abs_res_124734 / x_124417;
        float x_124736 = tmp1_124735 * tmp1_124735;
        float y_124737 = tmp1_124735 * x_124736;
        float tmp2_124738 = 1.0F - y_124737;
        float x_124739 = tmp2_124738 * tmp2_124738;
        float tmp3_124740 = tmp2_124738 * x_124739;
        float tmp4_124741 = defunc_0_f_res_124730 * tmp3_124740;
        
        ((float *) mem_124421.mem)[gtid_116415] = x_j_124733;
        ((float *) mem_124422.mem)[gtid_116415] = tmp4_124741;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128450_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128450_end -
                 futhark_mc_segmap_parloop_128450_start;
        
        ctx->futhark_mc_segmap_parloop_128450_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128450_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128450_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128448(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116414 = tid;
    int num_tasks_124790 = info.nsubtasks;
    struct futhark_mc_task_128447 *futhark_mc_task_128447 =
                                  (struct futhark_mc_task_128447 *) args;
    struct futhark_context *ctx = futhark_mc_task_128447->ctx;
    uint64_t futhark_mc_segmap_task_128448_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128448_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128447->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128447->free_l_window_112524;
    int64_t gtid_116409 = futhark_mc_task_128447->free_gtid_116409;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128447->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128447->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128447->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128447->free_mem_param_119642,
                                        .size =0, .references =NULL};
    int64_t x_124416 = futhark_mc_task_128447->free_x_124416;
    float x_124417 = futhark_mc_task_128447->free_x_124417;
    float defunc_0_f_res_124420 =
          futhark_mc_task_128447->free_defunc_0_f_res_124420;
    struct memblock mem_124421 = {.desc ="mem_124421", .mem =
                                  futhark_mc_task_128447->free_mem_124421,
                                  .size =0, .references =NULL};
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_task_128447->free_mem_124422,
                                  .size =0, .references =NULL};
    int64_t iter_124791;
    struct futhark_mc_segmap_parloop_struct_128449
    futhark_mc_segmap_parloop_struct_128449;
    
    futhark_mc_segmap_parloop_struct_128449.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128449.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128449.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128449.free_gtid_116409 = gtid_116409;
    futhark_mc_segmap_parloop_struct_128449.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128449.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128449.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128449.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128449.free_x_124416 = x_124416;
    futhark_mc_segmap_parloop_struct_128449.free_x_124417 = x_124417;
    futhark_mc_segmap_parloop_struct_128449.free_defunc_0_f_res_124420 =
        defunc_0_f_res_124420;
    futhark_mc_segmap_parloop_struct_128449.free_mem_124421 = mem_124421.mem;
    futhark_mc_segmap_parloop_struct_128449.free_mem_124422 = mem_124422.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128450_task;
    
    futhark_mc_segmap_parloop_128450_task.name =
        "futhark_mc_segmap_parloop_128450";
    futhark_mc_segmap_parloop_128450_task.fn = futhark_mc_segmap_parloop_128450;
    futhark_mc_segmap_parloop_128450_task.args =
        &futhark_mc_segmap_parloop_struct_128449;
    futhark_mc_segmap_parloop_128450_task.iterations = iterations;
    futhark_mc_segmap_parloop_128450_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128450_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128450_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128450_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128450_task);
    
    if (futhark_mc_segmap_parloop_128450_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128450_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128450_total_end -
                 futhark_mc_segmap_parloop_128450_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128450_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128450_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128450_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128448_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128448_end -
                 futhark_mc_segmap_task_128448_start;
        
        ctx->futhark_mc_segmap_task_128448_runs[tid]++;
        ctx->futhark_mc_segmap_task_128448_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128448_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128451 {
    struct futhark_context *ctx;
    char *free_mem_124421;
    char *free_mem_124422;
    float *retval_defunc_2_reduce_res_124444;
    float *retval_defunc_2_reduce_res_124445;
    float *retval_defunc_2_reduce_res_124446;
    float *retval_defunc_2_reduce_res_124447;
    float *retval_defunc_2_reduce_res_124448;
    char *retval_mem_124442;
    char *retval_mem_124443;
};
struct futhark_mc_segred_stage_1_parloop_struct_128458 {
    struct futhark_context *ctx;
    char *free_mem_124421;
    char *free_mem_124422;
    char *free_mem_124442;
    char *free_mem_124443;
    char *free_reduce_stage_1_tid_res_arr_mem_124800;
    char *free_reduce_stage_1_tid_res_arr_mem_124802;
    char *free_reduce_stage_1_tid_res_arr_mem_124804;
    char *free_reduce_stage_1_tid_res_arr_mem_124806;
    char *free_reduce_stage_1_tid_res_arr_mem_124808;
};
static int futhark_mc_segred_stage_1_parloop_128459(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116416,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128458
    *futhark_mc_segred_stage_1_parloop_struct_128458 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128458 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128458->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128459_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128459_start = get_wall_time();
    
    struct memblock mem_124421 = {.desc ="mem_124421", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128458->free_mem_124421,
                                  .size =0, .references =NULL};
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128458->free_mem_124422,
                                  .size =0, .references =NULL};
    struct memblock mem_124442 = {.desc ="mem_124442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128458->free_mem_124442,
                                  .size =0, .references =NULL};
    struct memblock mem_124443 = {.desc ="mem_124443", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128458->free_mem_124443,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124800 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124800",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128458->free_reduce_stage_1_tid_res_arr_mem_124800,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124802 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124802",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128458->free_reduce_stage_1_tid_res_arr_mem_124802,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124804 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124804",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128458->free_reduce_stage_1_tid_res_arr_mem_124804,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124806 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124806",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128458->free_reduce_stage_1_tid_res_arr_mem_124806,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124808 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124808",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128458->free_reduce_stage_1_tid_res_arr_mem_124808,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124810 = start;
    float x_124742;
    float x_124743;
    float x_124745;
    float x_124746;
    float x_124748;
    float x_124749;
    float x_124751;
    float x_124752;
    float x_124754;
    float x_124755;
    float local_acc_124811 = 0.0F;
    float local_acc_124812 = 0.0F;
    float local_acc_124813 = 0.0F;
    float local_acc_124814 = 0.0F;
    float local_acc_124815 = 0.0F;
    
    for (; iter_124810 < end; iter_124810++) {
        int64_t gtid_116417 = iter_124810;
        float x_124757 = ((float *) mem_124421.mem)[gtid_116417];
        float x_124758 = ((float *) mem_124422.mem)[gtid_116417];
        float defunc_1_f_res_124759 = x_124757 * x_124758;
        float defunc_1_f_res_124760 = x_124757 * defunc_1_f_res_124759;
        float defunc_1_f_res_124761 = x_124757 * defunc_1_f_res_124760;
        float defunc_1_f_res_124762 = x_124757 * defunc_1_f_res_124761;
        
        // save map-out results
        {
            ((float *) mem_124442.mem)[gtid_116417] = defunc_1_f_res_124760;
            ((float *) mem_124443.mem)[gtid_116417] = defunc_1_f_res_124759;
        }
        // Load accum params
        {
            x_124742 = local_acc_124811;
        }
        // Load next params
        {
            x_124743 = x_124758;
        }
        // Red body
        {
            float defunc_1_op_res_124744 = x_124742 + x_124743;
            
            local_acc_124811 = defunc_1_op_res_124744;
        }
        // Load accum params
        {
            x_124745 = local_acc_124812;
        }
        // Load next params
        {
            x_124746 = defunc_1_f_res_124759;
        }
        // Red body
        {
            float defunc_1_op_res_124747 = x_124745 + x_124746;
            
            local_acc_124812 = defunc_1_op_res_124747;
        }
        // Load accum params
        {
            x_124748 = local_acc_124813;
        }
        // Load next params
        {
            x_124749 = defunc_1_f_res_124760;
        }
        // Red body
        {
            float defunc_1_op_res_124750 = x_124748 + x_124749;
            
            local_acc_124813 = defunc_1_op_res_124750;
        }
        // Load accum params
        {
            x_124751 = local_acc_124814;
        }
        // Load next params
        {
            x_124752 = defunc_1_f_res_124761;
        }
        // Red body
        {
            float defunc_1_op_res_124753 = x_124751 + x_124752;
            
            local_acc_124814 = defunc_1_op_res_124753;
        }
        // Load accum params
        {
            x_124754 = local_acc_124815;
        }
        // Load next params
        {
            x_124755 = defunc_1_f_res_124762;
        }
        // Red body
        {
            float defunc_1_op_res_124756 = x_124754 + x_124755;
            
            local_acc_124815 = defunc_1_op_res_124756;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124800.mem)[flat_tid_116416] =
        local_acc_124811;
    ((float *) reduce_stage_1_tid_res_arr_mem_124802.mem)[flat_tid_116416] =
        local_acc_124812;
    ((float *) reduce_stage_1_tid_res_arr_mem_124804.mem)[flat_tid_116416] =
        local_acc_124813;
    ((float *) reduce_stage_1_tid_res_arr_mem_124806.mem)[flat_tid_116416] =
        local_acc_124814;
    ((float *) reduce_stage_1_tid_res_arr_mem_124808.mem)[flat_tid_116416] =
        local_acc_124815;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128459_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128459_end -
                 futhark_mc_segred_stage_1_parloop_128459_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128459_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128459_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128459_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128452(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116416 = tid;
    int num_tasks_124799 = info.nsubtasks;
    struct futhark_mc_task_128451 *futhark_mc_task_128451 =
                                  (struct futhark_mc_task_128451 *) args;
    struct futhark_context *ctx = futhark_mc_task_128451->ctx;
    uint64_t futhark_mc_segred_task_128452_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128452_start = get_wall_time();
    
    struct memblock mem_124421 = {.desc ="mem_124421", .mem =
                                  futhark_mc_task_128451->free_mem_124421,
                                  .size =0, .references =NULL};
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_task_128451->free_mem_124422,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_124444 =
          *futhark_mc_task_128451->retval_defunc_2_reduce_res_124444;
    float defunc_2_reduce_res_124445 =
          *futhark_mc_task_128451->retval_defunc_2_reduce_res_124445;
    float defunc_2_reduce_res_124446 =
          *futhark_mc_task_128451->retval_defunc_2_reduce_res_124446;
    float defunc_2_reduce_res_124447 =
          *futhark_mc_task_128451->retval_defunc_2_reduce_res_124447;
    float defunc_2_reduce_res_124448 =
          *futhark_mc_task_128451->retval_defunc_2_reduce_res_124448;
    struct memblock mem_124442 = {.desc ="mem_124442", .mem =
                                  futhark_mc_task_128451->retval_mem_124442,
                                  .size =0, .references =NULL};
    struct memblock mem_124443 = {.desc ="mem_124443", .mem =
                                  futhark_mc_task_128451->retval_mem_124443,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_124800_cached_sizze_128453 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124800 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124802_cached_sizze_128454 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124802 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124804_cached_sizze_128455 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124804 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124806_cached_sizze_128456 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124806 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124808_cached_sizze_128457 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124808 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124800_cached_sizze_128453 <
        (size_t) ((int64_t) 4 * num_tasks_124799)) {
        reduce_stage_1_tid_res_arr_mem_124800 =
            realloc(reduce_stage_1_tid_res_arr_mem_124800, (int64_t) 4 *
                    num_tasks_124799);
        reduce_stage_1_tid_res_arr_mem_124800_cached_sizze_128453 =
            (int64_t) 4 * num_tasks_124799;
    }
    if (reduce_stage_1_tid_res_arr_mem_124802_cached_sizze_128454 <
        (size_t) ((int64_t) 4 * num_tasks_124799)) {
        reduce_stage_1_tid_res_arr_mem_124802 =
            realloc(reduce_stage_1_tid_res_arr_mem_124802, (int64_t) 4 *
                    num_tasks_124799);
        reduce_stage_1_tid_res_arr_mem_124802_cached_sizze_128454 =
            (int64_t) 4 * num_tasks_124799;
    }
    if (reduce_stage_1_tid_res_arr_mem_124804_cached_sizze_128455 <
        (size_t) ((int64_t) 4 * num_tasks_124799)) {
        reduce_stage_1_tid_res_arr_mem_124804 =
            realloc(reduce_stage_1_tid_res_arr_mem_124804, (int64_t) 4 *
                    num_tasks_124799);
        reduce_stage_1_tid_res_arr_mem_124804_cached_sizze_128455 =
            (int64_t) 4 * num_tasks_124799;
    }
    if (reduce_stage_1_tid_res_arr_mem_124806_cached_sizze_128456 <
        (size_t) ((int64_t) 4 * num_tasks_124799)) {
        reduce_stage_1_tid_res_arr_mem_124806 =
            realloc(reduce_stage_1_tid_res_arr_mem_124806, (int64_t) 4 *
                    num_tasks_124799);
        reduce_stage_1_tid_res_arr_mem_124806_cached_sizze_128456 =
            (int64_t) 4 * num_tasks_124799;
    }
    if (reduce_stage_1_tid_res_arr_mem_124808_cached_sizze_128457 <
        (size_t) ((int64_t) 4 * num_tasks_124799)) {
        reduce_stage_1_tid_res_arr_mem_124808 =
            realloc(reduce_stage_1_tid_res_arr_mem_124808, (int64_t) 4 *
                    num_tasks_124799);
        reduce_stage_1_tid_res_arr_mem_124808_cached_sizze_128457 =
            (int64_t) 4 * num_tasks_124799;
    }
    
    int64_t iter_124810;
    struct futhark_mc_segred_stage_1_parloop_struct_128458
    futhark_mc_segred_stage_1_parloop_struct_128458;
    
    futhark_mc_segred_stage_1_parloop_struct_128458.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_mem_124421 =
        mem_124421.mem;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_mem_124422 =
        mem_124422.mem;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_mem_124442 =
        mem_124442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_mem_124443 =
        mem_124443.mem;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_reduce_stage_1_tid_res_arr_mem_124800 =
        reduce_stage_1_tid_res_arr_mem_124800;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_reduce_stage_1_tid_res_arr_mem_124802 =
        reduce_stage_1_tid_res_arr_mem_124802;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_reduce_stage_1_tid_res_arr_mem_124804 =
        reduce_stage_1_tid_res_arr_mem_124804;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_reduce_stage_1_tid_res_arr_mem_124806 =
        reduce_stage_1_tid_res_arr_mem_124806;
    futhark_mc_segred_stage_1_parloop_struct_128458.free_reduce_stage_1_tid_res_arr_mem_124808 =
        reduce_stage_1_tid_res_arr_mem_124808;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128459_task;
    
    futhark_mc_segred_stage_1_parloop_128459_task.name =
        "futhark_mc_segred_stage_1_parloop_128459";
    futhark_mc_segred_stage_1_parloop_128459_task.fn =
        futhark_mc_segred_stage_1_parloop_128459;
    futhark_mc_segred_stage_1_parloop_128459_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128458;
    futhark_mc_segred_stage_1_parloop_128459_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128459_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128459_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128459_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128459_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128459_task);
    
    if (futhark_mc_segred_stage_1_parloop_128459_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128459_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128459_total_end -
                 futhark_mc_segred_stage_1_parloop_128459_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128459_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128459_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128459_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124444 = 0.0F;
        defunc_2_reduce_res_124445 = 0.0F;
        defunc_2_reduce_res_124446 = 0.0F;
        defunc_2_reduce_res_124447 = 0.0F;
        defunc_2_reduce_res_124448 = 0.0F;
    }
    
    float x_124816;
    float x_124817;
    float x_124819;
    float x_124820;
    float x_124822;
    float x_124823;
    float x_124825;
    float x_124826;
    float x_124828;
    float x_124829;
    
    for (int32_t i_124831 = 0; i_124831 < num_tasks_124799; i_124831++) {
        flat_tid_116416 = i_124831;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124816 = defunc_2_reduce_res_124444;
            }
            // load next params
            {
                x_124817 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124800)[flat_tid_116416];
            }
            // red body
            {
                float defunc_1_op_res_124818 = x_124816 + x_124817;
                
                defunc_2_reduce_res_124444 = defunc_1_op_res_124818;
            }
            // load acc params
            {
                x_124819 = defunc_2_reduce_res_124445;
            }
            // load next params
            {
                x_124820 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124802)[flat_tid_116416];
            }
            // red body
            {
                float defunc_1_op_res_124821 = x_124819 + x_124820;
                
                defunc_2_reduce_res_124445 = defunc_1_op_res_124821;
            }
            // load acc params
            {
                x_124822 = defunc_2_reduce_res_124446;
            }
            // load next params
            {
                x_124823 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124804)[flat_tid_116416];
            }
            // red body
            {
                float defunc_1_op_res_124824 = x_124822 + x_124823;
                
                defunc_2_reduce_res_124446 = defunc_1_op_res_124824;
            }
            // load acc params
            {
                x_124825 = defunc_2_reduce_res_124447;
            }
            // load next params
            {
                x_124826 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124806)[flat_tid_116416];
            }
            // red body
            {
                float defunc_1_op_res_124827 = x_124825 + x_124826;
                
                defunc_2_reduce_res_124447 = defunc_1_op_res_124827;
            }
            // load acc params
            {
                x_124828 = defunc_2_reduce_res_124448;
            }
            // load next params
            {
                x_124829 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124808)[flat_tid_116416];
            }
            // red body
            {
                float defunc_1_op_res_124830 = x_124828 + x_124829;
                
                defunc_2_reduce_res_124448 = defunc_1_op_res_124830;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124800);
    free(reduce_stage_1_tid_res_arr_mem_124802);
    free(reduce_stage_1_tid_res_arr_mem_124804);
    free(reduce_stage_1_tid_res_arr_mem_124806);
    free(reduce_stage_1_tid_res_arr_mem_124808);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128452_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128452_end -
                 futhark_mc_segred_task_128452_start;
        
        ctx->futhark_mc_segred_task_128452_runs[tid]++;
        ctx->futhark_mc_segred_task_128452_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128452_iter[tid] += iterations;
    }
    *futhark_mc_task_128451->retval_defunc_2_reduce_res_124444 =
        defunc_2_reduce_res_124444;
    *futhark_mc_task_128451->retval_defunc_2_reduce_res_124445 =
        defunc_2_reduce_res_124445;
    *futhark_mc_task_128451->retval_defunc_2_reduce_res_124446 =
        defunc_2_reduce_res_124446;
    *futhark_mc_task_128451->retval_defunc_2_reduce_res_124447 =
        defunc_2_reduce_res_124447;
    *futhark_mc_task_128451->retval_defunc_2_reduce_res_124448 =
        defunc_2_reduce_res_124448;
    futhark_mc_task_128451->retval_mem_124442 = mem_124442.mem;
    futhark_mc_task_128451->retval_mem_124443 = mem_124443.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128460 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116409;
    char *free_mem_119788;
    int64_t free_x_124416;
    char *free_mem_124422;
    char *free_mem_124442;
    char *free_mem_124443;
    float free_a12_124492;
    float free_b12_124493;
    float free_c12_124494;
    float free_b2_124495;
    float free_c2_124496;
    float *retval_defunc_2_reduce_res_124497;
    float *retval_defunc_2_reduce_res_124498;
};
struct futhark_mc_segred_stage_1_parloop_struct_128464 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116409;
    char *free_mem_119788;
    int64_t free_x_124416;
    char *free_mem_124422;
    char *free_mem_124442;
    char *free_mem_124443;
    float free_a12_124492;
    float free_b12_124493;
    float free_c12_124494;
    float free_b2_124495;
    float free_c2_124496;
    char *free_reduce_stage_1_tid_res_arr_mem_124833;
    char *free_reduce_stage_1_tid_res_arr_mem_124835;
};
static int futhark_mc_segred_stage_1_parloop_128465(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116418,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128464
    *futhark_mc_segred_stage_1_parloop_struct_128464 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128464 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128464->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128465_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128465_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128464->free_n_112520;
    int64_t gtid_116409 =
            futhark_mc_segred_stage_1_parloop_struct_128464->free_gtid_116409;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128464->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_124416 =
            futhark_mc_segred_stage_1_parloop_struct_128464->free_x_124416;
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128464->free_mem_124422,
                                  .size =0, .references =NULL};
    struct memblock mem_124442 = {.desc ="mem_124442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128464->free_mem_124442,
                                  .size =0, .references =NULL};
    struct memblock mem_124443 = {.desc ="mem_124443", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128464->free_mem_124443,
                                  .size =0, .references =NULL};
    float a12_124492 =
          futhark_mc_segred_stage_1_parloop_struct_128464->free_a12_124492;
    float b12_124493 =
          futhark_mc_segred_stage_1_parloop_struct_128464->free_b12_124493;
    float c12_124494 =
          futhark_mc_segred_stage_1_parloop_struct_128464->free_c12_124494;
    float b2_124495 =
          futhark_mc_segred_stage_1_parloop_struct_128464->free_b2_124495;
    float c2_124496 =
          futhark_mc_segred_stage_1_parloop_struct_128464->free_c2_124496;
    struct memblock reduce_stage_1_tid_res_arr_mem_124833 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124833",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128464->free_reduce_stage_1_tid_res_arr_mem_124833,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124835 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124835",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128464->free_reduce_stage_1_tid_res_arr_mem_124835,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124837 = start;
    float x_124763;
    float x_124764;
    float x_124766;
    float x_124767;
    float local_acc_124838 = 0.0F;
    float local_acc_124839 = 0.0F;
    
    for (; iter_124837 < end; iter_124837++) {
        int64_t gtid_116419 = iter_124837;
        float x_124769 = ((float *) mem_124422.mem)[gtid_116419];
        float x_124770 = ((float *) mem_124443.mem)[gtid_116419];
        float x_124771 = ((float *) mem_124442.mem)[gtid_116419];
        bool cond_124772 = sle64(n_112520, gtid_116419);
        float defunc_0_f_res_124773;
        
        if (cond_124772) {
            defunc_0_f_res_124773 = 0.0F;
        } else {
            int64_t i_124774 = add64(gtid_116419, x_124416);
            float x_124775 = ((float *) mem_119788.mem)[gtid_116409 * n_112520 +
                                                        i_124774];
            
            defunc_0_f_res_124773 = x_124775;
        }
        
        float x_124776 = a12_124492 * x_124769;
        float y_124777 = b12_124493 * x_124770;
        float x_124778 = x_124776 + y_124777;
        float y_124779 = c12_124494 * x_124771;
        float x_124780 = x_124778 + y_124779;
        float defunc_9_fit_fun_res_124781 = defunc_0_f_res_124773 * x_124780;
        float x_124782 = b12_124493 * x_124769;
        float y_124783 = b2_124495 * x_124770;
        float x_124784 = x_124782 + y_124783;
        float y_124785 = c2_124496 * x_124771;
        float x_124786 = x_124784 + y_124785;
        float defunc_9_slope_fun_res_124787 = defunc_0_f_res_124773 * x_124786;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124763 = local_acc_124838;
        }
        // Load next params
        {
            x_124764 = defunc_9_fit_fun_res_124781;
        }
        // Red body
        {
            float defunc_1_op_res_124765 = x_124763 + x_124764;
            
            local_acc_124838 = defunc_1_op_res_124765;
        }
        // Load accum params
        {
            x_124766 = local_acc_124839;
        }
        // Load next params
        {
            x_124767 = defunc_9_slope_fun_res_124787;
        }
        // Red body
        {
            float defunc_1_op_res_124768 = x_124766 + x_124767;
            
            local_acc_124839 = defunc_1_op_res_124768;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124833.mem)[flat_tid_116418] =
        local_acc_124838;
    ((float *) reduce_stage_1_tid_res_arr_mem_124835.mem)[flat_tid_116418] =
        local_acc_124839;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128465_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128465_end -
                 futhark_mc_segred_stage_1_parloop_128465_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128465_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128465_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128465_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128461(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116418 = tid;
    int num_tasks_124832 = info.nsubtasks;
    struct futhark_mc_task_128460 *futhark_mc_task_128460 =
                                  (struct futhark_mc_task_128460 *) args;
    struct futhark_context *ctx = futhark_mc_task_128460->ctx;
    uint64_t futhark_mc_segred_task_128461_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128461_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128460->free_n_112520;
    int64_t gtid_116409 = futhark_mc_task_128460->free_gtid_116409;
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128460->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t x_124416 = futhark_mc_task_128460->free_x_124416;
    struct memblock mem_124422 = {.desc ="mem_124422", .mem =
                                  futhark_mc_task_128460->free_mem_124422,
                                  .size =0, .references =NULL};
    struct memblock mem_124442 = {.desc ="mem_124442", .mem =
                                  futhark_mc_task_128460->free_mem_124442,
                                  .size =0, .references =NULL};
    struct memblock mem_124443 = {.desc ="mem_124443", .mem =
                                  futhark_mc_task_128460->free_mem_124443,
                                  .size =0, .references =NULL};
    float a12_124492 = futhark_mc_task_128460->free_a12_124492;
    float b12_124493 = futhark_mc_task_128460->free_b12_124493;
    float c12_124494 = futhark_mc_task_128460->free_c12_124494;
    float b2_124495 = futhark_mc_task_128460->free_b2_124495;
    float c2_124496 = futhark_mc_task_128460->free_c2_124496;
    float defunc_2_reduce_res_124497 =
          *futhark_mc_task_128460->retval_defunc_2_reduce_res_124497;
    float defunc_2_reduce_res_124498 =
          *futhark_mc_task_128460->retval_defunc_2_reduce_res_124498;
    size_t reduce_stage_1_tid_res_arr_mem_124833_cached_sizze_128462 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124833 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124835_cached_sizze_128463 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124835 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124833_cached_sizze_128462 <
        (size_t) ((int64_t) 4 * num_tasks_124832)) {
        reduce_stage_1_tid_res_arr_mem_124833 =
            realloc(reduce_stage_1_tid_res_arr_mem_124833, (int64_t) 4 *
                    num_tasks_124832);
        reduce_stage_1_tid_res_arr_mem_124833_cached_sizze_128462 =
            (int64_t) 4 * num_tasks_124832;
    }
    if (reduce_stage_1_tid_res_arr_mem_124835_cached_sizze_128463 <
        (size_t) ((int64_t) 4 * num_tasks_124832)) {
        reduce_stage_1_tid_res_arr_mem_124835 =
            realloc(reduce_stage_1_tid_res_arr_mem_124835, (int64_t) 4 *
                    num_tasks_124832);
        reduce_stage_1_tid_res_arr_mem_124835_cached_sizze_128463 =
            (int64_t) 4 * num_tasks_124832;
    }
    
    int64_t iter_124837;
    struct futhark_mc_segred_stage_1_parloop_struct_128464
    futhark_mc_segred_stage_1_parloop_struct_128464;
    
    futhark_mc_segred_stage_1_parloop_struct_128464.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_gtid_116409 =
        gtid_116409;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_mem_119788 =
        mem_119788.mem;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_x_124416 = x_124416;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_mem_124422 =
        mem_124422.mem;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_mem_124442 =
        mem_124442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_mem_124443 =
        mem_124443.mem;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_a12_124492 =
        a12_124492;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_b12_124493 =
        b12_124493;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_c12_124494 =
        c12_124494;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_b2_124495 = b2_124495;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_c2_124496 = c2_124496;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_reduce_stage_1_tid_res_arr_mem_124833 =
        reduce_stage_1_tid_res_arr_mem_124833;
    futhark_mc_segred_stage_1_parloop_struct_128464.free_reduce_stage_1_tid_res_arr_mem_124835 =
        reduce_stage_1_tid_res_arr_mem_124835;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128465_task;
    
    futhark_mc_segred_stage_1_parloop_128465_task.name =
        "futhark_mc_segred_stage_1_parloop_128465";
    futhark_mc_segred_stage_1_parloop_128465_task.fn =
        futhark_mc_segred_stage_1_parloop_128465;
    futhark_mc_segred_stage_1_parloop_128465_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128464;
    futhark_mc_segred_stage_1_parloop_128465_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128465_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128465_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128465_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128465_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128465_task);
    
    if (futhark_mc_segred_stage_1_parloop_128465_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128465_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128465_total_end -
                 futhark_mc_segred_stage_1_parloop_128465_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128465_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128465_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128465_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124497 = 0.0F;
        defunc_2_reduce_res_124498 = 0.0F;
    }
    
    float x_124840;
    float x_124841;
    float x_124843;
    float x_124844;
    
    for (int32_t i_124846 = 0; i_124846 < num_tasks_124832; i_124846++) {
        flat_tid_116418 = i_124846;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124840 = defunc_2_reduce_res_124497;
            }
            // load next params
            {
                x_124841 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124833)[flat_tid_116418];
            }
            // red body
            {
                float defunc_1_op_res_124842 = x_124840 + x_124841;
                
                defunc_2_reduce_res_124497 = defunc_1_op_res_124842;
            }
            // load acc params
            {
                x_124843 = defunc_2_reduce_res_124498;
            }
            // load next params
            {
                x_124844 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124835)[flat_tid_116418];
            }
            // red body
            {
                float defunc_1_op_res_124845 = x_124843 + x_124844;
                
                defunc_2_reduce_res_124498 = defunc_1_op_res_124845;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124833);
    free(reduce_stage_1_tid_res_arr_mem_124835);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128461_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128461_end -
                 futhark_mc_segred_task_128461_start;
        
        ctx->futhark_mc_segred_task_128461_runs[tid]++;
        ctx->futhark_mc_segred_task_128461_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128461_iter[tid] += iterations;
    }
    *futhark_mc_task_128460->retval_defunc_2_reduce_res_124497 =
        defunc_2_reduce_res_124497;
    *futhark_mc_task_128460->retval_defunc_2_reduce_res_124498 =
        defunc_2_reduce_res_124498;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128442(void *args, int64_t start,
                                            int64_t end, int flat_tid_116412,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128441
    *futhark_mc_segmap_parloop_struct_128441 =
    (struct futhark_mc_segmap_parloop_struct_128441 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128441->ctx;
    uint64_t futhark_mc_segmap_parloop_128442_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128442_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128441->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128441->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128441->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128441->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128441->free_i_112596;
    int64_t gtid_116409 =
            futhark_mc_segmap_parloop_struct_128441->free_gtid_116409;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128441->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128441->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128441->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128441->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128441->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128441->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128441->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 =
            futhark_mc_segmap_parloop_struct_128441->free_bytes_120076;
    struct memblock mem_120150 = {.desc ="mem_120150", .mem =
                                  futhark_mc_segmap_parloop_struct_128441->free_mem_120150,
                                  .size =0, .references =NULL};
    struct memblock mem_120153 = {.desc ="mem_120153", .mem =
                                  futhark_mc_segmap_parloop_struct_128441->free_mem_120153,
                                  .size =0, .references =NULL};
    size_t mem_124421_cached_sizze_128443 = 0;
    char *mem_124421 = NULL;
    size_t mem_124422_cached_sizze_128444 = 0;
    char *mem_124422 = NULL;
    size_t mem_124442_cached_sizze_128445 = 0;
    char *mem_124442 = NULL;
    size_t mem_124443_cached_sizze_128446 = 0;
    char *mem_124443 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124724 = start;
    
    if (mem_124421_cached_sizze_128443 < (size_t) bytes_120076) {
        mem_124421 = realloc(mem_124421, bytes_120076);
        mem_124421_cached_sizze_128443 = bytes_120076;
    }
    if (mem_124422_cached_sizze_128444 < (size_t) bytes_120076) {
        mem_124422 = realloc(mem_124422, bytes_120076);
        mem_124422_cached_sizze_128444 = bytes_120076;
    }
    if (mem_124442_cached_sizze_128445 < (size_t) bytes_120076) {
        mem_124442 = realloc(mem_124442, bytes_120076);
        mem_124442_cached_sizze_128445 = bytes_120076;
    }
    if (mem_124443_cached_sizze_128446 < (size_t) bytes_120076) {
        mem_124443 = realloc(mem_124443, bytes_120076);
        mem_124443_cached_sizze_128446 = bytes_120076;
    }
    for (; iter_124724 < end; iter_124724++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124788 = l_n_m_112570;
        int64_t gtid_116413 = iter_124724;
        int64_t remnant_124789 = iter_124724 - gtid_116413;
        int64_t x_124416 = ((int64_t *) mem_119544.mem)[gtid_116409 *
                                                        l_n_m_112570 +
                                                        gtid_116413];
        float x_124417 = ((float *) mem_119548.mem)[gtid_116409 * l_n_m_112570 +
                                                    gtid_116413];
        int64_t min_arg_124418 = mul64(t_jump_112527, gtid_116413);
        int64_t min_res_124419 = smin64(i_112596, min_arg_124418);
        float defunc_0_f_res_124420 = sitofp_i64_f32(min_res_124419);
        int64_t flat_tid_116414 = (int64_t) 0;
        int32_t num_tasks_124790;
        struct futhark_mc_task_128447 futhark_mc_task_128447;
        
        futhark_mc_task_128447.ctx = ctx;
        futhark_mc_task_128447.free_n_112520 = n_112520;
        futhark_mc_task_128447.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128447.free_gtid_116409 = gtid_116409;
        futhark_mc_task_128447.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128447.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128447.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128447.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128447.free_x_124416 = x_124416;
        futhark_mc_task_128447.free_x_124417 = x_124417;
        futhark_mc_task_128447.free_defunc_0_f_res_124420 =
            defunc_0_f_res_124420;
        futhark_mc_task_128447.free_mem_124421 = mem_124421;
        futhark_mc_task_128447.free_mem_124422 = mem_124422;
        
        struct scheduler_segop futhark_mc_task_128447_task;
        
        futhark_mc_task_128447_task.args = &futhark_mc_task_128447;
        futhark_mc_task_128447_task.top_level_fn =
            futhark_mc_segmap_task_128448;
        futhark_mc_task_128447_task.name = "futhark_mc_segmap_task_128448";
        futhark_mc_task_128447_task.iterations = l_window_112524;
        futhark_mc_task_128447_task.task_time =
            &ctx->futhark_mc_segmap_task_128448_total_time;
        futhark_mc_task_128447_task.task_iter =
            &ctx->futhark_mc_segmap_task_128448_total_iter;
        futhark_mc_task_128447_task.sched = STATIC;
        futhark_mc_task_128447_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128448_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128447_task);
        
        if (futhark_mc_segmap_task_128448_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_124444;
        float defunc_2_reduce_res_124445;
        float defunc_2_reduce_res_124446;
        float defunc_2_reduce_res_124447;
        float defunc_2_reduce_res_124448;
        int64_t flat_tid_116416 = (int64_t) 0;
        int32_t num_tasks_124799;
        struct futhark_mc_task_128451 futhark_mc_task_128451;
        
        futhark_mc_task_128451.ctx = ctx;
        futhark_mc_task_128451.free_mem_124421 = mem_124421;
        futhark_mc_task_128451.free_mem_124422 = mem_124422;
        futhark_mc_task_128451.retval_defunc_2_reduce_res_124444 =
            &defunc_2_reduce_res_124444;
        futhark_mc_task_128451.retval_defunc_2_reduce_res_124445 =
            &defunc_2_reduce_res_124445;
        futhark_mc_task_128451.retval_defunc_2_reduce_res_124446 =
            &defunc_2_reduce_res_124446;
        futhark_mc_task_128451.retval_defunc_2_reduce_res_124447 =
            &defunc_2_reduce_res_124447;
        futhark_mc_task_128451.retval_defunc_2_reduce_res_124448 =
            &defunc_2_reduce_res_124448;
        futhark_mc_task_128451.retval_mem_124442 = mem_124442;
        futhark_mc_task_128451.retval_mem_124443 = mem_124443;
        
        struct scheduler_segop futhark_mc_task_128451_task;
        
        futhark_mc_task_128451_task.args = &futhark_mc_task_128451;
        futhark_mc_task_128451_task.top_level_fn =
            futhark_mc_segred_task_128452;
        futhark_mc_task_128451_task.name = "futhark_mc_segred_task_128452";
        futhark_mc_task_128451_task.iterations = l_window_112524;
        futhark_mc_task_128451_task.task_time =
            &ctx->futhark_mc_segred_task_128452_total_time;
        futhark_mc_task_128451_task.task_iter =
            &ctx->futhark_mc_segred_task_128452_total_iter;
        futhark_mc_task_128451_task.sched = STATIC;
        futhark_mc_task_128451_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128452_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128451_task);
        
        if (futhark_mc_segred_task_128452_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_124472 = defunc_2_reduce_res_124446 *
              defunc_2_reduce_res_124448;
        float y_124473 = defunc_2_reduce_res_124447 *
              defunc_2_reduce_res_124447;
        float a12_124474 = x_124472 - y_124473;
        float x_124475 = defunc_2_reduce_res_124446 *
              defunc_2_reduce_res_124447;
        float y_124476 = defunc_2_reduce_res_124445 *
              defunc_2_reduce_res_124448;
        float b12_124477 = x_124475 - y_124476;
        float x_124478 = defunc_2_reduce_res_124445 *
              defunc_2_reduce_res_124447;
        float y_124479 = defunc_2_reduce_res_124446 *
              defunc_2_reduce_res_124446;
        float c12_124480 = x_124478 - y_124479;
        float x_124481 = defunc_2_reduce_res_124444 *
              defunc_2_reduce_res_124448;
        float b2_124482 = x_124481 - y_124479;
        float x_124483 = defunc_2_reduce_res_124445 *
              defunc_2_reduce_res_124446;
        float y_124484 = defunc_2_reduce_res_124444 *
              defunc_2_reduce_res_124447;
        float c2_124485 = x_124483 - y_124484;
        float x_124486 = defunc_2_reduce_res_124444 * a12_124474;
        float y_124487 = defunc_2_reduce_res_124445 * b12_124477;
        float x_124488 = x_124486 + y_124487;
        float y_124489 = defunc_2_reduce_res_124446 * c12_124480;
        float y_124490 = x_124488 + y_124489;
        float det_124491 = 1.0F / y_124490;
        float a12_124492 = a12_124474 * det_124491;
        float b12_124493 = b12_124477 * det_124491;
        float c12_124494 = c12_124480 * det_124491;
        float b2_124495 = b2_124482 * det_124491;
        float c2_124496 = c2_124485 * det_124491;
        float defunc_2_reduce_res_124497;
        float defunc_2_reduce_res_124498;
        int64_t flat_tid_116418 = (int64_t) 0;
        int32_t num_tasks_124832;
        struct futhark_mc_task_128460 futhark_mc_task_128460;
        
        futhark_mc_task_128460.ctx = ctx;
        futhark_mc_task_128460.free_n_112520 = n_112520;
        futhark_mc_task_128460.free_gtid_116409 = gtid_116409;
        futhark_mc_task_128460.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128460.free_x_124416 = x_124416;
        futhark_mc_task_128460.free_mem_124422 = mem_124422;
        futhark_mc_task_128460.free_mem_124442 = mem_124442;
        futhark_mc_task_128460.free_mem_124443 = mem_124443;
        futhark_mc_task_128460.free_a12_124492 = a12_124492;
        futhark_mc_task_128460.free_b12_124493 = b12_124493;
        futhark_mc_task_128460.free_c12_124494 = c12_124494;
        futhark_mc_task_128460.free_b2_124495 = b2_124495;
        futhark_mc_task_128460.free_c2_124496 = c2_124496;
        futhark_mc_task_128460.retval_defunc_2_reduce_res_124497 =
            &defunc_2_reduce_res_124497;
        futhark_mc_task_128460.retval_defunc_2_reduce_res_124498 =
            &defunc_2_reduce_res_124498;
        
        struct scheduler_segop futhark_mc_task_128460_task;
        
        futhark_mc_task_128460_task.args = &futhark_mc_task_128460;
        futhark_mc_task_128460_task.top_level_fn =
            futhark_mc_segred_task_128461;
        futhark_mc_task_128460_task.name = "futhark_mc_segred_task_128461";
        futhark_mc_task_128460_task.iterations = l_window_112524;
        futhark_mc_task_128460_task.task_time =
            &ctx->futhark_mc_segred_task_128461_total_time;
        futhark_mc_task_128460_task.task_iter =
            &ctx->futhark_mc_segred_task_128461_total_iter;
        futhark_mc_task_128460_task.sched = STATIC;
        futhark_mc_task_128460_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128461_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128460_task);
        
        if (futhark_mc_segred_task_128461_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120150.mem)[gtid_116413] = defunc_2_reduce_res_124497;
        ((float *) mem_120153.mem)[gtid_116413] = defunc_2_reduce_res_124498;
    }
    
  cleanup:
    { }
    free(mem_124421);
    free(mem_124422);
    free(mem_124442);
    free(mem_124443);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128442_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128442_end -
                 futhark_mc_segmap_parloop_128442_start;
        
        ctx->futhark_mc_segmap_parloop_128442_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128442_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128442_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128440(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116412 = tid;
    int num_tasks_124642 = info.nsubtasks;
    struct futhark_mc_task_128432 *futhark_mc_task_128432 =
                                  (struct futhark_mc_task_128432 *) args;
    struct futhark_context *ctx = futhark_mc_task_128432->ctx;
    uint64_t futhark_mc_segmap_nested_task_128440_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128440_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128432->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128432->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128432->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128432->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128432->free_i_112596;
    int64_t gtid_116409 = futhark_mc_task_128432->free_gtid_116409;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128432->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128432->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128432->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128432->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128432->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128432->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128432->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 = futhark_mc_task_128432->free_bytes_120076;
    struct memblock mem_120150 = {.desc ="mem_120150", .mem =
                                  futhark_mc_task_128432->free_mem_120150,
                                  .size =0, .references =NULL};
    struct memblock mem_120153 = {.desc ="mem_120153", .mem =
                                  futhark_mc_task_128432->free_mem_120153,
                                  .size =0, .references =NULL};
    int64_t iter_124724;
    struct futhark_mc_segmap_parloop_struct_128441
    futhark_mc_segmap_parloop_struct_128441;
    
    futhark_mc_segmap_parloop_struct_128441.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128441.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128441.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128441.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128441.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128441.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128441.free_gtid_116409 = gtid_116409;
    futhark_mc_segmap_parloop_struct_128441.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128441.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128441.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128441.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128441.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128441.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128441.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128441.free_bytes_120076 = bytes_120076;
    futhark_mc_segmap_parloop_struct_128441.free_mem_120150 = mem_120150.mem;
    futhark_mc_segmap_parloop_struct_128441.free_mem_120153 = mem_120153.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128442_task;
    
    futhark_mc_segmap_parloop_128442_task.name =
        "futhark_mc_segmap_parloop_128442";
    futhark_mc_segmap_parloop_128442_task.fn = futhark_mc_segmap_parloop_128442;
    futhark_mc_segmap_parloop_128442_task.args =
        &futhark_mc_segmap_parloop_struct_128441;
    futhark_mc_segmap_parloop_128442_task.iterations = iterations;
    futhark_mc_segmap_parloop_128442_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128442_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128442_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128442_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128442_task);
    
    if (futhark_mc_segmap_parloop_128442_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128442_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128442_total_end -
                 futhark_mc_segmap_parloop_128442_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128442_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128442_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128442_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128440_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128440_end -
                 futhark_mc_segmap_nested_task_128440_start;
        
        ctx->futhark_mc_segmap_nested_task_128440_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128440_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128440_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128429(void *args, int64_t start,
                                            int64_t end, int flat_tid_116408,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128428
    *futhark_mc_segmap_parloop_struct_128428 =
    (struct futhark_mc_segmap_parloop_struct_128428 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128428->ctx;
    uint64_t futhark_mc_segmap_parloop_128429_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128429_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128428->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128428->free_n_112520;
    int64_t l_window_112524 =
            futhark_mc_segmap_parloop_struct_128428->free_l_window_112524;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128428->free_t_jump_112527;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128428->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128428->free_i_112596;
    int64_t bytes_119490 =
            futhark_mc_segmap_parloop_struct_128428->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_segmap_parloop_struct_128428->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_segmap_parloop_struct_128428->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128428->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128428->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128428->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128428->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_segmap_parloop_struct_128428->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 =
            futhark_mc_segmap_parloop_struct_128428->free_bytes_120076;
    struct memblock mem_120247 = {.desc ="mem_120247", .mem =
                                  futhark_mc_segmap_parloop_struct_128428->free_mem_120247,
                                  .size =0, .references =NULL};
    struct memblock mem_120251 = {.desc ="mem_120251", .mem =
                                  futhark_mc_segmap_parloop_struct_128428->free_mem_120251,
                                  .size =0, .references =NULL};
    size_t mem_120150_cached_sizze_128430 = 0;
    char *mem_120150 = NULL;
    size_t mem_120153_cached_sizze_128431 = 0;
    char *mem_120153 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124415 = start;
    
    if (mem_120150_cached_sizze_128430 < (size_t) bytes_119490) {
        mem_120150 = realloc(mem_120150, bytes_119490);
        mem_120150_cached_sizze_128430 = bytes_119490;
    }
    if (mem_120153_cached_sizze_128431 < (size_t) bytes_119490) {
        mem_120153 = realloc(mem_120153, bytes_119490);
        mem_120153_cached_sizze_128431 = bytes_119490;
    }
    for (; iter_124415 < end; iter_124415++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124640 = m_112519;
        int64_t gtid_116409 = iter_124415;
        int64_t remnant_124641 = iter_124415 - gtid_116409;
        int64_t flat_tid_116410 = (int64_t) 0;
        int32_t num_tasks_124642;
        int64_t flat_tid_116412 = (int64_t) 0;
        struct futhark_mc_task_128432 futhark_mc_task_128432;
        
        futhark_mc_task_128432.ctx = ctx;
        futhark_mc_task_128432.free_n_112520 = n_112520;
        futhark_mc_task_128432.free_l_window_112524 = l_window_112524;
        futhark_mc_task_128432.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128432.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128432.free_i_112596 = i_112596;
        futhark_mc_task_128432.free_gtid_116409 = gtid_116409;
        futhark_mc_task_128432.free_mem_119544 = mem_119544.mem;
        futhark_mc_task_128432.free_mem_119548 = mem_119548.mem;
        futhark_mc_task_128432.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128432.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128432.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128432.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128432.free_mem_119788 = mem_119788.mem;
        futhark_mc_task_128432.free_bytes_120076 = bytes_120076;
        futhark_mc_task_128432.free_mem_120150 = mem_120150;
        futhark_mc_task_128432.free_mem_120153 = mem_120153;
        
        struct scheduler_segop futhark_mc_task_128432_task;
        
        futhark_mc_task_128432_task.args = &futhark_mc_task_128432;
        futhark_mc_task_128432_task.top_level_fn =
            futhark_mc_segmap_task_128433;
        futhark_mc_task_128432_task.name = "futhark_mc_segmap_task_128433";
        futhark_mc_task_128432_task.iterations = l_n_m_112570;
        futhark_mc_task_128432_task.task_time =
            &ctx->futhark_mc_segmap_task_128433_total_time;
        futhark_mc_task_128432_task.task_iter =
            &ctx->futhark_mc_segmap_task_128433_total_iter;
        futhark_mc_task_128432_task.sched = STATIC;
        futhark_mc_task_128432_task.nested_fn =
            futhark_mc_segmap_nested_task_128440;
        
        int futhark_mc_segmap_task_128433_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128432_task);
        
        if (futhark_mc_segmap_task_128433_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120247.mem + gtid_116409 * l_n_m_112570 * (int64_t) 4,
                mem_120150 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
        memmove(mem_120251.mem + gtid_116409 * l_n_m_112570 * (int64_t) 4,
                mem_120153 + (int64_t) 0, l_n_m_112570 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120150);
    free(mem_120153);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128429_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128429_end -
                 futhark_mc_segmap_parloop_128429_start;
        
        ctx->futhark_mc_segmap_parloop_128429_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128429_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128429_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128427(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116408 = tid;
    int num_tasks_124281 = info.nsubtasks;
    struct futhark_mc_task_128417 *futhark_mc_task_128417 =
                                  (struct futhark_mc_task_128417 *) args;
    struct futhark_context *ctx = futhark_mc_task_128417->ctx;
    uint64_t futhark_mc_segmap_nested_task_128427_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128427_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128417->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128417->free_n_112520;
    int64_t l_window_112524 = futhark_mc_task_128417->free_l_window_112524;
    int64_t t_jump_112527 = futhark_mc_task_128417->free_t_jump_112527;
    int64_t l_n_m_112570 = futhark_mc_task_128417->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128417->free_i_112596;
    int64_t bytes_119490 = futhark_mc_task_128417->free_bytes_119490;
    struct memblock mem_119544 = {.desc ="mem_119544", .mem =
                                  futhark_mc_task_128417->free_mem_119544,
                                  .size =0, .references =NULL};
    struct memblock mem_119548 = {.desc ="mem_119548", .mem =
                                  futhark_mc_task_128417->free_mem_119548,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128417->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128417->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128417->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128417->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119788 = {.desc ="mem_119788", .mem =
                                  futhark_mc_task_128417->free_mem_119788,
                                  .size =0, .references =NULL};
    int64_t bytes_120076 = futhark_mc_task_128417->free_bytes_120076;
    struct memblock mem_120247 = {.desc ="mem_120247", .mem =
                                  futhark_mc_task_128417->free_mem_120247,
                                  .size =0, .references =NULL};
    struct memblock mem_120251 = {.desc ="mem_120251", .mem =
                                  futhark_mc_task_128417->free_mem_120251,
                                  .size =0, .references =NULL};
    int64_t iter_124415;
    struct futhark_mc_segmap_parloop_struct_128428
    futhark_mc_segmap_parloop_struct_128428;
    
    futhark_mc_segmap_parloop_struct_128428.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128428.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128428.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128428.free_l_window_112524 =
        l_window_112524;
    futhark_mc_segmap_parloop_struct_128428.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128428.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128428.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128428.free_bytes_119490 = bytes_119490;
    futhark_mc_segmap_parloop_struct_128428.free_mem_119544 = mem_119544.mem;
    futhark_mc_segmap_parloop_struct_128428.free_mem_119548 = mem_119548.mem;
    futhark_mc_segmap_parloop_struct_128428.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128428.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128428.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128428.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128428.free_mem_119788 = mem_119788.mem;
    futhark_mc_segmap_parloop_struct_128428.free_bytes_120076 = bytes_120076;
    futhark_mc_segmap_parloop_struct_128428.free_mem_120247 = mem_120247.mem;
    futhark_mc_segmap_parloop_struct_128428.free_mem_120251 = mem_120251.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128429_task;
    
    futhark_mc_segmap_parloop_128429_task.name =
        "futhark_mc_segmap_parloop_128429";
    futhark_mc_segmap_parloop_128429_task.fn = futhark_mc_segmap_parloop_128429;
    futhark_mc_segmap_parloop_128429_task.args =
        &futhark_mc_segmap_parloop_struct_128428;
    futhark_mc_segmap_parloop_128429_task.iterations = iterations;
    futhark_mc_segmap_parloop_128429_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128429_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128429_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128429_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128429_task);
    
    if (futhark_mc_segmap_parloop_128429_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128429_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128429_total_end -
                 futhark_mc_segmap_parloop_128429_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128429_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128429_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128429_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128427_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128427_end -
                 futhark_mc_segmap_nested_task_128427_start;
        
        ctx->futhark_mc_segmap_nested_task_128427_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128427_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128427_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128466 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_y_113712;
    int64_t free_bytes_119421;
    char *free_ext_mem_120256;
    char *free_ext_mem_120257;
    char *free_mem_120279;
};
struct futhark_mc_segmap_parloop_struct_128468 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_y_113712;
    int64_t free_bytes_119421;
    char *free_ext_mem_120256;
    char *free_ext_mem_120257;
    char *free_mem_120279;
};
static int futhark_mc_segmap_parloop_128469(void *args, int64_t start,
                                            int64_t end, int flat_tid_116747,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128468
    *futhark_mc_segmap_parloop_struct_128468 =
    (struct futhark_mc_segmap_parloop_struct_128468 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128468->ctx;
    uint64_t futhark_mc_segmap_parloop_128469_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128469_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128468->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128468->free_n_112520;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128468->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128468->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128468->free_i_112596;
    int64_t y_113712 = futhark_mc_segmap_parloop_struct_128468->free_y_113712;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128468->free_bytes_119421;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_segmap_parloop_struct_128468->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_segmap_parloop_struct_128468->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120279 = {.desc ="mem_120279", .mem =
                                  futhark_mc_segmap_parloop_struct_128468->free_mem_120279,
                                  .size =0, .references =NULL};
    size_t mem_120263_cached_sizze_128470 = 0;
    char *mem_120263 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124848 = start;
    
    if (mem_120263_cached_sizze_128470 < (size_t) bytes_119421) {
        mem_120263 = realloc(mem_120263, bytes_119421);
        mem_120263_cached_sizze_128470 = bytes_119421;
    }
    for (; iter_124848 < end; iter_124848++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124898 = m_112519;
        int64_t gtid_116748 = iter_124848;
        int64_t remnant_124899 = iter_124848 - gtid_116748;
        
        for (int64_t i_124849 = 0; i_124849 < n_112520; i_124849++) {
            int64_t m_v_124851 = sdiv64(i_124849, l_jump_112528);
            bool cond_124852 = m_v_124851 == y_113712;
            int64_t j_124853;
            
            if (cond_124852) {
                int64_t j_t_res_124854 = sub64(m_v_124851, (int64_t) 1);
                
                j_124853 = j_t_res_124854;
            } else {
                j_124853 = m_v_124851;
            }
            
            int64_t min_arg_124855 = mul64(l_jump_112528, j_124853);
            int64_t min_res_124856 = smin64(i_112596, min_arg_124855);
            int64_t defunc_0_m_fun_arg_124857 = add64((int64_t) 1, j_124853);
            int64_t min_arg_124858 = mul64(l_jump_112528,
                                           defunc_0_m_fun_arg_124857);
            int64_t min_res_124859 = smin64(i_112596, min_arg_124858);
            int64_t i64_arg_124860 = sub64(min_res_124859, min_res_124856);
            float i64_res_124861 = sitofp_i64_f32(i64_arg_124860);
            int64_t i64_arg_124862 = sub64(i_124849, min_res_124856);
            float i64_res_124863 = sitofp_i64_f32(i64_arg_124862);
            float u_124864 = i64_res_124863 / i64_res_124861;
            float u2_124865 = u_124864 * u_124864;
            float u3_124866 = u_124864 * u2_124865;
            float x_124867 = 2.0F * u3_124866;
            float y_124868 = 3.0F * u2_124865;
            float x_124869 = x_124867 - y_124868;
            float x_124870 = 1.0F + x_124869;
            bool x_124871 = sle64((int64_t) 0, j_124853);
            bool y_124872 = slt64(j_124853, l_n_m_112570);
            bool bounds_check_124873 = x_124871 && y_124872;
            bool index_certs_124874;
            
            if (!bounds_check_124873) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_124853,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_112570, "].",
                              "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_124875 = ((float *) ext_mem_120257.mem)[gtid_116748 *
                                                            l_n_m_112570 +
                                                            j_124853];
            float x_124876 = x_124870 * y_124875;
            float x_124877 = y_124868 - x_124867;
            bool x_124878 = sle64((int64_t) 0, defunc_0_m_fun_arg_124857);
            bool y_124879 = slt64(defunc_0_m_fun_arg_124857, l_n_m_112570);
            bool bounds_check_124880 = x_124878 && y_124879;
            bool index_certs_124881;
            
            if (!bounds_check_124880) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_124857,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_112570, "].",
                              "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_124882 = ((float *) ext_mem_120257.mem)[gtid_116748 *
                                                            l_n_m_112570 +
                                                            defunc_0_m_fun_arg_124857];
            float y_124883 = x_124877 * y_124882;
            float x_124884 = x_124876 + y_124883;
            float y_124885 = 2.0F * u2_124865;
            float x_124886 = u3_124866 - y_124885;
            float x_124887 = u_124864 + x_124886;
            float y_124888 = ((float *) ext_mem_120256.mem)[gtid_116748 *
                                                            l_n_m_112570 +
                                                            j_124853];
            float x_124889 = x_124887 * y_124888;
            float y_124890 = i64_res_124861 * x_124889;
            float x_124891 = x_124884 + y_124890;
            float x_124892 = u3_124866 - u2_124865;
            float y_124893 = ((float *) ext_mem_120256.mem)[gtid_116748 *
                                                            l_n_m_112570 +
                                                            defunc_0_m_fun_arg_124857];
            float x_124894 = x_124892 * y_124893;
            float y_124895 = i64_res_124861 * x_124894;
            float defunc_0_f_res_124896 = x_124891 + y_124895;
            
            ((float *) mem_120263)[i_124849] = defunc_0_f_res_124896;
        }
        memmove(mem_120279.mem + gtid_116748 * n_112520 * (int64_t) 4,
                mem_120263 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120263);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128469_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128469_end -
                 futhark_mc_segmap_parloop_128469_start;
        
        ctx->futhark_mc_segmap_parloop_128469_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128469_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128469_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128467(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116747 = tid;
    int num_tasks_124847 = info.nsubtasks;
    struct futhark_mc_task_128466 *futhark_mc_task_128466 =
                                  (struct futhark_mc_task_128466 *) args;
    struct futhark_context *ctx = futhark_mc_task_128466->ctx;
    uint64_t futhark_mc_segmap_task_128467_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128467_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128466->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128466->free_n_112520;
    int64_t l_jump_112528 = futhark_mc_task_128466->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128466->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128466->free_i_112596;
    int64_t y_113712 = futhark_mc_task_128466->free_y_113712;
    int64_t bytes_119421 = futhark_mc_task_128466->free_bytes_119421;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_task_128466->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_task_128466->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120279 = {.desc ="mem_120279", .mem =
                                  futhark_mc_task_128466->free_mem_120279,
                                  .size =0, .references =NULL};
    int64_t iter_124848;
    struct futhark_mc_segmap_parloop_struct_128468
    futhark_mc_segmap_parloop_struct_128468;
    
    futhark_mc_segmap_parloop_struct_128468.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128468.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128468.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128468.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128468.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128468.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128468.free_y_113712 = y_113712;
    futhark_mc_segmap_parloop_struct_128468.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128468.free_ext_mem_120256 =
        ext_mem_120256.mem;
    futhark_mc_segmap_parloop_struct_128468.free_ext_mem_120257 =
        ext_mem_120257.mem;
    futhark_mc_segmap_parloop_struct_128468.free_mem_120279 = mem_120279.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128469_task;
    
    futhark_mc_segmap_parloop_128469_task.name =
        "futhark_mc_segmap_parloop_128469";
    futhark_mc_segmap_parloop_128469_task.fn = futhark_mc_segmap_parloop_128469;
    futhark_mc_segmap_parloop_128469_task.args =
        &futhark_mc_segmap_parloop_struct_128468;
    futhark_mc_segmap_parloop_128469_task.iterations = iterations;
    futhark_mc_segmap_parloop_128469_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128469_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128469_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128469_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128469_task);
    
    if (futhark_mc_segmap_parloop_128469_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128469_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128469_total_end -
                 futhark_mc_segmap_parloop_128469_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128469_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128469_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128469_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128467_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128467_end -
                 futhark_mc_segmap_task_128467_start;
        
        ctx->futhark_mc_segmap_task_128467_runs[tid]++;
        ctx->futhark_mc_segmap_task_128467_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128467_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128472 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_y_113712;
    int64_t free_bytes_119421;
    char *free_ext_mem_120256;
    char *free_ext_mem_120257;
    char *free_mem_120279;
};
struct futhark_mc_task_128475 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_y_113712;
    int64_t free_gtid_116750;
    char *free_ext_mem_120256;
    char *free_ext_mem_120257;
    char *free_mem_120260;
};
struct futhark_mc_segmap_parloop_struct_128477 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_l_jump_112528;
    int64_t free_l_n_m_112570;
    int64_t free_i_112596;
    int64_t free_y_113712;
    int64_t free_gtid_116750;
    char *free_ext_mem_120256;
    char *free_ext_mem_120257;
    char *free_mem_120260;
};
static int futhark_mc_segmap_parloop_128478(void *args, int64_t start,
                                            int64_t end, int flat_tid_116751,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128477
    *futhark_mc_segmap_parloop_struct_128477 =
    (struct futhark_mc_segmap_parloop_struct_128477 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128477->ctx;
    uint64_t futhark_mc_segmap_parloop_128478_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128478_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128477->free_n_112520;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128477->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128477->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128477->free_i_112596;
    int64_t y_113712 = futhark_mc_segmap_parloop_struct_128477->free_y_113712;
    int64_t gtid_116750 =
            futhark_mc_segmap_parloop_struct_128477->free_gtid_116750;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_segmap_parloop_struct_128477->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_segmap_parloop_struct_128477->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120260 = {.desc ="mem_120260", .mem =
                                  futhark_mc_segmap_parloop_struct_128477->free_mem_120260,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124951 = start;
    
    for (; iter_124951 < end; iter_124951++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124953 = n_112520;
        int64_t gtid_116752 = iter_124951;
        int64_t remnant_124954 = iter_124951 - gtid_116752;
        int64_t m_v_124902 = sdiv64(gtid_116752, l_jump_112528);
        bool cond_124903 = m_v_124902 == y_113712;
        int64_t j_124904;
        
        if (cond_124903) {
            int64_t j_t_res_124952 = sub64(m_v_124902, (int64_t) 1);
            
            j_124904 = j_t_res_124952;
        } else {
            j_124904 = m_v_124902;
        }
        
        int64_t min_arg_124906 = mul64(l_jump_112528, j_124904);
        int64_t min_res_124907 = smin64(i_112596, min_arg_124906);
        int64_t defunc_0_m_fun_arg_124908 = add64((int64_t) 1, j_124904);
        int64_t min_arg_124909 = mul64(l_jump_112528,
                                       defunc_0_m_fun_arg_124908);
        int64_t min_res_124910 = smin64(i_112596, min_arg_124909);
        int64_t i64_arg_124911 = sub64(min_res_124910, min_res_124907);
        float i64_res_124912 = sitofp_i64_f32(i64_arg_124911);
        int64_t i64_arg_124913 = sub64(gtid_116752, min_res_124907);
        float i64_res_124914 = sitofp_i64_f32(i64_arg_124913);
        float u_124915 = i64_res_124914 / i64_res_124912;
        float u2_124916 = u_124915 * u_124915;
        float u3_124917 = u_124915 * u2_124916;
        float x_124918 = 2.0F * u3_124917;
        float y_124919 = 3.0F * u2_124916;
        float x_124920 = x_124918 - y_124919;
        float x_124921 = 1.0F + x_124920;
        bool x_124922 = sle64((int64_t) 0, j_124904);
        bool y_124923 = slt64(j_124904, l_n_m_112570);
        bool bounds_check_124924 = x_124922 && y_124923;
        bool index_certs_124925;
        
        if (!bounds_check_124924) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_124904,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_112570, "].",
                                   "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_124926 = ((float *) ext_mem_120257.mem)[gtid_116750 *
                                                        l_n_m_112570 +
                                                        j_124904];
        float x_124927 = x_124921 * y_124926;
        float x_124928 = y_124919 - x_124918;
        bool x_124929 = sle64((int64_t) 0, defunc_0_m_fun_arg_124908);
        bool y_124930 = slt64(defunc_0_m_fun_arg_124908, l_n_m_112570);
        bool bounds_check_124931 = x_124929 && y_124930;
        bool index_certs_124932;
        
        if (!bounds_check_124931) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_124908,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_112570, "].",
                                   "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_124933 = ((float *) ext_mem_120257.mem)[gtid_116750 *
                                                        l_n_m_112570 +
                                                        defunc_0_m_fun_arg_124908];
        float y_124934 = x_124928 * y_124933;
        float x_124935 = x_124927 + y_124934;
        float y_124936 = 2.0F * u2_124916;
        float x_124937 = u3_124917 - y_124936;
        float x_124938 = u_124915 + x_124937;
        float y_124939 = ((float *) ext_mem_120256.mem)[gtid_116750 *
                                                        l_n_m_112570 +
                                                        j_124904];
        float x_124940 = x_124938 * y_124939;
        float y_124941 = i64_res_124912 * x_124940;
        float x_124942 = x_124935 + y_124941;
        float x_124943 = u3_124917 - u2_124916;
        float y_124944 = ((float *) ext_mem_120256.mem)[gtid_116750 *
                                                        l_n_m_112570 +
                                                        defunc_0_m_fun_arg_124908];
        float x_124945 = x_124943 * y_124944;
        float y_124946 = i64_res_124912 * x_124945;
        float defunc_0_f_res_124947 = x_124942 + y_124946;
        
        ((float *) mem_120260.mem)[gtid_116752] = defunc_0_f_res_124947;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128478_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128478_end -
                 futhark_mc_segmap_parloop_128478_start;
        
        ctx->futhark_mc_segmap_parloop_128478_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128478_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128478_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128476(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116751 = tid;
    int num_tasks_124950 = info.nsubtasks;
    struct futhark_mc_task_128475 *futhark_mc_task_128475 =
                                  (struct futhark_mc_task_128475 *) args;
    struct futhark_context *ctx = futhark_mc_task_128475->ctx;
    uint64_t futhark_mc_segmap_task_128476_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128476_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128475->free_n_112520;
    int64_t l_jump_112528 = futhark_mc_task_128475->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128475->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128475->free_i_112596;
    int64_t y_113712 = futhark_mc_task_128475->free_y_113712;
    int64_t gtid_116750 = futhark_mc_task_128475->free_gtid_116750;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_task_128475->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_task_128475->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120260 = {.desc ="mem_120260", .mem =
                                  futhark_mc_task_128475->free_mem_120260,
                                  .size =0, .references =NULL};
    int64_t iter_124951;
    struct futhark_mc_segmap_parloop_struct_128477
    futhark_mc_segmap_parloop_struct_128477;
    
    futhark_mc_segmap_parloop_struct_128477.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128477.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128477.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128477.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128477.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128477.free_y_113712 = y_113712;
    futhark_mc_segmap_parloop_struct_128477.free_gtid_116750 = gtid_116750;
    futhark_mc_segmap_parloop_struct_128477.free_ext_mem_120256 =
        ext_mem_120256.mem;
    futhark_mc_segmap_parloop_struct_128477.free_ext_mem_120257 =
        ext_mem_120257.mem;
    futhark_mc_segmap_parloop_struct_128477.free_mem_120260 = mem_120260.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128478_task;
    
    futhark_mc_segmap_parloop_128478_task.name =
        "futhark_mc_segmap_parloop_128478";
    futhark_mc_segmap_parloop_128478_task.fn = futhark_mc_segmap_parloop_128478;
    futhark_mc_segmap_parloop_128478_task.args =
        &futhark_mc_segmap_parloop_struct_128477;
    futhark_mc_segmap_parloop_128478_task.iterations = iterations;
    futhark_mc_segmap_parloop_128478_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128478_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128478_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128478_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128478_task);
    
    if (futhark_mc_segmap_parloop_128478_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128478_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128478_total_end -
                 futhark_mc_segmap_parloop_128478_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128476_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128476_end -
                 futhark_mc_segmap_task_128476_start;
        
        ctx->futhark_mc_segmap_task_128476_runs[tid]++;
        ctx->futhark_mc_segmap_task_128476_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128476_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128473(void *args, int64_t start,
                                            int64_t end, int flat_tid_116749,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128472
    *futhark_mc_segmap_parloop_struct_128472 =
    (struct futhark_mc_segmap_parloop_struct_128472 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128472->ctx;
    uint64_t futhark_mc_segmap_parloop_128473_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128473_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128472->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128472->free_n_112520;
    int64_t l_jump_112528 =
            futhark_mc_segmap_parloop_struct_128472->free_l_jump_112528;
    int64_t l_n_m_112570 =
            futhark_mc_segmap_parloop_struct_128472->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128472->free_i_112596;
    int64_t y_113712 = futhark_mc_segmap_parloop_struct_128472->free_y_113712;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128472->free_bytes_119421;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_segmap_parloop_struct_128472->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_segmap_parloop_struct_128472->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120279 = {.desc ="mem_120279", .mem =
                                  futhark_mc_segmap_parloop_struct_128472->free_mem_120279,
                                  .size =0, .references =NULL};
    size_t mem_120260_cached_sizze_128474 = 0;
    char *mem_120260 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124901 = start;
    
    if (mem_120260_cached_sizze_128474 < (size_t) bytes_119421) {
        mem_120260 = realloc(mem_120260, bytes_119421);
        mem_120260_cached_sizze_128474 = bytes_119421;
    }
    for (; iter_124901 < end; iter_124901++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124948 = m_112519;
        int64_t gtid_116750 = iter_124901;
        int64_t remnant_124949 = iter_124901 - gtid_116750;
        int64_t flat_tid_116751 = (int64_t) 0;
        int32_t num_tasks_124950;
        struct futhark_mc_task_128475 futhark_mc_task_128475;
        
        futhark_mc_task_128475.ctx = ctx;
        futhark_mc_task_128475.free_n_112520 = n_112520;
        futhark_mc_task_128475.free_l_jump_112528 = l_jump_112528;
        futhark_mc_task_128475.free_l_n_m_112570 = l_n_m_112570;
        futhark_mc_task_128475.free_i_112596 = i_112596;
        futhark_mc_task_128475.free_y_113712 = y_113712;
        futhark_mc_task_128475.free_gtid_116750 = gtid_116750;
        futhark_mc_task_128475.free_ext_mem_120256 = ext_mem_120256.mem;
        futhark_mc_task_128475.free_ext_mem_120257 = ext_mem_120257.mem;
        futhark_mc_task_128475.free_mem_120260 = mem_120260;
        
        struct scheduler_segop futhark_mc_task_128475_task;
        
        futhark_mc_task_128475_task.args = &futhark_mc_task_128475;
        futhark_mc_task_128475_task.top_level_fn =
            futhark_mc_segmap_task_128476;
        futhark_mc_task_128475_task.name = "futhark_mc_segmap_task_128476";
        futhark_mc_task_128475_task.iterations = n_112520;
        futhark_mc_task_128475_task.task_time =
            &ctx->futhark_mc_segmap_task_128476_total_time;
        futhark_mc_task_128475_task.task_iter =
            &ctx->futhark_mc_segmap_task_128476_total_iter;
        futhark_mc_task_128475_task.sched = STATIC;
        futhark_mc_task_128475_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128476_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128475_task);
        
        if (futhark_mc_segmap_task_128476_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120279.mem + gtid_116750 * n_112520 * (int64_t) 4,
                mem_120260 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120260);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128473_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128473_end -
                 futhark_mc_segmap_parloop_128473_start;
        
        ctx->futhark_mc_segmap_parloop_128473_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128473_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128473_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128471(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116749 = tid;
    int num_tasks_124847 = info.nsubtasks;
    struct futhark_mc_task_128466 *futhark_mc_task_128466 =
                                  (struct futhark_mc_task_128466 *) args;
    struct futhark_context *ctx = futhark_mc_task_128466->ctx;
    uint64_t futhark_mc_segmap_nested_task_128471_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128471_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128466->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128466->free_n_112520;
    int64_t l_jump_112528 = futhark_mc_task_128466->free_l_jump_112528;
    int64_t l_n_m_112570 = futhark_mc_task_128466->free_l_n_m_112570;
    int64_t i_112596 = futhark_mc_task_128466->free_i_112596;
    int64_t y_113712 = futhark_mc_task_128466->free_y_113712;
    int64_t bytes_119421 = futhark_mc_task_128466->free_bytes_119421;
    struct memblock ext_mem_120256 = {.desc ="ext_mem_120256", .mem =
                                      futhark_mc_task_128466->free_ext_mem_120256,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120257 = {.desc ="ext_mem_120257", .mem =
                                      futhark_mc_task_128466->free_ext_mem_120257,
                                      .size =0, .references =NULL};
    struct memblock mem_120279 = {.desc ="mem_120279", .mem =
                                  futhark_mc_task_128466->free_mem_120279,
                                  .size =0, .references =NULL};
    int64_t iter_124901;
    struct futhark_mc_segmap_parloop_struct_128472
    futhark_mc_segmap_parloop_struct_128472;
    
    futhark_mc_segmap_parloop_struct_128472.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128472.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128472.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128472.free_l_jump_112528 = l_jump_112528;
    futhark_mc_segmap_parloop_struct_128472.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_segmap_parloop_struct_128472.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128472.free_y_113712 = y_113712;
    futhark_mc_segmap_parloop_struct_128472.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128472.free_ext_mem_120256 =
        ext_mem_120256.mem;
    futhark_mc_segmap_parloop_struct_128472.free_ext_mem_120257 =
        ext_mem_120257.mem;
    futhark_mc_segmap_parloop_struct_128472.free_mem_120279 = mem_120279.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128473_task;
    
    futhark_mc_segmap_parloop_128473_task.name =
        "futhark_mc_segmap_parloop_128473";
    futhark_mc_segmap_parloop_128473_task.fn = futhark_mc_segmap_parloop_128473;
    futhark_mc_segmap_parloop_128473_task.args =
        &futhark_mc_segmap_parloop_struct_128472;
    futhark_mc_segmap_parloop_128473_task.iterations = iterations;
    futhark_mc_segmap_parloop_128473_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128473_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128473_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128473_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128473_task);
    
    if (futhark_mc_segmap_parloop_128473_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128473_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128473_total_end -
                 futhark_mc_segmap_parloop_128473_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128473_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128473_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128473_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128471_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128471_end -
                 futhark_mc_segmap_nested_task_128471_start;
        
        ctx->futhark_mc_segmap_nested_task_128471_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128471_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128471_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128479 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_Y_mem_119377;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119730;
    char *free_ext_mem_120280;
    int64_t free_ext_120281;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120365;
};
struct futhark_mc_segmap_parloop_struct_128481 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_Y_mem_119377;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119730;
    char *free_ext_mem_120280;
    int64_t free_ext_120281;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120365;
};
static int futhark_mc_segmap_parloop_128482(void *args, int64_t start,
                                            int64_t end, int flat_tid_116803,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128481
    *futhark_mc_segmap_parloop_struct_128481 =
    (struct futhark_mc_segmap_parloop_struct_128481 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128481->ctx;
    uint64_t futhark_mc_segmap_parloop_128482_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128482_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128481->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128481->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128481->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128481->free_C_len_112568;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128481->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128481->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128481->free_bytes_119421;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128481->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128481->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128481->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128481->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128481->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_segmap_parloop_struct_128481->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 =
            futhark_mc_segmap_parloop_struct_128481->free_ext_120281;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128481->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128481->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120365 = {.desc ="mem_120365", .mem =
                                  futhark_mc_segmap_parloop_struct_128481->free_mem_120365,
                                  .size =0, .references =NULL};
    size_t mem_120296_cached_sizze_128483 = 0;
    char *mem_120296 = NULL;
    size_t mem_120299_cached_sizze_128484 = 0;
    char *mem_120299 = NULL;
    size_t mem_120326_cached_sizze_128485 = 0;
    char *mem_120326 = NULL;
    size_t mem_120329_cached_sizze_128486 = 0;
    char *mem_120329 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124956 = start;
    
    if (mem_120296_cached_sizze_128483 < (size_t) bytes_119421) {
        mem_120296 = realloc(mem_120296, bytes_119421);
        mem_120296_cached_sizze_128483 = bytes_119421;
    }
    if (mem_120299_cached_sizze_128484 < (size_t) bytes_119421) {
        mem_120299 = realloc(mem_120299, bytes_119421);
        mem_120299_cached_sizze_128484 = bytes_119421;
    }
    if (mem_120326_cached_sizze_128485 < (size_t) bytes_119421) {
        mem_120326 = realloc(mem_120326, bytes_119421);
        mem_120326_cached_sizze_128485 = bytes_119421;
    }
    if (mem_120329_cached_sizze_128486 < (size_t) bytes_119421) {
        mem_120329 = realloc(mem_120329, bytes_119421);
        mem_120329_cached_sizze_128486 = bytes_119421;
    }
    for (; iter_124956 < end; iter_124956++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124985 = m_112519;
        int64_t gtid_116804 = iter_124956;
        int64_t remnant_124986 = iter_124956 - gtid_116804;
        
        for (int64_t i_124957 = 0; i_124957 < n_112520; i_124957++) {
            int64_t slice_124960 = n_p_112522 + i_124957;
            float x_124961 = ((float *) mem_119730.mem)[gtid_116804 *
                                                        C_len_112568 +
                                                        slice_124960];
            float x_124962 = ((float *) ext_mem_120280.mem)[gtid_116804 *
                                                            ext_120281 +
                                                            i_124957];
            float x_124963 = ((float *) Y_mem_119377.mem)[gtid_116804 *
                                                          n_112520 + i_124957];
            float defunc_1_f_res_124964 = x_124961 - x_124962;
            float defunc_1_f_res_124965 = x_124963 - defunc_1_f_res_124964;
            
            ((float *) mem_120296)[i_124957] = defunc_1_f_res_124965;
            ((float *) mem_120299)[i_124957] = defunc_1_f_res_124964;
        }
        for (int64_t i_124968 = 0; i_124968 < n_112520; i_124968++) {
            int64_t x_124971 = ((int64_t *) mem_119417.mem)[gtid_116804 *
                                                            n_112520 +
                                                            i_124968];
            bool cond_124972 = sle64((int64_t) 0, x_124971);
            float defunc_0_f_res_124973;
            
            if (cond_124972) {
                bool y_124974 = slt64(x_124971, n_112520);
                bool bounds_check_124975 = cond_124972 && y_124974;
                bool index_certs_124976;
                
                if (!bounds_check_124975) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_124971,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_124977 =
                      ((float *) mem_120296)[x_124971];
                
                defunc_0_f_res_124973 = defunc_0_f_res_t_res_124977;
            } else {
                defunc_0_f_res_124973 = 0.0F;
            }
            
            float defunc_0_f_res_124978;
            
            if (cond_124972) {
                bool y_124979 = slt64(x_124971, n_112520);
                bool bounds_check_124980 = cond_124972 && y_124979;
                bool index_certs_124981;
                
                if (!bounds_check_124980) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_124971,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_124982 =
                      ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                       (gtid_116804 *
                                                        ctx_param_ext_119638 +
                                                        x_124971 *
                                                        ctx_param_ext_119640)];
                
                defunc_0_f_res_124978 = defunc_0_f_res_t_res_124982;
            } else {
                defunc_0_f_res_124978 = 0.0F;
            }
            ((float *) mem_120326)[i_124968] = defunc_0_f_res_124978;
            ((float *) mem_120329)[i_124968] = defunc_0_f_res_124973;
        }
        memmove(mem_120357.mem + gtid_116804 * n_112520 * (int64_t) 4,
                mem_120329 + (int64_t) 0, n_112520 * (int64_t) 4);
        memmove(mem_120361.mem + gtid_116804 * n_112520 * (int64_t) 4,
                mem_120326 + (int64_t) 0, n_112520 * (int64_t) 4);
        memmove(mem_120365.mem + gtid_116804 * n_112520 * (int64_t) 4,
                mem_120299 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120296);
    free(mem_120299);
    free(mem_120326);
    free(mem_120329);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128482_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128482_end -
                 futhark_mc_segmap_parloop_128482_start;
        
        ctx->futhark_mc_segmap_parloop_128482_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128482_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128482_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128480(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116803 = tid;
    int num_tasks_124955 = info.nsubtasks;
    struct futhark_mc_task_128479 *futhark_mc_task_128479 =
                                  (struct futhark_mc_task_128479 *) args;
    struct futhark_context *ctx = futhark_mc_task_128479->ctx;
    uint64_t futhark_mc_segmap_task_128480_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128480_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128479->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128479->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128479->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128479->free_C_len_112568;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128479->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128479->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128479->free_bytes_119421;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128479->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128479->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128479->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128479->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128479->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_task_128479->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 = futhark_mc_task_128479->free_ext_120281;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128479->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128479->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120365 = {.desc ="mem_120365", .mem =
                                  futhark_mc_task_128479->free_mem_120365,
                                  .size =0, .references =NULL};
    int64_t iter_124956;
    struct futhark_mc_segmap_parloop_struct_128481
    futhark_mc_segmap_parloop_struct_128481;
    
    futhark_mc_segmap_parloop_struct_128481.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128481.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128481.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128481.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128481.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128481.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128481.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128481.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128481.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128481.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128481.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128481.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128481.free_mem_119730 = mem_119730.mem;
    futhark_mc_segmap_parloop_struct_128481.free_ext_mem_120280 =
        ext_mem_120280.mem;
    futhark_mc_segmap_parloop_struct_128481.free_ext_120281 = ext_120281;
    futhark_mc_segmap_parloop_struct_128481.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128481.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128481.free_mem_120365 = mem_120365.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128482_task;
    
    futhark_mc_segmap_parloop_128482_task.name =
        "futhark_mc_segmap_parloop_128482";
    futhark_mc_segmap_parloop_128482_task.fn = futhark_mc_segmap_parloop_128482;
    futhark_mc_segmap_parloop_128482_task.args =
        &futhark_mc_segmap_parloop_struct_128481;
    futhark_mc_segmap_parloop_128482_task.iterations = iterations;
    futhark_mc_segmap_parloop_128482_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128482_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128482_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128482_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128482_task);
    
    if (futhark_mc_segmap_parloop_128482_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128482_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128482_total_end -
                 futhark_mc_segmap_parloop_128482_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128482_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128482_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128482_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128480_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128480_end -
                 futhark_mc_segmap_task_128480_start;
        
        ctx->futhark_mc_segmap_task_128480_runs[tid]++;
        ctx->futhark_mc_segmap_task_128480_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128480_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128488 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    char *free_Y_mem_119377;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_119730;
    char *free_ext_mem_120280;
    int64_t free_ext_120281;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120365;
};
struct futhark_mc_task_128494 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    int64_t free_gtid_116806;
    char *free_Y_mem_119377;
    char *free_mem_119730;
    char *free_ext_mem_120280;
    int64_t free_ext_120281;
    char *free_mem_120284;
    char *free_mem_120287;
};
struct futhark_mc_segmap_parloop_struct_128496 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_n_p_112522;
    int64_t free_C_len_112568;
    int64_t free_gtid_116806;
    char *free_Y_mem_119377;
    char *free_mem_119730;
    char *free_ext_mem_120280;
    int64_t free_ext_120281;
    char *free_mem_120284;
    char *free_mem_120287;
};
static int futhark_mc_segmap_parloop_128497(void *args, int64_t start,
                                            int64_t end, int flat_tid_116807,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128496
    *futhark_mc_segmap_parloop_struct_128496 =
    (struct futhark_mc_segmap_parloop_struct_128496 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128496->ctx;
    uint64_t futhark_mc_segmap_parloop_128497_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128497_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128496->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128496->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128496->free_C_len_112568;
    int64_t gtid_116806 =
            futhark_mc_segmap_parloop_struct_128496->free_gtid_116806;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128496->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128496->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_segmap_parloop_struct_128496->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 =
            futhark_mc_segmap_parloop_struct_128496->free_ext_120281;
    struct memblock mem_120284 = {.desc ="mem_120284", .mem =
                                  futhark_mc_segmap_parloop_struct_128496->free_mem_120284,
                                  .size =0, .references =NULL};
    struct memblock mem_120287 = {.desc ="mem_120287", .mem =
                                  futhark_mc_segmap_parloop_struct_128496->free_mem_120287,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125013 = start;
    
    for (; iter_125013 < end; iter_125013++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125014 = n_112520;
        int64_t gtid_116808 = iter_125013;
        int64_t remnant_125015 = iter_125013 - gtid_116808;
        int64_t slice_124992 = n_p_112522 + gtid_116808;
        float x_124993 = ((float *) mem_119730.mem)[gtid_116806 * C_len_112568 +
                                                    slice_124992];
        float x_124994 = ((float *) ext_mem_120280.mem)[gtid_116806 *
                                                        ext_120281 +
                                                        gtid_116808];
        float x_124995 = ((float *) Y_mem_119377.mem)[gtid_116806 * n_112520 +
                                                      gtid_116808];
        float defunc_1_f_res_124996 = x_124993 - x_124994;
        float defunc_1_f_res_124997 = x_124995 - defunc_1_f_res_124996;
        
        ((float *) mem_120284.mem)[gtid_116808] = defunc_1_f_res_124997;
        ((float *) mem_120287.mem)[gtid_116808] = defunc_1_f_res_124996;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128497_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128497_end -
                 futhark_mc_segmap_parloop_128497_start;
        
        ctx->futhark_mc_segmap_parloop_128497_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128497_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128497_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128495(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116807 = tid;
    int num_tasks_125012 = info.nsubtasks;
    struct futhark_mc_task_128494 *futhark_mc_task_128494 =
                                  (struct futhark_mc_task_128494 *) args;
    struct futhark_context *ctx = futhark_mc_task_128494->ctx;
    uint64_t futhark_mc_segmap_task_128495_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128495_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128494->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128494->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128494->free_C_len_112568;
    int64_t gtid_116806 = futhark_mc_task_128494->free_gtid_116806;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128494->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128494->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_task_128494->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 = futhark_mc_task_128494->free_ext_120281;
    struct memblock mem_120284 = {.desc ="mem_120284", .mem =
                                  futhark_mc_task_128494->free_mem_120284,
                                  .size =0, .references =NULL};
    struct memblock mem_120287 = {.desc ="mem_120287", .mem =
                                  futhark_mc_task_128494->free_mem_120287,
                                  .size =0, .references =NULL};
    int64_t iter_125013;
    struct futhark_mc_segmap_parloop_struct_128496
    futhark_mc_segmap_parloop_struct_128496;
    
    futhark_mc_segmap_parloop_struct_128496.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128496.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128496.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128496.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128496.free_gtid_116806 = gtid_116806;
    futhark_mc_segmap_parloop_struct_128496.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128496.free_mem_119730 = mem_119730.mem;
    futhark_mc_segmap_parloop_struct_128496.free_ext_mem_120280 =
        ext_mem_120280.mem;
    futhark_mc_segmap_parloop_struct_128496.free_ext_120281 = ext_120281;
    futhark_mc_segmap_parloop_struct_128496.free_mem_120284 = mem_120284.mem;
    futhark_mc_segmap_parloop_struct_128496.free_mem_120287 = mem_120287.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128497_task;
    
    futhark_mc_segmap_parloop_128497_task.name =
        "futhark_mc_segmap_parloop_128497";
    futhark_mc_segmap_parloop_128497_task.fn = futhark_mc_segmap_parloop_128497;
    futhark_mc_segmap_parloop_128497_task.args =
        &futhark_mc_segmap_parloop_struct_128496;
    futhark_mc_segmap_parloop_128497_task.iterations = iterations;
    futhark_mc_segmap_parloop_128497_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128497_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128497_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128497_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128497_task);
    
    if (futhark_mc_segmap_parloop_128497_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128497_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128497_total_end -
                 futhark_mc_segmap_parloop_128497_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128497_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128497_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128497_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128495_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128495_end -
                 futhark_mc_segmap_task_128495_start;
        
        ctx->futhark_mc_segmap_task_128495_runs[tid]++;
        ctx->futhark_mc_segmap_task_128495_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128495_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128498 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116806;
    char *free_mem_119417;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_120284;
    char *free_mem_120290;
    char *free_mem_120293;
};
struct futhark_mc_segmap_parloop_struct_128500 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116806;
    char *free_mem_119417;
    int64_t free_ctx_param_ext_119637;
    int64_t free_ctx_param_ext_119638;
    int64_t free_ctx_param_ext_119640;
    char *free_mem_param_119642;
    char *free_mem_120284;
    char *free_mem_120290;
    char *free_mem_120293;
};
static int futhark_mc_segmap_parloop_128501(void *args, int64_t start,
                                            int64_t end, int flat_tid_116809,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128500
    *futhark_mc_segmap_parloop_struct_128500 =
    (struct futhark_mc_segmap_parloop_struct_128500 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128500->ctx;
    uint64_t futhark_mc_segmap_parloop_128501_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128501_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128500->free_n_112520;
    int64_t gtid_116806 =
            futhark_mc_segmap_parloop_struct_128500->free_gtid_116806;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128500->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128500->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128500->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128500->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128500->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_120284 = {.desc ="mem_120284", .mem =
                                  futhark_mc_segmap_parloop_struct_128500->free_mem_120284,
                                  .size =0, .references =NULL};
    struct memblock mem_120290 = {.desc ="mem_120290", .mem =
                                  futhark_mc_segmap_parloop_struct_128500->free_mem_120290,
                                  .size =0, .references =NULL};
    struct memblock mem_120293 = {.desc ="mem_120293", .mem =
                                  futhark_mc_segmap_parloop_struct_128500->free_mem_120293,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125017 = start;
    
    for (; iter_125017 < end; iter_125017++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125026 = n_112520;
        int64_t gtid_116810 = iter_125017;
        int64_t remnant_125027 = iter_125017 - gtid_116810;
        int64_t x_124998 = ((int64_t *) mem_119417.mem)[gtid_116806 * n_112520 +
                                                        gtid_116810];
        bool cond_124999 = sle64((int64_t) 0, x_124998);
        float defunc_0_f_res_125000;
        
        if (cond_124999) {
            bool y_125018 = slt64(x_124998, n_112520);
            bool bounds_check_125019 = cond_124999 && y_125018;
            bool index_certs_125020;
            
            if (!bounds_check_125019) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_124998,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125021 =
                  ((float *) mem_120284.mem)[x_124998];
            
            defunc_0_f_res_125000 = defunc_0_f_res_t_res_125021;
        } else {
            defunc_0_f_res_125000 = 0.0F;
        }
        
        float defunc_0_f_res_125005;
        
        if (cond_124999) {
            bool y_125022 = slt64(x_124998, n_112520);
            bool bounds_check_125023 = cond_124999 && y_125022;
            bool index_certs_125024;
            
            if (!bounds_check_125023) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_124998,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125025 =
                  ((float *) mem_param_119642.mem)[ctx_param_ext_119637 +
                                                   (gtid_116806 *
                                                    ctx_param_ext_119638 +
                                                    x_124998 *
                                                    ctx_param_ext_119640)];
            
            defunc_0_f_res_125005 = defunc_0_f_res_t_res_125025;
        } else {
            defunc_0_f_res_125005 = 0.0F;
        }
        ((float *) mem_120290.mem)[gtid_116810] = defunc_0_f_res_125005;
        ((float *) mem_120293.mem)[gtid_116810] = defunc_0_f_res_125000;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128501_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128501_end -
                 futhark_mc_segmap_parloop_128501_start;
        
        ctx->futhark_mc_segmap_parloop_128501_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128501_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128501_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128499(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116809 = tid;
    int num_tasks_125016 = info.nsubtasks;
    struct futhark_mc_task_128498 *futhark_mc_task_128498 =
                                  (struct futhark_mc_task_128498 *) args;
    struct futhark_context *ctx = futhark_mc_task_128498->ctx;
    uint64_t futhark_mc_segmap_task_128499_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128499_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128498->free_n_112520;
    int64_t gtid_116806 = futhark_mc_task_128498->free_gtid_116806;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128498->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128498->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128498->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128498->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128498->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_120284 = {.desc ="mem_120284", .mem =
                                  futhark_mc_task_128498->free_mem_120284,
                                  .size =0, .references =NULL};
    struct memblock mem_120290 = {.desc ="mem_120290", .mem =
                                  futhark_mc_task_128498->free_mem_120290,
                                  .size =0, .references =NULL};
    struct memblock mem_120293 = {.desc ="mem_120293", .mem =
                                  futhark_mc_task_128498->free_mem_120293,
                                  .size =0, .references =NULL};
    int64_t iter_125017;
    struct futhark_mc_segmap_parloop_struct_128500
    futhark_mc_segmap_parloop_struct_128500;
    
    futhark_mc_segmap_parloop_struct_128500.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128500.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128500.free_gtid_116806 = gtid_116806;
    futhark_mc_segmap_parloop_struct_128500.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128500.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128500.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128500.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128500.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128500.free_mem_120284 = mem_120284.mem;
    futhark_mc_segmap_parloop_struct_128500.free_mem_120290 = mem_120290.mem;
    futhark_mc_segmap_parloop_struct_128500.free_mem_120293 = mem_120293.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128501_task;
    
    futhark_mc_segmap_parloop_128501_task.name =
        "futhark_mc_segmap_parloop_128501";
    futhark_mc_segmap_parloop_128501_task.fn = futhark_mc_segmap_parloop_128501;
    futhark_mc_segmap_parloop_128501_task.args =
        &futhark_mc_segmap_parloop_struct_128500;
    futhark_mc_segmap_parloop_128501_task.iterations = iterations;
    futhark_mc_segmap_parloop_128501_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128501_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128501_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128501_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128501_task);
    
    if (futhark_mc_segmap_parloop_128501_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128501_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128501_total_end -
                 futhark_mc_segmap_parloop_128501_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128501_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128501_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128501_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128499_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128499_end -
                 futhark_mc_segmap_task_128499_start;
        
        ctx->futhark_mc_segmap_task_128499_runs[tid]++;
        ctx->futhark_mc_segmap_task_128499_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128499_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128489(void *args, int64_t start,
                                            int64_t end, int flat_tid_116805,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128488
    *futhark_mc_segmap_parloop_struct_128488 =
    (struct futhark_mc_segmap_parloop_struct_128488 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128488->ctx;
    uint64_t futhark_mc_segmap_parloop_128489_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128489_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128488->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128488->free_n_112520;
    int64_t n_p_112522 =
            futhark_mc_segmap_parloop_struct_128488->free_n_p_112522;
    int64_t C_len_112568 =
            futhark_mc_segmap_parloop_struct_128488->free_C_len_112568;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128488->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128488->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128488->free_bytes_119421;
    int64_t ctx_param_ext_119637 =
            futhark_mc_segmap_parloop_struct_128488->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_segmap_parloop_struct_128488->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_segmap_parloop_struct_128488->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_segmap_parloop_struct_128488->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_segmap_parloop_struct_128488->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_segmap_parloop_struct_128488->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 =
            futhark_mc_segmap_parloop_struct_128488->free_ext_120281;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128488->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128488->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120365 = {.desc ="mem_120365", .mem =
                                  futhark_mc_segmap_parloop_struct_128488->free_mem_120365,
                                  .size =0, .references =NULL};
    size_t mem_120284_cached_sizze_128490 = 0;
    char *mem_120284 = NULL;
    size_t mem_120287_cached_sizze_128491 = 0;
    char *mem_120287 = NULL;
    size_t mem_120290_cached_sizze_128492 = 0;
    char *mem_120290 = NULL;
    size_t mem_120293_cached_sizze_128493 = 0;
    char *mem_120293 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124991 = start;
    
    if (mem_120284_cached_sizze_128490 < (size_t) bytes_119421) {
        mem_120284 = realloc(mem_120284, bytes_119421);
        mem_120284_cached_sizze_128490 = bytes_119421;
    }
    if (mem_120287_cached_sizze_128491 < (size_t) bytes_119421) {
        mem_120287 = realloc(mem_120287, bytes_119421);
        mem_120287_cached_sizze_128491 = bytes_119421;
    }
    if (mem_120290_cached_sizze_128492 < (size_t) bytes_119421) {
        mem_120290 = realloc(mem_120290, bytes_119421);
        mem_120290_cached_sizze_128492 = bytes_119421;
    }
    if (mem_120293_cached_sizze_128493 < (size_t) bytes_119421) {
        mem_120293 = realloc(mem_120293, bytes_119421);
        mem_120293_cached_sizze_128493 = bytes_119421;
    }
    for (; iter_124991 < end; iter_124991++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125010 = m_112519;
        int64_t gtid_116806 = iter_124991;
        int64_t remnant_125011 = iter_124991 - gtid_116806;
        int64_t flat_tid_116807 = (int64_t) 0;
        int32_t num_tasks_125012;
        struct futhark_mc_task_128494 futhark_mc_task_128494;
        
        futhark_mc_task_128494.ctx = ctx;
        futhark_mc_task_128494.free_n_112520 = n_112520;
        futhark_mc_task_128494.free_n_p_112522 = n_p_112522;
        futhark_mc_task_128494.free_C_len_112568 = C_len_112568;
        futhark_mc_task_128494.free_gtid_116806 = gtid_116806;
        futhark_mc_task_128494.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128494.free_mem_119730 = mem_119730.mem;
        futhark_mc_task_128494.free_ext_mem_120280 = ext_mem_120280.mem;
        futhark_mc_task_128494.free_ext_120281 = ext_120281;
        futhark_mc_task_128494.free_mem_120284 = mem_120284;
        futhark_mc_task_128494.free_mem_120287 = mem_120287;
        
        struct scheduler_segop futhark_mc_task_128494_task;
        
        futhark_mc_task_128494_task.args = &futhark_mc_task_128494;
        futhark_mc_task_128494_task.top_level_fn =
            futhark_mc_segmap_task_128495;
        futhark_mc_task_128494_task.name = "futhark_mc_segmap_task_128495";
        futhark_mc_task_128494_task.iterations = n_112520;
        futhark_mc_task_128494_task.task_time =
            &ctx->futhark_mc_segmap_task_128495_total_time;
        futhark_mc_task_128494_task.task_iter =
            &ctx->futhark_mc_segmap_task_128495_total_iter;
        futhark_mc_task_128494_task.sched = STATIC;
        futhark_mc_task_128494_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128495_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128494_task);
        
        if (futhark_mc_segmap_task_128495_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_116809 = (int64_t) 0;
        int32_t num_tasks_125016;
        struct futhark_mc_task_128498 futhark_mc_task_128498;
        
        futhark_mc_task_128498.ctx = ctx;
        futhark_mc_task_128498.free_n_112520 = n_112520;
        futhark_mc_task_128498.free_gtid_116806 = gtid_116806;
        futhark_mc_task_128498.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128498.free_ctx_param_ext_119637 = ctx_param_ext_119637;
        futhark_mc_task_128498.free_ctx_param_ext_119638 = ctx_param_ext_119638;
        futhark_mc_task_128498.free_ctx_param_ext_119640 = ctx_param_ext_119640;
        futhark_mc_task_128498.free_mem_param_119642 = mem_param_119642.mem;
        futhark_mc_task_128498.free_mem_120284 = mem_120284;
        futhark_mc_task_128498.free_mem_120290 = mem_120290;
        futhark_mc_task_128498.free_mem_120293 = mem_120293;
        
        struct scheduler_segop futhark_mc_task_128498_task;
        
        futhark_mc_task_128498_task.args = &futhark_mc_task_128498;
        futhark_mc_task_128498_task.top_level_fn =
            futhark_mc_segmap_task_128499;
        futhark_mc_task_128498_task.name = "futhark_mc_segmap_task_128499";
        futhark_mc_task_128498_task.iterations = n_112520;
        futhark_mc_task_128498_task.task_time =
            &ctx->futhark_mc_segmap_task_128499_total_time;
        futhark_mc_task_128498_task.task_iter =
            &ctx->futhark_mc_segmap_task_128499_total_iter;
        futhark_mc_task_128498_task.sched = STATIC;
        futhark_mc_task_128498_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128499_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128498_task);
        
        if (futhark_mc_segmap_task_128499_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120357.mem + gtid_116806 * n_112520 * (int64_t) 4,
                mem_120293 + (int64_t) 0, n_112520 * (int64_t) 4);
        memmove(mem_120361.mem + gtid_116806 * n_112520 * (int64_t) 4,
                mem_120290 + (int64_t) 0, n_112520 * (int64_t) 4);
        memmove(mem_120365.mem + gtid_116806 * n_112520 * (int64_t) 4,
                mem_120287 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120284);
    free(mem_120287);
    free(mem_120290);
    free(mem_120293);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128489_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128489_end -
                 futhark_mc_segmap_parloop_128489_start;
        
        ctx->futhark_mc_segmap_parloop_128489_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128489_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128489_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128487(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116805 = tid;
    int num_tasks_124955 = info.nsubtasks;
    struct futhark_mc_task_128479 *futhark_mc_task_128479 =
                                  (struct futhark_mc_task_128479 *) args;
    struct futhark_context *ctx = futhark_mc_task_128479->ctx;
    uint64_t futhark_mc_segmap_nested_task_128487_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128487_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128479->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128479->free_n_112520;
    int64_t n_p_112522 = futhark_mc_task_128479->free_n_p_112522;
    int64_t C_len_112568 = futhark_mc_task_128479->free_C_len_112568;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128479->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128479->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128479->free_bytes_119421;
    int64_t ctx_param_ext_119637 =
            futhark_mc_task_128479->free_ctx_param_ext_119637;
    int64_t ctx_param_ext_119638 =
            futhark_mc_task_128479->free_ctx_param_ext_119638;
    int64_t ctx_param_ext_119640 =
            futhark_mc_task_128479->free_ctx_param_ext_119640;
    struct memblock mem_param_119642 = {.desc ="mem_param_119642", .mem =
                                        futhark_mc_task_128479->free_mem_param_119642,
                                        .size =0, .references =NULL};
    struct memblock mem_119730 = {.desc ="mem_119730", .mem =
                                  futhark_mc_task_128479->free_mem_119730,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120280 = {.desc ="ext_mem_120280", .mem =
                                      futhark_mc_task_128479->free_ext_mem_120280,
                                      .size =0, .references =NULL};
    int64_t ext_120281 = futhark_mc_task_128479->free_ext_120281;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128479->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128479->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120365 = {.desc ="mem_120365", .mem =
                                  futhark_mc_task_128479->free_mem_120365,
                                  .size =0, .references =NULL};
    int64_t iter_124991;
    struct futhark_mc_segmap_parloop_struct_128488
    futhark_mc_segmap_parloop_struct_128488;
    
    futhark_mc_segmap_parloop_struct_128488.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128488.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128488.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128488.free_n_p_112522 = n_p_112522;
    futhark_mc_segmap_parloop_struct_128488.free_C_len_112568 = C_len_112568;
    futhark_mc_segmap_parloop_struct_128488.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128488.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128488.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128488.free_ctx_param_ext_119637 =
        ctx_param_ext_119637;
    futhark_mc_segmap_parloop_struct_128488.free_ctx_param_ext_119638 =
        ctx_param_ext_119638;
    futhark_mc_segmap_parloop_struct_128488.free_ctx_param_ext_119640 =
        ctx_param_ext_119640;
    futhark_mc_segmap_parloop_struct_128488.free_mem_param_119642 =
        mem_param_119642.mem;
    futhark_mc_segmap_parloop_struct_128488.free_mem_119730 = mem_119730.mem;
    futhark_mc_segmap_parloop_struct_128488.free_ext_mem_120280 =
        ext_mem_120280.mem;
    futhark_mc_segmap_parloop_struct_128488.free_ext_120281 = ext_120281;
    futhark_mc_segmap_parloop_struct_128488.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128488.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128488.free_mem_120365 = mem_120365.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128489_task;
    
    futhark_mc_segmap_parloop_128489_task.name =
        "futhark_mc_segmap_parloop_128489";
    futhark_mc_segmap_parloop_128489_task.fn = futhark_mc_segmap_parloop_128489;
    futhark_mc_segmap_parloop_128489_task.args =
        &futhark_mc_segmap_parloop_struct_128488;
    futhark_mc_segmap_parloop_128489_task.iterations = iterations;
    futhark_mc_segmap_parloop_128489_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128489_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128489_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128489_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128489_task);
    
    if (futhark_mc_segmap_parloop_128489_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128489_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128489_total_end -
                 futhark_mc_segmap_parloop_128489_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128489_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128489_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128489_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128487_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128487_end -
                 futhark_mc_segmap_nested_task_128487_start;
        
        ctx->futhark_mc_segmap_nested_task_128487_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128487_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128487_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128502 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120391;
};
struct futhark_mc_segmap_parloop_struct_128504 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120391;
};
static int futhark_mc_segmap_parloop_128505(void *args, int64_t start,
                                            int64_t end, int flat_tid_116837,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128504
    *futhark_mc_segmap_parloop_struct_128504 =
    (struct futhark_mc_segmap_parloop_struct_128504 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128504->ctx;
    uint64_t futhark_mc_segmap_parloop_128505_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128505_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128504->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128504->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128504->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128504->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128504->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128504->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128504->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120391 = {.desc ="mem_120391", .mem =
                                  futhark_mc_segmap_parloop_struct_128504->free_mem_120391,
                                  .size =0, .references =NULL};
    size_t mem_120375_cached_sizze_128506 = 0;
    char *mem_120375 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125031 = start;
    
    if (mem_120375_cached_sizze_128506 < (size_t) bytes_119552) {
        mem_120375 = realloc(mem_120375, bytes_119552);
        mem_120375_cached_sizze_128506 = bytes_119552;
    }
    for (; iter_125031 < end; iter_125031++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125088 = m_112519;
        int64_t gtid_116838 = iter_125031;
        int64_t remnant_125089 = iter_125031 - gtid_116838;
        int64_t x_113828 = ((int64_t *) mem_119420.mem)[gtid_116838];
        
        for (int64_t i_125032 = 0; i_125032 < t_n_m_112577; i_125032++) {
            int64_t x_125034 = ((int64_t *) mem_119606.mem)[gtid_116838 *
                                                            t_n_m_112577 +
                                                            i_125032];
            float x_125035 = ((float *) mem_119610.mem)[gtid_116838 *
                                                        t_n_m_112577 +
                                                        i_125032];
            int64_t min_arg_125036 = mul64(t_jump_112527, i_125032);
            int64_t min_res_125037 = smin64(i_112596, min_arg_125036);
            float defunc_0_f_res_125038 = sitofp_i64_f32(min_res_125037);
            float defunc_2_reduce_res_125039;
            float redout_125041 = 0.0F;
            
            for (int64_t i_125040 = 0; i_125040 < t_window_112523; i_125040++) {
                bool cond_125042 = sle64(x_113828, i_125040);
                float defunc_0_f_res_125043;
                
                if (cond_125042) {
                    defunc_0_f_res_125043 = 0.0F;
                } else {
                    int64_t i_125044 = add64(x_125034, i_125040);
                    float x_125045 = ((float *) mem_119442.mem)[gtid_116838 *
                                                                n_112520 +
                                                                i_125044];
                    float defunc_0_f_res_f_res_125046 = 1.0F + x_125045;
                    
                    defunc_0_f_res_125043 = defunc_0_f_res_f_res_125046;
                }
                
                float defunc_0_f_res_125047;
                
                if (cond_125042) {
                    defunc_0_f_res_125047 = 0.0F;
                } else {
                    int64_t i_125048 = add64(x_125034, i_125040);
                    float x_125049 = ((float *) mem_120361.mem)[gtid_116838 *
                                                                n_112520 +
                                                                i_125048];
                    
                    defunc_0_f_res_125047 = x_125049;
                }
                
                float x_j_125050 = defunc_0_f_res_125043 -
                      defunc_0_f_res_125038;
                float abs_res_125051 = (float) fabs(x_j_125050);
                float tmp1_125052 = abs_res_125051 / x_125035;
                float x_125053 = tmp1_125052 * tmp1_125052;
                float y_125054 = tmp1_125052 * x_125053;
                float tmp2_125055 = 1.0F - y_125054;
                float x_125056 = tmp2_125055 * tmp2_125055;
                float tmp3_125057 = tmp2_125055 * x_125056;
                float w_j_125058 = defunc_0_f_res_125047 * tmp3_125057;
                float defunc_1_op_res_125059 = w_j_125058 + redout_125041;
                float redout_tmp_125091 = defunc_1_op_res_125059;
                
                redout_125041 = redout_tmp_125091;
            }
            defunc_2_reduce_res_125039 = redout_125041;
            
            float a0_125060 = 1.0F / defunc_2_reduce_res_125039;
            float defunc_2_reduce_res_125061;
            float redout_125063 = 0.0F;
            
            for (int64_t i_125062 = 0; i_125062 < t_window_112523; i_125062++) {
                bool cond_125064 = sle64(x_113828, i_125062);
                float defunc_0_f_res_125065;
                
                if (cond_125064) {
                    defunc_0_f_res_125065 = 0.0F;
                } else {
                    int64_t i_125066 = add64(x_125034, i_125062);
                    float x_125067 = ((float *) mem_119442.mem)[gtid_116838 *
                                                                n_112520 +
                                                                i_125066];
                    float defunc_0_f_res_f_res_125068 = 1.0F + x_125067;
                    
                    defunc_0_f_res_125065 = defunc_0_f_res_f_res_125068;
                }
                
                float defunc_0_f_res_125069;
                
                if (cond_125064) {
                    defunc_0_f_res_125069 = 0.0F;
                } else {
                    int64_t i_125070 = add64(x_125034, i_125062);
                    float x_125071 = ((float *) mem_120361.mem)[gtid_116838 *
                                                                n_112520 +
                                                                i_125070];
                    
                    defunc_0_f_res_125069 = x_125071;
                }
                
                float x_j_125072 = defunc_0_f_res_125065 -
                      defunc_0_f_res_125038;
                float abs_res_125073 = (float) fabs(x_j_125072);
                float tmp1_125074 = abs_res_125073 / x_125035;
                float x_125075 = tmp1_125074 * tmp1_125074;
                float y_125076 = tmp1_125074 * x_125075;
                float tmp2_125077 = 1.0F - y_125076;
                float x_125078 = tmp2_125077 * tmp2_125077;
                float tmp3_125079 = tmp2_125077 * x_125078;
                float tmp4_125080 = defunc_0_f_res_125069 * tmp3_125079;
                float defunc_0_f_res_125081;
                
                if (cond_125064) {
                    defunc_0_f_res_125081 = 0.0F;
                } else {
                    int64_t i_125082 = add64(x_125034, i_125062);
                    float x_125083 = ((float *) mem_120357.mem)[gtid_116838 *
                                                                n_112520 +
                                                                i_125082];
                    
                    defunc_0_f_res_125081 = x_125083;
                }
                
                float x_125084 = a0_125060 * tmp4_125080;
                float defunc_9_fit_fun_res_125085 = defunc_0_f_res_125081 *
                      x_125084;
                float defunc_1_op_res_125086 = defunc_9_fit_fun_res_125085 +
                      redout_125063;
                float redout_tmp_125092 = defunc_1_op_res_125086;
                
                redout_125063 = redout_tmp_125092;
            }
            defunc_2_reduce_res_125061 = redout_125063;
            ((float *) mem_120375)[i_125032] = defunc_2_reduce_res_125061;
        }
        memmove(mem_120391.mem + gtid_116838 * t_n_m_112577 * (int64_t) 4,
                mem_120375 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120375);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128505_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128505_end -
                 futhark_mc_segmap_parloop_128505_start;
        
        ctx->futhark_mc_segmap_parloop_128505_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128505_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128505_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128503(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116837 = tid;
    int num_tasks_125030 = info.nsubtasks;
    struct futhark_mc_task_128502 *futhark_mc_task_128502 =
                                  (struct futhark_mc_task_128502 *) args;
    struct futhark_context *ctx = futhark_mc_task_128502->ctx;
    uint64_t futhark_mc_segmap_task_128503_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128503_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128502->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128502->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128502->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128502->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128502->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128502->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128502->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128502->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128502->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128502->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128502->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128502->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128502->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120391 = {.desc ="mem_120391", .mem =
                                  futhark_mc_task_128502->free_mem_120391,
                                  .size =0, .references =NULL};
    int64_t iter_125031;
    struct futhark_mc_segmap_parloop_struct_128504
    futhark_mc_segmap_parloop_struct_128504;
    
    futhark_mc_segmap_parloop_struct_128504.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128504.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128504.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128504.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128504.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128504.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128504.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128504.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128504.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128504.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128504.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128504.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128504.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128504.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128504.free_mem_120391 = mem_120391.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128505_task;
    
    futhark_mc_segmap_parloop_128505_task.name =
        "futhark_mc_segmap_parloop_128505";
    futhark_mc_segmap_parloop_128505_task.fn = futhark_mc_segmap_parloop_128505;
    futhark_mc_segmap_parloop_128505_task.args =
        &futhark_mc_segmap_parloop_struct_128504;
    futhark_mc_segmap_parloop_128505_task.iterations = iterations;
    futhark_mc_segmap_parloop_128505_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128505_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128505_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128505_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128505_task);
    
    if (futhark_mc_segmap_parloop_128505_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128505_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128505_total_end -
                 futhark_mc_segmap_parloop_128505_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128505_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128505_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128505_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128503_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128503_end -
                 futhark_mc_segmap_task_128503_start;
        
        ctx->futhark_mc_segmap_task_128503_runs[tid]++;
        ctx->futhark_mc_segmap_task_128503_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128503_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128508 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120391;
};
struct futhark_mc_task_128511 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120372;
};
struct futhark_mc_segmap_parloop_struct_128513 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120372;
};
static int futhark_mc_segmap_parloop_128514(void *args, int64_t start,
                                            int64_t end, int flat_tid_116841,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128513
    *futhark_mc_segmap_parloop_struct_128513 =
    (struct futhark_mc_segmap_parloop_struct_128513 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128513->ctx;
    uint64_t futhark_mc_segmap_parloop_128514_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128514_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128513->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128513->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128513->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128513->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128513->free_i_112596;
    int64_t gtid_116840 =
            futhark_mc_segmap_parloop_struct_128513->free_gtid_116840;
    int64_t x_116910 = futhark_mc_segmap_parloop_struct_128513->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120372 = {.desc ="mem_120372", .mem =
                                  futhark_mc_segmap_parloop_struct_128513->free_mem_120372,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125203 = start;
    
    for (; iter_125203 < end; iter_125203++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125249 = t_n_m_112577;
        int64_t gtid_116842 = iter_125203;
        int64_t remnant_125250 = iter_125203 - gtid_116842;
        int64_t x_125147 = ((int64_t *) mem_119606.mem)[gtid_116840 *
                                                        t_n_m_112577 +
                                                        gtid_116842];
        float x_125148 = ((float *) mem_119610.mem)[gtid_116840 * t_n_m_112577 +
                                                    gtid_116842];
        int64_t min_arg_125149 = mul64(t_jump_112527, gtid_116842);
        int64_t min_res_125150 = smin64(i_112596, min_arg_125149);
        float defunc_0_f_res_125151 = sitofp_i64_f32(min_res_125150);
        float defunc_2_reduce_res_125152;
        float redout_125205 = 0.0F;
        
        for (int64_t i_125204 = 0; i_125204 < t_window_112523; i_125204++) {
            bool cond_125206 = sle64(x_116910, i_125204);
            float defunc_0_f_res_125207;
            
            if (cond_125206) {
                defunc_0_f_res_125207 = 0.0F;
            } else {
                int64_t i_125208 = add64(x_125147, i_125204);
                float x_125209 = ((float *) mem_119442.mem)[gtid_116840 *
                                                            n_112520 +
                                                            i_125208];
                float defunc_0_f_res_f_res_125210 = 1.0F + x_125209;
                
                defunc_0_f_res_125207 = defunc_0_f_res_f_res_125210;
            }
            
            float defunc_0_f_res_125211;
            
            if (cond_125206) {
                defunc_0_f_res_125211 = 0.0F;
            } else {
                int64_t i_125212 = add64(x_125147, i_125204);
                float x_125213 = ((float *) mem_120361.mem)[gtid_116840 *
                                                            n_112520 +
                                                            i_125212];
                
                defunc_0_f_res_125211 = x_125213;
            }
            
            float x_j_125214 = defunc_0_f_res_125207 - defunc_0_f_res_125151;
            float abs_res_125215 = (float) fabs(x_j_125214);
            float tmp1_125216 = abs_res_125215 / x_125148;
            float x_125217 = tmp1_125216 * tmp1_125216;
            float y_125218 = tmp1_125216 * x_125217;
            float tmp2_125219 = 1.0F - y_125218;
            float x_125220 = tmp2_125219 * tmp2_125219;
            float tmp3_125221 = tmp2_125219 * x_125220;
            float w_j_125222 = defunc_0_f_res_125211 * tmp3_125221;
            float defunc_1_op_res_125223 = w_j_125222 + redout_125205;
            float redout_tmp_125251 = defunc_1_op_res_125223;
            
            redout_125205 = redout_tmp_125251;
        }
        defunc_2_reduce_res_125152 = redout_125205;
        
        float a0_125173 = 1.0F / defunc_2_reduce_res_125152;
        float defunc_2_reduce_res_125174;
        float redout_125225 = 0.0F;
        
        for (int64_t i_125224 = 0; i_125224 < t_window_112523; i_125224++) {
            bool cond_125226 = sle64(x_116910, i_125224);
            float defunc_0_f_res_125227;
            
            if (cond_125226) {
                defunc_0_f_res_125227 = 0.0F;
            } else {
                int64_t i_125228 = add64(x_125147, i_125224);
                float x_125229 = ((float *) mem_119442.mem)[gtid_116840 *
                                                            n_112520 +
                                                            i_125228];
                float defunc_0_f_res_f_res_125230 = 1.0F + x_125229;
                
                defunc_0_f_res_125227 = defunc_0_f_res_f_res_125230;
            }
            
            float defunc_0_f_res_125231;
            
            if (cond_125226) {
                defunc_0_f_res_125231 = 0.0F;
            } else {
                int64_t i_125232 = add64(x_125147, i_125224);
                float x_125233 = ((float *) mem_120361.mem)[gtid_116840 *
                                                            n_112520 +
                                                            i_125232];
                
                defunc_0_f_res_125231 = x_125233;
            }
            
            float x_j_125234 = defunc_0_f_res_125227 - defunc_0_f_res_125151;
            float abs_res_125235 = (float) fabs(x_j_125234);
            float tmp1_125236 = abs_res_125235 / x_125148;
            float x_125237 = tmp1_125236 * tmp1_125236;
            float y_125238 = tmp1_125236 * x_125237;
            float tmp2_125239 = 1.0F - y_125238;
            float x_125240 = tmp2_125239 * tmp2_125239;
            float tmp3_125241 = tmp2_125239 * x_125240;
            float tmp4_125242 = defunc_0_f_res_125231 * tmp3_125241;
            float defunc_0_f_res_125243;
            
            if (cond_125226) {
                defunc_0_f_res_125243 = 0.0F;
            } else {
                int64_t i_125244 = add64(x_125147, i_125224);
                float x_125245 = ((float *) mem_120357.mem)[gtid_116840 *
                                                            n_112520 +
                                                            i_125244];
                
                defunc_0_f_res_125243 = x_125245;
            }
            
            float x_125246 = a0_125173 * tmp4_125242;
            float defunc_9_fit_fun_res_125247 = defunc_0_f_res_125243 *
                  x_125246;
            float defunc_1_op_res_125248 = defunc_9_fit_fun_res_125247 +
                  redout_125225;
            float redout_tmp_125252 = defunc_1_op_res_125248;
            
            redout_125225 = redout_tmp_125252;
        }
        defunc_2_reduce_res_125174 = redout_125225;
        ((float *) mem_120372.mem)[gtid_116842] = defunc_2_reduce_res_125174;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128514_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128514_end -
                 futhark_mc_segmap_parloop_128514_start;
        
        ctx->futhark_mc_segmap_parloop_128514_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128514_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128514_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128512(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116841 = tid;
    int num_tasks_125202 = info.nsubtasks;
    struct futhark_mc_task_128511 *futhark_mc_task_128511 =
                                  (struct futhark_mc_task_128511 *) args;
    struct futhark_context *ctx = futhark_mc_task_128511->ctx;
    uint64_t futhark_mc_segmap_task_128512_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128512_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128511->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128511->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128511->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128511->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128511->free_i_112596;
    int64_t gtid_116840 = futhark_mc_task_128511->free_gtid_116840;
    int64_t x_116910 = futhark_mc_task_128511->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128511->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128511->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128511->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128511->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128511->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120372 = {.desc ="mem_120372", .mem =
                                  futhark_mc_task_128511->free_mem_120372,
                                  .size =0, .references =NULL};
    int64_t iter_125203;
    struct futhark_mc_segmap_parloop_struct_128513
    futhark_mc_segmap_parloop_struct_128513;
    
    futhark_mc_segmap_parloop_struct_128513.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128513.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128513.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128513.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128513.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128513.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128513.free_gtid_116840 = gtid_116840;
    futhark_mc_segmap_parloop_struct_128513.free_x_116910 = x_116910;
    futhark_mc_segmap_parloop_struct_128513.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128513.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128513.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128513.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128513.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128513.free_mem_120372 = mem_120372.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128514_task;
    
    futhark_mc_segmap_parloop_128514_task.name =
        "futhark_mc_segmap_parloop_128514";
    futhark_mc_segmap_parloop_128514_task.fn = futhark_mc_segmap_parloop_128514;
    futhark_mc_segmap_parloop_128514_task.args =
        &futhark_mc_segmap_parloop_struct_128513;
    futhark_mc_segmap_parloop_128514_task.iterations = iterations;
    futhark_mc_segmap_parloop_128514_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128514_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128514_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128514_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128514_task);
    
    if (futhark_mc_segmap_parloop_128514_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128514_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128514_total_end -
                 futhark_mc_segmap_parloop_128514_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128514_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128514_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128514_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128512_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128512_end -
                 futhark_mc_segmap_task_128512_start;
        
        ctx->futhark_mc_segmap_task_128512_runs[tid]++;
        ctx->futhark_mc_segmap_task_128512_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128512_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128516 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120372;
};
struct futhark_mc_task_128518 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125094;
    float free_x_125095;
    float free_defunc_0_f_res_125098;
    float *retval_defunc_2_reduce_res_125099;
};
struct futhark_mc_segred_stage_1_parloop_struct_128521 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125094;
    float free_x_125095;
    float free_defunc_0_f_res_125098;
    char *free_reduce_stage_1_tid_res_arr_mem_125302;
};
static int futhark_mc_segred_stage_1_parloop_128522(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116845,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128521
    *futhark_mc_segred_stage_1_parloop_struct_128521 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128521 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128521->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128522_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128522_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128521->free_n_112520;
    int64_t gtid_116840 =
            futhark_mc_segred_stage_1_parloop_struct_128521->free_gtid_116840;
    int64_t x_116910 =
            futhark_mc_segred_stage_1_parloop_struct_128521->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128521->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128521->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125094 =
            futhark_mc_segred_stage_1_parloop_struct_128521->free_x_125094;
    float x_125095 =
          futhark_mc_segred_stage_1_parloop_struct_128521->free_x_125095;
    float defunc_0_f_res_125098 =
          futhark_mc_segred_stage_1_parloop_struct_128521->free_defunc_0_f_res_125098;
    struct memblock reduce_stage_1_tid_res_arr_mem_125302 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125302",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128521->free_reduce_stage_1_tid_res_arr_mem_125302,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125304 = start;
    float x_125254;
    float x_125255;
    float local_acc_125305 = 0.0F;
    
    for (; iter_125304 < end; iter_125304++) {
        int64_t gtid_116846 = iter_125304;
        bool cond_125257 = sle64(x_116910, gtid_116846);
        float defunc_0_f_res_125258;
        
        if (cond_125257) {
            defunc_0_f_res_125258 = 0.0F;
        } else {
            int64_t i_125259 = add64(gtid_116846, x_125094);
            float x_125260 = ((float *) mem_119442.mem)[gtid_116840 * n_112520 +
                                                        i_125259];
            float defunc_0_f_res_f_res_125261 = 1.0F + x_125260;
            
            defunc_0_f_res_125258 = defunc_0_f_res_f_res_125261;
        }
        
        float defunc_0_f_res_125262;
        
        if (cond_125257) {
            defunc_0_f_res_125262 = 0.0F;
        } else {
            int64_t i_125263 = add64(gtid_116846, x_125094);
            float x_125264 = ((float *) mem_120361.mem)[gtid_116840 * n_112520 +
                                                        i_125263];
            
            defunc_0_f_res_125262 = x_125264;
        }
        
        float x_j_125265 = defunc_0_f_res_125258 - defunc_0_f_res_125098;
        float abs_res_125266 = (float) fabs(x_j_125265);
        float tmp1_125267 = abs_res_125266 / x_125095;
        float x_125268 = tmp1_125267 * tmp1_125267;
        float y_125269 = tmp1_125267 * x_125268;
        float tmp2_125270 = 1.0F - y_125269;
        float x_125271 = tmp2_125270 * tmp2_125270;
        float tmp3_125272 = tmp2_125270 * x_125271;
        float w_j_125273 = defunc_0_f_res_125262 * tmp3_125272;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125254 = local_acc_125305;
        }
        // Load next params
        {
            x_125255 = w_j_125273;
        }
        // Red body
        {
            float defunc_1_op_res_125256 = x_125254 + x_125255;
            
            local_acc_125305 = defunc_1_op_res_125256;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125302.mem)[flat_tid_116845] =
        local_acc_125305;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128522_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128522_end -
                 futhark_mc_segred_stage_1_parloop_128522_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128522_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128522_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128522_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128519(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116845 = tid;
    int num_tasks_125301 = info.nsubtasks;
    struct futhark_mc_task_128518 *futhark_mc_task_128518 =
                                  (struct futhark_mc_task_128518 *) args;
    struct futhark_context *ctx = futhark_mc_task_128518->ctx;
    uint64_t futhark_mc_segred_task_128519_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128519_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128518->free_n_112520;
    int64_t gtid_116840 = futhark_mc_task_128518->free_gtid_116840;
    int64_t x_116910 = futhark_mc_task_128518->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128518->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128518->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125094 = futhark_mc_task_128518->free_x_125094;
    float x_125095 = futhark_mc_task_128518->free_x_125095;
    float defunc_0_f_res_125098 =
          futhark_mc_task_128518->free_defunc_0_f_res_125098;
    float defunc_2_reduce_res_125099 =
          *futhark_mc_task_128518->retval_defunc_2_reduce_res_125099;
    size_t reduce_stage_1_tid_res_arr_mem_125302_cached_sizze_128520 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125302 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125302_cached_sizze_128520 <
        (size_t) ((int64_t) 4 * num_tasks_125301)) {
        reduce_stage_1_tid_res_arr_mem_125302 =
            realloc(reduce_stage_1_tid_res_arr_mem_125302, (int64_t) 4 *
                    num_tasks_125301);
        reduce_stage_1_tid_res_arr_mem_125302_cached_sizze_128520 =
            (int64_t) 4 * num_tasks_125301;
    }
    
    int64_t iter_125304;
    struct futhark_mc_segred_stage_1_parloop_struct_128521
    futhark_mc_segred_stage_1_parloop_struct_128521;
    
    futhark_mc_segred_stage_1_parloop_struct_128521.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_gtid_116840 =
        gtid_116840;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_x_116910 = x_116910;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_x_125094 = x_125094;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_x_125095 = x_125095;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_defunc_0_f_res_125098 =
        defunc_0_f_res_125098;
    futhark_mc_segred_stage_1_parloop_struct_128521.free_reduce_stage_1_tid_res_arr_mem_125302 =
        reduce_stage_1_tid_res_arr_mem_125302;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128522_task;
    
    futhark_mc_segred_stage_1_parloop_128522_task.name =
        "futhark_mc_segred_stage_1_parloop_128522";
    futhark_mc_segred_stage_1_parloop_128522_task.fn =
        futhark_mc_segred_stage_1_parloop_128522;
    futhark_mc_segred_stage_1_parloop_128522_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128521;
    futhark_mc_segred_stage_1_parloop_128522_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128522_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128522_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128522_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128522_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128522_task);
    
    if (futhark_mc_segred_stage_1_parloop_128522_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128522_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128522_total_end -
                 futhark_mc_segred_stage_1_parloop_128522_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128522_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128522_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128522_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125099 = 0.0F;
    }
    
    float x_125306;
    float x_125307;
    
    for (int32_t i_125309 = 0; i_125309 < num_tasks_125301; i_125309++) {
        flat_tid_116845 = i_125309;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125306 = defunc_2_reduce_res_125099;
            }
            // load next params
            {
                x_125307 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125302)[flat_tid_116845];
            }
            // red body
            {
                float defunc_1_op_res_125308 = x_125306 + x_125307;
                
                defunc_2_reduce_res_125099 = defunc_1_op_res_125308;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125302);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128519_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128519_end -
                 futhark_mc_segred_task_128519_start;
        
        ctx->futhark_mc_segred_task_128519_runs[tid]++;
        ctx->futhark_mc_segred_task_128519_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128519_iter[tid] += iterations;
    }
    *futhark_mc_task_128518->retval_defunc_2_reduce_res_125099 =
        defunc_2_reduce_res_125099;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128523 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125094;
    float free_x_125095;
    float free_defunc_0_f_res_125098;
    float free_a0_125120;
    float *retval_defunc_2_reduce_res_125121;
};
struct futhark_mc_segred_stage_1_parloop_struct_128526 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_116840;
    int64_t free_x_116910;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125094;
    float free_x_125095;
    float free_defunc_0_f_res_125098;
    float free_a0_125120;
    char *free_reduce_stage_1_tid_res_arr_mem_125311;
};
static int futhark_mc_segred_stage_1_parloop_128527(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116847,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128526
    *futhark_mc_segred_stage_1_parloop_struct_128526 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128526 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128526->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128527_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128527_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128526->free_n_112520;
    int64_t gtid_116840 =
            futhark_mc_segred_stage_1_parloop_struct_128526->free_gtid_116840;
    int64_t x_116910 =
            futhark_mc_segred_stage_1_parloop_struct_128526->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128526->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128526->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128526->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125094 =
            futhark_mc_segred_stage_1_parloop_struct_128526->free_x_125094;
    float x_125095 =
          futhark_mc_segred_stage_1_parloop_struct_128526->free_x_125095;
    float defunc_0_f_res_125098 =
          futhark_mc_segred_stage_1_parloop_struct_128526->free_defunc_0_f_res_125098;
    float a0_125120 =
          futhark_mc_segred_stage_1_parloop_struct_128526->free_a0_125120;
    struct memblock reduce_stage_1_tid_res_arr_mem_125311 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125311",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128526->free_reduce_stage_1_tid_res_arr_mem_125311,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125313 = start;
    float x_125274;
    float x_125275;
    float local_acc_125314 = 0.0F;
    
    for (; iter_125313 < end; iter_125313++) {
        int64_t gtid_116848 = iter_125313;
        bool cond_125277 = sle64(x_116910, gtid_116848);
        float defunc_0_f_res_125278;
        
        if (cond_125277) {
            defunc_0_f_res_125278 = 0.0F;
        } else {
            int64_t i_125279 = add64(gtid_116848, x_125094);
            float x_125280 = ((float *) mem_119442.mem)[gtid_116840 * n_112520 +
                                                        i_125279];
            float defunc_0_f_res_f_res_125281 = 1.0F + x_125280;
            
            defunc_0_f_res_125278 = defunc_0_f_res_f_res_125281;
        }
        
        float defunc_0_f_res_125282;
        
        if (cond_125277) {
            defunc_0_f_res_125282 = 0.0F;
        } else {
            int64_t i_125283 = add64(gtid_116848, x_125094);
            float x_125284 = ((float *) mem_120361.mem)[gtid_116840 * n_112520 +
                                                        i_125283];
            
            defunc_0_f_res_125282 = x_125284;
        }
        
        float x_j_125285 = defunc_0_f_res_125278 - defunc_0_f_res_125098;
        float abs_res_125286 = (float) fabs(x_j_125285);
        float tmp1_125287 = abs_res_125286 / x_125095;
        float x_125288 = tmp1_125287 * tmp1_125287;
        float y_125289 = tmp1_125287 * x_125288;
        float tmp2_125290 = 1.0F - y_125289;
        float x_125291 = tmp2_125290 * tmp2_125290;
        float tmp3_125292 = tmp2_125290 * x_125291;
        float tmp4_125293 = defunc_0_f_res_125282 * tmp3_125292;
        float defunc_0_f_res_125294;
        
        if (cond_125277) {
            defunc_0_f_res_125294 = 0.0F;
        } else {
            int64_t i_125295 = add64(gtid_116848, x_125094);
            float x_125296 = ((float *) mem_120357.mem)[gtid_116840 * n_112520 +
                                                        i_125295];
            
            defunc_0_f_res_125294 = x_125296;
        }
        
        float x_125297 = a0_125120 * tmp4_125293;
        float defunc_9_fit_fun_res_125298 = defunc_0_f_res_125294 * x_125297;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125274 = local_acc_125314;
        }
        // Load next params
        {
            x_125275 = defunc_9_fit_fun_res_125298;
        }
        // Red body
        {
            float defunc_1_op_res_125276 = x_125274 + x_125275;
            
            local_acc_125314 = defunc_1_op_res_125276;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125311.mem)[flat_tid_116847] =
        local_acc_125314;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128527_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128527_end -
                 futhark_mc_segred_stage_1_parloop_128527_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128527_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128527_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128527_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128524(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116847 = tid;
    int num_tasks_125310 = info.nsubtasks;
    struct futhark_mc_task_128523 *futhark_mc_task_128523 =
                                  (struct futhark_mc_task_128523 *) args;
    struct futhark_context *ctx = futhark_mc_task_128523->ctx;
    uint64_t futhark_mc_segred_task_128524_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128524_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128523->free_n_112520;
    int64_t gtid_116840 = futhark_mc_task_128523->free_gtid_116840;
    int64_t x_116910 = futhark_mc_task_128523->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128523->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128523->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128523->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125094 = futhark_mc_task_128523->free_x_125094;
    float x_125095 = futhark_mc_task_128523->free_x_125095;
    float defunc_0_f_res_125098 =
          futhark_mc_task_128523->free_defunc_0_f_res_125098;
    float a0_125120 = futhark_mc_task_128523->free_a0_125120;
    float defunc_2_reduce_res_125121 =
          *futhark_mc_task_128523->retval_defunc_2_reduce_res_125121;
    size_t reduce_stage_1_tid_res_arr_mem_125311_cached_sizze_128525 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125311 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125311_cached_sizze_128525 <
        (size_t) ((int64_t) 4 * num_tasks_125310)) {
        reduce_stage_1_tid_res_arr_mem_125311 =
            realloc(reduce_stage_1_tid_res_arr_mem_125311, (int64_t) 4 *
                    num_tasks_125310);
        reduce_stage_1_tid_res_arr_mem_125311_cached_sizze_128525 =
            (int64_t) 4 * num_tasks_125310;
    }
    
    int64_t iter_125313;
    struct futhark_mc_segred_stage_1_parloop_struct_128526
    futhark_mc_segred_stage_1_parloop_struct_128526;
    
    futhark_mc_segred_stage_1_parloop_struct_128526.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_gtid_116840 =
        gtid_116840;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_x_116910 = x_116910;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_x_125094 = x_125094;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_x_125095 = x_125095;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_defunc_0_f_res_125098 =
        defunc_0_f_res_125098;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_a0_125120 = a0_125120;
    futhark_mc_segred_stage_1_parloop_struct_128526.free_reduce_stage_1_tid_res_arr_mem_125311 =
        reduce_stage_1_tid_res_arr_mem_125311;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128527_task;
    
    futhark_mc_segred_stage_1_parloop_128527_task.name =
        "futhark_mc_segred_stage_1_parloop_128527";
    futhark_mc_segred_stage_1_parloop_128527_task.fn =
        futhark_mc_segred_stage_1_parloop_128527;
    futhark_mc_segred_stage_1_parloop_128527_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128526;
    futhark_mc_segred_stage_1_parloop_128527_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128527_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128527_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128527_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128527_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128527_task);
    
    if (futhark_mc_segred_stage_1_parloop_128527_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128527_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128527_total_end -
                 futhark_mc_segred_stage_1_parloop_128527_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128527_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128527_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128527_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125121 = 0.0F;
    }
    
    float x_125315;
    float x_125316;
    
    for (int32_t i_125318 = 0; i_125318 < num_tasks_125310; i_125318++) {
        flat_tid_116847 = i_125318;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125315 = defunc_2_reduce_res_125121;
            }
            // load next params
            {
                x_125316 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125311)[flat_tid_116847];
            }
            // red body
            {
                float defunc_1_op_res_125317 = x_125315 + x_125316;
                
                defunc_2_reduce_res_125121 = defunc_1_op_res_125317;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125311);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128524_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128524_end -
                 futhark_mc_segred_task_128524_start;
        
        ctx->futhark_mc_segred_task_128524_runs[tid]++;
        ctx->futhark_mc_segred_task_128524_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128524_iter[tid] += iterations;
    }
    *futhark_mc_task_128523->retval_defunc_2_reduce_res_125121 =
        defunc_2_reduce_res_125121;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128517(void *args, int64_t start,
                                            int64_t end, int flat_tid_116843,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128516
    *futhark_mc_segmap_parloop_struct_128516 =
    (struct futhark_mc_segmap_parloop_struct_128516 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128516->ctx;
    uint64_t futhark_mc_segmap_parloop_128517_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128517_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128516->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128516->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128516->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128516->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128516->free_i_112596;
    int64_t gtid_116840 =
            futhark_mc_segmap_parloop_struct_128516->free_gtid_116840;
    int64_t x_116910 = futhark_mc_segmap_parloop_struct_128516->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120372 = {.desc ="mem_120372", .mem =
                                  futhark_mc_segmap_parloop_struct_128516->free_mem_120372,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125253 = start;
    
    for (; iter_125253 < end; iter_125253++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125299 = t_n_m_112577;
        int64_t gtid_116844 = iter_125253;
        int64_t remnant_125300 = iter_125253 - gtid_116844;
        int64_t x_125094 = ((int64_t *) mem_119606.mem)[gtid_116840 *
                                                        t_n_m_112577 +
                                                        gtid_116844];
        float x_125095 = ((float *) mem_119610.mem)[gtid_116840 * t_n_m_112577 +
                                                    gtid_116844];
        int64_t min_arg_125096 = mul64(t_jump_112527, gtid_116844);
        int64_t min_res_125097 = smin64(i_112596, min_arg_125096);
        float defunc_0_f_res_125098 = sitofp_i64_f32(min_res_125097);
        float defunc_2_reduce_res_125099;
        int64_t flat_tid_116845 = (int64_t) 0;
        int32_t num_tasks_125301;
        struct futhark_mc_task_128518 futhark_mc_task_128518;
        
        futhark_mc_task_128518.ctx = ctx;
        futhark_mc_task_128518.free_n_112520 = n_112520;
        futhark_mc_task_128518.free_gtid_116840 = gtid_116840;
        futhark_mc_task_128518.free_x_116910 = x_116910;
        futhark_mc_task_128518.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128518.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128518.free_x_125094 = x_125094;
        futhark_mc_task_128518.free_x_125095 = x_125095;
        futhark_mc_task_128518.free_defunc_0_f_res_125098 =
            defunc_0_f_res_125098;
        futhark_mc_task_128518.retval_defunc_2_reduce_res_125099 =
            &defunc_2_reduce_res_125099;
        
        struct scheduler_segop futhark_mc_task_128518_task;
        
        futhark_mc_task_128518_task.args = &futhark_mc_task_128518;
        futhark_mc_task_128518_task.top_level_fn =
            futhark_mc_segred_task_128519;
        futhark_mc_task_128518_task.name = "futhark_mc_segred_task_128519";
        futhark_mc_task_128518_task.iterations = t_window_112523;
        futhark_mc_task_128518_task.task_time =
            &ctx->futhark_mc_segred_task_128519_total_time;
        futhark_mc_task_128518_task.task_iter =
            &ctx->futhark_mc_segred_task_128519_total_iter;
        futhark_mc_task_128518_task.sched = STATIC;
        futhark_mc_task_128518_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128519_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128518_task);
        
        if (futhark_mc_segred_task_128519_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_125120 = 1.0F / defunc_2_reduce_res_125099;
        float defunc_2_reduce_res_125121;
        int64_t flat_tid_116847 = (int64_t) 0;
        int32_t num_tasks_125310;
        struct futhark_mc_task_128523 futhark_mc_task_128523;
        
        futhark_mc_task_128523.ctx = ctx;
        futhark_mc_task_128523.free_n_112520 = n_112520;
        futhark_mc_task_128523.free_gtid_116840 = gtid_116840;
        futhark_mc_task_128523.free_x_116910 = x_116910;
        futhark_mc_task_128523.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128523.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128523.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128523.free_x_125094 = x_125094;
        futhark_mc_task_128523.free_x_125095 = x_125095;
        futhark_mc_task_128523.free_defunc_0_f_res_125098 =
            defunc_0_f_res_125098;
        futhark_mc_task_128523.free_a0_125120 = a0_125120;
        futhark_mc_task_128523.retval_defunc_2_reduce_res_125121 =
            &defunc_2_reduce_res_125121;
        
        struct scheduler_segop futhark_mc_task_128523_task;
        
        futhark_mc_task_128523_task.args = &futhark_mc_task_128523;
        futhark_mc_task_128523_task.top_level_fn =
            futhark_mc_segred_task_128524;
        futhark_mc_task_128523_task.name = "futhark_mc_segred_task_128524";
        futhark_mc_task_128523_task.iterations = t_window_112523;
        futhark_mc_task_128523_task.task_time =
            &ctx->futhark_mc_segred_task_128524_total_time;
        futhark_mc_task_128523_task.task_iter =
            &ctx->futhark_mc_segred_task_128524_total_iter;
        futhark_mc_task_128523_task.sched = STATIC;
        futhark_mc_task_128523_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128524_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128523_task);
        
        if (futhark_mc_segred_task_128524_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120372.mem)[gtid_116844] = defunc_2_reduce_res_125121;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128517_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128517_end -
                 futhark_mc_segmap_parloop_128517_start;
        
        ctx->futhark_mc_segmap_parloop_128517_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128517_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128517_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128515(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116843 = tid;
    int num_tasks_125202 = info.nsubtasks;
    struct futhark_mc_task_128511 *futhark_mc_task_128511 =
                                  (struct futhark_mc_task_128511 *) args;
    struct futhark_context *ctx = futhark_mc_task_128511->ctx;
    uint64_t futhark_mc_segmap_nested_task_128515_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128515_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128511->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128511->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128511->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128511->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128511->free_i_112596;
    int64_t gtid_116840 = futhark_mc_task_128511->free_gtid_116840;
    int64_t x_116910 = futhark_mc_task_128511->free_x_116910;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128511->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128511->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128511->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128511->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128511->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120372 = {.desc ="mem_120372", .mem =
                                  futhark_mc_task_128511->free_mem_120372,
                                  .size =0, .references =NULL};
    int64_t iter_125253;
    struct futhark_mc_segmap_parloop_struct_128516
    futhark_mc_segmap_parloop_struct_128516;
    
    futhark_mc_segmap_parloop_struct_128516.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128516.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128516.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128516.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128516.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128516.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128516.free_gtid_116840 = gtid_116840;
    futhark_mc_segmap_parloop_struct_128516.free_x_116910 = x_116910;
    futhark_mc_segmap_parloop_struct_128516.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128516.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128516.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128516.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128516.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128516.free_mem_120372 = mem_120372.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128517_task;
    
    futhark_mc_segmap_parloop_128517_task.name =
        "futhark_mc_segmap_parloop_128517";
    futhark_mc_segmap_parloop_128517_task.fn = futhark_mc_segmap_parloop_128517;
    futhark_mc_segmap_parloop_128517_task.args =
        &futhark_mc_segmap_parloop_struct_128516;
    futhark_mc_segmap_parloop_128517_task.iterations = iterations;
    futhark_mc_segmap_parloop_128517_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128517_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128517_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128517_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128517_task);
    
    if (futhark_mc_segmap_parloop_128517_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128517_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128517_total_end -
                 futhark_mc_segmap_parloop_128517_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128517_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128517_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128517_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128515_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128515_end -
                 futhark_mc_segmap_nested_task_128515_start;
        
        ctx->futhark_mc_segmap_nested_task_128515_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128515_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128515_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128509(void *args, int64_t start,
                                            int64_t end, int flat_tid_116839,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128508
    *futhark_mc_segmap_parloop_struct_128508 =
    (struct futhark_mc_segmap_parloop_struct_128508 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128508->ctx;
    uint64_t futhark_mc_segmap_parloop_128509_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128509_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128508->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128508->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128508->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128508->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128508->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128508->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128508->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120391 = {.desc ="mem_120391", .mem =
                                  futhark_mc_segmap_parloop_struct_128508->free_mem_120391,
                                  .size =0, .references =NULL};
    size_t mem_120372_cached_sizze_128510 = 0;
    char *mem_120372 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125093 = start;
    
    if (mem_120372_cached_sizze_128510 < (size_t) bytes_119552) {
        mem_120372 = realloc(mem_120372, bytes_119552);
        mem_120372_cached_sizze_128510 = bytes_119552;
    }
    for (; iter_125093 < end; iter_125093++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125200 = m_112519;
        int64_t gtid_116840 = iter_125093;
        int64_t remnant_125201 = iter_125093 - gtid_116840;
        int64_t x_116910 = ((int64_t *) mem_119420.mem)[gtid_116840];
        int64_t flat_tid_116841 = (int64_t) 0;
        int32_t num_tasks_125202;
        int64_t flat_tid_116843 = (int64_t) 0;
        struct futhark_mc_task_128511 futhark_mc_task_128511;
        
        futhark_mc_task_128511.ctx = ctx;
        futhark_mc_task_128511.free_n_112520 = n_112520;
        futhark_mc_task_128511.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128511.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128511.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128511.free_i_112596 = i_112596;
        futhark_mc_task_128511.free_gtid_116840 = gtid_116840;
        futhark_mc_task_128511.free_x_116910 = x_116910;
        futhark_mc_task_128511.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128511.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128511.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128511.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128511.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128511.free_mem_120372 = mem_120372;
        
        struct scheduler_segop futhark_mc_task_128511_task;
        
        futhark_mc_task_128511_task.args = &futhark_mc_task_128511;
        futhark_mc_task_128511_task.top_level_fn =
            futhark_mc_segmap_task_128512;
        futhark_mc_task_128511_task.name = "futhark_mc_segmap_task_128512";
        futhark_mc_task_128511_task.iterations = t_n_m_112577;
        futhark_mc_task_128511_task.task_time =
            &ctx->futhark_mc_segmap_task_128512_total_time;
        futhark_mc_task_128511_task.task_iter =
            &ctx->futhark_mc_segmap_task_128512_total_iter;
        futhark_mc_task_128511_task.sched = STATIC;
        futhark_mc_task_128511_task.nested_fn =
            futhark_mc_segmap_nested_task_128515;
        
        int futhark_mc_segmap_task_128512_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128511_task);
        
        if (futhark_mc_segmap_task_128512_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120391.mem + gtid_116840 * t_n_m_112577 * (int64_t) 4,
                mem_120372 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120372);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128509_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128509_end -
                 futhark_mc_segmap_parloop_128509_start;
        
        ctx->futhark_mc_segmap_parloop_128509_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128509_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128509_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128507(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116839 = tid;
    int num_tasks_125030 = info.nsubtasks;
    struct futhark_mc_task_128502 *futhark_mc_task_128502 =
                                  (struct futhark_mc_task_128502 *) args;
    struct futhark_context *ctx = futhark_mc_task_128502->ctx;
    uint64_t futhark_mc_segmap_nested_task_128507_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128507_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128502->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128502->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128502->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128502->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128502->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128502->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128502->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128502->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128502->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128502->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128502->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128502->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128502->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120391 = {.desc ="mem_120391", .mem =
                                  futhark_mc_task_128502->free_mem_120391,
                                  .size =0, .references =NULL};
    int64_t iter_125093;
    struct futhark_mc_segmap_parloop_struct_128508
    futhark_mc_segmap_parloop_struct_128508;
    
    futhark_mc_segmap_parloop_struct_128508.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128508.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128508.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128508.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128508.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128508.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128508.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128508.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128508.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128508.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128508.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128508.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128508.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128508.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128508.free_mem_120391 = mem_120391.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128509_task;
    
    futhark_mc_segmap_parloop_128509_task.name =
        "futhark_mc_segmap_parloop_128509";
    futhark_mc_segmap_parloop_128509_task.fn = futhark_mc_segmap_parloop_128509;
    futhark_mc_segmap_parloop_128509_task.args =
        &futhark_mc_segmap_parloop_struct_128508;
    futhark_mc_segmap_parloop_128509_task.iterations = iterations;
    futhark_mc_segmap_parloop_128509_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128509_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128509_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128509_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128509_task);
    
    if (futhark_mc_segmap_parloop_128509_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128509_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128509_total_end -
                 futhark_mc_segmap_parloop_128509_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128509_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128509_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128509_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128507_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128507_end -
                 futhark_mc_segmap_nested_task_128507_start;
        
        ctx->futhark_mc_segmap_nested_task_128507_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128507_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128507_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128528 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120431;
    char *free_mem_120435;
};
struct futhark_mc_segmap_parloop_struct_128530 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120431;
    char *free_mem_120435;
};
static int futhark_mc_segmap_parloop_128531(void *args, int64_t start,
                                            int64_t end, int flat_tid_117024,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128530
    *futhark_mc_segmap_parloop_struct_128530 =
    (struct futhark_mc_segmap_parloop_struct_128530 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128530->ctx;
    uint64_t futhark_mc_segmap_parloop_128531_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128531_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128530->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128530->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128530->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128530->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128530->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128530->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128530->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120431 = {.desc ="mem_120431", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_120431,
                                  .size =0, .references =NULL};
    struct memblock mem_120435 = {.desc ="mem_120435", .mem =
                                  futhark_mc_segmap_parloop_struct_128530->free_mem_120435,
                                  .size =0, .references =NULL};
    size_t mem_120400_cached_sizze_128532 = 0;
    char *mem_120400 = NULL;
    size_t mem_120403_cached_sizze_128533 = 0;
    char *mem_120403 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125320 = start;
    
    if (mem_120400_cached_sizze_128532 < (size_t) bytes_119552) {
        mem_120400 = realloc(mem_120400, bytes_119552);
        mem_120400_cached_sizze_128532 = bytes_119552;
    }
    if (mem_120403_cached_sizze_128533 < (size_t) bytes_119552) {
        mem_120403 = realloc(mem_120403, bytes_119552);
        mem_120403_cached_sizze_128533 = bytes_119552;
    }
    for (; iter_125320 < end; iter_125320++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125404 = m_112519;
        int64_t gtid_117025 = iter_125320;
        int64_t remnant_125405 = iter_125320 - gtid_117025;
        int64_t x_113899 = ((int64_t *) mem_119420.mem)[gtid_117025];
        
        for (int64_t i_125321 = 0; i_125321 < t_n_m_112577; i_125321++) {
            int64_t x_125324 = ((int64_t *) mem_119606.mem)[gtid_117025 *
                                                            t_n_m_112577 +
                                                            i_125321];
            float x_125325 = ((float *) mem_119610.mem)[gtid_117025 *
                                                        t_n_m_112577 +
                                                        i_125321];
            int64_t min_arg_125326 = mul64(t_jump_112527, i_125321);
            int64_t min_res_125327 = smin64(i_112596, min_arg_125326);
            float defunc_0_f_res_125328 = sitofp_i64_f32(min_res_125327);
            float defunc_2_reduce_res_125329;
            float defunc_2_reduce_res_125330;
            float defunc_2_reduce_res_125331;
            float redout_125333;
            float redout_125334;
            float redout_125335;
            
            redout_125333 = 0.0F;
            redout_125334 = 0.0F;
            redout_125335 = 0.0F;
            for (int64_t i_125332 = 0; i_125332 < t_window_112523; i_125332++) {
                bool cond_125336 = sle64(x_113899, i_125332);
                float defunc_0_f_res_125337;
                
                if (cond_125336) {
                    defunc_0_f_res_125337 = 0.0F;
                } else {
                    int64_t i_125338 = add64(x_125324, i_125332);
                    float x_125339 = ((float *) mem_119442.mem)[gtid_117025 *
                                                                n_112520 +
                                                                i_125338];
                    float defunc_0_f_res_f_res_125340 = 1.0F + x_125339;
                    
                    defunc_0_f_res_125337 = defunc_0_f_res_f_res_125340;
                }
                
                float defunc_0_f_res_125341;
                
                if (cond_125336) {
                    defunc_0_f_res_125341 = 0.0F;
                } else {
                    int64_t i_125342 = add64(x_125324, i_125332);
                    float x_125343 = ((float *) mem_120361.mem)[gtid_117025 *
                                                                n_112520 +
                                                                i_125342];
                    
                    defunc_0_f_res_125341 = x_125343;
                }
                
                float x_j_125344 = defunc_0_f_res_125337 -
                      defunc_0_f_res_125328;
                float abs_res_125345 = (float) fabs(x_j_125344);
                float tmp1_125346 = abs_res_125345 / x_125325;
                float x_125347 = tmp1_125346 * tmp1_125346;
                float y_125348 = tmp1_125346 * x_125347;
                float tmp2_125349 = 1.0F - y_125348;
                float x_125350 = tmp2_125349 * tmp2_125349;
                float tmp3_125351 = tmp2_125349 * x_125350;
                float w_j_125352 = defunc_0_f_res_125341 * tmp3_125351;
                float xw_j_125353 = x_j_125344 * w_j_125352;
                float x2w_j_125354 = x_j_125344 * xw_j_125353;
                float defunc_1_op_res_125355 = w_j_125352 + redout_125333;
                float defunc_1_op_res_125356 = xw_j_125353 + redout_125334;
                float defunc_1_op_res_125357 = x2w_j_125354 + redout_125335;
                float redout_tmp_125408 = defunc_1_op_res_125355;
                float redout_tmp_125409 = defunc_1_op_res_125356;
                float redout_tmp_125410 = defunc_1_op_res_125357;
                
                redout_125333 = redout_tmp_125408;
                redout_125334 = redout_tmp_125409;
                redout_125335 = redout_tmp_125410;
            }
            defunc_2_reduce_res_125329 = redout_125333;
            defunc_2_reduce_res_125330 = redout_125334;
            defunc_2_reduce_res_125331 = redout_125335;
            
            float x_125358 = defunc_2_reduce_res_125329 *
                  defunc_2_reduce_res_125331;
            float y_125359 = defunc_2_reduce_res_125330 *
                  defunc_2_reduce_res_125330;
            float y_125360 = x_125358 - y_125359;
            float det1_125361 = 1.0F / y_125360;
            float a11_125362 = defunc_2_reduce_res_125331 * det1_125361;
            float negate_arg_125363 = defunc_2_reduce_res_125330 * det1_125361;
            float b11_125364 = 0.0F - negate_arg_125363;
            float c11_125365 = defunc_2_reduce_res_125329 * det1_125361;
            float defunc_2_reduce_res_125366;
            float defunc_2_reduce_res_125367;
            float redout_125369;
            float redout_125370;
            
            redout_125369 = 0.0F;
            redout_125370 = 0.0F;
            for (int64_t i_125368 = 0; i_125368 < t_window_112523; i_125368++) {
                bool cond_125371 = sle64(x_113899, i_125368);
                float defunc_0_f_res_125372;
                
                if (cond_125371) {
                    defunc_0_f_res_125372 = 0.0F;
                } else {
                    int64_t i_125373 = add64(x_125324, i_125368);
                    float x_125374 = ((float *) mem_119442.mem)[gtid_117025 *
                                                                n_112520 +
                                                                i_125373];
                    float defunc_0_f_res_f_res_125375 = 1.0F + x_125374;
                    
                    defunc_0_f_res_125372 = defunc_0_f_res_f_res_125375;
                }
                
                float defunc_0_f_res_125376;
                
                if (cond_125371) {
                    defunc_0_f_res_125376 = 0.0F;
                } else {
                    int64_t i_125377 = add64(x_125324, i_125368);
                    float x_125378 = ((float *) mem_120361.mem)[gtid_117025 *
                                                                n_112520 +
                                                                i_125377];
                    
                    defunc_0_f_res_125376 = x_125378;
                }
                
                float x_j_125379 = defunc_0_f_res_125372 -
                      defunc_0_f_res_125328;
                float abs_res_125380 = (float) fabs(x_j_125379);
                float tmp1_125381 = abs_res_125380 / x_125325;
                float x_125382 = tmp1_125381 * tmp1_125381;
                float y_125383 = tmp1_125381 * x_125382;
                float tmp2_125384 = 1.0F - y_125383;
                float x_125385 = tmp2_125384 * tmp2_125384;
                float tmp3_125386 = tmp2_125384 * x_125385;
                float tmp4_125387 = defunc_0_f_res_125376 * tmp3_125386;
                float defunc_1_f_res_125388 = x_j_125379 * tmp4_125387;
                float defunc_0_f_res_125389;
                
                if (cond_125371) {
                    defunc_0_f_res_125389 = 0.0F;
                } else {
                    int64_t i_125390 = add64(x_125324, i_125368);
                    float x_125391 = ((float *) mem_120357.mem)[gtid_117025 *
                                                                n_112520 +
                                                                i_125390];
                    
                    defunc_0_f_res_125389 = x_125391;
                }
                
                float x_125392 = a11_125362 * tmp4_125387;
                float y_125393 = b11_125364 * defunc_1_f_res_125388;
                float x_125394 = x_125392 + y_125393;
                float defunc_9_fit_fun_res_125395 = defunc_0_f_res_125389 *
                      x_125394;
                float x_125396 = b11_125364 * tmp4_125387;
                float y_125397 = c11_125365 * defunc_1_f_res_125388;
                float x_125398 = x_125396 + y_125397;
                float defunc_9_slope_fun_res_125399 = defunc_0_f_res_125389 *
                      x_125398;
                float defunc_1_op_res_125400 = defunc_9_fit_fun_res_125395 +
                      redout_125369;
                float defunc_1_op_res_125401 = defunc_9_slope_fun_res_125399 +
                      redout_125370;
                float redout_tmp_125411 = defunc_1_op_res_125400;
                float redout_tmp_125412 = defunc_1_op_res_125401;
                
                redout_125369 = redout_tmp_125411;
                redout_125370 = redout_tmp_125412;
            }
            defunc_2_reduce_res_125366 = redout_125369;
            defunc_2_reduce_res_125367 = redout_125370;
            ((float *) mem_120400)[i_125321] = defunc_2_reduce_res_125366;
            ((float *) mem_120403)[i_125321] = defunc_2_reduce_res_125367;
        }
        memmove(mem_120431.mem + gtid_117025 * t_n_m_112577 * (int64_t) 4,
                mem_120400 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120435.mem + gtid_117025 * t_n_m_112577 * (int64_t) 4,
                mem_120403 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120400);
    free(mem_120403);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128531_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128531_end -
                 futhark_mc_segmap_parloop_128531_start;
        
        ctx->futhark_mc_segmap_parloop_128531_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128531_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128531_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128529(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117024 = tid;
    int num_tasks_125319 = info.nsubtasks;
    struct futhark_mc_task_128528 *futhark_mc_task_128528 =
                                  (struct futhark_mc_task_128528 *) args;
    struct futhark_context *ctx = futhark_mc_task_128528->ctx;
    uint64_t futhark_mc_segmap_task_128529_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128529_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128528->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128528->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128528->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128528->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128528->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128528->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128528->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128528->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128528->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128528->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128528->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128528->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128528->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120431 = {.desc ="mem_120431", .mem =
                                  futhark_mc_task_128528->free_mem_120431,
                                  .size =0, .references =NULL};
    struct memblock mem_120435 = {.desc ="mem_120435", .mem =
                                  futhark_mc_task_128528->free_mem_120435,
                                  .size =0, .references =NULL};
    int64_t iter_125320;
    struct futhark_mc_segmap_parloop_struct_128530
    futhark_mc_segmap_parloop_struct_128530;
    
    futhark_mc_segmap_parloop_struct_128530.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128530.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128530.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128530.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128530.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128530.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128530.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128530.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128530.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128530.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_120431 = mem_120431.mem;
    futhark_mc_segmap_parloop_struct_128530.free_mem_120435 = mem_120435.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128531_task;
    
    futhark_mc_segmap_parloop_128531_task.name =
        "futhark_mc_segmap_parloop_128531";
    futhark_mc_segmap_parloop_128531_task.fn = futhark_mc_segmap_parloop_128531;
    futhark_mc_segmap_parloop_128531_task.args =
        &futhark_mc_segmap_parloop_struct_128530;
    futhark_mc_segmap_parloop_128531_task.iterations = iterations;
    futhark_mc_segmap_parloop_128531_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128531_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128531_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128531_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128531_task);
    
    if (futhark_mc_segmap_parloop_128531_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128531_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128531_total_end -
                 futhark_mc_segmap_parloop_128531_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128531_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128531_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128531_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128529_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128529_end -
                 futhark_mc_segmap_task_128529_start;
        
        ctx->futhark_mc_segmap_task_128529_runs[tid]++;
        ctx->futhark_mc_segmap_task_128529_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128529_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128535 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120431;
    char *free_mem_120435;
};
struct futhark_mc_task_128539 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120394;
    char *free_mem_120397;
};
struct futhark_mc_segmap_parloop_struct_128541 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120394;
    char *free_mem_120397;
};
static int futhark_mc_segmap_parloop_128542(void *args, int64_t start,
                                            int64_t end, int flat_tid_117028,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128541
    *futhark_mc_segmap_parloop_struct_128541 =
    (struct futhark_mc_segmap_parloop_struct_128541 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128541->ctx;
    uint64_t futhark_mc_segmap_parloop_128542_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128542_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128541->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128541->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128541->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128541->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128541->free_i_112596;
    int64_t gtid_117027 =
            futhark_mc_segmap_parloop_struct_128541->free_gtid_117027;
    int64_t x_117125 = futhark_mc_segmap_parloop_struct_128541->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120394 = {.desc ="mem_120394", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_120394,
                                  .size =0, .references =NULL};
    struct memblock mem_120397 = {.desc ="mem_120397", .mem =
                                  futhark_mc_segmap_parloop_struct_128541->free_mem_120397,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125576 = start;
    
    for (; iter_125576 < end; iter_125576++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125637 = t_n_m_112577;
        int64_t gtid_117029 = iter_125576;
        int64_t remnant_125638 = iter_125576 - gtid_117029;
        int64_t x_125495 = ((int64_t *) mem_119606.mem)[gtid_117027 *
                                                        t_n_m_112577 +
                                                        gtid_117029];
        float x_125496 = ((float *) mem_119610.mem)[gtid_117027 * t_n_m_112577 +
                                                    gtid_117029];
        int64_t min_arg_125497 = mul64(t_jump_112527, gtid_117029);
        int64_t min_res_125498 = smin64(i_112596, min_arg_125497);
        float defunc_0_f_res_125499 = sitofp_i64_f32(min_res_125498);
        float defunc_2_reduce_res_125500;
        float defunc_2_reduce_res_125501;
        float defunc_2_reduce_res_125502;
        float redout_125578;
        float redout_125579;
        float redout_125580;
        
        redout_125578 = 0.0F;
        redout_125579 = 0.0F;
        redout_125580 = 0.0F;
        for (int64_t i_125577 = 0; i_125577 < t_window_112523; i_125577++) {
            bool cond_125581 = sle64(x_117125, i_125577);
            float defunc_0_f_res_125582;
            
            if (cond_125581) {
                defunc_0_f_res_125582 = 0.0F;
            } else {
                int64_t i_125583 = add64(x_125495, i_125577);
                float x_125584 = ((float *) mem_119442.mem)[gtid_117027 *
                                                            n_112520 +
                                                            i_125583];
                float defunc_0_f_res_f_res_125585 = 1.0F + x_125584;
                
                defunc_0_f_res_125582 = defunc_0_f_res_f_res_125585;
            }
            
            float defunc_0_f_res_125586;
            
            if (cond_125581) {
                defunc_0_f_res_125586 = 0.0F;
            } else {
                int64_t i_125587 = add64(x_125495, i_125577);
                float x_125588 = ((float *) mem_120361.mem)[gtid_117027 *
                                                            n_112520 +
                                                            i_125587];
                
                defunc_0_f_res_125586 = x_125588;
            }
            
            float x_j_125589 = defunc_0_f_res_125582 - defunc_0_f_res_125499;
            float abs_res_125590 = (float) fabs(x_j_125589);
            float tmp1_125591 = abs_res_125590 / x_125496;
            float x_125592 = tmp1_125591 * tmp1_125591;
            float y_125593 = tmp1_125591 * x_125592;
            float tmp2_125594 = 1.0F - y_125593;
            float x_125595 = tmp2_125594 * tmp2_125594;
            float tmp3_125596 = tmp2_125594 * x_125595;
            float w_j_125597 = defunc_0_f_res_125586 * tmp3_125596;
            float xw_j_125598 = x_j_125589 * w_j_125597;
            float x2w_j_125599 = x_j_125589 * xw_j_125598;
            float defunc_1_op_res_125600 = w_j_125597 + redout_125578;
            float defunc_1_op_res_125601 = xw_j_125598 + redout_125579;
            float defunc_1_op_res_125602 = x2w_j_125599 + redout_125580;
            float redout_tmp_125639 = defunc_1_op_res_125600;
            float redout_tmp_125640 = defunc_1_op_res_125601;
            float redout_tmp_125641 = defunc_1_op_res_125602;
            
            redout_125578 = redout_tmp_125639;
            redout_125579 = redout_tmp_125640;
            redout_125580 = redout_tmp_125641;
        }
        defunc_2_reduce_res_125500 = redout_125578;
        defunc_2_reduce_res_125501 = redout_125579;
        defunc_2_reduce_res_125502 = redout_125580;
        
        float x_125529 = defunc_2_reduce_res_125500 *
              defunc_2_reduce_res_125502;
        float y_125530 = defunc_2_reduce_res_125501 *
              defunc_2_reduce_res_125501;
        float y_125531 = x_125529 - y_125530;
        float det1_125532 = 1.0F / y_125531;
        float a11_125533 = defunc_2_reduce_res_125502 * det1_125532;
        float negate_arg_125534 = defunc_2_reduce_res_125501 * det1_125532;
        float b11_125535 = 0.0F - negate_arg_125534;
        float c11_125536 = defunc_2_reduce_res_125500 * det1_125532;
        float defunc_2_reduce_res_125537;
        float defunc_2_reduce_res_125538;
        float redout_125604;
        float redout_125605;
        
        redout_125604 = 0.0F;
        redout_125605 = 0.0F;
        for (int64_t i_125603 = 0; i_125603 < t_window_112523; i_125603++) {
            bool cond_125606 = sle64(x_117125, i_125603);
            float defunc_0_f_res_125607;
            
            if (cond_125606) {
                defunc_0_f_res_125607 = 0.0F;
            } else {
                int64_t i_125608 = add64(x_125495, i_125603);
                float x_125609 = ((float *) mem_119442.mem)[gtid_117027 *
                                                            n_112520 +
                                                            i_125608];
                float defunc_0_f_res_f_res_125610 = 1.0F + x_125609;
                
                defunc_0_f_res_125607 = defunc_0_f_res_f_res_125610;
            }
            
            float defunc_0_f_res_125611;
            
            if (cond_125606) {
                defunc_0_f_res_125611 = 0.0F;
            } else {
                int64_t i_125612 = add64(x_125495, i_125603);
                float x_125613 = ((float *) mem_120361.mem)[gtid_117027 *
                                                            n_112520 +
                                                            i_125612];
                
                defunc_0_f_res_125611 = x_125613;
            }
            
            float x_j_125614 = defunc_0_f_res_125607 - defunc_0_f_res_125499;
            float abs_res_125615 = (float) fabs(x_j_125614);
            float tmp1_125616 = abs_res_125615 / x_125496;
            float x_125617 = tmp1_125616 * tmp1_125616;
            float y_125618 = tmp1_125616 * x_125617;
            float tmp2_125619 = 1.0F - y_125618;
            float x_125620 = tmp2_125619 * tmp2_125619;
            float tmp3_125621 = tmp2_125619 * x_125620;
            float tmp4_125622 = defunc_0_f_res_125611 * tmp3_125621;
            float defunc_1_f_res_125623 = x_j_125614 * tmp4_125622;
            float defunc_0_f_res_125624;
            
            if (cond_125606) {
                defunc_0_f_res_125624 = 0.0F;
            } else {
                int64_t i_125625 = add64(x_125495, i_125603);
                float x_125626 = ((float *) mem_120357.mem)[gtid_117027 *
                                                            n_112520 +
                                                            i_125625];
                
                defunc_0_f_res_125624 = x_125626;
            }
            
            float x_125627 = a11_125533 * tmp4_125622;
            float y_125628 = b11_125535 * defunc_1_f_res_125623;
            float x_125629 = x_125627 + y_125628;
            float defunc_9_fit_fun_res_125630 = defunc_0_f_res_125624 *
                  x_125629;
            float x_125631 = b11_125535 * tmp4_125622;
            float y_125632 = c11_125536 * defunc_1_f_res_125623;
            float x_125633 = x_125631 + y_125632;
            float defunc_9_slope_fun_res_125634 = defunc_0_f_res_125624 *
                  x_125633;
            float defunc_1_op_res_125635 = defunc_9_fit_fun_res_125630 +
                  redout_125604;
            float defunc_1_op_res_125636 = defunc_9_slope_fun_res_125634 +
                  redout_125605;
            float redout_tmp_125642 = defunc_1_op_res_125635;
            float redout_tmp_125643 = defunc_1_op_res_125636;
            
            redout_125604 = redout_tmp_125642;
            redout_125605 = redout_tmp_125643;
        }
        defunc_2_reduce_res_125537 = redout_125604;
        defunc_2_reduce_res_125538 = redout_125605;
        ((float *) mem_120394.mem)[gtid_117029] = defunc_2_reduce_res_125537;
        ((float *) mem_120397.mem)[gtid_117029] = defunc_2_reduce_res_125538;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128542_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128542_end -
                 futhark_mc_segmap_parloop_128542_start;
        
        ctx->futhark_mc_segmap_parloop_128542_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128542_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128542_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128540(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117028 = tid;
    int num_tasks_125575 = info.nsubtasks;
    struct futhark_mc_task_128539 *futhark_mc_task_128539 =
                                  (struct futhark_mc_task_128539 *) args;
    struct futhark_context *ctx = futhark_mc_task_128539->ctx;
    uint64_t futhark_mc_segmap_task_128540_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128540_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128539->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128539->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128539->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128539->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128539->free_i_112596;
    int64_t gtid_117027 = futhark_mc_task_128539->free_gtid_117027;
    int64_t x_117125 = futhark_mc_task_128539->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128539->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128539->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128539->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128539->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128539->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120394 = {.desc ="mem_120394", .mem =
                                  futhark_mc_task_128539->free_mem_120394,
                                  .size =0, .references =NULL};
    struct memblock mem_120397 = {.desc ="mem_120397", .mem =
                                  futhark_mc_task_128539->free_mem_120397,
                                  .size =0, .references =NULL};
    int64_t iter_125576;
    struct futhark_mc_segmap_parloop_struct_128541
    futhark_mc_segmap_parloop_struct_128541;
    
    futhark_mc_segmap_parloop_struct_128541.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128541.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128541.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128541.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128541.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128541.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128541.free_gtid_117027 = gtid_117027;
    futhark_mc_segmap_parloop_struct_128541.free_x_117125 = x_117125;
    futhark_mc_segmap_parloop_struct_128541.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_120394 = mem_120394.mem;
    futhark_mc_segmap_parloop_struct_128541.free_mem_120397 = mem_120397.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128542_task;
    
    futhark_mc_segmap_parloop_128542_task.name =
        "futhark_mc_segmap_parloop_128542";
    futhark_mc_segmap_parloop_128542_task.fn = futhark_mc_segmap_parloop_128542;
    futhark_mc_segmap_parloop_128542_task.args =
        &futhark_mc_segmap_parloop_struct_128541;
    futhark_mc_segmap_parloop_128542_task.iterations = iterations;
    futhark_mc_segmap_parloop_128542_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128542_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128542_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128542_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128542_task);
    
    if (futhark_mc_segmap_parloop_128542_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128542_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128542_total_end -
                 futhark_mc_segmap_parloop_128542_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128542_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128542_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128542_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128540_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128540_end -
                 futhark_mc_segmap_task_128540_start;
        
        ctx->futhark_mc_segmap_task_128540_runs[tid]++;
        ctx->futhark_mc_segmap_task_128540_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128540_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128544 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120394;
    char *free_mem_120397;
};
struct futhark_mc_task_128546 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125414;
    float free_x_125415;
    float free_defunc_0_f_res_125418;
    float *retval_defunc_2_reduce_res_125419;
    float *retval_defunc_2_reduce_res_125420;
    float *retval_defunc_2_reduce_res_125421;
};
struct futhark_mc_segred_stage_1_parloop_struct_128551 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125414;
    float free_x_125415;
    float free_defunc_0_f_res_125418;
    char *free_reduce_stage_1_tid_res_arr_mem_125711;
    char *free_reduce_stage_1_tid_res_arr_mem_125713;
    char *free_reduce_stage_1_tid_res_arr_mem_125715;
};
static int futhark_mc_segred_stage_1_parloop_128552(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117032,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128551
    *futhark_mc_segred_stage_1_parloop_struct_128551 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128551 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128551->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128552_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128552_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128551->free_n_112520;
    int64_t gtid_117027 =
            futhark_mc_segred_stage_1_parloop_struct_128551->free_gtid_117027;
    int64_t x_117125 =
            futhark_mc_segred_stage_1_parloop_struct_128551->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128551->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128551->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125414 =
            futhark_mc_segred_stage_1_parloop_struct_128551->free_x_125414;
    float x_125415 =
          futhark_mc_segred_stage_1_parloop_struct_128551->free_x_125415;
    float defunc_0_f_res_125418 =
          futhark_mc_segred_stage_1_parloop_struct_128551->free_defunc_0_f_res_125418;
    struct memblock reduce_stage_1_tid_res_arr_mem_125711 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125711",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128551->free_reduce_stage_1_tid_res_arr_mem_125711,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125713 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125713",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128551->free_reduce_stage_1_tid_res_arr_mem_125713,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125715 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125715",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128551->free_reduce_stage_1_tid_res_arr_mem_125715,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125717 = start;
    float x_125645;
    float x_125646;
    float x_125648;
    float x_125649;
    float x_125651;
    float x_125652;
    float local_acc_125718 = 0.0F;
    float local_acc_125719 = 0.0F;
    float local_acc_125720 = 0.0F;
    
    for (; iter_125717 < end; iter_125717++) {
        int64_t gtid_117033 = iter_125717;
        bool cond_125654 = sle64(x_117125, gtid_117033);
        float defunc_0_f_res_125655;
        
        if (cond_125654) {
            defunc_0_f_res_125655 = 0.0F;
        } else {
            int64_t i_125656 = add64(gtid_117033, x_125414);
            float x_125657 = ((float *) mem_119442.mem)[gtid_117027 * n_112520 +
                                                        i_125656];
            float defunc_0_f_res_f_res_125658 = 1.0F + x_125657;
            
            defunc_0_f_res_125655 = defunc_0_f_res_f_res_125658;
        }
        
        float defunc_0_f_res_125659;
        
        if (cond_125654) {
            defunc_0_f_res_125659 = 0.0F;
        } else {
            int64_t i_125660 = add64(gtid_117033, x_125414);
            float x_125661 = ((float *) mem_120361.mem)[gtid_117027 * n_112520 +
                                                        i_125660];
            
            defunc_0_f_res_125659 = x_125661;
        }
        
        float x_j_125662 = defunc_0_f_res_125655 - defunc_0_f_res_125418;
        float abs_res_125663 = (float) fabs(x_j_125662);
        float tmp1_125664 = abs_res_125663 / x_125415;
        float x_125665 = tmp1_125664 * tmp1_125664;
        float y_125666 = tmp1_125664 * x_125665;
        float tmp2_125667 = 1.0F - y_125666;
        float x_125668 = tmp2_125667 * tmp2_125667;
        float tmp3_125669 = tmp2_125667 * x_125668;
        float w_j_125670 = defunc_0_f_res_125659 * tmp3_125669;
        float xw_j_125671 = x_j_125662 * w_j_125670;
        float x2w_j_125672 = x_j_125662 * xw_j_125671;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125645 = local_acc_125718;
        }
        // Load next params
        {
            x_125646 = w_j_125670;
        }
        // Red body
        {
            float defunc_1_op_res_125647 = x_125645 + x_125646;
            
            local_acc_125718 = defunc_1_op_res_125647;
        }
        // Load accum params
        {
            x_125648 = local_acc_125719;
        }
        // Load next params
        {
            x_125649 = xw_j_125671;
        }
        // Red body
        {
            float defunc_1_op_res_125650 = x_125648 + x_125649;
            
            local_acc_125719 = defunc_1_op_res_125650;
        }
        // Load accum params
        {
            x_125651 = local_acc_125720;
        }
        // Load next params
        {
            x_125652 = x2w_j_125672;
        }
        // Red body
        {
            float defunc_1_op_res_125653 = x_125651 + x_125652;
            
            local_acc_125720 = defunc_1_op_res_125653;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125711.mem)[flat_tid_117032] =
        local_acc_125718;
    ((float *) reduce_stage_1_tid_res_arr_mem_125713.mem)[flat_tid_117032] =
        local_acc_125719;
    ((float *) reduce_stage_1_tid_res_arr_mem_125715.mem)[flat_tid_117032] =
        local_acc_125720;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128552_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128552_end -
                 futhark_mc_segred_stage_1_parloop_128552_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128552_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128552_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128552_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128547(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117032 = tid;
    int num_tasks_125710 = info.nsubtasks;
    struct futhark_mc_task_128546 *futhark_mc_task_128546 =
                                  (struct futhark_mc_task_128546 *) args;
    struct futhark_context *ctx = futhark_mc_task_128546->ctx;
    uint64_t futhark_mc_segred_task_128547_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128547_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128546->free_n_112520;
    int64_t gtid_117027 = futhark_mc_task_128546->free_gtid_117027;
    int64_t x_117125 = futhark_mc_task_128546->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128546->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128546->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125414 = futhark_mc_task_128546->free_x_125414;
    float x_125415 = futhark_mc_task_128546->free_x_125415;
    float defunc_0_f_res_125418 =
          futhark_mc_task_128546->free_defunc_0_f_res_125418;
    float defunc_2_reduce_res_125419 =
          *futhark_mc_task_128546->retval_defunc_2_reduce_res_125419;
    float defunc_2_reduce_res_125420 =
          *futhark_mc_task_128546->retval_defunc_2_reduce_res_125420;
    float defunc_2_reduce_res_125421 =
          *futhark_mc_task_128546->retval_defunc_2_reduce_res_125421;
    size_t reduce_stage_1_tid_res_arr_mem_125711_cached_sizze_128548 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125711 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125713_cached_sizze_128549 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125713 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_128550 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125715 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125711_cached_sizze_128548 <
        (size_t) ((int64_t) 4 * num_tasks_125710)) {
        reduce_stage_1_tid_res_arr_mem_125711 =
            realloc(reduce_stage_1_tid_res_arr_mem_125711, (int64_t) 4 *
                    num_tasks_125710);
        reduce_stage_1_tid_res_arr_mem_125711_cached_sizze_128548 =
            (int64_t) 4 * num_tasks_125710;
    }
    if (reduce_stage_1_tid_res_arr_mem_125713_cached_sizze_128549 <
        (size_t) ((int64_t) 4 * num_tasks_125710)) {
        reduce_stage_1_tid_res_arr_mem_125713 =
            realloc(reduce_stage_1_tid_res_arr_mem_125713, (int64_t) 4 *
                    num_tasks_125710);
        reduce_stage_1_tid_res_arr_mem_125713_cached_sizze_128549 =
            (int64_t) 4 * num_tasks_125710;
    }
    if (reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_128550 <
        (size_t) ((int64_t) 4 * num_tasks_125710)) {
        reduce_stage_1_tid_res_arr_mem_125715 =
            realloc(reduce_stage_1_tid_res_arr_mem_125715, (int64_t) 4 *
                    num_tasks_125710);
        reduce_stage_1_tid_res_arr_mem_125715_cached_sizze_128550 =
            (int64_t) 4 * num_tasks_125710;
    }
    
    int64_t iter_125717;
    struct futhark_mc_segred_stage_1_parloop_struct_128551
    futhark_mc_segred_stage_1_parloop_struct_128551;
    
    futhark_mc_segred_stage_1_parloop_struct_128551.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_gtid_117027 =
        gtid_117027;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_x_117125 = x_117125;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_x_125414 = x_125414;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_x_125415 = x_125415;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_defunc_0_f_res_125418 =
        defunc_0_f_res_125418;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_reduce_stage_1_tid_res_arr_mem_125711 =
        reduce_stage_1_tid_res_arr_mem_125711;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_reduce_stage_1_tid_res_arr_mem_125713 =
        reduce_stage_1_tid_res_arr_mem_125713;
    futhark_mc_segred_stage_1_parloop_struct_128551.free_reduce_stage_1_tid_res_arr_mem_125715 =
        reduce_stage_1_tid_res_arr_mem_125715;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128552_task;
    
    futhark_mc_segred_stage_1_parloop_128552_task.name =
        "futhark_mc_segred_stage_1_parloop_128552";
    futhark_mc_segred_stage_1_parloop_128552_task.fn =
        futhark_mc_segred_stage_1_parloop_128552;
    futhark_mc_segred_stage_1_parloop_128552_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128551;
    futhark_mc_segred_stage_1_parloop_128552_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128552_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128552_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128552_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128552_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128552_task);
    
    if (futhark_mc_segred_stage_1_parloop_128552_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128552_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128552_total_end -
                 futhark_mc_segred_stage_1_parloop_128552_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128552_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128552_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128552_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125419 = 0.0F;
        defunc_2_reduce_res_125420 = 0.0F;
        defunc_2_reduce_res_125421 = 0.0F;
    }
    
    float x_125721;
    float x_125722;
    float x_125724;
    float x_125725;
    float x_125727;
    float x_125728;
    
    for (int32_t i_125730 = 0; i_125730 < num_tasks_125710; i_125730++) {
        flat_tid_117032 = i_125730;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125721 = defunc_2_reduce_res_125419;
            }
            // load next params
            {
                x_125722 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125711)[flat_tid_117032];
            }
            // red body
            {
                float defunc_1_op_res_125723 = x_125721 + x_125722;
                
                defunc_2_reduce_res_125419 = defunc_1_op_res_125723;
            }
            // load acc params
            {
                x_125724 = defunc_2_reduce_res_125420;
            }
            // load next params
            {
                x_125725 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125713)[flat_tid_117032];
            }
            // red body
            {
                float defunc_1_op_res_125726 = x_125724 + x_125725;
                
                defunc_2_reduce_res_125420 = defunc_1_op_res_125726;
            }
            // load acc params
            {
                x_125727 = defunc_2_reduce_res_125421;
            }
            // load next params
            {
                x_125728 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125715)[flat_tid_117032];
            }
            // red body
            {
                float defunc_1_op_res_125729 = x_125727 + x_125728;
                
                defunc_2_reduce_res_125421 = defunc_1_op_res_125729;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125711);
    free(reduce_stage_1_tid_res_arr_mem_125713);
    free(reduce_stage_1_tid_res_arr_mem_125715);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128547_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128547_end -
                 futhark_mc_segred_task_128547_start;
        
        ctx->futhark_mc_segred_task_128547_runs[tid]++;
        ctx->futhark_mc_segred_task_128547_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128547_iter[tid] += iterations;
    }
    *futhark_mc_task_128546->retval_defunc_2_reduce_res_125419 =
        defunc_2_reduce_res_125419;
    *futhark_mc_task_128546->retval_defunc_2_reduce_res_125420 =
        defunc_2_reduce_res_125420;
    *futhark_mc_task_128546->retval_defunc_2_reduce_res_125421 =
        defunc_2_reduce_res_125421;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128553 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125414;
    float free_x_125415;
    float free_defunc_0_f_res_125418;
    float free_a11_125454;
    float free_b11_125456;
    float free_c11_125457;
    float *retval_defunc_2_reduce_res_125458;
    float *retval_defunc_2_reduce_res_125459;
};
struct futhark_mc_segred_stage_1_parloop_struct_128557 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117027;
    int64_t free_x_117125;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125414;
    float free_x_125415;
    float free_defunc_0_f_res_125418;
    float free_a11_125454;
    float free_b11_125456;
    float free_c11_125457;
    char *free_reduce_stage_1_tid_res_arr_mem_125732;
    char *free_reduce_stage_1_tid_res_arr_mem_125734;
};
static int futhark_mc_segred_stage_1_parloop_128558(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117034,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128557
    *futhark_mc_segred_stage_1_parloop_struct_128557 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128557 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128557->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128558_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128558_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_n_112520;
    int64_t gtid_117027 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_gtid_117027;
    int64_t x_117125 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128557->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128557->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128557->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125414 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_x_125414;
    float x_125415 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_x_125415;
    float defunc_0_f_res_125418 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_defunc_0_f_res_125418;
    float a11_125454 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_a11_125454;
    float b11_125456 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_b11_125456;
    float c11_125457 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_c11_125457;
    struct memblock reduce_stage_1_tid_res_arr_mem_125732 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125732",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128557->free_reduce_stage_1_tid_res_arr_mem_125732,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125734 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125734",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128557->free_reduce_stage_1_tid_res_arr_mem_125734,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125736 = start;
    float x_125673;
    float x_125674;
    float x_125676;
    float x_125677;
    float local_acc_125737 = 0.0F;
    float local_acc_125738 = 0.0F;
    
    for (; iter_125736 < end; iter_125736++) {
        int64_t gtid_117035 = iter_125736;
        bool cond_125679 = sle64(x_117125, gtid_117035);
        float defunc_0_f_res_125680;
        
        if (cond_125679) {
            defunc_0_f_res_125680 = 0.0F;
        } else {
            int64_t i_125681 = add64(gtid_117035, x_125414);
            float x_125682 = ((float *) mem_119442.mem)[gtid_117027 * n_112520 +
                                                        i_125681];
            float defunc_0_f_res_f_res_125683 = 1.0F + x_125682;
            
            defunc_0_f_res_125680 = defunc_0_f_res_f_res_125683;
        }
        
        float defunc_0_f_res_125684;
        
        if (cond_125679) {
            defunc_0_f_res_125684 = 0.0F;
        } else {
            int64_t i_125685 = add64(gtid_117035, x_125414);
            float x_125686 = ((float *) mem_120361.mem)[gtid_117027 * n_112520 +
                                                        i_125685];
            
            defunc_0_f_res_125684 = x_125686;
        }
        
        float x_j_125687 = defunc_0_f_res_125680 - defunc_0_f_res_125418;
        float abs_res_125688 = (float) fabs(x_j_125687);
        float tmp1_125689 = abs_res_125688 / x_125415;
        float x_125690 = tmp1_125689 * tmp1_125689;
        float y_125691 = tmp1_125689 * x_125690;
        float tmp2_125692 = 1.0F - y_125691;
        float x_125693 = tmp2_125692 * tmp2_125692;
        float tmp3_125694 = tmp2_125692 * x_125693;
        float tmp4_125695 = defunc_0_f_res_125684 * tmp3_125694;
        float defunc_1_f_res_125696 = x_j_125687 * tmp4_125695;
        float defunc_0_f_res_125697;
        
        if (cond_125679) {
            defunc_0_f_res_125697 = 0.0F;
        } else {
            int64_t i_125698 = add64(gtid_117035, x_125414);
            float x_125699 = ((float *) mem_120357.mem)[gtid_117027 * n_112520 +
                                                        i_125698];
            
            defunc_0_f_res_125697 = x_125699;
        }
        
        float x_125700 = a11_125454 * tmp4_125695;
        float y_125701 = b11_125456 * defunc_1_f_res_125696;
        float x_125702 = x_125700 + y_125701;
        float defunc_9_fit_fun_res_125703 = defunc_0_f_res_125697 * x_125702;
        float x_125704 = b11_125456 * tmp4_125695;
        float y_125705 = c11_125457 * defunc_1_f_res_125696;
        float x_125706 = x_125704 + y_125705;
        float defunc_9_slope_fun_res_125707 = defunc_0_f_res_125697 * x_125706;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125673 = local_acc_125737;
        }
        // Load next params
        {
            x_125674 = defunc_9_fit_fun_res_125703;
        }
        // Red body
        {
            float defunc_1_op_res_125675 = x_125673 + x_125674;
            
            local_acc_125737 = defunc_1_op_res_125675;
        }
        // Load accum params
        {
            x_125676 = local_acc_125738;
        }
        // Load next params
        {
            x_125677 = defunc_9_slope_fun_res_125707;
        }
        // Red body
        {
            float defunc_1_op_res_125678 = x_125676 + x_125677;
            
            local_acc_125738 = defunc_1_op_res_125678;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125732.mem)[flat_tid_117034] =
        local_acc_125737;
    ((float *) reduce_stage_1_tid_res_arr_mem_125734.mem)[flat_tid_117034] =
        local_acc_125738;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128558_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128558_end -
                 futhark_mc_segred_stage_1_parloop_128558_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128558_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128558_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128554(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117034 = tid;
    int num_tasks_125731 = info.nsubtasks;
    struct futhark_mc_task_128553 *futhark_mc_task_128553 =
                                  (struct futhark_mc_task_128553 *) args;
    struct futhark_context *ctx = futhark_mc_task_128553->ctx;
    uint64_t futhark_mc_segred_task_128554_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128554_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128553->free_n_112520;
    int64_t gtid_117027 = futhark_mc_task_128553->free_gtid_117027;
    int64_t x_117125 = futhark_mc_task_128553->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128553->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128553->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128553->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125414 = futhark_mc_task_128553->free_x_125414;
    float x_125415 = futhark_mc_task_128553->free_x_125415;
    float defunc_0_f_res_125418 =
          futhark_mc_task_128553->free_defunc_0_f_res_125418;
    float a11_125454 = futhark_mc_task_128553->free_a11_125454;
    float b11_125456 = futhark_mc_task_128553->free_b11_125456;
    float c11_125457 = futhark_mc_task_128553->free_c11_125457;
    float defunc_2_reduce_res_125458 =
          *futhark_mc_task_128553->retval_defunc_2_reduce_res_125458;
    float defunc_2_reduce_res_125459 =
          *futhark_mc_task_128553->retval_defunc_2_reduce_res_125459;
    size_t reduce_stage_1_tid_res_arr_mem_125732_cached_sizze_128555 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125732 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125734_cached_sizze_128556 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125734 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125732_cached_sizze_128555 <
        (size_t) ((int64_t) 4 * num_tasks_125731)) {
        reduce_stage_1_tid_res_arr_mem_125732 =
            realloc(reduce_stage_1_tid_res_arr_mem_125732, (int64_t) 4 *
                    num_tasks_125731);
        reduce_stage_1_tid_res_arr_mem_125732_cached_sizze_128555 =
            (int64_t) 4 * num_tasks_125731;
    }
    if (reduce_stage_1_tid_res_arr_mem_125734_cached_sizze_128556 <
        (size_t) ((int64_t) 4 * num_tasks_125731)) {
        reduce_stage_1_tid_res_arr_mem_125734 =
            realloc(reduce_stage_1_tid_res_arr_mem_125734, (int64_t) 4 *
                    num_tasks_125731);
        reduce_stage_1_tid_res_arr_mem_125734_cached_sizze_128556 =
            (int64_t) 4 * num_tasks_125731;
    }
    
    int64_t iter_125736;
    struct futhark_mc_segred_stage_1_parloop_struct_128557
    futhark_mc_segred_stage_1_parloop_struct_128557;
    
    futhark_mc_segred_stage_1_parloop_struct_128557.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_gtid_117027 =
        gtid_117027;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_x_117125 = x_117125;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_x_125414 = x_125414;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_x_125415 = x_125415;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_defunc_0_f_res_125418 =
        defunc_0_f_res_125418;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_a11_125454 =
        a11_125454;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_b11_125456 =
        b11_125456;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_c11_125457 =
        c11_125457;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_reduce_stage_1_tid_res_arr_mem_125732 =
        reduce_stage_1_tid_res_arr_mem_125732;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_reduce_stage_1_tid_res_arr_mem_125734 =
        reduce_stage_1_tid_res_arr_mem_125734;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128558_task;
    
    futhark_mc_segred_stage_1_parloop_128558_task.name =
        "futhark_mc_segred_stage_1_parloop_128558";
    futhark_mc_segred_stage_1_parloop_128558_task.fn =
        futhark_mc_segred_stage_1_parloop_128558;
    futhark_mc_segred_stage_1_parloop_128558_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128557;
    futhark_mc_segred_stage_1_parloop_128558_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128558_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128558_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128558_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128558_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128558_task);
    
    if (futhark_mc_segred_stage_1_parloop_128558_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128558_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128558_total_end -
                 futhark_mc_segred_stage_1_parloop_128558_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125458 = 0.0F;
        defunc_2_reduce_res_125459 = 0.0F;
    }
    
    float x_125739;
    float x_125740;
    float x_125742;
    float x_125743;
    
    for (int32_t i_125745 = 0; i_125745 < num_tasks_125731; i_125745++) {
        flat_tid_117034 = i_125745;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125739 = defunc_2_reduce_res_125458;
            }
            // load next params
            {
                x_125740 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125732)[flat_tid_117034];
            }
            // red body
            {
                float defunc_1_op_res_125741 = x_125739 + x_125740;
                
                defunc_2_reduce_res_125458 = defunc_1_op_res_125741;
            }
            // load acc params
            {
                x_125742 = defunc_2_reduce_res_125459;
            }
            // load next params
            {
                x_125743 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125734)[flat_tid_117034];
            }
            // red body
            {
                float defunc_1_op_res_125744 = x_125742 + x_125743;
                
                defunc_2_reduce_res_125459 = defunc_1_op_res_125744;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125732);
    free(reduce_stage_1_tid_res_arr_mem_125734);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128554_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128554_end -
                 futhark_mc_segred_task_128554_start;
        
        ctx->futhark_mc_segred_task_128554_runs[tid]++;
        ctx->futhark_mc_segred_task_128554_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128554_iter[tid] += iterations;
    }
    *futhark_mc_task_128553->retval_defunc_2_reduce_res_125458 =
        defunc_2_reduce_res_125458;
    *futhark_mc_task_128553->retval_defunc_2_reduce_res_125459 =
        defunc_2_reduce_res_125459;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128545(void *args, int64_t start,
                                            int64_t end, int flat_tid_117030,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128544
    *futhark_mc_segmap_parloop_struct_128544 =
    (struct futhark_mc_segmap_parloop_struct_128544 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128544->ctx;
    uint64_t futhark_mc_segmap_parloop_128545_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128545_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128544->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128544->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128544->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128544->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128544->free_i_112596;
    int64_t gtid_117027 =
            futhark_mc_segmap_parloop_struct_128544->free_gtid_117027;
    int64_t x_117125 = futhark_mc_segmap_parloop_struct_128544->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120394 = {.desc ="mem_120394", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120394,
                                  .size =0, .references =NULL};
    struct memblock mem_120397 = {.desc ="mem_120397", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120397,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125644 = start;
    
    for (; iter_125644 < end; iter_125644++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125708 = t_n_m_112577;
        int64_t gtid_117031 = iter_125644;
        int64_t remnant_125709 = iter_125644 - gtid_117031;
        int64_t x_125414 = ((int64_t *) mem_119606.mem)[gtid_117027 *
                                                        t_n_m_112577 +
                                                        gtid_117031];
        float x_125415 = ((float *) mem_119610.mem)[gtid_117027 * t_n_m_112577 +
                                                    gtid_117031];
        int64_t min_arg_125416 = mul64(t_jump_112527, gtid_117031);
        int64_t min_res_125417 = smin64(i_112596, min_arg_125416);
        float defunc_0_f_res_125418 = sitofp_i64_f32(min_res_125417);
        float defunc_2_reduce_res_125419;
        float defunc_2_reduce_res_125420;
        float defunc_2_reduce_res_125421;
        int64_t flat_tid_117032 = (int64_t) 0;
        int32_t num_tasks_125710;
        struct futhark_mc_task_128546 futhark_mc_task_128546;
        
        futhark_mc_task_128546.ctx = ctx;
        futhark_mc_task_128546.free_n_112520 = n_112520;
        futhark_mc_task_128546.free_gtid_117027 = gtid_117027;
        futhark_mc_task_128546.free_x_117125 = x_117125;
        futhark_mc_task_128546.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128546.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128546.free_x_125414 = x_125414;
        futhark_mc_task_128546.free_x_125415 = x_125415;
        futhark_mc_task_128546.free_defunc_0_f_res_125418 =
            defunc_0_f_res_125418;
        futhark_mc_task_128546.retval_defunc_2_reduce_res_125419 =
            &defunc_2_reduce_res_125419;
        futhark_mc_task_128546.retval_defunc_2_reduce_res_125420 =
            &defunc_2_reduce_res_125420;
        futhark_mc_task_128546.retval_defunc_2_reduce_res_125421 =
            &defunc_2_reduce_res_125421;
        
        struct scheduler_segop futhark_mc_task_128546_task;
        
        futhark_mc_task_128546_task.args = &futhark_mc_task_128546;
        futhark_mc_task_128546_task.top_level_fn =
            futhark_mc_segred_task_128547;
        futhark_mc_task_128546_task.name = "futhark_mc_segred_task_128547";
        futhark_mc_task_128546_task.iterations = t_window_112523;
        futhark_mc_task_128546_task.task_time =
            &ctx->futhark_mc_segred_task_128547_total_time;
        futhark_mc_task_128546_task.task_iter =
            &ctx->futhark_mc_segred_task_128547_total_iter;
        futhark_mc_task_128546_task.sched = STATIC;
        futhark_mc_task_128546_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128547_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128546_task);
        
        if (futhark_mc_segred_task_128547_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_125450 = defunc_2_reduce_res_125419 *
              defunc_2_reduce_res_125421;
        float y_125451 = defunc_2_reduce_res_125420 *
              defunc_2_reduce_res_125420;
        float y_125452 = x_125450 - y_125451;
        float det1_125453 = 1.0F / y_125452;
        float a11_125454 = defunc_2_reduce_res_125421 * det1_125453;
        float negate_arg_125455 = defunc_2_reduce_res_125420 * det1_125453;
        float b11_125456 = 0.0F - negate_arg_125455;
        float c11_125457 = defunc_2_reduce_res_125419 * det1_125453;
        float defunc_2_reduce_res_125458;
        float defunc_2_reduce_res_125459;
        int64_t flat_tid_117034 = (int64_t) 0;
        int32_t num_tasks_125731;
        struct futhark_mc_task_128553 futhark_mc_task_128553;
        
        futhark_mc_task_128553.ctx = ctx;
        futhark_mc_task_128553.free_n_112520 = n_112520;
        futhark_mc_task_128553.free_gtid_117027 = gtid_117027;
        futhark_mc_task_128553.free_x_117125 = x_117125;
        futhark_mc_task_128553.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128553.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128553.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128553.free_x_125414 = x_125414;
        futhark_mc_task_128553.free_x_125415 = x_125415;
        futhark_mc_task_128553.free_defunc_0_f_res_125418 =
            defunc_0_f_res_125418;
        futhark_mc_task_128553.free_a11_125454 = a11_125454;
        futhark_mc_task_128553.free_b11_125456 = b11_125456;
        futhark_mc_task_128553.free_c11_125457 = c11_125457;
        futhark_mc_task_128553.retval_defunc_2_reduce_res_125458 =
            &defunc_2_reduce_res_125458;
        futhark_mc_task_128553.retval_defunc_2_reduce_res_125459 =
            &defunc_2_reduce_res_125459;
        
        struct scheduler_segop futhark_mc_task_128553_task;
        
        futhark_mc_task_128553_task.args = &futhark_mc_task_128553;
        futhark_mc_task_128553_task.top_level_fn =
            futhark_mc_segred_task_128554;
        futhark_mc_task_128553_task.name = "futhark_mc_segred_task_128554";
        futhark_mc_task_128553_task.iterations = t_window_112523;
        futhark_mc_task_128553_task.task_time =
            &ctx->futhark_mc_segred_task_128554_total_time;
        futhark_mc_task_128553_task.task_iter =
            &ctx->futhark_mc_segred_task_128554_total_iter;
        futhark_mc_task_128553_task.sched = STATIC;
        futhark_mc_task_128553_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128554_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128553_task);
        
        if (futhark_mc_segred_task_128554_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120394.mem)[gtid_117031] = defunc_2_reduce_res_125458;
        ((float *) mem_120397.mem)[gtid_117031] = defunc_2_reduce_res_125459;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128545_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128545_end -
                 futhark_mc_segmap_parloop_128545_start;
        
        ctx->futhark_mc_segmap_parloop_128545_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128545_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128545_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128543(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117030 = tid;
    int num_tasks_125575 = info.nsubtasks;
    struct futhark_mc_task_128539 *futhark_mc_task_128539 =
                                  (struct futhark_mc_task_128539 *) args;
    struct futhark_context *ctx = futhark_mc_task_128539->ctx;
    uint64_t futhark_mc_segmap_nested_task_128543_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128543_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128539->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128539->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128539->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128539->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128539->free_i_112596;
    int64_t gtid_117027 = futhark_mc_task_128539->free_gtid_117027;
    int64_t x_117125 = futhark_mc_task_128539->free_x_117125;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128539->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128539->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128539->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128539->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128539->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120394 = {.desc ="mem_120394", .mem =
                                  futhark_mc_task_128539->free_mem_120394,
                                  .size =0, .references =NULL};
    struct memblock mem_120397 = {.desc ="mem_120397", .mem =
                                  futhark_mc_task_128539->free_mem_120397,
                                  .size =0, .references =NULL};
    int64_t iter_125644;
    struct futhark_mc_segmap_parloop_struct_128544
    futhark_mc_segmap_parloop_struct_128544;
    
    futhark_mc_segmap_parloop_struct_128544.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128544.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128544.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128544.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128544.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128544.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128544.free_gtid_117027 = gtid_117027;
    futhark_mc_segmap_parloop_struct_128544.free_x_117125 = x_117125;
    futhark_mc_segmap_parloop_struct_128544.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120394 = mem_120394.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120397 = mem_120397.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128545_task;
    
    futhark_mc_segmap_parloop_128545_task.name =
        "futhark_mc_segmap_parloop_128545";
    futhark_mc_segmap_parloop_128545_task.fn = futhark_mc_segmap_parloop_128545;
    futhark_mc_segmap_parloop_128545_task.args =
        &futhark_mc_segmap_parloop_struct_128544;
    futhark_mc_segmap_parloop_128545_task.iterations = iterations;
    futhark_mc_segmap_parloop_128545_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128545_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128545_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128545_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128545_task);
    
    if (futhark_mc_segmap_parloop_128545_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128545_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128545_total_end -
                 futhark_mc_segmap_parloop_128545_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128543_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128543_end -
                 futhark_mc_segmap_nested_task_128543_start;
        
        ctx->futhark_mc_segmap_nested_task_128543_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128543_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128543_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128536(void *args, int64_t start,
                                            int64_t end, int flat_tid_117026,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128535
    *futhark_mc_segmap_parloop_struct_128535 =
    (struct futhark_mc_segmap_parloop_struct_128535 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128535->ctx;
    uint64_t futhark_mc_segmap_parloop_128536_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128536_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128535->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128535->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128535->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128535->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128535->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128535->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128535->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120431 = {.desc ="mem_120431", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120431,
                                  .size =0, .references =NULL};
    struct memblock mem_120435 = {.desc ="mem_120435", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120435,
                                  .size =0, .references =NULL};
    size_t mem_120394_cached_sizze_128537 = 0;
    char *mem_120394 = NULL;
    size_t mem_120397_cached_sizze_128538 = 0;
    char *mem_120397 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125413 = start;
    
    if (mem_120394_cached_sizze_128537 < (size_t) bytes_119552) {
        mem_120394 = realloc(mem_120394, bytes_119552);
        mem_120394_cached_sizze_128537 = bytes_119552;
    }
    if (mem_120397_cached_sizze_128538 < (size_t) bytes_119552) {
        mem_120397 = realloc(mem_120397, bytes_119552);
        mem_120397_cached_sizze_128538 = bytes_119552;
    }
    for (; iter_125413 < end; iter_125413++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125573 = m_112519;
        int64_t gtid_117027 = iter_125413;
        int64_t remnant_125574 = iter_125413 - gtid_117027;
        int64_t x_117125 = ((int64_t *) mem_119420.mem)[gtid_117027];
        int64_t flat_tid_117028 = (int64_t) 0;
        int32_t num_tasks_125575;
        int64_t flat_tid_117030 = (int64_t) 0;
        struct futhark_mc_task_128539 futhark_mc_task_128539;
        
        futhark_mc_task_128539.ctx = ctx;
        futhark_mc_task_128539.free_n_112520 = n_112520;
        futhark_mc_task_128539.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128539.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128539.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128539.free_i_112596 = i_112596;
        futhark_mc_task_128539.free_gtid_117027 = gtid_117027;
        futhark_mc_task_128539.free_x_117125 = x_117125;
        futhark_mc_task_128539.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128539.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128539.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128539.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128539.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128539.free_mem_120394 = mem_120394;
        futhark_mc_task_128539.free_mem_120397 = mem_120397;
        
        struct scheduler_segop futhark_mc_task_128539_task;
        
        futhark_mc_task_128539_task.args = &futhark_mc_task_128539;
        futhark_mc_task_128539_task.top_level_fn =
            futhark_mc_segmap_task_128540;
        futhark_mc_task_128539_task.name = "futhark_mc_segmap_task_128540";
        futhark_mc_task_128539_task.iterations = t_n_m_112577;
        futhark_mc_task_128539_task.task_time =
            &ctx->futhark_mc_segmap_task_128540_total_time;
        futhark_mc_task_128539_task.task_iter =
            &ctx->futhark_mc_segmap_task_128540_total_iter;
        futhark_mc_task_128539_task.sched = STATIC;
        futhark_mc_task_128539_task.nested_fn =
            futhark_mc_segmap_nested_task_128543;
        
        int futhark_mc_segmap_task_128540_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128539_task);
        
        if (futhark_mc_segmap_task_128540_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120431.mem + gtid_117027 * t_n_m_112577 * (int64_t) 4,
                mem_120394 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120435.mem + gtid_117027 * t_n_m_112577 * (int64_t) 4,
                mem_120397 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120394);
    free(mem_120397);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128536_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128536_end -
                 futhark_mc_segmap_parloop_128536_start;
        
        ctx->futhark_mc_segmap_parloop_128536_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128536_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128536_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128534(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117026 = tid;
    int num_tasks_125319 = info.nsubtasks;
    struct futhark_mc_task_128528 *futhark_mc_task_128528 =
                                  (struct futhark_mc_task_128528 *) args;
    struct futhark_context *ctx = futhark_mc_task_128528->ctx;
    uint64_t futhark_mc_segmap_nested_task_128534_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128534_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128528->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128528->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128528->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128528->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128528->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128528->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128528->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128528->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128528->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128528->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128528->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128528->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128528->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120431 = {.desc ="mem_120431", .mem =
                                  futhark_mc_task_128528->free_mem_120431,
                                  .size =0, .references =NULL};
    struct memblock mem_120435 = {.desc ="mem_120435", .mem =
                                  futhark_mc_task_128528->free_mem_120435,
                                  .size =0, .references =NULL};
    int64_t iter_125413;
    struct futhark_mc_segmap_parloop_struct_128535
    futhark_mc_segmap_parloop_struct_128535;
    
    futhark_mc_segmap_parloop_struct_128535.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128535.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128535.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128535.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128535.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128535.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128535.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128535.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120431 = mem_120431.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120435 = mem_120435.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128536_task;
    
    futhark_mc_segmap_parloop_128536_task.name =
        "futhark_mc_segmap_parloop_128536";
    futhark_mc_segmap_parloop_128536_task.fn = futhark_mc_segmap_parloop_128536;
    futhark_mc_segmap_parloop_128536_task.args =
        &futhark_mc_segmap_parloop_struct_128535;
    futhark_mc_segmap_parloop_128536_task.iterations = iterations;
    futhark_mc_segmap_parloop_128536_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128536_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128536_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128536_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128536_task);
    
    if (futhark_mc_segmap_parloop_128536_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128536_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128536_total_end -
                 futhark_mc_segmap_parloop_128536_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128534_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128534_end -
                 futhark_mc_segmap_nested_task_128534_start;
        
        ctx->futhark_mc_segmap_nested_task_128534_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128534_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128534_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128559 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120475;
    char *free_mem_120479;
};
struct futhark_mc_segmap_parloop_struct_128561 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120475;
    char *free_mem_120479;
};
static int futhark_mc_segmap_parloop_128562(void *args, int64_t start,
                                            int64_t end, int flat_tid_117296,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128561
    *futhark_mc_segmap_parloop_struct_128561 =
    (struct futhark_mc_segmap_parloop_struct_128561 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128561->ctx;
    uint64_t futhark_mc_segmap_parloop_128562_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128562_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128561->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128561->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128561->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128561->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128561->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128561->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128561->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120475 = {.desc ="mem_120475", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120475,
                                  .size =0, .references =NULL};
    struct memblock mem_120479 = {.desc ="mem_120479", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120479,
                                  .size =0, .references =NULL};
    size_t mem_120444_cached_sizze_128563 = 0;
    char *mem_120444 = NULL;
    size_t mem_120447_cached_sizze_128564 = 0;
    char *mem_120447 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125747 = start;
    
    if (mem_120444_cached_sizze_128563 < (size_t) bytes_119552) {
        mem_120444 = realloc(mem_120444, bytes_119552);
        mem_120444_cached_sizze_128563 = bytes_119552;
    }
    if (mem_120447_cached_sizze_128564 < (size_t) bytes_119552) {
        mem_120447 = realloc(mem_120447, bytes_119552);
        mem_120447_cached_sizze_128564 = bytes_119552;
    }
    for (; iter_125747 < end; iter_125747++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125861 = m_112519;
        int64_t gtid_117297 = iter_125747;
        int64_t remnant_125862 = iter_125747 - gtid_117297;
        int64_t x_113996 = ((int64_t *) mem_119420.mem)[gtid_117297];
        
        for (int64_t i_125748 = 0; i_125748 < t_n_m_112577; i_125748++) {
            int64_t x_125751 = ((int64_t *) mem_119606.mem)[gtid_117297 *
                                                            t_n_m_112577 +
                                                            i_125748];
            float x_125752 = ((float *) mem_119610.mem)[gtid_117297 *
                                                        t_n_m_112577 +
                                                        i_125748];
            int64_t min_arg_125753 = mul64(t_jump_112527, i_125748);
            int64_t min_res_125754 = smin64(i_112596, min_arg_125753);
            float defunc_0_f_res_125755 = sitofp_i64_f32(min_res_125754);
            float defunc_2_reduce_res_125756;
            float defunc_2_reduce_res_125757;
            float defunc_2_reduce_res_125758;
            float defunc_2_reduce_res_125759;
            float defunc_2_reduce_res_125760;
            float redout_125762;
            float redout_125763;
            float redout_125764;
            float redout_125765;
            float redout_125766;
            
            redout_125762 = 0.0F;
            redout_125763 = 0.0F;
            redout_125764 = 0.0F;
            redout_125765 = 0.0F;
            redout_125766 = 0.0F;
            for (int64_t i_125761 = 0; i_125761 < t_window_112523; i_125761++) {
                bool cond_125767 = sle64(x_113996, i_125761);
                float defunc_0_f_res_125768;
                
                if (cond_125767) {
                    defunc_0_f_res_125768 = 0.0F;
                } else {
                    int64_t i_125769 = add64(x_125751, i_125761);
                    float x_125770 = ((float *) mem_119442.mem)[gtid_117297 *
                                                                n_112520 +
                                                                i_125769];
                    float defunc_0_f_res_f_res_125771 = 1.0F + x_125770;
                    
                    defunc_0_f_res_125768 = defunc_0_f_res_f_res_125771;
                }
                
                float defunc_0_f_res_125772;
                
                if (cond_125767) {
                    defunc_0_f_res_125772 = 0.0F;
                } else {
                    int64_t i_125773 = add64(x_125751, i_125761);
                    float x_125774 = ((float *) mem_120361.mem)[gtid_117297 *
                                                                n_112520 +
                                                                i_125773];
                    
                    defunc_0_f_res_125772 = x_125774;
                }
                
                float x_j_125775 = defunc_0_f_res_125768 -
                      defunc_0_f_res_125755;
                float abs_res_125776 = (float) fabs(x_j_125775);
                float tmp1_125777 = abs_res_125776 / x_125752;
                float x_125778 = tmp1_125777 * tmp1_125777;
                float y_125779 = tmp1_125777 * x_125778;
                float tmp2_125780 = 1.0F - y_125779;
                float x_125781 = tmp2_125780 * tmp2_125780;
                float tmp3_125782 = tmp2_125780 * x_125781;
                float w_j_125783 = defunc_0_f_res_125772 * tmp3_125782;
                float xw_j_125784 = x_j_125775 * w_j_125783;
                float x2w_j_125785 = x_j_125775 * xw_j_125784;
                float x3w_j_125786 = x_j_125775 * x2w_j_125785;
                float x4w_j_125787 = x_j_125775 * x3w_j_125786;
                float defunc_1_op_res_125788 = w_j_125783 + redout_125762;
                float defunc_1_op_res_125789 = xw_j_125784 + redout_125763;
                float defunc_1_op_res_125790 = x2w_j_125785 + redout_125764;
                float defunc_1_op_res_125791 = x3w_j_125786 + redout_125765;
                float defunc_1_op_res_125792 = x4w_j_125787 + redout_125766;
                float redout_tmp_125865 = defunc_1_op_res_125788;
                float redout_tmp_125866 = defunc_1_op_res_125789;
                float redout_tmp_125867 = defunc_1_op_res_125790;
                float redout_tmp_125868 = defunc_1_op_res_125791;
                float redout_tmp_125869 = defunc_1_op_res_125792;
                
                redout_125762 = redout_tmp_125865;
                redout_125763 = redout_tmp_125866;
                redout_125764 = redout_tmp_125867;
                redout_125765 = redout_tmp_125868;
                redout_125766 = redout_tmp_125869;
            }
            defunc_2_reduce_res_125756 = redout_125762;
            defunc_2_reduce_res_125757 = redout_125763;
            defunc_2_reduce_res_125758 = redout_125764;
            defunc_2_reduce_res_125759 = redout_125765;
            defunc_2_reduce_res_125760 = redout_125766;
            
            float x_125793 = defunc_2_reduce_res_125758 *
                  defunc_2_reduce_res_125760;
            float y_125794 = defunc_2_reduce_res_125759 *
                  defunc_2_reduce_res_125759;
            float a12_125795 = x_125793 - y_125794;
            float x_125796 = defunc_2_reduce_res_125758 *
                  defunc_2_reduce_res_125759;
            float y_125797 = defunc_2_reduce_res_125757 *
                  defunc_2_reduce_res_125760;
            float b12_125798 = x_125796 - y_125797;
            float x_125799 = defunc_2_reduce_res_125757 *
                  defunc_2_reduce_res_125759;
            float y_125800 = defunc_2_reduce_res_125758 *
                  defunc_2_reduce_res_125758;
            float c12_125801 = x_125799 - y_125800;
            float x_125802 = defunc_2_reduce_res_125756 *
                  defunc_2_reduce_res_125760;
            float b2_125803 = x_125802 - y_125800;
            float x_125804 = defunc_2_reduce_res_125757 *
                  defunc_2_reduce_res_125758;
            float y_125805 = defunc_2_reduce_res_125756 *
                  defunc_2_reduce_res_125759;
            float c2_125806 = x_125804 - y_125805;
            float x_125807 = defunc_2_reduce_res_125756 * a12_125795;
            float y_125808 = defunc_2_reduce_res_125757 * b12_125798;
            float x_125809 = x_125807 + y_125808;
            float y_125810 = defunc_2_reduce_res_125758 * c12_125801;
            float y_125811 = x_125809 + y_125810;
            float det_125812 = 1.0F / y_125811;
            float a12_125813 = a12_125795 * det_125812;
            float b12_125814 = b12_125798 * det_125812;
            float c12_125815 = c12_125801 * det_125812;
            float b2_125816 = b2_125803 * det_125812;
            float c2_125817 = c2_125806 * det_125812;
            float defunc_2_reduce_res_125818;
            float defunc_2_reduce_res_125819;
            float redout_125821;
            float redout_125822;
            
            redout_125821 = 0.0F;
            redout_125822 = 0.0F;
            for (int64_t i_125820 = 0; i_125820 < t_window_112523; i_125820++) {
                bool cond_125823 = sle64(x_113996, i_125820);
                float defunc_0_f_res_125824;
                
                if (cond_125823) {
                    defunc_0_f_res_125824 = 0.0F;
                } else {
                    int64_t i_125825 = add64(x_125751, i_125820);
                    float x_125826 = ((float *) mem_119442.mem)[gtid_117297 *
                                                                n_112520 +
                                                                i_125825];
                    float defunc_0_f_res_f_res_125827 = 1.0F + x_125826;
                    
                    defunc_0_f_res_125824 = defunc_0_f_res_f_res_125827;
                }
                
                float defunc_0_f_res_125828;
                
                if (cond_125823) {
                    defunc_0_f_res_125828 = 0.0F;
                } else {
                    int64_t i_125829 = add64(x_125751, i_125820);
                    float x_125830 = ((float *) mem_120361.mem)[gtid_117297 *
                                                                n_112520 +
                                                                i_125829];
                    
                    defunc_0_f_res_125828 = x_125830;
                }
                
                float x_j_125831 = defunc_0_f_res_125824 -
                      defunc_0_f_res_125755;
                float abs_res_125832 = (float) fabs(x_j_125831);
                float tmp1_125833 = abs_res_125832 / x_125752;
                float x_125834 = tmp1_125833 * tmp1_125833;
                float y_125835 = tmp1_125833 * x_125834;
                float tmp2_125836 = 1.0F - y_125835;
                float x_125837 = tmp2_125836 * tmp2_125836;
                float tmp3_125838 = tmp2_125836 * x_125837;
                float tmp4_125839 = defunc_0_f_res_125828 * tmp3_125838;
                float defunc_1_f_res_125840 = x_j_125831 * tmp4_125839;
                float defunc_1_f_res_125841 = x_j_125831 *
                      defunc_1_f_res_125840;
                float defunc_0_f_res_125842;
                
                if (cond_125823) {
                    defunc_0_f_res_125842 = 0.0F;
                } else {
                    int64_t i_125843 = add64(x_125751, i_125820);
                    float x_125844 = ((float *) mem_120357.mem)[gtid_117297 *
                                                                n_112520 +
                                                                i_125843];
                    
                    defunc_0_f_res_125842 = x_125844;
                }
                
                float x_125845 = a12_125813 * tmp4_125839;
                float y_125846 = b12_125814 * defunc_1_f_res_125840;
                float x_125847 = x_125845 + y_125846;
                float y_125848 = c12_125815 * defunc_1_f_res_125841;
                float x_125849 = x_125847 + y_125848;
                float defunc_9_fit_fun_res_125850 = defunc_0_f_res_125842 *
                      x_125849;
                float x_125851 = b12_125814 * tmp4_125839;
                float y_125852 = b2_125816 * defunc_1_f_res_125840;
                float x_125853 = x_125851 + y_125852;
                float y_125854 = c2_125817 * defunc_1_f_res_125841;
                float x_125855 = x_125853 + y_125854;
                float defunc_9_slope_fun_res_125856 = defunc_0_f_res_125842 *
                      x_125855;
                float defunc_1_op_res_125857 = defunc_9_fit_fun_res_125850 +
                      redout_125821;
                float defunc_1_op_res_125858 = defunc_9_slope_fun_res_125856 +
                      redout_125822;
                float redout_tmp_125870 = defunc_1_op_res_125857;
                float redout_tmp_125871 = defunc_1_op_res_125858;
                
                redout_125821 = redout_tmp_125870;
                redout_125822 = redout_tmp_125871;
            }
            defunc_2_reduce_res_125818 = redout_125821;
            defunc_2_reduce_res_125819 = redout_125822;
            ((float *) mem_120444)[i_125748] = defunc_2_reduce_res_125818;
            ((float *) mem_120447)[i_125748] = defunc_2_reduce_res_125819;
        }
        memmove(mem_120475.mem + gtid_117297 * t_n_m_112577 * (int64_t) 4,
                mem_120444 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120479.mem + gtid_117297 * t_n_m_112577 * (int64_t) 4,
                mem_120447 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120444);
    free(mem_120447);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128562_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128562_end -
                 futhark_mc_segmap_parloop_128562_start;
        
        ctx->futhark_mc_segmap_parloop_128562_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128562_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128562_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128560(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117296 = tid;
    int num_tasks_125746 = info.nsubtasks;
    struct futhark_mc_task_128559 *futhark_mc_task_128559 =
                                  (struct futhark_mc_task_128559 *) args;
    struct futhark_context *ctx = futhark_mc_task_128559->ctx;
    uint64_t futhark_mc_segmap_task_128560_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128560_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128559->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128559->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128559->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128559->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128559->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128559->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128559->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128559->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128559->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128559->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128559->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128559->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128559->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120475 = {.desc ="mem_120475", .mem =
                                  futhark_mc_task_128559->free_mem_120475,
                                  .size =0, .references =NULL};
    struct memblock mem_120479 = {.desc ="mem_120479", .mem =
                                  futhark_mc_task_128559->free_mem_120479,
                                  .size =0, .references =NULL};
    int64_t iter_125747;
    struct futhark_mc_segmap_parloop_struct_128561
    futhark_mc_segmap_parloop_struct_128561;
    
    futhark_mc_segmap_parloop_struct_128561.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128561.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128561.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128561.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128561.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128561.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128561.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128561.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120475 = mem_120475.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120479 = mem_120479.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128562_task;
    
    futhark_mc_segmap_parloop_128562_task.name =
        "futhark_mc_segmap_parloop_128562";
    futhark_mc_segmap_parloop_128562_task.fn = futhark_mc_segmap_parloop_128562;
    futhark_mc_segmap_parloop_128562_task.args =
        &futhark_mc_segmap_parloop_struct_128561;
    futhark_mc_segmap_parloop_128562_task.iterations = iterations;
    futhark_mc_segmap_parloop_128562_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128562_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128562_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128562_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128562_task);
    
    if (futhark_mc_segmap_parloop_128562_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128562_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128562_total_end -
                 futhark_mc_segmap_parloop_128562_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128560_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128560_end -
                 futhark_mc_segmap_task_128560_start;
        
        ctx->futhark_mc_segmap_task_128560_runs[tid]++;
        ctx->futhark_mc_segmap_task_128560_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128560_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128566 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120475;
    char *free_mem_120479;
};
struct futhark_mc_task_128570 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120438;
    char *free_mem_120441;
};
struct futhark_mc_segmap_parloop_struct_128572 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120438;
    char *free_mem_120441;
};
static int futhark_mc_segmap_parloop_128573(void *args, int64_t start,
                                            int64_t end, int flat_tid_117300,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128572
    *futhark_mc_segmap_parloop_struct_128572 =
    (struct futhark_mc_segmap_parloop_struct_128572 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128572->ctx;
    uint64_t futhark_mc_segmap_parloop_128573_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128573_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128572->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128572->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128572->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128572->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128572->free_i_112596;
    int64_t gtid_117299 =
            futhark_mc_segmap_parloop_struct_128572->free_gtid_117299;
    int64_t x_117429 = futhark_mc_segmap_parloop_struct_128572->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120438 = {.desc ="mem_120438", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120438,
                                  .size =0, .references =NULL};
    struct memblock mem_120441 = {.desc ="mem_120441", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120441,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126097 = start;
    
    for (; iter_126097 < end; iter_126097++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126169 = t_n_m_112577;
        int64_t gtid_117301 = iter_126097;
        int64_t remnant_126170 = iter_126097 - gtid_117301;
        int64_t x_125986 = ((int64_t *) mem_119606.mem)[gtid_117299 *
                                                        t_n_m_112577 +
                                                        gtid_117301];
        float x_125987 = ((float *) mem_119610.mem)[gtid_117299 * t_n_m_112577 +
                                                    gtid_117301];
        int64_t min_arg_125988 = mul64(t_jump_112527, gtid_117301);
        int64_t min_res_125989 = smin64(i_112596, min_arg_125988);
        float defunc_0_f_res_125990 = sitofp_i64_f32(min_res_125989);
        float defunc_2_reduce_res_125991;
        float defunc_2_reduce_res_125992;
        float defunc_2_reduce_res_125993;
        float defunc_2_reduce_res_125994;
        float defunc_2_reduce_res_125995;
        float redout_126099;
        float redout_126100;
        float redout_126101;
        float redout_126102;
        float redout_126103;
        
        redout_126099 = 0.0F;
        redout_126100 = 0.0F;
        redout_126101 = 0.0F;
        redout_126102 = 0.0F;
        redout_126103 = 0.0F;
        for (int64_t i_126098 = 0; i_126098 < t_window_112523; i_126098++) {
            bool cond_126104 = sle64(x_117429, i_126098);
            float defunc_0_f_res_126105;
            
            if (cond_126104) {
                defunc_0_f_res_126105 = 0.0F;
            } else {
                int64_t i_126106 = add64(x_125986, i_126098);
                float x_126107 = ((float *) mem_119442.mem)[gtid_117299 *
                                                            n_112520 +
                                                            i_126106];
                float defunc_0_f_res_f_res_126108 = 1.0F + x_126107;
                
                defunc_0_f_res_126105 = defunc_0_f_res_f_res_126108;
            }
            
            float defunc_0_f_res_126109;
            
            if (cond_126104) {
                defunc_0_f_res_126109 = 0.0F;
            } else {
                int64_t i_126110 = add64(x_125986, i_126098);
                float x_126111 = ((float *) mem_120361.mem)[gtid_117299 *
                                                            n_112520 +
                                                            i_126110];
                
                defunc_0_f_res_126109 = x_126111;
            }
            
            float x_j_126112 = defunc_0_f_res_126105 - defunc_0_f_res_125990;
            float abs_res_126113 = (float) fabs(x_j_126112);
            float tmp1_126114 = abs_res_126113 / x_125987;
            float x_126115 = tmp1_126114 * tmp1_126114;
            float y_126116 = tmp1_126114 * x_126115;
            float tmp2_126117 = 1.0F - y_126116;
            float x_126118 = tmp2_126117 * tmp2_126117;
            float tmp3_126119 = tmp2_126117 * x_126118;
            float w_j_126120 = defunc_0_f_res_126109 * tmp3_126119;
            float xw_j_126121 = x_j_126112 * w_j_126120;
            float x2w_j_126122 = x_j_126112 * xw_j_126121;
            float x3w_j_126123 = x_j_126112 * x2w_j_126122;
            float x4w_j_126124 = x_j_126112 * x3w_j_126123;
            float defunc_1_op_res_126125 = w_j_126120 + redout_126099;
            float defunc_1_op_res_126126 = xw_j_126121 + redout_126100;
            float defunc_1_op_res_126127 = x2w_j_126122 + redout_126101;
            float defunc_1_op_res_126128 = x3w_j_126123 + redout_126102;
            float defunc_1_op_res_126129 = x4w_j_126124 + redout_126103;
            float redout_tmp_126171 = defunc_1_op_res_126125;
            float redout_tmp_126172 = defunc_1_op_res_126126;
            float redout_tmp_126173 = defunc_1_op_res_126127;
            float redout_tmp_126174 = defunc_1_op_res_126128;
            float redout_tmp_126175 = defunc_1_op_res_126129;
            
            redout_126099 = redout_tmp_126171;
            redout_126100 = redout_tmp_126172;
            redout_126101 = redout_tmp_126173;
            redout_126102 = redout_tmp_126174;
            redout_126103 = redout_tmp_126175;
        }
        defunc_2_reduce_res_125991 = redout_126099;
        defunc_2_reduce_res_125992 = redout_126100;
        defunc_2_reduce_res_125993 = redout_126101;
        defunc_2_reduce_res_125994 = redout_126102;
        defunc_2_reduce_res_125995 = redout_126103;
        
        float x_126028 = defunc_2_reduce_res_125993 *
              defunc_2_reduce_res_125995;
        float y_126029 = defunc_2_reduce_res_125994 *
              defunc_2_reduce_res_125994;
        float a12_126030 = x_126028 - y_126029;
        float x_126031 = defunc_2_reduce_res_125993 *
              defunc_2_reduce_res_125994;
        float y_126032 = defunc_2_reduce_res_125992 *
              defunc_2_reduce_res_125995;
        float b12_126033 = x_126031 - y_126032;
        float x_126034 = defunc_2_reduce_res_125992 *
              defunc_2_reduce_res_125994;
        float y_126035 = defunc_2_reduce_res_125993 *
              defunc_2_reduce_res_125993;
        float c12_126036 = x_126034 - y_126035;
        float x_126037 = defunc_2_reduce_res_125991 *
              defunc_2_reduce_res_125995;
        float b2_126038 = x_126037 - y_126035;
        float x_126039 = defunc_2_reduce_res_125992 *
              defunc_2_reduce_res_125993;
        float y_126040 = defunc_2_reduce_res_125991 *
              defunc_2_reduce_res_125994;
        float c2_126041 = x_126039 - y_126040;
        float x_126042 = defunc_2_reduce_res_125991 * a12_126030;
        float y_126043 = defunc_2_reduce_res_125992 * b12_126033;
        float x_126044 = x_126042 + y_126043;
        float y_126045 = defunc_2_reduce_res_125993 * c12_126036;
        float y_126046 = x_126044 + y_126045;
        float det_126047 = 1.0F / y_126046;
        float a12_126048 = a12_126030 * det_126047;
        float b12_126049 = b12_126033 * det_126047;
        float c12_126050 = c12_126036 * det_126047;
        float b2_126051 = b2_126038 * det_126047;
        float c2_126052 = c2_126041 * det_126047;
        float defunc_2_reduce_res_126053;
        float defunc_2_reduce_res_126054;
        float redout_126131;
        float redout_126132;
        
        redout_126131 = 0.0F;
        redout_126132 = 0.0F;
        for (int64_t i_126130 = 0; i_126130 < t_window_112523; i_126130++) {
            bool cond_126133 = sle64(x_117429, i_126130);
            float defunc_0_f_res_126134;
            
            if (cond_126133) {
                defunc_0_f_res_126134 = 0.0F;
            } else {
                int64_t i_126135 = add64(x_125986, i_126130);
                float x_126136 = ((float *) mem_119442.mem)[gtid_117299 *
                                                            n_112520 +
                                                            i_126135];
                float defunc_0_f_res_f_res_126137 = 1.0F + x_126136;
                
                defunc_0_f_res_126134 = defunc_0_f_res_f_res_126137;
            }
            
            float defunc_0_f_res_126138;
            
            if (cond_126133) {
                defunc_0_f_res_126138 = 0.0F;
            } else {
                int64_t i_126139 = add64(x_125986, i_126130);
                float x_126140 = ((float *) mem_120361.mem)[gtid_117299 *
                                                            n_112520 +
                                                            i_126139];
                
                defunc_0_f_res_126138 = x_126140;
            }
            
            float x_j_126141 = defunc_0_f_res_126134 - defunc_0_f_res_125990;
            float abs_res_126142 = (float) fabs(x_j_126141);
            float tmp1_126143 = abs_res_126142 / x_125987;
            float x_126144 = tmp1_126143 * tmp1_126143;
            float y_126145 = tmp1_126143 * x_126144;
            float tmp2_126146 = 1.0F - y_126145;
            float x_126147 = tmp2_126146 * tmp2_126146;
            float tmp3_126148 = tmp2_126146 * x_126147;
            float tmp4_126149 = defunc_0_f_res_126138 * tmp3_126148;
            float defunc_1_f_res_126150 = x_j_126141 * tmp4_126149;
            float defunc_1_f_res_126151 = x_j_126141 * defunc_1_f_res_126150;
            float defunc_0_f_res_126152;
            
            if (cond_126133) {
                defunc_0_f_res_126152 = 0.0F;
            } else {
                int64_t i_126153 = add64(x_125986, i_126130);
                float x_126154 = ((float *) mem_120357.mem)[gtid_117299 *
                                                            n_112520 +
                                                            i_126153];
                
                defunc_0_f_res_126152 = x_126154;
            }
            
            float x_126155 = a12_126048 * tmp4_126149;
            float y_126156 = b12_126049 * defunc_1_f_res_126150;
            float x_126157 = x_126155 + y_126156;
            float y_126158 = c12_126050 * defunc_1_f_res_126151;
            float x_126159 = x_126157 + y_126158;
            float defunc_9_fit_fun_res_126160 = defunc_0_f_res_126152 *
                  x_126159;
            float x_126161 = b12_126049 * tmp4_126149;
            float y_126162 = b2_126051 * defunc_1_f_res_126150;
            float x_126163 = x_126161 + y_126162;
            float y_126164 = c2_126052 * defunc_1_f_res_126151;
            float x_126165 = x_126163 + y_126164;
            float defunc_9_slope_fun_res_126166 = defunc_0_f_res_126152 *
                  x_126165;
            float defunc_1_op_res_126167 = defunc_9_fit_fun_res_126160 +
                  redout_126131;
            float defunc_1_op_res_126168 = defunc_9_slope_fun_res_126166 +
                  redout_126132;
            float redout_tmp_126176 = defunc_1_op_res_126167;
            float redout_tmp_126177 = defunc_1_op_res_126168;
            
            redout_126131 = redout_tmp_126176;
            redout_126132 = redout_tmp_126177;
        }
        defunc_2_reduce_res_126053 = redout_126131;
        defunc_2_reduce_res_126054 = redout_126132;
        ((float *) mem_120438.mem)[gtid_117301] = defunc_2_reduce_res_126053;
        ((float *) mem_120441.mem)[gtid_117301] = defunc_2_reduce_res_126054;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128573_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128573_end -
                 futhark_mc_segmap_parloop_128573_start;
        
        ctx->futhark_mc_segmap_parloop_128573_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128573_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128573_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128571(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117300 = tid;
    int num_tasks_126096 = info.nsubtasks;
    struct futhark_mc_task_128570 *futhark_mc_task_128570 =
                                  (struct futhark_mc_task_128570 *) args;
    struct futhark_context *ctx = futhark_mc_task_128570->ctx;
    uint64_t futhark_mc_segmap_task_128571_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128571_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128570->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128570->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128570->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128570->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128570->free_i_112596;
    int64_t gtid_117299 = futhark_mc_task_128570->free_gtid_117299;
    int64_t x_117429 = futhark_mc_task_128570->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128570->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128570->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128570->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128570->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128570->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120438 = {.desc ="mem_120438", .mem =
                                  futhark_mc_task_128570->free_mem_120438,
                                  .size =0, .references =NULL};
    struct memblock mem_120441 = {.desc ="mem_120441", .mem =
                                  futhark_mc_task_128570->free_mem_120441,
                                  .size =0, .references =NULL};
    int64_t iter_126097;
    struct futhark_mc_segmap_parloop_struct_128572
    futhark_mc_segmap_parloop_struct_128572;
    
    futhark_mc_segmap_parloop_struct_128572.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128572.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128572.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128572.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128572.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128572.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128572.free_gtid_117299 = gtid_117299;
    futhark_mc_segmap_parloop_struct_128572.free_x_117429 = x_117429;
    futhark_mc_segmap_parloop_struct_128572.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120438 = mem_120438.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120441 = mem_120441.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128573_task;
    
    futhark_mc_segmap_parloop_128573_task.name =
        "futhark_mc_segmap_parloop_128573";
    futhark_mc_segmap_parloop_128573_task.fn = futhark_mc_segmap_parloop_128573;
    futhark_mc_segmap_parloop_128573_task.args =
        &futhark_mc_segmap_parloop_struct_128572;
    futhark_mc_segmap_parloop_128573_task.iterations = iterations;
    futhark_mc_segmap_parloop_128573_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128573_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128573_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128573_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128573_task);
    
    if (futhark_mc_segmap_parloop_128573_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128573_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128573_total_end -
                 futhark_mc_segmap_parloop_128573_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128571_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128571_end -
                 futhark_mc_segmap_task_128571_start;
        
        ctx->futhark_mc_segmap_task_128571_runs[tid]++;
        ctx->futhark_mc_segmap_task_128571_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128571_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128575 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    char *free_mem_120438;
    char *free_mem_120441;
};
struct futhark_mc_task_128577 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125873;
    float free_x_125874;
    float free_defunc_0_f_res_125877;
    float *retval_defunc_2_reduce_res_125878;
    float *retval_defunc_2_reduce_res_125879;
    float *retval_defunc_2_reduce_res_125880;
    float *retval_defunc_2_reduce_res_125881;
    float *retval_defunc_2_reduce_res_125882;
};
struct futhark_mc_segred_stage_1_parloop_struct_128584 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_125873;
    float free_x_125874;
    float free_defunc_0_f_res_125877;
    char *free_reduce_stage_1_tid_res_arr_mem_126258;
    char *free_reduce_stage_1_tid_res_arr_mem_126260;
    char *free_reduce_stage_1_tid_res_arr_mem_126262;
    char *free_reduce_stage_1_tid_res_arr_mem_126264;
    char *free_reduce_stage_1_tid_res_arr_mem_126266;
};
static int futhark_mc_segred_stage_1_parloop_128585(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117304,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128584
    *futhark_mc_segred_stage_1_parloop_struct_128584 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128584 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128584->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128585_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128585_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128584->free_n_112520;
    int64_t gtid_117299 =
            futhark_mc_segred_stage_1_parloop_struct_128584->free_gtid_117299;
    int64_t x_117429 =
            futhark_mc_segred_stage_1_parloop_struct_128584->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128584->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128584->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125873 =
            futhark_mc_segred_stage_1_parloop_struct_128584->free_x_125873;
    float x_125874 =
          futhark_mc_segred_stage_1_parloop_struct_128584->free_x_125874;
    float defunc_0_f_res_125877 =
          futhark_mc_segred_stage_1_parloop_struct_128584->free_defunc_0_f_res_125877;
    struct memblock reduce_stage_1_tid_res_arr_mem_126258 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126258",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128584->free_reduce_stage_1_tid_res_arr_mem_126258,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126260 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126260",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128584->free_reduce_stage_1_tid_res_arr_mem_126260,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126262 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126262",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128584->free_reduce_stage_1_tid_res_arr_mem_126262,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126264 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126264",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128584->free_reduce_stage_1_tid_res_arr_mem_126264,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126266 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126266",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128584->free_reduce_stage_1_tid_res_arr_mem_126266,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126268 = start;
    float x_126179;
    float x_126180;
    float x_126182;
    float x_126183;
    float x_126185;
    float x_126186;
    float x_126188;
    float x_126189;
    float x_126191;
    float x_126192;
    float local_acc_126269 = 0.0F;
    float local_acc_126270 = 0.0F;
    float local_acc_126271 = 0.0F;
    float local_acc_126272 = 0.0F;
    float local_acc_126273 = 0.0F;
    
    for (; iter_126268 < end; iter_126268++) {
        int64_t gtid_117305 = iter_126268;
        bool cond_126194 = sle64(x_117429, gtid_117305);
        float defunc_0_f_res_126195;
        
        if (cond_126194) {
            defunc_0_f_res_126195 = 0.0F;
        } else {
            int64_t i_126196 = add64(gtid_117305, x_125873);
            float x_126197 = ((float *) mem_119442.mem)[gtid_117299 * n_112520 +
                                                        i_126196];
            float defunc_0_f_res_f_res_126198 = 1.0F + x_126197;
            
            defunc_0_f_res_126195 = defunc_0_f_res_f_res_126198;
        }
        
        float defunc_0_f_res_126199;
        
        if (cond_126194) {
            defunc_0_f_res_126199 = 0.0F;
        } else {
            int64_t i_126200 = add64(gtid_117305, x_125873);
            float x_126201 = ((float *) mem_120361.mem)[gtid_117299 * n_112520 +
                                                        i_126200];
            
            defunc_0_f_res_126199 = x_126201;
        }
        
        float x_j_126202 = defunc_0_f_res_126195 - defunc_0_f_res_125877;
        float abs_res_126203 = (float) fabs(x_j_126202);
        float tmp1_126204 = abs_res_126203 / x_125874;
        float x_126205 = tmp1_126204 * tmp1_126204;
        float y_126206 = tmp1_126204 * x_126205;
        float tmp2_126207 = 1.0F - y_126206;
        float x_126208 = tmp2_126207 * tmp2_126207;
        float tmp3_126209 = tmp2_126207 * x_126208;
        float w_j_126210 = defunc_0_f_res_126199 * tmp3_126209;
        float xw_j_126211 = x_j_126202 * w_j_126210;
        float x2w_j_126212 = x_j_126202 * xw_j_126211;
        float x3w_j_126213 = x_j_126202 * x2w_j_126212;
        float x4w_j_126214 = x_j_126202 * x3w_j_126213;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126179 = local_acc_126269;
        }
        // Load next params
        {
            x_126180 = w_j_126210;
        }
        // Red body
        {
            float defunc_1_op_res_126181 = x_126179 + x_126180;
            
            local_acc_126269 = defunc_1_op_res_126181;
        }
        // Load accum params
        {
            x_126182 = local_acc_126270;
        }
        // Load next params
        {
            x_126183 = xw_j_126211;
        }
        // Red body
        {
            float defunc_1_op_res_126184 = x_126182 + x_126183;
            
            local_acc_126270 = defunc_1_op_res_126184;
        }
        // Load accum params
        {
            x_126185 = local_acc_126271;
        }
        // Load next params
        {
            x_126186 = x2w_j_126212;
        }
        // Red body
        {
            float defunc_1_op_res_126187 = x_126185 + x_126186;
            
            local_acc_126271 = defunc_1_op_res_126187;
        }
        // Load accum params
        {
            x_126188 = local_acc_126272;
        }
        // Load next params
        {
            x_126189 = x3w_j_126213;
        }
        // Red body
        {
            float defunc_1_op_res_126190 = x_126188 + x_126189;
            
            local_acc_126272 = defunc_1_op_res_126190;
        }
        // Load accum params
        {
            x_126191 = local_acc_126273;
        }
        // Load next params
        {
            x_126192 = x4w_j_126214;
        }
        // Red body
        {
            float defunc_1_op_res_126193 = x_126191 + x_126192;
            
            local_acc_126273 = defunc_1_op_res_126193;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126258.mem)[flat_tid_117304] =
        local_acc_126269;
    ((float *) reduce_stage_1_tid_res_arr_mem_126260.mem)[flat_tid_117304] =
        local_acc_126270;
    ((float *) reduce_stage_1_tid_res_arr_mem_126262.mem)[flat_tid_117304] =
        local_acc_126271;
    ((float *) reduce_stage_1_tid_res_arr_mem_126264.mem)[flat_tid_117304] =
        local_acc_126272;
    ((float *) reduce_stage_1_tid_res_arr_mem_126266.mem)[flat_tid_117304] =
        local_acc_126273;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128585_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128585_end -
                 futhark_mc_segred_stage_1_parloop_128585_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128585_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128585_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128585_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128578(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117304 = tid;
    int num_tasks_126257 = info.nsubtasks;
    struct futhark_mc_task_128577 *futhark_mc_task_128577 =
                                  (struct futhark_mc_task_128577 *) args;
    struct futhark_context *ctx = futhark_mc_task_128577->ctx;
    uint64_t futhark_mc_segred_task_128578_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128578_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128577->free_n_112520;
    int64_t gtid_117299 = futhark_mc_task_128577->free_gtid_117299;
    int64_t x_117429 = futhark_mc_task_128577->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128577->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128577->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125873 = futhark_mc_task_128577->free_x_125873;
    float x_125874 = futhark_mc_task_128577->free_x_125874;
    float defunc_0_f_res_125877 =
          futhark_mc_task_128577->free_defunc_0_f_res_125877;
    float defunc_2_reduce_res_125878 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_125878;
    float defunc_2_reduce_res_125879 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_125879;
    float defunc_2_reduce_res_125880 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_125880;
    float defunc_2_reduce_res_125881 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_125881;
    float defunc_2_reduce_res_125882 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_125882;
    size_t reduce_stage_1_tid_res_arr_mem_126258_cached_sizze_128579 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126258 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126260_cached_sizze_128580 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126260 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126262_cached_sizze_128581 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126262 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126264_cached_sizze_128582 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126264 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126266_cached_sizze_128583 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126266 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126258_cached_sizze_128579 <
        (size_t) ((int64_t) 4 * num_tasks_126257)) {
        reduce_stage_1_tid_res_arr_mem_126258 =
            realloc(reduce_stage_1_tid_res_arr_mem_126258, (int64_t) 4 *
                    num_tasks_126257);
        reduce_stage_1_tid_res_arr_mem_126258_cached_sizze_128579 =
            (int64_t) 4 * num_tasks_126257;
    }
    if (reduce_stage_1_tid_res_arr_mem_126260_cached_sizze_128580 <
        (size_t) ((int64_t) 4 * num_tasks_126257)) {
        reduce_stage_1_tid_res_arr_mem_126260 =
            realloc(reduce_stage_1_tid_res_arr_mem_126260, (int64_t) 4 *
                    num_tasks_126257);
        reduce_stage_1_tid_res_arr_mem_126260_cached_sizze_128580 =
            (int64_t) 4 * num_tasks_126257;
    }
    if (reduce_stage_1_tid_res_arr_mem_126262_cached_sizze_128581 <
        (size_t) ((int64_t) 4 * num_tasks_126257)) {
        reduce_stage_1_tid_res_arr_mem_126262 =
            realloc(reduce_stage_1_tid_res_arr_mem_126262, (int64_t) 4 *
                    num_tasks_126257);
        reduce_stage_1_tid_res_arr_mem_126262_cached_sizze_128581 =
            (int64_t) 4 * num_tasks_126257;
    }
    if (reduce_stage_1_tid_res_arr_mem_126264_cached_sizze_128582 <
        (size_t) ((int64_t) 4 * num_tasks_126257)) {
        reduce_stage_1_tid_res_arr_mem_126264 =
            realloc(reduce_stage_1_tid_res_arr_mem_126264, (int64_t) 4 *
                    num_tasks_126257);
        reduce_stage_1_tid_res_arr_mem_126264_cached_sizze_128582 =
            (int64_t) 4 * num_tasks_126257;
    }
    if (reduce_stage_1_tid_res_arr_mem_126266_cached_sizze_128583 <
        (size_t) ((int64_t) 4 * num_tasks_126257)) {
        reduce_stage_1_tid_res_arr_mem_126266 =
            realloc(reduce_stage_1_tid_res_arr_mem_126266, (int64_t) 4 *
                    num_tasks_126257);
        reduce_stage_1_tid_res_arr_mem_126266_cached_sizze_128583 =
            (int64_t) 4 * num_tasks_126257;
    }
    
    int64_t iter_126268;
    struct futhark_mc_segred_stage_1_parloop_struct_128584
    futhark_mc_segred_stage_1_parloop_struct_128584;
    
    futhark_mc_segred_stage_1_parloop_struct_128584.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_gtid_117299 =
        gtid_117299;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_x_117429 = x_117429;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_x_125873 = x_125873;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_x_125874 = x_125874;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_defunc_0_f_res_125877 =
        defunc_0_f_res_125877;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_reduce_stage_1_tid_res_arr_mem_126258 =
        reduce_stage_1_tid_res_arr_mem_126258;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_reduce_stage_1_tid_res_arr_mem_126260 =
        reduce_stage_1_tid_res_arr_mem_126260;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_reduce_stage_1_tid_res_arr_mem_126262 =
        reduce_stage_1_tid_res_arr_mem_126262;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_reduce_stage_1_tid_res_arr_mem_126264 =
        reduce_stage_1_tid_res_arr_mem_126264;
    futhark_mc_segred_stage_1_parloop_struct_128584.free_reduce_stage_1_tid_res_arr_mem_126266 =
        reduce_stage_1_tid_res_arr_mem_126266;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128585_task;
    
    futhark_mc_segred_stage_1_parloop_128585_task.name =
        "futhark_mc_segred_stage_1_parloop_128585";
    futhark_mc_segred_stage_1_parloop_128585_task.fn =
        futhark_mc_segred_stage_1_parloop_128585;
    futhark_mc_segred_stage_1_parloop_128585_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128584;
    futhark_mc_segred_stage_1_parloop_128585_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128585_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128585_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128585_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128585_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128585_task);
    
    if (futhark_mc_segred_stage_1_parloop_128585_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128585_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128585_total_end -
                 futhark_mc_segred_stage_1_parloop_128585_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128585_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128585_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128585_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125878 = 0.0F;
        defunc_2_reduce_res_125879 = 0.0F;
        defunc_2_reduce_res_125880 = 0.0F;
        defunc_2_reduce_res_125881 = 0.0F;
        defunc_2_reduce_res_125882 = 0.0F;
    }
    
    float x_126274;
    float x_126275;
    float x_126277;
    float x_126278;
    float x_126280;
    float x_126281;
    float x_126283;
    float x_126284;
    float x_126286;
    float x_126287;
    
    for (int32_t i_126289 = 0; i_126289 < num_tasks_126257; i_126289++) {
        flat_tid_117304 = i_126289;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126274 = defunc_2_reduce_res_125878;
            }
            // load next params
            {
                x_126275 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126258)[flat_tid_117304];
            }
            // red body
            {
                float defunc_1_op_res_126276 = x_126274 + x_126275;
                
                defunc_2_reduce_res_125878 = defunc_1_op_res_126276;
            }
            // load acc params
            {
                x_126277 = defunc_2_reduce_res_125879;
            }
            // load next params
            {
                x_126278 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126260)[flat_tid_117304];
            }
            // red body
            {
                float defunc_1_op_res_126279 = x_126277 + x_126278;
                
                defunc_2_reduce_res_125879 = defunc_1_op_res_126279;
            }
            // load acc params
            {
                x_126280 = defunc_2_reduce_res_125880;
            }
            // load next params
            {
                x_126281 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126262)[flat_tid_117304];
            }
            // red body
            {
                float defunc_1_op_res_126282 = x_126280 + x_126281;
                
                defunc_2_reduce_res_125880 = defunc_1_op_res_126282;
            }
            // load acc params
            {
                x_126283 = defunc_2_reduce_res_125881;
            }
            // load next params
            {
                x_126284 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126264)[flat_tid_117304];
            }
            // red body
            {
                float defunc_1_op_res_126285 = x_126283 + x_126284;
                
                defunc_2_reduce_res_125881 = defunc_1_op_res_126285;
            }
            // load acc params
            {
                x_126286 = defunc_2_reduce_res_125882;
            }
            // load next params
            {
                x_126287 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126266)[flat_tid_117304];
            }
            // red body
            {
                float defunc_1_op_res_126288 = x_126286 + x_126287;
                
                defunc_2_reduce_res_125882 = defunc_1_op_res_126288;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126258);
    free(reduce_stage_1_tid_res_arr_mem_126260);
    free(reduce_stage_1_tid_res_arr_mem_126262);
    free(reduce_stage_1_tid_res_arr_mem_126264);
    free(reduce_stage_1_tid_res_arr_mem_126266);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128578_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128578_end -
                 futhark_mc_segred_task_128578_start;
        
        ctx->futhark_mc_segred_task_128578_runs[tid]++;
        ctx->futhark_mc_segred_task_128578_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128578_iter[tid] += iterations;
    }
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_125878 =
        defunc_2_reduce_res_125878;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_125879 =
        defunc_2_reduce_res_125879;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_125880 =
        defunc_2_reduce_res_125880;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_125881 =
        defunc_2_reduce_res_125881;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_125882 =
        defunc_2_reduce_res_125882;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128586 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125873;
    float free_x_125874;
    float free_defunc_0_f_res_125877;
    float free_a12_125939;
    float free_b12_125940;
    float free_c12_125941;
    float free_b2_125942;
    float free_c2_125943;
    float *retval_defunc_2_reduce_res_125944;
    float *retval_defunc_2_reduce_res_125945;
};
struct futhark_mc_segred_stage_1_parloop_struct_128590 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117299;
    int64_t free_x_117429;
    char *free_mem_119442;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_x_125873;
    float free_x_125874;
    float free_defunc_0_f_res_125877;
    float free_a12_125939;
    float free_b12_125940;
    float free_c12_125941;
    float free_b2_125942;
    float free_c2_125943;
    char *free_reduce_stage_1_tid_res_arr_mem_126291;
    char *free_reduce_stage_1_tid_res_arr_mem_126293;
};
static int futhark_mc_segred_stage_1_parloop_128591(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117306,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128590
    *futhark_mc_segred_stage_1_parloop_struct_128590 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128590 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128590->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128591_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128591_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128590->free_n_112520;
    int64_t gtid_117299 =
            futhark_mc_segred_stage_1_parloop_struct_128590->free_gtid_117299;
    int64_t x_117429 =
            futhark_mc_segred_stage_1_parloop_struct_128590->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128590->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128590->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128590->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125873 =
            futhark_mc_segred_stage_1_parloop_struct_128590->free_x_125873;
    float x_125874 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_x_125874;
    float defunc_0_f_res_125877 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_defunc_0_f_res_125877;
    float a12_125939 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_a12_125939;
    float b12_125940 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_b12_125940;
    float c12_125941 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_c12_125941;
    float b2_125942 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_b2_125942;
    float c2_125943 =
          futhark_mc_segred_stage_1_parloop_struct_128590->free_c2_125943;
    struct memblock reduce_stage_1_tid_res_arr_mem_126291 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126291",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128590->free_reduce_stage_1_tid_res_arr_mem_126291,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126293 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126293",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128590->free_reduce_stage_1_tid_res_arr_mem_126293,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126295 = start;
    float x_126215;
    float x_126216;
    float x_126218;
    float x_126219;
    float local_acc_126296 = 0.0F;
    float local_acc_126297 = 0.0F;
    
    for (; iter_126295 < end; iter_126295++) {
        int64_t gtid_117307 = iter_126295;
        bool cond_126221 = sle64(x_117429, gtid_117307);
        float defunc_0_f_res_126222;
        
        if (cond_126221) {
            defunc_0_f_res_126222 = 0.0F;
        } else {
            int64_t i_126223 = add64(gtid_117307, x_125873);
            float x_126224 = ((float *) mem_119442.mem)[gtid_117299 * n_112520 +
                                                        i_126223];
            float defunc_0_f_res_f_res_126225 = 1.0F + x_126224;
            
            defunc_0_f_res_126222 = defunc_0_f_res_f_res_126225;
        }
        
        float defunc_0_f_res_126226;
        
        if (cond_126221) {
            defunc_0_f_res_126226 = 0.0F;
        } else {
            int64_t i_126227 = add64(gtid_117307, x_125873);
            float x_126228 = ((float *) mem_120361.mem)[gtid_117299 * n_112520 +
                                                        i_126227];
            
            defunc_0_f_res_126226 = x_126228;
        }
        
        float x_j_126229 = defunc_0_f_res_126222 - defunc_0_f_res_125877;
        float abs_res_126230 = (float) fabs(x_j_126229);
        float tmp1_126231 = abs_res_126230 / x_125874;
        float x_126232 = tmp1_126231 * tmp1_126231;
        float y_126233 = tmp1_126231 * x_126232;
        float tmp2_126234 = 1.0F - y_126233;
        float x_126235 = tmp2_126234 * tmp2_126234;
        float tmp3_126236 = tmp2_126234 * x_126235;
        float tmp4_126237 = defunc_0_f_res_126226 * tmp3_126236;
        float defunc_1_f_res_126238 = x_j_126229 * tmp4_126237;
        float defunc_1_f_res_126239 = x_j_126229 * defunc_1_f_res_126238;
        float defunc_0_f_res_126240;
        
        if (cond_126221) {
            defunc_0_f_res_126240 = 0.0F;
        } else {
            int64_t i_126241 = add64(gtid_117307, x_125873);
            float x_126242 = ((float *) mem_120357.mem)[gtid_117299 * n_112520 +
                                                        i_126241];
            
            defunc_0_f_res_126240 = x_126242;
        }
        
        float x_126243 = a12_125939 * tmp4_126237;
        float y_126244 = b12_125940 * defunc_1_f_res_126238;
        float x_126245 = x_126243 + y_126244;
        float y_126246 = c12_125941 * defunc_1_f_res_126239;
        float x_126247 = x_126245 + y_126246;
        float defunc_9_fit_fun_res_126248 = defunc_0_f_res_126240 * x_126247;
        float x_126249 = b12_125940 * tmp4_126237;
        float y_126250 = b2_125942 * defunc_1_f_res_126238;
        float x_126251 = x_126249 + y_126250;
        float y_126252 = c2_125943 * defunc_1_f_res_126239;
        float x_126253 = x_126251 + y_126252;
        float defunc_9_slope_fun_res_126254 = defunc_0_f_res_126240 * x_126253;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126215 = local_acc_126296;
        }
        // Load next params
        {
            x_126216 = defunc_9_fit_fun_res_126248;
        }
        // Red body
        {
            float defunc_1_op_res_126217 = x_126215 + x_126216;
            
            local_acc_126296 = defunc_1_op_res_126217;
        }
        // Load accum params
        {
            x_126218 = local_acc_126297;
        }
        // Load next params
        {
            x_126219 = defunc_9_slope_fun_res_126254;
        }
        // Red body
        {
            float defunc_1_op_res_126220 = x_126218 + x_126219;
            
            local_acc_126297 = defunc_1_op_res_126220;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126291.mem)[flat_tid_117306] =
        local_acc_126296;
    ((float *) reduce_stage_1_tid_res_arr_mem_126293.mem)[flat_tid_117306] =
        local_acc_126297;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128591_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128591_end -
                 futhark_mc_segred_stage_1_parloop_128591_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128591_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128591_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128591_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128587(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117306 = tid;
    int num_tasks_126290 = info.nsubtasks;
    struct futhark_mc_task_128586 *futhark_mc_task_128586 =
                                  (struct futhark_mc_task_128586 *) args;
    struct futhark_context *ctx = futhark_mc_task_128586->ctx;
    uint64_t futhark_mc_segred_task_128587_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128587_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128586->free_n_112520;
    int64_t gtid_117299 = futhark_mc_task_128586->free_gtid_117299;
    int64_t x_117429 = futhark_mc_task_128586->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128586->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128586->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128586->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_125873 = futhark_mc_task_128586->free_x_125873;
    float x_125874 = futhark_mc_task_128586->free_x_125874;
    float defunc_0_f_res_125877 =
          futhark_mc_task_128586->free_defunc_0_f_res_125877;
    float a12_125939 = futhark_mc_task_128586->free_a12_125939;
    float b12_125940 = futhark_mc_task_128586->free_b12_125940;
    float c12_125941 = futhark_mc_task_128586->free_c12_125941;
    float b2_125942 = futhark_mc_task_128586->free_b2_125942;
    float c2_125943 = futhark_mc_task_128586->free_c2_125943;
    float defunc_2_reduce_res_125944 =
          *futhark_mc_task_128586->retval_defunc_2_reduce_res_125944;
    float defunc_2_reduce_res_125945 =
          *futhark_mc_task_128586->retval_defunc_2_reduce_res_125945;
    size_t reduce_stage_1_tid_res_arr_mem_126291_cached_sizze_128588 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126291 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126293_cached_sizze_128589 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126293 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126291_cached_sizze_128588 <
        (size_t) ((int64_t) 4 * num_tasks_126290)) {
        reduce_stage_1_tid_res_arr_mem_126291 =
            realloc(reduce_stage_1_tid_res_arr_mem_126291, (int64_t) 4 *
                    num_tasks_126290);
        reduce_stage_1_tid_res_arr_mem_126291_cached_sizze_128588 =
            (int64_t) 4 * num_tasks_126290;
    }
    if (reduce_stage_1_tid_res_arr_mem_126293_cached_sizze_128589 <
        (size_t) ((int64_t) 4 * num_tasks_126290)) {
        reduce_stage_1_tid_res_arr_mem_126293 =
            realloc(reduce_stage_1_tid_res_arr_mem_126293, (int64_t) 4 *
                    num_tasks_126290);
        reduce_stage_1_tid_res_arr_mem_126293_cached_sizze_128589 =
            (int64_t) 4 * num_tasks_126290;
    }
    
    int64_t iter_126295;
    struct futhark_mc_segred_stage_1_parloop_struct_128590
    futhark_mc_segred_stage_1_parloop_struct_128590;
    
    futhark_mc_segred_stage_1_parloop_struct_128590.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_gtid_117299 =
        gtid_117299;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_x_117429 = x_117429;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_x_125873 = x_125873;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_x_125874 = x_125874;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_defunc_0_f_res_125877 =
        defunc_0_f_res_125877;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_a12_125939 =
        a12_125939;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_b12_125940 =
        b12_125940;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_c12_125941 =
        c12_125941;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_b2_125942 = b2_125942;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_c2_125943 = c2_125943;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_reduce_stage_1_tid_res_arr_mem_126291 =
        reduce_stage_1_tid_res_arr_mem_126291;
    futhark_mc_segred_stage_1_parloop_struct_128590.free_reduce_stage_1_tid_res_arr_mem_126293 =
        reduce_stage_1_tid_res_arr_mem_126293;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128591_task;
    
    futhark_mc_segred_stage_1_parloop_128591_task.name =
        "futhark_mc_segred_stage_1_parloop_128591";
    futhark_mc_segred_stage_1_parloop_128591_task.fn =
        futhark_mc_segred_stage_1_parloop_128591;
    futhark_mc_segred_stage_1_parloop_128591_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128590;
    futhark_mc_segred_stage_1_parloop_128591_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128591_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128591_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128591_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128591_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128591_task);
    
    if (futhark_mc_segred_stage_1_parloop_128591_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128591_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128591_total_end -
                 futhark_mc_segred_stage_1_parloop_128591_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128591_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128591_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128591_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125944 = 0.0F;
        defunc_2_reduce_res_125945 = 0.0F;
    }
    
    float x_126298;
    float x_126299;
    float x_126301;
    float x_126302;
    
    for (int32_t i_126304 = 0; i_126304 < num_tasks_126290; i_126304++) {
        flat_tid_117306 = i_126304;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126298 = defunc_2_reduce_res_125944;
            }
            // load next params
            {
                x_126299 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126291)[flat_tid_117306];
            }
            // red body
            {
                float defunc_1_op_res_126300 = x_126298 + x_126299;
                
                defunc_2_reduce_res_125944 = defunc_1_op_res_126300;
            }
            // load acc params
            {
                x_126301 = defunc_2_reduce_res_125945;
            }
            // load next params
            {
                x_126302 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126293)[flat_tid_117306];
            }
            // red body
            {
                float defunc_1_op_res_126303 = x_126301 + x_126302;
                
                defunc_2_reduce_res_125945 = defunc_1_op_res_126303;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126291);
    free(reduce_stage_1_tid_res_arr_mem_126293);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128587_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128587_end -
                 futhark_mc_segred_task_128587_start;
        
        ctx->futhark_mc_segred_task_128587_runs[tid]++;
        ctx->futhark_mc_segred_task_128587_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128587_iter[tid] += iterations;
    }
    *futhark_mc_task_128586->retval_defunc_2_reduce_res_125944 =
        defunc_2_reduce_res_125944;
    *futhark_mc_task_128586->retval_defunc_2_reduce_res_125945 =
        defunc_2_reduce_res_125945;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128576(void *args, int64_t start,
                                            int64_t end, int flat_tid_117302,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128575
    *futhark_mc_segmap_parloop_struct_128575 =
    (struct futhark_mc_segmap_parloop_struct_128575 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128575->ctx;
    uint64_t futhark_mc_segmap_parloop_128576_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128576_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128575->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128575->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128575->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128575->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128575->free_i_112596;
    int64_t gtid_117299 =
            futhark_mc_segmap_parloop_struct_128575->free_gtid_117299;
    int64_t x_117429 = futhark_mc_segmap_parloop_struct_128575->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120438 = {.desc ="mem_120438", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120438,
                                  .size =0, .references =NULL};
    struct memblock mem_120441 = {.desc ="mem_120441", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120441,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126178 = start;
    
    for (; iter_126178 < end; iter_126178++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126255 = t_n_m_112577;
        int64_t gtid_117303 = iter_126178;
        int64_t remnant_126256 = iter_126178 - gtid_117303;
        int64_t x_125873 = ((int64_t *) mem_119606.mem)[gtid_117299 *
                                                        t_n_m_112577 +
                                                        gtid_117303];
        float x_125874 = ((float *) mem_119610.mem)[gtid_117299 * t_n_m_112577 +
                                                    gtid_117303];
        int64_t min_arg_125875 = mul64(t_jump_112527, gtid_117303);
        int64_t min_res_125876 = smin64(i_112596, min_arg_125875);
        float defunc_0_f_res_125877 = sitofp_i64_f32(min_res_125876);
        float defunc_2_reduce_res_125878;
        float defunc_2_reduce_res_125879;
        float defunc_2_reduce_res_125880;
        float defunc_2_reduce_res_125881;
        float defunc_2_reduce_res_125882;
        int64_t flat_tid_117304 = (int64_t) 0;
        int32_t num_tasks_126257;
        struct futhark_mc_task_128577 futhark_mc_task_128577;
        
        futhark_mc_task_128577.ctx = ctx;
        futhark_mc_task_128577.free_n_112520 = n_112520;
        futhark_mc_task_128577.free_gtid_117299 = gtid_117299;
        futhark_mc_task_128577.free_x_117429 = x_117429;
        futhark_mc_task_128577.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128577.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128577.free_x_125873 = x_125873;
        futhark_mc_task_128577.free_x_125874 = x_125874;
        futhark_mc_task_128577.free_defunc_0_f_res_125877 =
            defunc_0_f_res_125877;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_125878 =
            &defunc_2_reduce_res_125878;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_125879 =
            &defunc_2_reduce_res_125879;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_125880 =
            &defunc_2_reduce_res_125880;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_125881 =
            &defunc_2_reduce_res_125881;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_125882 =
            &defunc_2_reduce_res_125882;
        
        struct scheduler_segop futhark_mc_task_128577_task;
        
        futhark_mc_task_128577_task.args = &futhark_mc_task_128577;
        futhark_mc_task_128577_task.top_level_fn =
            futhark_mc_segred_task_128578;
        futhark_mc_task_128577_task.name = "futhark_mc_segred_task_128578";
        futhark_mc_task_128577_task.iterations = t_window_112523;
        futhark_mc_task_128577_task.task_time =
            &ctx->futhark_mc_segred_task_128578_total_time;
        futhark_mc_task_128577_task.task_iter =
            &ctx->futhark_mc_segred_task_128578_total_iter;
        futhark_mc_task_128577_task.sched = STATIC;
        futhark_mc_task_128577_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128578_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128577_task);
        
        if (futhark_mc_segred_task_128578_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_125919 = defunc_2_reduce_res_125880 *
              defunc_2_reduce_res_125882;
        float y_125920 = defunc_2_reduce_res_125881 *
              defunc_2_reduce_res_125881;
        float a12_125921 = x_125919 - y_125920;
        float x_125922 = defunc_2_reduce_res_125880 *
              defunc_2_reduce_res_125881;
        float y_125923 = defunc_2_reduce_res_125879 *
              defunc_2_reduce_res_125882;
        float b12_125924 = x_125922 - y_125923;
        float x_125925 = defunc_2_reduce_res_125879 *
              defunc_2_reduce_res_125881;
        float y_125926 = defunc_2_reduce_res_125880 *
              defunc_2_reduce_res_125880;
        float c12_125927 = x_125925 - y_125926;
        float x_125928 = defunc_2_reduce_res_125878 *
              defunc_2_reduce_res_125882;
        float b2_125929 = x_125928 - y_125926;
        float x_125930 = defunc_2_reduce_res_125879 *
              defunc_2_reduce_res_125880;
        float y_125931 = defunc_2_reduce_res_125878 *
              defunc_2_reduce_res_125881;
        float c2_125932 = x_125930 - y_125931;
        float x_125933 = defunc_2_reduce_res_125878 * a12_125921;
        float y_125934 = defunc_2_reduce_res_125879 * b12_125924;
        float x_125935 = x_125933 + y_125934;
        float y_125936 = defunc_2_reduce_res_125880 * c12_125927;
        float y_125937 = x_125935 + y_125936;
        float det_125938 = 1.0F / y_125937;
        float a12_125939 = a12_125921 * det_125938;
        float b12_125940 = b12_125924 * det_125938;
        float c12_125941 = c12_125927 * det_125938;
        float b2_125942 = b2_125929 * det_125938;
        float c2_125943 = c2_125932 * det_125938;
        float defunc_2_reduce_res_125944;
        float defunc_2_reduce_res_125945;
        int64_t flat_tid_117306 = (int64_t) 0;
        int32_t num_tasks_126290;
        struct futhark_mc_task_128586 futhark_mc_task_128586;
        
        futhark_mc_task_128586.ctx = ctx;
        futhark_mc_task_128586.free_n_112520 = n_112520;
        futhark_mc_task_128586.free_gtid_117299 = gtid_117299;
        futhark_mc_task_128586.free_x_117429 = x_117429;
        futhark_mc_task_128586.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128586.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128586.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128586.free_x_125873 = x_125873;
        futhark_mc_task_128586.free_x_125874 = x_125874;
        futhark_mc_task_128586.free_defunc_0_f_res_125877 =
            defunc_0_f_res_125877;
        futhark_mc_task_128586.free_a12_125939 = a12_125939;
        futhark_mc_task_128586.free_b12_125940 = b12_125940;
        futhark_mc_task_128586.free_c12_125941 = c12_125941;
        futhark_mc_task_128586.free_b2_125942 = b2_125942;
        futhark_mc_task_128586.free_c2_125943 = c2_125943;
        futhark_mc_task_128586.retval_defunc_2_reduce_res_125944 =
            &defunc_2_reduce_res_125944;
        futhark_mc_task_128586.retval_defunc_2_reduce_res_125945 =
            &defunc_2_reduce_res_125945;
        
        struct scheduler_segop futhark_mc_task_128586_task;
        
        futhark_mc_task_128586_task.args = &futhark_mc_task_128586;
        futhark_mc_task_128586_task.top_level_fn =
            futhark_mc_segred_task_128587;
        futhark_mc_task_128586_task.name = "futhark_mc_segred_task_128587";
        futhark_mc_task_128586_task.iterations = t_window_112523;
        futhark_mc_task_128586_task.task_time =
            &ctx->futhark_mc_segred_task_128587_total_time;
        futhark_mc_task_128586_task.task_iter =
            &ctx->futhark_mc_segred_task_128587_total_iter;
        futhark_mc_task_128586_task.sched = STATIC;
        futhark_mc_task_128586_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128587_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128586_task);
        
        if (futhark_mc_segred_task_128587_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120438.mem)[gtid_117303] = defunc_2_reduce_res_125944;
        ((float *) mem_120441.mem)[gtid_117303] = defunc_2_reduce_res_125945;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128576_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128576_end -
                 futhark_mc_segmap_parloop_128576_start;
        
        ctx->futhark_mc_segmap_parloop_128576_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128576_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128576_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128574(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117302 = tid;
    int num_tasks_126096 = info.nsubtasks;
    struct futhark_mc_task_128570 *futhark_mc_task_128570 =
                                  (struct futhark_mc_task_128570 *) args;
    struct futhark_context *ctx = futhark_mc_task_128570->ctx;
    uint64_t futhark_mc_segmap_nested_task_128574_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128574_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128570->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128570->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128570->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128570->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128570->free_i_112596;
    int64_t gtid_117299 = futhark_mc_task_128570->free_gtid_117299;
    int64_t x_117429 = futhark_mc_task_128570->free_x_117429;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128570->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128570->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128570->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128570->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128570->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120438 = {.desc ="mem_120438", .mem =
                                  futhark_mc_task_128570->free_mem_120438,
                                  .size =0, .references =NULL};
    struct memblock mem_120441 = {.desc ="mem_120441", .mem =
                                  futhark_mc_task_128570->free_mem_120441,
                                  .size =0, .references =NULL};
    int64_t iter_126178;
    struct futhark_mc_segmap_parloop_struct_128575
    futhark_mc_segmap_parloop_struct_128575;
    
    futhark_mc_segmap_parloop_struct_128575.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128575.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128575.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128575.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128575.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128575.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128575.free_gtid_117299 = gtid_117299;
    futhark_mc_segmap_parloop_struct_128575.free_x_117429 = x_117429;
    futhark_mc_segmap_parloop_struct_128575.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120438 = mem_120438.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120441 = mem_120441.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128576_task;
    
    futhark_mc_segmap_parloop_128576_task.name =
        "futhark_mc_segmap_parloop_128576";
    futhark_mc_segmap_parloop_128576_task.fn = futhark_mc_segmap_parloop_128576;
    futhark_mc_segmap_parloop_128576_task.args =
        &futhark_mc_segmap_parloop_struct_128575;
    futhark_mc_segmap_parloop_128576_task.iterations = iterations;
    futhark_mc_segmap_parloop_128576_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128576_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128576_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128576_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128576_task);
    
    if (futhark_mc_segmap_parloop_128576_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128576_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128576_total_end -
                 futhark_mc_segmap_parloop_128576_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128574_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128574_end -
                 futhark_mc_segmap_nested_task_128574_start;
        
        ctx->futhark_mc_segmap_nested_task_128574_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128574_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128574_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128567(void *args, int64_t start,
                                            int64_t end, int flat_tid_117298,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128566
    *futhark_mc_segmap_parloop_struct_128566 =
    (struct futhark_mc_segmap_parloop_struct_128566 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128566->ctx;
    uint64_t futhark_mc_segmap_parloop_128567_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128567_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128566->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128566->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128566->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128566->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128566->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128566->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128566->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120475 = {.desc ="mem_120475", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120475,
                                  .size =0, .references =NULL};
    struct memblock mem_120479 = {.desc ="mem_120479", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120479,
                                  .size =0, .references =NULL};
    size_t mem_120438_cached_sizze_128568 = 0;
    char *mem_120438 = NULL;
    size_t mem_120441_cached_sizze_128569 = 0;
    char *mem_120441 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125872 = start;
    
    if (mem_120438_cached_sizze_128568 < (size_t) bytes_119552) {
        mem_120438 = realloc(mem_120438, bytes_119552);
        mem_120438_cached_sizze_128568 = bytes_119552;
    }
    if (mem_120441_cached_sizze_128569 < (size_t) bytes_119552) {
        mem_120441 = realloc(mem_120441, bytes_119552);
        mem_120441_cached_sizze_128569 = bytes_119552;
    }
    for (; iter_125872 < end; iter_125872++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126094 = m_112519;
        int64_t gtid_117299 = iter_125872;
        int64_t remnant_126095 = iter_125872 - gtid_117299;
        int64_t x_117429 = ((int64_t *) mem_119420.mem)[gtid_117299];
        int64_t flat_tid_117300 = (int64_t) 0;
        int32_t num_tasks_126096;
        int64_t flat_tid_117302 = (int64_t) 0;
        struct futhark_mc_task_128570 futhark_mc_task_128570;
        
        futhark_mc_task_128570.ctx = ctx;
        futhark_mc_task_128570.free_n_112520 = n_112520;
        futhark_mc_task_128570.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128570.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128570.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128570.free_i_112596 = i_112596;
        futhark_mc_task_128570.free_gtid_117299 = gtid_117299;
        futhark_mc_task_128570.free_x_117429 = x_117429;
        futhark_mc_task_128570.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128570.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128570.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128570.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128570.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128570.free_mem_120438 = mem_120438;
        futhark_mc_task_128570.free_mem_120441 = mem_120441;
        
        struct scheduler_segop futhark_mc_task_128570_task;
        
        futhark_mc_task_128570_task.args = &futhark_mc_task_128570;
        futhark_mc_task_128570_task.top_level_fn =
            futhark_mc_segmap_task_128571;
        futhark_mc_task_128570_task.name = "futhark_mc_segmap_task_128571";
        futhark_mc_task_128570_task.iterations = t_n_m_112577;
        futhark_mc_task_128570_task.task_time =
            &ctx->futhark_mc_segmap_task_128571_total_time;
        futhark_mc_task_128570_task.task_iter =
            &ctx->futhark_mc_segmap_task_128571_total_iter;
        futhark_mc_task_128570_task.sched = STATIC;
        futhark_mc_task_128570_task.nested_fn =
            futhark_mc_segmap_nested_task_128574;
        
        int futhark_mc_segmap_task_128571_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128570_task);
        
        if (futhark_mc_segmap_task_128571_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120475.mem + gtid_117299 * t_n_m_112577 * (int64_t) 4,
                mem_120438 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120479.mem + gtid_117299 * t_n_m_112577 * (int64_t) 4,
                mem_120441 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120438);
    free(mem_120441);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128567_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128567_end -
                 futhark_mc_segmap_parloop_128567_start;
        
        ctx->futhark_mc_segmap_parloop_128567_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128567_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128567_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128565(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117298 = tid;
    int num_tasks_125746 = info.nsubtasks;
    struct futhark_mc_task_128559 *futhark_mc_task_128559 =
                                  (struct futhark_mc_task_128559 *) args;
    struct futhark_context *ctx = futhark_mc_task_128559->ctx;
    uint64_t futhark_mc_segmap_nested_task_128565_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128565_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128559->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128559->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128559->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128559->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128559->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128559->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128559->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128559->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128559->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128559->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128559->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128559->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128559->free_mem_120361,
                                  .size =0, .references =NULL};
    struct memblock mem_120475 = {.desc ="mem_120475", .mem =
                                  futhark_mc_task_128559->free_mem_120475,
                                  .size =0, .references =NULL};
    struct memblock mem_120479 = {.desc ="mem_120479", .mem =
                                  futhark_mc_task_128559->free_mem_120479,
                                  .size =0, .references =NULL};
    int64_t iter_125872;
    struct futhark_mc_segmap_parloop_struct_128566
    futhark_mc_segmap_parloop_struct_128566;
    
    futhark_mc_segmap_parloop_struct_128566.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128566.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128566.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128566.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128566.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128566.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128566.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128566.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120475 = mem_120475.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120479 = mem_120479.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128567_task;
    
    futhark_mc_segmap_parloop_128567_task.name =
        "futhark_mc_segmap_parloop_128567";
    futhark_mc_segmap_parloop_128567_task.fn = futhark_mc_segmap_parloop_128567;
    futhark_mc_segmap_parloop_128567_task.args =
        &futhark_mc_segmap_parloop_struct_128566;
    futhark_mc_segmap_parloop_128567_task.iterations = iterations;
    futhark_mc_segmap_parloop_128567_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128567_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128567_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128567_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128567_task);
    
    if (futhark_mc_segmap_parloop_128567_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128567_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128567_total_end -
                 futhark_mc_segmap_parloop_128567_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128565_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128565_end -
                 futhark_mc_segmap_nested_task_128565_start;
        
        ctx->futhark_mc_segmap_nested_task_128565_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128565_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128565_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128592 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120542;
};
struct futhark_mc_segmap_parloop_struct_128594 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120542;
};
static int futhark_mc_segmap_parloop_128595(void *args, int64_t start,
                                            int64_t end, int flat_tid_117664,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128594
    *futhark_mc_segmap_parloop_struct_128594 =
    (struct futhark_mc_segmap_parloop_struct_128594 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128594->ctx;
    uint64_t futhark_mc_segmap_parloop_128595_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128595_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128594->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128594->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128594->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128594->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128594->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128594->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128594->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 =
            futhark_mc_segmap_parloop_struct_128594->free_bytes_120488;
    struct memblock mem_120542 = {.desc ="mem_120542", .mem =
                                  futhark_mc_segmap_parloop_struct_128594->free_mem_120542,
                                  .size =0, .references =NULL};
    size_t mem_120511_cached_sizze_128596 = 0;
    char *mem_120511 = NULL;
    size_t mem_120521_cached_sizze_128597 = 0;
    char *mem_120521 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126308 = start;
    
    if (mem_120511_cached_sizze_128596 < (size_t) bytes_119552) {
        mem_120511 = realloc(mem_120511, bytes_119552);
        mem_120511_cached_sizze_128596 = bytes_119552;
    }
    if (mem_120521_cached_sizze_128597 < (size_t) bytes_120488) {
        mem_120521 = realloc(mem_120521, bytes_120488);
        mem_120521_cached_sizze_128597 = bytes_120488;
    }
    for (; iter_126308 < end; iter_126308++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126354 = m_112519;
        int64_t gtid_117665 = iter_126308;
        int64_t remnant_126355 = iter_126308 - gtid_117665;
        int64_t x_114128 = ((int64_t *) mem_119420.mem)[gtid_117665];
        
        for (int64_t i_126309 = 0; i_126309 < t_n_m_112577; i_126309++) {
            int64_t x_126311 = ((int64_t *) mem_119606.mem)[gtid_117665 *
                                                            t_n_m_112577 +
                                                            i_126309];
            float x_126312 = ((float *) mem_119610.mem)[gtid_117665 *
                                                        t_n_m_112577 +
                                                        i_126309];
            int64_t min_arg_126313 = mul64(t_jump_112527, i_126309);
            int64_t min_res_126314 = smin64(i_112596, min_arg_126313);
            float defunc_0_f_res_126315 = sitofp_i64_f32(min_res_126314);
            float defunc_2_reduce_res_126317;
            float redout_126320 = 0.0F;
            
            for (int64_t i_126319 = 0; i_126319 < t_window_112523; i_126319++) {
                bool cond_126322 = sle64(x_114128, i_126319);
                float defunc_0_f_res_126323;
                
                if (cond_126322) {
                    defunc_0_f_res_126323 = 0.0F;
                } else {
                    int64_t i_126324 = add64(x_126311, i_126319);
                    float x_126325 = ((float *) mem_119442.mem)[gtid_117665 *
                                                                n_112520 +
                                                                i_126324];
                    float defunc_0_f_res_f_res_126326 = 1.0F + x_126325;
                    
                    defunc_0_f_res_126323 = defunc_0_f_res_f_res_126326;
                }
                
                float defunc_0_f_res_126327;
                
                if (cond_126322) {
                    defunc_0_f_res_126327 = 0.0F;
                } else {
                    int64_t i_126328 = add64(x_126311, i_126319);
                    float x_126329 = ((float *) mem_120361.mem)[gtid_117665 *
                                                                n_112520 +
                                                                i_126328];
                    
                    defunc_0_f_res_126327 = x_126329;
                }
                
                float x_j_126330 = defunc_0_f_res_126323 -
                      defunc_0_f_res_126315;
                float abs_res_126331 = (float) fabs(x_j_126330);
                float tmp1_126332 = abs_res_126331 / x_126312;
                float x_126333 = tmp1_126332 * tmp1_126332;
                float y_126334 = tmp1_126332 * x_126333;
                float tmp2_126335 = 1.0F - y_126334;
                float x_126336 = tmp2_126335 * tmp2_126335;
                float tmp3_126337 = tmp2_126335 * x_126336;
                float tmp4_126338 = defunc_0_f_res_126327 * tmp3_126337;
                float defunc_1_op_res_126339 = tmp4_126338 + redout_126320;
                
                ((float *) mem_120521)[i_126319] = tmp4_126338;
                
                float redout_tmp_126357 = defunc_1_op_res_126339;
                
                redout_126320 = redout_tmp_126357;
            }
            defunc_2_reduce_res_126317 = redout_126320;
            
            float a0_126341 = 1.0F / defunc_2_reduce_res_126317;
            float defunc_2_reduce_res_126342;
            float redout_126344 = 0.0F;
            
            for (int64_t i_126343 = 0; i_126343 < t_window_112523; i_126343++) {
                float x_126345 = ((float *) mem_120521)[i_126343];
                bool cond_126346 = sle64(x_114128, i_126343);
                float defunc_0_f_res_126347;
                
                if (cond_126346) {
                    defunc_0_f_res_126347 = 0.0F;
                } else {
                    int64_t i_126348 = add64(x_126311, i_126343);
                    float x_126349 = ((float *) mem_120357.mem)[gtid_117665 *
                                                                n_112520 +
                                                                i_126348];
                    
                    defunc_0_f_res_126347 = x_126349;
                }
                
                float x_126350 = a0_126341 * x_126345;
                float defunc_9_fit_fun_res_126351 = defunc_0_f_res_126347 *
                      x_126350;
                float defunc_1_op_res_126352 = defunc_9_fit_fun_res_126351 +
                      redout_126344;
                float redout_tmp_126359 = defunc_1_op_res_126352;
                
                redout_126344 = redout_tmp_126359;
            }
            defunc_2_reduce_res_126342 = redout_126344;
            ((float *) mem_120511)[i_126309] = defunc_2_reduce_res_126342;
        }
        memmove(mem_120542.mem + gtid_117665 * t_n_m_112577 * (int64_t) 4,
                mem_120511 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120511);
    free(mem_120521);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128595_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128595_end -
                 futhark_mc_segmap_parloop_128595_start;
        
        ctx->futhark_mc_segmap_parloop_128595_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128595_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128595_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128593(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117664 = tid;
    int num_tasks_126307 = info.nsubtasks;
    struct futhark_mc_task_128592 *futhark_mc_task_128592 =
                                  (struct futhark_mc_task_128592 *) args;
    struct futhark_context *ctx = futhark_mc_task_128592->ctx;
    uint64_t futhark_mc_segmap_task_128593_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128593_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128592->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128592->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128592->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128592->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128592->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128592->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128592->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128592->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128592->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128592->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128592->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128592->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128592->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 = futhark_mc_task_128592->free_bytes_120488;
    struct memblock mem_120542 = {.desc ="mem_120542", .mem =
                                  futhark_mc_task_128592->free_mem_120542,
                                  .size =0, .references =NULL};
    int64_t iter_126308;
    struct futhark_mc_segmap_parloop_struct_128594
    futhark_mc_segmap_parloop_struct_128594;
    
    futhark_mc_segmap_parloop_struct_128594.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128594.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128594.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128594.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128594.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128594.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128594.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128594.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128594.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128594.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128594.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128594.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128594.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128594.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128594.free_bytes_120488 = bytes_120488;
    futhark_mc_segmap_parloop_struct_128594.free_mem_120542 = mem_120542.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128595_task;
    
    futhark_mc_segmap_parloop_128595_task.name =
        "futhark_mc_segmap_parloop_128595";
    futhark_mc_segmap_parloop_128595_task.fn = futhark_mc_segmap_parloop_128595;
    futhark_mc_segmap_parloop_128595_task.args =
        &futhark_mc_segmap_parloop_struct_128594;
    futhark_mc_segmap_parloop_128595_task.iterations = iterations;
    futhark_mc_segmap_parloop_128595_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128595_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128595_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128595_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128595_task);
    
    if (futhark_mc_segmap_parloop_128595_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128595_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128595_total_end -
                 futhark_mc_segmap_parloop_128595_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128595_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128595_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128595_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128593_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128593_end -
                 futhark_mc_segmap_task_128593_start;
        
        ctx->futhark_mc_segmap_task_128593_runs[tid]++;
        ctx->futhark_mc_segmap_task_128593_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128593_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128599 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120542;
};
struct futhark_mc_task_128602 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120508;
};
struct futhark_mc_segmap_parloop_struct_128604 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120508;
};
static int futhark_mc_segmap_parloop_128605(void *args, int64_t start,
                                            int64_t end, int flat_tid_117668,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128604
    *futhark_mc_segmap_parloop_struct_128604 =
    (struct futhark_mc_segmap_parloop_struct_128604 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128604->ctx;
    uint64_t futhark_mc_segmap_parloop_128605_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128605_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128604->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128604->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128604->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128604->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128604->free_i_112596;
    int64_t gtid_117667 =
            futhark_mc_segmap_parloop_struct_128604->free_gtid_117667;
    int64_t x_117723 = futhark_mc_segmap_parloop_struct_128604->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 =
            futhark_mc_segmap_parloop_struct_128604->free_bytes_120488;
    struct memblock mem_120508 = {.desc ="mem_120508", .mem =
                                  futhark_mc_segmap_parloop_struct_128604->free_mem_120508,
                                  .size =0, .references =NULL};
    size_t mem_126406_cached_sizze_128606 = 0;
    char *mem_126406 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126447 = start;
    
    if (mem_126406_cached_sizze_128606 < (size_t) bytes_120488) {
        mem_126406 = realloc(mem_126406, bytes_120488);
        mem_126406_cached_sizze_128606 = bytes_120488;
    }
    for (; iter_126447 < end; iter_126447++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126480 = t_n_m_112577;
        int64_t gtid_117669 = iter_126447;
        int64_t remnant_126481 = iter_126447 - gtid_117669;
        int64_t x_126401 = ((int64_t *) mem_119606.mem)[gtid_117667 *
                                                        t_n_m_112577 +
                                                        gtid_117669];
        float x_126402 = ((float *) mem_119610.mem)[gtid_117667 * t_n_m_112577 +
                                                    gtid_117669];
        int64_t min_arg_126403 = mul64(t_jump_112527, gtid_117669);
        int64_t min_res_126404 = smin64(i_112596, min_arg_126403);
        float defunc_0_f_res_126405 = sitofp_i64_f32(min_res_126404);
        float defunc_2_reduce_res_126408;
        float redout_126449 = 0.0F;
        
        for (int64_t i_126448 = 0; i_126448 < t_window_112523; i_126448++) {
            bool cond_126451 = sle64(x_117723, i_126448);
            float defunc_0_f_res_126452;
            
            if (cond_126451) {
                defunc_0_f_res_126452 = 0.0F;
            } else {
                int64_t i_126453 = add64(x_126401, i_126448);
                float x_126454 = ((float *) mem_119442.mem)[gtid_117667 *
                                                            n_112520 +
                                                            i_126453];
                float defunc_0_f_res_f_res_126455 = 1.0F + x_126454;
                
                defunc_0_f_res_126452 = defunc_0_f_res_f_res_126455;
            }
            
            float defunc_0_f_res_126456;
            
            if (cond_126451) {
                defunc_0_f_res_126456 = 0.0F;
            } else {
                int64_t i_126457 = add64(x_126401, i_126448);
                float x_126458 = ((float *) mem_120361.mem)[gtid_117667 *
                                                            n_112520 +
                                                            i_126457];
                
                defunc_0_f_res_126456 = x_126458;
            }
            
            float x_j_126459 = defunc_0_f_res_126452 - defunc_0_f_res_126405;
            float abs_res_126460 = (float) fabs(x_j_126459);
            float tmp1_126461 = abs_res_126460 / x_126402;
            float x_126462 = tmp1_126461 * tmp1_126461;
            float y_126463 = tmp1_126461 * x_126462;
            float tmp2_126464 = 1.0F - y_126463;
            float x_126465 = tmp2_126464 * tmp2_126464;
            float tmp3_126466 = tmp2_126464 * x_126465;
            float tmp4_126467 = defunc_0_f_res_126456 * tmp3_126466;
            float defunc_1_op_res_126468 = tmp4_126467 + redout_126449;
            
            ((float *) mem_126406)[i_126448] = tmp4_126467;
            
            float redout_tmp_126482 = defunc_1_op_res_126468;
            
            redout_126449 = redout_tmp_126482;
        }
        defunc_2_reduce_res_126408 = redout_126449;
        
        float a0_126432 = 1.0F / defunc_2_reduce_res_126408;
        float defunc_2_reduce_res_126433;
        float redout_126471 = 0.0F;
        
        for (int64_t i_126470 = 0; i_126470 < t_window_112523; i_126470++) {
            float x_126472 = ((float *) mem_126406)[i_126470];
            bool cond_126473 = sle64(x_117723, i_126470);
            float defunc_0_f_res_126474;
            
            if (cond_126473) {
                defunc_0_f_res_126474 = 0.0F;
            } else {
                int64_t i_126475 = add64(x_126401, i_126470);
                float x_126476 = ((float *) mem_120357.mem)[gtid_117667 *
                                                            n_112520 +
                                                            i_126475];
                
                defunc_0_f_res_126474 = x_126476;
            }
            
            float x_126477 = a0_126432 * x_126472;
            float defunc_9_fit_fun_res_126478 = defunc_0_f_res_126474 *
                  x_126477;
            float defunc_1_op_res_126479 = defunc_9_fit_fun_res_126478 +
                  redout_126471;
            float redout_tmp_126484 = defunc_1_op_res_126479;
            
            redout_126471 = redout_tmp_126484;
        }
        defunc_2_reduce_res_126433 = redout_126471;
        ((float *) mem_120508.mem)[gtid_117669] = defunc_2_reduce_res_126433;
    }
    
  cleanup:
    { }
    free(mem_126406);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128605_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128605_end -
                 futhark_mc_segmap_parloop_128605_start;
        
        ctx->futhark_mc_segmap_parloop_128605_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128605_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128605_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128603(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117668 = tid;
    int num_tasks_126446 = info.nsubtasks;
    struct futhark_mc_task_128602 *futhark_mc_task_128602 =
                                  (struct futhark_mc_task_128602 *) args;
    struct futhark_context *ctx = futhark_mc_task_128602->ctx;
    uint64_t futhark_mc_segmap_task_128603_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128603_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128602->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128602->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128602->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128602->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128602->free_i_112596;
    int64_t gtid_117667 = futhark_mc_task_128602->free_gtid_117667;
    int64_t x_117723 = futhark_mc_task_128602->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128602->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128602->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128602->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128602->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128602->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 = futhark_mc_task_128602->free_bytes_120488;
    struct memblock mem_120508 = {.desc ="mem_120508", .mem =
                                  futhark_mc_task_128602->free_mem_120508,
                                  .size =0, .references =NULL};
    int64_t iter_126447;
    struct futhark_mc_segmap_parloop_struct_128604
    futhark_mc_segmap_parloop_struct_128604;
    
    futhark_mc_segmap_parloop_struct_128604.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128604.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128604.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128604.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128604.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128604.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128604.free_gtid_117667 = gtid_117667;
    futhark_mc_segmap_parloop_struct_128604.free_x_117723 = x_117723;
    futhark_mc_segmap_parloop_struct_128604.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128604.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128604.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128604.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128604.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128604.free_bytes_120488 = bytes_120488;
    futhark_mc_segmap_parloop_struct_128604.free_mem_120508 = mem_120508.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128605_task;
    
    futhark_mc_segmap_parloop_128605_task.name =
        "futhark_mc_segmap_parloop_128605";
    futhark_mc_segmap_parloop_128605_task.fn = futhark_mc_segmap_parloop_128605;
    futhark_mc_segmap_parloop_128605_task.args =
        &futhark_mc_segmap_parloop_struct_128604;
    futhark_mc_segmap_parloop_128605_task.iterations = iterations;
    futhark_mc_segmap_parloop_128605_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128605_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128605_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128605_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128605_task);
    
    if (futhark_mc_segmap_parloop_128605_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128605_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128605_total_end -
                 futhark_mc_segmap_parloop_128605_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128605_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128605_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128605_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128603_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128603_end -
                 futhark_mc_segmap_task_128603_start;
        
        ctx->futhark_mc_segmap_task_128603_runs[tid]++;
        ctx->futhark_mc_segmap_task_128603_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128603_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128608 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120488;
    char *free_mem_120508;
};
struct futhark_mc_task_128611 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_126361;
    float free_x_126362;
    float free_defunc_0_f_res_126365;
    float *retval_defunc_2_reduce_res_126367;
    char *retval_mem_126366;
};
struct futhark_mc_segred_stage_1_parloop_struct_128614 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_126361;
    float free_x_126362;
    float free_defunc_0_f_res_126365;
    char *free_mem_126366;
    char *free_reduce_stage_1_tid_res_arr_mem_126519;
};
static int futhark_mc_segred_stage_1_parloop_128615(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117672,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128614
    *futhark_mc_segred_stage_1_parloop_struct_128614 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128614 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128614->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128615_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128615_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128614->free_n_112520;
    int64_t gtid_117667 =
            futhark_mc_segred_stage_1_parloop_struct_128614->free_gtid_117667;
    int64_t x_117723 =
            futhark_mc_segred_stage_1_parloop_struct_128614->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128614->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128614->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_126361 =
            futhark_mc_segred_stage_1_parloop_struct_128614->free_x_126361;
    float x_126362 =
          futhark_mc_segred_stage_1_parloop_struct_128614->free_x_126362;
    float defunc_0_f_res_126365 =
          futhark_mc_segred_stage_1_parloop_struct_128614->free_defunc_0_f_res_126365;
    struct memblock mem_126366 = {.desc ="mem_126366", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128614->free_mem_126366,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126519 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126519",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128614->free_reduce_stage_1_tid_res_arr_mem_126519,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126521 = start;
    float x_126486;
    float x_126487;
    float local_acc_126522 = 0.0F;
    
    for (; iter_126521 < end; iter_126521++) {
        int64_t gtid_117673 = iter_126521;
        bool cond_126489 = sle64(x_117723, gtid_117673);
        float defunc_0_f_res_126490;
        
        if (cond_126489) {
            defunc_0_f_res_126490 = 0.0F;
        } else {
            int64_t i_126491 = add64(gtid_117673, x_126361);
            float x_126492 = ((float *) mem_119442.mem)[gtid_117667 * n_112520 +
                                                        i_126491];
            float defunc_0_f_res_f_res_126493 = 1.0F + x_126492;
            
            defunc_0_f_res_126490 = defunc_0_f_res_f_res_126493;
        }
        
        float defunc_0_f_res_126494;
        
        if (cond_126489) {
            defunc_0_f_res_126494 = 0.0F;
        } else {
            int64_t i_126495 = add64(gtid_117673, x_126361);
            float x_126496 = ((float *) mem_120361.mem)[gtid_117667 * n_112520 +
                                                        i_126495];
            
            defunc_0_f_res_126494 = x_126496;
        }
        
        float x_j_126497 = defunc_0_f_res_126490 - defunc_0_f_res_126365;
        float abs_res_126498 = (float) fabs(x_j_126497);
        float tmp1_126499 = abs_res_126498 / x_126362;
        float x_126500 = tmp1_126499 * tmp1_126499;
        float y_126501 = tmp1_126499 * x_126500;
        float tmp2_126502 = 1.0F - y_126501;
        float x_126503 = tmp2_126502 * tmp2_126502;
        float tmp3_126504 = tmp2_126502 * x_126503;
        float tmp4_126505 = defunc_0_f_res_126494 * tmp3_126504;
        
        // save map-out results
        {
            ((float *) mem_126366.mem)[gtid_117673] = tmp4_126505;
        }
        // Load accum params
        {
            x_126486 = local_acc_126522;
        }
        // Load next params
        {
            x_126487 = tmp4_126505;
        }
        // Red body
        {
            float defunc_1_op_res_126488 = x_126486 + x_126487;
            
            local_acc_126522 = defunc_1_op_res_126488;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126519.mem)[flat_tid_117672] =
        local_acc_126522;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128615_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128615_end -
                 futhark_mc_segred_stage_1_parloop_128615_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128615_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128615_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128615_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128612(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117672 = tid;
    int num_tasks_126518 = info.nsubtasks;
    struct futhark_mc_task_128611 *futhark_mc_task_128611 =
                                  (struct futhark_mc_task_128611 *) args;
    struct futhark_context *ctx = futhark_mc_task_128611->ctx;
    uint64_t futhark_mc_segred_task_128612_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128612_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128611->free_n_112520;
    int64_t gtid_117667 = futhark_mc_task_128611->free_gtid_117667;
    int64_t x_117723 = futhark_mc_task_128611->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128611->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128611->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_126361 = futhark_mc_task_128611->free_x_126361;
    float x_126362 = futhark_mc_task_128611->free_x_126362;
    float defunc_0_f_res_126365 =
          futhark_mc_task_128611->free_defunc_0_f_res_126365;
    float defunc_2_reduce_res_126367 =
          *futhark_mc_task_128611->retval_defunc_2_reduce_res_126367;
    struct memblock mem_126366 = {.desc ="mem_126366", .mem =
                                  futhark_mc_task_128611->retval_mem_126366,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_128613 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126519 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_128613 <
        (size_t) ((int64_t) 4 * num_tasks_126518)) {
        reduce_stage_1_tid_res_arr_mem_126519 =
            realloc(reduce_stage_1_tid_res_arr_mem_126519, (int64_t) 4 *
                    num_tasks_126518);
        reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_128613 =
            (int64_t) 4 * num_tasks_126518;
    }
    
    int64_t iter_126521;
    struct futhark_mc_segred_stage_1_parloop_struct_128614
    futhark_mc_segred_stage_1_parloop_struct_128614;
    
    futhark_mc_segred_stage_1_parloop_struct_128614.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_gtid_117667 =
        gtid_117667;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_x_117723 = x_117723;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_x_126361 = x_126361;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_x_126362 = x_126362;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_defunc_0_f_res_126365 =
        defunc_0_f_res_126365;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_mem_126366 =
        mem_126366.mem;
    futhark_mc_segred_stage_1_parloop_struct_128614.free_reduce_stage_1_tid_res_arr_mem_126519 =
        reduce_stage_1_tid_res_arr_mem_126519;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128615_task;
    
    futhark_mc_segred_stage_1_parloop_128615_task.name =
        "futhark_mc_segred_stage_1_parloop_128615";
    futhark_mc_segred_stage_1_parloop_128615_task.fn =
        futhark_mc_segred_stage_1_parloop_128615;
    futhark_mc_segred_stage_1_parloop_128615_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128614;
    futhark_mc_segred_stage_1_parloop_128615_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128615_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128615_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128615_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128615_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128615_task);
    
    if (futhark_mc_segred_stage_1_parloop_128615_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128615_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128615_total_end -
                 futhark_mc_segred_stage_1_parloop_128615_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128615_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128615_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128615_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126367 = 0.0F;
    }
    
    float x_126523;
    float x_126524;
    
    for (int32_t i_126526 = 0; i_126526 < num_tasks_126518; i_126526++) {
        flat_tid_117672 = i_126526;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126523 = defunc_2_reduce_res_126367;
            }
            // load next params
            {
                x_126524 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126519)[flat_tid_117672];
            }
            // red body
            {
                float defunc_1_op_res_126525 = x_126523 + x_126524;
                
                defunc_2_reduce_res_126367 = defunc_1_op_res_126525;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126519);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128612_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128612_end -
                 futhark_mc_segred_task_128612_start;
        
        ctx->futhark_mc_segred_task_128612_runs[tid]++;
        ctx->futhark_mc_segred_task_128612_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128612_iter[tid] += iterations;
    }
    *futhark_mc_task_128611->retval_defunc_2_reduce_res_126367 =
        defunc_2_reduce_res_126367;
    futhark_mc_task_128611->retval_mem_126366 = mem_126366.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128616 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_120357;
    int64_t free_x_126361;
    char *free_mem_126366;
    float free_a0_126389;
    float *retval_defunc_2_reduce_res_126390;
};
struct futhark_mc_segred_stage_1_parloop_struct_128619 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117667;
    int64_t free_x_117723;
    char *free_mem_120357;
    int64_t free_x_126361;
    char *free_mem_126366;
    float free_a0_126389;
    char *free_reduce_stage_1_tid_res_arr_mem_126528;
};
static int futhark_mc_segred_stage_1_parloop_128620(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117674,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128619
    *futhark_mc_segred_stage_1_parloop_struct_128619 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128619 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128619->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128620_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128620_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128619->free_n_112520;
    int64_t gtid_117667 =
            futhark_mc_segred_stage_1_parloop_struct_128619->free_gtid_117667;
    int64_t x_117723 =
            futhark_mc_segred_stage_1_parloop_struct_128619->free_x_117723;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128619->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_126361 =
            futhark_mc_segred_stage_1_parloop_struct_128619->free_x_126361;
    struct memblock mem_126366 = {.desc ="mem_126366", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128619->free_mem_126366,
                                  .size =0, .references =NULL};
    float a0_126389 =
          futhark_mc_segred_stage_1_parloop_struct_128619->free_a0_126389;
    struct memblock reduce_stage_1_tid_res_arr_mem_126528 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126528",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128619->free_reduce_stage_1_tid_res_arr_mem_126528,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126530 = start;
    float x_126506;
    float x_126507;
    float local_acc_126531 = 0.0F;
    
    for (; iter_126530 < end; iter_126530++) {
        int64_t gtid_117675 = iter_126530;
        float x_126509 = ((float *) mem_126366.mem)[gtid_117675];
        bool cond_126510 = sle64(x_117723, gtid_117675);
        float defunc_0_f_res_126511;
        
        if (cond_126510) {
            defunc_0_f_res_126511 = 0.0F;
        } else {
            int64_t i_126512 = add64(gtid_117675, x_126361);
            float x_126513 = ((float *) mem_120357.mem)[gtid_117667 * n_112520 +
                                                        i_126512];
            
            defunc_0_f_res_126511 = x_126513;
        }
        
        float x_126514 = a0_126389 * x_126509;
        float defunc_9_fit_fun_res_126515 = defunc_0_f_res_126511 * x_126514;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126506 = local_acc_126531;
        }
        // Load next params
        {
            x_126507 = defunc_9_fit_fun_res_126515;
        }
        // Red body
        {
            float defunc_1_op_res_126508 = x_126506 + x_126507;
            
            local_acc_126531 = defunc_1_op_res_126508;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126528.mem)[flat_tid_117674] =
        local_acc_126531;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128620_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128620_end -
                 futhark_mc_segred_stage_1_parloop_128620_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128620_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128620_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128620_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128617(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117674 = tid;
    int num_tasks_126527 = info.nsubtasks;
    struct futhark_mc_task_128616 *futhark_mc_task_128616 =
                                  (struct futhark_mc_task_128616 *) args;
    struct futhark_context *ctx = futhark_mc_task_128616->ctx;
    uint64_t futhark_mc_segred_task_128617_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128617_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128616->free_n_112520;
    int64_t gtid_117667 = futhark_mc_task_128616->free_gtid_117667;
    int64_t x_117723 = futhark_mc_task_128616->free_x_117723;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128616->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_126361 = futhark_mc_task_128616->free_x_126361;
    struct memblock mem_126366 = {.desc ="mem_126366", .mem =
                                  futhark_mc_task_128616->free_mem_126366,
                                  .size =0, .references =NULL};
    float a0_126389 = futhark_mc_task_128616->free_a0_126389;
    float defunc_2_reduce_res_126390 =
          *futhark_mc_task_128616->retval_defunc_2_reduce_res_126390;
    size_t reduce_stage_1_tid_res_arr_mem_126528_cached_sizze_128618 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126528 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126528_cached_sizze_128618 <
        (size_t) ((int64_t) 4 * num_tasks_126527)) {
        reduce_stage_1_tid_res_arr_mem_126528 =
            realloc(reduce_stage_1_tid_res_arr_mem_126528, (int64_t) 4 *
                    num_tasks_126527);
        reduce_stage_1_tid_res_arr_mem_126528_cached_sizze_128618 =
            (int64_t) 4 * num_tasks_126527;
    }
    
    int64_t iter_126530;
    struct futhark_mc_segred_stage_1_parloop_struct_128619
    futhark_mc_segred_stage_1_parloop_struct_128619;
    
    futhark_mc_segred_stage_1_parloop_struct_128619.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_gtid_117667 =
        gtid_117667;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_x_117723 = x_117723;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_x_126361 = x_126361;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_mem_126366 =
        mem_126366.mem;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_a0_126389 = a0_126389;
    futhark_mc_segred_stage_1_parloop_struct_128619.free_reduce_stage_1_tid_res_arr_mem_126528 =
        reduce_stage_1_tid_res_arr_mem_126528;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128620_task;
    
    futhark_mc_segred_stage_1_parloop_128620_task.name =
        "futhark_mc_segred_stage_1_parloop_128620";
    futhark_mc_segred_stage_1_parloop_128620_task.fn =
        futhark_mc_segred_stage_1_parloop_128620;
    futhark_mc_segred_stage_1_parloop_128620_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128619;
    futhark_mc_segred_stage_1_parloop_128620_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128620_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128620_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128620_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128620_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128620_task);
    
    if (futhark_mc_segred_stage_1_parloop_128620_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128620_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128620_total_end -
                 futhark_mc_segred_stage_1_parloop_128620_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128620_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128620_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128620_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126390 = 0.0F;
    }
    
    float x_126532;
    float x_126533;
    
    for (int32_t i_126535 = 0; i_126535 < num_tasks_126527; i_126535++) {
        flat_tid_117674 = i_126535;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126532 = defunc_2_reduce_res_126390;
            }
            // load next params
            {
                x_126533 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126528)[flat_tid_117674];
            }
            // red body
            {
                float defunc_1_op_res_126534 = x_126532 + x_126533;
                
                defunc_2_reduce_res_126390 = defunc_1_op_res_126534;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126528);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128617_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128617_end -
                 futhark_mc_segred_task_128617_start;
        
        ctx->futhark_mc_segred_task_128617_runs[tid]++;
        ctx->futhark_mc_segred_task_128617_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128617_iter[tid] += iterations;
    }
    *futhark_mc_task_128616->retval_defunc_2_reduce_res_126390 =
        defunc_2_reduce_res_126390;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128609(void *args, int64_t start,
                                            int64_t end, int flat_tid_117670,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128608
    *futhark_mc_segmap_parloop_struct_128608 =
    (struct futhark_mc_segmap_parloop_struct_128608 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128608->ctx;
    uint64_t futhark_mc_segmap_parloop_128609_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128609_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128608->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128608->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128608->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128608->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128608->free_i_112596;
    int64_t gtid_117667 =
            futhark_mc_segmap_parloop_struct_128608->free_gtid_117667;
    int64_t x_117723 = futhark_mc_segmap_parloop_struct_128608->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 =
            futhark_mc_segmap_parloop_struct_128608->free_bytes_120488;
    struct memblock mem_120508 = {.desc ="mem_120508", .mem =
                                  futhark_mc_segmap_parloop_struct_128608->free_mem_120508,
                                  .size =0, .references =NULL};
    size_t mem_126366_cached_sizze_128610 = 0;
    char *mem_126366 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126485 = start;
    
    if (mem_126366_cached_sizze_128610 < (size_t) bytes_120488) {
        mem_126366 = realloc(mem_126366, bytes_120488);
        mem_126366_cached_sizze_128610 = bytes_120488;
    }
    for (; iter_126485 < end; iter_126485++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126516 = t_n_m_112577;
        int64_t gtid_117671 = iter_126485;
        int64_t remnant_126517 = iter_126485 - gtid_117671;
        int64_t x_126361 = ((int64_t *) mem_119606.mem)[gtid_117667 *
                                                        t_n_m_112577 +
                                                        gtid_117671];
        float x_126362 = ((float *) mem_119610.mem)[gtid_117667 * t_n_m_112577 +
                                                    gtid_117671];
        int64_t min_arg_126363 = mul64(t_jump_112527, gtid_117671);
        int64_t min_res_126364 = smin64(i_112596, min_arg_126363);
        float defunc_0_f_res_126365 = sitofp_i64_f32(min_res_126364);
        float defunc_2_reduce_res_126367;
        int64_t flat_tid_117672 = (int64_t) 0;
        int32_t num_tasks_126518;
        struct futhark_mc_task_128611 futhark_mc_task_128611;
        
        futhark_mc_task_128611.ctx = ctx;
        futhark_mc_task_128611.free_n_112520 = n_112520;
        futhark_mc_task_128611.free_gtid_117667 = gtid_117667;
        futhark_mc_task_128611.free_x_117723 = x_117723;
        futhark_mc_task_128611.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128611.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128611.free_x_126361 = x_126361;
        futhark_mc_task_128611.free_x_126362 = x_126362;
        futhark_mc_task_128611.free_defunc_0_f_res_126365 =
            defunc_0_f_res_126365;
        futhark_mc_task_128611.retval_defunc_2_reduce_res_126367 =
            &defunc_2_reduce_res_126367;
        futhark_mc_task_128611.retval_mem_126366 = mem_126366;
        
        struct scheduler_segop futhark_mc_task_128611_task;
        
        futhark_mc_task_128611_task.args = &futhark_mc_task_128611;
        futhark_mc_task_128611_task.top_level_fn =
            futhark_mc_segred_task_128612;
        futhark_mc_task_128611_task.name = "futhark_mc_segred_task_128612";
        futhark_mc_task_128611_task.iterations = t_window_112523;
        futhark_mc_task_128611_task.task_time =
            &ctx->futhark_mc_segred_task_128612_total_time;
        futhark_mc_task_128611_task.task_iter =
            &ctx->futhark_mc_segred_task_128612_total_iter;
        futhark_mc_task_128611_task.sched = STATIC;
        futhark_mc_task_128611_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128612_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128611_task);
        
        if (futhark_mc_segred_task_128612_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_126389 = 1.0F / defunc_2_reduce_res_126367;
        float defunc_2_reduce_res_126390;
        int64_t flat_tid_117674 = (int64_t) 0;
        int32_t num_tasks_126527;
        struct futhark_mc_task_128616 futhark_mc_task_128616;
        
        futhark_mc_task_128616.ctx = ctx;
        futhark_mc_task_128616.free_n_112520 = n_112520;
        futhark_mc_task_128616.free_gtid_117667 = gtid_117667;
        futhark_mc_task_128616.free_x_117723 = x_117723;
        futhark_mc_task_128616.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128616.free_x_126361 = x_126361;
        futhark_mc_task_128616.free_mem_126366 = mem_126366;
        futhark_mc_task_128616.free_a0_126389 = a0_126389;
        futhark_mc_task_128616.retval_defunc_2_reduce_res_126390 =
            &defunc_2_reduce_res_126390;
        
        struct scheduler_segop futhark_mc_task_128616_task;
        
        futhark_mc_task_128616_task.args = &futhark_mc_task_128616;
        futhark_mc_task_128616_task.top_level_fn =
            futhark_mc_segred_task_128617;
        futhark_mc_task_128616_task.name = "futhark_mc_segred_task_128617";
        futhark_mc_task_128616_task.iterations = t_window_112523;
        futhark_mc_task_128616_task.task_time =
            &ctx->futhark_mc_segred_task_128617_total_time;
        futhark_mc_task_128616_task.task_iter =
            &ctx->futhark_mc_segred_task_128617_total_iter;
        futhark_mc_task_128616_task.sched = STATIC;
        futhark_mc_task_128616_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128617_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128616_task);
        
        if (futhark_mc_segred_task_128617_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120508.mem)[gtid_117671] = defunc_2_reduce_res_126390;
    }
    
  cleanup:
    { }
    free(mem_126366);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128609_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128609_end -
                 futhark_mc_segmap_parloop_128609_start;
        
        ctx->futhark_mc_segmap_parloop_128609_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128609_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128609_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128607(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117670 = tid;
    int num_tasks_126446 = info.nsubtasks;
    struct futhark_mc_task_128602 *futhark_mc_task_128602 =
                                  (struct futhark_mc_task_128602 *) args;
    struct futhark_context *ctx = futhark_mc_task_128602->ctx;
    uint64_t futhark_mc_segmap_nested_task_128607_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128607_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128602->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128602->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128602->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128602->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128602->free_i_112596;
    int64_t gtid_117667 = futhark_mc_task_128602->free_gtid_117667;
    int64_t x_117723 = futhark_mc_task_128602->free_x_117723;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128602->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128602->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128602->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128602->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128602->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 = futhark_mc_task_128602->free_bytes_120488;
    struct memblock mem_120508 = {.desc ="mem_120508", .mem =
                                  futhark_mc_task_128602->free_mem_120508,
                                  .size =0, .references =NULL};
    int64_t iter_126485;
    struct futhark_mc_segmap_parloop_struct_128608
    futhark_mc_segmap_parloop_struct_128608;
    
    futhark_mc_segmap_parloop_struct_128608.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128608.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128608.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128608.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128608.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128608.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128608.free_gtid_117667 = gtid_117667;
    futhark_mc_segmap_parloop_struct_128608.free_x_117723 = x_117723;
    futhark_mc_segmap_parloop_struct_128608.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128608.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128608.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128608.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128608.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128608.free_bytes_120488 = bytes_120488;
    futhark_mc_segmap_parloop_struct_128608.free_mem_120508 = mem_120508.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128609_task;
    
    futhark_mc_segmap_parloop_128609_task.name =
        "futhark_mc_segmap_parloop_128609";
    futhark_mc_segmap_parloop_128609_task.fn = futhark_mc_segmap_parloop_128609;
    futhark_mc_segmap_parloop_128609_task.args =
        &futhark_mc_segmap_parloop_struct_128608;
    futhark_mc_segmap_parloop_128609_task.iterations = iterations;
    futhark_mc_segmap_parloop_128609_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128609_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128609_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128609_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128609_task);
    
    if (futhark_mc_segmap_parloop_128609_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128609_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128609_total_end -
                 futhark_mc_segmap_parloop_128609_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128609_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128609_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128609_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128607_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128607_end -
                 futhark_mc_segmap_nested_task_128607_start;
        
        ctx->futhark_mc_segmap_nested_task_128607_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128607_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128607_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128600(void *args, int64_t start,
                                            int64_t end, int flat_tid_117666,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128599
    *futhark_mc_segmap_parloop_struct_128599 =
    (struct futhark_mc_segmap_parloop_struct_128599 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128599->ctx;
    uint64_t futhark_mc_segmap_parloop_128600_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128600_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128599->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128599->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128599->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128599->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128599->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128599->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128599->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 =
            futhark_mc_segmap_parloop_struct_128599->free_bytes_120488;
    struct memblock mem_120542 = {.desc ="mem_120542", .mem =
                                  futhark_mc_segmap_parloop_struct_128599->free_mem_120542,
                                  .size =0, .references =NULL};
    size_t mem_120508_cached_sizze_128601 = 0;
    char *mem_120508 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126360 = start;
    
    if (mem_120508_cached_sizze_128601 < (size_t) bytes_119552) {
        mem_120508 = realloc(mem_120508, bytes_119552);
        mem_120508_cached_sizze_128601 = bytes_119552;
    }
    for (; iter_126360 < end; iter_126360++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126444 = m_112519;
        int64_t gtid_117667 = iter_126360;
        int64_t remnant_126445 = iter_126360 - gtid_117667;
        int64_t x_117723 = ((int64_t *) mem_119420.mem)[gtid_117667];
        int64_t flat_tid_117668 = (int64_t) 0;
        int32_t num_tasks_126446;
        int64_t flat_tid_117670 = (int64_t) 0;
        struct futhark_mc_task_128602 futhark_mc_task_128602;
        
        futhark_mc_task_128602.ctx = ctx;
        futhark_mc_task_128602.free_n_112520 = n_112520;
        futhark_mc_task_128602.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128602.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128602.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128602.free_i_112596 = i_112596;
        futhark_mc_task_128602.free_gtid_117667 = gtid_117667;
        futhark_mc_task_128602.free_x_117723 = x_117723;
        futhark_mc_task_128602.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128602.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128602.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128602.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128602.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128602.free_bytes_120488 = bytes_120488;
        futhark_mc_task_128602.free_mem_120508 = mem_120508;
        
        struct scheduler_segop futhark_mc_task_128602_task;
        
        futhark_mc_task_128602_task.args = &futhark_mc_task_128602;
        futhark_mc_task_128602_task.top_level_fn =
            futhark_mc_segmap_task_128603;
        futhark_mc_task_128602_task.name = "futhark_mc_segmap_task_128603";
        futhark_mc_task_128602_task.iterations = t_n_m_112577;
        futhark_mc_task_128602_task.task_time =
            &ctx->futhark_mc_segmap_task_128603_total_time;
        futhark_mc_task_128602_task.task_iter =
            &ctx->futhark_mc_segmap_task_128603_total_iter;
        futhark_mc_task_128602_task.sched = STATIC;
        futhark_mc_task_128602_task.nested_fn =
            futhark_mc_segmap_nested_task_128607;
        
        int futhark_mc_segmap_task_128603_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128602_task);
        
        if (futhark_mc_segmap_task_128603_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120542.mem + gtid_117667 * t_n_m_112577 * (int64_t) 4,
                mem_120508 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120508);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128600_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128600_end -
                 futhark_mc_segmap_parloop_128600_start;
        
        ctx->futhark_mc_segmap_parloop_128600_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128600_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128600_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128598(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117666 = tid;
    int num_tasks_126307 = info.nsubtasks;
    struct futhark_mc_task_128592 *futhark_mc_task_128592 =
                                  (struct futhark_mc_task_128592 *) args;
    struct futhark_context *ctx = futhark_mc_task_128592->ctx;
    uint64_t futhark_mc_segmap_nested_task_128598_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128598_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128592->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128592->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128592->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128592->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128592->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128592->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128592->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128592->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128592->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128592->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128592->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128592->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128592->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120488 = futhark_mc_task_128592->free_bytes_120488;
    struct memblock mem_120542 = {.desc ="mem_120542", .mem =
                                  futhark_mc_task_128592->free_mem_120542,
                                  .size =0, .references =NULL};
    int64_t iter_126360;
    struct futhark_mc_segmap_parloop_struct_128599
    futhark_mc_segmap_parloop_struct_128599;
    
    futhark_mc_segmap_parloop_struct_128599.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128599.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128599.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128599.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128599.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128599.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128599.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128599.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128599.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128599.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128599.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128599.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128599.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128599.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128599.free_bytes_120488 = bytes_120488;
    futhark_mc_segmap_parloop_struct_128599.free_mem_120542 = mem_120542.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128600_task;
    
    futhark_mc_segmap_parloop_128600_task.name =
        "futhark_mc_segmap_parloop_128600";
    futhark_mc_segmap_parloop_128600_task.fn = futhark_mc_segmap_parloop_128600;
    futhark_mc_segmap_parloop_128600_task.args =
        &futhark_mc_segmap_parloop_struct_128599;
    futhark_mc_segmap_parloop_128600_task.iterations = iterations;
    futhark_mc_segmap_parloop_128600_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128600_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128600_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128600_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128600_task);
    
    if (futhark_mc_segmap_parloop_128600_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128600_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128600_total_end -
                 futhark_mc_segmap_parloop_128600_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128600_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128600_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128600_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128598_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128598_end -
                 futhark_mc_segmap_nested_task_128598_start;
        
        ctx->futhark_mc_segmap_nested_task_128598_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128598_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128598_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128621 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120648;
    char *free_mem_120652;
};
struct futhark_mc_segmap_parloop_struct_128623 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120648;
    char *free_mem_120652;
};
static int futhark_mc_segmap_parloop_128624(void *args, int64_t start,
                                            int64_t end, int flat_tid_117809,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128623
    *futhark_mc_segmap_parloop_struct_128623 =
    (struct futhark_mc_segmap_parloop_struct_128623 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128623->ctx;
    uint64_t futhark_mc_segmap_parloop_128624_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128624_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128623->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128623->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128623->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128623->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128623->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128623->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128623->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 =
            futhark_mc_segmap_parloop_struct_128623->free_bytes_120543;
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_120648,
                                  .size =0, .references =NULL};
    struct memblock mem_120652 = {.desc ="mem_120652", .mem =
                                  futhark_mc_segmap_parloop_struct_128623->free_mem_120652,
                                  .size =0, .references =NULL};
    size_t mem_120587_cached_sizze_128625 = 0;
    char *mem_120587 = NULL;
    size_t mem_120590_cached_sizze_128626 = 0;
    char *mem_120590 = NULL;
    size_t mem_120607_cached_sizze_128627 = 0;
    char *mem_120607 = NULL;
    size_t mem_120610_cached_sizze_128628 = 0;
    char *mem_120610 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126537 = start;
    
    if (mem_120587_cached_sizze_128625 < (size_t) bytes_119552) {
        mem_120587 = realloc(mem_120587, bytes_119552);
        mem_120587_cached_sizze_128625 = bytes_119552;
    }
    if (mem_120590_cached_sizze_128626 < (size_t) bytes_119552) {
        mem_120590 = realloc(mem_120590, bytes_119552);
        mem_120590_cached_sizze_128626 = bytes_119552;
    }
    if (mem_120607_cached_sizze_128627 < (size_t) bytes_120543) {
        mem_120607 = realloc(mem_120607, bytes_120543);
        mem_120607_cached_sizze_128627 = bytes_120543;
    }
    if (mem_120610_cached_sizze_128628 < (size_t) bytes_120543) {
        mem_120610 = realloc(mem_120610, bytes_120543);
        mem_120610_cached_sizze_128628 = bytes_120543;
    }
    for (; iter_126537 < end; iter_126537++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126614 = m_112519;
        int64_t gtid_117810 = iter_126537;
        int64_t remnant_126615 = iter_126537 - gtid_117810;
        int64_t x_114185 = ((int64_t *) mem_119420.mem)[gtid_117810];
        
        for (int64_t i_126538 = 0; i_126538 < t_n_m_112577; i_126538++) {
            int64_t x_126541 = ((int64_t *) mem_119606.mem)[gtid_117810 *
                                                            t_n_m_112577 +
                                                            i_126538];
            float x_126542 = ((float *) mem_119610.mem)[gtid_117810 *
                                                        t_n_m_112577 +
                                                        i_126538];
            int64_t min_arg_126543 = mul64(t_jump_112527, i_126538);
            int64_t min_res_126544 = smin64(i_112596, min_arg_126543);
            float defunc_0_f_res_126545 = sitofp_i64_f32(min_res_126544);
            float defunc_2_reduce_res_126548;
            float defunc_2_reduce_res_126549;
            float defunc_2_reduce_res_126550;
            float redout_126554;
            float redout_126555;
            float redout_126556;
            
            redout_126554 = 0.0F;
            redout_126555 = 0.0F;
            redout_126556 = 0.0F;
            for (int64_t i_126553 = 0; i_126553 < t_window_112523; i_126553++) {
                bool cond_126559 = sle64(x_114185, i_126553);
                float defunc_0_f_res_126560;
                
                if (cond_126559) {
                    defunc_0_f_res_126560 = 0.0F;
                } else {
                    int64_t i_126561 = add64(x_126541, i_126553);
                    float x_126562 = ((float *) mem_119442.mem)[gtid_117810 *
                                                                n_112520 +
                                                                i_126561];
                    float defunc_0_f_res_f_res_126563 = 1.0F + x_126562;
                    
                    defunc_0_f_res_126560 = defunc_0_f_res_f_res_126563;
                }
                
                float defunc_0_f_res_126564;
                
                if (cond_126559) {
                    defunc_0_f_res_126564 = 0.0F;
                } else {
                    int64_t i_126565 = add64(x_126541, i_126553);
                    float x_126566 = ((float *) mem_120361.mem)[gtid_117810 *
                                                                n_112520 +
                                                                i_126565];
                    
                    defunc_0_f_res_126564 = x_126566;
                }
                
                float x_j_126567 = defunc_0_f_res_126560 -
                      defunc_0_f_res_126545;
                float abs_res_126568 = (float) fabs(x_j_126567);
                float tmp1_126569 = abs_res_126568 / x_126542;
                float x_126570 = tmp1_126569 * tmp1_126569;
                float y_126571 = tmp1_126569 * x_126570;
                float tmp2_126572 = 1.0F - y_126571;
                float x_126573 = tmp2_126572 * tmp2_126572;
                float tmp3_126574 = tmp2_126572 * x_126573;
                float tmp4_126575 = defunc_0_f_res_126564 * tmp3_126574;
                float defunc_1_f_res_126576 = x_j_126567 * tmp4_126575;
                float defunc_1_f_res_126577 = x_j_126567 *
                      defunc_1_f_res_126576;
                float defunc_1_op_res_126578 = tmp4_126575 + redout_126554;
                float defunc_1_op_res_126579 = defunc_1_f_res_126576 +
                      redout_126555;
                float defunc_1_op_res_126580 = defunc_1_f_res_126577 +
                      redout_126556;
                
                ((float *) mem_120607)[i_126553] = defunc_1_f_res_126576;
                ((float *) mem_120610)[i_126553] = tmp4_126575;
                
                float redout_tmp_126618 = defunc_1_op_res_126578;
                float redout_tmp_126619 = defunc_1_op_res_126579;
                float redout_tmp_126620 = defunc_1_op_res_126580;
                
                redout_126554 = redout_tmp_126618;
                redout_126555 = redout_tmp_126619;
                redout_126556 = redout_tmp_126620;
            }
            defunc_2_reduce_res_126548 = redout_126554;
            defunc_2_reduce_res_126549 = redout_126555;
            defunc_2_reduce_res_126550 = redout_126556;
            
            float x_126583 = defunc_2_reduce_res_126548 *
                  defunc_2_reduce_res_126550;
            float y_126584 = defunc_2_reduce_res_126549 *
                  defunc_2_reduce_res_126549;
            float y_126585 = x_126583 - y_126584;
            float det1_126586 = 1.0F / y_126585;
            float a11_126587 = defunc_2_reduce_res_126550 * det1_126586;
            float negate_arg_126588 = defunc_2_reduce_res_126549 * det1_126586;
            float b11_126589 = 0.0F - negate_arg_126588;
            float c11_126590 = defunc_2_reduce_res_126548 * det1_126586;
            float defunc_2_reduce_res_126591;
            float defunc_2_reduce_res_126592;
            float redout_126594;
            float redout_126595;
            
            redout_126594 = 0.0F;
            redout_126595 = 0.0F;
            for (int64_t i_126593 = 0; i_126593 < t_window_112523; i_126593++) {
                float x_126596 = ((float *) mem_120610)[i_126593];
                float x_126597 = ((float *) mem_120607)[i_126593];
                bool cond_126598 = sle64(x_114185, i_126593);
                float defunc_0_f_res_126599;
                
                if (cond_126598) {
                    defunc_0_f_res_126599 = 0.0F;
                } else {
                    int64_t i_126600 = add64(x_126541, i_126593);
                    float x_126601 = ((float *) mem_120357.mem)[gtid_117810 *
                                                                n_112520 +
                                                                i_126600];
                    
                    defunc_0_f_res_126599 = x_126601;
                }
                
                float x_126602 = a11_126587 * x_126596;
                float y_126603 = b11_126589 * x_126597;
                float x_126604 = x_126602 + y_126603;
                float defunc_9_fit_fun_res_126605 = defunc_0_f_res_126599 *
                      x_126604;
                float x_126606 = b11_126589 * x_126596;
                float y_126607 = c11_126590 * x_126597;
                float x_126608 = x_126606 + y_126607;
                float defunc_9_slope_fun_res_126609 = defunc_0_f_res_126599 *
                      x_126608;
                float defunc_1_op_res_126610 = defunc_9_fit_fun_res_126605 +
                      redout_126594;
                float defunc_1_op_res_126611 = defunc_9_slope_fun_res_126609 +
                      redout_126595;
                float redout_tmp_126623 = defunc_1_op_res_126610;
                float redout_tmp_126624 = defunc_1_op_res_126611;
                
                redout_126594 = redout_tmp_126623;
                redout_126595 = redout_tmp_126624;
            }
            defunc_2_reduce_res_126591 = redout_126594;
            defunc_2_reduce_res_126592 = redout_126595;
            ((float *) mem_120587)[i_126538] = defunc_2_reduce_res_126591;
            ((float *) mem_120590)[i_126538] = defunc_2_reduce_res_126592;
        }
        memmove(mem_120648.mem + gtid_117810 * t_n_m_112577 * (int64_t) 4,
                mem_120587 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120652.mem + gtid_117810 * t_n_m_112577 * (int64_t) 4,
                mem_120590 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120587);
    free(mem_120590);
    free(mem_120607);
    free(mem_120610);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128624_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128624_end -
                 futhark_mc_segmap_parloop_128624_start;
        
        ctx->futhark_mc_segmap_parloop_128624_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128624_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128624_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128622(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117809 = tid;
    int num_tasks_126536 = info.nsubtasks;
    struct futhark_mc_task_128621 *futhark_mc_task_128621 =
                                  (struct futhark_mc_task_128621 *) args;
    struct futhark_context *ctx = futhark_mc_task_128621->ctx;
    uint64_t futhark_mc_segmap_task_128622_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128622_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128621->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128621->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128621->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128621->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128621->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128621->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128621->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128621->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128621->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128621->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128621->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128621->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128621->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 = futhark_mc_task_128621->free_bytes_120543;
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_task_128621->free_mem_120648,
                                  .size =0, .references =NULL};
    struct memblock mem_120652 = {.desc ="mem_120652", .mem =
                                  futhark_mc_task_128621->free_mem_120652,
                                  .size =0, .references =NULL};
    int64_t iter_126537;
    struct futhark_mc_segmap_parloop_struct_128623
    futhark_mc_segmap_parloop_struct_128623;
    
    futhark_mc_segmap_parloop_struct_128623.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128623.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128623.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128623.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128623.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128623.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128623.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128623.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128623.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128623.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128623.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128623.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128623.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128623.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128623.free_bytes_120543 = bytes_120543;
    futhark_mc_segmap_parloop_struct_128623.free_mem_120648 = mem_120648.mem;
    futhark_mc_segmap_parloop_struct_128623.free_mem_120652 = mem_120652.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128624_task;
    
    futhark_mc_segmap_parloop_128624_task.name =
        "futhark_mc_segmap_parloop_128624";
    futhark_mc_segmap_parloop_128624_task.fn = futhark_mc_segmap_parloop_128624;
    futhark_mc_segmap_parloop_128624_task.args =
        &futhark_mc_segmap_parloop_struct_128623;
    futhark_mc_segmap_parloop_128624_task.iterations = iterations;
    futhark_mc_segmap_parloop_128624_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128624_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128624_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128624_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128624_task);
    
    if (futhark_mc_segmap_parloop_128624_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128624_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128624_total_end -
                 futhark_mc_segmap_parloop_128624_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128624_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128624_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128624_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128622_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128622_end -
                 futhark_mc_segmap_task_128622_start;
        
        ctx->futhark_mc_segmap_task_128622_runs[tid]++;
        ctx->futhark_mc_segmap_task_128622_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128622_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128630 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120648;
    char *free_mem_120652;
};
struct futhark_mc_task_128634 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120581;
    char *free_mem_120584;
};
struct futhark_mc_segmap_parloop_struct_128636 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120581;
    char *free_mem_120584;
};
static int futhark_mc_segmap_parloop_128637(void *args, int64_t start,
                                            int64_t end, int flat_tid_117813,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128636
    *futhark_mc_segmap_parloop_struct_128636 =
    (struct futhark_mc_segmap_parloop_struct_128636 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128636->ctx;
    uint64_t futhark_mc_segmap_parloop_128637_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128637_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128636->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128636->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128636->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128636->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128636->free_i_112596;
    int64_t gtid_117812 =
            futhark_mc_segmap_parloop_struct_128636->free_gtid_117812;
    int64_t x_117897 = futhark_mc_segmap_parloop_struct_128636->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 =
            futhark_mc_segmap_parloop_struct_128636->free_bytes_120543;
    struct memblock mem_120581 = {.desc ="mem_120581", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_120581,
                                  .size =0, .references =NULL};
    struct memblock mem_120584 = {.desc ="mem_120584", .mem =
                                  futhark_mc_segmap_parloop_struct_128636->free_mem_120584,
                                  .size =0, .references =NULL};
    size_t mem_126701_cached_sizze_128638 = 0;
    char *mem_126701 = NULL;
    size_t mem_126703_cached_sizze_128639 = 0;
    char *mem_126703 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126772 = start;
    
    if (mem_126701_cached_sizze_128638 < (size_t) bytes_120543) {
        mem_126701 = realloc(mem_126701, bytes_120543);
        mem_126701_cached_sizze_128638 = bytes_120543;
    }
    if (mem_126703_cached_sizze_128639 < (size_t) bytes_120543) {
        mem_126703 = realloc(mem_126703, bytes_120543);
        mem_126703_cached_sizze_128639 = bytes_120543;
    }
    for (; iter_126772 < end; iter_126772++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126822 = t_n_m_112577;
        int64_t gtid_117814 = iter_126772;
        int64_t remnant_126823 = iter_126772 - gtid_117814;
        int64_t x_126696 = ((int64_t *) mem_119606.mem)[gtid_117812 *
                                                        t_n_m_112577 +
                                                        gtid_117814];
        float x_126697 = ((float *) mem_119610.mem)[gtid_117812 * t_n_m_112577 +
                                                    gtid_117814];
        int64_t min_arg_126698 = mul64(t_jump_112527, gtid_117814);
        int64_t min_res_126699 = smin64(i_112596, min_arg_126698);
        float defunc_0_f_res_126700 = sitofp_i64_f32(min_res_126699);
        float defunc_2_reduce_res_126705;
        float defunc_2_reduce_res_126706;
        float defunc_2_reduce_res_126707;
        float redout_126774;
        float redout_126775;
        float redout_126776;
        
        redout_126774 = 0.0F;
        redout_126775 = 0.0F;
        redout_126776 = 0.0F;
        for (int64_t i_126773 = 0; i_126773 < t_window_112523; i_126773++) {
            bool cond_126779 = sle64(x_117897, i_126773);
            float defunc_0_f_res_126780;
            
            if (cond_126779) {
                defunc_0_f_res_126780 = 0.0F;
            } else {
                int64_t i_126781 = add64(x_126696, i_126773);
                float x_126782 = ((float *) mem_119442.mem)[gtid_117812 *
                                                            n_112520 +
                                                            i_126781];
                float defunc_0_f_res_f_res_126783 = 1.0F + x_126782;
                
                defunc_0_f_res_126780 = defunc_0_f_res_f_res_126783;
            }
            
            float defunc_0_f_res_126784;
            
            if (cond_126779) {
                defunc_0_f_res_126784 = 0.0F;
            } else {
                int64_t i_126785 = add64(x_126696, i_126773);
                float x_126786 = ((float *) mem_120361.mem)[gtid_117812 *
                                                            n_112520 +
                                                            i_126785];
                
                defunc_0_f_res_126784 = x_126786;
            }
            
            float x_j_126787 = defunc_0_f_res_126780 - defunc_0_f_res_126700;
            float abs_res_126788 = (float) fabs(x_j_126787);
            float tmp1_126789 = abs_res_126788 / x_126697;
            float x_126790 = tmp1_126789 * tmp1_126789;
            float y_126791 = tmp1_126789 * x_126790;
            float tmp2_126792 = 1.0F - y_126791;
            float x_126793 = tmp2_126792 * tmp2_126792;
            float tmp3_126794 = tmp2_126792 * x_126793;
            float tmp4_126795 = defunc_0_f_res_126784 * tmp3_126794;
            float defunc_1_f_res_126796 = x_j_126787 * tmp4_126795;
            float defunc_1_f_res_126797 = x_j_126787 * defunc_1_f_res_126796;
            float defunc_1_op_res_126798 = tmp4_126795 + redout_126774;
            float defunc_1_op_res_126799 = defunc_1_f_res_126796 +
                  redout_126775;
            float defunc_1_op_res_126800 = defunc_1_f_res_126797 +
                  redout_126776;
            
            ((float *) mem_126701)[i_126773] = defunc_1_f_res_126796;
            ((float *) mem_126703)[i_126773] = tmp4_126795;
            
            float redout_tmp_126824 = defunc_1_op_res_126798;
            float redout_tmp_126825 = defunc_1_op_res_126799;
            float redout_tmp_126826 = defunc_1_op_res_126800;
            
            redout_126774 = redout_tmp_126824;
            redout_126775 = redout_tmp_126825;
            redout_126776 = redout_tmp_126826;
        }
        defunc_2_reduce_res_126705 = redout_126774;
        defunc_2_reduce_res_126706 = redout_126775;
        defunc_2_reduce_res_126707 = redout_126776;
        
        float x_126740 = defunc_2_reduce_res_126705 *
              defunc_2_reduce_res_126707;
        float y_126741 = defunc_2_reduce_res_126706 *
              defunc_2_reduce_res_126706;
        float y_126742 = x_126740 - y_126741;
        float det1_126743 = 1.0F / y_126742;
        float a11_126744 = defunc_2_reduce_res_126707 * det1_126743;
        float negate_arg_126745 = defunc_2_reduce_res_126706 * det1_126743;
        float b11_126746 = 0.0F - negate_arg_126745;
        float c11_126747 = defunc_2_reduce_res_126705 * det1_126743;
        float defunc_2_reduce_res_126748;
        float defunc_2_reduce_res_126749;
        float redout_126804;
        float redout_126805;
        
        redout_126804 = 0.0F;
        redout_126805 = 0.0F;
        for (int64_t i_126803 = 0; i_126803 < t_window_112523; i_126803++) {
            float x_126806 = ((float *) mem_126703)[i_126803];
            float x_126807 = ((float *) mem_126701)[i_126803];
            bool cond_126808 = sle64(x_117897, i_126803);
            float defunc_0_f_res_126809;
            
            if (cond_126808) {
                defunc_0_f_res_126809 = 0.0F;
            } else {
                int64_t i_126810 = add64(x_126696, i_126803);
                float x_126811 = ((float *) mem_120357.mem)[gtid_117812 *
                                                            n_112520 +
                                                            i_126810];
                
                defunc_0_f_res_126809 = x_126811;
            }
            
            float x_126812 = a11_126744 * x_126806;
            float y_126813 = b11_126746 * x_126807;
            float x_126814 = x_126812 + y_126813;
            float defunc_9_fit_fun_res_126815 = defunc_0_f_res_126809 *
                  x_126814;
            float x_126816 = b11_126746 * x_126806;
            float y_126817 = c11_126747 * x_126807;
            float x_126818 = x_126816 + y_126817;
            float defunc_9_slope_fun_res_126819 = defunc_0_f_res_126809 *
                  x_126818;
            float defunc_1_op_res_126820 = defunc_9_fit_fun_res_126815 +
                  redout_126804;
            float defunc_1_op_res_126821 = defunc_9_slope_fun_res_126819 +
                  redout_126805;
            float redout_tmp_126829 = defunc_1_op_res_126820;
            float redout_tmp_126830 = defunc_1_op_res_126821;
            
            redout_126804 = redout_tmp_126829;
            redout_126805 = redout_tmp_126830;
        }
        defunc_2_reduce_res_126748 = redout_126804;
        defunc_2_reduce_res_126749 = redout_126805;
        ((float *) mem_120581.mem)[gtid_117814] = defunc_2_reduce_res_126748;
        ((float *) mem_120584.mem)[gtid_117814] = defunc_2_reduce_res_126749;
    }
    
  cleanup:
    { }
    free(mem_126701);
    free(mem_126703);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128637_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128637_end -
                 futhark_mc_segmap_parloop_128637_start;
        
        ctx->futhark_mc_segmap_parloop_128637_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128637_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128637_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128635(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117813 = tid;
    int num_tasks_126771 = info.nsubtasks;
    struct futhark_mc_task_128634 *futhark_mc_task_128634 =
                                  (struct futhark_mc_task_128634 *) args;
    struct futhark_context *ctx = futhark_mc_task_128634->ctx;
    uint64_t futhark_mc_segmap_task_128635_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128635_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128634->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128634->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128634->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128634->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128634->free_i_112596;
    int64_t gtid_117812 = futhark_mc_task_128634->free_gtid_117812;
    int64_t x_117897 = futhark_mc_task_128634->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128634->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128634->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128634->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128634->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128634->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 = futhark_mc_task_128634->free_bytes_120543;
    struct memblock mem_120581 = {.desc ="mem_120581", .mem =
                                  futhark_mc_task_128634->free_mem_120581,
                                  .size =0, .references =NULL};
    struct memblock mem_120584 = {.desc ="mem_120584", .mem =
                                  futhark_mc_task_128634->free_mem_120584,
                                  .size =0, .references =NULL};
    int64_t iter_126772;
    struct futhark_mc_segmap_parloop_struct_128636
    futhark_mc_segmap_parloop_struct_128636;
    
    futhark_mc_segmap_parloop_struct_128636.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128636.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128636.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128636.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128636.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128636.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128636.free_gtid_117812 = gtid_117812;
    futhark_mc_segmap_parloop_struct_128636.free_x_117897 = x_117897;
    futhark_mc_segmap_parloop_struct_128636.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128636.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128636.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128636.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128636.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128636.free_bytes_120543 = bytes_120543;
    futhark_mc_segmap_parloop_struct_128636.free_mem_120581 = mem_120581.mem;
    futhark_mc_segmap_parloop_struct_128636.free_mem_120584 = mem_120584.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128637_task;
    
    futhark_mc_segmap_parloop_128637_task.name =
        "futhark_mc_segmap_parloop_128637";
    futhark_mc_segmap_parloop_128637_task.fn = futhark_mc_segmap_parloop_128637;
    futhark_mc_segmap_parloop_128637_task.args =
        &futhark_mc_segmap_parloop_struct_128636;
    futhark_mc_segmap_parloop_128637_task.iterations = iterations;
    futhark_mc_segmap_parloop_128637_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128637_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128637_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128637_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128637_task);
    
    if (futhark_mc_segmap_parloop_128637_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128637_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128637_total_end -
                 futhark_mc_segmap_parloop_128637_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128637_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128637_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128637_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128635_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128635_end -
                 futhark_mc_segmap_task_128635_start;
        
        ctx->futhark_mc_segmap_task_128635_runs[tid]++;
        ctx->futhark_mc_segmap_task_128635_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128635_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128641 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120543;
    char *free_mem_120581;
    char *free_mem_120584;
};
struct futhark_mc_task_128645 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_126626;
    float free_x_126627;
    float free_defunc_0_f_res_126630;
    float *retval_defunc_2_reduce_res_126633;
    float *retval_defunc_2_reduce_res_126634;
    float *retval_defunc_2_reduce_res_126635;
    char *retval_mem_126631;
    char *retval_mem_126632;
};
struct futhark_mc_segred_stage_1_parloop_struct_128650 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_126626;
    float free_x_126627;
    float free_defunc_0_f_res_126630;
    char *free_mem_126631;
    char *free_mem_126632;
    char *free_reduce_stage_1_tid_res_arr_mem_126883;
    char *free_reduce_stage_1_tid_res_arr_mem_126885;
    char *free_reduce_stage_1_tid_res_arr_mem_126887;
};
static int futhark_mc_segred_stage_1_parloop_128651(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117817,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128650
    *futhark_mc_segred_stage_1_parloop_struct_128650 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128650 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128650->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128651_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128651_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_n_112520;
    int64_t gtid_117812 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_gtid_117812;
    int64_t x_117897 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_126626 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_x_126626;
    float x_126627 =
          futhark_mc_segred_stage_1_parloop_struct_128650->free_x_126627;
    float defunc_0_f_res_126630 =
          futhark_mc_segred_stage_1_parloop_struct_128650->free_defunc_0_f_res_126630;
    struct memblock mem_126631 = {.desc ="mem_126631", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_126631,
                                  .size =0, .references =NULL};
    struct memblock mem_126632 = {.desc ="mem_126632", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_126632,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126883 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126883",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128650->free_reduce_stage_1_tid_res_arr_mem_126883,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126885 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126885",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128650->free_reduce_stage_1_tid_res_arr_mem_126885,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126887 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126887",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128650->free_reduce_stage_1_tid_res_arr_mem_126887,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126889 = start;
    float x_126832;
    float x_126833;
    float x_126835;
    float x_126836;
    float x_126838;
    float x_126839;
    float local_acc_126890 = 0.0F;
    float local_acc_126891 = 0.0F;
    float local_acc_126892 = 0.0F;
    
    for (; iter_126889 < end; iter_126889++) {
        int64_t gtid_117818 = iter_126889;
        bool cond_126841 = sle64(x_117897, gtid_117818);
        float defunc_0_f_res_126842;
        
        if (cond_126841) {
            defunc_0_f_res_126842 = 0.0F;
        } else {
            int64_t i_126843 = add64(gtid_117818, x_126626);
            float x_126844 = ((float *) mem_119442.mem)[gtid_117812 * n_112520 +
                                                        i_126843];
            float defunc_0_f_res_f_res_126845 = 1.0F + x_126844;
            
            defunc_0_f_res_126842 = defunc_0_f_res_f_res_126845;
        }
        
        float defunc_0_f_res_126846;
        
        if (cond_126841) {
            defunc_0_f_res_126846 = 0.0F;
        } else {
            int64_t i_126847 = add64(gtid_117818, x_126626);
            float x_126848 = ((float *) mem_120361.mem)[gtid_117812 * n_112520 +
                                                        i_126847];
            
            defunc_0_f_res_126846 = x_126848;
        }
        
        float x_j_126849 = defunc_0_f_res_126842 - defunc_0_f_res_126630;
        float abs_res_126850 = (float) fabs(x_j_126849);
        float tmp1_126851 = abs_res_126850 / x_126627;
        float x_126852 = tmp1_126851 * tmp1_126851;
        float y_126853 = tmp1_126851 * x_126852;
        float tmp2_126854 = 1.0F - y_126853;
        float x_126855 = tmp2_126854 * tmp2_126854;
        float tmp3_126856 = tmp2_126854 * x_126855;
        float tmp4_126857 = defunc_0_f_res_126846 * tmp3_126856;
        float defunc_1_f_res_126858 = x_j_126849 * tmp4_126857;
        float defunc_1_f_res_126859 = x_j_126849 * defunc_1_f_res_126858;
        
        // save map-out results
        {
            ((float *) mem_126631.mem)[gtid_117818] = defunc_1_f_res_126858;
            ((float *) mem_126632.mem)[gtid_117818] = tmp4_126857;
        }
        // Load accum params
        {
            x_126832 = local_acc_126890;
        }
        // Load next params
        {
            x_126833 = tmp4_126857;
        }
        // Red body
        {
            float defunc_1_op_res_126834 = x_126832 + x_126833;
            
            local_acc_126890 = defunc_1_op_res_126834;
        }
        // Load accum params
        {
            x_126835 = local_acc_126891;
        }
        // Load next params
        {
            x_126836 = defunc_1_f_res_126858;
        }
        // Red body
        {
            float defunc_1_op_res_126837 = x_126835 + x_126836;
            
            local_acc_126891 = defunc_1_op_res_126837;
        }
        // Load accum params
        {
            x_126838 = local_acc_126892;
        }
        // Load next params
        {
            x_126839 = defunc_1_f_res_126859;
        }
        // Red body
        {
            float defunc_1_op_res_126840 = x_126838 + x_126839;
            
            local_acc_126892 = defunc_1_op_res_126840;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126883.mem)[flat_tid_117817] =
        local_acc_126890;
    ((float *) reduce_stage_1_tid_res_arr_mem_126885.mem)[flat_tid_117817] =
        local_acc_126891;
    ((float *) reduce_stage_1_tid_res_arr_mem_126887.mem)[flat_tid_117817] =
        local_acc_126892;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128651_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128651_end -
                 futhark_mc_segred_stage_1_parloop_128651_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128651_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128651_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128646(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117817 = tid;
    int num_tasks_126882 = info.nsubtasks;
    struct futhark_mc_task_128645 *futhark_mc_task_128645 =
                                  (struct futhark_mc_task_128645 *) args;
    struct futhark_context *ctx = futhark_mc_task_128645->ctx;
    uint64_t futhark_mc_segred_task_128646_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128646_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128645->free_n_112520;
    int64_t gtid_117812 = futhark_mc_task_128645->free_gtid_117812;
    int64_t x_117897 = futhark_mc_task_128645->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128645->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128645->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_126626 = futhark_mc_task_128645->free_x_126626;
    float x_126627 = futhark_mc_task_128645->free_x_126627;
    float defunc_0_f_res_126630 =
          futhark_mc_task_128645->free_defunc_0_f_res_126630;
    float defunc_2_reduce_res_126633 =
          *futhark_mc_task_128645->retval_defunc_2_reduce_res_126633;
    float defunc_2_reduce_res_126634 =
          *futhark_mc_task_128645->retval_defunc_2_reduce_res_126634;
    float defunc_2_reduce_res_126635 =
          *futhark_mc_task_128645->retval_defunc_2_reduce_res_126635;
    struct memblock mem_126631 = {.desc ="mem_126631", .mem =
                                  futhark_mc_task_128645->retval_mem_126631,
                                  .size =0, .references =NULL};
    struct memblock mem_126632 = {.desc ="mem_126632", .mem =
                                  futhark_mc_task_128645->retval_mem_126632,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_126883_cached_sizze_128647 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126883 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126885_cached_sizze_128648 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126885 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126887_cached_sizze_128649 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126887 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126883_cached_sizze_128647 <
        (size_t) ((int64_t) 4 * num_tasks_126882)) {
        reduce_stage_1_tid_res_arr_mem_126883 =
            realloc(reduce_stage_1_tid_res_arr_mem_126883, (int64_t) 4 *
                    num_tasks_126882);
        reduce_stage_1_tid_res_arr_mem_126883_cached_sizze_128647 =
            (int64_t) 4 * num_tasks_126882;
    }
    if (reduce_stage_1_tid_res_arr_mem_126885_cached_sizze_128648 <
        (size_t) ((int64_t) 4 * num_tasks_126882)) {
        reduce_stage_1_tid_res_arr_mem_126885 =
            realloc(reduce_stage_1_tid_res_arr_mem_126885, (int64_t) 4 *
                    num_tasks_126882);
        reduce_stage_1_tid_res_arr_mem_126885_cached_sizze_128648 =
            (int64_t) 4 * num_tasks_126882;
    }
    if (reduce_stage_1_tid_res_arr_mem_126887_cached_sizze_128649 <
        (size_t) ((int64_t) 4 * num_tasks_126882)) {
        reduce_stage_1_tid_res_arr_mem_126887 =
            realloc(reduce_stage_1_tid_res_arr_mem_126887, (int64_t) 4 *
                    num_tasks_126882);
        reduce_stage_1_tid_res_arr_mem_126887_cached_sizze_128649 =
            (int64_t) 4 * num_tasks_126882;
    }
    
    int64_t iter_126889;
    struct futhark_mc_segred_stage_1_parloop_struct_128650
    futhark_mc_segred_stage_1_parloop_struct_128650;
    
    futhark_mc_segred_stage_1_parloop_struct_128650.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_gtid_117812 =
        gtid_117812;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_x_117897 = x_117897;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_119442 =
        mem_119442.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_120361 =
        mem_120361.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_x_126626 = x_126626;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_x_126627 = x_126627;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_defunc_0_f_res_126630 =
        defunc_0_f_res_126630;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_126631 =
        mem_126631.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_126632 =
        mem_126632.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_reduce_stage_1_tid_res_arr_mem_126883 =
        reduce_stage_1_tid_res_arr_mem_126883;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_reduce_stage_1_tid_res_arr_mem_126885 =
        reduce_stage_1_tid_res_arr_mem_126885;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_reduce_stage_1_tid_res_arr_mem_126887 =
        reduce_stage_1_tid_res_arr_mem_126887;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128651_task;
    
    futhark_mc_segred_stage_1_parloop_128651_task.name =
        "futhark_mc_segred_stage_1_parloop_128651";
    futhark_mc_segred_stage_1_parloop_128651_task.fn =
        futhark_mc_segred_stage_1_parloop_128651;
    futhark_mc_segred_stage_1_parloop_128651_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128650;
    futhark_mc_segred_stage_1_parloop_128651_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128651_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128651_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128651_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128651_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128651_task);
    
    if (futhark_mc_segred_stage_1_parloop_128651_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128651_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128651_total_end -
                 futhark_mc_segred_stage_1_parloop_128651_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126633 = 0.0F;
        defunc_2_reduce_res_126634 = 0.0F;
        defunc_2_reduce_res_126635 = 0.0F;
    }
    
    float x_126893;
    float x_126894;
    float x_126896;
    float x_126897;
    float x_126899;
    float x_126900;
    
    for (int32_t i_126902 = 0; i_126902 < num_tasks_126882; i_126902++) {
        flat_tid_117817 = i_126902;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126893 = defunc_2_reduce_res_126633;
            }
            // load next params
            {
                x_126894 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126883)[flat_tid_117817];
            }
            // red body
            {
                float defunc_1_op_res_126895 = x_126893 + x_126894;
                
                defunc_2_reduce_res_126633 = defunc_1_op_res_126895;
            }
            // load acc params
            {
                x_126896 = defunc_2_reduce_res_126634;
            }
            // load next params
            {
                x_126897 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126885)[flat_tid_117817];
            }
            // red body
            {
                float defunc_1_op_res_126898 = x_126896 + x_126897;
                
                defunc_2_reduce_res_126634 = defunc_1_op_res_126898;
            }
            // load acc params
            {
                x_126899 = defunc_2_reduce_res_126635;
            }
            // load next params
            {
                x_126900 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126887)[flat_tid_117817];
            }
            // red body
            {
                float defunc_1_op_res_126901 = x_126899 + x_126900;
                
                defunc_2_reduce_res_126635 = defunc_1_op_res_126901;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126883);
    free(reduce_stage_1_tid_res_arr_mem_126885);
    free(reduce_stage_1_tid_res_arr_mem_126887);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128646_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128646_end -
                 futhark_mc_segred_task_128646_start;
        
        ctx->futhark_mc_segred_task_128646_runs[tid]++;
        ctx->futhark_mc_segred_task_128646_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128646_iter[tid] += iterations;
    }
    *futhark_mc_task_128645->retval_defunc_2_reduce_res_126633 =
        defunc_2_reduce_res_126633;
    *futhark_mc_task_128645->retval_defunc_2_reduce_res_126634 =
        defunc_2_reduce_res_126634;
    *futhark_mc_task_128645->retval_defunc_2_reduce_res_126635 =
        defunc_2_reduce_res_126635;
    futhark_mc_task_128645->retval_mem_126631 = mem_126631.mem;
    futhark_mc_task_128645->retval_mem_126632 = mem_126632.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128652 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_120357;
    int64_t free_x_126626;
    char *free_mem_126631;
    char *free_mem_126632;
    float free_a11_126670;
    float free_b11_126672;
    float free_c11_126673;
    float *retval_defunc_2_reduce_res_126674;
    float *retval_defunc_2_reduce_res_126675;
};
struct futhark_mc_segred_stage_1_parloop_struct_128656 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_117812;
    int64_t free_x_117897;
    char *free_mem_120357;
    int64_t free_x_126626;
    char *free_mem_126631;
    char *free_mem_126632;
    float free_a11_126670;
    float free_b11_126672;
    float free_c11_126673;
    char *free_reduce_stage_1_tid_res_arr_mem_126904;
    char *free_reduce_stage_1_tid_res_arr_mem_126906;
};
static int futhark_mc_segred_stage_1_parloop_128657(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117819,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128656
    *futhark_mc_segred_stage_1_parloop_struct_128656 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128656 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128656->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128657_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128657_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128656->free_n_112520;
    int64_t gtid_117812 =
            futhark_mc_segred_stage_1_parloop_struct_128656->free_gtid_117812;
    int64_t x_117897 =
            futhark_mc_segred_stage_1_parloop_struct_128656->free_x_117897;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128656->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_126626 =
            futhark_mc_segred_stage_1_parloop_struct_128656->free_x_126626;
    struct memblock mem_126631 = {.desc ="mem_126631", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128656->free_mem_126631,
                                  .size =0, .references =NULL};
    struct memblock mem_126632 = {.desc ="mem_126632", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128656->free_mem_126632,
                                  .size =0, .references =NULL};
    float a11_126670 =
          futhark_mc_segred_stage_1_parloop_struct_128656->free_a11_126670;
    float b11_126672 =
          futhark_mc_segred_stage_1_parloop_struct_128656->free_b11_126672;
    float c11_126673 =
          futhark_mc_segred_stage_1_parloop_struct_128656->free_c11_126673;
    struct memblock reduce_stage_1_tid_res_arr_mem_126904 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126904",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128656->free_reduce_stage_1_tid_res_arr_mem_126904,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126906 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126906",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128656->free_reduce_stage_1_tid_res_arr_mem_126906,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126908 = start;
    float x_126860;
    float x_126861;
    float x_126863;
    float x_126864;
    float local_acc_126909 = 0.0F;
    float local_acc_126910 = 0.0F;
    
    for (; iter_126908 < end; iter_126908++) {
        int64_t gtid_117820 = iter_126908;
        float x_126866 = ((float *) mem_126632.mem)[gtid_117820];
        float x_126867 = ((float *) mem_126631.mem)[gtid_117820];
        bool cond_126868 = sle64(x_117897, gtid_117820);
        float defunc_0_f_res_126869;
        
        if (cond_126868) {
            defunc_0_f_res_126869 = 0.0F;
        } else {
            int64_t i_126870 = add64(gtid_117820, x_126626);
            float x_126871 = ((float *) mem_120357.mem)[gtid_117812 * n_112520 +
                                                        i_126870];
            
            defunc_0_f_res_126869 = x_126871;
        }
        
        float x_126872 = a11_126670 * x_126866;
        float y_126873 = b11_126672 * x_126867;
        float x_126874 = x_126872 + y_126873;
        float defunc_9_fit_fun_res_126875 = defunc_0_f_res_126869 * x_126874;
        float x_126876 = b11_126672 * x_126866;
        float y_126877 = c11_126673 * x_126867;
        float x_126878 = x_126876 + y_126877;
        float defunc_9_slope_fun_res_126879 = defunc_0_f_res_126869 * x_126878;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126860 = local_acc_126909;
        }
        // Load next params
        {
            x_126861 = defunc_9_fit_fun_res_126875;
        }
        // Red body
        {
            float defunc_1_op_res_126862 = x_126860 + x_126861;
            
            local_acc_126909 = defunc_1_op_res_126862;
        }
        // Load accum params
        {
            x_126863 = local_acc_126910;
        }
        // Load next params
        {
            x_126864 = defunc_9_slope_fun_res_126879;
        }
        // Red body
        {
            float defunc_1_op_res_126865 = x_126863 + x_126864;
            
            local_acc_126910 = defunc_1_op_res_126865;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126904.mem)[flat_tid_117819] =
        local_acc_126909;
    ((float *) reduce_stage_1_tid_res_arr_mem_126906.mem)[flat_tid_117819] =
        local_acc_126910;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128657_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128657_end -
                 futhark_mc_segred_stage_1_parloop_128657_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128657_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128657_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128657_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128653(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117819 = tid;
    int num_tasks_126903 = info.nsubtasks;
    struct futhark_mc_task_128652 *futhark_mc_task_128652 =
                                  (struct futhark_mc_task_128652 *) args;
    struct futhark_context *ctx = futhark_mc_task_128652->ctx;
    uint64_t futhark_mc_segred_task_128653_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128653_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128652->free_n_112520;
    int64_t gtid_117812 = futhark_mc_task_128652->free_gtid_117812;
    int64_t x_117897 = futhark_mc_task_128652->free_x_117897;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128652->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_126626 = futhark_mc_task_128652->free_x_126626;
    struct memblock mem_126631 = {.desc ="mem_126631", .mem =
                                  futhark_mc_task_128652->free_mem_126631,
                                  .size =0, .references =NULL};
    struct memblock mem_126632 = {.desc ="mem_126632", .mem =
                                  futhark_mc_task_128652->free_mem_126632,
                                  .size =0, .references =NULL};
    float a11_126670 = futhark_mc_task_128652->free_a11_126670;
    float b11_126672 = futhark_mc_task_128652->free_b11_126672;
    float c11_126673 = futhark_mc_task_128652->free_c11_126673;
    float defunc_2_reduce_res_126674 =
          *futhark_mc_task_128652->retval_defunc_2_reduce_res_126674;
    float defunc_2_reduce_res_126675 =
          *futhark_mc_task_128652->retval_defunc_2_reduce_res_126675;
    size_t reduce_stage_1_tid_res_arr_mem_126904_cached_sizze_128654 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126904 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126906_cached_sizze_128655 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126906 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126904_cached_sizze_128654 <
        (size_t) ((int64_t) 4 * num_tasks_126903)) {
        reduce_stage_1_tid_res_arr_mem_126904 =
            realloc(reduce_stage_1_tid_res_arr_mem_126904, (int64_t) 4 *
                    num_tasks_126903);
        reduce_stage_1_tid_res_arr_mem_126904_cached_sizze_128654 =
            (int64_t) 4 * num_tasks_126903;
    }
    if (reduce_stage_1_tid_res_arr_mem_126906_cached_sizze_128655 <
        (size_t) ((int64_t) 4 * num_tasks_126903)) {
        reduce_stage_1_tid_res_arr_mem_126906 =
            realloc(reduce_stage_1_tid_res_arr_mem_126906, (int64_t) 4 *
                    num_tasks_126903);
        reduce_stage_1_tid_res_arr_mem_126906_cached_sizze_128655 =
            (int64_t) 4 * num_tasks_126903;
    }
    
    int64_t iter_126908;
    struct futhark_mc_segred_stage_1_parloop_struct_128656
    futhark_mc_segred_stage_1_parloop_struct_128656;
    
    futhark_mc_segred_stage_1_parloop_struct_128656.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_gtid_117812 =
        gtid_117812;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_x_117897 = x_117897;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_x_126626 = x_126626;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_mem_126631 =
        mem_126631.mem;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_mem_126632 =
        mem_126632.mem;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_a11_126670 =
        a11_126670;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_b11_126672 =
        b11_126672;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_c11_126673 =
        c11_126673;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_reduce_stage_1_tid_res_arr_mem_126904 =
        reduce_stage_1_tid_res_arr_mem_126904;
    futhark_mc_segred_stage_1_parloop_struct_128656.free_reduce_stage_1_tid_res_arr_mem_126906 =
        reduce_stage_1_tid_res_arr_mem_126906;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128657_task;
    
    futhark_mc_segred_stage_1_parloop_128657_task.name =
        "futhark_mc_segred_stage_1_parloop_128657";
    futhark_mc_segred_stage_1_parloop_128657_task.fn =
        futhark_mc_segred_stage_1_parloop_128657;
    futhark_mc_segred_stage_1_parloop_128657_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128656;
    futhark_mc_segred_stage_1_parloop_128657_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128657_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128657_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128657_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128657_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128657_task);
    
    if (futhark_mc_segred_stage_1_parloop_128657_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128657_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128657_total_end -
                 futhark_mc_segred_stage_1_parloop_128657_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128657_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128657_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128657_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126674 = 0.0F;
        defunc_2_reduce_res_126675 = 0.0F;
    }
    
    float x_126911;
    float x_126912;
    float x_126914;
    float x_126915;
    
    for (int32_t i_126917 = 0; i_126917 < num_tasks_126903; i_126917++) {
        flat_tid_117819 = i_126917;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126911 = defunc_2_reduce_res_126674;
            }
            // load next params
            {
                x_126912 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126904)[flat_tid_117819];
            }
            // red body
            {
                float defunc_1_op_res_126913 = x_126911 + x_126912;
                
                defunc_2_reduce_res_126674 = defunc_1_op_res_126913;
            }
            // load acc params
            {
                x_126914 = defunc_2_reduce_res_126675;
            }
            // load next params
            {
                x_126915 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126906)[flat_tid_117819];
            }
            // red body
            {
                float defunc_1_op_res_126916 = x_126914 + x_126915;
                
                defunc_2_reduce_res_126675 = defunc_1_op_res_126916;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126904);
    free(reduce_stage_1_tid_res_arr_mem_126906);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128653_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128653_end -
                 futhark_mc_segred_task_128653_start;
        
        ctx->futhark_mc_segred_task_128653_runs[tid]++;
        ctx->futhark_mc_segred_task_128653_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128653_iter[tid] += iterations;
    }
    *futhark_mc_task_128652->retval_defunc_2_reduce_res_126674 =
        defunc_2_reduce_res_126674;
    *futhark_mc_task_128652->retval_defunc_2_reduce_res_126675 =
        defunc_2_reduce_res_126675;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128642(void *args, int64_t start,
                                            int64_t end, int flat_tid_117815,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128641
    *futhark_mc_segmap_parloop_struct_128641 =
    (struct futhark_mc_segmap_parloop_struct_128641 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128641->ctx;
    uint64_t futhark_mc_segmap_parloop_128642_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128642_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128641->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128641->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128641->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128641->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128641->free_i_112596;
    int64_t gtid_117812 =
            futhark_mc_segmap_parloop_struct_128641->free_gtid_117812;
    int64_t x_117897 = futhark_mc_segmap_parloop_struct_128641->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 =
            futhark_mc_segmap_parloop_struct_128641->free_bytes_120543;
    struct memblock mem_120581 = {.desc ="mem_120581", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_120581,
                                  .size =0, .references =NULL};
    struct memblock mem_120584 = {.desc ="mem_120584", .mem =
                                  futhark_mc_segmap_parloop_struct_128641->free_mem_120584,
                                  .size =0, .references =NULL};
    size_t mem_126631_cached_sizze_128643 = 0;
    char *mem_126631 = NULL;
    size_t mem_126632_cached_sizze_128644 = 0;
    char *mem_126632 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126831 = start;
    
    if (mem_126631_cached_sizze_128643 < (size_t) bytes_120543) {
        mem_126631 = realloc(mem_126631, bytes_120543);
        mem_126631_cached_sizze_128643 = bytes_120543;
    }
    if (mem_126632_cached_sizze_128644 < (size_t) bytes_120543) {
        mem_126632 = realloc(mem_126632, bytes_120543);
        mem_126632_cached_sizze_128644 = bytes_120543;
    }
    for (; iter_126831 < end; iter_126831++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126880 = t_n_m_112577;
        int64_t gtid_117816 = iter_126831;
        int64_t remnant_126881 = iter_126831 - gtid_117816;
        int64_t x_126626 = ((int64_t *) mem_119606.mem)[gtid_117812 *
                                                        t_n_m_112577 +
                                                        gtid_117816];
        float x_126627 = ((float *) mem_119610.mem)[gtid_117812 * t_n_m_112577 +
                                                    gtid_117816];
        int64_t min_arg_126628 = mul64(t_jump_112527, gtid_117816);
        int64_t min_res_126629 = smin64(i_112596, min_arg_126628);
        float defunc_0_f_res_126630 = sitofp_i64_f32(min_res_126629);
        float defunc_2_reduce_res_126633;
        float defunc_2_reduce_res_126634;
        float defunc_2_reduce_res_126635;
        int64_t flat_tid_117817 = (int64_t) 0;
        int32_t num_tasks_126882;
        struct futhark_mc_task_128645 futhark_mc_task_128645;
        
        futhark_mc_task_128645.ctx = ctx;
        futhark_mc_task_128645.free_n_112520 = n_112520;
        futhark_mc_task_128645.free_gtid_117812 = gtid_117812;
        futhark_mc_task_128645.free_x_117897 = x_117897;
        futhark_mc_task_128645.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128645.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128645.free_x_126626 = x_126626;
        futhark_mc_task_128645.free_x_126627 = x_126627;
        futhark_mc_task_128645.free_defunc_0_f_res_126630 =
            defunc_0_f_res_126630;
        futhark_mc_task_128645.retval_defunc_2_reduce_res_126633 =
            &defunc_2_reduce_res_126633;
        futhark_mc_task_128645.retval_defunc_2_reduce_res_126634 =
            &defunc_2_reduce_res_126634;
        futhark_mc_task_128645.retval_defunc_2_reduce_res_126635 =
            &defunc_2_reduce_res_126635;
        futhark_mc_task_128645.retval_mem_126631 = mem_126631;
        futhark_mc_task_128645.retval_mem_126632 = mem_126632;
        
        struct scheduler_segop futhark_mc_task_128645_task;
        
        futhark_mc_task_128645_task.args = &futhark_mc_task_128645;
        futhark_mc_task_128645_task.top_level_fn =
            futhark_mc_segred_task_128646;
        futhark_mc_task_128645_task.name = "futhark_mc_segred_task_128646";
        futhark_mc_task_128645_task.iterations = t_window_112523;
        futhark_mc_task_128645_task.task_time =
            &ctx->futhark_mc_segred_task_128646_total_time;
        futhark_mc_task_128645_task.task_iter =
            &ctx->futhark_mc_segred_task_128646_total_iter;
        futhark_mc_task_128645_task.sched = STATIC;
        futhark_mc_task_128645_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128646_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128645_task);
        
        if (futhark_mc_segred_task_128646_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126666 = defunc_2_reduce_res_126633 *
              defunc_2_reduce_res_126635;
        float y_126667 = defunc_2_reduce_res_126634 *
              defunc_2_reduce_res_126634;
        float y_126668 = x_126666 - y_126667;
        float det1_126669 = 1.0F / y_126668;
        float a11_126670 = defunc_2_reduce_res_126635 * det1_126669;
        float negate_arg_126671 = defunc_2_reduce_res_126634 * det1_126669;
        float b11_126672 = 0.0F - negate_arg_126671;
        float c11_126673 = defunc_2_reduce_res_126633 * det1_126669;
        float defunc_2_reduce_res_126674;
        float defunc_2_reduce_res_126675;
        int64_t flat_tid_117819 = (int64_t) 0;
        int32_t num_tasks_126903;
        struct futhark_mc_task_128652 futhark_mc_task_128652;
        
        futhark_mc_task_128652.ctx = ctx;
        futhark_mc_task_128652.free_n_112520 = n_112520;
        futhark_mc_task_128652.free_gtid_117812 = gtid_117812;
        futhark_mc_task_128652.free_x_117897 = x_117897;
        futhark_mc_task_128652.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128652.free_x_126626 = x_126626;
        futhark_mc_task_128652.free_mem_126631 = mem_126631;
        futhark_mc_task_128652.free_mem_126632 = mem_126632;
        futhark_mc_task_128652.free_a11_126670 = a11_126670;
        futhark_mc_task_128652.free_b11_126672 = b11_126672;
        futhark_mc_task_128652.free_c11_126673 = c11_126673;
        futhark_mc_task_128652.retval_defunc_2_reduce_res_126674 =
            &defunc_2_reduce_res_126674;
        futhark_mc_task_128652.retval_defunc_2_reduce_res_126675 =
            &defunc_2_reduce_res_126675;
        
        struct scheduler_segop futhark_mc_task_128652_task;
        
        futhark_mc_task_128652_task.args = &futhark_mc_task_128652;
        futhark_mc_task_128652_task.top_level_fn =
            futhark_mc_segred_task_128653;
        futhark_mc_task_128652_task.name = "futhark_mc_segred_task_128653";
        futhark_mc_task_128652_task.iterations = t_window_112523;
        futhark_mc_task_128652_task.task_time =
            &ctx->futhark_mc_segred_task_128653_total_time;
        futhark_mc_task_128652_task.task_iter =
            &ctx->futhark_mc_segred_task_128653_total_iter;
        futhark_mc_task_128652_task.sched = STATIC;
        futhark_mc_task_128652_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128653_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128652_task);
        
        if (futhark_mc_segred_task_128653_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120581.mem)[gtid_117816] = defunc_2_reduce_res_126674;
        ((float *) mem_120584.mem)[gtid_117816] = defunc_2_reduce_res_126675;
    }
    
  cleanup:
    { }
    free(mem_126631);
    free(mem_126632);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128642_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128642_end -
                 futhark_mc_segmap_parloop_128642_start;
        
        ctx->futhark_mc_segmap_parloop_128642_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128642_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128642_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128640(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117815 = tid;
    int num_tasks_126771 = info.nsubtasks;
    struct futhark_mc_task_128634 *futhark_mc_task_128634 =
                                  (struct futhark_mc_task_128634 *) args;
    struct futhark_context *ctx = futhark_mc_task_128634->ctx;
    uint64_t futhark_mc_segmap_nested_task_128640_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128640_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128634->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128634->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128634->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128634->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128634->free_i_112596;
    int64_t gtid_117812 = futhark_mc_task_128634->free_gtid_117812;
    int64_t x_117897 = futhark_mc_task_128634->free_x_117897;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128634->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128634->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128634->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128634->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128634->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 = futhark_mc_task_128634->free_bytes_120543;
    struct memblock mem_120581 = {.desc ="mem_120581", .mem =
                                  futhark_mc_task_128634->free_mem_120581,
                                  .size =0, .references =NULL};
    struct memblock mem_120584 = {.desc ="mem_120584", .mem =
                                  futhark_mc_task_128634->free_mem_120584,
                                  .size =0, .references =NULL};
    int64_t iter_126831;
    struct futhark_mc_segmap_parloop_struct_128641
    futhark_mc_segmap_parloop_struct_128641;
    
    futhark_mc_segmap_parloop_struct_128641.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128641.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128641.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128641.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128641.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128641.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128641.free_gtid_117812 = gtid_117812;
    futhark_mc_segmap_parloop_struct_128641.free_x_117897 = x_117897;
    futhark_mc_segmap_parloop_struct_128641.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128641.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128641.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128641.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128641.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128641.free_bytes_120543 = bytes_120543;
    futhark_mc_segmap_parloop_struct_128641.free_mem_120581 = mem_120581.mem;
    futhark_mc_segmap_parloop_struct_128641.free_mem_120584 = mem_120584.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128642_task;
    
    futhark_mc_segmap_parloop_128642_task.name =
        "futhark_mc_segmap_parloop_128642";
    futhark_mc_segmap_parloop_128642_task.fn = futhark_mc_segmap_parloop_128642;
    futhark_mc_segmap_parloop_128642_task.args =
        &futhark_mc_segmap_parloop_struct_128641;
    futhark_mc_segmap_parloop_128642_task.iterations = iterations;
    futhark_mc_segmap_parloop_128642_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128642_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128642_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128642_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128642_task);
    
    if (futhark_mc_segmap_parloop_128642_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128642_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128642_total_end -
                 futhark_mc_segmap_parloop_128642_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128642_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128642_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128642_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128640_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128640_end -
                 futhark_mc_segmap_nested_task_128640_start;
        
        ctx->futhark_mc_segmap_nested_task_128640_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128640_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128640_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128631(void *args, int64_t start,
                                            int64_t end, int flat_tid_117811,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128630
    *futhark_mc_segmap_parloop_struct_128630 =
    (struct futhark_mc_segmap_parloop_struct_128630 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128630->ctx;
    uint64_t futhark_mc_segmap_parloop_128631_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128631_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128630->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128630->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128630->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128630->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128630->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128630->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128630->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 =
            futhark_mc_segmap_parloop_struct_128630->free_bytes_120543;
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120648,
                                  .size =0, .references =NULL};
    struct memblock mem_120652 = {.desc ="mem_120652", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120652,
                                  .size =0, .references =NULL};
    size_t mem_120581_cached_sizze_128632 = 0;
    char *mem_120581 = NULL;
    size_t mem_120584_cached_sizze_128633 = 0;
    char *mem_120584 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126625 = start;
    
    if (mem_120581_cached_sizze_128632 < (size_t) bytes_119552) {
        mem_120581 = realloc(mem_120581, bytes_119552);
        mem_120581_cached_sizze_128632 = bytes_119552;
    }
    if (mem_120584_cached_sizze_128633 < (size_t) bytes_119552) {
        mem_120584 = realloc(mem_120584, bytes_119552);
        mem_120584_cached_sizze_128633 = bytes_119552;
    }
    for (; iter_126625 < end; iter_126625++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126769 = m_112519;
        int64_t gtid_117812 = iter_126625;
        int64_t remnant_126770 = iter_126625 - gtid_117812;
        int64_t x_117897 = ((int64_t *) mem_119420.mem)[gtid_117812];
        int64_t flat_tid_117813 = (int64_t) 0;
        int32_t num_tasks_126771;
        int64_t flat_tid_117815 = (int64_t) 0;
        struct futhark_mc_task_128634 futhark_mc_task_128634;
        
        futhark_mc_task_128634.ctx = ctx;
        futhark_mc_task_128634.free_n_112520 = n_112520;
        futhark_mc_task_128634.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128634.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128634.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128634.free_i_112596 = i_112596;
        futhark_mc_task_128634.free_gtid_117812 = gtid_117812;
        futhark_mc_task_128634.free_x_117897 = x_117897;
        futhark_mc_task_128634.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128634.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128634.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128634.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128634.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128634.free_bytes_120543 = bytes_120543;
        futhark_mc_task_128634.free_mem_120581 = mem_120581;
        futhark_mc_task_128634.free_mem_120584 = mem_120584;
        
        struct scheduler_segop futhark_mc_task_128634_task;
        
        futhark_mc_task_128634_task.args = &futhark_mc_task_128634;
        futhark_mc_task_128634_task.top_level_fn =
            futhark_mc_segmap_task_128635;
        futhark_mc_task_128634_task.name = "futhark_mc_segmap_task_128635";
        futhark_mc_task_128634_task.iterations = t_n_m_112577;
        futhark_mc_task_128634_task.task_time =
            &ctx->futhark_mc_segmap_task_128635_total_time;
        futhark_mc_task_128634_task.task_iter =
            &ctx->futhark_mc_segmap_task_128635_total_iter;
        futhark_mc_task_128634_task.sched = STATIC;
        futhark_mc_task_128634_task.nested_fn =
            futhark_mc_segmap_nested_task_128640;
        
        int futhark_mc_segmap_task_128635_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128634_task);
        
        if (futhark_mc_segmap_task_128635_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120648.mem + gtid_117812 * t_n_m_112577 * (int64_t) 4,
                mem_120581 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120652.mem + gtid_117812 * t_n_m_112577 * (int64_t) 4,
                mem_120584 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120581);
    free(mem_120584);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128631_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128631_end -
                 futhark_mc_segmap_parloop_128631_start;
        
        ctx->futhark_mc_segmap_parloop_128631_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128631_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128631_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128629(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117811 = tid;
    int num_tasks_126536 = info.nsubtasks;
    struct futhark_mc_task_128621 *futhark_mc_task_128621 =
                                  (struct futhark_mc_task_128621 *) args;
    struct futhark_context *ctx = futhark_mc_task_128621->ctx;
    uint64_t futhark_mc_segmap_nested_task_128629_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128629_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128621->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128621->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128621->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128621->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128621->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128621->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128621->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128621->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128621->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128621->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128621->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128621->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128621->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120543 = futhark_mc_task_128621->free_bytes_120543;
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_task_128621->free_mem_120648,
                                  .size =0, .references =NULL};
    struct memblock mem_120652 = {.desc ="mem_120652", .mem =
                                  futhark_mc_task_128621->free_mem_120652,
                                  .size =0, .references =NULL};
    int64_t iter_126625;
    struct futhark_mc_segmap_parloop_struct_128630
    futhark_mc_segmap_parloop_struct_128630;
    
    futhark_mc_segmap_parloop_struct_128630.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128630.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128630.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128630.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128630.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128630.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128630.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128630.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128630.free_bytes_120543 = bytes_120543;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120648 = mem_120648.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120652 = mem_120652.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128631_task;
    
    futhark_mc_segmap_parloop_128631_task.name =
        "futhark_mc_segmap_parloop_128631";
    futhark_mc_segmap_parloop_128631_task.fn = futhark_mc_segmap_parloop_128631;
    futhark_mc_segmap_parloop_128631_task.args =
        &futhark_mc_segmap_parloop_struct_128630;
    futhark_mc_segmap_parloop_128631_task.iterations = iterations;
    futhark_mc_segmap_parloop_128631_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128631_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128631_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128631_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128631_task);
    
    if (futhark_mc_segmap_parloop_128631_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128631_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128631_total_end -
                 futhark_mc_segmap_parloop_128631_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128629_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128629_end -
                 futhark_mc_segmap_nested_task_128629_start;
        
        ctx->futhark_mc_segmap_nested_task_128629_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128629_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128629_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128658 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120824;
    char *free_mem_120828;
};
struct futhark_mc_segmap_parloop_struct_128660 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120824;
    char *free_mem_120828;
};
static int futhark_mc_segmap_parloop_128661(void *args, int64_t start,
                                            int64_t end, int flat_tid_118042,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128660
    *futhark_mc_segmap_parloop_struct_128660 =
    (struct futhark_mc_segmap_parloop_struct_128660 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128660->ctx;
    uint64_t futhark_mc_segmap_parloop_128661_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128661_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128660->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128660->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128660->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128660->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128660->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128660->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128660->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 =
            futhark_mc_segmap_parloop_struct_128660->free_bytes_120653;
    struct memblock mem_120824 = {.desc ="mem_120824", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_120824,
                                  .size =0, .references =NULL};
    struct memblock mem_120828 = {.desc ="mem_120828", .mem =
                                  futhark_mc_segmap_parloop_struct_128660->free_mem_120828,
                                  .size =0, .references =NULL};
    size_t mem_120733_cached_sizze_128662 = 0;
    char *mem_120733 = NULL;
    size_t mem_120736_cached_sizze_128663 = 0;
    char *mem_120736 = NULL;
    size_t mem_120753_cached_sizze_128664 = 0;
    char *mem_120753 = NULL;
    size_t mem_120756_cached_sizze_128665 = 0;
    char *mem_120756 = NULL;
    size_t mem_120783_cached_sizze_128666 = 0;
    char *mem_120783 = NULL;
    size_t mem_120786_cached_sizze_128667 = 0;
    char *mem_120786 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126919 = start;
    
    if (mem_120733_cached_sizze_128662 < (size_t) bytes_119552) {
        mem_120733 = realloc(mem_120733, bytes_119552);
        mem_120733_cached_sizze_128662 = bytes_119552;
    }
    if (mem_120736_cached_sizze_128663 < (size_t) bytes_119552) {
        mem_120736 = realloc(mem_120736, bytes_119552);
        mem_120736_cached_sizze_128663 = bytes_119552;
    }
    if (mem_120753_cached_sizze_128664 < (size_t) bytes_120653) {
        mem_120753 = realloc(mem_120753, bytes_120653);
        mem_120753_cached_sizze_128664 = bytes_120653;
    }
    if (mem_120756_cached_sizze_128665 < (size_t) bytes_120653) {
        mem_120756 = realloc(mem_120756, bytes_120653);
        mem_120756_cached_sizze_128665 = bytes_120653;
    }
    if (mem_120783_cached_sizze_128666 < (size_t) bytes_120653) {
        mem_120783 = realloc(mem_120783, bytes_120653);
        mem_120783_cached_sizze_128666 = bytes_120653;
    }
    if (mem_120786_cached_sizze_128667 < (size_t) bytes_120653) {
        mem_120786 = realloc(mem_120786, bytes_120653);
        mem_120786_cached_sizze_128667 = bytes_120653;
    }
    for (; iter_126919 < end; iter_126919++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127037 = m_112519;
        int64_t gtid_118043 = iter_126919;
        int64_t remnant_127038 = iter_126919 - gtid_118043;
        int64_t x_114296 = ((int64_t *) mem_119420.mem)[gtid_118043];
        
        for (int64_t i_126920 = 0; i_126920 < t_n_m_112577; i_126920++) {
            int64_t x_126923 = ((int64_t *) mem_119606.mem)[gtid_118043 *
                                                            t_n_m_112577 +
                                                            i_126920];
            float x_126924 = ((float *) mem_119610.mem)[gtid_118043 *
                                                        t_n_m_112577 +
                                                        i_126920];
            int64_t min_arg_126925 = mul64(t_jump_112527, i_126920);
            int64_t min_res_126926 = smin64(i_112596, min_arg_126925);
            float defunc_0_f_res_126927 = sitofp_i64_f32(min_res_126926);
            
            for (int64_t i_126932 = 0; i_126932 < t_window_112523; i_126932++) {
                bool cond_126935 = sle64(x_114296, i_126932);
                float defunc_0_f_res_126936;
                
                if (cond_126935) {
                    defunc_0_f_res_126936 = 0.0F;
                } else {
                    int64_t i_126937 = add64(x_126923, i_126932);
                    float x_126938 = ((float *) mem_119442.mem)[gtid_118043 *
                                                                n_112520 +
                                                                i_126937];
                    float defunc_0_f_res_f_res_126939 = 1.0F + x_126938;
                    
                    defunc_0_f_res_126936 = defunc_0_f_res_f_res_126939;
                }
                
                float defunc_0_f_res_126940;
                
                if (cond_126935) {
                    defunc_0_f_res_126940 = 0.0F;
                } else {
                    int64_t i_126941 = add64(x_126923, i_126932);
                    float x_126942 = ((float *) mem_120361.mem)[gtid_118043 *
                                                                n_112520 +
                                                                i_126941];
                    
                    defunc_0_f_res_126940 = x_126942;
                }
                
                float x_j_126943 = defunc_0_f_res_126936 -
                      defunc_0_f_res_126927;
                float abs_res_126944 = (float) fabs(x_j_126943);
                float tmp1_126945 = abs_res_126944 / x_126924;
                float x_126946 = tmp1_126945 * tmp1_126945;
                float y_126947 = tmp1_126945 * x_126946;
                float tmp2_126948 = 1.0F - y_126947;
                float x_126949 = tmp2_126948 * tmp2_126948;
                float tmp3_126950 = tmp2_126948 * x_126949;
                float tmp4_126951 = defunc_0_f_res_126940 * tmp3_126950;
                
                ((float *) mem_120753)[i_126932] = x_j_126943;
                ((float *) mem_120756)[i_126932] = tmp4_126951;
            }
            
            float defunc_2_reduce_res_126956;
            float defunc_2_reduce_res_126957;
            float defunc_2_reduce_res_126958;
            float defunc_2_reduce_res_126959;
            float defunc_2_reduce_res_126960;
            float redout_126964;
            float redout_126965;
            float redout_126966;
            float redout_126967;
            float redout_126968;
            
            redout_126964 = 0.0F;
            redout_126965 = 0.0F;
            redout_126966 = 0.0F;
            redout_126967 = 0.0F;
            redout_126968 = 0.0F;
            for (int64_t i_126963 = 0; i_126963 < t_window_112523; i_126963++) {
                float x_126971 = ((float *) mem_120753)[i_126963];
                float x_126972 = ((float *) mem_120756)[i_126963];
                float defunc_1_f_res_126973 = x_126971 * x_126972;
                float defunc_1_f_res_126974 = x_126971 * defunc_1_f_res_126973;
                float defunc_1_f_res_126975 = x_126971 * defunc_1_f_res_126974;
                float defunc_1_f_res_126976 = x_126971 * defunc_1_f_res_126975;
                float defunc_1_op_res_126977 = x_126972 + redout_126964;
                float defunc_1_op_res_126978 = defunc_1_f_res_126973 +
                      redout_126965;
                float defunc_1_op_res_126979 = defunc_1_f_res_126974 +
                      redout_126966;
                float defunc_1_op_res_126980 = defunc_1_f_res_126975 +
                      redout_126967;
                float defunc_1_op_res_126981 = defunc_1_f_res_126976 +
                      redout_126968;
                
                ((float *) mem_120783)[i_126963] = defunc_1_f_res_126974;
                ((float *) mem_120786)[i_126963] = defunc_1_f_res_126973;
                
                float redout_tmp_127043 = defunc_1_op_res_126977;
                float redout_tmp_127044 = defunc_1_op_res_126978;
                float redout_tmp_127045 = defunc_1_op_res_126979;
                float redout_tmp_127046 = defunc_1_op_res_126980;
                float redout_tmp_127047 = defunc_1_op_res_126981;
                
                redout_126964 = redout_tmp_127043;
                redout_126965 = redout_tmp_127044;
                redout_126966 = redout_tmp_127045;
                redout_126967 = redout_tmp_127046;
                redout_126968 = redout_tmp_127047;
            }
            defunc_2_reduce_res_126956 = redout_126964;
            defunc_2_reduce_res_126957 = redout_126965;
            defunc_2_reduce_res_126958 = redout_126966;
            defunc_2_reduce_res_126959 = redout_126967;
            defunc_2_reduce_res_126960 = redout_126968;
            
            float x_126984 = defunc_2_reduce_res_126958 *
                  defunc_2_reduce_res_126960;
            float y_126985 = defunc_2_reduce_res_126959 *
                  defunc_2_reduce_res_126959;
            float a12_126986 = x_126984 - y_126985;
            float x_126987 = defunc_2_reduce_res_126958 *
                  defunc_2_reduce_res_126959;
            float y_126988 = defunc_2_reduce_res_126957 *
                  defunc_2_reduce_res_126960;
            float b12_126989 = x_126987 - y_126988;
            float x_126990 = defunc_2_reduce_res_126957 *
                  defunc_2_reduce_res_126959;
            float y_126991 = defunc_2_reduce_res_126958 *
                  defunc_2_reduce_res_126958;
            float c12_126992 = x_126990 - y_126991;
            float x_126993 = defunc_2_reduce_res_126956 *
                  defunc_2_reduce_res_126960;
            float b2_126994 = x_126993 - y_126991;
            float x_126995 = defunc_2_reduce_res_126957 *
                  defunc_2_reduce_res_126958;
            float y_126996 = defunc_2_reduce_res_126956 *
                  defunc_2_reduce_res_126959;
            float c2_126997 = x_126995 - y_126996;
            float x_126998 = defunc_2_reduce_res_126956 * a12_126986;
            float y_126999 = defunc_2_reduce_res_126957 * b12_126989;
            float x_127000 = x_126998 + y_126999;
            float y_127001 = defunc_2_reduce_res_126958 * c12_126992;
            float y_127002 = x_127000 + y_127001;
            float det_127003 = 1.0F / y_127002;
            float a12_127004 = a12_126986 * det_127003;
            float b12_127005 = b12_126989 * det_127003;
            float c12_127006 = c12_126992 * det_127003;
            float b2_127007 = b2_126994 * det_127003;
            float c2_127008 = c2_126997 * det_127003;
            float defunc_2_reduce_res_127009;
            float defunc_2_reduce_res_127010;
            float redout_127012;
            float redout_127013;
            
            redout_127012 = 0.0F;
            redout_127013 = 0.0F;
            for (int64_t i_127011 = 0; i_127011 < t_window_112523; i_127011++) {
                float x_127014 = ((float *) mem_120756)[i_127011];
                float x_127015 = ((float *) mem_120786)[i_127011];
                float x_127016 = ((float *) mem_120783)[i_127011];
                bool cond_127017 = sle64(x_114296, i_127011);
                float defunc_0_f_res_127018;
                
                if (cond_127017) {
                    defunc_0_f_res_127018 = 0.0F;
                } else {
                    int64_t i_127019 = add64(x_126923, i_127011);
                    float x_127020 = ((float *) mem_120357.mem)[gtid_118043 *
                                                                n_112520 +
                                                                i_127019];
                    
                    defunc_0_f_res_127018 = x_127020;
                }
                
                float x_127021 = a12_127004 * x_127014;
                float y_127022 = b12_127005 * x_127015;
                float x_127023 = x_127021 + y_127022;
                float y_127024 = c12_127006 * x_127016;
                float x_127025 = x_127023 + y_127024;
                float defunc_9_fit_fun_res_127026 = defunc_0_f_res_127018 *
                      x_127025;
                float x_127027 = b12_127005 * x_127014;
                float y_127028 = b2_127007 * x_127015;
                float x_127029 = x_127027 + y_127028;
                float y_127030 = c2_127008 * x_127016;
                float x_127031 = x_127029 + y_127030;
                float defunc_9_slope_fun_res_127032 = defunc_0_f_res_127018 *
                      x_127031;
                float defunc_1_op_res_127033 = defunc_9_fit_fun_res_127026 +
                      redout_127012;
                float defunc_1_op_res_127034 = defunc_9_slope_fun_res_127032 +
                      redout_127013;
                float redout_tmp_127050 = defunc_1_op_res_127033;
                float redout_tmp_127051 = defunc_1_op_res_127034;
                
                redout_127012 = redout_tmp_127050;
                redout_127013 = redout_tmp_127051;
            }
            defunc_2_reduce_res_127009 = redout_127012;
            defunc_2_reduce_res_127010 = redout_127013;
            ((float *) mem_120733)[i_126920] = defunc_2_reduce_res_127009;
            ((float *) mem_120736)[i_126920] = defunc_2_reduce_res_127010;
        }
        memmove(mem_120824.mem + gtid_118043 * t_n_m_112577 * (int64_t) 4,
                mem_120733 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120828.mem + gtid_118043 * t_n_m_112577 * (int64_t) 4,
                mem_120736 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120733);
    free(mem_120736);
    free(mem_120753);
    free(mem_120756);
    free(mem_120783);
    free(mem_120786);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128661_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128661_end -
                 futhark_mc_segmap_parloop_128661_start;
        
        ctx->futhark_mc_segmap_parloop_128661_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128661_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128661_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128659(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118042 = tid;
    int num_tasks_126918 = info.nsubtasks;
    struct futhark_mc_task_128658 *futhark_mc_task_128658 =
                                  (struct futhark_mc_task_128658 *) args;
    struct futhark_context *ctx = futhark_mc_task_128658->ctx;
    uint64_t futhark_mc_segmap_task_128659_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128659_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128658->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128658->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128658->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128658->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128658->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128658->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128658->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128658->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128658->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128658->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128658->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128658->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128658->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 = futhark_mc_task_128658->free_bytes_120653;
    struct memblock mem_120824 = {.desc ="mem_120824", .mem =
                                  futhark_mc_task_128658->free_mem_120824,
                                  .size =0, .references =NULL};
    struct memblock mem_120828 = {.desc ="mem_120828", .mem =
                                  futhark_mc_task_128658->free_mem_120828,
                                  .size =0, .references =NULL};
    int64_t iter_126919;
    struct futhark_mc_segmap_parloop_struct_128660
    futhark_mc_segmap_parloop_struct_128660;
    
    futhark_mc_segmap_parloop_struct_128660.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128660.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128660.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128660.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128660.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128660.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128660.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128660.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128660.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128660.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128660.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128660.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128660.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128660.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128660.free_bytes_120653 = bytes_120653;
    futhark_mc_segmap_parloop_struct_128660.free_mem_120824 = mem_120824.mem;
    futhark_mc_segmap_parloop_struct_128660.free_mem_120828 = mem_120828.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128661_task;
    
    futhark_mc_segmap_parloop_128661_task.name =
        "futhark_mc_segmap_parloop_128661";
    futhark_mc_segmap_parloop_128661_task.fn = futhark_mc_segmap_parloop_128661;
    futhark_mc_segmap_parloop_128661_task.args =
        &futhark_mc_segmap_parloop_struct_128660;
    futhark_mc_segmap_parloop_128661_task.iterations = iterations;
    futhark_mc_segmap_parloop_128661_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128661_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128661_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128661_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128661_task);
    
    if (futhark_mc_segmap_parloop_128661_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128661_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128661_total_end -
                 futhark_mc_segmap_parloop_128661_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128661_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128661_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128661_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128659_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128659_end -
                 futhark_mc_segmap_task_128659_start;
        
        ctx->futhark_mc_segmap_task_128659_runs[tid]++;
        ctx->futhark_mc_segmap_task_128659_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128659_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128669 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    char *free_mem_119420;
    char *free_mem_119442;
    int64_t free_bytes_119552;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120824;
    char *free_mem_120828;
};
struct futhark_mc_task_128673 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120727;
    char *free_mem_120730;
};
struct futhark_mc_segmap_parloop_struct_128675 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120727;
    char *free_mem_120730;
};
static int futhark_mc_segmap_parloop_128676(void *args, int64_t start,
                                            int64_t end, int flat_tid_118046,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128675
    *futhark_mc_segmap_parloop_struct_128675 =
    (struct futhark_mc_segmap_parloop_struct_128675 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128675->ctx;
    uint64_t futhark_mc_segmap_parloop_128676_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128676_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128675->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128675->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128675->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128675->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128675->free_i_112596;
    int64_t gtid_118045 =
            futhark_mc_segmap_parloop_struct_128675->free_gtid_118045;
    int64_t x_118168 = futhark_mc_segmap_parloop_struct_128675->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 =
            futhark_mc_segmap_parloop_struct_128675->free_bytes_120653;
    struct memblock mem_120727 = {.desc ="mem_120727", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_120727,
                                  .size =0, .references =NULL};
    struct memblock mem_120730 = {.desc ="mem_120730", .mem =
                                  futhark_mc_segmap_parloop_struct_128675->free_mem_120730,
                                  .size =0, .references =NULL};
    size_t mem_127166_cached_sizze_128677 = 0;
    char *mem_127166 = NULL;
    size_t mem_127168_cached_sizze_128678 = 0;
    char *mem_127168 = NULL;
    size_t mem_127194_cached_sizze_128679 = 0;
    char *mem_127194 = NULL;
    size_t mem_127196_cached_sizze_128680 = 0;
    char *mem_127196 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127280 = start;
    
    if (mem_127166_cached_sizze_128677 < (size_t) bytes_120653) {
        mem_127166 = realloc(mem_127166, bytes_120653);
        mem_127166_cached_sizze_128677 = bytes_120653;
    }
    if (mem_127168_cached_sizze_128678 < (size_t) bytes_120653) {
        mem_127168 = realloc(mem_127168, bytes_120653);
        mem_127168_cached_sizze_128678 = bytes_120653;
    }
    if (mem_127194_cached_sizze_128679 < (size_t) bytes_120653) {
        mem_127194 = realloc(mem_127194, bytes_120653);
        mem_127194_cached_sizze_128679 = bytes_120653;
    }
    if (mem_127196_cached_sizze_128680 < (size_t) bytes_120653) {
        mem_127196 = realloc(mem_127196, bytes_120653);
        mem_127196_cached_sizze_128680 = bytes_120653;
    }
    for (; iter_127280 < end; iter_127280++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127348 = t_n_m_112577;
        int64_t gtid_118047 = iter_127280;
        int64_t remnant_127349 = iter_127280 - gtid_118047;
        int64_t x_127161 = ((int64_t *) mem_119606.mem)[gtid_118045 *
                                                        t_n_m_112577 +
                                                        gtid_118047];
        float x_127162 = ((float *) mem_119610.mem)[gtid_118045 * t_n_m_112577 +
                                                    gtid_118047];
        int64_t min_arg_127163 = mul64(t_jump_112527, gtid_118047);
        int64_t min_res_127164 = smin64(i_112596, min_arg_127163);
        float defunc_0_f_res_127165 = sitofp_i64_f32(min_res_127164);
        
        for (int64_t i_127281 = 0; i_127281 < t_window_112523; i_127281++) {
            bool cond_127284 = sle64(x_118168, i_127281);
            float defunc_0_f_res_127285;
            
            if (cond_127284) {
                defunc_0_f_res_127285 = 0.0F;
            } else {
                int64_t i_127286 = add64(x_127161, i_127281);
                float x_127287 = ((float *) mem_119442.mem)[gtid_118045 *
                                                            n_112520 +
                                                            i_127286];
                float defunc_0_f_res_f_res_127288 = 1.0F + x_127287;
                
                defunc_0_f_res_127285 = defunc_0_f_res_f_res_127288;
            }
            
            float defunc_0_f_res_127289;
            
            if (cond_127284) {
                defunc_0_f_res_127289 = 0.0F;
            } else {
                int64_t i_127290 = add64(x_127161, i_127281);
                float x_127291 = ((float *) mem_120361.mem)[gtid_118045 *
                                                            n_112520 +
                                                            i_127290];
                
                defunc_0_f_res_127289 = x_127291;
            }
            
            float x_j_127292 = defunc_0_f_res_127285 - defunc_0_f_res_127165;
            float abs_res_127293 = (float) fabs(x_j_127292);
            float tmp1_127294 = abs_res_127293 / x_127162;
            float x_127295 = tmp1_127294 * tmp1_127294;
            float y_127296 = tmp1_127294 * x_127295;
            float tmp2_127297 = 1.0F - y_127296;
            float x_127298 = tmp2_127297 * tmp2_127297;
            float tmp3_127299 = tmp2_127297 * x_127298;
            float tmp4_127300 = defunc_0_f_res_127289 * tmp3_127299;
            
            ((float *) mem_127166)[i_127281] = x_j_127292;
            ((float *) mem_127168)[i_127281] = tmp4_127300;
        }
        
        float defunc_2_reduce_res_127198;
        float defunc_2_reduce_res_127199;
        float defunc_2_reduce_res_127200;
        float defunc_2_reduce_res_127201;
        float defunc_2_reduce_res_127202;
        float redout_127304;
        float redout_127305;
        float redout_127306;
        float redout_127307;
        float redout_127308;
        
        redout_127304 = 0.0F;
        redout_127305 = 0.0F;
        redout_127306 = 0.0F;
        redout_127307 = 0.0F;
        redout_127308 = 0.0F;
        for (int64_t i_127303 = 0; i_127303 < t_window_112523; i_127303++) {
            float x_127311 = ((float *) mem_127166)[i_127303];
            float x_127312 = ((float *) mem_127168)[i_127303];
            float defunc_1_f_res_127313 = x_127311 * x_127312;
            float defunc_1_f_res_127314 = x_127311 * defunc_1_f_res_127313;
            float defunc_1_f_res_127315 = x_127311 * defunc_1_f_res_127314;
            float defunc_1_f_res_127316 = x_127311 * defunc_1_f_res_127315;
            float defunc_1_op_res_127317 = x_127312 + redout_127304;
            float defunc_1_op_res_127318 = defunc_1_f_res_127313 +
                  redout_127305;
            float defunc_1_op_res_127319 = defunc_1_f_res_127314 +
                  redout_127306;
            float defunc_1_op_res_127320 = defunc_1_f_res_127315 +
                  redout_127307;
            float defunc_1_op_res_127321 = defunc_1_f_res_127316 +
                  redout_127308;
            
            ((float *) mem_127194)[i_127303] = defunc_1_f_res_127314;
            ((float *) mem_127196)[i_127303] = defunc_1_f_res_127313;
            
            float redout_tmp_127352 = defunc_1_op_res_127317;
            float redout_tmp_127353 = defunc_1_op_res_127318;
            float redout_tmp_127354 = defunc_1_op_res_127319;
            float redout_tmp_127355 = defunc_1_op_res_127320;
            float redout_tmp_127356 = defunc_1_op_res_127321;
            
            redout_127304 = redout_tmp_127352;
            redout_127305 = redout_tmp_127353;
            redout_127306 = redout_tmp_127354;
            redout_127307 = redout_tmp_127355;
            redout_127308 = redout_tmp_127356;
        }
        defunc_2_reduce_res_127198 = redout_127304;
        defunc_2_reduce_res_127199 = redout_127305;
        defunc_2_reduce_res_127200 = redout_127306;
        defunc_2_reduce_res_127201 = redout_127307;
        defunc_2_reduce_res_127202 = redout_127308;
        
        float x_127226 = defunc_2_reduce_res_127200 *
              defunc_2_reduce_res_127202;
        float y_127227 = defunc_2_reduce_res_127201 *
              defunc_2_reduce_res_127201;
        float a12_127228 = x_127226 - y_127227;
        float x_127229 = defunc_2_reduce_res_127200 *
              defunc_2_reduce_res_127201;
        float y_127230 = defunc_2_reduce_res_127199 *
              defunc_2_reduce_res_127202;
        float b12_127231 = x_127229 - y_127230;
        float x_127232 = defunc_2_reduce_res_127199 *
              defunc_2_reduce_res_127201;
        float y_127233 = defunc_2_reduce_res_127200 *
              defunc_2_reduce_res_127200;
        float c12_127234 = x_127232 - y_127233;
        float x_127235 = defunc_2_reduce_res_127198 *
              defunc_2_reduce_res_127202;
        float b2_127236 = x_127235 - y_127233;
        float x_127237 = defunc_2_reduce_res_127199 *
              defunc_2_reduce_res_127200;
        float y_127238 = defunc_2_reduce_res_127198 *
              defunc_2_reduce_res_127201;
        float c2_127239 = x_127237 - y_127238;
        float x_127240 = defunc_2_reduce_res_127198 * a12_127228;
        float y_127241 = defunc_2_reduce_res_127199 * b12_127231;
        float x_127242 = x_127240 + y_127241;
        float y_127243 = defunc_2_reduce_res_127200 * c12_127234;
        float y_127244 = x_127242 + y_127243;
        float det_127245 = 1.0F / y_127244;
        float a12_127246 = a12_127228 * det_127245;
        float b12_127247 = b12_127231 * det_127245;
        float c12_127248 = c12_127234 * det_127245;
        float b2_127249 = b2_127236 * det_127245;
        float c2_127250 = c2_127239 * det_127245;
        float defunc_2_reduce_res_127251;
        float defunc_2_reduce_res_127252;
        float redout_127325;
        float redout_127326;
        
        redout_127325 = 0.0F;
        redout_127326 = 0.0F;
        for (int64_t i_127324 = 0; i_127324 < t_window_112523; i_127324++) {
            float x_127327 = ((float *) mem_127168)[i_127324];
            float x_127328 = ((float *) mem_127196)[i_127324];
            float x_127329 = ((float *) mem_127194)[i_127324];
            bool cond_127330 = sle64(x_118168, i_127324);
            float defunc_0_f_res_127331;
            
            if (cond_127330) {
                defunc_0_f_res_127331 = 0.0F;
            } else {
                int64_t i_127332 = add64(x_127161, i_127324);
                float x_127333 = ((float *) mem_120357.mem)[gtid_118045 *
                                                            n_112520 +
                                                            i_127332];
                
                defunc_0_f_res_127331 = x_127333;
            }
            
            float x_127334 = a12_127246 * x_127327;
            float y_127335 = b12_127247 * x_127328;
            float x_127336 = x_127334 + y_127335;
            float y_127337 = c12_127248 * x_127329;
            float x_127338 = x_127336 + y_127337;
            float defunc_9_fit_fun_res_127339 = defunc_0_f_res_127331 *
                  x_127338;
            float x_127340 = b12_127247 * x_127327;
            float y_127341 = b2_127249 * x_127328;
            float x_127342 = x_127340 + y_127341;
            float y_127343 = c2_127250 * x_127329;
            float x_127344 = x_127342 + y_127343;
            float defunc_9_slope_fun_res_127345 = defunc_0_f_res_127331 *
                  x_127344;
            float defunc_1_op_res_127346 = defunc_9_fit_fun_res_127339 +
                  redout_127325;
            float defunc_1_op_res_127347 = defunc_9_slope_fun_res_127345 +
                  redout_127326;
            float redout_tmp_127359 = defunc_1_op_res_127346;
            float redout_tmp_127360 = defunc_1_op_res_127347;
            
            redout_127325 = redout_tmp_127359;
            redout_127326 = redout_tmp_127360;
        }
        defunc_2_reduce_res_127251 = redout_127325;
        defunc_2_reduce_res_127252 = redout_127326;
        ((float *) mem_120727.mem)[gtid_118047] = defunc_2_reduce_res_127251;
        ((float *) mem_120730.mem)[gtid_118047] = defunc_2_reduce_res_127252;
    }
    
  cleanup:
    { }
    free(mem_127166);
    free(mem_127168);
    free(mem_127194);
    free(mem_127196);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128676_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128676_end -
                 futhark_mc_segmap_parloop_128676_start;
        
        ctx->futhark_mc_segmap_parloop_128676_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128676_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128676_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128674(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118046 = tid;
    int num_tasks_127279 = info.nsubtasks;
    struct futhark_mc_task_128673 *futhark_mc_task_128673 =
                                  (struct futhark_mc_task_128673 *) args;
    struct futhark_context *ctx = futhark_mc_task_128673->ctx;
    uint64_t futhark_mc_segmap_task_128674_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128674_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128673->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128673->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128673->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128673->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128673->free_i_112596;
    int64_t gtid_118045 = futhark_mc_task_128673->free_gtid_118045;
    int64_t x_118168 = futhark_mc_task_128673->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128673->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128673->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128673->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128673->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128673->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 = futhark_mc_task_128673->free_bytes_120653;
    struct memblock mem_120727 = {.desc ="mem_120727", .mem =
                                  futhark_mc_task_128673->free_mem_120727,
                                  .size =0, .references =NULL};
    struct memblock mem_120730 = {.desc ="mem_120730", .mem =
                                  futhark_mc_task_128673->free_mem_120730,
                                  .size =0, .references =NULL};
    int64_t iter_127280;
    struct futhark_mc_segmap_parloop_struct_128675
    futhark_mc_segmap_parloop_struct_128675;
    
    futhark_mc_segmap_parloop_struct_128675.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128675.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128675.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128675.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128675.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128675.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128675.free_gtid_118045 = gtid_118045;
    futhark_mc_segmap_parloop_struct_128675.free_x_118168 = x_118168;
    futhark_mc_segmap_parloop_struct_128675.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128675.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128675.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128675.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128675.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128675.free_bytes_120653 = bytes_120653;
    futhark_mc_segmap_parloop_struct_128675.free_mem_120727 = mem_120727.mem;
    futhark_mc_segmap_parloop_struct_128675.free_mem_120730 = mem_120730.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128676_task;
    
    futhark_mc_segmap_parloop_128676_task.name =
        "futhark_mc_segmap_parloop_128676";
    futhark_mc_segmap_parloop_128676_task.fn = futhark_mc_segmap_parloop_128676;
    futhark_mc_segmap_parloop_128676_task.args =
        &futhark_mc_segmap_parloop_struct_128675;
    futhark_mc_segmap_parloop_128676_task.iterations = iterations;
    futhark_mc_segmap_parloop_128676_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128676_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128676_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128676_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128676_task);
    
    if (futhark_mc_segmap_parloop_128676_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128676_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128676_total_end -
                 futhark_mc_segmap_parloop_128676_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128676_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128676_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128676_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128674_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128674_end -
                 futhark_mc_segmap_task_128674_start;
        
        ctx->futhark_mc_segmap_task_128674_runs[tid]++;
        ctx->futhark_mc_segmap_task_128674_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128674_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128682 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_119442;
    char *free_mem_119606;
    char *free_mem_119610;
    char *free_mem_120357;
    char *free_mem_120361;
    int64_t free_bytes_120653;
    char *free_mem_120727;
    char *free_mem_120730;
};
struct futhark_mc_task_128688 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_127053;
    float free_x_127054;
    float free_defunc_0_f_res_127057;
    char *free_mem_127058;
    char *free_mem_127059;
};
struct futhark_mc_segmap_parloop_struct_128690 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_window_112523;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_119442;
    char *free_mem_120361;
    int64_t free_x_127053;
    float free_x_127054;
    float free_defunc_0_f_res_127057;
    char *free_mem_127058;
    char *free_mem_127059;
};
static int futhark_mc_segmap_parloop_128691(void *args, int64_t start,
                                            int64_t end, int flat_tid_118050,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128690
    *futhark_mc_segmap_parloop_struct_128690 =
    (struct futhark_mc_segmap_parloop_struct_128690 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128690->ctx;
    uint64_t futhark_mc_segmap_parloop_128691_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128691_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128690->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128690->free_t_window_112523;
    int64_t gtid_118045 =
            futhark_mc_segmap_parloop_struct_128690->free_gtid_118045;
    int64_t x_118168 = futhark_mc_segmap_parloop_struct_128690->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128690->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128690->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_127053 = futhark_mc_segmap_parloop_struct_128690->free_x_127053;
    float x_127054 = futhark_mc_segmap_parloop_struct_128690->free_x_127054;
    float defunc_0_f_res_127057 =
          futhark_mc_segmap_parloop_struct_128690->free_defunc_0_f_res_127057;
    struct memblock mem_127058 = {.desc ="mem_127058", .mem =
                                  futhark_mc_segmap_parloop_struct_128690->free_mem_127058,
                                  .size =0, .references =NULL};
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_segmap_parloop_struct_128690->free_mem_127059,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127428 = start;
    
    for (; iter_127428 < end; iter_127428++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127434 = t_window_112523;
        int64_t gtid_118051 = iter_127428;
        int64_t remnant_127435 = iter_127428 - gtid_118051;
        bool cond_127362 = sle64(x_118168, gtid_118051);
        float defunc_0_f_res_127363;
        
        if (cond_127362) {
            defunc_0_f_res_127363 = 0.0F;
        } else {
            int64_t i_127429 = add64(gtid_118051, x_127053);
            float x_127430 = ((float *) mem_119442.mem)[gtid_118045 * n_112520 +
                                                        i_127429];
            float defunc_0_f_res_f_res_127431 = 1.0F + x_127430;
            
            defunc_0_f_res_127363 = defunc_0_f_res_f_res_127431;
        }
        
        float defunc_0_f_res_127367;
        
        if (cond_127362) {
            defunc_0_f_res_127367 = 0.0F;
        } else {
            int64_t i_127432 = add64(gtid_118051, x_127053);
            float x_127433 = ((float *) mem_120361.mem)[gtid_118045 * n_112520 +
                                                        i_127432];
            
            defunc_0_f_res_127367 = x_127433;
        }
        
        float x_j_127370 = defunc_0_f_res_127363 - defunc_0_f_res_127057;
        float abs_res_127371 = (float) fabs(x_j_127370);
        float tmp1_127372 = abs_res_127371 / x_127054;
        float x_127373 = tmp1_127372 * tmp1_127372;
        float y_127374 = tmp1_127372 * x_127373;
        float tmp2_127375 = 1.0F - y_127374;
        float x_127376 = tmp2_127375 * tmp2_127375;
        float tmp3_127377 = tmp2_127375 * x_127376;
        float tmp4_127378 = defunc_0_f_res_127367 * tmp3_127377;
        
        ((float *) mem_127058.mem)[gtid_118051] = x_j_127370;
        ((float *) mem_127059.mem)[gtid_118051] = tmp4_127378;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128691_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128691_end -
                 futhark_mc_segmap_parloop_128691_start;
        
        ctx->futhark_mc_segmap_parloop_128691_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128691_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128691_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128689(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118050 = tid;
    int num_tasks_127427 = info.nsubtasks;
    struct futhark_mc_task_128688 *futhark_mc_task_128688 =
                                  (struct futhark_mc_task_128688 *) args;
    struct futhark_context *ctx = futhark_mc_task_128688->ctx;
    uint64_t futhark_mc_segmap_task_128689_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128689_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128688->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128688->free_t_window_112523;
    int64_t gtid_118045 = futhark_mc_task_128688->free_gtid_118045;
    int64_t x_118168 = futhark_mc_task_128688->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128688->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128688->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t x_127053 = futhark_mc_task_128688->free_x_127053;
    float x_127054 = futhark_mc_task_128688->free_x_127054;
    float defunc_0_f_res_127057 =
          futhark_mc_task_128688->free_defunc_0_f_res_127057;
    struct memblock mem_127058 = {.desc ="mem_127058", .mem =
                                  futhark_mc_task_128688->free_mem_127058,
                                  .size =0, .references =NULL};
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_task_128688->free_mem_127059,
                                  .size =0, .references =NULL};
    int64_t iter_127428;
    struct futhark_mc_segmap_parloop_struct_128690
    futhark_mc_segmap_parloop_struct_128690;
    
    futhark_mc_segmap_parloop_struct_128690.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128690.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128690.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128690.free_gtid_118045 = gtid_118045;
    futhark_mc_segmap_parloop_struct_128690.free_x_118168 = x_118168;
    futhark_mc_segmap_parloop_struct_128690.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128690.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128690.free_x_127053 = x_127053;
    futhark_mc_segmap_parloop_struct_128690.free_x_127054 = x_127054;
    futhark_mc_segmap_parloop_struct_128690.free_defunc_0_f_res_127057 =
        defunc_0_f_res_127057;
    futhark_mc_segmap_parloop_struct_128690.free_mem_127058 = mem_127058.mem;
    futhark_mc_segmap_parloop_struct_128690.free_mem_127059 = mem_127059.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128691_task;
    
    futhark_mc_segmap_parloop_128691_task.name =
        "futhark_mc_segmap_parloop_128691";
    futhark_mc_segmap_parloop_128691_task.fn = futhark_mc_segmap_parloop_128691;
    futhark_mc_segmap_parloop_128691_task.args =
        &futhark_mc_segmap_parloop_struct_128690;
    futhark_mc_segmap_parloop_128691_task.iterations = iterations;
    futhark_mc_segmap_parloop_128691_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128691_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128691_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128691_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128691_task);
    
    if (futhark_mc_segmap_parloop_128691_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128691_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128691_total_end -
                 futhark_mc_segmap_parloop_128691_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128691_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128691_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128691_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128689_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128689_end -
                 futhark_mc_segmap_task_128689_start;
        
        ctx->futhark_mc_segmap_task_128689_runs[tid]++;
        ctx->futhark_mc_segmap_task_128689_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128689_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128692 {
    struct futhark_context *ctx;
    char *free_mem_127058;
    char *free_mem_127059;
    float *retval_defunc_2_reduce_res_127081;
    float *retval_defunc_2_reduce_res_127082;
    float *retval_defunc_2_reduce_res_127083;
    float *retval_defunc_2_reduce_res_127084;
    float *retval_defunc_2_reduce_res_127085;
    char *retval_mem_127079;
    char *retval_mem_127080;
};
struct futhark_mc_segred_stage_1_parloop_struct_128699 {
    struct futhark_context *ctx;
    char *free_mem_127058;
    char *free_mem_127059;
    char *free_mem_127079;
    char *free_mem_127080;
    char *free_reduce_stage_1_tid_res_arr_mem_127437;
    char *free_reduce_stage_1_tid_res_arr_mem_127439;
    char *free_reduce_stage_1_tid_res_arr_mem_127441;
    char *free_reduce_stage_1_tid_res_arr_mem_127443;
    char *free_reduce_stage_1_tid_res_arr_mem_127445;
};
static int futhark_mc_segred_stage_1_parloop_128700(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118052,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128699
    *futhark_mc_segred_stage_1_parloop_struct_128699 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128699 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128699->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128700_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128700_start = get_wall_time();
    
    struct memblock mem_127058 = {.desc ="mem_127058", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128699->free_mem_127058,
                                  .size =0, .references =NULL};
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128699->free_mem_127059,
                                  .size =0, .references =NULL};
    struct memblock mem_127079 = {.desc ="mem_127079", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128699->free_mem_127079,
                                  .size =0, .references =NULL};
    struct memblock mem_127080 = {.desc ="mem_127080", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128699->free_mem_127080,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127437 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127437",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128699->free_reduce_stage_1_tid_res_arr_mem_127437,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127439 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127439",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128699->free_reduce_stage_1_tid_res_arr_mem_127439,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127441 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127441",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128699->free_reduce_stage_1_tid_res_arr_mem_127441,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127443 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127443",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128699->free_reduce_stage_1_tid_res_arr_mem_127443,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127445 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127445",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128699->free_reduce_stage_1_tid_res_arr_mem_127445,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127447 = start;
    float x_127379;
    float x_127380;
    float x_127382;
    float x_127383;
    float x_127385;
    float x_127386;
    float x_127388;
    float x_127389;
    float x_127391;
    float x_127392;
    float local_acc_127448 = 0.0F;
    float local_acc_127449 = 0.0F;
    float local_acc_127450 = 0.0F;
    float local_acc_127451 = 0.0F;
    float local_acc_127452 = 0.0F;
    
    for (; iter_127447 < end; iter_127447++) {
        int64_t gtid_118053 = iter_127447;
        float x_127394 = ((float *) mem_127058.mem)[gtid_118053];
        float x_127395 = ((float *) mem_127059.mem)[gtid_118053];
        float defunc_1_f_res_127396 = x_127394 * x_127395;
        float defunc_1_f_res_127397 = x_127394 * defunc_1_f_res_127396;
        float defunc_1_f_res_127398 = x_127394 * defunc_1_f_res_127397;
        float defunc_1_f_res_127399 = x_127394 * defunc_1_f_res_127398;
        
        // save map-out results
        {
            ((float *) mem_127079.mem)[gtid_118053] = defunc_1_f_res_127397;
            ((float *) mem_127080.mem)[gtid_118053] = defunc_1_f_res_127396;
        }
        // Load accum params
        {
            x_127379 = local_acc_127448;
        }
        // Load next params
        {
            x_127380 = x_127395;
        }
        // Red body
        {
            float defunc_1_op_res_127381 = x_127379 + x_127380;
            
            local_acc_127448 = defunc_1_op_res_127381;
        }
        // Load accum params
        {
            x_127382 = local_acc_127449;
        }
        // Load next params
        {
            x_127383 = defunc_1_f_res_127396;
        }
        // Red body
        {
            float defunc_1_op_res_127384 = x_127382 + x_127383;
            
            local_acc_127449 = defunc_1_op_res_127384;
        }
        // Load accum params
        {
            x_127385 = local_acc_127450;
        }
        // Load next params
        {
            x_127386 = defunc_1_f_res_127397;
        }
        // Red body
        {
            float defunc_1_op_res_127387 = x_127385 + x_127386;
            
            local_acc_127450 = defunc_1_op_res_127387;
        }
        // Load accum params
        {
            x_127388 = local_acc_127451;
        }
        // Load next params
        {
            x_127389 = defunc_1_f_res_127398;
        }
        // Red body
        {
            float defunc_1_op_res_127390 = x_127388 + x_127389;
            
            local_acc_127451 = defunc_1_op_res_127390;
        }
        // Load accum params
        {
            x_127391 = local_acc_127452;
        }
        // Load next params
        {
            x_127392 = defunc_1_f_res_127399;
        }
        // Red body
        {
            float defunc_1_op_res_127393 = x_127391 + x_127392;
            
            local_acc_127452 = defunc_1_op_res_127393;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127437.mem)[flat_tid_118052] =
        local_acc_127448;
    ((float *) reduce_stage_1_tid_res_arr_mem_127439.mem)[flat_tid_118052] =
        local_acc_127449;
    ((float *) reduce_stage_1_tid_res_arr_mem_127441.mem)[flat_tid_118052] =
        local_acc_127450;
    ((float *) reduce_stage_1_tid_res_arr_mem_127443.mem)[flat_tid_118052] =
        local_acc_127451;
    ((float *) reduce_stage_1_tid_res_arr_mem_127445.mem)[flat_tid_118052] =
        local_acc_127452;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128700_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128700_end -
                 futhark_mc_segred_stage_1_parloop_128700_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128700_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128700_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128700_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128693(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118052 = tid;
    int num_tasks_127436 = info.nsubtasks;
    struct futhark_mc_task_128692 *futhark_mc_task_128692 =
                                  (struct futhark_mc_task_128692 *) args;
    struct futhark_context *ctx = futhark_mc_task_128692->ctx;
    uint64_t futhark_mc_segred_task_128693_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128693_start = get_wall_time();
    
    struct memblock mem_127058 = {.desc ="mem_127058", .mem =
                                  futhark_mc_task_128692->free_mem_127058,
                                  .size =0, .references =NULL};
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_task_128692->free_mem_127059,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_127081 =
          *futhark_mc_task_128692->retval_defunc_2_reduce_res_127081;
    float defunc_2_reduce_res_127082 =
          *futhark_mc_task_128692->retval_defunc_2_reduce_res_127082;
    float defunc_2_reduce_res_127083 =
          *futhark_mc_task_128692->retval_defunc_2_reduce_res_127083;
    float defunc_2_reduce_res_127084 =
          *futhark_mc_task_128692->retval_defunc_2_reduce_res_127084;
    float defunc_2_reduce_res_127085 =
          *futhark_mc_task_128692->retval_defunc_2_reduce_res_127085;
    struct memblock mem_127079 = {.desc ="mem_127079", .mem =
                                  futhark_mc_task_128692->retval_mem_127079,
                                  .size =0, .references =NULL};
    struct memblock mem_127080 = {.desc ="mem_127080", .mem =
                                  futhark_mc_task_128692->retval_mem_127080,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127437_cached_sizze_128694 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127437 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127439_cached_sizze_128695 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127439 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127441_cached_sizze_128696 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127441 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127443_cached_sizze_128697 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127443 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127445_cached_sizze_128698 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127445 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127437_cached_sizze_128694 <
        (size_t) ((int64_t) 4 * num_tasks_127436)) {
        reduce_stage_1_tid_res_arr_mem_127437 =
            realloc(reduce_stage_1_tid_res_arr_mem_127437, (int64_t) 4 *
                    num_tasks_127436);
        reduce_stage_1_tid_res_arr_mem_127437_cached_sizze_128694 =
            (int64_t) 4 * num_tasks_127436;
    }
    if (reduce_stage_1_tid_res_arr_mem_127439_cached_sizze_128695 <
        (size_t) ((int64_t) 4 * num_tasks_127436)) {
        reduce_stage_1_tid_res_arr_mem_127439 =
            realloc(reduce_stage_1_tid_res_arr_mem_127439, (int64_t) 4 *
                    num_tasks_127436);
        reduce_stage_1_tid_res_arr_mem_127439_cached_sizze_128695 =
            (int64_t) 4 * num_tasks_127436;
    }
    if (reduce_stage_1_tid_res_arr_mem_127441_cached_sizze_128696 <
        (size_t) ((int64_t) 4 * num_tasks_127436)) {
        reduce_stage_1_tid_res_arr_mem_127441 =
            realloc(reduce_stage_1_tid_res_arr_mem_127441, (int64_t) 4 *
                    num_tasks_127436);
        reduce_stage_1_tid_res_arr_mem_127441_cached_sizze_128696 =
            (int64_t) 4 * num_tasks_127436;
    }
    if (reduce_stage_1_tid_res_arr_mem_127443_cached_sizze_128697 <
        (size_t) ((int64_t) 4 * num_tasks_127436)) {
        reduce_stage_1_tid_res_arr_mem_127443 =
            realloc(reduce_stage_1_tid_res_arr_mem_127443, (int64_t) 4 *
                    num_tasks_127436);
        reduce_stage_1_tid_res_arr_mem_127443_cached_sizze_128697 =
            (int64_t) 4 * num_tasks_127436;
    }
    if (reduce_stage_1_tid_res_arr_mem_127445_cached_sizze_128698 <
        (size_t) ((int64_t) 4 * num_tasks_127436)) {
        reduce_stage_1_tid_res_arr_mem_127445 =
            realloc(reduce_stage_1_tid_res_arr_mem_127445, (int64_t) 4 *
                    num_tasks_127436);
        reduce_stage_1_tid_res_arr_mem_127445_cached_sizze_128698 =
            (int64_t) 4 * num_tasks_127436;
    }
    
    int64_t iter_127447;
    struct futhark_mc_segred_stage_1_parloop_struct_128699
    futhark_mc_segred_stage_1_parloop_struct_128699;
    
    futhark_mc_segred_stage_1_parloop_struct_128699.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_mem_127058 =
        mem_127058.mem;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_mem_127059 =
        mem_127059.mem;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_mem_127079 =
        mem_127079.mem;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_mem_127080 =
        mem_127080.mem;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_reduce_stage_1_tid_res_arr_mem_127437 =
        reduce_stage_1_tid_res_arr_mem_127437;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_reduce_stage_1_tid_res_arr_mem_127439 =
        reduce_stage_1_tid_res_arr_mem_127439;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_reduce_stage_1_tid_res_arr_mem_127441 =
        reduce_stage_1_tid_res_arr_mem_127441;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_reduce_stage_1_tid_res_arr_mem_127443 =
        reduce_stage_1_tid_res_arr_mem_127443;
    futhark_mc_segred_stage_1_parloop_struct_128699.free_reduce_stage_1_tid_res_arr_mem_127445 =
        reduce_stage_1_tid_res_arr_mem_127445;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128700_task;
    
    futhark_mc_segred_stage_1_parloop_128700_task.name =
        "futhark_mc_segred_stage_1_parloop_128700";
    futhark_mc_segred_stage_1_parloop_128700_task.fn =
        futhark_mc_segred_stage_1_parloop_128700;
    futhark_mc_segred_stage_1_parloop_128700_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128699;
    futhark_mc_segred_stage_1_parloop_128700_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128700_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128700_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128700_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128700_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128700_task);
    
    if (futhark_mc_segred_stage_1_parloop_128700_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128700_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128700_total_end -
                 futhark_mc_segred_stage_1_parloop_128700_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128700_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128700_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128700_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127081 = 0.0F;
        defunc_2_reduce_res_127082 = 0.0F;
        defunc_2_reduce_res_127083 = 0.0F;
        defunc_2_reduce_res_127084 = 0.0F;
        defunc_2_reduce_res_127085 = 0.0F;
    }
    
    float x_127453;
    float x_127454;
    float x_127456;
    float x_127457;
    float x_127459;
    float x_127460;
    float x_127462;
    float x_127463;
    float x_127465;
    float x_127466;
    
    for (int32_t i_127468 = 0; i_127468 < num_tasks_127436; i_127468++) {
        flat_tid_118052 = i_127468;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127453 = defunc_2_reduce_res_127081;
            }
            // load next params
            {
                x_127454 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127437)[flat_tid_118052];
            }
            // red body
            {
                float defunc_1_op_res_127455 = x_127453 + x_127454;
                
                defunc_2_reduce_res_127081 = defunc_1_op_res_127455;
            }
            // load acc params
            {
                x_127456 = defunc_2_reduce_res_127082;
            }
            // load next params
            {
                x_127457 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127439)[flat_tid_118052];
            }
            // red body
            {
                float defunc_1_op_res_127458 = x_127456 + x_127457;
                
                defunc_2_reduce_res_127082 = defunc_1_op_res_127458;
            }
            // load acc params
            {
                x_127459 = defunc_2_reduce_res_127083;
            }
            // load next params
            {
                x_127460 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127441)[flat_tid_118052];
            }
            // red body
            {
                float defunc_1_op_res_127461 = x_127459 + x_127460;
                
                defunc_2_reduce_res_127083 = defunc_1_op_res_127461;
            }
            // load acc params
            {
                x_127462 = defunc_2_reduce_res_127084;
            }
            // load next params
            {
                x_127463 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127443)[flat_tid_118052];
            }
            // red body
            {
                float defunc_1_op_res_127464 = x_127462 + x_127463;
                
                defunc_2_reduce_res_127084 = defunc_1_op_res_127464;
            }
            // load acc params
            {
                x_127465 = defunc_2_reduce_res_127085;
            }
            // load next params
            {
                x_127466 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127445)[flat_tid_118052];
            }
            // red body
            {
                float defunc_1_op_res_127467 = x_127465 + x_127466;
                
                defunc_2_reduce_res_127085 = defunc_1_op_res_127467;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127437);
    free(reduce_stage_1_tid_res_arr_mem_127439);
    free(reduce_stage_1_tid_res_arr_mem_127441);
    free(reduce_stage_1_tid_res_arr_mem_127443);
    free(reduce_stage_1_tid_res_arr_mem_127445);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128693_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128693_end -
                 futhark_mc_segred_task_128693_start;
        
        ctx->futhark_mc_segred_task_128693_runs[tid]++;
        ctx->futhark_mc_segred_task_128693_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128693_iter[tid] += iterations;
    }
    *futhark_mc_task_128692->retval_defunc_2_reduce_res_127081 =
        defunc_2_reduce_res_127081;
    *futhark_mc_task_128692->retval_defunc_2_reduce_res_127082 =
        defunc_2_reduce_res_127082;
    *futhark_mc_task_128692->retval_defunc_2_reduce_res_127083 =
        defunc_2_reduce_res_127083;
    *futhark_mc_task_128692->retval_defunc_2_reduce_res_127084 =
        defunc_2_reduce_res_127084;
    *futhark_mc_task_128692->retval_defunc_2_reduce_res_127085 =
        defunc_2_reduce_res_127085;
    futhark_mc_task_128692->retval_mem_127079 = mem_127079.mem;
    futhark_mc_task_128692->retval_mem_127080 = mem_127080.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128701 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_120357;
    int64_t free_x_127053;
    char *free_mem_127059;
    char *free_mem_127079;
    char *free_mem_127080;
    float free_a12_127129;
    float free_b12_127130;
    float free_c12_127131;
    float free_b2_127132;
    float free_c2_127133;
    float *retval_defunc_2_reduce_res_127134;
    float *retval_defunc_2_reduce_res_127135;
};
struct futhark_mc_segred_stage_1_parloop_struct_128705 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118045;
    int64_t free_x_118168;
    char *free_mem_120357;
    int64_t free_x_127053;
    char *free_mem_127059;
    char *free_mem_127079;
    char *free_mem_127080;
    float free_a12_127129;
    float free_b12_127130;
    float free_c12_127131;
    float free_b2_127132;
    float free_c2_127133;
    char *free_reduce_stage_1_tid_res_arr_mem_127470;
    char *free_reduce_stage_1_tid_res_arr_mem_127472;
};
static int futhark_mc_segred_stage_1_parloop_128706(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118054,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128705
    *futhark_mc_segred_stage_1_parloop_struct_128705 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128705 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128705->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128706_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128706_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128705->free_n_112520;
    int64_t gtid_118045 =
            futhark_mc_segred_stage_1_parloop_struct_128705->free_gtid_118045;
    int64_t x_118168 =
            futhark_mc_segred_stage_1_parloop_struct_128705->free_x_118168;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128705->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_127053 =
            futhark_mc_segred_stage_1_parloop_struct_128705->free_x_127053;
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128705->free_mem_127059,
                                  .size =0, .references =NULL};
    struct memblock mem_127079 = {.desc ="mem_127079", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128705->free_mem_127079,
                                  .size =0, .references =NULL};
    struct memblock mem_127080 = {.desc ="mem_127080", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128705->free_mem_127080,
                                  .size =0, .references =NULL};
    float a12_127129 =
          futhark_mc_segred_stage_1_parloop_struct_128705->free_a12_127129;
    float b12_127130 =
          futhark_mc_segred_stage_1_parloop_struct_128705->free_b12_127130;
    float c12_127131 =
          futhark_mc_segred_stage_1_parloop_struct_128705->free_c12_127131;
    float b2_127132 =
          futhark_mc_segred_stage_1_parloop_struct_128705->free_b2_127132;
    float c2_127133 =
          futhark_mc_segred_stage_1_parloop_struct_128705->free_c2_127133;
    struct memblock reduce_stage_1_tid_res_arr_mem_127470 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127470",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128705->free_reduce_stage_1_tid_res_arr_mem_127470,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127472 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127472",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128705->free_reduce_stage_1_tid_res_arr_mem_127472,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127474 = start;
    float x_127400;
    float x_127401;
    float x_127403;
    float x_127404;
    float local_acc_127475 = 0.0F;
    float local_acc_127476 = 0.0F;
    
    for (; iter_127474 < end; iter_127474++) {
        int64_t gtid_118055 = iter_127474;
        float x_127406 = ((float *) mem_127059.mem)[gtid_118055];
        float x_127407 = ((float *) mem_127080.mem)[gtid_118055];
        float x_127408 = ((float *) mem_127079.mem)[gtid_118055];
        bool cond_127409 = sle64(x_118168, gtid_118055);
        float defunc_0_f_res_127410;
        
        if (cond_127409) {
            defunc_0_f_res_127410 = 0.0F;
        } else {
            int64_t i_127411 = add64(gtid_118055, x_127053);
            float x_127412 = ((float *) mem_120357.mem)[gtid_118045 * n_112520 +
                                                        i_127411];
            
            defunc_0_f_res_127410 = x_127412;
        }
        
        float x_127413 = a12_127129 * x_127406;
        float y_127414 = b12_127130 * x_127407;
        float x_127415 = x_127413 + y_127414;
        float y_127416 = c12_127131 * x_127408;
        float x_127417 = x_127415 + y_127416;
        float defunc_9_fit_fun_res_127418 = defunc_0_f_res_127410 * x_127417;
        float x_127419 = b12_127130 * x_127406;
        float y_127420 = b2_127132 * x_127407;
        float x_127421 = x_127419 + y_127420;
        float y_127422 = c2_127133 * x_127408;
        float x_127423 = x_127421 + y_127422;
        float defunc_9_slope_fun_res_127424 = defunc_0_f_res_127410 * x_127423;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127400 = local_acc_127475;
        }
        // Load next params
        {
            x_127401 = defunc_9_fit_fun_res_127418;
        }
        // Red body
        {
            float defunc_1_op_res_127402 = x_127400 + x_127401;
            
            local_acc_127475 = defunc_1_op_res_127402;
        }
        // Load accum params
        {
            x_127403 = local_acc_127476;
        }
        // Load next params
        {
            x_127404 = defunc_9_slope_fun_res_127424;
        }
        // Red body
        {
            float defunc_1_op_res_127405 = x_127403 + x_127404;
            
            local_acc_127476 = defunc_1_op_res_127405;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127470.mem)[flat_tid_118054] =
        local_acc_127475;
    ((float *) reduce_stage_1_tid_res_arr_mem_127472.mem)[flat_tid_118054] =
        local_acc_127476;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128706_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128706_end -
                 futhark_mc_segred_stage_1_parloop_128706_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128706_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128706_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128706_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128702(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118054 = tid;
    int num_tasks_127469 = info.nsubtasks;
    struct futhark_mc_task_128701 *futhark_mc_task_128701 =
                                  (struct futhark_mc_task_128701 *) args;
    struct futhark_context *ctx = futhark_mc_task_128701->ctx;
    uint64_t futhark_mc_segred_task_128702_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128702_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128701->free_n_112520;
    int64_t gtid_118045 = futhark_mc_task_128701->free_gtid_118045;
    int64_t x_118168 = futhark_mc_task_128701->free_x_118168;
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128701->free_mem_120357,
                                  .size =0, .references =NULL};
    int64_t x_127053 = futhark_mc_task_128701->free_x_127053;
    struct memblock mem_127059 = {.desc ="mem_127059", .mem =
                                  futhark_mc_task_128701->free_mem_127059,
                                  .size =0, .references =NULL};
    struct memblock mem_127079 = {.desc ="mem_127079", .mem =
                                  futhark_mc_task_128701->free_mem_127079,
                                  .size =0, .references =NULL};
    struct memblock mem_127080 = {.desc ="mem_127080", .mem =
                                  futhark_mc_task_128701->free_mem_127080,
                                  .size =0, .references =NULL};
    float a12_127129 = futhark_mc_task_128701->free_a12_127129;
    float b12_127130 = futhark_mc_task_128701->free_b12_127130;
    float c12_127131 = futhark_mc_task_128701->free_c12_127131;
    float b2_127132 = futhark_mc_task_128701->free_b2_127132;
    float c2_127133 = futhark_mc_task_128701->free_c2_127133;
    float defunc_2_reduce_res_127134 =
          *futhark_mc_task_128701->retval_defunc_2_reduce_res_127134;
    float defunc_2_reduce_res_127135 =
          *futhark_mc_task_128701->retval_defunc_2_reduce_res_127135;
    size_t reduce_stage_1_tid_res_arr_mem_127470_cached_sizze_128703 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127470 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127472_cached_sizze_128704 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127472 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127470_cached_sizze_128703 <
        (size_t) ((int64_t) 4 * num_tasks_127469)) {
        reduce_stage_1_tid_res_arr_mem_127470 =
            realloc(reduce_stage_1_tid_res_arr_mem_127470, (int64_t) 4 *
                    num_tasks_127469);
        reduce_stage_1_tid_res_arr_mem_127470_cached_sizze_128703 =
            (int64_t) 4 * num_tasks_127469;
    }
    if (reduce_stage_1_tid_res_arr_mem_127472_cached_sizze_128704 <
        (size_t) ((int64_t) 4 * num_tasks_127469)) {
        reduce_stage_1_tid_res_arr_mem_127472 =
            realloc(reduce_stage_1_tid_res_arr_mem_127472, (int64_t) 4 *
                    num_tasks_127469);
        reduce_stage_1_tid_res_arr_mem_127472_cached_sizze_128704 =
            (int64_t) 4 * num_tasks_127469;
    }
    
    int64_t iter_127474;
    struct futhark_mc_segred_stage_1_parloop_struct_128705
    futhark_mc_segred_stage_1_parloop_struct_128705;
    
    futhark_mc_segred_stage_1_parloop_struct_128705.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_gtid_118045 =
        gtid_118045;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_x_118168 = x_118168;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_mem_120357 =
        mem_120357.mem;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_x_127053 = x_127053;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_mem_127059 =
        mem_127059.mem;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_mem_127079 =
        mem_127079.mem;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_mem_127080 =
        mem_127080.mem;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_a12_127129 =
        a12_127129;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_b12_127130 =
        b12_127130;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_c12_127131 =
        c12_127131;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_b2_127132 = b2_127132;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_c2_127133 = c2_127133;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_reduce_stage_1_tid_res_arr_mem_127470 =
        reduce_stage_1_tid_res_arr_mem_127470;
    futhark_mc_segred_stage_1_parloop_struct_128705.free_reduce_stage_1_tid_res_arr_mem_127472 =
        reduce_stage_1_tid_res_arr_mem_127472;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128706_task;
    
    futhark_mc_segred_stage_1_parloop_128706_task.name =
        "futhark_mc_segred_stage_1_parloop_128706";
    futhark_mc_segred_stage_1_parloop_128706_task.fn =
        futhark_mc_segred_stage_1_parloop_128706;
    futhark_mc_segred_stage_1_parloop_128706_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128705;
    futhark_mc_segred_stage_1_parloop_128706_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128706_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128706_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128706_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128706_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128706_task);
    
    if (futhark_mc_segred_stage_1_parloop_128706_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128706_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128706_total_end -
                 futhark_mc_segred_stage_1_parloop_128706_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128706_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128706_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128706_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127134 = 0.0F;
        defunc_2_reduce_res_127135 = 0.0F;
    }
    
    float x_127477;
    float x_127478;
    float x_127480;
    float x_127481;
    
    for (int32_t i_127483 = 0; i_127483 < num_tasks_127469; i_127483++) {
        flat_tid_118054 = i_127483;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127477 = defunc_2_reduce_res_127134;
            }
            // load next params
            {
                x_127478 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127470)[flat_tid_118054];
            }
            // red body
            {
                float defunc_1_op_res_127479 = x_127477 + x_127478;
                
                defunc_2_reduce_res_127134 = defunc_1_op_res_127479;
            }
            // load acc params
            {
                x_127480 = defunc_2_reduce_res_127135;
            }
            // load next params
            {
                x_127481 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127472)[flat_tid_118054];
            }
            // red body
            {
                float defunc_1_op_res_127482 = x_127480 + x_127481;
                
                defunc_2_reduce_res_127135 = defunc_1_op_res_127482;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127470);
    free(reduce_stage_1_tid_res_arr_mem_127472);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128702_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128702_end -
                 futhark_mc_segred_task_128702_start;
        
        ctx->futhark_mc_segred_task_128702_runs[tid]++;
        ctx->futhark_mc_segred_task_128702_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128702_iter[tid] += iterations;
    }
    *futhark_mc_task_128701->retval_defunc_2_reduce_res_127134 =
        defunc_2_reduce_res_127134;
    *futhark_mc_task_128701->retval_defunc_2_reduce_res_127135 =
        defunc_2_reduce_res_127135;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128683(void *args, int64_t start,
                                            int64_t end, int flat_tid_118048,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128682
    *futhark_mc_segmap_parloop_struct_128682 =
    (struct futhark_mc_segmap_parloop_struct_128682 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128682->ctx;
    uint64_t futhark_mc_segmap_parloop_128683_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128683_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128682->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128682->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128682->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128682->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128682->free_i_112596;
    int64_t gtid_118045 =
            futhark_mc_segmap_parloop_struct_128682->free_gtid_118045;
    int64_t x_118168 = futhark_mc_segmap_parloop_struct_128682->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 =
            futhark_mc_segmap_parloop_struct_128682->free_bytes_120653;
    struct memblock mem_120727 = {.desc ="mem_120727", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_120727,
                                  .size =0, .references =NULL};
    struct memblock mem_120730 = {.desc ="mem_120730", .mem =
                                  futhark_mc_segmap_parloop_struct_128682->free_mem_120730,
                                  .size =0, .references =NULL};
    size_t mem_127058_cached_sizze_128684 = 0;
    char *mem_127058 = NULL;
    size_t mem_127059_cached_sizze_128685 = 0;
    char *mem_127059 = NULL;
    size_t mem_127079_cached_sizze_128686 = 0;
    char *mem_127079 = NULL;
    size_t mem_127080_cached_sizze_128687 = 0;
    char *mem_127080 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127361 = start;
    
    if (mem_127058_cached_sizze_128684 < (size_t) bytes_120653) {
        mem_127058 = realloc(mem_127058, bytes_120653);
        mem_127058_cached_sizze_128684 = bytes_120653;
    }
    if (mem_127059_cached_sizze_128685 < (size_t) bytes_120653) {
        mem_127059 = realloc(mem_127059, bytes_120653);
        mem_127059_cached_sizze_128685 = bytes_120653;
    }
    if (mem_127079_cached_sizze_128686 < (size_t) bytes_120653) {
        mem_127079 = realloc(mem_127079, bytes_120653);
        mem_127079_cached_sizze_128686 = bytes_120653;
    }
    if (mem_127080_cached_sizze_128687 < (size_t) bytes_120653) {
        mem_127080 = realloc(mem_127080, bytes_120653);
        mem_127080_cached_sizze_128687 = bytes_120653;
    }
    for (; iter_127361 < end; iter_127361++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127425 = t_n_m_112577;
        int64_t gtid_118049 = iter_127361;
        int64_t remnant_127426 = iter_127361 - gtid_118049;
        int64_t x_127053 = ((int64_t *) mem_119606.mem)[gtid_118045 *
                                                        t_n_m_112577 +
                                                        gtid_118049];
        float x_127054 = ((float *) mem_119610.mem)[gtid_118045 * t_n_m_112577 +
                                                    gtid_118049];
        int64_t min_arg_127055 = mul64(t_jump_112527, gtid_118049);
        int64_t min_res_127056 = smin64(i_112596, min_arg_127055);
        float defunc_0_f_res_127057 = sitofp_i64_f32(min_res_127056);
        int64_t flat_tid_118050 = (int64_t) 0;
        int32_t num_tasks_127427;
        struct futhark_mc_task_128688 futhark_mc_task_128688;
        
        futhark_mc_task_128688.ctx = ctx;
        futhark_mc_task_128688.free_n_112520 = n_112520;
        futhark_mc_task_128688.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128688.free_gtid_118045 = gtid_118045;
        futhark_mc_task_128688.free_x_118168 = x_118168;
        futhark_mc_task_128688.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128688.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128688.free_x_127053 = x_127053;
        futhark_mc_task_128688.free_x_127054 = x_127054;
        futhark_mc_task_128688.free_defunc_0_f_res_127057 =
            defunc_0_f_res_127057;
        futhark_mc_task_128688.free_mem_127058 = mem_127058;
        futhark_mc_task_128688.free_mem_127059 = mem_127059;
        
        struct scheduler_segop futhark_mc_task_128688_task;
        
        futhark_mc_task_128688_task.args = &futhark_mc_task_128688;
        futhark_mc_task_128688_task.top_level_fn =
            futhark_mc_segmap_task_128689;
        futhark_mc_task_128688_task.name = "futhark_mc_segmap_task_128689";
        futhark_mc_task_128688_task.iterations = t_window_112523;
        futhark_mc_task_128688_task.task_time =
            &ctx->futhark_mc_segmap_task_128689_total_time;
        futhark_mc_task_128688_task.task_iter =
            &ctx->futhark_mc_segmap_task_128689_total_iter;
        futhark_mc_task_128688_task.sched = STATIC;
        futhark_mc_task_128688_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128689_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128688_task);
        
        if (futhark_mc_segmap_task_128689_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_127081;
        float defunc_2_reduce_res_127082;
        float defunc_2_reduce_res_127083;
        float defunc_2_reduce_res_127084;
        float defunc_2_reduce_res_127085;
        int64_t flat_tid_118052 = (int64_t) 0;
        int32_t num_tasks_127436;
        struct futhark_mc_task_128692 futhark_mc_task_128692;
        
        futhark_mc_task_128692.ctx = ctx;
        futhark_mc_task_128692.free_mem_127058 = mem_127058;
        futhark_mc_task_128692.free_mem_127059 = mem_127059;
        futhark_mc_task_128692.retval_defunc_2_reduce_res_127081 =
            &defunc_2_reduce_res_127081;
        futhark_mc_task_128692.retval_defunc_2_reduce_res_127082 =
            &defunc_2_reduce_res_127082;
        futhark_mc_task_128692.retval_defunc_2_reduce_res_127083 =
            &defunc_2_reduce_res_127083;
        futhark_mc_task_128692.retval_defunc_2_reduce_res_127084 =
            &defunc_2_reduce_res_127084;
        futhark_mc_task_128692.retval_defunc_2_reduce_res_127085 =
            &defunc_2_reduce_res_127085;
        futhark_mc_task_128692.retval_mem_127079 = mem_127079;
        futhark_mc_task_128692.retval_mem_127080 = mem_127080;
        
        struct scheduler_segop futhark_mc_task_128692_task;
        
        futhark_mc_task_128692_task.args = &futhark_mc_task_128692;
        futhark_mc_task_128692_task.top_level_fn =
            futhark_mc_segred_task_128693;
        futhark_mc_task_128692_task.name = "futhark_mc_segred_task_128693";
        futhark_mc_task_128692_task.iterations = t_window_112523;
        futhark_mc_task_128692_task.task_time =
            &ctx->futhark_mc_segred_task_128693_total_time;
        futhark_mc_task_128692_task.task_iter =
            &ctx->futhark_mc_segred_task_128693_total_iter;
        futhark_mc_task_128692_task.sched = STATIC;
        futhark_mc_task_128692_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128693_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128692_task);
        
        if (futhark_mc_segred_task_128693_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_127109 = defunc_2_reduce_res_127083 *
              defunc_2_reduce_res_127085;
        float y_127110 = defunc_2_reduce_res_127084 *
              defunc_2_reduce_res_127084;
        float a12_127111 = x_127109 - y_127110;
        float x_127112 = defunc_2_reduce_res_127083 *
              defunc_2_reduce_res_127084;
        float y_127113 = defunc_2_reduce_res_127082 *
              defunc_2_reduce_res_127085;
        float b12_127114 = x_127112 - y_127113;
        float x_127115 = defunc_2_reduce_res_127082 *
              defunc_2_reduce_res_127084;
        float y_127116 = defunc_2_reduce_res_127083 *
              defunc_2_reduce_res_127083;
        float c12_127117 = x_127115 - y_127116;
        float x_127118 = defunc_2_reduce_res_127081 *
              defunc_2_reduce_res_127085;
        float b2_127119 = x_127118 - y_127116;
        float x_127120 = defunc_2_reduce_res_127082 *
              defunc_2_reduce_res_127083;
        float y_127121 = defunc_2_reduce_res_127081 *
              defunc_2_reduce_res_127084;
        float c2_127122 = x_127120 - y_127121;
        float x_127123 = defunc_2_reduce_res_127081 * a12_127111;
        float y_127124 = defunc_2_reduce_res_127082 * b12_127114;
        float x_127125 = x_127123 + y_127124;
        float y_127126 = defunc_2_reduce_res_127083 * c12_127117;
        float y_127127 = x_127125 + y_127126;
        float det_127128 = 1.0F / y_127127;
        float a12_127129 = a12_127111 * det_127128;
        float b12_127130 = b12_127114 * det_127128;
        float c12_127131 = c12_127117 * det_127128;
        float b2_127132 = b2_127119 * det_127128;
        float c2_127133 = c2_127122 * det_127128;
        float defunc_2_reduce_res_127134;
        float defunc_2_reduce_res_127135;
        int64_t flat_tid_118054 = (int64_t) 0;
        int32_t num_tasks_127469;
        struct futhark_mc_task_128701 futhark_mc_task_128701;
        
        futhark_mc_task_128701.ctx = ctx;
        futhark_mc_task_128701.free_n_112520 = n_112520;
        futhark_mc_task_128701.free_gtid_118045 = gtid_118045;
        futhark_mc_task_128701.free_x_118168 = x_118168;
        futhark_mc_task_128701.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128701.free_x_127053 = x_127053;
        futhark_mc_task_128701.free_mem_127059 = mem_127059;
        futhark_mc_task_128701.free_mem_127079 = mem_127079;
        futhark_mc_task_128701.free_mem_127080 = mem_127080;
        futhark_mc_task_128701.free_a12_127129 = a12_127129;
        futhark_mc_task_128701.free_b12_127130 = b12_127130;
        futhark_mc_task_128701.free_c12_127131 = c12_127131;
        futhark_mc_task_128701.free_b2_127132 = b2_127132;
        futhark_mc_task_128701.free_c2_127133 = c2_127133;
        futhark_mc_task_128701.retval_defunc_2_reduce_res_127134 =
            &defunc_2_reduce_res_127134;
        futhark_mc_task_128701.retval_defunc_2_reduce_res_127135 =
            &defunc_2_reduce_res_127135;
        
        struct scheduler_segop futhark_mc_task_128701_task;
        
        futhark_mc_task_128701_task.args = &futhark_mc_task_128701;
        futhark_mc_task_128701_task.top_level_fn =
            futhark_mc_segred_task_128702;
        futhark_mc_task_128701_task.name = "futhark_mc_segred_task_128702";
        futhark_mc_task_128701_task.iterations = t_window_112523;
        futhark_mc_task_128701_task.task_time =
            &ctx->futhark_mc_segred_task_128702_total_time;
        futhark_mc_task_128701_task.task_iter =
            &ctx->futhark_mc_segred_task_128702_total_iter;
        futhark_mc_task_128701_task.sched = STATIC;
        futhark_mc_task_128701_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128702_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128701_task);
        
        if (futhark_mc_segred_task_128702_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120727.mem)[gtid_118049] = defunc_2_reduce_res_127134;
        ((float *) mem_120730.mem)[gtid_118049] = defunc_2_reduce_res_127135;
    }
    
  cleanup:
    { }
    free(mem_127058);
    free(mem_127059);
    free(mem_127079);
    free(mem_127080);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128683_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128683_end -
                 futhark_mc_segmap_parloop_128683_start;
        
        ctx->futhark_mc_segmap_parloop_128683_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128683_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128683_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128681(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118048 = tid;
    int num_tasks_127279 = info.nsubtasks;
    struct futhark_mc_task_128673 *futhark_mc_task_128673 =
                                  (struct futhark_mc_task_128673 *) args;
    struct futhark_context *ctx = futhark_mc_task_128673->ctx;
    uint64_t futhark_mc_segmap_nested_task_128681_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128681_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128673->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128673->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128673->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128673->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128673->free_i_112596;
    int64_t gtid_118045 = futhark_mc_task_128673->free_gtid_118045;
    int64_t x_118168 = futhark_mc_task_128673->free_x_118168;
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128673->free_mem_119442,
                                  .size =0, .references =NULL};
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128673->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128673->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128673->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128673->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 = futhark_mc_task_128673->free_bytes_120653;
    struct memblock mem_120727 = {.desc ="mem_120727", .mem =
                                  futhark_mc_task_128673->free_mem_120727,
                                  .size =0, .references =NULL};
    struct memblock mem_120730 = {.desc ="mem_120730", .mem =
                                  futhark_mc_task_128673->free_mem_120730,
                                  .size =0, .references =NULL};
    int64_t iter_127361;
    struct futhark_mc_segmap_parloop_struct_128682
    futhark_mc_segmap_parloop_struct_128682;
    
    futhark_mc_segmap_parloop_struct_128682.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128682.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128682.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128682.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128682.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128682.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128682.free_gtid_118045 = gtid_118045;
    futhark_mc_segmap_parloop_struct_128682.free_x_118168 = x_118168;
    futhark_mc_segmap_parloop_struct_128682.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128682.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128682.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128682.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128682.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128682.free_bytes_120653 = bytes_120653;
    futhark_mc_segmap_parloop_struct_128682.free_mem_120727 = mem_120727.mem;
    futhark_mc_segmap_parloop_struct_128682.free_mem_120730 = mem_120730.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128683_task;
    
    futhark_mc_segmap_parloop_128683_task.name =
        "futhark_mc_segmap_parloop_128683";
    futhark_mc_segmap_parloop_128683_task.fn = futhark_mc_segmap_parloop_128683;
    futhark_mc_segmap_parloop_128683_task.args =
        &futhark_mc_segmap_parloop_struct_128682;
    futhark_mc_segmap_parloop_128683_task.iterations = iterations;
    futhark_mc_segmap_parloop_128683_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128683_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128683_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128683_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128683_task);
    
    if (futhark_mc_segmap_parloop_128683_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128683_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128683_total_end -
                 futhark_mc_segmap_parloop_128683_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128683_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128683_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128683_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128681_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128681_end -
                 futhark_mc_segmap_nested_task_128681_start;
        
        ctx->futhark_mc_segmap_nested_task_128681_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128681_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128681_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128670(void *args, int64_t start,
                                            int64_t end, int flat_tid_118044,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128669
    *futhark_mc_segmap_parloop_struct_128669 =
    (struct futhark_mc_segmap_parloop_struct_128669 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128669->ctx;
    uint64_t futhark_mc_segmap_parloop_128670_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128670_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128669->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128669->free_n_112520;
    int64_t t_window_112523 =
            futhark_mc_segmap_parloop_struct_128669->free_t_window_112523;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128669->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128669->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128669->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 =
            futhark_mc_segmap_parloop_struct_128669->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 =
            futhark_mc_segmap_parloop_struct_128669->free_bytes_120653;
    struct memblock mem_120824 = {.desc ="mem_120824", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_120824,
                                  .size =0, .references =NULL};
    struct memblock mem_120828 = {.desc ="mem_120828", .mem =
                                  futhark_mc_segmap_parloop_struct_128669->free_mem_120828,
                                  .size =0, .references =NULL};
    size_t mem_120727_cached_sizze_128671 = 0;
    char *mem_120727 = NULL;
    size_t mem_120730_cached_sizze_128672 = 0;
    char *mem_120730 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127052 = start;
    
    if (mem_120727_cached_sizze_128671 < (size_t) bytes_119552) {
        mem_120727 = realloc(mem_120727, bytes_119552);
        mem_120727_cached_sizze_128671 = bytes_119552;
    }
    if (mem_120730_cached_sizze_128672 < (size_t) bytes_119552) {
        mem_120730 = realloc(mem_120730, bytes_119552);
        mem_120730_cached_sizze_128672 = bytes_119552;
    }
    for (; iter_127052 < end; iter_127052++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127277 = m_112519;
        int64_t gtid_118045 = iter_127052;
        int64_t remnant_127278 = iter_127052 - gtid_118045;
        int64_t x_118168 = ((int64_t *) mem_119420.mem)[gtid_118045];
        int64_t flat_tid_118046 = (int64_t) 0;
        int32_t num_tasks_127279;
        int64_t flat_tid_118048 = (int64_t) 0;
        struct futhark_mc_task_128673 futhark_mc_task_128673;
        
        futhark_mc_task_128673.ctx = ctx;
        futhark_mc_task_128673.free_n_112520 = n_112520;
        futhark_mc_task_128673.free_t_window_112523 = t_window_112523;
        futhark_mc_task_128673.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128673.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128673.free_i_112596 = i_112596;
        futhark_mc_task_128673.free_gtid_118045 = gtid_118045;
        futhark_mc_task_128673.free_x_118168 = x_118168;
        futhark_mc_task_128673.free_mem_119442 = mem_119442.mem;
        futhark_mc_task_128673.free_mem_119606 = mem_119606.mem;
        futhark_mc_task_128673.free_mem_119610 = mem_119610.mem;
        futhark_mc_task_128673.free_mem_120357 = mem_120357.mem;
        futhark_mc_task_128673.free_mem_120361 = mem_120361.mem;
        futhark_mc_task_128673.free_bytes_120653 = bytes_120653;
        futhark_mc_task_128673.free_mem_120727 = mem_120727;
        futhark_mc_task_128673.free_mem_120730 = mem_120730;
        
        struct scheduler_segop futhark_mc_task_128673_task;
        
        futhark_mc_task_128673_task.args = &futhark_mc_task_128673;
        futhark_mc_task_128673_task.top_level_fn =
            futhark_mc_segmap_task_128674;
        futhark_mc_task_128673_task.name = "futhark_mc_segmap_task_128674";
        futhark_mc_task_128673_task.iterations = t_n_m_112577;
        futhark_mc_task_128673_task.task_time =
            &ctx->futhark_mc_segmap_task_128674_total_time;
        futhark_mc_task_128673_task.task_iter =
            &ctx->futhark_mc_segmap_task_128674_total_iter;
        futhark_mc_task_128673_task.sched = STATIC;
        futhark_mc_task_128673_task.nested_fn =
            futhark_mc_segmap_nested_task_128681;
        
        int futhark_mc_segmap_task_128674_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128673_task);
        
        if (futhark_mc_segmap_task_128674_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120824.mem + gtid_118045 * t_n_m_112577 * (int64_t) 4,
                mem_120727 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
        memmove(mem_120828.mem + gtid_118045 * t_n_m_112577 * (int64_t) 4,
                mem_120730 + (int64_t) 0, t_n_m_112577 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120727);
    free(mem_120730);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128670_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128670_end -
                 futhark_mc_segmap_parloop_128670_start;
        
        ctx->futhark_mc_segmap_parloop_128670_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128670_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128670_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128668(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118044 = tid;
    int num_tasks_126918 = info.nsubtasks;
    struct futhark_mc_task_128658 *futhark_mc_task_128658 =
                                  (struct futhark_mc_task_128658 *) args;
    struct futhark_context *ctx = futhark_mc_task_128658->ctx;
    uint64_t futhark_mc_segmap_nested_task_128668_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128668_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128658->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128658->free_n_112520;
    int64_t t_window_112523 = futhark_mc_task_128658->free_t_window_112523;
    int64_t t_jump_112527 = futhark_mc_task_128658->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128658->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128658->free_i_112596;
    struct memblock mem_119420 = {.desc ="mem_119420", .mem =
                                  futhark_mc_task_128658->free_mem_119420,
                                  .size =0, .references =NULL};
    struct memblock mem_119442 = {.desc ="mem_119442", .mem =
                                  futhark_mc_task_128658->free_mem_119442,
                                  .size =0, .references =NULL};
    int64_t bytes_119552 = futhark_mc_task_128658->free_bytes_119552;
    struct memblock mem_119606 = {.desc ="mem_119606", .mem =
                                  futhark_mc_task_128658->free_mem_119606,
                                  .size =0, .references =NULL};
    struct memblock mem_119610 = {.desc ="mem_119610", .mem =
                                  futhark_mc_task_128658->free_mem_119610,
                                  .size =0, .references =NULL};
    struct memblock mem_120357 = {.desc ="mem_120357", .mem =
                                  futhark_mc_task_128658->free_mem_120357,
                                  .size =0, .references =NULL};
    struct memblock mem_120361 = {.desc ="mem_120361", .mem =
                                  futhark_mc_task_128658->free_mem_120361,
                                  .size =0, .references =NULL};
    int64_t bytes_120653 = futhark_mc_task_128658->free_bytes_120653;
    struct memblock mem_120824 = {.desc ="mem_120824", .mem =
                                  futhark_mc_task_128658->free_mem_120824,
                                  .size =0, .references =NULL};
    struct memblock mem_120828 = {.desc ="mem_120828", .mem =
                                  futhark_mc_task_128658->free_mem_120828,
                                  .size =0, .references =NULL};
    int64_t iter_127052;
    struct futhark_mc_segmap_parloop_struct_128669
    futhark_mc_segmap_parloop_struct_128669;
    
    futhark_mc_segmap_parloop_struct_128669.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128669.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128669.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128669.free_t_window_112523 =
        t_window_112523;
    futhark_mc_segmap_parloop_struct_128669.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128669.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128669.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128669.free_mem_119420 = mem_119420.mem;
    futhark_mc_segmap_parloop_struct_128669.free_mem_119442 = mem_119442.mem;
    futhark_mc_segmap_parloop_struct_128669.free_bytes_119552 = bytes_119552;
    futhark_mc_segmap_parloop_struct_128669.free_mem_119606 = mem_119606.mem;
    futhark_mc_segmap_parloop_struct_128669.free_mem_119610 = mem_119610.mem;
    futhark_mc_segmap_parloop_struct_128669.free_mem_120357 = mem_120357.mem;
    futhark_mc_segmap_parloop_struct_128669.free_mem_120361 = mem_120361.mem;
    futhark_mc_segmap_parloop_struct_128669.free_bytes_120653 = bytes_120653;
    futhark_mc_segmap_parloop_struct_128669.free_mem_120824 = mem_120824.mem;
    futhark_mc_segmap_parloop_struct_128669.free_mem_120828 = mem_120828.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128670_task;
    
    futhark_mc_segmap_parloop_128670_task.name =
        "futhark_mc_segmap_parloop_128670";
    futhark_mc_segmap_parloop_128670_task.fn = futhark_mc_segmap_parloop_128670;
    futhark_mc_segmap_parloop_128670_task.args =
        &futhark_mc_segmap_parloop_struct_128669;
    futhark_mc_segmap_parloop_128670_task.iterations = iterations;
    futhark_mc_segmap_parloop_128670_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128670_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128670_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128670_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128670_task);
    
    if (futhark_mc_segmap_parloop_128670_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128670_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128670_total_end -
                 futhark_mc_segmap_parloop_128670_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128670_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128670_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128670_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128668_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128668_end -
                 futhark_mc_segmap_nested_task_128668_start;
        
        ctx->futhark_mc_segmap_nested_task_128668_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128668_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128668_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128707 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_y_114425;
    int64_t free_bytes_119421;
    char *free_ext_mem_120833;
    char *free_ext_mem_120834;
    char *free_mem_120856;
};
struct futhark_mc_segmap_parloop_struct_128709 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_y_114425;
    int64_t free_bytes_119421;
    char *free_ext_mem_120833;
    char *free_ext_mem_120834;
    char *free_mem_120856;
};
static int futhark_mc_segmap_parloop_128710(void *args, int64_t start,
                                            int64_t end, int flat_tid_118385,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128709
    *futhark_mc_segmap_parloop_struct_128709 =
    (struct futhark_mc_segmap_parloop_struct_128709 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128709->ctx;
    uint64_t futhark_mc_segmap_parloop_128710_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128710_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128709->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128709->free_n_112520;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128709->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128709->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128709->free_i_112596;
    int64_t y_114425 = futhark_mc_segmap_parloop_struct_128709->free_y_114425;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128709->free_bytes_119421;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_segmap_parloop_struct_128709->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_segmap_parloop_struct_128709->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120856 = {.desc ="mem_120856", .mem =
                                  futhark_mc_segmap_parloop_struct_128709->free_mem_120856,
                                  .size =0, .references =NULL};
    size_t mem_120840_cached_sizze_128711 = 0;
    char *mem_120840 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127485 = start;
    
    if (mem_120840_cached_sizze_128711 < (size_t) bytes_119421) {
        mem_120840 = realloc(mem_120840, bytes_119421);
        mem_120840_cached_sizze_128711 = bytes_119421;
    }
    for (; iter_127485 < end; iter_127485++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127535 = m_112519;
        int64_t gtid_118386 = iter_127485;
        int64_t remnant_127536 = iter_127485 - gtid_118386;
        
        for (int64_t i_127486 = 0; i_127486 < n_112520; i_127486++) {
            int64_t m_v_127488 = sdiv64(i_127486, t_jump_112527);
            bool cond_127489 = m_v_127488 == y_114425;
            int64_t j_127490;
            
            if (cond_127489) {
                int64_t j_t_res_127491 = sub64(m_v_127488, (int64_t) 1);
                
                j_127490 = j_t_res_127491;
            } else {
                j_127490 = m_v_127488;
            }
            
            int64_t min_arg_127492 = mul64(t_jump_112527, j_127490);
            int64_t min_res_127493 = smin64(i_112596, min_arg_127492);
            int64_t defunc_0_m_fun_arg_127494 = add64((int64_t) 1, j_127490);
            int64_t min_arg_127495 = mul64(t_jump_112527,
                                           defunc_0_m_fun_arg_127494);
            int64_t min_res_127496 = smin64(i_112596, min_arg_127495);
            int64_t i64_arg_127497 = sub64(min_res_127496, min_res_127493);
            float i64_res_127498 = sitofp_i64_f32(i64_arg_127497);
            int64_t i64_arg_127499 = sub64(i_127486, min_res_127493);
            float i64_res_127500 = sitofp_i64_f32(i64_arg_127499);
            float u_127501 = i64_res_127500 / i64_res_127498;
            float u2_127502 = u_127501 * u_127501;
            float u3_127503 = u_127501 * u2_127502;
            float x_127504 = 2.0F * u3_127503;
            float y_127505 = 3.0F * u2_127502;
            float x_127506 = x_127504 - y_127505;
            float x_127507 = 1.0F + x_127506;
            bool x_127508 = sle64((int64_t) 0, j_127490);
            bool y_127509 = slt64(j_127490, t_n_m_112577);
            bool bounds_check_127510 = x_127508 && y_127509;
            bool index_certs_127511;
            
            if (!bounds_check_127510) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_127490,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_112577, "].",
                              "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127512 = ((float *) ext_mem_120834.mem)[gtid_118386 *
                                                            t_n_m_112577 +
                                                            j_127490];
            float x_127513 = x_127507 * y_127512;
            float x_127514 = y_127505 - x_127504;
            bool x_127515 = sle64((int64_t) 0, defunc_0_m_fun_arg_127494);
            bool y_127516 = slt64(defunc_0_m_fun_arg_127494, t_n_m_112577);
            bool bounds_check_127517 = x_127515 && y_127516;
            bool index_certs_127518;
            
            if (!bounds_check_127517) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_127494,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_112577, "].",
                              "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127519 = ((float *) ext_mem_120834.mem)[gtid_118386 *
                                                            t_n_m_112577 +
                                                            defunc_0_m_fun_arg_127494];
            float y_127520 = x_127514 * y_127519;
            float x_127521 = x_127513 + y_127520;
            float y_127522 = 2.0F * u2_127502;
            float x_127523 = u3_127503 - y_127522;
            float x_127524 = u_127501 + x_127523;
            float y_127525 = ((float *) ext_mem_120833.mem)[gtid_118386 *
                                                            t_n_m_112577 +
                                                            j_127490];
            float x_127526 = x_127524 * y_127525;
            float y_127527 = i64_res_127498 * x_127526;
            float x_127528 = x_127521 + y_127527;
            float x_127529 = u3_127503 - u2_127502;
            float y_127530 = ((float *) ext_mem_120833.mem)[gtid_118386 *
                                                            t_n_m_112577 +
                                                            defunc_0_m_fun_arg_127494];
            float x_127531 = x_127529 * y_127530;
            float y_127532 = i64_res_127498 * x_127531;
            float defunc_0_f_res_127533 = x_127528 + y_127532;
            
            ((float *) mem_120840)[i_127486] = defunc_0_f_res_127533;
        }
        memmove(mem_120856.mem + gtid_118386 * n_112520 * (int64_t) 4,
                mem_120840 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120840);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128710_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128710_end -
                 futhark_mc_segmap_parloop_128710_start;
        
        ctx->futhark_mc_segmap_parloop_128710_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128710_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128710_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128708(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118385 = tid;
    int num_tasks_127484 = info.nsubtasks;
    struct futhark_mc_task_128707 *futhark_mc_task_128707 =
                                  (struct futhark_mc_task_128707 *) args;
    struct futhark_context *ctx = futhark_mc_task_128707->ctx;
    uint64_t futhark_mc_segmap_task_128708_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128708_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128707->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128707->free_n_112520;
    int64_t t_jump_112527 = futhark_mc_task_128707->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128707->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128707->free_i_112596;
    int64_t y_114425 = futhark_mc_task_128707->free_y_114425;
    int64_t bytes_119421 = futhark_mc_task_128707->free_bytes_119421;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_task_128707->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_task_128707->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120856 = {.desc ="mem_120856", .mem =
                                  futhark_mc_task_128707->free_mem_120856,
                                  .size =0, .references =NULL};
    int64_t iter_127485;
    struct futhark_mc_segmap_parloop_struct_128709
    futhark_mc_segmap_parloop_struct_128709;
    
    futhark_mc_segmap_parloop_struct_128709.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128709.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128709.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128709.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128709.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128709.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128709.free_y_114425 = y_114425;
    futhark_mc_segmap_parloop_struct_128709.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128709.free_ext_mem_120833 =
        ext_mem_120833.mem;
    futhark_mc_segmap_parloop_struct_128709.free_ext_mem_120834 =
        ext_mem_120834.mem;
    futhark_mc_segmap_parloop_struct_128709.free_mem_120856 = mem_120856.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128710_task;
    
    futhark_mc_segmap_parloop_128710_task.name =
        "futhark_mc_segmap_parloop_128710";
    futhark_mc_segmap_parloop_128710_task.fn = futhark_mc_segmap_parloop_128710;
    futhark_mc_segmap_parloop_128710_task.args =
        &futhark_mc_segmap_parloop_struct_128709;
    futhark_mc_segmap_parloop_128710_task.iterations = iterations;
    futhark_mc_segmap_parloop_128710_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128710_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128710_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128710_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128710_task);
    
    if (futhark_mc_segmap_parloop_128710_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128710_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128710_total_end -
                 futhark_mc_segmap_parloop_128710_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128710_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128710_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128710_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128708_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128708_end -
                 futhark_mc_segmap_task_128708_start;
        
        ctx->futhark_mc_segmap_task_128708_runs[tid]++;
        ctx->futhark_mc_segmap_task_128708_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128708_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128713 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_y_114425;
    int64_t free_bytes_119421;
    char *free_ext_mem_120833;
    char *free_ext_mem_120834;
    char *free_mem_120856;
};
struct futhark_mc_task_128716 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_y_114425;
    int64_t free_gtid_118388;
    char *free_ext_mem_120833;
    char *free_ext_mem_120834;
    char *free_mem_120837;
};
struct futhark_mc_segmap_parloop_struct_128718 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_t_jump_112527;
    int64_t free_t_n_m_112577;
    int64_t free_i_112596;
    int64_t free_y_114425;
    int64_t free_gtid_118388;
    char *free_ext_mem_120833;
    char *free_ext_mem_120834;
    char *free_mem_120837;
};
static int futhark_mc_segmap_parloop_128719(void *args, int64_t start,
                                            int64_t end, int flat_tid_118389,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128718
    *futhark_mc_segmap_parloop_struct_128718 =
    (struct futhark_mc_segmap_parloop_struct_128718 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128718->ctx;
    uint64_t futhark_mc_segmap_parloop_128719_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128719_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128718->free_n_112520;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128718->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128718->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128718->free_i_112596;
    int64_t y_114425 = futhark_mc_segmap_parloop_struct_128718->free_y_114425;
    int64_t gtid_118388 =
            futhark_mc_segmap_parloop_struct_128718->free_gtid_118388;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_segmap_parloop_struct_128718->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_segmap_parloop_struct_128718->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120837 = {.desc ="mem_120837", .mem =
                                  futhark_mc_segmap_parloop_struct_128718->free_mem_120837,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127588 = start;
    
    for (; iter_127588 < end; iter_127588++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127590 = n_112520;
        int64_t gtid_118390 = iter_127588;
        int64_t remnant_127591 = iter_127588 - gtid_118390;
        int64_t m_v_127539 = sdiv64(gtid_118390, t_jump_112527);
        bool cond_127540 = m_v_127539 == y_114425;
        int64_t j_127541;
        
        if (cond_127540) {
            int64_t j_t_res_127589 = sub64(m_v_127539, (int64_t) 1);
            
            j_127541 = j_t_res_127589;
        } else {
            j_127541 = m_v_127539;
        }
        
        int64_t min_arg_127543 = mul64(t_jump_112527, j_127541);
        int64_t min_res_127544 = smin64(i_112596, min_arg_127543);
        int64_t defunc_0_m_fun_arg_127545 = add64((int64_t) 1, j_127541);
        int64_t min_arg_127546 = mul64(t_jump_112527,
                                       defunc_0_m_fun_arg_127545);
        int64_t min_res_127547 = smin64(i_112596, min_arg_127546);
        int64_t i64_arg_127548 = sub64(min_res_127547, min_res_127544);
        float i64_res_127549 = sitofp_i64_f32(i64_arg_127548);
        int64_t i64_arg_127550 = sub64(gtid_118390, min_res_127544);
        float i64_res_127551 = sitofp_i64_f32(i64_arg_127550);
        float u_127552 = i64_res_127551 / i64_res_127549;
        float u2_127553 = u_127552 * u_127552;
        float u3_127554 = u_127552 * u2_127553;
        float x_127555 = 2.0F * u3_127554;
        float y_127556 = 3.0F * u2_127553;
        float x_127557 = x_127555 - y_127556;
        float x_127558 = 1.0F + x_127557;
        bool x_127559 = sle64((int64_t) 0, j_127541);
        bool y_127560 = slt64(j_127541, t_n_m_112577);
        bool bounds_check_127561 = x_127559 && y_127560;
        bool index_certs_127562;
        
        if (!bounds_check_127561) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_127541,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_112577, "].",
                                   "-> #0  loess.fut:431:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127563 = ((float *) ext_mem_120834.mem)[gtid_118388 *
                                                        t_n_m_112577 +
                                                        j_127541];
        float x_127564 = x_127558 * y_127563;
        float x_127565 = y_127556 - x_127555;
        bool x_127566 = sle64((int64_t) 0, defunc_0_m_fun_arg_127545);
        bool y_127567 = slt64(defunc_0_m_fun_arg_127545, t_n_m_112577);
        bool bounds_check_127568 = x_127566 && y_127567;
        bool index_certs_127569;
        
        if (!bounds_check_127568) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_127545,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_112577, "].",
                                   "-> #0  loess.fut:432:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127570 = ((float *) ext_mem_120834.mem)[gtid_118388 *
                                                        t_n_m_112577 +
                                                        defunc_0_m_fun_arg_127545];
        float y_127571 = x_127565 * y_127570;
        float x_127572 = x_127564 + y_127571;
        float y_127573 = 2.0F * u2_127553;
        float x_127574 = u3_127554 - y_127573;
        float x_127575 = u_127552 + x_127574;
        float y_127576 = ((float *) ext_mem_120833.mem)[gtid_118388 *
                                                        t_n_m_112577 +
                                                        j_127541];
        float x_127577 = x_127575 * y_127576;
        float y_127578 = i64_res_127549 * x_127577;
        float x_127579 = x_127572 + y_127578;
        float x_127580 = u3_127554 - u2_127553;
        float y_127581 = ((float *) ext_mem_120833.mem)[gtid_118388 *
                                                        t_n_m_112577 +
                                                        defunc_0_m_fun_arg_127545];
        float x_127582 = x_127580 * y_127581;
        float y_127583 = i64_res_127549 * x_127582;
        float defunc_0_f_res_127584 = x_127579 + y_127583;
        
        ((float *) mem_120837.mem)[gtid_118390] = defunc_0_f_res_127584;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128719_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128719_end -
                 futhark_mc_segmap_parloop_128719_start;
        
        ctx->futhark_mc_segmap_parloop_128719_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128719_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128719_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128717(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118389 = tid;
    int num_tasks_127587 = info.nsubtasks;
    struct futhark_mc_task_128716 *futhark_mc_task_128716 =
                                  (struct futhark_mc_task_128716 *) args;
    struct futhark_context *ctx = futhark_mc_task_128716->ctx;
    uint64_t futhark_mc_segmap_task_128717_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128717_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128716->free_n_112520;
    int64_t t_jump_112527 = futhark_mc_task_128716->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128716->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128716->free_i_112596;
    int64_t y_114425 = futhark_mc_task_128716->free_y_114425;
    int64_t gtid_118388 = futhark_mc_task_128716->free_gtid_118388;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_task_128716->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_task_128716->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120837 = {.desc ="mem_120837", .mem =
                                  futhark_mc_task_128716->free_mem_120837,
                                  .size =0, .references =NULL};
    int64_t iter_127588;
    struct futhark_mc_segmap_parloop_struct_128718
    futhark_mc_segmap_parloop_struct_128718;
    
    futhark_mc_segmap_parloop_struct_128718.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128718.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128718.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128718.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128718.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128718.free_y_114425 = y_114425;
    futhark_mc_segmap_parloop_struct_128718.free_gtid_118388 = gtid_118388;
    futhark_mc_segmap_parloop_struct_128718.free_ext_mem_120833 =
        ext_mem_120833.mem;
    futhark_mc_segmap_parloop_struct_128718.free_ext_mem_120834 =
        ext_mem_120834.mem;
    futhark_mc_segmap_parloop_struct_128718.free_mem_120837 = mem_120837.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128719_task;
    
    futhark_mc_segmap_parloop_128719_task.name =
        "futhark_mc_segmap_parloop_128719";
    futhark_mc_segmap_parloop_128719_task.fn = futhark_mc_segmap_parloop_128719;
    futhark_mc_segmap_parloop_128719_task.args =
        &futhark_mc_segmap_parloop_struct_128718;
    futhark_mc_segmap_parloop_128719_task.iterations = iterations;
    futhark_mc_segmap_parloop_128719_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128719_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128719_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128719_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128719_task);
    
    if (futhark_mc_segmap_parloop_128719_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128719_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128719_total_end -
                 futhark_mc_segmap_parloop_128719_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128719_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128719_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128719_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128717_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128717_end -
                 futhark_mc_segmap_task_128717_start;
        
        ctx->futhark_mc_segmap_task_128717_runs[tid]++;
        ctx->futhark_mc_segmap_task_128717_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128717_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128714(void *args, int64_t start,
                                            int64_t end, int flat_tid_118387,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128713
    *futhark_mc_segmap_parloop_struct_128713 =
    (struct futhark_mc_segmap_parloop_struct_128713 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128713->ctx;
    uint64_t futhark_mc_segmap_parloop_128714_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128714_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128713->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128713->free_n_112520;
    int64_t t_jump_112527 =
            futhark_mc_segmap_parloop_struct_128713->free_t_jump_112527;
    int64_t t_n_m_112577 =
            futhark_mc_segmap_parloop_struct_128713->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128713->free_i_112596;
    int64_t y_114425 = futhark_mc_segmap_parloop_struct_128713->free_y_114425;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128713->free_bytes_119421;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_segmap_parloop_struct_128713->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_segmap_parloop_struct_128713->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120856 = {.desc ="mem_120856", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_120856,
                                  .size =0, .references =NULL};
    size_t mem_120837_cached_sizze_128715 = 0;
    char *mem_120837 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127538 = start;
    
    if (mem_120837_cached_sizze_128715 < (size_t) bytes_119421) {
        mem_120837 = realloc(mem_120837, bytes_119421);
        mem_120837_cached_sizze_128715 = bytes_119421;
    }
    for (; iter_127538 < end; iter_127538++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127585 = m_112519;
        int64_t gtid_118388 = iter_127538;
        int64_t remnant_127586 = iter_127538 - gtid_118388;
        int64_t flat_tid_118389 = (int64_t) 0;
        int32_t num_tasks_127587;
        struct futhark_mc_task_128716 futhark_mc_task_128716;
        
        futhark_mc_task_128716.ctx = ctx;
        futhark_mc_task_128716.free_n_112520 = n_112520;
        futhark_mc_task_128716.free_t_jump_112527 = t_jump_112527;
        futhark_mc_task_128716.free_t_n_m_112577 = t_n_m_112577;
        futhark_mc_task_128716.free_i_112596 = i_112596;
        futhark_mc_task_128716.free_y_114425 = y_114425;
        futhark_mc_task_128716.free_gtid_118388 = gtid_118388;
        futhark_mc_task_128716.free_ext_mem_120833 = ext_mem_120833.mem;
        futhark_mc_task_128716.free_ext_mem_120834 = ext_mem_120834.mem;
        futhark_mc_task_128716.free_mem_120837 = mem_120837;
        
        struct scheduler_segop futhark_mc_task_128716_task;
        
        futhark_mc_task_128716_task.args = &futhark_mc_task_128716;
        futhark_mc_task_128716_task.top_level_fn =
            futhark_mc_segmap_task_128717;
        futhark_mc_task_128716_task.name = "futhark_mc_segmap_task_128717";
        futhark_mc_task_128716_task.iterations = n_112520;
        futhark_mc_task_128716_task.task_time =
            &ctx->futhark_mc_segmap_task_128717_total_time;
        futhark_mc_task_128716_task.task_iter =
            &ctx->futhark_mc_segmap_task_128717_total_iter;
        futhark_mc_task_128716_task.sched = STATIC;
        futhark_mc_task_128716_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128717_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128716_task);
        
        if (futhark_mc_segmap_task_128717_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120856.mem + gtid_118388 * n_112520 * (int64_t) 4,
                mem_120837 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120837);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128714_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128714_end -
                 futhark_mc_segmap_parloop_128714_start;
        
        ctx->futhark_mc_segmap_parloop_128714_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128714_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128714_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128712(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118387 = tid;
    int num_tasks_127484 = info.nsubtasks;
    struct futhark_mc_task_128707 *futhark_mc_task_128707 =
                                  (struct futhark_mc_task_128707 *) args;
    struct futhark_context *ctx = futhark_mc_task_128707->ctx;
    uint64_t futhark_mc_segmap_nested_task_128712_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128712_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128707->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128707->free_n_112520;
    int64_t t_jump_112527 = futhark_mc_task_128707->free_t_jump_112527;
    int64_t t_n_m_112577 = futhark_mc_task_128707->free_t_n_m_112577;
    int64_t i_112596 = futhark_mc_task_128707->free_i_112596;
    int64_t y_114425 = futhark_mc_task_128707->free_y_114425;
    int64_t bytes_119421 = futhark_mc_task_128707->free_bytes_119421;
    struct memblock ext_mem_120833 = {.desc ="ext_mem_120833", .mem =
                                      futhark_mc_task_128707->free_ext_mem_120833,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120834 = {.desc ="ext_mem_120834", .mem =
                                      futhark_mc_task_128707->free_ext_mem_120834,
                                      .size =0, .references =NULL};
    struct memblock mem_120856 = {.desc ="mem_120856", .mem =
                                  futhark_mc_task_128707->free_mem_120856,
                                  .size =0, .references =NULL};
    int64_t iter_127538;
    struct futhark_mc_segmap_parloop_struct_128713
    futhark_mc_segmap_parloop_struct_128713;
    
    futhark_mc_segmap_parloop_struct_128713.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128713.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128713.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128713.free_t_jump_112527 = t_jump_112527;
    futhark_mc_segmap_parloop_struct_128713.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_segmap_parloop_struct_128713.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128713.free_y_114425 = y_114425;
    futhark_mc_segmap_parloop_struct_128713.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128713.free_ext_mem_120833 =
        ext_mem_120833.mem;
    futhark_mc_segmap_parloop_struct_128713.free_ext_mem_120834 =
        ext_mem_120834.mem;
    futhark_mc_segmap_parloop_struct_128713.free_mem_120856 = mem_120856.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128714_task;
    
    futhark_mc_segmap_parloop_128714_task.name =
        "futhark_mc_segmap_parloop_128714";
    futhark_mc_segmap_parloop_128714_task.fn = futhark_mc_segmap_parloop_128714;
    futhark_mc_segmap_parloop_128714_task.args =
        &futhark_mc_segmap_parloop_struct_128713;
    futhark_mc_segmap_parloop_128714_task.iterations = iterations;
    futhark_mc_segmap_parloop_128714_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128714_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128714_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128714_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128714_task);
    
    if (futhark_mc_segmap_parloop_128714_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128714_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128714_total_end -
                 futhark_mc_segmap_parloop_128714_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128712_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128712_end -
                 futhark_mc_segmap_nested_task_128712_start;
        
        ctx->futhark_mc_segmap_nested_task_128712_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128712_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128712_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128720 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_120863;
    char *free_ext_mem_120864;
    int64_t free_ext_120868;
    char *free_mem_120900;
};
struct futhark_mc_segmap_parloop_struct_128722 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_120863;
    char *free_ext_mem_120864;
    int64_t free_ext_120868;
    char *free_mem_120900;
};
static int futhark_mc_segmap_parloop_128723(void *args, int64_t start,
                                            int64_t end, int flat_tid_118441,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128722
    *futhark_mc_segmap_parloop_struct_128722 =
    (struct futhark_mc_segmap_parloop_struct_128722 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128722->ctx;
    uint64_t futhark_mc_segmap_parloop_128723_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128723_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128722->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128722->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128722->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128722->free_bytes_119421;
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_segmap_parloop_struct_128722->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_segmap_parloop_struct_128722->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 =
            futhark_mc_segmap_parloop_struct_128722->free_ext_120868;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128722->free_mem_120900,
                                  .size =0, .references =NULL};
    size_t mem_120884_cached_sizze_128724 = 0;
    char *mem_120884 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127593 = start;
    
    if (mem_120884_cached_sizze_128724 < (size_t) bytes_119421) {
        mem_120884 = realloc(mem_120884, bytes_119421);
        mem_120884_cached_sizze_128724 = bytes_119421;
    }
    for (; iter_127593 < end; iter_127593++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127605 = m_112519;
        int64_t gtid_118442 = iter_127593;
        int64_t remnant_127606 = iter_127593 - gtid_118442;
        
        for (int64_t i_127594 = 0; i_127594 < n_112520; i_127594++) {
            float x_127596 = ((float *) Y_mem_119377.mem)[gtid_118442 *
                                                          n_112520 + i_127594];
            float x_127597 = ((float *) ext_mem_120864.mem)[gtid_118442 *
                                                            n_112520 +
                                                            i_127594];
            float x_127598 = ((float *) ext_mem_120863.mem)[gtid_118442 *
                                                            ext_120868 +
                                                            i_127594];
            float x_127599 = x_127596 - x_127597;
            float defunc_2_f_res_127600 = x_127599 - x_127598;
            bool isnan_res_127601;
            
            isnan_res_127601 = futrts_isnan32(defunc_2_f_res_127600);
            
            float defunc_0_f_res_127602;
            
            if (isnan_res_127601) {
                defunc_0_f_res_127602 = NAN;
            } else {
                float abs_res_127603 = (float) fabs(defunc_2_f_res_127600);
                
                defunc_0_f_res_127602 = abs_res_127603;
            }
            ((float *) mem_120884)[i_127594] = defunc_0_f_res_127602;
        }
        memmove(mem_120900.mem + gtid_118442 * n_112520 * (int64_t) 4,
                mem_120884 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120884);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128723_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128723_end -
                 futhark_mc_segmap_parloop_128723_start;
        
        ctx->futhark_mc_segmap_parloop_128723_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128723_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128723_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128721(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118441 = tid;
    int num_tasks_127592 = info.nsubtasks;
    struct futhark_mc_task_128720 *futhark_mc_task_128720 =
                                  (struct futhark_mc_task_128720 *) args;
    struct futhark_context *ctx = futhark_mc_task_128720->ctx;
    uint64_t futhark_mc_segmap_task_128721_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128721_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128720->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128720->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128720->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128720->free_bytes_119421;
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_task_128720->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_task_128720->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 = futhark_mc_task_128720->free_ext_120868;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128720->free_mem_120900,
                                  .size =0, .references =NULL};
    int64_t iter_127593;
    struct futhark_mc_segmap_parloop_struct_128722
    futhark_mc_segmap_parloop_struct_128722;
    
    futhark_mc_segmap_parloop_struct_128722.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128722.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128722.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128722.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128722.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128722.free_ext_mem_120863 =
        ext_mem_120863.mem;
    futhark_mc_segmap_parloop_struct_128722.free_ext_mem_120864 =
        ext_mem_120864.mem;
    futhark_mc_segmap_parloop_struct_128722.free_ext_120868 = ext_120868;
    futhark_mc_segmap_parloop_struct_128722.free_mem_120900 = mem_120900.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128723_task;
    
    futhark_mc_segmap_parloop_128723_task.name =
        "futhark_mc_segmap_parloop_128723";
    futhark_mc_segmap_parloop_128723_task.fn = futhark_mc_segmap_parloop_128723;
    futhark_mc_segmap_parloop_128723_task.args =
        &futhark_mc_segmap_parloop_struct_128722;
    futhark_mc_segmap_parloop_128723_task.iterations = iterations;
    futhark_mc_segmap_parloop_128723_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128723_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128723_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128723_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128723_task);
    
    if (futhark_mc_segmap_parloop_128723_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128723_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128723_total_end -
                 futhark_mc_segmap_parloop_128723_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128723_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128723_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128723_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128721_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128721_end -
                 futhark_mc_segmap_task_128721_start;
        
        ctx->futhark_mc_segmap_task_128721_runs[tid]++;
        ctx->futhark_mc_segmap_task_128721_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128721_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128726 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_120863;
    char *free_ext_mem_120864;
    int64_t free_ext_120868;
    char *free_mem_120900;
};
struct futhark_mc_task_128729 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118444;
    char *free_Y_mem_119377;
    char *free_ext_mem_120863;
    char *free_ext_mem_120864;
    int64_t free_ext_120868;
    char *free_mem_120881;
};
struct futhark_mc_segmap_parloop_struct_128731 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118444;
    char *free_Y_mem_119377;
    char *free_ext_mem_120863;
    char *free_ext_mem_120864;
    int64_t free_ext_120868;
    char *free_mem_120881;
};
static int futhark_mc_segmap_parloop_128732(void *args, int64_t start,
                                            int64_t end, int flat_tid_118445,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128731
    *futhark_mc_segmap_parloop_struct_128731 =
    (struct futhark_mc_segmap_parloop_struct_128731 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128731->ctx;
    uint64_t futhark_mc_segmap_parloop_128732_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128732_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128731->free_n_112520;
    int64_t gtid_118444 =
            futhark_mc_segmap_parloop_struct_128731->free_gtid_118444;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128731->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_segmap_parloop_struct_128731->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_segmap_parloop_struct_128731->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 =
            futhark_mc_segmap_parloop_struct_128731->free_ext_120868;
    struct memblock mem_120881 = {.desc ="mem_120881", .mem =
                                  futhark_mc_segmap_parloop_struct_128731->free_mem_120881,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127620 = start;
    
    for (; iter_127620 < end; iter_127620++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127622 = n_112520;
        int64_t gtid_118446 = iter_127620;
        int64_t remnant_127623 = iter_127620 - gtid_118446;
        float x_127609 = ((float *) Y_mem_119377.mem)[gtid_118444 * n_112520 +
                                                      gtid_118446];
        float x_127610 = ((float *) ext_mem_120864.mem)[gtid_118444 * n_112520 +
                                                        gtid_118446];
        float x_127611 = ((float *) ext_mem_120863.mem)[gtid_118444 *
                                                        ext_120868 +
                                                        gtid_118446];
        float x_127612 = x_127609 - x_127610;
        float defunc_2_f_res_127613 = x_127612 - x_127611;
        bool isnan_res_127614;
        
        isnan_res_127614 = futrts_isnan32(defunc_2_f_res_127613);
        
        float defunc_0_f_res_127615;
        
        if (isnan_res_127614) {
            defunc_0_f_res_127615 = NAN;
        } else {
            float abs_res_127621 = (float) fabs(defunc_2_f_res_127613);
            
            defunc_0_f_res_127615 = abs_res_127621;
        }
        ((float *) mem_120881.mem)[gtid_118446] = defunc_0_f_res_127615;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128732_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128732_end -
                 futhark_mc_segmap_parloop_128732_start;
        
        ctx->futhark_mc_segmap_parloop_128732_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128732_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128732_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128730(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118445 = tid;
    int num_tasks_127619 = info.nsubtasks;
    struct futhark_mc_task_128729 *futhark_mc_task_128729 =
                                  (struct futhark_mc_task_128729 *) args;
    struct futhark_context *ctx = futhark_mc_task_128729->ctx;
    uint64_t futhark_mc_segmap_task_128730_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128730_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128729->free_n_112520;
    int64_t gtid_118444 = futhark_mc_task_128729->free_gtid_118444;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128729->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_task_128729->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_task_128729->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 = futhark_mc_task_128729->free_ext_120868;
    struct memblock mem_120881 = {.desc ="mem_120881", .mem =
                                  futhark_mc_task_128729->free_mem_120881,
                                  .size =0, .references =NULL};
    int64_t iter_127620;
    struct futhark_mc_segmap_parloop_struct_128731
    futhark_mc_segmap_parloop_struct_128731;
    
    futhark_mc_segmap_parloop_struct_128731.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128731.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128731.free_gtid_118444 = gtid_118444;
    futhark_mc_segmap_parloop_struct_128731.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128731.free_ext_mem_120863 =
        ext_mem_120863.mem;
    futhark_mc_segmap_parloop_struct_128731.free_ext_mem_120864 =
        ext_mem_120864.mem;
    futhark_mc_segmap_parloop_struct_128731.free_ext_120868 = ext_120868;
    futhark_mc_segmap_parloop_struct_128731.free_mem_120881 = mem_120881.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128732_task;
    
    futhark_mc_segmap_parloop_128732_task.name =
        "futhark_mc_segmap_parloop_128732";
    futhark_mc_segmap_parloop_128732_task.fn = futhark_mc_segmap_parloop_128732;
    futhark_mc_segmap_parloop_128732_task.args =
        &futhark_mc_segmap_parloop_struct_128731;
    futhark_mc_segmap_parloop_128732_task.iterations = iterations;
    futhark_mc_segmap_parloop_128732_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128732_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128732_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128732_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128732_task);
    
    if (futhark_mc_segmap_parloop_128732_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128732_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128732_total_end -
                 futhark_mc_segmap_parloop_128732_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128732_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128732_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128732_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128730_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128730_end -
                 futhark_mc_segmap_task_128730_start;
        
        ctx->futhark_mc_segmap_task_128730_runs[tid]++;
        ctx->futhark_mc_segmap_task_128730_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128730_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128727(void *args, int64_t start,
                                            int64_t end, int flat_tid_118443,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128726
    *futhark_mc_segmap_parloop_struct_128726 =
    (struct futhark_mc_segmap_parloop_struct_128726 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128726->ctx;
    uint64_t futhark_mc_segmap_parloop_128727_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128727_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128726->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128726->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128726->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128726->free_bytes_119421;
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_segmap_parloop_struct_128726->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_segmap_parloop_struct_128726->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 =
            futhark_mc_segmap_parloop_struct_128726->free_ext_120868;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128726->free_mem_120900,
                                  .size =0, .references =NULL};
    size_t mem_120881_cached_sizze_128728 = 0;
    char *mem_120881 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127608 = start;
    
    if (mem_120881_cached_sizze_128728 < (size_t) bytes_119421) {
        mem_120881 = realloc(mem_120881, bytes_119421);
        mem_120881_cached_sizze_128728 = bytes_119421;
    }
    for (; iter_127608 < end; iter_127608++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127617 = m_112519;
        int64_t gtid_118444 = iter_127608;
        int64_t remnant_127618 = iter_127608 - gtid_118444;
        int64_t flat_tid_118445 = (int64_t) 0;
        int32_t num_tasks_127619;
        struct futhark_mc_task_128729 futhark_mc_task_128729;
        
        futhark_mc_task_128729.ctx = ctx;
        futhark_mc_task_128729.free_n_112520 = n_112520;
        futhark_mc_task_128729.free_gtid_118444 = gtid_118444;
        futhark_mc_task_128729.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128729.free_ext_mem_120863 = ext_mem_120863.mem;
        futhark_mc_task_128729.free_ext_mem_120864 = ext_mem_120864.mem;
        futhark_mc_task_128729.free_ext_120868 = ext_120868;
        futhark_mc_task_128729.free_mem_120881 = mem_120881;
        
        struct scheduler_segop futhark_mc_task_128729_task;
        
        futhark_mc_task_128729_task.args = &futhark_mc_task_128729;
        futhark_mc_task_128729_task.top_level_fn =
            futhark_mc_segmap_task_128730;
        futhark_mc_task_128729_task.name = "futhark_mc_segmap_task_128730";
        futhark_mc_task_128729_task.iterations = n_112520;
        futhark_mc_task_128729_task.task_time =
            &ctx->futhark_mc_segmap_task_128730_total_time;
        futhark_mc_task_128729_task.task_iter =
            &ctx->futhark_mc_segmap_task_128730_total_iter;
        futhark_mc_task_128729_task.sched = STATIC;
        futhark_mc_task_128729_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128730_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128729_task);
        
        if (futhark_mc_segmap_task_128730_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120900.mem + gtid_118444 * n_112520 * (int64_t) 4,
                mem_120881 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120881);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128727_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128727_end -
                 futhark_mc_segmap_parloop_128727_start;
        
        ctx->futhark_mc_segmap_parloop_128727_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128727_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128727_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128725(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118443 = tid;
    int num_tasks_127592 = info.nsubtasks;
    struct futhark_mc_task_128720 *futhark_mc_task_128720 =
                                  (struct futhark_mc_task_128720 *) args;
    struct futhark_context *ctx = futhark_mc_task_128720->ctx;
    uint64_t futhark_mc_segmap_nested_task_128725_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128725_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128720->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128720->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128720->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128720->free_bytes_119421;
    struct memblock ext_mem_120863 = {.desc ="ext_mem_120863", .mem =
                                      futhark_mc_task_128720->free_ext_mem_120863,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120864 = {.desc ="ext_mem_120864", .mem =
                                      futhark_mc_task_128720->free_ext_mem_120864,
                                      .size =0, .references =NULL};
    int64_t ext_120868 = futhark_mc_task_128720->free_ext_120868;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128720->free_mem_120900,
                                  .size =0, .references =NULL};
    int64_t iter_127608;
    struct futhark_mc_segmap_parloop_struct_128726
    futhark_mc_segmap_parloop_struct_128726;
    
    futhark_mc_segmap_parloop_struct_128726.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128726.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128726.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128726.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128726.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128726.free_ext_mem_120863 =
        ext_mem_120863.mem;
    futhark_mc_segmap_parloop_struct_128726.free_ext_mem_120864 =
        ext_mem_120864.mem;
    futhark_mc_segmap_parloop_struct_128726.free_ext_120868 = ext_120868;
    futhark_mc_segmap_parloop_struct_128726.free_mem_120900 = mem_120900.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128727_task;
    
    futhark_mc_segmap_parloop_128727_task.name =
        "futhark_mc_segmap_parloop_128727";
    futhark_mc_segmap_parloop_128727_task.fn = futhark_mc_segmap_parloop_128727;
    futhark_mc_segmap_parloop_128727_task.args =
        &futhark_mc_segmap_parloop_struct_128726;
    futhark_mc_segmap_parloop_128727_task.iterations = iterations;
    futhark_mc_segmap_parloop_128727_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128727_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128727_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128727_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128727_task);
    
    if (futhark_mc_segmap_parloop_128727_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128727_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128727_total_end -
                 futhark_mc_segmap_parloop_128727_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128727_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128727_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128727_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128725_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128725_end -
                 futhark_mc_segmap_nested_task_128725_start;
        
        ctx->futhark_mc_segmap_nested_task_128725_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128725_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128725_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128733 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_120922;
};
struct futhark_mc_segmap_parloop_struct_128735 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_120922;
};
static int futhark_mc_segmap_parloop_128736(void *args, int64_t start,
                                            int64_t end, int flat_tid_118459,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128735
    *futhark_mc_segmap_parloop_struct_128735 =
    (struct futhark_mc_segmap_parloop_struct_128735 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128735->ctx;
    uint64_t futhark_mc_segmap_parloop_128736_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128736_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128735->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128735->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128735->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128735->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128735->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_segmap_parloop_struct_128735->free_mem_120922,
                                  .size =0, .references =NULL};
    size_t mem_120906_cached_sizze_128737 = 0;
    char *mem_120906 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127625 = start;
    
    if (mem_120906_cached_sizze_128737 < (size_t) bytes_119421) {
        mem_120906 = realloc(mem_120906, bytes_119421);
        mem_120906_cached_sizze_128737 = bytes_119421;
    }
    for (; iter_127625 < end; iter_127625++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127636 = m_112519;
        int64_t gtid_118460 = iter_127625;
        int64_t remnant_127637 = iter_127625 - gtid_118460;
        
        for (int64_t i_127626 = 0; i_127626 < n_112520; i_127626++) {
            int64_t x_127628 = ((int64_t *) mem_119417.mem)[gtid_118460 *
                                                            n_112520 +
                                                            i_127626];
            bool cond_127629 = sle64((int64_t) 0, x_127628);
            float defunc_0_f_res_127630;
            
            if (cond_127629) {
                bool y_127631 = slt64(x_127628, n_112520);
                bool bounds_check_127632 = cond_127629 && y_127631;
                bool index_certs_127633;
                
                if (!bounds_check_127632) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_127628,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112520, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_127634 =
                      ((float *) mem_120900.mem)[gtid_118460 * n_112520 +
                                                 x_127628];
                
                defunc_0_f_res_127630 = defunc_0_f_res_t_res_127634;
            } else {
                defunc_0_f_res_127630 = INFINITY;
            }
            ((float *) mem_120906)[i_127626] = defunc_0_f_res_127630;
        }
        memmove(mem_120922.mem + gtid_118460 * n_112520 * (int64_t) 4,
                mem_120906 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120906);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128736_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128736_end -
                 futhark_mc_segmap_parloop_128736_start;
        
        ctx->futhark_mc_segmap_parloop_128736_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128736_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128736_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128734(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118459 = tid;
    int num_tasks_127624 = info.nsubtasks;
    struct futhark_mc_task_128733 *futhark_mc_task_128733 =
                                  (struct futhark_mc_task_128733 *) args;
    struct futhark_context *ctx = futhark_mc_task_128733->ctx;
    uint64_t futhark_mc_segmap_task_128734_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128734_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128733->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128733->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128733->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128733->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128733->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_task_128733->free_mem_120922,
                                  .size =0, .references =NULL};
    int64_t iter_127625;
    struct futhark_mc_segmap_parloop_struct_128735
    futhark_mc_segmap_parloop_struct_128735;
    
    futhark_mc_segmap_parloop_struct_128735.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128735.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128735.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128735.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128735.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128735.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128735.free_mem_120922 = mem_120922.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128736_task;
    
    futhark_mc_segmap_parloop_128736_task.name =
        "futhark_mc_segmap_parloop_128736";
    futhark_mc_segmap_parloop_128736_task.fn = futhark_mc_segmap_parloop_128736;
    futhark_mc_segmap_parloop_128736_task.args =
        &futhark_mc_segmap_parloop_struct_128735;
    futhark_mc_segmap_parloop_128736_task.iterations = iterations;
    futhark_mc_segmap_parloop_128736_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128736_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128736_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128736_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128736_task);
    
    if (futhark_mc_segmap_parloop_128736_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128736_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128736_total_end -
                 futhark_mc_segmap_parloop_128736_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128736_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128736_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128736_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128734_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128734_end -
                 futhark_mc_segmap_task_128734_start;
        
        ctx->futhark_mc_segmap_task_128734_runs[tid]++;
        ctx->futhark_mc_segmap_task_128734_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128734_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128739 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_mem_119417;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_120922;
};
struct futhark_mc_task_128742 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118462;
    char *free_mem_119417;
    char *free_mem_120900;
    char *free_mem_120903;
};
struct futhark_mc_segmap_parloop_struct_128744 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118462;
    char *free_mem_119417;
    char *free_mem_120900;
    char *free_mem_120903;
};
static int futhark_mc_segmap_parloop_128745(void *args, int64_t start,
                                            int64_t end, int flat_tid_118463,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128744
    *futhark_mc_segmap_parloop_struct_128744 =
    (struct futhark_mc_segmap_parloop_struct_128744 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128744->ctx;
    uint64_t futhark_mc_segmap_parloop_128745_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128745_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128744->free_n_112520;
    int64_t gtid_118462 =
            futhark_mc_segmap_parloop_struct_128744->free_gtid_118462;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128744->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128744->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120903 = {.desc ="mem_120903", .mem =
                                  futhark_mc_segmap_parloop_struct_128744->free_mem_120903,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127650 = start;
    
    for (; iter_127650 < end; iter_127650++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127655 = n_112520;
        int64_t gtid_118464 = iter_127650;
        int64_t remnant_127656 = iter_127650 - gtid_118464;
        int64_t x_127640 = ((int64_t *) mem_119417.mem)[gtid_118462 * n_112520 +
                                                        gtid_118464];
        bool cond_127641 = sle64((int64_t) 0, x_127640);
        float defunc_0_f_res_127642;
        
        if (cond_127641) {
            bool y_127651 = slt64(x_127640, n_112520);
            bool bounds_check_127652 = cond_127641 && y_127651;
            bool index_certs_127653;
            
            if (!bounds_check_127652) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_127640,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_127654 =
                  ((float *) mem_120900.mem)[gtid_118462 * n_112520 + x_127640];
            
            defunc_0_f_res_127642 = defunc_0_f_res_t_res_127654;
        } else {
            defunc_0_f_res_127642 = INFINITY;
        }
        ((float *) mem_120903.mem)[gtid_118464] = defunc_0_f_res_127642;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128745_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128745_end -
                 futhark_mc_segmap_parloop_128745_start;
        
        ctx->futhark_mc_segmap_parloop_128745_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128745_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128745_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128743(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118463 = tid;
    int num_tasks_127649 = info.nsubtasks;
    struct futhark_mc_task_128742 *futhark_mc_task_128742 =
                                  (struct futhark_mc_task_128742 *) args;
    struct futhark_context *ctx = futhark_mc_task_128742->ctx;
    uint64_t futhark_mc_segmap_task_128743_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128743_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128742->free_n_112520;
    int64_t gtid_118462 = futhark_mc_task_128742->free_gtid_118462;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128742->free_mem_119417,
                                  .size =0, .references =NULL};
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128742->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120903 = {.desc ="mem_120903", .mem =
                                  futhark_mc_task_128742->free_mem_120903,
                                  .size =0, .references =NULL};
    int64_t iter_127650;
    struct futhark_mc_segmap_parloop_struct_128744
    futhark_mc_segmap_parloop_struct_128744;
    
    futhark_mc_segmap_parloop_struct_128744.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128744.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128744.free_gtid_118462 = gtid_118462;
    futhark_mc_segmap_parloop_struct_128744.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128744.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128744.free_mem_120903 = mem_120903.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128745_task;
    
    futhark_mc_segmap_parloop_128745_task.name =
        "futhark_mc_segmap_parloop_128745";
    futhark_mc_segmap_parloop_128745_task.fn = futhark_mc_segmap_parloop_128745;
    futhark_mc_segmap_parloop_128745_task.args =
        &futhark_mc_segmap_parloop_struct_128744;
    futhark_mc_segmap_parloop_128745_task.iterations = iterations;
    futhark_mc_segmap_parloop_128745_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128745_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128745_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128745_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128745_task);
    
    if (futhark_mc_segmap_parloop_128745_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128745_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128745_total_end -
                 futhark_mc_segmap_parloop_128745_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128743_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128743_end -
                 futhark_mc_segmap_task_128743_start;
        
        ctx->futhark_mc_segmap_task_128743_runs[tid]++;
        ctx->futhark_mc_segmap_task_128743_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128743_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128740(void *args, int64_t start,
                                            int64_t end, int flat_tid_118461,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128739
    *futhark_mc_segmap_parloop_struct_128739 =
    (struct futhark_mc_segmap_parloop_struct_128739 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128739->ctx;
    uint64_t futhark_mc_segmap_parloop_128740_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128740_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128739->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128739->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_segmap_parloop_struct_128739->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128739->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128739->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_segmap_parloop_struct_128739->free_mem_120922,
                                  .size =0, .references =NULL};
    size_t mem_120903_cached_sizze_128741 = 0;
    char *mem_120903 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127639 = start;
    
    if (mem_120903_cached_sizze_128741 < (size_t) bytes_119421) {
        mem_120903 = realloc(mem_120903, bytes_119421);
        mem_120903_cached_sizze_128741 = bytes_119421;
    }
    for (; iter_127639 < end; iter_127639++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127647 = m_112519;
        int64_t gtid_118462 = iter_127639;
        int64_t remnant_127648 = iter_127639 - gtid_118462;
        int64_t flat_tid_118463 = (int64_t) 0;
        int32_t num_tasks_127649;
        struct futhark_mc_task_128742 futhark_mc_task_128742;
        
        futhark_mc_task_128742.ctx = ctx;
        futhark_mc_task_128742.free_n_112520 = n_112520;
        futhark_mc_task_128742.free_gtid_118462 = gtid_118462;
        futhark_mc_task_128742.free_mem_119417 = mem_119417.mem;
        futhark_mc_task_128742.free_mem_120900 = mem_120900.mem;
        futhark_mc_task_128742.free_mem_120903 = mem_120903;
        
        struct scheduler_segop futhark_mc_task_128742_task;
        
        futhark_mc_task_128742_task.args = &futhark_mc_task_128742;
        futhark_mc_task_128742_task.top_level_fn =
            futhark_mc_segmap_task_128743;
        futhark_mc_task_128742_task.name = "futhark_mc_segmap_task_128743";
        futhark_mc_task_128742_task.iterations = n_112520;
        futhark_mc_task_128742_task.task_time =
            &ctx->futhark_mc_segmap_task_128743_total_time;
        futhark_mc_task_128742_task.task_iter =
            &ctx->futhark_mc_segmap_task_128743_total_iter;
        futhark_mc_task_128742_task.sched = STATIC;
        futhark_mc_task_128742_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128743_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128742_task);
        
        if (futhark_mc_segmap_task_128743_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120922.mem + gtid_118462 * n_112520 * (int64_t) 4,
                mem_120903 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120903);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128740_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128740_end -
                 futhark_mc_segmap_parloop_128740_start;
        
        ctx->futhark_mc_segmap_parloop_128740_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128740_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128740_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128738(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118461 = tid;
    int num_tasks_127624 = info.nsubtasks;
    struct futhark_mc_task_128733 *futhark_mc_task_128733 =
                                  (struct futhark_mc_task_128733 *) args;
    struct futhark_context *ctx = futhark_mc_task_128733->ctx;
    uint64_t futhark_mc_segmap_nested_task_128738_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128738_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128733->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128733->free_n_112520;
    struct memblock mem_119417 = {.desc ="mem_119417", .mem =
                                  futhark_mc_task_128733->free_mem_119417,
                                  .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128733->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128733->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_task_128733->free_mem_120922,
                                  .size =0, .references =NULL};
    int64_t iter_127639;
    struct futhark_mc_segmap_parloop_struct_128739
    futhark_mc_segmap_parloop_struct_128739;
    
    futhark_mc_segmap_parloop_struct_128739.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128739.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128739.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128739.free_mem_119417 = mem_119417.mem;
    futhark_mc_segmap_parloop_struct_128739.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128739.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128739.free_mem_120922 = mem_120922.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128740_task;
    
    futhark_mc_segmap_parloop_128740_task.name =
        "futhark_mc_segmap_parloop_128740";
    futhark_mc_segmap_parloop_128740_task.fn = futhark_mc_segmap_parloop_128740;
    futhark_mc_segmap_parloop_128740_task.args =
        &futhark_mc_segmap_parloop_struct_128739;
    futhark_mc_segmap_parloop_128740_task.iterations = iterations;
    futhark_mc_segmap_parloop_128740_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128740_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128740_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128740_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128740_task);
    
    if (futhark_mc_segmap_parloop_128740_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128740_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128740_total_end -
                 futhark_mc_segmap_parloop_128740_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128740_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128740_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128740_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128738_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128738_end -
                 futhark_mc_segmap_nested_task_128738_start;
        
        ctx->futhark_mc_segmap_nested_task_128738_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128738_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128738_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128746 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    int32_t free_iters_114509;
    int64_t free_bytes_119378;
    int64_t free_bytes_119421;
    char *free_mem_120922;
    char *free_mem_121076;
    int64_t free_double_buffer_sizze_121220;
    int64_t free_double_buffer_sizze_121224;
};
struct futhark_mc_segmap_parloop_struct_128748 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    int32_t free_iters_114509;
    int64_t free_bytes_119378;
    int64_t free_bytes_119421;
    char *free_mem_120922;
    char *free_mem_121076;
    int64_t free_double_buffer_sizze_121224;
};
static int futhark_mc_segmap_parloop_128749(void *args, int64_t start,
                                            int64_t end, int flat_tid_118475,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128748
    *futhark_mc_segmap_parloop_struct_128748 =
    (struct futhark_mc_segmap_parloop_struct_128748 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128748->ctx;
    uint64_t futhark_mc_segmap_parloop_128749_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128749_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128748->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128748->free_n_112520;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128748->free_i_112596;
    int32_t iters_114509 =
            futhark_mc_segmap_parloop_struct_128748->free_iters_114509;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128748->free_bytes_119378;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128748->free_bytes_119421;
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_segmap_parloop_struct_128748->free_mem_120922,
                                  .size =0, .references =NULL};
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_segmap_parloop_struct_128748->free_mem_121076,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121224 =
            futhark_mc_segmap_parloop_struct_128748->free_double_buffer_sizze_121224;
    size_t mem_120980_cached_sizze_128750 = 0;
    char *mem_120980 = NULL;
    size_t mem_120983_cached_sizze_128751 = 0;
    char *mem_120983 = NULL;
    size_t mem_120986_cached_sizze_128752 = 0;
    char *mem_120986 = NULL;
    size_t mem_120989_cached_sizze_128753 = 0;
    char *mem_120989 = NULL;
    size_t mem_120992_cached_sizze_128754 = 0;
    char *mem_120992 = NULL;
    size_t mem_121055_cached_sizze_128755 = 0;
    char *mem_121055 = NULL;
    size_t double_buffer_mem_121222_cached_sizze_128756 = 0;
    char *double_buffer_mem_121222 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127658 = start;
    
    if (mem_120980_cached_sizze_128750 < (size_t) bytes_119378) {
        mem_120980 = realloc(mem_120980, bytes_119378);
        mem_120980_cached_sizze_128750 = bytes_119378;
    }
    if (mem_120983_cached_sizze_128751 < (size_t) bytes_119378) {
        mem_120983 = realloc(mem_120983, bytes_119378);
        mem_120983_cached_sizze_128751 = bytes_119378;
    }
    if (mem_120986_cached_sizze_128752 < (size_t) bytes_119378) {
        mem_120986 = realloc(mem_120986, bytes_119378);
        mem_120986_cached_sizze_128752 = bytes_119378;
    }
    if (mem_120989_cached_sizze_128753 < (size_t) bytes_119378) {
        mem_120989 = realloc(mem_120989, bytes_119378);
        mem_120989_cached_sizze_128753 = bytes_119378;
    }
    if (mem_120992_cached_sizze_128754 < (size_t) bytes_119421) {
        mem_120992 = realloc(mem_120992, bytes_119421);
        mem_120992_cached_sizze_128754 = bytes_119421;
    }
    if (double_buffer_mem_121222_cached_sizze_128756 <
        (size_t) double_buffer_sizze_121224) {
        double_buffer_mem_121222 = realloc(double_buffer_mem_121222,
                                           double_buffer_sizze_121224);
        double_buffer_mem_121222_cached_sizze_128756 =
            double_buffer_sizze_121224;
    }
    if (mem_121055_cached_sizze_128755 < (size_t) bytes_119421) {
        mem_121055 = realloc(mem_121055, bytes_119421);
        mem_121055_cached_sizze_128755 = bytes_119421;
    }
    for (; iter_127658 < end; iter_127658++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127762 = m_112519;
        int64_t gtid_118476 = iter_127658;
        int64_t remnant_127763 = iter_127658 - gtid_118476;
        
        memmove(double_buffer_mem_121222 + (int64_t) 0, mem_120922.mem +
                gtid_118476 * n_112520 * (int64_t) 4, n_112520 * (int64_t) 4);
        for (int32_t i_127659 = 0; i_127659 < iters_114509; i_127659++) {
            int32_t defunc_2_radix_sort_step_arg_127661 = mul32(2, i_127659);
            int32_t defunc_0_get_bit_arg_127662 = add32(1,
                                                        defunc_2_radix_sort_step_arg_127661);
            bool cond_f_res_127663 = defunc_0_get_bit_arg_127662 == 31;
            bool cond_f_res_127664 = defunc_2_radix_sort_step_arg_127661 == 31;
            int64_t discard_127670;
            int64_t discard_127671;
            int64_t discard_127672;
            int64_t discard_127673;
            int64_t scanacc_127680;
            int64_t scanacc_127681;
            int64_t scanacc_127682;
            int64_t scanacc_127683;
            
            scanacc_127680 = (int64_t) 0;
            scanacc_127681 = (int64_t) 0;
            scanacc_127682 = (int64_t) 0;
            scanacc_127683 = (int64_t) 0;
            for (int64_t i_127679 = 0; i_127679 < n_112520; i_127679++) {
                float x_127689 = ((float *) double_buffer_mem_121222)[i_127679];
                int32_t i32_arg_127690;
                
                i32_arg_127690 = futrts_to_bits32(x_127689);
                
                int32_t unsign_arg_127691 = ashr32(i32_arg_127690,
                                                   defunc_0_get_bit_arg_127662);
                int32_t unsign_arg_127692 = 1 & unsign_arg_127691;
                int32_t unsign_arg_127693 = ashr32(i32_arg_127690, 31);
                int32_t unsign_arg_127694 = 1 & unsign_arg_127693;
                bool cond_127695 = unsign_arg_127694 == 1;
                bool x_127696 = !cond_127695;
                bool y_127697 = cond_f_res_127663 && x_127696;
                bool cond_127698 = cond_127695 || y_127697;
                int32_t defunc_1_get_bit_res_127699;
                
                if (cond_127698) {
                    int32_t defunc_1_get_bit_res_t_res_127700 = 1 ^
                            unsign_arg_127692;
                    
                    defunc_1_get_bit_res_127699 =
                        defunc_1_get_bit_res_t_res_127700;
                } else {
                    defunc_1_get_bit_res_127699 = unsign_arg_127692;
                }
                
                int32_t x_127701 = mul32(2, defunc_1_get_bit_res_127699);
                int32_t unsign_arg_127702 = ashr32(i32_arg_127690,
                                                   defunc_2_radix_sort_step_arg_127661);
                int32_t unsign_arg_127703 = 1 & unsign_arg_127702;
                bool y_127704 = cond_f_res_127664 && x_127696;
                bool cond_127705 = cond_127695 || y_127704;
                int32_t defunc_1_get_bit_res_127706;
                
                if (cond_127705) {
                    int32_t defunc_1_get_bit_res_t_res_127707 = 1 ^
                            unsign_arg_127703;
                    
                    defunc_1_get_bit_res_127706 =
                        defunc_1_get_bit_res_t_res_127707;
                } else {
                    defunc_1_get_bit_res_127706 = unsign_arg_127703;
                }
                
                int32_t defunc_0_f_res_127708 = add32(x_127701,
                                                      defunc_1_get_bit_res_127706);
                bool cond_127709 = defunc_0_f_res_127708 == 0;
                int64_t defunc_0_f_res_127710 = btoi_bool_i64(cond_127709);
                int64_t defunc_0_f_res_127711;
                int64_t defunc_0_f_res_127712;
                int64_t defunc_0_f_res_127713;
                
                if (cond_127709) {
                    defunc_0_f_res_127711 = (int64_t) 0;
                    defunc_0_f_res_127712 = (int64_t) 0;
                    defunc_0_f_res_127713 = (int64_t) 0;
                } else {
                    bool cond_127714 = defunc_0_f_res_127708 == 1;
                    int64_t defunc_0_f_res_f_res_127715 =
                            btoi_bool_i64(cond_127714);
                    int64_t defunc_0_f_res_f_res_127716;
                    int64_t defunc_0_f_res_f_res_127717;
                    
                    if (cond_127714) {
                        defunc_0_f_res_f_res_127716 = (int64_t) 0;
                        defunc_0_f_res_f_res_127717 = (int64_t) 0;
                    } else {
                        bool cond_127718 = defunc_0_f_res_127708 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_127719 =
                                btoi_bool_i64(cond_127718);
                        bool cond_neg_127720 = !cond_127718;
                        int64_t defunc_0_f_res_f_res_f_res_127721 =
                                btoi_bool_i64(cond_neg_127720);
                        
                        defunc_0_f_res_f_res_127716 =
                            defunc_0_f_res_f_res_f_res_127719;
                        defunc_0_f_res_f_res_127717 =
                            defunc_0_f_res_f_res_f_res_127721;
                    }
                    defunc_0_f_res_127711 = defunc_0_f_res_f_res_127715;
                    defunc_0_f_res_127712 = defunc_0_f_res_f_res_127716;
                    defunc_0_f_res_127713 = defunc_0_f_res_f_res_127717;
                }
                
                int64_t defunc_1_op_res_127722 = add64(defunc_0_f_res_127710,
                                                       scanacc_127680);
                int64_t defunc_1_op_res_127723 = add64(defunc_0_f_res_127711,
                                                       scanacc_127681);
                int64_t defunc_1_op_res_127724 = add64(defunc_0_f_res_127712,
                                                       scanacc_127682);
                int64_t defunc_1_op_res_127725 = add64(defunc_0_f_res_127713,
                                                       scanacc_127683);
                
                ((int64_t *) mem_120980)[i_127679] = defunc_1_op_res_127722;
                ((int64_t *) mem_120983)[i_127679] = defunc_1_op_res_127723;
                ((int64_t *) mem_120986)[i_127679] = defunc_1_op_res_127724;
                ((int64_t *) mem_120989)[i_127679] = defunc_1_op_res_127725;
                ((int32_t *) mem_120992)[i_127679] = defunc_0_f_res_127708;
                
                int64_t scanacc_tmp_127765 = defunc_1_op_res_127722;
                int64_t scanacc_tmp_127766 = defunc_1_op_res_127723;
                int64_t scanacc_tmp_127767 = defunc_1_op_res_127724;
                int64_t scanacc_tmp_127768 = defunc_1_op_res_127725;
                
                scanacc_127680 = scanacc_tmp_127765;
                scanacc_127681 = scanacc_tmp_127766;
                scanacc_127682 = scanacc_tmp_127767;
                scanacc_127683 = scanacc_tmp_127768;
            }
            discard_127670 = scanacc_127680;
            discard_127671 = scanacc_127681;
            discard_127672 = scanacc_127682;
            discard_127673 = scanacc_127683;
            
            int64_t last_res_127731 = ((int64_t *) mem_120980)[i_112596];
            int64_t last_res_127732 = ((int64_t *) mem_120983)[i_112596];
            int64_t last_res_127733 = ((int64_t *) mem_120986)[i_112596];
            
            memmove(mem_121055 + (int64_t) 0, double_buffer_mem_121222 +
                    (int64_t) 0, n_112520 * (int64_t) 4);
            for (int64_t write_iter_127736 = 0; write_iter_127736 < n_112520;
                 write_iter_127736++) {
                int32_t write_iv_127738 =
                        ((int32_t *) mem_120992)[write_iter_127736];
                bool match_lit_127739 = 0 == write_iv_127738;
                int64_t defunc_1_f_res_127740;
                
                if (match_lit_127739) {
                    int64_t write_iv_127741 =
                            ((int64_t *) mem_120980)[write_iter_127736];
                    int64_t case_res_127742 = sub64(write_iv_127741,
                                                    (int64_t) 1);
                    
                    defunc_1_f_res_127740 = case_res_127742;
                } else {
                    bool match_lit_127743 = 1 == write_iv_127738;
                    int64_t x_127744;
                    
                    if (match_lit_127743) {
                        int64_t write_iv_127745 =
                                ((int64_t *) mem_120983)[write_iter_127736];
                        int64_t x_127746 = add64(last_res_127731,
                                                 write_iv_127745);
                        int64_t case_res_127747 = sub64(x_127746, (int64_t) 1);
                        
                        x_127744 = case_res_127747;
                    } else {
                        bool match_lit_127748 = 2 == write_iv_127738;
                        int64_t x_127749;
                        
                        if (match_lit_127748) {
                            int64_t write_iv_127750 =
                                    ((int64_t *) mem_120986)[write_iter_127736];
                            int64_t x_127751 = add64(last_res_127731,
                                                     last_res_127732);
                            int64_t x_127752 = add64(x_127751, write_iv_127750);
                            int64_t case_res_127753 = sub64(x_127752,
                                                            (int64_t) 1);
                            
                            x_127749 = case_res_127753;
                        } else {
                            int64_t write_iv_127754 =
                                    ((int64_t *) mem_120989)[write_iter_127736];
                            int64_t x_127755 = add64(last_res_127731,
                                                     last_res_127732);
                            int64_t x_127756 = add64(last_res_127733, x_127755);
                            int64_t x_127757 = add64(x_127756, write_iv_127754);
                            int64_t defunc_1_f_res_res_127758 = sub64(x_127757,
                                                                      (int64_t) 1);
                            
                            x_127749 = defunc_1_f_res_res_127758;
                        }
                        x_127744 = x_127749;
                    }
                    defunc_1_f_res_127740 = x_127744;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_127740) &&
                    slt64(defunc_1_f_res_127740, n_112520)) {
                    memmove(mem_121055 + defunc_1_f_res_127740 * (int64_t) 4,
                            double_buffer_mem_121222 + write_iter_127736 *
                            (int64_t) 4, (int64_t) 4);
                }
            }
            memmove(double_buffer_mem_121222 + (int64_t) 0, mem_121055 +
                    (int64_t) 0, n_112520 * (int64_t) 4);
        }
        memmove(mem_121076.mem + gtid_118476 * n_112520 * (int64_t) 4,
                double_buffer_mem_121222 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120980);
    free(mem_120983);
    free(mem_120986);
    free(mem_120989);
    free(mem_120992);
    free(mem_121055);
    free(double_buffer_mem_121222);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128749_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128749_end -
                 futhark_mc_segmap_parloop_128749_start;
        
        ctx->futhark_mc_segmap_parloop_128749_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128749_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128749_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128747(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118475 = tid;
    int num_tasks_127657 = info.nsubtasks;
    struct futhark_mc_task_128746 *futhark_mc_task_128746 =
                                  (struct futhark_mc_task_128746 *) args;
    struct futhark_context *ctx = futhark_mc_task_128746->ctx;
    uint64_t futhark_mc_segmap_task_128747_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128747_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128746->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128746->free_n_112520;
    int64_t i_112596 = futhark_mc_task_128746->free_i_112596;
    int32_t iters_114509 = futhark_mc_task_128746->free_iters_114509;
    int64_t bytes_119378 = futhark_mc_task_128746->free_bytes_119378;
    int64_t bytes_119421 = futhark_mc_task_128746->free_bytes_119421;
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_task_128746->free_mem_120922,
                                  .size =0, .references =NULL};
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_task_128746->free_mem_121076,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121220 =
            futhark_mc_task_128746->free_double_buffer_sizze_121220;
    int64_t double_buffer_sizze_121224 =
            futhark_mc_task_128746->free_double_buffer_sizze_121224;
    int64_t iter_127658;
    struct futhark_mc_segmap_parloop_struct_128748
    futhark_mc_segmap_parloop_struct_128748;
    
    futhark_mc_segmap_parloop_struct_128748.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128748.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128748.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128748.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128748.free_iters_114509 = iters_114509;
    futhark_mc_segmap_parloop_struct_128748.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128748.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128748.free_mem_120922 = mem_120922.mem;
    futhark_mc_segmap_parloop_struct_128748.free_mem_121076 = mem_121076.mem;
    futhark_mc_segmap_parloop_struct_128748.free_double_buffer_sizze_121224 =
        double_buffer_sizze_121224;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128749_task;
    
    futhark_mc_segmap_parloop_128749_task.name =
        "futhark_mc_segmap_parloop_128749";
    futhark_mc_segmap_parloop_128749_task.fn = futhark_mc_segmap_parloop_128749;
    futhark_mc_segmap_parloop_128749_task.args =
        &futhark_mc_segmap_parloop_struct_128748;
    futhark_mc_segmap_parloop_128749_task.iterations = iterations;
    futhark_mc_segmap_parloop_128749_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128749_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128749_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128749_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128749_task);
    
    if (futhark_mc_segmap_parloop_128749_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128749_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128749_total_end -
                 futhark_mc_segmap_parloop_128749_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128749_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128749_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128749_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128747_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128747_end -
                 futhark_mc_segmap_task_128747_start;
        
        ctx->futhark_mc_segmap_task_128747_runs[tid]++;
        ctx->futhark_mc_segmap_task_128747_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128747_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128758 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_i_112596;
    int32_t free_iters_114509;
    int64_t free_bytes_119378;
    int64_t free_bytes_119421;
    char *free_mem_120922;
    char *free_mem_121076;
    int64_t free_double_buffer_sizze_121220;
};
struct futhark_mc_task_128767 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    char *free_mem_120940;
    char *free_mem_120943;
    char *free_mem_120946;
    char *free_mem_120949;
    char *free_mem_120952;
    char *free_double_buffer_mem_121218;
    int32_t free_defunc_2_radix_sort_step_arg_127778;
    int32_t free_defunc_0_get_bit_arg_127779;
    bool free_cond_f_res_127780;
    bool free_cond_f_res_127781;
};
struct futhark_mc_scan_stage_1_parloop_struct_128773 {
    struct futhark_context *ctx;
    char *free_mem_120940;
    char *free_mem_120943;
    char *free_mem_120946;
    char *free_mem_120949;
    char *free_mem_120952;
    char *free_double_buffer_mem_121218;
    int32_t free_defunc_2_radix_sort_step_arg_127778;
    int32_t free_defunc_0_get_bit_arg_127779;
    bool free_cond_f_res_127780;
    bool free_cond_f_res_127781;
};
static int futhark_mc_scan_stage_1_parloop_128774(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_118479, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128773
    *futhark_mc_scan_stage_1_parloop_struct_128773 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128773 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128773->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128774_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128774_start = get_wall_time();
    
    struct memblock mem_120940 = {.desc ="mem_120940", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128773->free_mem_120940,
                                  .size =0, .references =NULL};
    struct memblock mem_120943 = {.desc ="mem_120943", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128773->free_mem_120943,
                                  .size =0, .references =NULL};
    struct memblock mem_120946 = {.desc ="mem_120946", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128773->free_mem_120946,
                                  .size =0, .references =NULL};
    struct memblock mem_120949 = {.desc ="mem_120949", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128773->free_mem_120949,
                                  .size =0, .references =NULL};
    struct memblock mem_120952 = {.desc ="mem_120952", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128773->free_mem_120952,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121218 = {.desc =
                                                "double_buffer_mem_121218",
                                                .mem =
                                                futhark_mc_scan_stage_1_parloop_struct_128773->free_double_buffer_mem_121218,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_127778 =
            futhark_mc_scan_stage_1_parloop_struct_128773->free_defunc_2_radix_sort_step_arg_127778;
    int32_t defunc_0_get_bit_arg_127779 =
            futhark_mc_scan_stage_1_parloop_struct_128773->free_defunc_0_get_bit_arg_127779;
    bool cond_f_res_127780 =
         futhark_mc_scan_stage_1_parloop_struct_128773->free_cond_f_res_127780;
    bool cond_f_res_127781 =
         futhark_mc_scan_stage_1_parloop_struct_128773->free_cond_f_res_127781;
    int64_t iterations = end - start;
    int64_t iter_127864 = start;
    int64_t x_127787;
    int64_t x_127788;
    int64_t x_127789;
    int64_t x_127790;
    int64_t x_127791;
    int64_t x_127792;
    int64_t x_127793;
    int64_t x_127794;
    
    x_127787 = (int64_t) 0;
    x_127788 = (int64_t) 0;
    x_127789 = (int64_t) 0;
    x_127790 = (int64_t) 0;
    for (; iter_127864 < end; iter_127864++) {
        int64_t gtid_118480 = iter_127864;
        
        // stage 1 scan body
        {
            float x_127799 =
                  ((float *) double_buffer_mem_121218.mem)[gtid_118480];
            int32_t i32_arg_127800;
            
            i32_arg_127800 = futrts_to_bits32(x_127799);
            
            int32_t unsign_arg_127801 = ashr32(i32_arg_127800,
                                               defunc_0_get_bit_arg_127779);
            int32_t unsign_arg_127802 = 1 & unsign_arg_127801;
            int32_t unsign_arg_127803 = ashr32(i32_arg_127800, 31);
            int32_t unsign_arg_127804 = 1 & unsign_arg_127803;
            bool cond_127805 = unsign_arg_127804 == 1;
            bool x_127806 = !cond_127805;
            bool y_127807 = cond_f_res_127780 && x_127806;
            bool cond_127808 = cond_127805 || y_127807;
            int32_t defunc_1_get_bit_res_127809;
            
            if (cond_127808) {
                int32_t defunc_1_get_bit_res_t_res_127810 = 1 ^
                        unsign_arg_127802;
                
                defunc_1_get_bit_res_127809 = defunc_1_get_bit_res_t_res_127810;
            } else {
                defunc_1_get_bit_res_127809 = unsign_arg_127802;
            }
            
            int32_t x_127811 = mul32(2, defunc_1_get_bit_res_127809);
            int32_t unsign_arg_127812 = ashr32(i32_arg_127800,
                                               defunc_2_radix_sort_step_arg_127778);
            int32_t unsign_arg_127813 = 1 & unsign_arg_127812;
            bool y_127814 = cond_f_res_127781 && x_127806;
            bool cond_127815 = cond_127805 || y_127814;
            int32_t defunc_1_get_bit_res_127816;
            
            if (cond_127815) {
                int32_t defunc_1_get_bit_res_t_res_127817 = 1 ^
                        unsign_arg_127813;
                
                defunc_1_get_bit_res_127816 = defunc_1_get_bit_res_t_res_127817;
            } else {
                defunc_1_get_bit_res_127816 = unsign_arg_127813;
            }
            
            int32_t defunc_0_f_res_127818 = add32(x_127811,
                                                  defunc_1_get_bit_res_127816);
            bool cond_127819 = defunc_0_f_res_127818 == 0;
            int64_t defunc_0_f_res_127820 = btoi_bool_i64(cond_127819);
            int64_t defunc_0_f_res_127821;
            int64_t defunc_0_f_res_127822;
            int64_t defunc_0_f_res_127823;
            
            if (cond_127819) {
                defunc_0_f_res_127821 = (int64_t) 0;
                defunc_0_f_res_127822 = (int64_t) 0;
                defunc_0_f_res_127823 = (int64_t) 0;
            } else {
                bool cond_127824 = defunc_0_f_res_127818 == 1;
                int64_t defunc_0_f_res_f_res_127825 =
                        btoi_bool_i64(cond_127824);
                int64_t defunc_0_f_res_f_res_127826;
                int64_t defunc_0_f_res_f_res_127827;
                
                if (cond_127824) {
                    defunc_0_f_res_f_res_127826 = (int64_t) 0;
                    defunc_0_f_res_f_res_127827 = (int64_t) 0;
                } else {
                    bool cond_127828 = defunc_0_f_res_127818 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_127829 =
                            btoi_bool_i64(cond_127828);
                    bool cond_neg_127830 = !cond_127828;
                    int64_t defunc_0_f_res_f_res_f_res_127831 =
                            btoi_bool_i64(cond_neg_127830);
                    
                    defunc_0_f_res_f_res_127826 =
                        defunc_0_f_res_f_res_f_res_127829;
                    defunc_0_f_res_f_res_127827 =
                        defunc_0_f_res_f_res_f_res_127831;
                }
                defunc_0_f_res_127821 = defunc_0_f_res_f_res_127825;
                defunc_0_f_res_127822 = defunc_0_f_res_f_res_127826;
                defunc_0_f_res_127823 = defunc_0_f_res_f_res_127827;
            }
            // write mapped values results to memory
            {
                ((int32_t *) mem_120952.mem)[gtid_118480] =
                    defunc_0_f_res_127818;
            }
            x_127787 = x_127787;
            x_127788 = x_127788;
            x_127789 = x_127789;
            x_127790 = x_127790;
            // Read next values
            {
                x_127791 = defunc_0_f_res_127820;
                x_127792 = defunc_0_f_res_127821;
                x_127793 = defunc_0_f_res_127822;
                x_127794 = defunc_0_f_res_127823;
            }
            
            int64_t defunc_1_op_res_127795 = add64(x_127787, x_127791);
            int64_t defunc_1_op_res_127796 = add64(x_127788, x_127792);
            int64_t defunc_1_op_res_127797 = add64(x_127789, x_127793);
            int64_t defunc_1_op_res_127798 = add64(x_127790, x_127794);
            
            ((int64_t *) mem_120940.mem)[gtid_118480] = defunc_1_op_res_127795;
            x_127787 = defunc_1_op_res_127795;
            ((int64_t *) mem_120943.mem)[gtid_118480] = defunc_1_op_res_127796;
            x_127788 = defunc_1_op_res_127796;
            ((int64_t *) mem_120946.mem)[gtid_118480] = defunc_1_op_res_127797;
            x_127789 = defunc_1_op_res_127797;
            ((int64_t *) mem_120949.mem)[gtid_118480] = defunc_1_op_res_127798;
            x_127790 = defunc_1_op_res_127798;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128774_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128774_end -
                 futhark_mc_scan_stage_1_parloop_128774_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128774_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128774_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128774_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128775 {
    struct futhark_context *ctx;
    char *free_mem_120940;
    char *free_mem_120943;
    char *free_mem_120946;
    char *free_mem_120949;
    char *free_double_buffer_mem_121218;
    int32_t free_defunc_2_radix_sort_step_arg_127778;
    int32_t free_defunc_0_get_bit_arg_127779;
    bool free_cond_f_res_127780;
    bool free_cond_f_res_127781;
};
static int futhark_mc_scan_stage_3_parloop_128776(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_118479, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128775
    *futhark_mc_scan_stage_3_parloop_struct_128775 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128775 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128775->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128776_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128776_start = get_wall_time();
    
    struct memblock mem_120940 = {.desc ="mem_120940", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128775->free_mem_120940,
                                  .size =0, .references =NULL};
    struct memblock mem_120943 = {.desc ="mem_120943", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128775->free_mem_120943,
                                  .size =0, .references =NULL};
    struct memblock mem_120946 = {.desc ="mem_120946", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128775->free_mem_120946,
                                  .size =0, .references =NULL};
    struct memblock mem_120949 = {.desc ="mem_120949", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128775->free_mem_120949,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121218 = {.desc =
                                                "double_buffer_mem_121218",
                                                .mem =
                                                futhark_mc_scan_stage_3_parloop_struct_128775->free_double_buffer_mem_121218,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_127778 =
            futhark_mc_scan_stage_3_parloop_struct_128775->free_defunc_2_radix_sort_step_arg_127778;
    int32_t defunc_0_get_bit_arg_127779 =
            futhark_mc_scan_stage_3_parloop_struct_128775->free_defunc_0_get_bit_arg_127779;
    bool cond_f_res_127780 =
         futhark_mc_scan_stage_3_parloop_struct_128775->free_cond_f_res_127780;
    bool cond_f_res_127781 =
         futhark_mc_scan_stage_3_parloop_struct_128775->free_cond_f_res_127781;
    int64_t iterations = end - start;
    int64_t iter_127900 = start;
    int64_t x_127888;
    int64_t x_127889;
    int64_t x_127890;
    int64_t x_127891;
    int64_t x_127892;
    int64_t x_127893;
    int64_t x_127894;
    int64_t x_127895;
    
    if (iter_127900 == (int64_t) 0) {
        x_127888 = (int64_t) 0;
    } else {
        x_127888 = ((int64_t *) mem_120940.mem)[iter_127900 - (int64_t) 1];
    }
    if (iter_127900 == (int64_t) 0) {
        x_127889 = (int64_t) 0;
    } else {
        x_127889 = ((int64_t *) mem_120943.mem)[iter_127900 - (int64_t) 1];
    }
    if (iter_127900 == (int64_t) 0) {
        x_127890 = (int64_t) 0;
    } else {
        x_127890 = ((int64_t *) mem_120946.mem)[iter_127900 - (int64_t) 1];
    }
    if (iter_127900 == (int64_t) 0) {
        x_127891 = (int64_t) 0;
    } else {
        x_127891 = ((int64_t *) mem_120949.mem)[iter_127900 - (int64_t) 1];
    }
    for (; iter_127900 < end; iter_127900++) {
        int64_t gtid_118480 = iter_127900;
        
        // stage 3 scan body
        {
            float x_127799 =
                  ((float *) double_buffer_mem_121218.mem)[gtid_118480];
            int32_t i32_arg_127800;
            
            i32_arg_127800 = futrts_to_bits32(x_127799);
            
            int32_t unsign_arg_127801 = ashr32(i32_arg_127800,
                                               defunc_0_get_bit_arg_127779);
            int32_t unsign_arg_127802 = 1 & unsign_arg_127801;
            int32_t unsign_arg_127803 = ashr32(i32_arg_127800, 31);
            int32_t unsign_arg_127804 = 1 & unsign_arg_127803;
            bool cond_127805 = unsign_arg_127804 == 1;
            bool x_127806 = !cond_127805;
            bool y_127807 = cond_f_res_127780 && x_127806;
            bool cond_127808 = cond_127805 || y_127807;
            int32_t defunc_1_get_bit_res_127809;
            
            if (cond_127808) {
                int32_t defunc_1_get_bit_res_t_res_127810 = 1 ^
                        unsign_arg_127802;
                
                defunc_1_get_bit_res_127809 = defunc_1_get_bit_res_t_res_127810;
            } else {
                defunc_1_get_bit_res_127809 = unsign_arg_127802;
            }
            
            int32_t x_127811 = mul32(2, defunc_1_get_bit_res_127809);
            int32_t unsign_arg_127812 = ashr32(i32_arg_127800,
                                               defunc_2_radix_sort_step_arg_127778);
            int32_t unsign_arg_127813 = 1 & unsign_arg_127812;
            bool y_127814 = cond_f_res_127781 && x_127806;
            bool cond_127815 = cond_127805 || y_127814;
            int32_t defunc_1_get_bit_res_127816;
            
            if (cond_127815) {
                int32_t defunc_1_get_bit_res_t_res_127817 = 1 ^
                        unsign_arg_127813;
                
                defunc_1_get_bit_res_127816 = defunc_1_get_bit_res_t_res_127817;
            } else {
                defunc_1_get_bit_res_127816 = unsign_arg_127813;
            }
            
            int32_t defunc_0_f_res_127818 = add32(x_127811,
                                                  defunc_1_get_bit_res_127816);
            bool cond_127819 = defunc_0_f_res_127818 == 0;
            int64_t defunc_0_f_res_127820 = btoi_bool_i64(cond_127819);
            int64_t defunc_0_f_res_127821;
            int64_t defunc_0_f_res_127822;
            int64_t defunc_0_f_res_127823;
            
            if (cond_127819) {
                defunc_0_f_res_127821 = (int64_t) 0;
                defunc_0_f_res_127822 = (int64_t) 0;
                defunc_0_f_res_127823 = (int64_t) 0;
            } else {
                bool cond_127824 = defunc_0_f_res_127818 == 1;
                int64_t defunc_0_f_res_f_res_127825 =
                        btoi_bool_i64(cond_127824);
                int64_t defunc_0_f_res_f_res_127826;
                int64_t defunc_0_f_res_f_res_127827;
                
                if (cond_127824) {
                    defunc_0_f_res_f_res_127826 = (int64_t) 0;
                    defunc_0_f_res_f_res_127827 = (int64_t) 0;
                } else {
                    bool cond_127828 = defunc_0_f_res_127818 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_127829 =
                            btoi_bool_i64(cond_127828);
                    bool cond_neg_127830 = !cond_127828;
                    int64_t defunc_0_f_res_f_res_f_res_127831 =
                            btoi_bool_i64(cond_neg_127830);
                    
                    defunc_0_f_res_f_res_127826 =
                        defunc_0_f_res_f_res_f_res_127829;
                    defunc_0_f_res_f_res_127827 =
                        defunc_0_f_res_f_res_f_res_127831;
                }
                defunc_0_f_res_127821 = defunc_0_f_res_f_res_127825;
                defunc_0_f_res_127822 = defunc_0_f_res_f_res_127826;
                defunc_0_f_res_127823 = defunc_0_f_res_f_res_127827;
            }
            x_127888 = x_127888;
            x_127889 = x_127889;
            x_127890 = x_127890;
            x_127891 = x_127891;
            x_127892 = defunc_0_f_res_127820;
            x_127893 = defunc_0_f_res_127821;
            x_127894 = defunc_0_f_res_127822;
            x_127895 = defunc_0_f_res_127823;
            
            int64_t defunc_1_op_res_127896 = add64(x_127888, x_127892);
            int64_t defunc_1_op_res_127897 = add64(x_127889, x_127893);
            int64_t defunc_1_op_res_127898 = add64(x_127890, x_127894);
            int64_t defunc_1_op_res_127899 = add64(x_127891, x_127895);
            
            ((int64_t *) mem_120940.mem)[gtid_118480] = defunc_1_op_res_127896;
            x_127888 = defunc_1_op_res_127896;
            ((int64_t *) mem_120943.mem)[gtid_118480] = defunc_1_op_res_127897;
            x_127889 = defunc_1_op_res_127897;
            ((int64_t *) mem_120946.mem)[gtid_118480] = defunc_1_op_res_127898;
            x_127890 = defunc_1_op_res_127898;
            ((int64_t *) mem_120949.mem)[gtid_118480] = defunc_1_op_res_127899;
            x_127891 = defunc_1_op_res_127899;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128776_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128776_end -
                 futhark_mc_scan_stage_3_parloop_128776_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128776_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128776_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128776_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128768(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118479 = tid;
    int num_tasks_127863 = info.nsubtasks;
    struct futhark_mc_task_128767 *futhark_mc_task_128767 =
                                  (struct futhark_mc_task_128767 *) args;
    struct futhark_context *ctx = futhark_mc_task_128767->ctx;
    uint64_t futhark_mc_segscan_task_128768_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128768_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128767->free_n_112520;
    struct memblock mem_120940 = {.desc ="mem_120940", .mem =
                                  futhark_mc_task_128767->free_mem_120940,
                                  .size =0, .references =NULL};
    struct memblock mem_120943 = {.desc ="mem_120943", .mem =
                                  futhark_mc_task_128767->free_mem_120943,
                                  .size =0, .references =NULL};
    struct memblock mem_120946 = {.desc ="mem_120946", .mem =
                                  futhark_mc_task_128767->free_mem_120946,
                                  .size =0, .references =NULL};
    struct memblock mem_120949 = {.desc ="mem_120949", .mem =
                                  futhark_mc_task_128767->free_mem_120949,
                                  .size =0, .references =NULL};
    struct memblock mem_120952 = {.desc ="mem_120952", .mem =
                                  futhark_mc_task_128767->free_mem_120952,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121218 = {.desc =
                                                "double_buffer_mem_121218",
                                                .mem =
                                                futhark_mc_task_128767->free_double_buffer_mem_121218,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_127778 =
            futhark_mc_task_128767->free_defunc_2_radix_sort_step_arg_127778;
    int32_t defunc_0_get_bit_arg_127779 =
            futhark_mc_task_128767->free_defunc_0_get_bit_arg_127779;
    bool cond_f_res_127780 = futhark_mc_task_128767->free_cond_f_res_127780;
    bool cond_f_res_127781 = futhark_mc_task_128767->free_cond_f_res_127781;
    size_t scan_stage_2_accum_mem_127879_cached_sizze_128769 = 0;
    char *scan_stage_2_accum_mem_127879 = NULL;
    size_t scan_stage_2_accum_mem_127881_cached_sizze_128770 = 0;
    char *scan_stage_2_accum_mem_127881 = NULL;
    size_t scan_stage_2_accum_mem_127883_cached_sizze_128771 = 0;
    char *scan_stage_2_accum_mem_127883 = NULL;
    size_t scan_stage_2_accum_mem_127885_cached_sizze_128772 = 0;
    char *scan_stage_2_accum_mem_127885 = NULL;
    int64_t iter_127864;
    struct futhark_mc_scan_stage_1_parloop_struct_128773
    futhark_mc_scan_stage_1_parloop_struct_128773;
    
    futhark_mc_scan_stage_1_parloop_struct_128773.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_mem_120940 =
        mem_120940.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_mem_120943 =
        mem_120943.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_mem_120946 =
        mem_120946.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_mem_120949 =
        mem_120949.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_mem_120952 =
        mem_120952.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_double_buffer_mem_121218 =
        double_buffer_mem_121218.mem;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_defunc_2_radix_sort_step_arg_127778 =
        defunc_2_radix_sort_step_arg_127778;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_defunc_0_get_bit_arg_127779 =
        defunc_0_get_bit_arg_127779;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_cond_f_res_127780 =
        cond_f_res_127780;
    futhark_mc_scan_stage_1_parloop_struct_128773.free_cond_f_res_127781 =
        cond_f_res_127781;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128774_task;
    
    futhark_mc_scan_stage_1_parloop_128774_task.name =
        "futhark_mc_scan_stage_1_parloop_128774";
    futhark_mc_scan_stage_1_parloop_128774_task.fn =
        futhark_mc_scan_stage_1_parloop_128774;
    futhark_mc_scan_stage_1_parloop_128774_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128773;
    futhark_mc_scan_stage_1_parloop_128774_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128774_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128774_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128774_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128774_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128774_task);
    
    if (futhark_mc_scan_stage_1_parloop_128774_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128774_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128774_total_end -
                 futhark_mc_scan_stage_1_parloop_128774_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128774_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128774_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128774_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_127863)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_127865;
        int64_t x_127866;
        int64_t x_127867;
        int64_t x_127868;
        int64_t x_127869;
        int64_t x_127870;
        int64_t x_127871;
        int64_t x_127872;
        int64_t offset_127877 = (int64_t) 0;
        int64_t offset_index_127878 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_127879_cached_sizze_128769 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_127879 =
                realloc(scan_stage_2_accum_mem_127879, (int64_t) 8);
            scan_stage_2_accum_mem_127879_cached_sizze_128769 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_127881_cached_sizze_128770 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_127881 =
                realloc(scan_stage_2_accum_mem_127881, (int64_t) 8);
            scan_stage_2_accum_mem_127881_cached_sizze_128770 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_127883_cached_sizze_128771 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_127883 =
                realloc(scan_stage_2_accum_mem_127883, (int64_t) 8);
            scan_stage_2_accum_mem_127883_cached_sizze_128771 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_127885_cached_sizze_128772 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_127885 =
                realloc(scan_stage_2_accum_mem_127885, (int64_t) 8);
            scan_stage_2_accum_mem_127885_cached_sizze_128772 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_127879)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_127881)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_127883)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_127885)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_127887 = 0; i_127887 < num_tasks_127863 - 1;
             i_127887++) {
            offset_127877 = squot64(n_112520, sext_i32_i64(num_tasks_127863));
            if (slt64(sext_i32_i64(i_127887), srem64(n_112520,
                                                     sext_i32_i64(num_tasks_127863)))) {
                offset_127877 += (int64_t) 1;
            }
            offset_index_127878 += offset_127877;
            
            int64_t gtid_118480 = offset_index_127878;
            float x_127799 =
                  ((float *) double_buffer_mem_121218.mem)[gtid_118480];
            int32_t i32_arg_127800;
            
            i32_arg_127800 = futrts_to_bits32(x_127799);
            
            int32_t unsign_arg_127801 = ashr32(i32_arg_127800,
                                               defunc_0_get_bit_arg_127779);
            int32_t unsign_arg_127802 = 1 & unsign_arg_127801;
            int32_t unsign_arg_127803 = ashr32(i32_arg_127800, 31);
            int32_t unsign_arg_127804 = 1 & unsign_arg_127803;
            bool cond_127805 = unsign_arg_127804 == 1;
            bool x_127806 = !cond_127805;
            bool y_127807 = cond_f_res_127780 && x_127806;
            bool cond_127808 = cond_127805 || y_127807;
            int32_t defunc_1_get_bit_res_127809;
            
            if (cond_127808) {
                int32_t defunc_1_get_bit_res_t_res_127810 = 1 ^
                        unsign_arg_127802;
                
                defunc_1_get_bit_res_127809 = defunc_1_get_bit_res_t_res_127810;
            } else {
                defunc_1_get_bit_res_127809 = unsign_arg_127802;
            }
            
            int32_t x_127811 = mul32(2, defunc_1_get_bit_res_127809);
            int32_t unsign_arg_127812 = ashr32(i32_arg_127800,
                                               defunc_2_radix_sort_step_arg_127778);
            int32_t unsign_arg_127813 = 1 & unsign_arg_127812;
            bool y_127814 = cond_f_res_127781 && x_127806;
            bool cond_127815 = cond_127805 || y_127814;
            int32_t defunc_1_get_bit_res_127816;
            
            if (cond_127815) {
                int32_t defunc_1_get_bit_res_t_res_127817 = 1 ^
                        unsign_arg_127813;
                
                defunc_1_get_bit_res_127816 = defunc_1_get_bit_res_t_res_127817;
            } else {
                defunc_1_get_bit_res_127816 = unsign_arg_127813;
            }
            
            int32_t defunc_0_f_res_127818 = add32(x_127811,
                                                  defunc_1_get_bit_res_127816);
            bool cond_127819 = defunc_0_f_res_127818 == 0;
            int64_t defunc_0_f_res_127820 = btoi_bool_i64(cond_127819);
            int64_t defunc_0_f_res_127821;
            int64_t defunc_0_f_res_127822;
            int64_t defunc_0_f_res_127823;
            
            if (cond_127819) {
                defunc_0_f_res_127821 = (int64_t) 0;
                defunc_0_f_res_127822 = (int64_t) 0;
                defunc_0_f_res_127823 = (int64_t) 0;
            } else {
                bool cond_127824 = defunc_0_f_res_127818 == 1;
                int64_t defunc_0_f_res_f_res_127825 =
                        btoi_bool_i64(cond_127824);
                int64_t defunc_0_f_res_f_res_127826;
                int64_t defunc_0_f_res_f_res_127827;
                
                if (cond_127824) {
                    defunc_0_f_res_f_res_127826 = (int64_t) 0;
                    defunc_0_f_res_f_res_127827 = (int64_t) 0;
                } else {
                    bool cond_127828 = defunc_0_f_res_127818 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_127829 =
                            btoi_bool_i64(cond_127828);
                    bool cond_neg_127830 = !cond_127828;
                    int64_t defunc_0_f_res_f_res_f_res_127831 =
                            btoi_bool_i64(cond_neg_127830);
                    
                    defunc_0_f_res_f_res_127826 =
                        defunc_0_f_res_f_res_f_res_127829;
                    defunc_0_f_res_f_res_127827 =
                        defunc_0_f_res_f_res_f_res_127831;
                }
                defunc_0_f_res_127821 = defunc_0_f_res_f_res_127825;
                defunc_0_f_res_127822 = defunc_0_f_res_f_res_127826;
                defunc_0_f_res_127823 = defunc_0_f_res_f_res_127827;
            }
            // Read carry in
            {
                x_127865 =
                    ((int64_t *) scan_stage_2_accum_mem_127879)[(int64_t) 0];
                x_127866 =
                    ((int64_t *) scan_stage_2_accum_mem_127881)[(int64_t) 0];
                x_127867 =
                    ((int64_t *) scan_stage_2_accum_mem_127883)[(int64_t) 0];
                x_127868 =
                    ((int64_t *) scan_stage_2_accum_mem_127885)[(int64_t) 0];
            }
            // Read next values
            {
                x_127869 = ((int64_t *) mem_120940.mem)[offset_index_127878 -
                                                        (int64_t) 1];
                x_127870 = ((int64_t *) mem_120943.mem)[offset_index_127878 -
                                                        (int64_t) 1];
                x_127871 = ((int64_t *) mem_120946.mem)[offset_index_127878 -
                                                        (int64_t) 1];
                x_127872 = ((int64_t *) mem_120949.mem)[offset_index_127878 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_127873 = add64(x_127865, x_127869);
            int64_t defunc_1_op_res_127874 = add64(x_127866, x_127870);
            int64_t defunc_1_op_res_127875 = add64(x_127867, x_127871);
            int64_t defunc_1_op_res_127876 = add64(x_127868, x_127872);
            
            ((int64_t *) mem_120940.mem)[offset_index_127878 - (int64_t) 1] =
                defunc_1_op_res_127873;
            ((int64_t *) scan_stage_2_accum_mem_127879)[(int64_t) 0] =
                defunc_1_op_res_127873;
            ((int64_t *) mem_120943.mem)[offset_index_127878 - (int64_t) 1] =
                defunc_1_op_res_127874;
            ((int64_t *) scan_stage_2_accum_mem_127881)[(int64_t) 0] =
                defunc_1_op_res_127874;
            ((int64_t *) mem_120946.mem)[offset_index_127878 - (int64_t) 1] =
                defunc_1_op_res_127875;
            ((int64_t *) scan_stage_2_accum_mem_127883)[(int64_t) 0] =
                defunc_1_op_res_127875;
            ((int64_t *) mem_120949.mem)[offset_index_127878 - (int64_t) 1] =
                defunc_1_op_res_127876;
            ((int64_t *) scan_stage_2_accum_mem_127885)[(int64_t) 0] =
                defunc_1_op_res_127876;
        }
        
        int64_t iter_127900 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128775
        futhark_mc_scan_stage_3_parloop_struct_128775;
        
        futhark_mc_scan_stage_3_parloop_struct_128775.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_mem_120940 =
            mem_120940.mem;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_mem_120943 =
            mem_120943.mem;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_mem_120946 =
            mem_120946.mem;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_mem_120949 =
            mem_120949.mem;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_double_buffer_mem_121218 =
            double_buffer_mem_121218.mem;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_defunc_2_radix_sort_step_arg_127778 =
            defunc_2_radix_sort_step_arg_127778;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_defunc_0_get_bit_arg_127779 =
            defunc_0_get_bit_arg_127779;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_cond_f_res_127780 =
            cond_f_res_127780;
        futhark_mc_scan_stage_3_parloop_struct_128775.free_cond_f_res_127781 =
            cond_f_res_127781;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128776_task;
        
        futhark_mc_scan_stage_3_parloop_128776_task.name =
            "futhark_mc_scan_stage_3_parloop_128776";
        futhark_mc_scan_stage_3_parloop_128776_task.fn =
            futhark_mc_scan_stage_3_parloop_128776;
        futhark_mc_scan_stage_3_parloop_128776_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128775;
        futhark_mc_scan_stage_3_parloop_128776_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128776_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128776_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128776_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128776_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128776_task);
        
        if (futhark_mc_scan_stage_3_parloop_128776_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128776_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128776_total_end -
                     futhark_mc_scan_stage_3_parloop_128776_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128776_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128776_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128776_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_127879);
    free(scan_stage_2_accum_mem_127881);
    free(scan_stage_2_accum_mem_127883);
    free(scan_stage_2_accum_mem_127885);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128768_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128768_end -
                 futhark_mc_segscan_task_128768_start;
        
        ctx->futhark_mc_segscan_task_128768_runs[tid]++;
        ctx->futhark_mc_segscan_task_128768_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128768_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128777 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    char *free_mem_120940;
    char *free_mem_120943;
    char *free_mem_120946;
    char *free_mem_120949;
    char *free_mem_120952;
    char *free_mem_120955;
    char *free_double_buffer_mem_121218;
    int64_t free_last_res_127832;
    int64_t free_last_res_127833;
    int64_t free_last_res_127834;
};
struct futhark_mc_segmap_parloop_struct_128779 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    char *free_mem_120940;
    char *free_mem_120943;
    char *free_mem_120946;
    char *free_mem_120949;
    char *free_mem_120952;
    char *free_mem_120955;
    char *free_double_buffer_mem_121218;
    int64_t free_last_res_127832;
    int64_t free_last_res_127833;
    int64_t free_last_res_127834;
};
static int futhark_mc_segmap_parloop_128780(void *args, int64_t start,
                                            int64_t end, int flat_tid_118481,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128779
    *futhark_mc_segmap_parloop_struct_128779 =
    (struct futhark_mc_segmap_parloop_struct_128779 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128779->ctx;
    uint64_t futhark_mc_segmap_parloop_128780_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128780_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128779->free_n_112520;
    struct memblock mem_120940 = {.desc ="mem_120940", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120940,
                                  .size =0, .references =NULL};
    struct memblock mem_120943 = {.desc ="mem_120943", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120943,
                                  .size =0, .references =NULL};
    struct memblock mem_120946 = {.desc ="mem_120946", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120946,
                                  .size =0, .references =NULL};
    struct memblock mem_120949 = {.desc ="mem_120949", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120949,
                                  .size =0, .references =NULL};
    struct memblock mem_120952 = {.desc ="mem_120952", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120952,
                                  .size =0, .references =NULL};
    struct memblock mem_120955 = {.desc ="mem_120955", .mem =
                                  futhark_mc_segmap_parloop_struct_128779->free_mem_120955,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121218 = {.desc =
                                                "double_buffer_mem_121218",
                                                .mem =
                                                futhark_mc_segmap_parloop_struct_128779->free_double_buffer_mem_121218,
                                                .size =0, .references =NULL};
    int64_t last_res_127832 =
            futhark_mc_segmap_parloop_struct_128779->free_last_res_127832;
    int64_t last_res_127833 =
            futhark_mc_segmap_parloop_struct_128779->free_last_res_127833;
    int64_t last_res_127834 =
            futhark_mc_segmap_parloop_struct_128779->free_last_res_127834;
    int64_t iterations = end - start;
    int64_t iter_127902 = start;
    
    for (; iter_127902 < end; iter_127902++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127921 = n_112520;
        int64_t gtid_118482 = iter_127902;
        int64_t remnant_127922 = iter_127902 - gtid_118482;
        int32_t x_127837 = ((int32_t *) mem_120952.mem)[gtid_118482];
        float write_value_127838 =
              ((float *) double_buffer_mem_121218.mem)[gtid_118482];
        bool match_lit_127839 = 0 == x_127837;
        int64_t defunc_1_f_res_127840;
        
        if (match_lit_127839) {
            int64_t x_127903 = ((int64_t *) mem_120940.mem)[gtid_118482];
            int64_t case_res_127904 = sub64(x_127903, (int64_t) 1);
            
            defunc_1_f_res_127840 = case_res_127904;
        } else {
            bool match_lit_127905 = 1 == x_127837;
            int64_t x_127906;
            
            if (match_lit_127905) {
                int64_t x_127907 = ((int64_t *) mem_120943.mem)[gtid_118482];
                int64_t x_127908 = add64(last_res_127832, x_127907);
                int64_t case_res_127909 = sub64(x_127908, (int64_t) 1);
                
                x_127906 = case_res_127909;
            } else {
                bool match_lit_127910 = 2 == x_127837;
                int64_t x_127911;
                
                if (match_lit_127910) {
                    int64_t x_127912 =
                            ((int64_t *) mem_120946.mem)[gtid_118482];
                    int64_t x_127913 = add64(last_res_127832, last_res_127833);
                    int64_t x_127914 = add64(x_127912, x_127913);
                    int64_t case_res_127915 = sub64(x_127914, (int64_t) 1);
                    
                    x_127911 = case_res_127915;
                } else {
                    int64_t x_127916 =
                            ((int64_t *) mem_120949.mem)[gtid_118482];
                    int64_t x_127917 = add64(last_res_127832, last_res_127833);
                    int64_t x_127918 = add64(last_res_127834, x_127917);
                    int64_t x_127919 = add64(x_127916, x_127918);
                    int64_t defunc_1_f_res_res_127920 = sub64(x_127919,
                                                              (int64_t) 1);
                    
                    x_127911 = defunc_1_f_res_res_127920;
                }
                x_127906 = x_127911;
            }
            defunc_1_f_res_127840 = x_127906;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_127840) &&
            slt64(defunc_1_f_res_127840, n_112520)) {
            ((float *) mem_120955.mem)[defunc_1_f_res_127840] =
                write_value_127838;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128780_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128780_end -
                 futhark_mc_segmap_parloop_128780_start;
        
        ctx->futhark_mc_segmap_parloop_128780_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128780_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128780_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128778(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118481 = tid;
    int num_tasks_127901 = info.nsubtasks;
    struct futhark_mc_task_128777 *futhark_mc_task_128777 =
                                  (struct futhark_mc_task_128777 *) args;
    struct futhark_context *ctx = futhark_mc_task_128777->ctx;
    uint64_t futhark_mc_segmap_task_128778_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128778_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128777->free_n_112520;
    struct memblock mem_120940 = {.desc ="mem_120940", .mem =
                                  futhark_mc_task_128777->free_mem_120940,
                                  .size =0, .references =NULL};
    struct memblock mem_120943 = {.desc ="mem_120943", .mem =
                                  futhark_mc_task_128777->free_mem_120943,
                                  .size =0, .references =NULL};
    struct memblock mem_120946 = {.desc ="mem_120946", .mem =
                                  futhark_mc_task_128777->free_mem_120946,
                                  .size =0, .references =NULL};
    struct memblock mem_120949 = {.desc ="mem_120949", .mem =
                                  futhark_mc_task_128777->free_mem_120949,
                                  .size =0, .references =NULL};
    struct memblock mem_120952 = {.desc ="mem_120952", .mem =
                                  futhark_mc_task_128777->free_mem_120952,
                                  .size =0, .references =NULL};
    struct memblock mem_120955 = {.desc ="mem_120955", .mem =
                                  futhark_mc_task_128777->free_mem_120955,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121218 = {.desc =
                                                "double_buffer_mem_121218",
                                                .mem =
                                                futhark_mc_task_128777->free_double_buffer_mem_121218,
                                                .size =0, .references =NULL};
    int64_t last_res_127832 = futhark_mc_task_128777->free_last_res_127832;
    int64_t last_res_127833 = futhark_mc_task_128777->free_last_res_127833;
    int64_t last_res_127834 = futhark_mc_task_128777->free_last_res_127834;
    int64_t iter_127902;
    struct futhark_mc_segmap_parloop_struct_128779
    futhark_mc_segmap_parloop_struct_128779;
    
    futhark_mc_segmap_parloop_struct_128779.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128779.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120940 = mem_120940.mem;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120943 = mem_120943.mem;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120946 = mem_120946.mem;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120949 = mem_120949.mem;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120952 = mem_120952.mem;
    futhark_mc_segmap_parloop_struct_128779.free_mem_120955 = mem_120955.mem;
    futhark_mc_segmap_parloop_struct_128779.free_double_buffer_mem_121218 =
        double_buffer_mem_121218.mem;
    futhark_mc_segmap_parloop_struct_128779.free_last_res_127832 =
        last_res_127832;
    futhark_mc_segmap_parloop_struct_128779.free_last_res_127833 =
        last_res_127833;
    futhark_mc_segmap_parloop_struct_128779.free_last_res_127834 =
        last_res_127834;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128780_task;
    
    futhark_mc_segmap_parloop_128780_task.name =
        "futhark_mc_segmap_parloop_128780";
    futhark_mc_segmap_parloop_128780_task.fn = futhark_mc_segmap_parloop_128780;
    futhark_mc_segmap_parloop_128780_task.args =
        &futhark_mc_segmap_parloop_struct_128779;
    futhark_mc_segmap_parloop_128780_task.iterations = iterations;
    futhark_mc_segmap_parloop_128780_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128780_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128780_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128780_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128780_task);
    
    if (futhark_mc_segmap_parloop_128780_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128780_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128780_total_end -
                 futhark_mc_segmap_parloop_128780_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128780_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128780_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128780_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128778_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128778_end -
                 futhark_mc_segmap_task_128778_start;
        
        ctx->futhark_mc_segmap_task_128778_runs[tid]++;
        ctx->futhark_mc_segmap_task_128778_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128778_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128759(void *args, int64_t start,
                                            int64_t end, int flat_tid_118477,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128758
    *futhark_mc_segmap_parloop_struct_128758 =
    (struct futhark_mc_segmap_parloop_struct_128758 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128758->ctx;
    uint64_t futhark_mc_segmap_parloop_128759_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128759_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128758->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128758->free_n_112520;
    int64_t i_112596 = futhark_mc_segmap_parloop_struct_128758->free_i_112596;
    int32_t iters_114509 =
            futhark_mc_segmap_parloop_struct_128758->free_iters_114509;
    int64_t bytes_119378 =
            futhark_mc_segmap_parloop_struct_128758->free_bytes_119378;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128758->free_bytes_119421;
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_segmap_parloop_struct_128758->free_mem_120922,
                                  .size =0, .references =NULL};
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_segmap_parloop_struct_128758->free_mem_121076,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121220 =
            futhark_mc_segmap_parloop_struct_128758->free_double_buffer_sizze_121220;
    size_t mem_120940_cached_sizze_128760 = 0;
    char *mem_120940 = NULL;
    size_t mem_120943_cached_sizze_128761 = 0;
    char *mem_120943 = NULL;
    size_t mem_120946_cached_sizze_128762 = 0;
    char *mem_120946 = NULL;
    size_t mem_120949_cached_sizze_128763 = 0;
    char *mem_120949 = NULL;
    size_t mem_120952_cached_sizze_128764 = 0;
    char *mem_120952 = NULL;
    size_t mem_120955_cached_sizze_128765 = 0;
    char *mem_120955 = NULL;
    size_t double_buffer_mem_121218_cached_sizze_128766 = 0;
    char *double_buffer_mem_121218 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127775 = start;
    
    if (mem_120940_cached_sizze_128760 < (size_t) bytes_119378) {
        mem_120940 = realloc(mem_120940, bytes_119378);
        mem_120940_cached_sizze_128760 = bytes_119378;
    }
    if (mem_120943_cached_sizze_128761 < (size_t) bytes_119378) {
        mem_120943 = realloc(mem_120943, bytes_119378);
        mem_120943_cached_sizze_128761 = bytes_119378;
    }
    if (mem_120946_cached_sizze_128762 < (size_t) bytes_119378) {
        mem_120946 = realloc(mem_120946, bytes_119378);
        mem_120946_cached_sizze_128762 = bytes_119378;
    }
    if (mem_120949_cached_sizze_128763 < (size_t) bytes_119378) {
        mem_120949 = realloc(mem_120949, bytes_119378);
        mem_120949_cached_sizze_128763 = bytes_119378;
    }
    if (mem_120952_cached_sizze_128764 < (size_t) bytes_119421) {
        mem_120952 = realloc(mem_120952, bytes_119421);
        mem_120952_cached_sizze_128764 = bytes_119421;
    }
    if (double_buffer_mem_121218_cached_sizze_128766 <
        (size_t) double_buffer_sizze_121220) {
        double_buffer_mem_121218 = realloc(double_buffer_mem_121218,
                                           double_buffer_sizze_121220);
        double_buffer_mem_121218_cached_sizze_128766 =
            double_buffer_sizze_121220;
    }
    if (mem_120955_cached_sizze_128765 < (size_t) bytes_119421) {
        mem_120955 = realloc(mem_120955, bytes_119421);
        mem_120955_cached_sizze_128765 = bytes_119421;
    }
    for (; iter_127775 < end; iter_127775++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127860 = m_112519;
        int64_t gtid_118478 = iter_127775;
        int64_t remnant_127861 = iter_127775 - gtid_118478;
        
        memmove(double_buffer_mem_121218 + (int64_t) 0, mem_120922.mem +
                gtid_118478 * n_112520 * (int64_t) 4, n_112520 * (int64_t) 4);
        for (int32_t i_127776 = 0; i_127776 < iters_114509; i_127776++) {
            int32_t defunc_2_radix_sort_step_arg_127778 = mul32(2, i_127776);
            int32_t defunc_0_get_bit_arg_127779 = add32(1,
                                                        defunc_2_radix_sort_step_arg_127778);
            bool cond_f_res_127780 = defunc_0_get_bit_arg_127779 == 31;
            bool cond_f_res_127781 = defunc_2_radix_sort_step_arg_127778 == 31;
            int64_t flat_tid_118479 = (int64_t) 0;
            int32_t num_tasks_127863;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "nonsegmented segScan");
            
            struct futhark_mc_task_128767 futhark_mc_task_128767;
            
            futhark_mc_task_128767.ctx = ctx;
            futhark_mc_task_128767.free_n_112520 = n_112520;
            futhark_mc_task_128767.free_mem_120940 = mem_120940;
            futhark_mc_task_128767.free_mem_120943 = mem_120943;
            futhark_mc_task_128767.free_mem_120946 = mem_120946;
            futhark_mc_task_128767.free_mem_120949 = mem_120949;
            futhark_mc_task_128767.free_mem_120952 = mem_120952;
            futhark_mc_task_128767.free_double_buffer_mem_121218 =
                double_buffer_mem_121218;
            futhark_mc_task_128767.free_defunc_2_radix_sort_step_arg_127778 =
                defunc_2_radix_sort_step_arg_127778;
            futhark_mc_task_128767.free_defunc_0_get_bit_arg_127779 =
                defunc_0_get_bit_arg_127779;
            futhark_mc_task_128767.free_cond_f_res_127780 = cond_f_res_127780;
            futhark_mc_task_128767.free_cond_f_res_127781 = cond_f_res_127781;
            
            struct scheduler_segop futhark_mc_task_128767_task;
            
            futhark_mc_task_128767_task.args = &futhark_mc_task_128767;
            futhark_mc_task_128767_task.top_level_fn =
                futhark_mc_segscan_task_128768;
            futhark_mc_task_128767_task.name = "futhark_mc_segscan_task_128768";
            futhark_mc_task_128767_task.iterations = n_112520;
            futhark_mc_task_128767_task.task_time =
                &ctx->futhark_mc_segscan_task_128768_total_time;
            futhark_mc_task_128767_task.task_iter =
                &ctx->futhark_mc_segscan_task_128768_total_iter;
            futhark_mc_task_128767_task.sched = STATIC;
            futhark_mc_task_128767_task.nested_fn = NULL;
            
            int futhark_mc_segscan_task_128768_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128767_task);
            
            if (futhark_mc_segscan_task_128768_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t last_res_127832 = ((int64_t *) mem_120940)[i_112596];
            int64_t last_res_127833 = ((int64_t *) mem_120943)[i_112596];
            int64_t last_res_127834 = ((int64_t *) mem_120946)[i_112596];
            
            memmove(mem_120955 + (int64_t) 0, double_buffer_mem_121218 +
                    (int64_t) 0, n_112520 * (int64_t) 4);
            
            int64_t flat_tid_118481 = (int64_t) 0;
            int32_t num_tasks_127901;
            struct futhark_mc_task_128777 futhark_mc_task_128777;
            
            futhark_mc_task_128777.ctx = ctx;
            futhark_mc_task_128777.free_n_112520 = n_112520;
            futhark_mc_task_128777.free_mem_120940 = mem_120940;
            futhark_mc_task_128777.free_mem_120943 = mem_120943;
            futhark_mc_task_128777.free_mem_120946 = mem_120946;
            futhark_mc_task_128777.free_mem_120949 = mem_120949;
            futhark_mc_task_128777.free_mem_120952 = mem_120952;
            futhark_mc_task_128777.free_mem_120955 = mem_120955;
            futhark_mc_task_128777.free_double_buffer_mem_121218 =
                double_buffer_mem_121218;
            futhark_mc_task_128777.free_last_res_127832 = last_res_127832;
            futhark_mc_task_128777.free_last_res_127833 = last_res_127833;
            futhark_mc_task_128777.free_last_res_127834 = last_res_127834;
            
            struct scheduler_segop futhark_mc_task_128777_task;
            
            futhark_mc_task_128777_task.args = &futhark_mc_task_128777;
            futhark_mc_task_128777_task.top_level_fn =
                futhark_mc_segmap_task_128778;
            futhark_mc_task_128777_task.name = "futhark_mc_segmap_task_128778";
            futhark_mc_task_128777_task.iterations = n_112520;
            futhark_mc_task_128777_task.task_time =
                &ctx->futhark_mc_segmap_task_128778_total_time;
            futhark_mc_task_128777_task.task_iter =
                &ctx->futhark_mc_segmap_task_128778_total_iter;
            futhark_mc_task_128777_task.sched = STATIC;
            futhark_mc_task_128777_task.nested_fn = NULL;
            
            int futhark_mc_segmap_task_128778_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128777_task);
            
            if (futhark_mc_segmap_task_128778_err != 0) {
                err = 1;
                goto cleanup;
            }
            memmove(double_buffer_mem_121218 + (int64_t) 0, mem_120955 +
                    (int64_t) 0, n_112520 * (int64_t) 4);
        }
        memmove(mem_121076.mem + gtid_118478 * n_112520 * (int64_t) 4,
                double_buffer_mem_121218 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120940);
    free(mem_120943);
    free(mem_120946);
    free(mem_120949);
    free(mem_120952);
    free(mem_120955);
    free(double_buffer_mem_121218);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128759_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128759_end -
                 futhark_mc_segmap_parloop_128759_start;
        
        ctx->futhark_mc_segmap_parloop_128759_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128759_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128759_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128757(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118477 = tid;
    int num_tasks_127657 = info.nsubtasks;
    struct futhark_mc_task_128746 *futhark_mc_task_128746 =
                                  (struct futhark_mc_task_128746 *) args;
    struct futhark_context *ctx = futhark_mc_task_128746->ctx;
    uint64_t futhark_mc_segmap_nested_task_128757_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128757_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128746->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128746->free_n_112520;
    int64_t i_112596 = futhark_mc_task_128746->free_i_112596;
    int32_t iters_114509 = futhark_mc_task_128746->free_iters_114509;
    int64_t bytes_119378 = futhark_mc_task_128746->free_bytes_119378;
    int64_t bytes_119421 = futhark_mc_task_128746->free_bytes_119421;
    struct memblock mem_120922 = {.desc ="mem_120922", .mem =
                                  futhark_mc_task_128746->free_mem_120922,
                                  .size =0, .references =NULL};
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_task_128746->free_mem_121076,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121220 =
            futhark_mc_task_128746->free_double_buffer_sizze_121220;
    int64_t double_buffer_sizze_121224 =
            futhark_mc_task_128746->free_double_buffer_sizze_121224;
    int64_t iter_127775;
    struct futhark_mc_segmap_parloop_struct_128758
    futhark_mc_segmap_parloop_struct_128758;
    
    futhark_mc_segmap_parloop_struct_128758.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128758.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128758.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128758.free_i_112596 = i_112596;
    futhark_mc_segmap_parloop_struct_128758.free_iters_114509 = iters_114509;
    futhark_mc_segmap_parloop_struct_128758.free_bytes_119378 = bytes_119378;
    futhark_mc_segmap_parloop_struct_128758.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128758.free_mem_120922 = mem_120922.mem;
    futhark_mc_segmap_parloop_struct_128758.free_mem_121076 = mem_121076.mem;
    futhark_mc_segmap_parloop_struct_128758.free_double_buffer_sizze_121220 =
        double_buffer_sizze_121220;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128759_task;
    
    futhark_mc_segmap_parloop_128759_task.name =
        "futhark_mc_segmap_parloop_128759";
    futhark_mc_segmap_parloop_128759_task.fn = futhark_mc_segmap_parloop_128759;
    futhark_mc_segmap_parloop_128759_task.args =
        &futhark_mc_segmap_parloop_struct_128758;
    futhark_mc_segmap_parloop_128759_task.iterations = iterations;
    futhark_mc_segmap_parloop_128759_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128759_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128759_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128759_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128759_task);
    
    if (futhark_mc_segmap_parloop_128759_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128759_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128759_total_end -
                 futhark_mc_segmap_parloop_128759_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128759_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128759_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128759_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128757_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128757_end -
                 futhark_mc_segmap_nested_task_128757_start;
        
        ctx->futhark_mc_segmap_nested_task_128757_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128757_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128757_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128781 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_stl_res_112590;
    int64_t free_j_m_i_112960;
    char *free_mem_121076;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
};
struct futhark_mc_segmap_parloop_struct_128783 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_stl_res_112590;
    int64_t free_j_m_i_112960;
    char *free_mem_121076;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
};
static int futhark_mc_segmap_parloop_128784(void *args, int64_t start,
                                            int64_t end, int flat_tid_118568,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128783
    *futhark_mc_segmap_parloop_struct_128783 =
    (struct futhark_mc_segmap_parloop_struct_128783 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128783->ctx;
    uint64_t futhark_mc_segmap_parloop_128784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128784_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128783->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128783->free_n_112520;
    int64_t stl_res_112590 =
            futhark_mc_segmap_parloop_struct_128783->free_stl_res_112590;
    int64_t j_m_i_112960 =
            futhark_mc_segmap_parloop_struct_128783->free_j_m_i_112960;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_segmap_parloop_struct_128783->free_mem_121076,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_segmap_parloop_struct_128783->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_segmap_parloop_struct_128783->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_segmap_parloop_struct_128783->free_mem_121085,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127924 = start;
    
    for (; iter_127924 < end; iter_127924++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127930 = m_112519;
        int64_t gtid_118569 = iter_127924;
        int64_t remnant_127931 = iter_127924 - gtid_118569;
        float defunc_2_reduce_res_114645;
        float redout_127926 = 0.0F;
        
        for (int64_t i_127925 = 0; i_127925 < j_m_i_112960; i_127925++) {
            int64_t slice_127927 = stl_res_112590 + i_127925;
            float x_127928 = ((float *) mem_121076.mem)[gtid_118569 * n_112520 +
                                                        slice_127927];
            float defunc_1_op_res_127929 = x_127928 + redout_127926;
            float redout_tmp_127932 = defunc_1_op_res_127929;
            
            redout_127926 = redout_tmp_127932;
        }
        defunc_2_reduce_res_114645 = redout_127926;
        
        float h_114650 = 3.0F * defunc_2_reduce_res_114645;
        float h9_114651 = 0.999F * h_114650;
        float h1_114652 = 1.0e-3F * h_114650;
        
        ((float *) mem_121079.mem)[gtid_118569] = h_114650;
        ((float *) mem_121082.mem)[gtid_118569] = h9_114651;
        ((float *) mem_121085.mem)[gtid_118569] = h1_114652;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128784_end -
                 futhark_mc_segmap_parloop_128784_start;
        
        ctx->futhark_mc_segmap_parloop_128784_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128784_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128782(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118568 = tid;
    int num_tasks_127923 = info.nsubtasks;
    struct futhark_mc_task_128781 *futhark_mc_task_128781 =
                                  (struct futhark_mc_task_128781 *) args;
    struct futhark_context *ctx = futhark_mc_task_128781->ctx;
    uint64_t futhark_mc_segmap_task_128782_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128782_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128781->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128781->free_n_112520;
    int64_t stl_res_112590 = futhark_mc_task_128781->free_stl_res_112590;
    int64_t j_m_i_112960 = futhark_mc_task_128781->free_j_m_i_112960;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_task_128781->free_mem_121076,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_task_128781->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_task_128781->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_task_128781->free_mem_121085,
                                  .size =0, .references =NULL};
    int64_t iter_127924;
    struct futhark_mc_segmap_parloop_struct_128783
    futhark_mc_segmap_parloop_struct_128783;
    
    futhark_mc_segmap_parloop_struct_128783.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128783.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128783.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128783.free_stl_res_112590 =
        stl_res_112590;
    futhark_mc_segmap_parloop_struct_128783.free_j_m_i_112960 = j_m_i_112960;
    futhark_mc_segmap_parloop_struct_128783.free_mem_121076 = mem_121076.mem;
    futhark_mc_segmap_parloop_struct_128783.free_mem_121079 = mem_121079.mem;
    futhark_mc_segmap_parloop_struct_128783.free_mem_121082 = mem_121082.mem;
    futhark_mc_segmap_parloop_struct_128783.free_mem_121085 = mem_121085.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128784_task;
    
    futhark_mc_segmap_parloop_128784_task.name =
        "futhark_mc_segmap_parloop_128784";
    futhark_mc_segmap_parloop_128784_task.fn = futhark_mc_segmap_parloop_128784;
    futhark_mc_segmap_parloop_128784_task.args =
        &futhark_mc_segmap_parloop_struct_128783;
    futhark_mc_segmap_parloop_128784_task.iterations = iterations;
    futhark_mc_segmap_parloop_128784_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128784_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128784_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128784_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128784_task);
    
    if (futhark_mc_segmap_parloop_128784_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128784_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128784_total_end -
                 futhark_mc_segmap_parloop_128784_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128784_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128784_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128784_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128782_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128782_end -
                 futhark_mc_segmap_task_128782_start;
        
        ctx->futhark_mc_segmap_task_128782_runs[tid]++;
        ctx->futhark_mc_segmap_task_128782_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128782_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128786 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_stl_res_112590;
    int64_t free_j_m_i_112960;
    char *free_mem_121076;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
};
struct futhark_mc_task_128788 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_stl_res_112590;
    int64_t free_gtid_118571;
    char *free_mem_121076;
    float *retval_defunc_2_reduce_res_118575;
};
struct futhark_mc_segred_stage_1_parloop_struct_128791 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_stl_res_112590;
    int64_t free_gtid_118571;
    char *free_mem_121076;
    char *free_reduce_stage_1_tid_res_arr_mem_127942;
};
static int futhark_mc_segred_stage_1_parloop_128792(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118572,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128791
    *futhark_mc_segred_stage_1_parloop_struct_128791 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128791 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128791->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128792_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128792_start = get_wall_time();
    
    int64_t n_112520 =
            futhark_mc_segred_stage_1_parloop_struct_128791->free_n_112520;
    int64_t stl_res_112590 =
            futhark_mc_segred_stage_1_parloop_struct_128791->free_stl_res_112590;
    int64_t gtid_118571 =
            futhark_mc_segred_stage_1_parloop_struct_128791->free_gtid_118571;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128791->free_mem_121076,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127942 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127942",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128791->free_reduce_stage_1_tid_res_arr_mem_127942,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127944 = start;
    float x_127934;
    float x_127935;
    float local_acc_127945 = 0.0F;
    
    for (; iter_127944 < end; iter_127944++) {
        int64_t gtid_118573 = iter_127944;
        int64_t slice_127937 = stl_res_112590 + gtid_118573;
        float x_127938 = ((float *) mem_121076.mem)[gtid_118571 * n_112520 +
                                                    slice_127937];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127934 = local_acc_127945;
        }
        // Load next params
        {
            x_127935 = x_127938;
        }
        // Red body
        {
            float defunc_1_op_res_127936 = x_127934 + x_127935;
            
            local_acc_127945 = defunc_1_op_res_127936;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127942.mem)[flat_tid_118572] =
        local_acc_127945;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128792_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128792_end -
                 futhark_mc_segred_stage_1_parloop_128792_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128792_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128792_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128792_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128789(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118572 = tid;
    int num_tasks_127941 = info.nsubtasks;
    struct futhark_mc_task_128788 *futhark_mc_task_128788 =
                                  (struct futhark_mc_task_128788 *) args;
    struct futhark_context *ctx = futhark_mc_task_128788->ctx;
    uint64_t futhark_mc_segred_task_128789_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128789_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128788->free_n_112520;
    int64_t stl_res_112590 = futhark_mc_task_128788->free_stl_res_112590;
    int64_t gtid_118571 = futhark_mc_task_128788->free_gtid_118571;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_task_128788->free_mem_121076,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_118575 =
          *futhark_mc_task_128788->retval_defunc_2_reduce_res_118575;
    size_t reduce_stage_1_tid_res_arr_mem_127942_cached_sizze_128790 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127942 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127942_cached_sizze_128790 <
        (size_t) ((int64_t) 4 * num_tasks_127941)) {
        reduce_stage_1_tid_res_arr_mem_127942 =
            realloc(reduce_stage_1_tid_res_arr_mem_127942, (int64_t) 4 *
                    num_tasks_127941);
        reduce_stage_1_tid_res_arr_mem_127942_cached_sizze_128790 =
            (int64_t) 4 * num_tasks_127941;
    }
    
    int64_t iter_127944;
    struct futhark_mc_segred_stage_1_parloop_struct_128791
    futhark_mc_segred_stage_1_parloop_struct_128791;
    
    futhark_mc_segred_stage_1_parloop_struct_128791.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128791.free_n_112520 = n_112520;
    futhark_mc_segred_stage_1_parloop_struct_128791.free_stl_res_112590 =
        stl_res_112590;
    futhark_mc_segred_stage_1_parloop_struct_128791.free_gtid_118571 =
        gtid_118571;
    futhark_mc_segred_stage_1_parloop_struct_128791.free_mem_121076 =
        mem_121076.mem;
    futhark_mc_segred_stage_1_parloop_struct_128791.free_reduce_stage_1_tid_res_arr_mem_127942 =
        reduce_stage_1_tid_res_arr_mem_127942;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128792_task;
    
    futhark_mc_segred_stage_1_parloop_128792_task.name =
        "futhark_mc_segred_stage_1_parloop_128792";
    futhark_mc_segred_stage_1_parloop_128792_task.fn =
        futhark_mc_segred_stage_1_parloop_128792;
    futhark_mc_segred_stage_1_parloop_128792_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128791;
    futhark_mc_segred_stage_1_parloop_128792_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128792_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128792_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128792_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128792_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128792_task);
    
    if (futhark_mc_segred_stage_1_parloop_128792_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128792_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128792_total_end -
                 futhark_mc_segred_stage_1_parloop_128792_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128792_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128792_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128792_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_118575 = 0.0F;
    }
    
    float x_127946;
    float x_127947;
    
    for (int32_t i_127949 = 0; i_127949 < num_tasks_127941; i_127949++) {
        flat_tid_118572 = i_127949;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127946 = defunc_2_reduce_res_118575;
            }
            // load next params
            {
                x_127947 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127942)[flat_tid_118572];
            }
            // red body
            {
                float defunc_1_op_res_127948 = x_127946 + x_127947;
                
                defunc_2_reduce_res_118575 = defunc_1_op_res_127948;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127942);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128789_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128789_end -
                 futhark_mc_segred_task_128789_start;
        
        ctx->futhark_mc_segred_task_128789_runs[tid]++;
        ctx->futhark_mc_segred_task_128789_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128789_iter[tid] += iterations;
    }
    *futhark_mc_task_128788->retval_defunc_2_reduce_res_118575 =
        defunc_2_reduce_res_118575;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128787(void *args, int64_t start,
                                            int64_t end, int flat_tid_118570,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128786
    *futhark_mc_segmap_parloop_struct_128786 =
    (struct futhark_mc_segmap_parloop_struct_128786 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128786->ctx;
    uint64_t futhark_mc_segmap_parloop_128787_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128787_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128786->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128786->free_n_112520;
    int64_t stl_res_112590 =
            futhark_mc_segmap_parloop_struct_128786->free_stl_res_112590;
    int64_t j_m_i_112960 =
            futhark_mc_segmap_parloop_struct_128786->free_j_m_i_112960;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_segmap_parloop_struct_128786->free_mem_121076,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_segmap_parloop_struct_128786->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_segmap_parloop_struct_128786->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_segmap_parloop_struct_128786->free_mem_121085,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127933 = start;
    
    for (; iter_127933 < end; iter_127933++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127939 = m_112519;
        int64_t gtid_118571 = iter_127933;
        int64_t remnant_127940 = iter_127933 - gtid_118571;
        float defunc_2_reduce_res_118575;
        int64_t flat_tid_118572 = (int64_t) 0;
        int32_t num_tasks_127941;
        struct futhark_mc_task_128788 futhark_mc_task_128788;
        
        futhark_mc_task_128788.ctx = ctx;
        futhark_mc_task_128788.free_n_112520 = n_112520;
        futhark_mc_task_128788.free_stl_res_112590 = stl_res_112590;
        futhark_mc_task_128788.free_gtid_118571 = gtid_118571;
        futhark_mc_task_128788.free_mem_121076 = mem_121076.mem;
        futhark_mc_task_128788.retval_defunc_2_reduce_res_118575 =
            &defunc_2_reduce_res_118575;
        
        struct scheduler_segop futhark_mc_task_128788_task;
        
        futhark_mc_task_128788_task.args = &futhark_mc_task_128788;
        futhark_mc_task_128788_task.top_level_fn =
            futhark_mc_segred_task_128789;
        futhark_mc_task_128788_task.name = "futhark_mc_segred_task_128789";
        futhark_mc_task_128788_task.iterations = j_m_i_112960;
        futhark_mc_task_128788_task.task_time =
            &ctx->futhark_mc_segred_task_128789_total_time;
        futhark_mc_task_128788_task.task_iter =
            &ctx->futhark_mc_segred_task_128789_total_iter;
        futhark_mc_task_128788_task.sched = STATIC;
        futhark_mc_task_128788_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128789_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128788_task);
        
        if (futhark_mc_segred_task_128789_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float h_118580 = 3.0F * defunc_2_reduce_res_118575;
        float h9_118581 = 0.999F * h_118580;
        float h1_118582 = 1.0e-3F * h_118580;
        
        ((float *) mem_121079.mem)[gtid_118571] = h_118580;
        ((float *) mem_121082.mem)[gtid_118571] = h9_118581;
        ((float *) mem_121085.mem)[gtid_118571] = h1_118582;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128787_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128787_end -
                 futhark_mc_segmap_parloop_128787_start;
        
        ctx->futhark_mc_segmap_parloop_128787_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128787_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128787_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128785(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118570 = tid;
    int num_tasks_127923 = info.nsubtasks;
    struct futhark_mc_task_128781 *futhark_mc_task_128781 =
                                  (struct futhark_mc_task_128781 *) args;
    struct futhark_context *ctx = futhark_mc_task_128781->ctx;
    uint64_t futhark_mc_segmap_nested_task_128785_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128785_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128781->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128781->free_n_112520;
    int64_t stl_res_112590 = futhark_mc_task_128781->free_stl_res_112590;
    int64_t j_m_i_112960 = futhark_mc_task_128781->free_j_m_i_112960;
    struct memblock mem_121076 = {.desc ="mem_121076", .mem =
                                  futhark_mc_task_128781->free_mem_121076,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_task_128781->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_task_128781->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_task_128781->free_mem_121085,
                                  .size =0, .references =NULL};
    int64_t iter_127933;
    struct futhark_mc_segmap_parloop_struct_128786
    futhark_mc_segmap_parloop_struct_128786;
    
    futhark_mc_segmap_parloop_struct_128786.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128786.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128786.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128786.free_stl_res_112590 =
        stl_res_112590;
    futhark_mc_segmap_parloop_struct_128786.free_j_m_i_112960 = j_m_i_112960;
    futhark_mc_segmap_parloop_struct_128786.free_mem_121076 = mem_121076.mem;
    futhark_mc_segmap_parloop_struct_128786.free_mem_121079 = mem_121079.mem;
    futhark_mc_segmap_parloop_struct_128786.free_mem_121082 = mem_121082.mem;
    futhark_mc_segmap_parloop_struct_128786.free_mem_121085 = mem_121085.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128787_task;
    
    futhark_mc_segmap_parloop_128787_task.name =
        "futhark_mc_segmap_parloop_128787";
    futhark_mc_segmap_parloop_128787_task.fn = futhark_mc_segmap_parloop_128787;
    futhark_mc_segmap_parloop_128787_task.args =
        &futhark_mc_segmap_parloop_struct_128786;
    futhark_mc_segmap_parloop_128787_task.iterations = iterations;
    futhark_mc_segmap_parloop_128787_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128787_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128787_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128787_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128787_task);
    
    if (futhark_mc_segmap_parloop_128787_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128787_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128787_total_end -
                 futhark_mc_segmap_parloop_128787_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128787_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128787_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128787_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128785_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128785_end -
                 futhark_mc_segmap_nested_task_128785_start;
        
        ctx->futhark_mc_segmap_nested_task_128785_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128785_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128785_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128793 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
    char *free_mem_121107;
};
struct futhark_mc_segmap_parloop_struct_128795 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
    char *free_mem_121107;
};
static int futhark_mc_segmap_parloop_128796(void *args, int64_t start,
                                            int64_t end, int flat_tid_118583,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128795
    *futhark_mc_segmap_parloop_struct_128795 =
    (struct futhark_mc_segmap_parloop_struct_128795 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128795->ctx;
    uint64_t futhark_mc_segmap_parloop_128796_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128796_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128795->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128795->free_n_112520;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128795->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128795->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_segmap_parloop_struct_128795->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_segmap_parloop_struct_128795->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_segmap_parloop_struct_128795->free_mem_121085,
                                  .size =0, .references =NULL};
    struct memblock mem_121107 = {.desc ="mem_121107", .mem =
                                  futhark_mc_segmap_parloop_struct_128795->free_mem_121107,
                                  .size =0, .references =NULL};
    size_t mem_121091_cached_sizze_128797 = 0;
    char *mem_121091 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127951 = start;
    
    if (mem_121091_cached_sizze_128797 < (size_t) bytes_119421) {
        mem_121091 = realloc(mem_121091, bytes_119421);
        mem_121091_cached_sizze_128797 = bytes_119421;
    }
    for (; iter_127951 < end; iter_127951++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127972 = m_112519;
        int64_t gtid_118584 = iter_127951;
        int64_t remnant_127973 = iter_127951 - gtid_118584;
        float x_114658 = ((float *) mem_121079.mem)[gtid_118584];
        float x_114659 = ((float *) mem_121082.mem)[gtid_118584];
        float x_114660 = ((float *) mem_121085.mem)[gtid_118584];
        
        for (int64_t i_127952 = 0; i_127952 < n_112520; i_127952++) {
            float x_127954 = ((float *) mem_120900.mem)[gtid_118584 * n_112520 +
                                                        i_127952];
            float x_127955 = x_127954 / x_114658;
            float y_127956 = fpow32(x_127955, 2.0F);
            float x_127957 = 1.0F - y_127956;
            float bicube_127958 = fpow32(x_127957, 2.0F);
            bool isnan_res_127959;
            
            isnan_res_127959 = futrts_isnan32(x_127954);
            
            bool cond_f_res_127960 = x_127954 <= x_114660;
            bool x_127961 = !isnan_res_127959;
            bool y_127962 = cond_f_res_127960 && x_127961;
            bool cond_127963 = isnan_res_127959 || y_127962;
            float defunc_0_f_res_127964;
            
            if (cond_127963) {
                defunc_0_f_res_127964 = 1.0F;
            } else {
                bool cond_127965 = x_114659 <= x_127954;
                bool cond_f_res_127966 = x_127954 <= 1.0e-6F;
                bool x_127967 = !cond_127965;
                bool y_127968 = cond_f_res_127966 && x_127967;
                bool cond_127969 = cond_127965 || y_127968;
                float defunc_0_f_res_f_res_127970;
                
                if (cond_127969) {
                    defunc_0_f_res_f_res_127970 = 1.0e-6F;
                } else {
                    defunc_0_f_res_f_res_127970 = bicube_127958;
                }
                defunc_0_f_res_127964 = defunc_0_f_res_f_res_127970;
            }
            ((float *) mem_121091)[i_127952] = defunc_0_f_res_127964;
        }
        memmove(mem_121107.mem + gtid_118584 * n_112520 * (int64_t) 4,
                mem_121091 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121091);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128796_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128796_end -
                 futhark_mc_segmap_parloop_128796_start;
        
        ctx->futhark_mc_segmap_parloop_128796_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128796_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128796_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128794(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118583 = tid;
    int num_tasks_127950 = info.nsubtasks;
    struct futhark_mc_task_128793 *futhark_mc_task_128793 =
                                  (struct futhark_mc_task_128793 *) args;
    struct futhark_context *ctx = futhark_mc_task_128793->ctx;
    uint64_t futhark_mc_segmap_task_128794_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128794_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128793->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128793->free_n_112520;
    int64_t bytes_119421 = futhark_mc_task_128793->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128793->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_task_128793->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_task_128793->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_task_128793->free_mem_121085,
                                  .size =0, .references =NULL};
    struct memblock mem_121107 = {.desc ="mem_121107", .mem =
                                  futhark_mc_task_128793->free_mem_121107,
                                  .size =0, .references =NULL};
    int64_t iter_127951;
    struct futhark_mc_segmap_parloop_struct_128795
    futhark_mc_segmap_parloop_struct_128795;
    
    futhark_mc_segmap_parloop_struct_128795.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128795.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128795.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128795.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128795.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128795.free_mem_121079 = mem_121079.mem;
    futhark_mc_segmap_parloop_struct_128795.free_mem_121082 = mem_121082.mem;
    futhark_mc_segmap_parloop_struct_128795.free_mem_121085 = mem_121085.mem;
    futhark_mc_segmap_parloop_struct_128795.free_mem_121107 = mem_121107.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128796_task;
    
    futhark_mc_segmap_parloop_128796_task.name =
        "futhark_mc_segmap_parloop_128796";
    futhark_mc_segmap_parloop_128796_task.fn = futhark_mc_segmap_parloop_128796;
    futhark_mc_segmap_parloop_128796_task.args =
        &futhark_mc_segmap_parloop_struct_128795;
    futhark_mc_segmap_parloop_128796_task.iterations = iterations;
    futhark_mc_segmap_parloop_128796_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128796_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128796_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128796_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128796_task);
    
    if (futhark_mc_segmap_parloop_128796_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128796_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128796_total_end -
                 futhark_mc_segmap_parloop_128796_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128796_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128796_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128796_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128794_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128794_end -
                 futhark_mc_segmap_task_128794_start;
        
        ctx->futhark_mc_segmap_task_128794_runs[tid]++;
        ctx->futhark_mc_segmap_task_128794_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128794_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128799 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    int64_t free_bytes_119421;
    char *free_mem_120900;
    char *free_mem_121079;
    char *free_mem_121082;
    char *free_mem_121085;
    char *free_mem_121107;
};
struct futhark_mc_task_128802 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118586;
    float free_x_118590;
    float free_x_118591;
    float free_x_118592;
    char *free_mem_120900;
    char *free_mem_121088;
};
struct futhark_mc_segmap_parloop_struct_128804 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118586;
    float free_x_118590;
    float free_x_118591;
    float free_x_118592;
    char *free_mem_120900;
    char *free_mem_121088;
};
static int futhark_mc_segmap_parloop_128805(void *args, int64_t start,
                                            int64_t end, int flat_tid_118587,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128804
    *futhark_mc_segmap_parloop_struct_128804 =
    (struct futhark_mc_segmap_parloop_struct_128804 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128804->ctx;
    uint64_t futhark_mc_segmap_parloop_128805_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128805_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128804->free_n_112520;
    int64_t gtid_118586 =
            futhark_mc_segmap_parloop_struct_128804->free_gtid_118586;
    float x_118590 = futhark_mc_segmap_parloop_struct_128804->free_x_118590;
    float x_118591 = futhark_mc_segmap_parloop_struct_128804->free_x_118591;
    float x_118592 = futhark_mc_segmap_parloop_struct_128804->free_x_118592;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128804->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121088 = {.desc ="mem_121088", .mem =
                                  futhark_mc_segmap_parloop_struct_128804->free_mem_121088,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127996 = start;
    
    for (; iter_127996 < end; iter_127996++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128003 = n_112520;
        int64_t gtid_118588 = iter_127996;
        int64_t remnant_128004 = iter_127996 - gtid_118588;
        float x_127976 = ((float *) mem_120900.mem)[gtid_118586 * n_112520 +
                                                    gtid_118588];
        float x_127977 = x_127976 / x_118590;
        float y_127978 = fpow32(x_127977, 2.0F);
        float x_127979 = 1.0F - y_127978;
        float bicube_127980 = fpow32(x_127979, 2.0F);
        bool isnan_res_127981;
        
        isnan_res_127981 = futrts_isnan32(x_127976);
        
        bool cond_f_res_127982 = x_127976 <= x_118592;
        bool x_127983 = !isnan_res_127981;
        bool y_127984 = cond_f_res_127982 && x_127983;
        bool cond_127985 = isnan_res_127981 || y_127984;
        float defunc_0_f_res_127986;
        
        if (cond_127985) {
            defunc_0_f_res_127986 = 1.0F;
        } else {
            bool cond_127997 = x_118591 <= x_127976;
            bool cond_f_res_127998 = x_127976 <= 1.0e-6F;
            bool x_127999 = !cond_127997;
            bool y_128000 = cond_f_res_127998 && x_127999;
            bool cond_128001 = cond_127997 || y_128000;
            float defunc_0_f_res_f_res_128002;
            
            if (cond_128001) {
                defunc_0_f_res_f_res_128002 = 1.0e-6F;
            } else {
                defunc_0_f_res_f_res_128002 = bicube_127980;
            }
            defunc_0_f_res_127986 = defunc_0_f_res_f_res_128002;
        }
        ((float *) mem_121088.mem)[gtid_118588] = defunc_0_f_res_127986;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128805_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128805_end -
                 futhark_mc_segmap_parloop_128805_start;
        
        ctx->futhark_mc_segmap_parloop_128805_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128805_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128805_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128803(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118587 = tid;
    int num_tasks_127995 = info.nsubtasks;
    struct futhark_mc_task_128802 *futhark_mc_task_128802 =
                                  (struct futhark_mc_task_128802 *) args;
    struct futhark_context *ctx = futhark_mc_task_128802->ctx;
    uint64_t futhark_mc_segmap_task_128803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128803_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128802->free_n_112520;
    int64_t gtid_118586 = futhark_mc_task_128802->free_gtid_118586;
    float x_118590 = futhark_mc_task_128802->free_x_118590;
    float x_118591 = futhark_mc_task_128802->free_x_118591;
    float x_118592 = futhark_mc_task_128802->free_x_118592;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128802->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121088 = {.desc ="mem_121088", .mem =
                                  futhark_mc_task_128802->free_mem_121088,
                                  .size =0, .references =NULL};
    int64_t iter_127996;
    struct futhark_mc_segmap_parloop_struct_128804
    futhark_mc_segmap_parloop_struct_128804;
    
    futhark_mc_segmap_parloop_struct_128804.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128804.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128804.free_gtid_118586 = gtid_118586;
    futhark_mc_segmap_parloop_struct_128804.free_x_118590 = x_118590;
    futhark_mc_segmap_parloop_struct_128804.free_x_118591 = x_118591;
    futhark_mc_segmap_parloop_struct_128804.free_x_118592 = x_118592;
    futhark_mc_segmap_parloop_struct_128804.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128804.free_mem_121088 = mem_121088.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128805_task;
    
    futhark_mc_segmap_parloop_128805_task.name =
        "futhark_mc_segmap_parloop_128805";
    futhark_mc_segmap_parloop_128805_task.fn = futhark_mc_segmap_parloop_128805;
    futhark_mc_segmap_parloop_128805_task.args =
        &futhark_mc_segmap_parloop_struct_128804;
    futhark_mc_segmap_parloop_128805_task.iterations = iterations;
    futhark_mc_segmap_parloop_128805_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128805_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128805_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128805_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128805_task);
    
    if (futhark_mc_segmap_parloop_128805_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128805_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128805_total_end -
                 futhark_mc_segmap_parloop_128805_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128805_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128805_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128805_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128803_end -
                 futhark_mc_segmap_task_128803_start;
        
        ctx->futhark_mc_segmap_task_128803_runs[tid]++;
        ctx->futhark_mc_segmap_task_128803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128803_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128800(void *args, int64_t start,
                                            int64_t end, int flat_tid_118585,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128799
    *futhark_mc_segmap_parloop_struct_128799 =
    (struct futhark_mc_segmap_parloop_struct_128799 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128799->ctx;
    uint64_t futhark_mc_segmap_parloop_128800_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128800_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128799->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128799->free_n_112520;
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128799->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_segmap_parloop_struct_128799->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_segmap_parloop_struct_128799->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_segmap_parloop_struct_128799->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_segmap_parloop_struct_128799->free_mem_121085,
                                  .size =0, .references =NULL};
    struct memblock mem_121107 = {.desc ="mem_121107", .mem =
                                  futhark_mc_segmap_parloop_struct_128799->free_mem_121107,
                                  .size =0, .references =NULL};
    size_t mem_121088_cached_sizze_128801 = 0;
    char *mem_121088 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127975 = start;
    
    if (mem_121088_cached_sizze_128801 < (size_t) bytes_119421) {
        mem_121088 = realloc(mem_121088, bytes_119421);
        mem_121088_cached_sizze_128801 = bytes_119421;
    }
    for (; iter_127975 < end; iter_127975++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127993 = m_112519;
        int64_t gtid_118586 = iter_127975;
        int64_t remnant_127994 = iter_127975 - gtid_118586;
        float x_118590 = ((float *) mem_121079.mem)[gtid_118586];
        float x_118591 = ((float *) mem_121082.mem)[gtid_118586];
        float x_118592 = ((float *) mem_121085.mem)[gtid_118586];
        int64_t flat_tid_118587 = (int64_t) 0;
        int32_t num_tasks_127995;
        struct futhark_mc_task_128802 futhark_mc_task_128802;
        
        futhark_mc_task_128802.ctx = ctx;
        futhark_mc_task_128802.free_n_112520 = n_112520;
        futhark_mc_task_128802.free_gtid_118586 = gtid_118586;
        futhark_mc_task_128802.free_x_118590 = x_118590;
        futhark_mc_task_128802.free_x_118591 = x_118591;
        futhark_mc_task_128802.free_x_118592 = x_118592;
        futhark_mc_task_128802.free_mem_120900 = mem_120900.mem;
        futhark_mc_task_128802.free_mem_121088 = mem_121088;
        
        struct scheduler_segop futhark_mc_task_128802_task;
        
        futhark_mc_task_128802_task.args = &futhark_mc_task_128802;
        futhark_mc_task_128802_task.top_level_fn =
            futhark_mc_segmap_task_128803;
        futhark_mc_task_128802_task.name = "futhark_mc_segmap_task_128803";
        futhark_mc_task_128802_task.iterations = n_112520;
        futhark_mc_task_128802_task.task_time =
            &ctx->futhark_mc_segmap_task_128803_total_time;
        futhark_mc_task_128802_task.task_iter =
            &ctx->futhark_mc_segmap_task_128803_total_iter;
        futhark_mc_task_128802_task.sched = STATIC;
        futhark_mc_task_128802_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128803_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128802_task);
        
        if (futhark_mc_segmap_task_128803_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121107.mem + gtid_118586 * n_112520 * (int64_t) 4,
                mem_121088 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121088);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128800_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128800_end -
                 futhark_mc_segmap_parloop_128800_start;
        
        ctx->futhark_mc_segmap_parloop_128800_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128800_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128800_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128798(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118585 = tid;
    int num_tasks_127950 = info.nsubtasks;
    struct futhark_mc_task_128793 *futhark_mc_task_128793 =
                                  (struct futhark_mc_task_128793 *) args;
    struct futhark_context *ctx = futhark_mc_task_128793->ctx;
    uint64_t futhark_mc_segmap_nested_task_128798_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128798_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128793->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128793->free_n_112520;
    int64_t bytes_119421 = futhark_mc_task_128793->free_bytes_119421;
    struct memblock mem_120900 = {.desc ="mem_120900", .mem =
                                  futhark_mc_task_128793->free_mem_120900,
                                  .size =0, .references =NULL};
    struct memblock mem_121079 = {.desc ="mem_121079", .mem =
                                  futhark_mc_task_128793->free_mem_121079,
                                  .size =0, .references =NULL};
    struct memblock mem_121082 = {.desc ="mem_121082", .mem =
                                  futhark_mc_task_128793->free_mem_121082,
                                  .size =0, .references =NULL};
    struct memblock mem_121085 = {.desc ="mem_121085", .mem =
                                  futhark_mc_task_128793->free_mem_121085,
                                  .size =0, .references =NULL};
    struct memblock mem_121107 = {.desc ="mem_121107", .mem =
                                  futhark_mc_task_128793->free_mem_121107,
                                  .size =0, .references =NULL};
    int64_t iter_127975;
    struct futhark_mc_segmap_parloop_struct_128799
    futhark_mc_segmap_parloop_struct_128799;
    
    futhark_mc_segmap_parloop_struct_128799.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128799.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128799.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128799.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128799.free_mem_120900 = mem_120900.mem;
    futhark_mc_segmap_parloop_struct_128799.free_mem_121079 = mem_121079.mem;
    futhark_mc_segmap_parloop_struct_128799.free_mem_121082 = mem_121082.mem;
    futhark_mc_segmap_parloop_struct_128799.free_mem_121085 = mem_121085.mem;
    futhark_mc_segmap_parloop_struct_128799.free_mem_121107 = mem_121107.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128800_task;
    
    futhark_mc_segmap_parloop_128800_task.name =
        "futhark_mc_segmap_parloop_128800";
    futhark_mc_segmap_parloop_128800_task.fn = futhark_mc_segmap_parloop_128800;
    futhark_mc_segmap_parloop_128800_task.args =
        &futhark_mc_segmap_parloop_struct_128799;
    futhark_mc_segmap_parloop_128800_task.iterations = iterations;
    futhark_mc_segmap_parloop_128800_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128800_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128800_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128800_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128800_task);
    
    if (futhark_mc_segmap_parloop_128800_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128800_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128800_total_end -
                 futhark_mc_segmap_parloop_128800_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128800_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128800_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128800_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128798_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128798_end -
                 futhark_mc_segmap_nested_task_128798_start;
        
        ctx->futhark_mc_segmap_nested_task_128798_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128798_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128798_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128806 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_121117;
    char *free_ext_mem_121118;
    int64_t free_ext_121129;
    char *free_mem_121161;
};
struct futhark_mc_segmap_parloop_struct_128808 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_121117;
    char *free_ext_mem_121118;
    int64_t free_ext_121129;
    char *free_mem_121161;
};
static int futhark_mc_segmap_parloop_128809(void *args, int64_t start,
                                            int64_t end, int flat_tid_118611,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128808
    *futhark_mc_segmap_parloop_struct_128808 =
    (struct futhark_mc_segmap_parloop_struct_128808 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128808->ctx;
    uint64_t futhark_mc_segmap_parloop_128809_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128809_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128808->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128808->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128808->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128808->free_bytes_119421;
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_segmap_parloop_struct_128808->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_segmap_parloop_struct_128808->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 =
            futhark_mc_segmap_parloop_struct_128808->free_ext_121129;
    struct memblock mem_121161 = {.desc ="mem_121161", .mem =
                                  futhark_mc_segmap_parloop_struct_128808->free_mem_121161,
                                  .size =0, .references =NULL};
    size_t mem_121145_cached_sizze_128810 = 0;
    char *mem_121145 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128006 = start;
    
    if (mem_121145_cached_sizze_128810 < (size_t) bytes_119421) {
        mem_121145 = realloc(mem_121145, bytes_119421);
        mem_121145_cached_sizze_128810 = bytes_119421;
    }
    for (; iter_128006 < end; iter_128006++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128015 = m_112519;
        int64_t gtid_118612 = iter_128006;
        int64_t remnant_128016 = iter_128006 - gtid_118612;
        
        for (int64_t i_128007 = 0; i_128007 < n_112520; i_128007++) {
            float x_128009 = ((float *) Y_mem_119377.mem)[gtid_118612 *
                                                          n_112520 + i_128007];
            float x_128010 = ((float *) ext_mem_121118.mem)[gtid_118612 *
                                                            n_112520 +
                                                            i_128007];
            float x_128011 = ((float *) ext_mem_121117.mem)[gtid_118612 *
                                                            ext_121129 +
                                                            i_128007];
            float x_128012 = x_128009 - x_128010;
            float defunc_2_f_res_128013 = x_128012 - x_128011;
            
            ((float *) mem_121145)[i_128007] = defunc_2_f_res_128013;
        }
        memmove(mem_121161.mem + gtid_118612 * n_112520 * (int64_t) 4,
                mem_121145 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121145);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128809_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128809_end -
                 futhark_mc_segmap_parloop_128809_start;
        
        ctx->futhark_mc_segmap_parloop_128809_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128809_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128809_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128807(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118611 = tid;
    int num_tasks_128005 = info.nsubtasks;
    struct futhark_mc_task_128806 *futhark_mc_task_128806 =
                                  (struct futhark_mc_task_128806 *) args;
    struct futhark_context *ctx = futhark_mc_task_128806->ctx;
    uint64_t futhark_mc_segmap_task_128807_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128807_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128806->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128806->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128806->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128806->free_bytes_119421;
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_task_128806->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_task_128806->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 = futhark_mc_task_128806->free_ext_121129;
    struct memblock mem_121161 = {.desc ="mem_121161", .mem =
                                  futhark_mc_task_128806->free_mem_121161,
                                  .size =0, .references =NULL};
    int64_t iter_128006;
    struct futhark_mc_segmap_parloop_struct_128808
    futhark_mc_segmap_parloop_struct_128808;
    
    futhark_mc_segmap_parloop_struct_128808.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128808.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128808.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128808.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128808.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128808.free_ext_mem_121117 =
        ext_mem_121117.mem;
    futhark_mc_segmap_parloop_struct_128808.free_ext_mem_121118 =
        ext_mem_121118.mem;
    futhark_mc_segmap_parloop_struct_128808.free_ext_121129 = ext_121129;
    futhark_mc_segmap_parloop_struct_128808.free_mem_121161 = mem_121161.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128809_task;
    
    futhark_mc_segmap_parloop_128809_task.name =
        "futhark_mc_segmap_parloop_128809";
    futhark_mc_segmap_parloop_128809_task.fn = futhark_mc_segmap_parloop_128809;
    futhark_mc_segmap_parloop_128809_task.args =
        &futhark_mc_segmap_parloop_struct_128808;
    futhark_mc_segmap_parloop_128809_task.iterations = iterations;
    futhark_mc_segmap_parloop_128809_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128809_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128809_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128809_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128809_task);
    
    if (futhark_mc_segmap_parloop_128809_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128809_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128809_total_end -
                 futhark_mc_segmap_parloop_128809_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128809_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128809_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128809_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128807_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128807_end -
                 futhark_mc_segmap_task_128807_start;
        
        ctx->futhark_mc_segmap_task_128807_runs[tid]++;
        ctx->futhark_mc_segmap_task_128807_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128807_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128812 {
    struct futhark_context *ctx;
    int64_t free_m_112519;
    int64_t free_n_112520;
    char *free_Y_mem_119377;
    int64_t free_bytes_119421;
    char *free_ext_mem_121117;
    char *free_ext_mem_121118;
    int64_t free_ext_121129;
    char *free_mem_121161;
};
struct futhark_mc_task_128815 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118614;
    char *free_Y_mem_119377;
    char *free_ext_mem_121117;
    char *free_ext_mem_121118;
    int64_t free_ext_121129;
    char *free_mem_121142;
};
struct futhark_mc_segmap_parloop_struct_128817 {
    struct futhark_context *ctx;
    int64_t free_n_112520;
    int64_t free_gtid_118614;
    char *free_Y_mem_119377;
    char *free_ext_mem_121117;
    char *free_ext_mem_121118;
    int64_t free_ext_121129;
    char *free_mem_121142;
};
static int futhark_mc_segmap_parloop_128818(void *args, int64_t start,
                                            int64_t end, int flat_tid_118615,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128817
    *futhark_mc_segmap_parloop_struct_128817 =
    (struct futhark_mc_segmap_parloop_struct_128817 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128817->ctx;
    uint64_t futhark_mc_segmap_parloop_128818_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128818_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128817->free_n_112520;
    int64_t gtid_118614 =
            futhark_mc_segmap_parloop_struct_128817->free_gtid_118614;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128817->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_segmap_parloop_struct_128817->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_segmap_parloop_struct_128817->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 =
            futhark_mc_segmap_parloop_struct_128817->free_ext_121129;
    struct memblock mem_121142 = {.desc ="mem_121142", .mem =
                                  futhark_mc_segmap_parloop_struct_128817->free_mem_121142,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128027 = start;
    
    for (; iter_128027 < end; iter_128027++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128028 = n_112520;
        int64_t gtid_118616 = iter_128027;
        int64_t remnant_128029 = iter_128027 - gtid_118616;
        float x_128019 = ((float *) Y_mem_119377.mem)[gtid_118614 * n_112520 +
                                                      gtid_118616];
        float x_128020 = ((float *) ext_mem_121118.mem)[gtid_118614 * n_112520 +
                                                        gtid_118616];
        float x_128021 = ((float *) ext_mem_121117.mem)[gtid_118614 *
                                                        ext_121129 +
                                                        gtid_118616];
        float x_128022 = x_128019 - x_128020;
        float defunc_2_f_res_128023 = x_128022 - x_128021;
        
        ((float *) mem_121142.mem)[gtid_118616] = defunc_2_f_res_128023;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128818_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128818_end -
                 futhark_mc_segmap_parloop_128818_start;
        
        ctx->futhark_mc_segmap_parloop_128818_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128818_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128818_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128816(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118615 = tid;
    int num_tasks_128026 = info.nsubtasks;
    struct futhark_mc_task_128815 *futhark_mc_task_128815 =
                                  (struct futhark_mc_task_128815 *) args;
    struct futhark_context *ctx = futhark_mc_task_128815->ctx;
    uint64_t futhark_mc_segmap_task_128816_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128816_start = get_wall_time();
    
    int64_t n_112520 = futhark_mc_task_128815->free_n_112520;
    int64_t gtid_118614 = futhark_mc_task_128815->free_gtid_118614;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128815->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_task_128815->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_task_128815->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 = futhark_mc_task_128815->free_ext_121129;
    struct memblock mem_121142 = {.desc ="mem_121142", .mem =
                                  futhark_mc_task_128815->free_mem_121142,
                                  .size =0, .references =NULL};
    int64_t iter_128027;
    struct futhark_mc_segmap_parloop_struct_128817
    futhark_mc_segmap_parloop_struct_128817;
    
    futhark_mc_segmap_parloop_struct_128817.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128817.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128817.free_gtid_118614 = gtid_118614;
    futhark_mc_segmap_parloop_struct_128817.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128817.free_ext_mem_121117 =
        ext_mem_121117.mem;
    futhark_mc_segmap_parloop_struct_128817.free_ext_mem_121118 =
        ext_mem_121118.mem;
    futhark_mc_segmap_parloop_struct_128817.free_ext_121129 = ext_121129;
    futhark_mc_segmap_parloop_struct_128817.free_mem_121142 = mem_121142.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128818_task;
    
    futhark_mc_segmap_parloop_128818_task.name =
        "futhark_mc_segmap_parloop_128818";
    futhark_mc_segmap_parloop_128818_task.fn = futhark_mc_segmap_parloop_128818;
    futhark_mc_segmap_parloop_128818_task.args =
        &futhark_mc_segmap_parloop_struct_128817;
    futhark_mc_segmap_parloop_128818_task.iterations = iterations;
    futhark_mc_segmap_parloop_128818_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128818_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128818_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128818_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128818_task);
    
    if (futhark_mc_segmap_parloop_128818_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128818_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128818_total_end -
                 futhark_mc_segmap_parloop_128818_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128818_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128818_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128818_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128816_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128816_end -
                 futhark_mc_segmap_task_128816_start;
        
        ctx->futhark_mc_segmap_task_128816_runs[tid]++;
        ctx->futhark_mc_segmap_task_128816_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128816_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128813(void *args, int64_t start,
                                            int64_t end, int flat_tid_118613,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128812
    *futhark_mc_segmap_parloop_struct_128812 =
    (struct futhark_mc_segmap_parloop_struct_128812 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128812->ctx;
    uint64_t futhark_mc_segmap_parloop_128813_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128813_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_segmap_parloop_struct_128812->free_m_112519;
    int64_t n_112520 = futhark_mc_segmap_parloop_struct_128812->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_segmap_parloop_struct_128812->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 =
            futhark_mc_segmap_parloop_struct_128812->free_bytes_119421;
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_segmap_parloop_struct_128812->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_segmap_parloop_struct_128812->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 =
            futhark_mc_segmap_parloop_struct_128812->free_ext_121129;
    struct memblock mem_121161 = {.desc ="mem_121161", .mem =
                                  futhark_mc_segmap_parloop_struct_128812->free_mem_121161,
                                  .size =0, .references =NULL};
    size_t mem_121142_cached_sizze_128814 = 0;
    char *mem_121142 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128018 = start;
    
    if (mem_121142_cached_sizze_128814 < (size_t) bytes_119421) {
        mem_121142 = realloc(mem_121142, bytes_119421);
        mem_121142_cached_sizze_128814 = bytes_119421;
    }
    for (; iter_128018 < end; iter_128018++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128024 = m_112519;
        int64_t gtid_118614 = iter_128018;
        int64_t remnant_128025 = iter_128018 - gtid_118614;
        int64_t flat_tid_118615 = (int64_t) 0;
        int32_t num_tasks_128026;
        struct futhark_mc_task_128815 futhark_mc_task_128815;
        
        futhark_mc_task_128815.ctx = ctx;
        futhark_mc_task_128815.free_n_112520 = n_112520;
        futhark_mc_task_128815.free_gtid_118614 = gtid_118614;
        futhark_mc_task_128815.free_Y_mem_119377 = Y_mem_119377.mem;
        futhark_mc_task_128815.free_ext_mem_121117 = ext_mem_121117.mem;
        futhark_mc_task_128815.free_ext_mem_121118 = ext_mem_121118.mem;
        futhark_mc_task_128815.free_ext_121129 = ext_121129;
        futhark_mc_task_128815.free_mem_121142 = mem_121142;
        
        struct scheduler_segop futhark_mc_task_128815_task;
        
        futhark_mc_task_128815_task.args = &futhark_mc_task_128815;
        futhark_mc_task_128815_task.top_level_fn =
            futhark_mc_segmap_task_128816;
        futhark_mc_task_128815_task.name = "futhark_mc_segmap_task_128816";
        futhark_mc_task_128815_task.iterations = n_112520;
        futhark_mc_task_128815_task.task_time =
            &ctx->futhark_mc_segmap_task_128816_total_time;
        futhark_mc_task_128815_task.task_iter =
            &ctx->futhark_mc_segmap_task_128816_total_iter;
        futhark_mc_task_128815_task.sched = STATIC;
        futhark_mc_task_128815_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128816_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128815_task);
        
        if (futhark_mc_segmap_task_128816_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121161.mem + gtid_118614 * n_112520 * (int64_t) 4,
                mem_121142 + (int64_t) 0, n_112520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121142);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128813_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128813_end -
                 futhark_mc_segmap_parloop_128813_start;
        
        ctx->futhark_mc_segmap_parloop_128813_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128813_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128813_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128811(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118613 = tid;
    int num_tasks_128005 = info.nsubtasks;
    struct futhark_mc_task_128806 *futhark_mc_task_128806 =
                                  (struct futhark_mc_task_128806 *) args;
    struct futhark_context *ctx = futhark_mc_task_128806->ctx;
    uint64_t futhark_mc_segmap_nested_task_128811_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128811_start = get_wall_time();
    
    int64_t m_112519 = futhark_mc_task_128806->free_m_112519;
    int64_t n_112520 = futhark_mc_task_128806->free_n_112520;
    struct memblock Y_mem_119377 = {.desc ="Y_mem_119377", .mem =
                                    futhark_mc_task_128806->free_Y_mem_119377,
                                    .size =0, .references =NULL};
    int64_t bytes_119421 = futhark_mc_task_128806->free_bytes_119421;
    struct memblock ext_mem_121117 = {.desc ="ext_mem_121117", .mem =
                                      futhark_mc_task_128806->free_ext_mem_121117,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121118 = {.desc ="ext_mem_121118", .mem =
                                      futhark_mc_task_128806->free_ext_mem_121118,
                                      .size =0, .references =NULL};
    int64_t ext_121129 = futhark_mc_task_128806->free_ext_121129;
    struct memblock mem_121161 = {.desc ="mem_121161", .mem =
                                  futhark_mc_task_128806->free_mem_121161,
                                  .size =0, .references =NULL};
    int64_t iter_128018;
    struct futhark_mc_segmap_parloop_struct_128812
    futhark_mc_segmap_parloop_struct_128812;
    
    futhark_mc_segmap_parloop_struct_128812.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128812.free_m_112519 = m_112519;
    futhark_mc_segmap_parloop_struct_128812.free_n_112520 = n_112520;
    futhark_mc_segmap_parloop_struct_128812.free_Y_mem_119377 =
        Y_mem_119377.mem;
    futhark_mc_segmap_parloop_struct_128812.free_bytes_119421 = bytes_119421;
    futhark_mc_segmap_parloop_struct_128812.free_ext_mem_121117 =
        ext_mem_121117.mem;
    futhark_mc_segmap_parloop_struct_128812.free_ext_mem_121118 =
        ext_mem_121118.mem;
    futhark_mc_segmap_parloop_struct_128812.free_ext_121129 = ext_121129;
    futhark_mc_segmap_parloop_struct_128812.free_mem_121161 = mem_121161.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128813_task;
    
    futhark_mc_segmap_parloop_128813_task.name =
        "futhark_mc_segmap_parloop_128813";
    futhark_mc_segmap_parloop_128813_task.fn = futhark_mc_segmap_parloop_128813;
    futhark_mc_segmap_parloop_128813_task.args =
        &futhark_mc_segmap_parloop_struct_128812;
    futhark_mc_segmap_parloop_128813_task.iterations = iterations;
    futhark_mc_segmap_parloop_128813_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128813_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128813_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128813_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128813_task);
    
    if (futhark_mc_segmap_parloop_128813_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128813_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128813_total_end -
                 futhark_mc_segmap_parloop_128813_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128813_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128813_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128813_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128811_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128811_end -
                 futhark_mc_segmap_nested_task_128811_start;
        
        ctx->futhark_mc_segmap_nested_task_128811_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128811_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128811_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_128030,
                             struct memblock *mem_out_p_128031,
                             struct memblock *mem_out_p_128032,
                             struct memblock Y_mem_119377, int64_t m_112519,
                             int64_t n_112520, int64_t n_p_112522,
                             int64_t t_window_112523, int64_t l_window_112524,
                             int64_t t_degree_112525, int64_t l_degree_112526,
                             int64_t t_jump_112527, int64_t l_jump_112528,
                             int64_t inner_112529, int64_t outer_112530,
                             int64_t jump_threshold_112531,
                             int64_t max_group_sizze_112532)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_119417_cached_sizze_128033 = 0;
    char *mem_119417 = NULL;
    size_t mem_119420_cached_sizze_128034 = 0;
    char *mem_119420 = NULL;
    size_t mem_119442_cached_sizze_128035 = 0;
    char *mem_119442 = NULL;
    size_t mem_119464_cached_sizze_128036 = 0;
    char *mem_119464 = NULL;
    size_t mem_119486_cached_sizze_128037 = 0;
    char *mem_119486 = NULL;
    size_t mem_119544_cached_sizze_128038 = 0;
    char *mem_119544 = NULL;
    size_t mem_119548_cached_sizze_128039 = 0;
    char *mem_119548 = NULL;
    size_t mem_119606_cached_sizze_128040 = 0;
    char *mem_119606 = NULL;
    size_t mem_119610_cached_sizze_128041 = 0;
    char *mem_119610 = NULL;
    size_t mem_119686_cached_sizze_128042 = 0;
    char *mem_119686 = NULL;
    size_t mem_119708_cached_sizze_128043 = 0;
    char *mem_119708 = NULL;
    size_t mem_119730_cached_sizze_128044 = 0;
    char *mem_119730 = NULL;
    size_t mem_119788_cached_sizze_128045 = 0;
    char *mem_119788 = NULL;
    size_t mem_120357_cached_sizze_128046 = 0;
    char *mem_120357 = NULL;
    size_t mem_120361_cached_sizze_128047 = 0;
    char *mem_120361 = NULL;
    size_t mem_120900_cached_sizze_128048 = 0;
    char *mem_120900 = NULL;
    size_t mem_120922_cached_sizze_128049 = 0;
    char *mem_120922 = NULL;
    size_t mem_121076_cached_sizze_128050 = 0;
    char *mem_121076 = NULL;
    size_t mem_121079_cached_sizze_128051 = 0;
    char *mem_121079 = NULL;
    size_t mem_121082_cached_sizze_128052 = 0;
    char *mem_121082 = NULL;
    size_t mem_121085_cached_sizze_128053 = 0;
    char *mem_121085 = NULL;
    struct memblock mem_out_121230;
    
    mem_out_121230.references = NULL;
    
    struct memblock mem_out_121231;
    
    mem_out_121231.references = NULL;
    
    struct memblock mem_out_121232;
    
    mem_out_121232.references = NULL;
    
    bool assert_cond_112533 = sle64((int64_t) 4, n_p_112522);
    bool assert_c_112534;
    
    if (!assert_cond_112533) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:67:13-33\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_112535 = smod64(t_window_112523, (int64_t) 2);
    bool assert_cond_112536 = x_112535 == (int64_t) 1;
    bool assert_c_112537;
    
    if (!assert_cond_112536) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112538 = slt64((int64_t) 0, t_window_112523);
    bool assert_c_112539;
    
    if (!assert_cond_112538) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_112540 = smod64(l_window_112524, (int64_t) 2);
    bool assert_cond_112541 = x_112540 == (int64_t) 1;
    bool assert_c_112542;
    
    if (!assert_cond_112541) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112543 = slt64((int64_t) 0, l_window_112524);
    bool assert_c_112544;
    
    if (!assert_cond_112543) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool cond_112545 = sle64((int64_t) 0, t_degree_112525);
    bool assert_cond_t_res_112546 = sle64(t_degree_112525, (int64_t) 2);
    bool x_112547 = cond_112545 && assert_cond_t_res_112546;
    bool assert_c_112548;
    
    if (!x_112547) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:72:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool cond_112549 = sle64((int64_t) 0, l_degree_112526);
    bool assert_cond_t_res_112550 = sle64(l_degree_112526, (int64_t) 2);
    bool x_112551 = cond_112549 && assert_cond_t_res_112550;
    bool assert_c_112552;
    
    if (!x_112551) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:73:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112553 = sle64((int64_t) 0, t_jump_112527);
    bool assert_c_112554;
    
    if (!assert_cond_112553) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:75:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112555 = sle64((int64_t) 0, l_jump_112528);
    bool assert_c_112556;
    
    if (!assert_cond_112555) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:76:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112557 = slt64((int64_t) 0, inner_112529);
    bool assert_c_112558;
    
    if (!assert_cond_112557) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  stl.fut:78:15-29\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112559 = sle64((int64_t) 0, outer_112530);
    bool assert_c_112560;
    
    if (!assert_cond_112559) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:79:15-32\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    float i64_res_112561 = sitofp_i64_f32(n_112520);
    float i64_res_112562 = sitofp_i64_f32(n_p_112522);
    float binop_p_112563 = i64_res_112561 / i64_res_112562;
    float defunc_0_f_res_112564;
    
    defunc_0_f_res_112564 = futrts_ceil32(binop_p_112563);
    
    int64_t defunc_0_f_res_112565 = fptosi_f32_i64(defunc_0_f_res_112564);
    int64_t css_chunk_len_112566 = add64((int64_t) 2, defunc_0_f_res_112565);
    int64_t y_112567 = mul64((int64_t) 2, n_p_112522);
    int64_t C_len_112568 = add64(n_112520, y_112567);
    bool cond_112569 = l_jump_112528 == (int64_t) 1;
    int64_t l_n_m_112570;
    
    if (cond_112569) {
        l_n_m_112570 = n_112520;
    } else {
        bool zzero_112571 = l_jump_112528 == (int64_t) 0;
        bool nonzzero_112572 = !zzero_112571;
        bool nonzzero_cert_112573;
        
        if (!nonzzero_112572) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:87:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_112574 = sdiv64(n_112520, l_jump_112528);
        int64_t l_n_m_f_res_112575 = add64((int64_t) 1, x_112574);
        
        l_n_m_112570 = l_n_m_f_res_112575;
    }
    
    bool cond_112576 = t_jump_112527 == (int64_t) 1;
    int64_t t_n_m_112577;
    
    if (cond_112576) {
        t_n_m_112577 = n_112520;
    } else {
        bool zzero_112578 = t_jump_112527 == (int64_t) 0;
        bool nonzzero_112579 = !zzero_112578;
        bool nonzzero_cert_112580;
        
        if (!nonzzero_112579) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:91:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_112581 = sdiv64(n_112520, t_jump_112527);
        int64_t t_n_m_f_res_112582 = add64((int64_t) 1, x_112581);
        
        t_n_m_112577 = t_n_m_f_res_112582;
    }
    
    float x_112583 = i64_res_112561 / 2.0F;
    float floor_arg_112584 = 1.0F + x_112583;
    float floor_res_112585;
    
    floor_res_112585 = futrts_floor32(floor_arg_112584);
    
    int64_t defunc_0_f_res_112586 = fptosi_f32_i64(floor_res_112585);
    int64_t x_112587 = sub64(n_112520, defunc_0_f_res_112586);
    int64_t mid2_112588 = add64((int64_t) 1, x_112587);
    bool cond_112589 = defunc_0_f_res_112586 == mid2_112588;
    int64_t stl_res_112590;
    int64_t stl_res_112591;
    
    if (cond_112589) {
        int64_t stl_res_t_res_112592 = sub64(defunc_0_f_res_112586,
                                             (int64_t) 1);
        
        stl_res_112590 = stl_res_t_res_112592;
        stl_res_112591 = defunc_0_f_res_112586;
    } else {
        int64_t min_res_112593 = smin64(defunc_0_f_res_112586, mid2_112588);
        int64_t stl_res_f_res_112594 = sub64(min_res_112593, (int64_t) 1);
        int64_t max_res_112595 = smax64(defunc_0_f_res_112586, mid2_112588);
        
        stl_res_112590 = stl_res_f_res_112594;
        stl_res_112591 = max_res_112595;
    }
    
    int64_t i_112596 = sub64(n_112520, (int64_t) 1);
    bool x_112597 = sle64((int64_t) 0, i_112596);
    bool y_112598 = slt64(i_112596, n_112520);
    bool bounds_check_112599 = x_112597 && y_112598;
    bool index_certs_112600;
    
    if (!bounds_check_112599) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_112596,
                               "] out of bounds for array of shape [",
                               (long long) n_112520, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  stl.fut:105:31-49\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_119415 = m_112519 * n_112520;
    int64_t binop_y_119416 = (int64_t) 8 * binop_x_119415;
    int64_t bytes_119414 = smax64((int64_t) 0, binop_y_119416);
    
    if (mem_119417_cached_sizze_128033 < (size_t) bytes_119414) {
        mem_119417 = realloc(mem_119417, bytes_119414);
        mem_119417_cached_sizze_128033 = bytes_119414;
    }
    
    int64_t binop_y_119419 = (int64_t) 8 * m_112519;
    int64_t bytes_119418 = smax64((int64_t) 0, binop_y_119419);
    
    if (mem_119420_cached_sizze_128034 < (size_t) bytes_119418) {
        mem_119420 = realloc(mem_119420, bytes_119418);
        mem_119420_cached_sizze_128034 = bytes_119418;
    }
    
    int64_t binop_y_119379 = (int64_t) 8 * n_112520;
    int64_t bytes_119378 = smax64((int64_t) 0, binop_y_119379);
    int64_t flat_tid_114691 = (int64_t) 0;
    int32_t num_tasks_121233;
    int64_t flat_tid_114693 = (int64_t) 0;
    struct futhark_mc_task_128054 futhark_mc_task_128054;
    
    futhark_mc_task_128054.ctx = ctx;
    futhark_mc_task_128054.free_m_112519 = m_112519;
    futhark_mc_task_128054.free_n_112520 = n_112520;
    futhark_mc_task_128054.free_i_112596 = i_112596;
    futhark_mc_task_128054.free_Y_mem_119377 = Y_mem_119377.mem;
    futhark_mc_task_128054.free_bytes_119378 = bytes_119378;
    futhark_mc_task_128054.free_mem_119417 = mem_119417;
    futhark_mc_task_128054.free_mem_119420 = mem_119420;
    
    struct scheduler_segop futhark_mc_task_128054_task;
    
    futhark_mc_task_128054_task.args = &futhark_mc_task_128054;
    futhark_mc_task_128054_task.top_level_fn = futhark_mc_segmap_task_128055;
    futhark_mc_task_128054_task.name = "futhark_mc_segmap_task_128055";
    futhark_mc_task_128054_task.iterations = m_112519;
    futhark_mc_task_128054_task.task_time =
        &ctx->futhark_mc_segmap_task_128055_total_time;
    futhark_mc_task_128054_task.task_iter =
        &ctx->futhark_mc_segmap_task_128055_total_iter;
    futhark_mc_task_128054_task.sched = STATIC;
    futhark_mc_task_128054_task.nested_fn =
        futhark_mc_segmap_nested_task_128060;
    
    int futhark_mc_segmap_task_128055_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128054_task);
    
    if (futhark_mc_segmap_task_128055_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_119441 = (int64_t) 4 * binop_x_119415;
    int64_t bytes_119439 = smax64((int64_t) 0, binop_y_119441);
    
    if (mem_119442_cached_sizze_128035 < (size_t) bytes_119439) {
        mem_119442 = realloc(mem_119442, bytes_119439);
        mem_119442_cached_sizze_128035 = bytes_119439;
    }
    
    int64_t binop_y_119422 = (int64_t) 4 * n_112520;
    int64_t bytes_119421 = smax64((int64_t) 0, binop_y_119422);
    int64_t flat_tid_114718 = (int64_t) 0;
    int32_t num_tasks_121296;
    int64_t flat_tid_114720 = (int64_t) 0;
    struct futhark_mc_task_128076 futhark_mc_task_128076;
    
    futhark_mc_task_128076.ctx = ctx;
    futhark_mc_task_128076.free_m_112519 = m_112519;
    futhark_mc_task_128076.free_n_112520 = n_112520;
    futhark_mc_task_128076.free_mem_119417 = mem_119417;
    futhark_mc_task_128076.free_bytes_119421 = bytes_119421;
    futhark_mc_task_128076.free_mem_119442 = mem_119442;
    
    struct scheduler_segop futhark_mc_task_128076_task;
    
    futhark_mc_task_128076_task.args = &futhark_mc_task_128076;
    futhark_mc_task_128076_task.top_level_fn = futhark_mc_segmap_task_128077;
    futhark_mc_task_128076_task.name = "futhark_mc_segmap_task_128077";
    futhark_mc_task_128076_task.iterations = m_112519;
    futhark_mc_task_128076_task.task_time =
        &ctx->futhark_mc_segmap_task_128077_total_time;
    futhark_mc_task_128076_task.task_iter =
        &ctx->futhark_mc_segmap_task_128077_total_iter;
    futhark_mc_task_128076_task.sched = STATIC;
    futhark_mc_task_128076_task.nested_fn =
        futhark_mc_segmap_nested_task_128081;
    
    int futhark_mc_segmap_task_128077_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128076_task);
    
    if (futhark_mc_segmap_task_128077_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_112631 = slt64(n_p_112522, (int64_t) 0);
    bool valid_112632 = !bounds_invalid_upwards_112631;
    bool range_valid_c_112633;
    
    if (!valid_112632) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_112522, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:111:5-121:14\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_112635 = slt64(css_chunk_len_112566,
                                               (int64_t) 0);
    bool valid_112636 = !bounds_invalid_upwards_112635;
    bool range_valid_c_112637;
    
    if (!valid_112636) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) css_chunk_len_112566, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:114:17-120:39\n   #3  /prelude/soacs.fut:59:3-10\n   #4  /prelude/array.fut:195:3-17\n   #5  stl.fut:111:5-121:14\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_119462 = n_p_112522 * css_chunk_len_112566;
    int64_t binop_y_119463 = (int64_t) 8 * binop_x_119462;
    int64_t bytes_119461 = smax64((int64_t) 0, binop_y_119463);
    
    if (mem_119464_cached_sizze_128036 < (size_t) bytes_119461) {
        mem_119464 = realloc(mem_119464, bytes_119461);
        mem_119464_cached_sizze_128036 = bytes_119461;
    }
    
    int64_t binop_y_119444 = (int64_t) 8 * css_chunk_len_112566;
    int64_t bytes_119443 = smax64((int64_t) 0, binop_y_119444);
    int64_t flat_tid_114728 = (int64_t) 0;
    int32_t num_tasks_121315;
    int64_t flat_tid_114730 = (int64_t) 0;
    struct futhark_mc_task_128089 futhark_mc_task_128089;
    
    futhark_mc_task_128089.ctx = ctx;
    futhark_mc_task_128089.free_n_p_112522 = n_p_112522;
    futhark_mc_task_128089.free_css_chunk_len_112566 = css_chunk_len_112566;
    futhark_mc_task_128089.free_i_112596 = i_112596;
    futhark_mc_task_128089.free_bytes_119443 = bytes_119443;
    futhark_mc_task_128089.free_mem_119464 = mem_119464;
    
    struct scheduler_segop futhark_mc_task_128089_task;
    
    futhark_mc_task_128089_task.args = &futhark_mc_task_128089;
    futhark_mc_task_128089_task.top_level_fn = futhark_mc_segmap_task_128090;
    futhark_mc_task_128089_task.name = "futhark_mc_segmap_task_128090";
    futhark_mc_task_128089_task.iterations = n_p_112522;
    futhark_mc_task_128089_task.task_time =
        &ctx->futhark_mc_segmap_task_128090_total_time;
    futhark_mc_task_128089_task.task_iter =
        &ctx->futhark_mc_segmap_task_128090_total_iter;
    futhark_mc_task_128089_task.sched = STATIC;
    futhark_mc_task_128089_task.nested_fn =
        futhark_mc_segmap_nested_task_128094;
    
    int futhark_mc_segmap_task_128090_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128089_task);
    
    if (futhark_mc_segmap_task_128090_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_x_119484 = m_112519 * n_p_112522;
    int64_t binop_y_119485 = (int64_t) 4 * binop_x_119484;
    int64_t bytes_119483 = smax64((int64_t) 0, binop_y_119485);
    
    if (mem_119486_cached_sizze_128037 < (size_t) bytes_119483) {
        mem_119486 = realloc(mem_119486, bytes_119483);
        mem_119486_cached_sizze_128037 = bytes_119483;
    }
    
    int64_t binop_y_119466 = (int64_t) 4 * n_p_112522;
    int64_t bytes_119465 = smax64((int64_t) 0, binop_y_119466);
    int64_t flat_tid_114741 = (int64_t) 0;
    int32_t num_tasks_121338;
    int64_t flat_tid_114743 = (int64_t) 0;
    struct futhark_mc_task_128102 futhark_mc_task_128102;
    
    futhark_mc_task_128102.ctx = ctx;
    futhark_mc_task_128102.free_m_112519 = m_112519;
    futhark_mc_task_128102.free_n_112520 = n_112520;
    futhark_mc_task_128102.free_n_p_112522 = n_p_112522;
    futhark_mc_task_128102.free_css_chunk_len_112566 = css_chunk_len_112566;
    futhark_mc_task_128102.free_Y_mem_119377 = Y_mem_119377.mem;
    futhark_mc_task_128102.free_mem_119464 = mem_119464;
    futhark_mc_task_128102.free_bytes_119465 = bytes_119465;
    futhark_mc_task_128102.free_mem_119486 = mem_119486;
    
    struct scheduler_segop futhark_mc_task_128102_task;
    
    futhark_mc_task_128102_task.args = &futhark_mc_task_128102;
    futhark_mc_task_128102_task.top_level_fn = futhark_mc_segmap_task_128103;
    futhark_mc_task_128102_task.name = "futhark_mc_segmap_task_128103";
    futhark_mc_task_128102_task.iterations = m_112519;
    futhark_mc_task_128102_task.task_time =
        &ctx->futhark_mc_segmap_task_128103_total_time;
    futhark_mc_task_128102_task.task_iter =
        &ctx->futhark_mc_segmap_task_128103_total_iter;
    futhark_mc_task_128102_task.sched = STATIC;
    futhark_mc_task_128102_task.nested_fn =
        futhark_mc_segmap_nested_task_128107;
    
    int futhark_mc_segmap_task_128103_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128102_task);
    
    if (futhark_mc_segmap_task_128103_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_112668 = smin64(n_112520, l_window_112524);
    bool bounds_invalid_upwards_112669 = slt64(l_n_m_112570, (int64_t) 0);
    bool valid_112670 = !bounds_invalid_upwards_112669;
    bool range_valid_c_112671;
    
    if (!valid_112670) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_112570, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-374:7\n   #3  loess.fut:409:15-61\n   #4  stl.fut:143:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:141:5-144:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_112673 = slt64((int64_t) 1, min_res_112668);
    float i64_res_112674 = sitofp_i64_f32(l_window_112524);
    int64_t binop_x_119542 = m_112519 * l_n_m_112570;
    int64_t binop_y_119543 = (int64_t) 8 * binop_x_119542;
    int64_t bytes_119541 = smax64((int64_t) 0, binop_y_119543);
    
    if (mem_119544_cached_sizze_128038 < (size_t) bytes_119541) {
        mem_119544 = realloc(mem_119544, bytes_119541);
        mem_119544_cached_sizze_128038 = bytes_119541;
    }
    
    int64_t binop_y_119547 = (int64_t) 4 * binop_x_119542;
    int64_t bytes_119545 = smax64((int64_t) 0, binop_y_119547);
    
    if (mem_119548_cached_sizze_128039 < (size_t) bytes_119545) {
        mem_119548 = realloc(mem_119548, bytes_119545);
        mem_119548_cached_sizze_128039 = bytes_119545;
    }
    
    int64_t binop_y_119491 = (int64_t) 4 * l_n_m_112570;
    int64_t bytes_119490 = smax64((int64_t) 0, binop_y_119491);
    int64_t binop_y_119494 = (int64_t) 8 * l_n_m_112570;
    int64_t bytes_119493 = smax64((int64_t) 0, binop_y_119494);
    int64_t flat_tid_114801 = (int64_t) 0;
    int32_t num_tasks_121436;
    int64_t flat_tid_114803 = (int64_t) 0;
    struct futhark_mc_task_128123 futhark_mc_task_128123;
    
    futhark_mc_task_128123.ctx = ctx;
    futhark_mc_task_128123.free_m_112519 = m_112519;
    futhark_mc_task_128123.free_n_112520 = n_112520;
    futhark_mc_task_128123.free_l_window_112524 = l_window_112524;
    futhark_mc_task_128123.free_l_jump_112528 = l_jump_112528;
    futhark_mc_task_128123.free_l_n_m_112570 = l_n_m_112570;
    futhark_mc_task_128123.free_i_112596 = i_112596;
    futhark_mc_task_128123.free_x_112597 = x_112597;
    futhark_mc_task_128123.free_min_res_112668 = min_res_112668;
    futhark_mc_task_128123.free_loop_cond_112673 = loop_cond_112673;
    futhark_mc_task_128123.free_i64_res_112674 = i64_res_112674;
    futhark_mc_task_128123.free_bytes_119378 = bytes_119378;
    futhark_mc_task_128123.free_mem_119417 = mem_119417;
    futhark_mc_task_128123.free_mem_119420 = mem_119420;
    futhark_mc_task_128123.free_bytes_119490 = bytes_119490;
    futhark_mc_task_128123.free_bytes_119493 = bytes_119493;
    futhark_mc_task_128123.free_mem_119544 = mem_119544;
    futhark_mc_task_128123.free_mem_119548 = mem_119548;
    
    struct scheduler_segop futhark_mc_task_128123_task;
    
    futhark_mc_task_128123_task.args = &futhark_mc_task_128123;
    futhark_mc_task_128123_task.top_level_fn = futhark_mc_segmap_task_128124;
    futhark_mc_task_128123_task.name = "futhark_mc_segmap_task_128124";
    futhark_mc_task_128123_task.iterations = m_112519;
    futhark_mc_task_128123_task.task_time =
        &ctx->futhark_mc_segmap_task_128124_total_time;
    futhark_mc_task_128123_task.task_iter =
        &ctx->futhark_mc_segmap_task_128124_total_iter;
    futhark_mc_task_128123_task.sched = DYNAMIC;
    futhark_mc_task_128123_task.nested_fn =
        futhark_mc_segmap_nested_task_128130;
    
    int futhark_mc_segmap_task_128124_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128123_task);
    
    if (futhark_mc_segmap_task_128124_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_112780 = smin64(n_112520, t_window_112523);
    bool bounds_invalid_upwards_112781 = slt64(t_n_m_112577, (int64_t) 0);
    bool valid_112782 = !bounds_invalid_upwards_112781;
    bool range_valid_c_112783;
    
    if (!valid_112782) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_112577, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-374:7\n   #3  loess.fut:409:15-61\n   #4  stl.fut:150:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:148:5-151:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_112785 = slt64((int64_t) 1, min_res_112780);
    float i64_res_112786 = sitofp_i64_f32(t_window_112523);
    int64_t binop_x_119604 = m_112519 * t_n_m_112577;
    int64_t binop_y_119605 = (int64_t) 8 * binop_x_119604;
    int64_t bytes_119603 = smax64((int64_t) 0, binop_y_119605);
    
    if (mem_119606_cached_sizze_128040 < (size_t) bytes_119603) {
        mem_119606 = realloc(mem_119606, bytes_119603);
        mem_119606_cached_sizze_128040 = bytes_119603;
    }
    
    int64_t binop_y_119609 = (int64_t) 4 * binop_x_119604;
    int64_t bytes_119607 = smax64((int64_t) 0, binop_y_119609);
    
    if (mem_119610_cached_sizze_128041 < (size_t) bytes_119607) {
        mem_119610 = realloc(mem_119610, bytes_119607);
        mem_119610_cached_sizze_128041 = bytes_119607;
    }
    
    int64_t binop_y_119553 = (int64_t) 4 * t_n_m_112577;
    int64_t bytes_119552 = smax64((int64_t) 0, binop_y_119553);
    int64_t binop_y_119556 = (int64_t) 8 * t_n_m_112577;
    int64_t bytes_119555 = smax64((int64_t) 0, binop_y_119556);
    int64_t flat_tid_114910 = (int64_t) 0;
    int32_t num_tasks_121707;
    int64_t flat_tid_114912 = (int64_t) 0;
    struct futhark_mc_task_128144 futhark_mc_task_128144;
    
    futhark_mc_task_128144.ctx = ctx;
    futhark_mc_task_128144.free_m_112519 = m_112519;
    futhark_mc_task_128144.free_n_112520 = n_112520;
    futhark_mc_task_128144.free_t_window_112523 = t_window_112523;
    futhark_mc_task_128144.free_t_jump_112527 = t_jump_112527;
    futhark_mc_task_128144.free_t_n_m_112577 = t_n_m_112577;
    futhark_mc_task_128144.free_i_112596 = i_112596;
    futhark_mc_task_128144.free_x_112597 = x_112597;
    futhark_mc_task_128144.free_min_res_112780 = min_res_112780;
    futhark_mc_task_128144.free_loop_cond_112785 = loop_cond_112785;
    futhark_mc_task_128144.free_i64_res_112786 = i64_res_112786;
    futhark_mc_task_128144.free_bytes_119378 = bytes_119378;
    futhark_mc_task_128144.free_mem_119417 = mem_119417;
    futhark_mc_task_128144.free_mem_119420 = mem_119420;
    futhark_mc_task_128144.free_bytes_119552 = bytes_119552;
    futhark_mc_task_128144.free_bytes_119555 = bytes_119555;
    futhark_mc_task_128144.free_mem_119606 = mem_119606;
    futhark_mc_task_128144.free_mem_119610 = mem_119610;
    
    struct scheduler_segop futhark_mc_task_128144_task;
    
    futhark_mc_task_128144_task.args = &futhark_mc_task_128144;
    futhark_mc_task_128144_task.top_level_fn = futhark_mc_segmap_task_128145;
    futhark_mc_task_128144_task.name = "futhark_mc_segmap_task_128145";
    futhark_mc_task_128144_task.iterations = m_112519;
    futhark_mc_task_128144_task.task_time =
        &ctx->futhark_mc_segmap_task_128145_total_time;
    futhark_mc_task_128144_task.task_iter =
        &ctx->futhark_mc_segmap_task_128145_total_iter;
    futhark_mc_task_128144_task.sched = DYNAMIC;
    futhark_mc_task_128144_task.nested_fn =
        futhark_mc_segmap_nested_task_128151;
    
    int futhark_mc_segmap_task_128145_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128144_task);
    
    if (futhark_mc_segmap_task_128145_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_119614;
    
    mem_119614.references = NULL;
    if (memblock_alloc(ctx, &mem_119614, bytes_119439, "mem_119614")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_121978 = 0; i_121978 < m_112519; i_121978++) {
        for (int64_t i_121979 = 0; i_121979 < n_112520; i_121979++) {
            ((float *) mem_119614.mem)[i_121978 * n_112520 + i_121979] = 0.0F;
        }
    }
    
    struct memblock mem_119618;
    
    mem_119618.references = NULL;
    if (memblock_alloc(ctx, &mem_119618, bytes_119439, "mem_119618")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_121980 = 0; i_121980 < m_112519; i_121980++) {
        for (int64_t i_121981 = 0; i_121981 < n_112520; i_121981++) {
            ((float *) mem_119618.mem)[i_121980 * n_112520 + i_121981] = 1.0F;
        }
    }
    
    bool cond_112894 = slt64((int64_t) 1, l_jump_112528);
    bool cond_112895 = slt64((int64_t) 1, t_jump_112527);
    int64_t y_112896 = sub64(outer_112530, (int64_t) 1);
    bool loop_nonempty_112897 = slt64((int64_t) 0, outer_112530);
    bool bounds_invalid_upwards_112898 = slt64(C_len_112568, (int64_t) 0);
    bool valid_112899 = !bounds_invalid_upwards_112898;
    bool loop_not_taken_112900 = !assert_cond_112557;
    bool protect_assert_disj_112901 = valid_112899 || loop_not_taken_112900;
    bool loop_not_taken_112902 = !loop_nonempty_112897;
    bool protect_assert_disj_112903 = protect_assert_disj_112901 ||
         loop_not_taken_112902;
    bool range_valid_c_112904;
    
    if (!protect_assert_disj_112903) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_112568, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:194:20-59\n   #3  stl.fut:192:13-195:24\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool zzero_112906 = n_p_112522 == (int64_t) 0;
    bool nonzzero_112907 = !zzero_112906;
    bool protect_assert_disj_112908 = loop_not_taken_112900 || nonzzero_112907;
    bool protect_assert_disj_112909 = loop_not_taken_112902 ||
         protect_assert_disj_112908;
    bool nonzzero_cert_112910;
    
    if (!protect_assert_disj_112909) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:194:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_112911 = add64(n_112520, n_p_112522);
    int64_t lifted_single_ma_arg_112912 = add64((int64_t) 1, x_112911);
    int64_t m_112913 = sub64(n_p_112522, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_112914 = sle64((int64_t) 0, m_112913);
    bool i_p_m_t_s_leq_w_112915 = slt64(m_112913, C_len_112568);
    bool i_lte_j_112916 = sle64((int64_t) 0, n_p_112522);
    bool y_112917 = zzero_leq_i_p_m_t_s_112914 && i_p_m_t_s_leq_w_112915;
    bool y_112918 = i_lte_j_112916 && y_112917;
    bool ok_or_empty_112919 = zzero_112906 || y_112918;
    bool protect_assert_disj_112920 = loop_not_taken_112900 ||
         ok_or_empty_112919;
    bool protect_assert_disj_112921 = loop_not_taken_112902 ||
         protect_assert_disj_112920;
    bool index_certs_112922;
    
    if (!protect_assert_disj_112921) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_112522,
                               "] out of bounds for array of shape [",
                               (long long) C_len_112568, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  stl.fut:43:3-32\n   #2  stl.fut:200:30-50\n   #3  stl.fut:199:23-201:31\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_112923 = slt64(lifted_single_ma_arg_112912,
                                               (int64_t) 0);
    bool valid_112924 = !bounds_invalid_upwards_112923;
    bool protect_assert_disj_112925 = loop_not_taken_112900 || valid_112924;
    bool protect_assert_disj_112926 = loop_not_taken_112902 ||
         protect_assert_disj_112925;
    bool range_valid_c_112927;
    
    if (!protect_assert_disj_112926) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_112912,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  stl.fut:43:3-32\n   #4  stl.fut:200:30-50\n   #5  stl.fut:199:23-201:31\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t lifted_single_ma_arg_112929 = add64((int64_t) 2, n_112520);
    bool i_p_m_t_s_leq_w_112930 = slt64(m_112913, lifted_single_ma_arg_112912);
    bool y_112931 = zzero_leq_i_p_m_t_s_112914 && i_p_m_t_s_leq_w_112930;
    bool y_112932 = i_lte_j_112916 && y_112931;
    bool ok_or_empty_112933 = zzero_112906 || y_112932;
    bool protect_assert_disj_112934 = loop_not_taken_112900 ||
         ok_or_empty_112933;
    bool protect_assert_disj_112935 = loop_not_taken_112902 ||
         protect_assert_disj_112934;
    bool index_certs_112936;
    
    if (!protect_assert_disj_112935) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_112522,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_112912, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-58\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_112937 = slt64(lifted_single_ma_arg_112929,
                                               (int64_t) 0);
    bool valid_112938 = !bounds_invalid_upwards_112937;
    bool protect_assert_disj_112939 = loop_not_taken_112900 || valid_112938;
    bool protect_assert_disj_112940 = loop_not_taken_112902 ||
         protect_assert_disj_112939;
    bool range_valid_c_112941;
    
    if (!protect_assert_disj_112940) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_112929,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  /prelude/functional.fut:9:42-44\n   #4  stl.fut:43:3-58\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool i_p_m_t_s_leq_w_112943 = slt64((int64_t) 2,
                                        lifted_single_ma_arg_112929);
    bool protect_assert_disj_112944 = loop_not_taken_112900 ||
         i_p_m_t_s_leq_w_112943;
    bool protect_assert_disj_112945 = loop_not_taken_112902 ||
         protect_assert_disj_112944;
    bool index_certs_112946;
    
    if (!protect_assert_disj_112945) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_112929, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-76\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_112947 = n_112520 == (int64_t) 0;
    int64_t i_p_m_t_s_112948 = add64(n_p_112522, i_112596);
    bool zzero_leq_i_p_m_t_s_112949 = sle64((int64_t) 0, i_p_m_t_s_112948);
    bool i_p_m_t_s_leq_w_112950 = slt64(i_p_m_t_s_112948, C_len_112568);
    bool i_lte_j_112951 = sle64(n_p_112522, x_112911);
    bool y_112952 = i_lte_j_112916 && i_p_m_t_s_leq_w_112950;
    bool y_112953 = zzero_leq_i_p_m_t_s_112949 && y_112952;
    bool y_112954 = i_lte_j_112951 && y_112953;
    bool forwards_ok_112955 = i_lte_j_112916 && y_112954;
    bool ok_or_empty_112956 = empty_slice_112947 || forwards_ok_112955;
    bool protect_assert_disj_112957 = loop_not_taken_112900 ||
         ok_or_empty_112956;
    bool protect_assert_disj_112958 = loop_not_taken_112902 ||
         protect_assert_disj_112957;
    bool index_certs_112959;
    
    if (!protect_assert_disj_112958) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_112522, ":",
                               (long long) x_112911,
                               "] out of bounds for array of shape [",
                               (long long) C_len_112568, "].",
                               "-> #0  stl.fut:231:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:229:13-234:26\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
            return 1;
        return 1;
    }
    
    int64_t j_m_i_112960 = sub64(stl_res_112591, stl_res_112590);
    bool cond_112961 = slt64(l_jump_112528, jump_threshold_112531);
    bool cond_f_res_112962 = slt64(max_group_sizze_112532, l_window_112524);
    bool x_112963 = !cond_112961;
    bool y_112964 = cond_f_res_112962 && x_112963;
    bool cond_112965 = cond_112961 || y_112964;
    bool cond_112966 = slt64(t_jump_112527, jump_threshold_112531);
    bool cond_f_res_112967 = slt64(max_group_sizze_112532, t_window_112523);
    bool x_112968 = !cond_112966;
    bool y_112969 = cond_f_res_112967 && x_112968;
    bool cond_112970 = cond_112966 || y_112969;
    
    if (mem_119686_cached_sizze_128042 < (size_t) bytes_119439) {
        mem_119686 = realloc(mem_119686, bytes_119439);
        mem_119686_cached_sizze_128042 = bytes_119439;
    }
    if (mem_119708_cached_sizze_128043 < (size_t) bytes_119483) {
        mem_119708 = realloc(mem_119708, bytes_119483);
        mem_119708_cached_sizze_128043 = bytes_119483;
    }
    
    int64_t binop_x_119728 = m_112519 * C_len_112568;
    int64_t binop_y_119729 = (int64_t) 4 * binop_x_119728;
    int64_t bytes_119727 = smax64((int64_t) 0, binop_y_119729);
    
    if (mem_119730_cached_sizze_128044 < (size_t) bytes_119727) {
        mem_119730 = realloc(mem_119730, bytes_119727);
        mem_119730_cached_sizze_128044 = bytes_119727;
    }
    
    int64_t binop_y_119710 = (int64_t) 4 * C_len_112568;
    int64_t bytes_119709 = smax64((int64_t) 0, binop_y_119710);
    
    if (mem_119788_cached_sizze_128045 < (size_t) bytes_119439) {
        mem_119788 = realloc(mem_119788, bytes_119439);
        mem_119788_cached_sizze_128045 = bytes_119439;
    }
    
    int64_t binop_y_119732 = (int64_t) 4 * lifted_single_ma_arg_112912;
    int64_t bytes_119731 = smax64((int64_t) 0, binop_y_119732);
    int64_t binop_y_119735 = (int64_t) 4 * lifted_single_ma_arg_112929;
    int64_t bytes_119734 = smax64((int64_t) 0, binop_y_119735);
    int64_t ext_120281;
    
    if (cond_112894) {
        ext_120281 = n_112520;
    } else {
        ext_120281 = l_n_m_112570;
    }
    if (mem_120357_cached_sizze_128046 < (size_t) bytes_119439) {
        mem_120357 = realloc(mem_120357, bytes_119439);
        mem_120357_cached_sizze_128046 = bytes_119439;
    }
    if (mem_120361_cached_sizze_128047 < (size_t) bytes_119439) {
        mem_120361 = realloc(mem_120361, bytes_119439);
        mem_120361_cached_sizze_128047 = bytes_119439;
    }
    
    int64_t ext_120858;
    
    if (cond_112895) {
        ext_120858 = n_112520;
    } else {
        ext_120858 = t_n_m_112577;
    }
    
    int64_t ext_121131;
    int64_t ext_121129;
    int64_t ext_121125;
    int64_t ext_121124;
    int64_t ext_121123;
    int64_t ext_121122;
    int64_t ext_121121;
    int64_t ext_121120;
    int64_t ext_121119;
    struct memblock ext_mem_121118;
    
    ext_mem_121118.references = NULL;
    
    struct memblock ext_mem_121117;
    
    ext_mem_121117.references = NULL;
    
    struct memblock ext_mem_121116;
    
    ext_mem_121116.references = NULL;
    
    struct memblock mem_param_119626;
    
    mem_param_119626.references = NULL;
    
    int64_t ctx_param_ext_119628;
    int64_t ctx_param_ext_119630;
    struct memblock mem_param_119634;
    
    mem_param_119634.references = NULL;
    
    int64_t ctx_param_ext_119635;
    int64_t ctx_param_ext_119636;
    int64_t ctx_param_ext_119637;
    int64_t ctx_param_ext_119638;
    int64_t ctx_param_ext_119639;
    int64_t ctx_param_ext_119640;
    int64_t ctx_param_ext_119641;
    struct memblock mem_param_119642;
    
    mem_param_119642.references = NULL;
    ctx_param_ext_119628 = n_112520;
    ctx_param_ext_119630 = n_112520;
    ctx_param_ext_119635 = m_112519;
    ctx_param_ext_119636 = n_112520;
    ctx_param_ext_119637 = (int64_t) 0;
    ctx_param_ext_119638 = n_112520;
    ctx_param_ext_119639 = m_112519;
    ctx_param_ext_119640 = (int64_t) 1;
    ctx_param_ext_119641 = n_112520;
    if (memblock_set(ctx, &mem_param_119626, &mem_119614, "mem_119614") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_119634, &mem_119614, "mem_119614") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_119642, &mem_119618, "mem_119618") != 0)
        return 1;
    for (int64_t i_outer_112974 = 0; i_outer_112974 < outer_112530;
         i_outer_112974++) {
        int64_t ext_120870;
        int64_t ext_120868;
        struct memblock ext_mem_120864;
        
        ext_mem_120864.references = NULL;
        
        struct memblock ext_mem_120863;
        
        ext_mem_120863.references = NULL;
        
        struct memblock mem_param_119656;
        
        mem_param_119656.references = NULL;
        
        int64_t ctx_param_ext_119658;
        int64_t ctx_param_ext_119660;
        struct memblock mem_param_119664;
        
        mem_param_119664.references = NULL;
        ctx_param_ext_119658 = ctx_param_ext_119628;
        ctx_param_ext_119660 = ctx_param_ext_119630;
        if (memblock_set(ctx, &mem_param_119656, &mem_param_119626,
                         "mem_param_119626") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119664, &mem_param_119634,
                         "mem_param_119634") != 0)
            return 1;
        for (int64_t _i_inner_112980 = 0; _i_inner_112980 < inner_112529;
             _i_inner_112980++) {
            int64_t flat_tid_115019 = (int64_t) 0;
            int32_t num_tasks_122003;
            int64_t flat_tid_115021 = (int64_t) 0;
            struct futhark_mc_task_128165 futhark_mc_task_128165;
            
            futhark_mc_task_128165.ctx = ctx;
            futhark_mc_task_128165.free_m_112519 = m_112519;
            futhark_mc_task_128165.free_n_112520 = n_112520;
            futhark_mc_task_128165.free_Y_mem_119377 = Y_mem_119377.mem;
            futhark_mc_task_128165.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128165.free_ctx_param_ext_119660 =
                ctx_param_ext_119660;
            futhark_mc_task_128165.free_mem_param_119664 = mem_param_119664.mem;
            futhark_mc_task_128165.free_mem_119686 = mem_119686;
            
            struct scheduler_segop futhark_mc_task_128165_task;
            
            futhark_mc_task_128165_task.args = &futhark_mc_task_128165;
            futhark_mc_task_128165_task.top_level_fn =
                futhark_mc_segmap_task_128166;
            futhark_mc_task_128165_task.name = "futhark_mc_segmap_task_128166";
            futhark_mc_task_128165_task.iterations = m_112519;
            futhark_mc_task_128165_task.task_time =
                &ctx->futhark_mc_segmap_task_128166_total_time;
            futhark_mc_task_128165_task.task_iter =
                &ctx->futhark_mc_segmap_task_128166_total_iter;
            futhark_mc_task_128165_task.sched = STATIC;
            futhark_mc_task_128165_task.nested_fn =
                futhark_mc_segmap_nested_task_128170;
            
            int futhark_mc_segmap_task_128166_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128165_task);
            
            if (futhark_mc_segmap_task_128166_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115031 = (int64_t) 0;
            int32_t num_tasks_122024;
            int64_t flat_tid_115033 = (int64_t) 0;
            struct futhark_mc_task_128178 futhark_mc_task_128178;
            
            futhark_mc_task_128178.ctx = ctx;
            futhark_mc_task_128178.free_m_112519 = m_112519;
            futhark_mc_task_128178.free_n_112520 = n_112520;
            futhark_mc_task_128178.free_n_p_112522 = n_p_112522;
            futhark_mc_task_128178.free_css_chunk_len_112566 =
                css_chunk_len_112566;
            futhark_mc_task_128178.free_mem_119464 = mem_119464;
            futhark_mc_task_128178.free_bytes_119465 = bytes_119465;
            futhark_mc_task_128178.free_mem_119486 = mem_119486;
            futhark_mc_task_128178.free_mem_119686 = mem_119686;
            futhark_mc_task_128178.free_mem_119708 = mem_119708;
            
            struct scheduler_segop futhark_mc_task_128178_task;
            
            futhark_mc_task_128178_task.args = &futhark_mc_task_128178;
            futhark_mc_task_128178_task.top_level_fn =
                futhark_mc_segmap_task_128179;
            futhark_mc_task_128178_task.name = "futhark_mc_segmap_task_128179";
            futhark_mc_task_128178_task.iterations = m_112519;
            futhark_mc_task_128178_task.task_time =
                &ctx->futhark_mc_segmap_task_128179_total_time;
            futhark_mc_task_128178_task.task_iter =
                &ctx->futhark_mc_segmap_task_128179_total_iter;
            futhark_mc_task_128178_task.sched = STATIC;
            futhark_mc_task_128178_task.nested_fn =
                futhark_mc_segmap_nested_task_128183;
            
            int futhark_mc_segmap_task_128179_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128178_task);
            
            if (futhark_mc_segmap_task_128179_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115092 = (int64_t) 0;
            int32_t num_tasks_122122;
            int64_t flat_tid_115094 = (int64_t) 0;
            struct futhark_mc_task_128199 futhark_mc_task_128199;
            
            futhark_mc_task_128199.ctx = ctx;
            futhark_mc_task_128199.free_m_112519 = m_112519;
            futhark_mc_task_128199.free_n_p_112522 = n_p_112522;
            futhark_mc_task_128199.free_C_len_112568 = C_len_112568;
            futhark_mc_task_128199.free_mem_119708 = mem_119708;
            futhark_mc_task_128199.free_bytes_119709 = bytes_119709;
            futhark_mc_task_128199.free_mem_119730 = mem_119730;
            
            struct scheduler_segop futhark_mc_task_128199_task;
            
            futhark_mc_task_128199_task.args = &futhark_mc_task_128199;
            futhark_mc_task_128199_task.top_level_fn =
                futhark_mc_segmap_task_128200;
            futhark_mc_task_128199_task.name = "futhark_mc_segmap_task_128200";
            futhark_mc_task_128199_task.iterations = m_112519;
            futhark_mc_task_128199_task.task_time =
                &ctx->futhark_mc_segmap_task_128200_total_time;
            futhark_mc_task_128199_task.task_iter =
                &ctx->futhark_mc_segmap_task_128200_total_iter;
            futhark_mc_task_128199_task.sched = STATIC;
            futhark_mc_task_128199_task.nested_fn =
                futhark_mc_segmap_nested_task_128204;
            
            int futhark_mc_segmap_task_128200_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128199_task);
            
            if (futhark_mc_segmap_task_128200_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115107 = (int64_t) 0;
            int32_t num_tasks_122149;
            int64_t flat_tid_115109 = (int64_t) 0;
            struct futhark_mc_task_128212 futhark_mc_task_128212;
            
            futhark_mc_task_128212.ctx = ctx;
            futhark_mc_task_128212.free_m_112519 = m_112519;
            futhark_mc_task_128212.free_n_112520 = n_112520;
            futhark_mc_task_128212.free_n_p_112522 = n_p_112522;
            futhark_mc_task_128212.free_i64_res_112562 = i64_res_112562;
            futhark_mc_task_128212.free_C_len_112568 = C_len_112568;
            futhark_mc_task_128212.free_lifted_single_ma_arg_112912 =
                lifted_single_ma_arg_112912;
            futhark_mc_task_128212.free_lifted_single_ma_arg_112929 =
                lifted_single_ma_arg_112929;
            futhark_mc_task_128212.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128212.free_mem_119730 = mem_119730;
            futhark_mc_task_128212.free_bytes_119731 = bytes_119731;
            futhark_mc_task_128212.free_bytes_119734 = bytes_119734;
            futhark_mc_task_128212.free_mem_119788 = mem_119788;
            
            struct scheduler_segop futhark_mc_task_128212_task;
            
            futhark_mc_task_128212_task.args = &futhark_mc_task_128212;
            futhark_mc_task_128212_task.top_level_fn =
                futhark_mc_segmap_task_128213;
            futhark_mc_task_128212_task.name = "futhark_mc_segmap_task_128213";
            futhark_mc_task_128212_task.iterations = m_112519;
            futhark_mc_task_128212_task.task_time =
                &ctx->futhark_mc_segmap_task_128213_total_time;
            futhark_mc_task_128212_task.task_iter =
                &ctx->futhark_mc_segmap_task_128213_total_iter;
            futhark_mc_task_128212_task.sched = STATIC;
            futhark_mc_task_128212_task.nested_fn =
                futhark_mc_segmap_nested_task_128219;
            
            int futhark_mc_segmap_task_128213_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128212_task);
            
            if (futhark_mc_segmap_task_128213_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock ext_mem_120257;
            
            ext_mem_120257.references = NULL;
            
            struct memblock ext_mem_120256;
            
            ext_mem_120256.references = NULL;
            if (cond_112965) {
                bool match_lit_113116 = (int64_t) 0 == l_degree_112526;
                struct memblock ext_mem_119906;
                
                ext_mem_119906.references = NULL;
                
                struct memblock ext_mem_119905;
                
                ext_mem_119905.references = NULL;
                if (match_lit_113116) {
                    struct memblock mem_119792;
                    
                    mem_119792.references = NULL;
                    if (memblock_alloc(ctx, &mem_119792, bytes_119545,
                                       "mem_119792")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_122391 = 0; i_122391 < m_112519;
                         i_122391++) {
                        for (int64_t i_122392 = 0; i_122392 < l_n_m_112570;
                             i_122392++) {
                            ((float *) mem_119792.mem)[i_122391 * l_n_m_112570 +
                                                       i_122392] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_119814;
                    
                    mem_119814.references = NULL;
                    if (memblock_alloc(ctx, &mem_119814, bytes_119545,
                                       "mem_119814")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_115211 = (int64_t) 0;
                    int32_t num_tasks_122393;
                    int64_t flat_tid_115213 = (int64_t) 0;
                    struct futhark_mc_task_128261 futhark_mc_task_128261;
                    
                    futhark_mc_task_128261.ctx = ctx;
                    futhark_mc_task_128261.free_m_112519 = m_112519;
                    futhark_mc_task_128261.free_n_112520 = n_112520;
                    futhark_mc_task_128261.free_l_window_112524 =
                        l_window_112524;
                    futhark_mc_task_128261.free_t_jump_112527 = t_jump_112527;
                    futhark_mc_task_128261.free_l_n_m_112570 = l_n_m_112570;
                    futhark_mc_task_128261.free_i_112596 = i_112596;
                    futhark_mc_task_128261.free_bytes_119490 = bytes_119490;
                    futhark_mc_task_128261.free_mem_119544 = mem_119544;
                    futhark_mc_task_128261.free_mem_119548 = mem_119548;
                    futhark_mc_task_128261.free_ctx_param_ext_119637 =
                        ctx_param_ext_119637;
                    futhark_mc_task_128261.free_ctx_param_ext_119638 =
                        ctx_param_ext_119638;
                    futhark_mc_task_128261.free_ctx_param_ext_119640 =
                        ctx_param_ext_119640;
                    futhark_mc_task_128261.free_mem_param_119642 =
                        mem_param_119642.mem;
                    futhark_mc_task_128261.free_mem_119788 = mem_119788;
                    futhark_mc_task_128261.free_mem_119814 = mem_119814.mem;
                    
                    struct scheduler_segop futhark_mc_task_128261_task;
                    
                    futhark_mc_task_128261_task.args = &futhark_mc_task_128261;
                    futhark_mc_task_128261_task.top_level_fn =
                        futhark_mc_segmap_task_128262;
                    futhark_mc_task_128261_task.name =
                        "futhark_mc_segmap_task_128262";
                    futhark_mc_task_128261_task.iterations = m_112519;
                    futhark_mc_task_128261_task.task_time =
                        &ctx->futhark_mc_segmap_task_128262_total_time;
                    futhark_mc_task_128261_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128262_total_iter;
                    futhark_mc_task_128261_task.sched = STATIC;
                    futhark_mc_task_128261_task.nested_fn =
                        futhark_mc_segmap_nested_task_128266;
                    
                    int futhark_mc_segmap_task_128262_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128261_task);
                    
                    if (futhark_mc_segmap_task_128262_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_119906, &mem_119814,
                                     "mem_119814") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_119905, &mem_119792,
                                     "mem_119792") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119814, "mem_119814") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119792, "mem_119792") != 0)
                        return 1;
                } else {
                    bool match_lit_113185 = (int64_t) 1 == l_degree_112526;
                    struct memblock ext_mem_119904;
                    
                    ext_mem_119904.references = NULL;
                    
                    struct memblock ext_mem_119903;
                    
                    ext_mem_119903.references = NULL;
                    if (match_lit_113185) {
                        struct memblock mem_119854;
                        
                        mem_119854.references = NULL;
                        if (memblock_alloc(ctx, &mem_119854, bytes_119545,
                                           "mem_119854")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_119858;
                        
                        mem_119858.references = NULL;
                        if (memblock_alloc(ctx, &mem_119858, bytes_119545,
                                           "mem_119858")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_115396 = (int64_t) 0;
                        int32_t num_tasks_122682;
                        int64_t flat_tid_115398 = (int64_t) 0;
                        struct futhark_mc_task_128287 futhark_mc_task_128287;
                        
                        futhark_mc_task_128287.ctx = ctx;
                        futhark_mc_task_128287.free_m_112519 = m_112519;
                        futhark_mc_task_128287.free_n_112520 = n_112520;
                        futhark_mc_task_128287.free_l_window_112524 =
                            l_window_112524;
                        futhark_mc_task_128287.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128287.free_l_n_m_112570 = l_n_m_112570;
                        futhark_mc_task_128287.free_i_112596 = i_112596;
                        futhark_mc_task_128287.free_bytes_119490 = bytes_119490;
                        futhark_mc_task_128287.free_mem_119544 = mem_119544;
                        futhark_mc_task_128287.free_mem_119548 = mem_119548;
                        futhark_mc_task_128287.free_ctx_param_ext_119637 =
                            ctx_param_ext_119637;
                        futhark_mc_task_128287.free_ctx_param_ext_119638 =
                            ctx_param_ext_119638;
                        futhark_mc_task_128287.free_ctx_param_ext_119640 =
                            ctx_param_ext_119640;
                        futhark_mc_task_128287.free_mem_param_119642 =
                            mem_param_119642.mem;
                        futhark_mc_task_128287.free_mem_119788 = mem_119788;
                        futhark_mc_task_128287.free_mem_119854 = mem_119854.mem;
                        futhark_mc_task_128287.free_mem_119858 = mem_119858.mem;
                        
                        struct scheduler_segop futhark_mc_task_128287_task;
                        
                        futhark_mc_task_128287_task.args =
                            &futhark_mc_task_128287;
                        futhark_mc_task_128287_task.top_level_fn =
                            futhark_mc_segmap_task_128288;
                        futhark_mc_task_128287_task.name =
                            "futhark_mc_segmap_task_128288";
                        futhark_mc_task_128287_task.iterations = m_112519;
                        futhark_mc_task_128287_task.task_time =
                            &ctx->futhark_mc_segmap_task_128288_total_time;
                        futhark_mc_task_128287_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128288_total_iter;
                        futhark_mc_task_128287_task.sched = STATIC;
                        futhark_mc_task_128287_task.nested_fn =
                            futhark_mc_segmap_nested_task_128293;
                        
                        int futhark_mc_segmap_task_128288_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128287_task);
                        
                        if (futhark_mc_segmap_task_128288_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_119904, &mem_119854,
                                         "mem_119854") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_119903, &mem_119858,
                                         "mem_119858") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_119858, "mem_119858") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_119854, "mem_119854") != 0)
                            return 1;
                    } else {
                        struct memblock mem_119898;
                        
                        mem_119898.references = NULL;
                        if (memblock_alloc(ctx, &mem_119898, bytes_119545,
                                           "mem_119898")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_119902;
                        
                        mem_119902.references = NULL;
                        if (memblock_alloc(ctx, &mem_119902, bytes_119545,
                                           "mem_119902")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_115666 = (int64_t) 0;
                        int32_t num_tasks_123109;
                        int64_t flat_tid_115668 = (int64_t) 0;
                        struct futhark_mc_task_128318 futhark_mc_task_128318;
                        
                        futhark_mc_task_128318.ctx = ctx;
                        futhark_mc_task_128318.free_m_112519 = m_112519;
                        futhark_mc_task_128318.free_n_112520 = n_112520;
                        futhark_mc_task_128318.free_l_window_112524 =
                            l_window_112524;
                        futhark_mc_task_128318.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128318.free_l_n_m_112570 = l_n_m_112570;
                        futhark_mc_task_128318.free_i_112596 = i_112596;
                        futhark_mc_task_128318.free_bytes_119490 = bytes_119490;
                        futhark_mc_task_128318.free_mem_119544 = mem_119544;
                        futhark_mc_task_128318.free_mem_119548 = mem_119548;
                        futhark_mc_task_128318.free_ctx_param_ext_119637 =
                            ctx_param_ext_119637;
                        futhark_mc_task_128318.free_ctx_param_ext_119638 =
                            ctx_param_ext_119638;
                        futhark_mc_task_128318.free_ctx_param_ext_119640 =
                            ctx_param_ext_119640;
                        futhark_mc_task_128318.free_mem_param_119642 =
                            mem_param_119642.mem;
                        futhark_mc_task_128318.free_mem_119788 = mem_119788;
                        futhark_mc_task_128318.free_mem_119898 = mem_119898.mem;
                        futhark_mc_task_128318.free_mem_119902 = mem_119902.mem;
                        
                        struct scheduler_segop futhark_mc_task_128318_task;
                        
                        futhark_mc_task_128318_task.args =
                            &futhark_mc_task_128318;
                        futhark_mc_task_128318_task.top_level_fn =
                            futhark_mc_segmap_task_128319;
                        futhark_mc_task_128318_task.name =
                            "futhark_mc_segmap_task_128319";
                        futhark_mc_task_128318_task.iterations = m_112519;
                        futhark_mc_task_128318_task.task_time =
                            &ctx->futhark_mc_segmap_task_128319_total_time;
                        futhark_mc_task_128318_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128319_total_iter;
                        futhark_mc_task_128318_task.sched = STATIC;
                        futhark_mc_task_128318_task.nested_fn =
                            futhark_mc_segmap_nested_task_128324;
                        
                        int futhark_mc_segmap_task_128319_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128318_task);
                        
                        if (futhark_mc_segmap_task_128319_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_119904, &mem_119898,
                                         "mem_119898") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_119903, &mem_119902,
                                         "mem_119902") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_119902, "mem_119902") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_119898, "mem_119898") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_119906, &ext_mem_119904,
                                     "ext_mem_119904") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_119905, &ext_mem_119903,
                                     "ext_mem_119903") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_119903,
                                       "ext_mem_119903") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_119904,
                                       "ext_mem_119904") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120257, &ext_mem_119906,
                                 "ext_mem_119906") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120256, &ext_mem_119905,
                                 "ext_mem_119905") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_119905, "ext_mem_119905") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_119906, "ext_mem_119906") != 0)
                    return 1;
            } else {
                bool match_lit_113410 = (int64_t) 0 == l_degree_112526;
                struct memblock ext_mem_120255;
                
                ext_mem_120255.references = NULL;
                
                struct memblock ext_mem_120254;
                
                ext_mem_120254.references = NULL;
                if (match_lit_113410) {
                    struct memblock mem_119910;
                    
                    mem_119910.references = NULL;
                    if (memblock_alloc(ctx, &mem_119910, bytes_119545,
                                       "mem_119910")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_123668 = 0; i_123668 < m_112519;
                         i_123668++) {
                        for (int64_t i_123669 = 0; i_123669 < l_n_m_112570;
                             i_123669++) {
                            ((float *) mem_119910.mem)[i_123668 * l_n_m_112570 +
                                                       i_123669] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_119965;
                    
                    mem_119965.references = NULL;
                    if (memblock_alloc(ctx, &mem_119965, bytes_119545,
                                       "mem_119965")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_119912 = (int64_t) 4 * l_window_112524;
                    int64_t bytes_119911 = smax64((int64_t) 0, binop_y_119912);
                    int64_t flat_tid_116032 = (int64_t) 0;
                    int32_t num_tasks_123670;
                    int64_t flat_tid_116034 = (int64_t) 0;
                    struct futhark_mc_task_128351 futhark_mc_task_128351;
                    
                    futhark_mc_task_128351.ctx = ctx;
                    futhark_mc_task_128351.free_m_112519 = m_112519;
                    futhark_mc_task_128351.free_n_112520 = n_112520;
                    futhark_mc_task_128351.free_l_window_112524 =
                        l_window_112524;
                    futhark_mc_task_128351.free_t_jump_112527 = t_jump_112527;
                    futhark_mc_task_128351.free_l_n_m_112570 = l_n_m_112570;
                    futhark_mc_task_128351.free_i_112596 = i_112596;
                    futhark_mc_task_128351.free_bytes_119490 = bytes_119490;
                    futhark_mc_task_128351.free_mem_119544 = mem_119544;
                    futhark_mc_task_128351.free_mem_119548 = mem_119548;
                    futhark_mc_task_128351.free_ctx_param_ext_119637 =
                        ctx_param_ext_119637;
                    futhark_mc_task_128351.free_ctx_param_ext_119638 =
                        ctx_param_ext_119638;
                    futhark_mc_task_128351.free_ctx_param_ext_119640 =
                        ctx_param_ext_119640;
                    futhark_mc_task_128351.free_mem_param_119642 =
                        mem_param_119642.mem;
                    futhark_mc_task_128351.free_mem_119788 = mem_119788;
                    futhark_mc_task_128351.free_bytes_119911 = bytes_119911;
                    futhark_mc_task_128351.free_mem_119965 = mem_119965.mem;
                    
                    struct scheduler_segop futhark_mc_task_128351_task;
                    
                    futhark_mc_task_128351_task.args = &futhark_mc_task_128351;
                    futhark_mc_task_128351_task.top_level_fn =
                        futhark_mc_segmap_task_128352;
                    futhark_mc_task_128351_task.name =
                        "futhark_mc_segmap_task_128352";
                    futhark_mc_task_128351_task.iterations = m_112519;
                    futhark_mc_task_128351_task.task_time =
                        &ctx->futhark_mc_segmap_task_128352_total_time;
                    futhark_mc_task_128351_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128352_total_iter;
                    futhark_mc_task_128351_task.sched = STATIC;
                    futhark_mc_task_128351_task.nested_fn =
                        futhark_mc_segmap_nested_task_128357;
                    
                    int futhark_mc_segmap_task_128352_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128351_task);
                    
                    if (futhark_mc_segmap_task_128352_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120255, &mem_119965,
                                     "mem_119965") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120254, &mem_119910,
                                     "mem_119910") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119965, "mem_119965") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119910, "mem_119910") != 0)
                        return 1;
                } else {
                    bool match_lit_113465 = (int64_t) 1 == l_degree_112526;
                    struct memblock ext_mem_120253;
                    
                    ext_mem_120253.references = NULL;
                    
                    struct memblock ext_mem_120252;
                    
                    ext_mem_120252.references = NULL;
                    if (match_lit_113465) {
                        struct memblock mem_120071;
                        
                        mem_120071.references = NULL;
                        if (memblock_alloc(ctx, &mem_120071, bytes_119545,
                                           "mem_120071")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120075;
                        
                        mem_120075.references = NULL;
                        if (memblock_alloc(ctx, &mem_120075, bytes_119545,
                                           "mem_120075")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_119967 = (int64_t) 4 * l_window_112524;
                        int64_t bytes_119966 = smax64((int64_t) 0,
                                                      binop_y_119967);
                        int64_t flat_tid_116175 = (int64_t) 0;
                        int32_t num_tasks_123899;
                        int64_t flat_tid_116177 = (int64_t) 0;
                        struct futhark_mc_task_128380 futhark_mc_task_128380;
                        
                        futhark_mc_task_128380.ctx = ctx;
                        futhark_mc_task_128380.free_m_112519 = m_112519;
                        futhark_mc_task_128380.free_n_112520 = n_112520;
                        futhark_mc_task_128380.free_l_window_112524 =
                            l_window_112524;
                        futhark_mc_task_128380.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128380.free_l_n_m_112570 = l_n_m_112570;
                        futhark_mc_task_128380.free_i_112596 = i_112596;
                        futhark_mc_task_128380.free_bytes_119490 = bytes_119490;
                        futhark_mc_task_128380.free_mem_119544 = mem_119544;
                        futhark_mc_task_128380.free_mem_119548 = mem_119548;
                        futhark_mc_task_128380.free_ctx_param_ext_119637 =
                            ctx_param_ext_119637;
                        futhark_mc_task_128380.free_ctx_param_ext_119638 =
                            ctx_param_ext_119638;
                        futhark_mc_task_128380.free_ctx_param_ext_119640 =
                            ctx_param_ext_119640;
                        futhark_mc_task_128380.free_mem_param_119642 =
                            mem_param_119642.mem;
                        futhark_mc_task_128380.free_mem_119788 = mem_119788;
                        futhark_mc_task_128380.free_bytes_119966 = bytes_119966;
                        futhark_mc_task_128380.free_mem_120071 = mem_120071.mem;
                        futhark_mc_task_128380.free_mem_120075 = mem_120075.mem;
                        
                        struct scheduler_segop futhark_mc_task_128380_task;
                        
                        futhark_mc_task_128380_task.args =
                            &futhark_mc_task_128380;
                        futhark_mc_task_128380_task.top_level_fn =
                            futhark_mc_segmap_task_128381;
                        futhark_mc_task_128380_task.name =
                            "futhark_mc_segmap_task_128381";
                        futhark_mc_task_128380_task.iterations = m_112519;
                        futhark_mc_task_128380_task.task_time =
                            &ctx->futhark_mc_segmap_task_128381_total_time;
                        futhark_mc_task_128380_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128381_total_iter;
                        futhark_mc_task_128380_task.sched = STATIC;
                        futhark_mc_task_128380_task.nested_fn =
                            futhark_mc_segmap_nested_task_128388;
                        
                        int futhark_mc_segmap_task_128381_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128380_task);
                        
                        if (futhark_mc_segmap_task_128381_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120253, &mem_120071,
                                         "mem_120071") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120252, &mem_120075,
                                         "mem_120075") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120075, "mem_120075") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120071, "mem_120071") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120247;
                        
                        mem_120247.references = NULL;
                        if (memblock_alloc(ctx, &mem_120247, bytes_119545,
                                           "mem_120247")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120251;
                        
                        mem_120251.references = NULL;
                        if (memblock_alloc(ctx, &mem_120251, bytes_119545,
                                           "mem_120251")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120077 = (int64_t) 4 * l_window_112524;
                        int64_t bytes_120076 = smax64((int64_t) 0,
                                                      binop_y_120077);
                        int64_t flat_tid_116406 = (int64_t) 0;
                        int32_t num_tasks_124281;
                        int64_t flat_tid_116408 = (int64_t) 0;
                        struct futhark_mc_task_128417 futhark_mc_task_128417;
                        
                        futhark_mc_task_128417.ctx = ctx;
                        futhark_mc_task_128417.free_m_112519 = m_112519;
                        futhark_mc_task_128417.free_n_112520 = n_112520;
                        futhark_mc_task_128417.free_l_window_112524 =
                            l_window_112524;
                        futhark_mc_task_128417.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128417.free_l_n_m_112570 = l_n_m_112570;
                        futhark_mc_task_128417.free_i_112596 = i_112596;
                        futhark_mc_task_128417.free_bytes_119490 = bytes_119490;
                        futhark_mc_task_128417.free_mem_119544 = mem_119544;
                        futhark_mc_task_128417.free_mem_119548 = mem_119548;
                        futhark_mc_task_128417.free_ctx_param_ext_119637 =
                            ctx_param_ext_119637;
                        futhark_mc_task_128417.free_ctx_param_ext_119638 =
                            ctx_param_ext_119638;
                        futhark_mc_task_128417.free_ctx_param_ext_119640 =
                            ctx_param_ext_119640;
                        futhark_mc_task_128417.free_mem_param_119642 =
                            mem_param_119642.mem;
                        futhark_mc_task_128417.free_mem_119788 = mem_119788;
                        futhark_mc_task_128417.free_bytes_120076 = bytes_120076;
                        futhark_mc_task_128417.free_mem_120247 = mem_120247.mem;
                        futhark_mc_task_128417.free_mem_120251 = mem_120251.mem;
                        
                        struct scheduler_segop futhark_mc_task_128417_task;
                        
                        futhark_mc_task_128417_task.args =
                            &futhark_mc_task_128417;
                        futhark_mc_task_128417_task.top_level_fn =
                            futhark_mc_segmap_task_128418;
                        futhark_mc_task_128417_task.name =
                            "futhark_mc_segmap_task_128418";
                        futhark_mc_task_128417_task.iterations = m_112519;
                        futhark_mc_task_128417_task.task_time =
                            &ctx->futhark_mc_segmap_task_128418_total_time;
                        futhark_mc_task_128417_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128418_total_iter;
                        futhark_mc_task_128417_task.sched = STATIC;
                        futhark_mc_task_128417_task.nested_fn =
                            futhark_mc_segmap_nested_task_128427;
                        
                        int futhark_mc_segmap_task_128418_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128417_task);
                        
                        if (futhark_mc_segmap_task_128418_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120253, &mem_120247,
                                         "mem_120247") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120252, &mem_120251,
                                         "mem_120251") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120251, "mem_120251") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120247, "mem_120247") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120255, &ext_mem_120253,
                                     "ext_mem_120253") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120254, &ext_mem_120252,
                                     "ext_mem_120252") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120252,
                                       "ext_mem_120252") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120253,
                                       "ext_mem_120253") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120257, &ext_mem_120255,
                                 "ext_mem_120255") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120256, &ext_mem_120254,
                                 "ext_mem_120254") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120254, "ext_mem_120254") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120255, "ext_mem_120255") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_120280;
            
            ext_mem_120280.references = NULL;
            if (cond_112894) {
                bool zzero_113709 = l_jump_112528 == (int64_t) 0;
                bool nonzzero_113710 = !zzero_113709;
                bool nonzzero_cert_113711;
                
                if (!nonzzero_113710) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:423:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120280,
                                       "ext_mem_120280") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120256,
                                       "ext_mem_120256") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120257,
                                       "ext_mem_120257") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119664,
                                       "mem_param_119664") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119656,
                                       "mem_param_119656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120863,
                                       "ext_mem_120863") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120864,
                                       "ext_mem_120864") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119642,
                                       "mem_param_119642") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119634,
                                       "mem_param_119634") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119626,
                                       "mem_param_119626") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121116,
                                       "ext_mem_121116") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121117,
                                       "ext_mem_121117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121118,
                                       "ext_mem_121118") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121232,
                                       "mem_out_121232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121231,
                                       "mem_out_121231") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121230,
                                       "mem_out_121230") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_113712 = sub64(l_n_m_112570, (int64_t) 1);
                struct memblock mem_120279;
                
                mem_120279.references = NULL;
                if (memblock_alloc(ctx, &mem_120279, bytes_119439,
                                   "mem_120279")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_116747 = (int64_t) 0;
                int32_t num_tasks_124847;
                int64_t flat_tid_116749 = (int64_t) 0;
                struct futhark_mc_task_128466 futhark_mc_task_128466;
                
                futhark_mc_task_128466.ctx = ctx;
                futhark_mc_task_128466.free_m_112519 = m_112519;
                futhark_mc_task_128466.free_n_112520 = n_112520;
                futhark_mc_task_128466.free_l_jump_112528 = l_jump_112528;
                futhark_mc_task_128466.free_l_n_m_112570 = l_n_m_112570;
                futhark_mc_task_128466.free_i_112596 = i_112596;
                futhark_mc_task_128466.free_y_113712 = y_113712;
                futhark_mc_task_128466.free_bytes_119421 = bytes_119421;
                futhark_mc_task_128466.free_ext_mem_120256 = ext_mem_120256.mem;
                futhark_mc_task_128466.free_ext_mem_120257 = ext_mem_120257.mem;
                futhark_mc_task_128466.free_mem_120279 = mem_120279.mem;
                
                struct scheduler_segop futhark_mc_task_128466_task;
                
                futhark_mc_task_128466_task.args = &futhark_mc_task_128466;
                futhark_mc_task_128466_task.top_level_fn =
                    futhark_mc_segmap_task_128467;
                futhark_mc_task_128466_task.name =
                    "futhark_mc_segmap_task_128467";
                futhark_mc_task_128466_task.iterations = m_112519;
                futhark_mc_task_128466_task.task_time =
                    &ctx->futhark_mc_segmap_task_128467_total_time;
                futhark_mc_task_128466_task.task_iter =
                    &ctx->futhark_mc_segmap_task_128467_total_iter;
                futhark_mc_task_128466_task.sched = STATIC;
                futhark_mc_task_128466_task.nested_fn =
                    futhark_mc_segmap_nested_task_128471;
                
                int futhark_mc_segmap_task_128467_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_128466_task);
                
                if (futhark_mc_segmap_task_128467_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_120280, &mem_120279,
                                 "mem_120279") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_120279, "mem_120279") != 0)
                    return 1;
            } else {
                bool dim_match_113764 = n_112520 == l_n_m_112570;
                bool empty_or_match_cert_113765;
                
                if (!dim_match_113764) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_112519, ", ",
                                  (long long) l_n_m_112570,
                                  ") cannot match shape of type `[",
                                  (long long) m_112519, "][",
                                  (long long) n_112520, "]t`.",
                                  "-> #0  stl.fut:224:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120280,
                                       "ext_mem_120280") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120256,
                                       "ext_mem_120256") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120257,
                                       "ext_mem_120257") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119664,
                                       "mem_param_119664") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119656,
                                       "mem_param_119656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120863,
                                       "ext_mem_120863") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120864,
                                       "ext_mem_120864") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119642,
                                       "mem_param_119642") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119634,
                                       "mem_param_119634") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119626,
                                       "mem_param_119626") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121116,
                                       "ext_mem_121116") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121117,
                                       "ext_mem_121117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121118,
                                       "ext_mem_121118") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121232,
                                       "mem_out_121232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121231,
                                       "mem_out_121231") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121230,
                                       "mem_out_121230") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_120280, &ext_mem_120257,
                                 "ext_mem_120257") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_120256, "ext_mem_120256") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120257, "ext_mem_120257") != 0)
                return 1;
            
            struct memblock mem_120365;
            
            mem_120365.references = NULL;
            if (memblock_alloc(ctx, &mem_120365, bytes_119439, "mem_120365")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_116803 = (int64_t) 0;
            int32_t num_tasks_124955;
            int64_t flat_tid_116805 = (int64_t) 0;
            struct futhark_mc_task_128479 futhark_mc_task_128479;
            
            futhark_mc_task_128479.ctx = ctx;
            futhark_mc_task_128479.free_m_112519 = m_112519;
            futhark_mc_task_128479.free_n_112520 = n_112520;
            futhark_mc_task_128479.free_n_p_112522 = n_p_112522;
            futhark_mc_task_128479.free_C_len_112568 = C_len_112568;
            futhark_mc_task_128479.free_Y_mem_119377 = Y_mem_119377.mem;
            futhark_mc_task_128479.free_mem_119417 = mem_119417;
            futhark_mc_task_128479.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128479.free_ctx_param_ext_119637 =
                ctx_param_ext_119637;
            futhark_mc_task_128479.free_ctx_param_ext_119638 =
                ctx_param_ext_119638;
            futhark_mc_task_128479.free_ctx_param_ext_119640 =
                ctx_param_ext_119640;
            futhark_mc_task_128479.free_mem_param_119642 = mem_param_119642.mem;
            futhark_mc_task_128479.free_mem_119730 = mem_119730;
            futhark_mc_task_128479.free_ext_mem_120280 = ext_mem_120280.mem;
            futhark_mc_task_128479.free_ext_120281 = ext_120281;
            futhark_mc_task_128479.free_mem_120357 = mem_120357;
            futhark_mc_task_128479.free_mem_120361 = mem_120361;
            futhark_mc_task_128479.free_mem_120365 = mem_120365.mem;
            
            struct scheduler_segop futhark_mc_task_128479_task;
            
            futhark_mc_task_128479_task.args = &futhark_mc_task_128479;
            futhark_mc_task_128479_task.top_level_fn =
                futhark_mc_segmap_task_128480;
            futhark_mc_task_128479_task.name = "futhark_mc_segmap_task_128480";
            futhark_mc_task_128479_task.iterations = m_112519;
            futhark_mc_task_128479_task.task_time =
                &ctx->futhark_mc_segmap_task_128480_total_time;
            futhark_mc_task_128479_task.task_iter =
                &ctx->futhark_mc_segmap_task_128480_total_iter;
            futhark_mc_task_128479_task.sched = STATIC;
            futhark_mc_task_128479_task.nested_fn =
                futhark_mc_segmap_nested_task_128487;
            
            int futhark_mc_segmap_task_128480_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128479_task);
            
            if (futhark_mc_segmap_task_128480_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &ext_mem_120280, "ext_mem_120280") != 0)
                return 1;
            
            struct memblock ext_mem_120834;
            
            ext_mem_120834.references = NULL;
            
            struct memblock ext_mem_120833;
            
            ext_mem_120833.references = NULL;
            if (cond_112970) {
                bool match_lit_113817 = (int64_t) 0 == t_degree_112525;
                struct memblock ext_mem_120483;
                
                ext_mem_120483.references = NULL;
                
                struct memblock ext_mem_120482;
                
                ext_mem_120482.references = NULL;
                if (match_lit_113817) {
                    struct memblock mem_120369;
                    
                    mem_120369.references = NULL;
                    if (memblock_alloc(ctx, &mem_120369, bytes_119607,
                                       "mem_120369")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_125028 = 0; i_125028 < m_112519;
                         i_125028++) {
                        for (int64_t i_125029 = 0; i_125029 < t_n_m_112577;
                             i_125029++) {
                            ((float *) mem_120369.mem)[i_125028 * t_n_m_112577 +
                                                       i_125029] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120391;
                    
                    mem_120391.references = NULL;
                    if (memblock_alloc(ctx, &mem_120391, bytes_119607,
                                       "mem_120391")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_116837 = (int64_t) 0;
                    int32_t num_tasks_125030;
                    int64_t flat_tid_116839 = (int64_t) 0;
                    struct futhark_mc_task_128502 futhark_mc_task_128502;
                    
                    futhark_mc_task_128502.ctx = ctx;
                    futhark_mc_task_128502.free_m_112519 = m_112519;
                    futhark_mc_task_128502.free_n_112520 = n_112520;
                    futhark_mc_task_128502.free_t_window_112523 =
                        t_window_112523;
                    futhark_mc_task_128502.free_t_jump_112527 = t_jump_112527;
                    futhark_mc_task_128502.free_t_n_m_112577 = t_n_m_112577;
                    futhark_mc_task_128502.free_i_112596 = i_112596;
                    futhark_mc_task_128502.free_mem_119420 = mem_119420;
                    futhark_mc_task_128502.free_mem_119442 = mem_119442;
                    futhark_mc_task_128502.free_bytes_119552 = bytes_119552;
                    futhark_mc_task_128502.free_mem_119606 = mem_119606;
                    futhark_mc_task_128502.free_mem_119610 = mem_119610;
                    futhark_mc_task_128502.free_mem_120357 = mem_120357;
                    futhark_mc_task_128502.free_mem_120361 = mem_120361;
                    futhark_mc_task_128502.free_mem_120391 = mem_120391.mem;
                    
                    struct scheduler_segop futhark_mc_task_128502_task;
                    
                    futhark_mc_task_128502_task.args = &futhark_mc_task_128502;
                    futhark_mc_task_128502_task.top_level_fn =
                        futhark_mc_segmap_task_128503;
                    futhark_mc_task_128502_task.name =
                        "futhark_mc_segmap_task_128503";
                    futhark_mc_task_128502_task.iterations = m_112519;
                    futhark_mc_task_128502_task.task_time =
                        &ctx->futhark_mc_segmap_task_128503_total_time;
                    futhark_mc_task_128502_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128503_total_iter;
                    futhark_mc_task_128502_task.sched = STATIC;
                    futhark_mc_task_128502_task.nested_fn =
                        futhark_mc_segmap_nested_task_128507;
                    
                    int futhark_mc_segmap_task_128503_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128502_task);
                    
                    if (futhark_mc_segmap_task_128503_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120483, &mem_120391,
                                     "mem_120391") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120482, &mem_120369,
                                     "mem_120369") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120391, "mem_120391") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120369, "mem_120369") != 0)
                        return 1;
                } else {
                    bool match_lit_113888 = (int64_t) 1 == t_degree_112525;
                    struct memblock ext_mem_120481;
                    
                    ext_mem_120481.references = NULL;
                    
                    struct memblock ext_mem_120480;
                    
                    ext_mem_120480.references = NULL;
                    if (match_lit_113888) {
                        struct memblock mem_120431;
                        
                        mem_120431.references = NULL;
                        if (memblock_alloc(ctx, &mem_120431, bytes_119607,
                                           "mem_120431")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120435;
                        
                        mem_120435.references = NULL;
                        if (memblock_alloc(ctx, &mem_120435, bytes_119607,
                                           "mem_120435")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117024 = (int64_t) 0;
                        int32_t num_tasks_125319;
                        int64_t flat_tid_117026 = (int64_t) 0;
                        struct futhark_mc_task_128528 futhark_mc_task_128528;
                        
                        futhark_mc_task_128528.ctx = ctx;
                        futhark_mc_task_128528.free_m_112519 = m_112519;
                        futhark_mc_task_128528.free_n_112520 = n_112520;
                        futhark_mc_task_128528.free_t_window_112523 =
                            t_window_112523;
                        futhark_mc_task_128528.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128528.free_t_n_m_112577 = t_n_m_112577;
                        futhark_mc_task_128528.free_i_112596 = i_112596;
                        futhark_mc_task_128528.free_mem_119420 = mem_119420;
                        futhark_mc_task_128528.free_mem_119442 = mem_119442;
                        futhark_mc_task_128528.free_bytes_119552 = bytes_119552;
                        futhark_mc_task_128528.free_mem_119606 = mem_119606;
                        futhark_mc_task_128528.free_mem_119610 = mem_119610;
                        futhark_mc_task_128528.free_mem_120357 = mem_120357;
                        futhark_mc_task_128528.free_mem_120361 = mem_120361;
                        futhark_mc_task_128528.free_mem_120431 = mem_120431.mem;
                        futhark_mc_task_128528.free_mem_120435 = mem_120435.mem;
                        
                        struct scheduler_segop futhark_mc_task_128528_task;
                        
                        futhark_mc_task_128528_task.args =
                            &futhark_mc_task_128528;
                        futhark_mc_task_128528_task.top_level_fn =
                            futhark_mc_segmap_task_128529;
                        futhark_mc_task_128528_task.name =
                            "futhark_mc_segmap_task_128529";
                        futhark_mc_task_128528_task.iterations = m_112519;
                        futhark_mc_task_128528_task.task_time =
                            &ctx->futhark_mc_segmap_task_128529_total_time;
                        futhark_mc_task_128528_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128529_total_iter;
                        futhark_mc_task_128528_task.sched = STATIC;
                        futhark_mc_task_128528_task.nested_fn =
                            futhark_mc_segmap_nested_task_128534;
                        
                        int futhark_mc_segmap_task_128529_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128528_task);
                        
                        if (futhark_mc_segmap_task_128529_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120481, &mem_120431,
                                         "mem_120431") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120480, &mem_120435,
                                         "mem_120435") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120435, "mem_120435") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120431, "mem_120431") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120475;
                        
                        mem_120475.references = NULL;
                        if (memblock_alloc(ctx, &mem_120475, bytes_119607,
                                           "mem_120475")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120479;
                        
                        mem_120479.references = NULL;
                        if (memblock_alloc(ctx, &mem_120479, bytes_119607,
                                           "mem_120479")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117296 = (int64_t) 0;
                        int32_t num_tasks_125746;
                        int64_t flat_tid_117298 = (int64_t) 0;
                        struct futhark_mc_task_128559 futhark_mc_task_128559;
                        
                        futhark_mc_task_128559.ctx = ctx;
                        futhark_mc_task_128559.free_m_112519 = m_112519;
                        futhark_mc_task_128559.free_n_112520 = n_112520;
                        futhark_mc_task_128559.free_t_window_112523 =
                            t_window_112523;
                        futhark_mc_task_128559.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128559.free_t_n_m_112577 = t_n_m_112577;
                        futhark_mc_task_128559.free_i_112596 = i_112596;
                        futhark_mc_task_128559.free_mem_119420 = mem_119420;
                        futhark_mc_task_128559.free_mem_119442 = mem_119442;
                        futhark_mc_task_128559.free_bytes_119552 = bytes_119552;
                        futhark_mc_task_128559.free_mem_119606 = mem_119606;
                        futhark_mc_task_128559.free_mem_119610 = mem_119610;
                        futhark_mc_task_128559.free_mem_120357 = mem_120357;
                        futhark_mc_task_128559.free_mem_120361 = mem_120361;
                        futhark_mc_task_128559.free_mem_120475 = mem_120475.mem;
                        futhark_mc_task_128559.free_mem_120479 = mem_120479.mem;
                        
                        struct scheduler_segop futhark_mc_task_128559_task;
                        
                        futhark_mc_task_128559_task.args =
                            &futhark_mc_task_128559;
                        futhark_mc_task_128559_task.top_level_fn =
                            futhark_mc_segmap_task_128560;
                        futhark_mc_task_128559_task.name =
                            "futhark_mc_segmap_task_128560";
                        futhark_mc_task_128559_task.iterations = m_112519;
                        futhark_mc_task_128559_task.task_time =
                            &ctx->futhark_mc_segmap_task_128560_total_time;
                        futhark_mc_task_128559_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128560_total_iter;
                        futhark_mc_task_128559_task.sched = STATIC;
                        futhark_mc_task_128559_task.nested_fn =
                            futhark_mc_segmap_nested_task_128565;
                        
                        int futhark_mc_segmap_task_128560_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128559_task);
                        
                        if (futhark_mc_segmap_task_128560_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120481, &mem_120475,
                                         "mem_120475") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120480, &mem_120479,
                                         "mem_120479") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120479, "mem_120479") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120475, "mem_120475") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120483, &ext_mem_120481,
                                     "ext_mem_120481") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120482, &ext_mem_120480,
                                     "ext_mem_120480") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120480,
                                       "ext_mem_120480") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120481,
                                       "ext_mem_120481") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120834, &ext_mem_120483,
                                 "ext_mem_120483") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120833, &ext_mem_120482,
                                 "ext_mem_120482") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120482, "ext_mem_120482") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120483, "ext_mem_120483") != 0)
                    return 1;
            } else {
                bool match_lit_114117 = (int64_t) 0 == t_degree_112525;
                struct memblock ext_mem_120832;
                
                ext_mem_120832.references = NULL;
                
                struct memblock ext_mem_120831;
                
                ext_mem_120831.references = NULL;
                if (match_lit_114117) {
                    struct memblock mem_120487;
                    
                    mem_120487.references = NULL;
                    if (memblock_alloc(ctx, &mem_120487, bytes_119607,
                                       "mem_120487")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_126305 = 0; i_126305 < m_112519;
                         i_126305++) {
                        for (int64_t i_126306 = 0; i_126306 < t_n_m_112577;
                             i_126306++) {
                            ((float *) mem_120487.mem)[i_126305 * t_n_m_112577 +
                                                       i_126306] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120542;
                    
                    mem_120542.references = NULL;
                    if (memblock_alloc(ctx, &mem_120542, bytes_119607,
                                       "mem_120542")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_120489 = (int64_t) 4 * t_window_112523;
                    int64_t bytes_120488 = smax64((int64_t) 0, binop_y_120489);
                    int64_t flat_tid_117664 = (int64_t) 0;
                    int32_t num_tasks_126307;
                    int64_t flat_tid_117666 = (int64_t) 0;
                    struct futhark_mc_task_128592 futhark_mc_task_128592;
                    
                    futhark_mc_task_128592.ctx = ctx;
                    futhark_mc_task_128592.free_m_112519 = m_112519;
                    futhark_mc_task_128592.free_n_112520 = n_112520;
                    futhark_mc_task_128592.free_t_window_112523 =
                        t_window_112523;
                    futhark_mc_task_128592.free_t_jump_112527 = t_jump_112527;
                    futhark_mc_task_128592.free_t_n_m_112577 = t_n_m_112577;
                    futhark_mc_task_128592.free_i_112596 = i_112596;
                    futhark_mc_task_128592.free_mem_119420 = mem_119420;
                    futhark_mc_task_128592.free_mem_119442 = mem_119442;
                    futhark_mc_task_128592.free_bytes_119552 = bytes_119552;
                    futhark_mc_task_128592.free_mem_119606 = mem_119606;
                    futhark_mc_task_128592.free_mem_119610 = mem_119610;
                    futhark_mc_task_128592.free_mem_120357 = mem_120357;
                    futhark_mc_task_128592.free_mem_120361 = mem_120361;
                    futhark_mc_task_128592.free_bytes_120488 = bytes_120488;
                    futhark_mc_task_128592.free_mem_120542 = mem_120542.mem;
                    
                    struct scheduler_segop futhark_mc_task_128592_task;
                    
                    futhark_mc_task_128592_task.args = &futhark_mc_task_128592;
                    futhark_mc_task_128592_task.top_level_fn =
                        futhark_mc_segmap_task_128593;
                    futhark_mc_task_128592_task.name =
                        "futhark_mc_segmap_task_128593";
                    futhark_mc_task_128592_task.iterations = m_112519;
                    futhark_mc_task_128592_task.task_time =
                        &ctx->futhark_mc_segmap_task_128593_total_time;
                    futhark_mc_task_128592_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128593_total_iter;
                    futhark_mc_task_128592_task.sched = STATIC;
                    futhark_mc_task_128592_task.nested_fn =
                        futhark_mc_segmap_nested_task_128598;
                    
                    int futhark_mc_segmap_task_128593_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128592_task);
                    
                    if (futhark_mc_segmap_task_128593_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120832, &mem_120542,
                                     "mem_120542") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120831, &mem_120487,
                                     "mem_120487") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120542, "mem_120542") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120487, "mem_120487") != 0)
                        return 1;
                } else {
                    bool match_lit_114174 = (int64_t) 1 == t_degree_112525;
                    struct memblock ext_mem_120830;
                    
                    ext_mem_120830.references = NULL;
                    
                    struct memblock ext_mem_120829;
                    
                    ext_mem_120829.references = NULL;
                    if (match_lit_114174) {
                        struct memblock mem_120648;
                        
                        mem_120648.references = NULL;
                        if (memblock_alloc(ctx, &mem_120648, bytes_119607,
                                           "mem_120648")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120652;
                        
                        mem_120652.references = NULL;
                        if (memblock_alloc(ctx, &mem_120652, bytes_119607,
                                           "mem_120652")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120544 = (int64_t) 4 * t_window_112523;
                        int64_t bytes_120543 = smax64((int64_t) 0,
                                                      binop_y_120544);
                        int64_t flat_tid_117809 = (int64_t) 0;
                        int32_t num_tasks_126536;
                        int64_t flat_tid_117811 = (int64_t) 0;
                        struct futhark_mc_task_128621 futhark_mc_task_128621;
                        
                        futhark_mc_task_128621.ctx = ctx;
                        futhark_mc_task_128621.free_m_112519 = m_112519;
                        futhark_mc_task_128621.free_n_112520 = n_112520;
                        futhark_mc_task_128621.free_t_window_112523 =
                            t_window_112523;
                        futhark_mc_task_128621.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128621.free_t_n_m_112577 = t_n_m_112577;
                        futhark_mc_task_128621.free_i_112596 = i_112596;
                        futhark_mc_task_128621.free_mem_119420 = mem_119420;
                        futhark_mc_task_128621.free_mem_119442 = mem_119442;
                        futhark_mc_task_128621.free_bytes_119552 = bytes_119552;
                        futhark_mc_task_128621.free_mem_119606 = mem_119606;
                        futhark_mc_task_128621.free_mem_119610 = mem_119610;
                        futhark_mc_task_128621.free_mem_120357 = mem_120357;
                        futhark_mc_task_128621.free_mem_120361 = mem_120361;
                        futhark_mc_task_128621.free_bytes_120543 = bytes_120543;
                        futhark_mc_task_128621.free_mem_120648 = mem_120648.mem;
                        futhark_mc_task_128621.free_mem_120652 = mem_120652.mem;
                        
                        struct scheduler_segop futhark_mc_task_128621_task;
                        
                        futhark_mc_task_128621_task.args =
                            &futhark_mc_task_128621;
                        futhark_mc_task_128621_task.top_level_fn =
                            futhark_mc_segmap_task_128622;
                        futhark_mc_task_128621_task.name =
                            "futhark_mc_segmap_task_128622";
                        futhark_mc_task_128621_task.iterations = m_112519;
                        futhark_mc_task_128621_task.task_time =
                            &ctx->futhark_mc_segmap_task_128622_total_time;
                        futhark_mc_task_128621_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128622_total_iter;
                        futhark_mc_task_128621_task.sched = STATIC;
                        futhark_mc_task_128621_task.nested_fn =
                            futhark_mc_segmap_nested_task_128629;
                        
                        int futhark_mc_segmap_task_128622_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128621_task);
                        
                        if (futhark_mc_segmap_task_128622_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120830, &mem_120648,
                                         "mem_120648") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120829, &mem_120652,
                                         "mem_120652") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120652, "mem_120652") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120648, "mem_120648") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120824;
                        
                        mem_120824.references = NULL;
                        if (memblock_alloc(ctx, &mem_120824, bytes_119607,
                                           "mem_120824")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120828;
                        
                        mem_120828.references = NULL;
                        if (memblock_alloc(ctx, &mem_120828, bytes_119607,
                                           "mem_120828")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120654 = (int64_t) 4 * t_window_112523;
                        int64_t bytes_120653 = smax64((int64_t) 0,
                                                      binop_y_120654);
                        int64_t flat_tid_118042 = (int64_t) 0;
                        int32_t num_tasks_126918;
                        int64_t flat_tid_118044 = (int64_t) 0;
                        struct futhark_mc_task_128658 futhark_mc_task_128658;
                        
                        futhark_mc_task_128658.ctx = ctx;
                        futhark_mc_task_128658.free_m_112519 = m_112519;
                        futhark_mc_task_128658.free_n_112520 = n_112520;
                        futhark_mc_task_128658.free_t_window_112523 =
                            t_window_112523;
                        futhark_mc_task_128658.free_t_jump_112527 =
                            t_jump_112527;
                        futhark_mc_task_128658.free_t_n_m_112577 = t_n_m_112577;
                        futhark_mc_task_128658.free_i_112596 = i_112596;
                        futhark_mc_task_128658.free_mem_119420 = mem_119420;
                        futhark_mc_task_128658.free_mem_119442 = mem_119442;
                        futhark_mc_task_128658.free_bytes_119552 = bytes_119552;
                        futhark_mc_task_128658.free_mem_119606 = mem_119606;
                        futhark_mc_task_128658.free_mem_119610 = mem_119610;
                        futhark_mc_task_128658.free_mem_120357 = mem_120357;
                        futhark_mc_task_128658.free_mem_120361 = mem_120361;
                        futhark_mc_task_128658.free_bytes_120653 = bytes_120653;
                        futhark_mc_task_128658.free_mem_120824 = mem_120824.mem;
                        futhark_mc_task_128658.free_mem_120828 = mem_120828.mem;
                        
                        struct scheduler_segop futhark_mc_task_128658_task;
                        
                        futhark_mc_task_128658_task.args =
                            &futhark_mc_task_128658;
                        futhark_mc_task_128658_task.top_level_fn =
                            futhark_mc_segmap_task_128659;
                        futhark_mc_task_128658_task.name =
                            "futhark_mc_segmap_task_128659";
                        futhark_mc_task_128658_task.iterations = m_112519;
                        futhark_mc_task_128658_task.task_time =
                            &ctx->futhark_mc_segmap_task_128659_total_time;
                        futhark_mc_task_128658_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128659_total_iter;
                        futhark_mc_task_128658_task.sched = STATIC;
                        futhark_mc_task_128658_task.nested_fn =
                            futhark_mc_segmap_nested_task_128668;
                        
                        int futhark_mc_segmap_task_128659_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128658_task);
                        
                        if (futhark_mc_segmap_task_128659_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120830, &mem_120824,
                                         "mem_120824") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120829, &mem_120828,
                                         "mem_120828") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120828, "mem_120828") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120824, "mem_120824") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120832, &ext_mem_120830,
                                     "ext_mem_120830") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120831, &ext_mem_120829,
                                     "ext_mem_120829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120829,
                                       "ext_mem_120829") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120830,
                                       "ext_mem_120830") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120834, &ext_mem_120832,
                                 "ext_mem_120832") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120833, &ext_mem_120831,
                                 "ext_mem_120831") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120831, "ext_mem_120831") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120832, "ext_mem_120832") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_120857;
            
            ext_mem_120857.references = NULL;
            if (cond_112895) {
                bool zzero_114422 = t_jump_112527 == (int64_t) 0;
                bool nonzzero_114423 = !zzero_114422;
                bool nonzzero_cert_114424;
                
                if (!nonzzero_114423) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:423:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:422:3-435:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120857,
                                       "ext_mem_120857") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120833,
                                       "ext_mem_120833") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120834,
                                       "ext_mem_120834") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120365, "mem_120365") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120280,
                                       "ext_mem_120280") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120256,
                                       "ext_mem_120256") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120257,
                                       "ext_mem_120257") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119664,
                                       "mem_param_119664") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119656,
                                       "mem_param_119656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120863,
                                       "ext_mem_120863") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120864,
                                       "ext_mem_120864") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119642,
                                       "mem_param_119642") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119634,
                                       "mem_param_119634") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119626,
                                       "mem_param_119626") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121116,
                                       "ext_mem_121116") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121117,
                                       "ext_mem_121117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121118,
                                       "ext_mem_121118") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121232,
                                       "mem_out_121232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121231,
                                       "mem_out_121231") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121230,
                                       "mem_out_121230") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_114425 = sub64(t_n_m_112577, (int64_t) 1);
                struct memblock mem_120856;
                
                mem_120856.references = NULL;
                if (memblock_alloc(ctx, &mem_120856, bytes_119439,
                                   "mem_120856")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_118385 = (int64_t) 0;
                int32_t num_tasks_127484;
                int64_t flat_tid_118387 = (int64_t) 0;
                struct futhark_mc_task_128707 futhark_mc_task_128707;
                
                futhark_mc_task_128707.ctx = ctx;
                futhark_mc_task_128707.free_m_112519 = m_112519;
                futhark_mc_task_128707.free_n_112520 = n_112520;
                futhark_mc_task_128707.free_t_jump_112527 = t_jump_112527;
                futhark_mc_task_128707.free_t_n_m_112577 = t_n_m_112577;
                futhark_mc_task_128707.free_i_112596 = i_112596;
                futhark_mc_task_128707.free_y_114425 = y_114425;
                futhark_mc_task_128707.free_bytes_119421 = bytes_119421;
                futhark_mc_task_128707.free_ext_mem_120833 = ext_mem_120833.mem;
                futhark_mc_task_128707.free_ext_mem_120834 = ext_mem_120834.mem;
                futhark_mc_task_128707.free_mem_120856 = mem_120856.mem;
                
                struct scheduler_segop futhark_mc_task_128707_task;
                
                futhark_mc_task_128707_task.args = &futhark_mc_task_128707;
                futhark_mc_task_128707_task.top_level_fn =
                    futhark_mc_segmap_task_128708;
                futhark_mc_task_128707_task.name =
                    "futhark_mc_segmap_task_128708";
                futhark_mc_task_128707_task.iterations = m_112519;
                futhark_mc_task_128707_task.task_time =
                    &ctx->futhark_mc_segmap_task_128708_total_time;
                futhark_mc_task_128707_task.task_iter =
                    &ctx->futhark_mc_segmap_task_128708_total_iter;
                futhark_mc_task_128707_task.sched = STATIC;
                futhark_mc_task_128707_task.nested_fn =
                    futhark_mc_segmap_nested_task_128712;
                
                int futhark_mc_segmap_task_128708_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_128707_task);
                
                if (futhark_mc_segmap_task_128708_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_120857, &mem_120856,
                                 "mem_120856") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_120856, "mem_120856") != 0)
                    return 1;
            } else {
                bool dim_match_114478 = n_112520 == t_n_m_112577;
                bool empty_or_match_cert_114479;
                
                if (!dim_match_114478) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_112519, ", ",
                                  (long long) t_n_m_112577,
                                  ") cannot match shape of type `[",
                                  (long long) m_112519, "][",
                                  (long long) n_112520, "]t`.",
                                  "-> #0  stl.fut:274:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120857,
                                       "ext_mem_120857") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120833,
                                       "ext_mem_120833") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120834,
                                       "ext_mem_120834") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120365, "mem_120365") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120280,
                                       "ext_mem_120280") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120256,
                                       "ext_mem_120256") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120257,
                                       "ext_mem_120257") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119664,
                                       "mem_param_119664") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119656,
                                       "mem_param_119656") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120863,
                                       "ext_mem_120863") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120864,
                                       "ext_mem_120864") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119642,
                                       "mem_param_119642") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119634,
                                       "mem_param_119634") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119626,
                                       "mem_param_119626") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121116,
                                       "ext_mem_121116") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121117,
                                       "ext_mem_121117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121118,
                                       "ext_mem_121118") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121232,
                                       "mem_out_121232") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121231,
                                       "mem_out_121231") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121230,
                                       "mem_out_121230") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_120857, &ext_mem_120834,
                                 "ext_mem_120834") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_120833, "ext_mem_120833") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120834, "ext_mem_120834") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_121997 = ext_120858;
            int64_t ctx_param_ext_tmp_121998 = ext_120858;
            struct memblock mem_param_tmp_121999;
            
            mem_param_tmp_121999.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_121999, &mem_120365,
                             "mem_120365") != 0)
                return 1;
            
            struct memblock mem_param_tmp_122000;
            
            mem_param_tmp_122000.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_122000, &ext_mem_120857,
                             "ext_mem_120857") != 0)
                return 1;
            ctx_param_ext_119658 = ctx_param_ext_tmp_121997;
            ctx_param_ext_119660 = ctx_param_ext_tmp_121998;
            if (memblock_set(ctx, &mem_param_119656, &mem_param_tmp_121999,
                             "mem_param_tmp_121999") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_119664, &mem_param_tmp_122000,
                             "mem_param_tmp_122000") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_122000,
                               "mem_param_tmp_122000") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_121999,
                               "mem_param_tmp_121999") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120857, "ext_mem_120857") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120833, "ext_mem_120833") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120834, "ext_mem_120834") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_120365, "mem_120365") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120280, "ext_mem_120280") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120256, "ext_mem_120256") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120257, "ext_mem_120257") != 0)
                return 1;
        }
        ext_120870 = ctx_param_ext_119658;
        ext_120868 = ctx_param_ext_119660;
        if (memblock_set(ctx, &ext_mem_120864, &mem_param_119656,
                         "mem_param_119656") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_120863, &mem_param_119664,
                         "mem_param_119664") != 0)
            return 1;
        
        bool cond_114481 = slt64(i_outer_112974, y_112896);
        int64_t ext_121115;
        
        if (cond_114481) {
            ext_121115 = m_112519;
        } else {
            ext_121115 = ctx_param_ext_119639;
        }
        
        int64_t ext_121114;
        
        if (cond_114481) {
            ext_121114 = n_112520;
        } else {
            ext_121114 = ctx_param_ext_119641;
        }
        
        int64_t ext_121113;
        
        if (cond_114481) {
            ext_121113 = m_112519;
        } else {
            ext_121113 = ctx_param_ext_119635;
        }
        
        int64_t ext_121112;
        
        if (cond_114481) {
            ext_121112 = n_112520;
        } else {
            ext_121112 = ctx_param_ext_119636;
        }
        
        int64_t ext_121111;
        
        if (cond_114481) {
            ext_121111 = n_112520;
        } else {
            ext_121111 = ctx_param_ext_119638;
        }
        
        int64_t ext_121110;
        
        if (cond_114481) {
            ext_121110 = (int64_t) 1;
        } else {
            ext_121110 = ctx_param_ext_119640;
        }
        
        int64_t ext_121109;
        
        if (cond_114481) {
            ext_121109 = (int64_t) 0;
        } else {
            ext_121109 = ctx_param_ext_119637;
        }
        
        struct memblock ext_mem_121108;
        
        ext_mem_121108.references = NULL;
        if (cond_114481) {
            if (mem_120900_cached_sizze_128048 < (size_t) bytes_119439) {
                mem_120900 = realloc(mem_120900, bytes_119439);
                mem_120900_cached_sizze_128048 = bytes_119439;
            }
            
            int64_t flat_tid_118441 = (int64_t) 0;
            int32_t num_tasks_127592;
            int64_t flat_tid_118443 = (int64_t) 0;
            struct futhark_mc_task_128720 futhark_mc_task_128720;
            
            futhark_mc_task_128720.ctx = ctx;
            futhark_mc_task_128720.free_m_112519 = m_112519;
            futhark_mc_task_128720.free_n_112520 = n_112520;
            futhark_mc_task_128720.free_Y_mem_119377 = Y_mem_119377.mem;
            futhark_mc_task_128720.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128720.free_ext_mem_120863 = ext_mem_120863.mem;
            futhark_mc_task_128720.free_ext_mem_120864 = ext_mem_120864.mem;
            futhark_mc_task_128720.free_ext_120868 = ext_120868;
            futhark_mc_task_128720.free_mem_120900 = mem_120900;
            
            struct scheduler_segop futhark_mc_task_128720_task;
            
            futhark_mc_task_128720_task.args = &futhark_mc_task_128720;
            futhark_mc_task_128720_task.top_level_fn =
                futhark_mc_segmap_task_128721;
            futhark_mc_task_128720_task.name = "futhark_mc_segmap_task_128721";
            futhark_mc_task_128720_task.iterations = m_112519;
            futhark_mc_task_128720_task.task_time =
                &ctx->futhark_mc_segmap_task_128721_total_time;
            futhark_mc_task_128720_task.task_iter =
                &ctx->futhark_mc_segmap_task_128721_total_iter;
            futhark_mc_task_128720_task.sched = STATIC;
            futhark_mc_task_128720_task.nested_fn =
                futhark_mc_segmap_nested_task_128725;
            
            int futhark_mc_segmap_task_128721_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128720_task);
            
            if (futhark_mc_segmap_task_128721_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (mem_120922_cached_sizze_128049 < (size_t) bytes_119439) {
                mem_120922 = realloc(mem_120922, bytes_119439);
                mem_120922_cached_sizze_128049 = bytes_119439;
            }
            
            int64_t flat_tid_118459 = (int64_t) 0;
            int32_t num_tasks_127624;
            int64_t flat_tid_118461 = (int64_t) 0;
            struct futhark_mc_task_128733 futhark_mc_task_128733;
            
            futhark_mc_task_128733.ctx = ctx;
            futhark_mc_task_128733.free_m_112519 = m_112519;
            futhark_mc_task_128733.free_n_112520 = n_112520;
            futhark_mc_task_128733.free_mem_119417 = mem_119417;
            futhark_mc_task_128733.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128733.free_mem_120900 = mem_120900;
            futhark_mc_task_128733.free_mem_120922 = mem_120922;
            
            struct scheduler_segop futhark_mc_task_128733_task;
            
            futhark_mc_task_128733_task.args = &futhark_mc_task_128733;
            futhark_mc_task_128733_task.top_level_fn =
                futhark_mc_segmap_task_128734;
            futhark_mc_task_128733_task.name = "futhark_mc_segmap_task_128734";
            futhark_mc_task_128733_task.iterations = m_112519;
            futhark_mc_task_128733_task.task_time =
                &ctx->futhark_mc_segmap_task_128734_total_time;
            futhark_mc_task_128733_task.task_iter =
                &ctx->futhark_mc_segmap_task_128734_total_iter;
            futhark_mc_task_128733_task.sched = STATIC;
            futhark_mc_task_128733_task.nested_fn =
                futhark_mc_segmap_nested_task_128738;
            
            int futhark_mc_segmap_task_128734_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128733_task);
            
            if (futhark_mc_segmap_task_128734_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t iters_114509;
            
            if (empty_slice_112947) {
                iters_114509 = 0;
            } else {
                iters_114509 = 16;
            }
            
            bool loop_nonempty_114510 = slt32(0, iters_114509);
            bool loop_not_taken_114511 = !loop_nonempty_114510;
            bool protect_assert_disj_114512 = bounds_check_112599 ||
                 loop_not_taken_114511;
            bool index_certs_114513;
            
            if (!protect_assert_disj_114512) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_112596,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  stl.fut:305:35-77\n   #5  stl.fut:304:28-306:40\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_121108, "ext_mem_121108") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119664,
                                   "mem_param_119664") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119656,
                                   "mem_param_119656") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120863, "ext_mem_120863") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120864, "ext_mem_120864") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119642,
                                   "mem_param_119642") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119634,
                                   "mem_param_119634") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119626,
                                   "mem_param_119626") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121116, "ext_mem_121116") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121117, "ext_mem_121117") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121118, "ext_mem_121118") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
                    return 1;
                return 1;
            }
            if (mem_121076_cached_sizze_128050 < (size_t) bytes_119439) {
                mem_121076 = realloc(mem_121076, bytes_119439);
                mem_121076_cached_sizze_128050 = bytes_119439;
            }
            
            int64_t double_buffer_sizze_121220 = (int64_t) 4 * n_112520;
            int64_t double_buffer_sizze_121224 = (int64_t) 4 * n_112520;
            int64_t flat_tid_118475 = (int64_t) 0;
            int32_t num_tasks_127657;
            int64_t flat_tid_118477 = (int64_t) 0;
            struct futhark_mc_task_128746 futhark_mc_task_128746;
            
            futhark_mc_task_128746.ctx = ctx;
            futhark_mc_task_128746.free_m_112519 = m_112519;
            futhark_mc_task_128746.free_n_112520 = n_112520;
            futhark_mc_task_128746.free_i_112596 = i_112596;
            futhark_mc_task_128746.free_iters_114509 = iters_114509;
            futhark_mc_task_128746.free_bytes_119378 = bytes_119378;
            futhark_mc_task_128746.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128746.free_mem_120922 = mem_120922;
            futhark_mc_task_128746.free_mem_121076 = mem_121076;
            futhark_mc_task_128746.free_double_buffer_sizze_121220 =
                double_buffer_sizze_121220;
            futhark_mc_task_128746.free_double_buffer_sizze_121224 =
                double_buffer_sizze_121224;
            
            struct scheduler_segop futhark_mc_task_128746_task;
            
            futhark_mc_task_128746_task.args = &futhark_mc_task_128746;
            futhark_mc_task_128746_task.top_level_fn =
                futhark_mc_segmap_task_128747;
            futhark_mc_task_128746_task.name = "futhark_mc_segmap_task_128747";
            futhark_mc_task_128746_task.iterations = m_112519;
            futhark_mc_task_128746_task.task_time =
                &ctx->futhark_mc_segmap_task_128747_total_time;
            futhark_mc_task_128746_task.task_iter =
                &ctx->futhark_mc_segmap_task_128747_total_iter;
            futhark_mc_task_128746_task.sched = STATIC;
            futhark_mc_task_128746_task.nested_fn =
                futhark_mc_segmap_nested_task_128757;
            
            int futhark_mc_segmap_task_128747_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128746_task);
            
            if (futhark_mc_segmap_task_128747_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            bool empty_slice_114627 = j_m_i_112960 == (int64_t) 0;
            int64_t m_114628 = sub64(j_m_i_112960, (int64_t) 1);
            int64_t i_p_m_t_s_114629 = add64(stl_res_112590, m_114628);
            bool zzero_leq_i_p_m_t_s_114630 = sle64((int64_t) 0,
                                                    i_p_m_t_s_114629);
            bool i_p_m_t_s_leq_w_114631 = slt64(i_p_m_t_s_114629, n_112520);
            bool zzero_lte_i_114632 = sle64((int64_t) 0, stl_res_112590);
            bool i_lte_j_114633 = sle64(stl_res_112590, stl_res_112591);
            bool y_114634 = i_p_m_t_s_leq_w_114631 && zzero_lte_i_114632;
            bool y_114635 = zzero_leq_i_p_m_t_s_114630 && y_114634;
            bool y_114636 = i_lte_j_114633 && y_114635;
            bool forwards_ok_114637 = zzero_lte_i_114632 && y_114636;
            bool ok_or_empty_114638 = empty_slice_114627 || forwards_ok_114637;
            bool index_certs_114639;
            
            if (!ok_or_empty_114638) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) stl_res_112590, ":",
                              (long long) stl_res_112591,
                              "] out of bounds for array of shape [",
                              (long long) n_112520, "].",
                              "-> #0  stl.fut:311:33-51\n   #1  stl.fut:309:13-316:28\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_121108, "ext_mem_121108") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119664,
                                   "mem_param_119664") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119656,
                                   "mem_param_119656") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120863, "ext_mem_120863") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120864, "ext_mem_120864") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119642,
                                   "mem_param_119642") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119634,
                                   "mem_param_119634") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119626,
                                   "mem_param_119626") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121116, "ext_mem_121116") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121117, "ext_mem_121117") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121118, "ext_mem_121118") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
                    return 1;
                return 1;
            }
            
            int64_t binop_y_121078 = (int64_t) 4 * m_112519;
            int64_t bytes_121077 = smax64((int64_t) 0, binop_y_121078);
            
            if (mem_121079_cached_sizze_128051 < (size_t) bytes_121077) {
                mem_121079 = realloc(mem_121079, bytes_121077);
                mem_121079_cached_sizze_128051 = bytes_121077;
            }
            if (mem_121082_cached_sizze_128052 < (size_t) bytes_121077) {
                mem_121082 = realloc(mem_121082, bytes_121077);
                mem_121082_cached_sizze_128052 = bytes_121077;
            }
            if (mem_121085_cached_sizze_128053 < (size_t) bytes_121077) {
                mem_121085 = realloc(mem_121085, bytes_121077);
                mem_121085_cached_sizze_128053 = bytes_121077;
            }
            
            int64_t flat_tid_118568 = (int64_t) 0;
            int32_t num_tasks_127923;
            int64_t flat_tid_118570 = (int64_t) 0;
            struct futhark_mc_task_128781 futhark_mc_task_128781;
            
            futhark_mc_task_128781.ctx = ctx;
            futhark_mc_task_128781.free_m_112519 = m_112519;
            futhark_mc_task_128781.free_n_112520 = n_112520;
            futhark_mc_task_128781.free_stl_res_112590 = stl_res_112590;
            futhark_mc_task_128781.free_j_m_i_112960 = j_m_i_112960;
            futhark_mc_task_128781.free_mem_121076 = mem_121076;
            futhark_mc_task_128781.free_mem_121079 = mem_121079;
            futhark_mc_task_128781.free_mem_121082 = mem_121082;
            futhark_mc_task_128781.free_mem_121085 = mem_121085;
            
            struct scheduler_segop futhark_mc_task_128781_task;
            
            futhark_mc_task_128781_task.args = &futhark_mc_task_128781;
            futhark_mc_task_128781_task.top_level_fn =
                futhark_mc_segmap_task_128782;
            futhark_mc_task_128781_task.name = "futhark_mc_segmap_task_128782";
            futhark_mc_task_128781_task.iterations = m_112519;
            futhark_mc_task_128781_task.task_time =
                &ctx->futhark_mc_segmap_task_128782_total_time;
            futhark_mc_task_128781_task.task_iter =
                &ctx->futhark_mc_segmap_task_128782_total_iter;
            futhark_mc_task_128781_task.sched = STATIC;
            futhark_mc_task_128781_task.nested_fn =
                futhark_mc_segmap_nested_task_128785;
            
            int futhark_mc_segmap_task_128782_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128781_task);
            
            if (futhark_mc_segmap_task_128782_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock mem_121107;
            
            mem_121107.references = NULL;
            if (memblock_alloc(ctx, &mem_121107, bytes_119439, "mem_121107")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_118583 = (int64_t) 0;
            int32_t num_tasks_127950;
            int64_t flat_tid_118585 = (int64_t) 0;
            struct futhark_mc_task_128793 futhark_mc_task_128793;
            
            futhark_mc_task_128793.ctx = ctx;
            futhark_mc_task_128793.free_m_112519 = m_112519;
            futhark_mc_task_128793.free_n_112520 = n_112520;
            futhark_mc_task_128793.free_bytes_119421 = bytes_119421;
            futhark_mc_task_128793.free_mem_120900 = mem_120900;
            futhark_mc_task_128793.free_mem_121079 = mem_121079;
            futhark_mc_task_128793.free_mem_121082 = mem_121082;
            futhark_mc_task_128793.free_mem_121085 = mem_121085;
            futhark_mc_task_128793.free_mem_121107 = mem_121107.mem;
            
            struct scheduler_segop futhark_mc_task_128793_task;
            
            futhark_mc_task_128793_task.args = &futhark_mc_task_128793;
            futhark_mc_task_128793_task.top_level_fn =
                futhark_mc_segmap_task_128794;
            futhark_mc_task_128793_task.name = "futhark_mc_segmap_task_128794";
            futhark_mc_task_128793_task.iterations = m_112519;
            futhark_mc_task_128793_task.task_time =
                &ctx->futhark_mc_segmap_task_128794_total_time;
            futhark_mc_task_128793_task.task_iter =
                &ctx->futhark_mc_segmap_task_128794_total_iter;
            futhark_mc_task_128793_task.sched = STATIC;
            futhark_mc_task_128793_task.nested_fn =
                futhark_mc_segmap_nested_task_128798;
            
            int futhark_mc_segmap_task_128794_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128793_task);
            
            if (futhark_mc_segmap_task_128794_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_121108, &mem_121107, "mem_121107") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_121107, "mem_121107") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_121108, &mem_param_119642,
                             "mem_param_119642") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_121982 = ext_120870;
        int64_t ctx_param_ext_tmp_121983 = ext_120868;
        int64_t ctx_param_ext_tmp_121984 = ext_121113;
        int64_t ctx_param_ext_tmp_121985 = ext_121112;
        int64_t ctx_param_ext_tmp_121986 = ext_121109;
        int64_t ctx_param_ext_tmp_121987 = ext_121111;
        int64_t ctx_param_ext_tmp_121988 = ext_121115;
        int64_t ctx_param_ext_tmp_121989 = ext_121110;
        int64_t ctx_param_ext_tmp_121990 = ext_121114;
        struct memblock mem_param_tmp_121991;
        
        mem_param_tmp_121991.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_121991, &ext_mem_120864,
                         "ext_mem_120864") != 0)
            return 1;
        
        struct memblock mem_param_tmp_121992;
        
        mem_param_tmp_121992.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_121992, &ext_mem_120863,
                         "ext_mem_120863") != 0)
            return 1;
        
        struct memblock mem_param_tmp_121993;
        
        mem_param_tmp_121993.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_121993, &ext_mem_121108,
                         "ext_mem_121108") != 0)
            return 1;
        ctx_param_ext_119628 = ctx_param_ext_tmp_121982;
        ctx_param_ext_119630 = ctx_param_ext_tmp_121983;
        ctx_param_ext_119635 = ctx_param_ext_tmp_121984;
        ctx_param_ext_119636 = ctx_param_ext_tmp_121985;
        ctx_param_ext_119637 = ctx_param_ext_tmp_121986;
        ctx_param_ext_119638 = ctx_param_ext_tmp_121987;
        ctx_param_ext_119639 = ctx_param_ext_tmp_121988;
        ctx_param_ext_119640 = ctx_param_ext_tmp_121989;
        ctx_param_ext_119641 = ctx_param_ext_tmp_121990;
        if (memblock_set(ctx, &mem_param_119626, &mem_param_tmp_121991,
                         "mem_param_tmp_121991") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119634, &mem_param_tmp_121992,
                         "mem_param_tmp_121992") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119642, &mem_param_tmp_121993,
                         "mem_param_tmp_121993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_121993,
                           "mem_param_tmp_121993") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_121992,
                           "mem_param_tmp_121992") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_121991,
                           "mem_param_tmp_121991") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_121108, "ext_mem_121108") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_119664, "mem_param_119664") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_119656, "mem_param_119656") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_120863, "ext_mem_120863") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_120864, "ext_mem_120864") != 0)
            return 1;
    }
    ext_121131 = ctx_param_ext_119628;
    ext_121129 = ctx_param_ext_119630;
    ext_121125 = ctx_param_ext_119635;
    ext_121124 = ctx_param_ext_119636;
    ext_121123 = ctx_param_ext_119637;
    ext_121122 = ctx_param_ext_119638;
    ext_121121 = ctx_param_ext_119639;
    ext_121120 = ctx_param_ext_119640;
    ext_121119 = ctx_param_ext_119641;
    if (memblock_set(ctx, &ext_mem_121118, &mem_param_119626,
                     "mem_param_119626") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_121117, &mem_param_119634,
                     "mem_param_119634") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_121116, &mem_param_119642,
                     "mem_param_119642") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
        return 1;
    
    struct memblock mem_121161;
    
    mem_121161.references = NULL;
    if (memblock_alloc(ctx, &mem_121161, bytes_119439, "mem_121161")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t flat_tid_118611 = (int64_t) 0;
    int32_t num_tasks_128005;
    int64_t flat_tid_118613 = (int64_t) 0;
    struct futhark_mc_task_128806 futhark_mc_task_128806;
    
    futhark_mc_task_128806.ctx = ctx;
    futhark_mc_task_128806.free_m_112519 = m_112519;
    futhark_mc_task_128806.free_n_112520 = n_112520;
    futhark_mc_task_128806.free_Y_mem_119377 = Y_mem_119377.mem;
    futhark_mc_task_128806.free_bytes_119421 = bytes_119421;
    futhark_mc_task_128806.free_ext_mem_121117 = ext_mem_121117.mem;
    futhark_mc_task_128806.free_ext_mem_121118 = ext_mem_121118.mem;
    futhark_mc_task_128806.free_ext_121129 = ext_121129;
    futhark_mc_task_128806.free_mem_121161 = mem_121161.mem;
    
    struct scheduler_segop futhark_mc_task_128806_task;
    
    futhark_mc_task_128806_task.args = &futhark_mc_task_128806;
    futhark_mc_task_128806_task.top_level_fn = futhark_mc_segmap_task_128807;
    futhark_mc_task_128806_task.name = "futhark_mc_segmap_task_128807";
    futhark_mc_task_128806_task.iterations = m_112519;
    futhark_mc_task_128806_task.task_time =
        &ctx->futhark_mc_segmap_task_128807_total_time;
    futhark_mc_task_128806_task.task_iter =
        &ctx->futhark_mc_segmap_task_128807_total_iter;
    futhark_mc_task_128806_task.sched = STATIC;
    futhark_mc_task_128806_task.nested_fn =
        futhark_mc_segmap_nested_task_128811;
    
    int futhark_mc_segmap_task_128807_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128806_task);
    
    if (futhark_mc_segmap_task_128807_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_121165;
    
    mem_121165.references = NULL;
    if (memblock_alloc(ctx, &mem_121165, bytes_119439, "mem_121165")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_121165.mem + (int64_t) 0, ext_mem_121118.mem + (int64_t) 0,
            m_112519 * n_112520 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_121118, "ext_mem_121118") != 0)
        return 1;
    
    struct memblock mem_121170;
    
    mem_121170.references = NULL;
    if (memblock_alloc(ctx, &mem_121170, bytes_119439, "mem_121170")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_121170.mem + (int64_t) 0, ext_mem_121117.mem + (int64_t) 0,
            m_112519 * n_112520 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_121117, "ext_mem_121117") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121230, &mem_121165, "mem_121165") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121231, &mem_121170, "mem_121170") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121232, &mem_121161, "mem_121161") != 0)
        return 1;
    (*mem_out_p_128030).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128030, &mem_out_121230,
                     "mem_out_121230") != 0)
        return 1;
    (*mem_out_p_128031).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128031, &mem_out_121231,
                     "mem_out_121231") != 0)
        return 1;
    (*mem_out_p_128032).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128032, &mem_out_121232,
                     "mem_out_121232") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121170, "mem_121170") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121165, "mem_121165") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121161, "mem_121161") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119642, "mem_param_119642") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119634, "mem_param_119634") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119626, "mem_param_119626") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121116, "ext_mem_121116") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121117, "ext_mem_121117") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121118, "ext_mem_121118") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119618, "mem_119618") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119614, "mem_119614") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121232, "mem_out_121232") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121231, "mem_out_121231") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121230, "mem_out_121230") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_119417);
    free(mem_119420);
    free(mem_119442);
    free(mem_119464);
    free(mem_119486);
    free(mem_119544);
    free(mem_119548);
    free(mem_119606);
    free(mem_119610);
    free(mem_119686);
    free(mem_119708);
    free(mem_119730);
    free(mem_119788);
    free(mem_120357);
    free(mem_120361);
    free(mem_120900);
    free(mem_120922);
    free(mem_121076);
    free(mem_121079);
    free(mem_121082);
    free(mem_121085);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11)
{
    struct memblock Y_mem_119377;
    
    Y_mem_119377.references = NULL;
    
    int64_t m_112519;
    int64_t n_112520;
    int64_t n_p_112522;
    int64_t t_window_112523;
    int64_t l_window_112524;
    int64_t t_degree_112525;
    int64_t l_degree_112526;
    int64_t t_jump_112527;
    int64_t l_jump_112528;
    int64_t inner_112529;
    int64_t outer_112530;
    int64_t jump_threshold_112531;
    int64_t max_group_sizze_112532;
    struct memblock mem_out_121230;
    
    mem_out_121230.references = NULL;
    
    struct memblock mem_out_121231;
    
    mem_out_121231.references = NULL;
    
    struct memblock mem_out_121232;
    
    mem_out_121232.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_119377 = in0->mem;
    m_112519 = in0->shape[0];
    n_112520 = in0->shape[1];
    n_p_112522 = in1;
    t_window_112523 = in2;
    l_window_112524 = in3;
    t_degree_112525 = in4;
    l_degree_112526 = in5;
    t_jump_112527 = in6;
    l_jump_112528 = in7;
    inner_112529 = in8;
    outer_112530 = in9;
    jump_threshold_112531 = in10;
    max_group_sizze_112532 = in11;
    if (!(m_112519 == in0->shape[0] && n_112520 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_121230, &mem_out_121231,
                                &mem_out_121232, Y_mem_119377, m_112519,
                                n_112520, n_p_112522, t_window_112523,
                                l_window_112524, t_degree_112525,
                                l_degree_112526, t_jump_112527, l_jump_112528,
                                inner_112529, outer_112530,
                                jump_threshold_112531, max_group_sizze_112532);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_121230;
            (*out0)->shape[0] = m_112519;
            (*out0)->shape[1] = n_112520;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_121231;
            (*out1)->shape[0] = m_112519;
            (*out1)->shape[1] = n_112520;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_121232;
            (*out2)->shape[0] = m_112519;
            (*out2)->shape[1] = n_112520;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
