// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_130920_total_runtime;
    int *futhark_mc_segmap_parloop_130920_runs;
    int64_t *futhark_mc_segmap_parloop_130920_iter;
    int64_t futhark_mc_segmap_parloop_130920_total_total_runtime;
    int futhark_mc_segmap_parloop_130920_total_runs;
    int64_t futhark_mc_segmap_parloop_130920_total_iter;
    int64_t *futhark_mc_segmap_task_130918_total_runtime;
    int *futhark_mc_segmap_task_130918_runs;
    int64_t *futhark_mc_segmap_task_130918_iter;
    int64_t futhark_mc_segmap_task_130918_total_time;
    int64_t futhark_mc_segmap_task_130918_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_130932_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_130932_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_130932_iter;
    int64_t futhark_mc_scan_stage_1_parloop_130932_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_130932_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_130932_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_130934_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_130934_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_130934_iter;
    int64_t futhark_mc_scan_stage_3_parloop_130934_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_130934_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_130934_total_iter;
    int64_t *futhark_mc_segscan_task_130929_total_runtime;
    int *futhark_mc_segscan_task_130929_runs;
    int64_t *futhark_mc_segscan_task_130929_iter;
    int64_t futhark_mc_segscan_task_130929_total_time;
    int64_t futhark_mc_segscan_task_130929_total_iter;
    int64_t *futhark_mc_segmap_parloop_130938_total_runtime;
    int *futhark_mc_segmap_parloop_130938_runs;
    int64_t *futhark_mc_segmap_parloop_130938_iter;
    int64_t futhark_mc_segmap_parloop_130938_total_total_runtime;
    int futhark_mc_segmap_parloop_130938_total_runs;
    int64_t futhark_mc_segmap_parloop_130938_total_iter;
    int64_t *futhark_mc_segmap_task_130936_total_runtime;
    int *futhark_mc_segmap_task_130936_runs;
    int64_t *futhark_mc_segmap_task_130936_iter;
    int64_t futhark_mc_segmap_task_130936_total_time;
    int64_t futhark_mc_segmap_task_130936_total_iter;
    int64_t *futhark_mc_segmap_parloop_130925_total_runtime;
    int *futhark_mc_segmap_parloop_130925_runs;
    int64_t *futhark_mc_segmap_parloop_130925_iter;
    int64_t futhark_mc_segmap_parloop_130925_total_total_runtime;
    int futhark_mc_segmap_parloop_130925_total_runs;
    int64_t futhark_mc_segmap_parloop_130925_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130923_total_runtime;
    int *futhark_mc_segmap_nested_task_130923_runs;
    int64_t *futhark_mc_segmap_nested_task_130923_iter;
    int64_t *futhark_mc_segmap_parloop_130942_total_runtime;
    int *futhark_mc_segmap_parloop_130942_runs;
    int64_t *futhark_mc_segmap_parloop_130942_iter;
    int64_t futhark_mc_segmap_parloop_130942_total_total_runtime;
    int futhark_mc_segmap_parloop_130942_total_runs;
    int64_t futhark_mc_segmap_parloop_130942_total_iter;
    int64_t *futhark_mc_segmap_task_130940_total_runtime;
    int *futhark_mc_segmap_task_130940_runs;
    int64_t *futhark_mc_segmap_task_130940_iter;
    int64_t futhark_mc_segmap_task_130940_total_time;
    int64_t futhark_mc_segmap_task_130940_total_iter;
    int64_t *futhark_mc_segmap_parloop_130951_total_runtime;
    int *futhark_mc_segmap_parloop_130951_runs;
    int64_t *futhark_mc_segmap_parloop_130951_iter;
    int64_t futhark_mc_segmap_parloop_130951_total_total_runtime;
    int futhark_mc_segmap_parloop_130951_total_runs;
    int64_t futhark_mc_segmap_parloop_130951_total_iter;
    int64_t *futhark_mc_segmap_task_130949_total_runtime;
    int *futhark_mc_segmap_task_130949_runs;
    int64_t *futhark_mc_segmap_task_130949_iter;
    int64_t futhark_mc_segmap_task_130949_total_time;
    int64_t futhark_mc_segmap_task_130949_total_iter;
    int64_t *futhark_mc_segmap_parloop_130946_total_runtime;
    int *futhark_mc_segmap_parloop_130946_runs;
    int64_t *futhark_mc_segmap_parloop_130946_iter;
    int64_t futhark_mc_segmap_parloop_130946_total_total_runtime;
    int futhark_mc_segmap_parloop_130946_total_runs;
    int64_t futhark_mc_segmap_parloop_130946_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130944_total_runtime;
    int *futhark_mc_segmap_nested_task_130944_runs;
    int64_t *futhark_mc_segmap_nested_task_130944_iter;
    int64_t *futhark_mc_segmap_parloop_130955_total_runtime;
    int *futhark_mc_segmap_parloop_130955_runs;
    int64_t *futhark_mc_segmap_parloop_130955_iter;
    int64_t futhark_mc_segmap_parloop_130955_total_total_runtime;
    int futhark_mc_segmap_parloop_130955_total_runs;
    int64_t futhark_mc_segmap_parloop_130955_total_iter;
    int64_t *futhark_mc_segmap_task_130953_total_runtime;
    int *futhark_mc_segmap_task_130953_runs;
    int64_t *futhark_mc_segmap_task_130953_iter;
    int64_t futhark_mc_segmap_task_130953_total_time;
    int64_t futhark_mc_segmap_task_130953_total_iter;
    int64_t *futhark_mc_segmap_parloop_130964_total_runtime;
    int *futhark_mc_segmap_parloop_130964_runs;
    int64_t *futhark_mc_segmap_parloop_130964_iter;
    int64_t futhark_mc_segmap_parloop_130964_total_total_runtime;
    int futhark_mc_segmap_parloop_130964_total_runs;
    int64_t futhark_mc_segmap_parloop_130964_total_iter;
    int64_t *futhark_mc_segmap_task_130962_total_runtime;
    int *futhark_mc_segmap_task_130962_runs;
    int64_t *futhark_mc_segmap_task_130962_iter;
    int64_t futhark_mc_segmap_task_130962_total_time;
    int64_t futhark_mc_segmap_task_130962_total_iter;
    int64_t *futhark_mc_segmap_parloop_130959_total_runtime;
    int *futhark_mc_segmap_parloop_130959_runs;
    int64_t *futhark_mc_segmap_parloop_130959_iter;
    int64_t futhark_mc_segmap_parloop_130959_total_total_runtime;
    int futhark_mc_segmap_parloop_130959_total_runs;
    int64_t futhark_mc_segmap_parloop_130959_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130957_total_runtime;
    int *futhark_mc_segmap_nested_task_130957_runs;
    int64_t *futhark_mc_segmap_nested_task_130957_iter;
    int64_t *futhark_mc_segmap_parloop_130968_total_runtime;
    int *futhark_mc_segmap_parloop_130968_runs;
    int64_t *futhark_mc_segmap_parloop_130968_iter;
    int64_t futhark_mc_segmap_parloop_130968_total_total_runtime;
    int futhark_mc_segmap_parloop_130968_total_runs;
    int64_t futhark_mc_segmap_parloop_130968_total_iter;
    int64_t *futhark_mc_segmap_task_130966_total_runtime;
    int *futhark_mc_segmap_task_130966_runs;
    int64_t *futhark_mc_segmap_task_130966_iter;
    int64_t futhark_mc_segmap_task_130966_total_time;
    int64_t futhark_mc_segmap_task_130966_total_iter;
    int64_t *futhark_mc_segmap_parloop_130977_total_runtime;
    int *futhark_mc_segmap_parloop_130977_runs;
    int64_t *futhark_mc_segmap_parloop_130977_iter;
    int64_t futhark_mc_segmap_parloop_130977_total_total_runtime;
    int futhark_mc_segmap_parloop_130977_total_runs;
    int64_t futhark_mc_segmap_parloop_130977_total_iter;
    int64_t *futhark_mc_segmap_task_130975_total_runtime;
    int *futhark_mc_segmap_task_130975_runs;
    int64_t *futhark_mc_segmap_task_130975_iter;
    int64_t futhark_mc_segmap_task_130975_total_time;
    int64_t futhark_mc_segmap_task_130975_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_130985_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_130985_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_130985_iter;
    int64_t futhark_mc_segred_stage_1_parloop_130985_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_130985_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_130985_total_iter;
    int64_t *futhark_mc_segred_task_130982_total_runtime;
    int *futhark_mc_segred_task_130982_runs;
    int64_t *futhark_mc_segred_task_130982_iter;
    int64_t futhark_mc_segred_task_130982_total_time;
    int64_t futhark_mc_segred_task_130982_total_iter;
    int64_t *futhark_mc_segmap_parloop_130980_total_runtime;
    int *futhark_mc_segmap_parloop_130980_runs;
    int64_t *futhark_mc_segmap_parloop_130980_iter;
    int64_t futhark_mc_segmap_parloop_130980_total_total_runtime;
    int futhark_mc_segmap_parloop_130980_total_runs;
    int64_t futhark_mc_segmap_parloop_130980_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130978_total_runtime;
    int *futhark_mc_segmap_nested_task_130978_runs;
    int64_t *futhark_mc_segmap_nested_task_130978_iter;
    int64_t *futhark_mc_segmap_parloop_130972_total_runtime;
    int *futhark_mc_segmap_parloop_130972_runs;
    int64_t *futhark_mc_segmap_parloop_130972_iter;
    int64_t futhark_mc_segmap_parloop_130972_total_total_runtime;
    int futhark_mc_segmap_parloop_130972_total_runs;
    int64_t futhark_mc_segmap_parloop_130972_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130970_total_runtime;
    int *futhark_mc_segmap_nested_task_130970_runs;
    int64_t *futhark_mc_segmap_nested_task_130970_iter;
    int64_t *futhark_mc_segmap_parloop_130989_total_runtime;
    int *futhark_mc_segmap_parloop_130989_runs;
    int64_t *futhark_mc_segmap_parloop_130989_iter;
    int64_t futhark_mc_segmap_parloop_130989_total_total_runtime;
    int futhark_mc_segmap_parloop_130989_total_runs;
    int64_t futhark_mc_segmap_parloop_130989_total_iter;
    int64_t *futhark_mc_segmap_task_130987_total_runtime;
    int *futhark_mc_segmap_task_130987_runs;
    int64_t *futhark_mc_segmap_task_130987_iter;
    int64_t futhark_mc_segmap_task_130987_total_time;
    int64_t futhark_mc_segmap_task_130987_total_iter;
    int64_t *futhark_mc_segmap_parloop_131004_total_runtime;
    int *futhark_mc_segmap_parloop_131004_runs;
    int64_t *futhark_mc_segmap_parloop_131004_iter;
    int64_t futhark_mc_segmap_parloop_131004_total_total_runtime;
    int futhark_mc_segmap_parloop_131004_total_runs;
    int64_t futhark_mc_segmap_parloop_131004_total_iter;
    int64_t *futhark_mc_segmap_task_131002_total_runtime;
    int *futhark_mc_segmap_task_131002_runs;
    int64_t *futhark_mc_segmap_task_131002_iter;
    int64_t futhark_mc_segmap_task_131002_total_time;
    int64_t futhark_mc_segmap_task_131002_total_iter;
    int64_t *futhark_mc_segmap_parloop_131008_total_runtime;
    int *futhark_mc_segmap_parloop_131008_runs;
    int64_t *futhark_mc_segmap_parloop_131008_iter;
    int64_t futhark_mc_segmap_parloop_131008_total_total_runtime;
    int futhark_mc_segmap_parloop_131008_total_runs;
    int64_t futhark_mc_segmap_parloop_131008_total_iter;
    int64_t *futhark_mc_segmap_task_131006_total_runtime;
    int *futhark_mc_segmap_task_131006_runs;
    int64_t *futhark_mc_segmap_task_131006_iter;
    int64_t futhark_mc_segmap_task_131006_total_time;
    int64_t futhark_mc_segmap_task_131006_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131016_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131016_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131016_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131016_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131016_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131016_total_iter;
    int64_t *futhark_mc_segred_task_131013_total_runtime;
    int *futhark_mc_segred_task_131013_runs;
    int64_t *futhark_mc_segred_task_131013_iter;
    int64_t futhark_mc_segred_task_131013_total_time;
    int64_t futhark_mc_segred_task_131013_total_iter;
    int64_t *futhark_mc_segmap_parloop_131011_total_runtime;
    int *futhark_mc_segmap_parloop_131011_runs;
    int64_t *futhark_mc_segmap_parloop_131011_iter;
    int64_t futhark_mc_segmap_parloop_131011_total_total_runtime;
    int futhark_mc_segmap_parloop_131011_total_runs;
    int64_t futhark_mc_segmap_parloop_131011_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131009_total_runtime;
    int *futhark_mc_segmap_nested_task_131009_runs;
    int64_t *futhark_mc_segmap_nested_task_131009_iter;
    int64_t *futhark_mc_segmap_parloop_130996_total_runtime;
    int *futhark_mc_segmap_parloop_130996_runs;
    int64_t *futhark_mc_segmap_parloop_130996_iter;
    int64_t futhark_mc_segmap_parloop_130996_total_total_runtime;
    int futhark_mc_segmap_parloop_130996_total_runs;
    int64_t futhark_mc_segmap_parloop_130996_total_iter;
    int64_t *futhark_mc_segmap_nested_task_130994_total_runtime;
    int *futhark_mc_segmap_nested_task_130994_runs;
    int64_t *futhark_mc_segmap_nested_task_130994_iter;
    int64_t *futhark_mc_segmap_parloop_131020_total_runtime;
    int *futhark_mc_segmap_parloop_131020_runs;
    int64_t *futhark_mc_segmap_parloop_131020_iter;
    int64_t futhark_mc_segmap_parloop_131020_total_total_runtime;
    int futhark_mc_segmap_parloop_131020_total_runs;
    int64_t futhark_mc_segmap_parloop_131020_total_iter;
    int64_t *futhark_mc_segmap_task_131018_total_runtime;
    int *futhark_mc_segmap_task_131018_runs;
    int64_t *futhark_mc_segmap_task_131018_iter;
    int64_t futhark_mc_segmap_task_131018_total_time;
    int64_t futhark_mc_segmap_task_131018_total_iter;
    int64_t *futhark_mc_segmap_parloop_131035_total_runtime;
    int *futhark_mc_segmap_parloop_131035_runs;
    int64_t *futhark_mc_segmap_parloop_131035_iter;
    int64_t futhark_mc_segmap_parloop_131035_total_total_runtime;
    int futhark_mc_segmap_parloop_131035_total_runs;
    int64_t futhark_mc_segmap_parloop_131035_total_iter;
    int64_t *futhark_mc_segmap_task_131033_total_runtime;
    int *futhark_mc_segmap_task_131033_runs;
    int64_t *futhark_mc_segmap_task_131033_iter;
    int64_t futhark_mc_segmap_task_131033_total_time;
    int64_t futhark_mc_segmap_task_131033_total_iter;
    int64_t *futhark_mc_segmap_parloop_131039_total_runtime;
    int *futhark_mc_segmap_parloop_131039_runs;
    int64_t *futhark_mc_segmap_parloop_131039_iter;
    int64_t futhark_mc_segmap_parloop_131039_total_total_runtime;
    int futhark_mc_segmap_parloop_131039_total_runs;
    int64_t futhark_mc_segmap_parloop_131039_total_iter;
    int64_t *futhark_mc_segmap_task_131037_total_runtime;
    int *futhark_mc_segmap_task_131037_runs;
    int64_t *futhark_mc_segmap_task_131037_iter;
    int64_t futhark_mc_segmap_task_131037_total_time;
    int64_t futhark_mc_segmap_task_131037_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131047_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131047_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131047_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131047_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131047_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131047_total_iter;
    int64_t *futhark_mc_segred_task_131044_total_runtime;
    int *futhark_mc_segred_task_131044_runs;
    int64_t *futhark_mc_segred_task_131044_iter;
    int64_t futhark_mc_segred_task_131044_total_time;
    int64_t futhark_mc_segred_task_131044_total_iter;
    int64_t *futhark_mc_segmap_parloop_131042_total_runtime;
    int *futhark_mc_segmap_parloop_131042_runs;
    int64_t *futhark_mc_segmap_parloop_131042_iter;
    int64_t futhark_mc_segmap_parloop_131042_total_total_runtime;
    int futhark_mc_segmap_parloop_131042_total_runs;
    int64_t futhark_mc_segmap_parloop_131042_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131040_total_runtime;
    int *futhark_mc_segmap_nested_task_131040_runs;
    int64_t *futhark_mc_segmap_nested_task_131040_iter;
    int64_t *futhark_mc_segmap_parloop_131027_total_runtime;
    int *futhark_mc_segmap_parloop_131027_runs;
    int64_t *futhark_mc_segmap_parloop_131027_iter;
    int64_t futhark_mc_segmap_parloop_131027_total_total_runtime;
    int futhark_mc_segmap_parloop_131027_total_runs;
    int64_t futhark_mc_segmap_parloop_131027_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131025_total_runtime;
    int *futhark_mc_segmap_nested_task_131025_runs;
    int64_t *futhark_mc_segmap_nested_task_131025_iter;
    int64_t *futhark_mc_segmap_parloop_131051_total_runtime;
    int *futhark_mc_segmap_parloop_131051_runs;
    int64_t *futhark_mc_segmap_parloop_131051_iter;
    int64_t futhark_mc_segmap_parloop_131051_total_total_runtime;
    int futhark_mc_segmap_parloop_131051_total_runs;
    int64_t futhark_mc_segmap_parloop_131051_total_iter;
    int64_t *futhark_mc_segmap_task_131049_total_runtime;
    int *futhark_mc_segmap_task_131049_runs;
    int64_t *futhark_mc_segmap_task_131049_iter;
    int64_t futhark_mc_segmap_task_131049_total_time;
    int64_t futhark_mc_segmap_task_131049_total_iter;
    int64_t *futhark_mc_segmap_parloop_131060_total_runtime;
    int *futhark_mc_segmap_parloop_131060_runs;
    int64_t *futhark_mc_segmap_parloop_131060_iter;
    int64_t futhark_mc_segmap_parloop_131060_total_total_runtime;
    int futhark_mc_segmap_parloop_131060_total_runs;
    int64_t futhark_mc_segmap_parloop_131060_total_iter;
    int64_t *futhark_mc_segmap_task_131058_total_runtime;
    int *futhark_mc_segmap_task_131058_runs;
    int64_t *futhark_mc_segmap_task_131058_iter;
    int64_t futhark_mc_segmap_task_131058_total_time;
    int64_t futhark_mc_segmap_task_131058_total_iter;
    int64_t *futhark_mc_segmap_parloop_131055_total_runtime;
    int *futhark_mc_segmap_parloop_131055_runs;
    int64_t *futhark_mc_segmap_parloop_131055_iter;
    int64_t futhark_mc_segmap_parloop_131055_total_total_runtime;
    int futhark_mc_segmap_parloop_131055_total_runs;
    int64_t futhark_mc_segmap_parloop_131055_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131053_total_runtime;
    int *futhark_mc_segmap_nested_task_131053_runs;
    int64_t *futhark_mc_segmap_nested_task_131053_iter;
    int64_t *futhark_mc_segmap_parloop_131064_total_runtime;
    int *futhark_mc_segmap_parloop_131064_runs;
    int64_t *futhark_mc_segmap_parloop_131064_iter;
    int64_t futhark_mc_segmap_parloop_131064_total_total_runtime;
    int futhark_mc_segmap_parloop_131064_total_runs;
    int64_t futhark_mc_segmap_parloop_131064_total_iter;
    int64_t *futhark_mc_segmap_task_131062_total_runtime;
    int *futhark_mc_segmap_task_131062_runs;
    int64_t *futhark_mc_segmap_task_131062_iter;
    int64_t futhark_mc_segmap_task_131062_total_time;
    int64_t futhark_mc_segmap_task_131062_total_iter;
    int64_t *futhark_mc_segmap_parloop_131073_total_runtime;
    int *futhark_mc_segmap_parloop_131073_runs;
    int64_t *futhark_mc_segmap_parloop_131073_iter;
    int64_t futhark_mc_segmap_parloop_131073_total_total_runtime;
    int futhark_mc_segmap_parloop_131073_total_runs;
    int64_t futhark_mc_segmap_parloop_131073_total_iter;
    int64_t *futhark_mc_segmap_task_131071_total_runtime;
    int *futhark_mc_segmap_task_131071_runs;
    int64_t *futhark_mc_segmap_task_131071_iter;
    int64_t futhark_mc_segmap_task_131071_total_time;
    int64_t futhark_mc_segmap_task_131071_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131081_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131081_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131081_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131081_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131081_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131081_total_iter;
    int64_t *futhark_mc_segred_task_131078_total_runtime;
    int *futhark_mc_segred_task_131078_runs;
    int64_t *futhark_mc_segred_task_131078_iter;
    int64_t futhark_mc_segred_task_131078_total_time;
    int64_t futhark_mc_segred_task_131078_total_iter;
    int64_t *futhark_mc_segmap_parloop_131076_total_runtime;
    int *futhark_mc_segmap_parloop_131076_runs;
    int64_t *futhark_mc_segmap_parloop_131076_iter;
    int64_t futhark_mc_segmap_parloop_131076_total_total_runtime;
    int futhark_mc_segmap_parloop_131076_total_runs;
    int64_t futhark_mc_segmap_parloop_131076_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131074_total_runtime;
    int *futhark_mc_segmap_nested_task_131074_runs;
    int64_t *futhark_mc_segmap_nested_task_131074_iter;
    int64_t *futhark_mc_segmap_parloop_131068_total_runtime;
    int *futhark_mc_segmap_parloop_131068_runs;
    int64_t *futhark_mc_segmap_parloop_131068_iter;
    int64_t futhark_mc_segmap_parloop_131068_total_total_runtime;
    int futhark_mc_segmap_parloop_131068_total_runs;
    int64_t futhark_mc_segmap_parloop_131068_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131066_total_runtime;
    int *futhark_mc_segmap_nested_task_131066_runs;
    int64_t *futhark_mc_segmap_nested_task_131066_iter;
    int64_t *futhark_mc_segmap_parloop_131085_total_runtime;
    int *futhark_mc_segmap_parloop_131085_runs;
    int64_t *futhark_mc_segmap_parloop_131085_iter;
    int64_t futhark_mc_segmap_parloop_131085_total_total_runtime;
    int futhark_mc_segmap_parloop_131085_total_runs;
    int64_t futhark_mc_segmap_parloop_131085_total_iter;
    int64_t *futhark_mc_segmap_task_131083_total_runtime;
    int *futhark_mc_segmap_task_131083_runs;
    int64_t *futhark_mc_segmap_task_131083_iter;
    int64_t futhark_mc_segmap_task_131083_total_time;
    int64_t futhark_mc_segmap_task_131083_total_iter;
    int64_t *futhark_mc_segmap_parloop_131094_total_runtime;
    int *futhark_mc_segmap_parloop_131094_runs;
    int64_t *futhark_mc_segmap_parloop_131094_iter;
    int64_t futhark_mc_segmap_parloop_131094_total_total_runtime;
    int futhark_mc_segmap_parloop_131094_total_runs;
    int64_t futhark_mc_segmap_parloop_131094_total_iter;
    int64_t *futhark_mc_segmap_task_131092_total_runtime;
    int *futhark_mc_segmap_task_131092_runs;
    int64_t *futhark_mc_segmap_task_131092_iter;
    int64_t futhark_mc_segmap_task_131092_total_time;
    int64_t futhark_mc_segmap_task_131092_total_iter;
    int64_t *futhark_mc_segmap_parloop_131089_total_runtime;
    int *futhark_mc_segmap_parloop_131089_runs;
    int64_t *futhark_mc_segmap_parloop_131089_iter;
    int64_t futhark_mc_segmap_parloop_131089_total_total_runtime;
    int futhark_mc_segmap_parloop_131089_total_runs;
    int64_t futhark_mc_segmap_parloop_131089_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131087_total_runtime;
    int *futhark_mc_segmap_nested_task_131087_runs;
    int64_t *futhark_mc_segmap_nested_task_131087_iter;
    int64_t *futhark_mc_segmap_parloop_131098_total_runtime;
    int *futhark_mc_segmap_parloop_131098_runs;
    int64_t *futhark_mc_segmap_parloop_131098_iter;
    int64_t futhark_mc_segmap_parloop_131098_total_total_runtime;
    int futhark_mc_segmap_parloop_131098_total_runs;
    int64_t futhark_mc_segmap_parloop_131098_total_iter;
    int64_t *futhark_mc_segmap_task_131096_total_runtime;
    int *futhark_mc_segmap_task_131096_runs;
    int64_t *futhark_mc_segmap_task_131096_iter;
    int64_t futhark_mc_segmap_task_131096_total_time;
    int64_t futhark_mc_segmap_task_131096_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131112_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131112_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131112_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131112_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131112_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131112_total_iter;
    int64_t *futhark_mc_segred_task_131109_total_runtime;
    int *futhark_mc_segred_task_131109_runs;
    int64_t *futhark_mc_segred_task_131109_iter;
    int64_t futhark_mc_segred_task_131109_total_time;
    int64_t futhark_mc_segred_task_131109_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131117_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131117_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131117_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131117_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131117_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131117_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131119_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131119_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131119_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131119_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131119_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131119_total_iter;
    int64_t *futhark_mc_segscan_task_131114_total_runtime;
    int *futhark_mc_segscan_task_131114_runs;
    int64_t *futhark_mc_segscan_task_131114_iter;
    int64_t futhark_mc_segscan_task_131114_total_time;
    int64_t futhark_mc_segscan_task_131114_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131124_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131124_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131124_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131124_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131124_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131124_total_iter;
    int64_t *futhark_mc_segred_task_131121_total_runtime;
    int *futhark_mc_segred_task_131121_runs;
    int64_t *futhark_mc_segred_task_131121_iter;
    int64_t futhark_mc_segred_task_131121_total_time;
    int64_t futhark_mc_segred_task_131121_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131129_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131129_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131129_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131129_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131129_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131129_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131131_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131131_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131131_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131131_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131131_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131131_total_iter;
    int64_t *futhark_mc_segscan_task_131126_total_runtime;
    int *futhark_mc_segscan_task_131126_runs;
    int64_t *futhark_mc_segscan_task_131126_iter;
    int64_t futhark_mc_segscan_task_131126_total_time;
    int64_t futhark_mc_segscan_task_131126_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131136_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131136_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131136_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131136_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131136_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131136_total_iter;
    int64_t *futhark_mc_segred_task_131133_total_runtime;
    int *futhark_mc_segred_task_131133_runs;
    int64_t *futhark_mc_segred_task_131133_iter;
    int64_t futhark_mc_segred_task_131133_total_time;
    int64_t futhark_mc_segred_task_131133_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131141_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131141_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131141_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131141_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131141_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131141_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131143_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131143_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131143_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131143_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131143_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131143_total_iter;
    int64_t *futhark_mc_segscan_task_131138_total_runtime;
    int *futhark_mc_segscan_task_131138_runs;
    int64_t *futhark_mc_segscan_task_131138_iter;
    int64_t futhark_mc_segscan_task_131138_total_time;
    int64_t futhark_mc_segscan_task_131138_total_iter;
    int64_t *futhark_mc_segmap_parloop_131104_total_runtime;
    int *futhark_mc_segmap_parloop_131104_runs;
    int64_t *futhark_mc_segmap_parloop_131104_iter;
    int64_t futhark_mc_segmap_parloop_131104_total_total_runtime;
    int futhark_mc_segmap_parloop_131104_total_runs;
    int64_t futhark_mc_segmap_parloop_131104_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131102_total_runtime;
    int *futhark_mc_segmap_nested_task_131102_runs;
    int64_t *futhark_mc_segmap_nested_task_131102_iter;
    int64_t *futhark_mc_segmap_parloop_131147_total_runtime;
    int *futhark_mc_segmap_parloop_131147_runs;
    int64_t *futhark_mc_segmap_parloop_131147_iter;
    int64_t futhark_mc_segmap_parloop_131147_total_total_runtime;
    int futhark_mc_segmap_parloop_131147_total_runs;
    int64_t futhark_mc_segmap_parloop_131147_total_iter;
    int64_t *futhark_mc_segmap_task_131145_total_runtime;
    int *futhark_mc_segmap_task_131145_runs;
    int64_t *futhark_mc_segmap_task_131145_iter;
    int64_t futhark_mc_segmap_task_131145_total_time;
    int64_t futhark_mc_segmap_task_131145_total_iter;
    int64_t *futhark_mc_segmap_parloop_131156_total_runtime;
    int *futhark_mc_segmap_parloop_131156_runs;
    int64_t *futhark_mc_segmap_parloop_131156_iter;
    int64_t futhark_mc_segmap_parloop_131156_total_total_runtime;
    int futhark_mc_segmap_parloop_131156_total_runs;
    int64_t futhark_mc_segmap_parloop_131156_total_iter;
    int64_t *futhark_mc_segmap_task_131154_total_runtime;
    int *futhark_mc_segmap_task_131154_runs;
    int64_t *futhark_mc_segmap_task_131154_iter;
    int64_t futhark_mc_segmap_task_131154_total_time;
    int64_t futhark_mc_segmap_task_131154_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131164_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131164_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131164_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131164_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131164_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131164_total_iter;
    int64_t *futhark_mc_segred_task_131161_total_runtime;
    int *futhark_mc_segred_task_131161_runs;
    int64_t *futhark_mc_segred_task_131161_iter;
    int64_t futhark_mc_segred_task_131161_total_time;
    int64_t futhark_mc_segred_task_131161_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131169_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131169_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131169_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131169_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131169_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131169_total_iter;
    int64_t *futhark_mc_segred_task_131166_total_runtime;
    int *futhark_mc_segred_task_131166_runs;
    int64_t *futhark_mc_segred_task_131166_iter;
    int64_t futhark_mc_segred_task_131166_total_time;
    int64_t futhark_mc_segred_task_131166_total_iter;
    int64_t *futhark_mc_segmap_parloop_131159_total_runtime;
    int *futhark_mc_segmap_parloop_131159_runs;
    int64_t *futhark_mc_segmap_parloop_131159_iter;
    int64_t futhark_mc_segmap_parloop_131159_total_total_runtime;
    int futhark_mc_segmap_parloop_131159_total_runs;
    int64_t futhark_mc_segmap_parloop_131159_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131157_total_runtime;
    int *futhark_mc_segmap_nested_task_131157_runs;
    int64_t *futhark_mc_segmap_nested_task_131157_iter;
    int64_t *futhark_mc_segmap_parloop_131151_total_runtime;
    int *futhark_mc_segmap_parloop_131151_runs;
    int64_t *futhark_mc_segmap_parloop_131151_iter;
    int64_t futhark_mc_segmap_parloop_131151_total_total_runtime;
    int futhark_mc_segmap_parloop_131151_total_runs;
    int64_t futhark_mc_segmap_parloop_131151_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131149_total_runtime;
    int *futhark_mc_segmap_nested_task_131149_runs;
    int64_t *futhark_mc_segmap_nested_task_131149_iter;
    int64_t *futhark_mc_segmap_parloop_131173_total_runtime;
    int *futhark_mc_segmap_parloop_131173_runs;
    int64_t *futhark_mc_segmap_parloop_131173_iter;
    int64_t futhark_mc_segmap_parloop_131173_total_total_runtime;
    int futhark_mc_segmap_parloop_131173_total_runs;
    int64_t futhark_mc_segmap_parloop_131173_total_iter;
    int64_t *futhark_mc_segmap_task_131171_total_runtime;
    int *futhark_mc_segmap_task_131171_runs;
    int64_t *futhark_mc_segmap_task_131171_iter;
    int64_t futhark_mc_segmap_task_131171_total_time;
    int64_t futhark_mc_segmap_task_131171_total_iter;
    int64_t *futhark_mc_segmap_parloop_131184_total_runtime;
    int *futhark_mc_segmap_parloop_131184_runs;
    int64_t *futhark_mc_segmap_parloop_131184_iter;
    int64_t futhark_mc_segmap_parloop_131184_total_total_runtime;
    int futhark_mc_segmap_parloop_131184_total_runs;
    int64_t futhark_mc_segmap_parloop_131184_total_iter;
    int64_t *futhark_mc_segmap_task_131182_total_runtime;
    int *futhark_mc_segmap_task_131182_runs;
    int64_t *futhark_mc_segmap_task_131182_iter;
    int64_t futhark_mc_segmap_task_131182_total_time;
    int64_t futhark_mc_segmap_task_131182_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131194_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131194_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131194_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131194_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131194_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131194_total_iter;
    int64_t *futhark_mc_segred_task_131189_total_runtime;
    int *futhark_mc_segred_task_131189_runs;
    int64_t *futhark_mc_segred_task_131189_iter;
    int64_t futhark_mc_segred_task_131189_total_time;
    int64_t futhark_mc_segred_task_131189_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131200_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131200_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131200_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131200_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131200_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131200_total_iter;
    int64_t *futhark_mc_segred_task_131196_total_runtime;
    int *futhark_mc_segred_task_131196_runs;
    int64_t *futhark_mc_segred_task_131196_iter;
    int64_t futhark_mc_segred_task_131196_total_time;
    int64_t futhark_mc_segred_task_131196_total_iter;
    int64_t *futhark_mc_segmap_parloop_131187_total_runtime;
    int *futhark_mc_segmap_parloop_131187_runs;
    int64_t *futhark_mc_segmap_parloop_131187_iter;
    int64_t futhark_mc_segmap_parloop_131187_total_total_runtime;
    int futhark_mc_segmap_parloop_131187_total_runs;
    int64_t futhark_mc_segmap_parloop_131187_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131185_total_runtime;
    int *futhark_mc_segmap_nested_task_131185_runs;
    int64_t *futhark_mc_segmap_nested_task_131185_iter;
    int64_t *futhark_mc_segmap_parloop_131178_total_runtime;
    int *futhark_mc_segmap_parloop_131178_runs;
    int64_t *futhark_mc_segmap_parloop_131178_iter;
    int64_t futhark_mc_segmap_parloop_131178_total_total_runtime;
    int futhark_mc_segmap_parloop_131178_total_runs;
    int64_t futhark_mc_segmap_parloop_131178_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131176_total_runtime;
    int *futhark_mc_segmap_nested_task_131176_runs;
    int64_t *futhark_mc_segmap_nested_task_131176_iter;
    int64_t *futhark_mc_segmap_parloop_131204_total_runtime;
    int *futhark_mc_segmap_parloop_131204_runs;
    int64_t *futhark_mc_segmap_parloop_131204_iter;
    int64_t futhark_mc_segmap_parloop_131204_total_total_runtime;
    int futhark_mc_segmap_parloop_131204_total_runs;
    int64_t futhark_mc_segmap_parloop_131204_total_iter;
    int64_t *futhark_mc_segmap_task_131202_total_runtime;
    int *futhark_mc_segmap_task_131202_runs;
    int64_t *futhark_mc_segmap_task_131202_iter;
    int64_t futhark_mc_segmap_task_131202_total_time;
    int64_t futhark_mc_segmap_task_131202_total_iter;
    int64_t *futhark_mc_segmap_parloop_131215_total_runtime;
    int *futhark_mc_segmap_parloop_131215_runs;
    int64_t *futhark_mc_segmap_parloop_131215_iter;
    int64_t futhark_mc_segmap_parloop_131215_total_total_runtime;
    int futhark_mc_segmap_parloop_131215_total_runs;
    int64_t futhark_mc_segmap_parloop_131215_total_iter;
    int64_t *futhark_mc_segmap_task_131213_total_runtime;
    int *futhark_mc_segmap_task_131213_runs;
    int64_t *futhark_mc_segmap_task_131213_iter;
    int64_t futhark_mc_segmap_task_131213_total_time;
    int64_t futhark_mc_segmap_task_131213_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131227_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131227_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131227_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131227_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131227_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131227_total_iter;
    int64_t *futhark_mc_segred_task_131220_total_runtime;
    int *futhark_mc_segred_task_131220_runs;
    int64_t *futhark_mc_segred_task_131220_iter;
    int64_t futhark_mc_segred_task_131220_total_time;
    int64_t futhark_mc_segred_task_131220_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131233_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131233_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131233_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131233_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131233_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131233_total_iter;
    int64_t *futhark_mc_segred_task_131229_total_runtime;
    int *futhark_mc_segred_task_131229_runs;
    int64_t *futhark_mc_segred_task_131229_iter;
    int64_t futhark_mc_segred_task_131229_total_time;
    int64_t futhark_mc_segred_task_131229_total_iter;
    int64_t *futhark_mc_segmap_parloop_131218_total_runtime;
    int *futhark_mc_segmap_parloop_131218_runs;
    int64_t *futhark_mc_segmap_parloop_131218_iter;
    int64_t futhark_mc_segmap_parloop_131218_total_total_runtime;
    int futhark_mc_segmap_parloop_131218_total_runs;
    int64_t futhark_mc_segmap_parloop_131218_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131216_total_runtime;
    int *futhark_mc_segmap_nested_task_131216_runs;
    int64_t *futhark_mc_segmap_nested_task_131216_iter;
    int64_t *futhark_mc_segmap_parloop_131209_total_runtime;
    int *futhark_mc_segmap_parloop_131209_runs;
    int64_t *futhark_mc_segmap_parloop_131209_iter;
    int64_t futhark_mc_segmap_parloop_131209_total_total_runtime;
    int futhark_mc_segmap_parloop_131209_total_runs;
    int64_t futhark_mc_segmap_parloop_131209_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131207_total_runtime;
    int *futhark_mc_segmap_nested_task_131207_runs;
    int64_t *futhark_mc_segmap_nested_task_131207_iter;
    int64_t *futhark_mc_segmap_parloop_131237_total_runtime;
    int *futhark_mc_segmap_parloop_131237_runs;
    int64_t *futhark_mc_segmap_parloop_131237_iter;
    int64_t futhark_mc_segmap_parloop_131237_total_total_runtime;
    int futhark_mc_segmap_parloop_131237_total_runs;
    int64_t futhark_mc_segmap_parloop_131237_total_iter;
    int64_t *futhark_mc_segmap_task_131235_total_runtime;
    int *futhark_mc_segmap_task_131235_runs;
    int64_t *futhark_mc_segmap_task_131235_iter;
    int64_t futhark_mc_segmap_task_131235_total_time;
    int64_t futhark_mc_segmap_task_131235_total_iter;
    int64_t *futhark_mc_segmap_parloop_131247_total_runtime;
    int *futhark_mc_segmap_parloop_131247_runs;
    int64_t *futhark_mc_segmap_parloop_131247_iter;
    int64_t futhark_mc_segmap_parloop_131247_total_total_runtime;
    int futhark_mc_segmap_parloop_131247_total_runs;
    int64_t futhark_mc_segmap_parloop_131247_total_iter;
    int64_t *futhark_mc_segmap_task_131245_total_runtime;
    int *futhark_mc_segmap_task_131245_runs;
    int64_t *futhark_mc_segmap_task_131245_iter;
    int64_t futhark_mc_segmap_task_131245_total_time;
    int64_t futhark_mc_segmap_task_131245_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131257_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131257_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131257_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131257_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131257_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131257_total_iter;
    int64_t *futhark_mc_segred_task_131254_total_runtime;
    int *futhark_mc_segred_task_131254_runs;
    int64_t *futhark_mc_segred_task_131254_iter;
    int64_t futhark_mc_segred_task_131254_total_time;
    int64_t futhark_mc_segred_task_131254_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131262_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131262_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131262_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131262_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131262_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131262_total_iter;
    int64_t *futhark_mc_segred_task_131259_total_runtime;
    int *futhark_mc_segred_task_131259_runs;
    int64_t *futhark_mc_segred_task_131259_iter;
    int64_t futhark_mc_segred_task_131259_total_time;
    int64_t futhark_mc_segred_task_131259_total_iter;
    int64_t *futhark_mc_segmap_parloop_131251_total_runtime;
    int *futhark_mc_segmap_parloop_131251_runs;
    int64_t *futhark_mc_segmap_parloop_131251_iter;
    int64_t futhark_mc_segmap_parloop_131251_total_total_runtime;
    int futhark_mc_segmap_parloop_131251_total_runs;
    int64_t futhark_mc_segmap_parloop_131251_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131249_total_runtime;
    int *futhark_mc_segmap_nested_task_131249_runs;
    int64_t *futhark_mc_segmap_nested_task_131249_iter;
    int64_t *futhark_mc_segmap_parloop_131242_total_runtime;
    int *futhark_mc_segmap_parloop_131242_runs;
    int64_t *futhark_mc_segmap_parloop_131242_iter;
    int64_t futhark_mc_segmap_parloop_131242_total_total_runtime;
    int futhark_mc_segmap_parloop_131242_total_runs;
    int64_t futhark_mc_segmap_parloop_131242_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131240_total_runtime;
    int *futhark_mc_segmap_nested_task_131240_runs;
    int64_t *futhark_mc_segmap_nested_task_131240_iter;
    int64_t *futhark_mc_segmap_parloop_131266_total_runtime;
    int *futhark_mc_segmap_parloop_131266_runs;
    int64_t *futhark_mc_segmap_parloop_131266_iter;
    int64_t futhark_mc_segmap_parloop_131266_total_total_runtime;
    int futhark_mc_segmap_parloop_131266_total_runs;
    int64_t futhark_mc_segmap_parloop_131266_total_iter;
    int64_t *futhark_mc_segmap_task_131264_total_runtime;
    int *futhark_mc_segmap_task_131264_runs;
    int64_t *futhark_mc_segmap_task_131264_iter;
    int64_t futhark_mc_segmap_task_131264_total_time;
    int64_t futhark_mc_segmap_task_131264_total_iter;
    int64_t *futhark_mc_segmap_parloop_131279_total_runtime;
    int *futhark_mc_segmap_parloop_131279_runs;
    int64_t *futhark_mc_segmap_parloop_131279_iter;
    int64_t futhark_mc_segmap_parloop_131279_total_total_runtime;
    int futhark_mc_segmap_parloop_131279_total_runs;
    int64_t futhark_mc_segmap_parloop_131279_total_iter;
    int64_t *futhark_mc_segmap_task_131277_total_runtime;
    int *futhark_mc_segmap_task_131277_runs;
    int64_t *futhark_mc_segmap_task_131277_iter;
    int64_t futhark_mc_segmap_task_131277_total_time;
    int64_t futhark_mc_segmap_task_131277_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131293_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131293_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131293_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131293_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131293_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131293_total_iter;
    int64_t *futhark_mc_segred_task_131288_total_runtime;
    int *futhark_mc_segred_task_131288_runs;
    int64_t *futhark_mc_segred_task_131288_iter;
    int64_t futhark_mc_segred_task_131288_total_time;
    int64_t futhark_mc_segred_task_131288_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131299_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131299_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131299_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131299_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131299_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131299_total_iter;
    int64_t *futhark_mc_segred_task_131295_total_runtime;
    int *futhark_mc_segred_task_131295_runs;
    int64_t *futhark_mc_segred_task_131295_iter;
    int64_t futhark_mc_segred_task_131295_total_time;
    int64_t futhark_mc_segred_task_131295_total_iter;
    int64_t *futhark_mc_segmap_parloop_131284_total_runtime;
    int *futhark_mc_segmap_parloop_131284_runs;
    int64_t *futhark_mc_segmap_parloop_131284_iter;
    int64_t futhark_mc_segmap_parloop_131284_total_total_runtime;
    int futhark_mc_segmap_parloop_131284_total_runs;
    int64_t futhark_mc_segmap_parloop_131284_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131282_total_runtime;
    int *futhark_mc_segmap_nested_task_131282_runs;
    int64_t *futhark_mc_segmap_nested_task_131282_iter;
    int64_t *futhark_mc_segmap_parloop_131273_total_runtime;
    int *futhark_mc_segmap_parloop_131273_runs;
    int64_t *futhark_mc_segmap_parloop_131273_iter;
    int64_t futhark_mc_segmap_parloop_131273_total_total_runtime;
    int futhark_mc_segmap_parloop_131273_total_runs;
    int64_t futhark_mc_segmap_parloop_131273_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131271_total_runtime;
    int *futhark_mc_segmap_nested_task_131271_runs;
    int64_t *futhark_mc_segmap_nested_task_131271_iter;
    int64_t *futhark_mc_segmap_parloop_131303_total_runtime;
    int *futhark_mc_segmap_parloop_131303_runs;
    int64_t *futhark_mc_segmap_parloop_131303_iter;
    int64_t futhark_mc_segmap_parloop_131303_total_total_runtime;
    int futhark_mc_segmap_parloop_131303_total_runs;
    int64_t futhark_mc_segmap_parloop_131303_total_iter;
    int64_t *futhark_mc_segmap_task_131301_total_runtime;
    int *futhark_mc_segmap_task_131301_runs;
    int64_t *futhark_mc_segmap_task_131301_iter;
    int64_t futhark_mc_segmap_task_131301_total_time;
    int64_t futhark_mc_segmap_task_131301_total_iter;
    int64_t *futhark_mc_segmap_parloop_131318_total_runtime;
    int *futhark_mc_segmap_parloop_131318_runs;
    int64_t *futhark_mc_segmap_parloop_131318_iter;
    int64_t futhark_mc_segmap_parloop_131318_total_total_runtime;
    int futhark_mc_segmap_parloop_131318_total_runs;
    int64_t futhark_mc_segmap_parloop_131318_total_iter;
    int64_t *futhark_mc_segmap_task_131316_total_runtime;
    int *futhark_mc_segmap_task_131316_runs;
    int64_t *futhark_mc_segmap_task_131316_iter;
    int64_t futhark_mc_segmap_task_131316_total_time;
    int64_t futhark_mc_segmap_task_131316_total_iter;
    int64_t *futhark_mc_segmap_parloop_131333_total_runtime;
    int *futhark_mc_segmap_parloop_131333_runs;
    int64_t *futhark_mc_segmap_parloop_131333_iter;
    int64_t futhark_mc_segmap_parloop_131333_total_total_runtime;
    int futhark_mc_segmap_parloop_131333_total_runs;
    int64_t futhark_mc_segmap_parloop_131333_total_iter;
    int64_t *futhark_mc_segmap_task_131331_total_runtime;
    int *futhark_mc_segmap_task_131331_runs;
    int64_t *futhark_mc_segmap_task_131331_iter;
    int64_t futhark_mc_segmap_task_131331_total_time;
    int64_t futhark_mc_segmap_task_131331_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131342_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131342_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131342_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131342_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131342_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131342_total_iter;
    int64_t *futhark_mc_segred_task_131335_total_runtime;
    int *futhark_mc_segred_task_131335_runs;
    int64_t *futhark_mc_segred_task_131335_iter;
    int64_t futhark_mc_segred_task_131335_total_time;
    int64_t futhark_mc_segred_task_131335_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131348_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131348_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131348_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131348_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131348_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131348_total_iter;
    int64_t *futhark_mc_segred_task_131344_total_runtime;
    int *futhark_mc_segred_task_131344_runs;
    int64_t *futhark_mc_segred_task_131344_iter;
    int64_t futhark_mc_segred_task_131344_total_time;
    int64_t futhark_mc_segred_task_131344_total_iter;
    int64_t *futhark_mc_segmap_parloop_131325_total_runtime;
    int *futhark_mc_segmap_parloop_131325_runs;
    int64_t *futhark_mc_segmap_parloop_131325_iter;
    int64_t futhark_mc_segmap_parloop_131325_total_total_runtime;
    int futhark_mc_segmap_parloop_131325_total_runs;
    int64_t futhark_mc_segmap_parloop_131325_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131323_total_runtime;
    int *futhark_mc_segmap_nested_task_131323_runs;
    int64_t *futhark_mc_segmap_nested_task_131323_iter;
    int64_t *futhark_mc_segmap_parloop_131312_total_runtime;
    int *futhark_mc_segmap_parloop_131312_runs;
    int64_t *futhark_mc_segmap_parloop_131312_iter;
    int64_t futhark_mc_segmap_parloop_131312_total_total_runtime;
    int futhark_mc_segmap_parloop_131312_total_runs;
    int64_t futhark_mc_segmap_parloop_131312_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131310_total_runtime;
    int *futhark_mc_segmap_nested_task_131310_runs;
    int64_t *futhark_mc_segmap_nested_task_131310_iter;
    int64_t *futhark_mc_segmap_parloop_131352_total_runtime;
    int *futhark_mc_segmap_parloop_131352_runs;
    int64_t *futhark_mc_segmap_parloop_131352_iter;
    int64_t futhark_mc_segmap_parloop_131352_total_total_runtime;
    int futhark_mc_segmap_parloop_131352_total_runs;
    int64_t futhark_mc_segmap_parloop_131352_total_iter;
    int64_t *futhark_mc_segmap_task_131350_total_runtime;
    int *futhark_mc_segmap_task_131350_runs;
    int64_t *futhark_mc_segmap_task_131350_iter;
    int64_t futhark_mc_segmap_task_131350_total_time;
    int64_t futhark_mc_segmap_task_131350_total_iter;
    int64_t *futhark_mc_segmap_parloop_131361_total_runtime;
    int *futhark_mc_segmap_parloop_131361_runs;
    int64_t *futhark_mc_segmap_parloop_131361_iter;
    int64_t futhark_mc_segmap_parloop_131361_total_total_runtime;
    int futhark_mc_segmap_parloop_131361_total_runs;
    int64_t futhark_mc_segmap_parloop_131361_total_iter;
    int64_t *futhark_mc_segmap_task_131359_total_runtime;
    int *futhark_mc_segmap_task_131359_runs;
    int64_t *futhark_mc_segmap_task_131359_iter;
    int64_t futhark_mc_segmap_task_131359_total_time;
    int64_t futhark_mc_segmap_task_131359_total_iter;
    int64_t *futhark_mc_segmap_parloop_131356_total_runtime;
    int *futhark_mc_segmap_parloop_131356_runs;
    int64_t *futhark_mc_segmap_parloop_131356_iter;
    int64_t futhark_mc_segmap_parloop_131356_total_total_runtime;
    int futhark_mc_segmap_parloop_131356_total_runs;
    int64_t futhark_mc_segmap_parloop_131356_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131354_total_runtime;
    int *futhark_mc_segmap_nested_task_131354_runs;
    int64_t *futhark_mc_segmap_nested_task_131354_iter;
    int64_t *futhark_mc_segmap_parloop_131365_total_runtime;
    int *futhark_mc_segmap_parloop_131365_runs;
    int64_t *futhark_mc_segmap_parloop_131365_iter;
    int64_t futhark_mc_segmap_parloop_131365_total_total_runtime;
    int futhark_mc_segmap_parloop_131365_total_runs;
    int64_t futhark_mc_segmap_parloop_131365_total_iter;
    int64_t *futhark_mc_segmap_task_131363_total_runtime;
    int *futhark_mc_segmap_task_131363_runs;
    int64_t *futhark_mc_segmap_task_131363_iter;
    int64_t futhark_mc_segmap_task_131363_total_time;
    int64_t futhark_mc_segmap_task_131363_total_iter;
    int64_t *futhark_mc_segmap_parloop_131380_total_runtime;
    int *futhark_mc_segmap_parloop_131380_runs;
    int64_t *futhark_mc_segmap_parloop_131380_iter;
    int64_t futhark_mc_segmap_parloop_131380_total_total_runtime;
    int futhark_mc_segmap_parloop_131380_total_runs;
    int64_t futhark_mc_segmap_parloop_131380_total_iter;
    int64_t *futhark_mc_segmap_task_131378_total_runtime;
    int *futhark_mc_segmap_task_131378_runs;
    int64_t *futhark_mc_segmap_task_131378_iter;
    int64_t futhark_mc_segmap_task_131378_total_time;
    int64_t futhark_mc_segmap_task_131378_total_iter;
    int64_t *futhark_mc_segmap_parloop_131384_total_runtime;
    int *futhark_mc_segmap_parloop_131384_runs;
    int64_t *futhark_mc_segmap_parloop_131384_iter;
    int64_t futhark_mc_segmap_parloop_131384_total_total_runtime;
    int futhark_mc_segmap_parloop_131384_total_runs;
    int64_t futhark_mc_segmap_parloop_131384_total_iter;
    int64_t *futhark_mc_segmap_task_131382_total_runtime;
    int *futhark_mc_segmap_task_131382_runs;
    int64_t *futhark_mc_segmap_task_131382_iter;
    int64_t futhark_mc_segmap_task_131382_total_time;
    int64_t futhark_mc_segmap_task_131382_total_iter;
    int64_t *futhark_mc_segmap_parloop_131372_total_runtime;
    int *futhark_mc_segmap_parloop_131372_runs;
    int64_t *futhark_mc_segmap_parloop_131372_iter;
    int64_t futhark_mc_segmap_parloop_131372_total_total_runtime;
    int futhark_mc_segmap_parloop_131372_total_runs;
    int64_t futhark_mc_segmap_parloop_131372_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131370_total_runtime;
    int *futhark_mc_segmap_nested_task_131370_runs;
    int64_t *futhark_mc_segmap_nested_task_131370_iter;
    int64_t *futhark_mc_segmap_parloop_131388_total_runtime;
    int *futhark_mc_segmap_parloop_131388_runs;
    int64_t *futhark_mc_segmap_parloop_131388_iter;
    int64_t futhark_mc_segmap_parloop_131388_total_total_runtime;
    int futhark_mc_segmap_parloop_131388_total_runs;
    int64_t futhark_mc_segmap_parloop_131388_total_iter;
    int64_t *futhark_mc_segmap_task_131386_total_runtime;
    int *futhark_mc_segmap_task_131386_runs;
    int64_t *futhark_mc_segmap_task_131386_iter;
    int64_t futhark_mc_segmap_task_131386_total_time;
    int64_t futhark_mc_segmap_task_131386_total_iter;
    int64_t *futhark_mc_segmap_parloop_131397_total_runtime;
    int *futhark_mc_segmap_parloop_131397_runs;
    int64_t *futhark_mc_segmap_parloop_131397_iter;
    int64_t futhark_mc_segmap_parloop_131397_total_total_runtime;
    int futhark_mc_segmap_parloop_131397_total_runs;
    int64_t futhark_mc_segmap_parloop_131397_total_iter;
    int64_t *futhark_mc_segmap_task_131395_total_runtime;
    int *futhark_mc_segmap_task_131395_runs;
    int64_t *futhark_mc_segmap_task_131395_iter;
    int64_t futhark_mc_segmap_task_131395_total_time;
    int64_t futhark_mc_segmap_task_131395_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131405_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131405_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131405_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131405_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131405_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131405_total_iter;
    int64_t *futhark_mc_segred_task_131402_total_runtime;
    int *futhark_mc_segred_task_131402_runs;
    int64_t *futhark_mc_segred_task_131402_iter;
    int64_t futhark_mc_segred_task_131402_total_time;
    int64_t futhark_mc_segred_task_131402_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131410_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131410_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131410_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131410_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131410_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131410_total_iter;
    int64_t *futhark_mc_segred_task_131407_total_runtime;
    int *futhark_mc_segred_task_131407_runs;
    int64_t *futhark_mc_segred_task_131407_iter;
    int64_t futhark_mc_segred_task_131407_total_time;
    int64_t futhark_mc_segred_task_131407_total_iter;
    int64_t *futhark_mc_segmap_parloop_131400_total_runtime;
    int *futhark_mc_segmap_parloop_131400_runs;
    int64_t *futhark_mc_segmap_parloop_131400_iter;
    int64_t futhark_mc_segmap_parloop_131400_total_total_runtime;
    int futhark_mc_segmap_parloop_131400_total_runs;
    int64_t futhark_mc_segmap_parloop_131400_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131398_total_runtime;
    int *futhark_mc_segmap_nested_task_131398_runs;
    int64_t *futhark_mc_segmap_nested_task_131398_iter;
    int64_t *futhark_mc_segmap_parloop_131392_total_runtime;
    int *futhark_mc_segmap_parloop_131392_runs;
    int64_t *futhark_mc_segmap_parloop_131392_iter;
    int64_t futhark_mc_segmap_parloop_131392_total_total_runtime;
    int futhark_mc_segmap_parloop_131392_total_runs;
    int64_t futhark_mc_segmap_parloop_131392_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131390_total_runtime;
    int *futhark_mc_segmap_nested_task_131390_runs;
    int64_t *futhark_mc_segmap_nested_task_131390_iter;
    int64_t *futhark_mc_segmap_parloop_131414_total_runtime;
    int *futhark_mc_segmap_parloop_131414_runs;
    int64_t *futhark_mc_segmap_parloop_131414_iter;
    int64_t futhark_mc_segmap_parloop_131414_total_total_runtime;
    int futhark_mc_segmap_parloop_131414_total_runs;
    int64_t futhark_mc_segmap_parloop_131414_total_iter;
    int64_t *futhark_mc_segmap_task_131412_total_runtime;
    int *futhark_mc_segmap_task_131412_runs;
    int64_t *futhark_mc_segmap_task_131412_iter;
    int64_t futhark_mc_segmap_task_131412_total_time;
    int64_t futhark_mc_segmap_task_131412_total_iter;
    int64_t *futhark_mc_segmap_parloop_131425_total_runtime;
    int *futhark_mc_segmap_parloop_131425_runs;
    int64_t *futhark_mc_segmap_parloop_131425_iter;
    int64_t futhark_mc_segmap_parloop_131425_total_total_runtime;
    int futhark_mc_segmap_parloop_131425_total_runs;
    int64_t futhark_mc_segmap_parloop_131425_total_iter;
    int64_t *futhark_mc_segmap_task_131423_total_runtime;
    int *futhark_mc_segmap_task_131423_runs;
    int64_t *futhark_mc_segmap_task_131423_iter;
    int64_t futhark_mc_segmap_task_131423_total_time;
    int64_t futhark_mc_segmap_task_131423_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131435_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131435_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131435_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131435_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131435_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131435_total_iter;
    int64_t *futhark_mc_segred_task_131430_total_runtime;
    int *futhark_mc_segred_task_131430_runs;
    int64_t *futhark_mc_segred_task_131430_iter;
    int64_t futhark_mc_segred_task_131430_total_time;
    int64_t futhark_mc_segred_task_131430_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131441_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131441_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131441_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131441_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131441_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131441_total_iter;
    int64_t *futhark_mc_segred_task_131437_total_runtime;
    int *futhark_mc_segred_task_131437_runs;
    int64_t *futhark_mc_segred_task_131437_iter;
    int64_t futhark_mc_segred_task_131437_total_time;
    int64_t futhark_mc_segred_task_131437_total_iter;
    int64_t *futhark_mc_segmap_parloop_131428_total_runtime;
    int *futhark_mc_segmap_parloop_131428_runs;
    int64_t *futhark_mc_segmap_parloop_131428_iter;
    int64_t futhark_mc_segmap_parloop_131428_total_total_runtime;
    int futhark_mc_segmap_parloop_131428_total_runs;
    int64_t futhark_mc_segmap_parloop_131428_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131426_total_runtime;
    int *futhark_mc_segmap_nested_task_131426_runs;
    int64_t *futhark_mc_segmap_nested_task_131426_iter;
    int64_t *futhark_mc_segmap_parloop_131419_total_runtime;
    int *futhark_mc_segmap_parloop_131419_runs;
    int64_t *futhark_mc_segmap_parloop_131419_iter;
    int64_t futhark_mc_segmap_parloop_131419_total_total_runtime;
    int futhark_mc_segmap_parloop_131419_total_runs;
    int64_t futhark_mc_segmap_parloop_131419_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131417_total_runtime;
    int *futhark_mc_segmap_nested_task_131417_runs;
    int64_t *futhark_mc_segmap_nested_task_131417_iter;
    int64_t *futhark_mc_segmap_parloop_131445_total_runtime;
    int *futhark_mc_segmap_parloop_131445_runs;
    int64_t *futhark_mc_segmap_parloop_131445_iter;
    int64_t futhark_mc_segmap_parloop_131445_total_total_runtime;
    int futhark_mc_segmap_parloop_131445_total_runs;
    int64_t futhark_mc_segmap_parloop_131445_total_iter;
    int64_t *futhark_mc_segmap_task_131443_total_runtime;
    int *futhark_mc_segmap_task_131443_runs;
    int64_t *futhark_mc_segmap_task_131443_iter;
    int64_t futhark_mc_segmap_task_131443_total_time;
    int64_t futhark_mc_segmap_task_131443_total_iter;
    int64_t *futhark_mc_segmap_parloop_131456_total_runtime;
    int *futhark_mc_segmap_parloop_131456_runs;
    int64_t *futhark_mc_segmap_parloop_131456_iter;
    int64_t futhark_mc_segmap_parloop_131456_total_total_runtime;
    int futhark_mc_segmap_parloop_131456_total_runs;
    int64_t futhark_mc_segmap_parloop_131456_total_iter;
    int64_t *futhark_mc_segmap_task_131454_total_runtime;
    int *futhark_mc_segmap_task_131454_runs;
    int64_t *futhark_mc_segmap_task_131454_iter;
    int64_t futhark_mc_segmap_task_131454_total_time;
    int64_t futhark_mc_segmap_task_131454_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131468_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131468_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131468_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131468_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131468_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131468_total_iter;
    int64_t *futhark_mc_segred_task_131461_total_runtime;
    int *futhark_mc_segred_task_131461_runs;
    int64_t *futhark_mc_segred_task_131461_iter;
    int64_t futhark_mc_segred_task_131461_total_time;
    int64_t futhark_mc_segred_task_131461_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131474_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131474_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131474_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131474_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131474_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131474_total_iter;
    int64_t *futhark_mc_segred_task_131470_total_runtime;
    int *futhark_mc_segred_task_131470_runs;
    int64_t *futhark_mc_segred_task_131470_iter;
    int64_t futhark_mc_segred_task_131470_total_time;
    int64_t futhark_mc_segred_task_131470_total_iter;
    int64_t *futhark_mc_segmap_parloop_131459_total_runtime;
    int *futhark_mc_segmap_parloop_131459_runs;
    int64_t *futhark_mc_segmap_parloop_131459_iter;
    int64_t futhark_mc_segmap_parloop_131459_total_total_runtime;
    int futhark_mc_segmap_parloop_131459_total_runs;
    int64_t futhark_mc_segmap_parloop_131459_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131457_total_runtime;
    int *futhark_mc_segmap_nested_task_131457_runs;
    int64_t *futhark_mc_segmap_nested_task_131457_iter;
    int64_t *futhark_mc_segmap_parloop_131450_total_runtime;
    int *futhark_mc_segmap_parloop_131450_runs;
    int64_t *futhark_mc_segmap_parloop_131450_iter;
    int64_t futhark_mc_segmap_parloop_131450_total_total_runtime;
    int futhark_mc_segmap_parloop_131450_total_runs;
    int64_t futhark_mc_segmap_parloop_131450_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131448_total_runtime;
    int *futhark_mc_segmap_nested_task_131448_runs;
    int64_t *futhark_mc_segmap_nested_task_131448_iter;
    int64_t *futhark_mc_segmap_parloop_131478_total_runtime;
    int *futhark_mc_segmap_parloop_131478_runs;
    int64_t *futhark_mc_segmap_parloop_131478_iter;
    int64_t futhark_mc_segmap_parloop_131478_total_total_runtime;
    int futhark_mc_segmap_parloop_131478_total_runs;
    int64_t futhark_mc_segmap_parloop_131478_total_iter;
    int64_t *futhark_mc_segmap_task_131476_total_runtime;
    int *futhark_mc_segmap_task_131476_runs;
    int64_t *futhark_mc_segmap_task_131476_iter;
    int64_t futhark_mc_segmap_task_131476_total_time;
    int64_t futhark_mc_segmap_task_131476_total_iter;
    int64_t *futhark_mc_segmap_parloop_131488_total_runtime;
    int *futhark_mc_segmap_parloop_131488_runs;
    int64_t *futhark_mc_segmap_parloop_131488_iter;
    int64_t futhark_mc_segmap_parloop_131488_total_total_runtime;
    int futhark_mc_segmap_parloop_131488_total_runs;
    int64_t futhark_mc_segmap_parloop_131488_total_iter;
    int64_t *futhark_mc_segmap_task_131486_total_runtime;
    int *futhark_mc_segmap_task_131486_runs;
    int64_t *futhark_mc_segmap_task_131486_iter;
    int64_t futhark_mc_segmap_task_131486_total_time;
    int64_t futhark_mc_segmap_task_131486_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131498_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131498_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131498_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131498_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131498_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131498_total_iter;
    int64_t *futhark_mc_segred_task_131495_total_runtime;
    int *futhark_mc_segred_task_131495_runs;
    int64_t *futhark_mc_segred_task_131495_iter;
    int64_t futhark_mc_segred_task_131495_total_time;
    int64_t futhark_mc_segred_task_131495_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131503_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131503_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131503_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131503_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131503_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131503_total_iter;
    int64_t *futhark_mc_segred_task_131500_total_runtime;
    int *futhark_mc_segred_task_131500_runs;
    int64_t *futhark_mc_segred_task_131500_iter;
    int64_t futhark_mc_segred_task_131500_total_time;
    int64_t futhark_mc_segred_task_131500_total_iter;
    int64_t *futhark_mc_segmap_parloop_131492_total_runtime;
    int *futhark_mc_segmap_parloop_131492_runs;
    int64_t *futhark_mc_segmap_parloop_131492_iter;
    int64_t futhark_mc_segmap_parloop_131492_total_total_runtime;
    int futhark_mc_segmap_parloop_131492_total_runs;
    int64_t futhark_mc_segmap_parloop_131492_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131490_total_runtime;
    int *futhark_mc_segmap_nested_task_131490_runs;
    int64_t *futhark_mc_segmap_nested_task_131490_iter;
    int64_t *futhark_mc_segmap_parloop_131483_total_runtime;
    int *futhark_mc_segmap_parloop_131483_runs;
    int64_t *futhark_mc_segmap_parloop_131483_iter;
    int64_t futhark_mc_segmap_parloop_131483_total_total_runtime;
    int futhark_mc_segmap_parloop_131483_total_runs;
    int64_t futhark_mc_segmap_parloop_131483_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131481_total_runtime;
    int *futhark_mc_segmap_nested_task_131481_runs;
    int64_t *futhark_mc_segmap_nested_task_131481_iter;
    int64_t *futhark_mc_segmap_parloop_131507_total_runtime;
    int *futhark_mc_segmap_parloop_131507_runs;
    int64_t *futhark_mc_segmap_parloop_131507_iter;
    int64_t futhark_mc_segmap_parloop_131507_total_total_runtime;
    int futhark_mc_segmap_parloop_131507_total_runs;
    int64_t futhark_mc_segmap_parloop_131507_total_iter;
    int64_t *futhark_mc_segmap_task_131505_total_runtime;
    int *futhark_mc_segmap_task_131505_runs;
    int64_t *futhark_mc_segmap_task_131505_iter;
    int64_t futhark_mc_segmap_task_131505_total_time;
    int64_t futhark_mc_segmap_task_131505_total_iter;
    int64_t *futhark_mc_segmap_parloop_131520_total_runtime;
    int *futhark_mc_segmap_parloop_131520_runs;
    int64_t *futhark_mc_segmap_parloop_131520_iter;
    int64_t futhark_mc_segmap_parloop_131520_total_total_runtime;
    int futhark_mc_segmap_parloop_131520_total_runs;
    int64_t futhark_mc_segmap_parloop_131520_total_iter;
    int64_t *futhark_mc_segmap_task_131518_total_runtime;
    int *futhark_mc_segmap_task_131518_runs;
    int64_t *futhark_mc_segmap_task_131518_iter;
    int64_t futhark_mc_segmap_task_131518_total_time;
    int64_t futhark_mc_segmap_task_131518_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131534_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131534_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131534_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131534_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131534_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131534_total_iter;
    int64_t *futhark_mc_segred_task_131529_total_runtime;
    int *futhark_mc_segred_task_131529_runs;
    int64_t *futhark_mc_segred_task_131529_iter;
    int64_t futhark_mc_segred_task_131529_total_time;
    int64_t futhark_mc_segred_task_131529_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131540_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131540_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131540_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131540_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131540_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131540_total_iter;
    int64_t *futhark_mc_segred_task_131536_total_runtime;
    int *futhark_mc_segred_task_131536_runs;
    int64_t *futhark_mc_segred_task_131536_iter;
    int64_t futhark_mc_segred_task_131536_total_time;
    int64_t futhark_mc_segred_task_131536_total_iter;
    int64_t *futhark_mc_segmap_parloop_131525_total_runtime;
    int *futhark_mc_segmap_parloop_131525_runs;
    int64_t *futhark_mc_segmap_parloop_131525_iter;
    int64_t futhark_mc_segmap_parloop_131525_total_total_runtime;
    int futhark_mc_segmap_parloop_131525_total_runs;
    int64_t futhark_mc_segmap_parloop_131525_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131523_total_runtime;
    int *futhark_mc_segmap_nested_task_131523_runs;
    int64_t *futhark_mc_segmap_nested_task_131523_iter;
    int64_t *futhark_mc_segmap_parloop_131514_total_runtime;
    int *futhark_mc_segmap_parloop_131514_runs;
    int64_t *futhark_mc_segmap_parloop_131514_iter;
    int64_t futhark_mc_segmap_parloop_131514_total_total_runtime;
    int futhark_mc_segmap_parloop_131514_total_runs;
    int64_t futhark_mc_segmap_parloop_131514_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131512_total_runtime;
    int *futhark_mc_segmap_nested_task_131512_runs;
    int64_t *futhark_mc_segmap_nested_task_131512_iter;
    int64_t *futhark_mc_segmap_parloop_131544_total_runtime;
    int *futhark_mc_segmap_parloop_131544_runs;
    int64_t *futhark_mc_segmap_parloop_131544_iter;
    int64_t futhark_mc_segmap_parloop_131544_total_total_runtime;
    int futhark_mc_segmap_parloop_131544_total_runs;
    int64_t futhark_mc_segmap_parloop_131544_total_iter;
    int64_t *futhark_mc_segmap_task_131542_total_runtime;
    int *futhark_mc_segmap_task_131542_runs;
    int64_t *futhark_mc_segmap_task_131542_iter;
    int64_t futhark_mc_segmap_task_131542_total_time;
    int64_t futhark_mc_segmap_task_131542_total_iter;
    int64_t *futhark_mc_segmap_parloop_131559_total_runtime;
    int *futhark_mc_segmap_parloop_131559_runs;
    int64_t *futhark_mc_segmap_parloop_131559_iter;
    int64_t futhark_mc_segmap_parloop_131559_total_total_runtime;
    int futhark_mc_segmap_parloop_131559_total_runs;
    int64_t futhark_mc_segmap_parloop_131559_total_iter;
    int64_t *futhark_mc_segmap_task_131557_total_runtime;
    int *futhark_mc_segmap_task_131557_runs;
    int64_t *futhark_mc_segmap_task_131557_iter;
    int64_t futhark_mc_segmap_task_131557_total_time;
    int64_t futhark_mc_segmap_task_131557_total_iter;
    int64_t *futhark_mc_segmap_parloop_131574_total_runtime;
    int *futhark_mc_segmap_parloop_131574_runs;
    int64_t *futhark_mc_segmap_parloop_131574_iter;
    int64_t futhark_mc_segmap_parloop_131574_total_total_runtime;
    int futhark_mc_segmap_parloop_131574_total_runs;
    int64_t futhark_mc_segmap_parloop_131574_total_iter;
    int64_t *futhark_mc_segmap_task_131572_total_runtime;
    int *futhark_mc_segmap_task_131572_runs;
    int64_t *futhark_mc_segmap_task_131572_iter;
    int64_t futhark_mc_segmap_task_131572_total_time;
    int64_t futhark_mc_segmap_task_131572_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131583_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131583_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131583_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131583_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131583_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131583_total_iter;
    int64_t *futhark_mc_segred_task_131576_total_runtime;
    int *futhark_mc_segred_task_131576_runs;
    int64_t *futhark_mc_segred_task_131576_iter;
    int64_t futhark_mc_segred_task_131576_total_time;
    int64_t futhark_mc_segred_task_131576_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131589_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131589_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131589_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131589_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131589_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131589_total_iter;
    int64_t *futhark_mc_segred_task_131585_total_runtime;
    int *futhark_mc_segred_task_131585_runs;
    int64_t *futhark_mc_segred_task_131585_iter;
    int64_t futhark_mc_segred_task_131585_total_time;
    int64_t futhark_mc_segred_task_131585_total_iter;
    int64_t *futhark_mc_segmap_parloop_131566_total_runtime;
    int *futhark_mc_segmap_parloop_131566_runs;
    int64_t *futhark_mc_segmap_parloop_131566_iter;
    int64_t futhark_mc_segmap_parloop_131566_total_total_runtime;
    int futhark_mc_segmap_parloop_131566_total_runs;
    int64_t futhark_mc_segmap_parloop_131566_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131564_total_runtime;
    int *futhark_mc_segmap_nested_task_131564_runs;
    int64_t *futhark_mc_segmap_nested_task_131564_iter;
    int64_t *futhark_mc_segmap_parloop_131553_total_runtime;
    int *futhark_mc_segmap_parloop_131553_runs;
    int64_t *futhark_mc_segmap_parloop_131553_iter;
    int64_t futhark_mc_segmap_parloop_131553_total_total_runtime;
    int futhark_mc_segmap_parloop_131553_total_runs;
    int64_t futhark_mc_segmap_parloop_131553_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131551_total_runtime;
    int *futhark_mc_segmap_nested_task_131551_runs;
    int64_t *futhark_mc_segmap_nested_task_131551_iter;
    int64_t *futhark_mc_segmap_parloop_131593_total_runtime;
    int *futhark_mc_segmap_parloop_131593_runs;
    int64_t *futhark_mc_segmap_parloop_131593_iter;
    int64_t futhark_mc_segmap_parloop_131593_total_total_runtime;
    int futhark_mc_segmap_parloop_131593_total_runs;
    int64_t futhark_mc_segmap_parloop_131593_total_iter;
    int64_t *futhark_mc_segmap_task_131591_total_runtime;
    int *futhark_mc_segmap_task_131591_runs;
    int64_t *futhark_mc_segmap_task_131591_iter;
    int64_t futhark_mc_segmap_task_131591_total_time;
    int64_t futhark_mc_segmap_task_131591_total_iter;
    int64_t *futhark_mc_segmap_parloop_131602_total_runtime;
    int *futhark_mc_segmap_parloop_131602_runs;
    int64_t *futhark_mc_segmap_parloop_131602_iter;
    int64_t futhark_mc_segmap_parloop_131602_total_total_runtime;
    int futhark_mc_segmap_parloop_131602_total_runs;
    int64_t futhark_mc_segmap_parloop_131602_total_iter;
    int64_t *futhark_mc_segmap_task_131600_total_runtime;
    int *futhark_mc_segmap_task_131600_runs;
    int64_t *futhark_mc_segmap_task_131600_iter;
    int64_t futhark_mc_segmap_task_131600_total_time;
    int64_t futhark_mc_segmap_task_131600_total_iter;
    int64_t *futhark_mc_segmap_parloop_131597_total_runtime;
    int *futhark_mc_segmap_parloop_131597_runs;
    int64_t *futhark_mc_segmap_parloop_131597_iter;
    int64_t futhark_mc_segmap_parloop_131597_total_total_runtime;
    int futhark_mc_segmap_parloop_131597_total_runs;
    int64_t futhark_mc_segmap_parloop_131597_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131595_total_runtime;
    int *futhark_mc_segmap_nested_task_131595_runs;
    int64_t *futhark_mc_segmap_nested_task_131595_iter;
    int64_t *futhark_mc_segmap_parloop_131606_total_runtime;
    int *futhark_mc_segmap_parloop_131606_runs;
    int64_t *futhark_mc_segmap_parloop_131606_iter;
    int64_t futhark_mc_segmap_parloop_131606_total_total_runtime;
    int futhark_mc_segmap_parloop_131606_total_runs;
    int64_t futhark_mc_segmap_parloop_131606_total_iter;
    int64_t *futhark_mc_segmap_task_131604_total_runtime;
    int *futhark_mc_segmap_task_131604_runs;
    int64_t *futhark_mc_segmap_task_131604_iter;
    int64_t futhark_mc_segmap_task_131604_total_time;
    int64_t futhark_mc_segmap_task_131604_total_iter;
    int64_t *futhark_mc_segmap_parloop_131615_total_runtime;
    int *futhark_mc_segmap_parloop_131615_runs;
    int64_t *futhark_mc_segmap_parloop_131615_iter;
    int64_t futhark_mc_segmap_parloop_131615_total_total_runtime;
    int futhark_mc_segmap_parloop_131615_total_runs;
    int64_t futhark_mc_segmap_parloop_131615_total_iter;
    int64_t *futhark_mc_segmap_task_131613_total_runtime;
    int *futhark_mc_segmap_task_131613_runs;
    int64_t *futhark_mc_segmap_task_131613_iter;
    int64_t futhark_mc_segmap_task_131613_total_time;
    int64_t futhark_mc_segmap_task_131613_total_iter;
    int64_t *futhark_mc_segmap_parloop_131610_total_runtime;
    int *futhark_mc_segmap_parloop_131610_runs;
    int64_t *futhark_mc_segmap_parloop_131610_iter;
    int64_t futhark_mc_segmap_parloop_131610_total_total_runtime;
    int futhark_mc_segmap_parloop_131610_total_runs;
    int64_t futhark_mc_segmap_parloop_131610_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131608_total_runtime;
    int *futhark_mc_segmap_nested_task_131608_runs;
    int64_t *futhark_mc_segmap_nested_task_131608_iter;
    int64_t *futhark_mc_segmap_parloop_131619_total_runtime;
    int *futhark_mc_segmap_parloop_131619_runs;
    int64_t *futhark_mc_segmap_parloop_131619_iter;
    int64_t futhark_mc_segmap_parloop_131619_total_total_runtime;
    int futhark_mc_segmap_parloop_131619_total_runs;
    int64_t futhark_mc_segmap_parloop_131619_total_iter;
    int64_t *futhark_mc_segmap_task_131617_total_runtime;
    int *futhark_mc_segmap_task_131617_runs;
    int64_t *futhark_mc_segmap_task_131617_iter;
    int64_t futhark_mc_segmap_task_131617_total_time;
    int64_t futhark_mc_segmap_task_131617_total_iter;
    int64_t *futhark_mc_segmap_parloop_131628_total_runtime;
    int *futhark_mc_segmap_parloop_131628_runs;
    int64_t *futhark_mc_segmap_parloop_131628_iter;
    int64_t futhark_mc_segmap_parloop_131628_total_total_runtime;
    int futhark_mc_segmap_parloop_131628_total_runs;
    int64_t futhark_mc_segmap_parloop_131628_total_iter;
    int64_t *futhark_mc_segmap_task_131626_total_runtime;
    int *futhark_mc_segmap_task_131626_runs;
    int64_t *futhark_mc_segmap_task_131626_iter;
    int64_t futhark_mc_segmap_task_131626_total_time;
    int64_t futhark_mc_segmap_task_131626_total_iter;
    int64_t *futhark_mc_segmap_parloop_131623_total_runtime;
    int *futhark_mc_segmap_parloop_131623_runs;
    int64_t *futhark_mc_segmap_parloop_131623_iter;
    int64_t futhark_mc_segmap_parloop_131623_total_total_runtime;
    int futhark_mc_segmap_parloop_131623_total_runs;
    int64_t futhark_mc_segmap_parloop_131623_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131621_total_runtime;
    int *futhark_mc_segmap_nested_task_131621_runs;
    int64_t *futhark_mc_segmap_nested_task_131621_iter;
    int64_t *futhark_mc_segmap_parloop_131632_total_runtime;
    int *futhark_mc_segmap_parloop_131632_runs;
    int64_t *futhark_mc_segmap_parloop_131632_iter;
    int64_t futhark_mc_segmap_parloop_131632_total_total_runtime;
    int futhark_mc_segmap_parloop_131632_total_runs;
    int64_t futhark_mc_segmap_parloop_131632_total_iter;
    int64_t *futhark_mc_segmap_task_131630_total_runtime;
    int *futhark_mc_segmap_task_131630_runs;
    int64_t *futhark_mc_segmap_task_131630_iter;
    int64_t futhark_mc_segmap_task_131630_total_time;
    int64_t futhark_mc_segmap_task_131630_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_131657_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_131657_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_131657_iter;
    int64_t futhark_mc_scan_stage_1_parloop_131657_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_131657_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_131657_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_131659_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_131659_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_131659_iter;
    int64_t futhark_mc_scan_stage_3_parloop_131659_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_131659_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_131659_total_iter;
    int64_t *futhark_mc_segscan_task_131651_total_runtime;
    int *futhark_mc_segscan_task_131651_runs;
    int64_t *futhark_mc_segscan_task_131651_iter;
    int64_t futhark_mc_segscan_task_131651_total_time;
    int64_t futhark_mc_segscan_task_131651_total_iter;
    int64_t *futhark_mc_segmap_parloop_131663_total_runtime;
    int *futhark_mc_segmap_parloop_131663_runs;
    int64_t *futhark_mc_segmap_parloop_131663_iter;
    int64_t futhark_mc_segmap_parloop_131663_total_total_runtime;
    int futhark_mc_segmap_parloop_131663_total_runs;
    int64_t futhark_mc_segmap_parloop_131663_total_iter;
    int64_t *futhark_mc_segmap_task_131661_total_runtime;
    int *futhark_mc_segmap_task_131661_runs;
    int64_t *futhark_mc_segmap_task_131661_iter;
    int64_t futhark_mc_segmap_task_131661_total_time;
    int64_t futhark_mc_segmap_task_131661_total_iter;
    int64_t *futhark_mc_segmap_parloop_131642_total_runtime;
    int *futhark_mc_segmap_parloop_131642_runs;
    int64_t *futhark_mc_segmap_parloop_131642_iter;
    int64_t futhark_mc_segmap_parloop_131642_total_total_runtime;
    int futhark_mc_segmap_parloop_131642_total_runs;
    int64_t futhark_mc_segmap_parloop_131642_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131640_total_runtime;
    int *futhark_mc_segmap_nested_task_131640_runs;
    int64_t *futhark_mc_segmap_nested_task_131640_iter;
    int64_t *futhark_mc_segmap_parloop_131667_total_runtime;
    int *futhark_mc_segmap_parloop_131667_runs;
    int64_t *futhark_mc_segmap_parloop_131667_iter;
    int64_t futhark_mc_segmap_parloop_131667_total_total_runtime;
    int futhark_mc_segmap_parloop_131667_total_runs;
    int64_t futhark_mc_segmap_parloop_131667_total_iter;
    int64_t *futhark_mc_segmap_task_131665_total_runtime;
    int *futhark_mc_segmap_task_131665_runs;
    int64_t *futhark_mc_segmap_task_131665_iter;
    int64_t futhark_mc_segmap_task_131665_total_time;
    int64_t futhark_mc_segmap_task_131665_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_131675_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_131675_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_131675_iter;
    int64_t futhark_mc_segred_stage_1_parloop_131675_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_131675_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_131675_total_iter;
    int64_t *futhark_mc_segred_task_131672_total_runtime;
    int *futhark_mc_segred_task_131672_runs;
    int64_t *futhark_mc_segred_task_131672_iter;
    int64_t futhark_mc_segred_task_131672_total_time;
    int64_t futhark_mc_segred_task_131672_total_iter;
    int64_t *futhark_mc_segmap_parloop_131670_total_runtime;
    int *futhark_mc_segmap_parloop_131670_runs;
    int64_t *futhark_mc_segmap_parloop_131670_iter;
    int64_t futhark_mc_segmap_parloop_131670_total_total_runtime;
    int futhark_mc_segmap_parloop_131670_total_runs;
    int64_t futhark_mc_segmap_parloop_131670_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131668_total_runtime;
    int *futhark_mc_segmap_nested_task_131668_runs;
    int64_t *futhark_mc_segmap_nested_task_131668_iter;
    int64_t *futhark_mc_segmap_parloop_131679_total_runtime;
    int *futhark_mc_segmap_parloop_131679_runs;
    int64_t *futhark_mc_segmap_parloop_131679_iter;
    int64_t futhark_mc_segmap_parloop_131679_total_total_runtime;
    int futhark_mc_segmap_parloop_131679_total_runs;
    int64_t futhark_mc_segmap_parloop_131679_total_iter;
    int64_t *futhark_mc_segmap_task_131677_total_runtime;
    int *futhark_mc_segmap_task_131677_runs;
    int64_t *futhark_mc_segmap_task_131677_iter;
    int64_t futhark_mc_segmap_task_131677_total_time;
    int64_t futhark_mc_segmap_task_131677_total_iter;
    int64_t *futhark_mc_segmap_parloop_131688_total_runtime;
    int *futhark_mc_segmap_parloop_131688_runs;
    int64_t *futhark_mc_segmap_parloop_131688_iter;
    int64_t futhark_mc_segmap_parloop_131688_total_total_runtime;
    int futhark_mc_segmap_parloop_131688_total_runs;
    int64_t futhark_mc_segmap_parloop_131688_total_iter;
    int64_t *futhark_mc_segmap_task_131686_total_runtime;
    int *futhark_mc_segmap_task_131686_runs;
    int64_t *futhark_mc_segmap_task_131686_iter;
    int64_t futhark_mc_segmap_task_131686_total_time;
    int64_t futhark_mc_segmap_task_131686_total_iter;
    int64_t *futhark_mc_segmap_parloop_131683_total_runtime;
    int *futhark_mc_segmap_parloop_131683_runs;
    int64_t *futhark_mc_segmap_parloop_131683_iter;
    int64_t futhark_mc_segmap_parloop_131683_total_total_runtime;
    int futhark_mc_segmap_parloop_131683_total_runs;
    int64_t futhark_mc_segmap_parloop_131683_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131681_total_runtime;
    int *futhark_mc_segmap_nested_task_131681_runs;
    int64_t *futhark_mc_segmap_nested_task_131681_iter;
    int64_t *futhark_mc_segmap_parloop_131692_total_runtime;
    int *futhark_mc_segmap_parloop_131692_runs;
    int64_t *futhark_mc_segmap_parloop_131692_iter;
    int64_t futhark_mc_segmap_parloop_131692_total_total_runtime;
    int futhark_mc_segmap_parloop_131692_total_runs;
    int64_t futhark_mc_segmap_parloop_131692_total_iter;
    int64_t *futhark_mc_segmap_task_131690_total_runtime;
    int *futhark_mc_segmap_task_131690_runs;
    int64_t *futhark_mc_segmap_task_131690_iter;
    int64_t futhark_mc_segmap_task_131690_total_time;
    int64_t futhark_mc_segmap_task_131690_total_iter;
    int64_t *futhark_mc_segmap_parloop_131701_total_runtime;
    int *futhark_mc_segmap_parloop_131701_runs;
    int64_t *futhark_mc_segmap_parloop_131701_iter;
    int64_t futhark_mc_segmap_parloop_131701_total_total_runtime;
    int futhark_mc_segmap_parloop_131701_total_runs;
    int64_t futhark_mc_segmap_parloop_131701_total_iter;
    int64_t *futhark_mc_segmap_task_131699_total_runtime;
    int *futhark_mc_segmap_task_131699_runs;
    int64_t *futhark_mc_segmap_task_131699_iter;
    int64_t futhark_mc_segmap_task_131699_total_time;
    int64_t futhark_mc_segmap_task_131699_total_iter;
    int64_t *futhark_mc_segmap_parloop_131696_total_runtime;
    int *futhark_mc_segmap_parloop_131696_runs;
    int64_t *futhark_mc_segmap_parloop_131696_iter;
    int64_t futhark_mc_segmap_parloop_131696_total_total_runtime;
    int futhark_mc_segmap_parloop_131696_total_runs;
    int64_t futhark_mc_segmap_parloop_131696_total_iter;
    int64_t *futhark_mc_segmap_nested_task_131694_total_runtime;
    int *futhark_mc_segmap_nested_task_131694_runs;
    int64_t *futhark_mc_segmap_nested_task_131694_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_130920_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130920_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130920_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130920_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130920_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130920_total_iter = 0;
    ctx->futhark_mc_segmap_task_130918_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130918_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130918_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130918_total_time = 0;
    ctx->futhark_mc_segmap_task_130918_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_130932_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_130932_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_130932_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_130934_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_130934_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_130934_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter = 0;
    ctx->futhark_mc_segscan_task_130929_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_130929_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_130929_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_130929_total_time = 0;
    ctx->futhark_mc_segscan_task_130929_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130938_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130938_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130938_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130938_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130938_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130938_total_iter = 0;
    ctx->futhark_mc_segmap_task_130936_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130936_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130936_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130936_total_time = 0;
    ctx->futhark_mc_segmap_task_130936_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130925_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130925_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130925_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130925_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130925_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130925_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130923_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130923_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130923_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130942_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130942_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130942_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130942_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130942_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130942_total_iter = 0;
    ctx->futhark_mc_segmap_task_130940_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130940_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130940_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130940_total_time = 0;
    ctx->futhark_mc_segmap_task_130940_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130951_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130951_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130951_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130951_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130951_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130951_total_iter = 0;
    ctx->futhark_mc_segmap_task_130949_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130949_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130949_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130949_total_time = 0;
    ctx->futhark_mc_segmap_task_130949_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130946_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130946_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130946_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130946_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130946_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130946_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130944_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130944_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130944_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130955_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130955_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130955_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130955_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130955_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130955_total_iter = 0;
    ctx->futhark_mc_segmap_task_130953_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130953_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130953_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130953_total_time = 0;
    ctx->futhark_mc_segmap_task_130953_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130964_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130964_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130964_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130964_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130964_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130964_total_iter = 0;
    ctx->futhark_mc_segmap_task_130962_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130962_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130962_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130962_total_time = 0;
    ctx->futhark_mc_segmap_task_130962_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130959_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130959_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130959_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130959_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130959_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130959_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130957_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130957_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130957_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130968_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130968_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130968_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130968_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130968_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130968_total_iter = 0;
    ctx->futhark_mc_segmap_task_130966_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130966_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130966_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130966_total_time = 0;
    ctx->futhark_mc_segmap_task_130966_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130977_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130977_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130977_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130977_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130977_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130977_total_iter = 0;
    ctx->futhark_mc_segmap_task_130975_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130975_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130975_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130975_total_time = 0;
    ctx->futhark_mc_segmap_task_130975_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_130985_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_130985_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_130985_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter = 0;
    ctx->futhark_mc_segred_task_130982_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_130982_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_130982_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_130982_total_time = 0;
    ctx->futhark_mc_segred_task_130982_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_130980_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130980_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130980_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130980_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130980_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130980_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130978_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130978_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130978_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130972_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130972_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130972_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130972_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130972_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130972_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130970_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130970_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130970_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130989_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130989_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130989_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130989_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130989_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130989_total_iter = 0;
    ctx->futhark_mc_segmap_task_130987_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130987_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130987_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_130987_total_time = 0;
    ctx->futhark_mc_segmap_task_130987_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131004_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131004_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131004_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131004_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131004_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131004_total_iter = 0;
    ctx->futhark_mc_segmap_task_131002_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131002_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131002_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131002_total_time = 0;
    ctx->futhark_mc_segmap_task_131002_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131008_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131008_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131008_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131008_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131008_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131008_total_iter = 0;
    ctx->futhark_mc_segmap_task_131006_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131006_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131006_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131006_total_time = 0;
    ctx->futhark_mc_segmap_task_131006_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131016_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131016_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131016_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter = 0;
    ctx->futhark_mc_segred_task_131013_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131013_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131013_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131013_total_time = 0;
    ctx->futhark_mc_segred_task_131013_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131011_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131011_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131011_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131011_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131011_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131011_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131009_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131009_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131009_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130996_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130996_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130996_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_130996_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_130996_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_130996_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_130994_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130994_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_130994_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131020_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131020_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131020_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131020_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131020_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131020_total_iter = 0;
    ctx->futhark_mc_segmap_task_131018_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131018_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131018_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131018_total_time = 0;
    ctx->futhark_mc_segmap_task_131018_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131035_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131035_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131035_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131035_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131035_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131035_total_iter = 0;
    ctx->futhark_mc_segmap_task_131033_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131033_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131033_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131033_total_time = 0;
    ctx->futhark_mc_segmap_task_131033_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131039_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131039_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131039_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131039_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131039_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131039_total_iter = 0;
    ctx->futhark_mc_segmap_task_131037_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131037_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131037_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131037_total_time = 0;
    ctx->futhark_mc_segmap_task_131037_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131047_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131047_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131047_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter = 0;
    ctx->futhark_mc_segred_task_131044_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131044_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131044_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131044_total_time = 0;
    ctx->futhark_mc_segred_task_131044_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131042_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131042_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131042_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131042_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131042_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131042_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131040_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131040_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131040_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131027_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131027_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131027_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131027_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131027_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131027_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131025_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131025_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131025_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131051_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131051_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131051_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131051_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131051_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131051_total_iter = 0;
    ctx->futhark_mc_segmap_task_131049_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131049_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131049_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131049_total_time = 0;
    ctx->futhark_mc_segmap_task_131049_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131060_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131060_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131060_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131060_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131060_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131060_total_iter = 0;
    ctx->futhark_mc_segmap_task_131058_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131058_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131058_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131058_total_time = 0;
    ctx->futhark_mc_segmap_task_131058_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131055_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131055_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131055_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131055_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131055_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131055_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131053_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131053_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131053_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131064_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131064_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131064_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131064_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131064_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131064_total_iter = 0;
    ctx->futhark_mc_segmap_task_131062_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131062_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131062_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131062_total_time = 0;
    ctx->futhark_mc_segmap_task_131062_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131073_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131073_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131073_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131073_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131073_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131073_total_iter = 0;
    ctx->futhark_mc_segmap_task_131071_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131071_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131071_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131071_total_time = 0;
    ctx->futhark_mc_segmap_task_131071_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131081_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131081_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131081_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter = 0;
    ctx->futhark_mc_segred_task_131078_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131078_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131078_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131078_total_time = 0;
    ctx->futhark_mc_segred_task_131078_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131076_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131076_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131076_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131076_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131076_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131076_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131074_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131074_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131074_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131068_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131068_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131068_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131068_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131068_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131068_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131066_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131066_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131066_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131085_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131085_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131085_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131085_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131085_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131085_total_iter = 0;
    ctx->futhark_mc_segmap_task_131083_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131083_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131083_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131083_total_time = 0;
    ctx->futhark_mc_segmap_task_131083_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131094_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131094_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131094_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131094_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131094_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131094_total_iter = 0;
    ctx->futhark_mc_segmap_task_131092_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131092_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131092_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131092_total_time = 0;
    ctx->futhark_mc_segmap_task_131092_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131089_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131089_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131089_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131089_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131089_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131089_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131087_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131087_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131087_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131098_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131098_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131098_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131098_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131098_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131098_total_iter = 0;
    ctx->futhark_mc_segmap_task_131096_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131096_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131096_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131096_total_time = 0;
    ctx->futhark_mc_segmap_task_131096_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131112_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131112_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131112_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter = 0;
    ctx->futhark_mc_segred_task_131109_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131109_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131109_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131109_total_time = 0;
    ctx->futhark_mc_segred_task_131109_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131117_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131117_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131117_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131119_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131119_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131119_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter = 0;
    ctx->futhark_mc_segscan_task_131114_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131114_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131114_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131114_total_time = 0;
    ctx->futhark_mc_segscan_task_131114_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131124_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131124_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131124_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter = 0;
    ctx->futhark_mc_segred_task_131121_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131121_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131121_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131121_total_time = 0;
    ctx->futhark_mc_segred_task_131121_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131129_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131129_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131129_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131131_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131131_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131131_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter = 0;
    ctx->futhark_mc_segscan_task_131126_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131126_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131126_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131126_total_time = 0;
    ctx->futhark_mc_segscan_task_131126_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131136_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131136_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131136_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter = 0;
    ctx->futhark_mc_segred_task_131133_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131133_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131133_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131133_total_time = 0;
    ctx->futhark_mc_segred_task_131133_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131141_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131141_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131141_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131143_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131143_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131143_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter = 0;
    ctx->futhark_mc_segscan_task_131138_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131138_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131138_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131138_total_time = 0;
    ctx->futhark_mc_segscan_task_131138_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131104_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131104_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131104_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131104_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131104_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131104_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131102_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131102_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131102_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131147_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131147_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131147_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131147_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131147_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131147_total_iter = 0;
    ctx->futhark_mc_segmap_task_131145_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131145_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131145_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131145_total_time = 0;
    ctx->futhark_mc_segmap_task_131145_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131156_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131156_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131156_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131156_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131156_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131156_total_iter = 0;
    ctx->futhark_mc_segmap_task_131154_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131154_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131154_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131154_total_time = 0;
    ctx->futhark_mc_segmap_task_131154_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131164_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131164_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131164_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter = 0;
    ctx->futhark_mc_segred_task_131161_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131161_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131161_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131161_total_time = 0;
    ctx->futhark_mc_segred_task_131161_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131169_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131169_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131169_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter = 0;
    ctx->futhark_mc_segred_task_131166_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131166_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131166_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131166_total_time = 0;
    ctx->futhark_mc_segred_task_131166_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131159_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131159_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131159_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131159_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131159_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131159_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131157_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131157_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131157_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131151_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131151_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131151_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131149_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131149_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131149_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131173_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131173_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131173_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131173_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131173_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131173_total_iter = 0;
    ctx->futhark_mc_segmap_task_131171_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131171_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131171_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131171_total_time = 0;
    ctx->futhark_mc_segmap_task_131171_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131184_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131184_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131184_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131184_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131184_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131184_total_iter = 0;
    ctx->futhark_mc_segmap_task_131182_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131182_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131182_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131182_total_time = 0;
    ctx->futhark_mc_segmap_task_131182_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131194_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131194_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131194_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter = 0;
    ctx->futhark_mc_segred_task_131189_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131189_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131189_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131189_total_time = 0;
    ctx->futhark_mc_segred_task_131189_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131200_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131200_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131200_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter = 0;
    ctx->futhark_mc_segred_task_131196_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131196_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131196_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131196_total_time = 0;
    ctx->futhark_mc_segred_task_131196_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131187_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131187_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131187_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131187_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131187_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131187_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131185_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131185_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131185_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131178_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131178_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131178_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131178_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131178_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131178_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131176_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131176_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131176_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131204_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131204_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131204_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131204_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131204_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131204_total_iter = 0;
    ctx->futhark_mc_segmap_task_131202_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131202_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131202_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131202_total_time = 0;
    ctx->futhark_mc_segmap_task_131202_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131215_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131215_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131215_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131215_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131215_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131215_total_iter = 0;
    ctx->futhark_mc_segmap_task_131213_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131213_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131213_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131213_total_time = 0;
    ctx->futhark_mc_segmap_task_131213_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131227_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131227_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131227_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter = 0;
    ctx->futhark_mc_segred_task_131220_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131220_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131220_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131220_total_time = 0;
    ctx->futhark_mc_segred_task_131220_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131233_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131233_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131233_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter = 0;
    ctx->futhark_mc_segred_task_131229_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131229_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131229_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131229_total_time = 0;
    ctx->futhark_mc_segred_task_131229_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131218_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131218_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131218_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131218_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131218_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131218_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131216_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131216_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131216_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131209_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131209_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131209_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131209_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131209_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131209_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131207_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131207_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131207_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131237_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131237_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131237_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131237_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131237_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131237_total_iter = 0;
    ctx->futhark_mc_segmap_task_131235_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131235_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131235_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131235_total_time = 0;
    ctx->futhark_mc_segmap_task_131235_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131247_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131247_total_iter = 0;
    ctx->futhark_mc_segmap_task_131245_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131245_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131245_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131245_total_time = 0;
    ctx->futhark_mc_segmap_task_131245_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131257_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131257_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131257_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter = 0;
    ctx->futhark_mc_segred_task_131254_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131254_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131254_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131254_total_time = 0;
    ctx->futhark_mc_segred_task_131254_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131262_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131262_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131262_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter = 0;
    ctx->futhark_mc_segred_task_131259_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131259_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131259_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131259_total_time = 0;
    ctx->futhark_mc_segred_task_131259_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131251_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131251_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131251_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131251_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131251_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131251_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131249_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131249_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131249_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131242_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131242_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131242_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131242_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131242_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131242_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131240_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131240_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131240_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131266_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131266_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131266_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131266_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131266_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131266_total_iter = 0;
    ctx->futhark_mc_segmap_task_131264_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131264_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131264_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131264_total_time = 0;
    ctx->futhark_mc_segmap_task_131264_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131279_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131279_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131279_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131279_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131279_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131279_total_iter = 0;
    ctx->futhark_mc_segmap_task_131277_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131277_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131277_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131277_total_time = 0;
    ctx->futhark_mc_segmap_task_131277_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131293_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131293_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131293_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter = 0;
    ctx->futhark_mc_segred_task_131288_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131288_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131288_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131288_total_time = 0;
    ctx->futhark_mc_segred_task_131288_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131299_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131299_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131299_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter = 0;
    ctx->futhark_mc_segred_task_131295_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131295_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131295_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131295_total_time = 0;
    ctx->futhark_mc_segred_task_131295_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131284_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131284_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131284_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131284_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131284_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131284_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131282_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131282_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131282_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131273_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131273_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131273_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131273_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131273_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131273_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131271_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131271_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131271_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131303_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131303_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131303_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131303_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131303_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131303_total_iter = 0;
    ctx->futhark_mc_segmap_task_131301_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131301_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131301_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131301_total_time = 0;
    ctx->futhark_mc_segmap_task_131301_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131318_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131318_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131318_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131318_total_iter = 0;
    ctx->futhark_mc_segmap_task_131316_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131316_total_time = 0;
    ctx->futhark_mc_segmap_task_131316_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131333_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131333_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131333_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131333_total_iter = 0;
    ctx->futhark_mc_segmap_task_131331_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131331_total_time = 0;
    ctx->futhark_mc_segmap_task_131331_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131342_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131342_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131342_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter = 0;
    ctx->futhark_mc_segred_task_131335_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131335_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131335_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131335_total_time = 0;
    ctx->futhark_mc_segred_task_131335_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131348_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131348_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131348_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter = 0;
    ctx->futhark_mc_segred_task_131344_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131344_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131344_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131344_total_time = 0;
    ctx->futhark_mc_segred_task_131344_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131325_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131325_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131325_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131325_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131325_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131325_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131323_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131323_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131323_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131312_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131312_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131312_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131312_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131312_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131312_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131310_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131310_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131310_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131352_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131352_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131352_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131352_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131352_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131352_total_iter = 0;
    ctx->futhark_mc_segmap_task_131350_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131350_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131350_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131350_total_time = 0;
    ctx->futhark_mc_segmap_task_131350_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131361_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131361_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131361_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131361_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131361_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131361_total_iter = 0;
    ctx->futhark_mc_segmap_task_131359_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131359_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131359_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131359_total_time = 0;
    ctx->futhark_mc_segmap_task_131359_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131356_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131356_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131356_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131356_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131356_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131356_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131354_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131354_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131354_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131365_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131365_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131365_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131365_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131365_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131365_total_iter = 0;
    ctx->futhark_mc_segmap_task_131363_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131363_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131363_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131363_total_time = 0;
    ctx->futhark_mc_segmap_task_131363_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131380_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131380_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131380_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131380_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131380_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131380_total_iter = 0;
    ctx->futhark_mc_segmap_task_131378_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131378_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131378_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131378_total_time = 0;
    ctx->futhark_mc_segmap_task_131378_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131384_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131384_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131384_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131384_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131384_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131384_total_iter = 0;
    ctx->futhark_mc_segmap_task_131382_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131382_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131382_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131382_total_time = 0;
    ctx->futhark_mc_segmap_task_131382_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131372_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131372_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131372_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131372_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131372_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131372_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131370_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131370_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131370_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131388_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131388_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131388_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131388_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131388_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131388_total_iter = 0;
    ctx->futhark_mc_segmap_task_131386_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131386_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131386_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131386_total_time = 0;
    ctx->futhark_mc_segmap_task_131386_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131397_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131397_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131397_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131397_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131397_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131397_total_iter = 0;
    ctx->futhark_mc_segmap_task_131395_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131395_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131395_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131395_total_time = 0;
    ctx->futhark_mc_segmap_task_131395_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131405_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131405_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131405_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter = 0;
    ctx->futhark_mc_segred_task_131402_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131402_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131402_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131402_total_time = 0;
    ctx->futhark_mc_segred_task_131402_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131410_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131410_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131410_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter = 0;
    ctx->futhark_mc_segred_task_131407_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131407_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131407_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131407_total_time = 0;
    ctx->futhark_mc_segred_task_131407_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131400_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131400_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131400_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131400_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131400_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131400_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131398_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131398_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131398_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131392_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131392_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131392_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131392_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131392_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131392_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131390_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131390_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131390_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131414_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131414_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131414_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131414_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131414_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131414_total_iter = 0;
    ctx->futhark_mc_segmap_task_131412_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131412_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131412_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131412_total_time = 0;
    ctx->futhark_mc_segmap_task_131412_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131425_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131425_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131425_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131425_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131425_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131425_total_iter = 0;
    ctx->futhark_mc_segmap_task_131423_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131423_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131423_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131423_total_time = 0;
    ctx->futhark_mc_segmap_task_131423_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131435_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131435_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131435_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter = 0;
    ctx->futhark_mc_segred_task_131430_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131430_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131430_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131430_total_time = 0;
    ctx->futhark_mc_segred_task_131430_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131441_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131441_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131441_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter = 0;
    ctx->futhark_mc_segred_task_131437_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131437_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131437_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131437_total_time = 0;
    ctx->futhark_mc_segred_task_131437_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131428_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131428_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131428_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131428_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131426_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131426_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131426_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131419_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131419_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131419_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131419_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131419_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131419_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131417_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131417_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131417_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131445_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131445_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131445_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131445_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131445_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131445_total_iter = 0;
    ctx->futhark_mc_segmap_task_131443_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131443_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131443_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131443_total_time = 0;
    ctx->futhark_mc_segmap_task_131443_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131456_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131456_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131456_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131456_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131456_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131456_total_iter = 0;
    ctx->futhark_mc_segmap_task_131454_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131454_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131454_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131454_total_time = 0;
    ctx->futhark_mc_segmap_task_131454_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131468_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131468_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131468_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter = 0;
    ctx->futhark_mc_segred_task_131461_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131461_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131461_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131461_total_time = 0;
    ctx->futhark_mc_segred_task_131461_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131474_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131474_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131474_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter = 0;
    ctx->futhark_mc_segred_task_131470_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131470_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131470_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131470_total_time = 0;
    ctx->futhark_mc_segred_task_131470_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131459_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131459_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131459_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131459_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131457_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131457_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131457_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131450_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131450_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131450_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131450_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131450_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131450_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131448_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131448_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131448_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131478_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131478_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131478_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131478_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131478_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131478_total_iter = 0;
    ctx->futhark_mc_segmap_task_131476_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131476_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131476_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131476_total_time = 0;
    ctx->futhark_mc_segmap_task_131476_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131488_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131488_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131488_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131488_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131488_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131488_total_iter = 0;
    ctx->futhark_mc_segmap_task_131486_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131486_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131486_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131486_total_time = 0;
    ctx->futhark_mc_segmap_task_131486_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131498_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131498_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131498_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter = 0;
    ctx->futhark_mc_segred_task_131495_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131495_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131495_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131495_total_time = 0;
    ctx->futhark_mc_segred_task_131495_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131503_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131503_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131503_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter = 0;
    ctx->futhark_mc_segred_task_131500_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131500_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131500_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131500_total_time = 0;
    ctx->futhark_mc_segred_task_131500_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131492_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131492_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131492_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131492_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131492_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131492_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131490_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131490_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131490_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131483_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131483_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131483_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131483_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131483_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131483_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131481_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131481_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131481_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131507_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131507_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131507_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131507_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131507_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131507_total_iter = 0;
    ctx->futhark_mc_segmap_task_131505_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131505_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131505_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131505_total_time = 0;
    ctx->futhark_mc_segmap_task_131505_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131520_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131520_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131520_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131520_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131520_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131520_total_iter = 0;
    ctx->futhark_mc_segmap_task_131518_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131518_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131518_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131518_total_time = 0;
    ctx->futhark_mc_segmap_task_131518_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter = 0;
    ctx->futhark_mc_segred_task_131529_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131529_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131529_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131529_total_time = 0;
    ctx->futhark_mc_segred_task_131529_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131540_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131540_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131540_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter = 0;
    ctx->futhark_mc_segred_task_131536_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131536_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131536_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131536_total_time = 0;
    ctx->futhark_mc_segred_task_131536_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131525_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131525_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131525_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131525_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131525_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131525_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131523_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131523_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131523_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131514_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131514_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131514_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131514_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131514_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131514_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131512_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131512_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131512_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131544_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131544_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131544_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131544_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131544_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131544_total_iter = 0;
    ctx->futhark_mc_segmap_task_131542_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131542_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131542_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131542_total_time = 0;
    ctx->futhark_mc_segmap_task_131542_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131559_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131559_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131559_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131559_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131559_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131559_total_iter = 0;
    ctx->futhark_mc_segmap_task_131557_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131557_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131557_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131557_total_time = 0;
    ctx->futhark_mc_segmap_task_131557_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131574_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131574_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131574_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131574_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131574_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131574_total_iter = 0;
    ctx->futhark_mc_segmap_task_131572_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131572_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131572_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131572_total_time = 0;
    ctx->futhark_mc_segmap_task_131572_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131583_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131583_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131583_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter = 0;
    ctx->futhark_mc_segred_task_131576_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131576_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131576_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131576_total_time = 0;
    ctx->futhark_mc_segred_task_131576_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter = 0;
    ctx->futhark_mc_segred_task_131585_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131585_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131585_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131585_total_time = 0;
    ctx->futhark_mc_segred_task_131585_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131566_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131566_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131566_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131566_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131566_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131566_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131564_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131564_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131564_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131553_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131553_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131553_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131553_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131553_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131553_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131551_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131551_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131551_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131593_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131593_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131593_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131593_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131593_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131593_total_iter = 0;
    ctx->futhark_mc_segmap_task_131591_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131591_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131591_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131591_total_time = 0;
    ctx->futhark_mc_segmap_task_131591_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131602_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131602_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131602_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131602_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131602_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131602_total_iter = 0;
    ctx->futhark_mc_segmap_task_131600_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131600_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131600_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131600_total_time = 0;
    ctx->futhark_mc_segmap_task_131600_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131597_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131597_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131597_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131597_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131597_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131597_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131595_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131595_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131595_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131606_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131606_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131606_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131606_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131606_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131606_total_iter = 0;
    ctx->futhark_mc_segmap_task_131604_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131604_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131604_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131604_total_time = 0;
    ctx->futhark_mc_segmap_task_131604_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131615_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131615_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131615_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131615_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131615_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131615_total_iter = 0;
    ctx->futhark_mc_segmap_task_131613_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131613_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131613_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131613_total_time = 0;
    ctx->futhark_mc_segmap_task_131613_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131610_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131610_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131610_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131610_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131610_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131610_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131608_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131608_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131608_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131619_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131619_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131619_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131619_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131619_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131619_total_iter = 0;
    ctx->futhark_mc_segmap_task_131617_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131617_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131617_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131617_total_time = 0;
    ctx->futhark_mc_segmap_task_131617_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131628_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131628_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131628_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131628_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131628_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131628_total_iter = 0;
    ctx->futhark_mc_segmap_task_131626_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131626_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131626_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131626_total_time = 0;
    ctx->futhark_mc_segmap_task_131626_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131623_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131623_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131623_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131623_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131623_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131623_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131621_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131621_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131621_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131632_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131632_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131632_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131632_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131632_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131632_total_iter = 0;
    ctx->futhark_mc_segmap_task_131630_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131630_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131630_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131630_total_time = 0;
    ctx->futhark_mc_segmap_task_131630_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131657_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131657_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131657_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131659_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131659_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131659_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter = 0;
    ctx->futhark_mc_segscan_task_131651_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131651_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131651_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_131651_total_time = 0;
    ctx->futhark_mc_segscan_task_131651_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131663_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131663_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131663_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131663_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131663_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131663_total_iter = 0;
    ctx->futhark_mc_segmap_task_131661_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131661_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131661_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131661_total_time = 0;
    ctx->futhark_mc_segmap_task_131661_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131642_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131642_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131642_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131642_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131642_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131642_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131640_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131640_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131640_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131667_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131667_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131667_total_iter = 0;
    ctx->futhark_mc_segmap_task_131665_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131665_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131665_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131665_total_time = 0;
    ctx->futhark_mc_segmap_task_131665_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131675_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131675_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131675_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter = 0;
    ctx->futhark_mc_segred_task_131672_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131672_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131672_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_131672_total_time = 0;
    ctx->futhark_mc_segred_task_131672_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131670_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131670_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131670_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131670_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131670_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131670_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131668_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131668_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131668_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131679_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131679_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131679_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131679_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131679_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131679_total_iter = 0;
    ctx->futhark_mc_segmap_task_131677_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131677_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131677_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131677_total_time = 0;
    ctx->futhark_mc_segmap_task_131677_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131688_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131688_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131688_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131688_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131688_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131688_total_iter = 0;
    ctx->futhark_mc_segmap_task_131686_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131686_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131686_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131686_total_time = 0;
    ctx->futhark_mc_segmap_task_131686_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131683_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131683_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131683_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131683_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131683_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131683_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131681_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131681_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131681_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131692_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131692_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131692_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131692_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131692_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131692_total_iter = 0;
    ctx->futhark_mc_segmap_task_131690_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131690_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131690_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131690_total_time = 0;
    ctx->futhark_mc_segmap_task_131690_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131701_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131701_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131701_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131701_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131701_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131701_total_iter = 0;
    ctx->futhark_mc_segmap_task_131699_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131699_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131699_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_131699_total_time = 0;
    ctx->futhark_mc_segmap_task_131699_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_131696_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131696_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131696_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_131696_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_131696_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_131696_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_131694_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131694_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_131694_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130920         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130920_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130920_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130920_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130920_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130920_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130920_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130920_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130920_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130920_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130920_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130920_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130920_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130920_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130920_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130920_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130920_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130920_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130920_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130920_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130920_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130920_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130920_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130920_total_iter /
                (ctx->futhark_mc_segmap_parloop_130920_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130920_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130920_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130920_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_130932   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_130932_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_130932_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_130932_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_130932_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_130932_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_130932_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_130932_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_130932_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_130932_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_130932_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_130932_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_130934   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_130934_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_130934_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_130934_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_130934_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_130934_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_130934_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_130934_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_130934_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_130934_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_130934_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_130934_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_130929           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_130929_runs[i],
                    (long) ctx->futhark_mc_segscan_task_130929_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_130929_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_130929_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_130929_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_130929_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_130929_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_130929_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_130929_iter[i],
                    (long) ctx->futhark_mc_segscan_task_130929_iter[i] /
                    (ctx->futhark_mc_segscan_task_130929_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_130929_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130938         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130938_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130938_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130938_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130938_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130938_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130938_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130938_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130938_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130938_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130938_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130938_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130938_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130938_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130938_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130938_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130938_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130938_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130938_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130938_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130938_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130938_total_iter /
                (ctx->futhark_mc_segmap_parloop_130938_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130938_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130938_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130938_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130936            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130936_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130936_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130936_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130936_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130936_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130936_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130936_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130936_iter[i] /
                    (ctx->futhark_mc_segmap_task_130936_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130936_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130925         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130925_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130925_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130925_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130925_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130925_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130925_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130925_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130925_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130925_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130925_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130925_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130925_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130925_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130925_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130925_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130925_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130925_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130925_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130925_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130925_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130925_total_iter /
                (ctx->futhark_mc_segmap_parloop_130925_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130925_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130925_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130925_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130918            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130918_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130918_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130918_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130918_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130918_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130918_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130918_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130918_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130918_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130918_iter[i] /
                    (ctx->futhark_mc_segmap_task_130918_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130918_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130923     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130923_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130923_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130923_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130923_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130923_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130923_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130923_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130923_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130923_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130923_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130923_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130923_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130942         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130942_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130942_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130942_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130942_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130942_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130942_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130942_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130942_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130942_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130942_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130942_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130942_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130942_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130942_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130942_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130942_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130942_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130942_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130942_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130942_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130942_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130942_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130942_total_iter /
                (ctx->futhark_mc_segmap_parloop_130942_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130942_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130942_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130942_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130951         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130951_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130951_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130951_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130951_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130951_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130951_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130951_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130951_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130951_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130951_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130951_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130951_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130951_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130951_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130951_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130951_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130951_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130951_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130951_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130951_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130951_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130951_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130951_total_iter /
                (ctx->futhark_mc_segmap_parloop_130951_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130951_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130951_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130951_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130949            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130949_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130949_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130949_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130949_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130949_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130949_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130949_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130949_iter[i] /
                    (ctx->futhark_mc_segmap_task_130949_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130949_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130946         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130946_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130946_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130946_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130946_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130946_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130946_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130946_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130946_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130946_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130946_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130946_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130946_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130946_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130946_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130946_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130946_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130946_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130946_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130946_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130946_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130946_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130946_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130946_total_iter /
                (ctx->futhark_mc_segmap_parloop_130946_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130946_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130946_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130946_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130940            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130940_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130940_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130940_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130940_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130940_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130940_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130940_iter[i] /
                    (ctx->futhark_mc_segmap_task_130940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130940_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130944     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130944_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130944_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130944_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130944_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130944_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130944_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130944_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130944_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130944_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130944_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130944_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130944_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130955         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130955_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130955_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130955_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130955_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130955_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130955_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130955_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130955_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130955_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130955_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130955_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130955_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130955_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130955_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130955_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130955_total_iter /
                (ctx->futhark_mc_segmap_parloop_130955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130955_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130955_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130955_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130964         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130964_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130964_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130964_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130964_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130964_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130964_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130964_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130964_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130964_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130964_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130964_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130964_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130964_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130964_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130964_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130964_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130964_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130964_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130964_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130964_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130964_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130964_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130964_total_iter /
                (ctx->futhark_mc_segmap_parloop_130964_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130964_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130964_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130964_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130962            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130962_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130962_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130962_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130962_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130962_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130962_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130962_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130962_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130962_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130962_iter[i] /
                    (ctx->futhark_mc_segmap_task_130962_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130962_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130959         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130959_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130959_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130959_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130959_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130959_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130959_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130959_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130959_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130959_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130959_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130959_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130959_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130959_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130959_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130959_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130959_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130959_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130959_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130959_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130959_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130959_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130959_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130959_total_iter /
                (ctx->futhark_mc_segmap_parloop_130959_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130959_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130959_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130959_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130953            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130953_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130953_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130953_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130953_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130953_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130953_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130953_iter[i] /
                    (ctx->futhark_mc_segmap_task_130953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130953_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130957     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130957_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130957_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130957_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130957_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130957_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130957_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130957_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130957_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130957_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130957_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130957_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130957_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130968         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130968_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130968_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130968_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130968_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130968_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130968_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130968_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130968_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130968_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130968_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130968_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130968_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130968_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130968_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130968_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130968_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130968_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130968_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130968_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130968_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130968_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130968_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130968_total_iter /
                (ctx->futhark_mc_segmap_parloop_130968_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130968_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130968_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130968_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130977         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130977_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130977_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130977_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130977_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130977_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130977_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130977_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130977_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130977_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130977_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130977_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130977_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130977_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130977_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130977_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130977_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130977_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130977_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130977_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130977_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130977_total_iter /
                (ctx->futhark_mc_segmap_parloop_130977_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130977_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130977_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130977_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_130985 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_130985_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_130985_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_130985_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_130985_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_130985_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_130985_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_130985_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_130985_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_130985_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_130985_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_130985_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_130982            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_130982_runs[i],
                    (long) ctx->futhark_mc_segred_task_130982_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_130982_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_130982_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_130982_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_130982_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_130982_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_130982_iter[i]),
                    (long) ctx->futhark_mc_segred_task_130982_iter[i],
                    (long) ctx->futhark_mc_segred_task_130982_iter[i] /
                    (ctx->futhark_mc_segred_task_130982_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_130982_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130980         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130980_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130980_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130980_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130980_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130980_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130980_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130980_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130980_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130980_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130980_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130980_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130980_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130980_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130980_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130980_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130980_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130980_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130980_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130980_total_iter /
                (ctx->futhark_mc_segmap_parloop_130980_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130980_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130980_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130980_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130975            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130975_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130975_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130975_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130975_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130975_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130975_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130975_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130975_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130975_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130975_iter[i] /
                    (ctx->futhark_mc_segmap_task_130975_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130975_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130978     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130978_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130978_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130978_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130978_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130978_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130978_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130978_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130978_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130978_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130978_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130978_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130978_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130972         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130972_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130972_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130972_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130972_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130972_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130972_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130972_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130972_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130972_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130972_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130972_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130972_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130972_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130972_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130972_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130972_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130972_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130972_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130972_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130972_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130972_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130972_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130972_total_iter /
                (ctx->futhark_mc_segmap_parloop_130972_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130972_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130972_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130972_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130966            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130966_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130966_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130966_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130966_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130966_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130966_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130966_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130966_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130966_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130966_iter[i] /
                    (ctx->futhark_mc_segmap_task_130966_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130966_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130970     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130970_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130970_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130970_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130970_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130970_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130970_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130970_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130970_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130970_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130970_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130970_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130970_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130989         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130989_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130989_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130989_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130989_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130989_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130989_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130989_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130989_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130989_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130989_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130989_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130989_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130989_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130989_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130989_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130989_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130989_total_iter /
                (ctx->futhark_mc_segmap_parloop_130989_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130989_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130989_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130989_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131004         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131004_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131004_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131004_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131004_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131004_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131004_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131004_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131004_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131004_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131004_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131004_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131004_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131004_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131004_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131004_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131004_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131004_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131004_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131004_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131004_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131004_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131004_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131004_total_iter /
                (ctx->futhark_mc_segmap_parloop_131004_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131004_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131004_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131004_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131002            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131002_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131002_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131002_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131002_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131002_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131002_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131002_iter[i] /
                    (ctx->futhark_mc_segmap_task_131002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131002_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131008         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131008_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131008_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131008_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131008_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131008_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131008_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131008_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131008_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131008_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131008_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131008_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131008_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131008_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131008_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131008_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131008_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131008_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131008_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131008_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131008_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131008_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131008_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131008_total_iter /
                (ctx->futhark_mc_segmap_parloop_131008_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131008_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131008_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131008_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131016 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131016_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131016_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131016_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131016_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131016_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131016_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131016_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131016_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131016_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131016_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131016_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131013            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131013_runs[i],
                    (long) ctx->futhark_mc_segred_task_131013_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131013_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131013_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131013_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131013_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131013_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131013_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131013_iter[i],
                    (long) ctx->futhark_mc_segred_task_131013_iter[i] /
                    (ctx->futhark_mc_segred_task_131013_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131013_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131011         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131011_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131011_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131011_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131011_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131011_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131011_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131011_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131011_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131011_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131011_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131011_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131011_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131011_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131011_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131011_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131011_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131011_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131011_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131011_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131011_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131011_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131011_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131011_total_iter /
                (ctx->futhark_mc_segmap_parloop_131011_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131011_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131011_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131011_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131006            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131006_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131006_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131006_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131006_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131006_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131006_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131006_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131006_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131006_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131006_iter[i] /
                    (ctx->futhark_mc_segmap_task_131006_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131006_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131009     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131009_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131009_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131009_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131009_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131009_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131009_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131009_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131009_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131009_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131009_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131009_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131009_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_130996         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_130996_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_130996_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130996_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130996_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_130996_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_130996_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_130996_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130996_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_130996_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_130996_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_130996_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_130996_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_130996_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_130996_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_130996_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130996_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130996_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_130996_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_130996_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_130996_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_130996_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_130996_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_130996_total_iter /
                (ctx->futhark_mc_segmap_parloop_130996_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_130996_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_130996_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_130996_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_130987            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_130987_runs[i],
                    (long) ctx->futhark_mc_segmap_task_130987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130987_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_130987_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_130987_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_130987_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_130987_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_130987_iter[i],
                    (long) ctx->futhark_mc_segmap_task_130987_iter[i] /
                    (ctx->futhark_mc_segmap_task_130987_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_130987_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_130994     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_130994_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130994_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130994_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130994_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_130994_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_130994_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_130994_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_130994_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_130994_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_130994_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_130994_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_130994_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131020         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131020_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131020_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131020_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131020_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131020_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131020_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131020_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131020_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131020_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131020_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131020_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131020_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131020_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131020_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131020_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131020_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131020_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131020_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131020_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131020_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131020_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131020_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131020_total_iter /
                (ctx->futhark_mc_segmap_parloop_131020_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131020_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131020_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131020_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131035         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131035_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131035_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131035_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131035_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131035_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131035_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131035_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131035_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131035_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131035_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131035_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131035_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131035_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131035_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131035_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131035_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131035_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131035_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131035_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131035_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131035_total_iter /
                (ctx->futhark_mc_segmap_parloop_131035_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131035_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131035_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131035_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131033            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131033_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131033_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131033_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131033_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131033_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131033_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131033_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131033_iter[i] /
                    (ctx->futhark_mc_segmap_task_131033_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131033_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131039         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131039_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131039_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131039_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131039_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131039_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131039_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131039_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131039_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131039_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131039_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131039_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131039_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131039_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131039_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131039_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131039_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131039_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131039_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131039_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131039_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131039_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131039_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131039_total_iter /
                (ctx->futhark_mc_segmap_parloop_131039_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131039_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131039_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131039_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131047 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131047_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131047_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131047_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131047_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131047_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131047_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131047_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131047_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131047_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131047_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131047_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131044            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131044_runs[i],
                    (long) ctx->futhark_mc_segred_task_131044_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131044_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131044_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131044_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131044_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131044_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131044_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131044_iter[i],
                    (long) ctx->futhark_mc_segred_task_131044_iter[i] /
                    (ctx->futhark_mc_segred_task_131044_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131044_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131042         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131042_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131042_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131042_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131042_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131042_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131042_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131042_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131042_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131042_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131042_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131042_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131042_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131042_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131042_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131042_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131042_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131042_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131042_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131042_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131042_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131042_total_iter /
                (ctx->futhark_mc_segmap_parloop_131042_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131042_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131042_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131042_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131037            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131037_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131037_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131037_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131037_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131037_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131037_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131037_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131037_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131037_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131037_iter[i] /
                    (ctx->futhark_mc_segmap_task_131037_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131037_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131040     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131040_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131040_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131040_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131040_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131040_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131040_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131040_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131040_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131040_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131040_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131040_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131040_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131027         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131027_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131027_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131027_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131027_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131027_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131027_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131027_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131027_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131027_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131027_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131027_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131027_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131027_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131027_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131027_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131027_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131027_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131027_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131027_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131027_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131027_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131027_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131027_total_iter /
                (ctx->futhark_mc_segmap_parloop_131027_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131027_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131027_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131027_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131018            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131018_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131018_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131018_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131018_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131018_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131018_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131018_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131018_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131018_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131018_iter[i] /
                    (ctx->futhark_mc_segmap_task_131018_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131018_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131025     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131025_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131025_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131025_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131025_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131025_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131025_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131025_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131025_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131025_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131025_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131051         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131051_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131051_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131051_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131051_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131051_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131051_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131051_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131051_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131051_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131051_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131051_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131051_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131051_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131051_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131051_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131051_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131051_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131051_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131051_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131051_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131051_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131051_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131051_total_iter /
                (ctx->futhark_mc_segmap_parloop_131051_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131051_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131051_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131051_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131060         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131060_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131060_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131060_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131060_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131060_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131060_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131060_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131060_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131060_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131060_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131060_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131060_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131060_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131060_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131060_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131060_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131060_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131060_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131060_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131060_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131060_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131060_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131060_total_iter /
                (ctx->futhark_mc_segmap_parloop_131060_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131060_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131060_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131060_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131058            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131058_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131058_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131058_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131058_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131058_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131058_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131058_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131058_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131058_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131058_iter[i] /
                    (ctx->futhark_mc_segmap_task_131058_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131058_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131055         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131055_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131055_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131055_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131055_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131055_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131055_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131055_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131055_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131055_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131055_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131055_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131055_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131055_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131055_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131055_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131055_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131055_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131055_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131055_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131055_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131055_total_iter /
                (ctx->futhark_mc_segmap_parloop_131055_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131055_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131055_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131055_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131049            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131049_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131049_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131049_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131049_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131049_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131049_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131049_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131049_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131049_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131049_iter[i] /
                    (ctx->futhark_mc_segmap_task_131049_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131049_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131053     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131053_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131053_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131053_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131053_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131053_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131053_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131053_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131053_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131053_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131053_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131053_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131053_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131064         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131064_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131064_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131064_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131064_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131064_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131064_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131064_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131064_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131064_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131064_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131064_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131064_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131064_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131064_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131064_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131064_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131064_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131064_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131064_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131064_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131064_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131064_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131064_total_iter /
                (ctx->futhark_mc_segmap_parloop_131064_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131064_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131064_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131064_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131073         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131073_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131073_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131073_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131073_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131073_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131073_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131073_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131073_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131073_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131073_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131073_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131073_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131073_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131073_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131073_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131073_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131073_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131073_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131073_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131073_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131073_total_iter /
                (ctx->futhark_mc_segmap_parloop_131073_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131073_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131073_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131073_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131081 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131081_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131081_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131081_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131081_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131081_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131081_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131081_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131081_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131081_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131081_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131081_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131078            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131078_runs[i],
                    (long) ctx->futhark_mc_segred_task_131078_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131078_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131078_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131078_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131078_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131078_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131078_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131078_iter[i],
                    (long) ctx->futhark_mc_segred_task_131078_iter[i] /
                    (ctx->futhark_mc_segred_task_131078_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131078_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131076         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131076_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131076_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131076_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131076_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131076_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131076_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131076_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131076_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131076_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131076_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131076_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131076_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131076_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131076_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131076_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131076_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131076_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131076_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131076_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131076_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131076_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131076_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131076_total_iter /
                (ctx->futhark_mc_segmap_parloop_131076_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131076_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131076_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131076_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131071            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131071_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131071_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131071_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131071_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131071_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131071_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131071_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131071_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131071_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131071_iter[i] /
                    (ctx->futhark_mc_segmap_task_131071_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131071_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131074     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131074_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131074_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131074_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131074_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131074_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131074_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131074_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131074_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131074_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131074_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131074_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131074_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131068         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131068_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131068_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131068_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131068_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131068_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131068_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131068_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131068_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131068_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131068_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131068_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131068_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131068_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131068_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131068_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131068_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131068_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131068_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131068_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131068_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131068_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131068_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131068_total_iter /
                (ctx->futhark_mc_segmap_parloop_131068_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131068_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131068_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131068_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131062            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131062_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131062_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131062_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131062_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131062_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131062_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131062_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131062_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131062_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131062_iter[i] /
                    (ctx->futhark_mc_segmap_task_131062_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131062_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131066     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131066_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131066_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131066_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131066_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131066_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131066_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131066_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131066_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131066_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131066_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131066_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131066_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131085         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131085_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131085_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131085_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131085_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131085_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131085_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131085_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131085_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131085_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131085_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131085_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131085_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131085_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131085_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131085_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131085_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131085_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131085_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131085_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131085_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131085_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131085_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131085_total_iter /
                (ctx->futhark_mc_segmap_parloop_131085_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131085_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131085_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131085_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131094         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131094_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131094_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131094_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131094_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131094_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131094_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131094_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131094_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131094_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131094_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131094_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131094_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131094_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131094_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131094_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131094_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131094_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131094_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131094_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131094_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131094_total_iter /
                (ctx->futhark_mc_segmap_parloop_131094_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131094_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131094_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131094_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131092            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131092_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131092_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131092_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131092_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131092_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131092_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131092_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131092_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131092_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131092_iter[i] /
                    (ctx->futhark_mc_segmap_task_131092_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131092_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131089         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131089_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131089_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131089_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131089_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131089_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131089_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131089_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131089_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131089_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131089_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131089_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131089_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131089_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131089_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131089_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131089_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131089_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131089_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131089_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131089_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131089_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131089_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131089_total_iter /
                (ctx->futhark_mc_segmap_parloop_131089_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131089_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131089_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131089_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131083            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131083_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131083_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131083_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131083_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131083_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131083_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131083_iter[i] /
                    (ctx->futhark_mc_segmap_task_131083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131083_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131087     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131087_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131087_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131087_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131087_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131087_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131087_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131087_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131087_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131087_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131087_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131087_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131087_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131098         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131098_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131098_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131098_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131098_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131098_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131098_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131098_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131098_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131098_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131098_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131098_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131098_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131098_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131098_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131098_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131098_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131098_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131098_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131098_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131098_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131098_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131098_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131098_total_iter /
                (ctx->futhark_mc_segmap_parloop_131098_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131098_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131098_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131098_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131112 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131112_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131112_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131112_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131112_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131112_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131112_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131112_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131112_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131112_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131112_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131112_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131109            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131109_runs[i],
                    (long) ctx->futhark_mc_segred_task_131109_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131109_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131109_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131109_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131109_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131109_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131109_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131109_iter[i],
                    (long) ctx->futhark_mc_segred_task_131109_iter[i] /
                    (ctx->futhark_mc_segred_task_131109_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131109_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131117   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131117_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131117_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131117_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131117_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131117_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131117_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131117_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131117_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131117_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131117_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131117_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131119   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131119_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131119_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131119_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131119_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131119_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131119_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131119_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131119_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131119_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131119_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131119_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131114           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131114_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131114_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131114_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131114_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131114_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131114_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131114_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131114_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131114_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131114_iter[i] /
                    (ctx->futhark_mc_segscan_task_131114_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131114_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131124 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131124_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131124_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131124_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131124_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131124_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131124_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131124_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131124_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131124_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131124_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131124_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131121            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131121_runs[i],
                    (long) ctx->futhark_mc_segred_task_131121_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131121_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131121_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131121_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131121_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131121_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131121_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131121_iter[i],
                    (long) ctx->futhark_mc_segred_task_131121_iter[i] /
                    (ctx->futhark_mc_segred_task_131121_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131121_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131129   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131129_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131129_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131129_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131129_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131129_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131129_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131129_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131129_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131129_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131129_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131129_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131131   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131131_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131131_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131131_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131131_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131131_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131131_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131131_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131131_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131131_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131131_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131131_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131126           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131126_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131126_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131126_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131126_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131126_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131126_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131126_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131126_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131126_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131126_iter[i] /
                    (ctx->futhark_mc_segscan_task_131126_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131126_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131136 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131136_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131136_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131136_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131136_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131136_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131136_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131136_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131136_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131136_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131136_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131136_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131133            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131133_runs[i],
                    (long) ctx->futhark_mc_segred_task_131133_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131133_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131133_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131133_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131133_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131133_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131133_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131133_iter[i],
                    (long) ctx->futhark_mc_segred_task_131133_iter[i] /
                    (ctx->futhark_mc_segred_task_131133_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131133_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131141   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131141_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131141_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131141_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131141_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131141_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131141_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131141_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131141_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131141_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131141_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131141_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131143   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131143_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131143_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131143_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131143_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131143_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131143_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131143_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131143_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131143_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131143_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131143_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131138           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131138_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131138_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131138_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131138_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131138_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131138_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131138_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131138_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131138_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131138_iter[i] /
                    (ctx->futhark_mc_segscan_task_131138_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131138_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131104         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131104_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131104_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131104_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131104_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131104_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131104_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131104_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131104_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131104_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131104_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131104_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131104_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131104_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131104_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131104_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131104_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131104_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131104_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131104_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131104_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131104_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131104_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131104_total_iter /
                (ctx->futhark_mc_segmap_parloop_131104_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131104_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131104_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131104_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131096            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131096_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131096_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131096_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131096_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131096_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131096_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131096_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131096_iter[i] /
                    (ctx->futhark_mc_segmap_task_131096_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131096_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131102     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131102_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131102_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131102_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131102_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131102_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131102_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131102_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131102_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131102_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131102_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131102_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131102_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131147         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131147_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131147_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131147_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131147_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131147_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131147_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131147_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131147_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131147_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131147_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131147_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131147_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131147_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131147_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131147_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131147_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131147_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131147_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131147_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131147_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131147_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131147_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131147_total_iter /
                (ctx->futhark_mc_segmap_parloop_131147_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131147_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131147_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131147_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131156         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131156_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131156_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131156_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131156_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131156_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131156_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131156_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131156_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131156_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131156_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131156_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131156_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131156_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131156_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131156_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131156_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131156_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131156_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131156_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131156_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131156_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131156_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131156_total_iter /
                (ctx->futhark_mc_segmap_parloop_131156_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131156_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131156_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131156_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131164 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131164_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131164_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131164_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131164_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131164_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131164_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131164_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131164_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131164_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131164_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131164_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131161            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131161_runs[i],
                    (long) ctx->futhark_mc_segred_task_131161_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131161_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131161_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131161_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131161_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131161_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131161_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131161_iter[i],
                    (long) ctx->futhark_mc_segred_task_131161_iter[i] /
                    (ctx->futhark_mc_segred_task_131161_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131161_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131169 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131169_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131169_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131169_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131169_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131169_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131169_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131169_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131169_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131169_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131169_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131169_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131166            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131166_runs[i],
                    (long) ctx->futhark_mc_segred_task_131166_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131166_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131166_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131166_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131166_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131166_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131166_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131166_iter[i],
                    (long) ctx->futhark_mc_segred_task_131166_iter[i] /
                    (ctx->futhark_mc_segred_task_131166_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131166_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131159         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131159_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131159_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131159_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131159_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131159_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131159_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131159_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131159_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131159_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131159_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131159_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131159_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131159_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131159_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131159_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131159_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131159_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131159_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131159_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131159_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131159_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131159_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131159_total_iter /
                (ctx->futhark_mc_segmap_parloop_131159_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131159_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131159_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131159_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131154            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131154_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131154_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131154_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131154_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131154_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131154_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131154_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131154_iter[i] /
                    (ctx->futhark_mc_segmap_task_131154_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131154_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131157     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131157_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131157_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131157_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131157_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131157_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131157_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131157_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131157_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131157_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131157_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131157_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131157_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131151         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131151_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131151_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131151_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131151_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131151_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131151_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131151_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131151_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131151_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131151_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131151_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131151_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131151_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131151_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131151_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131151_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131151_total_iter /
                (ctx->futhark_mc_segmap_parloop_131151_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131151_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131151_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131151_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131145            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131145_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131145_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131145_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131145_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131145_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131145_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131145_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131145_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131145_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131145_iter[i] /
                    (ctx->futhark_mc_segmap_task_131145_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131145_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131149     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131149_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131149_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131149_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131149_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131149_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131149_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131149_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131149_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131173         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131173_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131173_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131173_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131173_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131173_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131173_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131173_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131173_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131173_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131173_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131173_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131173_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131173_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131173_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131173_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131173_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131173_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131173_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131173_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131173_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131173_total_iter /
                (ctx->futhark_mc_segmap_parloop_131173_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131173_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131173_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131173_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131184         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131184_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131184_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131184_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131184_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131184_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131184_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131184_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131184_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131184_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131184_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131184_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131184_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131184_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131184_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131184_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131184_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131184_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131184_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131184_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131184_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131184_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131184_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131184_total_iter /
                (ctx->futhark_mc_segmap_parloop_131184_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131184_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131184_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131184_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131194 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131194_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131194_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131194_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131194_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131194_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131194_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131194_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131194_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131194_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131194_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131194_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131189            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131189_runs[i],
                    (long) ctx->futhark_mc_segred_task_131189_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131189_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131189_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131189_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131189_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131189_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131189_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131189_iter[i],
                    (long) ctx->futhark_mc_segred_task_131189_iter[i] /
                    (ctx->futhark_mc_segred_task_131189_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131189_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131200 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131200_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131200_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131200_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131200_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131200_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131200_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131200_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131200_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131200_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131200_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131200_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131196            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131196_runs[i],
                    (long) ctx->futhark_mc_segred_task_131196_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131196_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131196_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131196_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131196_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131196_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131196_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131196_iter[i],
                    (long) ctx->futhark_mc_segred_task_131196_iter[i] /
                    (ctx->futhark_mc_segred_task_131196_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131196_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131187         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131187_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131187_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131187_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131187_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131187_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131187_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131187_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131187_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131187_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131187_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131187_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131187_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131187_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131187_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131187_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131187_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131187_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131187_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131187_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131187_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131187_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131187_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131187_total_iter /
                (ctx->futhark_mc_segmap_parloop_131187_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131187_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131187_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131187_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131182            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131182_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131182_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131182_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131182_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131182_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131182_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131182_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131182_iter[i] /
                    (ctx->futhark_mc_segmap_task_131182_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131182_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131185     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131185_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131185_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131185_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131185_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131185_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131185_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131185_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131185_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131185_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131185_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131178         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131178_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131178_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131178_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131178_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131178_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131178_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131178_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131178_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131178_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131178_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131178_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131178_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131178_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131178_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131178_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131178_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131178_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131178_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131178_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131178_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131178_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131178_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131178_total_iter /
                (ctx->futhark_mc_segmap_parloop_131178_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131178_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131178_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131178_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131171            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131171_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131171_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131171_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131171_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131171_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131171_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131171_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131171_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131171_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131171_iter[i] /
                    (ctx->futhark_mc_segmap_task_131171_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131171_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131176     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131176_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131176_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131176_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131176_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131176_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131176_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131176_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131176_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131176_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131176_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131176_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131176_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131204         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131204_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131204_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131204_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131204_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131204_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131204_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131204_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131204_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131204_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131204_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131204_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131204_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131204_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131204_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131204_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131204_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131204_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131204_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131204_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131204_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131204_total_iter /
                (ctx->futhark_mc_segmap_parloop_131204_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131204_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131204_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131204_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131215         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131215_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131215_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131215_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131215_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131215_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131215_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131215_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131215_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131215_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131215_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131215_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131215_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131215_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131215_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131215_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131215_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131215_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131215_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131215_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131215_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131215_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131215_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131215_total_iter /
                (ctx->futhark_mc_segmap_parloop_131215_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131215_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131215_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131215_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131227 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131227_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131227_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131227_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131227_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131227_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131227_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131227_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131227_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131227_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131227_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131227_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131220            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131220_runs[i],
                    (long) ctx->futhark_mc_segred_task_131220_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131220_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131220_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131220_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131220_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131220_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131220_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131220_iter[i],
                    (long) ctx->futhark_mc_segred_task_131220_iter[i] /
                    (ctx->futhark_mc_segred_task_131220_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131220_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131233 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131233_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131233_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131233_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131233_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131233_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131233_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131233_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131233_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131233_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131233_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131233_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131229            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131229_runs[i],
                    (long) ctx->futhark_mc_segred_task_131229_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131229_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131229_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131229_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131229_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131229_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131229_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131229_iter[i],
                    (long) ctx->futhark_mc_segred_task_131229_iter[i] /
                    (ctx->futhark_mc_segred_task_131229_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131229_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131218         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131218_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131218_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131218_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131218_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131218_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131218_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131218_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131218_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131218_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131218_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131218_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131218_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131218_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131218_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131218_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131218_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131218_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131218_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131218_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131218_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131218_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131218_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131218_total_iter /
                (ctx->futhark_mc_segmap_parloop_131218_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131218_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131218_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131218_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131213            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131213_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131213_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131213_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131213_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131213_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131213_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131213_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131213_iter[i] /
                    (ctx->futhark_mc_segmap_task_131213_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131213_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131216     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131216_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131216_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131216_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131216_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131216_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131216_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131216_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131216_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131216_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131216_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131216_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131216_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131209         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131209_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131209_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131209_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131209_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131209_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131209_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131209_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131209_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131209_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131209_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131209_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131209_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131209_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131209_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131209_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131209_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131209_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131209_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131209_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131209_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131209_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131209_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131209_total_iter /
                (ctx->futhark_mc_segmap_parloop_131209_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131209_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131209_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131209_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131202            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131202_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131202_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131202_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131202_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131202_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131202_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131202_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131202_iter[i] /
                    (ctx->futhark_mc_segmap_task_131202_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131202_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131207     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131207_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131207_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131207_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131207_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131207_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131207_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131207_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131207_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131207_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131207_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131207_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131207_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131237         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131237_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131237_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131237_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131237_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131237_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131237_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131237_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131237_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131237_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131237_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131237_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131237_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131237_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131237_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131237_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131237_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131237_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131237_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131237_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131237_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131237_total_iter /
                (ctx->futhark_mc_segmap_parloop_131237_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131237_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131237_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131237_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131247         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131247_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131247_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131247_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131247_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131247_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131247_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131247_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131247_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131247_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131247_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131247_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131247_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131247_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131247_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131247_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131247_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131247_total_iter /
                (ctx->futhark_mc_segmap_parloop_131247_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131247_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131247_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131247_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131257 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131257_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131257_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131257_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131257_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131257_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131257_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131257_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131257_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131257_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131257_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131257_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131254            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131254_runs[i],
                    (long) ctx->futhark_mc_segred_task_131254_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131254_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131254_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131254_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131254_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131254_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131254_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131254_iter[i],
                    (long) ctx->futhark_mc_segred_task_131254_iter[i] /
                    (ctx->futhark_mc_segred_task_131254_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131254_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131262 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131262_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131262_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131262_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131262_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131262_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131262_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131262_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131262_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131262_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131262_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131262_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131259            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131259_runs[i],
                    (long) ctx->futhark_mc_segred_task_131259_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131259_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131259_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131259_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131259_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131259_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131259_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131259_iter[i],
                    (long) ctx->futhark_mc_segred_task_131259_iter[i] /
                    (ctx->futhark_mc_segred_task_131259_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131259_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131251         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131251_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131251_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131251_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131251_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131251_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131251_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131251_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131251_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131251_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131251_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131251_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131251_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131251_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131251_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131251_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131251_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131251_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131251_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131251_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131251_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131251_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131251_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131251_total_iter /
                (ctx->futhark_mc_segmap_parloop_131251_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131251_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131251_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131251_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131245            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131245_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131245_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131245_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131245_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131245_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131245_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131245_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131245_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131245_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131245_iter[i] /
                    (ctx->futhark_mc_segmap_task_131245_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131245_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131249     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131249_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131249_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131249_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131249_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131249_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131249_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131249_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131249_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131249_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131249_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131249_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131249_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131242         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131242_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131242_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131242_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131242_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131242_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131242_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131242_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131242_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131242_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131242_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131242_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131242_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131242_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131242_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131242_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131242_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131242_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131242_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131242_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131242_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131242_total_iter /
                (ctx->futhark_mc_segmap_parloop_131242_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131242_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131242_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131242_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131235            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131235_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131235_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131235_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131235_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131235_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131235_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131235_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131235_iter[i] /
                    (ctx->futhark_mc_segmap_task_131235_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131235_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131240     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131240_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131240_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131240_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131240_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131240_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131240_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131240_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131240_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131240_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131240_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131240_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131240_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131266         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131266_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131266_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131266_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131266_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131266_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131266_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131266_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131266_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131266_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131266_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131266_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131266_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131266_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131266_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131266_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131266_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131266_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131266_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131266_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131266_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131266_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131266_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131266_total_iter /
                (ctx->futhark_mc_segmap_parloop_131266_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131266_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131266_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131266_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131279         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131279_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131279_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131279_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131279_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131279_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131279_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131279_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131279_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131279_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131279_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131279_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131279_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131279_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131279_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131279_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131279_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131279_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131279_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131279_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131279_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131279_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131279_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131279_total_iter /
                (ctx->futhark_mc_segmap_parloop_131279_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131279_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131279_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131279_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131293 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131293_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131293_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131293_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131293_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131293_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131293_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131293_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131293_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131293_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131293_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131293_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131288            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131288_runs[i],
                    (long) ctx->futhark_mc_segred_task_131288_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131288_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131288_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131288_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131288_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131288_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131288_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131288_iter[i],
                    (long) ctx->futhark_mc_segred_task_131288_iter[i] /
                    (ctx->futhark_mc_segred_task_131288_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131288_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131299 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131299_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131299_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131299_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131299_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131299_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131299_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131299_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131299_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131299_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131299_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131299_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131295            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131295_runs[i],
                    (long) ctx->futhark_mc_segred_task_131295_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131295_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131295_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131295_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131295_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131295_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131295_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131295_iter[i],
                    (long) ctx->futhark_mc_segred_task_131295_iter[i] /
                    (ctx->futhark_mc_segred_task_131295_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131295_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131284         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131284_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131284_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131284_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131284_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131284_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131284_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131284_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131284_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131284_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131284_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131284_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131284_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131284_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131284_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131284_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131284_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131284_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131284_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131284_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131284_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131284_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131284_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131284_total_iter /
                (ctx->futhark_mc_segmap_parloop_131284_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131284_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131284_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131284_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131277            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131277_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131277_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131277_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131277_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131277_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131277_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131277_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131277_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131277_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131277_iter[i] /
                    (ctx->futhark_mc_segmap_task_131277_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131277_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131282     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131282_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131282_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131282_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131282_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131282_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131282_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131282_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131282_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131282_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131282_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131282_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131282_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131273         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131273_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131273_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131273_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131273_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131273_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131273_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131273_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131273_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131273_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131273_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131273_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131273_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131273_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131273_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131273_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131273_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131273_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131273_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131273_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131273_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131273_total_iter /
                (ctx->futhark_mc_segmap_parloop_131273_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131273_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131273_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131273_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131264            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131264_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131264_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131264_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131264_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131264_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131264_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131264_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131264_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131264_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131264_iter[i] /
                    (ctx->futhark_mc_segmap_task_131264_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131264_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131271     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131271_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131271_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131271_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131271_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131271_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131271_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131271_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131271_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131271_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131271_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131271_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131271_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131303         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131303_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131303_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131303_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131303_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131303_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131303_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131303_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131303_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131303_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131303_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131303_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131303_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131303_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131303_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131303_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131303_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131303_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131303_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131303_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131303_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131303_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131303_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131303_total_iter /
                (ctx->futhark_mc_segmap_parloop_131303_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131303_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131303_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131303_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131318         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131318_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131318_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131318_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131318_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131318_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131318_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131318_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131318_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131318_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131318_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131318_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131318_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131318_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131318_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131318_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131318_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131318_total_iter /
                (ctx->futhark_mc_segmap_parloop_131318_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131318_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131318_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131318_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131333         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131333_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131333_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131333_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131333_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131333_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131333_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131333_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131333_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131333_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131333_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131333_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131333_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131333_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131333_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131333_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131333_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131333_total_iter /
                (ctx->futhark_mc_segmap_parloop_131333_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131333_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131333_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131333_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131331            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131331_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131331_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131331_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131331_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131331_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131331_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131331_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131331_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131331_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131331_iter[i] /
                    (ctx->futhark_mc_segmap_task_131331_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131331_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131342 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131342_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131342_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131342_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131342_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131342_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131342_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131342_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131342_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131342_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131342_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131342_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131335            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131335_runs[i],
                    (long) ctx->futhark_mc_segred_task_131335_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131335_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131335_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131335_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131335_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131335_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131335_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131335_iter[i],
                    (long) ctx->futhark_mc_segred_task_131335_iter[i] /
                    (ctx->futhark_mc_segred_task_131335_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131335_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131348 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131348_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131348_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131348_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131348_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131348_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131348_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131348_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131348_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131348_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131348_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131348_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131344            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131344_runs[i],
                    (long) ctx->futhark_mc_segred_task_131344_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131344_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131344_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131344_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131344_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131344_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131344_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131344_iter[i],
                    (long) ctx->futhark_mc_segred_task_131344_iter[i] /
                    (ctx->futhark_mc_segred_task_131344_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131344_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131325         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131325_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131325_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131325_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131325_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131325_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131325_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131325_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131325_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131325_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131325_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131325_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131325_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131325_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131325_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131325_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131325_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131325_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131325_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131325_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131325_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131325_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131325_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131325_total_iter /
                (ctx->futhark_mc_segmap_parloop_131325_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131325_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131325_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131325_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131316            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131316_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131316_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131316_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131316_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131316_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131316_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131316_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131316_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131316_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131316_iter[i] /
                    (ctx->futhark_mc_segmap_task_131316_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131316_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131323     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131323_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131323_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131323_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131323_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131323_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131323_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131323_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131323_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131323_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131323_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131323_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131323_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131312         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131312_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131312_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131312_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131312_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131312_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131312_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131312_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131312_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131312_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131312_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131312_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131312_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131312_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131312_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131312_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131312_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131312_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131312_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131312_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131312_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131312_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131312_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131312_total_iter /
                (ctx->futhark_mc_segmap_parloop_131312_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131312_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131312_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131312_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131301            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131301_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131301_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131301_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131301_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131301_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131301_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131301_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131301_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131301_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131301_iter[i] /
                    (ctx->futhark_mc_segmap_task_131301_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131301_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131310     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131310_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131310_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131310_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131310_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131310_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131310_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131310_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131310_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131310_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131310_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131310_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131310_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131352         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131352_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131352_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131352_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131352_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131352_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131352_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131352_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131352_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131352_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131352_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131352_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131352_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131352_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131352_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131352_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131352_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131352_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131352_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131352_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131352_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131352_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131352_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131352_total_iter /
                (ctx->futhark_mc_segmap_parloop_131352_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131352_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131352_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131352_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131361         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131361_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131361_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131361_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131361_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131361_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131361_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131361_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131361_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131361_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131361_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131361_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131361_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131361_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131361_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131361_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131361_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131361_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131361_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131361_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131361_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131361_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131361_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131361_total_iter /
                (ctx->futhark_mc_segmap_parloop_131361_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131361_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131361_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131361_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131359            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131359_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131359_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131359_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131359_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131359_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131359_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131359_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131359_iter[i] /
                    (ctx->futhark_mc_segmap_task_131359_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131359_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131356         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131356_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131356_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131356_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131356_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131356_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131356_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131356_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131356_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131356_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131356_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131356_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131356_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131356_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131356_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131356_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131356_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131356_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131356_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131356_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131356_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131356_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131356_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131356_total_iter /
                (ctx->futhark_mc_segmap_parloop_131356_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131356_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131356_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131356_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131350            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131350_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131350_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131350_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131350_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131350_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131350_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131350_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131350_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131350_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131350_iter[i] /
                    (ctx->futhark_mc_segmap_task_131350_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131350_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131354     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131354_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131354_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131354_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131354_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131354_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131354_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131354_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131354_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131354_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131354_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131354_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131354_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131365         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131365_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131365_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131365_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131365_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131365_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131365_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131365_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131365_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131365_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131365_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131365_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131365_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131365_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131365_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131365_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131365_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131365_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131365_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131365_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131365_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131365_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131365_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131365_total_iter /
                (ctx->futhark_mc_segmap_parloop_131365_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131365_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131365_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131365_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131380         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131380_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131380_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131380_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131380_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131380_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131380_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131380_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131380_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131380_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131380_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131380_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131380_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131380_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131380_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131380_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131380_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131380_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131380_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131380_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131380_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131380_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131380_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131380_total_iter /
                (ctx->futhark_mc_segmap_parloop_131380_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131380_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131380_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131380_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131378            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131378_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131378_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131378_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131378_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131378_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131378_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131378_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131378_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131378_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131378_iter[i] /
                    (ctx->futhark_mc_segmap_task_131378_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131378_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131384         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131384_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131384_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131384_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131384_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131384_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131384_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131384_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131384_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131384_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131384_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131384_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131384_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131384_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131384_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131384_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131384_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131384_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131384_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131384_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131384_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131384_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131384_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131384_total_iter /
                (ctx->futhark_mc_segmap_parloop_131384_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131384_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131384_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131384_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131382            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131382_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131382_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131382_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131382_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131382_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131382_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131382_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131382_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131382_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131382_iter[i] /
                    (ctx->futhark_mc_segmap_task_131382_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131382_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131372         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131372_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131372_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131372_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131372_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131372_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131372_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131372_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131372_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131372_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131372_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131372_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131372_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131372_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131372_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131372_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131372_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131372_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131372_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131372_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131372_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131372_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131372_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131372_total_iter /
                (ctx->futhark_mc_segmap_parloop_131372_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131372_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131372_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131372_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131363            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131363_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131363_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131363_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131363_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131363_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131363_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131363_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131363_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131363_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131363_iter[i] /
                    (ctx->futhark_mc_segmap_task_131363_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131363_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131370     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131370_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131370_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131370_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131370_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131370_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131370_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131370_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131370_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131370_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131370_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131370_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131370_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131388         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131388_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131388_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131388_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131388_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131388_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131388_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131388_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131388_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131388_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131388_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131388_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131388_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131388_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131388_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131388_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131388_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131388_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131388_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131388_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131388_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131388_total_iter /
                (ctx->futhark_mc_segmap_parloop_131388_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131388_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131388_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131388_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131397         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131397_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131397_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131397_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131397_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131397_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131397_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131397_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131397_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131397_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131397_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131397_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131397_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131397_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131397_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131397_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131397_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131397_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131397_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131397_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131397_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131397_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131397_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131397_total_iter /
                (ctx->futhark_mc_segmap_parloop_131397_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131397_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131397_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131397_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131405 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131405_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131405_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131405_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131405_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131405_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131405_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131405_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131405_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131405_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131405_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131405_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131402            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131402_runs[i],
                    (long) ctx->futhark_mc_segred_task_131402_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131402_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131402_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131402_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131402_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131402_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131402_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131402_iter[i],
                    (long) ctx->futhark_mc_segred_task_131402_iter[i] /
                    (ctx->futhark_mc_segred_task_131402_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131402_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131410 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131410_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131410_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131410_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131410_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131410_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131410_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131410_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131410_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131410_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131410_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131410_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131407            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131407_runs[i],
                    (long) ctx->futhark_mc_segred_task_131407_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131407_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131407_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131407_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131407_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131407_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131407_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131407_iter[i],
                    (long) ctx->futhark_mc_segred_task_131407_iter[i] /
                    (ctx->futhark_mc_segred_task_131407_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131407_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131400         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131400_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131400_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131400_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131400_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131400_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131400_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131400_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131400_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131400_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131400_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131400_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131400_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131400_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131400_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131400_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131400_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131400_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131400_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131400_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131400_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131400_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131400_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131400_total_iter /
                (ctx->futhark_mc_segmap_parloop_131400_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131400_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131400_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131400_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131395            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131395_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131395_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131395_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131395_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131395_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131395_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131395_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131395_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131395_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131395_iter[i] /
                    (ctx->futhark_mc_segmap_task_131395_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131395_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131398     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131398_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131398_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131398_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131398_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131398_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131398_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131398_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131398_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131398_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131398_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131398_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131398_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131392         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131392_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131392_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131392_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131392_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131392_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131392_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131392_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131392_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131392_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131392_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131392_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131392_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131392_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131392_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131392_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131392_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131392_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131392_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131392_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131392_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131392_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131392_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131392_total_iter /
                (ctx->futhark_mc_segmap_parloop_131392_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131392_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131392_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131392_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131386            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131386_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131386_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131386_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131386_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131386_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131386_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131386_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131386_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131386_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131386_iter[i] /
                    (ctx->futhark_mc_segmap_task_131386_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131386_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131390     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131390_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131390_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131390_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131390_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131390_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131390_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131390_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131390_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131390_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131390_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131414         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131414_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131414_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131414_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131414_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131414_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131414_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131414_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131414_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131414_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131414_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131414_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131414_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131414_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131414_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131414_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131414_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131414_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131414_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131414_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131414_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131414_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131414_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131414_total_iter /
                (ctx->futhark_mc_segmap_parloop_131414_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131414_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131414_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131414_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131425         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131425_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131425_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131425_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131425_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131425_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131425_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131425_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131425_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131425_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131425_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131425_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131425_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131425_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131425_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131425_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131425_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131425_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131425_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131425_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131425_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131425_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131425_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131425_total_iter /
                (ctx->futhark_mc_segmap_parloop_131425_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131425_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131425_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131425_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131435 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131435_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131435_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131435_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131435_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131435_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131435_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131435_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131435_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131435_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131435_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131435_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131430            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131430_runs[i],
                    (long) ctx->futhark_mc_segred_task_131430_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131430_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131430_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131430_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131430_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131430_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131430_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131430_iter[i],
                    (long) ctx->futhark_mc_segred_task_131430_iter[i] /
                    (ctx->futhark_mc_segred_task_131430_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131430_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131441 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131441_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131441_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131441_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131441_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131441_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131441_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131441_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131441_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131441_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131441_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131441_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131437            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131437_runs[i],
                    (long) ctx->futhark_mc_segred_task_131437_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131437_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131437_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131437_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131437_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131437_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131437_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131437_iter[i],
                    (long) ctx->futhark_mc_segred_task_131437_iter[i] /
                    (ctx->futhark_mc_segred_task_131437_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131437_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131428         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131428_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131428_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131428_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131428_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131428_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131428_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131428_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131428_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131428_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131428_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131428_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131428_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131428_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131428_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131428_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131428_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131428_total_iter /
                (ctx->futhark_mc_segmap_parloop_131428_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131428_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131428_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131428_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131423            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131423_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131423_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131423_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131423_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131423_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131423_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131423_iter[i] /
                    (ctx->futhark_mc_segmap_task_131423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131423_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131426     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131426_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131426_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131426_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131426_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131426_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131426_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131426_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131426_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131419         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131419_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131419_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131419_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131419_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131419_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131419_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131419_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131419_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131419_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131419_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131419_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131419_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131419_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131419_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131419_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131419_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131419_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131419_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131419_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131419_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131419_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131419_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131419_total_iter /
                (ctx->futhark_mc_segmap_parloop_131419_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131419_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131419_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131419_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131412            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131412_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131412_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131412_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131412_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131412_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131412_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131412_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131412_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131412_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131412_iter[i] /
                    (ctx->futhark_mc_segmap_task_131412_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131412_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131417     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131417_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131417_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131417_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131417_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131417_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131417_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131417_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131417_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131417_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131417_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131417_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131417_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131445         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131445_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131445_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131445_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131445_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131445_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131445_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131445_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131445_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131445_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131445_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131445_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131445_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131445_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131445_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131445_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131445_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131445_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131445_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131445_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131445_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131445_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131445_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131445_total_iter /
                (ctx->futhark_mc_segmap_parloop_131445_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131445_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131445_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131445_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131456         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131456_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131456_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131456_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131456_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131456_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131456_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131456_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131456_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131456_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131456_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131456_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131456_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131456_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131456_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131456_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131456_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131456_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131456_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131456_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131456_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131456_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131456_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131456_total_iter /
                (ctx->futhark_mc_segmap_parloop_131456_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131456_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131456_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131456_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131468 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131468_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131468_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131468_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131468_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131468_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131468_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131468_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131468_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131468_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131468_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131468_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131461            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131461_runs[i],
                    (long) ctx->futhark_mc_segred_task_131461_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131461_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131461_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131461_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131461_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131461_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131461_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131461_iter[i],
                    (long) ctx->futhark_mc_segred_task_131461_iter[i] /
                    (ctx->futhark_mc_segred_task_131461_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131461_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131474 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131474_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131474_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131474_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131474_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131474_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131474_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131474_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131474_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131474_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131474_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131474_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131470            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131470_runs[i],
                    (long) ctx->futhark_mc_segred_task_131470_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131470_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131470_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131470_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131470_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131470_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131470_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131470_iter[i],
                    (long) ctx->futhark_mc_segred_task_131470_iter[i] /
                    (ctx->futhark_mc_segred_task_131470_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131470_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131459         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131459_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131459_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131459_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131459_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131459_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131459_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131459_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131459_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131459_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131459_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131459_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131459_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131459_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131459_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131459_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131459_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131459_total_iter /
                (ctx->futhark_mc_segmap_parloop_131459_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131459_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131459_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131459_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131454            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131454_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131454_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131454_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131454_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131454_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131454_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131454_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131454_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131454_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131454_iter[i] /
                    (ctx->futhark_mc_segmap_task_131454_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131454_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131457     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131457_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131457_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131457_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131457_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131457_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131457_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131450         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131450_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131450_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131450_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131450_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131450_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131450_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131450_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131450_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131450_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131450_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131450_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131450_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131450_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131450_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131450_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131450_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131450_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131450_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131450_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131450_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131450_total_iter /
                (ctx->futhark_mc_segmap_parloop_131450_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131450_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131450_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131450_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131443            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131443_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131443_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131443_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131443_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131443_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131443_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131443_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131443_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131443_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131443_iter[i] /
                    (ctx->futhark_mc_segmap_task_131443_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131443_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131448     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131448_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131448_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131448_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131448_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131448_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131448_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131448_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131448_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131448_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131448_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131448_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131448_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131478         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131478_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131478_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131478_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131478_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131478_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131478_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131478_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131478_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131478_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131478_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131478_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131478_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131478_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131478_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131478_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131478_total_iter /
                (ctx->futhark_mc_segmap_parloop_131478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131478_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131478_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131478_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131488         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131488_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131488_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131488_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131488_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131488_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131488_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131488_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131488_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131488_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131488_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131488_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131488_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131488_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131488_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131488_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131488_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131488_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131488_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131488_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131488_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131488_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131488_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131488_total_iter /
                (ctx->futhark_mc_segmap_parloop_131488_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131488_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131488_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131488_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131498 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131498_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131498_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131498_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131498_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131498_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131498_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131498_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131498_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131498_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131495            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131495_runs[i],
                    (long) ctx->futhark_mc_segred_task_131495_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131495_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131495_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131495_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131495_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131495_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131495_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131495_iter[i],
                    (long) ctx->futhark_mc_segred_task_131495_iter[i] /
                    (ctx->futhark_mc_segred_task_131495_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131495_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131503 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131503_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131503_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131503_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131503_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131503_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131503_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131503_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131503_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131503_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131503_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131503_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131500            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131500_runs[i],
                    (long) ctx->futhark_mc_segred_task_131500_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131500_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131500_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131500_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131500_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131500_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131500_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131500_iter[i],
                    (long) ctx->futhark_mc_segred_task_131500_iter[i] /
                    (ctx->futhark_mc_segred_task_131500_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131500_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131492         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131492_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131492_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131492_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131492_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131492_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131492_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131492_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131492_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131492_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131492_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131492_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131492_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131492_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131492_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131492_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131492_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131492_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131492_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131492_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131492_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131492_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131492_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131492_total_iter /
                (ctx->futhark_mc_segmap_parloop_131492_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131492_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131492_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131492_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131486            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131486_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131486_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131486_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131486_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131486_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131486_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131486_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131486_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131486_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131486_iter[i] /
                    (ctx->futhark_mc_segmap_task_131486_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131486_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131490     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131490_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131490_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131490_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131490_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131490_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131490_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131490_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131490_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131490_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131490_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131490_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131490_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131483         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131483_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131483_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131483_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131483_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131483_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131483_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131483_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131483_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131483_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131483_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131483_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131483_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131483_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131483_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131483_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131483_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131483_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131483_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131483_total_iter /
                (ctx->futhark_mc_segmap_parloop_131483_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131483_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131483_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131483_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131476            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131476_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131476_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131476_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131476_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131476_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131476_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131476_iter[i] /
                    (ctx->futhark_mc_segmap_task_131476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131476_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131481     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131481_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131481_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131481_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131481_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131481_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131481_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131481_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131481_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131507         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131507_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131507_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131507_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131507_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131507_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131507_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131507_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131507_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131507_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131507_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131507_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131507_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131507_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131507_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131507_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131507_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131507_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131507_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131507_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131507_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131507_total_iter /
                (ctx->futhark_mc_segmap_parloop_131507_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131507_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131507_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131507_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131520         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131520_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131520_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131520_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131520_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131520_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131520_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131520_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131520_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131520_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131520_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131520_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131520_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131520_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131520_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131520_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131520_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131520_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131520_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131520_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131520_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131520_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131520_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131520_total_iter /
                (ctx->futhark_mc_segmap_parloop_131520_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131520_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131520_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131520_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131534 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131534_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131534_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131529            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131529_runs[i],
                    (long) ctx->futhark_mc_segred_task_131529_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131529_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131529_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131529_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131529_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131529_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131529_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131529_iter[i],
                    (long) ctx->futhark_mc_segred_task_131529_iter[i] /
                    (ctx->futhark_mc_segred_task_131529_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131529_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131540 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131540_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131540_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131540_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131540_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131540_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131540_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131540_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131540_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131540_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131540_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131540_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131536            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131536_runs[i],
                    (long) ctx->futhark_mc_segred_task_131536_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131536_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131536_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131536_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131536_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131536_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131536_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131536_iter[i],
                    (long) ctx->futhark_mc_segred_task_131536_iter[i] /
                    (ctx->futhark_mc_segred_task_131536_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131536_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131525         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131525_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131525_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131525_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131525_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131525_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131525_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131525_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131525_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131525_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131525_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131525_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131525_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131525_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131525_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131525_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131525_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131525_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131525_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131525_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131525_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131525_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131525_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131525_total_iter /
                (ctx->futhark_mc_segmap_parloop_131525_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131525_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131525_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131525_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131518            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131518_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131518_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131518_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131518_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131518_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131518_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131518_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131518_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131518_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131518_iter[i] /
                    (ctx->futhark_mc_segmap_task_131518_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131518_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131523     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131523_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131523_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131523_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131523_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131523_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131523_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131523_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131523_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131523_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131523_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131523_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131523_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131514         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131514_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131514_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131514_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131514_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131514_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131514_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131514_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131514_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131514_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131514_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131514_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131514_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131514_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131514_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131514_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131514_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131514_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131514_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131514_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131514_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131514_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131514_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131514_total_iter /
                (ctx->futhark_mc_segmap_parloop_131514_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131514_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131514_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131514_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131505            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131505_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131505_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131505_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131505_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131505_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131505_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131505_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131505_iter[i] /
                    (ctx->futhark_mc_segmap_task_131505_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131505_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131512     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131512_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131512_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131512_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131512_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131512_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131512_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131512_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131512_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131512_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131512_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131512_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131512_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131544         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131544_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131544_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131544_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131544_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131544_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131544_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131544_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131544_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131544_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131544_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131544_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131544_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131544_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131544_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131544_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131544_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131544_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131544_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131544_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131544_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131544_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131544_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131544_total_iter /
                (ctx->futhark_mc_segmap_parloop_131544_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131544_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131544_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131544_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131559         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131559_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131559_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131559_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131559_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131559_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131559_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131559_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131559_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131559_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131559_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131559_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131559_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131559_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131559_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131559_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131559_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131559_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131559_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131559_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131559_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131559_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131559_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131559_total_iter /
                (ctx->futhark_mc_segmap_parloop_131559_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131559_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131559_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131559_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131574         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131574_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131574_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131574_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131574_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131574_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131574_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131574_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131574_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131574_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131574_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131574_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131574_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131574_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131574_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131574_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131574_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131574_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131574_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131574_total_iter /
                (ctx->futhark_mc_segmap_parloop_131574_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131574_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131574_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131574_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131572            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131572_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131572_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131572_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131572_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131572_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131572_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131572_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131572_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131572_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131572_iter[i] /
                    (ctx->futhark_mc_segmap_task_131572_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131572_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131583 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131583_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131583_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131583_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131583_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131583_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131583_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131583_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131583_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131583_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131583_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131583_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131576            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131576_runs[i],
                    (long) ctx->futhark_mc_segred_task_131576_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131576_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131576_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131576_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131576_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131576_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131576_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131576_iter[i],
                    (long) ctx->futhark_mc_segred_task_131576_iter[i] /
                    (ctx->futhark_mc_segred_task_131576_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131576_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131589 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131589_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131589_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131585            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131585_runs[i],
                    (long) ctx->futhark_mc_segred_task_131585_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131585_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131585_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131585_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131585_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131585_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131585_iter[i],
                    (long) ctx->futhark_mc_segred_task_131585_iter[i] /
                    (ctx->futhark_mc_segred_task_131585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131585_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131566         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131566_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131566_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131566_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131566_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131566_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131566_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131566_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131566_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131566_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131566_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131566_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131566_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131566_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131566_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131566_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131566_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131566_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131566_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131566_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131566_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131566_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131566_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131566_total_iter /
                (ctx->futhark_mc_segmap_parloop_131566_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131566_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131566_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131566_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131557            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131557_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131557_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131557_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131557_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131557_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131557_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131557_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131557_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131557_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131557_iter[i] /
                    (ctx->futhark_mc_segmap_task_131557_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131557_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131564     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131564_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131564_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131564_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131564_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131564_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131564_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131564_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131564_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131564_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131564_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131564_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131564_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131553         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131553_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131553_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131553_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131553_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131553_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131553_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131553_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131553_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131553_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131553_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131553_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131553_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131553_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131553_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131553_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131553_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131553_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131553_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131553_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131553_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131553_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131553_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131553_total_iter /
                (ctx->futhark_mc_segmap_parloop_131553_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131553_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131553_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131553_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131542            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131542_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131542_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131542_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131542_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131542_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131542_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131542_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131542_iter[i] /
                    (ctx->futhark_mc_segmap_task_131542_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131542_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131551     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131551_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131551_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131551_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131551_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131551_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131551_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131551_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131551_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131551_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131551_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131593         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131593_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131593_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131593_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131593_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131593_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131593_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131593_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131593_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131593_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131593_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131593_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131593_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131593_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131593_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131593_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131593_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131593_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131593_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131593_total_iter /
                (ctx->futhark_mc_segmap_parloop_131593_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131593_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131593_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131593_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131602         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131602_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131602_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131602_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131602_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131602_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131602_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131602_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131602_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131602_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131602_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131602_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131602_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131602_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131602_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131602_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131602_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131602_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131602_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131602_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131602_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131602_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131602_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131602_total_iter /
                (ctx->futhark_mc_segmap_parloop_131602_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131602_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131602_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131602_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131600            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131600_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131600_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131600_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131600_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131600_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131600_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131600_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131600_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131600_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131600_iter[i] /
                    (ctx->futhark_mc_segmap_task_131600_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131600_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131597         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131597_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131597_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131597_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131597_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131597_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131597_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131597_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131597_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131597_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131597_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131597_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131597_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131597_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131597_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131597_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131597_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131597_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131597_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131597_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131597_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131597_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131597_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131597_total_iter /
                (ctx->futhark_mc_segmap_parloop_131597_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131597_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131597_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131597_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131591            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131591_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131591_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131591_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131591_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131591_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131591_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131591_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131591_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131591_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131591_iter[i] /
                    (ctx->futhark_mc_segmap_task_131591_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131591_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131595     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131595_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131595_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131595_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131595_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131595_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131595_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131595_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131595_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131595_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131595_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131595_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131595_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131606         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131606_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131606_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131606_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131606_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131606_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131606_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131606_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131606_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131606_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131606_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131606_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131606_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131606_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131606_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131606_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131606_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131606_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131606_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131606_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131606_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131606_total_iter /
                (ctx->futhark_mc_segmap_parloop_131606_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131606_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131606_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131606_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131615         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131615_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131615_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131615_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131615_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131615_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131615_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131615_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131615_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131615_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131615_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131615_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131615_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131615_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131615_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131615_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131615_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131615_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131615_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131615_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131615_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131615_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131615_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131615_total_iter /
                (ctx->futhark_mc_segmap_parloop_131615_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131615_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131615_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131615_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131613            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131613_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131613_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131613_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131613_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131613_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131613_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131613_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131613_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131613_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131613_iter[i] /
                    (ctx->futhark_mc_segmap_task_131613_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131613_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131610         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131610_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131610_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131610_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131610_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131610_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131610_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131610_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131610_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131610_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131610_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131610_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131610_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131610_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131610_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131610_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131610_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131610_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131610_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131610_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131610_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131610_total_iter /
                (ctx->futhark_mc_segmap_parloop_131610_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131610_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131610_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131610_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131604            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131604_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131604_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131604_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131604_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131604_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131604_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131604_iter[i] /
                    (ctx->futhark_mc_segmap_task_131604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131604_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131608     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131608_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131608_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131608_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131608_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131608_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131608_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131608_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131608_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131608_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131608_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131608_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131608_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131619         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131619_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131619_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131619_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131619_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131619_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131619_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131619_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131619_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131619_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131619_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131619_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131619_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131619_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131619_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131619_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131619_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131619_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131619_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131619_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131619_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131619_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131619_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131619_total_iter /
                (ctx->futhark_mc_segmap_parloop_131619_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131619_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131619_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131619_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131628         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131628_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131628_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131628_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131628_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131628_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131628_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131628_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131628_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131628_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131628_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131628_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131628_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131628_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131628_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131628_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131628_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131628_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131628_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131628_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131628_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131628_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131628_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131628_total_iter /
                (ctx->futhark_mc_segmap_parloop_131628_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131628_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131628_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131628_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131626            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131626_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131626_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131626_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131626_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131626_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131626_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131626_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131626_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131626_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131626_iter[i] /
                    (ctx->futhark_mc_segmap_task_131626_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131626_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131623         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131623_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131623_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131623_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131623_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131623_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131623_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131623_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131623_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131623_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131623_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131623_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131623_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131623_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131623_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131623_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131623_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131623_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131623_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131623_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131623_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131623_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131623_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131623_total_iter /
                (ctx->futhark_mc_segmap_parloop_131623_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131623_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131623_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131623_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131617            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131617_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131617_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131617_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131617_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131617_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131617_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131617_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131617_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131617_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131617_iter[i] /
                    (ctx->futhark_mc_segmap_task_131617_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131617_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131621     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131621_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131621_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131621_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131621_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131621_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131621_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131621_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131621_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131621_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131621_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131621_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131621_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131632         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131632_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131632_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131632_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131632_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131632_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131632_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131632_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131632_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131632_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131632_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131632_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131632_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131632_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131632_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131632_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131632_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131632_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131632_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131632_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131632_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131632_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131632_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131632_total_iter /
                (ctx->futhark_mc_segmap_parloop_131632_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131632_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131632_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131632_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_131657   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_131657_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131657_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131657_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_131657_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131657_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131657_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131657_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_131657_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_131657_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_131657_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_131657_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_131659   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_131659_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131659_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131659_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_131659_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131659_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131659_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131659_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_131659_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_131659_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_131659_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_131659_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_131651           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_131651_runs[i],
                    (long) ctx->futhark_mc_segscan_task_131651_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131651_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131651_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_131651_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_131651_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_131651_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_131651_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_131651_iter[i],
                    (long) ctx->futhark_mc_segscan_task_131651_iter[i] /
                    (ctx->futhark_mc_segscan_task_131651_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_131651_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131663         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131663_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131663_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131663_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131663_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131663_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131663_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131663_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131663_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131663_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131663_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131663_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131663_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131663_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131663_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131663_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131663_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131663_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131663_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131663_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131663_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131663_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131663_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131663_total_iter /
                (ctx->futhark_mc_segmap_parloop_131663_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131663_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131663_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131663_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131661            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131661_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131661_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131661_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131661_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131661_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131661_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131661_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131661_iter[i] /
                    (ctx->futhark_mc_segmap_task_131661_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131661_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131642         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131642_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131642_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131642_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131642_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131642_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131642_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131642_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131642_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131642_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131642_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131642_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131642_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131642_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131642_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131642_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131642_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131642_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131642_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131642_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131642_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131642_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131642_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131642_total_iter /
                (ctx->futhark_mc_segmap_parloop_131642_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131642_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131642_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131642_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131630            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131630_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131630_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131630_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131630_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131630_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131630_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131630_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131630_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131630_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131630_iter[i] /
                    (ctx->futhark_mc_segmap_task_131630_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131630_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131640     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131640_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131640_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131640_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131640_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131640_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131640_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131640_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131640_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131667         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131667_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131667_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131667_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131667_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131667_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131667_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131667_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131667_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131667_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131667_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131667_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131667_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131667_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131667_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131667_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131667_total_iter /
                (ctx->futhark_mc_segmap_parloop_131667_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131667_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131667_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131667_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_131675 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_131675_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131675_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131675_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_131675_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131675_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131675_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131675_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_131675_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_131675_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_131675_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_131675_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_131672            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_131672_runs[i],
                    (long) ctx->futhark_mc_segred_task_131672_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131672_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131672_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_131672_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_131672_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_131672_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_131672_iter[i]),
                    (long) ctx->futhark_mc_segred_task_131672_iter[i],
                    (long) ctx->futhark_mc_segred_task_131672_iter[i] /
                    (ctx->futhark_mc_segred_task_131672_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_131672_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131670         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131670_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131670_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131670_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131670_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131670_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131670_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131670_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131670_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131670_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131670_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131670_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131670_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131670_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131670_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131670_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131670_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131670_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131670_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131670_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131670_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131670_total_iter /
                (ctx->futhark_mc_segmap_parloop_131670_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131670_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131670_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131670_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131665            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131665_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131665_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131665_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131665_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131665_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131665_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131665_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131665_iter[i] /
                    (ctx->futhark_mc_segmap_task_131665_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131665_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131668     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131668_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131668_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131668_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131668_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131668_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131668_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131668_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131668_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131679         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131679_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131679_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131679_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131679_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131679_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131679_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131679_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131679_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131679_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131679_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131679_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131679_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131679_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131679_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131679_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131679_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131679_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131679_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131679_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131679_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131679_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131679_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131679_total_iter /
                (ctx->futhark_mc_segmap_parloop_131679_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131679_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131679_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131679_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131688         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131688_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131688_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131688_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131688_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131688_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131688_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131688_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131688_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131688_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131688_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131688_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131688_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131688_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131688_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131688_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131688_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131688_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131688_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131688_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131688_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131688_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131688_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131688_total_iter /
                (ctx->futhark_mc_segmap_parloop_131688_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131688_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131688_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131688_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131686            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131686_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131686_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131686_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131686_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131686_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131686_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131686_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131686_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131686_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131686_iter[i] /
                    (ctx->futhark_mc_segmap_task_131686_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131686_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131683         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131683_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131683_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131683_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131683_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131683_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131683_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131683_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131683_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131683_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131683_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131683_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131683_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131683_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131683_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131683_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131683_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131683_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131683_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131683_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131683_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131683_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131683_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131683_total_iter /
                (ctx->futhark_mc_segmap_parloop_131683_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131683_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131683_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131683_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131677            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131677_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131677_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131677_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131677_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131677_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131677_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131677_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131677_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131677_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131677_iter[i] /
                    (ctx->futhark_mc_segmap_task_131677_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131677_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131681     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131681_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131681_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131681_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131681_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131681_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131681_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131681_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131681_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131681_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131681_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131681_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131681_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131692         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131692_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131692_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131692_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131692_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131692_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131692_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131692_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131692_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131692_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131692_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131692_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131692_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131692_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131692_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131692_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131692_total_iter /
                (ctx->futhark_mc_segmap_parloop_131692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131692_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131692_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131692_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131701         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131701_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131701_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131701_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131701_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131701_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131701_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131701_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131701_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131701_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131701_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131701_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131701_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131701_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131701_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131701_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131701_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131701_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131701_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131701_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131701_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131701_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131701_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131701_total_iter /
                (ctx->futhark_mc_segmap_parloop_131701_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131701_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131701_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131701_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131699            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131699_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131699_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131699_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131699_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131699_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131699_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131699_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131699_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131699_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131699_iter[i] /
                    (ctx->futhark_mc_segmap_task_131699_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131699_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_131696         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_131696_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_131696_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131696_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131696_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_131696_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_131696_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_131696_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131696_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_131696_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_131696_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_131696_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_131696_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_131696_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_131696_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_131696_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131696_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131696_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_131696_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_131696_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_131696_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_131696_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_131696_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_131696_total_iter /
                (ctx->futhark_mc_segmap_parloop_131696_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_131696_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_131696_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_131696_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_131690            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_131690_runs[i],
                    (long) ctx->futhark_mc_segmap_task_131690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131690_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_131690_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_131690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_131690_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_131690_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_131690_iter[i],
                    (long) ctx->futhark_mc_segmap_task_131690_iter[i] /
                    (ctx->futhark_mc_segmap_task_131690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_131690_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_131694     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_131694_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131694_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131694_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131694_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_131694_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_131694_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_131694_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_131694_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_131694_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_131694_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_131694_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_131694_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_130893,
                             struct memblock *mem_out_p_130894,
                             struct memblock *mem_out_p_130895,
                             struct memblock Y_mem_121802, int64_t m_114462,
                             int64_t n_114463, int64_t n_p_114465,
                             int64_t t_window_114466, int64_t l_window_114467,
                             int64_t t_degree_114468, int64_t l_degree_114469,
                             int64_t t_jump_114470, int64_t l_jump_114471,
                             int64_t inner_114472, int64_t outer_114473,
                             int64_t jump_threshold_114474,
                             int64_t max_group_sizze_114475);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_130917 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    char *free_Y_mem_121802;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
};
struct futhark_mc_segmap_parloop_struct_130919 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    char *free_Y_mem_121802;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
};
static int futhark_mc_segmap_parloop_130920(void *args, int64_t start,
                                            int64_t end, int flat_tid_116662,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130919
    *futhark_mc_segmap_parloop_struct_130919 =
    (struct futhark_mc_segmap_parloop_struct_130919 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130919->ctx;
    uint64_t futhark_mc_segmap_parloop_130920_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130920_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130919->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130919->free_n_114463;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130919->free_i_114539;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130919->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_130919->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130919->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_130919->free_mem_121845,
                                  .size =0, .references =NULL};
    size_t mem_121811_cached_sizze_130921 = 0;
    char *mem_121811 = NULL;
    size_t mem_121826_cached_sizze_130922 = 0;
    char *mem_121826 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123695 = start;
    
    if (mem_121811_cached_sizze_130921 < (size_t) bytes_121803) {
        mem_121811 = realloc(mem_121811, bytes_121803);
        mem_121811_cached_sizze_130921 = bytes_121803;
    }
    if (mem_121826_cached_sizze_130922 < (size_t) bytes_121803) {
        mem_121826 = realloc(mem_121826, bytes_121803);
        mem_121826_cached_sizze_130922 = bytes_121803;
    }
    for (; iter_123695 < end; iter_123695++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123714 = m_114462;
        int64_t gtid_116663 = iter_123695;
        int64_t remnant_123715 = iter_123695 - gtid_116663;
        int64_t discard_121160;
        int64_t scanacc_123697 = (int64_t) 0;
        
        for (int64_t i_123696 = 0; i_123696 < n_114463; i_123696++) {
            float x_123699 = ((float *) Y_mem_121802.mem)[gtid_116663 *
                                                          n_114463 + i_123696];
            bool isnan_res_123700;
            
            isnan_res_123700 = futrts_isnan32(x_123699);
            
            bool defunc_0_p_res_123701 = !isnan_res_123700;
            int64_t defunc_0_f_res_123702 =
                    btoi_bool_i64(defunc_0_p_res_123701);
            int64_t defunc_1_op_res_123703 = add64(defunc_0_f_res_123702,
                                                   scanacc_123697);
            
            ((int64_t *) mem_121811)[i_123696] = defunc_1_op_res_123703;
            
            int64_t scanacc_tmp_123716 = defunc_1_op_res_123703;
            
            scanacc_123697 = scanacc_tmp_123716;
        }
        discard_121160 = scanacc_123697;
        
        int64_t last_res_114556 = ((int64_t *) mem_121811)[i_114539];
        
        for (int64_t i_123718 = 0; i_123718 < n_114463; i_123718++) {
            ((int64_t *) mem_121826)[i_123718] = (int64_t) -1;
        }
        for (int64_t write_iter_123705 = 0; write_iter_123705 < n_114463;
             write_iter_123705++) {
            float write_iv_123707 = ((float *) Y_mem_121802.mem)[gtid_116663 *
                                                                 n_114463 +
                                                                 write_iter_123705];
            bool isnan_res_123708;
            
            isnan_res_123708 = futrts_isnan32(write_iv_123707);
            
            bool defunc_0_p_res_123709 = !isnan_res_123708;
            int64_t defunc_1_f_res_123710;
            
            if (defunc_0_p_res_123709) {
                int64_t write_iv_123711 =
                        ((int64_t *) mem_121811)[write_iter_123705];
                int64_t defunc_1_f_res_t_res_123712 = sub64(write_iv_123711,
                                                            (int64_t) 1);
                
                defunc_1_f_res_123710 = defunc_1_f_res_t_res_123712;
            } else {
                defunc_1_f_res_123710 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_123710) &&
                slt64(defunc_1_f_res_123710, n_114463)) {
                ((int64_t *) mem_121826)[defunc_1_f_res_123710] =
                    write_iter_123705;
            }
        }
        memmove(mem_121842.mem + gtid_116663 * n_114463 * (int64_t) 8,
                mem_121826 + (int64_t) 0, n_114463 * (int64_t) 8);
        ((int64_t *) mem_121845.mem)[gtid_116663] = last_res_114556;
    }
    
  cleanup:
    { }
    free(mem_121811);
    free(mem_121826);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130920_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130920_end -
                 futhark_mc_segmap_parloop_130920_start;
        
        ctx->futhark_mc_segmap_parloop_130920_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130920_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130920_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130918(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116662 = tid;
    int num_tasks_123694 = info.nsubtasks;
    struct futhark_mc_task_130917 *futhark_mc_task_130917 =
                                  (struct futhark_mc_task_130917 *) args;
    struct futhark_context *ctx = futhark_mc_task_130917->ctx;
    uint64_t futhark_mc_segmap_task_130918_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130918_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130917->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130917->free_n_114463;
    int64_t i_114539 = futhark_mc_task_130917->free_i_114539;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130917->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121803 = futhark_mc_task_130917->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130917->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_130917->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t iter_123695;
    struct futhark_mc_segmap_parloop_struct_130919
    futhark_mc_segmap_parloop_struct_130919;
    
    futhark_mc_segmap_parloop_struct_130919.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130919.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130919.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130919.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130919.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130919.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_130919.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130919.free_mem_121845 = mem_121845.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130920_task;
    
    futhark_mc_segmap_parloop_130920_task.name =
        "futhark_mc_segmap_parloop_130920";
    futhark_mc_segmap_parloop_130920_task.fn = futhark_mc_segmap_parloop_130920;
    futhark_mc_segmap_parloop_130920_task.args =
        &futhark_mc_segmap_parloop_struct_130919;
    futhark_mc_segmap_parloop_130920_task.iterations = iterations;
    futhark_mc_segmap_parloop_130920_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130920_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130920_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130920_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130920_task);
    
    if (futhark_mc_segmap_parloop_130920_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130920_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130920_total_end -
                 futhark_mc_segmap_parloop_130920_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130920_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130920_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130920_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130918_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130918_end -
                 futhark_mc_segmap_task_130918_start;
        
        ctx->futhark_mc_segmap_task_130918_runs[tid]++;
        ctx->futhark_mc_segmap_task_130918_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130918_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130924 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    char *free_Y_mem_121802;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
};
struct futhark_mc_task_130928 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116665;
    char *free_Y_mem_121802;
    char *free_mem_121805;
};
struct futhark_mc_scan_stage_1_parloop_struct_130931 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116665;
    char *free_Y_mem_121802;
    char *free_mem_121805;
};
static int futhark_mc_scan_stage_1_parloop_130932(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_116666, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_130931
    *futhark_mc_scan_stage_1_parloop_struct_130931 =
    (struct futhark_mc_scan_stage_1_parloop_struct_130931 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_130931->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_130932_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_130932_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_scan_stage_1_parloop_struct_130931->free_n_114463;
    int64_t gtid_116665 =
            futhark_mc_scan_stage_1_parloop_struct_130931->free_gtid_116665;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_130931->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121805 = {.desc ="mem_121805", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_130931->free_mem_121805,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123737 = start;
    int64_t x_123721;
    int64_t x_123722;
    
    x_123721 = (int64_t) 0;
    for (; iter_123737 < end; iter_123737++) {
        int64_t gtid_116667 = iter_123737;
        
        // stage 1 scan body
        {
            float x_123724 = ((float *) Y_mem_121802.mem)[gtid_116665 *
                                                          n_114463 +
                                                          gtid_116667];
            bool isnan_res_123725;
            
            isnan_res_123725 = futrts_isnan32(x_123724);
            
            bool defunc_0_p_res_123726 = !isnan_res_123725;
            int64_t defunc_0_f_res_123727 =
                    btoi_bool_i64(defunc_0_p_res_123726);
            
            // write mapped values results to memory
            { }
            x_123721 = x_123721;
            // Read next values
            {
                x_123722 = defunc_0_f_res_123727;
            }
            
            int64_t defunc_1_op_res_123723 = add64(x_123721, x_123722);
            
            ((int64_t *) mem_121805.mem)[gtid_116667] = defunc_1_op_res_123723;
            x_123721 = defunc_1_op_res_123723;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_130932_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_130932_end -
                 futhark_mc_scan_stage_1_parloop_130932_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_130932_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_130932_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_130932_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_130933 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116665;
    char *free_Y_mem_121802;
    char *free_mem_121805;
};
static int futhark_mc_scan_stage_3_parloop_130934(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_116666, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_130933
    *futhark_mc_scan_stage_3_parloop_struct_130933 =
    (struct futhark_mc_scan_stage_3_parloop_struct_130933 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_130933->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_130934_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_130934_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_scan_stage_3_parloop_struct_130933->free_n_114463;
    int64_t gtid_116665 =
            futhark_mc_scan_stage_3_parloop_struct_130933->free_gtid_116665;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_130933->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121805 = {.desc ="mem_121805", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_130933->free_mem_121805,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123749 = start;
    int64_t x_123746;
    int64_t x_123747;
    
    if (iter_123749 == (int64_t) 0) {
        x_123746 = (int64_t) 0;
    } else {
        x_123746 = ((int64_t *) mem_121805.mem)[iter_123749 - (int64_t) 1];
    }
    for (; iter_123749 < end; iter_123749++) {
        int64_t gtid_116667 = iter_123749;
        
        // stage 3 scan body
        {
            float x_123724 = ((float *) Y_mem_121802.mem)[gtid_116665 *
                                                          n_114463 +
                                                          gtid_116667];
            bool isnan_res_123725;
            
            isnan_res_123725 = futrts_isnan32(x_123724);
            
            bool defunc_0_p_res_123726 = !isnan_res_123725;
            int64_t defunc_0_f_res_123727 =
                    btoi_bool_i64(defunc_0_p_res_123726);
            
            x_123746 = x_123746;
            x_123747 = defunc_0_f_res_123727;
            
            int64_t defunc_1_op_res_123748 = add64(x_123746, x_123747);
            
            ((int64_t *) mem_121805.mem)[gtid_116667] = defunc_1_op_res_123748;
            x_123746 = defunc_1_op_res_123748;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_130934_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_130934_end -
                 futhark_mc_scan_stage_3_parloop_130934_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_130934_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_130934_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_130934_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_130929(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116666 = tid;
    int num_tasks_123736 = info.nsubtasks;
    struct futhark_mc_task_130928 *futhark_mc_task_130928 =
                                  (struct futhark_mc_task_130928 *) args;
    struct futhark_context *ctx = futhark_mc_task_130928->ctx;
    uint64_t futhark_mc_segscan_task_130929_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_130929_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130928->free_n_114463;
    int64_t gtid_116665 = futhark_mc_task_130928->free_gtid_116665;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130928->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121805 = {.desc ="mem_121805", .mem =
                                  futhark_mc_task_130928->free_mem_121805,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_123743_cached_sizze_130930 = 0;
    char *scan_stage_2_accum_mem_123743 = NULL;
    int64_t iter_123737;
    struct futhark_mc_scan_stage_1_parloop_struct_130931
    futhark_mc_scan_stage_1_parloop_struct_130931;
    
    futhark_mc_scan_stage_1_parloop_struct_130931.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_130931.free_n_114463 = n_114463;
    futhark_mc_scan_stage_1_parloop_struct_130931.free_gtid_116665 =
        gtid_116665;
    futhark_mc_scan_stage_1_parloop_struct_130931.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_scan_stage_1_parloop_struct_130931.free_mem_121805 =
        mem_121805.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_130932_task;
    
    futhark_mc_scan_stage_1_parloop_130932_task.name =
        "futhark_mc_scan_stage_1_parloop_130932";
    futhark_mc_scan_stage_1_parloop_130932_task.fn =
        futhark_mc_scan_stage_1_parloop_130932;
    futhark_mc_scan_stage_1_parloop_130932_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_130931;
    futhark_mc_scan_stage_1_parloop_130932_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_130932_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_130932_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_130932_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_130932_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_130932_task);
    
    if (futhark_mc_scan_stage_1_parloop_130932_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_130932_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_130932_total_end -
                 futhark_mc_scan_stage_1_parloop_130932_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_130932_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_130932_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_130932_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_123736)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_123738;
        int64_t x_123739;
        int64_t offset_123741 = (int64_t) 0;
        int64_t offset_index_123742 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_123743_cached_sizze_130930 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_123743 =
                realloc(scan_stage_2_accum_mem_123743, (int64_t) 8);
            scan_stage_2_accum_mem_123743_cached_sizze_130930 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_123743)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_123745 = 0; i_123745 < num_tasks_123736 - 1;
             i_123745++) {
            offset_123741 = squot64(n_114463, sext_i32_i64(num_tasks_123736));
            if (slt64(sext_i32_i64(i_123745), srem64(n_114463,
                                                     sext_i32_i64(num_tasks_123736)))) {
                offset_123741 += (int64_t) 1;
            }
            offset_index_123742 += offset_123741;
            
            int64_t gtid_116667 = offset_index_123742;
            float x_123724 = ((float *) Y_mem_121802.mem)[gtid_116665 *
                                                          n_114463 +
                                                          gtid_116667];
            bool isnan_res_123725;
            
            isnan_res_123725 = futrts_isnan32(x_123724);
            
            bool defunc_0_p_res_123726 = !isnan_res_123725;
            int64_t defunc_0_f_res_123727 =
                    btoi_bool_i64(defunc_0_p_res_123726);
            
            // Read carry in
            {
                x_123738 =
                    ((int64_t *) scan_stage_2_accum_mem_123743)[(int64_t) 0];
            }
            // Read next values
            {
                x_123739 = ((int64_t *) mem_121805.mem)[offset_index_123742 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_123740 = add64(x_123738, x_123739);
            
            ((int64_t *) mem_121805.mem)[offset_index_123742 - (int64_t) 1] =
                defunc_1_op_res_123740;
            ((int64_t *) scan_stage_2_accum_mem_123743)[(int64_t) 0] =
                defunc_1_op_res_123740;
        }
        
        int64_t iter_123749 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_130933
        futhark_mc_scan_stage_3_parloop_struct_130933;
        
        futhark_mc_scan_stage_3_parloop_struct_130933.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_130933.free_n_114463 = n_114463;
        futhark_mc_scan_stage_3_parloop_struct_130933.free_gtid_116665 =
            gtid_116665;
        futhark_mc_scan_stage_3_parloop_struct_130933.free_Y_mem_121802 =
            Y_mem_121802.mem;
        futhark_mc_scan_stage_3_parloop_struct_130933.free_mem_121805 =
            mem_121805.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_130934_task;
        
        futhark_mc_scan_stage_3_parloop_130934_task.name =
            "futhark_mc_scan_stage_3_parloop_130934";
        futhark_mc_scan_stage_3_parloop_130934_task.fn =
            futhark_mc_scan_stage_3_parloop_130934;
        futhark_mc_scan_stage_3_parloop_130934_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_130933;
        futhark_mc_scan_stage_3_parloop_130934_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_130934_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_130934_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_130934_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_130934_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_130934_task);
        
        if (futhark_mc_scan_stage_3_parloop_130934_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_130934_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_130934_total_end -
                     futhark_mc_scan_stage_3_parloop_130934_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_130934_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_130934_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_130934_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_123743);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_130929_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_130929_end -
                 futhark_mc_segscan_task_130929_start;
        
        ctx->futhark_mc_segscan_task_130929_runs[tid]++;
        ctx->futhark_mc_segscan_task_130929_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_130929_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_130935 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116665;
    char *free_Y_mem_121802;
    char *free_mem_121805;
    char *free_mem_121808;
};
struct futhark_mc_segmap_parloop_struct_130937 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116665;
    char *free_Y_mem_121802;
    char *free_mem_121805;
    char *free_mem_121808;
};
static int futhark_mc_segmap_parloop_130938(void *args, int64_t start,
                                            int64_t end, int flat_tid_116668,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130937
    *futhark_mc_segmap_parloop_struct_130937 =
    (struct futhark_mc_segmap_parloop_struct_130937 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130937->ctx;
    uint64_t futhark_mc_segmap_parloop_130938_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130938_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130937->free_n_114463;
    int64_t gtid_116665 =
            futhark_mc_segmap_parloop_struct_130937->free_gtid_116665;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130937->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121805 = {.desc ="mem_121805", .mem =
                                  futhark_mc_segmap_parloop_struct_130937->free_mem_121805,
                                  .size =0, .references =NULL};
    struct memblock mem_121808 = {.desc ="mem_121808", .mem =
                                  futhark_mc_segmap_parloop_struct_130937->free_mem_121808,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123752 = start;
    
    for (; iter_123752 < end; iter_123752++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123755 = n_114463;
        int64_t gtid_116669 = iter_123752;
        int64_t remnant_123756 = iter_123752 - gtid_116669;
        float x_123728 = ((float *) Y_mem_121802.mem)[gtid_116665 * n_114463 +
                                                      gtid_116669];
        bool isnan_res_123729;
        
        isnan_res_123729 = futrts_isnan32(x_123728);
        
        bool defunc_0_p_res_123730 = !isnan_res_123729;
        int64_t defunc_1_f_res_123731;
        
        if (defunc_0_p_res_123730) {
            int64_t x_123753 = ((int64_t *) mem_121805.mem)[gtid_116669];
            int64_t defunc_1_f_res_t_res_123754 = sub64(x_123753, (int64_t) 1);
            
            defunc_1_f_res_123731 = defunc_1_f_res_t_res_123754;
        } else {
            defunc_1_f_res_123731 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_123731) &&
            slt64(defunc_1_f_res_123731, n_114463)) {
            ((int64_t *) mem_121808.mem)[defunc_1_f_res_123731] = gtid_116669;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130938_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130938_end -
                 futhark_mc_segmap_parloop_130938_start;
        
        ctx->futhark_mc_segmap_parloop_130938_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130938_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130938_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130936(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116668 = tid;
    int num_tasks_123751 = info.nsubtasks;
    struct futhark_mc_task_130935 *futhark_mc_task_130935 =
                                  (struct futhark_mc_task_130935 *) args;
    struct futhark_context *ctx = futhark_mc_task_130935->ctx;
    uint64_t futhark_mc_segmap_task_130936_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130936_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130935->free_n_114463;
    int64_t gtid_116665 = futhark_mc_task_130935->free_gtid_116665;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130935->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121805 = {.desc ="mem_121805", .mem =
                                  futhark_mc_task_130935->free_mem_121805,
                                  .size =0, .references =NULL};
    struct memblock mem_121808 = {.desc ="mem_121808", .mem =
                                  futhark_mc_task_130935->free_mem_121808,
                                  .size =0, .references =NULL};
    int64_t iter_123752;
    struct futhark_mc_segmap_parloop_struct_130937
    futhark_mc_segmap_parloop_struct_130937;
    
    futhark_mc_segmap_parloop_struct_130937.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130937.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130937.free_gtid_116665 = gtid_116665;
    futhark_mc_segmap_parloop_struct_130937.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130937.free_mem_121805 = mem_121805.mem;
    futhark_mc_segmap_parloop_struct_130937.free_mem_121808 = mem_121808.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130938_task;
    
    futhark_mc_segmap_parloop_130938_task.name =
        "futhark_mc_segmap_parloop_130938";
    futhark_mc_segmap_parloop_130938_task.fn = futhark_mc_segmap_parloop_130938;
    futhark_mc_segmap_parloop_130938_task.args =
        &futhark_mc_segmap_parloop_struct_130937;
    futhark_mc_segmap_parloop_130938_task.iterations = iterations;
    futhark_mc_segmap_parloop_130938_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130938_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130938_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130938_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130938_task);
    
    if (futhark_mc_segmap_parloop_130938_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130938_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130938_total_end -
                 futhark_mc_segmap_parloop_130938_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130938_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130938_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130938_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130936_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130936_end -
                 futhark_mc_segmap_task_130936_start;
        
        ctx->futhark_mc_segmap_task_130936_runs[tid]++;
        ctx->futhark_mc_segmap_task_130936_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130936_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130925(void *args, int64_t start,
                                            int64_t end, int flat_tid_116664,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130924
    *futhark_mc_segmap_parloop_struct_130924 =
    (struct futhark_mc_segmap_parloop_struct_130924 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130924->ctx;
    uint64_t futhark_mc_segmap_parloop_130925_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130925_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130924->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130924->free_n_114463;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130924->free_i_114539;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130924->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_130924->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130924->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_130924->free_mem_121845,
                                  .size =0, .references =NULL};
    size_t mem_121805_cached_sizze_130926 = 0;
    char *mem_121805 = NULL;
    size_t mem_121808_cached_sizze_130927 = 0;
    char *mem_121808 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123720 = start;
    
    if (mem_121805_cached_sizze_130926 < (size_t) bytes_121803) {
        mem_121805 = realloc(mem_121805, bytes_121803);
        mem_121805_cached_sizze_130926 = bytes_121803;
    }
    if (mem_121808_cached_sizze_130927 < (size_t) bytes_121803) {
        mem_121808 = realloc(mem_121808, bytes_121803);
        mem_121808_cached_sizze_130927 = bytes_121803;
    }
    for (; iter_123720 < end; iter_123720++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123734 = m_114462;
        int64_t gtid_116665 = iter_123720;
        int64_t remnant_123735 = iter_123720 - gtid_116665;
        int64_t flat_tid_116666 = (int64_t) 0;
        int32_t num_tasks_123736;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_130928 futhark_mc_task_130928;
        
        futhark_mc_task_130928.ctx = ctx;
        futhark_mc_task_130928.free_n_114463 = n_114463;
        futhark_mc_task_130928.free_gtid_116665 = gtid_116665;
        futhark_mc_task_130928.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_130928.free_mem_121805 = mem_121805;
        
        struct scheduler_segop futhark_mc_task_130928_task;
        
        futhark_mc_task_130928_task.args = &futhark_mc_task_130928;
        futhark_mc_task_130928_task.top_level_fn =
            futhark_mc_segscan_task_130929;
        futhark_mc_task_130928_task.name = "futhark_mc_segscan_task_130929";
        futhark_mc_task_130928_task.iterations = n_114463;
        futhark_mc_task_130928_task.task_time =
            &ctx->futhark_mc_segscan_task_130929_total_time;
        futhark_mc_task_130928_task.task_iter =
            &ctx->futhark_mc_segscan_task_130929_total_iter;
        futhark_mc_task_130928_task.sched = STATIC;
        futhark_mc_task_130928_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_130929_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130928_task);
        
        if (futhark_mc_segscan_task_130929_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_116679 = ((int64_t *) mem_121805)[i_114539];
        
        for (int64_t i_123750 = 0; i_123750 < n_114463; i_123750++) {
            ((int64_t *) mem_121808)[i_123750] = (int64_t) -1;
        }
        
        int64_t flat_tid_116668 = (int64_t) 0;
        int32_t num_tasks_123751;
        struct futhark_mc_task_130935 futhark_mc_task_130935;
        
        futhark_mc_task_130935.ctx = ctx;
        futhark_mc_task_130935.free_n_114463 = n_114463;
        futhark_mc_task_130935.free_gtid_116665 = gtid_116665;
        futhark_mc_task_130935.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_130935.free_mem_121805 = mem_121805;
        futhark_mc_task_130935.free_mem_121808 = mem_121808;
        
        struct scheduler_segop futhark_mc_task_130935_task;
        
        futhark_mc_task_130935_task.args = &futhark_mc_task_130935;
        futhark_mc_task_130935_task.top_level_fn =
            futhark_mc_segmap_task_130936;
        futhark_mc_task_130935_task.name = "futhark_mc_segmap_task_130936";
        futhark_mc_task_130935_task.iterations = n_114463;
        futhark_mc_task_130935_task.task_time =
            &ctx->futhark_mc_segmap_task_130936_total_time;
        futhark_mc_task_130935_task.task_iter =
            &ctx->futhark_mc_segmap_task_130936_total_iter;
        futhark_mc_task_130935_task.sched = STATIC;
        futhark_mc_task_130935_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_130936_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130935_task);
        
        if (futhark_mc_segmap_task_130936_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121842.mem + gtid_116665 * n_114463 * (int64_t) 8,
                mem_121808 + (int64_t) 0, n_114463 * (int64_t) 8);
        ((int64_t *) mem_121845.mem)[gtid_116665] = last_res_116679;
    }
    
  cleanup:
    { }
    free(mem_121805);
    free(mem_121808);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130925_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130925_end -
                 futhark_mc_segmap_parloop_130925_start;
        
        ctx->futhark_mc_segmap_parloop_130925_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130925_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130925_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130923(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116664 = tid;
    int num_tasks_123694 = info.nsubtasks;
    struct futhark_mc_task_130917 *futhark_mc_task_130917 =
                                  (struct futhark_mc_task_130917 *) args;
    struct futhark_context *ctx = futhark_mc_task_130917->ctx;
    uint64_t futhark_mc_segmap_nested_task_130923_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130923_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130917->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130917->free_n_114463;
    int64_t i_114539 = futhark_mc_task_130917->free_i_114539;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130917->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121803 = futhark_mc_task_130917->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130917->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_130917->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t iter_123720;
    struct futhark_mc_segmap_parloop_struct_130924
    futhark_mc_segmap_parloop_struct_130924;
    
    futhark_mc_segmap_parloop_struct_130924.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130924.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130924.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130924.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130924.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130924.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_130924.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130924.free_mem_121845 = mem_121845.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130925_task;
    
    futhark_mc_segmap_parloop_130925_task.name =
        "futhark_mc_segmap_parloop_130925";
    futhark_mc_segmap_parloop_130925_task.fn = futhark_mc_segmap_parloop_130925;
    futhark_mc_segmap_parloop_130925_task.args =
        &futhark_mc_segmap_parloop_struct_130924;
    futhark_mc_segmap_parloop_130925_task.iterations = iterations;
    futhark_mc_segmap_parloop_130925_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130925_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130925_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130925_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130925_task);
    
    if (futhark_mc_segmap_parloop_130925_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130925_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130925_total_end -
                 futhark_mc_segmap_parloop_130925_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130925_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130925_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130925_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130923_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130923_end -
                 futhark_mc_segmap_nested_task_130923_start;
        
        ctx->futhark_mc_segmap_nested_task_130923_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130923_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130923_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_130939 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_121867;
};
struct futhark_mc_segmap_parloop_struct_130941 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_121867;
};
static int futhark_mc_segmap_parloop_130942(void *args, int64_t start,
                                            int64_t end, int flat_tid_116689,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130941
    *futhark_mc_segmap_parloop_struct_130941 =
    (struct futhark_mc_segmap_parloop_struct_130941 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130941->ctx;
    uint64_t futhark_mc_segmap_parloop_130942_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130942_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130941->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130941->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130941->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_130941->free_bytes_121846;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_130941->free_mem_121867,
                                  .size =0, .references =NULL};
    size_t mem_121851_cached_sizze_130943 = 0;
    char *mem_121851 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123758 = start;
    
    if (mem_121851_cached_sizze_130943 < (size_t) bytes_121846) {
        mem_121851 = realloc(mem_121851, bytes_121846);
        mem_121851_cached_sizze_130943 = bytes_121846;
    }
    for (; iter_123758 < end; iter_123758++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123764 = m_114462;
        int64_t gtid_116690 = iter_123758;
        int64_t remnant_123765 = iter_123758 - gtid_116690;
        
        for (int64_t i_123759 = 0; i_123759 < n_114463; i_123759++) {
            int64_t x_123761 = ((int64_t *) mem_121842.mem)[gtid_116690 *
                                                            n_114463 +
                                                            i_123759];
            float i64_res_123762 = sitofp_i64_f32(x_123761);
            
            ((float *) mem_121851)[i_123759] = i64_res_123762;
        }
        memmove(mem_121867.mem + gtid_116690 * n_114463 * (int64_t) 4,
                mem_121851 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121851);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130942_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130942_end -
                 futhark_mc_segmap_parloop_130942_start;
        
        ctx->futhark_mc_segmap_parloop_130942_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130942_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130942_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130940(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116689 = tid;
    int num_tasks_123757 = info.nsubtasks;
    struct futhark_mc_task_130939 *futhark_mc_task_130939 =
                                  (struct futhark_mc_task_130939 *) args;
    struct futhark_context *ctx = futhark_mc_task_130939->ctx;
    uint64_t futhark_mc_segmap_task_130940_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130940_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130939->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130939->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130939->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_130939->free_bytes_121846;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_130939->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t iter_123758;
    struct futhark_mc_segmap_parloop_struct_130941
    futhark_mc_segmap_parloop_struct_130941;
    
    futhark_mc_segmap_parloop_struct_130941.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130941.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130941.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130941.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130941.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_130941.free_mem_121867 = mem_121867.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130942_task;
    
    futhark_mc_segmap_parloop_130942_task.name =
        "futhark_mc_segmap_parloop_130942";
    futhark_mc_segmap_parloop_130942_task.fn = futhark_mc_segmap_parloop_130942;
    futhark_mc_segmap_parloop_130942_task.args =
        &futhark_mc_segmap_parloop_struct_130941;
    futhark_mc_segmap_parloop_130942_task.iterations = iterations;
    futhark_mc_segmap_parloop_130942_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130942_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130942_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130942_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130942_task);
    
    if (futhark_mc_segmap_parloop_130942_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130942_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130942_total_end -
                 futhark_mc_segmap_parloop_130942_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130942_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130942_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130942_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130940_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130940_end -
                 futhark_mc_segmap_task_130940_start;
        
        ctx->futhark_mc_segmap_task_130940_runs[tid]++;
        ctx->futhark_mc_segmap_task_130940_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130940_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130945 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_121867;
};
struct futhark_mc_task_130948 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116692;
    char *free_mem_121842;
    char *free_mem_121848;
};
struct futhark_mc_segmap_parloop_struct_130950 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116692;
    char *free_mem_121842;
    char *free_mem_121848;
};
static int futhark_mc_segmap_parloop_130951(void *args, int64_t start,
                                            int64_t end, int flat_tid_116693,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130950
    *futhark_mc_segmap_parloop_struct_130950 =
    (struct futhark_mc_segmap_parloop_struct_130950 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130950->ctx;
    uint64_t futhark_mc_segmap_parloop_130951_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130951_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130950->free_n_114463;
    int64_t gtid_116692 =
            futhark_mc_segmap_parloop_struct_130950->free_gtid_116692;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130950->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121848 = {.desc ="mem_121848", .mem =
                                  futhark_mc_segmap_parloop_struct_130950->free_mem_121848,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123773 = start;
    
    for (; iter_123773 < end; iter_123773++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123774 = n_114463;
        int64_t gtid_116694 = iter_123773;
        int64_t remnant_123775 = iter_123773 - gtid_116694;
        int64_t x_123768 = ((int64_t *) mem_121842.mem)[gtid_116692 * n_114463 +
                                                        gtid_116694];
        float i64_res_123769 = sitofp_i64_f32(x_123768);
        
        ((float *) mem_121848.mem)[gtid_116694] = i64_res_123769;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130951_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130951_end -
                 futhark_mc_segmap_parloop_130951_start;
        
        ctx->futhark_mc_segmap_parloop_130951_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130951_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130951_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130949(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116693 = tid;
    int num_tasks_123772 = info.nsubtasks;
    struct futhark_mc_task_130948 *futhark_mc_task_130948 =
                                  (struct futhark_mc_task_130948 *) args;
    struct futhark_context *ctx = futhark_mc_task_130948->ctx;
    uint64_t futhark_mc_segmap_task_130949_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130949_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130948->free_n_114463;
    int64_t gtid_116692 = futhark_mc_task_130948->free_gtid_116692;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130948->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121848 = {.desc ="mem_121848", .mem =
                                  futhark_mc_task_130948->free_mem_121848,
                                  .size =0, .references =NULL};
    int64_t iter_123773;
    struct futhark_mc_segmap_parloop_struct_130950
    futhark_mc_segmap_parloop_struct_130950;
    
    futhark_mc_segmap_parloop_struct_130950.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130950.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130950.free_gtid_116692 = gtid_116692;
    futhark_mc_segmap_parloop_struct_130950.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130950.free_mem_121848 = mem_121848.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130951_task;
    
    futhark_mc_segmap_parloop_130951_task.name =
        "futhark_mc_segmap_parloop_130951";
    futhark_mc_segmap_parloop_130951_task.fn = futhark_mc_segmap_parloop_130951;
    futhark_mc_segmap_parloop_130951_task.args =
        &futhark_mc_segmap_parloop_struct_130950;
    futhark_mc_segmap_parloop_130951_task.iterations = iterations;
    futhark_mc_segmap_parloop_130951_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130951_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130951_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130951_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130951_task);
    
    if (futhark_mc_segmap_parloop_130951_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130951_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130951_total_end -
                 futhark_mc_segmap_parloop_130951_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130951_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130951_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130951_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130949_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130949_end -
                 futhark_mc_segmap_task_130949_start;
        
        ctx->futhark_mc_segmap_task_130949_runs[tid]++;
        ctx->futhark_mc_segmap_task_130949_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130949_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130946(void *args, int64_t start,
                                            int64_t end, int flat_tid_116691,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130945
    *futhark_mc_segmap_parloop_struct_130945 =
    (struct futhark_mc_segmap_parloop_struct_130945 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130945->ctx;
    uint64_t futhark_mc_segmap_parloop_130946_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130946_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130945->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130945->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130945->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_130945->free_bytes_121846;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_130945->free_mem_121867,
                                  .size =0, .references =NULL};
    size_t mem_121848_cached_sizze_130947 = 0;
    char *mem_121848 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123767 = start;
    
    if (mem_121848_cached_sizze_130947 < (size_t) bytes_121846) {
        mem_121848 = realloc(mem_121848, bytes_121846);
        mem_121848_cached_sizze_130947 = bytes_121846;
    }
    for (; iter_123767 < end; iter_123767++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123770 = m_114462;
        int64_t gtid_116692 = iter_123767;
        int64_t remnant_123771 = iter_123767 - gtid_116692;
        int64_t flat_tid_116693 = (int64_t) 0;
        int32_t num_tasks_123772;
        struct futhark_mc_task_130948 futhark_mc_task_130948;
        
        futhark_mc_task_130948.ctx = ctx;
        futhark_mc_task_130948.free_n_114463 = n_114463;
        futhark_mc_task_130948.free_gtid_116692 = gtid_116692;
        futhark_mc_task_130948.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_130948.free_mem_121848 = mem_121848;
        
        struct scheduler_segop futhark_mc_task_130948_task;
        
        futhark_mc_task_130948_task.args = &futhark_mc_task_130948;
        futhark_mc_task_130948_task.top_level_fn =
            futhark_mc_segmap_task_130949;
        futhark_mc_task_130948_task.name = "futhark_mc_segmap_task_130949";
        futhark_mc_task_130948_task.iterations = n_114463;
        futhark_mc_task_130948_task.task_time =
            &ctx->futhark_mc_segmap_task_130949_total_time;
        futhark_mc_task_130948_task.task_iter =
            &ctx->futhark_mc_segmap_task_130949_total_iter;
        futhark_mc_task_130948_task.sched = STATIC;
        futhark_mc_task_130948_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_130949_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130948_task);
        
        if (futhark_mc_segmap_task_130949_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121867.mem + gtid_116692 * n_114463 * (int64_t) 4,
                mem_121848 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121848);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130946_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130946_end -
                 futhark_mc_segmap_parloop_130946_start;
        
        ctx->futhark_mc_segmap_parloop_130946_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130946_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130946_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130944(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116691 = tid;
    int num_tasks_123757 = info.nsubtasks;
    struct futhark_mc_task_130939 *futhark_mc_task_130939 =
                                  (struct futhark_mc_task_130939 *) args;
    struct futhark_context *ctx = futhark_mc_task_130939->ctx;
    uint64_t futhark_mc_segmap_nested_task_130944_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130944_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130939->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130939->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130939->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_130939->free_bytes_121846;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_130939->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t iter_123767;
    struct futhark_mc_segmap_parloop_struct_130945
    futhark_mc_segmap_parloop_struct_130945;
    
    futhark_mc_segmap_parloop_struct_130945.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130945.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130945.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130945.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130945.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_130945.free_mem_121867 = mem_121867.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130946_task;
    
    futhark_mc_segmap_parloop_130946_task.name =
        "futhark_mc_segmap_parloop_130946";
    futhark_mc_segmap_parloop_130946_task.fn = futhark_mc_segmap_parloop_130946;
    futhark_mc_segmap_parloop_130946_task.args =
        &futhark_mc_segmap_parloop_struct_130945;
    futhark_mc_segmap_parloop_130946_task.iterations = iterations;
    futhark_mc_segmap_parloop_130946_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130946_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130946_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130946_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130946_task);
    
    if (futhark_mc_segmap_parloop_130946_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130946_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130946_total_end -
                 futhark_mc_segmap_parloop_130946_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130946_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130946_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130946_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130944_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130944_end -
                 futhark_mc_segmap_nested_task_130944_start;
        
        ctx->futhark_mc_segmap_nested_task_130944_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130944_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130944_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_130952 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_i_114539;
    int64_t free_bytes_121868;
    char *free_mem_121889;
};
struct futhark_mc_segmap_parloop_struct_130954 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_i_114539;
    int64_t free_bytes_121868;
    char *free_mem_121889;
};
static int futhark_mc_segmap_parloop_130955(void *args, int64_t start,
                                            int64_t end, int flat_tid_116699,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130954
    *futhark_mc_segmap_parloop_struct_130954 =
    (struct futhark_mc_segmap_parloop_struct_130954 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130954->ctx;
    uint64_t futhark_mc_segmap_parloop_130955_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130955_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130954->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130954->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130954->free_i_114539;
    int64_t bytes_121868 =
            futhark_mc_segmap_parloop_struct_130954->free_bytes_121868;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130954->free_mem_121889,
                                  .size =0, .references =NULL};
    size_t mem_121873_cached_sizze_130956 = 0;
    char *mem_121873 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123777 = start;
    
    if (mem_121873_cached_sizze_130956 < (size_t) bytes_121868) {
        mem_121873 = realloc(mem_121873, bytes_121868);
        mem_121873_cached_sizze_130956 = bytes_121868;
    }
    for (; iter_123777 < end; iter_123777++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123785 = n_p_114465;
        int64_t gtid_116700 = iter_123777;
        int64_t remnant_123786 = iter_123777 - gtid_116700;
        
        for (int64_t i_123778 = 0; i_123778 < css_chunk_len_114509;
             i_123778++) {
            int64_t y_123780 = mul64(n_p_114465, i_123778);
            int64_t res_idx_123781 = add64(y_123780, gtid_116700);
            bool cond_123782 = slt64(i_114539, res_idx_123781);
            int64_t defunc_0_f_res_123783;
            
            if (cond_123782) {
                defunc_0_f_res_123783 = (int64_t) -1;
            } else {
                defunc_0_f_res_123783 = res_idx_123781;
            }
            ((int64_t *) mem_121873)[i_123778] = defunc_0_f_res_123783;
        }
        memmove(mem_121889.mem + gtid_116700 * css_chunk_len_114509 *
                (int64_t) 8, mem_121873 + (int64_t) 0, css_chunk_len_114509 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_121873);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130955_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130955_end -
                 futhark_mc_segmap_parloop_130955_start;
        
        ctx->futhark_mc_segmap_parloop_130955_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130955_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130955_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130953(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116699 = tid;
    int num_tasks_123776 = info.nsubtasks;
    struct futhark_mc_task_130952 *futhark_mc_task_130952 =
                                  (struct futhark_mc_task_130952 *) args;
    struct futhark_context *ctx = futhark_mc_task_130952->ctx;
    uint64_t futhark_mc_segmap_task_130953_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130953_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_130952->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130952->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_task_130952->free_i_114539;
    int64_t bytes_121868 = futhark_mc_task_130952->free_bytes_121868;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130952->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t iter_123777;
    struct futhark_mc_segmap_parloop_struct_130954
    futhark_mc_segmap_parloop_struct_130954;
    
    futhark_mc_segmap_parloop_struct_130954.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130954.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130954.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130954.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130954.free_bytes_121868 = bytes_121868;
    futhark_mc_segmap_parloop_struct_130954.free_mem_121889 = mem_121889.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130955_task;
    
    futhark_mc_segmap_parloop_130955_task.name =
        "futhark_mc_segmap_parloop_130955";
    futhark_mc_segmap_parloop_130955_task.fn = futhark_mc_segmap_parloop_130955;
    futhark_mc_segmap_parloop_130955_task.args =
        &futhark_mc_segmap_parloop_struct_130954;
    futhark_mc_segmap_parloop_130955_task.iterations = iterations;
    futhark_mc_segmap_parloop_130955_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130955_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130955_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130955_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130955_task);
    
    if (futhark_mc_segmap_parloop_130955_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130955_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130955_total_end -
                 futhark_mc_segmap_parloop_130955_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130955_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130955_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130955_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130953_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130953_end -
                 futhark_mc_segmap_task_130953_start;
        
        ctx->futhark_mc_segmap_task_130953_runs[tid]++;
        ctx->futhark_mc_segmap_task_130953_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130953_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130958 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_i_114539;
    int64_t free_bytes_121868;
    char *free_mem_121889;
};
struct futhark_mc_task_130961 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_i_114539;
    int64_t free_gtid_116702;
    char *free_mem_121870;
};
struct futhark_mc_segmap_parloop_struct_130963 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_i_114539;
    int64_t free_gtid_116702;
    char *free_mem_121870;
};
static int futhark_mc_segmap_parloop_130964(void *args, int64_t start,
                                            int64_t end, int flat_tid_116703,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130963
    *futhark_mc_segmap_parloop_struct_130963 =
    (struct futhark_mc_segmap_parloop_struct_130963 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130963->ctx;
    uint64_t futhark_mc_segmap_parloop_130964_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130964_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130963->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130963->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130963->free_i_114539;
    int64_t gtid_116702 =
            futhark_mc_segmap_parloop_struct_130963->free_gtid_116702;
    struct memblock mem_121870 = {.desc ="mem_121870", .mem =
                                  futhark_mc_segmap_parloop_struct_130963->free_mem_121870,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123796 = start;
    
    for (; iter_123796 < end; iter_123796++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123797 = css_chunk_len_114509;
        int64_t gtid_116704 = iter_123796;
        int64_t remnant_123798 = iter_123796 - gtid_116704;
        int64_t y_123789 = mul64(n_p_114465, gtid_116704);
        int64_t res_idx_123790 = add64(gtid_116702, y_123789);
        bool cond_123791 = slt64(i_114539, res_idx_123790);
        int64_t defunc_0_f_res_123792;
        
        if (cond_123791) {
            defunc_0_f_res_123792 = (int64_t) -1;
        } else {
            defunc_0_f_res_123792 = res_idx_123790;
        }
        ((int64_t *) mem_121870.mem)[gtid_116704] = defunc_0_f_res_123792;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130964_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130964_end -
                 futhark_mc_segmap_parloop_130964_start;
        
        ctx->futhark_mc_segmap_parloop_130964_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130964_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130964_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130962(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116703 = tid;
    int num_tasks_123795 = info.nsubtasks;
    struct futhark_mc_task_130961 *futhark_mc_task_130961 =
                                  (struct futhark_mc_task_130961 *) args;
    struct futhark_context *ctx = futhark_mc_task_130961->ctx;
    uint64_t futhark_mc_segmap_task_130962_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130962_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_130961->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130961->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_task_130961->free_i_114539;
    int64_t gtid_116702 = futhark_mc_task_130961->free_gtid_116702;
    struct memblock mem_121870 = {.desc ="mem_121870", .mem =
                                  futhark_mc_task_130961->free_mem_121870,
                                  .size =0, .references =NULL};
    int64_t iter_123796;
    struct futhark_mc_segmap_parloop_struct_130963
    futhark_mc_segmap_parloop_struct_130963;
    
    futhark_mc_segmap_parloop_struct_130963.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130963.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130963.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130963.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130963.free_gtid_116702 = gtid_116702;
    futhark_mc_segmap_parloop_struct_130963.free_mem_121870 = mem_121870.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130964_task;
    
    futhark_mc_segmap_parloop_130964_task.name =
        "futhark_mc_segmap_parloop_130964";
    futhark_mc_segmap_parloop_130964_task.fn = futhark_mc_segmap_parloop_130964;
    futhark_mc_segmap_parloop_130964_task.args =
        &futhark_mc_segmap_parloop_struct_130963;
    futhark_mc_segmap_parloop_130964_task.iterations = iterations;
    futhark_mc_segmap_parloop_130964_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130964_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130964_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130964_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130964_task);
    
    if (futhark_mc_segmap_parloop_130964_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130964_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130964_total_end -
                 futhark_mc_segmap_parloop_130964_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130964_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130964_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130964_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130962_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130962_end -
                 futhark_mc_segmap_task_130962_start;
        
        ctx->futhark_mc_segmap_task_130962_runs[tid]++;
        ctx->futhark_mc_segmap_task_130962_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130962_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130959(void *args, int64_t start,
                                            int64_t end, int flat_tid_116701,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130958
    *futhark_mc_segmap_parloop_struct_130958 =
    (struct futhark_mc_segmap_parloop_struct_130958 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130958->ctx;
    uint64_t futhark_mc_segmap_parloop_130959_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130959_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130958->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130958->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130958->free_i_114539;
    int64_t bytes_121868 =
            futhark_mc_segmap_parloop_struct_130958->free_bytes_121868;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130958->free_mem_121889,
                                  .size =0, .references =NULL};
    size_t mem_121870_cached_sizze_130960 = 0;
    char *mem_121870 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123788 = start;
    
    if (mem_121870_cached_sizze_130960 < (size_t) bytes_121868) {
        mem_121870 = realloc(mem_121870, bytes_121868);
        mem_121870_cached_sizze_130960 = bytes_121868;
    }
    for (; iter_123788 < end; iter_123788++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123793 = n_p_114465;
        int64_t gtid_116702 = iter_123788;
        int64_t remnant_123794 = iter_123788 - gtid_116702;
        int64_t flat_tid_116703 = (int64_t) 0;
        int32_t num_tasks_123795;
        struct futhark_mc_task_130961 futhark_mc_task_130961;
        
        futhark_mc_task_130961.ctx = ctx;
        futhark_mc_task_130961.free_n_p_114465 = n_p_114465;
        futhark_mc_task_130961.free_css_chunk_len_114509 = css_chunk_len_114509;
        futhark_mc_task_130961.free_i_114539 = i_114539;
        futhark_mc_task_130961.free_gtid_116702 = gtid_116702;
        futhark_mc_task_130961.free_mem_121870 = mem_121870;
        
        struct scheduler_segop futhark_mc_task_130961_task;
        
        futhark_mc_task_130961_task.args = &futhark_mc_task_130961;
        futhark_mc_task_130961_task.top_level_fn =
            futhark_mc_segmap_task_130962;
        futhark_mc_task_130961_task.name = "futhark_mc_segmap_task_130962";
        futhark_mc_task_130961_task.iterations = css_chunk_len_114509;
        futhark_mc_task_130961_task.task_time =
            &ctx->futhark_mc_segmap_task_130962_total_time;
        futhark_mc_task_130961_task.task_iter =
            &ctx->futhark_mc_segmap_task_130962_total_iter;
        futhark_mc_task_130961_task.sched = STATIC;
        futhark_mc_task_130961_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_130962_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130961_task);
        
        if (futhark_mc_segmap_task_130962_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121889.mem + gtid_116702 * css_chunk_len_114509 *
                (int64_t) 8, mem_121870 + (int64_t) 0, css_chunk_len_114509 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_121870);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130959_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130959_end -
                 futhark_mc_segmap_parloop_130959_start;
        
        ctx->futhark_mc_segmap_parloop_130959_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130959_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130959_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130957(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116701 = tid;
    int num_tasks_123776 = info.nsubtasks;
    struct futhark_mc_task_130952 *futhark_mc_task_130952 =
                                  (struct futhark_mc_task_130952 *) args;
    struct futhark_context *ctx = futhark_mc_task_130952->ctx;
    uint64_t futhark_mc_segmap_nested_task_130957_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130957_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_130952->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130952->free_css_chunk_len_114509;
    int64_t i_114539 = futhark_mc_task_130952->free_i_114539;
    int64_t bytes_121868 = futhark_mc_task_130952->free_bytes_121868;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130952->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t iter_123788;
    struct futhark_mc_segmap_parloop_struct_130958
    futhark_mc_segmap_parloop_struct_130958;
    
    futhark_mc_segmap_parloop_struct_130958.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130958.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130958.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130958.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130958.free_bytes_121868 = bytes_121868;
    futhark_mc_segmap_parloop_struct_130958.free_mem_121889 = mem_121889.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130959_task;
    
    futhark_mc_segmap_parloop_130959_task.name =
        "futhark_mc_segmap_parloop_130959";
    futhark_mc_segmap_parloop_130959_task.fn = futhark_mc_segmap_parloop_130959;
    futhark_mc_segmap_parloop_130959_task.args =
        &futhark_mc_segmap_parloop_struct_130958;
    futhark_mc_segmap_parloop_130959_task.iterations = iterations;
    futhark_mc_segmap_parloop_130959_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130959_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130959_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130959_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130959_task);
    
    if (futhark_mc_segmap_parloop_130959_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130959_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130959_total_end -
                 futhark_mc_segmap_parloop_130959_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130959_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130959_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130959_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130957_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130957_end -
                 futhark_mc_segmap_nested_task_130957_start;
        
        ctx->futhark_mc_segmap_nested_task_130957_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130957_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130957_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_130965 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
};
struct futhark_mc_segmap_parloop_struct_130967 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
};
static int futhark_mc_segmap_parloop_130968(void *args, int64_t start,
                                            int64_t end, int flat_tid_116712,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130967
    *futhark_mc_segmap_parloop_struct_130967 =
    (struct futhark_mc_segmap_parloop_struct_130967 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130967->ctx;
    uint64_t futhark_mc_segmap_parloop_130968_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130968_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130967->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130967->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130967->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130967->free_css_chunk_len_114509;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130967->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130967->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 =
            futhark_mc_segmap_parloop_struct_130967->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_130967->free_mem_121911,
                                  .size =0, .references =NULL};
    size_t mem_121895_cached_sizze_130969 = 0;
    char *mem_121895 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123800 = start;
    
    if (mem_121895_cached_sizze_130969 < (size_t) bytes_121890) {
        mem_121895 = realloc(mem_121895, bytes_121890);
        mem_121895_cached_sizze_130969 = bytes_121890;
    }
    for (; iter_123800 < end; iter_123800++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123819 = m_114462;
        int64_t gtid_116713 = iter_123800;
        int64_t remnant_123820 = iter_123800 - gtid_116713;
        
        for (int64_t i_123801 = 0; i_123801 < n_p_114465; i_123801++) {
            float defunc_2_reduce_res_123803;
            float redout_123805 = 0.0F;
            
            for (int64_t i_123804 = 0; i_123804 < css_chunk_len_114509;
                 i_123804++) {
                int64_t x_123806 = ((int64_t *) mem_121889.mem)[i_123801 *
                                                                css_chunk_len_114509 +
                                                                i_123804];
                bool cond_123807 = sle64((int64_t) 0, x_123806);
                float defunc_0_f_res_123808;
                
                if (cond_123807) {
                    bool y_123809 = slt64(x_123806, n_114463);
                    bool bounds_check_123810 = cond_123807 && y_123809;
                    bool index_certs_123811;
                    
                    if (!bounds_check_123810) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_123806,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_123812 =
                          ((float *) Y_mem_121802.mem)[gtid_116713 * n_114463 +
                                                       x_123806];
                    
                    defunc_0_f_res_123808 = defunc_0_f_res_t_res_123812;
                } else {
                    defunc_0_f_res_123808 = NAN;
                }
                
                bool isnan_res_123813;
                
                isnan_res_123813 = futrts_isnan32(defunc_0_f_res_123808);
                
                float defunc_0_f_res_123814;
                
                if (isnan_res_123813) {
                    defunc_0_f_res_123814 = 0.0F;
                } else {
                    defunc_0_f_res_123814 = 1.0F;
                }
                
                float defunc_1_op_res_123815 = defunc_0_f_res_123814 +
                      redout_123805;
                float redout_tmp_123822 = defunc_1_op_res_123815;
                
                redout_123805 = redout_tmp_123822;
            }
            defunc_2_reduce_res_123803 = redout_123805;
            
            bool sub_series_is_not_all_nan_123816 = 0.0F <
                 defunc_2_reduce_res_123803;
            bool assert_c_123817;
            
            if (!sub_series_is_not_all_nan_123816) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "Assertion is false: sub_series_is_not_all_nan",
                                       "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
                return 1;
            }
            ((float *) mem_121895)[i_123801] = defunc_2_reduce_res_123803;
        }
        memmove(mem_121911.mem + gtid_116713 * n_p_114465 * (int64_t) 4,
                mem_121895 + (int64_t) 0, n_p_114465 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121895);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130968_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130968_end -
                 futhark_mc_segmap_parloop_130968_start;
        
        ctx->futhark_mc_segmap_parloop_130968_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130968_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130968_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130966(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116712 = tid;
    int num_tasks_123799 = info.nsubtasks;
    struct futhark_mc_task_130965 *futhark_mc_task_130965 =
                                  (struct futhark_mc_task_130965 *) args;
    struct futhark_context *ctx = futhark_mc_task_130965->ctx;
    uint64_t futhark_mc_segmap_task_130966_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130966_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130965->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130965->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_130965->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130965->free_css_chunk_len_114509;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130965->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130965->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 = futhark_mc_task_130965->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_130965->free_mem_121911,
                                  .size =0, .references =NULL};
    int64_t iter_123800;
    struct futhark_mc_segmap_parloop_struct_130967
    futhark_mc_segmap_parloop_struct_130967;
    
    futhark_mc_segmap_parloop_struct_130967.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130967.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130967.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130967.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130967.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130967.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130967.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_130967.free_bytes_121890 = bytes_121890;
    futhark_mc_segmap_parloop_struct_130967.free_mem_121911 = mem_121911.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130968_task;
    
    futhark_mc_segmap_parloop_130968_task.name =
        "futhark_mc_segmap_parloop_130968";
    futhark_mc_segmap_parloop_130968_task.fn = futhark_mc_segmap_parloop_130968;
    futhark_mc_segmap_parloop_130968_task.args =
        &futhark_mc_segmap_parloop_struct_130967;
    futhark_mc_segmap_parloop_130968_task.iterations = iterations;
    futhark_mc_segmap_parloop_130968_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130968_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130968_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130968_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130968_task);
    
    if (futhark_mc_segmap_parloop_130968_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130968_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130968_total_end -
                 futhark_mc_segmap_parloop_130968_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130968_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130968_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130968_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130966_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130966_end -
                 futhark_mc_segmap_task_130966_start;
        
        ctx->futhark_mc_segmap_task_130966_runs[tid]++;
        ctx->futhark_mc_segmap_task_130966_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130966_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130971 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
};
struct futhark_mc_task_130974 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_116715;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    char *free_mem_121892;
};
struct futhark_mc_segmap_parloop_struct_130976 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_116715;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    char *free_mem_121892;
};
static int futhark_mc_segmap_parloop_130977(void *args, int64_t start,
                                            int64_t end, int flat_tid_116716,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130976
    *futhark_mc_segmap_parloop_struct_130976 =
    (struct futhark_mc_segmap_parloop_struct_130976 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130976->ctx;
    uint64_t futhark_mc_segmap_parloop_130977_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130977_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130976->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130976->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130976->free_css_chunk_len_114509;
    int64_t gtid_116715 =
            futhark_mc_segmap_parloop_struct_130976->free_gtid_116715;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130976->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130976->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121892 = {.desc ="mem_121892", .mem =
                                  futhark_mc_segmap_parloop_struct_130976->free_mem_121892,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123857 = start;
    
    for (; iter_123857 < end; iter_123857++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123870 = n_p_114465;
        int64_t gtid_116717 = iter_123857;
        int64_t remnant_123871 = iter_123857 - gtid_116717;
        float defunc_2_reduce_res_123839;
        float redout_123859 = 0.0F;
        
        for (int64_t i_123858 = 0; i_123858 < css_chunk_len_114509;
             i_123858++) {
            int64_t x_123860 = ((int64_t *) mem_121889.mem)[gtid_116717 *
                                                            css_chunk_len_114509 +
                                                            i_123858];
            bool cond_123861 = sle64((int64_t) 0, x_123860);
            float defunc_0_f_res_123862;
            
            if (cond_123861) {
                bool y_123863 = slt64(x_123860, n_114463);
                bool bounds_check_123864 = cond_123861 && y_123863;
                bool index_certs_123865;
                
                if (!bounds_check_123864) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_123860,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_123866 =
                      ((float *) Y_mem_121802.mem)[gtid_116715 * n_114463 +
                                                   x_123860];
                
                defunc_0_f_res_123862 = defunc_0_f_res_t_res_123866;
            } else {
                defunc_0_f_res_123862 = NAN;
            }
            
            bool isnan_res_123867;
            
            isnan_res_123867 = futrts_isnan32(defunc_0_f_res_123862);
            
            float defunc_0_f_res_123868;
            
            if (isnan_res_123867) {
                defunc_0_f_res_123868 = 0.0F;
            } else {
                defunc_0_f_res_123868 = 1.0F;
            }
            
            float defunc_1_op_res_123869 = defunc_0_f_res_123868 +
                  redout_123859;
            float redout_tmp_123872 = defunc_1_op_res_123869;
            
            redout_123859 = redout_tmp_123872;
        }
        defunc_2_reduce_res_123839 = redout_123859;
        
        bool sub_series_is_not_all_nan_123852 = 0.0F <
             defunc_2_reduce_res_123839;
        bool assert_c_123853;
        
        if (!sub_series_is_not_all_nan_123852) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_121892.mem)[gtid_116717] = defunc_2_reduce_res_123839;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130977_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130977_end -
                 futhark_mc_segmap_parloop_130977_start;
        
        ctx->futhark_mc_segmap_parloop_130977_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130977_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130977_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130975(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116716 = tid;
    int num_tasks_123856 = info.nsubtasks;
    struct futhark_mc_task_130974 *futhark_mc_task_130974 =
                                  (struct futhark_mc_task_130974 *) args;
    struct futhark_context *ctx = futhark_mc_task_130974->ctx;
    uint64_t futhark_mc_segmap_task_130975_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130975_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130974->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_130974->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130974->free_css_chunk_len_114509;
    int64_t gtid_116715 = futhark_mc_task_130974->free_gtid_116715;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130974->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130974->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121892 = {.desc ="mem_121892", .mem =
                                  futhark_mc_task_130974->free_mem_121892,
                                  .size =0, .references =NULL};
    int64_t iter_123857;
    struct futhark_mc_segmap_parloop_struct_130976
    futhark_mc_segmap_parloop_struct_130976;
    
    futhark_mc_segmap_parloop_struct_130976.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130976.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130976.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130976.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130976.free_gtid_116715 = gtid_116715;
    futhark_mc_segmap_parloop_struct_130976.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130976.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_130976.free_mem_121892 = mem_121892.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130977_task;
    
    futhark_mc_segmap_parloop_130977_task.name =
        "futhark_mc_segmap_parloop_130977";
    futhark_mc_segmap_parloop_130977_task.fn = futhark_mc_segmap_parloop_130977;
    futhark_mc_segmap_parloop_130977_task.args =
        &futhark_mc_segmap_parloop_struct_130976;
    futhark_mc_segmap_parloop_130977_task.iterations = iterations;
    futhark_mc_segmap_parloop_130977_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130977_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130977_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130977_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130977_task);
    
    if (futhark_mc_segmap_parloop_130977_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130977_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130977_total_end -
                 futhark_mc_segmap_parloop_130977_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130977_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130977_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130977_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130975_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130975_end -
                 futhark_mc_segmap_task_130975_start;
        
        ctx->futhark_mc_segmap_task_130975_runs[tid]++;
        ctx->futhark_mc_segmap_task_130975_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130975_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130979 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_116715;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    char *free_mem_121892;
};
struct futhark_mc_task_130981 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_116715;
    int64_t free_gtid_116719;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    float *retval_defunc_2_reduce_res_123824;
};
struct futhark_mc_segred_stage_1_parloop_struct_130984 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_116715;
    int64_t free_gtid_116719;
    char *free_Y_mem_121802;
    char *free_mem_121889;
    char *free_reduce_stage_1_tid_res_arr_mem_123889;
};
static int futhark_mc_segred_stage_1_parloop_130985(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116720,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_130984
    *futhark_mc_segred_stage_1_parloop_struct_130984 =
    (struct futhark_mc_segred_stage_1_parloop_struct_130984 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_130984->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_130985_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_130985_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_130984->free_n_114463;
    int64_t css_chunk_len_114509 =
            futhark_mc_segred_stage_1_parloop_struct_130984->free_css_chunk_len_114509;
    int64_t gtid_116715 =
            futhark_mc_segred_stage_1_parloop_struct_130984->free_gtid_116715;
    int64_t gtid_116719 =
            futhark_mc_segred_stage_1_parloop_struct_130984->free_gtid_116719;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segred_stage_1_parloop_struct_130984->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_130984->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123889 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123889",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_130984->free_reduce_stage_1_tid_res_arr_mem_123889,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123891 = start;
    float x_123874;
    float x_123875;
    float local_acc_123892 = 0.0F;
    
    for (; iter_123891 < end; iter_123891++) {
        int64_t gtid_116721 = iter_123891;
        int64_t x_123877 = ((int64_t *) mem_121889.mem)[gtid_116719 *
                                                        css_chunk_len_114509 +
                                                        gtid_116721];
        bool cond_123878 = sle64((int64_t) 0, x_123877);
        float defunc_0_f_res_123879;
        
        if (cond_123878) {
            bool y_123880 = slt64(x_123877, n_114463);
            bool bounds_check_123881 = cond_123878 && y_123880;
            bool index_certs_123882;
            
            if (!bounds_check_123881) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_123877,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_123883 =
                  ((float *) Y_mem_121802.mem)[gtid_116715 * n_114463 +
                                               x_123877];
            
            defunc_0_f_res_123879 = defunc_0_f_res_t_res_123883;
        } else {
            defunc_0_f_res_123879 = NAN;
        }
        
        bool isnan_res_123884;
        
        isnan_res_123884 = futrts_isnan32(defunc_0_f_res_123879);
        
        float defunc_0_f_res_123885;
        
        if (isnan_res_123884) {
            defunc_0_f_res_123885 = 0.0F;
        } else {
            defunc_0_f_res_123885 = 1.0F;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_123874 = local_acc_123892;
        }
        // Load next params
        {
            x_123875 = defunc_0_f_res_123885;
        }
        // Red body
        {
            float defunc_1_op_res_123876 = x_123874 + x_123875;
            
            local_acc_123892 = defunc_1_op_res_123876;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123889.mem)[flat_tid_116720] =
        local_acc_123892;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_130985_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_130985_end -
                 futhark_mc_segred_stage_1_parloop_130985_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_130985_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_130985_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_130985_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_130982(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116720 = tid;
    int num_tasks_123888 = info.nsubtasks;
    struct futhark_mc_task_130981 *futhark_mc_task_130981 =
                                  (struct futhark_mc_task_130981 *) args;
    struct futhark_context *ctx = futhark_mc_task_130981->ctx;
    uint64_t futhark_mc_segred_task_130982_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_130982_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130981->free_n_114463;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130981->free_css_chunk_len_114509;
    int64_t gtid_116715 = futhark_mc_task_130981->free_gtid_116715;
    int64_t gtid_116719 = futhark_mc_task_130981->free_gtid_116719;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130981->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130981->free_mem_121889,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_123824 =
          *futhark_mc_task_130981->retval_defunc_2_reduce_res_123824;
    size_t reduce_stage_1_tid_res_arr_mem_123889_cached_sizze_130983 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123889 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123889_cached_sizze_130983 <
        (size_t) ((int64_t) 4 * num_tasks_123888)) {
        reduce_stage_1_tid_res_arr_mem_123889 =
            realloc(reduce_stage_1_tid_res_arr_mem_123889, (int64_t) 4 *
                    num_tasks_123888);
        reduce_stage_1_tid_res_arr_mem_123889_cached_sizze_130983 =
            (int64_t) 4 * num_tasks_123888;
    }
    
    int64_t iter_123891;
    struct futhark_mc_segred_stage_1_parloop_struct_130984
    futhark_mc_segred_stage_1_parloop_struct_130984;
    
    futhark_mc_segred_stage_1_parloop_struct_130984.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_gtid_116715 =
        gtid_116715;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_gtid_116719 =
        gtid_116719;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_mem_121889 =
        mem_121889.mem;
    futhark_mc_segred_stage_1_parloop_struct_130984.free_reduce_stage_1_tid_res_arr_mem_123889 =
        reduce_stage_1_tid_res_arr_mem_123889;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_130985_task;
    
    futhark_mc_segred_stage_1_parloop_130985_task.name =
        "futhark_mc_segred_stage_1_parloop_130985";
    futhark_mc_segred_stage_1_parloop_130985_task.fn =
        futhark_mc_segred_stage_1_parloop_130985;
    futhark_mc_segred_stage_1_parloop_130985_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_130984;
    futhark_mc_segred_stage_1_parloop_130985_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_130985_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_130985_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_130985_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_130985_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_130985_task);
    
    if (futhark_mc_segred_stage_1_parloop_130985_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_130985_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_130985_total_end -
                 futhark_mc_segred_stage_1_parloop_130985_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_130985_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_130985_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_130985_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123824 = 0.0F;
    }
    
    float x_123893;
    float x_123894;
    
    for (int32_t i_123896 = 0; i_123896 < num_tasks_123888; i_123896++) {
        flat_tid_116720 = i_123896;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123893 = defunc_2_reduce_res_123824;
            }
            // load next params
            {
                x_123894 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123889)[flat_tid_116720];
            }
            // red body
            {
                float defunc_1_op_res_123895 = x_123893 + x_123894;
                
                defunc_2_reduce_res_123824 = defunc_1_op_res_123895;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123889);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_130982_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_130982_end -
                 futhark_mc_segred_task_130982_start;
        
        ctx->futhark_mc_segred_task_130982_runs[tid]++;
        ctx->futhark_mc_segred_task_130982_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_130982_iter[tid] += iterations;
    }
    *futhark_mc_task_130981->retval_defunc_2_reduce_res_123824 =
        defunc_2_reduce_res_123824;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130980(void *args, int64_t start,
                                            int64_t end, int flat_tid_116718,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130979
    *futhark_mc_segmap_parloop_struct_130979 =
    (struct futhark_mc_segmap_parloop_struct_130979 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130979->ctx;
    uint64_t futhark_mc_segmap_parloop_130980_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130980_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130979->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130979->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130979->free_css_chunk_len_114509;
    int64_t gtid_116715 =
            futhark_mc_segmap_parloop_struct_130979->free_gtid_116715;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130979->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130979->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121892 = {.desc ="mem_121892", .mem =
                                  futhark_mc_segmap_parloop_struct_130979->free_mem_121892,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123873 = start;
    
    for (; iter_123873 < end; iter_123873++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123886 = n_p_114465;
        int64_t gtid_116719 = iter_123873;
        int64_t remnant_123887 = iter_123873 - gtid_116719;
        float defunc_2_reduce_res_123824;
        int64_t flat_tid_116720 = (int64_t) 0;
        int32_t num_tasks_123888;
        struct futhark_mc_task_130981 futhark_mc_task_130981;
        
        futhark_mc_task_130981.ctx = ctx;
        futhark_mc_task_130981.free_n_114463 = n_114463;
        futhark_mc_task_130981.free_css_chunk_len_114509 = css_chunk_len_114509;
        futhark_mc_task_130981.free_gtid_116715 = gtid_116715;
        futhark_mc_task_130981.free_gtid_116719 = gtid_116719;
        futhark_mc_task_130981.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_130981.free_mem_121889 = mem_121889.mem;
        futhark_mc_task_130981.retval_defunc_2_reduce_res_123824 =
            &defunc_2_reduce_res_123824;
        
        struct scheduler_segop futhark_mc_task_130981_task;
        
        futhark_mc_task_130981_task.args = &futhark_mc_task_130981;
        futhark_mc_task_130981_task.top_level_fn =
            futhark_mc_segred_task_130982;
        futhark_mc_task_130981_task.name = "futhark_mc_segred_task_130982";
        futhark_mc_task_130981_task.iterations = css_chunk_len_114509;
        futhark_mc_task_130981_task.task_time =
            &ctx->futhark_mc_segred_task_130982_total_time;
        futhark_mc_task_130981_task.task_iter =
            &ctx->futhark_mc_segred_task_130982_total_iter;
        futhark_mc_task_130981_task.sched = STATIC;
        futhark_mc_task_130981_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_130982_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130981_task);
        
        if (futhark_mc_segred_task_130982_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        bool sub_series_is_not_all_nan_123837 = 0.0F <
             defunc_2_reduce_res_123824;
        bool assert_c_123838;
        
        if (!sub_series_is_not_all_nan_123837) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_121892.mem)[gtid_116719] = defunc_2_reduce_res_123824;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130980_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130980_end -
                 futhark_mc_segmap_parloop_130980_start;
        
        ctx->futhark_mc_segmap_parloop_130980_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130980_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130980_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130978(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116718 = tid;
    int num_tasks_123856 = info.nsubtasks;
    struct futhark_mc_task_130974 *futhark_mc_task_130974 =
                                  (struct futhark_mc_task_130974 *) args;
    struct futhark_context *ctx = futhark_mc_task_130974->ctx;
    uint64_t futhark_mc_segmap_nested_task_130978_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130978_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_130974->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_130974->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130974->free_css_chunk_len_114509;
    int64_t gtid_116715 = futhark_mc_task_130974->free_gtid_116715;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130974->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130974->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121892 = {.desc ="mem_121892", .mem =
                                  futhark_mc_task_130974->free_mem_121892,
                                  .size =0, .references =NULL};
    int64_t iter_123873;
    struct futhark_mc_segmap_parloop_struct_130979
    futhark_mc_segmap_parloop_struct_130979;
    
    futhark_mc_segmap_parloop_struct_130979.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130979.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130979.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130979.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130979.free_gtid_116715 = gtid_116715;
    futhark_mc_segmap_parloop_struct_130979.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130979.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_130979.free_mem_121892 = mem_121892.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130980_task;
    
    futhark_mc_segmap_parloop_130980_task.name =
        "futhark_mc_segmap_parloop_130980";
    futhark_mc_segmap_parloop_130980_task.fn = futhark_mc_segmap_parloop_130980;
    futhark_mc_segmap_parloop_130980_task.args =
        &futhark_mc_segmap_parloop_struct_130979;
    futhark_mc_segmap_parloop_130980_task.iterations = iterations;
    futhark_mc_segmap_parloop_130980_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130980_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130980_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130980_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130980_task);
    
    if (futhark_mc_segmap_parloop_130980_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130980_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130980_total_end -
                 futhark_mc_segmap_parloop_130980_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130980_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130980_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130980_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130978_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130978_end -
                 futhark_mc_segmap_nested_task_130978_start;
        
        ctx->futhark_mc_segmap_nested_task_130978_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130978_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130978_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130972(void *args, int64_t start,
                                            int64_t end, int flat_tid_116714,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130971
    *futhark_mc_segmap_parloop_struct_130971 =
    (struct futhark_mc_segmap_parloop_struct_130971 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130971->ctx;
    uint64_t futhark_mc_segmap_parloop_130972_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130972_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130971->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130971->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_130971->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_130971->free_css_chunk_len_114509;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_130971->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_130971->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 =
            futhark_mc_segmap_parloop_struct_130971->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_130971->free_mem_121911,
                                  .size =0, .references =NULL};
    size_t mem_121892_cached_sizze_130973 = 0;
    char *mem_121892 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123823 = start;
    
    if (mem_121892_cached_sizze_130973 < (size_t) bytes_121890) {
        mem_121892 = realloc(mem_121892, bytes_121890);
        mem_121892_cached_sizze_130973 = bytes_121890;
    }
    for (; iter_123823 < end; iter_123823++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123854 = m_114462;
        int64_t gtid_116715 = iter_123823;
        int64_t remnant_123855 = iter_123823 - gtid_116715;
        int64_t flat_tid_116716 = (int64_t) 0;
        int32_t num_tasks_123856;
        int64_t flat_tid_116718 = (int64_t) 0;
        struct futhark_mc_task_130974 futhark_mc_task_130974;
        
        futhark_mc_task_130974.ctx = ctx;
        futhark_mc_task_130974.free_n_114463 = n_114463;
        futhark_mc_task_130974.free_n_p_114465 = n_p_114465;
        futhark_mc_task_130974.free_css_chunk_len_114509 = css_chunk_len_114509;
        futhark_mc_task_130974.free_gtid_116715 = gtid_116715;
        futhark_mc_task_130974.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_130974.free_mem_121889 = mem_121889.mem;
        futhark_mc_task_130974.free_mem_121892 = mem_121892;
        
        struct scheduler_segop futhark_mc_task_130974_task;
        
        futhark_mc_task_130974_task.args = &futhark_mc_task_130974;
        futhark_mc_task_130974_task.top_level_fn =
            futhark_mc_segmap_task_130975;
        futhark_mc_task_130974_task.name = "futhark_mc_segmap_task_130975";
        futhark_mc_task_130974_task.iterations = n_p_114465;
        futhark_mc_task_130974_task.task_time =
            &ctx->futhark_mc_segmap_task_130975_total_time;
        futhark_mc_task_130974_task.task_iter =
            &ctx->futhark_mc_segmap_task_130975_total_iter;
        futhark_mc_task_130974_task.sched = STATIC;
        futhark_mc_task_130974_task.nested_fn =
            futhark_mc_segmap_nested_task_130978;
        
        int futhark_mc_segmap_task_130975_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_130974_task);
        
        if (futhark_mc_segmap_task_130975_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121911.mem + gtid_116715 * n_p_114465 * (int64_t) 4,
                mem_121892 + (int64_t) 0, n_p_114465 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121892);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130972_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130972_end -
                 futhark_mc_segmap_parloop_130972_start;
        
        ctx->futhark_mc_segmap_parloop_130972_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130972_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130972_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130970(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116714 = tid;
    int num_tasks_123799 = info.nsubtasks;
    struct futhark_mc_task_130965 *futhark_mc_task_130965 =
                                  (struct futhark_mc_task_130965 *) args;
    struct futhark_context *ctx = futhark_mc_task_130965->ctx;
    uint64_t futhark_mc_segmap_nested_task_130970_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130970_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130965->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130965->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_130965->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_130965->free_css_chunk_len_114509;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_130965->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_130965->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 = futhark_mc_task_130965->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_130965->free_mem_121911,
                                  .size =0, .references =NULL};
    int64_t iter_123823;
    struct futhark_mc_segmap_parloop_struct_130971
    futhark_mc_segmap_parloop_struct_130971;
    
    futhark_mc_segmap_parloop_struct_130971.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130971.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130971.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130971.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_130971.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_130971.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_130971.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_130971.free_bytes_121890 = bytes_121890;
    futhark_mc_segmap_parloop_struct_130971.free_mem_121911 = mem_121911.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130972_task;
    
    futhark_mc_segmap_parloop_130972_task.name =
        "futhark_mc_segmap_parloop_130972";
    futhark_mc_segmap_parloop_130972_task.fn = futhark_mc_segmap_parloop_130972;
    futhark_mc_segmap_parloop_130972_task.args =
        &futhark_mc_segmap_parloop_struct_130971;
    futhark_mc_segmap_parloop_130972_task.iterations = iterations;
    futhark_mc_segmap_parloop_130972_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130972_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130972_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130972_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130972_task);
    
    if (futhark_mc_segmap_parloop_130972_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130972_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130972_total_end -
                 futhark_mc_segmap_parloop_130972_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130972_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130972_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130972_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130970_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130970_end -
                 futhark_mc_segmap_nested_task_130970_start;
        
        ctx->futhark_mc_segmap_nested_task_130970_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130970_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130970_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_130986 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    float free_i64_res_114618;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121918;
    int64_t free_bytes_121921;
    char *free_mem_121987;
    char *free_mem_121991;
};
struct futhark_mc_segmap_parloop_struct_130988 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    float free_i64_res_114618;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121918;
    int64_t free_bytes_121921;
    char *free_mem_121987;
    char *free_mem_121991;
};
static int futhark_mc_segmap_parloop_130989(void *args, int64_t start,
                                            int64_t end, int flat_tid_116772,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130988
    *futhark_mc_segmap_parloop_struct_130988 =
    (struct futhark_mc_segmap_parloop_struct_130988 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130988->ctx;
    uint64_t futhark_mc_segmap_parloop_130989_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130989_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130988->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130988->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_130988->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_130988->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130988->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_130988->free_x_114540;
    int64_t min_res_114611 =
            futhark_mc_segmap_parloop_struct_130988->free_min_res_114611;
    bool empty_slice_114616 =
         futhark_mc_segmap_parloop_struct_130988->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_segmap_parloop_struct_130988->free_m_114617;
    float i64_res_114618 =
          futhark_mc_segmap_parloop_struct_130988->free_i64_res_114618;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_130988->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130988->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_130988->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_130988->free_bytes_121918;
    int64_t bytes_121921 =
            futhark_mc_segmap_parloop_struct_130988->free_bytes_121921;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_130988->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_130988->free_mem_121991,
                                  .size =0, .references =NULL};
    size_t mem_121926_cached_sizze_130990 = 0;
    char *mem_121926 = NULL;
    size_t mem_121929_cached_sizze_130991 = 0;
    char *mem_121929 = NULL;
    size_t mem_121956_cached_sizze_130992 = 0;
    char *mem_121956 = NULL;
    size_t mem_121959_cached_sizze_130993 = 0;
    char *mem_121959 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123898 = start;
    
    if (mem_121926_cached_sizze_130990 < (size_t) bytes_121803) {
        mem_121926 = realloc(mem_121926, bytes_121803);
        mem_121926_cached_sizze_130990 = bytes_121803;
    }
    if (mem_121929_cached_sizze_130991 < (size_t) bytes_121803) {
        mem_121929 = realloc(mem_121929, bytes_121803);
        mem_121929_cached_sizze_130991 = bytes_121803;
    }
    if (mem_121956_cached_sizze_130992 < (size_t) bytes_121918) {
        mem_121956 = realloc(mem_121956, bytes_121918);
        mem_121956_cached_sizze_130992 = bytes_121918;
    }
    if (mem_121959_cached_sizze_130993 < (size_t) bytes_121921) {
        mem_121959 = realloc(mem_121959, bytes_121921);
        mem_121959_cached_sizze_130993 = bytes_121921;
    }
    for (; iter_123898 < end; iter_123898++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124011 = m_114462;
        int64_t gtid_116773 = iter_123898;
        int64_t remnant_124012 = iter_123898 - gtid_116773;
        int64_t x_114622 = ((int64_t *) mem_121845.mem)[gtid_116773];
        
        for (int64_t i_123899 = 0; i_123899 < n_114463; i_123899++) {
            int64_t x_123902 = ((int64_t *) mem_121842.mem)[gtid_116773 *
                                                            n_114463 +
                                                            i_123899];
            int64_t defunc_0_f_res_123903 = add64((int64_t) 1, x_123902);
            bool cond_123904 = slt64(defunc_0_f_res_123903, (int64_t) 0);
            int64_t defunc_0_f_res_123905;
            
            if (cond_123904) {
                defunc_0_f_res_123905 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_123905 = defunc_0_f_res_123903;
            }
            ((int64_t *) mem_121926)[i_123899] = defunc_0_f_res_123905;
            ((int64_t *) mem_121929)[i_123899] = defunc_0_f_res_123903;
        }
        
        int64_t min_arg_114629 = sub64(x_114622, min_res_114611);
        float i64_res_114630 = sitofp_i64_f32(x_114622);
        float x_114631 = i64_res_114618 - i64_res_114630;
        float max_arg_114632 = x_114631 / 2.0F;
        float max_res_114633 = fmax32(0.0F, max_arg_114632);
        
        for (int64_t i_123908 = 0; i_123908 < l_n_m_114513; i_123908++) {
            int64_t min_arg_123911 = mul64(l_jump_114471, i_123908);
            int64_t min_res_123912 = smin64(i_114539, min_arg_123911);
            int64_t defunc_0_g_res_123913 = add64((int64_t) 1, min_res_123912);
            bool nearest_idx_123914;
            int64_t nearest_idx_123915;
            int64_t nearest_idx_123916;
            bool loop_while_123917;
            int64_t low_123918;
            int64_t high_123919;
            
            loop_while_123917 = x_114540;
            low_123918 = (int64_t) 0;
            high_123919 = i_114539;
            while (loop_while_123917) {
                int64_t x_123920 = add64(low_123918, high_123919);
                int64_t mid_123921 = sdiv64(x_123920, (int64_t) 2);
                bool x_123922 = sle64((int64_t) 0, mid_123921);
                bool y_123923 = slt64(mid_123921, n_114463);
                bool bounds_check_123924 = x_123922 && y_123923;
                bool index_certs_123925;
                
                if (!bounds_check_123924) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_123921,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_123926 = ((int64_t *) mem_121926)[mid_123921];
                bool cond_123927 = sle64(defunc_0_g_res_123913, x_123926);
                int64_t loopres_123928;
                int64_t loopres_123929;
                
                if (cond_123927) {
                    int64_t loopres_t_res_123930 = sub64(mid_123921,
                                                         (int64_t) 1);
                    
                    loopres_123928 = low_123918;
                    loopres_123929 = loopres_t_res_123930;
                } else {
                    int64_t loopres_f_res_123931 = add64((int64_t) 1,
                                                         mid_123921);
                    
                    loopres_123928 = loopres_f_res_123931;
                    loopres_123929 = high_123919;
                }
                
                bool loop_cond_123932 = sle64(loopres_123928, loopres_123929);
                bool loop_while_tmp_124017 = loop_cond_123932;
                int64_t low_tmp_124018 = loopres_123928;
                int64_t high_tmp_124019 = loopres_123929;
                
                loop_while_123917 = loop_while_tmp_124017;
                low_123918 = low_tmp_124018;
                high_123919 = high_tmp_124019;
            }
            nearest_idx_123914 = loop_while_123917;
            nearest_idx_123915 = low_123918;
            nearest_idx_123916 = high_123919;
            
            int64_t max_arg_123933 = sub64(nearest_idx_123915, min_res_114611);
            int64_t max_res_123934 = smax64((int64_t) 0, max_arg_123933);
            int64_t j_123935 = add64(min_res_114611, max_res_123934);
            int64_t i_p_m_t_s_123936 = add64(m_114617, max_res_123934);
            bool zzero_leq_i_p_m_t_s_123937 = sle64((int64_t) 0,
                                                    i_p_m_t_s_123936);
            bool i_p_m_t_s_leq_w_123938 = slt64(i_p_m_t_s_123936, n_114463);
            bool zzero_lte_i_123939 = sle64((int64_t) 0, max_res_123934);
            bool i_lte_j_123940 = sle64(max_res_123934, j_123935);
            bool y_123941 = i_p_m_t_s_leq_w_123938 && zzero_lte_i_123939;
            bool y_123942 = zzero_leq_i_p_m_t_s_123937 && y_123941;
            bool y_123943 = i_lte_j_123940 && y_123942;
            bool forwards_ok_123944 = zzero_lte_i_123939 && y_123943;
            bool ok_or_empty_123945 = empty_slice_114616 || forwards_ok_123944;
            bool index_certs_123946;
            
            if (!ok_or_empty_123945) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_123934, ":",
                              (long long) j_123935,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_123947;
            int64_t redout_123949 = (int64_t) 0;
            
            for (int64_t i_123948 = 0; i_123948 < min_res_114611; i_123948++) {
                int64_t slice_123950 = max_res_123934 + i_123948;
                int64_t x_123951 = ((int64_t *) mem_121929)[slice_123950];
                int64_t abs_arg_123952 = sub64(x_123951, defunc_0_g_res_123913);
                int64_t abs_res_123953 = abs64(abs_arg_123952);
                int64_t defunc_1_op_res_123954 = add64(abs_res_123953,
                                                       redout_123949);
                int64_t redout_tmp_124020 = defunc_1_op_res_123954;
                
                redout_123949 = redout_tmp_124020;
            }
            defunc_2_reduce_res_123947 = redout_123949;
            
            int64_t idx_123955;
            int64_t idx_123956;
            int64_t idx_123957;
            int64_t idx_123958;
            int64_t best_idx_123960;
            int64_t last_idx_123961;
            int64_t best_sum_123962;
            int64_t curr_sum_123963;
            
            best_idx_123960 = max_res_123934;
            last_idx_123961 = max_res_123934;
            best_sum_123962 = defunc_2_reduce_res_123947;
            curr_sum_123963 = defunc_2_reduce_res_123947;
            for (int64_t j_123959 = 0; j_123959 < min_res_114611; j_123959++) {
                int64_t new_idx_123964 = add64(max_res_123934, j_123959);
                int64_t x_123965 = add64(min_res_114611, new_idx_123964);
                bool cond_123966 = slt64(x_114622, x_123965);
                int64_t new_sum_123967;
                
                if (cond_123966) {
                    new_sum_123967 = (int64_t) 9223372036854775807;
                } else {
                    bool x_123968 = sle64((int64_t) 0, last_idx_123961);
                    bool y_123969 = slt64(last_idx_123961, n_114463);
                    bool bounds_check_123970 = x_123968 && y_123969;
                    bool index_certs_123971;
                    
                    if (!bounds_check_123970) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_123961,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    int64_t y_123972 =
                            ((int64_t *) mem_121929)[last_idx_123961];
                    int64_t binop_p_123973 = sub64(defunc_0_g_res_123913,
                                                   y_123972);
                    int64_t defunc_0_f_res_123974 = abs64(binop_p_123973);
                    int64_t x_123975 = sub64(curr_sum_123963,
                                             defunc_0_f_res_123974);
                    int64_t min_arg_123976 = add64(min_res_114611,
                                                   last_idx_123961);
                    int64_t min_res_123977 = smin64(i_114539, min_arg_123976);
                    bool x_123978 = sle64((int64_t) 0, min_res_123977);
                    bool y_123979 = slt64(min_res_123977, n_114463);
                    bool bounds_check_123980 = x_123978 && y_123979;
                    bool index_certs_123981;
                    
                    if (!bounds_check_123980) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_123977,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    int64_t y_123982 = ((int64_t *) mem_121929)[min_res_123977];
                    int64_t binop_p_123983 = sub64(defunc_0_g_res_123913,
                                                   y_123982);
                    int64_t defunc_0_f_res_123984 = abs64(binop_p_123983);
                    int64_t new_sum_f_res_123985 = add64(x_123975,
                                                         defunc_0_f_res_123984);
                    
                    new_sum_123967 = new_sum_f_res_123985;
                }
                
                bool cond_123986 = sle64(new_sum_123967, best_sum_123962);
                int64_t loopres_123987;
                
                if (cond_123986) {
                    loopres_123987 = new_idx_123964;
                } else {
                    loopres_123987 = best_idx_123960;
                }
                
                int64_t loopres_123988;
                
                if (cond_123986) {
                    loopres_123988 = new_sum_123967;
                } else {
                    loopres_123988 = best_sum_123962;
                }
                
                int64_t best_idx_tmp_124021 = loopres_123987;
                int64_t last_idx_tmp_124022 = new_idx_123964;
                int64_t best_sum_tmp_124023 = loopres_123988;
                int64_t curr_sum_tmp_124024 = new_sum_123967;
                
                best_idx_123960 = best_idx_tmp_124021;
                last_idx_123961 = last_idx_tmp_124022;
                best_sum_123962 = best_sum_tmp_124023;
                curr_sum_123963 = curr_sum_tmp_124024;
            }
            idx_123955 = best_idx_123960;
            idx_123956 = last_idx_123961;
            idx_123957 = best_sum_123962;
            idx_123958 = curr_sum_123963;
            
            int64_t min_res_123989 = smin64(min_arg_114629, idx_123955);
            int64_t x_123990 = add64(min_res_114611, min_res_123989);
            int64_t r_123991 = sub64(x_123990, (int64_t) 1);
            bool x_123992 = sle64((int64_t) 0, r_123991);
            bool y_123993 = slt64(r_123991, n_114463);
            bool bounds_check_123994 = x_123992 && y_123993;
            bool index_certs_123995;
            
            if (!bounds_check_123994) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_123991,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_123996 = ((int64_t *) mem_121842.mem)[gtid_116773 *
                                                            n_114463 +
                                                            r_123991];
            int64_t abs_arg_123997 = sub64(x_123996, min_res_123912);
            int64_t abs_res_123998 = abs64(abs_arg_123997);
            bool x_123999 = sle64((int64_t) 0, min_res_123989);
            bool y_124000 = slt64(min_res_123989, n_114463);
            bool bounds_check_124001 = x_123999 && y_124000;
            bool index_certs_124002;
            
            if (!bounds_check_124001) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_123989,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124003 = ((int64_t *) mem_121842.mem)[gtid_116773 *
                                                            n_114463 +
                                                            min_res_123989];
            int64_t abs_arg_124004 = sub64(x_124003, min_res_123912);
            int64_t abs_res_124005 = abs64(abs_arg_124004);
            int64_t max_res_124006 = smax64(abs_res_123998, abs_res_124005);
            float defunc_0_f_res_124007 = sitofp_i64_f32(max_res_124006);
            float defunc_1_f_res_124008 = max_res_114633 +
                  defunc_0_f_res_124007;
            
            ((float *) mem_121956)[i_123908] = defunc_1_f_res_124008;
            ((int64_t *) mem_121959)[i_123908] = min_res_123989;
        }
        memmove(mem_121987.mem + gtid_116773 * l_n_m_114513 * (int64_t) 8,
                mem_121959 + (int64_t) 0, l_n_m_114513 * (int64_t) 8);
        memmove(mem_121991.mem + gtid_116773 * l_n_m_114513 * (int64_t) 4,
                mem_121956 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121926);
    free(mem_121929);
    free(mem_121956);
    free(mem_121959);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130989_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130989_end -
                 futhark_mc_segmap_parloop_130989_start;
        
        ctx->futhark_mc_segmap_parloop_130989_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130989_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130989_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_130987(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116772 = tid;
    int num_tasks_123897 = info.nsubtasks;
    struct futhark_mc_task_130986 *futhark_mc_task_130986 =
                                  (struct futhark_mc_task_130986 *) args;
    struct futhark_context *ctx = futhark_mc_task_130986->ctx;
    uint64_t futhark_mc_segmap_task_130987_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_130987_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130986->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130986->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_130986->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_130986->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_130986->free_i_114539;
    bool x_114540 = futhark_mc_task_130986->free_x_114540;
    int64_t min_res_114611 = futhark_mc_task_130986->free_min_res_114611;
    bool empty_slice_114616 = futhark_mc_task_130986->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_task_130986->free_m_114617;
    float i64_res_114618 = futhark_mc_task_130986->free_i64_res_114618;
    int64_t bytes_121803 = futhark_mc_task_130986->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130986->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_130986->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121918 = futhark_mc_task_130986->free_bytes_121918;
    int64_t bytes_121921 = futhark_mc_task_130986->free_bytes_121921;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_130986->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_130986->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t iter_123898;
    struct futhark_mc_segmap_parloop_struct_130988
    futhark_mc_segmap_parloop_struct_130988;
    
    futhark_mc_segmap_parloop_struct_130988.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130988.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130988.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130988.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_130988.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_130988.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130988.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_130988.free_min_res_114611 =
        min_res_114611;
    futhark_mc_segmap_parloop_struct_130988.free_empty_slice_114616 =
        empty_slice_114616;
    futhark_mc_segmap_parloop_struct_130988.free_m_114617 = m_114617;
    futhark_mc_segmap_parloop_struct_130988.free_i64_res_114618 =
        i64_res_114618;
    futhark_mc_segmap_parloop_struct_130988.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_130988.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130988.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_130988.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_130988.free_bytes_121921 = bytes_121921;
    futhark_mc_segmap_parloop_struct_130988.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_130988.free_mem_121991 = mem_121991.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130989_task;
    
    futhark_mc_segmap_parloop_130989_task.name =
        "futhark_mc_segmap_parloop_130989";
    futhark_mc_segmap_parloop_130989_task.fn = futhark_mc_segmap_parloop_130989;
    futhark_mc_segmap_parloop_130989_task.args =
        &futhark_mc_segmap_parloop_struct_130988;
    futhark_mc_segmap_parloop_130989_task.iterations = iterations;
    futhark_mc_segmap_parloop_130989_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130989_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130989_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130989_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130989_task);
    
    if (futhark_mc_segmap_parloop_130989_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130989_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130989_total_end -
                 futhark_mc_segmap_parloop_130989_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130989_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130989_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130989_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_130987_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_130987_end -
                 futhark_mc_segmap_task_130987_start;
        
        ctx->futhark_mc_segmap_task_130987_runs[tid]++;
        ctx->futhark_mc_segmap_task_130987_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_130987_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_130995 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    float free_i64_res_114618;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121918;
    int64_t free_bytes_121921;
    char *free_mem_121987;
    char *free_mem_121991;
};
struct futhark_mc_task_131001 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116775;
    char *free_mem_121842;
    char *free_mem_121914;
    char *free_mem_121917;
};
struct futhark_mc_segmap_parloop_struct_131003 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_116775;
    char *free_mem_121842;
    char *free_mem_121914;
    char *free_mem_121917;
};
static int futhark_mc_segmap_parloop_131004(void *args, int64_t start,
                                            int64_t end, int flat_tid_116776,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131003
    *futhark_mc_segmap_parloop_struct_131003 =
    (struct futhark_mc_segmap_parloop_struct_131003 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131003->ctx;
    uint64_t futhark_mc_segmap_parloop_131004_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131004_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131003->free_n_114463;
    int64_t gtid_116775 =
            futhark_mc_segmap_parloop_struct_131003->free_gtid_116775;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131003->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_segmap_parloop_struct_131003->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_segmap_parloop_struct_131003->free_mem_121917,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124229 = start;
    
    for (; iter_124229 < end; iter_124229++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124230 = n_114463;
        int64_t gtid_116777 = iter_124229;
        int64_t remnant_124231 = iter_124229 - gtid_116777;
        int64_t x_124026 = ((int64_t *) mem_121842.mem)[gtid_116775 * n_114463 +
                                                        gtid_116777];
        int64_t defunc_0_f_res_124027 = add64((int64_t) 1, x_124026);
        bool cond_124028 = slt64(defunc_0_f_res_124027, (int64_t) 0);
        int64_t defunc_0_f_res_124029;
        
        if (cond_124028) {
            defunc_0_f_res_124029 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_124029 = defunc_0_f_res_124027;
        }
        ((int64_t *) mem_121914.mem)[gtid_116777] = defunc_0_f_res_124029;
        ((int64_t *) mem_121917.mem)[gtid_116777] = defunc_0_f_res_124027;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131004_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131004_end -
                 futhark_mc_segmap_parloop_131004_start;
        
        ctx->futhark_mc_segmap_parloop_131004_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131004_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131004_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131002(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116776 = tid;
    int num_tasks_124228 = info.nsubtasks;
    struct futhark_mc_task_131001 *futhark_mc_task_131001 =
                                  (struct futhark_mc_task_131001 *) args;
    struct futhark_context *ctx = futhark_mc_task_131001->ctx;
    uint64_t futhark_mc_segmap_task_131002_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131002_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131001->free_n_114463;
    int64_t gtid_116775 = futhark_mc_task_131001->free_gtid_116775;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131001->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_task_131001->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_task_131001->free_mem_121917,
                                  .size =0, .references =NULL};
    int64_t iter_124229;
    struct futhark_mc_segmap_parloop_struct_131003
    futhark_mc_segmap_parloop_struct_131003;
    
    futhark_mc_segmap_parloop_struct_131003.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131003.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131003.free_gtid_116775 = gtid_116775;
    futhark_mc_segmap_parloop_struct_131003.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131003.free_mem_121914 = mem_121914.mem;
    futhark_mc_segmap_parloop_struct_131003.free_mem_121917 = mem_121917.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131004_task;
    
    futhark_mc_segmap_parloop_131004_task.name =
        "futhark_mc_segmap_parloop_131004";
    futhark_mc_segmap_parloop_131004_task.fn = futhark_mc_segmap_parloop_131004;
    futhark_mc_segmap_parloop_131004_task.args =
        &futhark_mc_segmap_parloop_struct_131003;
    futhark_mc_segmap_parloop_131004_task.iterations = iterations;
    futhark_mc_segmap_parloop_131004_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131004_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131004_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131004_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131004_task);
    
    if (futhark_mc_segmap_parloop_131004_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131004_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131004_total_end -
                 futhark_mc_segmap_parloop_131004_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131004_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131004_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131004_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131002_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131002_end -
                 futhark_mc_segmap_task_131002_start;
        
        ctx->futhark_mc_segmap_task_131002_runs[tid]++;
        ctx->futhark_mc_segmap_task_131002_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131002_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131005 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    int64_t free_gtid_116775;
    int64_t free_x_116884;
    int64_t free_min_arg_116891;
    float free_max_res_116895;
    char *free_mem_121842;
    char *free_mem_121914;
    char *free_mem_121917;
    char *free_mem_121920;
    char *free_mem_121923;
};
struct futhark_mc_segmap_parloop_struct_131007 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    int64_t free_gtid_116775;
    int64_t free_x_116884;
    int64_t free_min_arg_116891;
    float free_max_res_116895;
    char *free_mem_121842;
    char *free_mem_121914;
    char *free_mem_121917;
    char *free_mem_121920;
    char *free_mem_121923;
};
static int futhark_mc_segmap_parloop_131008(void *args, int64_t start,
                                            int64_t end, int flat_tid_116778,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131007
    *futhark_mc_segmap_parloop_struct_131007 =
    (struct futhark_mc_segmap_parloop_struct_131007 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131007->ctx;
    uint64_t futhark_mc_segmap_parloop_131008_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131008_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131007->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_131007->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131007->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131007->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131007->free_x_114540;
    int64_t min_res_114611 =
            futhark_mc_segmap_parloop_struct_131007->free_min_res_114611;
    bool empty_slice_114616 =
         futhark_mc_segmap_parloop_struct_131007->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_segmap_parloop_struct_131007->free_m_114617;
    int64_t gtid_116775 =
            futhark_mc_segmap_parloop_struct_131007->free_gtid_116775;
    int64_t x_116884 = futhark_mc_segmap_parloop_struct_131007->free_x_116884;
    int64_t min_arg_116891 =
            futhark_mc_segmap_parloop_struct_131007->free_min_arg_116891;
    float max_res_116895 =
          futhark_mc_segmap_parloop_struct_131007->free_max_res_116895;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131007->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_segmap_parloop_struct_131007->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_segmap_parloop_struct_131007->free_mem_121917,
                                  .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_segmap_parloop_struct_131007->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_segmap_parloop_struct_131007->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124233 = start;
    
    for (; iter_124233 < end; iter_124233++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124287 = l_n_m_114513;
        int64_t gtid_116779 = iter_124233;
        int64_t remnant_124288 = iter_124233 - gtid_116779;
        int64_t min_arg_124128 = mul64(l_jump_114471, gtid_116779);
        int64_t min_res_124129 = smin64(i_114539, min_arg_124128);
        int64_t defunc_0_g_res_124130 = add64((int64_t) 1, min_res_124129);
        bool nearest_idx_124131;
        int64_t nearest_idx_124132;
        int64_t nearest_idx_124133;
        bool loop_while_124234;
        int64_t low_124235;
        int64_t high_124236;
        
        loop_while_124234 = x_114540;
        low_124235 = (int64_t) 0;
        high_124236 = i_114539;
        while (loop_while_124234) {
            int64_t x_124237 = add64(low_124235, high_124236);
            int64_t mid_124238 = sdiv64(x_124237, (int64_t) 2);
            bool x_124239 = sle64((int64_t) 0, mid_124238);
            bool y_124240 = slt64(mid_124238, n_114463);
            bool bounds_check_124241 = x_124239 && y_124240;
            bool index_certs_124242;
            
            if (!bounds_check_124241) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124238,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124243 = ((int64_t *) mem_121914.mem)[mid_124238];
            bool cond_124244 = sle64(defunc_0_g_res_124130, x_124243);
            int64_t loopres_124245;
            int64_t loopres_124246;
            
            if (cond_124244) {
                int64_t loopres_t_res_124247 = sub64(mid_124238, (int64_t) 1);
                
                loopres_124245 = low_124235;
                loopres_124246 = loopres_t_res_124247;
            } else {
                int64_t loopres_f_res_124248 = add64((int64_t) 1, mid_124238);
                
                loopres_124245 = loopres_f_res_124248;
                loopres_124246 = high_124236;
            }
            
            bool loop_cond_124249 = sle64(loopres_124245, loopres_124246);
            bool loop_while_tmp_124289 = loop_cond_124249;
            int64_t low_tmp_124290 = loopres_124245;
            int64_t high_tmp_124291 = loopres_124246;
            
            loop_while_124234 = loop_while_tmp_124289;
            low_124235 = low_tmp_124290;
            high_124236 = high_tmp_124291;
        }
        nearest_idx_124131 = loop_while_124234;
        nearest_idx_124132 = low_124235;
        nearest_idx_124133 = high_124236;
        
        int64_t max_arg_124150 = sub64(nearest_idx_124132, min_res_114611);
        int64_t max_res_124151 = smax64((int64_t) 0, max_arg_124150);
        int64_t j_124152 = add64(min_res_114611, max_res_124151);
        int64_t i_p_m_t_s_124153 = add64(m_114617, max_res_124151);
        bool zzero_leq_i_p_m_t_s_124154 = sle64((int64_t) 0, i_p_m_t_s_124153);
        bool i_p_m_t_s_leq_w_124155 = slt64(i_p_m_t_s_124153, n_114463);
        bool zzero_lte_i_124156 = sle64((int64_t) 0, max_res_124151);
        bool i_lte_j_124157 = sle64(max_res_124151, j_124152);
        bool y_124158 = i_p_m_t_s_leq_w_124155 && zzero_lte_i_124156;
        bool y_124159 = zzero_leq_i_p_m_t_s_124154 && y_124158;
        bool y_124160 = i_lte_j_124157 && y_124159;
        bool forwards_ok_124161 = zzero_lte_i_124156 && y_124160;
        bool ok_or_empty_124162 = empty_slice_114616 || forwards_ok_124161;
        bool index_certs_124163;
        
        if (!ok_or_empty_124162) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124151, ":",
                          (long long) j_124152,
                          "] out of bounds for array of shape [",
                          (long long) n_114463, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124164;
        int64_t redout_124251 = (int64_t) 0;
        
        for (int64_t i_124250 = 0; i_124250 < min_res_114611; i_124250++) {
            int64_t slice_124252 = max_res_124151 + i_124250;
            int64_t x_124253 = ((int64_t *) mem_121917.mem)[slice_124252];
            int64_t abs_arg_124254 = sub64(x_124253, defunc_0_g_res_124130);
            int64_t abs_res_124255 = abs64(abs_arg_124254);
            int64_t defunc_1_op_res_124256 = add64(abs_res_124255,
                                                   redout_124251);
            int64_t redout_tmp_124292 = defunc_1_op_res_124256;
            
            redout_124251 = redout_tmp_124292;
        }
        defunc_2_reduce_res_124164 = redout_124251;
        
        int64_t idx_124172;
        int64_t idx_124173;
        int64_t idx_124174;
        int64_t idx_124175;
        int64_t best_idx_124258;
        int64_t last_idx_124259;
        int64_t best_sum_124260;
        int64_t curr_sum_124261;
        
        best_idx_124258 = max_res_124151;
        last_idx_124259 = max_res_124151;
        best_sum_124260 = defunc_2_reduce_res_124164;
        curr_sum_124261 = defunc_2_reduce_res_124164;
        for (int64_t j_124257 = 0; j_124257 < min_res_114611; j_124257++) {
            int64_t new_idx_124262 = add64(max_res_124151, j_124257);
            int64_t x_124263 = add64(min_res_114611, new_idx_124262);
            bool cond_124264 = slt64(x_116884, x_124263);
            int64_t new_sum_124265;
            
            if (cond_124264) {
                new_sum_124265 = (int64_t) 9223372036854775807;
            } else {
                bool x_124266 = sle64((int64_t) 0, last_idx_124259);
                bool y_124267 = slt64(last_idx_124259, n_114463);
                bool bounds_check_124268 = x_124266 && y_124267;
                bool index_certs_124269;
                
                if (!bounds_check_124268) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124259,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124270 =
                        ((int64_t *) mem_121917.mem)[last_idx_124259];
                int64_t binop_p_124271 = sub64(defunc_0_g_res_124130, y_124270);
                int64_t defunc_0_f_res_124272 = abs64(binop_p_124271);
                int64_t x_124273 = sub64(curr_sum_124261,
                                         defunc_0_f_res_124272);
                int64_t min_arg_124274 = add64(min_res_114611, last_idx_124259);
                int64_t min_res_124275 = smin64(i_114539, min_arg_124274);
                bool x_124276 = sle64((int64_t) 0, min_res_124275);
                bool y_124277 = slt64(min_res_124275, n_114463);
                bool bounds_check_124278 = x_124276 && y_124277;
                bool index_certs_124279;
                
                if (!bounds_check_124278) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124275,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124280 = ((int64_t *) mem_121917.mem)[min_res_124275];
                int64_t binop_p_124281 = sub64(defunc_0_g_res_124130, y_124280);
                int64_t defunc_0_f_res_124282 = abs64(binop_p_124281);
                int64_t new_sum_f_res_124283 = add64(x_124273,
                                                     defunc_0_f_res_124282);
                
                new_sum_124265 = new_sum_f_res_124283;
            }
            
            bool cond_124284 = sle64(new_sum_124265, best_sum_124260);
            int64_t loopres_124285;
            
            if (cond_124284) {
                loopres_124285 = new_idx_124262;
            } else {
                loopres_124285 = best_idx_124258;
            }
            
            int64_t loopres_124286;
            
            if (cond_124284) {
                loopres_124286 = new_sum_124265;
            } else {
                loopres_124286 = best_sum_124260;
            }
            
            int64_t best_idx_tmp_124293 = loopres_124285;
            int64_t last_idx_tmp_124294 = new_idx_124262;
            int64_t best_sum_tmp_124295 = loopres_124286;
            int64_t curr_sum_tmp_124296 = new_sum_124265;
            
            best_idx_124258 = best_idx_tmp_124293;
            last_idx_124259 = last_idx_tmp_124294;
            best_sum_124260 = best_sum_tmp_124295;
            curr_sum_124261 = curr_sum_tmp_124296;
        }
        idx_124172 = best_idx_124258;
        idx_124173 = last_idx_124259;
        idx_124174 = best_sum_124260;
        idx_124175 = curr_sum_124261;
        
        int64_t min_res_124206 = smin64(min_arg_116891, idx_124172);
        int64_t x_124207 = add64(min_res_114611, min_res_124206);
        int64_t r_124208 = sub64(x_124207, (int64_t) 1);
        bool x_124209 = sle64((int64_t) 0, r_124208);
        bool y_124210 = slt64(r_124208, n_114463);
        bool bounds_check_124211 = x_124209 && y_124210;
        bool index_certs_124212;
        
        if (!bounds_check_124211) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124208,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124213 = ((int64_t *) mem_121842.mem)[gtid_116775 * n_114463 +
                                                        r_124208];
        int64_t abs_arg_124214 = sub64(x_124213, min_res_124129);
        int64_t abs_res_124215 = abs64(abs_arg_124214);
        bool x_124216 = sle64((int64_t) 0, min_res_124206);
        bool y_124217 = slt64(min_res_124206, n_114463);
        bool bounds_check_124218 = x_124216 && y_124217;
        bool index_certs_124219;
        
        if (!bounds_check_124218) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124206,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124220 = ((int64_t *) mem_121842.mem)[gtid_116775 * n_114463 +
                                                        min_res_124206];
        int64_t abs_arg_124221 = sub64(x_124220, min_res_124129);
        int64_t abs_res_124222 = abs64(abs_arg_124221);
        int64_t max_res_124223 = smax64(abs_res_124215, abs_res_124222);
        float defunc_0_f_res_124224 = sitofp_i64_f32(max_res_124223);
        float defunc_1_f_res_124225 = max_res_116895 + defunc_0_f_res_124224;
        
        ((float *) mem_121920.mem)[gtid_116779] = defunc_1_f_res_124225;
        ((int64_t *) mem_121923.mem)[gtid_116779] = min_res_124206;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131008_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131008_end -
                 futhark_mc_segmap_parloop_131008_start;
        
        ctx->futhark_mc_segmap_parloop_131008_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131008_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131008_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131006(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116778 = tid;
    int num_tasks_124232 = info.nsubtasks;
    struct futhark_mc_task_131005 *futhark_mc_task_131005 =
                                  (struct futhark_mc_task_131005 *) args;
    struct futhark_context *ctx = futhark_mc_task_131005->ctx;
    uint64_t futhark_mc_segmap_task_131006_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131006_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131005->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_131005->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_131005->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131005->free_i_114539;
    bool x_114540 = futhark_mc_task_131005->free_x_114540;
    int64_t min_res_114611 = futhark_mc_task_131005->free_min_res_114611;
    bool empty_slice_114616 = futhark_mc_task_131005->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_task_131005->free_m_114617;
    int64_t gtid_116775 = futhark_mc_task_131005->free_gtid_116775;
    int64_t x_116884 = futhark_mc_task_131005->free_x_116884;
    int64_t min_arg_116891 = futhark_mc_task_131005->free_min_arg_116891;
    float max_res_116895 = futhark_mc_task_131005->free_max_res_116895;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131005->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_task_131005->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_task_131005->free_mem_121917,
                                  .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_task_131005->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_task_131005->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iter_124233;
    struct futhark_mc_segmap_parloop_struct_131007
    futhark_mc_segmap_parloop_struct_131007;
    
    futhark_mc_segmap_parloop_struct_131007.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131007.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131007.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_131007.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131007.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131007.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131007.free_min_res_114611 =
        min_res_114611;
    futhark_mc_segmap_parloop_struct_131007.free_empty_slice_114616 =
        empty_slice_114616;
    futhark_mc_segmap_parloop_struct_131007.free_m_114617 = m_114617;
    futhark_mc_segmap_parloop_struct_131007.free_gtid_116775 = gtid_116775;
    futhark_mc_segmap_parloop_struct_131007.free_x_116884 = x_116884;
    futhark_mc_segmap_parloop_struct_131007.free_min_arg_116891 =
        min_arg_116891;
    futhark_mc_segmap_parloop_struct_131007.free_max_res_116895 =
        max_res_116895;
    futhark_mc_segmap_parloop_struct_131007.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131007.free_mem_121914 = mem_121914.mem;
    futhark_mc_segmap_parloop_struct_131007.free_mem_121917 = mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131007.free_mem_121920 = mem_121920.mem;
    futhark_mc_segmap_parloop_struct_131007.free_mem_121923 = mem_121923.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131008_task;
    
    futhark_mc_segmap_parloop_131008_task.name =
        "futhark_mc_segmap_parloop_131008";
    futhark_mc_segmap_parloop_131008_task.fn = futhark_mc_segmap_parloop_131008;
    futhark_mc_segmap_parloop_131008_task.args =
        &futhark_mc_segmap_parloop_struct_131007;
    futhark_mc_segmap_parloop_131008_task.iterations = iterations;
    futhark_mc_segmap_parloop_131008_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131008_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131008_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131008_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131008_task);
    
    if (futhark_mc_segmap_parloop_131008_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131008_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131008_total_end -
                 futhark_mc_segmap_parloop_131008_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131008_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131008_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131008_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131006_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131006_end -
                 futhark_mc_segmap_task_131006_start;
        
        ctx->futhark_mc_segmap_task_131006_runs[tid]++;
        ctx->futhark_mc_segmap_task_131006_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131006_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131010 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114611;
    bool free_empty_slice_114616;
    int64_t free_m_114617;
    int64_t free_gtid_116775;
    int64_t free_x_116884;
    int64_t free_min_arg_116891;
    float free_max_res_116895;
    char *free_mem_121842;
    char *free_mem_121914;
    char *free_mem_121917;
    char *free_mem_121920;
    char *free_mem_121923;
};
struct futhark_mc_task_131012 {
    struct futhark_context *ctx;
    char *free_mem_121917;
    int64_t free_defunc_0_g_res_124032;
    int64_t free_max_res_124053;
    int64_t *retval_defunc_2_reduce_res_124066;
};
struct futhark_mc_segred_stage_1_parloop_struct_131015 {
    struct futhark_context *ctx;
    char *free_mem_121917;
    int64_t free_defunc_0_g_res_124032;
    int64_t free_max_res_124053;
    char *free_reduce_stage_1_tid_res_arr_mem_124357;
};
static int futhark_mc_segred_stage_1_parloop_131016(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116782,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131015
    *futhark_mc_segred_stage_1_parloop_struct_131015 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131015 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131015->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131016_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131016_start = get_wall_time();
    
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131015->free_mem_121917,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124032 =
            futhark_mc_segred_stage_1_parloop_struct_131015->free_defunc_0_g_res_124032;
    int64_t max_res_124053 =
            futhark_mc_segred_stage_1_parloop_struct_131015->free_max_res_124053;
    struct memblock reduce_stage_1_tid_res_arr_mem_124357 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124357",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131015->free_reduce_stage_1_tid_res_arr_mem_124357,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124359 = start;
    int64_t x_124314;
    int64_t x_124315;
    int64_t local_acc_124360 = (int64_t) 0;
    
    for (; iter_124359 < end; iter_124359++) {
        int64_t gtid_116783 = iter_124359;
        int64_t slice_124317 = gtid_116783 + max_res_124053;
        int64_t x_124318 = ((int64_t *) mem_121917.mem)[slice_124317];
        int64_t abs_arg_124319 = sub64(x_124318, defunc_0_g_res_124032);
        int64_t abs_res_124320 = abs64(abs_arg_124319);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124314 = local_acc_124360;
        }
        // Load next params
        {
            x_124315 = abs_res_124320;
        }
        // Red body
        {
            int64_t defunc_1_op_res_124316 = add64(x_124314, x_124315);
            
            local_acc_124360 = defunc_1_op_res_124316;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124357.mem)[flat_tid_116782] =
        local_acc_124360;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131016_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131016_end -
                 futhark_mc_segred_stage_1_parloop_131016_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131016_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131016_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131016_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131013(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116782 = tid;
    int num_tasks_124356 = info.nsubtasks;
    struct futhark_mc_task_131012 *futhark_mc_task_131012 =
                                  (struct futhark_mc_task_131012 *) args;
    struct futhark_context *ctx = futhark_mc_task_131012->ctx;
    uint64_t futhark_mc_segred_task_131013_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131013_start = get_wall_time();
    
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_task_131012->free_mem_121917,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124032 =
            futhark_mc_task_131012->free_defunc_0_g_res_124032;
    int64_t max_res_124053 = futhark_mc_task_131012->free_max_res_124053;
    int64_t defunc_2_reduce_res_124066 =
            *futhark_mc_task_131012->retval_defunc_2_reduce_res_124066;
    size_t reduce_stage_1_tid_res_arr_mem_124357_cached_sizze_131014 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124357 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124357_cached_sizze_131014 <
        (size_t) ((int64_t) 8 * num_tasks_124356)) {
        reduce_stage_1_tid_res_arr_mem_124357 =
            realloc(reduce_stage_1_tid_res_arr_mem_124357, (int64_t) 8 *
                    num_tasks_124356);
        reduce_stage_1_tid_res_arr_mem_124357_cached_sizze_131014 =
            (int64_t) 8 * num_tasks_124356;
    }
    
    int64_t iter_124359;
    struct futhark_mc_segred_stage_1_parloop_struct_131015
    futhark_mc_segred_stage_1_parloop_struct_131015;
    
    futhark_mc_segred_stage_1_parloop_struct_131015.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131015.free_mem_121917 =
        mem_121917.mem;
    futhark_mc_segred_stage_1_parloop_struct_131015.free_defunc_0_g_res_124032 =
        defunc_0_g_res_124032;
    futhark_mc_segred_stage_1_parloop_struct_131015.free_max_res_124053 =
        max_res_124053;
    futhark_mc_segred_stage_1_parloop_struct_131015.free_reduce_stage_1_tid_res_arr_mem_124357 =
        reduce_stage_1_tid_res_arr_mem_124357;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131016_task;
    
    futhark_mc_segred_stage_1_parloop_131016_task.name =
        "futhark_mc_segred_stage_1_parloop_131016";
    futhark_mc_segred_stage_1_parloop_131016_task.fn =
        futhark_mc_segred_stage_1_parloop_131016;
    futhark_mc_segred_stage_1_parloop_131016_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131015;
    futhark_mc_segred_stage_1_parloop_131016_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131016_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131016_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131016_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131016_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131016_task);
    
    if (futhark_mc_segred_stage_1_parloop_131016_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131016_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131016_total_end -
                 futhark_mc_segred_stage_1_parloop_131016_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131016_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131016_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131016_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124066 = (int64_t) 0;
    }
    
    int64_t x_124361;
    int64_t x_124362;
    
    for (int32_t i_124364 = 0; i_124364 < num_tasks_124356; i_124364++) {
        flat_tid_116782 = i_124364;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124361 = defunc_2_reduce_res_124066;
            }
            // load next params
            {
                x_124362 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124357)[flat_tid_116782];
            }
            // red body
            {
                int64_t defunc_1_op_res_124363 = add64(x_124361, x_124362);
                
                defunc_2_reduce_res_124066 = defunc_1_op_res_124363;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124357);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131013_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131013_end -
                 futhark_mc_segred_task_131013_start;
        
        ctx->futhark_mc_segred_task_131013_runs[tid]++;
        ctx->futhark_mc_segred_task_131013_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131013_iter[tid] += iterations;
    }
    *futhark_mc_task_131012->retval_defunc_2_reduce_res_124066 =
        defunc_2_reduce_res_124066;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131011(void *args, int64_t start,
                                            int64_t end, int flat_tid_116780,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131010
    *futhark_mc_segmap_parloop_struct_131010 =
    (struct futhark_mc_segmap_parloop_struct_131010 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131010->ctx;
    uint64_t futhark_mc_segmap_parloop_131011_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131011_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131010->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_131010->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131010->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131010->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131010->free_x_114540;
    int64_t min_res_114611 =
            futhark_mc_segmap_parloop_struct_131010->free_min_res_114611;
    bool empty_slice_114616 =
         futhark_mc_segmap_parloop_struct_131010->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_segmap_parloop_struct_131010->free_m_114617;
    int64_t gtid_116775 =
            futhark_mc_segmap_parloop_struct_131010->free_gtid_116775;
    int64_t x_116884 = futhark_mc_segmap_parloop_struct_131010->free_x_116884;
    int64_t min_arg_116891 =
            futhark_mc_segmap_parloop_struct_131010->free_min_arg_116891;
    float max_res_116895 =
          futhark_mc_segmap_parloop_struct_131010->free_max_res_116895;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131010->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_segmap_parloop_struct_131010->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_segmap_parloop_struct_131010->free_mem_121917,
                                  .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_segmap_parloop_struct_131010->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_segmap_parloop_struct_131010->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124297 = start;
    
    for (; iter_124297 < end; iter_124297++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124351 = l_n_m_114513;
        int64_t gtid_116781 = iter_124297;
        int64_t remnant_124352 = iter_124297 - gtid_116781;
        int64_t min_arg_124030 = mul64(l_jump_114471, gtid_116781);
        int64_t min_res_124031 = smin64(i_114539, min_arg_124030);
        int64_t defunc_0_g_res_124032 = add64((int64_t) 1, min_res_124031);
        bool nearest_idx_124033;
        int64_t nearest_idx_124034;
        int64_t nearest_idx_124035;
        bool loop_while_124298;
        int64_t low_124299;
        int64_t high_124300;
        
        loop_while_124298 = x_114540;
        low_124299 = (int64_t) 0;
        high_124300 = i_114539;
        while (loop_while_124298) {
            int64_t x_124301 = add64(low_124299, high_124300);
            int64_t mid_124302 = sdiv64(x_124301, (int64_t) 2);
            bool x_124303 = sle64((int64_t) 0, mid_124302);
            bool y_124304 = slt64(mid_124302, n_114463);
            bool bounds_check_124305 = x_124303 && y_124304;
            bool index_certs_124306;
            
            if (!bounds_check_124305) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124302,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124307 = ((int64_t *) mem_121914.mem)[mid_124302];
            bool cond_124308 = sle64(defunc_0_g_res_124032, x_124307);
            int64_t loopres_124309;
            int64_t loopres_124310;
            
            if (cond_124308) {
                int64_t loopres_t_res_124311 = sub64(mid_124302, (int64_t) 1);
                
                loopres_124309 = low_124299;
                loopres_124310 = loopres_t_res_124311;
            } else {
                int64_t loopres_f_res_124312 = add64((int64_t) 1, mid_124302);
                
                loopres_124309 = loopres_f_res_124312;
                loopres_124310 = high_124300;
            }
            
            bool loop_cond_124313 = sle64(loopres_124309, loopres_124310);
            bool loop_while_tmp_124353 = loop_cond_124313;
            int64_t low_tmp_124354 = loopres_124309;
            int64_t high_tmp_124355 = loopres_124310;
            
            loop_while_124298 = loop_while_tmp_124353;
            low_124299 = low_tmp_124354;
            high_124300 = high_tmp_124355;
        }
        nearest_idx_124033 = loop_while_124298;
        nearest_idx_124034 = low_124299;
        nearest_idx_124035 = high_124300;
        
        int64_t max_arg_124052 = sub64(nearest_idx_124034, min_res_114611);
        int64_t max_res_124053 = smax64((int64_t) 0, max_arg_124052);
        int64_t j_124054 = add64(min_res_114611, max_res_124053);
        int64_t i_p_m_t_s_124055 = add64(m_114617, max_res_124053);
        bool zzero_leq_i_p_m_t_s_124056 = sle64((int64_t) 0, i_p_m_t_s_124055);
        bool i_p_m_t_s_leq_w_124057 = slt64(i_p_m_t_s_124055, n_114463);
        bool zzero_lte_i_124058 = sle64((int64_t) 0, max_res_124053);
        bool i_lte_j_124059 = sle64(max_res_124053, j_124054);
        bool y_124060 = i_p_m_t_s_leq_w_124057 && zzero_lte_i_124058;
        bool y_124061 = zzero_leq_i_p_m_t_s_124056 && y_124060;
        bool y_124062 = i_lte_j_124059 && y_124061;
        bool forwards_ok_124063 = zzero_lte_i_124058 && y_124062;
        bool ok_or_empty_124064 = empty_slice_114616 || forwards_ok_124063;
        bool index_certs_124065;
        
        if (!ok_or_empty_124064) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124053, ":",
                          (long long) j_124054,
                          "] out of bounds for array of shape [",
                          (long long) n_114463, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124066;
        int64_t flat_tid_116782 = (int64_t) 0;
        int32_t num_tasks_124356;
        struct futhark_mc_task_131012 futhark_mc_task_131012;
        
        futhark_mc_task_131012.ctx = ctx;
        futhark_mc_task_131012.free_mem_121917 = mem_121917.mem;
        futhark_mc_task_131012.free_defunc_0_g_res_124032 =
            defunc_0_g_res_124032;
        futhark_mc_task_131012.free_max_res_124053 = max_res_124053;
        futhark_mc_task_131012.retval_defunc_2_reduce_res_124066 =
            &defunc_2_reduce_res_124066;
        
        struct scheduler_segop futhark_mc_task_131012_task;
        
        futhark_mc_task_131012_task.args = &futhark_mc_task_131012;
        futhark_mc_task_131012_task.top_level_fn =
            futhark_mc_segred_task_131013;
        futhark_mc_task_131012_task.name = "futhark_mc_segred_task_131013";
        futhark_mc_task_131012_task.iterations = min_res_114611;
        futhark_mc_task_131012_task.task_time =
            &ctx->futhark_mc_segred_task_131013_total_time;
        futhark_mc_task_131012_task.task_iter =
            &ctx->futhark_mc_segred_task_131013_total_iter;
        futhark_mc_task_131012_task.sched = STATIC;
        futhark_mc_task_131012_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131013_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131012_task);
        
        if (futhark_mc_segred_task_131013_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_124074;
        int64_t idx_124075;
        int64_t idx_124076;
        int64_t idx_124077;
        int64_t best_idx_124322;
        int64_t last_idx_124323;
        int64_t best_sum_124324;
        int64_t curr_sum_124325;
        
        best_idx_124322 = max_res_124053;
        last_idx_124323 = max_res_124053;
        best_sum_124324 = defunc_2_reduce_res_124066;
        curr_sum_124325 = defunc_2_reduce_res_124066;
        for (int64_t j_124321 = 0; j_124321 < min_res_114611; j_124321++) {
            int64_t new_idx_124326 = add64(max_res_124053, j_124321);
            int64_t x_124327 = add64(min_res_114611, new_idx_124326);
            bool cond_124328 = slt64(x_116884, x_124327);
            int64_t new_sum_124329;
            
            if (cond_124328) {
                new_sum_124329 = (int64_t) 9223372036854775807;
            } else {
                bool x_124330 = sle64((int64_t) 0, last_idx_124323);
                bool y_124331 = slt64(last_idx_124323, n_114463);
                bool bounds_check_124332 = x_124330 && y_124331;
                bool index_certs_124333;
                
                if (!bounds_check_124332) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124323,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124334 =
                        ((int64_t *) mem_121917.mem)[last_idx_124323];
                int64_t binop_p_124335 = sub64(defunc_0_g_res_124032, y_124334);
                int64_t defunc_0_f_res_124336 = abs64(binop_p_124335);
                int64_t x_124337 = sub64(curr_sum_124325,
                                         defunc_0_f_res_124336);
                int64_t min_arg_124338 = add64(min_res_114611, last_idx_124323);
                int64_t min_res_124339 = smin64(i_114539, min_arg_124338);
                bool x_124340 = sle64((int64_t) 0, min_res_124339);
                bool y_124341 = slt64(min_res_124339, n_114463);
                bool bounds_check_124342 = x_124340 && y_124341;
                bool index_certs_124343;
                
                if (!bounds_check_124342) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124339,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124344 = ((int64_t *) mem_121917.mem)[min_res_124339];
                int64_t binop_p_124345 = sub64(defunc_0_g_res_124032, y_124344);
                int64_t defunc_0_f_res_124346 = abs64(binop_p_124345);
                int64_t new_sum_f_res_124347 = add64(x_124337,
                                                     defunc_0_f_res_124346);
                
                new_sum_124329 = new_sum_f_res_124347;
            }
            
            bool cond_124348 = sle64(new_sum_124329, best_sum_124324);
            int64_t loopres_124349;
            
            if (cond_124348) {
                loopres_124349 = new_idx_124326;
            } else {
                loopres_124349 = best_idx_124322;
            }
            
            int64_t loopres_124350;
            
            if (cond_124348) {
                loopres_124350 = new_sum_124329;
            } else {
                loopres_124350 = best_sum_124324;
            }
            
            int64_t best_idx_tmp_124365 = loopres_124349;
            int64_t last_idx_tmp_124366 = new_idx_124326;
            int64_t best_sum_tmp_124367 = loopres_124350;
            int64_t curr_sum_tmp_124368 = new_sum_124329;
            
            best_idx_124322 = best_idx_tmp_124365;
            last_idx_124323 = last_idx_tmp_124366;
            best_sum_124324 = best_sum_tmp_124367;
            curr_sum_124325 = curr_sum_tmp_124368;
        }
        idx_124074 = best_idx_124322;
        idx_124075 = last_idx_124323;
        idx_124076 = best_sum_124324;
        idx_124077 = curr_sum_124325;
        
        int64_t min_res_124108 = smin64(min_arg_116891, idx_124074);
        int64_t x_124109 = add64(min_res_114611, min_res_124108);
        int64_t r_124110 = sub64(x_124109, (int64_t) 1);
        bool x_124111 = sle64((int64_t) 0, r_124110);
        bool y_124112 = slt64(r_124110, n_114463);
        bool bounds_check_124113 = x_124111 && y_124112;
        bool index_certs_124114;
        
        if (!bounds_check_124113) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124110,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124115 = ((int64_t *) mem_121842.mem)[gtid_116775 * n_114463 +
                                                        r_124110];
        int64_t abs_arg_124116 = sub64(x_124115, min_res_124031);
        int64_t abs_res_124117 = abs64(abs_arg_124116);
        bool x_124118 = sle64((int64_t) 0, min_res_124108);
        bool y_124119 = slt64(min_res_124108, n_114463);
        bool bounds_check_124120 = x_124118 && y_124119;
        bool index_certs_124121;
        
        if (!bounds_check_124120) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124108,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124122 = ((int64_t *) mem_121842.mem)[gtid_116775 * n_114463 +
                                                        min_res_124108];
        int64_t abs_arg_124123 = sub64(x_124122, min_res_124031);
        int64_t abs_res_124124 = abs64(abs_arg_124123);
        int64_t max_res_124125 = smax64(abs_res_124117, abs_res_124124);
        float defunc_0_f_res_124126 = sitofp_i64_f32(max_res_124125);
        float defunc_1_f_res_124127 = max_res_116895 + defunc_0_f_res_124126;
        
        ((float *) mem_121920.mem)[gtid_116781] = defunc_1_f_res_124127;
        ((int64_t *) mem_121923.mem)[gtid_116781] = min_res_124108;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131011_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131011_end -
                 futhark_mc_segmap_parloop_131011_start;
        
        ctx->futhark_mc_segmap_parloop_131011_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131011_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131011_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131009(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116780 = tid;
    int num_tasks_124232 = info.nsubtasks;
    struct futhark_mc_task_131005 *futhark_mc_task_131005 =
                                  (struct futhark_mc_task_131005 *) args;
    struct futhark_context *ctx = futhark_mc_task_131005->ctx;
    uint64_t futhark_mc_segmap_nested_task_131009_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131009_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131005->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_131005->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_131005->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131005->free_i_114539;
    bool x_114540 = futhark_mc_task_131005->free_x_114540;
    int64_t min_res_114611 = futhark_mc_task_131005->free_min_res_114611;
    bool empty_slice_114616 = futhark_mc_task_131005->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_task_131005->free_m_114617;
    int64_t gtid_116775 = futhark_mc_task_131005->free_gtid_116775;
    int64_t x_116884 = futhark_mc_task_131005->free_x_116884;
    int64_t min_arg_116891 = futhark_mc_task_131005->free_min_arg_116891;
    float max_res_116895 = futhark_mc_task_131005->free_max_res_116895;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131005->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121914 = {.desc ="mem_121914", .mem =
                                  futhark_mc_task_131005->free_mem_121914,
                                  .size =0, .references =NULL};
    struct memblock mem_121917 = {.desc ="mem_121917", .mem =
                                  futhark_mc_task_131005->free_mem_121917,
                                  .size =0, .references =NULL};
    struct memblock mem_121920 = {.desc ="mem_121920", .mem =
                                  futhark_mc_task_131005->free_mem_121920,
                                  .size =0, .references =NULL};
    struct memblock mem_121923 = {.desc ="mem_121923", .mem =
                                  futhark_mc_task_131005->free_mem_121923,
                                  .size =0, .references =NULL};
    int64_t iter_124297;
    struct futhark_mc_segmap_parloop_struct_131010
    futhark_mc_segmap_parloop_struct_131010;
    
    futhark_mc_segmap_parloop_struct_131010.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131010.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131010.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_131010.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131010.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131010.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131010.free_min_res_114611 =
        min_res_114611;
    futhark_mc_segmap_parloop_struct_131010.free_empty_slice_114616 =
        empty_slice_114616;
    futhark_mc_segmap_parloop_struct_131010.free_m_114617 = m_114617;
    futhark_mc_segmap_parloop_struct_131010.free_gtid_116775 = gtid_116775;
    futhark_mc_segmap_parloop_struct_131010.free_x_116884 = x_116884;
    futhark_mc_segmap_parloop_struct_131010.free_min_arg_116891 =
        min_arg_116891;
    futhark_mc_segmap_parloop_struct_131010.free_max_res_116895 =
        max_res_116895;
    futhark_mc_segmap_parloop_struct_131010.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131010.free_mem_121914 = mem_121914.mem;
    futhark_mc_segmap_parloop_struct_131010.free_mem_121917 = mem_121917.mem;
    futhark_mc_segmap_parloop_struct_131010.free_mem_121920 = mem_121920.mem;
    futhark_mc_segmap_parloop_struct_131010.free_mem_121923 = mem_121923.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131011_task;
    
    futhark_mc_segmap_parloop_131011_task.name =
        "futhark_mc_segmap_parloop_131011";
    futhark_mc_segmap_parloop_131011_task.fn = futhark_mc_segmap_parloop_131011;
    futhark_mc_segmap_parloop_131011_task.args =
        &futhark_mc_segmap_parloop_struct_131010;
    futhark_mc_segmap_parloop_131011_task.iterations = iterations;
    futhark_mc_segmap_parloop_131011_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131011_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131011_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131011_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131011_task);
    
    if (futhark_mc_segmap_parloop_131011_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131011_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131011_total_end -
                 futhark_mc_segmap_parloop_131011_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131011_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131011_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131011_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131009_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131009_end -
                 futhark_mc_segmap_nested_task_131009_start;
        
        ctx->futhark_mc_segmap_nested_task_131009_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131009_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131009_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_130996(void *args, int64_t start,
                                            int64_t end, int flat_tid_116774,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_130995
    *futhark_mc_segmap_parloop_struct_130995 =
    (struct futhark_mc_segmap_parloop_struct_130995 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_130995->ctx;
    uint64_t futhark_mc_segmap_parloop_130996_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130996_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_130995->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_130995->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_130995->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_130995->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_130995->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_130995->free_x_114540;
    int64_t min_res_114611 =
            futhark_mc_segmap_parloop_struct_130995->free_min_res_114611;
    bool empty_slice_114616 =
         futhark_mc_segmap_parloop_struct_130995->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_segmap_parloop_struct_130995->free_m_114617;
    float i64_res_114618 =
          futhark_mc_segmap_parloop_struct_130995->free_i64_res_114618;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_130995->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_130995->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_130995->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_130995->free_bytes_121918;
    int64_t bytes_121921 =
            futhark_mc_segmap_parloop_struct_130995->free_bytes_121921;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_130995->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_130995->free_mem_121991,
                                  .size =0, .references =NULL};
    size_t mem_121914_cached_sizze_130997 = 0;
    char *mem_121914 = NULL;
    size_t mem_121917_cached_sizze_130998 = 0;
    char *mem_121917 = NULL;
    size_t mem_121920_cached_sizze_130999 = 0;
    char *mem_121920 = NULL;
    size_t mem_121923_cached_sizze_131000 = 0;
    char *mem_121923 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124025 = start;
    
    if (mem_121914_cached_sizze_130997 < (size_t) bytes_121803) {
        mem_121914 = realloc(mem_121914, bytes_121803);
        mem_121914_cached_sizze_130997 = bytes_121803;
    }
    if (mem_121917_cached_sizze_130998 < (size_t) bytes_121803) {
        mem_121917 = realloc(mem_121917, bytes_121803);
        mem_121917_cached_sizze_130998 = bytes_121803;
    }
    if (mem_121920_cached_sizze_130999 < (size_t) bytes_121918) {
        mem_121920 = realloc(mem_121920, bytes_121918);
        mem_121920_cached_sizze_130999 = bytes_121918;
    }
    if (mem_121923_cached_sizze_131000 < (size_t) bytes_121921) {
        mem_121923 = realloc(mem_121923, bytes_121921);
        mem_121923_cached_sizze_131000 = bytes_121921;
    }
    for (; iter_124025 < end; iter_124025++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124226 = m_114462;
        int64_t gtid_116775 = iter_124025;
        int64_t remnant_124227 = iter_124025 - gtid_116775;
        int64_t x_116884 = ((int64_t *) mem_121845.mem)[gtid_116775];
        int64_t flat_tid_116776 = (int64_t) 0;
        int32_t num_tasks_124228;
        struct futhark_mc_task_131001 futhark_mc_task_131001;
        
        futhark_mc_task_131001.ctx = ctx;
        futhark_mc_task_131001.free_n_114463 = n_114463;
        futhark_mc_task_131001.free_gtid_116775 = gtid_116775;
        futhark_mc_task_131001.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131001.free_mem_121914 = mem_121914;
        futhark_mc_task_131001.free_mem_121917 = mem_121917;
        
        struct scheduler_segop futhark_mc_task_131001_task;
        
        futhark_mc_task_131001_task.args = &futhark_mc_task_131001;
        futhark_mc_task_131001_task.top_level_fn =
            futhark_mc_segmap_task_131002;
        futhark_mc_task_131001_task.name = "futhark_mc_segmap_task_131002";
        futhark_mc_task_131001_task.iterations = n_114463;
        futhark_mc_task_131001_task.task_time =
            &ctx->futhark_mc_segmap_task_131002_total_time;
        futhark_mc_task_131001_task.task_iter =
            &ctx->futhark_mc_segmap_task_131002_total_iter;
        futhark_mc_task_131001_task.sched = STATIC;
        futhark_mc_task_131001_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131002_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131001_task);
        
        if (futhark_mc_segmap_task_131002_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_116891 = sub64(x_116884, min_res_114611);
        float i64_res_116892 = sitofp_i64_f32(x_116884);
        float x_116893 = i64_res_114618 - i64_res_116892;
        float max_arg_116894 = x_116893 / 2.0F;
        float max_res_116895 = fmax32(0.0F, max_arg_116894);
        int64_t flat_tid_116778 = (int64_t) 0;
        int32_t num_tasks_124232;
        int64_t flat_tid_116780 = (int64_t) 0;
        struct futhark_mc_task_131005 futhark_mc_task_131005;
        
        futhark_mc_task_131005.ctx = ctx;
        futhark_mc_task_131005.free_n_114463 = n_114463;
        futhark_mc_task_131005.free_l_jump_114471 = l_jump_114471;
        futhark_mc_task_131005.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131005.free_i_114539 = i_114539;
        futhark_mc_task_131005.free_x_114540 = x_114540;
        futhark_mc_task_131005.free_min_res_114611 = min_res_114611;
        futhark_mc_task_131005.free_empty_slice_114616 = empty_slice_114616;
        futhark_mc_task_131005.free_m_114617 = m_114617;
        futhark_mc_task_131005.free_gtid_116775 = gtid_116775;
        futhark_mc_task_131005.free_x_116884 = x_116884;
        futhark_mc_task_131005.free_min_arg_116891 = min_arg_116891;
        futhark_mc_task_131005.free_max_res_116895 = max_res_116895;
        futhark_mc_task_131005.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131005.free_mem_121914 = mem_121914;
        futhark_mc_task_131005.free_mem_121917 = mem_121917;
        futhark_mc_task_131005.free_mem_121920 = mem_121920;
        futhark_mc_task_131005.free_mem_121923 = mem_121923;
        
        struct scheduler_segop futhark_mc_task_131005_task;
        
        futhark_mc_task_131005_task.args = &futhark_mc_task_131005;
        futhark_mc_task_131005_task.top_level_fn =
            futhark_mc_segmap_task_131006;
        futhark_mc_task_131005_task.name = "futhark_mc_segmap_task_131006";
        futhark_mc_task_131005_task.iterations = l_n_m_114513;
        futhark_mc_task_131005_task.task_time =
            &ctx->futhark_mc_segmap_task_131006_total_time;
        futhark_mc_task_131005_task.task_iter =
            &ctx->futhark_mc_segmap_task_131006_total_iter;
        futhark_mc_task_131005_task.sched = DYNAMIC;
        futhark_mc_task_131005_task.nested_fn =
            futhark_mc_segmap_nested_task_131009;
        
        int futhark_mc_segmap_task_131006_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131005_task);
        
        if (futhark_mc_segmap_task_131006_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121987.mem + gtid_116775 * l_n_m_114513 * (int64_t) 8,
                mem_121923 + (int64_t) 0, l_n_m_114513 * (int64_t) 8);
        memmove(mem_121991.mem + gtid_116775 * l_n_m_114513 * (int64_t) 4,
                mem_121920 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121914);
    free(mem_121917);
    free(mem_121920);
    free(mem_121923);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130996_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130996_end -
                 futhark_mc_segmap_parloop_130996_start;
        
        ctx->futhark_mc_segmap_parloop_130996_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_130996_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_130996_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_130994(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116774 = tid;
    int num_tasks_123897 = info.nsubtasks;
    struct futhark_mc_task_130986 *futhark_mc_task_130986 =
                                  (struct futhark_mc_task_130986 *) args;
    struct futhark_context *ctx = futhark_mc_task_130986->ctx;
    uint64_t futhark_mc_segmap_nested_task_130994_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_130994_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_130986->free_m_114462;
    int64_t n_114463 = futhark_mc_task_130986->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_130986->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_130986->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_130986->free_i_114539;
    bool x_114540 = futhark_mc_task_130986->free_x_114540;
    int64_t min_res_114611 = futhark_mc_task_130986->free_min_res_114611;
    bool empty_slice_114616 = futhark_mc_task_130986->free_empty_slice_114616;
    int64_t m_114617 = futhark_mc_task_130986->free_m_114617;
    float i64_res_114618 = futhark_mc_task_130986->free_i64_res_114618;
    int64_t bytes_121803 = futhark_mc_task_130986->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_130986->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_130986->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121918 = futhark_mc_task_130986->free_bytes_121918;
    int64_t bytes_121921 = futhark_mc_task_130986->free_bytes_121921;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_130986->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_130986->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t iter_124025;
    struct futhark_mc_segmap_parloop_struct_130995
    futhark_mc_segmap_parloop_struct_130995;
    
    futhark_mc_segmap_parloop_struct_130995.ctx = ctx;
    futhark_mc_segmap_parloop_struct_130995.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_130995.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_130995.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_130995.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_130995.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_130995.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_130995.free_min_res_114611 =
        min_res_114611;
    futhark_mc_segmap_parloop_struct_130995.free_empty_slice_114616 =
        empty_slice_114616;
    futhark_mc_segmap_parloop_struct_130995.free_m_114617 = m_114617;
    futhark_mc_segmap_parloop_struct_130995.free_i64_res_114618 =
        i64_res_114618;
    futhark_mc_segmap_parloop_struct_130995.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_130995.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_130995.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_130995.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_130995.free_bytes_121921 = bytes_121921;
    futhark_mc_segmap_parloop_struct_130995.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_130995.free_mem_121991 = mem_121991.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_130996_task;
    
    futhark_mc_segmap_parloop_130996_task.name =
        "futhark_mc_segmap_parloop_130996";
    futhark_mc_segmap_parloop_130996_task.fn = futhark_mc_segmap_parloop_130996;
    futhark_mc_segmap_parloop_130996_task.args =
        &futhark_mc_segmap_parloop_struct_130995;
    futhark_mc_segmap_parloop_130996_task.iterations = iterations;
    futhark_mc_segmap_parloop_130996_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_130996_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_130996_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_130996_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_130996_task);
    
    if (futhark_mc_segmap_parloop_130996_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_130996_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_130996_total_end -
                 futhark_mc_segmap_parloop_130996_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130996_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130996_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_130996_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_130994_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_130994_end -
                 futhark_mc_segmap_nested_task_130994_start;
        
        ctx->futhark_mc_segmap_nested_task_130994_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_130994_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_130994_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131017 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    float free_i64_res_114744;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121998;
    int64_t free_bytes_122001;
    char *free_mem_122067;
    char *free_mem_122071;
};
struct futhark_mc_segmap_parloop_struct_131019 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    float free_i64_res_114744;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121998;
    int64_t free_bytes_122001;
    char *free_mem_122067;
    char *free_mem_122071;
};
static int futhark_mc_segmap_parloop_131020(void *args, int64_t start,
                                            int64_t end, int flat_tid_117096,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131019
    *futhark_mc_segmap_parloop_struct_131019 =
    (struct futhark_mc_segmap_parloop_struct_131019 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131019->ctx;
    uint64_t futhark_mc_segmap_parloop_131020_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131020_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131019->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131019->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131019->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131019->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131019->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131019->free_x_114540;
    int64_t min_res_114737 =
            futhark_mc_segmap_parloop_struct_131019->free_min_res_114737;
    bool empty_slice_114742 =
         futhark_mc_segmap_parloop_struct_131019->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_segmap_parloop_struct_131019->free_m_114743;
    float i64_res_114744 =
          futhark_mc_segmap_parloop_struct_131019->free_i64_res_114744;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_131019->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131019->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131019->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131019->free_bytes_121998;
    int64_t bytes_122001 =
            futhark_mc_segmap_parloop_struct_131019->free_bytes_122001;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131019->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131019->free_mem_122071,
                                  .size =0, .references =NULL};
    size_t mem_122006_cached_sizze_131021 = 0;
    char *mem_122006 = NULL;
    size_t mem_122009_cached_sizze_131022 = 0;
    char *mem_122009 = NULL;
    size_t mem_122036_cached_sizze_131023 = 0;
    char *mem_122036 = NULL;
    size_t mem_122039_cached_sizze_131024 = 0;
    char *mem_122039 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124370 = start;
    
    if (mem_122006_cached_sizze_131021 < (size_t) bytes_121803) {
        mem_122006 = realloc(mem_122006, bytes_121803);
        mem_122006_cached_sizze_131021 = bytes_121803;
    }
    if (mem_122009_cached_sizze_131022 < (size_t) bytes_121803) {
        mem_122009 = realloc(mem_122009, bytes_121803);
        mem_122009_cached_sizze_131022 = bytes_121803;
    }
    if (mem_122036_cached_sizze_131023 < (size_t) bytes_121998) {
        mem_122036 = realloc(mem_122036, bytes_121998);
        mem_122036_cached_sizze_131023 = bytes_121998;
    }
    if (mem_122039_cached_sizze_131024 < (size_t) bytes_122001) {
        mem_122039 = realloc(mem_122039, bytes_122001);
        mem_122039_cached_sizze_131024 = bytes_122001;
    }
    for (; iter_124370 < end; iter_124370++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124483 = m_114462;
        int64_t gtid_117097 = iter_124370;
        int64_t remnant_124484 = iter_124370 - gtid_117097;
        int64_t x_114748 = ((int64_t *) mem_121845.mem)[gtid_117097];
        
        for (int64_t i_124371 = 0; i_124371 < n_114463; i_124371++) {
            int64_t x_124374 = ((int64_t *) mem_121842.mem)[gtid_117097 *
                                                            n_114463 +
                                                            i_124371];
            int64_t defunc_0_f_res_124375 = add64((int64_t) 1, x_124374);
            bool cond_124376 = slt64(defunc_0_f_res_124375, (int64_t) 0);
            int64_t defunc_0_f_res_124377;
            
            if (cond_124376) {
                defunc_0_f_res_124377 = (int64_t) 9223372036854775807;
            } else {
                defunc_0_f_res_124377 = defunc_0_f_res_124375;
            }
            ((int64_t *) mem_122006)[i_124371] = defunc_0_f_res_124377;
            ((int64_t *) mem_122009)[i_124371] = defunc_0_f_res_124375;
        }
        
        int64_t min_arg_114755 = sub64(x_114748, min_res_114737);
        float i64_res_114756 = sitofp_i64_f32(x_114748);
        float x_114757 = i64_res_114744 - i64_res_114756;
        float max_arg_114758 = x_114757 / 2.0F;
        float max_res_114759 = fmax32(0.0F, max_arg_114758);
        
        for (int64_t i_124380 = 0; i_124380 < t_n_m_114520; i_124380++) {
            int64_t min_arg_124383 = mul64(t_jump_114470, i_124380);
            int64_t min_res_124384 = smin64(i_114539, min_arg_124383);
            int64_t defunc_0_g_res_124385 = add64((int64_t) 1, min_res_124384);
            bool nearest_idx_124386;
            int64_t nearest_idx_124387;
            int64_t nearest_idx_124388;
            bool loop_while_124389;
            int64_t low_124390;
            int64_t high_124391;
            
            loop_while_124389 = x_114540;
            low_124390 = (int64_t) 0;
            high_124391 = i_114539;
            while (loop_while_124389) {
                int64_t x_124392 = add64(low_124390, high_124391);
                int64_t mid_124393 = sdiv64(x_124392, (int64_t) 2);
                bool x_124394 = sle64((int64_t) 0, mid_124393);
                bool y_124395 = slt64(mid_124393, n_114463);
                bool bounds_check_124396 = x_124394 && y_124395;
                bool index_certs_124397;
                
                if (!bounds_check_124396) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_124393,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_124398 = ((int64_t *) mem_122006)[mid_124393];
                bool cond_124399 = sle64(defunc_0_g_res_124385, x_124398);
                int64_t loopres_124400;
                int64_t loopres_124401;
                
                if (cond_124399) {
                    int64_t loopres_t_res_124402 = sub64(mid_124393,
                                                         (int64_t) 1);
                    
                    loopres_124400 = low_124390;
                    loopres_124401 = loopres_t_res_124402;
                } else {
                    int64_t loopres_f_res_124403 = add64((int64_t) 1,
                                                         mid_124393);
                    
                    loopres_124400 = loopres_f_res_124403;
                    loopres_124401 = high_124391;
                }
                
                bool loop_cond_124404 = sle64(loopres_124400, loopres_124401);
                bool loop_while_tmp_124489 = loop_cond_124404;
                int64_t low_tmp_124490 = loopres_124400;
                int64_t high_tmp_124491 = loopres_124401;
                
                loop_while_124389 = loop_while_tmp_124489;
                low_124390 = low_tmp_124490;
                high_124391 = high_tmp_124491;
            }
            nearest_idx_124386 = loop_while_124389;
            nearest_idx_124387 = low_124390;
            nearest_idx_124388 = high_124391;
            
            int64_t max_arg_124405 = sub64(nearest_idx_124387, min_res_114737);
            int64_t max_res_124406 = smax64((int64_t) 0, max_arg_124405);
            int64_t j_124407 = add64(min_res_114737, max_res_124406);
            int64_t i_p_m_t_s_124408 = add64(m_114743, max_res_124406);
            bool zzero_leq_i_p_m_t_s_124409 = sle64((int64_t) 0,
                                                    i_p_m_t_s_124408);
            bool i_p_m_t_s_leq_w_124410 = slt64(i_p_m_t_s_124408, n_114463);
            bool zzero_lte_i_124411 = sle64((int64_t) 0, max_res_124406);
            bool i_lte_j_124412 = sle64(max_res_124406, j_124407);
            bool y_124413 = i_p_m_t_s_leq_w_124410 && zzero_lte_i_124411;
            bool y_124414 = zzero_leq_i_p_m_t_s_124409 && y_124413;
            bool y_124415 = i_lte_j_124412 && y_124414;
            bool forwards_ok_124416 = zzero_lte_i_124411 && y_124415;
            bool ok_or_empty_124417 = empty_slice_114742 || forwards_ok_124416;
            bool index_certs_124418;
            
            if (!ok_or_empty_124417) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_124406, ":",
                              (long long) j_124407,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t defunc_2_reduce_res_124419;
            int64_t redout_124421 = (int64_t) 0;
            
            for (int64_t i_124420 = 0; i_124420 < min_res_114737; i_124420++) {
                int64_t slice_124422 = max_res_124406 + i_124420;
                int64_t x_124423 = ((int64_t *) mem_122009)[slice_124422];
                int64_t abs_arg_124424 = sub64(x_124423, defunc_0_g_res_124385);
                int64_t abs_res_124425 = abs64(abs_arg_124424);
                int64_t defunc_1_op_res_124426 = add64(abs_res_124425,
                                                       redout_124421);
                int64_t redout_tmp_124492 = defunc_1_op_res_124426;
                
                redout_124421 = redout_tmp_124492;
            }
            defunc_2_reduce_res_124419 = redout_124421;
            
            int64_t idx_124427;
            int64_t idx_124428;
            int64_t idx_124429;
            int64_t idx_124430;
            int64_t best_idx_124432;
            int64_t last_idx_124433;
            int64_t best_sum_124434;
            int64_t curr_sum_124435;
            
            best_idx_124432 = max_res_124406;
            last_idx_124433 = max_res_124406;
            best_sum_124434 = defunc_2_reduce_res_124419;
            curr_sum_124435 = defunc_2_reduce_res_124419;
            for (int64_t j_124431 = 0; j_124431 < min_res_114737; j_124431++) {
                int64_t new_idx_124436 = add64(max_res_124406, j_124431);
                int64_t x_124437 = add64(min_res_114737, new_idx_124436);
                bool cond_124438 = slt64(x_114748, x_124437);
                int64_t new_sum_124439;
                
                if (cond_124438) {
                    new_sum_124439 = (int64_t) 9223372036854775807;
                } else {
                    bool x_124440 = sle64((int64_t) 0, last_idx_124433);
                    bool y_124441 = slt64(last_idx_124433, n_114463);
                    bool bounds_check_124442 = x_124440 && y_124441;
                    bool index_certs_124443;
                    
                    if (!bounds_check_124442) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) last_idx_124433,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    int64_t y_124444 =
                            ((int64_t *) mem_122009)[last_idx_124433];
                    int64_t binop_p_124445 = sub64(defunc_0_g_res_124385,
                                                   y_124444);
                    int64_t defunc_0_f_res_124446 = abs64(binop_p_124445);
                    int64_t x_124447 = sub64(curr_sum_124435,
                                             defunc_0_f_res_124446);
                    int64_t min_arg_124448 = add64(min_res_114737,
                                                   last_idx_124433);
                    int64_t min_res_124449 = smin64(i_114539, min_arg_124448);
                    bool x_124450 = sle64((int64_t) 0, min_res_124449);
                    bool y_124451 = slt64(min_res_124449, n_114463);
                    bool bounds_check_124452 = x_124450 && y_124451;
                    bool index_certs_124453;
                    
                    if (!bounds_check_124452) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) min_res_124449,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    int64_t y_124454 = ((int64_t *) mem_122009)[min_res_124449];
                    int64_t binop_p_124455 = sub64(defunc_0_g_res_124385,
                                                   y_124454);
                    int64_t defunc_0_f_res_124456 = abs64(binop_p_124455);
                    int64_t new_sum_f_res_124457 = add64(x_124447,
                                                         defunc_0_f_res_124456);
                    
                    new_sum_124439 = new_sum_f_res_124457;
                }
                
                bool cond_124458 = sle64(new_sum_124439, best_sum_124434);
                int64_t loopres_124459;
                
                if (cond_124458) {
                    loopres_124459 = new_idx_124436;
                } else {
                    loopres_124459 = best_idx_124432;
                }
                
                int64_t loopres_124460;
                
                if (cond_124458) {
                    loopres_124460 = new_sum_124439;
                } else {
                    loopres_124460 = best_sum_124434;
                }
                
                int64_t best_idx_tmp_124493 = loopres_124459;
                int64_t last_idx_tmp_124494 = new_idx_124436;
                int64_t best_sum_tmp_124495 = loopres_124460;
                int64_t curr_sum_tmp_124496 = new_sum_124439;
                
                best_idx_124432 = best_idx_tmp_124493;
                last_idx_124433 = last_idx_tmp_124494;
                best_sum_124434 = best_sum_tmp_124495;
                curr_sum_124435 = curr_sum_tmp_124496;
            }
            idx_124427 = best_idx_124432;
            idx_124428 = last_idx_124433;
            idx_124429 = best_sum_124434;
            idx_124430 = curr_sum_124435;
            
            int64_t min_res_124461 = smin64(min_arg_114755, idx_124427);
            int64_t x_124462 = add64(min_res_114737, min_res_124461);
            int64_t r_124463 = sub64(x_124462, (int64_t) 1);
            bool x_124464 = sle64((int64_t) 0, r_124463);
            bool y_124465 = slt64(r_124463, n_114463);
            bool bounds_check_124466 = x_124464 && y_124465;
            bool index_certs_124467;
            
            if (!bounds_check_124466) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_124463,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124468 = ((int64_t *) mem_121842.mem)[gtid_117097 *
                                                            n_114463 +
                                                            r_124463];
            int64_t abs_arg_124469 = sub64(x_124468, min_res_124384);
            int64_t abs_res_124470 = abs64(abs_arg_124469);
            bool x_124471 = sle64((int64_t) 0, min_res_124461);
            bool y_124472 = slt64(min_res_124461, n_114463);
            bool bounds_check_124473 = x_124471 && y_124472;
            bool index_certs_124474;
            
            if (!bounds_check_124473) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_124461,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124475 = ((int64_t *) mem_121842.mem)[gtid_117097 *
                                                            n_114463 +
                                                            min_res_124461];
            int64_t abs_arg_124476 = sub64(x_124475, min_res_124384);
            int64_t abs_res_124477 = abs64(abs_arg_124476);
            int64_t max_res_124478 = smax64(abs_res_124470, abs_res_124477);
            float defunc_0_f_res_124479 = sitofp_i64_f32(max_res_124478);
            float defunc_1_f_res_124480 = max_res_114759 +
                  defunc_0_f_res_124479;
            
            ((float *) mem_122036)[i_124380] = defunc_1_f_res_124480;
            ((int64_t *) mem_122039)[i_124380] = min_res_124461;
        }
        memmove(mem_122067.mem + gtid_117097 * t_n_m_114520 * (int64_t) 8,
                mem_122039 + (int64_t) 0, t_n_m_114520 * (int64_t) 8);
        memmove(mem_122071.mem + gtid_117097 * t_n_m_114520 * (int64_t) 4,
                mem_122036 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122006);
    free(mem_122009);
    free(mem_122036);
    free(mem_122039);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131020_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131020_end -
                 futhark_mc_segmap_parloop_131020_start;
        
        ctx->futhark_mc_segmap_parloop_131020_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131020_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131020_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131018(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117096 = tid;
    int num_tasks_124369 = info.nsubtasks;
    struct futhark_mc_task_131017 *futhark_mc_task_131017 =
                                  (struct futhark_mc_task_131017 *) args;
    struct futhark_context *ctx = futhark_mc_task_131017->ctx;
    uint64_t futhark_mc_segmap_task_131018_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131018_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131017->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131017->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131017->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131017->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131017->free_i_114539;
    bool x_114540 = futhark_mc_task_131017->free_x_114540;
    int64_t min_res_114737 = futhark_mc_task_131017->free_min_res_114737;
    bool empty_slice_114742 = futhark_mc_task_131017->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_task_131017->free_m_114743;
    float i64_res_114744 = futhark_mc_task_131017->free_i64_res_114744;
    int64_t bytes_121803 = futhark_mc_task_131017->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131017->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131017->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131017->free_bytes_121998;
    int64_t bytes_122001 = futhark_mc_task_131017->free_bytes_122001;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131017->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131017->free_mem_122071,
                                  .size =0, .references =NULL};
    int64_t iter_124370;
    struct futhark_mc_segmap_parloop_struct_131019
    futhark_mc_segmap_parloop_struct_131019;
    
    futhark_mc_segmap_parloop_struct_131019.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131019.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131019.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131019.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131019.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131019.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131019.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131019.free_min_res_114737 =
        min_res_114737;
    futhark_mc_segmap_parloop_struct_131019.free_empty_slice_114742 =
        empty_slice_114742;
    futhark_mc_segmap_parloop_struct_131019.free_m_114743 = m_114743;
    futhark_mc_segmap_parloop_struct_131019.free_i64_res_114744 =
        i64_res_114744;
    futhark_mc_segmap_parloop_struct_131019.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_131019.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131019.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131019.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131019.free_bytes_122001 = bytes_122001;
    futhark_mc_segmap_parloop_struct_131019.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131019.free_mem_122071 = mem_122071.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131020_task;
    
    futhark_mc_segmap_parloop_131020_task.name =
        "futhark_mc_segmap_parloop_131020";
    futhark_mc_segmap_parloop_131020_task.fn = futhark_mc_segmap_parloop_131020;
    futhark_mc_segmap_parloop_131020_task.args =
        &futhark_mc_segmap_parloop_struct_131019;
    futhark_mc_segmap_parloop_131020_task.iterations = iterations;
    futhark_mc_segmap_parloop_131020_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131020_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131020_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131020_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131020_task);
    
    if (futhark_mc_segmap_parloop_131020_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131020_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131020_total_end -
                 futhark_mc_segmap_parloop_131020_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131020_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131020_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131020_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131018_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131018_end -
                 futhark_mc_segmap_task_131018_start;
        
        ctx->futhark_mc_segmap_task_131018_runs[tid]++;
        ctx->futhark_mc_segmap_task_131018_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131018_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131026 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    float free_i64_res_114744;
    int64_t free_bytes_121803;
    char *free_mem_121842;
    char *free_mem_121845;
    int64_t free_bytes_121998;
    int64_t free_bytes_122001;
    char *free_mem_122067;
    char *free_mem_122071;
};
struct futhark_mc_task_131032 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117099;
    char *free_mem_121842;
    char *free_mem_121994;
    char *free_mem_121997;
};
struct futhark_mc_segmap_parloop_struct_131034 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117099;
    char *free_mem_121842;
    char *free_mem_121994;
    char *free_mem_121997;
};
static int futhark_mc_segmap_parloop_131035(void *args, int64_t start,
                                            int64_t end, int flat_tid_117100,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131034
    *futhark_mc_segmap_parloop_struct_131034 =
    (struct futhark_mc_segmap_parloop_struct_131034 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131034->ctx;
    uint64_t futhark_mc_segmap_parloop_131035_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131035_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131034->free_n_114463;
    int64_t gtid_117099 =
            futhark_mc_segmap_parloop_struct_131034->free_gtid_117099;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131034->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_segmap_parloop_struct_131034->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_segmap_parloop_struct_131034->free_mem_121997,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124701 = start;
    
    for (; iter_124701 < end; iter_124701++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124702 = n_114463;
        int64_t gtid_117101 = iter_124701;
        int64_t remnant_124703 = iter_124701 - gtid_117101;
        int64_t x_124498 = ((int64_t *) mem_121842.mem)[gtid_117099 * n_114463 +
                                                        gtid_117101];
        int64_t defunc_0_f_res_124499 = add64((int64_t) 1, x_124498);
        bool cond_124500 = slt64(defunc_0_f_res_124499, (int64_t) 0);
        int64_t defunc_0_f_res_124501;
        
        if (cond_124500) {
            defunc_0_f_res_124501 = (int64_t) 9223372036854775807;
        } else {
            defunc_0_f_res_124501 = defunc_0_f_res_124499;
        }
        ((int64_t *) mem_121994.mem)[gtid_117101] = defunc_0_f_res_124501;
        ((int64_t *) mem_121997.mem)[gtid_117101] = defunc_0_f_res_124499;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131035_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131035_end -
                 futhark_mc_segmap_parloop_131035_start;
        
        ctx->futhark_mc_segmap_parloop_131035_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131035_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131035_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131033(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117100 = tid;
    int num_tasks_124700 = info.nsubtasks;
    struct futhark_mc_task_131032 *futhark_mc_task_131032 =
                                  (struct futhark_mc_task_131032 *) args;
    struct futhark_context *ctx = futhark_mc_task_131032->ctx;
    uint64_t futhark_mc_segmap_task_131033_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131033_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131032->free_n_114463;
    int64_t gtid_117099 = futhark_mc_task_131032->free_gtid_117099;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131032->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_task_131032->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_task_131032->free_mem_121997,
                                  .size =0, .references =NULL};
    int64_t iter_124701;
    struct futhark_mc_segmap_parloop_struct_131034
    futhark_mc_segmap_parloop_struct_131034;
    
    futhark_mc_segmap_parloop_struct_131034.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131034.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131034.free_gtid_117099 = gtid_117099;
    futhark_mc_segmap_parloop_struct_131034.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131034.free_mem_121994 = mem_121994.mem;
    futhark_mc_segmap_parloop_struct_131034.free_mem_121997 = mem_121997.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131035_task;
    
    futhark_mc_segmap_parloop_131035_task.name =
        "futhark_mc_segmap_parloop_131035";
    futhark_mc_segmap_parloop_131035_task.fn = futhark_mc_segmap_parloop_131035;
    futhark_mc_segmap_parloop_131035_task.args =
        &futhark_mc_segmap_parloop_struct_131034;
    futhark_mc_segmap_parloop_131035_task.iterations = iterations;
    futhark_mc_segmap_parloop_131035_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131035_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131035_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131035_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131035_task);
    
    if (futhark_mc_segmap_parloop_131035_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131035_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131035_total_end -
                 futhark_mc_segmap_parloop_131035_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131035_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131035_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131035_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131033_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131033_end -
                 futhark_mc_segmap_task_131033_start;
        
        ctx->futhark_mc_segmap_task_131033_runs[tid]++;
        ctx->futhark_mc_segmap_task_131033_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131033_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131036 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    int64_t free_gtid_117099;
    int64_t free_x_117208;
    int64_t free_min_arg_117215;
    float free_max_res_117219;
    char *free_mem_121842;
    char *free_mem_121994;
    char *free_mem_121997;
    char *free_mem_122000;
    char *free_mem_122003;
};
struct futhark_mc_segmap_parloop_struct_131038 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    int64_t free_gtid_117099;
    int64_t free_x_117208;
    int64_t free_min_arg_117215;
    float free_max_res_117219;
    char *free_mem_121842;
    char *free_mem_121994;
    char *free_mem_121997;
    char *free_mem_122000;
    char *free_mem_122003;
};
static int futhark_mc_segmap_parloop_131039(void *args, int64_t start,
                                            int64_t end, int flat_tid_117102,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131038
    *futhark_mc_segmap_parloop_struct_131038 =
    (struct futhark_mc_segmap_parloop_struct_131038 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131038->ctx;
    uint64_t futhark_mc_segmap_parloop_131039_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131039_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131038->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131038->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131038->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131038->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131038->free_x_114540;
    int64_t min_res_114737 =
            futhark_mc_segmap_parloop_struct_131038->free_min_res_114737;
    bool empty_slice_114742 =
         futhark_mc_segmap_parloop_struct_131038->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_segmap_parloop_struct_131038->free_m_114743;
    int64_t gtid_117099 =
            futhark_mc_segmap_parloop_struct_131038->free_gtid_117099;
    int64_t x_117208 = futhark_mc_segmap_parloop_struct_131038->free_x_117208;
    int64_t min_arg_117215 =
            futhark_mc_segmap_parloop_struct_131038->free_min_arg_117215;
    float max_res_117219 =
          futhark_mc_segmap_parloop_struct_131038->free_max_res_117219;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131038->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_segmap_parloop_struct_131038->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_segmap_parloop_struct_131038->free_mem_121997,
                                  .size =0, .references =NULL};
    struct memblock mem_122000 = {.desc ="mem_122000", .mem =
                                  futhark_mc_segmap_parloop_struct_131038->free_mem_122000,
                                  .size =0, .references =NULL};
    struct memblock mem_122003 = {.desc ="mem_122003", .mem =
                                  futhark_mc_segmap_parloop_struct_131038->free_mem_122003,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124705 = start;
    
    for (; iter_124705 < end; iter_124705++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124759 = t_n_m_114520;
        int64_t gtid_117103 = iter_124705;
        int64_t remnant_124760 = iter_124705 - gtid_117103;
        int64_t min_arg_124600 = mul64(t_jump_114470, gtid_117103);
        int64_t min_res_124601 = smin64(i_114539, min_arg_124600);
        int64_t defunc_0_g_res_124602 = add64((int64_t) 1, min_res_124601);
        bool nearest_idx_124603;
        int64_t nearest_idx_124604;
        int64_t nearest_idx_124605;
        bool loop_while_124706;
        int64_t low_124707;
        int64_t high_124708;
        
        loop_while_124706 = x_114540;
        low_124707 = (int64_t) 0;
        high_124708 = i_114539;
        while (loop_while_124706) {
            int64_t x_124709 = add64(low_124707, high_124708);
            int64_t mid_124710 = sdiv64(x_124709, (int64_t) 2);
            bool x_124711 = sle64((int64_t) 0, mid_124710);
            bool y_124712 = slt64(mid_124710, n_114463);
            bool bounds_check_124713 = x_124711 && y_124712;
            bool index_certs_124714;
            
            if (!bounds_check_124713) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124710,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124715 = ((int64_t *) mem_121994.mem)[mid_124710];
            bool cond_124716 = sle64(defunc_0_g_res_124602, x_124715);
            int64_t loopres_124717;
            int64_t loopres_124718;
            
            if (cond_124716) {
                int64_t loopres_t_res_124719 = sub64(mid_124710, (int64_t) 1);
                
                loopres_124717 = low_124707;
                loopres_124718 = loopres_t_res_124719;
            } else {
                int64_t loopres_f_res_124720 = add64((int64_t) 1, mid_124710);
                
                loopres_124717 = loopres_f_res_124720;
                loopres_124718 = high_124708;
            }
            
            bool loop_cond_124721 = sle64(loopres_124717, loopres_124718);
            bool loop_while_tmp_124761 = loop_cond_124721;
            int64_t low_tmp_124762 = loopres_124717;
            int64_t high_tmp_124763 = loopres_124718;
            
            loop_while_124706 = loop_while_tmp_124761;
            low_124707 = low_tmp_124762;
            high_124708 = high_tmp_124763;
        }
        nearest_idx_124603 = loop_while_124706;
        nearest_idx_124604 = low_124707;
        nearest_idx_124605 = high_124708;
        
        int64_t max_arg_124622 = sub64(nearest_idx_124604, min_res_114737);
        int64_t max_res_124623 = smax64((int64_t) 0, max_arg_124622);
        int64_t j_124624 = add64(min_res_114737, max_res_124623);
        int64_t i_p_m_t_s_124625 = add64(m_114743, max_res_124623);
        bool zzero_leq_i_p_m_t_s_124626 = sle64((int64_t) 0, i_p_m_t_s_124625);
        bool i_p_m_t_s_leq_w_124627 = slt64(i_p_m_t_s_124625, n_114463);
        bool zzero_lte_i_124628 = sle64((int64_t) 0, max_res_124623);
        bool i_lte_j_124629 = sle64(max_res_124623, j_124624);
        bool y_124630 = i_p_m_t_s_leq_w_124627 && zzero_lte_i_124628;
        bool y_124631 = zzero_leq_i_p_m_t_s_124626 && y_124630;
        bool y_124632 = i_lte_j_124629 && y_124631;
        bool forwards_ok_124633 = zzero_lte_i_124628 && y_124632;
        bool ok_or_empty_124634 = empty_slice_114742 || forwards_ok_124633;
        bool index_certs_124635;
        
        if (!ok_or_empty_124634) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124623, ":",
                          (long long) j_124624,
                          "] out of bounds for array of shape [",
                          (long long) n_114463, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124636;
        int64_t redout_124723 = (int64_t) 0;
        
        for (int64_t i_124722 = 0; i_124722 < min_res_114737; i_124722++) {
            int64_t slice_124724 = max_res_124623 + i_124722;
            int64_t x_124725 = ((int64_t *) mem_121997.mem)[slice_124724];
            int64_t abs_arg_124726 = sub64(x_124725, defunc_0_g_res_124602);
            int64_t abs_res_124727 = abs64(abs_arg_124726);
            int64_t defunc_1_op_res_124728 = add64(abs_res_124727,
                                                   redout_124723);
            int64_t redout_tmp_124764 = defunc_1_op_res_124728;
            
            redout_124723 = redout_tmp_124764;
        }
        defunc_2_reduce_res_124636 = redout_124723;
        
        int64_t idx_124644;
        int64_t idx_124645;
        int64_t idx_124646;
        int64_t idx_124647;
        int64_t best_idx_124730;
        int64_t last_idx_124731;
        int64_t best_sum_124732;
        int64_t curr_sum_124733;
        
        best_idx_124730 = max_res_124623;
        last_idx_124731 = max_res_124623;
        best_sum_124732 = defunc_2_reduce_res_124636;
        curr_sum_124733 = defunc_2_reduce_res_124636;
        for (int64_t j_124729 = 0; j_124729 < min_res_114737; j_124729++) {
            int64_t new_idx_124734 = add64(max_res_124623, j_124729);
            int64_t x_124735 = add64(min_res_114737, new_idx_124734);
            bool cond_124736 = slt64(x_117208, x_124735);
            int64_t new_sum_124737;
            
            if (cond_124736) {
                new_sum_124737 = (int64_t) 9223372036854775807;
            } else {
                bool x_124738 = sle64((int64_t) 0, last_idx_124731);
                bool y_124739 = slt64(last_idx_124731, n_114463);
                bool bounds_check_124740 = x_124738 && y_124739;
                bool index_certs_124741;
                
                if (!bounds_check_124740) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124731,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124742 =
                        ((int64_t *) mem_121997.mem)[last_idx_124731];
                int64_t binop_p_124743 = sub64(defunc_0_g_res_124602, y_124742);
                int64_t defunc_0_f_res_124744 = abs64(binop_p_124743);
                int64_t x_124745 = sub64(curr_sum_124733,
                                         defunc_0_f_res_124744);
                int64_t min_arg_124746 = add64(min_res_114737, last_idx_124731);
                int64_t min_res_124747 = smin64(i_114539, min_arg_124746);
                bool x_124748 = sle64((int64_t) 0, min_res_124747);
                bool y_124749 = slt64(min_res_124747, n_114463);
                bool bounds_check_124750 = x_124748 && y_124749;
                bool index_certs_124751;
                
                if (!bounds_check_124750) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124747,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124752 = ((int64_t *) mem_121997.mem)[min_res_124747];
                int64_t binop_p_124753 = sub64(defunc_0_g_res_124602, y_124752);
                int64_t defunc_0_f_res_124754 = abs64(binop_p_124753);
                int64_t new_sum_f_res_124755 = add64(x_124745,
                                                     defunc_0_f_res_124754);
                
                new_sum_124737 = new_sum_f_res_124755;
            }
            
            bool cond_124756 = sle64(new_sum_124737, best_sum_124732);
            int64_t loopres_124757;
            
            if (cond_124756) {
                loopres_124757 = new_idx_124734;
            } else {
                loopres_124757 = best_idx_124730;
            }
            
            int64_t loopres_124758;
            
            if (cond_124756) {
                loopres_124758 = new_sum_124737;
            } else {
                loopres_124758 = best_sum_124732;
            }
            
            int64_t best_idx_tmp_124765 = loopres_124757;
            int64_t last_idx_tmp_124766 = new_idx_124734;
            int64_t best_sum_tmp_124767 = loopres_124758;
            int64_t curr_sum_tmp_124768 = new_sum_124737;
            
            best_idx_124730 = best_idx_tmp_124765;
            last_idx_124731 = last_idx_tmp_124766;
            best_sum_124732 = best_sum_tmp_124767;
            curr_sum_124733 = curr_sum_tmp_124768;
        }
        idx_124644 = best_idx_124730;
        idx_124645 = last_idx_124731;
        idx_124646 = best_sum_124732;
        idx_124647 = curr_sum_124733;
        
        int64_t min_res_124678 = smin64(min_arg_117215, idx_124644);
        int64_t x_124679 = add64(min_res_114737, min_res_124678);
        int64_t r_124680 = sub64(x_124679, (int64_t) 1);
        bool x_124681 = sle64((int64_t) 0, r_124680);
        bool y_124682 = slt64(r_124680, n_114463);
        bool bounds_check_124683 = x_124681 && y_124682;
        bool index_certs_124684;
        
        if (!bounds_check_124683) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124680,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124685 = ((int64_t *) mem_121842.mem)[gtid_117099 * n_114463 +
                                                        r_124680];
        int64_t abs_arg_124686 = sub64(x_124685, min_res_124601);
        int64_t abs_res_124687 = abs64(abs_arg_124686);
        bool x_124688 = sle64((int64_t) 0, min_res_124678);
        bool y_124689 = slt64(min_res_124678, n_114463);
        bool bounds_check_124690 = x_124688 && y_124689;
        bool index_certs_124691;
        
        if (!bounds_check_124690) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124678,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124692 = ((int64_t *) mem_121842.mem)[gtid_117099 * n_114463 +
                                                        min_res_124678];
        int64_t abs_arg_124693 = sub64(x_124692, min_res_124601);
        int64_t abs_res_124694 = abs64(abs_arg_124693);
        int64_t max_res_124695 = smax64(abs_res_124687, abs_res_124694);
        float defunc_0_f_res_124696 = sitofp_i64_f32(max_res_124695);
        float defunc_1_f_res_124697 = max_res_117219 + defunc_0_f_res_124696;
        
        ((float *) mem_122000.mem)[gtid_117103] = defunc_1_f_res_124697;
        ((int64_t *) mem_122003.mem)[gtid_117103] = min_res_124678;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131039_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131039_end -
                 futhark_mc_segmap_parloop_131039_start;
        
        ctx->futhark_mc_segmap_parloop_131039_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131039_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131039_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131037(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117102 = tid;
    int num_tasks_124704 = info.nsubtasks;
    struct futhark_mc_task_131036 *futhark_mc_task_131036 =
                                  (struct futhark_mc_task_131036 *) args;
    struct futhark_context *ctx = futhark_mc_task_131036->ctx;
    uint64_t futhark_mc_segmap_task_131037_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131037_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131036->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131036->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131036->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131036->free_i_114539;
    bool x_114540 = futhark_mc_task_131036->free_x_114540;
    int64_t min_res_114737 = futhark_mc_task_131036->free_min_res_114737;
    bool empty_slice_114742 = futhark_mc_task_131036->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_task_131036->free_m_114743;
    int64_t gtid_117099 = futhark_mc_task_131036->free_gtid_117099;
    int64_t x_117208 = futhark_mc_task_131036->free_x_117208;
    int64_t min_arg_117215 = futhark_mc_task_131036->free_min_arg_117215;
    float max_res_117219 = futhark_mc_task_131036->free_max_res_117219;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131036->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_task_131036->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_task_131036->free_mem_121997,
                                  .size =0, .references =NULL};
    struct memblock mem_122000 = {.desc ="mem_122000", .mem =
                                  futhark_mc_task_131036->free_mem_122000,
                                  .size =0, .references =NULL};
    struct memblock mem_122003 = {.desc ="mem_122003", .mem =
                                  futhark_mc_task_131036->free_mem_122003,
                                  .size =0, .references =NULL};
    int64_t iter_124705;
    struct futhark_mc_segmap_parloop_struct_131038
    futhark_mc_segmap_parloop_struct_131038;
    
    futhark_mc_segmap_parloop_struct_131038.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131038.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131038.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131038.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131038.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131038.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131038.free_min_res_114737 =
        min_res_114737;
    futhark_mc_segmap_parloop_struct_131038.free_empty_slice_114742 =
        empty_slice_114742;
    futhark_mc_segmap_parloop_struct_131038.free_m_114743 = m_114743;
    futhark_mc_segmap_parloop_struct_131038.free_gtid_117099 = gtid_117099;
    futhark_mc_segmap_parloop_struct_131038.free_x_117208 = x_117208;
    futhark_mc_segmap_parloop_struct_131038.free_min_arg_117215 =
        min_arg_117215;
    futhark_mc_segmap_parloop_struct_131038.free_max_res_117219 =
        max_res_117219;
    futhark_mc_segmap_parloop_struct_131038.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131038.free_mem_121994 = mem_121994.mem;
    futhark_mc_segmap_parloop_struct_131038.free_mem_121997 = mem_121997.mem;
    futhark_mc_segmap_parloop_struct_131038.free_mem_122000 = mem_122000.mem;
    futhark_mc_segmap_parloop_struct_131038.free_mem_122003 = mem_122003.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131039_task;
    
    futhark_mc_segmap_parloop_131039_task.name =
        "futhark_mc_segmap_parloop_131039";
    futhark_mc_segmap_parloop_131039_task.fn = futhark_mc_segmap_parloop_131039;
    futhark_mc_segmap_parloop_131039_task.args =
        &futhark_mc_segmap_parloop_struct_131038;
    futhark_mc_segmap_parloop_131039_task.iterations = iterations;
    futhark_mc_segmap_parloop_131039_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131039_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131039_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131039_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131039_task);
    
    if (futhark_mc_segmap_parloop_131039_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131039_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131039_total_end -
                 futhark_mc_segmap_parloop_131039_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131039_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131039_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131039_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131037_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131037_end -
                 futhark_mc_segmap_task_131037_start;
        
        ctx->futhark_mc_segmap_task_131037_runs[tid]++;
        ctx->futhark_mc_segmap_task_131037_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131037_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131041 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    bool free_x_114540;
    int64_t free_min_res_114737;
    bool free_empty_slice_114742;
    int64_t free_m_114743;
    int64_t free_gtid_117099;
    int64_t free_x_117208;
    int64_t free_min_arg_117215;
    float free_max_res_117219;
    char *free_mem_121842;
    char *free_mem_121994;
    char *free_mem_121997;
    char *free_mem_122000;
    char *free_mem_122003;
};
struct futhark_mc_task_131043 {
    struct futhark_context *ctx;
    char *free_mem_121997;
    int64_t free_defunc_0_g_res_124504;
    int64_t free_max_res_124525;
    int64_t *retval_defunc_2_reduce_res_124538;
};
struct futhark_mc_segred_stage_1_parloop_struct_131046 {
    struct futhark_context *ctx;
    char *free_mem_121997;
    int64_t free_defunc_0_g_res_124504;
    int64_t free_max_res_124525;
    char *free_reduce_stage_1_tid_res_arr_mem_124829;
};
static int futhark_mc_segred_stage_1_parloop_131047(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117106,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131046
    *futhark_mc_segred_stage_1_parloop_struct_131046 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131046 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131046->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131047_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131047_start = get_wall_time();
    
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131046->free_mem_121997,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124504 =
            futhark_mc_segred_stage_1_parloop_struct_131046->free_defunc_0_g_res_124504;
    int64_t max_res_124525 =
            futhark_mc_segred_stage_1_parloop_struct_131046->free_max_res_124525;
    struct memblock reduce_stage_1_tid_res_arr_mem_124829 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124829",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131046->free_reduce_stage_1_tid_res_arr_mem_124829,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124831 = start;
    int64_t x_124786;
    int64_t x_124787;
    int64_t local_acc_124832 = (int64_t) 0;
    
    for (; iter_124831 < end; iter_124831++) {
        int64_t gtid_117107 = iter_124831;
        int64_t slice_124789 = gtid_117107 + max_res_124525;
        int64_t x_124790 = ((int64_t *) mem_121997.mem)[slice_124789];
        int64_t abs_arg_124791 = sub64(x_124790, defunc_0_g_res_124504);
        int64_t abs_res_124792 = abs64(abs_arg_124791);
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124786 = local_acc_124832;
        }
        // Load next params
        {
            x_124787 = abs_res_124792;
        }
        // Red body
        {
            int64_t defunc_1_op_res_124788 = add64(x_124786, x_124787);
            
            local_acc_124832 = defunc_1_op_res_124788;
        }
    }
    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124829.mem)[flat_tid_117106] =
        local_acc_124832;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131047_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131047_end -
                 futhark_mc_segred_stage_1_parloop_131047_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131047_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131047_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131047_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131044(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117106 = tid;
    int num_tasks_124828 = info.nsubtasks;
    struct futhark_mc_task_131043 *futhark_mc_task_131043 =
                                  (struct futhark_mc_task_131043 *) args;
    struct futhark_context *ctx = futhark_mc_task_131043->ctx;
    uint64_t futhark_mc_segred_task_131044_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131044_start = get_wall_time();
    
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_task_131043->free_mem_121997,
                                  .size =0, .references =NULL};
    int64_t defunc_0_g_res_124504 =
            futhark_mc_task_131043->free_defunc_0_g_res_124504;
    int64_t max_res_124525 = futhark_mc_task_131043->free_max_res_124525;
    int64_t defunc_2_reduce_res_124538 =
            *futhark_mc_task_131043->retval_defunc_2_reduce_res_124538;
    size_t reduce_stage_1_tid_res_arr_mem_124829_cached_sizze_131045 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124829 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124829_cached_sizze_131045 <
        (size_t) ((int64_t) 8 * num_tasks_124828)) {
        reduce_stage_1_tid_res_arr_mem_124829 =
            realloc(reduce_stage_1_tid_res_arr_mem_124829, (int64_t) 8 *
                    num_tasks_124828);
        reduce_stage_1_tid_res_arr_mem_124829_cached_sizze_131045 =
            (int64_t) 8 * num_tasks_124828;
    }
    
    int64_t iter_124831;
    struct futhark_mc_segred_stage_1_parloop_struct_131046
    futhark_mc_segred_stage_1_parloop_struct_131046;
    
    futhark_mc_segred_stage_1_parloop_struct_131046.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131046.free_mem_121997 =
        mem_121997.mem;
    futhark_mc_segred_stage_1_parloop_struct_131046.free_defunc_0_g_res_124504 =
        defunc_0_g_res_124504;
    futhark_mc_segred_stage_1_parloop_struct_131046.free_max_res_124525 =
        max_res_124525;
    futhark_mc_segred_stage_1_parloop_struct_131046.free_reduce_stage_1_tid_res_arr_mem_124829 =
        reduce_stage_1_tid_res_arr_mem_124829;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131047_task;
    
    futhark_mc_segred_stage_1_parloop_131047_task.name =
        "futhark_mc_segred_stage_1_parloop_131047";
    futhark_mc_segred_stage_1_parloop_131047_task.fn =
        futhark_mc_segred_stage_1_parloop_131047;
    futhark_mc_segred_stage_1_parloop_131047_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131046;
    futhark_mc_segred_stage_1_parloop_131047_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131047_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131047_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131047_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131047_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131047_task);
    
    if (futhark_mc_segred_stage_1_parloop_131047_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131047_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131047_total_end -
                 futhark_mc_segred_stage_1_parloop_131047_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131047_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131047_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131047_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124538 = (int64_t) 0;
    }
    
    int64_t x_124833;
    int64_t x_124834;
    
    for (int32_t i_124836 = 0; i_124836 < num_tasks_124828; i_124836++) {
        flat_tid_117106 = i_124836;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124833 = defunc_2_reduce_res_124538;
            }
            // load next params
            {
                x_124834 =
                    ((int64_t *) reduce_stage_1_tid_res_arr_mem_124829)[flat_tid_117106];
            }
            // red body
            {
                int64_t defunc_1_op_res_124835 = add64(x_124833, x_124834);
                
                defunc_2_reduce_res_124538 = defunc_1_op_res_124835;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124829);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131044_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131044_end -
                 futhark_mc_segred_task_131044_start;
        
        ctx->futhark_mc_segred_task_131044_runs[tid]++;
        ctx->futhark_mc_segred_task_131044_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131044_iter[tid] += iterations;
    }
    *futhark_mc_task_131043->retval_defunc_2_reduce_res_124538 =
        defunc_2_reduce_res_124538;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131042(void *args, int64_t start,
                                            int64_t end, int flat_tid_117104,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131041
    *futhark_mc_segmap_parloop_struct_131041 =
    (struct futhark_mc_segmap_parloop_struct_131041 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131041->ctx;
    uint64_t futhark_mc_segmap_parloop_131042_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131042_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131041->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131041->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131041->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131041->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131041->free_x_114540;
    int64_t min_res_114737 =
            futhark_mc_segmap_parloop_struct_131041->free_min_res_114737;
    bool empty_slice_114742 =
         futhark_mc_segmap_parloop_struct_131041->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_segmap_parloop_struct_131041->free_m_114743;
    int64_t gtid_117099 =
            futhark_mc_segmap_parloop_struct_131041->free_gtid_117099;
    int64_t x_117208 = futhark_mc_segmap_parloop_struct_131041->free_x_117208;
    int64_t min_arg_117215 =
            futhark_mc_segmap_parloop_struct_131041->free_min_arg_117215;
    float max_res_117219 =
          futhark_mc_segmap_parloop_struct_131041->free_max_res_117219;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131041->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_segmap_parloop_struct_131041->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_segmap_parloop_struct_131041->free_mem_121997,
                                  .size =0, .references =NULL};
    struct memblock mem_122000 = {.desc ="mem_122000", .mem =
                                  futhark_mc_segmap_parloop_struct_131041->free_mem_122000,
                                  .size =0, .references =NULL};
    struct memblock mem_122003 = {.desc ="mem_122003", .mem =
                                  futhark_mc_segmap_parloop_struct_131041->free_mem_122003,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124769 = start;
    
    for (; iter_124769 < end; iter_124769++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124823 = t_n_m_114520;
        int64_t gtid_117105 = iter_124769;
        int64_t remnant_124824 = iter_124769 - gtid_117105;
        int64_t min_arg_124502 = mul64(t_jump_114470, gtid_117105);
        int64_t min_res_124503 = smin64(i_114539, min_arg_124502);
        int64_t defunc_0_g_res_124504 = add64((int64_t) 1, min_res_124503);
        bool nearest_idx_124505;
        int64_t nearest_idx_124506;
        int64_t nearest_idx_124507;
        bool loop_while_124770;
        int64_t low_124771;
        int64_t high_124772;
        
        loop_while_124770 = x_114540;
        low_124771 = (int64_t) 0;
        high_124772 = i_114539;
        while (loop_while_124770) {
            int64_t x_124773 = add64(low_124771, high_124772);
            int64_t mid_124774 = sdiv64(x_124773, (int64_t) 2);
            bool x_124775 = sle64((int64_t) 0, mid_124774);
            bool y_124776 = slt64(mid_124774, n_114463);
            bool bounds_check_124777 = x_124775 && y_124776;
            bool index_certs_124778;
            
            if (!bounds_check_124777) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_124774,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  loess.fut:356:19-30\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_124779 = ((int64_t *) mem_121994.mem)[mid_124774];
            bool cond_124780 = sle64(defunc_0_g_res_124504, x_124779);
            int64_t loopres_124781;
            int64_t loopres_124782;
            
            if (cond_124780) {
                int64_t loopres_t_res_124783 = sub64(mid_124774, (int64_t) 1);
                
                loopres_124781 = low_124771;
                loopres_124782 = loopres_t_res_124783;
            } else {
                int64_t loopres_f_res_124784 = add64((int64_t) 1, mid_124774);
                
                loopres_124781 = loopres_f_res_124784;
                loopres_124782 = high_124772;
            }
            
            bool loop_cond_124785 = sle64(loopres_124781, loopres_124782);
            bool loop_while_tmp_124825 = loop_cond_124785;
            int64_t low_tmp_124826 = loopres_124781;
            int64_t high_tmp_124827 = loopres_124782;
            
            loop_while_124770 = loop_while_tmp_124825;
            low_124771 = low_tmp_124826;
            high_124772 = high_tmp_124827;
        }
        nearest_idx_124505 = loop_while_124770;
        nearest_idx_124506 = low_124771;
        nearest_idx_124507 = high_124772;
        
        int64_t max_arg_124524 = sub64(nearest_idx_124506, min_res_114737);
        int64_t max_res_124525 = smax64((int64_t) 0, max_arg_124524);
        int64_t j_124526 = add64(min_res_114737, max_res_124525);
        int64_t i_p_m_t_s_124527 = add64(m_114743, max_res_124525);
        bool zzero_leq_i_p_m_t_s_124528 = sle64((int64_t) 0, i_p_m_t_s_124527);
        bool i_p_m_t_s_leq_w_124529 = slt64(i_p_m_t_s_124527, n_114463);
        bool zzero_lte_i_124530 = sle64((int64_t) 0, max_res_124525);
        bool i_lte_j_124531 = sle64(max_res_124525, j_124526);
        bool y_124532 = i_p_m_t_s_leq_w_124529 && zzero_lte_i_124530;
        bool y_124533 = zzero_leq_i_p_m_t_s_124528 && y_124532;
        bool y_124534 = i_lte_j_124531 && y_124533;
        bool forwards_ok_124535 = zzero_lte_i_124530 && y_124534;
        bool ok_or_empty_124536 = empty_slice_114742 || forwards_ok_124535;
        bool index_certs_124537;
        
        if (!ok_or_empty_124536) {
            ctx->error =
                msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                          "Index [", (long long) max_res_124525, ":",
                          (long long) j_124526,
                          "] out of bounds for array of shape [",
                          (long long) n_114463, "].",
                          "-> #0  loess.fut:363:25-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t defunc_2_reduce_res_124538;
        int64_t flat_tid_117106 = (int64_t) 0;
        int32_t num_tasks_124828;
        struct futhark_mc_task_131043 futhark_mc_task_131043;
        
        futhark_mc_task_131043.ctx = ctx;
        futhark_mc_task_131043.free_mem_121997 = mem_121997.mem;
        futhark_mc_task_131043.free_defunc_0_g_res_124504 =
            defunc_0_g_res_124504;
        futhark_mc_task_131043.free_max_res_124525 = max_res_124525;
        futhark_mc_task_131043.retval_defunc_2_reduce_res_124538 =
            &defunc_2_reduce_res_124538;
        
        struct scheduler_segop futhark_mc_task_131043_task;
        
        futhark_mc_task_131043_task.args = &futhark_mc_task_131043;
        futhark_mc_task_131043_task.top_level_fn =
            futhark_mc_segred_task_131044;
        futhark_mc_task_131043_task.name = "futhark_mc_segred_task_131044";
        futhark_mc_task_131043_task.iterations = min_res_114737;
        futhark_mc_task_131043_task.task_time =
            &ctx->futhark_mc_segred_task_131044_total_time;
        futhark_mc_task_131043_task.task_iter =
            &ctx->futhark_mc_segred_task_131044_total_iter;
        futhark_mc_task_131043_task.sched = STATIC;
        futhark_mc_task_131043_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131044_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131043_task);
        
        if (futhark_mc_segred_task_131044_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t idx_124546;
        int64_t idx_124547;
        int64_t idx_124548;
        int64_t idx_124549;
        int64_t best_idx_124794;
        int64_t last_idx_124795;
        int64_t best_sum_124796;
        int64_t curr_sum_124797;
        
        best_idx_124794 = max_res_124525;
        last_idx_124795 = max_res_124525;
        best_sum_124796 = defunc_2_reduce_res_124538;
        curr_sum_124797 = defunc_2_reduce_res_124538;
        for (int64_t j_124793 = 0; j_124793 < min_res_114737; j_124793++) {
            int64_t new_idx_124798 = add64(max_res_124525, j_124793);
            int64_t x_124799 = add64(min_res_114737, new_idx_124798);
            bool cond_124800 = slt64(x_117208, x_124799);
            int64_t new_sum_124801;
            
            if (cond_124800) {
                new_sum_124801 = (int64_t) 9223372036854775807;
            } else {
                bool x_124802 = sle64((int64_t) 0, last_idx_124795);
                bool y_124803 = slt64(last_idx_124795, n_114463);
                bool bounds_check_124804 = x_124802 && y_124803;
                bool index_certs_124805;
                
                if (!bounds_check_124804) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) last_idx_124795,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:377:40-55\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124806 =
                        ((int64_t *) mem_121997.mem)[last_idx_124795];
                int64_t binop_p_124807 = sub64(defunc_0_g_res_124504, y_124806);
                int64_t defunc_0_f_res_124808 = abs64(binop_p_124807);
                int64_t x_124809 = sub64(curr_sum_124797,
                                         defunc_0_f_res_124808);
                int64_t min_arg_124810 = add64(min_res_114737, last_idx_124795);
                int64_t min_res_124811 = smin64(i_114539, min_arg_124810);
                bool x_124812 = sle64((int64_t) 0, min_res_124811);
                bool y_124813 = slt64(min_res_124811, n_114463);
                bool bounds_check_124814 = x_124812 && y_124813;
                bool index_certs_124815;
                
                if (!bounds_check_124814) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_124811,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  loess.fut:379:40-77\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:348:3-389:7\n   #4  loess.fut:424:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t y_124816 = ((int64_t *) mem_121997.mem)[min_res_124811];
                int64_t binop_p_124817 = sub64(defunc_0_g_res_124504, y_124816);
                int64_t defunc_0_f_res_124818 = abs64(binop_p_124817);
                int64_t new_sum_f_res_124819 = add64(x_124809,
                                                     defunc_0_f_res_124818);
                
                new_sum_124801 = new_sum_f_res_124819;
            }
            
            bool cond_124820 = sle64(new_sum_124801, best_sum_124796);
            int64_t loopres_124821;
            
            if (cond_124820) {
                loopres_124821 = new_idx_124798;
            } else {
                loopres_124821 = best_idx_124794;
            }
            
            int64_t loopres_124822;
            
            if (cond_124820) {
                loopres_124822 = new_sum_124801;
            } else {
                loopres_124822 = best_sum_124796;
            }
            
            int64_t best_idx_tmp_124837 = loopres_124821;
            int64_t last_idx_tmp_124838 = new_idx_124798;
            int64_t best_sum_tmp_124839 = loopres_124822;
            int64_t curr_sum_tmp_124840 = new_sum_124801;
            
            best_idx_124794 = best_idx_tmp_124837;
            last_idx_124795 = last_idx_tmp_124838;
            best_sum_124796 = best_sum_tmp_124839;
            curr_sum_124797 = curr_sum_tmp_124840;
        }
        idx_124546 = best_idx_124794;
        idx_124547 = last_idx_124795;
        idx_124548 = best_sum_124796;
        idx_124549 = curr_sum_124797;
        
        int64_t min_res_124580 = smin64(min_arg_117215, idx_124546);
        int64_t x_124581 = add64(min_res_114737, min_res_124580);
        int64_t r_124582 = sub64(x_124581, (int64_t) 1);
        bool x_124583 = sle64((int64_t) 0, r_124582);
        bool y_124584 = slt64(r_124582, n_114463);
        bool bounds_check_124585 = x_124583 && y_124584;
        bool index_certs_124586;
        
        if (!bounds_check_124585) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_124582,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:406:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124587 = ((int64_t *) mem_121842.mem)[gtid_117099 * n_114463 +
                                                        r_124582];
        int64_t abs_arg_124588 = sub64(x_124587, min_res_124503);
        int64_t abs_res_124589 = abs64(abs_arg_124588);
        bool x_124590 = sle64((int64_t) 0, min_res_124580);
        bool y_124591 = slt64(min_res_124580, n_114463);
        bool bounds_check_124592 = x_124590 && y_124591;
        bool index_certs_124593;
        
        if (!bounds_check_124592) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_124580,
                                   "] out of bounds for array of shape [",
                                   (long long) n_114463, "].",
                                   "-> #0  loess.fut:405:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:402:3-409:25\n   #4  loess.fut:425:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_124594 = ((int64_t *) mem_121842.mem)[gtid_117099 * n_114463 +
                                                        min_res_124580];
        int64_t abs_arg_124595 = sub64(x_124594, min_res_124503);
        int64_t abs_res_124596 = abs64(abs_arg_124595);
        int64_t max_res_124597 = smax64(abs_res_124589, abs_res_124596);
        float defunc_0_f_res_124598 = sitofp_i64_f32(max_res_124597);
        float defunc_1_f_res_124599 = max_res_117219 + defunc_0_f_res_124598;
        
        ((float *) mem_122000.mem)[gtid_117105] = defunc_1_f_res_124599;
        ((int64_t *) mem_122003.mem)[gtid_117105] = min_res_124580;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131042_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131042_end -
                 futhark_mc_segmap_parloop_131042_start;
        
        ctx->futhark_mc_segmap_parloop_131042_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131042_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131042_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131040(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117104 = tid;
    int num_tasks_124704 = info.nsubtasks;
    struct futhark_mc_task_131036 *futhark_mc_task_131036 =
                                  (struct futhark_mc_task_131036 *) args;
    struct futhark_context *ctx = futhark_mc_task_131036->ctx;
    uint64_t futhark_mc_segmap_nested_task_131040_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131040_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131036->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131036->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131036->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131036->free_i_114539;
    bool x_114540 = futhark_mc_task_131036->free_x_114540;
    int64_t min_res_114737 = futhark_mc_task_131036->free_min_res_114737;
    bool empty_slice_114742 = futhark_mc_task_131036->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_task_131036->free_m_114743;
    int64_t gtid_117099 = futhark_mc_task_131036->free_gtid_117099;
    int64_t x_117208 = futhark_mc_task_131036->free_x_117208;
    int64_t min_arg_117215 = futhark_mc_task_131036->free_min_arg_117215;
    float max_res_117219 = futhark_mc_task_131036->free_max_res_117219;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131036->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121994 = {.desc ="mem_121994", .mem =
                                  futhark_mc_task_131036->free_mem_121994,
                                  .size =0, .references =NULL};
    struct memblock mem_121997 = {.desc ="mem_121997", .mem =
                                  futhark_mc_task_131036->free_mem_121997,
                                  .size =0, .references =NULL};
    struct memblock mem_122000 = {.desc ="mem_122000", .mem =
                                  futhark_mc_task_131036->free_mem_122000,
                                  .size =0, .references =NULL};
    struct memblock mem_122003 = {.desc ="mem_122003", .mem =
                                  futhark_mc_task_131036->free_mem_122003,
                                  .size =0, .references =NULL};
    int64_t iter_124769;
    struct futhark_mc_segmap_parloop_struct_131041
    futhark_mc_segmap_parloop_struct_131041;
    
    futhark_mc_segmap_parloop_struct_131041.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131041.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131041.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131041.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131041.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131041.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131041.free_min_res_114737 =
        min_res_114737;
    futhark_mc_segmap_parloop_struct_131041.free_empty_slice_114742 =
        empty_slice_114742;
    futhark_mc_segmap_parloop_struct_131041.free_m_114743 = m_114743;
    futhark_mc_segmap_parloop_struct_131041.free_gtid_117099 = gtid_117099;
    futhark_mc_segmap_parloop_struct_131041.free_x_117208 = x_117208;
    futhark_mc_segmap_parloop_struct_131041.free_min_arg_117215 =
        min_arg_117215;
    futhark_mc_segmap_parloop_struct_131041.free_max_res_117219 =
        max_res_117219;
    futhark_mc_segmap_parloop_struct_131041.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131041.free_mem_121994 = mem_121994.mem;
    futhark_mc_segmap_parloop_struct_131041.free_mem_121997 = mem_121997.mem;
    futhark_mc_segmap_parloop_struct_131041.free_mem_122000 = mem_122000.mem;
    futhark_mc_segmap_parloop_struct_131041.free_mem_122003 = mem_122003.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131042_task;
    
    futhark_mc_segmap_parloop_131042_task.name =
        "futhark_mc_segmap_parloop_131042";
    futhark_mc_segmap_parloop_131042_task.fn = futhark_mc_segmap_parloop_131042;
    futhark_mc_segmap_parloop_131042_task.args =
        &futhark_mc_segmap_parloop_struct_131041;
    futhark_mc_segmap_parloop_131042_task.iterations = iterations;
    futhark_mc_segmap_parloop_131042_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131042_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131042_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131042_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131042_task);
    
    if (futhark_mc_segmap_parloop_131042_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131042_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131042_total_end -
                 futhark_mc_segmap_parloop_131042_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131042_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131042_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131042_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131040_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131040_end -
                 futhark_mc_segmap_nested_task_131040_start;
        
        ctx->futhark_mc_segmap_nested_task_131040_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131040_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131040_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131027(void *args, int64_t start,
                                            int64_t end, int flat_tid_117098,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131026
    *futhark_mc_segmap_parloop_struct_131026 =
    (struct futhark_mc_segmap_parloop_struct_131026 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131026->ctx;
    uint64_t futhark_mc_segmap_parloop_131027_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131027_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131026->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131026->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131026->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131026->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131026->free_i_114539;
    bool x_114540 = futhark_mc_segmap_parloop_struct_131026->free_x_114540;
    int64_t min_res_114737 =
            futhark_mc_segmap_parloop_struct_131026->free_min_res_114737;
    bool empty_slice_114742 =
         futhark_mc_segmap_parloop_struct_131026->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_segmap_parloop_struct_131026->free_m_114743;
    float i64_res_114744 =
          futhark_mc_segmap_parloop_struct_131026->free_i64_res_114744;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_131026->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131026->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131026->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131026->free_bytes_121998;
    int64_t bytes_122001 =
            futhark_mc_segmap_parloop_struct_131026->free_bytes_122001;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131026->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131026->free_mem_122071,
                                  .size =0, .references =NULL};
    size_t mem_121994_cached_sizze_131028 = 0;
    char *mem_121994 = NULL;
    size_t mem_121997_cached_sizze_131029 = 0;
    char *mem_121997 = NULL;
    size_t mem_122000_cached_sizze_131030 = 0;
    char *mem_122000 = NULL;
    size_t mem_122003_cached_sizze_131031 = 0;
    char *mem_122003 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124497 = start;
    
    if (mem_121994_cached_sizze_131028 < (size_t) bytes_121803) {
        mem_121994 = realloc(mem_121994, bytes_121803);
        mem_121994_cached_sizze_131028 = bytes_121803;
    }
    if (mem_121997_cached_sizze_131029 < (size_t) bytes_121803) {
        mem_121997 = realloc(mem_121997, bytes_121803);
        mem_121997_cached_sizze_131029 = bytes_121803;
    }
    if (mem_122000_cached_sizze_131030 < (size_t) bytes_121998) {
        mem_122000 = realloc(mem_122000, bytes_121998);
        mem_122000_cached_sizze_131030 = bytes_121998;
    }
    if (mem_122003_cached_sizze_131031 < (size_t) bytes_122001) {
        mem_122003 = realloc(mem_122003, bytes_122001);
        mem_122003_cached_sizze_131031 = bytes_122001;
    }
    for (; iter_124497 < end; iter_124497++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124698 = m_114462;
        int64_t gtid_117099 = iter_124497;
        int64_t remnant_124699 = iter_124497 - gtid_117099;
        int64_t x_117208 = ((int64_t *) mem_121845.mem)[gtid_117099];
        int64_t flat_tid_117100 = (int64_t) 0;
        int32_t num_tasks_124700;
        struct futhark_mc_task_131032 futhark_mc_task_131032;
        
        futhark_mc_task_131032.ctx = ctx;
        futhark_mc_task_131032.free_n_114463 = n_114463;
        futhark_mc_task_131032.free_gtid_117099 = gtid_117099;
        futhark_mc_task_131032.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131032.free_mem_121994 = mem_121994;
        futhark_mc_task_131032.free_mem_121997 = mem_121997;
        
        struct scheduler_segop futhark_mc_task_131032_task;
        
        futhark_mc_task_131032_task.args = &futhark_mc_task_131032;
        futhark_mc_task_131032_task.top_level_fn =
            futhark_mc_segmap_task_131033;
        futhark_mc_task_131032_task.name = "futhark_mc_segmap_task_131033";
        futhark_mc_task_131032_task.iterations = n_114463;
        futhark_mc_task_131032_task.task_time =
            &ctx->futhark_mc_segmap_task_131033_total_time;
        futhark_mc_task_131032_task.task_iter =
            &ctx->futhark_mc_segmap_task_131033_total_iter;
        futhark_mc_task_131032_task.sched = STATIC;
        futhark_mc_task_131032_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131033_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131032_task);
        
        if (futhark_mc_segmap_task_131033_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_117215 = sub64(x_117208, min_res_114737);
        float i64_res_117216 = sitofp_i64_f32(x_117208);
        float x_117217 = i64_res_114744 - i64_res_117216;
        float max_arg_117218 = x_117217 / 2.0F;
        float max_res_117219 = fmax32(0.0F, max_arg_117218);
        int64_t flat_tid_117102 = (int64_t) 0;
        int32_t num_tasks_124704;
        int64_t flat_tid_117104 = (int64_t) 0;
        struct futhark_mc_task_131036 futhark_mc_task_131036;
        
        futhark_mc_task_131036.ctx = ctx;
        futhark_mc_task_131036.free_n_114463 = n_114463;
        futhark_mc_task_131036.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131036.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131036.free_i_114539 = i_114539;
        futhark_mc_task_131036.free_x_114540 = x_114540;
        futhark_mc_task_131036.free_min_res_114737 = min_res_114737;
        futhark_mc_task_131036.free_empty_slice_114742 = empty_slice_114742;
        futhark_mc_task_131036.free_m_114743 = m_114743;
        futhark_mc_task_131036.free_gtid_117099 = gtid_117099;
        futhark_mc_task_131036.free_x_117208 = x_117208;
        futhark_mc_task_131036.free_min_arg_117215 = min_arg_117215;
        futhark_mc_task_131036.free_max_res_117219 = max_res_117219;
        futhark_mc_task_131036.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131036.free_mem_121994 = mem_121994;
        futhark_mc_task_131036.free_mem_121997 = mem_121997;
        futhark_mc_task_131036.free_mem_122000 = mem_122000;
        futhark_mc_task_131036.free_mem_122003 = mem_122003;
        
        struct scheduler_segop futhark_mc_task_131036_task;
        
        futhark_mc_task_131036_task.args = &futhark_mc_task_131036;
        futhark_mc_task_131036_task.top_level_fn =
            futhark_mc_segmap_task_131037;
        futhark_mc_task_131036_task.name = "futhark_mc_segmap_task_131037";
        futhark_mc_task_131036_task.iterations = t_n_m_114520;
        futhark_mc_task_131036_task.task_time =
            &ctx->futhark_mc_segmap_task_131037_total_time;
        futhark_mc_task_131036_task.task_iter =
            &ctx->futhark_mc_segmap_task_131037_total_iter;
        futhark_mc_task_131036_task.sched = DYNAMIC;
        futhark_mc_task_131036_task.nested_fn =
            futhark_mc_segmap_nested_task_131040;
        
        int futhark_mc_segmap_task_131037_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131036_task);
        
        if (futhark_mc_segmap_task_131037_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122067.mem + gtid_117099 * t_n_m_114520 * (int64_t) 8,
                mem_122003 + (int64_t) 0, t_n_m_114520 * (int64_t) 8);
        memmove(mem_122071.mem + gtid_117099 * t_n_m_114520 * (int64_t) 4,
                mem_122000 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121994);
    free(mem_121997);
    free(mem_122000);
    free(mem_122003);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131027_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131027_end -
                 futhark_mc_segmap_parloop_131027_start;
        
        ctx->futhark_mc_segmap_parloop_131027_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131027_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131027_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131025(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117098 = tid;
    int num_tasks_124369 = info.nsubtasks;
    struct futhark_mc_task_131017 *futhark_mc_task_131017 =
                                  (struct futhark_mc_task_131017 *) args;
    struct futhark_context *ctx = futhark_mc_task_131017->ctx;
    uint64_t futhark_mc_segmap_nested_task_131025_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131025_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131017->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131017->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131017->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131017->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131017->free_i_114539;
    bool x_114540 = futhark_mc_task_131017->free_x_114540;
    int64_t min_res_114737 = futhark_mc_task_131017->free_min_res_114737;
    bool empty_slice_114742 = futhark_mc_task_131017->free_empty_slice_114742;
    int64_t m_114743 = futhark_mc_task_131017->free_m_114743;
    float i64_res_114744 = futhark_mc_task_131017->free_i64_res_114744;
    int64_t bytes_121803 = futhark_mc_task_131017->free_bytes_121803;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131017->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131017->free_mem_121845,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131017->free_bytes_121998;
    int64_t bytes_122001 = futhark_mc_task_131017->free_bytes_122001;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131017->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131017->free_mem_122071,
                                  .size =0, .references =NULL};
    int64_t iter_124497;
    struct futhark_mc_segmap_parloop_struct_131026
    futhark_mc_segmap_parloop_struct_131026;
    
    futhark_mc_segmap_parloop_struct_131026.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131026.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131026.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131026.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131026.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131026.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131026.free_x_114540 = x_114540;
    futhark_mc_segmap_parloop_struct_131026.free_min_res_114737 =
        min_res_114737;
    futhark_mc_segmap_parloop_struct_131026.free_empty_slice_114742 =
        empty_slice_114742;
    futhark_mc_segmap_parloop_struct_131026.free_m_114743 = m_114743;
    futhark_mc_segmap_parloop_struct_131026.free_i64_res_114744 =
        i64_res_114744;
    futhark_mc_segmap_parloop_struct_131026.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_131026.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131026.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131026.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131026.free_bytes_122001 = bytes_122001;
    futhark_mc_segmap_parloop_struct_131026.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131026.free_mem_122071 = mem_122071.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131027_task;
    
    futhark_mc_segmap_parloop_131027_task.name =
        "futhark_mc_segmap_parloop_131027";
    futhark_mc_segmap_parloop_131027_task.fn = futhark_mc_segmap_parloop_131027;
    futhark_mc_segmap_parloop_131027_task.args =
        &futhark_mc_segmap_parloop_struct_131026;
    futhark_mc_segmap_parloop_131027_task.iterations = iterations;
    futhark_mc_segmap_parloop_131027_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131027_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131027_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131027_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131027_task);
    
    if (futhark_mc_segmap_parloop_131027_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131027_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131027_total_end -
                 futhark_mc_segmap_parloop_131027_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131027_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131027_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131027_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131025_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131025_end -
                 futhark_mc_segmap_nested_task_131025_start;
        
        ctx->futhark_mc_segmap_nested_task_131025_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131025_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131025_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131048 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122121;
    char *free_mem_param_122125;
    char *free_mem_122147;
};
struct futhark_mc_segmap_parloop_struct_131050 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122121;
    char *free_mem_param_122125;
    char *free_mem_122147;
};
static int futhark_mc_segmap_parloop_131051(void *args, int64_t start,
                                            int64_t end, int flat_tid_117420,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131050
    *futhark_mc_segmap_parloop_struct_131050 =
    (struct futhark_mc_segmap_parloop_struct_131050 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131050->ctx;
    uint64_t futhark_mc_segmap_parloop_131051_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131051_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131050->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131050->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131050->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131050->free_bytes_121846;
    int64_t ctx_param_ext_122121 =
            futhark_mc_segmap_parloop_struct_131050->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_segmap_parloop_struct_131050->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131050->free_mem_122147,
                                  .size =0, .references =NULL};
    size_t mem_122131_cached_sizze_131052 = 0;
    char *mem_122131 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124867 = start;
    
    if (mem_122131_cached_sizze_131052 < (size_t) bytes_121846) {
        mem_122131 = realloc(mem_122131, bytes_121846);
        mem_122131_cached_sizze_131052 = bytes_121846;
    }
    for (; iter_124867 < end; iter_124867++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124874 = m_114462;
        int64_t gtid_117421 = iter_124867;
        int64_t remnant_124875 = iter_124867 - gtid_117421;
        
        for (int64_t i_124868 = 0; i_124868 < n_114463; i_124868++) {
            float x_124870 = ((float *) Y_mem_121802.mem)[gtid_117421 *
                                                          n_114463 + i_124868];
            float x_124871 = ((float *) mem_param_122125.mem)[gtid_117421 *
                                                              ctx_param_ext_122121 +
                                                              i_124868];
            float defunc_1_f_res_124872 = x_124870 - x_124871;
            
            ((float *) mem_122131)[i_124868] = defunc_1_f_res_124872;
        }
        memmove(mem_122147.mem + gtid_117421 * n_114463 * (int64_t) 4,
                mem_122131 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122131);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131051_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131051_end -
                 futhark_mc_segmap_parloop_131051_start;
        
        ctx->futhark_mc_segmap_parloop_131051_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131051_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131051_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131049(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117420 = tid;
    int num_tasks_124866 = info.nsubtasks;
    struct futhark_mc_task_131048 *futhark_mc_task_131048 =
                                  (struct futhark_mc_task_131048 *) args;
    struct futhark_context *ctx = futhark_mc_task_131048->ctx;
    uint64_t futhark_mc_segmap_task_131049_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131049_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131048->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131048->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131048->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131048->free_bytes_121846;
    int64_t ctx_param_ext_122121 =
            futhark_mc_task_131048->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_task_131048->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131048->free_mem_122147,
                                  .size =0, .references =NULL};
    int64_t iter_124867;
    struct futhark_mc_segmap_parloop_struct_131050
    futhark_mc_segmap_parloop_struct_131050;
    
    futhark_mc_segmap_parloop_struct_131050.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131050.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131050.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131050.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131050.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131050.free_ctx_param_ext_122121 =
        ctx_param_ext_122121;
    futhark_mc_segmap_parloop_struct_131050.free_mem_param_122125 =
        mem_param_122125.mem;
    futhark_mc_segmap_parloop_struct_131050.free_mem_122147 = mem_122147.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131051_task;
    
    futhark_mc_segmap_parloop_131051_task.name =
        "futhark_mc_segmap_parloop_131051";
    futhark_mc_segmap_parloop_131051_task.fn = futhark_mc_segmap_parloop_131051;
    futhark_mc_segmap_parloop_131051_task.args =
        &futhark_mc_segmap_parloop_struct_131050;
    futhark_mc_segmap_parloop_131051_task.iterations = iterations;
    futhark_mc_segmap_parloop_131051_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131051_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131051_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131051_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131051_task);
    
    if (futhark_mc_segmap_parloop_131051_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131051_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131051_total_end -
                 futhark_mc_segmap_parloop_131051_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131051_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131051_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131051_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131049_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131049_end -
                 futhark_mc_segmap_task_131049_start;
        
        ctx->futhark_mc_segmap_task_131049_runs[tid]++;
        ctx->futhark_mc_segmap_task_131049_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131049_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131054 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122121;
    char *free_mem_param_122125;
    char *free_mem_122147;
};
struct futhark_mc_task_131057 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117423;
    char *free_Y_mem_121802;
    int64_t free_ctx_param_ext_122121;
    char *free_mem_param_122125;
    char *free_mem_122128;
};
struct futhark_mc_segmap_parloop_struct_131059 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117423;
    char *free_Y_mem_121802;
    int64_t free_ctx_param_ext_122121;
    char *free_mem_param_122125;
    char *free_mem_122128;
};
static int futhark_mc_segmap_parloop_131060(void *args, int64_t start,
                                            int64_t end, int flat_tid_117424,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131059
    *futhark_mc_segmap_parloop_struct_131059 =
    (struct futhark_mc_segmap_parloop_struct_131059 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131059->ctx;
    uint64_t futhark_mc_segmap_parloop_131060_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131060_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131059->free_n_114463;
    int64_t gtid_117423 =
            futhark_mc_segmap_parloop_struct_131059->free_gtid_117423;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131059->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_122121 =
            futhark_mc_segmap_parloop_struct_131059->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_segmap_parloop_struct_131059->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122128 = {.desc ="mem_122128", .mem =
                                  futhark_mc_segmap_parloop_struct_131059->free_mem_122128,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124884 = start;
    
    for (; iter_124884 < end; iter_124884++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124885 = n_114463;
        int64_t gtid_117425 = iter_124884;
        int64_t remnant_124886 = iter_124884 - gtid_117425;
        float x_124878 = ((float *) Y_mem_121802.mem)[gtid_117423 * n_114463 +
                                                      gtid_117425];
        float x_124879 = ((float *) mem_param_122125.mem)[gtid_117423 *
                                                          ctx_param_ext_122121 +
                                                          gtid_117425];
        float defunc_1_f_res_124880 = x_124878 - x_124879;
        
        ((float *) mem_122128.mem)[gtid_117425] = defunc_1_f_res_124880;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131060_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131060_end -
                 futhark_mc_segmap_parloop_131060_start;
        
        ctx->futhark_mc_segmap_parloop_131060_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131060_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131060_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131058(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117424 = tid;
    int num_tasks_124883 = info.nsubtasks;
    struct futhark_mc_task_131057 *futhark_mc_task_131057 =
                                  (struct futhark_mc_task_131057 *) args;
    struct futhark_context *ctx = futhark_mc_task_131057->ctx;
    uint64_t futhark_mc_segmap_task_131058_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131058_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131057->free_n_114463;
    int64_t gtid_117423 = futhark_mc_task_131057->free_gtid_117423;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131057->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_122121 =
            futhark_mc_task_131057->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_task_131057->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122128 = {.desc ="mem_122128", .mem =
                                  futhark_mc_task_131057->free_mem_122128,
                                  .size =0, .references =NULL};
    int64_t iter_124884;
    struct futhark_mc_segmap_parloop_struct_131059
    futhark_mc_segmap_parloop_struct_131059;
    
    futhark_mc_segmap_parloop_struct_131059.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131059.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131059.free_gtid_117423 = gtid_117423;
    futhark_mc_segmap_parloop_struct_131059.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131059.free_ctx_param_ext_122121 =
        ctx_param_ext_122121;
    futhark_mc_segmap_parloop_struct_131059.free_mem_param_122125 =
        mem_param_122125.mem;
    futhark_mc_segmap_parloop_struct_131059.free_mem_122128 = mem_122128.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131060_task;
    
    futhark_mc_segmap_parloop_131060_task.name =
        "futhark_mc_segmap_parloop_131060";
    futhark_mc_segmap_parloop_131060_task.fn = futhark_mc_segmap_parloop_131060;
    futhark_mc_segmap_parloop_131060_task.args =
        &futhark_mc_segmap_parloop_struct_131059;
    futhark_mc_segmap_parloop_131060_task.iterations = iterations;
    futhark_mc_segmap_parloop_131060_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131060_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131060_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131060_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131060_task);
    
    if (futhark_mc_segmap_parloop_131060_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131060_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131060_total_end -
                 futhark_mc_segmap_parloop_131060_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131060_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131060_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131060_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131058_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131058_end -
                 futhark_mc_segmap_task_131058_start;
        
        ctx->futhark_mc_segmap_task_131058_runs[tid]++;
        ctx->futhark_mc_segmap_task_131058_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131058_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131055(void *args, int64_t start,
                                            int64_t end, int flat_tid_117422,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131054
    *futhark_mc_segmap_parloop_struct_131054 =
    (struct futhark_mc_segmap_parloop_struct_131054 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131054->ctx;
    uint64_t futhark_mc_segmap_parloop_131055_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131055_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131054->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131054->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131054->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131054->free_bytes_121846;
    int64_t ctx_param_ext_122121 =
            futhark_mc_segmap_parloop_struct_131054->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_segmap_parloop_struct_131054->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131054->free_mem_122147,
                                  .size =0, .references =NULL};
    size_t mem_122128_cached_sizze_131056 = 0;
    char *mem_122128 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124877 = start;
    
    if (mem_122128_cached_sizze_131056 < (size_t) bytes_121846) {
        mem_122128 = realloc(mem_122128, bytes_121846);
        mem_122128_cached_sizze_131056 = bytes_121846;
    }
    for (; iter_124877 < end; iter_124877++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124881 = m_114462;
        int64_t gtid_117423 = iter_124877;
        int64_t remnant_124882 = iter_124877 - gtid_117423;
        int64_t flat_tid_117424 = (int64_t) 0;
        int32_t num_tasks_124883;
        struct futhark_mc_task_131057 futhark_mc_task_131057;
        
        futhark_mc_task_131057.ctx = ctx;
        futhark_mc_task_131057.free_n_114463 = n_114463;
        futhark_mc_task_131057.free_gtid_117423 = gtid_117423;
        futhark_mc_task_131057.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_131057.free_ctx_param_ext_122121 = ctx_param_ext_122121;
        futhark_mc_task_131057.free_mem_param_122125 = mem_param_122125.mem;
        futhark_mc_task_131057.free_mem_122128 = mem_122128;
        
        struct scheduler_segop futhark_mc_task_131057_task;
        
        futhark_mc_task_131057_task.args = &futhark_mc_task_131057;
        futhark_mc_task_131057_task.top_level_fn =
            futhark_mc_segmap_task_131058;
        futhark_mc_task_131057_task.name = "futhark_mc_segmap_task_131058";
        futhark_mc_task_131057_task.iterations = n_114463;
        futhark_mc_task_131057_task.task_time =
            &ctx->futhark_mc_segmap_task_131058_total_time;
        futhark_mc_task_131057_task.task_iter =
            &ctx->futhark_mc_segmap_task_131058_total_iter;
        futhark_mc_task_131057_task.sched = STATIC;
        futhark_mc_task_131057_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131058_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131057_task);
        
        if (futhark_mc_segmap_task_131058_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122147.mem + gtid_117423 * n_114463 * (int64_t) 4,
                mem_122128 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122128);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131055_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131055_end -
                 futhark_mc_segmap_parloop_131055_start;
        
        ctx->futhark_mc_segmap_parloop_131055_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131055_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131055_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131053(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117422 = tid;
    int num_tasks_124866 = info.nsubtasks;
    struct futhark_mc_task_131048 *futhark_mc_task_131048 =
                                  (struct futhark_mc_task_131048 *) args;
    struct futhark_context *ctx = futhark_mc_task_131048->ctx;
    uint64_t futhark_mc_segmap_nested_task_131053_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131053_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131048->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131048->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131048->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131048->free_bytes_121846;
    int64_t ctx_param_ext_122121 =
            futhark_mc_task_131048->free_ctx_param_ext_122121;
    struct memblock mem_param_122125 = {.desc ="mem_param_122125", .mem =
                                        futhark_mc_task_131048->free_mem_param_122125,
                                        .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131048->free_mem_122147,
                                  .size =0, .references =NULL};
    int64_t iter_124877;
    struct futhark_mc_segmap_parloop_struct_131054
    futhark_mc_segmap_parloop_struct_131054;
    
    futhark_mc_segmap_parloop_struct_131054.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131054.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131054.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131054.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131054.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131054.free_ctx_param_ext_122121 =
        ctx_param_ext_122121;
    futhark_mc_segmap_parloop_struct_131054.free_mem_param_122125 =
        mem_param_122125.mem;
    futhark_mc_segmap_parloop_struct_131054.free_mem_122147 = mem_122147.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131055_task;
    
    futhark_mc_segmap_parloop_131055_task.name =
        "futhark_mc_segmap_parloop_131055";
    futhark_mc_segmap_parloop_131055_task.fn = futhark_mc_segmap_parloop_131055;
    futhark_mc_segmap_parloop_131055_task.args =
        &futhark_mc_segmap_parloop_struct_131054;
    futhark_mc_segmap_parloop_131055_task.iterations = iterations;
    futhark_mc_segmap_parloop_131055_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131055_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131055_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131055_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131055_task);
    
    if (futhark_mc_segmap_parloop_131055_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131055_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131055_total_end -
                 futhark_mc_segmap_parloop_131055_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131055_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131055_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131055_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131053_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131053_end -
                 futhark_mc_segmap_nested_task_131053_start;
        
        ctx->futhark_mc_segmap_nested_task_131053_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131053_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131053_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131061 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122169;
};
struct futhark_mc_segmap_parloop_struct_131063 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122169;
};
static int futhark_mc_segmap_parloop_131064(void *args, int64_t start,
                                            int64_t end, int flat_tid_117432,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131063
    *futhark_mc_segmap_parloop_struct_131063 =
    (struct futhark_mc_segmap_parloop_struct_131063 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131063->ctx;
    uint64_t futhark_mc_segmap_parloop_131064_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131064_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131063->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131063->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131063->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_131063->free_css_chunk_len_114509;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_131063->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 =
            futhark_mc_segmap_parloop_struct_131063->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_131063->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131063->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_segmap_parloop_struct_131063->free_mem_122169,
                                  .size =0, .references =NULL};
    size_t mem_122153_cached_sizze_131065 = 0;
    char *mem_122153 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124888 = start;
    
    if (mem_122153_cached_sizze_131065 < (size_t) bytes_121890) {
        mem_122153 = realloc(mem_122153, bytes_121890);
        mem_122153_cached_sizze_131065 = bytes_121890;
    }
    for (; iter_124888 < end; iter_124888++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124907 = m_114462;
        int64_t gtid_117433 = iter_124888;
        int64_t remnant_124908 = iter_124888 - gtid_117433;
        
        for (int64_t i_124889 = 0; i_124889 < n_p_114465; i_124889++) {
            float x_124891 = ((float *) mem_121911.mem)[gtid_117433 *
                                                        n_p_114465 + i_124889];
            float defunc_2_reduce_res_124892;
            float redout_124894 = 0.0F;
            
            for (int64_t i_124893 = 0; i_124893 < css_chunk_len_114509;
                 i_124893++) {
                int64_t x_124895 = ((int64_t *) mem_121889.mem)[i_124889 *
                                                                css_chunk_len_114509 +
                                                                i_124893];
                bool cond_124896 = sle64((int64_t) 0, x_124895);
                float defunc_0_f_res_124897;
                
                if (cond_124896) {
                    bool y_124898 = slt64(x_124895, n_114463);
                    bool bounds_check_124899 = cond_124896 && y_124898;
                    bool index_certs_124900;
                    
                    if (!bounds_check_124899) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_124895,
                                      "] out of bounds for array of shape [",
                                      (long long) n_114463, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_124901 =
                          ((float *) mem_122147.mem)[gtid_117433 * n_114463 +
                                                     x_124895];
                    
                    defunc_0_f_res_124897 = defunc_0_f_res_t_res_124901;
                } else {
                    defunc_0_f_res_124897 = NAN;
                }
                
                bool isnan_res_124902;
                
                isnan_res_124902 = futrts_isnan32(defunc_0_f_res_124897);
                
                float defunc_0_f_res_124903;
                
                if (isnan_res_124902) {
                    defunc_0_f_res_124903 = 0.0F;
                } else {
                    defunc_0_f_res_124903 = defunc_0_f_res_124897;
                }
                
                float defunc_1_op_res_124904 = defunc_0_f_res_124903 +
                      redout_124894;
                float redout_tmp_124910 = defunc_1_op_res_124904;
                
                redout_124894 = redout_tmp_124910;
            }
            defunc_2_reduce_res_124892 = redout_124894;
            
            float defunc_1_f_res_124905 = defunc_2_reduce_res_124892 / x_124891;
            
            ((float *) mem_122153)[i_124889] = defunc_1_f_res_124905;
        }
        memmove(mem_122169.mem + gtid_117433 * n_p_114465 * (int64_t) 4,
                mem_122153 + (int64_t) 0, n_p_114465 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122153);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131064_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131064_end -
                 futhark_mc_segmap_parloop_131064_start;
        
        ctx->futhark_mc_segmap_parloop_131064_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131064_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131064_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131062(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117432 = tid;
    int num_tasks_124887 = info.nsubtasks;
    struct futhark_mc_task_131061 *futhark_mc_task_131061 =
                                  (struct futhark_mc_task_131061 *) args;
    struct futhark_context *ctx = futhark_mc_task_131061->ctx;
    uint64_t futhark_mc_segmap_task_131062_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131062_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131061->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131061->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131061->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_131061->free_css_chunk_len_114509;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_131061->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 = futhark_mc_task_131061->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_131061->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131061->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_task_131061->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t iter_124888;
    struct futhark_mc_segmap_parloop_struct_131063
    futhark_mc_segmap_parloop_struct_131063;
    
    futhark_mc_segmap_parloop_struct_131063.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131063.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131063.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131063.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131063.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_131063.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_131063.free_bytes_121890 = bytes_121890;
    futhark_mc_segmap_parloop_struct_131063.free_mem_121911 = mem_121911.mem;
    futhark_mc_segmap_parloop_struct_131063.free_mem_122147 = mem_122147.mem;
    futhark_mc_segmap_parloop_struct_131063.free_mem_122169 = mem_122169.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131064_task;
    
    futhark_mc_segmap_parloop_131064_task.name =
        "futhark_mc_segmap_parloop_131064";
    futhark_mc_segmap_parloop_131064_task.fn = futhark_mc_segmap_parloop_131064;
    futhark_mc_segmap_parloop_131064_task.args =
        &futhark_mc_segmap_parloop_struct_131063;
    futhark_mc_segmap_parloop_131064_task.iterations = iterations;
    futhark_mc_segmap_parloop_131064_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131064_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131064_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131064_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131064_task);
    
    if (futhark_mc_segmap_parloop_131064_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131064_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131064_total_end -
                 futhark_mc_segmap_parloop_131064_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131064_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131064_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131064_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131062_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131062_end -
                 futhark_mc_segmap_task_131062_start;
        
        ctx->futhark_mc_segmap_task_131062_runs[tid]++;
        ctx->futhark_mc_segmap_task_131062_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131062_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131067 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    char *free_mem_121889;
    int64_t free_bytes_121890;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122169;
};
struct futhark_mc_task_131070 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_117435;
    char *free_mem_121889;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122150;
};
struct futhark_mc_segmap_parloop_struct_131072 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_117435;
    char *free_mem_121889;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122150;
};
static int futhark_mc_segmap_parloop_131073(void *args, int64_t start,
                                            int64_t end, int flat_tid_117436,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131072
    *futhark_mc_segmap_parloop_struct_131072 =
    (struct futhark_mc_segmap_parloop_struct_131072 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131072->ctx;
    uint64_t futhark_mc_segmap_parloop_131073_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131073_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131072->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131072->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_131072->free_css_chunk_len_114509;
    int64_t gtid_117435 =
            futhark_mc_segmap_parloop_struct_131072->free_gtid_117435;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_131072->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_131072->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131072->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122150 = {.desc ="mem_122150", .mem =
                                  futhark_mc_segmap_parloop_struct_131072->free_mem_122150,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124945 = start;
    
    for (; iter_124945 < end; iter_124945++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124958 = n_p_114465;
        int64_t gtid_117437 = iter_124945;
        int64_t remnant_124959 = iter_124945 - gtid_117437;
        float x_124927 = ((float *) mem_121911.mem)[gtid_117435 * n_p_114465 +
                                                    gtid_117437];
        float defunc_2_reduce_res_124928;
        float redout_124947 = 0.0F;
        
        for (int64_t i_124946 = 0; i_124946 < css_chunk_len_114509;
             i_124946++) {
            int64_t x_124948 = ((int64_t *) mem_121889.mem)[gtid_117437 *
                                                            css_chunk_len_114509 +
                                                            i_124946];
            bool cond_124949 = sle64((int64_t) 0, x_124948);
            float defunc_0_f_res_124950;
            
            if (cond_124949) {
                bool y_124951 = slt64(x_124948, n_114463);
                bool bounds_check_124952 = cond_124949 && y_124951;
                bool index_certs_124953;
                
                if (!bounds_check_124952) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_124948,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_124954 =
                      ((float *) mem_122147.mem)[gtid_117435 * n_114463 +
                                                 x_124948];
                
                defunc_0_f_res_124950 = defunc_0_f_res_t_res_124954;
            } else {
                defunc_0_f_res_124950 = NAN;
            }
            
            bool isnan_res_124955;
            
            isnan_res_124955 = futrts_isnan32(defunc_0_f_res_124950);
            
            float defunc_0_f_res_124956;
            
            if (isnan_res_124955) {
                defunc_0_f_res_124956 = 0.0F;
            } else {
                defunc_0_f_res_124956 = defunc_0_f_res_124950;
            }
            
            float defunc_1_op_res_124957 = defunc_0_f_res_124956 +
                  redout_124947;
            float redout_tmp_124960 = defunc_1_op_res_124957;
            
            redout_124947 = redout_tmp_124960;
        }
        defunc_2_reduce_res_124928 = redout_124947;
        
        float defunc_1_f_res_124941 = defunc_2_reduce_res_124928 / x_124927;
        
        ((float *) mem_122150.mem)[gtid_117437] = defunc_1_f_res_124941;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131073_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131073_end -
                 futhark_mc_segmap_parloop_131073_start;
        
        ctx->futhark_mc_segmap_parloop_131073_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131073_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131073_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131071(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117436 = tid;
    int num_tasks_124944 = info.nsubtasks;
    struct futhark_mc_task_131070 *futhark_mc_task_131070 =
                                  (struct futhark_mc_task_131070 *) args;
    struct futhark_context *ctx = futhark_mc_task_131070->ctx;
    uint64_t futhark_mc_segmap_task_131071_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131071_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131070->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131070->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_131070->free_css_chunk_len_114509;
    int64_t gtid_117435 = futhark_mc_task_131070->free_gtid_117435;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_131070->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_131070->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131070->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122150 = {.desc ="mem_122150", .mem =
                                  futhark_mc_task_131070->free_mem_122150,
                                  .size =0, .references =NULL};
    int64_t iter_124945;
    struct futhark_mc_segmap_parloop_struct_131072
    futhark_mc_segmap_parloop_struct_131072;
    
    futhark_mc_segmap_parloop_struct_131072.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131072.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131072.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131072.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_131072.free_gtid_117435 = gtid_117435;
    futhark_mc_segmap_parloop_struct_131072.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_131072.free_mem_121911 = mem_121911.mem;
    futhark_mc_segmap_parloop_struct_131072.free_mem_122147 = mem_122147.mem;
    futhark_mc_segmap_parloop_struct_131072.free_mem_122150 = mem_122150.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131073_task;
    
    futhark_mc_segmap_parloop_131073_task.name =
        "futhark_mc_segmap_parloop_131073";
    futhark_mc_segmap_parloop_131073_task.fn = futhark_mc_segmap_parloop_131073;
    futhark_mc_segmap_parloop_131073_task.args =
        &futhark_mc_segmap_parloop_struct_131072;
    futhark_mc_segmap_parloop_131073_task.iterations = iterations;
    futhark_mc_segmap_parloop_131073_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131073_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131073_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131073_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131073_task);
    
    if (futhark_mc_segmap_parloop_131073_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131073_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131073_total_end -
                 futhark_mc_segmap_parloop_131073_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131073_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131073_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131073_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131071_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131071_end -
                 futhark_mc_segmap_task_131071_start;
        
        ctx->futhark_mc_segmap_task_131071_runs[tid]++;
        ctx->futhark_mc_segmap_task_131071_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131071_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131075 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_117435;
    char *free_mem_121889;
    char *free_mem_121911;
    char *free_mem_122147;
    char *free_mem_122150;
};
struct futhark_mc_task_131077 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_117435;
    int64_t free_gtid_117439;
    char *free_mem_121889;
    char *free_mem_122147;
    float *retval_defunc_2_reduce_res_124913;
};
struct futhark_mc_segred_stage_1_parloop_struct_131080 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_css_chunk_len_114509;
    int64_t free_gtid_117435;
    int64_t free_gtid_117439;
    char *free_mem_121889;
    char *free_mem_122147;
    char *free_reduce_stage_1_tid_res_arr_mem_124977;
};
static int futhark_mc_segred_stage_1_parloop_131081(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117440,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131080
    *futhark_mc_segred_stage_1_parloop_struct_131080 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131080 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131080->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131081_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131081_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131080->free_n_114463;
    int64_t css_chunk_len_114509 =
            futhark_mc_segred_stage_1_parloop_struct_131080->free_css_chunk_len_114509;
    int64_t gtid_117435 =
            futhark_mc_segred_stage_1_parloop_struct_131080->free_gtid_117435;
    int64_t gtid_117439 =
            futhark_mc_segred_stage_1_parloop_struct_131080->free_gtid_117439;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131080->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131080->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124977 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124977",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131080->free_reduce_stage_1_tid_res_arr_mem_124977,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124979 = start;
    float x_124962;
    float x_124963;
    float local_acc_124980 = 0.0F;
    
    for (; iter_124979 < end; iter_124979++) {
        int64_t gtid_117441 = iter_124979;
        int64_t x_124965 = ((int64_t *) mem_121889.mem)[gtid_117439 *
                                                        css_chunk_len_114509 +
                                                        gtid_117441];
        bool cond_124966 = sle64((int64_t) 0, x_124965);
        float defunc_0_f_res_124967;
        
        if (cond_124966) {
            bool y_124968 = slt64(x_124965, n_114463);
            bool bounds_check_124969 = cond_124966 && y_124968;
            bool index_certs_124970;
            
            if (!bounds_check_124969) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_124965,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_124971 =
                  ((float *) mem_122147.mem)[gtid_117435 * n_114463 + x_124965];
            
            defunc_0_f_res_124967 = defunc_0_f_res_t_res_124971;
        } else {
            defunc_0_f_res_124967 = NAN;
        }
        
        bool isnan_res_124972;
        
        isnan_res_124972 = futrts_isnan32(defunc_0_f_res_124967);
        
        float defunc_0_f_res_124973;
        
        if (isnan_res_124972) {
            defunc_0_f_res_124973 = 0.0F;
        } else {
            defunc_0_f_res_124973 = defunc_0_f_res_124967;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_124962 = local_acc_124980;
        }
        // Load next params
        {
            x_124963 = defunc_0_f_res_124973;
        }
        // Red body
        {
            float defunc_1_op_res_124964 = x_124962 + x_124963;
            
            local_acc_124980 = defunc_1_op_res_124964;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124977.mem)[flat_tid_117440] =
        local_acc_124980;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131081_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131081_end -
                 futhark_mc_segred_stage_1_parloop_131081_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131081_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131081_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131081_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131078(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117440 = tid;
    int num_tasks_124976 = info.nsubtasks;
    struct futhark_mc_task_131077 *futhark_mc_task_131077 =
                                  (struct futhark_mc_task_131077 *) args;
    struct futhark_context *ctx = futhark_mc_task_131077->ctx;
    uint64_t futhark_mc_segred_task_131078_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131078_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131077->free_n_114463;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_131077->free_css_chunk_len_114509;
    int64_t gtid_117435 = futhark_mc_task_131077->free_gtid_117435;
    int64_t gtid_117439 = futhark_mc_task_131077->free_gtid_117439;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_131077->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131077->free_mem_122147,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_124913 =
          *futhark_mc_task_131077->retval_defunc_2_reduce_res_124913;
    size_t reduce_stage_1_tid_res_arr_mem_124977_cached_sizze_131079 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124977 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124977_cached_sizze_131079 <
        (size_t) ((int64_t) 4 * num_tasks_124976)) {
        reduce_stage_1_tid_res_arr_mem_124977 =
            realloc(reduce_stage_1_tid_res_arr_mem_124977, (int64_t) 4 *
                    num_tasks_124976);
        reduce_stage_1_tid_res_arr_mem_124977_cached_sizze_131079 =
            (int64_t) 4 * num_tasks_124976;
    }
    
    int64_t iter_124979;
    struct futhark_mc_segred_stage_1_parloop_struct_131080
    futhark_mc_segred_stage_1_parloop_struct_131080;
    
    futhark_mc_segred_stage_1_parloop_struct_131080.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_gtid_117435 =
        gtid_117435;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_gtid_117439 =
        gtid_117439;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_mem_121889 =
        mem_121889.mem;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_mem_122147 =
        mem_122147.mem;
    futhark_mc_segred_stage_1_parloop_struct_131080.free_reduce_stage_1_tid_res_arr_mem_124977 =
        reduce_stage_1_tid_res_arr_mem_124977;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131081_task;
    
    futhark_mc_segred_stage_1_parloop_131081_task.name =
        "futhark_mc_segred_stage_1_parloop_131081";
    futhark_mc_segred_stage_1_parloop_131081_task.fn =
        futhark_mc_segred_stage_1_parloop_131081;
    futhark_mc_segred_stage_1_parloop_131081_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131080;
    futhark_mc_segred_stage_1_parloop_131081_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131081_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131081_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131081_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131081_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131081_task);
    
    if (futhark_mc_segred_stage_1_parloop_131081_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131081_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131081_total_end -
                 futhark_mc_segred_stage_1_parloop_131081_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131081_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131081_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131081_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124913 = 0.0F;
    }
    
    float x_124981;
    float x_124982;
    
    for (int32_t i_124984 = 0; i_124984 < num_tasks_124976; i_124984++) {
        flat_tid_117440 = i_124984;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124981 = defunc_2_reduce_res_124913;
            }
            // load next params
            {
                x_124982 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124977)[flat_tid_117440];
            }
            // red body
            {
                float defunc_1_op_res_124983 = x_124981 + x_124982;
                
                defunc_2_reduce_res_124913 = defunc_1_op_res_124983;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124977);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131078_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131078_end -
                 futhark_mc_segred_task_131078_start;
        
        ctx->futhark_mc_segred_task_131078_runs[tid]++;
        ctx->futhark_mc_segred_task_131078_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131078_iter[tid] += iterations;
    }
    *futhark_mc_task_131077->retval_defunc_2_reduce_res_124913 =
        defunc_2_reduce_res_124913;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131076(void *args, int64_t start,
                                            int64_t end, int flat_tid_117438,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131075
    *futhark_mc_segmap_parloop_struct_131075 =
    (struct futhark_mc_segmap_parloop_struct_131075 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131075->ctx;
    uint64_t futhark_mc_segmap_parloop_131076_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131076_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131075->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131075->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_131075->free_css_chunk_len_114509;
    int64_t gtid_117435 =
            futhark_mc_segmap_parloop_struct_131075->free_gtid_117435;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_131075->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_131075->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131075->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122150 = {.desc ="mem_122150", .mem =
                                  futhark_mc_segmap_parloop_struct_131075->free_mem_122150,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124961 = start;
    
    for (; iter_124961 < end; iter_124961++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124974 = n_p_114465;
        int64_t gtid_117439 = iter_124961;
        int64_t remnant_124975 = iter_124961 - gtid_117439;
        float x_124912 = ((float *) mem_121911.mem)[gtid_117435 * n_p_114465 +
                                                    gtid_117439];
        float defunc_2_reduce_res_124913;
        int64_t flat_tid_117440 = (int64_t) 0;
        int32_t num_tasks_124976;
        struct futhark_mc_task_131077 futhark_mc_task_131077;
        
        futhark_mc_task_131077.ctx = ctx;
        futhark_mc_task_131077.free_n_114463 = n_114463;
        futhark_mc_task_131077.free_css_chunk_len_114509 = css_chunk_len_114509;
        futhark_mc_task_131077.free_gtid_117435 = gtid_117435;
        futhark_mc_task_131077.free_gtid_117439 = gtid_117439;
        futhark_mc_task_131077.free_mem_121889 = mem_121889.mem;
        futhark_mc_task_131077.free_mem_122147 = mem_122147.mem;
        futhark_mc_task_131077.retval_defunc_2_reduce_res_124913 =
            &defunc_2_reduce_res_124913;
        
        struct scheduler_segop futhark_mc_task_131077_task;
        
        futhark_mc_task_131077_task.args = &futhark_mc_task_131077;
        futhark_mc_task_131077_task.top_level_fn =
            futhark_mc_segred_task_131078;
        futhark_mc_task_131077_task.name = "futhark_mc_segred_task_131078";
        futhark_mc_task_131077_task.iterations = css_chunk_len_114509;
        futhark_mc_task_131077_task.task_time =
            &ctx->futhark_mc_segred_task_131078_total_time;
        futhark_mc_task_131077_task.task_iter =
            &ctx->futhark_mc_segred_task_131078_total_iter;
        futhark_mc_task_131077_task.sched = STATIC;
        futhark_mc_task_131077_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131078_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131077_task);
        
        if (futhark_mc_segred_task_131078_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_1_f_res_124926 = defunc_2_reduce_res_124913 / x_124912;
        
        ((float *) mem_122150.mem)[gtid_117439] = defunc_1_f_res_124926;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131076_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131076_end -
                 futhark_mc_segmap_parloop_131076_start;
        
        ctx->futhark_mc_segmap_parloop_131076_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131076_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131076_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131074(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117438 = tid;
    int num_tasks_124944 = info.nsubtasks;
    struct futhark_mc_task_131070 *futhark_mc_task_131070 =
                                  (struct futhark_mc_task_131070 *) args;
    struct futhark_context *ctx = futhark_mc_task_131070->ctx;
    uint64_t futhark_mc_segmap_nested_task_131074_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131074_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131070->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131070->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_131070->free_css_chunk_len_114509;
    int64_t gtid_117435 = futhark_mc_task_131070->free_gtid_117435;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_131070->free_mem_121889,
                                  .size =0, .references =NULL};
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_131070->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131070->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122150 = {.desc ="mem_122150", .mem =
                                  futhark_mc_task_131070->free_mem_122150,
                                  .size =0, .references =NULL};
    int64_t iter_124961;
    struct futhark_mc_segmap_parloop_struct_131075
    futhark_mc_segmap_parloop_struct_131075;
    
    futhark_mc_segmap_parloop_struct_131075.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131075.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131075.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131075.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_131075.free_gtid_117435 = gtid_117435;
    futhark_mc_segmap_parloop_struct_131075.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_131075.free_mem_121911 = mem_121911.mem;
    futhark_mc_segmap_parloop_struct_131075.free_mem_122147 = mem_122147.mem;
    futhark_mc_segmap_parloop_struct_131075.free_mem_122150 = mem_122150.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131076_task;
    
    futhark_mc_segmap_parloop_131076_task.name =
        "futhark_mc_segmap_parloop_131076";
    futhark_mc_segmap_parloop_131076_task.fn = futhark_mc_segmap_parloop_131076;
    futhark_mc_segmap_parloop_131076_task.args =
        &futhark_mc_segmap_parloop_struct_131075;
    futhark_mc_segmap_parloop_131076_task.iterations = iterations;
    futhark_mc_segmap_parloop_131076_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131076_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131076_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131076_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131076_task);
    
    if (futhark_mc_segmap_parloop_131076_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131076_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131076_total_end -
                 futhark_mc_segmap_parloop_131076_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131076_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131076_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131076_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131074_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131074_end -
                 futhark_mc_segmap_nested_task_131074_start;
        
        ctx->futhark_mc_segmap_nested_task_131074_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131074_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131074_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131068(void *args, int64_t start,
                                            int64_t end, int flat_tid_117434,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131067
    *futhark_mc_segmap_parloop_struct_131067 =
    (struct futhark_mc_segmap_parloop_struct_131067 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131067->ctx;
    uint64_t futhark_mc_segmap_parloop_131068_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131068_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131067->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131067->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131067->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_segmap_parloop_struct_131067->free_css_chunk_len_114509;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_segmap_parloop_struct_131067->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 =
            futhark_mc_segmap_parloop_struct_131067->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_segmap_parloop_struct_131067->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_segmap_parloop_struct_131067->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_segmap_parloop_struct_131067->free_mem_122169,
                                  .size =0, .references =NULL};
    size_t mem_122150_cached_sizze_131069 = 0;
    char *mem_122150 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124911 = start;
    
    if (mem_122150_cached_sizze_131069 < (size_t) bytes_121890) {
        mem_122150 = realloc(mem_122150, bytes_121890);
        mem_122150_cached_sizze_131069 = bytes_121890;
    }
    for (; iter_124911 < end; iter_124911++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124942 = m_114462;
        int64_t gtid_117435 = iter_124911;
        int64_t remnant_124943 = iter_124911 - gtid_117435;
        int64_t flat_tid_117436 = (int64_t) 0;
        int32_t num_tasks_124944;
        int64_t flat_tid_117438 = (int64_t) 0;
        struct futhark_mc_task_131070 futhark_mc_task_131070;
        
        futhark_mc_task_131070.ctx = ctx;
        futhark_mc_task_131070.free_n_114463 = n_114463;
        futhark_mc_task_131070.free_n_p_114465 = n_p_114465;
        futhark_mc_task_131070.free_css_chunk_len_114509 = css_chunk_len_114509;
        futhark_mc_task_131070.free_gtid_117435 = gtid_117435;
        futhark_mc_task_131070.free_mem_121889 = mem_121889.mem;
        futhark_mc_task_131070.free_mem_121911 = mem_121911.mem;
        futhark_mc_task_131070.free_mem_122147 = mem_122147.mem;
        futhark_mc_task_131070.free_mem_122150 = mem_122150;
        
        struct scheduler_segop futhark_mc_task_131070_task;
        
        futhark_mc_task_131070_task.args = &futhark_mc_task_131070;
        futhark_mc_task_131070_task.top_level_fn =
            futhark_mc_segmap_task_131071;
        futhark_mc_task_131070_task.name = "futhark_mc_segmap_task_131071";
        futhark_mc_task_131070_task.iterations = n_p_114465;
        futhark_mc_task_131070_task.task_time =
            &ctx->futhark_mc_segmap_task_131071_total_time;
        futhark_mc_task_131070_task.task_iter =
            &ctx->futhark_mc_segmap_task_131071_total_iter;
        futhark_mc_task_131070_task.sched = STATIC;
        futhark_mc_task_131070_task.nested_fn =
            futhark_mc_segmap_nested_task_131074;
        
        int futhark_mc_segmap_task_131071_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131070_task);
        
        if (futhark_mc_segmap_task_131071_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122169.mem + gtid_117435 * n_p_114465 * (int64_t) 4,
                mem_122150 + (int64_t) 0, n_p_114465 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122150);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131068_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131068_end -
                 futhark_mc_segmap_parloop_131068_start;
        
        ctx->futhark_mc_segmap_parloop_131068_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131068_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131068_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131066(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117434 = tid;
    int num_tasks_124887 = info.nsubtasks;
    struct futhark_mc_task_131061 *futhark_mc_task_131061 =
                                  (struct futhark_mc_task_131061 *) args;
    struct futhark_context *ctx = futhark_mc_task_131061->ctx;
    uint64_t futhark_mc_segmap_nested_task_131066_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131066_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131061->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131061->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131061->free_n_p_114465;
    int64_t css_chunk_len_114509 =
            futhark_mc_task_131061->free_css_chunk_len_114509;
    struct memblock mem_121889 = {.desc ="mem_121889", .mem =
                                  futhark_mc_task_131061->free_mem_121889,
                                  .size =0, .references =NULL};
    int64_t bytes_121890 = futhark_mc_task_131061->free_bytes_121890;
    struct memblock mem_121911 = {.desc ="mem_121911", .mem =
                                  futhark_mc_task_131061->free_mem_121911,
                                  .size =0, .references =NULL};
    struct memblock mem_122147 = {.desc ="mem_122147", .mem =
                                  futhark_mc_task_131061->free_mem_122147,
                                  .size =0, .references =NULL};
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_task_131061->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t iter_124911;
    struct futhark_mc_segmap_parloop_struct_131067
    futhark_mc_segmap_parloop_struct_131067;
    
    futhark_mc_segmap_parloop_struct_131067.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131067.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131067.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131067.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131067.free_css_chunk_len_114509 =
        css_chunk_len_114509;
    futhark_mc_segmap_parloop_struct_131067.free_mem_121889 = mem_121889.mem;
    futhark_mc_segmap_parloop_struct_131067.free_bytes_121890 = bytes_121890;
    futhark_mc_segmap_parloop_struct_131067.free_mem_121911 = mem_121911.mem;
    futhark_mc_segmap_parloop_struct_131067.free_mem_122147 = mem_122147.mem;
    futhark_mc_segmap_parloop_struct_131067.free_mem_122169 = mem_122169.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131068_task;
    
    futhark_mc_segmap_parloop_131068_task.name =
        "futhark_mc_segmap_parloop_131068";
    futhark_mc_segmap_parloop_131068_task.fn = futhark_mc_segmap_parloop_131068;
    futhark_mc_segmap_parloop_131068_task.args =
        &futhark_mc_segmap_parloop_struct_131067;
    futhark_mc_segmap_parloop_131068_task.iterations = iterations;
    futhark_mc_segmap_parloop_131068_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131068_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131068_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131068_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131068_task);
    
    if (futhark_mc_segmap_parloop_131068_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131068_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131068_total_end -
                 futhark_mc_segmap_parloop_131068_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131068_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131068_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131068_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131066_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131066_end -
                 futhark_mc_segmap_nested_task_131066_start;
        
        ctx->futhark_mc_segmap_nested_task_131066_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131066_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131066_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131082 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_mem_122169;
    int64_t free_bytes_122170;
    char *free_mem_122191;
};
struct futhark_mc_segmap_parloop_struct_131084 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_mem_122169;
    int64_t free_bytes_122170;
    char *free_mem_122191;
};
static int futhark_mc_segmap_parloop_131085(void *args, int64_t start,
                                            int64_t end, int flat_tid_117493,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131084
    *futhark_mc_segmap_parloop_struct_131084 =
    (struct futhark_mc_segmap_parloop_struct_131084 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131084->ctx;
    uint64_t futhark_mc_segmap_parloop_131085_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131085_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131084->free_m_114462;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131084->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131084->free_C_len_114511;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_segmap_parloop_struct_131084->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t bytes_122170 =
            futhark_mc_segmap_parloop_struct_131084->free_bytes_122170;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131084->free_mem_122191,
                                  .size =0, .references =NULL};
    size_t mem_122175_cached_sizze_131086 = 0;
    char *mem_122175 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124986 = start;
    
    if (mem_122175_cached_sizze_131086 < (size_t) bytes_122170) {
        mem_122175 = realloc(mem_122175, bytes_122170);
        mem_122175_cached_sizze_131086 = bytes_122170;
    }
    for (; iter_124986 < end; iter_124986++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124996 = m_114462;
        int64_t gtid_117494 = iter_124986;
        int64_t remnant_124997 = iter_124986 - gtid_117494;
        
        for (int64_t i_124987 = 0; i_124987 < C_len_114511; i_124987++) {
            int64_t i_124989 = smod64(i_124987, n_p_114465);
            bool x_124990 = sle64((int64_t) 0, i_124989);
            bool y_124991 = slt64(i_124989, n_p_114465);
            bool bounds_check_124992 = x_124990 && y_124991;
            bool index_certs_124993;
            
            if (!bounds_check_124992) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_124989,
                              "] out of bounds for array of shape [",
                              (long long) n_p_114465, "].",
                              "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            memmove(mem_122175 + i_124987 * (int64_t) 4, mem_122169.mem +
                    (gtid_117494 * n_p_114465 + i_124989) * (int64_t) 4,
                    (int64_t) 4);
        }
        memmove(mem_122191.mem + gtid_117494 * C_len_114511 * (int64_t) 4,
                mem_122175 + (int64_t) 0, C_len_114511 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122175);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131085_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131085_end -
                 futhark_mc_segmap_parloop_131085_start;
        
        ctx->futhark_mc_segmap_parloop_131085_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131085_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131085_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131083(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117493 = tid;
    int num_tasks_124985 = info.nsubtasks;
    struct futhark_mc_task_131082 *futhark_mc_task_131082 =
                                  (struct futhark_mc_task_131082 *) args;
    struct futhark_context *ctx = futhark_mc_task_131082->ctx;
    uint64_t futhark_mc_segmap_task_131083_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131083_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131082->free_m_114462;
    int64_t n_p_114465 = futhark_mc_task_131082->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131082->free_C_len_114511;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_task_131082->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t bytes_122170 = futhark_mc_task_131082->free_bytes_122170;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131082->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t iter_124986;
    struct futhark_mc_segmap_parloop_struct_131084
    futhark_mc_segmap_parloop_struct_131084;
    
    futhark_mc_segmap_parloop_struct_131084.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131084.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131084.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131084.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131084.free_mem_122169 = mem_122169.mem;
    futhark_mc_segmap_parloop_struct_131084.free_bytes_122170 = bytes_122170;
    futhark_mc_segmap_parloop_struct_131084.free_mem_122191 = mem_122191.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131085_task;
    
    futhark_mc_segmap_parloop_131085_task.name =
        "futhark_mc_segmap_parloop_131085";
    futhark_mc_segmap_parloop_131085_task.fn = futhark_mc_segmap_parloop_131085;
    futhark_mc_segmap_parloop_131085_task.args =
        &futhark_mc_segmap_parloop_struct_131084;
    futhark_mc_segmap_parloop_131085_task.iterations = iterations;
    futhark_mc_segmap_parloop_131085_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131085_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131085_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131085_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131085_task);
    
    if (futhark_mc_segmap_parloop_131085_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131085_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131085_total_end -
                 futhark_mc_segmap_parloop_131085_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131085_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131085_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131085_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131083_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131083_end -
                 futhark_mc_segmap_task_131083_start;
        
        ctx->futhark_mc_segmap_task_131083_runs[tid]++;
        ctx->futhark_mc_segmap_task_131083_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131083_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131088 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_mem_122169;
    int64_t free_bytes_122170;
    char *free_mem_122191;
};
struct futhark_mc_task_131091 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    int64_t free_gtid_117496;
    char *free_mem_122169;
    char *free_mem_122172;
};
struct futhark_mc_segmap_parloop_struct_131093 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    int64_t free_gtid_117496;
    char *free_mem_122169;
    char *free_mem_122172;
};
static int futhark_mc_segmap_parloop_131094(void *args, int64_t start,
                                            int64_t end, int flat_tid_117497,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131093
    *futhark_mc_segmap_parloop_struct_131093 =
    (struct futhark_mc_segmap_parloop_struct_131093 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131093->ctx;
    uint64_t futhark_mc_segmap_parloop_131094_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131094_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131093->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131093->free_C_len_114511;
    int64_t gtid_117496 =
            futhark_mc_segmap_parloop_struct_131093->free_gtid_117496;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_segmap_parloop_struct_131093->free_mem_122169,
                                  .size =0, .references =NULL};
    struct memblock mem_122172 = {.desc ="mem_122172", .mem =
                                  futhark_mc_segmap_parloop_struct_131093->free_mem_122172,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125009 = start;
    
    for (; iter_125009 < end; iter_125009++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125010 = C_len_114511;
        int64_t gtid_117498 = iter_125009;
        int64_t remnant_125011 = iter_125009 - gtid_117498;
        int64_t i_125000 = smod64(gtid_117498, n_p_114465);
        bool x_125001 = sle64((int64_t) 0, i_125000);
        bool y_125002 = slt64(i_125000, n_p_114465);
        bool bounds_check_125003 = x_125001 && y_125002;
        bool index_certs_125004;
        
        if (!bounds_check_125003) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_125000,
                                   "] out of bounds for array of shape [",
                                   (long long) n_p_114465, "].",
                                   "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float defunc_0_f_res_125005 = ((float *) mem_122169.mem)[gtid_117496 *
                                                                 n_p_114465 +
                                                                 i_125000];
        
        ((float *) mem_122172.mem)[gtid_117498] = defunc_0_f_res_125005;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131094_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131094_end -
                 futhark_mc_segmap_parloop_131094_start;
        
        ctx->futhark_mc_segmap_parloop_131094_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131094_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131094_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131092(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117497 = tid;
    int num_tasks_125008 = info.nsubtasks;
    struct futhark_mc_task_131091 *futhark_mc_task_131091 =
                                  (struct futhark_mc_task_131091 *) args;
    struct futhark_context *ctx = futhark_mc_task_131091->ctx;
    uint64_t futhark_mc_segmap_task_131092_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131092_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_131091->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131091->free_C_len_114511;
    int64_t gtid_117496 = futhark_mc_task_131091->free_gtid_117496;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_task_131091->free_mem_122169,
                                  .size =0, .references =NULL};
    struct memblock mem_122172 = {.desc ="mem_122172", .mem =
                                  futhark_mc_task_131091->free_mem_122172,
                                  .size =0, .references =NULL};
    int64_t iter_125009;
    struct futhark_mc_segmap_parloop_struct_131093
    futhark_mc_segmap_parloop_struct_131093;
    
    futhark_mc_segmap_parloop_struct_131093.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131093.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131093.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131093.free_gtid_117496 = gtid_117496;
    futhark_mc_segmap_parloop_struct_131093.free_mem_122169 = mem_122169.mem;
    futhark_mc_segmap_parloop_struct_131093.free_mem_122172 = mem_122172.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131094_task;
    
    futhark_mc_segmap_parloop_131094_task.name =
        "futhark_mc_segmap_parloop_131094";
    futhark_mc_segmap_parloop_131094_task.fn = futhark_mc_segmap_parloop_131094;
    futhark_mc_segmap_parloop_131094_task.args =
        &futhark_mc_segmap_parloop_struct_131093;
    futhark_mc_segmap_parloop_131094_task.iterations = iterations;
    futhark_mc_segmap_parloop_131094_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131094_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131094_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131094_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131094_task);
    
    if (futhark_mc_segmap_parloop_131094_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131094_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131094_total_end -
                 futhark_mc_segmap_parloop_131094_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131094_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131094_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131094_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131092_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131092_end -
                 futhark_mc_segmap_task_131092_start;
        
        ctx->futhark_mc_segmap_task_131092_runs[tid]++;
        ctx->futhark_mc_segmap_task_131092_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131092_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131089(void *args, int64_t start,
                                            int64_t end, int flat_tid_117495,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131088
    *futhark_mc_segmap_parloop_struct_131088 =
    (struct futhark_mc_segmap_parloop_struct_131088 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131088->ctx;
    uint64_t futhark_mc_segmap_parloop_131089_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131089_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131088->free_m_114462;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131088->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131088->free_C_len_114511;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_segmap_parloop_struct_131088->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t bytes_122170 =
            futhark_mc_segmap_parloop_struct_131088->free_bytes_122170;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131088->free_mem_122191,
                                  .size =0, .references =NULL};
    size_t mem_122172_cached_sizze_131090 = 0;
    char *mem_122172 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124999 = start;
    
    if (mem_122172_cached_sizze_131090 < (size_t) bytes_122170) {
        mem_122172 = realloc(mem_122172, bytes_122170);
        mem_122172_cached_sizze_131090 = bytes_122170;
    }
    for (; iter_124999 < end; iter_124999++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125006 = m_114462;
        int64_t gtid_117496 = iter_124999;
        int64_t remnant_125007 = iter_124999 - gtid_117496;
        int64_t flat_tid_117497 = (int64_t) 0;
        int32_t num_tasks_125008;
        struct futhark_mc_task_131091 futhark_mc_task_131091;
        
        futhark_mc_task_131091.ctx = ctx;
        futhark_mc_task_131091.free_n_p_114465 = n_p_114465;
        futhark_mc_task_131091.free_C_len_114511 = C_len_114511;
        futhark_mc_task_131091.free_gtid_117496 = gtid_117496;
        futhark_mc_task_131091.free_mem_122169 = mem_122169.mem;
        futhark_mc_task_131091.free_mem_122172 = mem_122172;
        
        struct scheduler_segop futhark_mc_task_131091_task;
        
        futhark_mc_task_131091_task.args = &futhark_mc_task_131091;
        futhark_mc_task_131091_task.top_level_fn =
            futhark_mc_segmap_task_131092;
        futhark_mc_task_131091_task.name = "futhark_mc_segmap_task_131092";
        futhark_mc_task_131091_task.iterations = C_len_114511;
        futhark_mc_task_131091_task.task_time =
            &ctx->futhark_mc_segmap_task_131092_total_time;
        futhark_mc_task_131091_task.task_iter =
            &ctx->futhark_mc_segmap_task_131092_total_iter;
        futhark_mc_task_131091_task.sched = STATIC;
        futhark_mc_task_131091_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131092_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131091_task);
        
        if (futhark_mc_segmap_task_131092_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122191.mem + gtid_117496 * C_len_114511 * (int64_t) 4,
                mem_122172 + (int64_t) 0, C_len_114511 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122172);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131089_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131089_end -
                 futhark_mc_segmap_parloop_131089_start;
        
        ctx->futhark_mc_segmap_parloop_131089_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131089_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131089_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131087(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117495 = tid;
    int num_tasks_124985 = info.nsubtasks;
    struct futhark_mc_task_131082 *futhark_mc_task_131082 =
                                  (struct futhark_mc_task_131082 *) args;
    struct futhark_context *ctx = futhark_mc_task_131082->ctx;
    uint64_t futhark_mc_segmap_nested_task_131087_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131087_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131082->free_m_114462;
    int64_t n_p_114465 = futhark_mc_task_131082->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131082->free_C_len_114511;
    struct memblock mem_122169 = {.desc ="mem_122169", .mem =
                                  futhark_mc_task_131082->free_mem_122169,
                                  .size =0, .references =NULL};
    int64_t bytes_122170 = futhark_mc_task_131082->free_bytes_122170;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131082->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t iter_124999;
    struct futhark_mc_segmap_parloop_struct_131088
    futhark_mc_segmap_parloop_struct_131088;
    
    futhark_mc_segmap_parloop_struct_131088.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131088.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131088.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131088.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131088.free_mem_122169 = mem_122169.mem;
    futhark_mc_segmap_parloop_struct_131088.free_bytes_122170 = bytes_122170;
    futhark_mc_segmap_parloop_struct_131088.free_mem_122191 = mem_122191.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131089_task;
    
    futhark_mc_segmap_parloop_131089_task.name =
        "futhark_mc_segmap_parloop_131089";
    futhark_mc_segmap_parloop_131089_task.fn = futhark_mc_segmap_parloop_131089;
    futhark_mc_segmap_parloop_131089_task.args =
        &futhark_mc_segmap_parloop_struct_131088;
    futhark_mc_segmap_parloop_131089_task.iterations = iterations;
    futhark_mc_segmap_parloop_131089_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131089_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131089_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131089_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131089_task);
    
    if (futhark_mc_segmap_parloop_131089_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131089_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131089_total_end -
                 futhark_mc_segmap_parloop_131089_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131089_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131089_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131089_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131087_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131087_end -
                 futhark_mc_segmap_nested_task_131087_start;
        
        ctx->futhark_mc_segmap_nested_task_131087_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131087_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131087_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131095 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_lifted_single_ma_arg_114883;
    int64_t free_lifted_single_ma_arg_114900;
    int64_t free_bytes_121846;
    char *free_mem_122191;
    int64_t free_bytes_122192;
    int64_t free_bytes_122195;
    char *free_mem_122249;
};
struct futhark_mc_segmap_parloop_struct_131097 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_lifted_single_ma_arg_114883;
    int64_t free_lifted_single_ma_arg_114900;
    int64_t free_bytes_121846;
    char *free_mem_122191;
    int64_t free_bytes_122192;
    int64_t free_bytes_122195;
    char *free_mem_122249;
};
static int futhark_mc_segmap_parloop_131098(void *args, int64_t start,
                                            int64_t end, int flat_tid_117508,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131097
    *futhark_mc_segmap_parloop_struct_131097 =
    (struct futhark_mc_segmap_parloop_struct_131097 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131097->ctx;
    uint64_t futhark_mc_segmap_parloop_131098_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131098_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131097->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131097->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131097->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_segmap_parloop_struct_131097->free_i64_res_114505;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131097->free_C_len_114511;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_segmap_parloop_struct_131097->free_lifted_single_ma_arg_114883;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_segmap_parloop_struct_131097->free_lifted_single_ma_arg_114900;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131097->free_bytes_121846;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131097->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t bytes_122192 =
            futhark_mc_segmap_parloop_struct_131097->free_bytes_122192;
    int64_t bytes_122195 =
            futhark_mc_segmap_parloop_struct_131097->free_bytes_122195;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131097->free_mem_122249,
                                  .size =0, .references =NULL};
    size_t mem_122203_cached_sizze_131099 = 0;
    char *mem_122203 = NULL;
    size_t mem_122218_cached_sizze_131100 = 0;
    char *mem_122218 = NULL;
    size_t mem_122233_cached_sizze_131101 = 0;
    char *mem_122233 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125013 = start;
    
    if (mem_122203_cached_sizze_131099 < (size_t) bytes_122192) {
        mem_122203 = realloc(mem_122203, bytes_122192);
        mem_122203_cached_sizze_131099 = bytes_122192;
    }
    if (mem_122218_cached_sizze_131100 < (size_t) bytes_122195) {
        mem_122218 = realloc(mem_122218, bytes_122195);
        mem_122218_cached_sizze_131100 = bytes_122195;
    }
    if (mem_122233_cached_sizze_131101 < (size_t) bytes_121846) {
        mem_122233 = realloc(mem_122233, bytes_121846);
        mem_122233_cached_sizze_131101 = bytes_121846;
    }
    for (; iter_125013 < end; iter_125013++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125096 = m_114462;
        int64_t gtid_117509 = iter_125013;
        int64_t remnant_125097 = iter_125013 - gtid_117509;
        float defunc_2_reduce_res_114998;
        float redout_125015 = 0.0F;
        
        for (int64_t i_125014 = 0; i_125014 < n_p_114465; i_125014++) {
            float x_125016 = ((float *) mem_122191.mem)[gtid_117509 *
                                                        C_len_114511 +
                                                        i_125014];
            float defunc_1_op_res_125017 = x_125016 + redout_125015;
            float redout_tmp_125098 = defunc_1_op_res_125017;
            
            redout_125015 = redout_tmp_125098;
        }
        defunc_2_reduce_res_114998 = redout_125015;
        
        float discard_121242;
        float scanacc_125019 = 0.0F;
        
        for (int64_t i_125018 = 0; i_125018 < lifted_single_ma_arg_114883;
             i_125018++) {
            bool cond_125021 = i_125018 == (int64_t) 0;
            float defunc_0_f_res_125022;
            
            if (cond_125021) {
                float defunc_0_f_res_t_res_125023 = defunc_2_reduce_res_114998 /
                      i64_res_114505;
                
                defunc_0_f_res_125022 = defunc_0_f_res_t_res_125023;
            } else {
                int64_t x_125024 = add64(n_p_114465, i_125018);
                int64_t i_125025 = sub64(x_125024, (int64_t) 1);
                bool x_125026 = sle64((int64_t) 0, i_125025);
                bool y_125027 = slt64(i_125025, C_len_114511);
                bool bounds_check_125028 = x_125026 && y_125027;
                bool index_certs_125029;
                
                if (!bounds_check_125028) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125025,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125030 = ((float *) mem_122191.mem)[gtid_117509 *
                                                            C_len_114511 +
                                                            i_125025];
                int64_t i_125031 = sub64(i_125018, (int64_t) 1);
                bool x_125032 = sle64((int64_t) 0, i_125031);
                bool y_125033 = slt64(i_125031, C_len_114511);
                bool bounds_check_125034 = x_125032 && y_125033;
                bool index_certs_125035;
                
                if (!bounds_check_125034) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125031,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125036 = ((float *) mem_122191.mem)[gtid_117509 *
                                                            C_len_114511 +
                                                            i_125031];
                float x_125037 = x_125030 - y_125036;
                float defunc_0_f_res_f_res_125038 = x_125037 / i64_res_114505;
                
                defunc_0_f_res_125022 = defunc_0_f_res_f_res_125038;
            }
            
            float defunc_1_op_res_125039 = defunc_0_f_res_125022 +
                  scanacc_125019;
            
            ((float *) mem_122203)[i_125018] = defunc_1_op_res_125039;
            
            float scanacc_tmp_125099 = defunc_1_op_res_125039;
            
            scanacc_125019 = scanacc_tmp_125099;
        }
        discard_121242 = scanacc_125019;
        
        float defunc_2_reduce_res_115027;
        float redout_125042 = 0.0F;
        
        for (int64_t i_125041 = 0; i_125041 < n_p_114465; i_125041++) {
            float x_125043 = ((float *) mem_122203)[i_125041];
            float defunc_1_op_res_125044 = x_125043 + redout_125042;
            float redout_tmp_125101 = defunc_1_op_res_125044;
            
            redout_125042 = redout_tmp_125101;
        }
        defunc_2_reduce_res_115027 = redout_125042;
        
        float discard_121250;
        float scanacc_125046 = 0.0F;
        
        for (int64_t i_125045 = 0; i_125045 < lifted_single_ma_arg_114900;
             i_125045++) {
            bool cond_125048 = i_125045 == (int64_t) 0;
            float defunc_0_f_res_125049;
            
            if (cond_125048) {
                float defunc_0_f_res_t_res_125050 = defunc_2_reduce_res_115027 /
                      i64_res_114505;
                
                defunc_0_f_res_125049 = defunc_0_f_res_t_res_125050;
            } else {
                int64_t x_125051 = add64(n_p_114465, i_125045);
                int64_t i_125052 = sub64(x_125051, (int64_t) 1);
                bool x_125053 = sle64((int64_t) 0, i_125052);
                bool y_125054 = slt64(i_125052, lifted_single_ma_arg_114883);
                bool bounds_check_125055 = x_125053 && y_125054;
                bool index_certs_125056;
                
                if (!bounds_check_125055) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125052,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125057 = ((float *) mem_122203)[i_125052];
                int64_t i_125058 = sub64(i_125045, (int64_t) 1);
                bool x_125059 = sle64((int64_t) 0, i_125058);
                bool y_125060 = slt64(i_125058, lifted_single_ma_arg_114883);
                bool bounds_check_125061 = x_125059 && y_125060;
                bool index_certs_125062;
                
                if (!bounds_check_125061) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125058,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125063 = ((float *) mem_122203)[i_125058];
                float x_125064 = x_125057 - y_125063;
                float defunc_0_f_res_f_res_125065 = x_125064 / i64_res_114505;
                
                defunc_0_f_res_125049 = defunc_0_f_res_f_res_125065;
            }
            
            float defunc_1_op_res_125066 = defunc_0_f_res_125049 +
                  scanacc_125046;
            
            ((float *) mem_122218)[i_125045] = defunc_1_op_res_125066;
            
            float scanacc_tmp_125102 = defunc_1_op_res_125066;
            
            scanacc_125046 = scanacc_tmp_125102;
        }
        discard_121250 = scanacc_125046;
        
        float defunc_2_reduce_res_115056;
        float redout_125069 = 0.0F;
        
        for (int32_t i_125068 = 0; i_125068 < 3; i_125068++) {
            int64_t i_125070 = sext_i32_i64(i_125068);
            float x_125071 = ((float *) mem_122218)[i_125070];
            float defunc_1_op_res_125072 = x_125071 + redout_125069;
            float redout_tmp_125104 = defunc_1_op_res_125072;
            
            redout_125069 = redout_tmp_125104;
        }
        defunc_2_reduce_res_115056 = redout_125069;
        
        float discard_121258;
        float scanacc_125074 = 0.0F;
        
        for (int64_t i_125073 = 0; i_125073 < n_114463; i_125073++) {
            bool cond_125076 = i_125073 == (int64_t) 0;
            float defunc_0_f_res_125077;
            
            if (cond_125076) {
                float defunc_0_f_res_t_res_125078 = defunc_2_reduce_res_115056 /
                      3.0F;
                
                defunc_0_f_res_125077 = defunc_0_f_res_t_res_125078;
            } else {
                int64_t x_125079 = add64((int64_t) 3, i_125073);
                int64_t i_125080 = sub64(x_125079, (int64_t) 1);
                bool x_125081 = sle64((int64_t) 0, i_125080);
                bool y_125082 = slt64(i_125080, lifted_single_ma_arg_114900);
                bool bounds_check_125083 = x_125081 && y_125082;
                bool index_certs_125084;
                
                if (!bounds_check_125083) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125080,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125085 = ((float *) mem_122218)[i_125080];
                int64_t i_125086 = sub64(i_125073, (int64_t) 1);
                bool x_125087 = sle64((int64_t) 0, i_125086);
                bool y_125088 = slt64(i_125086, lifted_single_ma_arg_114900);
                bool bounds_check_125089 = x_125087 && y_125088;
                bool index_certs_125090;
                
                if (!bounds_check_125089) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125086,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125091 = ((float *) mem_122218)[i_125086];
                float x_125092 = x_125085 - y_125091;
                float defunc_0_f_res_f_res_125093 = x_125092 / 3.0F;
                
                defunc_0_f_res_125077 = defunc_0_f_res_f_res_125093;
            }
            
            float defunc_1_op_res_125094 = defunc_0_f_res_125077 +
                  scanacc_125074;
            
            ((float *) mem_122233)[i_125073] = defunc_1_op_res_125094;
            
            float scanacc_tmp_125105 = defunc_1_op_res_125094;
            
            scanacc_125074 = scanacc_tmp_125105;
        }
        discard_121258 = scanacc_125074;
        memmove(mem_122249.mem + gtid_117509 * n_114463 * (int64_t) 4,
                mem_122233 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122203);
    free(mem_122218);
    free(mem_122233);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131098_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131098_end -
                 futhark_mc_segmap_parloop_131098_start;
        
        ctx->futhark_mc_segmap_parloop_131098_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131098_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131098_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131096(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117508 = tid;
    int num_tasks_125012 = info.nsubtasks;
    struct futhark_mc_task_131095 *futhark_mc_task_131095 =
                                  (struct futhark_mc_task_131095 *) args;
    struct futhark_context *ctx = futhark_mc_task_131095->ctx;
    uint64_t futhark_mc_segmap_task_131096_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131096_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131095->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131095->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131095->free_n_p_114465;
    float i64_res_114505 = futhark_mc_task_131095->free_i64_res_114505;
    int64_t C_len_114511 = futhark_mc_task_131095->free_C_len_114511;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_task_131095->free_lifted_single_ma_arg_114883;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_task_131095->free_lifted_single_ma_arg_114900;
    int64_t bytes_121846 = futhark_mc_task_131095->free_bytes_121846;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131095->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t bytes_122192 = futhark_mc_task_131095->free_bytes_122192;
    int64_t bytes_122195 = futhark_mc_task_131095->free_bytes_122195;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131095->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t iter_125013;
    struct futhark_mc_segmap_parloop_struct_131097
    futhark_mc_segmap_parloop_struct_131097;
    
    futhark_mc_segmap_parloop_struct_131097.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131097.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131097.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131097.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131097.free_i64_res_114505 =
        i64_res_114505;
    futhark_mc_segmap_parloop_struct_131097.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131097.free_lifted_single_ma_arg_114883 =
        lifted_single_ma_arg_114883;
    futhark_mc_segmap_parloop_struct_131097.free_lifted_single_ma_arg_114900 =
        lifted_single_ma_arg_114900;
    futhark_mc_segmap_parloop_struct_131097.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131097.free_mem_122191 = mem_122191.mem;
    futhark_mc_segmap_parloop_struct_131097.free_bytes_122192 = bytes_122192;
    futhark_mc_segmap_parloop_struct_131097.free_bytes_122195 = bytes_122195;
    futhark_mc_segmap_parloop_struct_131097.free_mem_122249 = mem_122249.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131098_task;
    
    futhark_mc_segmap_parloop_131098_task.name =
        "futhark_mc_segmap_parloop_131098";
    futhark_mc_segmap_parloop_131098_task.fn = futhark_mc_segmap_parloop_131098;
    futhark_mc_segmap_parloop_131098_task.args =
        &futhark_mc_segmap_parloop_struct_131097;
    futhark_mc_segmap_parloop_131098_task.iterations = iterations;
    futhark_mc_segmap_parloop_131098_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131098_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131098_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131098_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131098_task);
    
    if (futhark_mc_segmap_parloop_131098_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131098_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131098_total_end -
                 futhark_mc_segmap_parloop_131098_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131098_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131098_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131098_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131096_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131096_end -
                 futhark_mc_segmap_task_131096_start;
        
        ctx->futhark_mc_segmap_task_131096_runs[tid]++;
        ctx->futhark_mc_segmap_task_131096_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131096_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131103 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_lifted_single_ma_arg_114883;
    int64_t free_lifted_single_ma_arg_114900;
    int64_t free_bytes_121846;
    char *free_mem_122191;
    int64_t free_bytes_122192;
    int64_t free_bytes_122195;
    char *free_mem_122249;
};
struct futhark_mc_task_131108 {
    struct futhark_context *ctx;
    int64_t free_C_len_114511;
    int64_t free_gtid_117511;
    char *free_mem_122191;
    float *retval_defunc_2_reduce_res_117526;
};
struct futhark_mc_segred_stage_1_parloop_struct_131111 {
    struct futhark_context *ctx;
    int64_t free_C_len_114511;
    int64_t free_gtid_117511;
    char *free_mem_122191;
    char *free_reduce_stage_1_tid_res_arr_mem_125186;
};
static int futhark_mc_segred_stage_1_parloop_131112(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117512,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131111
    *futhark_mc_segred_stage_1_parloop_struct_131111 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131111 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131111->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131112_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131112_start = get_wall_time();
    
    int64_t C_len_114511 =
            futhark_mc_segred_stage_1_parloop_struct_131111->free_C_len_114511;
    int64_t gtid_117511 =
            futhark_mc_segred_stage_1_parloop_struct_131111->free_gtid_117511;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131111->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125186 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125186",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131111->free_reduce_stage_1_tid_res_arr_mem_125186,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125188 = start;
    float x_125108;
    float x_125109;
    float local_acc_125189 = 0.0F;
    
    for (; iter_125188 < end; iter_125188++) {
        int64_t gtid_117513 = iter_125188;
        float x_125111 = ((float *) mem_122191.mem)[gtid_117511 * C_len_114511 +
                                                    gtid_117513];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125108 = local_acc_125189;
        }
        // Load next params
        {
            x_125109 = x_125111;
        }
        // Red body
        {
            float defunc_1_op_res_125110 = x_125108 + x_125109;
            
            local_acc_125189 = defunc_1_op_res_125110;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125186.mem)[flat_tid_117512] =
        local_acc_125189;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131112_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131112_end -
                 futhark_mc_segred_stage_1_parloop_131112_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131112_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131112_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131112_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131109(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117512 = tid;
    int num_tasks_125185 = info.nsubtasks;
    struct futhark_mc_task_131108 *futhark_mc_task_131108 =
                                  (struct futhark_mc_task_131108 *) args;
    struct futhark_context *ctx = futhark_mc_task_131108->ctx;
    uint64_t futhark_mc_segred_task_131109_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131109_start = get_wall_time();
    
    int64_t C_len_114511 = futhark_mc_task_131108->free_C_len_114511;
    int64_t gtid_117511 = futhark_mc_task_131108->free_gtid_117511;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131108->free_mem_122191,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117526 =
          *futhark_mc_task_131108->retval_defunc_2_reduce_res_117526;
    size_t reduce_stage_1_tid_res_arr_mem_125186_cached_sizze_131110 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125186 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125186_cached_sizze_131110 <
        (size_t) ((int64_t) 4 * num_tasks_125185)) {
        reduce_stage_1_tid_res_arr_mem_125186 =
            realloc(reduce_stage_1_tid_res_arr_mem_125186, (int64_t) 4 *
                    num_tasks_125185);
        reduce_stage_1_tid_res_arr_mem_125186_cached_sizze_131110 =
            (int64_t) 4 * num_tasks_125185;
    }
    
    int64_t iter_125188;
    struct futhark_mc_segred_stage_1_parloop_struct_131111
    futhark_mc_segred_stage_1_parloop_struct_131111;
    
    futhark_mc_segred_stage_1_parloop_struct_131111.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131111.free_C_len_114511 =
        C_len_114511;
    futhark_mc_segred_stage_1_parloop_struct_131111.free_gtid_117511 =
        gtid_117511;
    futhark_mc_segred_stage_1_parloop_struct_131111.free_mem_122191 =
        mem_122191.mem;
    futhark_mc_segred_stage_1_parloop_struct_131111.free_reduce_stage_1_tid_res_arr_mem_125186 =
        reduce_stage_1_tid_res_arr_mem_125186;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131112_task;
    
    futhark_mc_segred_stage_1_parloop_131112_task.name =
        "futhark_mc_segred_stage_1_parloop_131112";
    futhark_mc_segred_stage_1_parloop_131112_task.fn =
        futhark_mc_segred_stage_1_parloop_131112;
    futhark_mc_segred_stage_1_parloop_131112_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131111;
    futhark_mc_segred_stage_1_parloop_131112_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131112_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131112_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131112_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131112_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131112_task);
    
    if (futhark_mc_segred_stage_1_parloop_131112_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131112_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131112_total_end -
                 futhark_mc_segred_stage_1_parloop_131112_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131112_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131112_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131112_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117526 = 0.0F;
    }
    
    float x_125190;
    float x_125191;
    
    for (int32_t i_125193 = 0; i_125193 < num_tasks_125185; i_125193++) {
        flat_tid_117512 = i_125193;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125190 = defunc_2_reduce_res_117526;
            }
            // load next params
            {
                x_125191 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125186)[flat_tid_117512];
            }
            // red body
            {
                float defunc_1_op_res_125192 = x_125190 + x_125191;
                
                defunc_2_reduce_res_117526 = defunc_1_op_res_125192;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125186);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131109_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131109_end -
                 futhark_mc_segred_task_131109_start;
        
        ctx->futhark_mc_segred_task_131109_runs[tid]++;
        ctx->futhark_mc_segred_task_131109_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131109_iter[tid] += iterations;
    }
    *futhark_mc_task_131108->retval_defunc_2_reduce_res_117526 =
        defunc_2_reduce_res_117526;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131113 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_lifted_single_ma_arg_114883;
    int64_t free_gtid_117511;
    float free_defunc_2_reduce_res_117526;
    char *free_mem_122191;
    char *free_mem_122194;
};
struct futhark_mc_scan_stage_1_parloop_struct_131116 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_gtid_117511;
    float free_defunc_2_reduce_res_117526;
    char *free_mem_122191;
    char *free_mem_122194;
};
static int futhark_mc_scan_stage_1_parloop_131117(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117514, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131116
    *futhark_mc_scan_stage_1_parloop_struct_131116 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131116 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131116->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131117_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131117_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_scan_stage_1_parloop_struct_131116->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_scan_stage_1_parloop_struct_131116->free_i64_res_114505;
    int64_t C_len_114511 =
            futhark_mc_scan_stage_1_parloop_struct_131116->free_C_len_114511;
    int64_t gtid_117511 =
            futhark_mc_scan_stage_1_parloop_struct_131116->free_gtid_117511;
    float defunc_2_reduce_res_117526 =
          futhark_mc_scan_stage_1_parloop_struct_131116->free_defunc_2_reduce_res_117526;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131116->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131116->free_mem_122194,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125195 = start;
    float x_125112;
    float x_125113;
    
    x_125112 = 0.0F;
    for (; iter_125195 < end; iter_125195++) {
        int64_t gtid_117515 = iter_125195;
        
        // stage 1 scan body
        {
            bool cond_125115 = gtid_117515 == (int64_t) 0;
            float defunc_0_f_res_125116;
            
            if (cond_125115) {
                float defunc_0_f_res_t_res_125117 = defunc_2_reduce_res_117526 /
                      i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_t_res_125117;
            } else {
                int64_t x_125118 = add64(n_p_114465, gtid_117515);
                int64_t i_125119 = sub64(x_125118, (int64_t) 1);
                bool x_125120 = sle64((int64_t) 0, i_125119);
                bool y_125121 = slt64(i_125119, C_len_114511);
                bool bounds_check_125122 = x_125120 && y_125121;
                bool index_certs_125123;
                
                if (!bounds_check_125122) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125119,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125124 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125119];
                int64_t i_125125 = sub64(gtid_117515, (int64_t) 1);
                bool x_125126 = sle64((int64_t) 0, i_125125);
                bool y_125127 = slt64(i_125125, C_len_114511);
                bool bounds_check_125128 = x_125126 && y_125127;
                bool index_certs_125129;
                
                if (!bounds_check_125128) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125125,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125130 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125125];
                float x_125131 = x_125124 - y_125130;
                float defunc_0_f_res_f_res_125132 = x_125131 / i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_f_res_125132;
            }
            // write mapped values results to memory
            { }
            x_125112 = x_125112;
            // Read next values
            {
                x_125113 = defunc_0_f_res_125116;
            }
            
            float defunc_1_op_res_125114 = x_125112 + x_125113;
            
            ((float *) mem_122194.mem)[gtid_117515] = defunc_1_op_res_125114;
            x_125112 = defunc_1_op_res_125114;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131117_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131117_end -
                 futhark_mc_scan_stage_1_parloop_131117_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131117_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131117_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131117_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131118 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_C_len_114511;
    int64_t free_gtid_117511;
    float free_defunc_2_reduce_res_117526;
    char *free_mem_122191;
    char *free_mem_122194;
};
static int futhark_mc_scan_stage_3_parloop_131119(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117514, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131118
    *futhark_mc_scan_stage_3_parloop_struct_131118 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131118 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131118->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131119_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131119_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_scan_stage_3_parloop_struct_131118->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_scan_stage_3_parloop_struct_131118->free_i64_res_114505;
    int64_t C_len_114511 =
            futhark_mc_scan_stage_3_parloop_struct_131118->free_C_len_114511;
    int64_t gtid_117511 =
            futhark_mc_scan_stage_3_parloop_struct_131118->free_gtid_117511;
    float defunc_2_reduce_res_117526 =
          futhark_mc_scan_stage_3_parloop_struct_131118->free_defunc_2_reduce_res_117526;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131118->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131118->free_mem_122194,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125207 = start;
    float x_125204;
    float x_125205;
    
    if (iter_125207 == (int64_t) 0) {
        x_125204 = 0.0F;
    } else {
        x_125204 = ((float *) mem_122194.mem)[iter_125207 - (int64_t) 1];
    }
    for (; iter_125207 < end; iter_125207++) {
        int64_t gtid_117515 = iter_125207;
        
        // stage 3 scan body
        {
            bool cond_125115 = gtid_117515 == (int64_t) 0;
            float defunc_0_f_res_125116;
            
            if (cond_125115) {
                float defunc_0_f_res_t_res_125117 = defunc_2_reduce_res_117526 /
                      i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_t_res_125117;
            } else {
                int64_t x_125118 = add64(n_p_114465, gtid_117515);
                int64_t i_125119 = sub64(x_125118, (int64_t) 1);
                bool x_125120 = sle64((int64_t) 0, i_125119);
                bool y_125121 = slt64(i_125119, C_len_114511);
                bool bounds_check_125122 = x_125120 && y_125121;
                bool index_certs_125123;
                
                if (!bounds_check_125122) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125119,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125124 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125119];
                int64_t i_125125 = sub64(gtid_117515, (int64_t) 1);
                bool x_125126 = sle64((int64_t) 0, i_125125);
                bool y_125127 = slt64(i_125125, C_len_114511);
                bool bounds_check_125128 = x_125126 && y_125127;
                bool index_certs_125129;
                
                if (!bounds_check_125128) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125125,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125130 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125125];
                float x_125131 = x_125124 - y_125130;
                float defunc_0_f_res_f_res_125132 = x_125131 / i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_f_res_125132;
            }
            x_125204 = x_125204;
            x_125205 = defunc_0_f_res_125116;
            
            float defunc_1_op_res_125206 = x_125204 + x_125205;
            
            ((float *) mem_122194.mem)[gtid_117515] = defunc_1_op_res_125206;
            x_125204 = defunc_1_op_res_125206;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131119_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131119_end -
                 futhark_mc_scan_stage_3_parloop_131119_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131119_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131119_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131119_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131114(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117514 = tid;
    int num_tasks_125194 = info.nsubtasks;
    struct futhark_mc_task_131113 *futhark_mc_task_131113 =
                                  (struct futhark_mc_task_131113 *) args;
    struct futhark_context *ctx = futhark_mc_task_131113->ctx;
    uint64_t futhark_mc_segscan_task_131114_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131114_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_131113->free_n_p_114465;
    float i64_res_114505 = futhark_mc_task_131113->free_i64_res_114505;
    int64_t C_len_114511 = futhark_mc_task_131113->free_C_len_114511;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_task_131113->free_lifted_single_ma_arg_114883;
    int64_t gtid_117511 = futhark_mc_task_131113->free_gtid_117511;
    float defunc_2_reduce_res_117526 =
          futhark_mc_task_131113->free_defunc_2_reduce_res_117526;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131113->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_task_131113->free_mem_122194,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125201_cached_sizze_131115 = 0;
    char *scan_stage_2_accum_mem_125201 = NULL;
    int64_t iter_125195;
    struct futhark_mc_scan_stage_1_parloop_struct_131116
    futhark_mc_scan_stage_1_parloop_struct_131116;
    
    futhark_mc_scan_stage_1_parloop_struct_131116.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_n_p_114465 = n_p_114465;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_i64_res_114505 =
        i64_res_114505;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_C_len_114511 =
        C_len_114511;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_gtid_117511 =
        gtid_117511;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_defunc_2_reduce_res_117526 =
        defunc_2_reduce_res_117526;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_mem_122191 =
        mem_122191.mem;
    futhark_mc_scan_stage_1_parloop_struct_131116.free_mem_122194 =
        mem_122194.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131117_task;
    
    futhark_mc_scan_stage_1_parloop_131117_task.name =
        "futhark_mc_scan_stage_1_parloop_131117";
    futhark_mc_scan_stage_1_parloop_131117_task.fn =
        futhark_mc_scan_stage_1_parloop_131117;
    futhark_mc_scan_stage_1_parloop_131117_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131116;
    futhark_mc_scan_stage_1_parloop_131117_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131117_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131117_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131117_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131117_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131117_task);
    
    if (futhark_mc_scan_stage_1_parloop_131117_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131117_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131117_total_end -
                 futhark_mc_scan_stage_1_parloop_131117_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131117_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131117_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131117_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125194)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125196;
        float x_125197;
        int64_t offset_125199 = (int64_t) 0;
        int64_t offset_index_125200 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125201_cached_sizze_131115 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125201 =
                realloc(scan_stage_2_accum_mem_125201, (int64_t) 4);
            scan_stage_2_accum_mem_125201_cached_sizze_131115 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125201)[(int64_t) 0] = 0.0F;
        for (int32_t i_125203 = 0; i_125203 < num_tasks_125194 - 1;
             i_125203++) {
            offset_125199 = squot64(lifted_single_ma_arg_114883,
                                    sext_i32_i64(num_tasks_125194));
            if (slt64(sext_i32_i64(i_125203),
                      srem64(lifted_single_ma_arg_114883,
                             sext_i32_i64(num_tasks_125194)))) {
                offset_125199 += (int64_t) 1;
            }
            offset_index_125200 += offset_125199;
            
            int64_t gtid_117515 = offset_index_125200;
            bool cond_125115 = gtid_117515 == (int64_t) 0;
            float defunc_0_f_res_125116;
            
            if (cond_125115) {
                float defunc_0_f_res_t_res_125117 = defunc_2_reduce_res_117526 /
                      i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_t_res_125117;
            } else {
                int64_t x_125118 = add64(n_p_114465, gtid_117515);
                int64_t i_125119 = sub64(x_125118, (int64_t) 1);
                bool x_125120 = sle64((int64_t) 0, i_125119);
                bool y_125121 = slt64(i_125119, C_len_114511);
                bool bounds_check_125122 = x_125120 && y_125121;
                bool index_certs_125123;
                
                if (!bounds_check_125122) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125119,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125124 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125119];
                int64_t i_125125 = sub64(gtid_117515, (int64_t) 1);
                bool x_125126 = sle64((int64_t) 0, i_125125);
                bool y_125127 = slt64(i_125125, C_len_114511);
                bool bounds_check_125128 = x_125126 && y_125127;
                bool index_certs_125129;
                
                if (!bounds_check_125128) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125125,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_114511, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125130 = ((float *) mem_122191.mem)[gtid_117511 *
                                                            C_len_114511 +
                                                            i_125125];
                float x_125131 = x_125124 - y_125130;
                float defunc_0_f_res_f_res_125132 = x_125131 / i64_res_114505;
                
                defunc_0_f_res_125116 = defunc_0_f_res_f_res_125132;
            }
            // Read carry in
            {
                x_125196 =
                    ((float *) scan_stage_2_accum_mem_125201)[(int64_t) 0];
            }
            // Read next values
            {
                x_125197 = ((float *) mem_122194.mem)[offset_index_125200 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125198 = x_125196 + x_125197;
            
            ((float *) mem_122194.mem)[offset_index_125200 - (int64_t) 1] =
                defunc_1_op_res_125198;
            ((float *) scan_stage_2_accum_mem_125201)[(int64_t) 0] =
                defunc_1_op_res_125198;
        }
        
        int64_t iter_125207 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131118
        futhark_mc_scan_stage_3_parloop_struct_131118;
        
        futhark_mc_scan_stage_3_parloop_struct_131118.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_n_p_114465 =
            n_p_114465;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_i64_res_114505 =
            i64_res_114505;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_C_len_114511 =
            C_len_114511;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_gtid_117511 =
            gtid_117511;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_defunc_2_reduce_res_117526 =
            defunc_2_reduce_res_117526;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_mem_122191 =
            mem_122191.mem;
        futhark_mc_scan_stage_3_parloop_struct_131118.free_mem_122194 =
            mem_122194.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131119_task;
        
        futhark_mc_scan_stage_3_parloop_131119_task.name =
            "futhark_mc_scan_stage_3_parloop_131119";
        futhark_mc_scan_stage_3_parloop_131119_task.fn =
            futhark_mc_scan_stage_3_parloop_131119;
        futhark_mc_scan_stage_3_parloop_131119_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131118;
        futhark_mc_scan_stage_3_parloop_131119_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131119_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131119_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131119_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131119_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131119_task);
        
        if (futhark_mc_scan_stage_3_parloop_131119_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131119_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131119_total_end -
                     futhark_mc_scan_stage_3_parloop_131119_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131119_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131119_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131119_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125201);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131114_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131114_end -
                 futhark_mc_segscan_task_131114_start;
        
        ctx->futhark_mc_segscan_task_131114_runs[tid]++;
        ctx->futhark_mc_segscan_task_131114_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131114_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131120 {
    struct futhark_context *ctx;
    char *free_mem_122194;
    float *retval_defunc_2_reduce_res_117555;
};
struct futhark_mc_segred_stage_1_parloop_struct_131123 {
    struct futhark_context *ctx;
    char *free_mem_122194;
    char *free_reduce_stage_1_tid_res_arr_mem_125209;
};
static int futhark_mc_segred_stage_1_parloop_131124(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117516,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131123
    *futhark_mc_segred_stage_1_parloop_struct_131123 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131123 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131123->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131124_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131124_start = get_wall_time();
    
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131123->free_mem_122194,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125209 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125209",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131123->free_reduce_stage_1_tid_res_arr_mem_125209,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125211 = start;
    float x_125133;
    float x_125134;
    float local_acc_125212 = 0.0F;
    
    for (; iter_125211 < end; iter_125211++) {
        int64_t gtid_117517 = iter_125211;
        float x_125136 = ((float *) mem_122194.mem)[gtid_117517];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125133 = local_acc_125212;
        }
        // Load next params
        {
            x_125134 = x_125136;
        }
        // Red body
        {
            float defunc_1_op_res_125135 = x_125133 + x_125134;
            
            local_acc_125212 = defunc_1_op_res_125135;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125209.mem)[flat_tid_117516] =
        local_acc_125212;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131124_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131124_end -
                 futhark_mc_segred_stage_1_parloop_131124_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131124_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131124_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131124_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131121(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117516 = tid;
    int num_tasks_125208 = info.nsubtasks;
    struct futhark_mc_task_131120 *futhark_mc_task_131120 =
                                  (struct futhark_mc_task_131120 *) args;
    struct futhark_context *ctx = futhark_mc_task_131120->ctx;
    uint64_t futhark_mc_segred_task_131121_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131121_start = get_wall_time();
    
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_task_131120->free_mem_122194,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117555 =
          *futhark_mc_task_131120->retval_defunc_2_reduce_res_117555;
    size_t reduce_stage_1_tid_res_arr_mem_125209_cached_sizze_131122 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125209 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125209_cached_sizze_131122 <
        (size_t) ((int64_t) 4 * num_tasks_125208)) {
        reduce_stage_1_tid_res_arr_mem_125209 =
            realloc(reduce_stage_1_tid_res_arr_mem_125209, (int64_t) 4 *
                    num_tasks_125208);
        reduce_stage_1_tid_res_arr_mem_125209_cached_sizze_131122 =
            (int64_t) 4 * num_tasks_125208;
    }
    
    int64_t iter_125211;
    struct futhark_mc_segred_stage_1_parloop_struct_131123
    futhark_mc_segred_stage_1_parloop_struct_131123;
    
    futhark_mc_segred_stage_1_parloop_struct_131123.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131123.free_mem_122194 =
        mem_122194.mem;
    futhark_mc_segred_stage_1_parloop_struct_131123.free_reduce_stage_1_tid_res_arr_mem_125209 =
        reduce_stage_1_tid_res_arr_mem_125209;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131124_task;
    
    futhark_mc_segred_stage_1_parloop_131124_task.name =
        "futhark_mc_segred_stage_1_parloop_131124";
    futhark_mc_segred_stage_1_parloop_131124_task.fn =
        futhark_mc_segred_stage_1_parloop_131124;
    futhark_mc_segred_stage_1_parloop_131124_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131123;
    futhark_mc_segred_stage_1_parloop_131124_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131124_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131124_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131124_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131124_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131124_task);
    
    if (futhark_mc_segred_stage_1_parloop_131124_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131124_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131124_total_end -
                 futhark_mc_segred_stage_1_parloop_131124_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131124_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131124_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131124_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117555 = 0.0F;
    }
    
    float x_125213;
    float x_125214;
    
    for (int32_t i_125216 = 0; i_125216 < num_tasks_125208; i_125216++) {
        flat_tid_117516 = i_125216;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125213 = defunc_2_reduce_res_117555;
            }
            // load next params
            {
                x_125214 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125209)[flat_tid_117516];
            }
            // red body
            {
                float defunc_1_op_res_125215 = x_125213 + x_125214;
                
                defunc_2_reduce_res_117555 = defunc_1_op_res_125215;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125209);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131121_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131121_end -
                 futhark_mc_segred_task_131121_start;
        
        ctx->futhark_mc_segred_task_131121_runs[tid]++;
        ctx->futhark_mc_segred_task_131121_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131121_iter[tid] += iterations;
    }
    *futhark_mc_task_131120->retval_defunc_2_reduce_res_117555 =
        defunc_2_reduce_res_117555;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131125 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_lifted_single_ma_arg_114883;
    int64_t free_lifted_single_ma_arg_114900;
    float free_defunc_2_reduce_res_117555;
    char *free_mem_122194;
    char *free_mem_122197;
};
struct futhark_mc_scan_stage_1_parloop_struct_131128 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_lifted_single_ma_arg_114883;
    float free_defunc_2_reduce_res_117555;
    char *free_mem_122194;
    char *free_mem_122197;
};
static int futhark_mc_scan_stage_1_parloop_131129(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117518, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131128
    *futhark_mc_scan_stage_1_parloop_struct_131128 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131128 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131128->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131129_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131129_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_scan_stage_1_parloop_struct_131128->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_scan_stage_1_parloop_struct_131128->free_i64_res_114505;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_scan_stage_1_parloop_struct_131128->free_lifted_single_ma_arg_114883;
    float defunc_2_reduce_res_117555 =
          futhark_mc_scan_stage_1_parloop_struct_131128->free_defunc_2_reduce_res_117555;
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131128->free_mem_122194,
                                  .size =0, .references =NULL};
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131128->free_mem_122197,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125218 = start;
    float x_125137;
    float x_125138;
    
    x_125137 = 0.0F;
    for (; iter_125218 < end; iter_125218++) {
        int64_t gtid_117519 = iter_125218;
        
        // stage 1 scan body
        {
            bool cond_125140 = gtid_117519 == (int64_t) 0;
            float defunc_0_f_res_125141;
            
            if (cond_125140) {
                float defunc_0_f_res_t_res_125142 = defunc_2_reduce_res_117555 /
                      i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_t_res_125142;
            } else {
                int64_t x_125143 = add64(n_p_114465, gtid_117519);
                int64_t i_125144 = sub64(x_125143, (int64_t) 1);
                bool x_125145 = sle64((int64_t) 0, i_125144);
                bool y_125146 = slt64(i_125144, lifted_single_ma_arg_114883);
                bool bounds_check_125147 = x_125145 && y_125146;
                bool index_certs_125148;
                
                if (!bounds_check_125147) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125144,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125149 = ((float *) mem_122194.mem)[i_125144];
                int64_t i_125150 = sub64(gtid_117519, (int64_t) 1);
                bool x_125151 = sle64((int64_t) 0, i_125150);
                bool y_125152 = slt64(i_125150, lifted_single_ma_arg_114883);
                bool bounds_check_125153 = x_125151 && y_125152;
                bool index_certs_125154;
                
                if (!bounds_check_125153) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125150,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125155 = ((float *) mem_122194.mem)[i_125150];
                float x_125156 = x_125149 - y_125155;
                float defunc_0_f_res_f_res_125157 = x_125156 / i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_f_res_125157;
            }
            // write mapped values results to memory
            { }
            x_125137 = x_125137;
            // Read next values
            {
                x_125138 = defunc_0_f_res_125141;
            }
            
            float defunc_1_op_res_125139 = x_125137 + x_125138;
            
            ((float *) mem_122197.mem)[gtid_117519] = defunc_1_op_res_125139;
            x_125137 = defunc_1_op_res_125139;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131129_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131129_end -
                 futhark_mc_scan_stage_1_parloop_131129_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131129_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131129_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131129_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131130 {
    struct futhark_context *ctx;
    int64_t free_n_p_114465;
    float free_i64_res_114505;
    int64_t free_lifted_single_ma_arg_114883;
    float free_defunc_2_reduce_res_117555;
    char *free_mem_122194;
    char *free_mem_122197;
};
static int futhark_mc_scan_stage_3_parloop_131131(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117518, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131130
    *futhark_mc_scan_stage_3_parloop_struct_131130 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131130 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131130->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131131_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131131_start = get_wall_time();
    
    int64_t n_p_114465 =
            futhark_mc_scan_stage_3_parloop_struct_131130->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_scan_stage_3_parloop_struct_131130->free_i64_res_114505;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_scan_stage_3_parloop_struct_131130->free_lifted_single_ma_arg_114883;
    float defunc_2_reduce_res_117555 =
          futhark_mc_scan_stage_3_parloop_struct_131130->free_defunc_2_reduce_res_117555;
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131130->free_mem_122194,
                                  .size =0, .references =NULL};
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131130->free_mem_122197,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125230 = start;
    float x_125227;
    float x_125228;
    
    if (iter_125230 == (int64_t) 0) {
        x_125227 = 0.0F;
    } else {
        x_125227 = ((float *) mem_122197.mem)[iter_125230 - (int64_t) 1];
    }
    for (; iter_125230 < end; iter_125230++) {
        int64_t gtid_117519 = iter_125230;
        
        // stage 3 scan body
        {
            bool cond_125140 = gtid_117519 == (int64_t) 0;
            float defunc_0_f_res_125141;
            
            if (cond_125140) {
                float defunc_0_f_res_t_res_125142 = defunc_2_reduce_res_117555 /
                      i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_t_res_125142;
            } else {
                int64_t x_125143 = add64(n_p_114465, gtid_117519);
                int64_t i_125144 = sub64(x_125143, (int64_t) 1);
                bool x_125145 = sle64((int64_t) 0, i_125144);
                bool y_125146 = slt64(i_125144, lifted_single_ma_arg_114883);
                bool bounds_check_125147 = x_125145 && y_125146;
                bool index_certs_125148;
                
                if (!bounds_check_125147) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125144,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125149 = ((float *) mem_122194.mem)[i_125144];
                int64_t i_125150 = sub64(gtid_117519, (int64_t) 1);
                bool x_125151 = sle64((int64_t) 0, i_125150);
                bool y_125152 = slt64(i_125150, lifted_single_ma_arg_114883);
                bool bounds_check_125153 = x_125151 && y_125152;
                bool index_certs_125154;
                
                if (!bounds_check_125153) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125150,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125155 = ((float *) mem_122194.mem)[i_125150];
                float x_125156 = x_125149 - y_125155;
                float defunc_0_f_res_f_res_125157 = x_125156 / i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_f_res_125157;
            }
            x_125227 = x_125227;
            x_125228 = defunc_0_f_res_125141;
            
            float defunc_1_op_res_125229 = x_125227 + x_125228;
            
            ((float *) mem_122197.mem)[gtid_117519] = defunc_1_op_res_125229;
            x_125227 = defunc_1_op_res_125229;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131131_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131131_end -
                 futhark_mc_scan_stage_3_parloop_131131_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131131_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131131_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131131_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131126(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117518 = tid;
    int num_tasks_125217 = info.nsubtasks;
    struct futhark_mc_task_131125 *futhark_mc_task_131125 =
                                  (struct futhark_mc_task_131125 *) args;
    struct futhark_context *ctx = futhark_mc_task_131125->ctx;
    uint64_t futhark_mc_segscan_task_131126_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131126_start = get_wall_time();
    
    int64_t n_p_114465 = futhark_mc_task_131125->free_n_p_114465;
    float i64_res_114505 = futhark_mc_task_131125->free_i64_res_114505;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_task_131125->free_lifted_single_ma_arg_114883;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_task_131125->free_lifted_single_ma_arg_114900;
    float defunc_2_reduce_res_117555 =
          futhark_mc_task_131125->free_defunc_2_reduce_res_117555;
    struct memblock mem_122194 = {.desc ="mem_122194", .mem =
                                  futhark_mc_task_131125->free_mem_122194,
                                  .size =0, .references =NULL};
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_task_131125->free_mem_122197,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125224_cached_sizze_131127 = 0;
    char *scan_stage_2_accum_mem_125224 = NULL;
    int64_t iter_125218;
    struct futhark_mc_scan_stage_1_parloop_struct_131128
    futhark_mc_scan_stage_1_parloop_struct_131128;
    
    futhark_mc_scan_stage_1_parloop_struct_131128.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_n_p_114465 = n_p_114465;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_i64_res_114505 =
        i64_res_114505;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_lifted_single_ma_arg_114883 =
        lifted_single_ma_arg_114883;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_defunc_2_reduce_res_117555 =
        defunc_2_reduce_res_117555;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_mem_122194 =
        mem_122194.mem;
    futhark_mc_scan_stage_1_parloop_struct_131128.free_mem_122197 =
        mem_122197.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131129_task;
    
    futhark_mc_scan_stage_1_parloop_131129_task.name =
        "futhark_mc_scan_stage_1_parloop_131129";
    futhark_mc_scan_stage_1_parloop_131129_task.fn =
        futhark_mc_scan_stage_1_parloop_131129;
    futhark_mc_scan_stage_1_parloop_131129_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131128;
    futhark_mc_scan_stage_1_parloop_131129_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131129_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131129_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131129_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131129_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131129_task);
    
    if (futhark_mc_scan_stage_1_parloop_131129_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131129_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131129_total_end -
                 futhark_mc_scan_stage_1_parloop_131129_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131129_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131129_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131129_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125217)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125219;
        float x_125220;
        int64_t offset_125222 = (int64_t) 0;
        int64_t offset_index_125223 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125224_cached_sizze_131127 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125224 =
                realloc(scan_stage_2_accum_mem_125224, (int64_t) 4);
            scan_stage_2_accum_mem_125224_cached_sizze_131127 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125224)[(int64_t) 0] = 0.0F;
        for (int32_t i_125226 = 0; i_125226 < num_tasks_125217 - 1;
             i_125226++) {
            offset_125222 = squot64(lifted_single_ma_arg_114900,
                                    sext_i32_i64(num_tasks_125217));
            if (slt64(sext_i32_i64(i_125226),
                      srem64(lifted_single_ma_arg_114900,
                             sext_i32_i64(num_tasks_125217)))) {
                offset_125222 += (int64_t) 1;
            }
            offset_index_125223 += offset_125222;
            
            int64_t gtid_117519 = offset_index_125223;
            bool cond_125140 = gtid_117519 == (int64_t) 0;
            float defunc_0_f_res_125141;
            
            if (cond_125140) {
                float defunc_0_f_res_t_res_125142 = defunc_2_reduce_res_117555 /
                      i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_t_res_125142;
            } else {
                int64_t x_125143 = add64(n_p_114465, gtid_117519);
                int64_t i_125144 = sub64(x_125143, (int64_t) 1);
                bool x_125145 = sle64((int64_t) 0, i_125144);
                bool y_125146 = slt64(i_125144, lifted_single_ma_arg_114883);
                bool bounds_check_125147 = x_125145 && y_125146;
                bool index_certs_125148;
                
                if (!bounds_check_125147) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125144,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125149 = ((float *) mem_122194.mem)[i_125144];
                int64_t i_125150 = sub64(gtid_117519, (int64_t) 1);
                bool x_125151 = sle64((int64_t) 0, i_125150);
                bool y_125152 = slt64(i_125150, lifted_single_ma_arg_114883);
                bool bounds_check_125153 = x_125151 && y_125152;
                bool index_certs_125154;
                
                if (!bounds_check_125153) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125150,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114883, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125155 = ((float *) mem_122194.mem)[i_125150];
                float x_125156 = x_125149 - y_125155;
                float defunc_0_f_res_f_res_125157 = x_125156 / i64_res_114505;
                
                defunc_0_f_res_125141 = defunc_0_f_res_f_res_125157;
            }
            // Read carry in
            {
                x_125219 =
                    ((float *) scan_stage_2_accum_mem_125224)[(int64_t) 0];
            }
            // Read next values
            {
                x_125220 = ((float *) mem_122197.mem)[offset_index_125223 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125221 = x_125219 + x_125220;
            
            ((float *) mem_122197.mem)[offset_index_125223 - (int64_t) 1] =
                defunc_1_op_res_125221;
            ((float *) scan_stage_2_accum_mem_125224)[(int64_t) 0] =
                defunc_1_op_res_125221;
        }
        
        int64_t iter_125230 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131130
        futhark_mc_scan_stage_3_parloop_struct_131130;
        
        futhark_mc_scan_stage_3_parloop_struct_131130.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_n_p_114465 =
            n_p_114465;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_i64_res_114505 =
            i64_res_114505;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_lifted_single_ma_arg_114883 =
            lifted_single_ma_arg_114883;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_defunc_2_reduce_res_117555 =
            defunc_2_reduce_res_117555;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_mem_122194 =
            mem_122194.mem;
        futhark_mc_scan_stage_3_parloop_struct_131130.free_mem_122197 =
            mem_122197.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131131_task;
        
        futhark_mc_scan_stage_3_parloop_131131_task.name =
            "futhark_mc_scan_stage_3_parloop_131131";
        futhark_mc_scan_stage_3_parloop_131131_task.fn =
            futhark_mc_scan_stage_3_parloop_131131;
        futhark_mc_scan_stage_3_parloop_131131_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131130;
        futhark_mc_scan_stage_3_parloop_131131_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131131_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131131_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131131_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131131_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131131_task);
        
        if (futhark_mc_scan_stage_3_parloop_131131_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131131_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131131_total_end -
                     futhark_mc_scan_stage_3_parloop_131131_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131131_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131131_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131131_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125224);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131126_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131126_end -
                 futhark_mc_segscan_task_131126_start;
        
        ctx->futhark_mc_segscan_task_131126_runs[tid]++;
        ctx->futhark_mc_segscan_task_131126_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131126_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131132 {
    struct futhark_context *ctx;
    char *free_mem_122197;
    float *retval_defunc_2_reduce_res_117584;
};
struct futhark_mc_segred_stage_1_parloop_struct_131135 {
    struct futhark_context *ctx;
    char *free_mem_122197;
    char *free_reduce_stage_1_tid_res_arr_mem_125232;
};
static int futhark_mc_segred_stage_1_parloop_131136(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117520,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131135
    *futhark_mc_segred_stage_1_parloop_struct_131135 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131135 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131135->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131136_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131136_start = get_wall_time();
    
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131135->free_mem_122197,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125232 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125232",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131135->free_reduce_stage_1_tid_res_arr_mem_125232,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125234 = start;
    float x_125158;
    float x_125159;
    float local_acc_125235 = 0.0F;
    
    for (; iter_125234 < end; iter_125234++) {
        int64_t gtid_117521 = iter_125234;
        float x_125161 = ((float *) mem_122197.mem)[gtid_117521];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125158 = local_acc_125235;
        }
        // Load next params
        {
            x_125159 = x_125161;
        }
        // Red body
        {
            float defunc_1_op_res_125160 = x_125158 + x_125159;
            
            local_acc_125235 = defunc_1_op_res_125160;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125232.mem)[flat_tid_117520] =
        local_acc_125235;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131136_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131136_end -
                 futhark_mc_segred_stage_1_parloop_131136_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131136_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131136_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131136_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131133(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117520 = tid;
    int num_tasks_125231 = info.nsubtasks;
    struct futhark_mc_task_131132 *futhark_mc_task_131132 =
                                  (struct futhark_mc_task_131132 *) args;
    struct futhark_context *ctx = futhark_mc_task_131132->ctx;
    uint64_t futhark_mc_segred_task_131133_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131133_start = get_wall_time();
    
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_task_131132->free_mem_122197,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_117584 =
          *futhark_mc_task_131132->retval_defunc_2_reduce_res_117584;
    size_t reduce_stage_1_tid_res_arr_mem_125232_cached_sizze_131134 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125232 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125232_cached_sizze_131134 <
        (size_t) ((int64_t) 4 * num_tasks_125231)) {
        reduce_stage_1_tid_res_arr_mem_125232 =
            realloc(reduce_stage_1_tid_res_arr_mem_125232, (int64_t) 4 *
                    num_tasks_125231);
        reduce_stage_1_tid_res_arr_mem_125232_cached_sizze_131134 =
            (int64_t) 4 * num_tasks_125231;
    }
    
    int64_t iter_125234;
    struct futhark_mc_segred_stage_1_parloop_struct_131135
    futhark_mc_segred_stage_1_parloop_struct_131135;
    
    futhark_mc_segred_stage_1_parloop_struct_131135.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131135.free_mem_122197 =
        mem_122197.mem;
    futhark_mc_segred_stage_1_parloop_struct_131135.free_reduce_stage_1_tid_res_arr_mem_125232 =
        reduce_stage_1_tid_res_arr_mem_125232;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131136_task;
    
    futhark_mc_segred_stage_1_parloop_131136_task.name =
        "futhark_mc_segred_stage_1_parloop_131136";
    futhark_mc_segred_stage_1_parloop_131136_task.fn =
        futhark_mc_segred_stage_1_parloop_131136;
    futhark_mc_segred_stage_1_parloop_131136_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131135;
    futhark_mc_segred_stage_1_parloop_131136_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131136_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131136_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131136_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131136_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131136_task);
    
    if (futhark_mc_segred_stage_1_parloop_131136_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131136_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131136_total_end -
                 futhark_mc_segred_stage_1_parloop_131136_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131136_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131136_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131136_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_117584 = 0.0F;
    }
    
    float x_125236;
    float x_125237;
    
    for (int32_t i_125239 = 0; i_125239 < num_tasks_125231; i_125239++) {
        flat_tid_117520 = i_125239;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125236 = defunc_2_reduce_res_117584;
            }
            // load next params
            {
                x_125237 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125232)[flat_tid_117520];
            }
            // red body
            {
                float defunc_1_op_res_125238 = x_125236 + x_125237;
                
                defunc_2_reduce_res_117584 = defunc_1_op_res_125238;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125232);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131133_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131133_end -
                 futhark_mc_segred_task_131133_start;
        
        ctx->futhark_mc_segred_task_131133_runs[tid]++;
        ctx->futhark_mc_segred_task_131133_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131133_iter[tid] += iterations;
    }
    *futhark_mc_task_131132->retval_defunc_2_reduce_res_117584 =
        defunc_2_reduce_res_117584;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131137 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_lifted_single_ma_arg_114900;
    float free_defunc_2_reduce_res_117584;
    char *free_mem_122197;
    char *free_mem_122200;
};
struct futhark_mc_scan_stage_1_parloop_struct_131140 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_114900;
    float free_defunc_2_reduce_res_117584;
    char *free_mem_122197;
    char *free_mem_122200;
};
static int futhark_mc_scan_stage_1_parloop_131141(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117522, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131140
    *futhark_mc_scan_stage_1_parloop_struct_131140 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131140 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131140->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131141_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131141_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_scan_stage_1_parloop_struct_131140->free_lifted_single_ma_arg_114900;
    float defunc_2_reduce_res_117584 =
          futhark_mc_scan_stage_1_parloop_struct_131140->free_defunc_2_reduce_res_117584;
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131140->free_mem_122197,
                                  .size =0, .references =NULL};
    struct memblock mem_122200 = {.desc ="mem_122200", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131140->free_mem_122200,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125241 = start;
    float x_125162;
    float x_125163;
    
    x_125162 = 0.0F;
    for (; iter_125241 < end; iter_125241++) {
        int64_t gtid_117523 = iter_125241;
        
        // stage 1 scan body
        {
            bool cond_125165 = gtid_117523 == (int64_t) 0;
            float defunc_0_f_res_125166;
            
            if (cond_125165) {
                float defunc_0_f_res_t_res_125167 = defunc_2_reduce_res_117584 /
                      3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_t_res_125167;
            } else {
                int64_t x_125168 = add64((int64_t) 3, gtid_117523);
                int64_t i_125169 = sub64(x_125168, (int64_t) 1);
                bool x_125170 = sle64((int64_t) 0, i_125169);
                bool y_125171 = slt64(i_125169, lifted_single_ma_arg_114900);
                bool bounds_check_125172 = x_125170 && y_125171;
                bool index_certs_125173;
                
                if (!bounds_check_125172) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125169,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125174 = ((float *) mem_122197.mem)[i_125169];
                int64_t i_125175 = sub64(gtid_117523, (int64_t) 1);
                bool x_125176 = sle64((int64_t) 0, i_125175);
                bool y_125177 = slt64(i_125175, lifted_single_ma_arg_114900);
                bool bounds_check_125178 = x_125176 && y_125177;
                bool index_certs_125179;
                
                if (!bounds_check_125178) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125175,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125180 = ((float *) mem_122197.mem)[i_125175];
                float x_125181 = x_125174 - y_125180;
                float defunc_0_f_res_f_res_125182 = x_125181 / 3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_f_res_125182;
            }
            // write mapped values results to memory
            { }
            x_125162 = x_125162;
            // Read next values
            {
                x_125163 = defunc_0_f_res_125166;
            }
            
            float defunc_1_op_res_125164 = x_125162 + x_125163;
            
            ((float *) mem_122200.mem)[gtid_117523] = defunc_1_op_res_125164;
            x_125162 = defunc_1_op_res_125164;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131141_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131141_end -
                 futhark_mc_scan_stage_1_parloop_131141_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131141_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131141_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131141_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131142 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_114900;
    float free_defunc_2_reduce_res_117584;
    char *free_mem_122197;
    char *free_mem_122200;
};
static int futhark_mc_scan_stage_3_parloop_131143(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_117522, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131142
    *futhark_mc_scan_stage_3_parloop_struct_131142 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131142 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131142->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131143_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131143_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_scan_stage_3_parloop_struct_131142->free_lifted_single_ma_arg_114900;
    float defunc_2_reduce_res_117584 =
          futhark_mc_scan_stage_3_parloop_struct_131142->free_defunc_2_reduce_res_117584;
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131142->free_mem_122197,
                                  .size =0, .references =NULL};
    struct memblock mem_122200 = {.desc ="mem_122200", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131142->free_mem_122200,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125253 = start;
    float x_125250;
    float x_125251;
    
    if (iter_125253 == (int64_t) 0) {
        x_125250 = 0.0F;
    } else {
        x_125250 = ((float *) mem_122200.mem)[iter_125253 - (int64_t) 1];
    }
    for (; iter_125253 < end; iter_125253++) {
        int64_t gtid_117523 = iter_125253;
        
        // stage 3 scan body
        {
            bool cond_125165 = gtid_117523 == (int64_t) 0;
            float defunc_0_f_res_125166;
            
            if (cond_125165) {
                float defunc_0_f_res_t_res_125167 = defunc_2_reduce_res_117584 /
                      3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_t_res_125167;
            } else {
                int64_t x_125168 = add64((int64_t) 3, gtid_117523);
                int64_t i_125169 = sub64(x_125168, (int64_t) 1);
                bool x_125170 = sle64((int64_t) 0, i_125169);
                bool y_125171 = slt64(i_125169, lifted_single_ma_arg_114900);
                bool bounds_check_125172 = x_125170 && y_125171;
                bool index_certs_125173;
                
                if (!bounds_check_125172) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125169,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125174 = ((float *) mem_122197.mem)[i_125169];
                int64_t i_125175 = sub64(gtid_117523, (int64_t) 1);
                bool x_125176 = sle64((int64_t) 0, i_125175);
                bool y_125177 = slt64(i_125175, lifted_single_ma_arg_114900);
                bool bounds_check_125178 = x_125176 && y_125177;
                bool index_certs_125179;
                
                if (!bounds_check_125178) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125175,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125180 = ((float *) mem_122197.mem)[i_125175];
                float x_125181 = x_125174 - y_125180;
                float defunc_0_f_res_f_res_125182 = x_125181 / 3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_f_res_125182;
            }
            x_125250 = x_125250;
            x_125251 = defunc_0_f_res_125166;
            
            float defunc_1_op_res_125252 = x_125250 + x_125251;
            
            ((float *) mem_122200.mem)[gtid_117523] = defunc_1_op_res_125252;
            x_125250 = defunc_1_op_res_125252;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131143_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131143_end -
                 futhark_mc_scan_stage_3_parloop_131143_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131143_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131143_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131143_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131138(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117522 = tid;
    int num_tasks_125240 = info.nsubtasks;
    struct futhark_mc_task_131137 *futhark_mc_task_131137 =
                                  (struct futhark_mc_task_131137 *) args;
    struct futhark_context *ctx = futhark_mc_task_131137->ctx;
    uint64_t futhark_mc_segscan_task_131138_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131138_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131137->free_n_114463;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_task_131137->free_lifted_single_ma_arg_114900;
    float defunc_2_reduce_res_117584 =
          futhark_mc_task_131137->free_defunc_2_reduce_res_117584;
    struct memblock mem_122197 = {.desc ="mem_122197", .mem =
                                  futhark_mc_task_131137->free_mem_122197,
                                  .size =0, .references =NULL};
    struct memblock mem_122200 = {.desc ="mem_122200", .mem =
                                  futhark_mc_task_131137->free_mem_122200,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_125247_cached_sizze_131139 = 0;
    char *scan_stage_2_accum_mem_125247 = NULL;
    int64_t iter_125241;
    struct futhark_mc_scan_stage_1_parloop_struct_131140
    futhark_mc_scan_stage_1_parloop_struct_131140;
    
    futhark_mc_scan_stage_1_parloop_struct_131140.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131140.free_lifted_single_ma_arg_114900 =
        lifted_single_ma_arg_114900;
    futhark_mc_scan_stage_1_parloop_struct_131140.free_defunc_2_reduce_res_117584 =
        defunc_2_reduce_res_117584;
    futhark_mc_scan_stage_1_parloop_struct_131140.free_mem_122197 =
        mem_122197.mem;
    futhark_mc_scan_stage_1_parloop_struct_131140.free_mem_122200 =
        mem_122200.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131141_task;
    
    futhark_mc_scan_stage_1_parloop_131141_task.name =
        "futhark_mc_scan_stage_1_parloop_131141";
    futhark_mc_scan_stage_1_parloop_131141_task.fn =
        futhark_mc_scan_stage_1_parloop_131141;
    futhark_mc_scan_stage_1_parloop_131141_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131140;
    futhark_mc_scan_stage_1_parloop_131141_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131141_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131141_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131141_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131141_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131141_task);
    
    if (futhark_mc_scan_stage_1_parloop_131141_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131141_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131141_total_end -
                 futhark_mc_scan_stage_1_parloop_131141_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131141_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131141_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131141_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_125240)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_125242;
        float x_125243;
        int64_t offset_125245 = (int64_t) 0;
        int64_t offset_index_125246 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_125247_cached_sizze_131139 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_125247 =
                realloc(scan_stage_2_accum_mem_125247, (int64_t) 4);
            scan_stage_2_accum_mem_125247_cached_sizze_131139 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_125247)[(int64_t) 0] = 0.0F;
        for (int32_t i_125249 = 0; i_125249 < num_tasks_125240 - 1;
             i_125249++) {
            offset_125245 = squot64(n_114463, sext_i32_i64(num_tasks_125240));
            if (slt64(sext_i32_i64(i_125249), srem64(n_114463,
                                                     sext_i32_i64(num_tasks_125240)))) {
                offset_125245 += (int64_t) 1;
            }
            offset_index_125246 += offset_125245;
            
            int64_t gtid_117523 = offset_index_125246;
            bool cond_125165 = gtid_117523 == (int64_t) 0;
            float defunc_0_f_res_125166;
            
            if (cond_125165) {
                float defunc_0_f_res_t_res_125167 = defunc_2_reduce_res_117584 /
                      3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_t_res_125167;
            } else {
                int64_t x_125168 = add64((int64_t) 3, gtid_117523);
                int64_t i_125169 = sub64(x_125168, (int64_t) 1);
                bool x_125170 = sle64((int64_t) 0, i_125169);
                bool y_125171 = slt64(i_125169, lifted_single_ma_arg_114900);
                bool bounds_check_125172 = x_125170 && y_125171;
                bool index_certs_125173;
                
                if (!bounds_check_125172) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125169,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_125174 = ((float *) mem_122197.mem)[i_125169];
                int64_t i_125175 = sub64(gtid_117523, (int64_t) 1);
                bool x_125176 = sle64((int64_t) 0, i_125175);
                bool y_125177 = slt64(i_125175, lifted_single_ma_arg_114900);
                bool bounds_check_125178 = x_125176 && y_125177;
                bool index_certs_125179;
                
                if (!bounds_check_125178) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_125175,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_114900, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_125180 = ((float *) mem_122197.mem)[i_125175];
                float x_125181 = x_125174 - y_125180;
                float defunc_0_f_res_f_res_125182 = x_125181 / 3.0F;
                
                defunc_0_f_res_125166 = defunc_0_f_res_f_res_125182;
            }
            // Read carry in
            {
                x_125242 =
                    ((float *) scan_stage_2_accum_mem_125247)[(int64_t) 0];
            }
            // Read next values
            {
                x_125243 = ((float *) mem_122200.mem)[offset_index_125246 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_125244 = x_125242 + x_125243;
            
            ((float *) mem_122200.mem)[offset_index_125246 - (int64_t) 1] =
                defunc_1_op_res_125244;
            ((float *) scan_stage_2_accum_mem_125247)[(int64_t) 0] =
                defunc_1_op_res_125244;
        }
        
        int64_t iter_125253 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131142
        futhark_mc_scan_stage_3_parloop_struct_131142;
        
        futhark_mc_scan_stage_3_parloop_struct_131142.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131142.free_lifted_single_ma_arg_114900 =
            lifted_single_ma_arg_114900;
        futhark_mc_scan_stage_3_parloop_struct_131142.free_defunc_2_reduce_res_117584 =
            defunc_2_reduce_res_117584;
        futhark_mc_scan_stage_3_parloop_struct_131142.free_mem_122197 =
            mem_122197.mem;
        futhark_mc_scan_stage_3_parloop_struct_131142.free_mem_122200 =
            mem_122200.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131143_task;
        
        futhark_mc_scan_stage_3_parloop_131143_task.name =
            "futhark_mc_scan_stage_3_parloop_131143";
        futhark_mc_scan_stage_3_parloop_131143_task.fn =
            futhark_mc_scan_stage_3_parloop_131143;
        futhark_mc_scan_stage_3_parloop_131143_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131142;
        futhark_mc_scan_stage_3_parloop_131143_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131143_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131143_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131143_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131143_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131143_task);
        
        if (futhark_mc_scan_stage_3_parloop_131143_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131143_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131143_total_end -
                     futhark_mc_scan_stage_3_parloop_131143_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131143_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131143_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131143_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_125247);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131138_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131138_end -
                 futhark_mc_segscan_task_131138_start;
        
        ctx->futhark_mc_segscan_task_131138_runs[tid]++;
        ctx->futhark_mc_segscan_task_131138_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131138_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131104(void *args, int64_t start,
                                            int64_t end, int flat_tid_117510,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131103
    *futhark_mc_segmap_parloop_struct_131103 =
    (struct futhark_mc_segmap_parloop_struct_131103 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131103->ctx;
    uint64_t futhark_mc_segmap_parloop_131104_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131104_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131103->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131103->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131103->free_n_p_114465;
    float i64_res_114505 =
          futhark_mc_segmap_parloop_struct_131103->free_i64_res_114505;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131103->free_C_len_114511;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_segmap_parloop_struct_131103->free_lifted_single_ma_arg_114883;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_segmap_parloop_struct_131103->free_lifted_single_ma_arg_114900;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131103->free_bytes_121846;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131103->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t bytes_122192 =
            futhark_mc_segmap_parloop_struct_131103->free_bytes_122192;
    int64_t bytes_122195 =
            futhark_mc_segmap_parloop_struct_131103->free_bytes_122195;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131103->free_mem_122249,
                                  .size =0, .references =NULL};
    size_t mem_122194_cached_sizze_131105 = 0;
    char *mem_122194 = NULL;
    size_t mem_122197_cached_sizze_131106 = 0;
    char *mem_122197 = NULL;
    size_t mem_122200_cached_sizze_131107 = 0;
    char *mem_122200 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125107 = start;
    
    if (mem_122194_cached_sizze_131105 < (size_t) bytes_122192) {
        mem_122194 = realloc(mem_122194, bytes_122192);
        mem_122194_cached_sizze_131105 = bytes_122192;
    }
    if (mem_122197_cached_sizze_131106 < (size_t) bytes_122195) {
        mem_122197 = realloc(mem_122197, bytes_122195);
        mem_122197_cached_sizze_131106 = bytes_122195;
    }
    if (mem_122200_cached_sizze_131107 < (size_t) bytes_121846) {
        mem_122200 = realloc(mem_122200, bytes_121846);
        mem_122200_cached_sizze_131107 = bytes_121846;
    }
    for (; iter_125107 < end; iter_125107++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125183 = m_114462;
        int64_t gtid_117511 = iter_125107;
        int64_t remnant_125184 = iter_125107 - gtid_117511;
        float defunc_2_reduce_res_117526;
        int64_t flat_tid_117512 = (int64_t) 0;
        int32_t num_tasks_125185;
        struct futhark_mc_task_131108 futhark_mc_task_131108;
        
        futhark_mc_task_131108.ctx = ctx;
        futhark_mc_task_131108.free_C_len_114511 = C_len_114511;
        futhark_mc_task_131108.free_gtid_117511 = gtid_117511;
        futhark_mc_task_131108.free_mem_122191 = mem_122191.mem;
        futhark_mc_task_131108.retval_defunc_2_reduce_res_117526 =
            &defunc_2_reduce_res_117526;
        
        struct scheduler_segop futhark_mc_task_131108_task;
        
        futhark_mc_task_131108_task.args = &futhark_mc_task_131108;
        futhark_mc_task_131108_task.top_level_fn =
            futhark_mc_segred_task_131109;
        futhark_mc_task_131108_task.name = "futhark_mc_segred_task_131109";
        futhark_mc_task_131108_task.iterations = n_p_114465;
        futhark_mc_task_131108_task.task_time =
            &ctx->futhark_mc_segred_task_131109_total_time;
        futhark_mc_task_131108_task.task_iter =
            &ctx->futhark_mc_segred_task_131109_total_iter;
        futhark_mc_task_131108_task.sched = STATIC;
        futhark_mc_task_131108_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131109_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131108_task);
        
        if (futhark_mc_segred_task_131109_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117514 = (int64_t) 0;
        int32_t num_tasks_125194;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131113 futhark_mc_task_131113;
        
        futhark_mc_task_131113.ctx = ctx;
        futhark_mc_task_131113.free_n_p_114465 = n_p_114465;
        futhark_mc_task_131113.free_i64_res_114505 = i64_res_114505;
        futhark_mc_task_131113.free_C_len_114511 = C_len_114511;
        futhark_mc_task_131113.free_lifted_single_ma_arg_114883 =
            lifted_single_ma_arg_114883;
        futhark_mc_task_131113.free_gtid_117511 = gtid_117511;
        futhark_mc_task_131113.free_defunc_2_reduce_res_117526 =
            defunc_2_reduce_res_117526;
        futhark_mc_task_131113.free_mem_122191 = mem_122191.mem;
        futhark_mc_task_131113.free_mem_122194 = mem_122194;
        
        struct scheduler_segop futhark_mc_task_131113_task;
        
        futhark_mc_task_131113_task.args = &futhark_mc_task_131113;
        futhark_mc_task_131113_task.top_level_fn =
            futhark_mc_segscan_task_131114;
        futhark_mc_task_131113_task.name = "futhark_mc_segscan_task_131114";
        futhark_mc_task_131113_task.iterations = lifted_single_ma_arg_114883;
        futhark_mc_task_131113_task.task_time =
            &ctx->futhark_mc_segscan_task_131114_total_time;
        futhark_mc_task_131113_task.task_iter =
            &ctx->futhark_mc_segscan_task_131114_total_iter;
        futhark_mc_task_131113_task.sched = STATIC;
        futhark_mc_task_131113_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131114_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131113_task);
        
        if (futhark_mc_segscan_task_131114_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_117555;
        int64_t flat_tid_117516 = (int64_t) 0;
        int32_t num_tasks_125208;
        struct futhark_mc_task_131120 futhark_mc_task_131120;
        
        futhark_mc_task_131120.ctx = ctx;
        futhark_mc_task_131120.free_mem_122194 = mem_122194;
        futhark_mc_task_131120.retval_defunc_2_reduce_res_117555 =
            &defunc_2_reduce_res_117555;
        
        struct scheduler_segop futhark_mc_task_131120_task;
        
        futhark_mc_task_131120_task.args = &futhark_mc_task_131120;
        futhark_mc_task_131120_task.top_level_fn =
            futhark_mc_segred_task_131121;
        futhark_mc_task_131120_task.name = "futhark_mc_segred_task_131121";
        futhark_mc_task_131120_task.iterations = n_p_114465;
        futhark_mc_task_131120_task.task_time =
            &ctx->futhark_mc_segred_task_131121_total_time;
        futhark_mc_task_131120_task.task_iter =
            &ctx->futhark_mc_segred_task_131121_total_iter;
        futhark_mc_task_131120_task.sched = STATIC;
        futhark_mc_task_131120_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131121_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131120_task);
        
        if (futhark_mc_segred_task_131121_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117518 = (int64_t) 0;
        int32_t num_tasks_125217;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131125 futhark_mc_task_131125;
        
        futhark_mc_task_131125.ctx = ctx;
        futhark_mc_task_131125.free_n_p_114465 = n_p_114465;
        futhark_mc_task_131125.free_i64_res_114505 = i64_res_114505;
        futhark_mc_task_131125.free_lifted_single_ma_arg_114883 =
            lifted_single_ma_arg_114883;
        futhark_mc_task_131125.free_lifted_single_ma_arg_114900 =
            lifted_single_ma_arg_114900;
        futhark_mc_task_131125.free_defunc_2_reduce_res_117555 =
            defunc_2_reduce_res_117555;
        futhark_mc_task_131125.free_mem_122194 = mem_122194;
        futhark_mc_task_131125.free_mem_122197 = mem_122197;
        
        struct scheduler_segop futhark_mc_task_131125_task;
        
        futhark_mc_task_131125_task.args = &futhark_mc_task_131125;
        futhark_mc_task_131125_task.top_level_fn =
            futhark_mc_segscan_task_131126;
        futhark_mc_task_131125_task.name = "futhark_mc_segscan_task_131126";
        futhark_mc_task_131125_task.iterations = lifted_single_ma_arg_114900;
        futhark_mc_task_131125_task.task_time =
            &ctx->futhark_mc_segscan_task_131126_total_time;
        futhark_mc_task_131125_task.task_iter =
            &ctx->futhark_mc_segscan_task_131126_total_iter;
        futhark_mc_task_131125_task.sched = STATIC;
        futhark_mc_task_131125_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131126_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131125_task);
        
        if (futhark_mc_segscan_task_131126_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_117584;
        int64_t flat_tid_117520 = (int64_t) 0;
        int32_t num_tasks_125231;
        struct futhark_mc_task_131132 futhark_mc_task_131132;
        
        futhark_mc_task_131132.ctx = ctx;
        futhark_mc_task_131132.free_mem_122197 = mem_122197;
        futhark_mc_task_131132.retval_defunc_2_reduce_res_117584 =
            &defunc_2_reduce_res_117584;
        
        struct scheduler_segop futhark_mc_task_131132_task;
        
        futhark_mc_task_131132_task.args = &futhark_mc_task_131132;
        futhark_mc_task_131132_task.top_level_fn =
            futhark_mc_segred_task_131133;
        futhark_mc_task_131132_task.name = "futhark_mc_segred_task_131133";
        futhark_mc_task_131132_task.iterations = (int64_t) 3;
        futhark_mc_task_131132_task.task_time =
            &ctx->futhark_mc_segred_task_131133_total_time;
        futhark_mc_task_131132_task.task_iter =
            &ctx->futhark_mc_segred_task_131133_total_iter;
        futhark_mc_task_131132_task.sched = STATIC;
        futhark_mc_task_131132_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131133_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131132_task);
        
        if (futhark_mc_segred_task_131133_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117522 = (int64_t) 0;
        int32_t num_tasks_125240;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_131137 futhark_mc_task_131137;
        
        futhark_mc_task_131137.ctx = ctx;
        futhark_mc_task_131137.free_n_114463 = n_114463;
        futhark_mc_task_131137.free_lifted_single_ma_arg_114900 =
            lifted_single_ma_arg_114900;
        futhark_mc_task_131137.free_defunc_2_reduce_res_117584 =
            defunc_2_reduce_res_117584;
        futhark_mc_task_131137.free_mem_122197 = mem_122197;
        futhark_mc_task_131137.free_mem_122200 = mem_122200;
        
        struct scheduler_segop futhark_mc_task_131137_task;
        
        futhark_mc_task_131137_task.args = &futhark_mc_task_131137;
        futhark_mc_task_131137_task.top_level_fn =
            futhark_mc_segscan_task_131138;
        futhark_mc_task_131137_task.name = "futhark_mc_segscan_task_131138";
        futhark_mc_task_131137_task.iterations = n_114463;
        futhark_mc_task_131137_task.task_time =
            &ctx->futhark_mc_segscan_task_131138_total_time;
        futhark_mc_task_131137_task.task_iter =
            &ctx->futhark_mc_segscan_task_131138_total_iter;
        futhark_mc_task_131137_task.sched = STATIC;
        futhark_mc_task_131137_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_131138_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131137_task);
        
        if (futhark_mc_segscan_task_131138_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122249.mem + gtid_117511 * n_114463 * (int64_t) 4,
                mem_122200 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122194);
    free(mem_122197);
    free(mem_122200);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131104_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131104_end -
                 futhark_mc_segmap_parloop_131104_start;
        
        ctx->futhark_mc_segmap_parloop_131104_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131104_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131104_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131102(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117510 = tid;
    int num_tasks_125012 = info.nsubtasks;
    struct futhark_mc_task_131095 *futhark_mc_task_131095 =
                                  (struct futhark_mc_task_131095 *) args;
    struct futhark_context *ctx = futhark_mc_task_131095->ctx;
    uint64_t futhark_mc_segmap_nested_task_131102_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131102_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131095->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131095->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131095->free_n_p_114465;
    float i64_res_114505 = futhark_mc_task_131095->free_i64_res_114505;
    int64_t C_len_114511 = futhark_mc_task_131095->free_C_len_114511;
    int64_t lifted_single_ma_arg_114883 =
            futhark_mc_task_131095->free_lifted_single_ma_arg_114883;
    int64_t lifted_single_ma_arg_114900 =
            futhark_mc_task_131095->free_lifted_single_ma_arg_114900;
    int64_t bytes_121846 = futhark_mc_task_131095->free_bytes_121846;
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131095->free_mem_122191,
                                  .size =0, .references =NULL};
    int64_t bytes_122192 = futhark_mc_task_131095->free_bytes_122192;
    int64_t bytes_122195 = futhark_mc_task_131095->free_bytes_122195;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131095->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t iter_125107;
    struct futhark_mc_segmap_parloop_struct_131103
    futhark_mc_segmap_parloop_struct_131103;
    
    futhark_mc_segmap_parloop_struct_131103.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131103.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131103.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131103.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131103.free_i64_res_114505 =
        i64_res_114505;
    futhark_mc_segmap_parloop_struct_131103.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131103.free_lifted_single_ma_arg_114883 =
        lifted_single_ma_arg_114883;
    futhark_mc_segmap_parloop_struct_131103.free_lifted_single_ma_arg_114900 =
        lifted_single_ma_arg_114900;
    futhark_mc_segmap_parloop_struct_131103.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131103.free_mem_122191 = mem_122191.mem;
    futhark_mc_segmap_parloop_struct_131103.free_bytes_122192 = bytes_122192;
    futhark_mc_segmap_parloop_struct_131103.free_bytes_122195 = bytes_122195;
    futhark_mc_segmap_parloop_struct_131103.free_mem_122249 = mem_122249.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131104_task;
    
    futhark_mc_segmap_parloop_131104_task.name =
        "futhark_mc_segmap_parloop_131104";
    futhark_mc_segmap_parloop_131104_task.fn = futhark_mc_segmap_parloop_131104;
    futhark_mc_segmap_parloop_131104_task.args =
        &futhark_mc_segmap_parloop_struct_131103;
    futhark_mc_segmap_parloop_131104_task.iterations = iterations;
    futhark_mc_segmap_parloop_131104_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131104_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131104_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131104_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131104_task);
    
    if (futhark_mc_segmap_parloop_131104_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131104_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131104_total_end -
                 futhark_mc_segmap_parloop_131104_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131104_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131104_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131104_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131102_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131102_end -
                 futhark_mc_segmap_nested_task_131102_start;
        
        ctx->futhark_mc_segmap_nested_task_131102_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131102_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131102_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131144 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122275;
};
struct futhark_mc_segmap_parloop_struct_131146 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122275;
};
static int futhark_mc_segmap_parloop_131147(void *args, int64_t start,
                                            int64_t end, int flat_tid_117612,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131146
    *futhark_mc_segmap_parloop_struct_131146 =
    (struct futhark_mc_segmap_parloop_struct_131146 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131146->ctx;
    uint64_t futhark_mc_segmap_parloop_131147_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131147_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131146->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131146->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131146->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131146->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131146->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131146->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131146->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131146->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131146->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131146->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131146->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131146->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131146->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131146->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122275 = {.desc ="mem_122275", .mem =
                                  futhark_mc_segmap_parloop_struct_131146->free_mem_122275,
                                  .size =0, .references =NULL};
    size_t mem_122259_cached_sizze_131148 = 0;
    char *mem_122259 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125257 = start;
    
    if (mem_122259_cached_sizze_131148 < (size_t) bytes_121918) {
        mem_122259 = realloc(mem_122259, bytes_121918);
        mem_122259_cached_sizze_131148 = bytes_121918;
    }
    for (; iter_125257 < end; iter_125257++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125314 = m_114462;
        int64_t gtid_117613 = iter_125257;
        int64_t remnant_125315 = iter_125257 - gtid_117613;
        
        for (int64_t i_125258 = 0; i_125258 < l_n_m_114513; i_125258++) {
            int64_t x_125260 = ((int64_t *) mem_121987.mem)[gtid_117613 *
                                                            l_n_m_114513 +
                                                            i_125258];
            float x_125261 = ((float *) mem_121991.mem)[gtid_117613 *
                                                        l_n_m_114513 +
                                                        i_125258];
            int64_t min_arg_125262 = mul64(t_jump_114470, i_125258);
            int64_t min_res_125263 = smin64(i_114539, min_arg_125262);
            float defunc_0_f_res_125264 = sitofp_i64_f32(min_res_125263);
            float defunc_2_reduce_res_125265;
            float redout_125267 = 0.0F;
            
            for (int64_t i_125266 = 0; i_125266 < l_window_114467; i_125266++) {
                bool cond_125268 = sle64(n_114463, i_125266);
                float defunc_0_f_res_125269;
                
                if (cond_125268) {
                    defunc_0_f_res_125269 = 0.0F;
                } else {
                    int64_t i_125270 = add64(x_125260, i_125266);
                    float index_primexp_125271 = sitofp_i64_f32(i_125270);
                    float defunc_0_f_res_f_res_125272 = 1.0F +
                          index_primexp_125271;
                    
                    defunc_0_f_res_125269 = defunc_0_f_res_f_res_125272;
                }
                
                float defunc_0_f_res_125273;
                
                if (cond_125268) {
                    defunc_0_f_res_125273 = 0.0F;
                } else {
                    int64_t i_125274 = add64(x_125260, i_125266);
                    float x_125275 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_117613 *
                                                            ctx_param_ext_122099 +
                                                            i_125274 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_125273 = x_125275;
                }
                
                float x_j_125276 = defunc_0_f_res_125269 -
                      defunc_0_f_res_125264;
                float abs_res_125277 = (float) fabs(x_j_125276);
                float tmp1_125278 = abs_res_125277 / x_125261;
                float x_125279 = tmp1_125278 * tmp1_125278;
                float y_125280 = tmp1_125278 * x_125279;
                float tmp2_125281 = 1.0F - y_125280;
                float x_125282 = tmp2_125281 * tmp2_125281;
                float tmp3_125283 = tmp2_125281 * x_125282;
                float w_j_125284 = defunc_0_f_res_125273 * tmp3_125283;
                float defunc_1_op_res_125285 = w_j_125284 + redout_125267;
                float redout_tmp_125317 = defunc_1_op_res_125285;
                
                redout_125267 = redout_tmp_125317;
            }
            defunc_2_reduce_res_125265 = redout_125267;
            
            float a0_125286 = 1.0F / defunc_2_reduce_res_125265;
            float defunc_2_reduce_res_125287;
            float redout_125289 = 0.0F;
            
            for (int64_t i_125288 = 0; i_125288 < l_window_114467; i_125288++) {
                bool cond_125290 = sle64(n_114463, i_125288);
                float defunc_0_f_res_125291;
                
                if (cond_125290) {
                    defunc_0_f_res_125291 = 0.0F;
                } else {
                    int64_t i_125292 = add64(x_125260, i_125288);
                    float index_primexp_125293 = sitofp_i64_f32(i_125292);
                    float defunc_0_f_res_f_res_125294 = 1.0F +
                          index_primexp_125293;
                    
                    defunc_0_f_res_125291 = defunc_0_f_res_f_res_125294;
                }
                
                float defunc_0_f_res_125295;
                
                if (cond_125290) {
                    defunc_0_f_res_125295 = 0.0F;
                } else {
                    int64_t i_125296 = add64(x_125260, i_125288);
                    float x_125297 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_117613 *
                                                            ctx_param_ext_122099 +
                                                            i_125296 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_125295 = x_125297;
                }
                
                float x_j_125298 = defunc_0_f_res_125291 -
                      defunc_0_f_res_125264;
                float abs_res_125299 = (float) fabs(x_j_125298);
                float tmp1_125300 = abs_res_125299 / x_125261;
                float x_125301 = tmp1_125300 * tmp1_125300;
                float y_125302 = tmp1_125300 * x_125301;
                float tmp2_125303 = 1.0F - y_125302;
                float x_125304 = tmp2_125303 * tmp2_125303;
                float tmp3_125305 = tmp2_125303 * x_125304;
                float tmp4_125306 = defunc_0_f_res_125295 * tmp3_125305;
                float defunc_0_f_res_125307;
                
                if (cond_125290) {
                    defunc_0_f_res_125307 = 0.0F;
                } else {
                    int64_t i_125308 = add64(x_125260, i_125288);
                    float x_125309 = ((float *) mem_122249.mem)[gtid_117613 *
                                                                n_114463 +
                                                                i_125308];
                    
                    defunc_0_f_res_125307 = x_125309;
                }
                
                float x_125310 = a0_125286 * tmp4_125306;
                float defunc_9_fit_fun_res_125311 = defunc_0_f_res_125307 *
                      x_125310;
                float defunc_1_op_res_125312 = defunc_9_fit_fun_res_125311 +
                      redout_125289;
                float redout_tmp_125318 = defunc_1_op_res_125312;
                
                redout_125289 = redout_tmp_125318;
            }
            defunc_2_reduce_res_125287 = redout_125289;
            ((float *) mem_122259)[i_125258] = defunc_2_reduce_res_125287;
        }
        memmove(mem_122275.mem + gtid_117613 * l_n_m_114513 * (int64_t) 4,
                mem_122259 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122259);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131147_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131147_end -
                 futhark_mc_segmap_parloop_131147_start;
        
        ctx->futhark_mc_segmap_parloop_131147_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131147_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131147_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131145(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117612 = tid;
    int num_tasks_125256 = info.nsubtasks;
    struct futhark_mc_task_131144 *futhark_mc_task_131144 =
                                  (struct futhark_mc_task_131144 *) args;
    struct futhark_context *ctx = futhark_mc_task_131144->ctx;
    uint64_t futhark_mc_segmap_task_131145_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131145_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131144->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131144->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131144->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131144->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131144->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131144->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131144->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131144->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131144->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131144->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131144->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131144->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131144->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131144->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122275 = {.desc ="mem_122275", .mem =
                                  futhark_mc_task_131144->free_mem_122275,
                                  .size =0, .references =NULL};
    int64_t iter_125257;
    struct futhark_mc_segmap_parloop_struct_131146
    futhark_mc_segmap_parloop_struct_131146;
    
    futhark_mc_segmap_parloop_struct_131146.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131146.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131146.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131146.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131146.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131146.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131146.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131146.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131146.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131146.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131146.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131146.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131146.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131146.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131146.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131146.free_mem_122275 = mem_122275.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131147_task;
    
    futhark_mc_segmap_parloop_131147_task.name =
        "futhark_mc_segmap_parloop_131147";
    futhark_mc_segmap_parloop_131147_task.fn = futhark_mc_segmap_parloop_131147;
    futhark_mc_segmap_parloop_131147_task.args =
        &futhark_mc_segmap_parloop_struct_131146;
    futhark_mc_segmap_parloop_131147_task.iterations = iterations;
    futhark_mc_segmap_parloop_131147_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131147_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131147_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131147_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131147_task);
    
    if (futhark_mc_segmap_parloop_131147_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131147_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131147_total_end -
                 futhark_mc_segmap_parloop_131147_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131147_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131147_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131147_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131145_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131145_end -
                 futhark_mc_segmap_task_131145_start;
        
        ctx->futhark_mc_segmap_task_131145_runs[tid]++;
        ctx->futhark_mc_segmap_task_131145_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131145_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131150 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122275;
};
struct futhark_mc_task_131153 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117615;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122256;
};
struct futhark_mc_segmap_parloop_struct_131155 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117615;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122256;
};
static int futhark_mc_segmap_parloop_131156(void *args, int64_t start,
                                            int64_t end, int flat_tid_117616,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131155
    *futhark_mc_segmap_parloop_struct_131155 =
    (struct futhark_mc_segmap_parloop_struct_131155 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131155->ctx;
    uint64_t futhark_mc_segmap_parloop_131156_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131156_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131155->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131155->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131155->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131155->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131155->free_i_114539;
    int64_t gtid_117615 =
            futhark_mc_segmap_parloop_struct_131155->free_gtid_117615;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131155->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131155->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131155->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131155->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131155->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131155->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131155->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122256 = {.desc ="mem_122256", .mem =
                                  futhark_mc_segmap_parloop_struct_131155->free_mem_122256,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125429 = start;
    
    for (; iter_125429 < end; iter_125429++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125475 = l_n_m_114513;
        int64_t gtid_117617 = iter_125429;
        int64_t remnant_125476 = iter_125429 - gtid_117617;
        int64_t x_125373 = ((int64_t *) mem_121987.mem)[gtid_117615 *
                                                        l_n_m_114513 +
                                                        gtid_117617];
        float x_125374 = ((float *) mem_121991.mem)[gtid_117615 * l_n_m_114513 +
                                                    gtid_117617];
        int64_t min_arg_125375 = mul64(t_jump_114470, gtid_117617);
        int64_t min_res_125376 = smin64(i_114539, min_arg_125375);
        float defunc_0_f_res_125377 = sitofp_i64_f32(min_res_125376);
        float defunc_2_reduce_res_125378;
        float redout_125431 = 0.0F;
        
        for (int64_t i_125430 = 0; i_125430 < l_window_114467; i_125430++) {
            bool cond_125432 = sle64(n_114463, i_125430);
            float defunc_0_f_res_125433;
            
            if (cond_125432) {
                defunc_0_f_res_125433 = 0.0F;
            } else {
                int64_t i_125434 = add64(x_125373, i_125430);
                float index_primexp_125435 = sitofp_i64_f32(i_125434);
                float defunc_0_f_res_f_res_125436 = 1.0F + index_primexp_125435;
                
                defunc_0_f_res_125433 = defunc_0_f_res_f_res_125436;
            }
            
            float defunc_0_f_res_125437;
            
            if (cond_125432) {
                defunc_0_f_res_125437 = 0.0F;
            } else {
                int64_t i_125438 = add64(x_125373, i_125430);
                float x_125439 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_117615 *
                                                        ctx_param_ext_122099 +
                                                        i_125438 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_125437 = x_125439;
            }
            
            float x_j_125440 = defunc_0_f_res_125433 - defunc_0_f_res_125377;
            float abs_res_125441 = (float) fabs(x_j_125440);
            float tmp1_125442 = abs_res_125441 / x_125374;
            float x_125443 = tmp1_125442 * tmp1_125442;
            float y_125444 = tmp1_125442 * x_125443;
            float tmp2_125445 = 1.0F - y_125444;
            float x_125446 = tmp2_125445 * tmp2_125445;
            float tmp3_125447 = tmp2_125445 * x_125446;
            float w_j_125448 = defunc_0_f_res_125437 * tmp3_125447;
            float defunc_1_op_res_125449 = w_j_125448 + redout_125431;
            float redout_tmp_125477 = defunc_1_op_res_125449;
            
            redout_125431 = redout_tmp_125477;
        }
        defunc_2_reduce_res_125378 = redout_125431;
        
        float a0_125399 = 1.0F / defunc_2_reduce_res_125378;
        float defunc_2_reduce_res_125400;
        float redout_125451 = 0.0F;
        
        for (int64_t i_125450 = 0; i_125450 < l_window_114467; i_125450++) {
            bool cond_125452 = sle64(n_114463, i_125450);
            float defunc_0_f_res_125453;
            
            if (cond_125452) {
                defunc_0_f_res_125453 = 0.0F;
            } else {
                int64_t i_125454 = add64(x_125373, i_125450);
                float index_primexp_125455 = sitofp_i64_f32(i_125454);
                float defunc_0_f_res_f_res_125456 = 1.0F + index_primexp_125455;
                
                defunc_0_f_res_125453 = defunc_0_f_res_f_res_125456;
            }
            
            float defunc_0_f_res_125457;
            
            if (cond_125452) {
                defunc_0_f_res_125457 = 0.0F;
            } else {
                int64_t i_125458 = add64(x_125373, i_125450);
                float x_125459 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_117615 *
                                                        ctx_param_ext_122099 +
                                                        i_125458 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_125457 = x_125459;
            }
            
            float x_j_125460 = defunc_0_f_res_125453 - defunc_0_f_res_125377;
            float abs_res_125461 = (float) fabs(x_j_125460);
            float tmp1_125462 = abs_res_125461 / x_125374;
            float x_125463 = tmp1_125462 * tmp1_125462;
            float y_125464 = tmp1_125462 * x_125463;
            float tmp2_125465 = 1.0F - y_125464;
            float x_125466 = tmp2_125465 * tmp2_125465;
            float tmp3_125467 = tmp2_125465 * x_125466;
            float tmp4_125468 = defunc_0_f_res_125457 * tmp3_125467;
            float defunc_0_f_res_125469;
            
            if (cond_125452) {
                defunc_0_f_res_125469 = 0.0F;
            } else {
                int64_t i_125470 = add64(x_125373, i_125450);
                float x_125471 = ((float *) mem_122249.mem)[gtid_117615 *
                                                            n_114463 +
                                                            i_125470];
                
                defunc_0_f_res_125469 = x_125471;
            }
            
            float x_125472 = a0_125399 * tmp4_125468;
            float defunc_9_fit_fun_res_125473 = defunc_0_f_res_125469 *
                  x_125472;
            float defunc_1_op_res_125474 = defunc_9_fit_fun_res_125473 +
                  redout_125451;
            float redout_tmp_125478 = defunc_1_op_res_125474;
            
            redout_125451 = redout_tmp_125478;
        }
        defunc_2_reduce_res_125400 = redout_125451;
        ((float *) mem_122256.mem)[gtid_117617] = defunc_2_reduce_res_125400;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131156_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131156_end -
                 futhark_mc_segmap_parloop_131156_start;
        
        ctx->futhark_mc_segmap_parloop_131156_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131156_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131156_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131154(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117616 = tid;
    int num_tasks_125428 = info.nsubtasks;
    struct futhark_mc_task_131153 *futhark_mc_task_131153 =
                                  (struct futhark_mc_task_131153 *) args;
    struct futhark_context *ctx = futhark_mc_task_131153->ctx;
    uint64_t futhark_mc_segmap_task_131154_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131154_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131153->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131153->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131153->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131153->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131153->free_i_114539;
    int64_t gtid_117615 = futhark_mc_task_131153->free_gtid_117615;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131153->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131153->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131153->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131153->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131153->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131153->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131153->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122256 = {.desc ="mem_122256", .mem =
                                  futhark_mc_task_131153->free_mem_122256,
                                  .size =0, .references =NULL};
    int64_t iter_125429;
    struct futhark_mc_segmap_parloop_struct_131155
    futhark_mc_segmap_parloop_struct_131155;
    
    futhark_mc_segmap_parloop_struct_131155.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131155.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131155.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131155.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131155.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131155.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131155.free_gtid_117615 = gtid_117615;
    futhark_mc_segmap_parloop_struct_131155.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131155.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131155.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131155.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131155.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131155.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131155.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131155.free_mem_122256 = mem_122256.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131156_task;
    
    futhark_mc_segmap_parloop_131156_task.name =
        "futhark_mc_segmap_parloop_131156";
    futhark_mc_segmap_parloop_131156_task.fn = futhark_mc_segmap_parloop_131156;
    futhark_mc_segmap_parloop_131156_task.args =
        &futhark_mc_segmap_parloop_struct_131155;
    futhark_mc_segmap_parloop_131156_task.iterations = iterations;
    futhark_mc_segmap_parloop_131156_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131156_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131156_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131156_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131156_task);
    
    if (futhark_mc_segmap_parloop_131156_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131156_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131156_total_end -
                 futhark_mc_segmap_parloop_131156_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131156_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131156_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131156_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131154_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131154_end -
                 futhark_mc_segmap_task_131154_start;
        
        ctx->futhark_mc_segmap_task_131154_runs[tid]++;
        ctx->futhark_mc_segmap_task_131154_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131154_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131158 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117615;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122256;
};
struct futhark_mc_task_131160 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117615;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_125320;
    float free_x_125321;
    float free_defunc_0_f_res_125324;
    float *retval_defunc_2_reduce_res_125325;
};
struct futhark_mc_segred_stage_1_parloop_struct_131163 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117615;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_125320;
    float free_x_125321;
    float free_defunc_0_f_res_125324;
    char *free_reduce_stage_1_tid_res_arr_mem_125528;
};
static int futhark_mc_segred_stage_1_parloop_131164(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117620,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131163
    *futhark_mc_segred_stage_1_parloop_struct_131163 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131163 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131163->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131164_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131164_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_n_114463;
    int64_t gtid_117615 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_gtid_117615;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131163->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_125320 =
            futhark_mc_segred_stage_1_parloop_struct_131163->free_x_125320;
    float x_125321 =
          futhark_mc_segred_stage_1_parloop_struct_131163->free_x_125321;
    float defunc_0_f_res_125324 =
          futhark_mc_segred_stage_1_parloop_struct_131163->free_defunc_0_f_res_125324;
    struct memblock reduce_stage_1_tid_res_arr_mem_125528 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125528",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131163->free_reduce_stage_1_tid_res_arr_mem_125528,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125530 = start;
    float x_125480;
    float x_125481;
    float local_acc_125531 = 0.0F;
    
    for (; iter_125530 < end; iter_125530++) {
        int64_t gtid_117621 = iter_125530;
        bool cond_125483 = sle64(n_114463, gtid_117621);
        float defunc_0_f_res_125484;
        
        if (cond_125483) {
            defunc_0_f_res_125484 = 0.0F;
        } else {
            int64_t i_125485 = add64(gtid_117621, x_125320);
            float index_primexp_125486 = sitofp_i64_f32(i_125485);
            float defunc_0_f_res_f_res_125487 = 1.0F + index_primexp_125486;
            
            defunc_0_f_res_125484 = defunc_0_f_res_f_res_125487;
        }
        
        float defunc_0_f_res_125488;
        
        if (cond_125483) {
            defunc_0_f_res_125488 = 0.0F;
        } else {
            int64_t i_125489 = add64(gtid_117621, x_125320);
            float x_125490 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_117615 *
                                                    ctx_param_ext_122099 +
                                                    i_125489 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_125488 = x_125490;
        }
        
        float x_j_125491 = defunc_0_f_res_125484 - defunc_0_f_res_125324;
        float abs_res_125492 = (float) fabs(x_j_125491);
        float tmp1_125493 = abs_res_125492 / x_125321;
        float x_125494 = tmp1_125493 * tmp1_125493;
        float y_125495 = tmp1_125493 * x_125494;
        float tmp2_125496 = 1.0F - y_125495;
        float x_125497 = tmp2_125496 * tmp2_125496;
        float tmp3_125498 = tmp2_125496 * x_125497;
        float w_j_125499 = defunc_0_f_res_125488 * tmp3_125498;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125480 = local_acc_125531;
        }
        // Load next params
        {
            x_125481 = w_j_125499;
        }
        // Red body
        {
            float defunc_1_op_res_125482 = x_125480 + x_125481;
            
            local_acc_125531 = defunc_1_op_res_125482;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125528.mem)[flat_tid_117620] =
        local_acc_125531;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131164_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131164_end -
                 futhark_mc_segred_stage_1_parloop_131164_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131164_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131164_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131164_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131161(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117620 = tid;
    int num_tasks_125527 = info.nsubtasks;
    struct futhark_mc_task_131160 *futhark_mc_task_131160 =
                                  (struct futhark_mc_task_131160 *) args;
    struct futhark_context *ctx = futhark_mc_task_131160->ctx;
    uint64_t futhark_mc_segred_task_131161_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131161_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131160->free_n_114463;
    int64_t gtid_117615 = futhark_mc_task_131160->free_gtid_117615;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131160->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131160->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131160->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131160->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_125320 = futhark_mc_task_131160->free_x_125320;
    float x_125321 = futhark_mc_task_131160->free_x_125321;
    float defunc_0_f_res_125324 =
          futhark_mc_task_131160->free_defunc_0_f_res_125324;
    float defunc_2_reduce_res_125325 =
          *futhark_mc_task_131160->retval_defunc_2_reduce_res_125325;
    size_t reduce_stage_1_tid_res_arr_mem_125528_cached_sizze_131162 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125528 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125528_cached_sizze_131162 <
        (size_t) ((int64_t) 4 * num_tasks_125527)) {
        reduce_stage_1_tid_res_arr_mem_125528 =
            realloc(reduce_stage_1_tid_res_arr_mem_125528, (int64_t) 4 *
                    num_tasks_125527);
        reduce_stage_1_tid_res_arr_mem_125528_cached_sizze_131162 =
            (int64_t) 4 * num_tasks_125527;
    }
    
    int64_t iter_125530;
    struct futhark_mc_segred_stage_1_parloop_struct_131163
    futhark_mc_segred_stage_1_parloop_struct_131163;
    
    futhark_mc_segred_stage_1_parloop_struct_131163.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_gtid_117615 =
        gtid_117615;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_x_125320 = x_125320;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_x_125321 = x_125321;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_defunc_0_f_res_125324 =
        defunc_0_f_res_125324;
    futhark_mc_segred_stage_1_parloop_struct_131163.free_reduce_stage_1_tid_res_arr_mem_125528 =
        reduce_stage_1_tid_res_arr_mem_125528;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131164_task;
    
    futhark_mc_segred_stage_1_parloop_131164_task.name =
        "futhark_mc_segred_stage_1_parloop_131164";
    futhark_mc_segred_stage_1_parloop_131164_task.fn =
        futhark_mc_segred_stage_1_parloop_131164;
    futhark_mc_segred_stage_1_parloop_131164_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131163;
    futhark_mc_segred_stage_1_parloop_131164_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131164_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131164_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131164_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131164_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131164_task);
    
    if (futhark_mc_segred_stage_1_parloop_131164_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131164_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131164_total_end -
                 futhark_mc_segred_stage_1_parloop_131164_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131164_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131164_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131164_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125325 = 0.0F;
    }
    
    float x_125532;
    float x_125533;
    
    for (int32_t i_125535 = 0; i_125535 < num_tasks_125527; i_125535++) {
        flat_tid_117620 = i_125535;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125532 = defunc_2_reduce_res_125325;
            }
            // load next params
            {
                x_125533 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125528)[flat_tid_117620];
            }
            // red body
            {
                float defunc_1_op_res_125534 = x_125532 + x_125533;
                
                defunc_2_reduce_res_125325 = defunc_1_op_res_125534;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125528);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131161_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131161_end -
                 futhark_mc_segred_task_131161_start;
        
        ctx->futhark_mc_segred_task_131161_runs[tid]++;
        ctx->futhark_mc_segred_task_131161_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131161_iter[tid] += iterations;
    }
    *futhark_mc_task_131160->retval_defunc_2_reduce_res_125325 =
        defunc_2_reduce_res_125325;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131165 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117615;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_125320;
    float free_x_125321;
    float free_defunc_0_f_res_125324;
    float free_a0_125346;
    float *retval_defunc_2_reduce_res_125347;
};
struct futhark_mc_segred_stage_1_parloop_struct_131168 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117615;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_125320;
    float free_x_125321;
    float free_defunc_0_f_res_125324;
    float free_a0_125346;
    char *free_reduce_stage_1_tid_res_arr_mem_125537;
};
static int futhark_mc_segred_stage_1_parloop_131169(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117622,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131168
    *futhark_mc_segred_stage_1_parloop_struct_131168 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131168 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131168->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131169_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131169_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_n_114463;
    int64_t gtid_117615 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_gtid_117615;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131168->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131168->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_125320 =
            futhark_mc_segred_stage_1_parloop_struct_131168->free_x_125320;
    float x_125321 =
          futhark_mc_segred_stage_1_parloop_struct_131168->free_x_125321;
    float defunc_0_f_res_125324 =
          futhark_mc_segred_stage_1_parloop_struct_131168->free_defunc_0_f_res_125324;
    float a0_125346 =
          futhark_mc_segred_stage_1_parloop_struct_131168->free_a0_125346;
    struct memblock reduce_stage_1_tid_res_arr_mem_125537 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125537",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131168->free_reduce_stage_1_tid_res_arr_mem_125537,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125539 = start;
    float x_125500;
    float x_125501;
    float local_acc_125540 = 0.0F;
    
    for (; iter_125539 < end; iter_125539++) {
        int64_t gtid_117623 = iter_125539;
        bool cond_125503 = sle64(n_114463, gtid_117623);
        float defunc_0_f_res_125504;
        
        if (cond_125503) {
            defunc_0_f_res_125504 = 0.0F;
        } else {
            int64_t i_125505 = add64(gtid_117623, x_125320);
            float index_primexp_125506 = sitofp_i64_f32(i_125505);
            float defunc_0_f_res_f_res_125507 = 1.0F + index_primexp_125506;
            
            defunc_0_f_res_125504 = defunc_0_f_res_f_res_125507;
        }
        
        float defunc_0_f_res_125508;
        
        if (cond_125503) {
            defunc_0_f_res_125508 = 0.0F;
        } else {
            int64_t i_125509 = add64(gtid_117623, x_125320);
            float x_125510 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_117615 *
                                                    ctx_param_ext_122099 +
                                                    i_125509 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_125508 = x_125510;
        }
        
        float x_j_125511 = defunc_0_f_res_125504 - defunc_0_f_res_125324;
        float abs_res_125512 = (float) fabs(x_j_125511);
        float tmp1_125513 = abs_res_125512 / x_125321;
        float x_125514 = tmp1_125513 * tmp1_125513;
        float y_125515 = tmp1_125513 * x_125514;
        float tmp2_125516 = 1.0F - y_125515;
        float x_125517 = tmp2_125516 * tmp2_125516;
        float tmp3_125518 = tmp2_125516 * x_125517;
        float tmp4_125519 = defunc_0_f_res_125508 * tmp3_125518;
        float defunc_0_f_res_125520;
        
        if (cond_125503) {
            defunc_0_f_res_125520 = 0.0F;
        } else {
            int64_t i_125521 = add64(gtid_117623, x_125320);
            float x_125522 = ((float *) mem_122249.mem)[gtid_117615 * n_114463 +
                                                        i_125521];
            
            defunc_0_f_res_125520 = x_125522;
        }
        
        float x_125523 = a0_125346 * tmp4_125519;
        float defunc_9_fit_fun_res_125524 = defunc_0_f_res_125520 * x_125523;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125500 = local_acc_125540;
        }
        // Load next params
        {
            x_125501 = defunc_9_fit_fun_res_125524;
        }
        // Red body
        {
            float defunc_1_op_res_125502 = x_125500 + x_125501;
            
            local_acc_125540 = defunc_1_op_res_125502;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125537.mem)[flat_tid_117622] =
        local_acc_125540;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131169_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131169_end -
                 futhark_mc_segred_stage_1_parloop_131169_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131169_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131169_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131169_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131166(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117622 = tid;
    int num_tasks_125536 = info.nsubtasks;
    struct futhark_mc_task_131165 *futhark_mc_task_131165 =
                                  (struct futhark_mc_task_131165 *) args;
    struct futhark_context *ctx = futhark_mc_task_131165->ctx;
    uint64_t futhark_mc_segred_task_131166_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131166_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131165->free_n_114463;
    int64_t gtid_117615 = futhark_mc_task_131165->free_gtid_117615;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131165->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131165->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131165->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131165->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131165->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_125320 = futhark_mc_task_131165->free_x_125320;
    float x_125321 = futhark_mc_task_131165->free_x_125321;
    float defunc_0_f_res_125324 =
          futhark_mc_task_131165->free_defunc_0_f_res_125324;
    float a0_125346 = futhark_mc_task_131165->free_a0_125346;
    float defunc_2_reduce_res_125347 =
          *futhark_mc_task_131165->retval_defunc_2_reduce_res_125347;
    size_t reduce_stage_1_tid_res_arr_mem_125537_cached_sizze_131167 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125537 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125537_cached_sizze_131167 <
        (size_t) ((int64_t) 4 * num_tasks_125536)) {
        reduce_stage_1_tid_res_arr_mem_125537 =
            realloc(reduce_stage_1_tid_res_arr_mem_125537, (int64_t) 4 *
                    num_tasks_125536);
        reduce_stage_1_tid_res_arr_mem_125537_cached_sizze_131167 =
            (int64_t) 4 * num_tasks_125536;
    }
    
    int64_t iter_125539;
    struct futhark_mc_segred_stage_1_parloop_struct_131168
    futhark_mc_segred_stage_1_parloop_struct_131168;
    
    futhark_mc_segred_stage_1_parloop_struct_131168.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_gtid_117615 =
        gtid_117615;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_x_125320 = x_125320;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_x_125321 = x_125321;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_defunc_0_f_res_125324 =
        defunc_0_f_res_125324;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_a0_125346 = a0_125346;
    futhark_mc_segred_stage_1_parloop_struct_131168.free_reduce_stage_1_tid_res_arr_mem_125537 =
        reduce_stage_1_tid_res_arr_mem_125537;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131169_task;
    
    futhark_mc_segred_stage_1_parloop_131169_task.name =
        "futhark_mc_segred_stage_1_parloop_131169";
    futhark_mc_segred_stage_1_parloop_131169_task.fn =
        futhark_mc_segred_stage_1_parloop_131169;
    futhark_mc_segred_stage_1_parloop_131169_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131168;
    futhark_mc_segred_stage_1_parloop_131169_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131169_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131169_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131169_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131169_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131169_task);
    
    if (futhark_mc_segred_stage_1_parloop_131169_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131169_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131169_total_end -
                 futhark_mc_segred_stage_1_parloop_131169_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131169_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131169_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131169_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125347 = 0.0F;
    }
    
    float x_125541;
    float x_125542;
    
    for (int32_t i_125544 = 0; i_125544 < num_tasks_125536; i_125544++) {
        flat_tid_117622 = i_125544;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125541 = defunc_2_reduce_res_125347;
            }
            // load next params
            {
                x_125542 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125537)[flat_tid_117622];
            }
            // red body
            {
                float defunc_1_op_res_125543 = x_125541 + x_125542;
                
                defunc_2_reduce_res_125347 = defunc_1_op_res_125543;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125537);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131166_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131166_end -
                 futhark_mc_segred_task_131166_start;
        
        ctx->futhark_mc_segred_task_131166_runs[tid]++;
        ctx->futhark_mc_segred_task_131166_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131166_iter[tid] += iterations;
    }
    *futhark_mc_task_131165->retval_defunc_2_reduce_res_125347 =
        defunc_2_reduce_res_125347;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131159(void *args, int64_t start,
                                            int64_t end, int flat_tid_117618,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131158
    *futhark_mc_segmap_parloop_struct_131158 =
    (struct futhark_mc_segmap_parloop_struct_131158 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131158->ctx;
    uint64_t futhark_mc_segmap_parloop_131159_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131159_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131158->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131158->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131158->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131158->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131158->free_i_114539;
    int64_t gtid_117615 =
            futhark_mc_segmap_parloop_struct_131158->free_gtid_117615;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131158->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131158->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131158->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131158->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131158->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131158->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131158->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122256 = {.desc ="mem_122256", .mem =
                                  futhark_mc_segmap_parloop_struct_131158->free_mem_122256,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125479 = start;
    
    for (; iter_125479 < end; iter_125479++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125525 = l_n_m_114513;
        int64_t gtid_117619 = iter_125479;
        int64_t remnant_125526 = iter_125479 - gtid_117619;
        int64_t x_125320 = ((int64_t *) mem_121987.mem)[gtid_117615 *
                                                        l_n_m_114513 +
                                                        gtid_117619];
        float x_125321 = ((float *) mem_121991.mem)[gtid_117615 * l_n_m_114513 +
                                                    gtid_117619];
        int64_t min_arg_125322 = mul64(t_jump_114470, gtid_117619);
        int64_t min_res_125323 = smin64(i_114539, min_arg_125322);
        float defunc_0_f_res_125324 = sitofp_i64_f32(min_res_125323);
        float defunc_2_reduce_res_125325;
        int64_t flat_tid_117620 = (int64_t) 0;
        int32_t num_tasks_125527;
        struct futhark_mc_task_131160 futhark_mc_task_131160;
        
        futhark_mc_task_131160.ctx = ctx;
        futhark_mc_task_131160.free_n_114463 = n_114463;
        futhark_mc_task_131160.free_gtid_117615 = gtid_117615;
        futhark_mc_task_131160.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131160.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131160.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131160.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131160.free_x_125320 = x_125320;
        futhark_mc_task_131160.free_x_125321 = x_125321;
        futhark_mc_task_131160.free_defunc_0_f_res_125324 =
            defunc_0_f_res_125324;
        futhark_mc_task_131160.retval_defunc_2_reduce_res_125325 =
            &defunc_2_reduce_res_125325;
        
        struct scheduler_segop futhark_mc_task_131160_task;
        
        futhark_mc_task_131160_task.args = &futhark_mc_task_131160;
        futhark_mc_task_131160_task.top_level_fn =
            futhark_mc_segred_task_131161;
        futhark_mc_task_131160_task.name = "futhark_mc_segred_task_131161";
        futhark_mc_task_131160_task.iterations = l_window_114467;
        futhark_mc_task_131160_task.task_time =
            &ctx->futhark_mc_segred_task_131161_total_time;
        futhark_mc_task_131160_task.task_iter =
            &ctx->futhark_mc_segred_task_131161_total_iter;
        futhark_mc_task_131160_task.sched = STATIC;
        futhark_mc_task_131160_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131161_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131160_task);
        
        if (futhark_mc_segred_task_131161_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_125346 = 1.0F / defunc_2_reduce_res_125325;
        float defunc_2_reduce_res_125347;
        int64_t flat_tid_117622 = (int64_t) 0;
        int32_t num_tasks_125536;
        struct futhark_mc_task_131165 futhark_mc_task_131165;
        
        futhark_mc_task_131165.ctx = ctx;
        futhark_mc_task_131165.free_n_114463 = n_114463;
        futhark_mc_task_131165.free_gtid_117615 = gtid_117615;
        futhark_mc_task_131165.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131165.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131165.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131165.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131165.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131165.free_x_125320 = x_125320;
        futhark_mc_task_131165.free_x_125321 = x_125321;
        futhark_mc_task_131165.free_defunc_0_f_res_125324 =
            defunc_0_f_res_125324;
        futhark_mc_task_131165.free_a0_125346 = a0_125346;
        futhark_mc_task_131165.retval_defunc_2_reduce_res_125347 =
            &defunc_2_reduce_res_125347;
        
        struct scheduler_segop futhark_mc_task_131165_task;
        
        futhark_mc_task_131165_task.args = &futhark_mc_task_131165;
        futhark_mc_task_131165_task.top_level_fn =
            futhark_mc_segred_task_131166;
        futhark_mc_task_131165_task.name = "futhark_mc_segred_task_131166";
        futhark_mc_task_131165_task.iterations = l_window_114467;
        futhark_mc_task_131165_task.task_time =
            &ctx->futhark_mc_segred_task_131166_total_time;
        futhark_mc_task_131165_task.task_iter =
            &ctx->futhark_mc_segred_task_131166_total_iter;
        futhark_mc_task_131165_task.sched = STATIC;
        futhark_mc_task_131165_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131166_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131165_task);
        
        if (futhark_mc_segred_task_131166_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122256.mem)[gtid_117619] = defunc_2_reduce_res_125347;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131159_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131159_end -
                 futhark_mc_segmap_parloop_131159_start;
        
        ctx->futhark_mc_segmap_parloop_131159_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131159_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131159_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131157(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117618 = tid;
    int num_tasks_125428 = info.nsubtasks;
    struct futhark_mc_task_131153 *futhark_mc_task_131153 =
                                  (struct futhark_mc_task_131153 *) args;
    struct futhark_context *ctx = futhark_mc_task_131153->ctx;
    uint64_t futhark_mc_segmap_nested_task_131157_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131157_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131153->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131153->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131153->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131153->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131153->free_i_114539;
    int64_t gtid_117615 = futhark_mc_task_131153->free_gtid_117615;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131153->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131153->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131153->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131153->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131153->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131153->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131153->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122256 = {.desc ="mem_122256", .mem =
                                  futhark_mc_task_131153->free_mem_122256,
                                  .size =0, .references =NULL};
    int64_t iter_125479;
    struct futhark_mc_segmap_parloop_struct_131158
    futhark_mc_segmap_parloop_struct_131158;
    
    futhark_mc_segmap_parloop_struct_131158.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131158.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131158.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131158.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131158.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131158.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131158.free_gtid_117615 = gtid_117615;
    futhark_mc_segmap_parloop_struct_131158.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131158.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131158.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131158.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131158.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131158.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131158.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131158.free_mem_122256 = mem_122256.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131159_task;
    
    futhark_mc_segmap_parloop_131159_task.name =
        "futhark_mc_segmap_parloop_131159";
    futhark_mc_segmap_parloop_131159_task.fn = futhark_mc_segmap_parloop_131159;
    futhark_mc_segmap_parloop_131159_task.args =
        &futhark_mc_segmap_parloop_struct_131158;
    futhark_mc_segmap_parloop_131159_task.iterations = iterations;
    futhark_mc_segmap_parloop_131159_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131159_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131159_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131159_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131159_task);
    
    if (futhark_mc_segmap_parloop_131159_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131159_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131159_total_end -
                 futhark_mc_segmap_parloop_131159_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131159_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131159_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131159_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131157_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131157_end -
                 futhark_mc_segmap_nested_task_131157_start;
        
        ctx->futhark_mc_segmap_nested_task_131157_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131157_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131157_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131151(void *args, int64_t start,
                                            int64_t end, int flat_tid_117614,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131150
    *futhark_mc_segmap_parloop_struct_131150 =
    (struct futhark_mc_segmap_parloop_struct_131150 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131150->ctx;
    uint64_t futhark_mc_segmap_parloop_131151_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131151_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131150->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131150->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131150->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131150->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131150->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131150->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131150->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131150->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131150->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131150->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131150->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122275 = {.desc ="mem_122275", .mem =
                                  futhark_mc_segmap_parloop_struct_131150->free_mem_122275,
                                  .size =0, .references =NULL};
    size_t mem_122256_cached_sizze_131152 = 0;
    char *mem_122256 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125319 = start;
    
    if (mem_122256_cached_sizze_131152 < (size_t) bytes_121918) {
        mem_122256 = realloc(mem_122256, bytes_121918);
        mem_122256_cached_sizze_131152 = bytes_121918;
    }
    for (; iter_125319 < end; iter_125319++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125426 = m_114462;
        int64_t gtid_117615 = iter_125319;
        int64_t remnant_125427 = iter_125319 - gtid_117615;
        int64_t flat_tid_117616 = (int64_t) 0;
        int32_t num_tasks_125428;
        int64_t flat_tid_117618 = (int64_t) 0;
        struct futhark_mc_task_131153 futhark_mc_task_131153;
        
        futhark_mc_task_131153.ctx = ctx;
        futhark_mc_task_131153.free_n_114463 = n_114463;
        futhark_mc_task_131153.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131153.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131153.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131153.free_i_114539 = i_114539;
        futhark_mc_task_131153.free_gtid_117615 = gtid_117615;
        futhark_mc_task_131153.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131153.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131153.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131153.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131153.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131153.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131153.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131153.free_mem_122256 = mem_122256;
        
        struct scheduler_segop futhark_mc_task_131153_task;
        
        futhark_mc_task_131153_task.args = &futhark_mc_task_131153;
        futhark_mc_task_131153_task.top_level_fn =
            futhark_mc_segmap_task_131154;
        futhark_mc_task_131153_task.name = "futhark_mc_segmap_task_131154";
        futhark_mc_task_131153_task.iterations = l_n_m_114513;
        futhark_mc_task_131153_task.task_time =
            &ctx->futhark_mc_segmap_task_131154_total_time;
        futhark_mc_task_131153_task.task_iter =
            &ctx->futhark_mc_segmap_task_131154_total_iter;
        futhark_mc_task_131153_task.sched = STATIC;
        futhark_mc_task_131153_task.nested_fn =
            futhark_mc_segmap_nested_task_131157;
        
        int futhark_mc_segmap_task_131154_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131153_task);
        
        if (futhark_mc_segmap_task_131154_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122275.mem + gtid_117615 * l_n_m_114513 * (int64_t) 4,
                mem_122256 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122256);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131151_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131151_end -
                 futhark_mc_segmap_parloop_131151_start;
        
        ctx->futhark_mc_segmap_parloop_131151_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131151_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131151_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131149(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117614 = tid;
    int num_tasks_125256 = info.nsubtasks;
    struct futhark_mc_task_131144 *futhark_mc_task_131144 =
                                  (struct futhark_mc_task_131144 *) args;
    struct futhark_context *ctx = futhark_mc_task_131144->ctx;
    uint64_t futhark_mc_segmap_nested_task_131149_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131149_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131144->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131144->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131144->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131144->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131144->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131144->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131144->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131144->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131144->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131144->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131144->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131144->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131144->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131144->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122275 = {.desc ="mem_122275", .mem =
                                  futhark_mc_task_131144->free_mem_122275,
                                  .size =0, .references =NULL};
    int64_t iter_125319;
    struct futhark_mc_segmap_parloop_struct_131150
    futhark_mc_segmap_parloop_struct_131150;
    
    futhark_mc_segmap_parloop_struct_131150.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131150.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131150.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131150.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131150.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131150.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131150.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131150.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131150.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131150.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131150.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131150.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131150.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131150.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131150.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131150.free_mem_122275 = mem_122275.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131151_task;
    
    futhark_mc_segmap_parloop_131151_task.name =
        "futhark_mc_segmap_parloop_131151";
    futhark_mc_segmap_parloop_131151_task.fn = futhark_mc_segmap_parloop_131151;
    futhark_mc_segmap_parloop_131151_task.args =
        &futhark_mc_segmap_parloop_struct_131150;
    futhark_mc_segmap_parloop_131151_task.iterations = iterations;
    futhark_mc_segmap_parloop_131151_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131151_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131151_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131151_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131151_task);
    
    if (futhark_mc_segmap_parloop_131151_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131151_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131151_total_end -
                 futhark_mc_segmap_parloop_131151_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131151_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131149_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131149_end -
                 futhark_mc_segmap_nested_task_131149_start;
        
        ctx->futhark_mc_segmap_nested_task_131149_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131149_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131149_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131170 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122315;
    char *free_mem_122319;
};
struct futhark_mc_segmap_parloop_struct_131172 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122315;
    char *free_mem_122319;
};
static int futhark_mc_segmap_parloop_131173(void *args, int64_t start,
                                            int64_t end, int flat_tid_117797,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131172
    *futhark_mc_segmap_parloop_struct_131172 =
    (struct futhark_mc_segmap_parloop_struct_131172 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131172->ctx;
    uint64_t futhark_mc_segmap_parloop_131173_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131173_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131172->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131172->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131172->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131172->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131172->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131172->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131172->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131172->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131172->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131172->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131172->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131172->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131172->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131172->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_segmap_parloop_struct_131172->free_mem_122315,
                                  .size =0, .references =NULL};
    struct memblock mem_122319 = {.desc ="mem_122319", .mem =
                                  futhark_mc_segmap_parloop_struct_131172->free_mem_122319,
                                  .size =0, .references =NULL};
    size_t mem_122284_cached_sizze_131174 = 0;
    char *mem_122284 = NULL;
    size_t mem_122287_cached_sizze_131175 = 0;
    char *mem_122287 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125546 = start;
    
    if (mem_122284_cached_sizze_131174 < (size_t) bytes_121918) {
        mem_122284 = realloc(mem_122284, bytes_121918);
        mem_122284_cached_sizze_131174 = bytes_121918;
    }
    if (mem_122287_cached_sizze_131175 < (size_t) bytes_121918) {
        mem_122287 = realloc(mem_122287, bytes_121918);
        mem_122287_cached_sizze_131175 = bytes_121918;
    }
    for (; iter_125546 < end; iter_125546++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125630 = m_114462;
        int64_t gtid_117798 = iter_125546;
        int64_t remnant_125631 = iter_125546 - gtid_117798;
        
        for (int64_t i_125547 = 0; i_125547 < l_n_m_114513; i_125547++) {
            int64_t x_125550 = ((int64_t *) mem_121987.mem)[gtid_117798 *
                                                            l_n_m_114513 +
                                                            i_125547];
            float x_125551 = ((float *) mem_121991.mem)[gtid_117798 *
                                                        l_n_m_114513 +
                                                        i_125547];
            int64_t min_arg_125552 = mul64(t_jump_114470, i_125547);
            int64_t min_res_125553 = smin64(i_114539, min_arg_125552);
            float defunc_0_f_res_125554 = sitofp_i64_f32(min_res_125553);
            float defunc_2_reduce_res_125555;
            float defunc_2_reduce_res_125556;
            float defunc_2_reduce_res_125557;
            float redout_125559;
            float redout_125560;
            float redout_125561;
            
            redout_125559 = 0.0F;
            redout_125560 = 0.0F;
            redout_125561 = 0.0F;
            for (int64_t i_125558 = 0; i_125558 < l_window_114467; i_125558++) {
                bool cond_125562 = sle64(n_114463, i_125558);
                float defunc_0_f_res_125563;
                
                if (cond_125562) {
                    defunc_0_f_res_125563 = 0.0F;
                } else {
                    int64_t i_125564 = add64(x_125550, i_125558);
                    float index_primexp_125565 = sitofp_i64_f32(i_125564);
                    float defunc_0_f_res_f_res_125566 = 1.0F +
                          index_primexp_125565;
                    
                    defunc_0_f_res_125563 = defunc_0_f_res_f_res_125566;
                }
                
                float defunc_0_f_res_125567;
                
                if (cond_125562) {
                    defunc_0_f_res_125567 = 0.0F;
                } else {
                    int64_t i_125568 = add64(x_125550, i_125558);
                    float x_125569 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_117798 *
                                                            ctx_param_ext_122099 +
                                                            i_125568 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_125567 = x_125569;
                }
                
                float x_j_125570 = defunc_0_f_res_125563 -
                      defunc_0_f_res_125554;
                float abs_res_125571 = (float) fabs(x_j_125570);
                float tmp1_125572 = abs_res_125571 / x_125551;
                float x_125573 = tmp1_125572 * tmp1_125572;
                float y_125574 = tmp1_125572 * x_125573;
                float tmp2_125575 = 1.0F - y_125574;
                float x_125576 = tmp2_125575 * tmp2_125575;
                float tmp3_125577 = tmp2_125575 * x_125576;
                float w_j_125578 = defunc_0_f_res_125567 * tmp3_125577;
                float xw_j_125579 = x_j_125570 * w_j_125578;
                float x2w_j_125580 = x_j_125570 * xw_j_125579;
                float defunc_1_op_res_125581 = w_j_125578 + redout_125559;
                float defunc_1_op_res_125582 = xw_j_125579 + redout_125560;
                float defunc_1_op_res_125583 = x2w_j_125580 + redout_125561;
                float redout_tmp_125634 = defunc_1_op_res_125581;
                float redout_tmp_125635 = defunc_1_op_res_125582;
                float redout_tmp_125636 = defunc_1_op_res_125583;
                
                redout_125559 = redout_tmp_125634;
                redout_125560 = redout_tmp_125635;
                redout_125561 = redout_tmp_125636;
            }
            defunc_2_reduce_res_125555 = redout_125559;
            defunc_2_reduce_res_125556 = redout_125560;
            defunc_2_reduce_res_125557 = redout_125561;
            
            float x_125584 = defunc_2_reduce_res_125555 *
                  defunc_2_reduce_res_125557;
            float y_125585 = defunc_2_reduce_res_125556 *
                  defunc_2_reduce_res_125556;
            float y_125586 = x_125584 - y_125585;
            float det1_125587 = 1.0F / y_125586;
            float a11_125588 = defunc_2_reduce_res_125557 * det1_125587;
            float negate_arg_125589 = defunc_2_reduce_res_125556 * det1_125587;
            float b11_125590 = 0.0F - negate_arg_125589;
            float c11_125591 = defunc_2_reduce_res_125555 * det1_125587;
            float defunc_2_reduce_res_125592;
            float defunc_2_reduce_res_125593;
            float redout_125595;
            float redout_125596;
            
            redout_125595 = 0.0F;
            redout_125596 = 0.0F;
            for (int64_t i_125594 = 0; i_125594 < l_window_114467; i_125594++) {
                bool cond_125597 = sle64(n_114463, i_125594);
                float defunc_0_f_res_125598;
                
                if (cond_125597) {
                    defunc_0_f_res_125598 = 0.0F;
                } else {
                    int64_t i_125599 = add64(x_125550, i_125594);
                    float index_primexp_125600 = sitofp_i64_f32(i_125599);
                    float defunc_0_f_res_f_res_125601 = 1.0F +
                          index_primexp_125600;
                    
                    defunc_0_f_res_125598 = defunc_0_f_res_f_res_125601;
                }
                
                float defunc_0_f_res_125602;
                
                if (cond_125597) {
                    defunc_0_f_res_125602 = 0.0F;
                } else {
                    int64_t i_125603 = add64(x_125550, i_125594);
                    float x_125604 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_117798 *
                                                            ctx_param_ext_122099 +
                                                            i_125603 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_125602 = x_125604;
                }
                
                float x_j_125605 = defunc_0_f_res_125598 -
                      defunc_0_f_res_125554;
                float abs_res_125606 = (float) fabs(x_j_125605);
                float tmp1_125607 = abs_res_125606 / x_125551;
                float x_125608 = tmp1_125607 * tmp1_125607;
                float y_125609 = tmp1_125607 * x_125608;
                float tmp2_125610 = 1.0F - y_125609;
                float x_125611 = tmp2_125610 * tmp2_125610;
                float tmp3_125612 = tmp2_125610 * x_125611;
                float tmp4_125613 = defunc_0_f_res_125602 * tmp3_125612;
                float defunc_1_f_res_125614 = x_j_125605 * tmp4_125613;
                float defunc_0_f_res_125615;
                
                if (cond_125597) {
                    defunc_0_f_res_125615 = 0.0F;
                } else {
                    int64_t i_125616 = add64(x_125550, i_125594);
                    float x_125617 = ((float *) mem_122249.mem)[gtid_117798 *
                                                                n_114463 +
                                                                i_125616];
                    
                    defunc_0_f_res_125615 = x_125617;
                }
                
                float x_125618 = a11_125588 * tmp4_125613;
                float y_125619 = b11_125590 * defunc_1_f_res_125614;
                float x_125620 = x_125618 + y_125619;
                float defunc_9_fit_fun_res_125621 = defunc_0_f_res_125615 *
                      x_125620;
                float x_125622 = b11_125590 * tmp4_125613;
                float y_125623 = c11_125591 * defunc_1_f_res_125614;
                float x_125624 = x_125622 + y_125623;
                float defunc_9_slope_fun_res_125625 = defunc_0_f_res_125615 *
                      x_125624;
                float defunc_1_op_res_125626 = defunc_9_fit_fun_res_125621 +
                      redout_125595;
                float defunc_1_op_res_125627 = defunc_9_slope_fun_res_125625 +
                      redout_125596;
                float redout_tmp_125637 = defunc_1_op_res_125626;
                float redout_tmp_125638 = defunc_1_op_res_125627;
                
                redout_125595 = redout_tmp_125637;
                redout_125596 = redout_tmp_125638;
            }
            defunc_2_reduce_res_125592 = redout_125595;
            defunc_2_reduce_res_125593 = redout_125596;
            ((float *) mem_122284)[i_125547] = defunc_2_reduce_res_125592;
            ((float *) mem_122287)[i_125547] = defunc_2_reduce_res_125593;
        }
        memmove(mem_122315.mem + gtid_117798 * l_n_m_114513 * (int64_t) 4,
                mem_122284 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122319.mem + gtid_117798 * l_n_m_114513 * (int64_t) 4,
                mem_122287 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122284);
    free(mem_122287);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131173_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131173_end -
                 futhark_mc_segmap_parloop_131173_start;
        
        ctx->futhark_mc_segmap_parloop_131173_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131173_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131173_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131171(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117797 = tid;
    int num_tasks_125545 = info.nsubtasks;
    struct futhark_mc_task_131170 *futhark_mc_task_131170 =
                                  (struct futhark_mc_task_131170 *) args;
    struct futhark_context *ctx = futhark_mc_task_131170->ctx;
    uint64_t futhark_mc_segmap_task_131171_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131171_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131170->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131170->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131170->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131170->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131170->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131170->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131170->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131170->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131170->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131170->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131170->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131170->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131170->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131170->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_task_131170->free_mem_122315,
                                  .size =0, .references =NULL};
    struct memblock mem_122319 = {.desc ="mem_122319", .mem =
                                  futhark_mc_task_131170->free_mem_122319,
                                  .size =0, .references =NULL};
    int64_t iter_125546;
    struct futhark_mc_segmap_parloop_struct_131172
    futhark_mc_segmap_parloop_struct_131172;
    
    futhark_mc_segmap_parloop_struct_131172.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131172.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131172.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131172.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131172.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131172.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131172.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131172.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131172.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131172.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131172.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131172.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131172.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131172.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131172.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131172.free_mem_122315 = mem_122315.mem;
    futhark_mc_segmap_parloop_struct_131172.free_mem_122319 = mem_122319.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131173_task;
    
    futhark_mc_segmap_parloop_131173_task.name =
        "futhark_mc_segmap_parloop_131173";
    futhark_mc_segmap_parloop_131173_task.fn = futhark_mc_segmap_parloop_131173;
    futhark_mc_segmap_parloop_131173_task.args =
        &futhark_mc_segmap_parloop_struct_131172;
    futhark_mc_segmap_parloop_131173_task.iterations = iterations;
    futhark_mc_segmap_parloop_131173_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131173_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131173_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131173_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131173_task);
    
    if (futhark_mc_segmap_parloop_131173_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131173_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131173_total_end -
                 futhark_mc_segmap_parloop_131173_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131173_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131173_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131173_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131171_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131171_end -
                 futhark_mc_segmap_task_131171_start;
        
        ctx->futhark_mc_segmap_task_131171_runs[tid]++;
        ctx->futhark_mc_segmap_task_131171_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131171_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131177 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122315;
    char *free_mem_122319;
};
struct futhark_mc_task_131181 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117800;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122278;
    char *free_mem_122281;
};
struct futhark_mc_segmap_parloop_struct_131183 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117800;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122278;
    char *free_mem_122281;
};
static int futhark_mc_segmap_parloop_131184(void *args, int64_t start,
                                            int64_t end, int flat_tid_117801,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131183
    *futhark_mc_segmap_parloop_struct_131183 =
    (struct futhark_mc_segmap_parloop_struct_131183 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131183->ctx;
    uint64_t futhark_mc_segmap_parloop_131184_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131184_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131183->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131183->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131183->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131183->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131183->free_i_114539;
    int64_t gtid_117800 =
            futhark_mc_segmap_parloop_struct_131183->free_gtid_117800;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131183->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131183->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131183->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131183->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131183->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131183->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131183->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122278 = {.desc ="mem_122278", .mem =
                                  futhark_mc_segmap_parloop_struct_131183->free_mem_122278,
                                  .size =0, .references =NULL};
    struct memblock mem_122281 = {.desc ="mem_122281", .mem =
                                  futhark_mc_segmap_parloop_struct_131183->free_mem_122281,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125802 = start;
    
    for (; iter_125802 < end; iter_125802++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125863 = l_n_m_114513;
        int64_t gtid_117802 = iter_125802;
        int64_t remnant_125864 = iter_125802 - gtid_117802;
        int64_t x_125721 = ((int64_t *) mem_121987.mem)[gtid_117800 *
                                                        l_n_m_114513 +
                                                        gtid_117802];
        float x_125722 = ((float *) mem_121991.mem)[gtid_117800 * l_n_m_114513 +
                                                    gtid_117802];
        int64_t min_arg_125723 = mul64(t_jump_114470, gtid_117802);
        int64_t min_res_125724 = smin64(i_114539, min_arg_125723);
        float defunc_0_f_res_125725 = sitofp_i64_f32(min_res_125724);
        float defunc_2_reduce_res_125726;
        float defunc_2_reduce_res_125727;
        float defunc_2_reduce_res_125728;
        float redout_125804;
        float redout_125805;
        float redout_125806;
        
        redout_125804 = 0.0F;
        redout_125805 = 0.0F;
        redout_125806 = 0.0F;
        for (int64_t i_125803 = 0; i_125803 < l_window_114467; i_125803++) {
            bool cond_125807 = sle64(n_114463, i_125803);
            float defunc_0_f_res_125808;
            
            if (cond_125807) {
                defunc_0_f_res_125808 = 0.0F;
            } else {
                int64_t i_125809 = add64(x_125721, i_125803);
                float index_primexp_125810 = sitofp_i64_f32(i_125809);
                float defunc_0_f_res_f_res_125811 = 1.0F + index_primexp_125810;
                
                defunc_0_f_res_125808 = defunc_0_f_res_f_res_125811;
            }
            
            float defunc_0_f_res_125812;
            
            if (cond_125807) {
                defunc_0_f_res_125812 = 0.0F;
            } else {
                int64_t i_125813 = add64(x_125721, i_125803);
                float x_125814 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_117800 *
                                                        ctx_param_ext_122099 +
                                                        i_125813 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_125812 = x_125814;
            }
            
            float x_j_125815 = defunc_0_f_res_125808 - defunc_0_f_res_125725;
            float abs_res_125816 = (float) fabs(x_j_125815);
            float tmp1_125817 = abs_res_125816 / x_125722;
            float x_125818 = tmp1_125817 * tmp1_125817;
            float y_125819 = tmp1_125817 * x_125818;
            float tmp2_125820 = 1.0F - y_125819;
            float x_125821 = tmp2_125820 * tmp2_125820;
            float tmp3_125822 = tmp2_125820 * x_125821;
            float w_j_125823 = defunc_0_f_res_125812 * tmp3_125822;
            float xw_j_125824 = x_j_125815 * w_j_125823;
            float x2w_j_125825 = x_j_125815 * xw_j_125824;
            float defunc_1_op_res_125826 = w_j_125823 + redout_125804;
            float defunc_1_op_res_125827 = xw_j_125824 + redout_125805;
            float defunc_1_op_res_125828 = x2w_j_125825 + redout_125806;
            float redout_tmp_125865 = defunc_1_op_res_125826;
            float redout_tmp_125866 = defunc_1_op_res_125827;
            float redout_tmp_125867 = defunc_1_op_res_125828;
            
            redout_125804 = redout_tmp_125865;
            redout_125805 = redout_tmp_125866;
            redout_125806 = redout_tmp_125867;
        }
        defunc_2_reduce_res_125726 = redout_125804;
        defunc_2_reduce_res_125727 = redout_125805;
        defunc_2_reduce_res_125728 = redout_125806;
        
        float x_125755 = defunc_2_reduce_res_125726 *
              defunc_2_reduce_res_125728;
        float y_125756 = defunc_2_reduce_res_125727 *
              defunc_2_reduce_res_125727;
        float y_125757 = x_125755 - y_125756;
        float det1_125758 = 1.0F / y_125757;
        float a11_125759 = defunc_2_reduce_res_125728 * det1_125758;
        float negate_arg_125760 = defunc_2_reduce_res_125727 * det1_125758;
        float b11_125761 = 0.0F - negate_arg_125760;
        float c11_125762 = defunc_2_reduce_res_125726 * det1_125758;
        float defunc_2_reduce_res_125763;
        float defunc_2_reduce_res_125764;
        float redout_125830;
        float redout_125831;
        
        redout_125830 = 0.0F;
        redout_125831 = 0.0F;
        for (int64_t i_125829 = 0; i_125829 < l_window_114467; i_125829++) {
            bool cond_125832 = sle64(n_114463, i_125829);
            float defunc_0_f_res_125833;
            
            if (cond_125832) {
                defunc_0_f_res_125833 = 0.0F;
            } else {
                int64_t i_125834 = add64(x_125721, i_125829);
                float index_primexp_125835 = sitofp_i64_f32(i_125834);
                float defunc_0_f_res_f_res_125836 = 1.0F + index_primexp_125835;
                
                defunc_0_f_res_125833 = defunc_0_f_res_f_res_125836;
            }
            
            float defunc_0_f_res_125837;
            
            if (cond_125832) {
                defunc_0_f_res_125837 = 0.0F;
            } else {
                int64_t i_125838 = add64(x_125721, i_125829);
                float x_125839 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_117800 *
                                                        ctx_param_ext_122099 +
                                                        i_125838 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_125837 = x_125839;
            }
            
            float x_j_125840 = defunc_0_f_res_125833 - defunc_0_f_res_125725;
            float abs_res_125841 = (float) fabs(x_j_125840);
            float tmp1_125842 = abs_res_125841 / x_125722;
            float x_125843 = tmp1_125842 * tmp1_125842;
            float y_125844 = tmp1_125842 * x_125843;
            float tmp2_125845 = 1.0F - y_125844;
            float x_125846 = tmp2_125845 * tmp2_125845;
            float tmp3_125847 = tmp2_125845 * x_125846;
            float tmp4_125848 = defunc_0_f_res_125837 * tmp3_125847;
            float defunc_1_f_res_125849 = x_j_125840 * tmp4_125848;
            float defunc_0_f_res_125850;
            
            if (cond_125832) {
                defunc_0_f_res_125850 = 0.0F;
            } else {
                int64_t i_125851 = add64(x_125721, i_125829);
                float x_125852 = ((float *) mem_122249.mem)[gtid_117800 *
                                                            n_114463 +
                                                            i_125851];
                
                defunc_0_f_res_125850 = x_125852;
            }
            
            float x_125853 = a11_125759 * tmp4_125848;
            float y_125854 = b11_125761 * defunc_1_f_res_125849;
            float x_125855 = x_125853 + y_125854;
            float defunc_9_fit_fun_res_125856 = defunc_0_f_res_125850 *
                  x_125855;
            float x_125857 = b11_125761 * tmp4_125848;
            float y_125858 = c11_125762 * defunc_1_f_res_125849;
            float x_125859 = x_125857 + y_125858;
            float defunc_9_slope_fun_res_125860 = defunc_0_f_res_125850 *
                  x_125859;
            float defunc_1_op_res_125861 = defunc_9_fit_fun_res_125856 +
                  redout_125830;
            float defunc_1_op_res_125862 = defunc_9_slope_fun_res_125860 +
                  redout_125831;
            float redout_tmp_125868 = defunc_1_op_res_125861;
            float redout_tmp_125869 = defunc_1_op_res_125862;
            
            redout_125830 = redout_tmp_125868;
            redout_125831 = redout_tmp_125869;
        }
        defunc_2_reduce_res_125763 = redout_125830;
        defunc_2_reduce_res_125764 = redout_125831;
        ((float *) mem_122278.mem)[gtid_117802] = defunc_2_reduce_res_125763;
        ((float *) mem_122281.mem)[gtid_117802] = defunc_2_reduce_res_125764;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131184_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131184_end -
                 futhark_mc_segmap_parloop_131184_start;
        
        ctx->futhark_mc_segmap_parloop_131184_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131184_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131184_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131182(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117801 = tid;
    int num_tasks_125801 = info.nsubtasks;
    struct futhark_mc_task_131181 *futhark_mc_task_131181 =
                                  (struct futhark_mc_task_131181 *) args;
    struct futhark_context *ctx = futhark_mc_task_131181->ctx;
    uint64_t futhark_mc_segmap_task_131182_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131182_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131181->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131181->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131181->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131181->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131181->free_i_114539;
    int64_t gtid_117800 = futhark_mc_task_131181->free_gtid_117800;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131181->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131181->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131181->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131181->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131181->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131181->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131181->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122278 = {.desc ="mem_122278", .mem =
                                  futhark_mc_task_131181->free_mem_122278,
                                  .size =0, .references =NULL};
    struct memblock mem_122281 = {.desc ="mem_122281", .mem =
                                  futhark_mc_task_131181->free_mem_122281,
                                  .size =0, .references =NULL};
    int64_t iter_125802;
    struct futhark_mc_segmap_parloop_struct_131183
    futhark_mc_segmap_parloop_struct_131183;
    
    futhark_mc_segmap_parloop_struct_131183.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131183.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131183.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131183.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131183.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131183.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131183.free_gtid_117800 = gtid_117800;
    futhark_mc_segmap_parloop_struct_131183.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131183.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131183.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131183.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131183.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131183.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131183.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131183.free_mem_122278 = mem_122278.mem;
    futhark_mc_segmap_parloop_struct_131183.free_mem_122281 = mem_122281.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131184_task;
    
    futhark_mc_segmap_parloop_131184_task.name =
        "futhark_mc_segmap_parloop_131184";
    futhark_mc_segmap_parloop_131184_task.fn = futhark_mc_segmap_parloop_131184;
    futhark_mc_segmap_parloop_131184_task.args =
        &futhark_mc_segmap_parloop_struct_131183;
    futhark_mc_segmap_parloop_131184_task.iterations = iterations;
    futhark_mc_segmap_parloop_131184_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131184_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131184_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131184_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131184_task);
    
    if (futhark_mc_segmap_parloop_131184_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131184_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131184_total_end -
                 futhark_mc_segmap_parloop_131184_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131184_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131184_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131184_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131182_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131182_end -
                 futhark_mc_segmap_task_131182_start;
        
        ctx->futhark_mc_segmap_task_131182_runs[tid]++;
        ctx->futhark_mc_segmap_task_131182_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131182_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131186 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_117800;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122278;
    char *free_mem_122281;
};
struct futhark_mc_task_131188 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117800;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_125640;
    float free_x_125641;
    float free_defunc_0_f_res_125644;
    float *retval_defunc_2_reduce_res_125645;
    float *retval_defunc_2_reduce_res_125646;
    float *retval_defunc_2_reduce_res_125647;
};
struct futhark_mc_segred_stage_1_parloop_struct_131193 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117800;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_125640;
    float free_x_125641;
    float free_defunc_0_f_res_125644;
    char *free_reduce_stage_1_tid_res_arr_mem_125937;
    char *free_reduce_stage_1_tid_res_arr_mem_125939;
    char *free_reduce_stage_1_tid_res_arr_mem_125941;
};
static int futhark_mc_segred_stage_1_parloop_131194(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117805,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131193
    *futhark_mc_segred_stage_1_parloop_struct_131193 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131193 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131193->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131194_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131194_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_n_114463;
    int64_t gtid_117800 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_gtid_117800;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131193->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_125640 =
            futhark_mc_segred_stage_1_parloop_struct_131193->free_x_125640;
    float x_125641 =
          futhark_mc_segred_stage_1_parloop_struct_131193->free_x_125641;
    float defunc_0_f_res_125644 =
          futhark_mc_segred_stage_1_parloop_struct_131193->free_defunc_0_f_res_125644;
    struct memblock reduce_stage_1_tid_res_arr_mem_125937 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125937",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131193->free_reduce_stage_1_tid_res_arr_mem_125937,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125939 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125939",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131193->free_reduce_stage_1_tid_res_arr_mem_125939,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125941 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125941",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131193->free_reduce_stage_1_tid_res_arr_mem_125941,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125943 = start;
    float x_125871;
    float x_125872;
    float x_125874;
    float x_125875;
    float x_125877;
    float x_125878;
    float local_acc_125944 = 0.0F;
    float local_acc_125945 = 0.0F;
    float local_acc_125946 = 0.0F;
    
    for (; iter_125943 < end; iter_125943++) {
        int64_t gtid_117806 = iter_125943;
        bool cond_125880 = sle64(n_114463, gtid_117806);
        float defunc_0_f_res_125881;
        
        if (cond_125880) {
            defunc_0_f_res_125881 = 0.0F;
        } else {
            int64_t i_125882 = add64(gtid_117806, x_125640);
            float index_primexp_125883 = sitofp_i64_f32(i_125882);
            float defunc_0_f_res_f_res_125884 = 1.0F + index_primexp_125883;
            
            defunc_0_f_res_125881 = defunc_0_f_res_f_res_125884;
        }
        
        float defunc_0_f_res_125885;
        
        if (cond_125880) {
            defunc_0_f_res_125885 = 0.0F;
        } else {
            int64_t i_125886 = add64(gtid_117806, x_125640);
            float x_125887 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_117800 *
                                                    ctx_param_ext_122099 +
                                                    i_125886 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_125885 = x_125887;
        }
        
        float x_j_125888 = defunc_0_f_res_125881 - defunc_0_f_res_125644;
        float abs_res_125889 = (float) fabs(x_j_125888);
        float tmp1_125890 = abs_res_125889 / x_125641;
        float x_125891 = tmp1_125890 * tmp1_125890;
        float y_125892 = tmp1_125890 * x_125891;
        float tmp2_125893 = 1.0F - y_125892;
        float x_125894 = tmp2_125893 * tmp2_125893;
        float tmp3_125895 = tmp2_125893 * x_125894;
        float w_j_125896 = defunc_0_f_res_125885 * tmp3_125895;
        float xw_j_125897 = x_j_125888 * w_j_125896;
        float x2w_j_125898 = x_j_125888 * xw_j_125897;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125871 = local_acc_125944;
        }
        // Load next params
        {
            x_125872 = w_j_125896;
        }
        // Red body
        {
            float defunc_1_op_res_125873 = x_125871 + x_125872;
            
            local_acc_125944 = defunc_1_op_res_125873;
        }
        // Load accum params
        {
            x_125874 = local_acc_125945;
        }
        // Load next params
        {
            x_125875 = xw_j_125897;
        }
        // Red body
        {
            float defunc_1_op_res_125876 = x_125874 + x_125875;
            
            local_acc_125945 = defunc_1_op_res_125876;
        }
        // Load accum params
        {
            x_125877 = local_acc_125946;
        }
        // Load next params
        {
            x_125878 = x2w_j_125898;
        }
        // Red body
        {
            float defunc_1_op_res_125879 = x_125877 + x_125878;
            
            local_acc_125946 = defunc_1_op_res_125879;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125937.mem)[flat_tid_117805] =
        local_acc_125944;
    ((float *) reduce_stage_1_tid_res_arr_mem_125939.mem)[flat_tid_117805] =
        local_acc_125945;
    ((float *) reduce_stage_1_tid_res_arr_mem_125941.mem)[flat_tid_117805] =
        local_acc_125946;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131194_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131194_end -
                 futhark_mc_segred_stage_1_parloop_131194_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131194_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131194_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131194_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131189(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117805 = tid;
    int num_tasks_125936 = info.nsubtasks;
    struct futhark_mc_task_131188 *futhark_mc_task_131188 =
                                  (struct futhark_mc_task_131188 *) args;
    struct futhark_context *ctx = futhark_mc_task_131188->ctx;
    uint64_t futhark_mc_segred_task_131189_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131189_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131188->free_n_114463;
    int64_t gtid_117800 = futhark_mc_task_131188->free_gtid_117800;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131188->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131188->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131188->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131188->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_125640 = futhark_mc_task_131188->free_x_125640;
    float x_125641 = futhark_mc_task_131188->free_x_125641;
    float defunc_0_f_res_125644 =
          futhark_mc_task_131188->free_defunc_0_f_res_125644;
    float defunc_2_reduce_res_125645 =
          *futhark_mc_task_131188->retval_defunc_2_reduce_res_125645;
    float defunc_2_reduce_res_125646 =
          *futhark_mc_task_131188->retval_defunc_2_reduce_res_125646;
    float defunc_2_reduce_res_125647 =
          *futhark_mc_task_131188->retval_defunc_2_reduce_res_125647;
    size_t reduce_stage_1_tid_res_arr_mem_125937_cached_sizze_131190 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125937 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125939_cached_sizze_131191 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125939 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125941_cached_sizze_131192 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125941 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125937_cached_sizze_131190 <
        (size_t) ((int64_t) 4 * num_tasks_125936)) {
        reduce_stage_1_tid_res_arr_mem_125937 =
            realloc(reduce_stage_1_tid_res_arr_mem_125937, (int64_t) 4 *
                    num_tasks_125936);
        reduce_stage_1_tid_res_arr_mem_125937_cached_sizze_131190 =
            (int64_t) 4 * num_tasks_125936;
    }
    if (reduce_stage_1_tid_res_arr_mem_125939_cached_sizze_131191 <
        (size_t) ((int64_t) 4 * num_tasks_125936)) {
        reduce_stage_1_tid_res_arr_mem_125939 =
            realloc(reduce_stage_1_tid_res_arr_mem_125939, (int64_t) 4 *
                    num_tasks_125936);
        reduce_stage_1_tid_res_arr_mem_125939_cached_sizze_131191 =
            (int64_t) 4 * num_tasks_125936;
    }
    if (reduce_stage_1_tid_res_arr_mem_125941_cached_sizze_131192 <
        (size_t) ((int64_t) 4 * num_tasks_125936)) {
        reduce_stage_1_tid_res_arr_mem_125941 =
            realloc(reduce_stage_1_tid_res_arr_mem_125941, (int64_t) 4 *
                    num_tasks_125936);
        reduce_stage_1_tid_res_arr_mem_125941_cached_sizze_131192 =
            (int64_t) 4 * num_tasks_125936;
    }
    
    int64_t iter_125943;
    struct futhark_mc_segred_stage_1_parloop_struct_131193
    futhark_mc_segred_stage_1_parloop_struct_131193;
    
    futhark_mc_segred_stage_1_parloop_struct_131193.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_gtid_117800 =
        gtid_117800;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_x_125640 = x_125640;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_x_125641 = x_125641;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_defunc_0_f_res_125644 =
        defunc_0_f_res_125644;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_reduce_stage_1_tid_res_arr_mem_125937 =
        reduce_stage_1_tid_res_arr_mem_125937;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_reduce_stage_1_tid_res_arr_mem_125939 =
        reduce_stage_1_tid_res_arr_mem_125939;
    futhark_mc_segred_stage_1_parloop_struct_131193.free_reduce_stage_1_tid_res_arr_mem_125941 =
        reduce_stage_1_tid_res_arr_mem_125941;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131194_task;
    
    futhark_mc_segred_stage_1_parloop_131194_task.name =
        "futhark_mc_segred_stage_1_parloop_131194";
    futhark_mc_segred_stage_1_parloop_131194_task.fn =
        futhark_mc_segred_stage_1_parloop_131194;
    futhark_mc_segred_stage_1_parloop_131194_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131193;
    futhark_mc_segred_stage_1_parloop_131194_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131194_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131194_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131194_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131194_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131194_task);
    
    if (futhark_mc_segred_stage_1_parloop_131194_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131194_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131194_total_end -
                 futhark_mc_segred_stage_1_parloop_131194_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131194_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131194_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131194_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125645 = 0.0F;
        defunc_2_reduce_res_125646 = 0.0F;
        defunc_2_reduce_res_125647 = 0.0F;
    }
    
    float x_125947;
    float x_125948;
    float x_125950;
    float x_125951;
    float x_125953;
    float x_125954;
    
    for (int32_t i_125956 = 0; i_125956 < num_tasks_125936; i_125956++) {
        flat_tid_117805 = i_125956;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125947 = defunc_2_reduce_res_125645;
            }
            // load next params
            {
                x_125948 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125937)[flat_tid_117805];
            }
            // red body
            {
                float defunc_1_op_res_125949 = x_125947 + x_125948;
                
                defunc_2_reduce_res_125645 = defunc_1_op_res_125949;
            }
            // load acc params
            {
                x_125950 = defunc_2_reduce_res_125646;
            }
            // load next params
            {
                x_125951 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125939)[flat_tid_117805];
            }
            // red body
            {
                float defunc_1_op_res_125952 = x_125950 + x_125951;
                
                defunc_2_reduce_res_125646 = defunc_1_op_res_125952;
            }
            // load acc params
            {
                x_125953 = defunc_2_reduce_res_125647;
            }
            // load next params
            {
                x_125954 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125941)[flat_tid_117805];
            }
            // red body
            {
                float defunc_1_op_res_125955 = x_125953 + x_125954;
                
                defunc_2_reduce_res_125647 = defunc_1_op_res_125955;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125937);
    free(reduce_stage_1_tid_res_arr_mem_125939);
    free(reduce_stage_1_tid_res_arr_mem_125941);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131189_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131189_end -
                 futhark_mc_segred_task_131189_start;
        
        ctx->futhark_mc_segred_task_131189_runs[tid]++;
        ctx->futhark_mc_segred_task_131189_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131189_iter[tid] += iterations;
    }
    *futhark_mc_task_131188->retval_defunc_2_reduce_res_125645 =
        defunc_2_reduce_res_125645;
    *futhark_mc_task_131188->retval_defunc_2_reduce_res_125646 =
        defunc_2_reduce_res_125646;
    *futhark_mc_task_131188->retval_defunc_2_reduce_res_125647 =
        defunc_2_reduce_res_125647;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131195 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117800;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_125640;
    float free_x_125641;
    float free_defunc_0_f_res_125644;
    float free_a11_125680;
    float free_b11_125682;
    float free_c11_125683;
    float *retval_defunc_2_reduce_res_125684;
    float *retval_defunc_2_reduce_res_125685;
};
struct futhark_mc_segred_stage_1_parloop_struct_131199 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_117800;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_125640;
    float free_x_125641;
    float free_defunc_0_f_res_125644;
    float free_a11_125680;
    float free_b11_125682;
    float free_c11_125683;
    char *free_reduce_stage_1_tid_res_arr_mem_125958;
    char *free_reduce_stage_1_tid_res_arr_mem_125960;
};
static int futhark_mc_segred_stage_1_parloop_131200(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117807,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131199
    *futhark_mc_segred_stage_1_parloop_struct_131199 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131199 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131199->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131200_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131200_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_n_114463;
    int64_t gtid_117800 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_gtid_117800;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131199->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131199->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_125640 =
            futhark_mc_segred_stage_1_parloop_struct_131199->free_x_125640;
    float x_125641 =
          futhark_mc_segred_stage_1_parloop_struct_131199->free_x_125641;
    float defunc_0_f_res_125644 =
          futhark_mc_segred_stage_1_parloop_struct_131199->free_defunc_0_f_res_125644;
    float a11_125680 =
          futhark_mc_segred_stage_1_parloop_struct_131199->free_a11_125680;
    float b11_125682 =
          futhark_mc_segred_stage_1_parloop_struct_131199->free_b11_125682;
    float c11_125683 =
          futhark_mc_segred_stage_1_parloop_struct_131199->free_c11_125683;
    struct memblock reduce_stage_1_tid_res_arr_mem_125958 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125958",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131199->free_reduce_stage_1_tid_res_arr_mem_125958,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125960 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125960",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131199->free_reduce_stage_1_tid_res_arr_mem_125960,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125962 = start;
    float x_125899;
    float x_125900;
    float x_125902;
    float x_125903;
    float local_acc_125963 = 0.0F;
    float local_acc_125964 = 0.0F;
    
    for (; iter_125962 < end; iter_125962++) {
        int64_t gtid_117808 = iter_125962;
        bool cond_125905 = sle64(n_114463, gtid_117808);
        float defunc_0_f_res_125906;
        
        if (cond_125905) {
            defunc_0_f_res_125906 = 0.0F;
        } else {
            int64_t i_125907 = add64(gtid_117808, x_125640);
            float index_primexp_125908 = sitofp_i64_f32(i_125907);
            float defunc_0_f_res_f_res_125909 = 1.0F + index_primexp_125908;
            
            defunc_0_f_res_125906 = defunc_0_f_res_f_res_125909;
        }
        
        float defunc_0_f_res_125910;
        
        if (cond_125905) {
            defunc_0_f_res_125910 = 0.0F;
        } else {
            int64_t i_125911 = add64(gtid_117808, x_125640);
            float x_125912 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_117800 *
                                                    ctx_param_ext_122099 +
                                                    i_125911 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_125910 = x_125912;
        }
        
        float x_j_125913 = defunc_0_f_res_125906 - defunc_0_f_res_125644;
        float abs_res_125914 = (float) fabs(x_j_125913);
        float tmp1_125915 = abs_res_125914 / x_125641;
        float x_125916 = tmp1_125915 * tmp1_125915;
        float y_125917 = tmp1_125915 * x_125916;
        float tmp2_125918 = 1.0F - y_125917;
        float x_125919 = tmp2_125918 * tmp2_125918;
        float tmp3_125920 = tmp2_125918 * x_125919;
        float tmp4_125921 = defunc_0_f_res_125910 * tmp3_125920;
        float defunc_1_f_res_125922 = x_j_125913 * tmp4_125921;
        float defunc_0_f_res_125923;
        
        if (cond_125905) {
            defunc_0_f_res_125923 = 0.0F;
        } else {
            int64_t i_125924 = add64(gtid_117808, x_125640);
            float x_125925 = ((float *) mem_122249.mem)[gtid_117800 * n_114463 +
                                                        i_125924];
            
            defunc_0_f_res_125923 = x_125925;
        }
        
        float x_125926 = a11_125680 * tmp4_125921;
        float y_125927 = b11_125682 * defunc_1_f_res_125922;
        float x_125928 = x_125926 + y_125927;
        float defunc_9_fit_fun_res_125929 = defunc_0_f_res_125923 * x_125928;
        float x_125930 = b11_125682 * tmp4_125921;
        float y_125931 = c11_125683 * defunc_1_f_res_125922;
        float x_125932 = x_125930 + y_125931;
        float defunc_9_slope_fun_res_125933 = defunc_0_f_res_125923 * x_125932;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125899 = local_acc_125963;
        }
        // Load next params
        {
            x_125900 = defunc_9_fit_fun_res_125929;
        }
        // Red body
        {
            float defunc_1_op_res_125901 = x_125899 + x_125900;
            
            local_acc_125963 = defunc_1_op_res_125901;
        }
        // Load accum params
        {
            x_125902 = local_acc_125964;
        }
        // Load next params
        {
            x_125903 = defunc_9_slope_fun_res_125933;
        }
        // Red body
        {
            float defunc_1_op_res_125904 = x_125902 + x_125903;
            
            local_acc_125964 = defunc_1_op_res_125904;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125958.mem)[flat_tid_117807] =
        local_acc_125963;
    ((float *) reduce_stage_1_tid_res_arr_mem_125960.mem)[flat_tid_117807] =
        local_acc_125964;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131200_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131200_end -
                 futhark_mc_segred_stage_1_parloop_131200_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131200_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131200_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131200_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131196(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117807 = tid;
    int num_tasks_125957 = info.nsubtasks;
    struct futhark_mc_task_131195 *futhark_mc_task_131195 =
                                  (struct futhark_mc_task_131195 *) args;
    struct futhark_context *ctx = futhark_mc_task_131195->ctx;
    uint64_t futhark_mc_segred_task_131196_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131196_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131195->free_n_114463;
    int64_t gtid_117800 = futhark_mc_task_131195->free_gtid_117800;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131195->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131195->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131195->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131195->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131195->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_125640 = futhark_mc_task_131195->free_x_125640;
    float x_125641 = futhark_mc_task_131195->free_x_125641;
    float defunc_0_f_res_125644 =
          futhark_mc_task_131195->free_defunc_0_f_res_125644;
    float a11_125680 = futhark_mc_task_131195->free_a11_125680;
    float b11_125682 = futhark_mc_task_131195->free_b11_125682;
    float c11_125683 = futhark_mc_task_131195->free_c11_125683;
    float defunc_2_reduce_res_125684 =
          *futhark_mc_task_131195->retval_defunc_2_reduce_res_125684;
    float defunc_2_reduce_res_125685 =
          *futhark_mc_task_131195->retval_defunc_2_reduce_res_125685;
    size_t reduce_stage_1_tid_res_arr_mem_125958_cached_sizze_131197 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125958 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125960_cached_sizze_131198 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125960 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125958_cached_sizze_131197 <
        (size_t) ((int64_t) 4 * num_tasks_125957)) {
        reduce_stage_1_tid_res_arr_mem_125958 =
            realloc(reduce_stage_1_tid_res_arr_mem_125958, (int64_t) 4 *
                    num_tasks_125957);
        reduce_stage_1_tid_res_arr_mem_125958_cached_sizze_131197 =
            (int64_t) 4 * num_tasks_125957;
    }
    if (reduce_stage_1_tid_res_arr_mem_125960_cached_sizze_131198 <
        (size_t) ((int64_t) 4 * num_tasks_125957)) {
        reduce_stage_1_tid_res_arr_mem_125960 =
            realloc(reduce_stage_1_tid_res_arr_mem_125960, (int64_t) 4 *
                    num_tasks_125957);
        reduce_stage_1_tid_res_arr_mem_125960_cached_sizze_131198 =
            (int64_t) 4 * num_tasks_125957;
    }
    
    int64_t iter_125962;
    struct futhark_mc_segred_stage_1_parloop_struct_131199
    futhark_mc_segred_stage_1_parloop_struct_131199;
    
    futhark_mc_segred_stage_1_parloop_struct_131199.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_gtid_117800 =
        gtid_117800;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_x_125640 = x_125640;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_x_125641 = x_125641;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_defunc_0_f_res_125644 =
        defunc_0_f_res_125644;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_a11_125680 =
        a11_125680;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_b11_125682 =
        b11_125682;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_c11_125683 =
        c11_125683;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_reduce_stage_1_tid_res_arr_mem_125958 =
        reduce_stage_1_tid_res_arr_mem_125958;
    futhark_mc_segred_stage_1_parloop_struct_131199.free_reduce_stage_1_tid_res_arr_mem_125960 =
        reduce_stage_1_tid_res_arr_mem_125960;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131200_task;
    
    futhark_mc_segred_stage_1_parloop_131200_task.name =
        "futhark_mc_segred_stage_1_parloop_131200";
    futhark_mc_segred_stage_1_parloop_131200_task.fn =
        futhark_mc_segred_stage_1_parloop_131200;
    futhark_mc_segred_stage_1_parloop_131200_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131199;
    futhark_mc_segred_stage_1_parloop_131200_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131200_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131200_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131200_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131200_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131200_task);
    
    if (futhark_mc_segred_stage_1_parloop_131200_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131200_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131200_total_end -
                 futhark_mc_segred_stage_1_parloop_131200_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131200_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131200_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131200_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125684 = 0.0F;
        defunc_2_reduce_res_125685 = 0.0F;
    }
    
    float x_125965;
    float x_125966;
    float x_125968;
    float x_125969;
    
    for (int32_t i_125971 = 0; i_125971 < num_tasks_125957; i_125971++) {
        flat_tid_117807 = i_125971;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125965 = defunc_2_reduce_res_125684;
            }
            // load next params
            {
                x_125966 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125958)[flat_tid_117807];
            }
            // red body
            {
                float defunc_1_op_res_125967 = x_125965 + x_125966;
                
                defunc_2_reduce_res_125684 = defunc_1_op_res_125967;
            }
            // load acc params
            {
                x_125968 = defunc_2_reduce_res_125685;
            }
            // load next params
            {
                x_125969 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125960)[flat_tid_117807];
            }
            // red body
            {
                float defunc_1_op_res_125970 = x_125968 + x_125969;
                
                defunc_2_reduce_res_125685 = defunc_1_op_res_125970;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125958);
    free(reduce_stage_1_tid_res_arr_mem_125960);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131196_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131196_end -
                 futhark_mc_segred_task_131196_start;
        
        ctx->futhark_mc_segred_task_131196_runs[tid]++;
        ctx->futhark_mc_segred_task_131196_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131196_iter[tid] += iterations;
    }
    *futhark_mc_task_131195->retval_defunc_2_reduce_res_125684 =
        defunc_2_reduce_res_125684;
    *futhark_mc_task_131195->retval_defunc_2_reduce_res_125685 =
        defunc_2_reduce_res_125685;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131187(void *args, int64_t start,
                                            int64_t end, int flat_tid_117803,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131186
    *futhark_mc_segmap_parloop_struct_131186 =
    (struct futhark_mc_segmap_parloop_struct_131186 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131186->ctx;
    uint64_t futhark_mc_segmap_parloop_131187_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131187_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131186->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131186->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131186->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131186->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131186->free_i_114539;
    int64_t gtid_117800 =
            futhark_mc_segmap_parloop_struct_131186->free_gtid_117800;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131186->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131186->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131186->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131186->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131186->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131186->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131186->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122278 = {.desc ="mem_122278", .mem =
                                  futhark_mc_segmap_parloop_struct_131186->free_mem_122278,
                                  .size =0, .references =NULL};
    struct memblock mem_122281 = {.desc ="mem_122281", .mem =
                                  futhark_mc_segmap_parloop_struct_131186->free_mem_122281,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125870 = start;
    
    for (; iter_125870 < end; iter_125870++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125934 = l_n_m_114513;
        int64_t gtid_117804 = iter_125870;
        int64_t remnant_125935 = iter_125870 - gtid_117804;
        int64_t x_125640 = ((int64_t *) mem_121987.mem)[gtid_117800 *
                                                        l_n_m_114513 +
                                                        gtid_117804];
        float x_125641 = ((float *) mem_121991.mem)[gtid_117800 * l_n_m_114513 +
                                                    gtid_117804];
        int64_t min_arg_125642 = mul64(t_jump_114470, gtid_117804);
        int64_t min_res_125643 = smin64(i_114539, min_arg_125642);
        float defunc_0_f_res_125644 = sitofp_i64_f32(min_res_125643);
        float defunc_2_reduce_res_125645;
        float defunc_2_reduce_res_125646;
        float defunc_2_reduce_res_125647;
        int64_t flat_tid_117805 = (int64_t) 0;
        int32_t num_tasks_125936;
        struct futhark_mc_task_131188 futhark_mc_task_131188;
        
        futhark_mc_task_131188.ctx = ctx;
        futhark_mc_task_131188.free_n_114463 = n_114463;
        futhark_mc_task_131188.free_gtid_117800 = gtid_117800;
        futhark_mc_task_131188.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131188.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131188.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131188.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131188.free_x_125640 = x_125640;
        futhark_mc_task_131188.free_x_125641 = x_125641;
        futhark_mc_task_131188.free_defunc_0_f_res_125644 =
            defunc_0_f_res_125644;
        futhark_mc_task_131188.retval_defunc_2_reduce_res_125645 =
            &defunc_2_reduce_res_125645;
        futhark_mc_task_131188.retval_defunc_2_reduce_res_125646 =
            &defunc_2_reduce_res_125646;
        futhark_mc_task_131188.retval_defunc_2_reduce_res_125647 =
            &defunc_2_reduce_res_125647;
        
        struct scheduler_segop futhark_mc_task_131188_task;
        
        futhark_mc_task_131188_task.args = &futhark_mc_task_131188;
        futhark_mc_task_131188_task.top_level_fn =
            futhark_mc_segred_task_131189;
        futhark_mc_task_131188_task.name = "futhark_mc_segred_task_131189";
        futhark_mc_task_131188_task.iterations = l_window_114467;
        futhark_mc_task_131188_task.task_time =
            &ctx->futhark_mc_segred_task_131189_total_time;
        futhark_mc_task_131188_task.task_iter =
            &ctx->futhark_mc_segred_task_131189_total_iter;
        futhark_mc_task_131188_task.sched = STATIC;
        futhark_mc_task_131188_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131189_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131188_task);
        
        if (futhark_mc_segred_task_131189_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_125676 = defunc_2_reduce_res_125645 *
              defunc_2_reduce_res_125647;
        float y_125677 = defunc_2_reduce_res_125646 *
              defunc_2_reduce_res_125646;
        float y_125678 = x_125676 - y_125677;
        float det1_125679 = 1.0F / y_125678;
        float a11_125680 = defunc_2_reduce_res_125647 * det1_125679;
        float negate_arg_125681 = defunc_2_reduce_res_125646 * det1_125679;
        float b11_125682 = 0.0F - negate_arg_125681;
        float c11_125683 = defunc_2_reduce_res_125645 * det1_125679;
        float defunc_2_reduce_res_125684;
        float defunc_2_reduce_res_125685;
        int64_t flat_tid_117807 = (int64_t) 0;
        int32_t num_tasks_125957;
        struct futhark_mc_task_131195 futhark_mc_task_131195;
        
        futhark_mc_task_131195.ctx = ctx;
        futhark_mc_task_131195.free_n_114463 = n_114463;
        futhark_mc_task_131195.free_gtid_117800 = gtid_117800;
        futhark_mc_task_131195.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131195.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131195.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131195.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131195.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131195.free_x_125640 = x_125640;
        futhark_mc_task_131195.free_x_125641 = x_125641;
        futhark_mc_task_131195.free_defunc_0_f_res_125644 =
            defunc_0_f_res_125644;
        futhark_mc_task_131195.free_a11_125680 = a11_125680;
        futhark_mc_task_131195.free_b11_125682 = b11_125682;
        futhark_mc_task_131195.free_c11_125683 = c11_125683;
        futhark_mc_task_131195.retval_defunc_2_reduce_res_125684 =
            &defunc_2_reduce_res_125684;
        futhark_mc_task_131195.retval_defunc_2_reduce_res_125685 =
            &defunc_2_reduce_res_125685;
        
        struct scheduler_segop futhark_mc_task_131195_task;
        
        futhark_mc_task_131195_task.args = &futhark_mc_task_131195;
        futhark_mc_task_131195_task.top_level_fn =
            futhark_mc_segred_task_131196;
        futhark_mc_task_131195_task.name = "futhark_mc_segred_task_131196";
        futhark_mc_task_131195_task.iterations = l_window_114467;
        futhark_mc_task_131195_task.task_time =
            &ctx->futhark_mc_segred_task_131196_total_time;
        futhark_mc_task_131195_task.task_iter =
            &ctx->futhark_mc_segred_task_131196_total_iter;
        futhark_mc_task_131195_task.sched = STATIC;
        futhark_mc_task_131195_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131196_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131195_task);
        
        if (futhark_mc_segred_task_131196_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122278.mem)[gtid_117804] = defunc_2_reduce_res_125684;
        ((float *) mem_122281.mem)[gtid_117804] = defunc_2_reduce_res_125685;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131187_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131187_end -
                 futhark_mc_segmap_parloop_131187_start;
        
        ctx->futhark_mc_segmap_parloop_131187_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131187_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131187_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131185(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117803 = tid;
    int num_tasks_125801 = info.nsubtasks;
    struct futhark_mc_task_131181 *futhark_mc_task_131181 =
                                  (struct futhark_mc_task_131181 *) args;
    struct futhark_context *ctx = futhark_mc_task_131181->ctx;
    uint64_t futhark_mc_segmap_nested_task_131185_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131185_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131181->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131181->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131181->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131181->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131181->free_i_114539;
    int64_t gtid_117800 = futhark_mc_task_131181->free_gtid_117800;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131181->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131181->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131181->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131181->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131181->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131181->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131181->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122278 = {.desc ="mem_122278", .mem =
                                  futhark_mc_task_131181->free_mem_122278,
                                  .size =0, .references =NULL};
    struct memblock mem_122281 = {.desc ="mem_122281", .mem =
                                  futhark_mc_task_131181->free_mem_122281,
                                  .size =0, .references =NULL};
    int64_t iter_125870;
    struct futhark_mc_segmap_parloop_struct_131186
    futhark_mc_segmap_parloop_struct_131186;
    
    futhark_mc_segmap_parloop_struct_131186.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131186.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131186.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131186.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131186.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131186.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131186.free_gtid_117800 = gtid_117800;
    futhark_mc_segmap_parloop_struct_131186.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131186.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131186.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131186.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131186.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131186.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131186.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131186.free_mem_122278 = mem_122278.mem;
    futhark_mc_segmap_parloop_struct_131186.free_mem_122281 = mem_122281.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131187_task;
    
    futhark_mc_segmap_parloop_131187_task.name =
        "futhark_mc_segmap_parloop_131187";
    futhark_mc_segmap_parloop_131187_task.fn = futhark_mc_segmap_parloop_131187;
    futhark_mc_segmap_parloop_131187_task.args =
        &futhark_mc_segmap_parloop_struct_131186;
    futhark_mc_segmap_parloop_131187_task.iterations = iterations;
    futhark_mc_segmap_parloop_131187_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131187_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131187_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131187_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131187_task);
    
    if (futhark_mc_segmap_parloop_131187_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131187_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131187_total_end -
                 futhark_mc_segmap_parloop_131187_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131187_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131187_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131187_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131185_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131185_end -
                 futhark_mc_segmap_nested_task_131185_start;
        
        ctx->futhark_mc_segmap_nested_task_131185_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131185_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131185_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131178(void *args, int64_t start,
                                            int64_t end, int flat_tid_117799,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131177
    *futhark_mc_segmap_parloop_struct_131177 =
    (struct futhark_mc_segmap_parloop_struct_131177 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131177->ctx;
    uint64_t futhark_mc_segmap_parloop_131178_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131178_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131177->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131177->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131177->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131177->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131177->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131177->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131177->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131177->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131177->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131177->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131177->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131177->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131177->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131177->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_segmap_parloop_struct_131177->free_mem_122315,
                                  .size =0, .references =NULL};
    struct memblock mem_122319 = {.desc ="mem_122319", .mem =
                                  futhark_mc_segmap_parloop_struct_131177->free_mem_122319,
                                  .size =0, .references =NULL};
    size_t mem_122278_cached_sizze_131179 = 0;
    char *mem_122278 = NULL;
    size_t mem_122281_cached_sizze_131180 = 0;
    char *mem_122281 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125639 = start;
    
    if (mem_122278_cached_sizze_131179 < (size_t) bytes_121918) {
        mem_122278 = realloc(mem_122278, bytes_121918);
        mem_122278_cached_sizze_131179 = bytes_121918;
    }
    if (mem_122281_cached_sizze_131180 < (size_t) bytes_121918) {
        mem_122281 = realloc(mem_122281, bytes_121918);
        mem_122281_cached_sizze_131180 = bytes_121918;
    }
    for (; iter_125639 < end; iter_125639++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125799 = m_114462;
        int64_t gtid_117800 = iter_125639;
        int64_t remnant_125800 = iter_125639 - gtid_117800;
        int64_t flat_tid_117801 = (int64_t) 0;
        int32_t num_tasks_125801;
        int64_t flat_tid_117803 = (int64_t) 0;
        struct futhark_mc_task_131181 futhark_mc_task_131181;
        
        futhark_mc_task_131181.ctx = ctx;
        futhark_mc_task_131181.free_n_114463 = n_114463;
        futhark_mc_task_131181.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131181.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131181.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131181.free_i_114539 = i_114539;
        futhark_mc_task_131181.free_gtid_117800 = gtid_117800;
        futhark_mc_task_131181.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131181.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131181.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131181.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131181.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131181.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131181.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131181.free_mem_122278 = mem_122278;
        futhark_mc_task_131181.free_mem_122281 = mem_122281;
        
        struct scheduler_segop futhark_mc_task_131181_task;
        
        futhark_mc_task_131181_task.args = &futhark_mc_task_131181;
        futhark_mc_task_131181_task.top_level_fn =
            futhark_mc_segmap_task_131182;
        futhark_mc_task_131181_task.name = "futhark_mc_segmap_task_131182";
        futhark_mc_task_131181_task.iterations = l_n_m_114513;
        futhark_mc_task_131181_task.task_time =
            &ctx->futhark_mc_segmap_task_131182_total_time;
        futhark_mc_task_131181_task.task_iter =
            &ctx->futhark_mc_segmap_task_131182_total_iter;
        futhark_mc_task_131181_task.sched = STATIC;
        futhark_mc_task_131181_task.nested_fn =
            futhark_mc_segmap_nested_task_131185;
        
        int futhark_mc_segmap_task_131182_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131181_task);
        
        if (futhark_mc_segmap_task_131182_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122315.mem + gtid_117800 * l_n_m_114513 * (int64_t) 4,
                mem_122278 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122319.mem + gtid_117800 * l_n_m_114513 * (int64_t) 4,
                mem_122281 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122278);
    free(mem_122281);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131178_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131178_end -
                 futhark_mc_segmap_parloop_131178_start;
        
        ctx->futhark_mc_segmap_parloop_131178_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131178_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131178_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131176(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117799 = tid;
    int num_tasks_125545 = info.nsubtasks;
    struct futhark_mc_task_131170 *futhark_mc_task_131170 =
                                  (struct futhark_mc_task_131170 *) args;
    struct futhark_context *ctx = futhark_mc_task_131170->ctx;
    uint64_t futhark_mc_segmap_nested_task_131176_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131176_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131170->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131170->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131170->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131170->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131170->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131170->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131170->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131170->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131170->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131170->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131170->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131170->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131170->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131170->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122315 = {.desc ="mem_122315", .mem =
                                  futhark_mc_task_131170->free_mem_122315,
                                  .size =0, .references =NULL};
    struct memblock mem_122319 = {.desc ="mem_122319", .mem =
                                  futhark_mc_task_131170->free_mem_122319,
                                  .size =0, .references =NULL};
    int64_t iter_125639;
    struct futhark_mc_segmap_parloop_struct_131177
    futhark_mc_segmap_parloop_struct_131177;
    
    futhark_mc_segmap_parloop_struct_131177.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131177.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131177.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131177.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131177.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131177.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131177.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131177.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131177.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131177.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131177.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131177.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131177.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131177.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131177.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131177.free_mem_122315 = mem_122315.mem;
    futhark_mc_segmap_parloop_struct_131177.free_mem_122319 = mem_122319.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131178_task;
    
    futhark_mc_segmap_parloop_131178_task.name =
        "futhark_mc_segmap_parloop_131178";
    futhark_mc_segmap_parloop_131178_task.fn = futhark_mc_segmap_parloop_131178;
    futhark_mc_segmap_parloop_131178_task.args =
        &futhark_mc_segmap_parloop_struct_131177;
    futhark_mc_segmap_parloop_131178_task.iterations = iterations;
    futhark_mc_segmap_parloop_131178_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131178_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131178_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131178_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131178_task);
    
    if (futhark_mc_segmap_parloop_131178_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131178_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131178_total_end -
                 futhark_mc_segmap_parloop_131178_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131178_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131178_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131178_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131176_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131176_end -
                 futhark_mc_segmap_nested_task_131176_start;
        
        ctx->futhark_mc_segmap_nested_task_131176_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131176_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131176_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131201 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122359;
    char *free_mem_122363;
};
struct futhark_mc_segmap_parloop_struct_131203 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122359;
    char *free_mem_122363;
};
static int futhark_mc_segmap_parloop_131204(void *args, int64_t start,
                                            int64_t end, int flat_tid_118067,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131203
    *futhark_mc_segmap_parloop_struct_131203 =
    (struct futhark_mc_segmap_parloop_struct_131203 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131203->ctx;
    uint64_t futhark_mc_segmap_parloop_131204_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131204_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131203->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131203->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131203->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131203->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131203->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131203->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131203->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131203->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131203->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131203->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131203->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131203->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131203->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131203->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122359 = {.desc ="mem_122359", .mem =
                                  futhark_mc_segmap_parloop_struct_131203->free_mem_122359,
                                  .size =0, .references =NULL};
    struct memblock mem_122363 = {.desc ="mem_122363", .mem =
                                  futhark_mc_segmap_parloop_struct_131203->free_mem_122363,
                                  .size =0, .references =NULL};
    size_t mem_122328_cached_sizze_131205 = 0;
    char *mem_122328 = NULL;
    size_t mem_122331_cached_sizze_131206 = 0;
    char *mem_122331 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125973 = start;
    
    if (mem_122328_cached_sizze_131205 < (size_t) bytes_121918) {
        mem_122328 = realloc(mem_122328, bytes_121918);
        mem_122328_cached_sizze_131205 = bytes_121918;
    }
    if (mem_122331_cached_sizze_131206 < (size_t) bytes_121918) {
        mem_122331 = realloc(mem_122331, bytes_121918);
        mem_122331_cached_sizze_131206 = bytes_121918;
    }
    for (; iter_125973 < end; iter_125973++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126087 = m_114462;
        int64_t gtid_118068 = iter_125973;
        int64_t remnant_126088 = iter_125973 - gtid_118068;
        
        for (int64_t i_125974 = 0; i_125974 < l_n_m_114513; i_125974++) {
            int64_t x_125977 = ((int64_t *) mem_121987.mem)[gtid_118068 *
                                                            l_n_m_114513 +
                                                            i_125974];
            float x_125978 = ((float *) mem_121991.mem)[gtid_118068 *
                                                        l_n_m_114513 +
                                                        i_125974];
            int64_t min_arg_125979 = mul64(t_jump_114470, i_125974);
            int64_t min_res_125980 = smin64(i_114539, min_arg_125979);
            float defunc_0_f_res_125981 = sitofp_i64_f32(min_res_125980);
            float defunc_2_reduce_res_125982;
            float defunc_2_reduce_res_125983;
            float defunc_2_reduce_res_125984;
            float defunc_2_reduce_res_125985;
            float defunc_2_reduce_res_125986;
            float redout_125988;
            float redout_125989;
            float redout_125990;
            float redout_125991;
            float redout_125992;
            
            redout_125988 = 0.0F;
            redout_125989 = 0.0F;
            redout_125990 = 0.0F;
            redout_125991 = 0.0F;
            redout_125992 = 0.0F;
            for (int64_t i_125987 = 0; i_125987 < l_window_114467; i_125987++) {
                bool cond_125993 = sle64(n_114463, i_125987);
                float defunc_0_f_res_125994;
                
                if (cond_125993) {
                    defunc_0_f_res_125994 = 0.0F;
                } else {
                    int64_t i_125995 = add64(x_125977, i_125987);
                    float index_primexp_125996 = sitofp_i64_f32(i_125995);
                    float defunc_0_f_res_f_res_125997 = 1.0F +
                          index_primexp_125996;
                    
                    defunc_0_f_res_125994 = defunc_0_f_res_f_res_125997;
                }
                
                float defunc_0_f_res_125998;
                
                if (cond_125993) {
                    defunc_0_f_res_125998 = 0.0F;
                } else {
                    int64_t i_125999 = add64(x_125977, i_125987);
                    float x_126000 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_118068 *
                                                            ctx_param_ext_122099 +
                                                            i_125999 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_125998 = x_126000;
                }
                
                float x_j_126001 = defunc_0_f_res_125994 -
                      defunc_0_f_res_125981;
                float abs_res_126002 = (float) fabs(x_j_126001);
                float tmp1_126003 = abs_res_126002 / x_125978;
                float x_126004 = tmp1_126003 * tmp1_126003;
                float y_126005 = tmp1_126003 * x_126004;
                float tmp2_126006 = 1.0F - y_126005;
                float x_126007 = tmp2_126006 * tmp2_126006;
                float tmp3_126008 = tmp2_126006 * x_126007;
                float w_j_126009 = defunc_0_f_res_125998 * tmp3_126008;
                float xw_j_126010 = x_j_126001 * w_j_126009;
                float x2w_j_126011 = x_j_126001 * xw_j_126010;
                float x3w_j_126012 = x_j_126001 * x2w_j_126011;
                float x4w_j_126013 = x_j_126001 * x3w_j_126012;
                float defunc_1_op_res_126014 = w_j_126009 + redout_125988;
                float defunc_1_op_res_126015 = xw_j_126010 + redout_125989;
                float defunc_1_op_res_126016 = x2w_j_126011 + redout_125990;
                float defunc_1_op_res_126017 = x3w_j_126012 + redout_125991;
                float defunc_1_op_res_126018 = x4w_j_126013 + redout_125992;
                float redout_tmp_126091 = defunc_1_op_res_126014;
                float redout_tmp_126092 = defunc_1_op_res_126015;
                float redout_tmp_126093 = defunc_1_op_res_126016;
                float redout_tmp_126094 = defunc_1_op_res_126017;
                float redout_tmp_126095 = defunc_1_op_res_126018;
                
                redout_125988 = redout_tmp_126091;
                redout_125989 = redout_tmp_126092;
                redout_125990 = redout_tmp_126093;
                redout_125991 = redout_tmp_126094;
                redout_125992 = redout_tmp_126095;
            }
            defunc_2_reduce_res_125982 = redout_125988;
            defunc_2_reduce_res_125983 = redout_125989;
            defunc_2_reduce_res_125984 = redout_125990;
            defunc_2_reduce_res_125985 = redout_125991;
            defunc_2_reduce_res_125986 = redout_125992;
            
            float x_126019 = defunc_2_reduce_res_125984 *
                  defunc_2_reduce_res_125986;
            float y_126020 = defunc_2_reduce_res_125985 *
                  defunc_2_reduce_res_125985;
            float a12_126021 = x_126019 - y_126020;
            float x_126022 = defunc_2_reduce_res_125984 *
                  defunc_2_reduce_res_125985;
            float y_126023 = defunc_2_reduce_res_125983 *
                  defunc_2_reduce_res_125986;
            float b12_126024 = x_126022 - y_126023;
            float x_126025 = defunc_2_reduce_res_125983 *
                  defunc_2_reduce_res_125985;
            float y_126026 = defunc_2_reduce_res_125984 *
                  defunc_2_reduce_res_125984;
            float c12_126027 = x_126025 - y_126026;
            float x_126028 = defunc_2_reduce_res_125982 *
                  defunc_2_reduce_res_125986;
            float b2_126029 = x_126028 - y_126026;
            float x_126030 = defunc_2_reduce_res_125983 *
                  defunc_2_reduce_res_125984;
            float y_126031 = defunc_2_reduce_res_125982 *
                  defunc_2_reduce_res_125985;
            float c2_126032 = x_126030 - y_126031;
            float x_126033 = defunc_2_reduce_res_125982 * a12_126021;
            float y_126034 = defunc_2_reduce_res_125983 * b12_126024;
            float x_126035 = x_126033 + y_126034;
            float y_126036 = defunc_2_reduce_res_125984 * c12_126027;
            float y_126037 = x_126035 + y_126036;
            float det_126038 = 1.0F / y_126037;
            float a12_126039 = a12_126021 * det_126038;
            float b12_126040 = b12_126024 * det_126038;
            float c12_126041 = c12_126027 * det_126038;
            float b2_126042 = b2_126029 * det_126038;
            float c2_126043 = c2_126032 * det_126038;
            float defunc_2_reduce_res_126044;
            float defunc_2_reduce_res_126045;
            float redout_126047;
            float redout_126048;
            
            redout_126047 = 0.0F;
            redout_126048 = 0.0F;
            for (int64_t i_126046 = 0; i_126046 < l_window_114467; i_126046++) {
                bool cond_126049 = sle64(n_114463, i_126046);
                float defunc_0_f_res_126050;
                
                if (cond_126049) {
                    defunc_0_f_res_126050 = 0.0F;
                } else {
                    int64_t i_126051 = add64(x_125977, i_126046);
                    float index_primexp_126052 = sitofp_i64_f32(i_126051);
                    float defunc_0_f_res_f_res_126053 = 1.0F +
                          index_primexp_126052;
                    
                    defunc_0_f_res_126050 = defunc_0_f_res_f_res_126053;
                }
                
                float defunc_0_f_res_126054;
                
                if (cond_126049) {
                    defunc_0_f_res_126054 = 0.0F;
                } else {
                    int64_t i_126055 = add64(x_125977, i_126046);
                    float x_126056 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_118068 *
                                                            ctx_param_ext_122099 +
                                                            i_126055 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_126054 = x_126056;
                }
                
                float x_j_126057 = defunc_0_f_res_126050 -
                      defunc_0_f_res_125981;
                float abs_res_126058 = (float) fabs(x_j_126057);
                float tmp1_126059 = abs_res_126058 / x_125978;
                float x_126060 = tmp1_126059 * tmp1_126059;
                float y_126061 = tmp1_126059 * x_126060;
                float tmp2_126062 = 1.0F - y_126061;
                float x_126063 = tmp2_126062 * tmp2_126062;
                float tmp3_126064 = tmp2_126062 * x_126063;
                float tmp4_126065 = defunc_0_f_res_126054 * tmp3_126064;
                float defunc_1_f_res_126066 = x_j_126057 * tmp4_126065;
                float defunc_1_f_res_126067 = x_j_126057 *
                      defunc_1_f_res_126066;
                float defunc_0_f_res_126068;
                
                if (cond_126049) {
                    defunc_0_f_res_126068 = 0.0F;
                } else {
                    int64_t i_126069 = add64(x_125977, i_126046);
                    float x_126070 = ((float *) mem_122249.mem)[gtid_118068 *
                                                                n_114463 +
                                                                i_126069];
                    
                    defunc_0_f_res_126068 = x_126070;
                }
                
                float x_126071 = a12_126039 * tmp4_126065;
                float y_126072 = b12_126040 * defunc_1_f_res_126066;
                float x_126073 = x_126071 + y_126072;
                float y_126074 = c12_126041 * defunc_1_f_res_126067;
                float x_126075 = x_126073 + y_126074;
                float defunc_9_fit_fun_res_126076 = defunc_0_f_res_126068 *
                      x_126075;
                float x_126077 = b12_126040 * tmp4_126065;
                float y_126078 = b2_126042 * defunc_1_f_res_126066;
                float x_126079 = x_126077 + y_126078;
                float y_126080 = c2_126043 * defunc_1_f_res_126067;
                float x_126081 = x_126079 + y_126080;
                float defunc_9_slope_fun_res_126082 = defunc_0_f_res_126068 *
                      x_126081;
                float defunc_1_op_res_126083 = defunc_9_fit_fun_res_126076 +
                      redout_126047;
                float defunc_1_op_res_126084 = defunc_9_slope_fun_res_126082 +
                      redout_126048;
                float redout_tmp_126096 = defunc_1_op_res_126083;
                float redout_tmp_126097 = defunc_1_op_res_126084;
                
                redout_126047 = redout_tmp_126096;
                redout_126048 = redout_tmp_126097;
            }
            defunc_2_reduce_res_126044 = redout_126047;
            defunc_2_reduce_res_126045 = redout_126048;
            ((float *) mem_122328)[i_125974] = defunc_2_reduce_res_126044;
            ((float *) mem_122331)[i_125974] = defunc_2_reduce_res_126045;
        }
        memmove(mem_122359.mem + gtid_118068 * l_n_m_114513 * (int64_t) 4,
                mem_122328 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122363.mem + gtid_118068 * l_n_m_114513 * (int64_t) 4,
                mem_122331 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122328);
    free(mem_122331);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131204_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131204_end -
                 futhark_mc_segmap_parloop_131204_start;
        
        ctx->futhark_mc_segmap_parloop_131204_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131204_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131204_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131202(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118067 = tid;
    int num_tasks_125972 = info.nsubtasks;
    struct futhark_mc_task_131201 *futhark_mc_task_131201 =
                                  (struct futhark_mc_task_131201 *) args;
    struct futhark_context *ctx = futhark_mc_task_131201->ctx;
    uint64_t futhark_mc_segmap_task_131202_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131202_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131201->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131201->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131201->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131201->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131201->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131201->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131201->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131201->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131201->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131201->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131201->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131201->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131201->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131201->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122359 = {.desc ="mem_122359", .mem =
                                  futhark_mc_task_131201->free_mem_122359,
                                  .size =0, .references =NULL};
    struct memblock mem_122363 = {.desc ="mem_122363", .mem =
                                  futhark_mc_task_131201->free_mem_122363,
                                  .size =0, .references =NULL};
    int64_t iter_125973;
    struct futhark_mc_segmap_parloop_struct_131203
    futhark_mc_segmap_parloop_struct_131203;
    
    futhark_mc_segmap_parloop_struct_131203.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131203.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131203.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131203.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131203.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131203.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131203.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131203.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131203.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131203.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131203.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131203.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131203.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131203.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131203.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131203.free_mem_122359 = mem_122359.mem;
    futhark_mc_segmap_parloop_struct_131203.free_mem_122363 = mem_122363.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131204_task;
    
    futhark_mc_segmap_parloop_131204_task.name =
        "futhark_mc_segmap_parloop_131204";
    futhark_mc_segmap_parloop_131204_task.fn = futhark_mc_segmap_parloop_131204;
    futhark_mc_segmap_parloop_131204_task.args =
        &futhark_mc_segmap_parloop_struct_131203;
    futhark_mc_segmap_parloop_131204_task.iterations = iterations;
    futhark_mc_segmap_parloop_131204_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131204_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131204_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131204_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131204_task);
    
    if (futhark_mc_segmap_parloop_131204_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131204_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131204_total_end -
                 futhark_mc_segmap_parloop_131204_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131204_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131204_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131204_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131202_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131202_end -
                 futhark_mc_segmap_task_131202_start;
        
        ctx->futhark_mc_segmap_task_131202_runs[tid]++;
        ctx->futhark_mc_segmap_task_131202_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131202_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131208 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122359;
    char *free_mem_122363;
};
struct futhark_mc_task_131212 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118070;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122322;
    char *free_mem_122325;
};
struct futhark_mc_segmap_parloop_struct_131214 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118070;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122322;
    char *free_mem_122325;
};
static int futhark_mc_segmap_parloop_131215(void *args, int64_t start,
                                            int64_t end, int flat_tid_118071,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131214
    *futhark_mc_segmap_parloop_struct_131214 =
    (struct futhark_mc_segmap_parloop_struct_131214 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131214->ctx;
    uint64_t futhark_mc_segmap_parloop_131215_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131215_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131214->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131214->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131214->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131214->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131214->free_i_114539;
    int64_t gtid_118070 =
            futhark_mc_segmap_parloop_struct_131214->free_gtid_118070;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131214->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131214->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131214->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131214->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131214->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131214->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131214->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122322 = {.desc ="mem_122322", .mem =
                                  futhark_mc_segmap_parloop_struct_131214->free_mem_122322,
                                  .size =0, .references =NULL};
    struct memblock mem_122325 = {.desc ="mem_122325", .mem =
                                  futhark_mc_segmap_parloop_struct_131214->free_mem_122325,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126323 = start;
    
    for (; iter_126323 < end; iter_126323++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126395 = l_n_m_114513;
        int64_t gtid_118072 = iter_126323;
        int64_t remnant_126396 = iter_126323 - gtid_118072;
        int64_t x_126212 = ((int64_t *) mem_121987.mem)[gtid_118070 *
                                                        l_n_m_114513 +
                                                        gtid_118072];
        float x_126213 = ((float *) mem_121991.mem)[gtid_118070 * l_n_m_114513 +
                                                    gtid_118072];
        int64_t min_arg_126214 = mul64(t_jump_114470, gtid_118072);
        int64_t min_res_126215 = smin64(i_114539, min_arg_126214);
        float defunc_0_f_res_126216 = sitofp_i64_f32(min_res_126215);
        float defunc_2_reduce_res_126217;
        float defunc_2_reduce_res_126218;
        float defunc_2_reduce_res_126219;
        float defunc_2_reduce_res_126220;
        float defunc_2_reduce_res_126221;
        float redout_126325;
        float redout_126326;
        float redout_126327;
        float redout_126328;
        float redout_126329;
        
        redout_126325 = 0.0F;
        redout_126326 = 0.0F;
        redout_126327 = 0.0F;
        redout_126328 = 0.0F;
        redout_126329 = 0.0F;
        for (int64_t i_126324 = 0; i_126324 < l_window_114467; i_126324++) {
            bool cond_126330 = sle64(n_114463, i_126324);
            float defunc_0_f_res_126331;
            
            if (cond_126330) {
                defunc_0_f_res_126331 = 0.0F;
            } else {
                int64_t i_126332 = add64(x_126212, i_126324);
                float index_primexp_126333 = sitofp_i64_f32(i_126332);
                float defunc_0_f_res_f_res_126334 = 1.0F + index_primexp_126333;
                
                defunc_0_f_res_126331 = defunc_0_f_res_f_res_126334;
            }
            
            float defunc_0_f_res_126335;
            
            if (cond_126330) {
                defunc_0_f_res_126335 = 0.0F;
            } else {
                int64_t i_126336 = add64(x_126212, i_126324);
                float x_126337 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_118070 *
                                                        ctx_param_ext_122099 +
                                                        i_126336 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_126335 = x_126337;
            }
            
            float x_j_126338 = defunc_0_f_res_126331 - defunc_0_f_res_126216;
            float abs_res_126339 = (float) fabs(x_j_126338);
            float tmp1_126340 = abs_res_126339 / x_126213;
            float x_126341 = tmp1_126340 * tmp1_126340;
            float y_126342 = tmp1_126340 * x_126341;
            float tmp2_126343 = 1.0F - y_126342;
            float x_126344 = tmp2_126343 * tmp2_126343;
            float tmp3_126345 = tmp2_126343 * x_126344;
            float w_j_126346 = defunc_0_f_res_126335 * tmp3_126345;
            float xw_j_126347 = x_j_126338 * w_j_126346;
            float x2w_j_126348 = x_j_126338 * xw_j_126347;
            float x3w_j_126349 = x_j_126338 * x2w_j_126348;
            float x4w_j_126350 = x_j_126338 * x3w_j_126349;
            float defunc_1_op_res_126351 = w_j_126346 + redout_126325;
            float defunc_1_op_res_126352 = xw_j_126347 + redout_126326;
            float defunc_1_op_res_126353 = x2w_j_126348 + redout_126327;
            float defunc_1_op_res_126354 = x3w_j_126349 + redout_126328;
            float defunc_1_op_res_126355 = x4w_j_126350 + redout_126329;
            float redout_tmp_126397 = defunc_1_op_res_126351;
            float redout_tmp_126398 = defunc_1_op_res_126352;
            float redout_tmp_126399 = defunc_1_op_res_126353;
            float redout_tmp_126400 = defunc_1_op_res_126354;
            float redout_tmp_126401 = defunc_1_op_res_126355;
            
            redout_126325 = redout_tmp_126397;
            redout_126326 = redout_tmp_126398;
            redout_126327 = redout_tmp_126399;
            redout_126328 = redout_tmp_126400;
            redout_126329 = redout_tmp_126401;
        }
        defunc_2_reduce_res_126217 = redout_126325;
        defunc_2_reduce_res_126218 = redout_126326;
        defunc_2_reduce_res_126219 = redout_126327;
        defunc_2_reduce_res_126220 = redout_126328;
        defunc_2_reduce_res_126221 = redout_126329;
        
        float x_126254 = defunc_2_reduce_res_126219 *
              defunc_2_reduce_res_126221;
        float y_126255 = defunc_2_reduce_res_126220 *
              defunc_2_reduce_res_126220;
        float a12_126256 = x_126254 - y_126255;
        float x_126257 = defunc_2_reduce_res_126219 *
              defunc_2_reduce_res_126220;
        float y_126258 = defunc_2_reduce_res_126218 *
              defunc_2_reduce_res_126221;
        float b12_126259 = x_126257 - y_126258;
        float x_126260 = defunc_2_reduce_res_126218 *
              defunc_2_reduce_res_126220;
        float y_126261 = defunc_2_reduce_res_126219 *
              defunc_2_reduce_res_126219;
        float c12_126262 = x_126260 - y_126261;
        float x_126263 = defunc_2_reduce_res_126217 *
              defunc_2_reduce_res_126221;
        float b2_126264 = x_126263 - y_126261;
        float x_126265 = defunc_2_reduce_res_126218 *
              defunc_2_reduce_res_126219;
        float y_126266 = defunc_2_reduce_res_126217 *
              defunc_2_reduce_res_126220;
        float c2_126267 = x_126265 - y_126266;
        float x_126268 = defunc_2_reduce_res_126217 * a12_126256;
        float y_126269 = defunc_2_reduce_res_126218 * b12_126259;
        float x_126270 = x_126268 + y_126269;
        float y_126271 = defunc_2_reduce_res_126219 * c12_126262;
        float y_126272 = x_126270 + y_126271;
        float det_126273 = 1.0F / y_126272;
        float a12_126274 = a12_126256 * det_126273;
        float b12_126275 = b12_126259 * det_126273;
        float c12_126276 = c12_126262 * det_126273;
        float b2_126277 = b2_126264 * det_126273;
        float c2_126278 = c2_126267 * det_126273;
        float defunc_2_reduce_res_126279;
        float defunc_2_reduce_res_126280;
        float redout_126357;
        float redout_126358;
        
        redout_126357 = 0.0F;
        redout_126358 = 0.0F;
        for (int64_t i_126356 = 0; i_126356 < l_window_114467; i_126356++) {
            bool cond_126359 = sle64(n_114463, i_126356);
            float defunc_0_f_res_126360;
            
            if (cond_126359) {
                defunc_0_f_res_126360 = 0.0F;
            } else {
                int64_t i_126361 = add64(x_126212, i_126356);
                float index_primexp_126362 = sitofp_i64_f32(i_126361);
                float defunc_0_f_res_f_res_126363 = 1.0F + index_primexp_126362;
                
                defunc_0_f_res_126360 = defunc_0_f_res_f_res_126363;
            }
            
            float defunc_0_f_res_126364;
            
            if (cond_126359) {
                defunc_0_f_res_126364 = 0.0F;
            } else {
                int64_t i_126365 = add64(x_126212, i_126356);
                float x_126366 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_118070 *
                                                        ctx_param_ext_122099 +
                                                        i_126365 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_126364 = x_126366;
            }
            
            float x_j_126367 = defunc_0_f_res_126360 - defunc_0_f_res_126216;
            float abs_res_126368 = (float) fabs(x_j_126367);
            float tmp1_126369 = abs_res_126368 / x_126213;
            float x_126370 = tmp1_126369 * tmp1_126369;
            float y_126371 = tmp1_126369 * x_126370;
            float tmp2_126372 = 1.0F - y_126371;
            float x_126373 = tmp2_126372 * tmp2_126372;
            float tmp3_126374 = tmp2_126372 * x_126373;
            float tmp4_126375 = defunc_0_f_res_126364 * tmp3_126374;
            float defunc_1_f_res_126376 = x_j_126367 * tmp4_126375;
            float defunc_1_f_res_126377 = x_j_126367 * defunc_1_f_res_126376;
            float defunc_0_f_res_126378;
            
            if (cond_126359) {
                defunc_0_f_res_126378 = 0.0F;
            } else {
                int64_t i_126379 = add64(x_126212, i_126356);
                float x_126380 = ((float *) mem_122249.mem)[gtid_118070 *
                                                            n_114463 +
                                                            i_126379];
                
                defunc_0_f_res_126378 = x_126380;
            }
            
            float x_126381 = a12_126274 * tmp4_126375;
            float y_126382 = b12_126275 * defunc_1_f_res_126376;
            float x_126383 = x_126381 + y_126382;
            float y_126384 = c12_126276 * defunc_1_f_res_126377;
            float x_126385 = x_126383 + y_126384;
            float defunc_9_fit_fun_res_126386 = defunc_0_f_res_126378 *
                  x_126385;
            float x_126387 = b12_126275 * tmp4_126375;
            float y_126388 = b2_126277 * defunc_1_f_res_126376;
            float x_126389 = x_126387 + y_126388;
            float y_126390 = c2_126278 * defunc_1_f_res_126377;
            float x_126391 = x_126389 + y_126390;
            float defunc_9_slope_fun_res_126392 = defunc_0_f_res_126378 *
                  x_126391;
            float defunc_1_op_res_126393 = defunc_9_fit_fun_res_126386 +
                  redout_126357;
            float defunc_1_op_res_126394 = defunc_9_slope_fun_res_126392 +
                  redout_126358;
            float redout_tmp_126402 = defunc_1_op_res_126393;
            float redout_tmp_126403 = defunc_1_op_res_126394;
            
            redout_126357 = redout_tmp_126402;
            redout_126358 = redout_tmp_126403;
        }
        defunc_2_reduce_res_126279 = redout_126357;
        defunc_2_reduce_res_126280 = redout_126358;
        ((float *) mem_122322.mem)[gtid_118072] = defunc_2_reduce_res_126279;
        ((float *) mem_122325.mem)[gtid_118072] = defunc_2_reduce_res_126280;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131215_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131215_end -
                 futhark_mc_segmap_parloop_131215_start;
        
        ctx->futhark_mc_segmap_parloop_131215_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131215_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131215_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131213(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118071 = tid;
    int num_tasks_126322 = info.nsubtasks;
    struct futhark_mc_task_131212 *futhark_mc_task_131212 =
                                  (struct futhark_mc_task_131212 *) args;
    struct futhark_context *ctx = futhark_mc_task_131212->ctx;
    uint64_t futhark_mc_segmap_task_131213_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131213_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131212->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131212->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131212->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131212->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131212->free_i_114539;
    int64_t gtid_118070 = futhark_mc_task_131212->free_gtid_118070;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131212->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131212->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131212->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131212->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131212->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131212->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131212->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122322 = {.desc ="mem_122322", .mem =
                                  futhark_mc_task_131212->free_mem_122322,
                                  .size =0, .references =NULL};
    struct memblock mem_122325 = {.desc ="mem_122325", .mem =
                                  futhark_mc_task_131212->free_mem_122325,
                                  .size =0, .references =NULL};
    int64_t iter_126323;
    struct futhark_mc_segmap_parloop_struct_131214
    futhark_mc_segmap_parloop_struct_131214;
    
    futhark_mc_segmap_parloop_struct_131214.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131214.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131214.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131214.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131214.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131214.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131214.free_gtid_118070 = gtid_118070;
    futhark_mc_segmap_parloop_struct_131214.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131214.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131214.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131214.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131214.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131214.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131214.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131214.free_mem_122322 = mem_122322.mem;
    futhark_mc_segmap_parloop_struct_131214.free_mem_122325 = mem_122325.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131215_task;
    
    futhark_mc_segmap_parloop_131215_task.name =
        "futhark_mc_segmap_parloop_131215";
    futhark_mc_segmap_parloop_131215_task.fn = futhark_mc_segmap_parloop_131215;
    futhark_mc_segmap_parloop_131215_task.args =
        &futhark_mc_segmap_parloop_struct_131214;
    futhark_mc_segmap_parloop_131215_task.iterations = iterations;
    futhark_mc_segmap_parloop_131215_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131215_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131215_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131215_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131215_task);
    
    if (futhark_mc_segmap_parloop_131215_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131215_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131215_total_end -
                 futhark_mc_segmap_parloop_131215_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131215_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131215_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131215_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131213_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131213_end -
                 futhark_mc_segmap_task_131213_start;
        
        ctx->futhark_mc_segmap_task_131213_runs[tid]++;
        ctx->futhark_mc_segmap_task_131213_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131213_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131217 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118070;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    char *free_mem_122322;
    char *free_mem_122325;
};
struct futhark_mc_task_131219 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118070;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126099;
    float free_x_126100;
    float free_defunc_0_f_res_126103;
    float *retval_defunc_2_reduce_res_126104;
    float *retval_defunc_2_reduce_res_126105;
    float *retval_defunc_2_reduce_res_126106;
    float *retval_defunc_2_reduce_res_126107;
    float *retval_defunc_2_reduce_res_126108;
};
struct futhark_mc_segred_stage_1_parloop_struct_131226 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118070;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126099;
    float free_x_126100;
    float free_defunc_0_f_res_126103;
    char *free_reduce_stage_1_tid_res_arr_mem_126484;
    char *free_reduce_stage_1_tid_res_arr_mem_126486;
    char *free_reduce_stage_1_tid_res_arr_mem_126488;
    char *free_reduce_stage_1_tid_res_arr_mem_126490;
    char *free_reduce_stage_1_tid_res_arr_mem_126492;
};
static int futhark_mc_segred_stage_1_parloop_131227(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118075,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131226
    *futhark_mc_segred_stage_1_parloop_struct_131226 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131226 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131226->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131227_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131227_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_n_114463;
    int64_t gtid_118070 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_gtid_118070;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131226->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126099 =
            futhark_mc_segred_stage_1_parloop_struct_131226->free_x_126099;
    float x_126100 =
          futhark_mc_segred_stage_1_parloop_struct_131226->free_x_126100;
    float defunc_0_f_res_126103 =
          futhark_mc_segred_stage_1_parloop_struct_131226->free_defunc_0_f_res_126103;
    struct memblock reduce_stage_1_tid_res_arr_mem_126484 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126484",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131226->free_reduce_stage_1_tid_res_arr_mem_126484,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126486 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126486",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131226->free_reduce_stage_1_tid_res_arr_mem_126486,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126488 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126488",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131226->free_reduce_stage_1_tid_res_arr_mem_126488,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126490 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126490",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131226->free_reduce_stage_1_tid_res_arr_mem_126490,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126492 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126492",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131226->free_reduce_stage_1_tid_res_arr_mem_126492,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126494 = start;
    float x_126405;
    float x_126406;
    float x_126408;
    float x_126409;
    float x_126411;
    float x_126412;
    float x_126414;
    float x_126415;
    float x_126417;
    float x_126418;
    float local_acc_126495 = 0.0F;
    float local_acc_126496 = 0.0F;
    float local_acc_126497 = 0.0F;
    float local_acc_126498 = 0.0F;
    float local_acc_126499 = 0.0F;
    
    for (; iter_126494 < end; iter_126494++) {
        int64_t gtid_118076 = iter_126494;
        bool cond_126420 = sle64(n_114463, gtid_118076);
        float defunc_0_f_res_126421;
        
        if (cond_126420) {
            defunc_0_f_res_126421 = 0.0F;
        } else {
            int64_t i_126422 = add64(gtid_118076, x_126099);
            float index_primexp_126423 = sitofp_i64_f32(i_126422);
            float defunc_0_f_res_f_res_126424 = 1.0F + index_primexp_126423;
            
            defunc_0_f_res_126421 = defunc_0_f_res_f_res_126424;
        }
        
        float defunc_0_f_res_126425;
        
        if (cond_126420) {
            defunc_0_f_res_126425 = 0.0F;
        } else {
            int64_t i_126426 = add64(gtid_118076, x_126099);
            float x_126427 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_118070 *
                                                    ctx_param_ext_122099 +
                                                    i_126426 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_126425 = x_126427;
        }
        
        float x_j_126428 = defunc_0_f_res_126421 - defunc_0_f_res_126103;
        float abs_res_126429 = (float) fabs(x_j_126428);
        float tmp1_126430 = abs_res_126429 / x_126100;
        float x_126431 = tmp1_126430 * tmp1_126430;
        float y_126432 = tmp1_126430 * x_126431;
        float tmp2_126433 = 1.0F - y_126432;
        float x_126434 = tmp2_126433 * tmp2_126433;
        float tmp3_126435 = tmp2_126433 * x_126434;
        float w_j_126436 = defunc_0_f_res_126425 * tmp3_126435;
        float xw_j_126437 = x_j_126428 * w_j_126436;
        float x2w_j_126438 = x_j_126428 * xw_j_126437;
        float x3w_j_126439 = x_j_126428 * x2w_j_126438;
        float x4w_j_126440 = x_j_126428 * x3w_j_126439;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126405 = local_acc_126495;
        }
        // Load next params
        {
            x_126406 = w_j_126436;
        }
        // Red body
        {
            float defunc_1_op_res_126407 = x_126405 + x_126406;
            
            local_acc_126495 = defunc_1_op_res_126407;
        }
        // Load accum params
        {
            x_126408 = local_acc_126496;
        }
        // Load next params
        {
            x_126409 = xw_j_126437;
        }
        // Red body
        {
            float defunc_1_op_res_126410 = x_126408 + x_126409;
            
            local_acc_126496 = defunc_1_op_res_126410;
        }
        // Load accum params
        {
            x_126411 = local_acc_126497;
        }
        // Load next params
        {
            x_126412 = x2w_j_126438;
        }
        // Red body
        {
            float defunc_1_op_res_126413 = x_126411 + x_126412;
            
            local_acc_126497 = defunc_1_op_res_126413;
        }
        // Load accum params
        {
            x_126414 = local_acc_126498;
        }
        // Load next params
        {
            x_126415 = x3w_j_126439;
        }
        // Red body
        {
            float defunc_1_op_res_126416 = x_126414 + x_126415;
            
            local_acc_126498 = defunc_1_op_res_126416;
        }
        // Load accum params
        {
            x_126417 = local_acc_126499;
        }
        // Load next params
        {
            x_126418 = x4w_j_126440;
        }
        // Red body
        {
            float defunc_1_op_res_126419 = x_126417 + x_126418;
            
            local_acc_126499 = defunc_1_op_res_126419;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126484.mem)[flat_tid_118075] =
        local_acc_126495;
    ((float *) reduce_stage_1_tid_res_arr_mem_126486.mem)[flat_tid_118075] =
        local_acc_126496;
    ((float *) reduce_stage_1_tid_res_arr_mem_126488.mem)[flat_tid_118075] =
        local_acc_126497;
    ((float *) reduce_stage_1_tid_res_arr_mem_126490.mem)[flat_tid_118075] =
        local_acc_126498;
    ((float *) reduce_stage_1_tid_res_arr_mem_126492.mem)[flat_tid_118075] =
        local_acc_126499;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131227_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131227_end -
                 futhark_mc_segred_stage_1_parloop_131227_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131227_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131227_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131227_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131220(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118075 = tid;
    int num_tasks_126483 = info.nsubtasks;
    struct futhark_mc_task_131219 *futhark_mc_task_131219 =
                                  (struct futhark_mc_task_131219 *) args;
    struct futhark_context *ctx = futhark_mc_task_131219->ctx;
    uint64_t futhark_mc_segred_task_131220_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131220_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131219->free_n_114463;
    int64_t gtid_118070 = futhark_mc_task_131219->free_gtid_118070;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131219->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131219->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131219->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131219->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126099 = futhark_mc_task_131219->free_x_126099;
    float x_126100 = futhark_mc_task_131219->free_x_126100;
    float defunc_0_f_res_126103 =
          futhark_mc_task_131219->free_defunc_0_f_res_126103;
    float defunc_2_reduce_res_126104 =
          *futhark_mc_task_131219->retval_defunc_2_reduce_res_126104;
    float defunc_2_reduce_res_126105 =
          *futhark_mc_task_131219->retval_defunc_2_reduce_res_126105;
    float defunc_2_reduce_res_126106 =
          *futhark_mc_task_131219->retval_defunc_2_reduce_res_126106;
    float defunc_2_reduce_res_126107 =
          *futhark_mc_task_131219->retval_defunc_2_reduce_res_126107;
    float defunc_2_reduce_res_126108 =
          *futhark_mc_task_131219->retval_defunc_2_reduce_res_126108;
    size_t reduce_stage_1_tid_res_arr_mem_126484_cached_sizze_131221 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126484 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126486_cached_sizze_131222 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126486 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126488_cached_sizze_131223 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126488 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126490_cached_sizze_131224 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126490 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126492_cached_sizze_131225 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126492 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126484_cached_sizze_131221 <
        (size_t) ((int64_t) 4 * num_tasks_126483)) {
        reduce_stage_1_tid_res_arr_mem_126484 =
            realloc(reduce_stage_1_tid_res_arr_mem_126484, (int64_t) 4 *
                    num_tasks_126483);
        reduce_stage_1_tid_res_arr_mem_126484_cached_sizze_131221 =
            (int64_t) 4 * num_tasks_126483;
    }
    if (reduce_stage_1_tid_res_arr_mem_126486_cached_sizze_131222 <
        (size_t) ((int64_t) 4 * num_tasks_126483)) {
        reduce_stage_1_tid_res_arr_mem_126486 =
            realloc(reduce_stage_1_tid_res_arr_mem_126486, (int64_t) 4 *
                    num_tasks_126483);
        reduce_stage_1_tid_res_arr_mem_126486_cached_sizze_131222 =
            (int64_t) 4 * num_tasks_126483;
    }
    if (reduce_stage_1_tid_res_arr_mem_126488_cached_sizze_131223 <
        (size_t) ((int64_t) 4 * num_tasks_126483)) {
        reduce_stage_1_tid_res_arr_mem_126488 =
            realloc(reduce_stage_1_tid_res_arr_mem_126488, (int64_t) 4 *
                    num_tasks_126483);
        reduce_stage_1_tid_res_arr_mem_126488_cached_sizze_131223 =
            (int64_t) 4 * num_tasks_126483;
    }
    if (reduce_stage_1_tid_res_arr_mem_126490_cached_sizze_131224 <
        (size_t) ((int64_t) 4 * num_tasks_126483)) {
        reduce_stage_1_tid_res_arr_mem_126490 =
            realloc(reduce_stage_1_tid_res_arr_mem_126490, (int64_t) 4 *
                    num_tasks_126483);
        reduce_stage_1_tid_res_arr_mem_126490_cached_sizze_131224 =
            (int64_t) 4 * num_tasks_126483;
    }
    if (reduce_stage_1_tid_res_arr_mem_126492_cached_sizze_131225 <
        (size_t) ((int64_t) 4 * num_tasks_126483)) {
        reduce_stage_1_tid_res_arr_mem_126492 =
            realloc(reduce_stage_1_tid_res_arr_mem_126492, (int64_t) 4 *
                    num_tasks_126483);
        reduce_stage_1_tid_res_arr_mem_126492_cached_sizze_131225 =
            (int64_t) 4 * num_tasks_126483;
    }
    
    int64_t iter_126494;
    struct futhark_mc_segred_stage_1_parloop_struct_131226
    futhark_mc_segred_stage_1_parloop_struct_131226;
    
    futhark_mc_segred_stage_1_parloop_struct_131226.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_gtid_118070 =
        gtid_118070;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_x_126099 = x_126099;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_x_126100 = x_126100;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_defunc_0_f_res_126103 =
        defunc_0_f_res_126103;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_reduce_stage_1_tid_res_arr_mem_126484 =
        reduce_stage_1_tid_res_arr_mem_126484;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_reduce_stage_1_tid_res_arr_mem_126486 =
        reduce_stage_1_tid_res_arr_mem_126486;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_reduce_stage_1_tid_res_arr_mem_126488 =
        reduce_stage_1_tid_res_arr_mem_126488;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_reduce_stage_1_tid_res_arr_mem_126490 =
        reduce_stage_1_tid_res_arr_mem_126490;
    futhark_mc_segred_stage_1_parloop_struct_131226.free_reduce_stage_1_tid_res_arr_mem_126492 =
        reduce_stage_1_tid_res_arr_mem_126492;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131227_task;
    
    futhark_mc_segred_stage_1_parloop_131227_task.name =
        "futhark_mc_segred_stage_1_parloop_131227";
    futhark_mc_segred_stage_1_parloop_131227_task.fn =
        futhark_mc_segred_stage_1_parloop_131227;
    futhark_mc_segred_stage_1_parloop_131227_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131226;
    futhark_mc_segred_stage_1_parloop_131227_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131227_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131227_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131227_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131227_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131227_task);
    
    if (futhark_mc_segred_stage_1_parloop_131227_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131227_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131227_total_end -
                 futhark_mc_segred_stage_1_parloop_131227_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131227_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131227_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131227_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126104 = 0.0F;
        defunc_2_reduce_res_126105 = 0.0F;
        defunc_2_reduce_res_126106 = 0.0F;
        defunc_2_reduce_res_126107 = 0.0F;
        defunc_2_reduce_res_126108 = 0.0F;
    }
    
    float x_126500;
    float x_126501;
    float x_126503;
    float x_126504;
    float x_126506;
    float x_126507;
    float x_126509;
    float x_126510;
    float x_126512;
    float x_126513;
    
    for (int32_t i_126515 = 0; i_126515 < num_tasks_126483; i_126515++) {
        flat_tid_118075 = i_126515;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126500 = defunc_2_reduce_res_126104;
            }
            // load next params
            {
                x_126501 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126484)[flat_tid_118075];
            }
            // red body
            {
                float defunc_1_op_res_126502 = x_126500 + x_126501;
                
                defunc_2_reduce_res_126104 = defunc_1_op_res_126502;
            }
            // load acc params
            {
                x_126503 = defunc_2_reduce_res_126105;
            }
            // load next params
            {
                x_126504 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126486)[flat_tid_118075];
            }
            // red body
            {
                float defunc_1_op_res_126505 = x_126503 + x_126504;
                
                defunc_2_reduce_res_126105 = defunc_1_op_res_126505;
            }
            // load acc params
            {
                x_126506 = defunc_2_reduce_res_126106;
            }
            // load next params
            {
                x_126507 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126488)[flat_tid_118075];
            }
            // red body
            {
                float defunc_1_op_res_126508 = x_126506 + x_126507;
                
                defunc_2_reduce_res_126106 = defunc_1_op_res_126508;
            }
            // load acc params
            {
                x_126509 = defunc_2_reduce_res_126107;
            }
            // load next params
            {
                x_126510 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126490)[flat_tid_118075];
            }
            // red body
            {
                float defunc_1_op_res_126511 = x_126509 + x_126510;
                
                defunc_2_reduce_res_126107 = defunc_1_op_res_126511;
            }
            // load acc params
            {
                x_126512 = defunc_2_reduce_res_126108;
            }
            // load next params
            {
                x_126513 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126492)[flat_tid_118075];
            }
            // red body
            {
                float defunc_1_op_res_126514 = x_126512 + x_126513;
                
                defunc_2_reduce_res_126108 = defunc_1_op_res_126514;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126484);
    free(reduce_stage_1_tid_res_arr_mem_126486);
    free(reduce_stage_1_tid_res_arr_mem_126488);
    free(reduce_stage_1_tid_res_arr_mem_126490);
    free(reduce_stage_1_tid_res_arr_mem_126492);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131220_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131220_end -
                 futhark_mc_segred_task_131220_start;
        
        ctx->futhark_mc_segred_task_131220_runs[tid]++;
        ctx->futhark_mc_segred_task_131220_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131220_iter[tid] += iterations;
    }
    *futhark_mc_task_131219->retval_defunc_2_reduce_res_126104 =
        defunc_2_reduce_res_126104;
    *futhark_mc_task_131219->retval_defunc_2_reduce_res_126105 =
        defunc_2_reduce_res_126105;
    *futhark_mc_task_131219->retval_defunc_2_reduce_res_126106 =
        defunc_2_reduce_res_126106;
    *futhark_mc_task_131219->retval_defunc_2_reduce_res_126107 =
        defunc_2_reduce_res_126107;
    *futhark_mc_task_131219->retval_defunc_2_reduce_res_126108 =
        defunc_2_reduce_res_126108;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131228 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118070;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_126099;
    float free_x_126100;
    float free_defunc_0_f_res_126103;
    float free_a12_126165;
    float free_b12_126166;
    float free_c12_126167;
    float free_b2_126168;
    float free_c2_126169;
    float *retval_defunc_2_reduce_res_126170;
    float *retval_defunc_2_reduce_res_126171;
};
struct futhark_mc_segred_stage_1_parloop_struct_131232 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118070;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_x_126099;
    float free_x_126100;
    float free_defunc_0_f_res_126103;
    float free_a12_126165;
    float free_b12_126166;
    float free_c12_126167;
    float free_b2_126168;
    float free_c2_126169;
    char *free_reduce_stage_1_tid_res_arr_mem_126517;
    char *free_reduce_stage_1_tid_res_arr_mem_126519;
};
static int futhark_mc_segred_stage_1_parloop_131233(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118077,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131232
    *futhark_mc_segred_stage_1_parloop_struct_131232 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131232 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131232->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131233_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131233_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_n_114463;
    int64_t gtid_118070 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_gtid_118070;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131232->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131232->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126099 =
            futhark_mc_segred_stage_1_parloop_struct_131232->free_x_126099;
    float x_126100 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_x_126100;
    float defunc_0_f_res_126103 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_defunc_0_f_res_126103;
    float a12_126165 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_a12_126165;
    float b12_126166 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_b12_126166;
    float c12_126167 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_c12_126167;
    float b2_126168 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_b2_126168;
    float c2_126169 =
          futhark_mc_segred_stage_1_parloop_struct_131232->free_c2_126169;
    struct memblock reduce_stage_1_tid_res_arr_mem_126517 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126517",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131232->free_reduce_stage_1_tid_res_arr_mem_126517,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126519 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126519",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131232->free_reduce_stage_1_tid_res_arr_mem_126519,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126521 = start;
    float x_126441;
    float x_126442;
    float x_126444;
    float x_126445;
    float local_acc_126522 = 0.0F;
    float local_acc_126523 = 0.0F;
    
    for (; iter_126521 < end; iter_126521++) {
        int64_t gtid_118078 = iter_126521;
        bool cond_126447 = sle64(n_114463, gtid_118078);
        float defunc_0_f_res_126448;
        
        if (cond_126447) {
            defunc_0_f_res_126448 = 0.0F;
        } else {
            int64_t i_126449 = add64(gtid_118078, x_126099);
            float index_primexp_126450 = sitofp_i64_f32(i_126449);
            float defunc_0_f_res_f_res_126451 = 1.0F + index_primexp_126450;
            
            defunc_0_f_res_126448 = defunc_0_f_res_f_res_126451;
        }
        
        float defunc_0_f_res_126452;
        
        if (cond_126447) {
            defunc_0_f_res_126452 = 0.0F;
        } else {
            int64_t i_126453 = add64(gtid_118078, x_126099);
            float x_126454 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_118070 *
                                                    ctx_param_ext_122099 +
                                                    i_126453 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_126452 = x_126454;
        }
        
        float x_j_126455 = defunc_0_f_res_126448 - defunc_0_f_res_126103;
        float abs_res_126456 = (float) fabs(x_j_126455);
        float tmp1_126457 = abs_res_126456 / x_126100;
        float x_126458 = tmp1_126457 * tmp1_126457;
        float y_126459 = tmp1_126457 * x_126458;
        float tmp2_126460 = 1.0F - y_126459;
        float x_126461 = tmp2_126460 * tmp2_126460;
        float tmp3_126462 = tmp2_126460 * x_126461;
        float tmp4_126463 = defunc_0_f_res_126452 * tmp3_126462;
        float defunc_1_f_res_126464 = x_j_126455 * tmp4_126463;
        float defunc_1_f_res_126465 = x_j_126455 * defunc_1_f_res_126464;
        float defunc_0_f_res_126466;
        
        if (cond_126447) {
            defunc_0_f_res_126466 = 0.0F;
        } else {
            int64_t i_126467 = add64(gtid_118078, x_126099);
            float x_126468 = ((float *) mem_122249.mem)[gtid_118070 * n_114463 +
                                                        i_126467];
            
            defunc_0_f_res_126466 = x_126468;
        }
        
        float x_126469 = a12_126165 * tmp4_126463;
        float y_126470 = b12_126166 * defunc_1_f_res_126464;
        float x_126471 = x_126469 + y_126470;
        float y_126472 = c12_126167 * defunc_1_f_res_126465;
        float x_126473 = x_126471 + y_126472;
        float defunc_9_fit_fun_res_126474 = defunc_0_f_res_126466 * x_126473;
        float x_126475 = b12_126166 * tmp4_126463;
        float y_126476 = b2_126168 * defunc_1_f_res_126464;
        float x_126477 = x_126475 + y_126476;
        float y_126478 = c2_126169 * defunc_1_f_res_126465;
        float x_126479 = x_126477 + y_126478;
        float defunc_9_slope_fun_res_126480 = defunc_0_f_res_126466 * x_126479;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126441 = local_acc_126522;
        }
        // Load next params
        {
            x_126442 = defunc_9_fit_fun_res_126474;
        }
        // Red body
        {
            float defunc_1_op_res_126443 = x_126441 + x_126442;
            
            local_acc_126522 = defunc_1_op_res_126443;
        }
        // Load accum params
        {
            x_126444 = local_acc_126523;
        }
        // Load next params
        {
            x_126445 = defunc_9_slope_fun_res_126480;
        }
        // Red body
        {
            float defunc_1_op_res_126446 = x_126444 + x_126445;
            
            local_acc_126523 = defunc_1_op_res_126446;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126517.mem)[flat_tid_118077] =
        local_acc_126522;
    ((float *) reduce_stage_1_tid_res_arr_mem_126519.mem)[flat_tid_118077] =
        local_acc_126523;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131233_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131233_end -
                 futhark_mc_segred_stage_1_parloop_131233_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131233_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131233_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131233_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131229(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118077 = tid;
    int num_tasks_126516 = info.nsubtasks;
    struct futhark_mc_task_131228 *futhark_mc_task_131228 =
                                  (struct futhark_mc_task_131228 *) args;
    struct futhark_context *ctx = futhark_mc_task_131228->ctx;
    uint64_t futhark_mc_segred_task_131229_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131229_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131228->free_n_114463;
    int64_t gtid_118070 = futhark_mc_task_131228->free_gtid_118070;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131228->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131228->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131228->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131228->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131228->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126099 = futhark_mc_task_131228->free_x_126099;
    float x_126100 = futhark_mc_task_131228->free_x_126100;
    float defunc_0_f_res_126103 =
          futhark_mc_task_131228->free_defunc_0_f_res_126103;
    float a12_126165 = futhark_mc_task_131228->free_a12_126165;
    float b12_126166 = futhark_mc_task_131228->free_b12_126166;
    float c12_126167 = futhark_mc_task_131228->free_c12_126167;
    float b2_126168 = futhark_mc_task_131228->free_b2_126168;
    float c2_126169 = futhark_mc_task_131228->free_c2_126169;
    float defunc_2_reduce_res_126170 =
          *futhark_mc_task_131228->retval_defunc_2_reduce_res_126170;
    float defunc_2_reduce_res_126171 =
          *futhark_mc_task_131228->retval_defunc_2_reduce_res_126171;
    size_t reduce_stage_1_tid_res_arr_mem_126517_cached_sizze_131230 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126517 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_131231 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126519 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126517_cached_sizze_131230 <
        (size_t) ((int64_t) 4 * num_tasks_126516)) {
        reduce_stage_1_tid_res_arr_mem_126517 =
            realloc(reduce_stage_1_tid_res_arr_mem_126517, (int64_t) 4 *
                    num_tasks_126516);
        reduce_stage_1_tid_res_arr_mem_126517_cached_sizze_131230 =
            (int64_t) 4 * num_tasks_126516;
    }
    if (reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_131231 <
        (size_t) ((int64_t) 4 * num_tasks_126516)) {
        reduce_stage_1_tid_res_arr_mem_126519 =
            realloc(reduce_stage_1_tid_res_arr_mem_126519, (int64_t) 4 *
                    num_tasks_126516);
        reduce_stage_1_tid_res_arr_mem_126519_cached_sizze_131231 =
            (int64_t) 4 * num_tasks_126516;
    }
    
    int64_t iter_126521;
    struct futhark_mc_segred_stage_1_parloop_struct_131232
    futhark_mc_segred_stage_1_parloop_struct_131232;
    
    futhark_mc_segred_stage_1_parloop_struct_131232.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_gtid_118070 =
        gtid_118070;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_x_126099 = x_126099;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_x_126100 = x_126100;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_defunc_0_f_res_126103 =
        defunc_0_f_res_126103;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_a12_126165 =
        a12_126165;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_b12_126166 =
        b12_126166;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_c12_126167 =
        c12_126167;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_b2_126168 = b2_126168;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_c2_126169 = c2_126169;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_reduce_stage_1_tid_res_arr_mem_126517 =
        reduce_stage_1_tid_res_arr_mem_126517;
    futhark_mc_segred_stage_1_parloop_struct_131232.free_reduce_stage_1_tid_res_arr_mem_126519 =
        reduce_stage_1_tid_res_arr_mem_126519;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131233_task;
    
    futhark_mc_segred_stage_1_parloop_131233_task.name =
        "futhark_mc_segred_stage_1_parloop_131233";
    futhark_mc_segred_stage_1_parloop_131233_task.fn =
        futhark_mc_segred_stage_1_parloop_131233;
    futhark_mc_segred_stage_1_parloop_131233_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131232;
    futhark_mc_segred_stage_1_parloop_131233_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131233_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131233_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131233_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131233_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131233_task);
    
    if (futhark_mc_segred_stage_1_parloop_131233_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131233_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131233_total_end -
                 futhark_mc_segred_stage_1_parloop_131233_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131233_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131233_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131233_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126170 = 0.0F;
        defunc_2_reduce_res_126171 = 0.0F;
    }
    
    float x_126524;
    float x_126525;
    float x_126527;
    float x_126528;
    
    for (int32_t i_126530 = 0; i_126530 < num_tasks_126516; i_126530++) {
        flat_tid_118077 = i_126530;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126524 = defunc_2_reduce_res_126170;
            }
            // load next params
            {
                x_126525 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126517)[flat_tid_118077];
            }
            // red body
            {
                float defunc_1_op_res_126526 = x_126524 + x_126525;
                
                defunc_2_reduce_res_126170 = defunc_1_op_res_126526;
            }
            // load acc params
            {
                x_126527 = defunc_2_reduce_res_126171;
            }
            // load next params
            {
                x_126528 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126519)[flat_tid_118077];
            }
            // red body
            {
                float defunc_1_op_res_126529 = x_126527 + x_126528;
                
                defunc_2_reduce_res_126171 = defunc_1_op_res_126529;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126517);
    free(reduce_stage_1_tid_res_arr_mem_126519);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131229_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131229_end -
                 futhark_mc_segred_task_131229_start;
        
        ctx->futhark_mc_segred_task_131229_runs[tid]++;
        ctx->futhark_mc_segred_task_131229_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131229_iter[tid] += iterations;
    }
    *futhark_mc_task_131228->retval_defunc_2_reduce_res_126170 =
        defunc_2_reduce_res_126170;
    *futhark_mc_task_131228->retval_defunc_2_reduce_res_126171 =
        defunc_2_reduce_res_126171;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131218(void *args, int64_t start,
                                            int64_t end, int flat_tid_118073,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131217
    *futhark_mc_segmap_parloop_struct_131217 =
    (struct futhark_mc_segmap_parloop_struct_131217 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131217->ctx;
    uint64_t futhark_mc_segmap_parloop_131218_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131218_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131217->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131217->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131217->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131217->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131217->free_i_114539;
    int64_t gtid_118070 =
            futhark_mc_segmap_parloop_struct_131217->free_gtid_118070;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131217->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131217->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131217->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131217->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131217->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131217->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131217->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122322 = {.desc ="mem_122322", .mem =
                                  futhark_mc_segmap_parloop_struct_131217->free_mem_122322,
                                  .size =0, .references =NULL};
    struct memblock mem_122325 = {.desc ="mem_122325", .mem =
                                  futhark_mc_segmap_parloop_struct_131217->free_mem_122325,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126404 = start;
    
    for (; iter_126404 < end; iter_126404++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126481 = l_n_m_114513;
        int64_t gtid_118074 = iter_126404;
        int64_t remnant_126482 = iter_126404 - gtid_118074;
        int64_t x_126099 = ((int64_t *) mem_121987.mem)[gtid_118070 *
                                                        l_n_m_114513 +
                                                        gtid_118074];
        float x_126100 = ((float *) mem_121991.mem)[gtid_118070 * l_n_m_114513 +
                                                    gtid_118074];
        int64_t min_arg_126101 = mul64(t_jump_114470, gtid_118074);
        int64_t min_res_126102 = smin64(i_114539, min_arg_126101);
        float defunc_0_f_res_126103 = sitofp_i64_f32(min_res_126102);
        float defunc_2_reduce_res_126104;
        float defunc_2_reduce_res_126105;
        float defunc_2_reduce_res_126106;
        float defunc_2_reduce_res_126107;
        float defunc_2_reduce_res_126108;
        int64_t flat_tid_118075 = (int64_t) 0;
        int32_t num_tasks_126483;
        struct futhark_mc_task_131219 futhark_mc_task_131219;
        
        futhark_mc_task_131219.ctx = ctx;
        futhark_mc_task_131219.free_n_114463 = n_114463;
        futhark_mc_task_131219.free_gtid_118070 = gtid_118070;
        futhark_mc_task_131219.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131219.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131219.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131219.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131219.free_x_126099 = x_126099;
        futhark_mc_task_131219.free_x_126100 = x_126100;
        futhark_mc_task_131219.free_defunc_0_f_res_126103 =
            defunc_0_f_res_126103;
        futhark_mc_task_131219.retval_defunc_2_reduce_res_126104 =
            &defunc_2_reduce_res_126104;
        futhark_mc_task_131219.retval_defunc_2_reduce_res_126105 =
            &defunc_2_reduce_res_126105;
        futhark_mc_task_131219.retval_defunc_2_reduce_res_126106 =
            &defunc_2_reduce_res_126106;
        futhark_mc_task_131219.retval_defunc_2_reduce_res_126107 =
            &defunc_2_reduce_res_126107;
        futhark_mc_task_131219.retval_defunc_2_reduce_res_126108 =
            &defunc_2_reduce_res_126108;
        
        struct scheduler_segop futhark_mc_task_131219_task;
        
        futhark_mc_task_131219_task.args = &futhark_mc_task_131219;
        futhark_mc_task_131219_task.top_level_fn =
            futhark_mc_segred_task_131220;
        futhark_mc_task_131219_task.name = "futhark_mc_segred_task_131220";
        futhark_mc_task_131219_task.iterations = l_window_114467;
        futhark_mc_task_131219_task.task_time =
            &ctx->futhark_mc_segred_task_131220_total_time;
        futhark_mc_task_131219_task.task_iter =
            &ctx->futhark_mc_segred_task_131220_total_iter;
        futhark_mc_task_131219_task.sched = STATIC;
        futhark_mc_task_131219_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131220_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131219_task);
        
        if (futhark_mc_segred_task_131220_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126145 = defunc_2_reduce_res_126106 *
              defunc_2_reduce_res_126108;
        float y_126146 = defunc_2_reduce_res_126107 *
              defunc_2_reduce_res_126107;
        float a12_126147 = x_126145 - y_126146;
        float x_126148 = defunc_2_reduce_res_126106 *
              defunc_2_reduce_res_126107;
        float y_126149 = defunc_2_reduce_res_126105 *
              defunc_2_reduce_res_126108;
        float b12_126150 = x_126148 - y_126149;
        float x_126151 = defunc_2_reduce_res_126105 *
              defunc_2_reduce_res_126107;
        float y_126152 = defunc_2_reduce_res_126106 *
              defunc_2_reduce_res_126106;
        float c12_126153 = x_126151 - y_126152;
        float x_126154 = defunc_2_reduce_res_126104 *
              defunc_2_reduce_res_126108;
        float b2_126155 = x_126154 - y_126152;
        float x_126156 = defunc_2_reduce_res_126105 *
              defunc_2_reduce_res_126106;
        float y_126157 = defunc_2_reduce_res_126104 *
              defunc_2_reduce_res_126107;
        float c2_126158 = x_126156 - y_126157;
        float x_126159 = defunc_2_reduce_res_126104 * a12_126147;
        float y_126160 = defunc_2_reduce_res_126105 * b12_126150;
        float x_126161 = x_126159 + y_126160;
        float y_126162 = defunc_2_reduce_res_126106 * c12_126153;
        float y_126163 = x_126161 + y_126162;
        float det_126164 = 1.0F / y_126163;
        float a12_126165 = a12_126147 * det_126164;
        float b12_126166 = b12_126150 * det_126164;
        float c12_126167 = c12_126153 * det_126164;
        float b2_126168 = b2_126155 * det_126164;
        float c2_126169 = c2_126158 * det_126164;
        float defunc_2_reduce_res_126170;
        float defunc_2_reduce_res_126171;
        int64_t flat_tid_118077 = (int64_t) 0;
        int32_t num_tasks_126516;
        struct futhark_mc_task_131228 futhark_mc_task_131228;
        
        futhark_mc_task_131228.ctx = ctx;
        futhark_mc_task_131228.free_n_114463 = n_114463;
        futhark_mc_task_131228.free_gtid_118070 = gtid_118070;
        futhark_mc_task_131228.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131228.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131228.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131228.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131228.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131228.free_x_126099 = x_126099;
        futhark_mc_task_131228.free_x_126100 = x_126100;
        futhark_mc_task_131228.free_defunc_0_f_res_126103 =
            defunc_0_f_res_126103;
        futhark_mc_task_131228.free_a12_126165 = a12_126165;
        futhark_mc_task_131228.free_b12_126166 = b12_126166;
        futhark_mc_task_131228.free_c12_126167 = c12_126167;
        futhark_mc_task_131228.free_b2_126168 = b2_126168;
        futhark_mc_task_131228.free_c2_126169 = c2_126169;
        futhark_mc_task_131228.retval_defunc_2_reduce_res_126170 =
            &defunc_2_reduce_res_126170;
        futhark_mc_task_131228.retval_defunc_2_reduce_res_126171 =
            &defunc_2_reduce_res_126171;
        
        struct scheduler_segop futhark_mc_task_131228_task;
        
        futhark_mc_task_131228_task.args = &futhark_mc_task_131228;
        futhark_mc_task_131228_task.top_level_fn =
            futhark_mc_segred_task_131229;
        futhark_mc_task_131228_task.name = "futhark_mc_segred_task_131229";
        futhark_mc_task_131228_task.iterations = l_window_114467;
        futhark_mc_task_131228_task.task_time =
            &ctx->futhark_mc_segred_task_131229_total_time;
        futhark_mc_task_131228_task.task_iter =
            &ctx->futhark_mc_segred_task_131229_total_iter;
        futhark_mc_task_131228_task.sched = STATIC;
        futhark_mc_task_131228_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131229_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131228_task);
        
        if (futhark_mc_segred_task_131229_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122322.mem)[gtid_118074] = defunc_2_reduce_res_126170;
        ((float *) mem_122325.mem)[gtid_118074] = defunc_2_reduce_res_126171;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131218_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131218_end -
                 futhark_mc_segmap_parloop_131218_start;
        
        ctx->futhark_mc_segmap_parloop_131218_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131218_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131218_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131216(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118073 = tid;
    int num_tasks_126322 = info.nsubtasks;
    struct futhark_mc_task_131212 *futhark_mc_task_131212 =
                                  (struct futhark_mc_task_131212 *) args;
    struct futhark_context *ctx = futhark_mc_task_131212->ctx;
    uint64_t futhark_mc_segmap_nested_task_131216_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131216_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131212->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131212->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131212->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131212->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131212->free_i_114539;
    int64_t gtid_118070 = futhark_mc_task_131212->free_gtid_118070;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131212->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131212->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131212->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131212->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131212->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131212->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131212->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122322 = {.desc ="mem_122322", .mem =
                                  futhark_mc_task_131212->free_mem_122322,
                                  .size =0, .references =NULL};
    struct memblock mem_122325 = {.desc ="mem_122325", .mem =
                                  futhark_mc_task_131212->free_mem_122325,
                                  .size =0, .references =NULL};
    int64_t iter_126404;
    struct futhark_mc_segmap_parloop_struct_131217
    futhark_mc_segmap_parloop_struct_131217;
    
    futhark_mc_segmap_parloop_struct_131217.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131217.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131217.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131217.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131217.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131217.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131217.free_gtid_118070 = gtid_118070;
    futhark_mc_segmap_parloop_struct_131217.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131217.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131217.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131217.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131217.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131217.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131217.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131217.free_mem_122322 = mem_122322.mem;
    futhark_mc_segmap_parloop_struct_131217.free_mem_122325 = mem_122325.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131218_task;
    
    futhark_mc_segmap_parloop_131218_task.name =
        "futhark_mc_segmap_parloop_131218";
    futhark_mc_segmap_parloop_131218_task.fn = futhark_mc_segmap_parloop_131218;
    futhark_mc_segmap_parloop_131218_task.args =
        &futhark_mc_segmap_parloop_struct_131217;
    futhark_mc_segmap_parloop_131218_task.iterations = iterations;
    futhark_mc_segmap_parloop_131218_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131218_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131218_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131218_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131218_task);
    
    if (futhark_mc_segmap_parloop_131218_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131218_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131218_total_end -
                 futhark_mc_segmap_parloop_131218_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131218_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131218_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131218_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131216_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131216_end -
                 futhark_mc_segmap_nested_task_131216_start;
        
        ctx->futhark_mc_segmap_nested_task_131216_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131216_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131216_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131209(void *args, int64_t start,
                                            int64_t end, int flat_tid_118069,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131208
    *futhark_mc_segmap_parloop_struct_131208 =
    (struct futhark_mc_segmap_parloop_struct_131208 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131208->ctx;
    uint64_t futhark_mc_segmap_parloop_131209_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131209_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131208->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131208->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131208->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131208->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131208->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131208->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131208->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131208->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131208->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131208->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131208->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131208->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131208->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131208->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122359 = {.desc ="mem_122359", .mem =
                                  futhark_mc_segmap_parloop_struct_131208->free_mem_122359,
                                  .size =0, .references =NULL};
    struct memblock mem_122363 = {.desc ="mem_122363", .mem =
                                  futhark_mc_segmap_parloop_struct_131208->free_mem_122363,
                                  .size =0, .references =NULL};
    size_t mem_122322_cached_sizze_131210 = 0;
    char *mem_122322 = NULL;
    size_t mem_122325_cached_sizze_131211 = 0;
    char *mem_122325 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126098 = start;
    
    if (mem_122322_cached_sizze_131210 < (size_t) bytes_121918) {
        mem_122322 = realloc(mem_122322, bytes_121918);
        mem_122322_cached_sizze_131210 = bytes_121918;
    }
    if (mem_122325_cached_sizze_131211 < (size_t) bytes_121918) {
        mem_122325 = realloc(mem_122325, bytes_121918);
        mem_122325_cached_sizze_131211 = bytes_121918;
    }
    for (; iter_126098 < end; iter_126098++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126320 = m_114462;
        int64_t gtid_118070 = iter_126098;
        int64_t remnant_126321 = iter_126098 - gtid_118070;
        int64_t flat_tid_118071 = (int64_t) 0;
        int32_t num_tasks_126322;
        int64_t flat_tid_118073 = (int64_t) 0;
        struct futhark_mc_task_131212 futhark_mc_task_131212;
        
        futhark_mc_task_131212.ctx = ctx;
        futhark_mc_task_131212.free_n_114463 = n_114463;
        futhark_mc_task_131212.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131212.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131212.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131212.free_i_114539 = i_114539;
        futhark_mc_task_131212.free_gtid_118070 = gtid_118070;
        futhark_mc_task_131212.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131212.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131212.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131212.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131212.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131212.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131212.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131212.free_mem_122322 = mem_122322;
        futhark_mc_task_131212.free_mem_122325 = mem_122325;
        
        struct scheduler_segop futhark_mc_task_131212_task;
        
        futhark_mc_task_131212_task.args = &futhark_mc_task_131212;
        futhark_mc_task_131212_task.top_level_fn =
            futhark_mc_segmap_task_131213;
        futhark_mc_task_131212_task.name = "futhark_mc_segmap_task_131213";
        futhark_mc_task_131212_task.iterations = l_n_m_114513;
        futhark_mc_task_131212_task.task_time =
            &ctx->futhark_mc_segmap_task_131213_total_time;
        futhark_mc_task_131212_task.task_iter =
            &ctx->futhark_mc_segmap_task_131213_total_iter;
        futhark_mc_task_131212_task.sched = STATIC;
        futhark_mc_task_131212_task.nested_fn =
            futhark_mc_segmap_nested_task_131216;
        
        int futhark_mc_segmap_task_131213_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131212_task);
        
        if (futhark_mc_segmap_task_131213_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122359.mem + gtid_118070 * l_n_m_114513 * (int64_t) 4,
                mem_122322 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122363.mem + gtid_118070 * l_n_m_114513 * (int64_t) 4,
                mem_122325 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122322);
    free(mem_122325);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131209_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131209_end -
                 futhark_mc_segmap_parloop_131209_start;
        
        ctx->futhark_mc_segmap_parloop_131209_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131209_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131209_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131207(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118069 = tid;
    int num_tasks_125972 = info.nsubtasks;
    struct futhark_mc_task_131201 *futhark_mc_task_131201 =
                                  (struct futhark_mc_task_131201 *) args;
    struct futhark_context *ctx = futhark_mc_task_131201->ctx;
    uint64_t futhark_mc_segmap_nested_task_131207_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131207_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131201->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131201->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131201->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131201->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131201->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131201->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131201->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131201->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131201->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131201->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131201->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131201->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131201->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131201->free_mem_122249,
                                  .size =0, .references =NULL};
    struct memblock mem_122359 = {.desc ="mem_122359", .mem =
                                  futhark_mc_task_131201->free_mem_122359,
                                  .size =0, .references =NULL};
    struct memblock mem_122363 = {.desc ="mem_122363", .mem =
                                  futhark_mc_task_131201->free_mem_122363,
                                  .size =0, .references =NULL};
    int64_t iter_126098;
    struct futhark_mc_segmap_parloop_struct_131208
    futhark_mc_segmap_parloop_struct_131208;
    
    futhark_mc_segmap_parloop_struct_131208.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131208.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131208.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131208.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131208.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131208.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131208.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131208.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131208.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131208.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131208.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131208.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131208.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131208.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131208.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131208.free_mem_122359 = mem_122359.mem;
    futhark_mc_segmap_parloop_struct_131208.free_mem_122363 = mem_122363.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131209_task;
    
    futhark_mc_segmap_parloop_131209_task.name =
        "futhark_mc_segmap_parloop_131209";
    futhark_mc_segmap_parloop_131209_task.fn = futhark_mc_segmap_parloop_131209;
    futhark_mc_segmap_parloop_131209_task.args =
        &futhark_mc_segmap_parloop_struct_131208;
    futhark_mc_segmap_parloop_131209_task.iterations = iterations;
    futhark_mc_segmap_parloop_131209_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131209_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131209_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131209_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131209_task);
    
    if (futhark_mc_segmap_parloop_131209_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131209_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131209_total_end -
                 futhark_mc_segmap_parloop_131209_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131209_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131209_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131209_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131207_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131207_end -
                 futhark_mc_segmap_nested_task_131207_start;
        
        ctx->futhark_mc_segmap_nested_task_131207_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131207_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131207_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131234 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122426;
};
struct futhark_mc_segmap_parloop_struct_131236 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122426;
};
static int futhark_mc_segmap_parloop_131237(void *args, int64_t start,
                                            int64_t end, int flat_tid_118433,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131236
    *futhark_mc_segmap_parloop_struct_131236 =
    (struct futhark_mc_segmap_parloop_struct_131236 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131236->ctx;
    uint64_t futhark_mc_segmap_parloop_131237_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131237_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131236->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131236->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131236->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131236->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131236->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131236->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131236->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131236->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131236->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131236->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131236->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131236->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131236->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131236->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 =
            futhark_mc_segmap_parloop_struct_131236->free_bytes_122372;
    struct memblock mem_122426 = {.desc ="mem_122426", .mem =
                                  futhark_mc_segmap_parloop_struct_131236->free_mem_122426,
                                  .size =0, .references =NULL};
    size_t mem_122395_cached_sizze_131238 = 0;
    char *mem_122395 = NULL;
    size_t mem_122405_cached_sizze_131239 = 0;
    char *mem_122405 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126534 = start;
    
    if (mem_122395_cached_sizze_131238 < (size_t) bytes_121918) {
        mem_122395 = realloc(mem_122395, bytes_121918);
        mem_122395_cached_sizze_131238 = bytes_121918;
    }
    if (mem_122405_cached_sizze_131239 < (size_t) bytes_122372) {
        mem_122405 = realloc(mem_122405, bytes_122372);
        mem_122405_cached_sizze_131239 = bytes_122372;
    }
    for (; iter_126534 < end; iter_126534++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126580 = m_114462;
        int64_t gtid_118434 = iter_126534;
        int64_t remnant_126581 = iter_126534 - gtid_118434;
        
        for (int64_t i_126535 = 0; i_126535 < l_n_m_114513; i_126535++) {
            int64_t x_126537 = ((int64_t *) mem_121987.mem)[gtid_118434 *
                                                            l_n_m_114513 +
                                                            i_126535];
            float x_126538 = ((float *) mem_121991.mem)[gtid_118434 *
                                                        l_n_m_114513 +
                                                        i_126535];
            int64_t min_arg_126539 = mul64(t_jump_114470, i_126535);
            int64_t min_res_126540 = smin64(i_114539, min_arg_126539);
            float defunc_0_f_res_126541 = sitofp_i64_f32(min_res_126540);
            float defunc_2_reduce_res_126543;
            float redout_126546 = 0.0F;
            
            for (int64_t i_126545 = 0; i_126545 < l_window_114467; i_126545++) {
                bool cond_126548 = sle64(n_114463, i_126545);
                float defunc_0_f_res_126549;
                
                if (cond_126548) {
                    defunc_0_f_res_126549 = 0.0F;
                } else {
                    int64_t i_126550 = add64(x_126537, i_126545);
                    float index_primexp_126551 = sitofp_i64_f32(i_126550);
                    float defunc_0_f_res_f_res_126552 = 1.0F +
                          index_primexp_126551;
                    
                    defunc_0_f_res_126549 = defunc_0_f_res_f_res_126552;
                }
                
                float defunc_0_f_res_126553;
                
                if (cond_126548) {
                    defunc_0_f_res_126553 = 0.0F;
                } else {
                    int64_t i_126554 = add64(x_126537, i_126545);
                    float x_126555 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_118434 *
                                                            ctx_param_ext_122099 +
                                                            i_126554 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_126553 = x_126555;
                }
                
                float x_j_126556 = defunc_0_f_res_126549 -
                      defunc_0_f_res_126541;
                float abs_res_126557 = (float) fabs(x_j_126556);
                float tmp1_126558 = abs_res_126557 / x_126538;
                float x_126559 = tmp1_126558 * tmp1_126558;
                float y_126560 = tmp1_126558 * x_126559;
                float tmp2_126561 = 1.0F - y_126560;
                float x_126562 = tmp2_126561 * tmp2_126561;
                float tmp3_126563 = tmp2_126561 * x_126562;
                float tmp4_126564 = defunc_0_f_res_126553 * tmp3_126563;
                float defunc_1_op_res_126565 = tmp4_126564 + redout_126546;
                
                ((float *) mem_122405)[i_126545] = tmp4_126564;
                
                float redout_tmp_126583 = defunc_1_op_res_126565;
                
                redout_126546 = redout_tmp_126583;
            }
            defunc_2_reduce_res_126543 = redout_126546;
            
            float a0_126567 = 1.0F / defunc_2_reduce_res_126543;
            float defunc_2_reduce_res_126568;
            float redout_126570 = 0.0F;
            
            for (int64_t i_126569 = 0; i_126569 < l_window_114467; i_126569++) {
                float x_126571 = ((float *) mem_122405)[i_126569];
                bool cond_126572 = sle64(n_114463, i_126569);
                float defunc_0_f_res_126573;
                
                if (cond_126572) {
                    defunc_0_f_res_126573 = 0.0F;
                } else {
                    int64_t i_126574 = add64(x_126537, i_126569);
                    float x_126575 = ((float *) mem_122249.mem)[gtid_118434 *
                                                                n_114463 +
                                                                i_126574];
                    
                    defunc_0_f_res_126573 = x_126575;
                }
                
                float x_126576 = a0_126567 * x_126571;
                float defunc_9_fit_fun_res_126577 = defunc_0_f_res_126573 *
                      x_126576;
                float defunc_1_op_res_126578 = defunc_9_fit_fun_res_126577 +
                      redout_126570;
                float redout_tmp_126585 = defunc_1_op_res_126578;
                
                redout_126570 = redout_tmp_126585;
            }
            defunc_2_reduce_res_126568 = redout_126570;
            ((float *) mem_122395)[i_126535] = defunc_2_reduce_res_126568;
        }
        memmove(mem_122426.mem + gtid_118434 * l_n_m_114513 * (int64_t) 4,
                mem_122395 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122395);
    free(mem_122405);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131237_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131237_end -
                 futhark_mc_segmap_parloop_131237_start;
        
        ctx->futhark_mc_segmap_parloop_131237_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131237_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131237_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131235(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118433 = tid;
    int num_tasks_126533 = info.nsubtasks;
    struct futhark_mc_task_131234 *futhark_mc_task_131234 =
                                  (struct futhark_mc_task_131234 *) args;
    struct futhark_context *ctx = futhark_mc_task_131234->ctx;
    uint64_t futhark_mc_segmap_task_131235_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131235_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131234->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131234->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131234->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131234->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131234->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131234->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131234->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131234->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131234->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131234->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131234->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131234->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131234->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131234->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 = futhark_mc_task_131234->free_bytes_122372;
    struct memblock mem_122426 = {.desc ="mem_122426", .mem =
                                  futhark_mc_task_131234->free_mem_122426,
                                  .size =0, .references =NULL};
    int64_t iter_126534;
    struct futhark_mc_segmap_parloop_struct_131236
    futhark_mc_segmap_parloop_struct_131236;
    
    futhark_mc_segmap_parloop_struct_131236.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131236.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131236.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131236.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131236.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131236.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131236.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131236.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131236.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131236.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131236.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131236.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131236.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131236.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131236.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131236.free_bytes_122372 = bytes_122372;
    futhark_mc_segmap_parloop_struct_131236.free_mem_122426 = mem_122426.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131237_task;
    
    futhark_mc_segmap_parloop_131237_task.name =
        "futhark_mc_segmap_parloop_131237";
    futhark_mc_segmap_parloop_131237_task.fn = futhark_mc_segmap_parloop_131237;
    futhark_mc_segmap_parloop_131237_task.args =
        &futhark_mc_segmap_parloop_struct_131236;
    futhark_mc_segmap_parloop_131237_task.iterations = iterations;
    futhark_mc_segmap_parloop_131237_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131237_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131237_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131237_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131237_task);
    
    if (futhark_mc_segmap_parloop_131237_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131237_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131237_total_end -
                 futhark_mc_segmap_parloop_131237_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131237_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131237_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131237_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131235_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131235_end -
                 futhark_mc_segmap_task_131235_start;
        
        ctx->futhark_mc_segmap_task_131235_runs[tid]++;
        ctx->futhark_mc_segmap_task_131235_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131235_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131241 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122426;
};
struct futhark_mc_task_131244 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118436;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122392;
};
struct futhark_mc_segmap_parloop_struct_131246 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118436;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122392;
};
static int futhark_mc_segmap_parloop_131247(void *args, int64_t start,
                                            int64_t end, int flat_tid_118437,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131246
    *futhark_mc_segmap_parloop_struct_131246 =
    (struct futhark_mc_segmap_parloop_struct_131246 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131246->ctx;
    uint64_t futhark_mc_segmap_parloop_131247_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131247_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131246->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131246->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131246->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131246->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131246->free_i_114539;
    int64_t gtid_118436 =
            futhark_mc_segmap_parloop_struct_131246->free_gtid_118436;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131246->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131246->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131246->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131246->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 =
            futhark_mc_segmap_parloop_struct_131246->free_bytes_122372;
    struct memblock mem_122392 = {.desc ="mem_122392", .mem =
                                  futhark_mc_segmap_parloop_struct_131246->free_mem_122392,
                                  .size =0, .references =NULL};
    size_t mem_126632_cached_sizze_131248 = 0;
    char *mem_126632 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126673 = start;
    
    if (mem_126632_cached_sizze_131248 < (size_t) bytes_122372) {
        mem_126632 = realloc(mem_126632, bytes_122372);
        mem_126632_cached_sizze_131248 = bytes_122372;
    }
    for (; iter_126673 < end; iter_126673++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126706 = l_n_m_114513;
        int64_t gtid_118438 = iter_126673;
        int64_t remnant_126707 = iter_126673 - gtid_118438;
        int64_t x_126627 = ((int64_t *) mem_121987.mem)[gtid_118436 *
                                                        l_n_m_114513 +
                                                        gtid_118438];
        float x_126628 = ((float *) mem_121991.mem)[gtid_118436 * l_n_m_114513 +
                                                    gtid_118438];
        int64_t min_arg_126629 = mul64(t_jump_114470, gtid_118438);
        int64_t min_res_126630 = smin64(i_114539, min_arg_126629);
        float defunc_0_f_res_126631 = sitofp_i64_f32(min_res_126630);
        float defunc_2_reduce_res_126634;
        float redout_126675 = 0.0F;
        
        for (int64_t i_126674 = 0; i_126674 < l_window_114467; i_126674++) {
            bool cond_126677 = sle64(n_114463, i_126674);
            float defunc_0_f_res_126678;
            
            if (cond_126677) {
                defunc_0_f_res_126678 = 0.0F;
            } else {
                int64_t i_126679 = add64(x_126627, i_126674);
                float index_primexp_126680 = sitofp_i64_f32(i_126679);
                float defunc_0_f_res_f_res_126681 = 1.0F + index_primexp_126680;
                
                defunc_0_f_res_126678 = defunc_0_f_res_f_res_126681;
            }
            
            float defunc_0_f_res_126682;
            
            if (cond_126677) {
                defunc_0_f_res_126682 = 0.0F;
            } else {
                int64_t i_126683 = add64(x_126627, i_126674);
                float x_126684 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_118436 *
                                                        ctx_param_ext_122099 +
                                                        i_126683 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_126682 = x_126684;
            }
            
            float x_j_126685 = defunc_0_f_res_126678 - defunc_0_f_res_126631;
            float abs_res_126686 = (float) fabs(x_j_126685);
            float tmp1_126687 = abs_res_126686 / x_126628;
            float x_126688 = tmp1_126687 * tmp1_126687;
            float y_126689 = tmp1_126687 * x_126688;
            float tmp2_126690 = 1.0F - y_126689;
            float x_126691 = tmp2_126690 * tmp2_126690;
            float tmp3_126692 = tmp2_126690 * x_126691;
            float tmp4_126693 = defunc_0_f_res_126682 * tmp3_126692;
            float defunc_1_op_res_126694 = tmp4_126693 + redout_126675;
            
            ((float *) mem_126632)[i_126674] = tmp4_126693;
            
            float redout_tmp_126708 = defunc_1_op_res_126694;
            
            redout_126675 = redout_tmp_126708;
        }
        defunc_2_reduce_res_126634 = redout_126675;
        
        float a0_126658 = 1.0F / defunc_2_reduce_res_126634;
        float defunc_2_reduce_res_126659;
        float redout_126697 = 0.0F;
        
        for (int64_t i_126696 = 0; i_126696 < l_window_114467; i_126696++) {
            float x_126698 = ((float *) mem_126632)[i_126696];
            bool cond_126699 = sle64(n_114463, i_126696);
            float defunc_0_f_res_126700;
            
            if (cond_126699) {
                defunc_0_f_res_126700 = 0.0F;
            } else {
                int64_t i_126701 = add64(x_126627, i_126696);
                float x_126702 = ((float *) mem_122249.mem)[gtid_118436 *
                                                            n_114463 +
                                                            i_126701];
                
                defunc_0_f_res_126700 = x_126702;
            }
            
            float x_126703 = a0_126658 * x_126698;
            float defunc_9_fit_fun_res_126704 = defunc_0_f_res_126700 *
                  x_126703;
            float defunc_1_op_res_126705 = defunc_9_fit_fun_res_126704 +
                  redout_126697;
            float redout_tmp_126710 = defunc_1_op_res_126705;
            
            redout_126697 = redout_tmp_126710;
        }
        defunc_2_reduce_res_126659 = redout_126697;
        ((float *) mem_122392.mem)[gtid_118438] = defunc_2_reduce_res_126659;
    }
    
  cleanup:
    { }
    free(mem_126632);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131247_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131247_end -
                 futhark_mc_segmap_parloop_131247_start;
        
        ctx->futhark_mc_segmap_parloop_131247_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131247_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131247_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131245(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118437 = tid;
    int num_tasks_126672 = info.nsubtasks;
    struct futhark_mc_task_131244 *futhark_mc_task_131244 =
                                  (struct futhark_mc_task_131244 *) args;
    struct futhark_context *ctx = futhark_mc_task_131244->ctx;
    uint64_t futhark_mc_segmap_task_131245_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131245_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131244->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131244->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131244->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131244->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131244->free_i_114539;
    int64_t gtid_118436 = futhark_mc_task_131244->free_gtid_118436;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131244->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131244->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131244->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131244->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131244->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131244->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131244->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 = futhark_mc_task_131244->free_bytes_122372;
    struct memblock mem_122392 = {.desc ="mem_122392", .mem =
                                  futhark_mc_task_131244->free_mem_122392,
                                  .size =0, .references =NULL};
    int64_t iter_126673;
    struct futhark_mc_segmap_parloop_struct_131246
    futhark_mc_segmap_parloop_struct_131246;
    
    futhark_mc_segmap_parloop_struct_131246.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131246.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131246.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131246.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131246.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131246.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131246.free_gtid_118436 = gtid_118436;
    futhark_mc_segmap_parloop_struct_131246.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131246.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131246.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131246.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131246.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131246.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131246.free_bytes_122372 = bytes_122372;
    futhark_mc_segmap_parloop_struct_131246.free_mem_122392 = mem_122392.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131247_task;
    
    futhark_mc_segmap_parloop_131247_task.name =
        "futhark_mc_segmap_parloop_131247";
    futhark_mc_segmap_parloop_131247_task.fn = futhark_mc_segmap_parloop_131247;
    futhark_mc_segmap_parloop_131247_task.args =
        &futhark_mc_segmap_parloop_struct_131246;
    futhark_mc_segmap_parloop_131247_task.iterations = iterations;
    futhark_mc_segmap_parloop_131247_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131247_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131247_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131247_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131247_task);
    
    if (futhark_mc_segmap_parloop_131247_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131247_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131247_total_end -
                 futhark_mc_segmap_parloop_131247_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131247_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131245_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131245_end -
                 futhark_mc_segmap_task_131245_start;
        
        ctx->futhark_mc_segmap_task_131245_runs[tid]++;
        ctx->futhark_mc_segmap_task_131245_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131245_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131250 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118436;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122372;
    char *free_mem_122392;
};
struct futhark_mc_task_131253 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118436;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126587;
    float free_x_126588;
    float free_defunc_0_f_res_126591;
    float *retval_defunc_2_reduce_res_126593;
    char *retval_mem_126592;
};
struct futhark_mc_segred_stage_1_parloop_struct_131256 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118436;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126587;
    float free_x_126588;
    float free_defunc_0_f_res_126591;
    char *free_mem_126592;
    char *free_reduce_stage_1_tid_res_arr_mem_126745;
};
static int futhark_mc_segred_stage_1_parloop_131257(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118441,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131256
    *futhark_mc_segred_stage_1_parloop_struct_131256 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131256 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131256->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131257_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131257_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_n_114463;
    int64_t gtid_118436 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_gtid_118436;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131256->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126587 =
            futhark_mc_segred_stage_1_parloop_struct_131256->free_x_126587;
    float x_126588 =
          futhark_mc_segred_stage_1_parloop_struct_131256->free_x_126588;
    float defunc_0_f_res_126591 =
          futhark_mc_segred_stage_1_parloop_struct_131256->free_defunc_0_f_res_126591;
    struct memblock mem_126592 = {.desc ="mem_126592", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131256->free_mem_126592,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126745 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126745",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131256->free_reduce_stage_1_tid_res_arr_mem_126745,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126747 = start;
    float x_126712;
    float x_126713;
    float local_acc_126748 = 0.0F;
    
    for (; iter_126747 < end; iter_126747++) {
        int64_t gtid_118442 = iter_126747;
        bool cond_126715 = sle64(n_114463, gtid_118442);
        float defunc_0_f_res_126716;
        
        if (cond_126715) {
            defunc_0_f_res_126716 = 0.0F;
        } else {
            int64_t i_126717 = add64(gtid_118442, x_126587);
            float index_primexp_126718 = sitofp_i64_f32(i_126717);
            float defunc_0_f_res_f_res_126719 = 1.0F + index_primexp_126718;
            
            defunc_0_f_res_126716 = defunc_0_f_res_f_res_126719;
        }
        
        float defunc_0_f_res_126720;
        
        if (cond_126715) {
            defunc_0_f_res_126720 = 0.0F;
        } else {
            int64_t i_126721 = add64(gtid_118442, x_126587);
            float x_126722 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_118436 *
                                                    ctx_param_ext_122099 +
                                                    i_126721 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_126720 = x_126722;
        }
        
        float x_j_126723 = defunc_0_f_res_126716 - defunc_0_f_res_126591;
        float abs_res_126724 = (float) fabs(x_j_126723);
        float tmp1_126725 = abs_res_126724 / x_126588;
        float x_126726 = tmp1_126725 * tmp1_126725;
        float y_126727 = tmp1_126725 * x_126726;
        float tmp2_126728 = 1.0F - y_126727;
        float x_126729 = tmp2_126728 * tmp2_126728;
        float tmp3_126730 = tmp2_126728 * x_126729;
        float tmp4_126731 = defunc_0_f_res_126720 * tmp3_126730;
        
        // save map-out results
        {
            ((float *) mem_126592.mem)[gtid_118442] = tmp4_126731;
        }
        // Load accum params
        {
            x_126712 = local_acc_126748;
        }
        // Load next params
        {
            x_126713 = tmp4_126731;
        }
        // Red body
        {
            float defunc_1_op_res_126714 = x_126712 + x_126713;
            
            local_acc_126748 = defunc_1_op_res_126714;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126745.mem)[flat_tid_118441] =
        local_acc_126748;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131257_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131257_end -
                 futhark_mc_segred_stage_1_parloop_131257_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131257_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131257_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131257_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131254(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118441 = tid;
    int num_tasks_126744 = info.nsubtasks;
    struct futhark_mc_task_131253 *futhark_mc_task_131253 =
                                  (struct futhark_mc_task_131253 *) args;
    struct futhark_context *ctx = futhark_mc_task_131253->ctx;
    uint64_t futhark_mc_segred_task_131254_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131254_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131253->free_n_114463;
    int64_t gtid_118436 = futhark_mc_task_131253->free_gtid_118436;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131253->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131253->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131253->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131253->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126587 = futhark_mc_task_131253->free_x_126587;
    float x_126588 = futhark_mc_task_131253->free_x_126588;
    float defunc_0_f_res_126591 =
          futhark_mc_task_131253->free_defunc_0_f_res_126591;
    float defunc_2_reduce_res_126593 =
          *futhark_mc_task_131253->retval_defunc_2_reduce_res_126593;
    struct memblock mem_126592 = {.desc ="mem_126592", .mem =
                                  futhark_mc_task_131253->retval_mem_126592,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_126745_cached_sizze_131255 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126745 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126745_cached_sizze_131255 <
        (size_t) ((int64_t) 4 * num_tasks_126744)) {
        reduce_stage_1_tid_res_arr_mem_126745 =
            realloc(reduce_stage_1_tid_res_arr_mem_126745, (int64_t) 4 *
                    num_tasks_126744);
        reduce_stage_1_tid_res_arr_mem_126745_cached_sizze_131255 =
            (int64_t) 4 * num_tasks_126744;
    }
    
    int64_t iter_126747;
    struct futhark_mc_segred_stage_1_parloop_struct_131256
    futhark_mc_segred_stage_1_parloop_struct_131256;
    
    futhark_mc_segred_stage_1_parloop_struct_131256.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_gtid_118436 =
        gtid_118436;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_x_126587 = x_126587;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_x_126588 = x_126588;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_defunc_0_f_res_126591 =
        defunc_0_f_res_126591;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_mem_126592 =
        mem_126592.mem;
    futhark_mc_segred_stage_1_parloop_struct_131256.free_reduce_stage_1_tid_res_arr_mem_126745 =
        reduce_stage_1_tid_res_arr_mem_126745;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131257_task;
    
    futhark_mc_segred_stage_1_parloop_131257_task.name =
        "futhark_mc_segred_stage_1_parloop_131257";
    futhark_mc_segred_stage_1_parloop_131257_task.fn =
        futhark_mc_segred_stage_1_parloop_131257;
    futhark_mc_segred_stage_1_parloop_131257_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131256;
    futhark_mc_segred_stage_1_parloop_131257_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131257_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131257_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131257_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131257_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131257_task);
    
    if (futhark_mc_segred_stage_1_parloop_131257_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131257_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131257_total_end -
                 futhark_mc_segred_stage_1_parloop_131257_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131257_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131257_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131257_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126593 = 0.0F;
    }
    
    float x_126749;
    float x_126750;
    
    for (int32_t i_126752 = 0; i_126752 < num_tasks_126744; i_126752++) {
        flat_tid_118441 = i_126752;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126749 = defunc_2_reduce_res_126593;
            }
            // load next params
            {
                x_126750 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126745)[flat_tid_118441];
            }
            // red body
            {
                float defunc_1_op_res_126751 = x_126749 + x_126750;
                
                defunc_2_reduce_res_126593 = defunc_1_op_res_126751;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126745);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131254_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131254_end -
                 futhark_mc_segred_task_131254_start;
        
        ctx->futhark_mc_segred_task_131254_runs[tid]++;
        ctx->futhark_mc_segred_task_131254_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131254_iter[tid] += iterations;
    }
    *futhark_mc_task_131253->retval_defunc_2_reduce_res_126593 =
        defunc_2_reduce_res_126593;
    futhark_mc_task_131253->retval_mem_126592 = mem_126592.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131258 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118436;
    char *free_mem_122249;
    int64_t free_x_126587;
    char *free_mem_126592;
    float free_a0_126615;
    float *retval_defunc_2_reduce_res_126616;
};
struct futhark_mc_segred_stage_1_parloop_struct_131261 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118436;
    char *free_mem_122249;
    int64_t free_x_126587;
    char *free_mem_126592;
    float free_a0_126615;
    char *free_reduce_stage_1_tid_res_arr_mem_126754;
};
static int futhark_mc_segred_stage_1_parloop_131262(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118443,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131261
    *futhark_mc_segred_stage_1_parloop_struct_131261 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131261 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131261->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131262_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131262_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131261->free_n_114463;
    int64_t gtid_118436 =
            futhark_mc_segred_stage_1_parloop_struct_131261->free_gtid_118436;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131261->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126587 =
            futhark_mc_segred_stage_1_parloop_struct_131261->free_x_126587;
    struct memblock mem_126592 = {.desc ="mem_126592", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131261->free_mem_126592,
                                  .size =0, .references =NULL};
    float a0_126615 =
          futhark_mc_segred_stage_1_parloop_struct_131261->free_a0_126615;
    struct memblock reduce_stage_1_tid_res_arr_mem_126754 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126754",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131261->free_reduce_stage_1_tid_res_arr_mem_126754,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126756 = start;
    float x_126732;
    float x_126733;
    float local_acc_126757 = 0.0F;
    
    for (; iter_126756 < end; iter_126756++) {
        int64_t gtid_118444 = iter_126756;
        float x_126735 = ((float *) mem_126592.mem)[gtid_118444];
        bool cond_126736 = sle64(n_114463, gtid_118444);
        float defunc_0_f_res_126737;
        
        if (cond_126736) {
            defunc_0_f_res_126737 = 0.0F;
        } else {
            int64_t i_126738 = add64(gtid_118444, x_126587);
            float x_126739 = ((float *) mem_122249.mem)[gtid_118436 * n_114463 +
                                                        i_126738];
            
            defunc_0_f_res_126737 = x_126739;
        }
        
        float x_126740 = a0_126615 * x_126735;
        float defunc_9_fit_fun_res_126741 = defunc_0_f_res_126737 * x_126740;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126732 = local_acc_126757;
        }
        // Load next params
        {
            x_126733 = defunc_9_fit_fun_res_126741;
        }
        // Red body
        {
            float defunc_1_op_res_126734 = x_126732 + x_126733;
            
            local_acc_126757 = defunc_1_op_res_126734;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126754.mem)[flat_tid_118443] =
        local_acc_126757;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131262_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131262_end -
                 futhark_mc_segred_stage_1_parloop_131262_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131262_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131262_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131262_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131259(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118443 = tid;
    int num_tasks_126753 = info.nsubtasks;
    struct futhark_mc_task_131258 *futhark_mc_task_131258 =
                                  (struct futhark_mc_task_131258 *) args;
    struct futhark_context *ctx = futhark_mc_task_131258->ctx;
    uint64_t futhark_mc_segred_task_131259_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131259_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131258->free_n_114463;
    int64_t gtid_118436 = futhark_mc_task_131258->free_gtid_118436;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131258->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126587 = futhark_mc_task_131258->free_x_126587;
    struct memblock mem_126592 = {.desc ="mem_126592", .mem =
                                  futhark_mc_task_131258->free_mem_126592,
                                  .size =0, .references =NULL};
    float a0_126615 = futhark_mc_task_131258->free_a0_126615;
    float defunc_2_reduce_res_126616 =
          *futhark_mc_task_131258->retval_defunc_2_reduce_res_126616;
    size_t reduce_stage_1_tid_res_arr_mem_126754_cached_sizze_131260 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126754 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126754_cached_sizze_131260 <
        (size_t) ((int64_t) 4 * num_tasks_126753)) {
        reduce_stage_1_tid_res_arr_mem_126754 =
            realloc(reduce_stage_1_tid_res_arr_mem_126754, (int64_t) 4 *
                    num_tasks_126753);
        reduce_stage_1_tid_res_arr_mem_126754_cached_sizze_131260 =
            (int64_t) 4 * num_tasks_126753;
    }
    
    int64_t iter_126756;
    struct futhark_mc_segred_stage_1_parloop_struct_131261
    futhark_mc_segred_stage_1_parloop_struct_131261;
    
    futhark_mc_segred_stage_1_parloop_struct_131261.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_gtid_118436 =
        gtid_118436;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_x_126587 = x_126587;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_mem_126592 =
        mem_126592.mem;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_a0_126615 = a0_126615;
    futhark_mc_segred_stage_1_parloop_struct_131261.free_reduce_stage_1_tid_res_arr_mem_126754 =
        reduce_stage_1_tid_res_arr_mem_126754;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131262_task;
    
    futhark_mc_segred_stage_1_parloop_131262_task.name =
        "futhark_mc_segred_stage_1_parloop_131262";
    futhark_mc_segred_stage_1_parloop_131262_task.fn =
        futhark_mc_segred_stage_1_parloop_131262;
    futhark_mc_segred_stage_1_parloop_131262_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131261;
    futhark_mc_segred_stage_1_parloop_131262_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131262_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131262_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131262_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131262_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131262_task);
    
    if (futhark_mc_segred_stage_1_parloop_131262_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131262_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131262_total_end -
                 futhark_mc_segred_stage_1_parloop_131262_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131262_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131262_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131262_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126616 = 0.0F;
    }
    
    float x_126758;
    float x_126759;
    
    for (int32_t i_126761 = 0; i_126761 < num_tasks_126753; i_126761++) {
        flat_tid_118443 = i_126761;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126758 = defunc_2_reduce_res_126616;
            }
            // load next params
            {
                x_126759 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126754)[flat_tid_118443];
            }
            // red body
            {
                float defunc_1_op_res_126760 = x_126758 + x_126759;
                
                defunc_2_reduce_res_126616 = defunc_1_op_res_126760;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126754);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131259_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131259_end -
                 futhark_mc_segred_task_131259_start;
        
        ctx->futhark_mc_segred_task_131259_runs[tid]++;
        ctx->futhark_mc_segred_task_131259_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131259_iter[tid] += iterations;
    }
    *futhark_mc_task_131258->retval_defunc_2_reduce_res_126616 =
        defunc_2_reduce_res_126616;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131251(void *args, int64_t start,
                                            int64_t end, int flat_tid_118439,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131250
    *futhark_mc_segmap_parloop_struct_131250 =
    (struct futhark_mc_segmap_parloop_struct_131250 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131250->ctx;
    uint64_t futhark_mc_segmap_parloop_131251_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131251_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131250->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131250->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131250->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131250->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131250->free_i_114539;
    int64_t gtid_118436 =
            futhark_mc_segmap_parloop_struct_131250->free_gtid_118436;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131250->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131250->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131250->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131250->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131250->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131250->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131250->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 =
            futhark_mc_segmap_parloop_struct_131250->free_bytes_122372;
    struct memblock mem_122392 = {.desc ="mem_122392", .mem =
                                  futhark_mc_segmap_parloop_struct_131250->free_mem_122392,
                                  .size =0, .references =NULL};
    size_t mem_126592_cached_sizze_131252 = 0;
    char *mem_126592 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126711 = start;
    
    if (mem_126592_cached_sizze_131252 < (size_t) bytes_122372) {
        mem_126592 = realloc(mem_126592, bytes_122372);
        mem_126592_cached_sizze_131252 = bytes_122372;
    }
    for (; iter_126711 < end; iter_126711++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126742 = l_n_m_114513;
        int64_t gtid_118440 = iter_126711;
        int64_t remnant_126743 = iter_126711 - gtid_118440;
        int64_t x_126587 = ((int64_t *) mem_121987.mem)[gtid_118436 *
                                                        l_n_m_114513 +
                                                        gtid_118440];
        float x_126588 = ((float *) mem_121991.mem)[gtid_118436 * l_n_m_114513 +
                                                    gtid_118440];
        int64_t min_arg_126589 = mul64(t_jump_114470, gtid_118440);
        int64_t min_res_126590 = smin64(i_114539, min_arg_126589);
        float defunc_0_f_res_126591 = sitofp_i64_f32(min_res_126590);
        float defunc_2_reduce_res_126593;
        int64_t flat_tid_118441 = (int64_t) 0;
        int32_t num_tasks_126744;
        struct futhark_mc_task_131253 futhark_mc_task_131253;
        
        futhark_mc_task_131253.ctx = ctx;
        futhark_mc_task_131253.free_n_114463 = n_114463;
        futhark_mc_task_131253.free_gtid_118436 = gtid_118436;
        futhark_mc_task_131253.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131253.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131253.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131253.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131253.free_x_126587 = x_126587;
        futhark_mc_task_131253.free_x_126588 = x_126588;
        futhark_mc_task_131253.free_defunc_0_f_res_126591 =
            defunc_0_f_res_126591;
        futhark_mc_task_131253.retval_defunc_2_reduce_res_126593 =
            &defunc_2_reduce_res_126593;
        futhark_mc_task_131253.retval_mem_126592 = mem_126592;
        
        struct scheduler_segop futhark_mc_task_131253_task;
        
        futhark_mc_task_131253_task.args = &futhark_mc_task_131253;
        futhark_mc_task_131253_task.top_level_fn =
            futhark_mc_segred_task_131254;
        futhark_mc_task_131253_task.name = "futhark_mc_segred_task_131254";
        futhark_mc_task_131253_task.iterations = l_window_114467;
        futhark_mc_task_131253_task.task_time =
            &ctx->futhark_mc_segred_task_131254_total_time;
        futhark_mc_task_131253_task.task_iter =
            &ctx->futhark_mc_segred_task_131254_total_iter;
        futhark_mc_task_131253_task.sched = STATIC;
        futhark_mc_task_131253_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131254_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131253_task);
        
        if (futhark_mc_segred_task_131254_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_126615 = 1.0F / defunc_2_reduce_res_126593;
        float defunc_2_reduce_res_126616;
        int64_t flat_tid_118443 = (int64_t) 0;
        int32_t num_tasks_126753;
        struct futhark_mc_task_131258 futhark_mc_task_131258;
        
        futhark_mc_task_131258.ctx = ctx;
        futhark_mc_task_131258.free_n_114463 = n_114463;
        futhark_mc_task_131258.free_gtid_118436 = gtid_118436;
        futhark_mc_task_131258.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131258.free_x_126587 = x_126587;
        futhark_mc_task_131258.free_mem_126592 = mem_126592;
        futhark_mc_task_131258.free_a0_126615 = a0_126615;
        futhark_mc_task_131258.retval_defunc_2_reduce_res_126616 =
            &defunc_2_reduce_res_126616;
        
        struct scheduler_segop futhark_mc_task_131258_task;
        
        futhark_mc_task_131258_task.args = &futhark_mc_task_131258;
        futhark_mc_task_131258_task.top_level_fn =
            futhark_mc_segred_task_131259;
        futhark_mc_task_131258_task.name = "futhark_mc_segred_task_131259";
        futhark_mc_task_131258_task.iterations = l_window_114467;
        futhark_mc_task_131258_task.task_time =
            &ctx->futhark_mc_segred_task_131259_total_time;
        futhark_mc_task_131258_task.task_iter =
            &ctx->futhark_mc_segred_task_131259_total_iter;
        futhark_mc_task_131258_task.sched = STATIC;
        futhark_mc_task_131258_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131259_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131258_task);
        
        if (futhark_mc_segred_task_131259_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122392.mem)[gtid_118440] = defunc_2_reduce_res_126616;
    }
    
  cleanup:
    { }
    free(mem_126592);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131251_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131251_end -
                 futhark_mc_segmap_parloop_131251_start;
        
        ctx->futhark_mc_segmap_parloop_131251_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131251_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131251_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131249(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118439 = tid;
    int num_tasks_126672 = info.nsubtasks;
    struct futhark_mc_task_131244 *futhark_mc_task_131244 =
                                  (struct futhark_mc_task_131244 *) args;
    struct futhark_context *ctx = futhark_mc_task_131244->ctx;
    uint64_t futhark_mc_segmap_nested_task_131249_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131249_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131244->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131244->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131244->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131244->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131244->free_i_114539;
    int64_t gtid_118436 = futhark_mc_task_131244->free_gtid_118436;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131244->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131244->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131244->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131244->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131244->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131244->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131244->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 = futhark_mc_task_131244->free_bytes_122372;
    struct memblock mem_122392 = {.desc ="mem_122392", .mem =
                                  futhark_mc_task_131244->free_mem_122392,
                                  .size =0, .references =NULL};
    int64_t iter_126711;
    struct futhark_mc_segmap_parloop_struct_131250
    futhark_mc_segmap_parloop_struct_131250;
    
    futhark_mc_segmap_parloop_struct_131250.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131250.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131250.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131250.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131250.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131250.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131250.free_gtid_118436 = gtid_118436;
    futhark_mc_segmap_parloop_struct_131250.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131250.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131250.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131250.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131250.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131250.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131250.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131250.free_bytes_122372 = bytes_122372;
    futhark_mc_segmap_parloop_struct_131250.free_mem_122392 = mem_122392.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131251_task;
    
    futhark_mc_segmap_parloop_131251_task.name =
        "futhark_mc_segmap_parloop_131251";
    futhark_mc_segmap_parloop_131251_task.fn = futhark_mc_segmap_parloop_131251;
    futhark_mc_segmap_parloop_131251_task.args =
        &futhark_mc_segmap_parloop_struct_131250;
    futhark_mc_segmap_parloop_131251_task.iterations = iterations;
    futhark_mc_segmap_parloop_131251_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131251_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131251_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131251_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131251_task);
    
    if (futhark_mc_segmap_parloop_131251_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131251_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131251_total_end -
                 futhark_mc_segmap_parloop_131251_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131251_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131251_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131251_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131249_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131249_end -
                 futhark_mc_segmap_nested_task_131249_start;
        
        ctx->futhark_mc_segmap_nested_task_131249_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131249_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131249_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131242(void *args, int64_t start,
                                            int64_t end, int flat_tid_118435,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131241
    *futhark_mc_segmap_parloop_struct_131241 =
    (struct futhark_mc_segmap_parloop_struct_131241 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131241->ctx;
    uint64_t futhark_mc_segmap_parloop_131242_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131242_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131241->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131241->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131241->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131241->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131241->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131241->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131241->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131241->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131241->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131241->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131241->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131241->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131241->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131241->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 =
            futhark_mc_segmap_parloop_struct_131241->free_bytes_122372;
    struct memblock mem_122426 = {.desc ="mem_122426", .mem =
                                  futhark_mc_segmap_parloop_struct_131241->free_mem_122426,
                                  .size =0, .references =NULL};
    size_t mem_122392_cached_sizze_131243 = 0;
    char *mem_122392 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126586 = start;
    
    if (mem_122392_cached_sizze_131243 < (size_t) bytes_121918) {
        mem_122392 = realloc(mem_122392, bytes_121918);
        mem_122392_cached_sizze_131243 = bytes_121918;
    }
    for (; iter_126586 < end; iter_126586++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126670 = m_114462;
        int64_t gtid_118436 = iter_126586;
        int64_t remnant_126671 = iter_126586 - gtid_118436;
        int64_t flat_tid_118437 = (int64_t) 0;
        int32_t num_tasks_126672;
        int64_t flat_tid_118439 = (int64_t) 0;
        struct futhark_mc_task_131244 futhark_mc_task_131244;
        
        futhark_mc_task_131244.ctx = ctx;
        futhark_mc_task_131244.free_n_114463 = n_114463;
        futhark_mc_task_131244.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131244.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131244.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131244.free_i_114539 = i_114539;
        futhark_mc_task_131244.free_gtid_118436 = gtid_118436;
        futhark_mc_task_131244.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131244.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131244.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131244.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131244.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131244.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131244.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131244.free_bytes_122372 = bytes_122372;
        futhark_mc_task_131244.free_mem_122392 = mem_122392;
        
        struct scheduler_segop futhark_mc_task_131244_task;
        
        futhark_mc_task_131244_task.args = &futhark_mc_task_131244;
        futhark_mc_task_131244_task.top_level_fn =
            futhark_mc_segmap_task_131245;
        futhark_mc_task_131244_task.name = "futhark_mc_segmap_task_131245";
        futhark_mc_task_131244_task.iterations = l_n_m_114513;
        futhark_mc_task_131244_task.task_time =
            &ctx->futhark_mc_segmap_task_131245_total_time;
        futhark_mc_task_131244_task.task_iter =
            &ctx->futhark_mc_segmap_task_131245_total_iter;
        futhark_mc_task_131244_task.sched = STATIC;
        futhark_mc_task_131244_task.nested_fn =
            futhark_mc_segmap_nested_task_131249;
        
        int futhark_mc_segmap_task_131245_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131244_task);
        
        if (futhark_mc_segmap_task_131245_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122426.mem + gtid_118436 * l_n_m_114513 * (int64_t) 4,
                mem_122392 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122392);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131242_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131242_end -
                 futhark_mc_segmap_parloop_131242_start;
        
        ctx->futhark_mc_segmap_parloop_131242_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131242_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131242_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131240(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118435 = tid;
    int num_tasks_126533 = info.nsubtasks;
    struct futhark_mc_task_131234 *futhark_mc_task_131234 =
                                  (struct futhark_mc_task_131234 *) args;
    struct futhark_context *ctx = futhark_mc_task_131234->ctx;
    uint64_t futhark_mc_segmap_nested_task_131240_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131240_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131234->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131234->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131234->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131234->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131234->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131234->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131234->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131234->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131234->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131234->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131234->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131234->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131234->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131234->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122372 = futhark_mc_task_131234->free_bytes_122372;
    struct memblock mem_122426 = {.desc ="mem_122426", .mem =
                                  futhark_mc_task_131234->free_mem_122426,
                                  .size =0, .references =NULL};
    int64_t iter_126586;
    struct futhark_mc_segmap_parloop_struct_131241
    futhark_mc_segmap_parloop_struct_131241;
    
    futhark_mc_segmap_parloop_struct_131241.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131241.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131241.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131241.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131241.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131241.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131241.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131241.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131241.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131241.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131241.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131241.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131241.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131241.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131241.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131241.free_bytes_122372 = bytes_122372;
    futhark_mc_segmap_parloop_struct_131241.free_mem_122426 = mem_122426.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131242_task;
    
    futhark_mc_segmap_parloop_131242_task.name =
        "futhark_mc_segmap_parloop_131242";
    futhark_mc_segmap_parloop_131242_task.fn = futhark_mc_segmap_parloop_131242;
    futhark_mc_segmap_parloop_131242_task.args =
        &futhark_mc_segmap_parloop_struct_131241;
    futhark_mc_segmap_parloop_131242_task.iterations = iterations;
    futhark_mc_segmap_parloop_131242_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131242_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131242_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131242_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131242_task);
    
    if (futhark_mc_segmap_parloop_131242_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131242_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131242_total_end -
                 futhark_mc_segmap_parloop_131242_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131242_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131242_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131242_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131240_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131240_end -
                 futhark_mc_segmap_nested_task_131240_start;
        
        ctx->futhark_mc_segmap_nested_task_131240_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131240_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131240_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131263 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122532;
    char *free_mem_122536;
};
struct futhark_mc_segmap_parloop_struct_131265 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122532;
    char *free_mem_122536;
};
static int futhark_mc_segmap_parloop_131266(void *args, int64_t start,
                                            int64_t end, int flat_tid_118576,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131265
    *futhark_mc_segmap_parloop_struct_131265 =
    (struct futhark_mc_segmap_parloop_struct_131265 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131265->ctx;
    uint64_t futhark_mc_segmap_parloop_131266_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131266_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131265->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131265->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131265->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131265->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131265->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131265->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131265->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131265->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131265->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131265->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131265->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131265->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131265->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131265->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 =
            futhark_mc_segmap_parloop_struct_131265->free_bytes_122427;
    struct memblock mem_122532 = {.desc ="mem_122532", .mem =
                                  futhark_mc_segmap_parloop_struct_131265->free_mem_122532,
                                  .size =0, .references =NULL};
    struct memblock mem_122536 = {.desc ="mem_122536", .mem =
                                  futhark_mc_segmap_parloop_struct_131265->free_mem_122536,
                                  .size =0, .references =NULL};
    size_t mem_122471_cached_sizze_131267 = 0;
    char *mem_122471 = NULL;
    size_t mem_122474_cached_sizze_131268 = 0;
    char *mem_122474 = NULL;
    size_t mem_122491_cached_sizze_131269 = 0;
    char *mem_122491 = NULL;
    size_t mem_122494_cached_sizze_131270 = 0;
    char *mem_122494 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126763 = start;
    
    if (mem_122471_cached_sizze_131267 < (size_t) bytes_121918) {
        mem_122471 = realloc(mem_122471, bytes_121918);
        mem_122471_cached_sizze_131267 = bytes_121918;
    }
    if (mem_122474_cached_sizze_131268 < (size_t) bytes_121918) {
        mem_122474 = realloc(mem_122474, bytes_121918);
        mem_122474_cached_sizze_131268 = bytes_121918;
    }
    if (mem_122491_cached_sizze_131269 < (size_t) bytes_122427) {
        mem_122491 = realloc(mem_122491, bytes_122427);
        mem_122491_cached_sizze_131269 = bytes_122427;
    }
    if (mem_122494_cached_sizze_131270 < (size_t) bytes_122427) {
        mem_122494 = realloc(mem_122494, bytes_122427);
        mem_122494_cached_sizze_131270 = bytes_122427;
    }
    for (; iter_126763 < end; iter_126763++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126840 = m_114462;
        int64_t gtid_118577 = iter_126763;
        int64_t remnant_126841 = iter_126763 - gtid_118577;
        
        for (int64_t i_126764 = 0; i_126764 < l_n_m_114513; i_126764++) {
            int64_t x_126767 = ((int64_t *) mem_121987.mem)[gtid_118577 *
                                                            l_n_m_114513 +
                                                            i_126764];
            float x_126768 = ((float *) mem_121991.mem)[gtid_118577 *
                                                        l_n_m_114513 +
                                                        i_126764];
            int64_t min_arg_126769 = mul64(t_jump_114470, i_126764);
            int64_t min_res_126770 = smin64(i_114539, min_arg_126769);
            float defunc_0_f_res_126771 = sitofp_i64_f32(min_res_126770);
            float defunc_2_reduce_res_126774;
            float defunc_2_reduce_res_126775;
            float defunc_2_reduce_res_126776;
            float redout_126780;
            float redout_126781;
            float redout_126782;
            
            redout_126780 = 0.0F;
            redout_126781 = 0.0F;
            redout_126782 = 0.0F;
            for (int64_t i_126779 = 0; i_126779 < l_window_114467; i_126779++) {
                bool cond_126785 = sle64(n_114463, i_126779);
                float defunc_0_f_res_126786;
                
                if (cond_126785) {
                    defunc_0_f_res_126786 = 0.0F;
                } else {
                    int64_t i_126787 = add64(x_126767, i_126779);
                    float index_primexp_126788 = sitofp_i64_f32(i_126787);
                    float defunc_0_f_res_f_res_126789 = 1.0F +
                          index_primexp_126788;
                    
                    defunc_0_f_res_126786 = defunc_0_f_res_f_res_126789;
                }
                
                float defunc_0_f_res_126790;
                
                if (cond_126785) {
                    defunc_0_f_res_126790 = 0.0F;
                } else {
                    int64_t i_126791 = add64(x_126767, i_126779);
                    float x_126792 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_118577 *
                                                            ctx_param_ext_122099 +
                                                            i_126791 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_126790 = x_126792;
                }
                
                float x_j_126793 = defunc_0_f_res_126786 -
                      defunc_0_f_res_126771;
                float abs_res_126794 = (float) fabs(x_j_126793);
                float tmp1_126795 = abs_res_126794 / x_126768;
                float x_126796 = tmp1_126795 * tmp1_126795;
                float y_126797 = tmp1_126795 * x_126796;
                float tmp2_126798 = 1.0F - y_126797;
                float x_126799 = tmp2_126798 * tmp2_126798;
                float tmp3_126800 = tmp2_126798 * x_126799;
                float tmp4_126801 = defunc_0_f_res_126790 * tmp3_126800;
                float defunc_1_f_res_126802 = x_j_126793 * tmp4_126801;
                float defunc_1_f_res_126803 = x_j_126793 *
                      defunc_1_f_res_126802;
                float defunc_1_op_res_126804 = tmp4_126801 + redout_126780;
                float defunc_1_op_res_126805 = defunc_1_f_res_126802 +
                      redout_126781;
                float defunc_1_op_res_126806 = defunc_1_f_res_126803 +
                      redout_126782;
                
                ((float *) mem_122491)[i_126779] = defunc_1_f_res_126802;
                ((float *) mem_122494)[i_126779] = tmp4_126801;
                
                float redout_tmp_126844 = defunc_1_op_res_126804;
                float redout_tmp_126845 = defunc_1_op_res_126805;
                float redout_tmp_126846 = defunc_1_op_res_126806;
                
                redout_126780 = redout_tmp_126844;
                redout_126781 = redout_tmp_126845;
                redout_126782 = redout_tmp_126846;
            }
            defunc_2_reduce_res_126774 = redout_126780;
            defunc_2_reduce_res_126775 = redout_126781;
            defunc_2_reduce_res_126776 = redout_126782;
            
            float x_126809 = defunc_2_reduce_res_126774 *
                  defunc_2_reduce_res_126776;
            float y_126810 = defunc_2_reduce_res_126775 *
                  defunc_2_reduce_res_126775;
            float y_126811 = x_126809 - y_126810;
            float det1_126812 = 1.0F / y_126811;
            float a11_126813 = defunc_2_reduce_res_126776 * det1_126812;
            float negate_arg_126814 = defunc_2_reduce_res_126775 * det1_126812;
            float b11_126815 = 0.0F - negate_arg_126814;
            float c11_126816 = defunc_2_reduce_res_126774 * det1_126812;
            float defunc_2_reduce_res_126817;
            float defunc_2_reduce_res_126818;
            float redout_126820;
            float redout_126821;
            
            redout_126820 = 0.0F;
            redout_126821 = 0.0F;
            for (int64_t i_126819 = 0; i_126819 < l_window_114467; i_126819++) {
                float x_126822 = ((float *) mem_122494)[i_126819];
                float x_126823 = ((float *) mem_122491)[i_126819];
                bool cond_126824 = sle64(n_114463, i_126819);
                float defunc_0_f_res_126825;
                
                if (cond_126824) {
                    defunc_0_f_res_126825 = 0.0F;
                } else {
                    int64_t i_126826 = add64(x_126767, i_126819);
                    float x_126827 = ((float *) mem_122249.mem)[gtid_118577 *
                                                                n_114463 +
                                                                i_126826];
                    
                    defunc_0_f_res_126825 = x_126827;
                }
                
                float x_126828 = a11_126813 * x_126822;
                float y_126829 = b11_126815 * x_126823;
                float x_126830 = x_126828 + y_126829;
                float defunc_9_fit_fun_res_126831 = defunc_0_f_res_126825 *
                      x_126830;
                float x_126832 = b11_126815 * x_126822;
                float y_126833 = c11_126816 * x_126823;
                float x_126834 = x_126832 + y_126833;
                float defunc_9_slope_fun_res_126835 = defunc_0_f_res_126825 *
                      x_126834;
                float defunc_1_op_res_126836 = defunc_9_fit_fun_res_126831 +
                      redout_126820;
                float defunc_1_op_res_126837 = defunc_9_slope_fun_res_126835 +
                      redout_126821;
                float redout_tmp_126849 = defunc_1_op_res_126836;
                float redout_tmp_126850 = defunc_1_op_res_126837;
                
                redout_126820 = redout_tmp_126849;
                redout_126821 = redout_tmp_126850;
            }
            defunc_2_reduce_res_126817 = redout_126820;
            defunc_2_reduce_res_126818 = redout_126821;
            ((float *) mem_122471)[i_126764] = defunc_2_reduce_res_126817;
            ((float *) mem_122474)[i_126764] = defunc_2_reduce_res_126818;
        }
        memmove(mem_122532.mem + gtid_118577 * l_n_m_114513 * (int64_t) 4,
                mem_122471 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122536.mem + gtid_118577 * l_n_m_114513 * (int64_t) 4,
                mem_122474 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122471);
    free(mem_122474);
    free(mem_122491);
    free(mem_122494);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131266_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131266_end -
                 futhark_mc_segmap_parloop_131266_start;
        
        ctx->futhark_mc_segmap_parloop_131266_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131266_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131266_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131264(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118576 = tid;
    int num_tasks_126762 = info.nsubtasks;
    struct futhark_mc_task_131263 *futhark_mc_task_131263 =
                                  (struct futhark_mc_task_131263 *) args;
    struct futhark_context *ctx = futhark_mc_task_131263->ctx;
    uint64_t futhark_mc_segmap_task_131264_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131264_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131263->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131263->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131263->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131263->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131263->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131263->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131263->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131263->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131263->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131263->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131263->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131263->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131263->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131263->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 = futhark_mc_task_131263->free_bytes_122427;
    struct memblock mem_122532 = {.desc ="mem_122532", .mem =
                                  futhark_mc_task_131263->free_mem_122532,
                                  .size =0, .references =NULL};
    struct memblock mem_122536 = {.desc ="mem_122536", .mem =
                                  futhark_mc_task_131263->free_mem_122536,
                                  .size =0, .references =NULL};
    int64_t iter_126763;
    struct futhark_mc_segmap_parloop_struct_131265
    futhark_mc_segmap_parloop_struct_131265;
    
    futhark_mc_segmap_parloop_struct_131265.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131265.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131265.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131265.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131265.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131265.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131265.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131265.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131265.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131265.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131265.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131265.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131265.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131265.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131265.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131265.free_bytes_122427 = bytes_122427;
    futhark_mc_segmap_parloop_struct_131265.free_mem_122532 = mem_122532.mem;
    futhark_mc_segmap_parloop_struct_131265.free_mem_122536 = mem_122536.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131266_task;
    
    futhark_mc_segmap_parloop_131266_task.name =
        "futhark_mc_segmap_parloop_131266";
    futhark_mc_segmap_parloop_131266_task.fn = futhark_mc_segmap_parloop_131266;
    futhark_mc_segmap_parloop_131266_task.args =
        &futhark_mc_segmap_parloop_struct_131265;
    futhark_mc_segmap_parloop_131266_task.iterations = iterations;
    futhark_mc_segmap_parloop_131266_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131266_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131266_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131266_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131266_task);
    
    if (futhark_mc_segmap_parloop_131266_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131266_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131266_total_end -
                 futhark_mc_segmap_parloop_131266_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131266_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131266_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131266_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131264_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131264_end -
                 futhark_mc_segmap_task_131264_start;
        
        ctx->futhark_mc_segmap_task_131264_runs[tid]++;
        ctx->futhark_mc_segmap_task_131264_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131264_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131272 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122532;
    char *free_mem_122536;
};
struct futhark_mc_task_131276 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118579;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122465;
    char *free_mem_122468;
};
struct futhark_mc_segmap_parloop_struct_131278 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118579;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122465;
    char *free_mem_122468;
};
static int futhark_mc_segmap_parloop_131279(void *args, int64_t start,
                                            int64_t end, int flat_tid_118580,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131278
    *futhark_mc_segmap_parloop_struct_131278 =
    (struct futhark_mc_segmap_parloop_struct_131278 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131278->ctx;
    uint64_t futhark_mc_segmap_parloop_131279_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131279_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131278->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131278->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131278->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131278->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131278->free_i_114539;
    int64_t gtid_118579 =
            futhark_mc_segmap_parloop_struct_131278->free_gtid_118579;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131278->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131278->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131278->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131278->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131278->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131278->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131278->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 =
            futhark_mc_segmap_parloop_struct_131278->free_bytes_122427;
    struct memblock mem_122465 = {.desc ="mem_122465", .mem =
                                  futhark_mc_segmap_parloop_struct_131278->free_mem_122465,
                                  .size =0, .references =NULL};
    struct memblock mem_122468 = {.desc ="mem_122468", .mem =
                                  futhark_mc_segmap_parloop_struct_131278->free_mem_122468,
                                  .size =0, .references =NULL};
    size_t mem_126927_cached_sizze_131280 = 0;
    char *mem_126927 = NULL;
    size_t mem_126929_cached_sizze_131281 = 0;
    char *mem_126929 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126998 = start;
    
    if (mem_126927_cached_sizze_131280 < (size_t) bytes_122427) {
        mem_126927 = realloc(mem_126927, bytes_122427);
        mem_126927_cached_sizze_131280 = bytes_122427;
    }
    if (mem_126929_cached_sizze_131281 < (size_t) bytes_122427) {
        mem_126929 = realloc(mem_126929, bytes_122427);
        mem_126929_cached_sizze_131281 = bytes_122427;
    }
    for (; iter_126998 < end; iter_126998++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127048 = l_n_m_114513;
        int64_t gtid_118581 = iter_126998;
        int64_t remnant_127049 = iter_126998 - gtid_118581;
        int64_t x_126922 = ((int64_t *) mem_121987.mem)[gtid_118579 *
                                                        l_n_m_114513 +
                                                        gtid_118581];
        float x_126923 = ((float *) mem_121991.mem)[gtid_118579 * l_n_m_114513 +
                                                    gtid_118581];
        int64_t min_arg_126924 = mul64(t_jump_114470, gtid_118581);
        int64_t min_res_126925 = smin64(i_114539, min_arg_126924);
        float defunc_0_f_res_126926 = sitofp_i64_f32(min_res_126925);
        float defunc_2_reduce_res_126931;
        float defunc_2_reduce_res_126932;
        float defunc_2_reduce_res_126933;
        float redout_127000;
        float redout_127001;
        float redout_127002;
        
        redout_127000 = 0.0F;
        redout_127001 = 0.0F;
        redout_127002 = 0.0F;
        for (int64_t i_126999 = 0; i_126999 < l_window_114467; i_126999++) {
            bool cond_127005 = sle64(n_114463, i_126999);
            float defunc_0_f_res_127006;
            
            if (cond_127005) {
                defunc_0_f_res_127006 = 0.0F;
            } else {
                int64_t i_127007 = add64(x_126922, i_126999);
                float index_primexp_127008 = sitofp_i64_f32(i_127007);
                float defunc_0_f_res_f_res_127009 = 1.0F + index_primexp_127008;
                
                defunc_0_f_res_127006 = defunc_0_f_res_f_res_127009;
            }
            
            float defunc_0_f_res_127010;
            
            if (cond_127005) {
                defunc_0_f_res_127010 = 0.0F;
            } else {
                int64_t i_127011 = add64(x_126922, i_126999);
                float x_127012 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_118579 *
                                                        ctx_param_ext_122099 +
                                                        i_127011 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_127010 = x_127012;
            }
            
            float x_j_127013 = defunc_0_f_res_127006 - defunc_0_f_res_126926;
            float abs_res_127014 = (float) fabs(x_j_127013);
            float tmp1_127015 = abs_res_127014 / x_126923;
            float x_127016 = tmp1_127015 * tmp1_127015;
            float y_127017 = tmp1_127015 * x_127016;
            float tmp2_127018 = 1.0F - y_127017;
            float x_127019 = tmp2_127018 * tmp2_127018;
            float tmp3_127020 = tmp2_127018 * x_127019;
            float tmp4_127021 = defunc_0_f_res_127010 * tmp3_127020;
            float defunc_1_f_res_127022 = x_j_127013 * tmp4_127021;
            float defunc_1_f_res_127023 = x_j_127013 * defunc_1_f_res_127022;
            float defunc_1_op_res_127024 = tmp4_127021 + redout_127000;
            float defunc_1_op_res_127025 = defunc_1_f_res_127022 +
                  redout_127001;
            float defunc_1_op_res_127026 = defunc_1_f_res_127023 +
                  redout_127002;
            
            ((float *) mem_126927)[i_126999] = defunc_1_f_res_127022;
            ((float *) mem_126929)[i_126999] = tmp4_127021;
            
            float redout_tmp_127050 = defunc_1_op_res_127024;
            float redout_tmp_127051 = defunc_1_op_res_127025;
            float redout_tmp_127052 = defunc_1_op_res_127026;
            
            redout_127000 = redout_tmp_127050;
            redout_127001 = redout_tmp_127051;
            redout_127002 = redout_tmp_127052;
        }
        defunc_2_reduce_res_126931 = redout_127000;
        defunc_2_reduce_res_126932 = redout_127001;
        defunc_2_reduce_res_126933 = redout_127002;
        
        float x_126966 = defunc_2_reduce_res_126931 *
              defunc_2_reduce_res_126933;
        float y_126967 = defunc_2_reduce_res_126932 *
              defunc_2_reduce_res_126932;
        float y_126968 = x_126966 - y_126967;
        float det1_126969 = 1.0F / y_126968;
        float a11_126970 = defunc_2_reduce_res_126933 * det1_126969;
        float negate_arg_126971 = defunc_2_reduce_res_126932 * det1_126969;
        float b11_126972 = 0.0F - negate_arg_126971;
        float c11_126973 = defunc_2_reduce_res_126931 * det1_126969;
        float defunc_2_reduce_res_126974;
        float defunc_2_reduce_res_126975;
        float redout_127030;
        float redout_127031;
        
        redout_127030 = 0.0F;
        redout_127031 = 0.0F;
        for (int64_t i_127029 = 0; i_127029 < l_window_114467; i_127029++) {
            float x_127032 = ((float *) mem_126929)[i_127029];
            float x_127033 = ((float *) mem_126927)[i_127029];
            bool cond_127034 = sle64(n_114463, i_127029);
            float defunc_0_f_res_127035;
            
            if (cond_127034) {
                defunc_0_f_res_127035 = 0.0F;
            } else {
                int64_t i_127036 = add64(x_126922, i_127029);
                float x_127037 = ((float *) mem_122249.mem)[gtid_118579 *
                                                            n_114463 +
                                                            i_127036];
                
                defunc_0_f_res_127035 = x_127037;
            }
            
            float x_127038 = a11_126970 * x_127032;
            float y_127039 = b11_126972 * x_127033;
            float x_127040 = x_127038 + y_127039;
            float defunc_9_fit_fun_res_127041 = defunc_0_f_res_127035 *
                  x_127040;
            float x_127042 = b11_126972 * x_127032;
            float y_127043 = c11_126973 * x_127033;
            float x_127044 = x_127042 + y_127043;
            float defunc_9_slope_fun_res_127045 = defunc_0_f_res_127035 *
                  x_127044;
            float defunc_1_op_res_127046 = defunc_9_fit_fun_res_127041 +
                  redout_127030;
            float defunc_1_op_res_127047 = defunc_9_slope_fun_res_127045 +
                  redout_127031;
            float redout_tmp_127055 = defunc_1_op_res_127046;
            float redout_tmp_127056 = defunc_1_op_res_127047;
            
            redout_127030 = redout_tmp_127055;
            redout_127031 = redout_tmp_127056;
        }
        defunc_2_reduce_res_126974 = redout_127030;
        defunc_2_reduce_res_126975 = redout_127031;
        ((float *) mem_122465.mem)[gtid_118581] = defunc_2_reduce_res_126974;
        ((float *) mem_122468.mem)[gtid_118581] = defunc_2_reduce_res_126975;
    }
    
  cleanup:
    { }
    free(mem_126927);
    free(mem_126929);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131279_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131279_end -
                 futhark_mc_segmap_parloop_131279_start;
        
        ctx->futhark_mc_segmap_parloop_131279_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131279_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131279_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131277(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118580 = tid;
    int num_tasks_126997 = info.nsubtasks;
    struct futhark_mc_task_131276 *futhark_mc_task_131276 =
                                  (struct futhark_mc_task_131276 *) args;
    struct futhark_context *ctx = futhark_mc_task_131276->ctx;
    uint64_t futhark_mc_segmap_task_131277_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131277_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131276->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131276->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131276->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131276->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131276->free_i_114539;
    int64_t gtid_118579 = futhark_mc_task_131276->free_gtid_118579;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131276->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131276->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131276->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131276->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131276->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131276->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131276->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 = futhark_mc_task_131276->free_bytes_122427;
    struct memblock mem_122465 = {.desc ="mem_122465", .mem =
                                  futhark_mc_task_131276->free_mem_122465,
                                  .size =0, .references =NULL};
    struct memblock mem_122468 = {.desc ="mem_122468", .mem =
                                  futhark_mc_task_131276->free_mem_122468,
                                  .size =0, .references =NULL};
    int64_t iter_126998;
    struct futhark_mc_segmap_parloop_struct_131278
    futhark_mc_segmap_parloop_struct_131278;
    
    futhark_mc_segmap_parloop_struct_131278.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131278.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131278.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131278.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131278.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131278.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131278.free_gtid_118579 = gtid_118579;
    futhark_mc_segmap_parloop_struct_131278.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131278.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131278.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131278.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131278.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131278.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131278.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131278.free_bytes_122427 = bytes_122427;
    futhark_mc_segmap_parloop_struct_131278.free_mem_122465 = mem_122465.mem;
    futhark_mc_segmap_parloop_struct_131278.free_mem_122468 = mem_122468.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131279_task;
    
    futhark_mc_segmap_parloop_131279_task.name =
        "futhark_mc_segmap_parloop_131279";
    futhark_mc_segmap_parloop_131279_task.fn = futhark_mc_segmap_parloop_131279;
    futhark_mc_segmap_parloop_131279_task.args =
        &futhark_mc_segmap_parloop_struct_131278;
    futhark_mc_segmap_parloop_131279_task.iterations = iterations;
    futhark_mc_segmap_parloop_131279_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131279_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131279_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131279_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131279_task);
    
    if (futhark_mc_segmap_parloop_131279_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131279_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131279_total_end -
                 futhark_mc_segmap_parloop_131279_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131279_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131279_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131279_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131277_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131277_end -
                 futhark_mc_segmap_task_131277_start;
        
        ctx->futhark_mc_segmap_task_131277_runs[tid]++;
        ctx->futhark_mc_segmap_task_131277_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131277_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131283 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118579;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122427;
    char *free_mem_122465;
    char *free_mem_122468;
};
struct futhark_mc_task_131287 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118579;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126852;
    float free_x_126853;
    float free_defunc_0_f_res_126856;
    float *retval_defunc_2_reduce_res_126859;
    float *retval_defunc_2_reduce_res_126860;
    float *retval_defunc_2_reduce_res_126861;
    char *retval_mem_126857;
    char *retval_mem_126858;
};
struct futhark_mc_segred_stage_1_parloop_struct_131292 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118579;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_126852;
    float free_x_126853;
    float free_defunc_0_f_res_126856;
    char *free_mem_126857;
    char *free_mem_126858;
    char *free_reduce_stage_1_tid_res_arr_mem_127109;
    char *free_reduce_stage_1_tid_res_arr_mem_127111;
    char *free_reduce_stage_1_tid_res_arr_mem_127113;
};
static int futhark_mc_segred_stage_1_parloop_131293(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118584,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131292
    *futhark_mc_segred_stage_1_parloop_struct_131292 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131292 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131292->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131293_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131293_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_n_114463;
    int64_t gtid_118579 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_gtid_118579;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_131292->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126852 =
            futhark_mc_segred_stage_1_parloop_struct_131292->free_x_126852;
    float x_126853 =
          futhark_mc_segred_stage_1_parloop_struct_131292->free_x_126853;
    float defunc_0_f_res_126856 =
          futhark_mc_segred_stage_1_parloop_struct_131292->free_defunc_0_f_res_126856;
    struct memblock mem_126857 = {.desc ="mem_126857", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131292->free_mem_126857,
                                  .size =0, .references =NULL};
    struct memblock mem_126858 = {.desc ="mem_126858", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131292->free_mem_126858,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127109 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127109",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131292->free_reduce_stage_1_tid_res_arr_mem_127109,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127111 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127111",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131292->free_reduce_stage_1_tid_res_arr_mem_127111,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127113 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127113",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131292->free_reduce_stage_1_tid_res_arr_mem_127113,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127115 = start;
    float x_127058;
    float x_127059;
    float x_127061;
    float x_127062;
    float x_127064;
    float x_127065;
    float local_acc_127116 = 0.0F;
    float local_acc_127117 = 0.0F;
    float local_acc_127118 = 0.0F;
    
    for (; iter_127115 < end; iter_127115++) {
        int64_t gtid_118585 = iter_127115;
        bool cond_127067 = sle64(n_114463, gtid_118585);
        float defunc_0_f_res_127068;
        
        if (cond_127067) {
            defunc_0_f_res_127068 = 0.0F;
        } else {
            int64_t i_127069 = add64(gtid_118585, x_126852);
            float index_primexp_127070 = sitofp_i64_f32(i_127069);
            float defunc_0_f_res_f_res_127071 = 1.0F + index_primexp_127070;
            
            defunc_0_f_res_127068 = defunc_0_f_res_f_res_127071;
        }
        
        float defunc_0_f_res_127072;
        
        if (cond_127067) {
            defunc_0_f_res_127072 = 0.0F;
        } else {
            int64_t i_127073 = add64(gtid_118585, x_126852);
            float x_127074 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_118579 *
                                                    ctx_param_ext_122099 +
                                                    i_127073 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_127072 = x_127074;
        }
        
        float x_j_127075 = defunc_0_f_res_127068 - defunc_0_f_res_126856;
        float abs_res_127076 = (float) fabs(x_j_127075);
        float tmp1_127077 = abs_res_127076 / x_126853;
        float x_127078 = tmp1_127077 * tmp1_127077;
        float y_127079 = tmp1_127077 * x_127078;
        float tmp2_127080 = 1.0F - y_127079;
        float x_127081 = tmp2_127080 * tmp2_127080;
        float tmp3_127082 = tmp2_127080 * x_127081;
        float tmp4_127083 = defunc_0_f_res_127072 * tmp3_127082;
        float defunc_1_f_res_127084 = x_j_127075 * tmp4_127083;
        float defunc_1_f_res_127085 = x_j_127075 * defunc_1_f_res_127084;
        
        // save map-out results
        {
            ((float *) mem_126857.mem)[gtid_118585] = defunc_1_f_res_127084;
            ((float *) mem_126858.mem)[gtid_118585] = tmp4_127083;
        }
        // Load accum params
        {
            x_127058 = local_acc_127116;
        }
        // Load next params
        {
            x_127059 = tmp4_127083;
        }
        // Red body
        {
            float defunc_1_op_res_127060 = x_127058 + x_127059;
            
            local_acc_127116 = defunc_1_op_res_127060;
        }
        // Load accum params
        {
            x_127061 = local_acc_127117;
        }
        // Load next params
        {
            x_127062 = defunc_1_f_res_127084;
        }
        // Red body
        {
            float defunc_1_op_res_127063 = x_127061 + x_127062;
            
            local_acc_127117 = defunc_1_op_res_127063;
        }
        // Load accum params
        {
            x_127064 = local_acc_127118;
        }
        // Load next params
        {
            x_127065 = defunc_1_f_res_127085;
        }
        // Red body
        {
            float defunc_1_op_res_127066 = x_127064 + x_127065;
            
            local_acc_127118 = defunc_1_op_res_127066;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127109.mem)[flat_tid_118584] =
        local_acc_127116;
    ((float *) reduce_stage_1_tid_res_arr_mem_127111.mem)[flat_tid_118584] =
        local_acc_127117;
    ((float *) reduce_stage_1_tid_res_arr_mem_127113.mem)[flat_tid_118584] =
        local_acc_127118;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131293_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131293_end -
                 futhark_mc_segred_stage_1_parloop_131293_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131293_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131293_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131293_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131288(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118584 = tid;
    int num_tasks_127108 = info.nsubtasks;
    struct futhark_mc_task_131287 *futhark_mc_task_131287 =
                                  (struct futhark_mc_task_131287 *) args;
    struct futhark_context *ctx = futhark_mc_task_131287->ctx;
    uint64_t futhark_mc_segred_task_131288_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131288_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131287->free_n_114463;
    int64_t gtid_118579 = futhark_mc_task_131287->free_gtid_118579;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131287->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131287->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131287->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131287->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_126852 = futhark_mc_task_131287->free_x_126852;
    float x_126853 = futhark_mc_task_131287->free_x_126853;
    float defunc_0_f_res_126856 =
          futhark_mc_task_131287->free_defunc_0_f_res_126856;
    float defunc_2_reduce_res_126859 =
          *futhark_mc_task_131287->retval_defunc_2_reduce_res_126859;
    float defunc_2_reduce_res_126860 =
          *futhark_mc_task_131287->retval_defunc_2_reduce_res_126860;
    float defunc_2_reduce_res_126861 =
          *futhark_mc_task_131287->retval_defunc_2_reduce_res_126861;
    struct memblock mem_126857 = {.desc ="mem_126857", .mem =
                                  futhark_mc_task_131287->retval_mem_126857,
                                  .size =0, .references =NULL};
    struct memblock mem_126858 = {.desc ="mem_126858", .mem =
                                  futhark_mc_task_131287->retval_mem_126858,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127109_cached_sizze_131289 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127109 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127111_cached_sizze_131290 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127111 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127113_cached_sizze_131291 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127113 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127109_cached_sizze_131289 <
        (size_t) ((int64_t) 4 * num_tasks_127108)) {
        reduce_stage_1_tid_res_arr_mem_127109 =
            realloc(reduce_stage_1_tid_res_arr_mem_127109, (int64_t) 4 *
                    num_tasks_127108);
        reduce_stage_1_tid_res_arr_mem_127109_cached_sizze_131289 =
            (int64_t) 4 * num_tasks_127108;
    }
    if (reduce_stage_1_tid_res_arr_mem_127111_cached_sizze_131290 <
        (size_t) ((int64_t) 4 * num_tasks_127108)) {
        reduce_stage_1_tid_res_arr_mem_127111 =
            realloc(reduce_stage_1_tid_res_arr_mem_127111, (int64_t) 4 *
                    num_tasks_127108);
        reduce_stage_1_tid_res_arr_mem_127111_cached_sizze_131290 =
            (int64_t) 4 * num_tasks_127108;
    }
    if (reduce_stage_1_tid_res_arr_mem_127113_cached_sizze_131291 <
        (size_t) ((int64_t) 4 * num_tasks_127108)) {
        reduce_stage_1_tid_res_arr_mem_127113 =
            realloc(reduce_stage_1_tid_res_arr_mem_127113, (int64_t) 4 *
                    num_tasks_127108);
        reduce_stage_1_tid_res_arr_mem_127113_cached_sizze_131291 =
            (int64_t) 4 * num_tasks_127108;
    }
    
    int64_t iter_127115;
    struct futhark_mc_segred_stage_1_parloop_struct_131292
    futhark_mc_segred_stage_1_parloop_struct_131292;
    
    futhark_mc_segred_stage_1_parloop_struct_131292.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_gtid_118579 =
        gtid_118579;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_x_126852 = x_126852;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_x_126853 = x_126853;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_defunc_0_f_res_126856 =
        defunc_0_f_res_126856;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_mem_126857 =
        mem_126857.mem;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_mem_126858 =
        mem_126858.mem;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_reduce_stage_1_tid_res_arr_mem_127109 =
        reduce_stage_1_tid_res_arr_mem_127109;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_reduce_stage_1_tid_res_arr_mem_127111 =
        reduce_stage_1_tid_res_arr_mem_127111;
    futhark_mc_segred_stage_1_parloop_struct_131292.free_reduce_stage_1_tid_res_arr_mem_127113 =
        reduce_stage_1_tid_res_arr_mem_127113;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131293_task;
    
    futhark_mc_segred_stage_1_parloop_131293_task.name =
        "futhark_mc_segred_stage_1_parloop_131293";
    futhark_mc_segred_stage_1_parloop_131293_task.fn =
        futhark_mc_segred_stage_1_parloop_131293;
    futhark_mc_segred_stage_1_parloop_131293_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131292;
    futhark_mc_segred_stage_1_parloop_131293_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131293_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131293_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131293_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131293_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131293_task);
    
    if (futhark_mc_segred_stage_1_parloop_131293_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131293_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131293_total_end -
                 futhark_mc_segred_stage_1_parloop_131293_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131293_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131293_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131293_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126859 = 0.0F;
        defunc_2_reduce_res_126860 = 0.0F;
        defunc_2_reduce_res_126861 = 0.0F;
    }
    
    float x_127119;
    float x_127120;
    float x_127122;
    float x_127123;
    float x_127125;
    float x_127126;
    
    for (int32_t i_127128 = 0; i_127128 < num_tasks_127108; i_127128++) {
        flat_tid_118584 = i_127128;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127119 = defunc_2_reduce_res_126859;
            }
            // load next params
            {
                x_127120 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127109)[flat_tid_118584];
            }
            // red body
            {
                float defunc_1_op_res_127121 = x_127119 + x_127120;
                
                defunc_2_reduce_res_126859 = defunc_1_op_res_127121;
            }
            // load acc params
            {
                x_127122 = defunc_2_reduce_res_126860;
            }
            // load next params
            {
                x_127123 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127111)[flat_tid_118584];
            }
            // red body
            {
                float defunc_1_op_res_127124 = x_127122 + x_127123;
                
                defunc_2_reduce_res_126860 = defunc_1_op_res_127124;
            }
            // load acc params
            {
                x_127125 = defunc_2_reduce_res_126861;
            }
            // load next params
            {
                x_127126 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127113)[flat_tid_118584];
            }
            // red body
            {
                float defunc_1_op_res_127127 = x_127125 + x_127126;
                
                defunc_2_reduce_res_126861 = defunc_1_op_res_127127;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127109);
    free(reduce_stage_1_tid_res_arr_mem_127111);
    free(reduce_stage_1_tid_res_arr_mem_127113);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131288_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131288_end -
                 futhark_mc_segred_task_131288_start;
        
        ctx->futhark_mc_segred_task_131288_runs[tid]++;
        ctx->futhark_mc_segred_task_131288_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131288_iter[tid] += iterations;
    }
    *futhark_mc_task_131287->retval_defunc_2_reduce_res_126859 =
        defunc_2_reduce_res_126859;
    *futhark_mc_task_131287->retval_defunc_2_reduce_res_126860 =
        defunc_2_reduce_res_126860;
    *futhark_mc_task_131287->retval_defunc_2_reduce_res_126861 =
        defunc_2_reduce_res_126861;
    futhark_mc_task_131287->retval_mem_126857 = mem_126857.mem;
    futhark_mc_task_131287->retval_mem_126858 = mem_126858.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131294 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118579;
    char *free_mem_122249;
    int64_t free_x_126852;
    char *free_mem_126857;
    char *free_mem_126858;
    float free_a11_126896;
    float free_b11_126898;
    float free_c11_126899;
    float *retval_defunc_2_reduce_res_126900;
    float *retval_defunc_2_reduce_res_126901;
};
struct futhark_mc_segred_stage_1_parloop_struct_131298 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118579;
    char *free_mem_122249;
    int64_t free_x_126852;
    char *free_mem_126857;
    char *free_mem_126858;
    float free_a11_126896;
    float free_b11_126898;
    float free_c11_126899;
    char *free_reduce_stage_1_tid_res_arr_mem_127130;
    char *free_reduce_stage_1_tid_res_arr_mem_127132;
};
static int futhark_mc_segred_stage_1_parloop_131299(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118586,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131298
    *futhark_mc_segred_stage_1_parloop_struct_131298 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131298 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131298->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131299_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131299_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131298->free_n_114463;
    int64_t gtid_118579 =
            futhark_mc_segred_stage_1_parloop_struct_131298->free_gtid_118579;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131298->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126852 =
            futhark_mc_segred_stage_1_parloop_struct_131298->free_x_126852;
    struct memblock mem_126857 = {.desc ="mem_126857", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131298->free_mem_126857,
                                  .size =0, .references =NULL};
    struct memblock mem_126858 = {.desc ="mem_126858", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131298->free_mem_126858,
                                  .size =0, .references =NULL};
    float a11_126896 =
          futhark_mc_segred_stage_1_parloop_struct_131298->free_a11_126896;
    float b11_126898 =
          futhark_mc_segred_stage_1_parloop_struct_131298->free_b11_126898;
    float c11_126899 =
          futhark_mc_segred_stage_1_parloop_struct_131298->free_c11_126899;
    struct memblock reduce_stage_1_tid_res_arr_mem_127130 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127130",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131298->free_reduce_stage_1_tid_res_arr_mem_127130,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127132 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127132",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131298->free_reduce_stage_1_tid_res_arr_mem_127132,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127134 = start;
    float x_127086;
    float x_127087;
    float x_127089;
    float x_127090;
    float local_acc_127135 = 0.0F;
    float local_acc_127136 = 0.0F;
    
    for (; iter_127134 < end; iter_127134++) {
        int64_t gtid_118587 = iter_127134;
        float x_127092 = ((float *) mem_126858.mem)[gtid_118587];
        float x_127093 = ((float *) mem_126857.mem)[gtid_118587];
        bool cond_127094 = sle64(n_114463, gtid_118587);
        float defunc_0_f_res_127095;
        
        if (cond_127094) {
            defunc_0_f_res_127095 = 0.0F;
        } else {
            int64_t i_127096 = add64(gtid_118587, x_126852);
            float x_127097 = ((float *) mem_122249.mem)[gtid_118579 * n_114463 +
                                                        i_127096];
            
            defunc_0_f_res_127095 = x_127097;
        }
        
        float x_127098 = a11_126896 * x_127092;
        float y_127099 = b11_126898 * x_127093;
        float x_127100 = x_127098 + y_127099;
        float defunc_9_fit_fun_res_127101 = defunc_0_f_res_127095 * x_127100;
        float x_127102 = b11_126898 * x_127092;
        float y_127103 = c11_126899 * x_127093;
        float x_127104 = x_127102 + y_127103;
        float defunc_9_slope_fun_res_127105 = defunc_0_f_res_127095 * x_127104;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127086 = local_acc_127135;
        }
        // Load next params
        {
            x_127087 = defunc_9_fit_fun_res_127101;
        }
        // Red body
        {
            float defunc_1_op_res_127088 = x_127086 + x_127087;
            
            local_acc_127135 = defunc_1_op_res_127088;
        }
        // Load accum params
        {
            x_127089 = local_acc_127136;
        }
        // Load next params
        {
            x_127090 = defunc_9_slope_fun_res_127105;
        }
        // Red body
        {
            float defunc_1_op_res_127091 = x_127089 + x_127090;
            
            local_acc_127136 = defunc_1_op_res_127091;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127130.mem)[flat_tid_118586] =
        local_acc_127135;
    ((float *) reduce_stage_1_tid_res_arr_mem_127132.mem)[flat_tid_118586] =
        local_acc_127136;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131299_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131299_end -
                 futhark_mc_segred_stage_1_parloop_131299_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131299_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131299_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131299_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131295(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118586 = tid;
    int num_tasks_127129 = info.nsubtasks;
    struct futhark_mc_task_131294 *futhark_mc_task_131294 =
                                  (struct futhark_mc_task_131294 *) args;
    struct futhark_context *ctx = futhark_mc_task_131294->ctx;
    uint64_t futhark_mc_segred_task_131295_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131295_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131294->free_n_114463;
    int64_t gtid_118579 = futhark_mc_task_131294->free_gtid_118579;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131294->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_126852 = futhark_mc_task_131294->free_x_126852;
    struct memblock mem_126857 = {.desc ="mem_126857", .mem =
                                  futhark_mc_task_131294->free_mem_126857,
                                  .size =0, .references =NULL};
    struct memblock mem_126858 = {.desc ="mem_126858", .mem =
                                  futhark_mc_task_131294->free_mem_126858,
                                  .size =0, .references =NULL};
    float a11_126896 = futhark_mc_task_131294->free_a11_126896;
    float b11_126898 = futhark_mc_task_131294->free_b11_126898;
    float c11_126899 = futhark_mc_task_131294->free_c11_126899;
    float defunc_2_reduce_res_126900 =
          *futhark_mc_task_131294->retval_defunc_2_reduce_res_126900;
    float defunc_2_reduce_res_126901 =
          *futhark_mc_task_131294->retval_defunc_2_reduce_res_126901;
    size_t reduce_stage_1_tid_res_arr_mem_127130_cached_sizze_131296 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127130 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127132_cached_sizze_131297 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127132 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127130_cached_sizze_131296 <
        (size_t) ((int64_t) 4 * num_tasks_127129)) {
        reduce_stage_1_tid_res_arr_mem_127130 =
            realloc(reduce_stage_1_tid_res_arr_mem_127130, (int64_t) 4 *
                    num_tasks_127129);
        reduce_stage_1_tid_res_arr_mem_127130_cached_sizze_131296 =
            (int64_t) 4 * num_tasks_127129;
    }
    if (reduce_stage_1_tid_res_arr_mem_127132_cached_sizze_131297 <
        (size_t) ((int64_t) 4 * num_tasks_127129)) {
        reduce_stage_1_tid_res_arr_mem_127132 =
            realloc(reduce_stage_1_tid_res_arr_mem_127132, (int64_t) 4 *
                    num_tasks_127129);
        reduce_stage_1_tid_res_arr_mem_127132_cached_sizze_131297 =
            (int64_t) 4 * num_tasks_127129;
    }
    
    int64_t iter_127134;
    struct futhark_mc_segred_stage_1_parloop_struct_131298
    futhark_mc_segred_stage_1_parloop_struct_131298;
    
    futhark_mc_segred_stage_1_parloop_struct_131298.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_gtid_118579 =
        gtid_118579;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_x_126852 = x_126852;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_mem_126857 =
        mem_126857.mem;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_mem_126858 =
        mem_126858.mem;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_a11_126896 =
        a11_126896;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_b11_126898 =
        b11_126898;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_c11_126899 =
        c11_126899;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_reduce_stage_1_tid_res_arr_mem_127130 =
        reduce_stage_1_tid_res_arr_mem_127130;
    futhark_mc_segred_stage_1_parloop_struct_131298.free_reduce_stage_1_tid_res_arr_mem_127132 =
        reduce_stage_1_tid_res_arr_mem_127132;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131299_task;
    
    futhark_mc_segred_stage_1_parloop_131299_task.name =
        "futhark_mc_segred_stage_1_parloop_131299";
    futhark_mc_segred_stage_1_parloop_131299_task.fn =
        futhark_mc_segred_stage_1_parloop_131299;
    futhark_mc_segred_stage_1_parloop_131299_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131298;
    futhark_mc_segred_stage_1_parloop_131299_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131299_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131299_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131299_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131299_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131299_task);
    
    if (futhark_mc_segred_stage_1_parloop_131299_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131299_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131299_total_end -
                 futhark_mc_segred_stage_1_parloop_131299_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131299_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131299_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131299_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126900 = 0.0F;
        defunc_2_reduce_res_126901 = 0.0F;
    }
    
    float x_127137;
    float x_127138;
    float x_127140;
    float x_127141;
    
    for (int32_t i_127143 = 0; i_127143 < num_tasks_127129; i_127143++) {
        flat_tid_118586 = i_127143;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127137 = defunc_2_reduce_res_126900;
            }
            // load next params
            {
                x_127138 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127130)[flat_tid_118586];
            }
            // red body
            {
                float defunc_1_op_res_127139 = x_127137 + x_127138;
                
                defunc_2_reduce_res_126900 = defunc_1_op_res_127139;
            }
            // load acc params
            {
                x_127140 = defunc_2_reduce_res_126901;
            }
            // load next params
            {
                x_127141 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127132)[flat_tid_118586];
            }
            // red body
            {
                float defunc_1_op_res_127142 = x_127140 + x_127141;
                
                defunc_2_reduce_res_126901 = defunc_1_op_res_127142;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127130);
    free(reduce_stage_1_tid_res_arr_mem_127132);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131295_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131295_end -
                 futhark_mc_segred_task_131295_start;
        
        ctx->futhark_mc_segred_task_131295_runs[tid]++;
        ctx->futhark_mc_segred_task_131295_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131295_iter[tid] += iterations;
    }
    *futhark_mc_task_131294->retval_defunc_2_reduce_res_126900 =
        defunc_2_reduce_res_126900;
    *futhark_mc_task_131294->retval_defunc_2_reduce_res_126901 =
        defunc_2_reduce_res_126901;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131284(void *args, int64_t start,
                                            int64_t end, int flat_tid_118582,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131283
    *futhark_mc_segmap_parloop_struct_131283 =
    (struct futhark_mc_segmap_parloop_struct_131283 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131283->ctx;
    uint64_t futhark_mc_segmap_parloop_131284_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131284_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131283->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131283->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131283->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131283->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131283->free_i_114539;
    int64_t gtid_118579 =
            futhark_mc_segmap_parloop_struct_131283->free_gtid_118579;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131283->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131283->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131283->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131283->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131283->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131283->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131283->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 =
            futhark_mc_segmap_parloop_struct_131283->free_bytes_122427;
    struct memblock mem_122465 = {.desc ="mem_122465", .mem =
                                  futhark_mc_segmap_parloop_struct_131283->free_mem_122465,
                                  .size =0, .references =NULL};
    struct memblock mem_122468 = {.desc ="mem_122468", .mem =
                                  futhark_mc_segmap_parloop_struct_131283->free_mem_122468,
                                  .size =0, .references =NULL};
    size_t mem_126857_cached_sizze_131285 = 0;
    char *mem_126857 = NULL;
    size_t mem_126858_cached_sizze_131286 = 0;
    char *mem_126858 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127057 = start;
    
    if (mem_126857_cached_sizze_131285 < (size_t) bytes_122427) {
        mem_126857 = realloc(mem_126857, bytes_122427);
        mem_126857_cached_sizze_131285 = bytes_122427;
    }
    if (mem_126858_cached_sizze_131286 < (size_t) bytes_122427) {
        mem_126858 = realloc(mem_126858, bytes_122427);
        mem_126858_cached_sizze_131286 = bytes_122427;
    }
    for (; iter_127057 < end; iter_127057++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127106 = l_n_m_114513;
        int64_t gtid_118583 = iter_127057;
        int64_t remnant_127107 = iter_127057 - gtid_118583;
        int64_t x_126852 = ((int64_t *) mem_121987.mem)[gtid_118579 *
                                                        l_n_m_114513 +
                                                        gtid_118583];
        float x_126853 = ((float *) mem_121991.mem)[gtid_118579 * l_n_m_114513 +
                                                    gtid_118583];
        int64_t min_arg_126854 = mul64(t_jump_114470, gtid_118583);
        int64_t min_res_126855 = smin64(i_114539, min_arg_126854);
        float defunc_0_f_res_126856 = sitofp_i64_f32(min_res_126855);
        float defunc_2_reduce_res_126859;
        float defunc_2_reduce_res_126860;
        float defunc_2_reduce_res_126861;
        int64_t flat_tid_118584 = (int64_t) 0;
        int32_t num_tasks_127108;
        struct futhark_mc_task_131287 futhark_mc_task_131287;
        
        futhark_mc_task_131287.ctx = ctx;
        futhark_mc_task_131287.free_n_114463 = n_114463;
        futhark_mc_task_131287.free_gtid_118579 = gtid_118579;
        futhark_mc_task_131287.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131287.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131287.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131287.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131287.free_x_126852 = x_126852;
        futhark_mc_task_131287.free_x_126853 = x_126853;
        futhark_mc_task_131287.free_defunc_0_f_res_126856 =
            defunc_0_f_res_126856;
        futhark_mc_task_131287.retval_defunc_2_reduce_res_126859 =
            &defunc_2_reduce_res_126859;
        futhark_mc_task_131287.retval_defunc_2_reduce_res_126860 =
            &defunc_2_reduce_res_126860;
        futhark_mc_task_131287.retval_defunc_2_reduce_res_126861 =
            &defunc_2_reduce_res_126861;
        futhark_mc_task_131287.retval_mem_126857 = mem_126857;
        futhark_mc_task_131287.retval_mem_126858 = mem_126858;
        
        struct scheduler_segop futhark_mc_task_131287_task;
        
        futhark_mc_task_131287_task.args = &futhark_mc_task_131287;
        futhark_mc_task_131287_task.top_level_fn =
            futhark_mc_segred_task_131288;
        futhark_mc_task_131287_task.name = "futhark_mc_segred_task_131288";
        futhark_mc_task_131287_task.iterations = l_window_114467;
        futhark_mc_task_131287_task.task_time =
            &ctx->futhark_mc_segred_task_131288_total_time;
        futhark_mc_task_131287_task.task_iter =
            &ctx->futhark_mc_segred_task_131288_total_iter;
        futhark_mc_task_131287_task.sched = STATIC;
        futhark_mc_task_131287_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131288_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131287_task);
        
        if (futhark_mc_segred_task_131288_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126892 = defunc_2_reduce_res_126859 *
              defunc_2_reduce_res_126861;
        float y_126893 = defunc_2_reduce_res_126860 *
              defunc_2_reduce_res_126860;
        float y_126894 = x_126892 - y_126893;
        float det1_126895 = 1.0F / y_126894;
        float a11_126896 = defunc_2_reduce_res_126861 * det1_126895;
        float negate_arg_126897 = defunc_2_reduce_res_126860 * det1_126895;
        float b11_126898 = 0.0F - negate_arg_126897;
        float c11_126899 = defunc_2_reduce_res_126859 * det1_126895;
        float defunc_2_reduce_res_126900;
        float defunc_2_reduce_res_126901;
        int64_t flat_tid_118586 = (int64_t) 0;
        int32_t num_tasks_127129;
        struct futhark_mc_task_131294 futhark_mc_task_131294;
        
        futhark_mc_task_131294.ctx = ctx;
        futhark_mc_task_131294.free_n_114463 = n_114463;
        futhark_mc_task_131294.free_gtid_118579 = gtid_118579;
        futhark_mc_task_131294.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131294.free_x_126852 = x_126852;
        futhark_mc_task_131294.free_mem_126857 = mem_126857;
        futhark_mc_task_131294.free_mem_126858 = mem_126858;
        futhark_mc_task_131294.free_a11_126896 = a11_126896;
        futhark_mc_task_131294.free_b11_126898 = b11_126898;
        futhark_mc_task_131294.free_c11_126899 = c11_126899;
        futhark_mc_task_131294.retval_defunc_2_reduce_res_126900 =
            &defunc_2_reduce_res_126900;
        futhark_mc_task_131294.retval_defunc_2_reduce_res_126901 =
            &defunc_2_reduce_res_126901;
        
        struct scheduler_segop futhark_mc_task_131294_task;
        
        futhark_mc_task_131294_task.args = &futhark_mc_task_131294;
        futhark_mc_task_131294_task.top_level_fn =
            futhark_mc_segred_task_131295;
        futhark_mc_task_131294_task.name = "futhark_mc_segred_task_131295";
        futhark_mc_task_131294_task.iterations = l_window_114467;
        futhark_mc_task_131294_task.task_time =
            &ctx->futhark_mc_segred_task_131295_total_time;
        futhark_mc_task_131294_task.task_iter =
            &ctx->futhark_mc_segred_task_131295_total_iter;
        futhark_mc_task_131294_task.sched = STATIC;
        futhark_mc_task_131294_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131295_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131294_task);
        
        if (futhark_mc_segred_task_131295_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122465.mem)[gtid_118583] = defunc_2_reduce_res_126900;
        ((float *) mem_122468.mem)[gtid_118583] = defunc_2_reduce_res_126901;
    }
    
  cleanup:
    { }
    free(mem_126857);
    free(mem_126858);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131284_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131284_end -
                 futhark_mc_segmap_parloop_131284_start;
        
        ctx->futhark_mc_segmap_parloop_131284_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131284_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131284_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131282(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118582 = tid;
    int num_tasks_126997 = info.nsubtasks;
    struct futhark_mc_task_131276 *futhark_mc_task_131276 =
                                  (struct futhark_mc_task_131276 *) args;
    struct futhark_context *ctx = futhark_mc_task_131276->ctx;
    uint64_t futhark_mc_segmap_nested_task_131282_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131282_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131276->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131276->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131276->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131276->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131276->free_i_114539;
    int64_t gtid_118579 = futhark_mc_task_131276->free_gtid_118579;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131276->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131276->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131276->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131276->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131276->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131276->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131276->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 = futhark_mc_task_131276->free_bytes_122427;
    struct memblock mem_122465 = {.desc ="mem_122465", .mem =
                                  futhark_mc_task_131276->free_mem_122465,
                                  .size =0, .references =NULL};
    struct memblock mem_122468 = {.desc ="mem_122468", .mem =
                                  futhark_mc_task_131276->free_mem_122468,
                                  .size =0, .references =NULL};
    int64_t iter_127057;
    struct futhark_mc_segmap_parloop_struct_131283
    futhark_mc_segmap_parloop_struct_131283;
    
    futhark_mc_segmap_parloop_struct_131283.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131283.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131283.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131283.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131283.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131283.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131283.free_gtid_118579 = gtid_118579;
    futhark_mc_segmap_parloop_struct_131283.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131283.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131283.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131283.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131283.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131283.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131283.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131283.free_bytes_122427 = bytes_122427;
    futhark_mc_segmap_parloop_struct_131283.free_mem_122465 = mem_122465.mem;
    futhark_mc_segmap_parloop_struct_131283.free_mem_122468 = mem_122468.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131284_task;
    
    futhark_mc_segmap_parloop_131284_task.name =
        "futhark_mc_segmap_parloop_131284";
    futhark_mc_segmap_parloop_131284_task.fn = futhark_mc_segmap_parloop_131284;
    futhark_mc_segmap_parloop_131284_task.args =
        &futhark_mc_segmap_parloop_struct_131283;
    futhark_mc_segmap_parloop_131284_task.iterations = iterations;
    futhark_mc_segmap_parloop_131284_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131284_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131284_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131284_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131284_task);
    
    if (futhark_mc_segmap_parloop_131284_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131284_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131284_total_end -
                 futhark_mc_segmap_parloop_131284_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131284_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131284_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131284_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131282_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131282_end -
                 futhark_mc_segmap_nested_task_131282_start;
        
        ctx->futhark_mc_segmap_nested_task_131282_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131282_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131282_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131273(void *args, int64_t start,
                                            int64_t end, int flat_tid_118578,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131272
    *futhark_mc_segmap_parloop_struct_131272 =
    (struct futhark_mc_segmap_parloop_struct_131272 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131272->ctx;
    uint64_t futhark_mc_segmap_parloop_131273_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131273_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131272->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131272->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131272->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131272->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131272->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131272->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131272->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131272->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131272->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131272->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131272->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131272->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131272->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131272->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 =
            futhark_mc_segmap_parloop_struct_131272->free_bytes_122427;
    struct memblock mem_122532 = {.desc ="mem_122532", .mem =
                                  futhark_mc_segmap_parloop_struct_131272->free_mem_122532,
                                  .size =0, .references =NULL};
    struct memblock mem_122536 = {.desc ="mem_122536", .mem =
                                  futhark_mc_segmap_parloop_struct_131272->free_mem_122536,
                                  .size =0, .references =NULL};
    size_t mem_122465_cached_sizze_131274 = 0;
    char *mem_122465 = NULL;
    size_t mem_122468_cached_sizze_131275 = 0;
    char *mem_122468 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126851 = start;
    
    if (mem_122465_cached_sizze_131274 < (size_t) bytes_121918) {
        mem_122465 = realloc(mem_122465, bytes_121918);
        mem_122465_cached_sizze_131274 = bytes_121918;
    }
    if (mem_122468_cached_sizze_131275 < (size_t) bytes_121918) {
        mem_122468 = realloc(mem_122468, bytes_121918);
        mem_122468_cached_sizze_131275 = bytes_121918;
    }
    for (; iter_126851 < end; iter_126851++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126995 = m_114462;
        int64_t gtid_118579 = iter_126851;
        int64_t remnant_126996 = iter_126851 - gtid_118579;
        int64_t flat_tid_118580 = (int64_t) 0;
        int32_t num_tasks_126997;
        int64_t flat_tid_118582 = (int64_t) 0;
        struct futhark_mc_task_131276 futhark_mc_task_131276;
        
        futhark_mc_task_131276.ctx = ctx;
        futhark_mc_task_131276.free_n_114463 = n_114463;
        futhark_mc_task_131276.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131276.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131276.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131276.free_i_114539 = i_114539;
        futhark_mc_task_131276.free_gtid_118579 = gtid_118579;
        futhark_mc_task_131276.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131276.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131276.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131276.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131276.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131276.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131276.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131276.free_bytes_122427 = bytes_122427;
        futhark_mc_task_131276.free_mem_122465 = mem_122465;
        futhark_mc_task_131276.free_mem_122468 = mem_122468;
        
        struct scheduler_segop futhark_mc_task_131276_task;
        
        futhark_mc_task_131276_task.args = &futhark_mc_task_131276;
        futhark_mc_task_131276_task.top_level_fn =
            futhark_mc_segmap_task_131277;
        futhark_mc_task_131276_task.name = "futhark_mc_segmap_task_131277";
        futhark_mc_task_131276_task.iterations = l_n_m_114513;
        futhark_mc_task_131276_task.task_time =
            &ctx->futhark_mc_segmap_task_131277_total_time;
        futhark_mc_task_131276_task.task_iter =
            &ctx->futhark_mc_segmap_task_131277_total_iter;
        futhark_mc_task_131276_task.sched = STATIC;
        futhark_mc_task_131276_task.nested_fn =
            futhark_mc_segmap_nested_task_131282;
        
        int futhark_mc_segmap_task_131277_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131276_task);
        
        if (futhark_mc_segmap_task_131277_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122532.mem + gtid_118579 * l_n_m_114513 * (int64_t) 4,
                mem_122465 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122536.mem + gtid_118579 * l_n_m_114513 * (int64_t) 4,
                mem_122468 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122465);
    free(mem_122468);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131273_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131273_end -
                 futhark_mc_segmap_parloop_131273_start;
        
        ctx->futhark_mc_segmap_parloop_131273_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131273_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131273_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131271(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118578 = tid;
    int num_tasks_126762 = info.nsubtasks;
    struct futhark_mc_task_131263 *futhark_mc_task_131263 =
                                  (struct futhark_mc_task_131263 *) args;
    struct futhark_context *ctx = futhark_mc_task_131263->ctx;
    uint64_t futhark_mc_segmap_nested_task_131271_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131271_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131263->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131263->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131263->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131263->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131263->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131263->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131263->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131263->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131263->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131263->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131263->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131263->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131263->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131263->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122427 = futhark_mc_task_131263->free_bytes_122427;
    struct memblock mem_122532 = {.desc ="mem_122532", .mem =
                                  futhark_mc_task_131263->free_mem_122532,
                                  .size =0, .references =NULL};
    struct memblock mem_122536 = {.desc ="mem_122536", .mem =
                                  futhark_mc_task_131263->free_mem_122536,
                                  .size =0, .references =NULL};
    int64_t iter_126851;
    struct futhark_mc_segmap_parloop_struct_131272
    futhark_mc_segmap_parloop_struct_131272;
    
    futhark_mc_segmap_parloop_struct_131272.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131272.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131272.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131272.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131272.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131272.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131272.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131272.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131272.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131272.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131272.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131272.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131272.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131272.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131272.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131272.free_bytes_122427 = bytes_122427;
    futhark_mc_segmap_parloop_struct_131272.free_mem_122532 = mem_122532.mem;
    futhark_mc_segmap_parloop_struct_131272.free_mem_122536 = mem_122536.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131273_task;
    
    futhark_mc_segmap_parloop_131273_task.name =
        "futhark_mc_segmap_parloop_131273";
    futhark_mc_segmap_parloop_131273_task.fn = futhark_mc_segmap_parloop_131273;
    futhark_mc_segmap_parloop_131273_task.args =
        &futhark_mc_segmap_parloop_struct_131272;
    futhark_mc_segmap_parloop_131273_task.iterations = iterations;
    futhark_mc_segmap_parloop_131273_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131273_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131273_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131273_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131273_task);
    
    if (futhark_mc_segmap_parloop_131273_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131273_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131273_total_end -
                 futhark_mc_segmap_parloop_131273_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131273_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131273_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131273_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131271_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131271_end -
                 futhark_mc_segmap_nested_task_131271_start;
        
        ctx->futhark_mc_segmap_nested_task_131271_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131271_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131271_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131300 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122708;
    char *free_mem_122712;
};
struct futhark_mc_segmap_parloop_struct_131302 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122708;
    char *free_mem_122712;
};
static int futhark_mc_segmap_parloop_131303(void *args, int64_t start,
                                            int64_t end, int flat_tid_118807,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131302
    *futhark_mc_segmap_parloop_struct_131302 =
    (struct futhark_mc_segmap_parloop_struct_131302 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131302->ctx;
    uint64_t futhark_mc_segmap_parloop_131303_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131303_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131302->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131302->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131302->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131302->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131302->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131302->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131302->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131302->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131302->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131302->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131302->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131302->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131302->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131302->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 =
            futhark_mc_segmap_parloop_struct_131302->free_bytes_122537;
    struct memblock mem_122708 = {.desc ="mem_122708", .mem =
                                  futhark_mc_segmap_parloop_struct_131302->free_mem_122708,
                                  .size =0, .references =NULL};
    struct memblock mem_122712 = {.desc ="mem_122712", .mem =
                                  futhark_mc_segmap_parloop_struct_131302->free_mem_122712,
                                  .size =0, .references =NULL};
    size_t mem_122617_cached_sizze_131304 = 0;
    char *mem_122617 = NULL;
    size_t mem_122620_cached_sizze_131305 = 0;
    char *mem_122620 = NULL;
    size_t mem_122637_cached_sizze_131306 = 0;
    char *mem_122637 = NULL;
    size_t mem_122640_cached_sizze_131307 = 0;
    char *mem_122640 = NULL;
    size_t mem_122667_cached_sizze_131308 = 0;
    char *mem_122667 = NULL;
    size_t mem_122670_cached_sizze_131309 = 0;
    char *mem_122670 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127145 = start;
    
    if (mem_122617_cached_sizze_131304 < (size_t) bytes_121918) {
        mem_122617 = realloc(mem_122617, bytes_121918);
        mem_122617_cached_sizze_131304 = bytes_121918;
    }
    if (mem_122620_cached_sizze_131305 < (size_t) bytes_121918) {
        mem_122620 = realloc(mem_122620, bytes_121918);
        mem_122620_cached_sizze_131305 = bytes_121918;
    }
    if (mem_122637_cached_sizze_131306 < (size_t) bytes_122537) {
        mem_122637 = realloc(mem_122637, bytes_122537);
        mem_122637_cached_sizze_131306 = bytes_122537;
    }
    if (mem_122640_cached_sizze_131307 < (size_t) bytes_122537) {
        mem_122640 = realloc(mem_122640, bytes_122537);
        mem_122640_cached_sizze_131307 = bytes_122537;
    }
    if (mem_122667_cached_sizze_131308 < (size_t) bytes_122537) {
        mem_122667 = realloc(mem_122667, bytes_122537);
        mem_122667_cached_sizze_131308 = bytes_122537;
    }
    if (mem_122670_cached_sizze_131309 < (size_t) bytes_122537) {
        mem_122670 = realloc(mem_122670, bytes_122537);
        mem_122670_cached_sizze_131309 = bytes_122537;
    }
    for (; iter_127145 < end; iter_127145++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127263 = m_114462;
        int64_t gtid_118808 = iter_127145;
        int64_t remnant_127264 = iter_127145 - gtid_118808;
        
        for (int64_t i_127146 = 0; i_127146 < l_n_m_114513; i_127146++) {
            int64_t x_127149 = ((int64_t *) mem_121987.mem)[gtid_118808 *
                                                            l_n_m_114513 +
                                                            i_127146];
            float x_127150 = ((float *) mem_121991.mem)[gtid_118808 *
                                                        l_n_m_114513 +
                                                        i_127146];
            int64_t min_arg_127151 = mul64(t_jump_114470, i_127146);
            int64_t min_res_127152 = smin64(i_114539, min_arg_127151);
            float defunc_0_f_res_127153 = sitofp_i64_f32(min_res_127152);
            
            for (int64_t i_127158 = 0; i_127158 < l_window_114467; i_127158++) {
                bool cond_127161 = sle64(n_114463, i_127158);
                float defunc_0_f_res_127162;
                
                if (cond_127161) {
                    defunc_0_f_res_127162 = 0.0F;
                } else {
                    int64_t i_127163 = add64(x_127149, i_127158);
                    float index_primexp_127164 = sitofp_i64_f32(i_127163);
                    float defunc_0_f_res_f_res_127165 = 1.0F +
                          index_primexp_127164;
                    
                    defunc_0_f_res_127162 = defunc_0_f_res_f_res_127165;
                }
                
                float defunc_0_f_res_127166;
                
                if (cond_127161) {
                    defunc_0_f_res_127166 = 0.0F;
                } else {
                    int64_t i_127167 = add64(x_127149, i_127158);
                    float x_127168 =
                          ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                           (gtid_118808 *
                                                            ctx_param_ext_122099 +
                                                            i_127167 *
                                                            ctx_param_ext_122101)];
                    
                    defunc_0_f_res_127166 = x_127168;
                }
                
                float x_j_127169 = defunc_0_f_res_127162 -
                      defunc_0_f_res_127153;
                float abs_res_127170 = (float) fabs(x_j_127169);
                float tmp1_127171 = abs_res_127170 / x_127150;
                float x_127172 = tmp1_127171 * tmp1_127171;
                float y_127173 = tmp1_127171 * x_127172;
                float tmp2_127174 = 1.0F - y_127173;
                float x_127175 = tmp2_127174 * tmp2_127174;
                float tmp3_127176 = tmp2_127174 * x_127175;
                float tmp4_127177 = defunc_0_f_res_127166 * tmp3_127176;
                
                ((float *) mem_122637)[i_127158] = x_j_127169;
                ((float *) mem_122640)[i_127158] = tmp4_127177;
            }
            
            float defunc_2_reduce_res_127182;
            float defunc_2_reduce_res_127183;
            float defunc_2_reduce_res_127184;
            float defunc_2_reduce_res_127185;
            float defunc_2_reduce_res_127186;
            float redout_127190;
            float redout_127191;
            float redout_127192;
            float redout_127193;
            float redout_127194;
            
            redout_127190 = 0.0F;
            redout_127191 = 0.0F;
            redout_127192 = 0.0F;
            redout_127193 = 0.0F;
            redout_127194 = 0.0F;
            for (int64_t i_127189 = 0; i_127189 < l_window_114467; i_127189++) {
                float x_127197 = ((float *) mem_122637)[i_127189];
                float x_127198 = ((float *) mem_122640)[i_127189];
                float defunc_1_f_res_127199 = x_127197 * x_127198;
                float defunc_1_f_res_127200 = x_127197 * defunc_1_f_res_127199;
                float defunc_1_f_res_127201 = x_127197 * defunc_1_f_res_127200;
                float defunc_1_f_res_127202 = x_127197 * defunc_1_f_res_127201;
                float defunc_1_op_res_127203 = x_127198 + redout_127190;
                float defunc_1_op_res_127204 = defunc_1_f_res_127199 +
                      redout_127191;
                float defunc_1_op_res_127205 = defunc_1_f_res_127200 +
                      redout_127192;
                float defunc_1_op_res_127206 = defunc_1_f_res_127201 +
                      redout_127193;
                float defunc_1_op_res_127207 = defunc_1_f_res_127202 +
                      redout_127194;
                
                ((float *) mem_122667)[i_127189] = defunc_1_f_res_127200;
                ((float *) mem_122670)[i_127189] = defunc_1_f_res_127199;
                
                float redout_tmp_127269 = defunc_1_op_res_127203;
                float redout_tmp_127270 = defunc_1_op_res_127204;
                float redout_tmp_127271 = defunc_1_op_res_127205;
                float redout_tmp_127272 = defunc_1_op_res_127206;
                float redout_tmp_127273 = defunc_1_op_res_127207;
                
                redout_127190 = redout_tmp_127269;
                redout_127191 = redout_tmp_127270;
                redout_127192 = redout_tmp_127271;
                redout_127193 = redout_tmp_127272;
                redout_127194 = redout_tmp_127273;
            }
            defunc_2_reduce_res_127182 = redout_127190;
            defunc_2_reduce_res_127183 = redout_127191;
            defunc_2_reduce_res_127184 = redout_127192;
            defunc_2_reduce_res_127185 = redout_127193;
            defunc_2_reduce_res_127186 = redout_127194;
            
            float x_127210 = defunc_2_reduce_res_127184 *
                  defunc_2_reduce_res_127186;
            float y_127211 = defunc_2_reduce_res_127185 *
                  defunc_2_reduce_res_127185;
            float a12_127212 = x_127210 - y_127211;
            float x_127213 = defunc_2_reduce_res_127184 *
                  defunc_2_reduce_res_127185;
            float y_127214 = defunc_2_reduce_res_127183 *
                  defunc_2_reduce_res_127186;
            float b12_127215 = x_127213 - y_127214;
            float x_127216 = defunc_2_reduce_res_127183 *
                  defunc_2_reduce_res_127185;
            float y_127217 = defunc_2_reduce_res_127184 *
                  defunc_2_reduce_res_127184;
            float c12_127218 = x_127216 - y_127217;
            float x_127219 = defunc_2_reduce_res_127182 *
                  defunc_2_reduce_res_127186;
            float b2_127220 = x_127219 - y_127217;
            float x_127221 = defunc_2_reduce_res_127183 *
                  defunc_2_reduce_res_127184;
            float y_127222 = defunc_2_reduce_res_127182 *
                  defunc_2_reduce_res_127185;
            float c2_127223 = x_127221 - y_127222;
            float x_127224 = defunc_2_reduce_res_127182 * a12_127212;
            float y_127225 = defunc_2_reduce_res_127183 * b12_127215;
            float x_127226 = x_127224 + y_127225;
            float y_127227 = defunc_2_reduce_res_127184 * c12_127218;
            float y_127228 = x_127226 + y_127227;
            float det_127229 = 1.0F / y_127228;
            float a12_127230 = a12_127212 * det_127229;
            float b12_127231 = b12_127215 * det_127229;
            float c12_127232 = c12_127218 * det_127229;
            float b2_127233 = b2_127220 * det_127229;
            float c2_127234 = c2_127223 * det_127229;
            float defunc_2_reduce_res_127235;
            float defunc_2_reduce_res_127236;
            float redout_127238;
            float redout_127239;
            
            redout_127238 = 0.0F;
            redout_127239 = 0.0F;
            for (int64_t i_127237 = 0; i_127237 < l_window_114467; i_127237++) {
                float x_127240 = ((float *) mem_122640)[i_127237];
                float x_127241 = ((float *) mem_122670)[i_127237];
                float x_127242 = ((float *) mem_122667)[i_127237];
                bool cond_127243 = sle64(n_114463, i_127237);
                float defunc_0_f_res_127244;
                
                if (cond_127243) {
                    defunc_0_f_res_127244 = 0.0F;
                } else {
                    int64_t i_127245 = add64(x_127149, i_127237);
                    float x_127246 = ((float *) mem_122249.mem)[gtid_118808 *
                                                                n_114463 +
                                                                i_127245];
                    
                    defunc_0_f_res_127244 = x_127246;
                }
                
                float x_127247 = a12_127230 * x_127240;
                float y_127248 = b12_127231 * x_127241;
                float x_127249 = x_127247 + y_127248;
                float y_127250 = c12_127232 * x_127242;
                float x_127251 = x_127249 + y_127250;
                float defunc_9_fit_fun_res_127252 = defunc_0_f_res_127244 *
                      x_127251;
                float x_127253 = b12_127231 * x_127240;
                float y_127254 = b2_127233 * x_127241;
                float x_127255 = x_127253 + y_127254;
                float y_127256 = c2_127234 * x_127242;
                float x_127257 = x_127255 + y_127256;
                float defunc_9_slope_fun_res_127258 = defunc_0_f_res_127244 *
                      x_127257;
                float defunc_1_op_res_127259 = defunc_9_fit_fun_res_127252 +
                      redout_127238;
                float defunc_1_op_res_127260 = defunc_9_slope_fun_res_127258 +
                      redout_127239;
                float redout_tmp_127276 = defunc_1_op_res_127259;
                float redout_tmp_127277 = defunc_1_op_res_127260;
                
                redout_127238 = redout_tmp_127276;
                redout_127239 = redout_tmp_127277;
            }
            defunc_2_reduce_res_127235 = redout_127238;
            defunc_2_reduce_res_127236 = redout_127239;
            ((float *) mem_122617)[i_127146] = defunc_2_reduce_res_127235;
            ((float *) mem_122620)[i_127146] = defunc_2_reduce_res_127236;
        }
        memmove(mem_122708.mem + gtid_118808 * l_n_m_114513 * (int64_t) 4,
                mem_122617 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122712.mem + gtid_118808 * l_n_m_114513 * (int64_t) 4,
                mem_122620 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122617);
    free(mem_122620);
    free(mem_122637);
    free(mem_122640);
    free(mem_122667);
    free(mem_122670);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131303_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131303_end -
                 futhark_mc_segmap_parloop_131303_start;
        
        ctx->futhark_mc_segmap_parloop_131303_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131303_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131303_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131301(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118807 = tid;
    int num_tasks_127144 = info.nsubtasks;
    struct futhark_mc_task_131300 *futhark_mc_task_131300 =
                                  (struct futhark_mc_task_131300 *) args;
    struct futhark_context *ctx = futhark_mc_task_131300->ctx;
    uint64_t futhark_mc_segmap_task_131301_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131301_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131300->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131300->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131300->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131300->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131300->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131300->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131300->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131300->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131300->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131300->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131300->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131300->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131300->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131300->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 = futhark_mc_task_131300->free_bytes_122537;
    struct memblock mem_122708 = {.desc ="mem_122708", .mem =
                                  futhark_mc_task_131300->free_mem_122708,
                                  .size =0, .references =NULL};
    struct memblock mem_122712 = {.desc ="mem_122712", .mem =
                                  futhark_mc_task_131300->free_mem_122712,
                                  .size =0, .references =NULL};
    int64_t iter_127145;
    struct futhark_mc_segmap_parloop_struct_131302
    futhark_mc_segmap_parloop_struct_131302;
    
    futhark_mc_segmap_parloop_struct_131302.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131302.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131302.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131302.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131302.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131302.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131302.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131302.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131302.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131302.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131302.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131302.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131302.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131302.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131302.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131302.free_bytes_122537 = bytes_122537;
    futhark_mc_segmap_parloop_struct_131302.free_mem_122708 = mem_122708.mem;
    futhark_mc_segmap_parloop_struct_131302.free_mem_122712 = mem_122712.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131303_task;
    
    futhark_mc_segmap_parloop_131303_task.name =
        "futhark_mc_segmap_parloop_131303";
    futhark_mc_segmap_parloop_131303_task.fn = futhark_mc_segmap_parloop_131303;
    futhark_mc_segmap_parloop_131303_task.args =
        &futhark_mc_segmap_parloop_struct_131302;
    futhark_mc_segmap_parloop_131303_task.iterations = iterations;
    futhark_mc_segmap_parloop_131303_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131303_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131303_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131303_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131303_task);
    
    if (futhark_mc_segmap_parloop_131303_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131303_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131303_total_end -
                 futhark_mc_segmap_parloop_131303_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131303_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131303_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131303_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131301_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131301_end -
                 futhark_mc_segmap_task_131301_start;
        
        ctx->futhark_mc_segmap_task_131301_runs[tid]++;
        ctx->futhark_mc_segmap_task_131301_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131301_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131311 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_bytes_121918;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122708;
    char *free_mem_122712;
};
struct futhark_mc_task_131315 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118810;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122611;
    char *free_mem_122614;
};
struct futhark_mc_segmap_parloop_struct_131317 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118810;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122611;
    char *free_mem_122614;
};
static int futhark_mc_segmap_parloop_131318(void *args, int64_t start,
                                            int64_t end, int flat_tid_118811,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131317
    *futhark_mc_segmap_parloop_struct_131317 =
    (struct futhark_mc_segmap_parloop_struct_131317 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131317->ctx;
    uint64_t futhark_mc_segmap_parloop_131318_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131318_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131317->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131317->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131317->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131317->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131317->free_i_114539;
    int64_t gtid_118810 =
            futhark_mc_segmap_parloop_struct_131317->free_gtid_118810;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131317->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131317->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 =
            futhark_mc_segmap_parloop_struct_131317->free_bytes_122537;
    struct memblock mem_122611 = {.desc ="mem_122611", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122611,
                                  .size =0, .references =NULL};
    struct memblock mem_122614 = {.desc ="mem_122614", .mem =
                                  futhark_mc_segmap_parloop_struct_131317->free_mem_122614,
                                  .size =0, .references =NULL};
    size_t mem_127392_cached_sizze_131319 = 0;
    char *mem_127392 = NULL;
    size_t mem_127394_cached_sizze_131320 = 0;
    char *mem_127394 = NULL;
    size_t mem_127420_cached_sizze_131321 = 0;
    char *mem_127420 = NULL;
    size_t mem_127422_cached_sizze_131322 = 0;
    char *mem_127422 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127506 = start;
    
    if (mem_127392_cached_sizze_131319 < (size_t) bytes_122537) {
        mem_127392 = realloc(mem_127392, bytes_122537);
        mem_127392_cached_sizze_131319 = bytes_122537;
    }
    if (mem_127394_cached_sizze_131320 < (size_t) bytes_122537) {
        mem_127394 = realloc(mem_127394, bytes_122537);
        mem_127394_cached_sizze_131320 = bytes_122537;
    }
    if (mem_127420_cached_sizze_131321 < (size_t) bytes_122537) {
        mem_127420 = realloc(mem_127420, bytes_122537);
        mem_127420_cached_sizze_131321 = bytes_122537;
    }
    if (mem_127422_cached_sizze_131322 < (size_t) bytes_122537) {
        mem_127422 = realloc(mem_127422, bytes_122537);
        mem_127422_cached_sizze_131322 = bytes_122537;
    }
    for (; iter_127506 < end; iter_127506++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127574 = l_n_m_114513;
        int64_t gtid_118812 = iter_127506;
        int64_t remnant_127575 = iter_127506 - gtid_118812;
        int64_t x_127387 = ((int64_t *) mem_121987.mem)[gtid_118810 *
                                                        l_n_m_114513 +
                                                        gtid_118812];
        float x_127388 = ((float *) mem_121991.mem)[gtid_118810 * l_n_m_114513 +
                                                    gtid_118812];
        int64_t min_arg_127389 = mul64(t_jump_114470, gtid_118812);
        int64_t min_res_127390 = smin64(i_114539, min_arg_127389);
        float defunc_0_f_res_127391 = sitofp_i64_f32(min_res_127390);
        
        for (int64_t i_127507 = 0; i_127507 < l_window_114467; i_127507++) {
            bool cond_127510 = sle64(n_114463, i_127507);
            float defunc_0_f_res_127511;
            
            if (cond_127510) {
                defunc_0_f_res_127511 = 0.0F;
            } else {
                int64_t i_127512 = add64(x_127387, i_127507);
                float index_primexp_127513 = sitofp_i64_f32(i_127512);
                float defunc_0_f_res_f_res_127514 = 1.0F + index_primexp_127513;
                
                defunc_0_f_res_127511 = defunc_0_f_res_f_res_127514;
            }
            
            float defunc_0_f_res_127515;
            
            if (cond_127510) {
                defunc_0_f_res_127515 = 0.0F;
            } else {
                int64_t i_127516 = add64(x_127387, i_127507);
                float x_127517 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_118810 *
                                                        ctx_param_ext_122099 +
                                                        i_127516 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_127515 = x_127517;
            }
            
            float x_j_127518 = defunc_0_f_res_127511 - defunc_0_f_res_127391;
            float abs_res_127519 = (float) fabs(x_j_127518);
            float tmp1_127520 = abs_res_127519 / x_127388;
            float x_127521 = tmp1_127520 * tmp1_127520;
            float y_127522 = tmp1_127520 * x_127521;
            float tmp2_127523 = 1.0F - y_127522;
            float x_127524 = tmp2_127523 * tmp2_127523;
            float tmp3_127525 = tmp2_127523 * x_127524;
            float tmp4_127526 = defunc_0_f_res_127515 * tmp3_127525;
            
            ((float *) mem_127392)[i_127507] = x_j_127518;
            ((float *) mem_127394)[i_127507] = tmp4_127526;
        }
        
        float defunc_2_reduce_res_127424;
        float defunc_2_reduce_res_127425;
        float defunc_2_reduce_res_127426;
        float defunc_2_reduce_res_127427;
        float defunc_2_reduce_res_127428;
        float redout_127530;
        float redout_127531;
        float redout_127532;
        float redout_127533;
        float redout_127534;
        
        redout_127530 = 0.0F;
        redout_127531 = 0.0F;
        redout_127532 = 0.0F;
        redout_127533 = 0.0F;
        redout_127534 = 0.0F;
        for (int64_t i_127529 = 0; i_127529 < l_window_114467; i_127529++) {
            float x_127537 = ((float *) mem_127392)[i_127529];
            float x_127538 = ((float *) mem_127394)[i_127529];
            float defunc_1_f_res_127539 = x_127537 * x_127538;
            float defunc_1_f_res_127540 = x_127537 * defunc_1_f_res_127539;
            float defunc_1_f_res_127541 = x_127537 * defunc_1_f_res_127540;
            float defunc_1_f_res_127542 = x_127537 * defunc_1_f_res_127541;
            float defunc_1_op_res_127543 = x_127538 + redout_127530;
            float defunc_1_op_res_127544 = defunc_1_f_res_127539 +
                  redout_127531;
            float defunc_1_op_res_127545 = defunc_1_f_res_127540 +
                  redout_127532;
            float defunc_1_op_res_127546 = defunc_1_f_res_127541 +
                  redout_127533;
            float defunc_1_op_res_127547 = defunc_1_f_res_127542 +
                  redout_127534;
            
            ((float *) mem_127420)[i_127529] = defunc_1_f_res_127540;
            ((float *) mem_127422)[i_127529] = defunc_1_f_res_127539;
            
            float redout_tmp_127578 = defunc_1_op_res_127543;
            float redout_tmp_127579 = defunc_1_op_res_127544;
            float redout_tmp_127580 = defunc_1_op_res_127545;
            float redout_tmp_127581 = defunc_1_op_res_127546;
            float redout_tmp_127582 = defunc_1_op_res_127547;
            
            redout_127530 = redout_tmp_127578;
            redout_127531 = redout_tmp_127579;
            redout_127532 = redout_tmp_127580;
            redout_127533 = redout_tmp_127581;
            redout_127534 = redout_tmp_127582;
        }
        defunc_2_reduce_res_127424 = redout_127530;
        defunc_2_reduce_res_127425 = redout_127531;
        defunc_2_reduce_res_127426 = redout_127532;
        defunc_2_reduce_res_127427 = redout_127533;
        defunc_2_reduce_res_127428 = redout_127534;
        
        float x_127452 = defunc_2_reduce_res_127426 *
              defunc_2_reduce_res_127428;
        float y_127453 = defunc_2_reduce_res_127427 *
              defunc_2_reduce_res_127427;
        float a12_127454 = x_127452 - y_127453;
        float x_127455 = defunc_2_reduce_res_127426 *
              defunc_2_reduce_res_127427;
        float y_127456 = defunc_2_reduce_res_127425 *
              defunc_2_reduce_res_127428;
        float b12_127457 = x_127455 - y_127456;
        float x_127458 = defunc_2_reduce_res_127425 *
              defunc_2_reduce_res_127427;
        float y_127459 = defunc_2_reduce_res_127426 *
              defunc_2_reduce_res_127426;
        float c12_127460 = x_127458 - y_127459;
        float x_127461 = defunc_2_reduce_res_127424 *
              defunc_2_reduce_res_127428;
        float b2_127462 = x_127461 - y_127459;
        float x_127463 = defunc_2_reduce_res_127425 *
              defunc_2_reduce_res_127426;
        float y_127464 = defunc_2_reduce_res_127424 *
              defunc_2_reduce_res_127427;
        float c2_127465 = x_127463 - y_127464;
        float x_127466 = defunc_2_reduce_res_127424 * a12_127454;
        float y_127467 = defunc_2_reduce_res_127425 * b12_127457;
        float x_127468 = x_127466 + y_127467;
        float y_127469 = defunc_2_reduce_res_127426 * c12_127460;
        float y_127470 = x_127468 + y_127469;
        float det_127471 = 1.0F / y_127470;
        float a12_127472 = a12_127454 * det_127471;
        float b12_127473 = b12_127457 * det_127471;
        float c12_127474 = c12_127460 * det_127471;
        float b2_127475 = b2_127462 * det_127471;
        float c2_127476 = c2_127465 * det_127471;
        float defunc_2_reduce_res_127477;
        float defunc_2_reduce_res_127478;
        float redout_127551;
        float redout_127552;
        
        redout_127551 = 0.0F;
        redout_127552 = 0.0F;
        for (int64_t i_127550 = 0; i_127550 < l_window_114467; i_127550++) {
            float x_127553 = ((float *) mem_127394)[i_127550];
            float x_127554 = ((float *) mem_127422)[i_127550];
            float x_127555 = ((float *) mem_127420)[i_127550];
            bool cond_127556 = sle64(n_114463, i_127550);
            float defunc_0_f_res_127557;
            
            if (cond_127556) {
                defunc_0_f_res_127557 = 0.0F;
            } else {
                int64_t i_127558 = add64(x_127387, i_127550);
                float x_127559 = ((float *) mem_122249.mem)[gtid_118810 *
                                                            n_114463 +
                                                            i_127558];
                
                defunc_0_f_res_127557 = x_127559;
            }
            
            float x_127560 = a12_127472 * x_127553;
            float y_127561 = b12_127473 * x_127554;
            float x_127562 = x_127560 + y_127561;
            float y_127563 = c12_127474 * x_127555;
            float x_127564 = x_127562 + y_127563;
            float defunc_9_fit_fun_res_127565 = defunc_0_f_res_127557 *
                  x_127564;
            float x_127566 = b12_127473 * x_127553;
            float y_127567 = b2_127475 * x_127554;
            float x_127568 = x_127566 + y_127567;
            float y_127569 = c2_127476 * x_127555;
            float x_127570 = x_127568 + y_127569;
            float defunc_9_slope_fun_res_127571 = defunc_0_f_res_127557 *
                  x_127570;
            float defunc_1_op_res_127572 = defunc_9_fit_fun_res_127565 +
                  redout_127551;
            float defunc_1_op_res_127573 = defunc_9_slope_fun_res_127571 +
                  redout_127552;
            float redout_tmp_127585 = defunc_1_op_res_127572;
            float redout_tmp_127586 = defunc_1_op_res_127573;
            
            redout_127551 = redout_tmp_127585;
            redout_127552 = redout_tmp_127586;
        }
        defunc_2_reduce_res_127477 = redout_127551;
        defunc_2_reduce_res_127478 = redout_127552;
        ((float *) mem_122611.mem)[gtid_118812] = defunc_2_reduce_res_127477;
        ((float *) mem_122614.mem)[gtid_118812] = defunc_2_reduce_res_127478;
    }
    
  cleanup:
    { }
    free(mem_127392);
    free(mem_127394);
    free(mem_127420);
    free(mem_127422);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131318_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131318_end -
                 futhark_mc_segmap_parloop_131318_start;
        
        ctx->futhark_mc_segmap_parloop_131318_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131318_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131318_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131316(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118811 = tid;
    int num_tasks_127505 = info.nsubtasks;
    struct futhark_mc_task_131315 *futhark_mc_task_131315 =
                                  (struct futhark_mc_task_131315 *) args;
    struct futhark_context *ctx = futhark_mc_task_131315->ctx;
    uint64_t futhark_mc_segmap_task_131316_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131316_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131315->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131315->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131315->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131315->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131315->free_i_114539;
    int64_t gtid_118810 = futhark_mc_task_131315->free_gtid_118810;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131315->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131315->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131315->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131315->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131315->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131315->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131315->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 = futhark_mc_task_131315->free_bytes_122537;
    struct memblock mem_122611 = {.desc ="mem_122611", .mem =
                                  futhark_mc_task_131315->free_mem_122611,
                                  .size =0, .references =NULL};
    struct memblock mem_122614 = {.desc ="mem_122614", .mem =
                                  futhark_mc_task_131315->free_mem_122614,
                                  .size =0, .references =NULL};
    int64_t iter_127506;
    struct futhark_mc_segmap_parloop_struct_131317
    futhark_mc_segmap_parloop_struct_131317;
    
    futhark_mc_segmap_parloop_struct_131317.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131317.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131317.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131317.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131317.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131317.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131317.free_gtid_118810 = gtid_118810;
    futhark_mc_segmap_parloop_struct_131317.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131317.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131317.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131317.free_bytes_122537 = bytes_122537;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122611 = mem_122611.mem;
    futhark_mc_segmap_parloop_struct_131317.free_mem_122614 = mem_122614.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131318_task;
    
    futhark_mc_segmap_parloop_131318_task.name =
        "futhark_mc_segmap_parloop_131318";
    futhark_mc_segmap_parloop_131318_task.fn = futhark_mc_segmap_parloop_131318;
    futhark_mc_segmap_parloop_131318_task.args =
        &futhark_mc_segmap_parloop_struct_131317;
    futhark_mc_segmap_parloop_131318_task.iterations = iterations;
    futhark_mc_segmap_parloop_131318_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131318_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131318_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131318_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131318_task);
    
    if (futhark_mc_segmap_parloop_131318_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131318_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131318_total_end -
                 futhark_mc_segmap_parloop_131318_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131318_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131316_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131316_end -
                 futhark_mc_segmap_task_131316_start;
        
        ctx->futhark_mc_segmap_task_131316_runs[tid]++;
        ctx->futhark_mc_segmap_task_131316_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131316_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131324 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_t_jump_114470;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_gtid_118810;
    char *free_mem_121987;
    char *free_mem_121991;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122249;
    int64_t free_bytes_122537;
    char *free_mem_122611;
    char *free_mem_122614;
};
struct futhark_mc_task_131330 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_gtid_118810;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_127279;
    float free_x_127280;
    float free_defunc_0_f_res_127283;
    char *free_mem_127284;
    char *free_mem_127285;
};
struct futhark_mc_segmap_parloop_struct_131332 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_window_114467;
    int64_t free_gtid_118810;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    int64_t free_x_127279;
    float free_x_127280;
    float free_defunc_0_f_res_127283;
    char *free_mem_127284;
    char *free_mem_127285;
};
static int futhark_mc_segmap_parloop_131333(void *args, int64_t start,
                                            int64_t end, int flat_tid_118815,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131332
    *futhark_mc_segmap_parloop_struct_131332 =
    (struct futhark_mc_segmap_parloop_struct_131332 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131332->ctx;
    uint64_t futhark_mc_segmap_parloop_131333_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131333_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131332->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131332->free_l_window_114467;
    int64_t gtid_118810 =
            futhark_mc_segmap_parloop_struct_131332->free_gtid_118810;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131332->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131332->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131332->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131332->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_127279 = futhark_mc_segmap_parloop_struct_131332->free_x_127279;
    float x_127280 = futhark_mc_segmap_parloop_struct_131332->free_x_127280;
    float defunc_0_f_res_127283 =
          futhark_mc_segmap_parloop_struct_131332->free_defunc_0_f_res_127283;
    struct memblock mem_127284 = {.desc ="mem_127284", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_127284,
                                  .size =0, .references =NULL};
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_segmap_parloop_struct_131332->free_mem_127285,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127654 = start;
    
    for (; iter_127654 < end; iter_127654++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127660 = l_window_114467;
        int64_t gtid_118816 = iter_127654;
        int64_t remnant_127661 = iter_127654 - gtid_118816;
        bool cond_127588 = sle64(n_114463, gtid_118816);
        float defunc_0_f_res_127589;
        
        if (cond_127588) {
            defunc_0_f_res_127589 = 0.0F;
        } else {
            int64_t i_127655 = add64(gtid_118816, x_127279);
            float index_primexp_127656 = sitofp_i64_f32(i_127655);
            float defunc_0_f_res_f_res_127657 = 1.0F + index_primexp_127656;
            
            defunc_0_f_res_127589 = defunc_0_f_res_f_res_127657;
        }
        
        float defunc_0_f_res_127593;
        
        if (cond_127588) {
            defunc_0_f_res_127593 = 0.0F;
        } else {
            int64_t i_127658 = add64(gtid_118816, x_127279);
            float x_127659 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_118810 *
                                                    ctx_param_ext_122099 +
                                                    i_127658 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_127593 = x_127659;
        }
        
        float x_j_127596 = defunc_0_f_res_127589 - defunc_0_f_res_127283;
        float abs_res_127597 = (float) fabs(x_j_127596);
        float tmp1_127598 = abs_res_127597 / x_127280;
        float x_127599 = tmp1_127598 * tmp1_127598;
        float y_127600 = tmp1_127598 * x_127599;
        float tmp2_127601 = 1.0F - y_127600;
        float x_127602 = tmp2_127601 * tmp2_127601;
        float tmp3_127603 = tmp2_127601 * x_127602;
        float tmp4_127604 = defunc_0_f_res_127593 * tmp3_127603;
        
        ((float *) mem_127284.mem)[gtid_118816] = x_j_127596;
        ((float *) mem_127285.mem)[gtid_118816] = tmp4_127604;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131333_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131333_end -
                 futhark_mc_segmap_parloop_131333_start;
        
        ctx->futhark_mc_segmap_parloop_131333_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131333_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131333_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131331(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118815 = tid;
    int num_tasks_127653 = info.nsubtasks;
    struct futhark_mc_task_131330 *futhark_mc_task_131330 =
                                  (struct futhark_mc_task_131330 *) args;
    struct futhark_context *ctx = futhark_mc_task_131330->ctx;
    uint64_t futhark_mc_segmap_task_131331_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131331_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131330->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131330->free_l_window_114467;
    int64_t gtid_118810 = futhark_mc_task_131330->free_gtid_118810;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131330->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131330->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131330->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131330->free_mem_param_122103,
                                        .size =0, .references =NULL};
    int64_t x_127279 = futhark_mc_task_131330->free_x_127279;
    float x_127280 = futhark_mc_task_131330->free_x_127280;
    float defunc_0_f_res_127283 =
          futhark_mc_task_131330->free_defunc_0_f_res_127283;
    struct memblock mem_127284 = {.desc ="mem_127284", .mem =
                                  futhark_mc_task_131330->free_mem_127284,
                                  .size =0, .references =NULL};
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_task_131330->free_mem_127285,
                                  .size =0, .references =NULL};
    int64_t iter_127654;
    struct futhark_mc_segmap_parloop_struct_131332
    futhark_mc_segmap_parloop_struct_131332;
    
    futhark_mc_segmap_parloop_struct_131332.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131332.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131332.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131332.free_gtid_118810 = gtid_118810;
    futhark_mc_segmap_parloop_struct_131332.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131332.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131332.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131332.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131332.free_x_127279 = x_127279;
    futhark_mc_segmap_parloop_struct_131332.free_x_127280 = x_127280;
    futhark_mc_segmap_parloop_struct_131332.free_defunc_0_f_res_127283 =
        defunc_0_f_res_127283;
    futhark_mc_segmap_parloop_struct_131332.free_mem_127284 = mem_127284.mem;
    futhark_mc_segmap_parloop_struct_131332.free_mem_127285 = mem_127285.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131333_task;
    
    futhark_mc_segmap_parloop_131333_task.name =
        "futhark_mc_segmap_parloop_131333";
    futhark_mc_segmap_parloop_131333_task.fn = futhark_mc_segmap_parloop_131333;
    futhark_mc_segmap_parloop_131333_task.args =
        &futhark_mc_segmap_parloop_struct_131332;
    futhark_mc_segmap_parloop_131333_task.iterations = iterations;
    futhark_mc_segmap_parloop_131333_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131333_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131333_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131333_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131333_task);
    
    if (futhark_mc_segmap_parloop_131333_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131333_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131333_total_end -
                 futhark_mc_segmap_parloop_131333_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131333_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131331_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131331_end -
                 futhark_mc_segmap_task_131331_start;
        
        ctx->futhark_mc_segmap_task_131331_runs[tid]++;
        ctx->futhark_mc_segmap_task_131331_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131331_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131334 {
    struct futhark_context *ctx;
    char *free_mem_127284;
    char *free_mem_127285;
    float *retval_defunc_2_reduce_res_127307;
    float *retval_defunc_2_reduce_res_127308;
    float *retval_defunc_2_reduce_res_127309;
    float *retval_defunc_2_reduce_res_127310;
    float *retval_defunc_2_reduce_res_127311;
    char *retval_mem_127305;
    char *retval_mem_127306;
};
struct futhark_mc_segred_stage_1_parloop_struct_131341 {
    struct futhark_context *ctx;
    char *free_mem_127284;
    char *free_mem_127285;
    char *free_mem_127305;
    char *free_mem_127306;
    char *free_reduce_stage_1_tid_res_arr_mem_127663;
    char *free_reduce_stage_1_tid_res_arr_mem_127665;
    char *free_reduce_stage_1_tid_res_arr_mem_127667;
    char *free_reduce_stage_1_tid_res_arr_mem_127669;
    char *free_reduce_stage_1_tid_res_arr_mem_127671;
};
static int futhark_mc_segred_stage_1_parloop_131342(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118817,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131341
    *futhark_mc_segred_stage_1_parloop_struct_131341 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131341 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131341->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131342_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131342_start = get_wall_time();
    
    struct memblock mem_127284 = {.desc ="mem_127284", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131341->free_mem_127284,
                                  .size =0, .references =NULL};
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131341->free_mem_127285,
                                  .size =0, .references =NULL};
    struct memblock mem_127305 = {.desc ="mem_127305", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131341->free_mem_127305,
                                  .size =0, .references =NULL};
    struct memblock mem_127306 = {.desc ="mem_127306", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131341->free_mem_127306,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127663 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127663",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131341->free_reduce_stage_1_tid_res_arr_mem_127663,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127665 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127665",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131341->free_reduce_stage_1_tid_res_arr_mem_127665,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127667 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127667",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131341->free_reduce_stage_1_tid_res_arr_mem_127667,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127669 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127669",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131341->free_reduce_stage_1_tid_res_arr_mem_127669,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127671 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127671",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131341->free_reduce_stage_1_tid_res_arr_mem_127671,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127673 = start;
    float x_127605;
    float x_127606;
    float x_127608;
    float x_127609;
    float x_127611;
    float x_127612;
    float x_127614;
    float x_127615;
    float x_127617;
    float x_127618;
    float local_acc_127674 = 0.0F;
    float local_acc_127675 = 0.0F;
    float local_acc_127676 = 0.0F;
    float local_acc_127677 = 0.0F;
    float local_acc_127678 = 0.0F;
    
    for (; iter_127673 < end; iter_127673++) {
        int64_t gtid_118818 = iter_127673;
        float x_127620 = ((float *) mem_127284.mem)[gtid_118818];
        float x_127621 = ((float *) mem_127285.mem)[gtid_118818];
        float defunc_1_f_res_127622 = x_127620 * x_127621;
        float defunc_1_f_res_127623 = x_127620 * defunc_1_f_res_127622;
        float defunc_1_f_res_127624 = x_127620 * defunc_1_f_res_127623;
        float defunc_1_f_res_127625 = x_127620 * defunc_1_f_res_127624;
        
        // save map-out results
        {
            ((float *) mem_127305.mem)[gtid_118818] = defunc_1_f_res_127623;
            ((float *) mem_127306.mem)[gtid_118818] = defunc_1_f_res_127622;
        }
        // Load accum params
        {
            x_127605 = local_acc_127674;
        }
        // Load next params
        {
            x_127606 = x_127621;
        }
        // Red body
        {
            float defunc_1_op_res_127607 = x_127605 + x_127606;
            
            local_acc_127674 = defunc_1_op_res_127607;
        }
        // Load accum params
        {
            x_127608 = local_acc_127675;
        }
        // Load next params
        {
            x_127609 = defunc_1_f_res_127622;
        }
        // Red body
        {
            float defunc_1_op_res_127610 = x_127608 + x_127609;
            
            local_acc_127675 = defunc_1_op_res_127610;
        }
        // Load accum params
        {
            x_127611 = local_acc_127676;
        }
        // Load next params
        {
            x_127612 = defunc_1_f_res_127623;
        }
        // Red body
        {
            float defunc_1_op_res_127613 = x_127611 + x_127612;
            
            local_acc_127676 = defunc_1_op_res_127613;
        }
        // Load accum params
        {
            x_127614 = local_acc_127677;
        }
        // Load next params
        {
            x_127615 = defunc_1_f_res_127624;
        }
        // Red body
        {
            float defunc_1_op_res_127616 = x_127614 + x_127615;
            
            local_acc_127677 = defunc_1_op_res_127616;
        }
        // Load accum params
        {
            x_127617 = local_acc_127678;
        }
        // Load next params
        {
            x_127618 = defunc_1_f_res_127625;
        }
        // Red body
        {
            float defunc_1_op_res_127619 = x_127617 + x_127618;
            
            local_acc_127678 = defunc_1_op_res_127619;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127663.mem)[flat_tid_118817] =
        local_acc_127674;
    ((float *) reduce_stage_1_tid_res_arr_mem_127665.mem)[flat_tid_118817] =
        local_acc_127675;
    ((float *) reduce_stage_1_tid_res_arr_mem_127667.mem)[flat_tid_118817] =
        local_acc_127676;
    ((float *) reduce_stage_1_tid_res_arr_mem_127669.mem)[flat_tid_118817] =
        local_acc_127677;
    ((float *) reduce_stage_1_tid_res_arr_mem_127671.mem)[flat_tid_118817] =
        local_acc_127678;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131342_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131342_end -
                 futhark_mc_segred_stage_1_parloop_131342_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131342_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131342_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131342_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131335(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118817 = tid;
    int num_tasks_127662 = info.nsubtasks;
    struct futhark_mc_task_131334 *futhark_mc_task_131334 =
                                  (struct futhark_mc_task_131334 *) args;
    struct futhark_context *ctx = futhark_mc_task_131334->ctx;
    uint64_t futhark_mc_segred_task_131335_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131335_start = get_wall_time();
    
    struct memblock mem_127284 = {.desc ="mem_127284", .mem =
                                  futhark_mc_task_131334->free_mem_127284,
                                  .size =0, .references =NULL};
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_task_131334->free_mem_127285,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_127307 =
          *futhark_mc_task_131334->retval_defunc_2_reduce_res_127307;
    float defunc_2_reduce_res_127308 =
          *futhark_mc_task_131334->retval_defunc_2_reduce_res_127308;
    float defunc_2_reduce_res_127309 =
          *futhark_mc_task_131334->retval_defunc_2_reduce_res_127309;
    float defunc_2_reduce_res_127310 =
          *futhark_mc_task_131334->retval_defunc_2_reduce_res_127310;
    float defunc_2_reduce_res_127311 =
          *futhark_mc_task_131334->retval_defunc_2_reduce_res_127311;
    struct memblock mem_127305 = {.desc ="mem_127305", .mem =
                                  futhark_mc_task_131334->retval_mem_127305,
                                  .size =0, .references =NULL};
    struct memblock mem_127306 = {.desc ="mem_127306", .mem =
                                  futhark_mc_task_131334->retval_mem_127306,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127663_cached_sizze_131336 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127663 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127665_cached_sizze_131337 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127665 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127667_cached_sizze_131338 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127667 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127669_cached_sizze_131339 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127669 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127671_cached_sizze_131340 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127671 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127663_cached_sizze_131336 <
        (size_t) ((int64_t) 4 * num_tasks_127662)) {
        reduce_stage_1_tid_res_arr_mem_127663 =
            realloc(reduce_stage_1_tid_res_arr_mem_127663, (int64_t) 4 *
                    num_tasks_127662);
        reduce_stage_1_tid_res_arr_mem_127663_cached_sizze_131336 =
            (int64_t) 4 * num_tasks_127662;
    }
    if (reduce_stage_1_tid_res_arr_mem_127665_cached_sizze_131337 <
        (size_t) ((int64_t) 4 * num_tasks_127662)) {
        reduce_stage_1_tid_res_arr_mem_127665 =
            realloc(reduce_stage_1_tid_res_arr_mem_127665, (int64_t) 4 *
                    num_tasks_127662);
        reduce_stage_1_tid_res_arr_mem_127665_cached_sizze_131337 =
            (int64_t) 4 * num_tasks_127662;
    }
    if (reduce_stage_1_tid_res_arr_mem_127667_cached_sizze_131338 <
        (size_t) ((int64_t) 4 * num_tasks_127662)) {
        reduce_stage_1_tid_res_arr_mem_127667 =
            realloc(reduce_stage_1_tid_res_arr_mem_127667, (int64_t) 4 *
                    num_tasks_127662);
        reduce_stage_1_tid_res_arr_mem_127667_cached_sizze_131338 =
            (int64_t) 4 * num_tasks_127662;
    }
    if (reduce_stage_1_tid_res_arr_mem_127669_cached_sizze_131339 <
        (size_t) ((int64_t) 4 * num_tasks_127662)) {
        reduce_stage_1_tid_res_arr_mem_127669 =
            realloc(reduce_stage_1_tid_res_arr_mem_127669, (int64_t) 4 *
                    num_tasks_127662);
        reduce_stage_1_tid_res_arr_mem_127669_cached_sizze_131339 =
            (int64_t) 4 * num_tasks_127662;
    }
    if (reduce_stage_1_tid_res_arr_mem_127671_cached_sizze_131340 <
        (size_t) ((int64_t) 4 * num_tasks_127662)) {
        reduce_stage_1_tid_res_arr_mem_127671 =
            realloc(reduce_stage_1_tid_res_arr_mem_127671, (int64_t) 4 *
                    num_tasks_127662);
        reduce_stage_1_tid_res_arr_mem_127671_cached_sizze_131340 =
            (int64_t) 4 * num_tasks_127662;
    }
    
    int64_t iter_127673;
    struct futhark_mc_segred_stage_1_parloop_struct_131341
    futhark_mc_segred_stage_1_parloop_struct_131341;
    
    futhark_mc_segred_stage_1_parloop_struct_131341.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_mem_127284 =
        mem_127284.mem;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_mem_127285 =
        mem_127285.mem;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_mem_127305 =
        mem_127305.mem;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_mem_127306 =
        mem_127306.mem;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_reduce_stage_1_tid_res_arr_mem_127663 =
        reduce_stage_1_tid_res_arr_mem_127663;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_reduce_stage_1_tid_res_arr_mem_127665 =
        reduce_stage_1_tid_res_arr_mem_127665;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_reduce_stage_1_tid_res_arr_mem_127667 =
        reduce_stage_1_tid_res_arr_mem_127667;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_reduce_stage_1_tid_res_arr_mem_127669 =
        reduce_stage_1_tid_res_arr_mem_127669;
    futhark_mc_segred_stage_1_parloop_struct_131341.free_reduce_stage_1_tid_res_arr_mem_127671 =
        reduce_stage_1_tid_res_arr_mem_127671;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131342_task;
    
    futhark_mc_segred_stage_1_parloop_131342_task.name =
        "futhark_mc_segred_stage_1_parloop_131342";
    futhark_mc_segred_stage_1_parloop_131342_task.fn =
        futhark_mc_segred_stage_1_parloop_131342;
    futhark_mc_segred_stage_1_parloop_131342_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131341;
    futhark_mc_segred_stage_1_parloop_131342_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131342_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131342_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131342_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131342_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131342_task);
    
    if (futhark_mc_segred_stage_1_parloop_131342_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131342_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131342_total_end -
                 futhark_mc_segred_stage_1_parloop_131342_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131342_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131342_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131342_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127307 = 0.0F;
        defunc_2_reduce_res_127308 = 0.0F;
        defunc_2_reduce_res_127309 = 0.0F;
        defunc_2_reduce_res_127310 = 0.0F;
        defunc_2_reduce_res_127311 = 0.0F;
    }
    
    float x_127679;
    float x_127680;
    float x_127682;
    float x_127683;
    float x_127685;
    float x_127686;
    float x_127688;
    float x_127689;
    float x_127691;
    float x_127692;
    
    for (int32_t i_127694 = 0; i_127694 < num_tasks_127662; i_127694++) {
        flat_tid_118817 = i_127694;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127679 = defunc_2_reduce_res_127307;
            }
            // load next params
            {
                x_127680 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127663)[flat_tid_118817];
            }
            // red body
            {
                float defunc_1_op_res_127681 = x_127679 + x_127680;
                
                defunc_2_reduce_res_127307 = defunc_1_op_res_127681;
            }
            // load acc params
            {
                x_127682 = defunc_2_reduce_res_127308;
            }
            // load next params
            {
                x_127683 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127665)[flat_tid_118817];
            }
            // red body
            {
                float defunc_1_op_res_127684 = x_127682 + x_127683;
                
                defunc_2_reduce_res_127308 = defunc_1_op_res_127684;
            }
            // load acc params
            {
                x_127685 = defunc_2_reduce_res_127309;
            }
            // load next params
            {
                x_127686 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127667)[flat_tid_118817];
            }
            // red body
            {
                float defunc_1_op_res_127687 = x_127685 + x_127686;
                
                defunc_2_reduce_res_127309 = defunc_1_op_res_127687;
            }
            // load acc params
            {
                x_127688 = defunc_2_reduce_res_127310;
            }
            // load next params
            {
                x_127689 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127669)[flat_tid_118817];
            }
            // red body
            {
                float defunc_1_op_res_127690 = x_127688 + x_127689;
                
                defunc_2_reduce_res_127310 = defunc_1_op_res_127690;
            }
            // load acc params
            {
                x_127691 = defunc_2_reduce_res_127311;
            }
            // load next params
            {
                x_127692 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127671)[flat_tid_118817];
            }
            // red body
            {
                float defunc_1_op_res_127693 = x_127691 + x_127692;
                
                defunc_2_reduce_res_127311 = defunc_1_op_res_127693;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127663);
    free(reduce_stage_1_tid_res_arr_mem_127665);
    free(reduce_stage_1_tid_res_arr_mem_127667);
    free(reduce_stage_1_tid_res_arr_mem_127669);
    free(reduce_stage_1_tid_res_arr_mem_127671);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131335_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131335_end -
                 futhark_mc_segred_task_131335_start;
        
        ctx->futhark_mc_segred_task_131335_runs[tid]++;
        ctx->futhark_mc_segred_task_131335_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131335_iter[tid] += iterations;
    }
    *futhark_mc_task_131334->retval_defunc_2_reduce_res_127307 =
        defunc_2_reduce_res_127307;
    *futhark_mc_task_131334->retval_defunc_2_reduce_res_127308 =
        defunc_2_reduce_res_127308;
    *futhark_mc_task_131334->retval_defunc_2_reduce_res_127309 =
        defunc_2_reduce_res_127309;
    *futhark_mc_task_131334->retval_defunc_2_reduce_res_127310 =
        defunc_2_reduce_res_127310;
    *futhark_mc_task_131334->retval_defunc_2_reduce_res_127311 =
        defunc_2_reduce_res_127311;
    futhark_mc_task_131334->retval_mem_127305 = mem_127305.mem;
    futhark_mc_task_131334->retval_mem_127306 = mem_127306.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131343 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118810;
    char *free_mem_122249;
    int64_t free_x_127279;
    char *free_mem_127285;
    char *free_mem_127305;
    char *free_mem_127306;
    float free_a12_127355;
    float free_b12_127356;
    float free_c12_127357;
    float free_b2_127358;
    float free_c2_127359;
    float *retval_defunc_2_reduce_res_127360;
    float *retval_defunc_2_reduce_res_127361;
};
struct futhark_mc_segred_stage_1_parloop_struct_131347 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_118810;
    char *free_mem_122249;
    int64_t free_x_127279;
    char *free_mem_127285;
    char *free_mem_127305;
    char *free_mem_127306;
    float free_a12_127355;
    float free_b12_127356;
    float free_c12_127357;
    float free_b2_127358;
    float free_c2_127359;
    char *free_reduce_stage_1_tid_res_arr_mem_127696;
    char *free_reduce_stage_1_tid_res_arr_mem_127698;
};
static int futhark_mc_segred_stage_1_parloop_131348(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118819,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131347
    *futhark_mc_segred_stage_1_parloop_struct_131347 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131347 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131347->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131348_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131348_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131347->free_n_114463;
    int64_t gtid_118810 =
            futhark_mc_segred_stage_1_parloop_struct_131347->free_gtid_118810;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131347->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_127279 =
            futhark_mc_segred_stage_1_parloop_struct_131347->free_x_127279;
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131347->free_mem_127285,
                                  .size =0, .references =NULL};
    struct memblock mem_127305 = {.desc ="mem_127305", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131347->free_mem_127305,
                                  .size =0, .references =NULL};
    struct memblock mem_127306 = {.desc ="mem_127306", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131347->free_mem_127306,
                                  .size =0, .references =NULL};
    float a12_127355 =
          futhark_mc_segred_stage_1_parloop_struct_131347->free_a12_127355;
    float b12_127356 =
          futhark_mc_segred_stage_1_parloop_struct_131347->free_b12_127356;
    float c12_127357 =
          futhark_mc_segred_stage_1_parloop_struct_131347->free_c12_127357;
    float b2_127358 =
          futhark_mc_segred_stage_1_parloop_struct_131347->free_b2_127358;
    float c2_127359 =
          futhark_mc_segred_stage_1_parloop_struct_131347->free_c2_127359;
    struct memblock reduce_stage_1_tid_res_arr_mem_127696 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127696",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131347->free_reduce_stage_1_tid_res_arr_mem_127696,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127698 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127698",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131347->free_reduce_stage_1_tid_res_arr_mem_127698,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127700 = start;
    float x_127626;
    float x_127627;
    float x_127629;
    float x_127630;
    float local_acc_127701 = 0.0F;
    float local_acc_127702 = 0.0F;
    
    for (; iter_127700 < end; iter_127700++) {
        int64_t gtid_118820 = iter_127700;
        float x_127632 = ((float *) mem_127285.mem)[gtid_118820];
        float x_127633 = ((float *) mem_127306.mem)[gtid_118820];
        float x_127634 = ((float *) mem_127305.mem)[gtid_118820];
        bool cond_127635 = sle64(n_114463, gtid_118820);
        float defunc_0_f_res_127636;
        
        if (cond_127635) {
            defunc_0_f_res_127636 = 0.0F;
        } else {
            int64_t i_127637 = add64(gtid_118820, x_127279);
            float x_127638 = ((float *) mem_122249.mem)[gtid_118810 * n_114463 +
                                                        i_127637];
            
            defunc_0_f_res_127636 = x_127638;
        }
        
        float x_127639 = a12_127355 * x_127632;
        float y_127640 = b12_127356 * x_127633;
        float x_127641 = x_127639 + y_127640;
        float y_127642 = c12_127357 * x_127634;
        float x_127643 = x_127641 + y_127642;
        float defunc_9_fit_fun_res_127644 = defunc_0_f_res_127636 * x_127643;
        float x_127645 = b12_127356 * x_127632;
        float y_127646 = b2_127358 * x_127633;
        float x_127647 = x_127645 + y_127646;
        float y_127648 = c2_127359 * x_127634;
        float x_127649 = x_127647 + y_127648;
        float defunc_9_slope_fun_res_127650 = defunc_0_f_res_127636 * x_127649;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127626 = local_acc_127701;
        }
        // Load next params
        {
            x_127627 = defunc_9_fit_fun_res_127644;
        }
        // Red body
        {
            float defunc_1_op_res_127628 = x_127626 + x_127627;
            
            local_acc_127701 = defunc_1_op_res_127628;
        }
        // Load accum params
        {
            x_127629 = local_acc_127702;
        }
        // Load next params
        {
            x_127630 = defunc_9_slope_fun_res_127650;
        }
        // Red body
        {
            float defunc_1_op_res_127631 = x_127629 + x_127630;
            
            local_acc_127702 = defunc_1_op_res_127631;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127696.mem)[flat_tid_118819] =
        local_acc_127701;
    ((float *) reduce_stage_1_tid_res_arr_mem_127698.mem)[flat_tid_118819] =
        local_acc_127702;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131348_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131348_end -
                 futhark_mc_segred_stage_1_parloop_131348_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131348_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131348_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131348_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131344(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118819 = tid;
    int num_tasks_127695 = info.nsubtasks;
    struct futhark_mc_task_131343 *futhark_mc_task_131343 =
                                  (struct futhark_mc_task_131343 *) args;
    struct futhark_context *ctx = futhark_mc_task_131343->ctx;
    uint64_t futhark_mc_segred_task_131344_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131344_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131343->free_n_114463;
    int64_t gtid_118810 = futhark_mc_task_131343->free_gtid_118810;
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131343->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t x_127279 = futhark_mc_task_131343->free_x_127279;
    struct memblock mem_127285 = {.desc ="mem_127285", .mem =
                                  futhark_mc_task_131343->free_mem_127285,
                                  .size =0, .references =NULL};
    struct memblock mem_127305 = {.desc ="mem_127305", .mem =
                                  futhark_mc_task_131343->free_mem_127305,
                                  .size =0, .references =NULL};
    struct memblock mem_127306 = {.desc ="mem_127306", .mem =
                                  futhark_mc_task_131343->free_mem_127306,
                                  .size =0, .references =NULL};
    float a12_127355 = futhark_mc_task_131343->free_a12_127355;
    float b12_127356 = futhark_mc_task_131343->free_b12_127356;
    float c12_127357 = futhark_mc_task_131343->free_c12_127357;
    float b2_127358 = futhark_mc_task_131343->free_b2_127358;
    float c2_127359 = futhark_mc_task_131343->free_c2_127359;
    float defunc_2_reduce_res_127360 =
          *futhark_mc_task_131343->retval_defunc_2_reduce_res_127360;
    float defunc_2_reduce_res_127361 =
          *futhark_mc_task_131343->retval_defunc_2_reduce_res_127361;
    size_t reduce_stage_1_tid_res_arr_mem_127696_cached_sizze_131345 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127696 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127698_cached_sizze_131346 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127698 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127696_cached_sizze_131345 <
        (size_t) ((int64_t) 4 * num_tasks_127695)) {
        reduce_stage_1_tid_res_arr_mem_127696 =
            realloc(reduce_stage_1_tid_res_arr_mem_127696, (int64_t) 4 *
                    num_tasks_127695);
        reduce_stage_1_tid_res_arr_mem_127696_cached_sizze_131345 =
            (int64_t) 4 * num_tasks_127695;
    }
    if (reduce_stage_1_tid_res_arr_mem_127698_cached_sizze_131346 <
        (size_t) ((int64_t) 4 * num_tasks_127695)) {
        reduce_stage_1_tid_res_arr_mem_127698 =
            realloc(reduce_stage_1_tid_res_arr_mem_127698, (int64_t) 4 *
                    num_tasks_127695);
        reduce_stage_1_tid_res_arr_mem_127698_cached_sizze_131346 =
            (int64_t) 4 * num_tasks_127695;
    }
    
    int64_t iter_127700;
    struct futhark_mc_segred_stage_1_parloop_struct_131347
    futhark_mc_segred_stage_1_parloop_struct_131347;
    
    futhark_mc_segred_stage_1_parloop_struct_131347.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_gtid_118810 =
        gtid_118810;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_mem_122249 =
        mem_122249.mem;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_x_127279 = x_127279;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_mem_127285 =
        mem_127285.mem;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_mem_127305 =
        mem_127305.mem;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_mem_127306 =
        mem_127306.mem;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_a12_127355 =
        a12_127355;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_b12_127356 =
        b12_127356;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_c12_127357 =
        c12_127357;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_b2_127358 = b2_127358;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_c2_127359 = c2_127359;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_reduce_stage_1_tid_res_arr_mem_127696 =
        reduce_stage_1_tid_res_arr_mem_127696;
    futhark_mc_segred_stage_1_parloop_struct_131347.free_reduce_stage_1_tid_res_arr_mem_127698 =
        reduce_stage_1_tid_res_arr_mem_127698;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131348_task;
    
    futhark_mc_segred_stage_1_parloop_131348_task.name =
        "futhark_mc_segred_stage_1_parloop_131348";
    futhark_mc_segred_stage_1_parloop_131348_task.fn =
        futhark_mc_segred_stage_1_parloop_131348;
    futhark_mc_segred_stage_1_parloop_131348_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131347;
    futhark_mc_segred_stage_1_parloop_131348_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131348_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131348_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131348_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131348_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131348_task);
    
    if (futhark_mc_segred_stage_1_parloop_131348_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131348_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131348_total_end -
                 futhark_mc_segred_stage_1_parloop_131348_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131348_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131348_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131348_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127360 = 0.0F;
        defunc_2_reduce_res_127361 = 0.0F;
    }
    
    float x_127703;
    float x_127704;
    float x_127706;
    float x_127707;
    
    for (int32_t i_127709 = 0; i_127709 < num_tasks_127695; i_127709++) {
        flat_tid_118819 = i_127709;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127703 = defunc_2_reduce_res_127360;
            }
            // load next params
            {
                x_127704 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127696)[flat_tid_118819];
            }
            // red body
            {
                float defunc_1_op_res_127705 = x_127703 + x_127704;
                
                defunc_2_reduce_res_127360 = defunc_1_op_res_127705;
            }
            // load acc params
            {
                x_127706 = defunc_2_reduce_res_127361;
            }
            // load next params
            {
                x_127707 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127698)[flat_tid_118819];
            }
            // red body
            {
                float defunc_1_op_res_127708 = x_127706 + x_127707;
                
                defunc_2_reduce_res_127361 = defunc_1_op_res_127708;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127696);
    free(reduce_stage_1_tid_res_arr_mem_127698);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131344_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131344_end -
                 futhark_mc_segred_task_131344_start;
        
        ctx->futhark_mc_segred_task_131344_runs[tid]++;
        ctx->futhark_mc_segred_task_131344_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131344_iter[tid] += iterations;
    }
    *futhark_mc_task_131343->retval_defunc_2_reduce_res_127360 =
        defunc_2_reduce_res_127360;
    *futhark_mc_task_131343->retval_defunc_2_reduce_res_127361 =
        defunc_2_reduce_res_127361;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131325(void *args, int64_t start,
                                            int64_t end, int flat_tid_118813,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131324
    *futhark_mc_segmap_parloop_struct_131324 =
    (struct futhark_mc_segmap_parloop_struct_131324 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131324->ctx;
    uint64_t futhark_mc_segmap_parloop_131325_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131325_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131324->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131324->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131324->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131324->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131324->free_i_114539;
    int64_t gtid_118810 =
            futhark_mc_segmap_parloop_struct_131324->free_gtid_118810;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131324->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131324->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131324->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131324->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131324->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131324->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131324->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 =
            futhark_mc_segmap_parloop_struct_131324->free_bytes_122537;
    struct memblock mem_122611 = {.desc ="mem_122611", .mem =
                                  futhark_mc_segmap_parloop_struct_131324->free_mem_122611,
                                  .size =0, .references =NULL};
    struct memblock mem_122614 = {.desc ="mem_122614", .mem =
                                  futhark_mc_segmap_parloop_struct_131324->free_mem_122614,
                                  .size =0, .references =NULL};
    size_t mem_127284_cached_sizze_131326 = 0;
    char *mem_127284 = NULL;
    size_t mem_127285_cached_sizze_131327 = 0;
    char *mem_127285 = NULL;
    size_t mem_127305_cached_sizze_131328 = 0;
    char *mem_127305 = NULL;
    size_t mem_127306_cached_sizze_131329 = 0;
    char *mem_127306 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127587 = start;
    
    if (mem_127284_cached_sizze_131326 < (size_t) bytes_122537) {
        mem_127284 = realloc(mem_127284, bytes_122537);
        mem_127284_cached_sizze_131326 = bytes_122537;
    }
    if (mem_127285_cached_sizze_131327 < (size_t) bytes_122537) {
        mem_127285 = realloc(mem_127285, bytes_122537);
        mem_127285_cached_sizze_131327 = bytes_122537;
    }
    if (mem_127305_cached_sizze_131328 < (size_t) bytes_122537) {
        mem_127305 = realloc(mem_127305, bytes_122537);
        mem_127305_cached_sizze_131328 = bytes_122537;
    }
    if (mem_127306_cached_sizze_131329 < (size_t) bytes_122537) {
        mem_127306 = realloc(mem_127306, bytes_122537);
        mem_127306_cached_sizze_131329 = bytes_122537;
    }
    for (; iter_127587 < end; iter_127587++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127651 = l_n_m_114513;
        int64_t gtid_118814 = iter_127587;
        int64_t remnant_127652 = iter_127587 - gtid_118814;
        int64_t x_127279 = ((int64_t *) mem_121987.mem)[gtid_118810 *
                                                        l_n_m_114513 +
                                                        gtid_118814];
        float x_127280 = ((float *) mem_121991.mem)[gtid_118810 * l_n_m_114513 +
                                                    gtid_118814];
        int64_t min_arg_127281 = mul64(t_jump_114470, gtid_118814);
        int64_t min_res_127282 = smin64(i_114539, min_arg_127281);
        float defunc_0_f_res_127283 = sitofp_i64_f32(min_res_127282);
        int64_t flat_tid_118815 = (int64_t) 0;
        int32_t num_tasks_127653;
        struct futhark_mc_task_131330 futhark_mc_task_131330;
        
        futhark_mc_task_131330.ctx = ctx;
        futhark_mc_task_131330.free_n_114463 = n_114463;
        futhark_mc_task_131330.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131330.free_gtid_118810 = gtid_118810;
        futhark_mc_task_131330.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131330.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131330.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131330.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131330.free_x_127279 = x_127279;
        futhark_mc_task_131330.free_x_127280 = x_127280;
        futhark_mc_task_131330.free_defunc_0_f_res_127283 =
            defunc_0_f_res_127283;
        futhark_mc_task_131330.free_mem_127284 = mem_127284;
        futhark_mc_task_131330.free_mem_127285 = mem_127285;
        
        struct scheduler_segop futhark_mc_task_131330_task;
        
        futhark_mc_task_131330_task.args = &futhark_mc_task_131330;
        futhark_mc_task_131330_task.top_level_fn =
            futhark_mc_segmap_task_131331;
        futhark_mc_task_131330_task.name = "futhark_mc_segmap_task_131331";
        futhark_mc_task_131330_task.iterations = l_window_114467;
        futhark_mc_task_131330_task.task_time =
            &ctx->futhark_mc_segmap_task_131331_total_time;
        futhark_mc_task_131330_task.task_iter =
            &ctx->futhark_mc_segmap_task_131331_total_iter;
        futhark_mc_task_131330_task.sched = STATIC;
        futhark_mc_task_131330_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131331_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131330_task);
        
        if (futhark_mc_segmap_task_131331_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_127307;
        float defunc_2_reduce_res_127308;
        float defunc_2_reduce_res_127309;
        float defunc_2_reduce_res_127310;
        float defunc_2_reduce_res_127311;
        int64_t flat_tid_118817 = (int64_t) 0;
        int32_t num_tasks_127662;
        struct futhark_mc_task_131334 futhark_mc_task_131334;
        
        futhark_mc_task_131334.ctx = ctx;
        futhark_mc_task_131334.free_mem_127284 = mem_127284;
        futhark_mc_task_131334.free_mem_127285 = mem_127285;
        futhark_mc_task_131334.retval_defunc_2_reduce_res_127307 =
            &defunc_2_reduce_res_127307;
        futhark_mc_task_131334.retval_defunc_2_reduce_res_127308 =
            &defunc_2_reduce_res_127308;
        futhark_mc_task_131334.retval_defunc_2_reduce_res_127309 =
            &defunc_2_reduce_res_127309;
        futhark_mc_task_131334.retval_defunc_2_reduce_res_127310 =
            &defunc_2_reduce_res_127310;
        futhark_mc_task_131334.retval_defunc_2_reduce_res_127311 =
            &defunc_2_reduce_res_127311;
        futhark_mc_task_131334.retval_mem_127305 = mem_127305;
        futhark_mc_task_131334.retval_mem_127306 = mem_127306;
        
        struct scheduler_segop futhark_mc_task_131334_task;
        
        futhark_mc_task_131334_task.args = &futhark_mc_task_131334;
        futhark_mc_task_131334_task.top_level_fn =
            futhark_mc_segred_task_131335;
        futhark_mc_task_131334_task.name = "futhark_mc_segred_task_131335";
        futhark_mc_task_131334_task.iterations = l_window_114467;
        futhark_mc_task_131334_task.task_time =
            &ctx->futhark_mc_segred_task_131335_total_time;
        futhark_mc_task_131334_task.task_iter =
            &ctx->futhark_mc_segred_task_131335_total_iter;
        futhark_mc_task_131334_task.sched = STATIC;
        futhark_mc_task_131334_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131335_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131334_task);
        
        if (futhark_mc_segred_task_131335_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_127335 = defunc_2_reduce_res_127309 *
              defunc_2_reduce_res_127311;
        float y_127336 = defunc_2_reduce_res_127310 *
              defunc_2_reduce_res_127310;
        float a12_127337 = x_127335 - y_127336;
        float x_127338 = defunc_2_reduce_res_127309 *
              defunc_2_reduce_res_127310;
        float y_127339 = defunc_2_reduce_res_127308 *
              defunc_2_reduce_res_127311;
        float b12_127340 = x_127338 - y_127339;
        float x_127341 = defunc_2_reduce_res_127308 *
              defunc_2_reduce_res_127310;
        float y_127342 = defunc_2_reduce_res_127309 *
              defunc_2_reduce_res_127309;
        float c12_127343 = x_127341 - y_127342;
        float x_127344 = defunc_2_reduce_res_127307 *
              defunc_2_reduce_res_127311;
        float b2_127345 = x_127344 - y_127342;
        float x_127346 = defunc_2_reduce_res_127308 *
              defunc_2_reduce_res_127309;
        float y_127347 = defunc_2_reduce_res_127307 *
              defunc_2_reduce_res_127310;
        float c2_127348 = x_127346 - y_127347;
        float x_127349 = defunc_2_reduce_res_127307 * a12_127337;
        float y_127350 = defunc_2_reduce_res_127308 * b12_127340;
        float x_127351 = x_127349 + y_127350;
        float y_127352 = defunc_2_reduce_res_127309 * c12_127343;
        float y_127353 = x_127351 + y_127352;
        float det_127354 = 1.0F / y_127353;
        float a12_127355 = a12_127337 * det_127354;
        float b12_127356 = b12_127340 * det_127354;
        float c12_127357 = c12_127343 * det_127354;
        float b2_127358 = b2_127345 * det_127354;
        float c2_127359 = c2_127348 * det_127354;
        float defunc_2_reduce_res_127360;
        float defunc_2_reduce_res_127361;
        int64_t flat_tid_118819 = (int64_t) 0;
        int32_t num_tasks_127695;
        struct futhark_mc_task_131343 futhark_mc_task_131343;
        
        futhark_mc_task_131343.ctx = ctx;
        futhark_mc_task_131343.free_n_114463 = n_114463;
        futhark_mc_task_131343.free_gtid_118810 = gtid_118810;
        futhark_mc_task_131343.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131343.free_x_127279 = x_127279;
        futhark_mc_task_131343.free_mem_127285 = mem_127285;
        futhark_mc_task_131343.free_mem_127305 = mem_127305;
        futhark_mc_task_131343.free_mem_127306 = mem_127306;
        futhark_mc_task_131343.free_a12_127355 = a12_127355;
        futhark_mc_task_131343.free_b12_127356 = b12_127356;
        futhark_mc_task_131343.free_c12_127357 = c12_127357;
        futhark_mc_task_131343.free_b2_127358 = b2_127358;
        futhark_mc_task_131343.free_c2_127359 = c2_127359;
        futhark_mc_task_131343.retval_defunc_2_reduce_res_127360 =
            &defunc_2_reduce_res_127360;
        futhark_mc_task_131343.retval_defunc_2_reduce_res_127361 =
            &defunc_2_reduce_res_127361;
        
        struct scheduler_segop futhark_mc_task_131343_task;
        
        futhark_mc_task_131343_task.args = &futhark_mc_task_131343;
        futhark_mc_task_131343_task.top_level_fn =
            futhark_mc_segred_task_131344;
        futhark_mc_task_131343_task.name = "futhark_mc_segred_task_131344";
        futhark_mc_task_131343_task.iterations = l_window_114467;
        futhark_mc_task_131343_task.task_time =
            &ctx->futhark_mc_segred_task_131344_total_time;
        futhark_mc_task_131343_task.task_iter =
            &ctx->futhark_mc_segred_task_131344_total_iter;
        futhark_mc_task_131343_task.sched = STATIC;
        futhark_mc_task_131343_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131344_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131343_task);
        
        if (futhark_mc_segred_task_131344_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122611.mem)[gtid_118814] = defunc_2_reduce_res_127360;
        ((float *) mem_122614.mem)[gtid_118814] = defunc_2_reduce_res_127361;
    }
    
  cleanup:
    { }
    free(mem_127284);
    free(mem_127285);
    free(mem_127305);
    free(mem_127306);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131325_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131325_end -
                 futhark_mc_segmap_parloop_131325_start;
        
        ctx->futhark_mc_segmap_parloop_131325_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131325_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131325_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131323(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118813 = tid;
    int num_tasks_127505 = info.nsubtasks;
    struct futhark_mc_task_131315 *futhark_mc_task_131315 =
                                  (struct futhark_mc_task_131315 *) args;
    struct futhark_context *ctx = futhark_mc_task_131315->ctx;
    uint64_t futhark_mc_segmap_nested_task_131323_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131323_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131315->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131315->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131315->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131315->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131315->free_i_114539;
    int64_t gtid_118810 = futhark_mc_task_131315->free_gtid_118810;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131315->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131315->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131315->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131315->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131315->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131315->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131315->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 = futhark_mc_task_131315->free_bytes_122537;
    struct memblock mem_122611 = {.desc ="mem_122611", .mem =
                                  futhark_mc_task_131315->free_mem_122611,
                                  .size =0, .references =NULL};
    struct memblock mem_122614 = {.desc ="mem_122614", .mem =
                                  futhark_mc_task_131315->free_mem_122614,
                                  .size =0, .references =NULL};
    int64_t iter_127587;
    struct futhark_mc_segmap_parloop_struct_131324
    futhark_mc_segmap_parloop_struct_131324;
    
    futhark_mc_segmap_parloop_struct_131324.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131324.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131324.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131324.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131324.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131324.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131324.free_gtid_118810 = gtid_118810;
    futhark_mc_segmap_parloop_struct_131324.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131324.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131324.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131324.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131324.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131324.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131324.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131324.free_bytes_122537 = bytes_122537;
    futhark_mc_segmap_parloop_struct_131324.free_mem_122611 = mem_122611.mem;
    futhark_mc_segmap_parloop_struct_131324.free_mem_122614 = mem_122614.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131325_task;
    
    futhark_mc_segmap_parloop_131325_task.name =
        "futhark_mc_segmap_parloop_131325";
    futhark_mc_segmap_parloop_131325_task.fn = futhark_mc_segmap_parloop_131325;
    futhark_mc_segmap_parloop_131325_task.args =
        &futhark_mc_segmap_parloop_struct_131324;
    futhark_mc_segmap_parloop_131325_task.iterations = iterations;
    futhark_mc_segmap_parloop_131325_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131325_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131325_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131325_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131325_task);
    
    if (futhark_mc_segmap_parloop_131325_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131325_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131325_total_end -
                 futhark_mc_segmap_parloop_131325_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131325_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131325_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131325_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131323_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131323_end -
                 futhark_mc_segmap_nested_task_131323_start;
        
        ctx->futhark_mc_segmap_nested_task_131323_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131323_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131323_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131312(void *args, int64_t start,
                                            int64_t end, int flat_tid_118809,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131311
    *futhark_mc_segmap_parloop_struct_131311 =
    (struct futhark_mc_segmap_parloop_struct_131311 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131311->ctx;
    uint64_t futhark_mc_segmap_parloop_131312_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131312_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131311->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131311->free_n_114463;
    int64_t l_window_114467 =
            futhark_mc_segmap_parloop_struct_131311->free_l_window_114467;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131311->free_t_jump_114470;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131311->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131311->free_i_114539;
    int64_t bytes_121918 =
            futhark_mc_segmap_parloop_struct_131311->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_segmap_parloop_struct_131311->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_segmap_parloop_struct_131311->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131311->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131311->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131311->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131311->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_segmap_parloop_struct_131311->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 =
            futhark_mc_segmap_parloop_struct_131311->free_bytes_122537;
    struct memblock mem_122708 = {.desc ="mem_122708", .mem =
                                  futhark_mc_segmap_parloop_struct_131311->free_mem_122708,
                                  .size =0, .references =NULL};
    struct memblock mem_122712 = {.desc ="mem_122712", .mem =
                                  futhark_mc_segmap_parloop_struct_131311->free_mem_122712,
                                  .size =0, .references =NULL};
    size_t mem_122611_cached_sizze_131313 = 0;
    char *mem_122611 = NULL;
    size_t mem_122614_cached_sizze_131314 = 0;
    char *mem_122614 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127278 = start;
    
    if (mem_122611_cached_sizze_131313 < (size_t) bytes_121918) {
        mem_122611 = realloc(mem_122611, bytes_121918);
        mem_122611_cached_sizze_131313 = bytes_121918;
    }
    if (mem_122614_cached_sizze_131314 < (size_t) bytes_121918) {
        mem_122614 = realloc(mem_122614, bytes_121918);
        mem_122614_cached_sizze_131314 = bytes_121918;
    }
    for (; iter_127278 < end; iter_127278++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127503 = m_114462;
        int64_t gtid_118810 = iter_127278;
        int64_t remnant_127504 = iter_127278 - gtid_118810;
        int64_t flat_tid_118811 = (int64_t) 0;
        int32_t num_tasks_127505;
        int64_t flat_tid_118813 = (int64_t) 0;
        struct futhark_mc_task_131315 futhark_mc_task_131315;
        
        futhark_mc_task_131315.ctx = ctx;
        futhark_mc_task_131315.free_n_114463 = n_114463;
        futhark_mc_task_131315.free_l_window_114467 = l_window_114467;
        futhark_mc_task_131315.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131315.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131315.free_i_114539 = i_114539;
        futhark_mc_task_131315.free_gtid_118810 = gtid_118810;
        futhark_mc_task_131315.free_mem_121987 = mem_121987.mem;
        futhark_mc_task_131315.free_mem_121991 = mem_121991.mem;
        futhark_mc_task_131315.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131315.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131315.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131315.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131315.free_mem_122249 = mem_122249.mem;
        futhark_mc_task_131315.free_bytes_122537 = bytes_122537;
        futhark_mc_task_131315.free_mem_122611 = mem_122611;
        futhark_mc_task_131315.free_mem_122614 = mem_122614;
        
        struct scheduler_segop futhark_mc_task_131315_task;
        
        futhark_mc_task_131315_task.args = &futhark_mc_task_131315;
        futhark_mc_task_131315_task.top_level_fn =
            futhark_mc_segmap_task_131316;
        futhark_mc_task_131315_task.name = "futhark_mc_segmap_task_131316";
        futhark_mc_task_131315_task.iterations = l_n_m_114513;
        futhark_mc_task_131315_task.task_time =
            &ctx->futhark_mc_segmap_task_131316_total_time;
        futhark_mc_task_131315_task.task_iter =
            &ctx->futhark_mc_segmap_task_131316_total_iter;
        futhark_mc_task_131315_task.sched = STATIC;
        futhark_mc_task_131315_task.nested_fn =
            futhark_mc_segmap_nested_task_131323;
        
        int futhark_mc_segmap_task_131316_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131315_task);
        
        if (futhark_mc_segmap_task_131316_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122708.mem + gtid_118810 * l_n_m_114513 * (int64_t) 4,
                mem_122611 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
        memmove(mem_122712.mem + gtid_118810 * l_n_m_114513 * (int64_t) 4,
                mem_122614 + (int64_t) 0, l_n_m_114513 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122611);
    free(mem_122614);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131312_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131312_end -
                 futhark_mc_segmap_parloop_131312_start;
        
        ctx->futhark_mc_segmap_parloop_131312_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131312_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131312_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131310(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118809 = tid;
    int num_tasks_127144 = info.nsubtasks;
    struct futhark_mc_task_131300 *futhark_mc_task_131300 =
                                  (struct futhark_mc_task_131300 *) args;
    struct futhark_context *ctx = futhark_mc_task_131300->ctx;
    uint64_t futhark_mc_segmap_nested_task_131310_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131310_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131300->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131300->free_n_114463;
    int64_t l_window_114467 = futhark_mc_task_131300->free_l_window_114467;
    int64_t t_jump_114470 = futhark_mc_task_131300->free_t_jump_114470;
    int64_t l_n_m_114513 = futhark_mc_task_131300->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131300->free_i_114539;
    int64_t bytes_121918 = futhark_mc_task_131300->free_bytes_121918;
    struct memblock mem_121987 = {.desc ="mem_121987", .mem =
                                  futhark_mc_task_131300->free_mem_121987,
                                  .size =0, .references =NULL};
    struct memblock mem_121991 = {.desc ="mem_121991", .mem =
                                  futhark_mc_task_131300->free_mem_121991,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131300->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131300->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131300->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131300->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122249 = {.desc ="mem_122249", .mem =
                                  futhark_mc_task_131300->free_mem_122249,
                                  .size =0, .references =NULL};
    int64_t bytes_122537 = futhark_mc_task_131300->free_bytes_122537;
    struct memblock mem_122708 = {.desc ="mem_122708", .mem =
                                  futhark_mc_task_131300->free_mem_122708,
                                  .size =0, .references =NULL};
    struct memblock mem_122712 = {.desc ="mem_122712", .mem =
                                  futhark_mc_task_131300->free_mem_122712,
                                  .size =0, .references =NULL};
    int64_t iter_127278;
    struct futhark_mc_segmap_parloop_struct_131311
    futhark_mc_segmap_parloop_struct_131311;
    
    futhark_mc_segmap_parloop_struct_131311.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131311.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131311.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131311.free_l_window_114467 =
        l_window_114467;
    futhark_mc_segmap_parloop_struct_131311.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131311.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131311.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131311.free_bytes_121918 = bytes_121918;
    futhark_mc_segmap_parloop_struct_131311.free_mem_121987 = mem_121987.mem;
    futhark_mc_segmap_parloop_struct_131311.free_mem_121991 = mem_121991.mem;
    futhark_mc_segmap_parloop_struct_131311.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131311.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131311.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131311.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131311.free_mem_122249 = mem_122249.mem;
    futhark_mc_segmap_parloop_struct_131311.free_bytes_122537 = bytes_122537;
    futhark_mc_segmap_parloop_struct_131311.free_mem_122708 = mem_122708.mem;
    futhark_mc_segmap_parloop_struct_131311.free_mem_122712 = mem_122712.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131312_task;
    
    futhark_mc_segmap_parloop_131312_task.name =
        "futhark_mc_segmap_parloop_131312";
    futhark_mc_segmap_parloop_131312_task.fn = futhark_mc_segmap_parloop_131312;
    futhark_mc_segmap_parloop_131312_task.args =
        &futhark_mc_segmap_parloop_struct_131311;
    futhark_mc_segmap_parloop_131312_task.iterations = iterations;
    futhark_mc_segmap_parloop_131312_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131312_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131312_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131312_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131312_task);
    
    if (futhark_mc_segmap_parloop_131312_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131312_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131312_total_end -
                 futhark_mc_segmap_parloop_131312_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131312_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131312_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131312_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131310_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131310_end -
                 futhark_mc_segmap_nested_task_131310_start;
        
        ctx->futhark_mc_segmap_nested_task_131310_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131310_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131310_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131349 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_y_115683;
    int64_t free_bytes_121846;
    char *free_ext_mem_122717;
    char *free_ext_mem_122718;
    char *free_mem_122740;
};
struct futhark_mc_segmap_parloop_struct_131351 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_y_115683;
    int64_t free_bytes_121846;
    char *free_ext_mem_122717;
    char *free_ext_mem_122718;
    char *free_mem_122740;
};
static int futhark_mc_segmap_parloop_131352(void *args, int64_t start,
                                            int64_t end, int flat_tid_119148,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131351
    *futhark_mc_segmap_parloop_struct_131351 =
    (struct futhark_mc_segmap_parloop_struct_131351 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131351->ctx;
    uint64_t futhark_mc_segmap_parloop_131352_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131352_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131351->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131351->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_131351->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131351->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131351->free_i_114539;
    int64_t y_115683 = futhark_mc_segmap_parloop_struct_131351->free_y_115683;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131351->free_bytes_121846;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_segmap_parloop_struct_131351->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_segmap_parloop_struct_131351->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122740 = {.desc ="mem_122740", .mem =
                                  futhark_mc_segmap_parloop_struct_131351->free_mem_122740,
                                  .size =0, .references =NULL};
    size_t mem_122724_cached_sizze_131353 = 0;
    char *mem_122724 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127711 = start;
    
    if (mem_122724_cached_sizze_131353 < (size_t) bytes_121846) {
        mem_122724 = realloc(mem_122724, bytes_121846);
        mem_122724_cached_sizze_131353 = bytes_121846;
    }
    for (; iter_127711 < end; iter_127711++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127761 = m_114462;
        int64_t gtid_119149 = iter_127711;
        int64_t remnant_127762 = iter_127711 - gtid_119149;
        
        for (int64_t i_127712 = 0; i_127712 < n_114463; i_127712++) {
            int64_t m_v_127714 = sdiv64(i_127712, l_jump_114471);
            bool cond_127715 = m_v_127714 == y_115683;
            int64_t j_127716;
            
            if (cond_127715) {
                int64_t j_t_res_127717 = sub64(m_v_127714, (int64_t) 1);
                
                j_127716 = j_t_res_127717;
            } else {
                j_127716 = m_v_127714;
            }
            
            int64_t min_arg_127718 = mul64(l_jump_114471, j_127716);
            int64_t min_res_127719 = smin64(i_114539, min_arg_127718);
            int64_t defunc_0_m_fun_arg_127720 = add64((int64_t) 1, j_127716);
            int64_t min_arg_127721 = mul64(l_jump_114471,
                                           defunc_0_m_fun_arg_127720);
            int64_t min_res_127722 = smin64(i_114539, min_arg_127721);
            int64_t i64_arg_127723 = sub64(min_res_127722, min_res_127719);
            float i64_res_127724 = sitofp_i64_f32(i64_arg_127723);
            int64_t i64_arg_127725 = sub64(i_127712, min_res_127719);
            float i64_res_127726 = sitofp_i64_f32(i64_arg_127725);
            float u_127727 = i64_res_127726 / i64_res_127724;
            float u2_127728 = u_127727 * u_127727;
            float u3_127729 = u_127727 * u2_127728;
            float x_127730 = 2.0F * u3_127729;
            float y_127731 = 3.0F * u2_127728;
            float x_127732 = x_127730 - y_127731;
            float x_127733 = 1.0F + x_127732;
            bool x_127734 = sle64((int64_t) 0, j_127716);
            bool y_127735 = slt64(j_127716, l_n_m_114513);
            bool bounds_check_127736 = x_127734 && y_127735;
            bool index_certs_127737;
            
            if (!bounds_check_127736) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_127716,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_114513, "].",
                              "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127738 = ((float *) ext_mem_122718.mem)[gtid_119149 *
                                                            l_n_m_114513 +
                                                            j_127716];
            float x_127739 = x_127733 * y_127738;
            float x_127740 = y_127731 - x_127730;
            bool x_127741 = sle64((int64_t) 0, defunc_0_m_fun_arg_127720);
            bool y_127742 = slt64(defunc_0_m_fun_arg_127720, l_n_m_114513);
            bool bounds_check_127743 = x_127741 && y_127742;
            bool index_certs_127744;
            
            if (!bounds_check_127743) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_127720,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_114513, "].",
                              "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127745 = ((float *) ext_mem_122718.mem)[gtid_119149 *
                                                            l_n_m_114513 +
                                                            defunc_0_m_fun_arg_127720];
            float y_127746 = x_127740 * y_127745;
            float x_127747 = x_127739 + y_127746;
            float y_127748 = 2.0F * u2_127728;
            float x_127749 = u3_127729 - y_127748;
            float x_127750 = u_127727 + x_127749;
            float y_127751 = ((float *) ext_mem_122717.mem)[gtid_119149 *
                                                            l_n_m_114513 +
                                                            j_127716];
            float x_127752 = x_127750 * y_127751;
            float y_127753 = i64_res_127724 * x_127752;
            float x_127754 = x_127747 + y_127753;
            float x_127755 = u3_127729 - u2_127728;
            float y_127756 = ((float *) ext_mem_122717.mem)[gtid_119149 *
                                                            l_n_m_114513 +
                                                            defunc_0_m_fun_arg_127720];
            float x_127757 = x_127755 * y_127756;
            float y_127758 = i64_res_127724 * x_127757;
            float defunc_0_f_res_127759 = x_127754 + y_127758;
            
            ((float *) mem_122724)[i_127712] = defunc_0_f_res_127759;
        }
        memmove(mem_122740.mem + gtid_119149 * n_114463 * (int64_t) 4,
                mem_122724 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122724);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131352_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131352_end -
                 futhark_mc_segmap_parloop_131352_start;
        
        ctx->futhark_mc_segmap_parloop_131352_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131352_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131352_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131350(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119148 = tid;
    int num_tasks_127710 = info.nsubtasks;
    struct futhark_mc_task_131349 *futhark_mc_task_131349 =
                                  (struct futhark_mc_task_131349 *) args;
    struct futhark_context *ctx = futhark_mc_task_131349->ctx;
    uint64_t futhark_mc_segmap_task_131350_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131350_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131349->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131349->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_131349->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_131349->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131349->free_i_114539;
    int64_t y_115683 = futhark_mc_task_131349->free_y_115683;
    int64_t bytes_121846 = futhark_mc_task_131349->free_bytes_121846;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_task_131349->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_task_131349->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122740 = {.desc ="mem_122740", .mem =
                                  futhark_mc_task_131349->free_mem_122740,
                                  .size =0, .references =NULL};
    int64_t iter_127711;
    struct futhark_mc_segmap_parloop_struct_131351
    futhark_mc_segmap_parloop_struct_131351;
    
    futhark_mc_segmap_parloop_struct_131351.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131351.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131351.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131351.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_131351.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131351.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131351.free_y_115683 = y_115683;
    futhark_mc_segmap_parloop_struct_131351.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131351.free_ext_mem_122717 =
        ext_mem_122717.mem;
    futhark_mc_segmap_parloop_struct_131351.free_ext_mem_122718 =
        ext_mem_122718.mem;
    futhark_mc_segmap_parloop_struct_131351.free_mem_122740 = mem_122740.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131352_task;
    
    futhark_mc_segmap_parloop_131352_task.name =
        "futhark_mc_segmap_parloop_131352";
    futhark_mc_segmap_parloop_131352_task.fn = futhark_mc_segmap_parloop_131352;
    futhark_mc_segmap_parloop_131352_task.args =
        &futhark_mc_segmap_parloop_struct_131351;
    futhark_mc_segmap_parloop_131352_task.iterations = iterations;
    futhark_mc_segmap_parloop_131352_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131352_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131352_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131352_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131352_task);
    
    if (futhark_mc_segmap_parloop_131352_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131352_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131352_total_end -
                 futhark_mc_segmap_parloop_131352_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131352_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131352_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131352_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131350_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131350_end -
                 futhark_mc_segmap_task_131350_start;
        
        ctx->futhark_mc_segmap_task_131350_runs[tid]++;
        ctx->futhark_mc_segmap_task_131350_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131350_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131355 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_y_115683;
    int64_t free_bytes_121846;
    char *free_ext_mem_122717;
    char *free_ext_mem_122718;
    char *free_mem_122740;
};
struct futhark_mc_task_131358 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_y_115683;
    int64_t free_gtid_119151;
    char *free_ext_mem_122717;
    char *free_ext_mem_122718;
    char *free_mem_122721;
};
struct futhark_mc_segmap_parloop_struct_131360 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_l_jump_114471;
    int64_t free_l_n_m_114513;
    int64_t free_i_114539;
    int64_t free_y_115683;
    int64_t free_gtid_119151;
    char *free_ext_mem_122717;
    char *free_ext_mem_122718;
    char *free_mem_122721;
};
static int futhark_mc_segmap_parloop_131361(void *args, int64_t start,
                                            int64_t end, int flat_tid_119152,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131360
    *futhark_mc_segmap_parloop_struct_131360 =
    (struct futhark_mc_segmap_parloop_struct_131360 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131360->ctx;
    uint64_t futhark_mc_segmap_parloop_131361_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131361_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131360->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_131360->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131360->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131360->free_i_114539;
    int64_t y_115683 = futhark_mc_segmap_parloop_struct_131360->free_y_115683;
    int64_t gtid_119151 =
            futhark_mc_segmap_parloop_struct_131360->free_gtid_119151;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_segmap_parloop_struct_131360->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_segmap_parloop_struct_131360->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122721 = {.desc ="mem_122721", .mem =
                                  futhark_mc_segmap_parloop_struct_131360->free_mem_122721,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127814 = start;
    
    for (; iter_127814 < end; iter_127814++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127816 = n_114463;
        int64_t gtid_119153 = iter_127814;
        int64_t remnant_127817 = iter_127814 - gtid_119153;
        int64_t m_v_127765 = sdiv64(gtid_119153, l_jump_114471);
        bool cond_127766 = m_v_127765 == y_115683;
        int64_t j_127767;
        
        if (cond_127766) {
            int64_t j_t_res_127815 = sub64(m_v_127765, (int64_t) 1);
            
            j_127767 = j_t_res_127815;
        } else {
            j_127767 = m_v_127765;
        }
        
        int64_t min_arg_127769 = mul64(l_jump_114471, j_127767);
        int64_t min_res_127770 = smin64(i_114539, min_arg_127769);
        int64_t defunc_0_m_fun_arg_127771 = add64((int64_t) 1, j_127767);
        int64_t min_arg_127772 = mul64(l_jump_114471,
                                       defunc_0_m_fun_arg_127771);
        int64_t min_res_127773 = smin64(i_114539, min_arg_127772);
        int64_t i64_arg_127774 = sub64(min_res_127773, min_res_127770);
        float i64_res_127775 = sitofp_i64_f32(i64_arg_127774);
        int64_t i64_arg_127776 = sub64(gtid_119153, min_res_127770);
        float i64_res_127777 = sitofp_i64_f32(i64_arg_127776);
        float u_127778 = i64_res_127777 / i64_res_127775;
        float u2_127779 = u_127778 * u_127778;
        float u3_127780 = u_127778 * u2_127779;
        float x_127781 = 2.0F * u3_127780;
        float y_127782 = 3.0F * u2_127779;
        float x_127783 = x_127781 - y_127782;
        float x_127784 = 1.0F + x_127783;
        bool x_127785 = sle64((int64_t) 0, j_127767);
        bool y_127786 = slt64(j_127767, l_n_m_114513);
        bool bounds_check_127787 = x_127785 && y_127786;
        bool index_certs_127788;
        
        if (!bounds_check_127787) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_127767,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_114513, "].",
                                   "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127789 = ((float *) ext_mem_122718.mem)[gtid_119151 *
                                                        l_n_m_114513 +
                                                        j_127767];
        float x_127790 = x_127784 * y_127789;
        float x_127791 = y_127782 - x_127781;
        bool x_127792 = sle64((int64_t) 0, defunc_0_m_fun_arg_127771);
        bool y_127793 = slt64(defunc_0_m_fun_arg_127771, l_n_m_114513);
        bool bounds_check_127794 = x_127792 && y_127793;
        bool index_certs_127795;
        
        if (!bounds_check_127794) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_127771,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_114513, "].",
                                   "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127796 = ((float *) ext_mem_122718.mem)[gtid_119151 *
                                                        l_n_m_114513 +
                                                        defunc_0_m_fun_arg_127771];
        float y_127797 = x_127791 * y_127796;
        float x_127798 = x_127790 + y_127797;
        float y_127799 = 2.0F * u2_127779;
        float x_127800 = u3_127780 - y_127799;
        float x_127801 = u_127778 + x_127800;
        float y_127802 = ((float *) ext_mem_122717.mem)[gtid_119151 *
                                                        l_n_m_114513 +
                                                        j_127767];
        float x_127803 = x_127801 * y_127802;
        float y_127804 = i64_res_127775 * x_127803;
        float x_127805 = x_127798 + y_127804;
        float x_127806 = u3_127780 - u2_127779;
        float y_127807 = ((float *) ext_mem_122717.mem)[gtid_119151 *
                                                        l_n_m_114513 +
                                                        defunc_0_m_fun_arg_127771];
        float x_127808 = x_127806 * y_127807;
        float y_127809 = i64_res_127775 * x_127808;
        float defunc_0_f_res_127810 = x_127805 + y_127809;
        
        ((float *) mem_122721.mem)[gtid_119153] = defunc_0_f_res_127810;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131361_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131361_end -
                 futhark_mc_segmap_parloop_131361_start;
        
        ctx->futhark_mc_segmap_parloop_131361_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131361_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131361_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131359(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119152 = tid;
    int num_tasks_127813 = info.nsubtasks;
    struct futhark_mc_task_131358 *futhark_mc_task_131358 =
                                  (struct futhark_mc_task_131358 *) args;
    struct futhark_context *ctx = futhark_mc_task_131358->ctx;
    uint64_t futhark_mc_segmap_task_131359_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131359_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131358->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_131358->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_131358->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131358->free_i_114539;
    int64_t y_115683 = futhark_mc_task_131358->free_y_115683;
    int64_t gtid_119151 = futhark_mc_task_131358->free_gtid_119151;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_task_131358->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_task_131358->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122721 = {.desc ="mem_122721", .mem =
                                  futhark_mc_task_131358->free_mem_122721,
                                  .size =0, .references =NULL};
    int64_t iter_127814;
    struct futhark_mc_segmap_parloop_struct_131360
    futhark_mc_segmap_parloop_struct_131360;
    
    futhark_mc_segmap_parloop_struct_131360.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131360.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131360.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_131360.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131360.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131360.free_y_115683 = y_115683;
    futhark_mc_segmap_parloop_struct_131360.free_gtid_119151 = gtid_119151;
    futhark_mc_segmap_parloop_struct_131360.free_ext_mem_122717 =
        ext_mem_122717.mem;
    futhark_mc_segmap_parloop_struct_131360.free_ext_mem_122718 =
        ext_mem_122718.mem;
    futhark_mc_segmap_parloop_struct_131360.free_mem_122721 = mem_122721.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131361_task;
    
    futhark_mc_segmap_parloop_131361_task.name =
        "futhark_mc_segmap_parloop_131361";
    futhark_mc_segmap_parloop_131361_task.fn = futhark_mc_segmap_parloop_131361;
    futhark_mc_segmap_parloop_131361_task.args =
        &futhark_mc_segmap_parloop_struct_131360;
    futhark_mc_segmap_parloop_131361_task.iterations = iterations;
    futhark_mc_segmap_parloop_131361_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131361_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131361_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131361_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131361_task);
    
    if (futhark_mc_segmap_parloop_131361_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131361_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131361_total_end -
                 futhark_mc_segmap_parloop_131361_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131361_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131361_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131361_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131359_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131359_end -
                 futhark_mc_segmap_task_131359_start;
        
        ctx->futhark_mc_segmap_task_131359_runs[tid]++;
        ctx->futhark_mc_segmap_task_131359_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131359_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131356(void *args, int64_t start,
                                            int64_t end, int flat_tid_119150,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131355
    *futhark_mc_segmap_parloop_struct_131355 =
    (struct futhark_mc_segmap_parloop_struct_131355 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131355->ctx;
    uint64_t futhark_mc_segmap_parloop_131356_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131356_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131355->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131355->free_n_114463;
    int64_t l_jump_114471 =
            futhark_mc_segmap_parloop_struct_131355->free_l_jump_114471;
    int64_t l_n_m_114513 =
            futhark_mc_segmap_parloop_struct_131355->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131355->free_i_114539;
    int64_t y_115683 = futhark_mc_segmap_parloop_struct_131355->free_y_115683;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131355->free_bytes_121846;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_segmap_parloop_struct_131355->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_segmap_parloop_struct_131355->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122740 = {.desc ="mem_122740", .mem =
                                  futhark_mc_segmap_parloop_struct_131355->free_mem_122740,
                                  .size =0, .references =NULL};
    size_t mem_122721_cached_sizze_131357 = 0;
    char *mem_122721 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127764 = start;
    
    if (mem_122721_cached_sizze_131357 < (size_t) bytes_121846) {
        mem_122721 = realloc(mem_122721, bytes_121846);
        mem_122721_cached_sizze_131357 = bytes_121846;
    }
    for (; iter_127764 < end; iter_127764++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127811 = m_114462;
        int64_t gtid_119151 = iter_127764;
        int64_t remnant_127812 = iter_127764 - gtid_119151;
        int64_t flat_tid_119152 = (int64_t) 0;
        int32_t num_tasks_127813;
        struct futhark_mc_task_131358 futhark_mc_task_131358;
        
        futhark_mc_task_131358.ctx = ctx;
        futhark_mc_task_131358.free_n_114463 = n_114463;
        futhark_mc_task_131358.free_l_jump_114471 = l_jump_114471;
        futhark_mc_task_131358.free_l_n_m_114513 = l_n_m_114513;
        futhark_mc_task_131358.free_i_114539 = i_114539;
        futhark_mc_task_131358.free_y_115683 = y_115683;
        futhark_mc_task_131358.free_gtid_119151 = gtid_119151;
        futhark_mc_task_131358.free_ext_mem_122717 = ext_mem_122717.mem;
        futhark_mc_task_131358.free_ext_mem_122718 = ext_mem_122718.mem;
        futhark_mc_task_131358.free_mem_122721 = mem_122721;
        
        struct scheduler_segop futhark_mc_task_131358_task;
        
        futhark_mc_task_131358_task.args = &futhark_mc_task_131358;
        futhark_mc_task_131358_task.top_level_fn =
            futhark_mc_segmap_task_131359;
        futhark_mc_task_131358_task.name = "futhark_mc_segmap_task_131359";
        futhark_mc_task_131358_task.iterations = n_114463;
        futhark_mc_task_131358_task.task_time =
            &ctx->futhark_mc_segmap_task_131359_total_time;
        futhark_mc_task_131358_task.task_iter =
            &ctx->futhark_mc_segmap_task_131359_total_iter;
        futhark_mc_task_131358_task.sched = STATIC;
        futhark_mc_task_131358_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131359_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131358_task);
        
        if (futhark_mc_segmap_task_131359_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122740.mem + gtid_119151 * n_114463 * (int64_t) 4,
                mem_122721 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122721);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131356_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131356_end -
                 futhark_mc_segmap_parloop_131356_start;
        
        ctx->futhark_mc_segmap_parloop_131356_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131356_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131356_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131354(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119150 = tid;
    int num_tasks_127710 = info.nsubtasks;
    struct futhark_mc_task_131349 *futhark_mc_task_131349 =
                                  (struct futhark_mc_task_131349 *) args;
    struct futhark_context *ctx = futhark_mc_task_131349->ctx;
    uint64_t futhark_mc_segmap_nested_task_131354_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131354_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131349->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131349->free_n_114463;
    int64_t l_jump_114471 = futhark_mc_task_131349->free_l_jump_114471;
    int64_t l_n_m_114513 = futhark_mc_task_131349->free_l_n_m_114513;
    int64_t i_114539 = futhark_mc_task_131349->free_i_114539;
    int64_t y_115683 = futhark_mc_task_131349->free_y_115683;
    int64_t bytes_121846 = futhark_mc_task_131349->free_bytes_121846;
    struct memblock ext_mem_122717 = {.desc ="ext_mem_122717", .mem =
                                      futhark_mc_task_131349->free_ext_mem_122717,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_122718 = {.desc ="ext_mem_122718", .mem =
                                      futhark_mc_task_131349->free_ext_mem_122718,
                                      .size =0, .references =NULL};
    struct memblock mem_122740 = {.desc ="mem_122740", .mem =
                                  futhark_mc_task_131349->free_mem_122740,
                                  .size =0, .references =NULL};
    int64_t iter_127764;
    struct futhark_mc_segmap_parloop_struct_131355
    futhark_mc_segmap_parloop_struct_131355;
    
    futhark_mc_segmap_parloop_struct_131355.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131355.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131355.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131355.free_l_jump_114471 = l_jump_114471;
    futhark_mc_segmap_parloop_struct_131355.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_segmap_parloop_struct_131355.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131355.free_y_115683 = y_115683;
    futhark_mc_segmap_parloop_struct_131355.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131355.free_ext_mem_122717 =
        ext_mem_122717.mem;
    futhark_mc_segmap_parloop_struct_131355.free_ext_mem_122718 =
        ext_mem_122718.mem;
    futhark_mc_segmap_parloop_struct_131355.free_mem_122740 = mem_122740.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131356_task;
    
    futhark_mc_segmap_parloop_131356_task.name =
        "futhark_mc_segmap_parloop_131356";
    futhark_mc_segmap_parloop_131356_task.fn = futhark_mc_segmap_parloop_131356;
    futhark_mc_segmap_parloop_131356_task.args =
        &futhark_mc_segmap_parloop_struct_131355;
    futhark_mc_segmap_parloop_131356_task.iterations = iterations;
    futhark_mc_segmap_parloop_131356_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131356_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131356_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131356_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131356_task);
    
    if (futhark_mc_segmap_parloop_131356_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131356_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131356_total_end -
                 futhark_mc_segmap_parloop_131356_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131356_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131356_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131356_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131354_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131354_end -
                 futhark_mc_segmap_nested_task_131354_start;
        
        ctx->futhark_mc_segmap_nested_task_131354_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131354_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131354_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131362 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_Y_mem_121802;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122191;
    char *free_ext_mem_122741;
    int64_t free_ext_122742;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122826;
};
struct futhark_mc_segmap_parloop_struct_131364 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_Y_mem_121802;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122191;
    char *free_ext_mem_122741;
    int64_t free_ext_122742;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122826;
};
static int futhark_mc_segmap_parloop_131365(void *args, int64_t start,
                                            int64_t end, int flat_tid_119204,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131364
    *futhark_mc_segmap_parloop_struct_131364 =
    (struct futhark_mc_segmap_parloop_struct_131364 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131364->ctx;
    uint64_t futhark_mc_segmap_parloop_131365_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131365_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131364->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131364->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131364->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131364->free_C_len_114511;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131364->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131364->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131364->free_bytes_121846;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131364->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131364->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131364->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131364->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131364->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_segmap_parloop_struct_131364->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 =
            futhark_mc_segmap_parloop_struct_131364->free_ext_122742;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131364->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131364->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122826 = {.desc ="mem_122826", .mem =
                                  futhark_mc_segmap_parloop_struct_131364->free_mem_122826,
                                  .size =0, .references =NULL};
    size_t mem_122757_cached_sizze_131366 = 0;
    char *mem_122757 = NULL;
    size_t mem_122760_cached_sizze_131367 = 0;
    char *mem_122760 = NULL;
    size_t mem_122787_cached_sizze_131368 = 0;
    char *mem_122787 = NULL;
    size_t mem_122790_cached_sizze_131369 = 0;
    char *mem_122790 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127819 = start;
    
    if (mem_122757_cached_sizze_131366 < (size_t) bytes_121846) {
        mem_122757 = realloc(mem_122757, bytes_121846);
        mem_122757_cached_sizze_131366 = bytes_121846;
    }
    if (mem_122760_cached_sizze_131367 < (size_t) bytes_121846) {
        mem_122760 = realloc(mem_122760, bytes_121846);
        mem_122760_cached_sizze_131367 = bytes_121846;
    }
    if (mem_122787_cached_sizze_131368 < (size_t) bytes_121846) {
        mem_122787 = realloc(mem_122787, bytes_121846);
        mem_122787_cached_sizze_131368 = bytes_121846;
    }
    if (mem_122790_cached_sizze_131369 < (size_t) bytes_121846) {
        mem_122790 = realloc(mem_122790, bytes_121846);
        mem_122790_cached_sizze_131369 = bytes_121846;
    }
    for (; iter_127819 < end; iter_127819++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127848 = m_114462;
        int64_t gtid_119205 = iter_127819;
        int64_t remnant_127849 = iter_127819 - gtid_119205;
        
        for (int64_t i_127820 = 0; i_127820 < n_114463; i_127820++) {
            int64_t slice_127823 = n_p_114465 + i_127820;
            float x_127824 = ((float *) mem_122191.mem)[gtid_119205 *
                                                        C_len_114511 +
                                                        slice_127823];
            float x_127825 = ((float *) ext_mem_122741.mem)[gtid_119205 *
                                                            ext_122742 +
                                                            i_127820];
            float x_127826 = ((float *) Y_mem_121802.mem)[gtid_119205 *
                                                          n_114463 + i_127820];
            float defunc_1_f_res_127827 = x_127824 - x_127825;
            float defunc_1_f_res_127828 = x_127826 - defunc_1_f_res_127827;
            
            ((float *) mem_122757)[i_127820] = defunc_1_f_res_127828;
            ((float *) mem_122760)[i_127820] = defunc_1_f_res_127827;
        }
        for (int64_t i_127831 = 0; i_127831 < n_114463; i_127831++) {
            int64_t x_127834 = ((int64_t *) mem_121842.mem)[gtid_119205 *
                                                            n_114463 +
                                                            i_127831];
            bool cond_127835 = sle64((int64_t) 0, x_127834);
            float defunc_0_f_res_127836;
            
            if (cond_127835) {
                bool y_127837 = slt64(x_127834, n_114463);
                bool bounds_check_127838 = cond_127835 && y_127837;
                bool index_certs_127839;
                
                if (!bounds_check_127838) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_127834,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_127840 =
                      ((float *) mem_122757)[x_127834];
                
                defunc_0_f_res_127836 = defunc_0_f_res_t_res_127840;
            } else {
                defunc_0_f_res_127836 = 0.0F;
            }
            
            float defunc_0_f_res_127841;
            
            if (cond_127835) {
                bool y_127842 = slt64(x_127834, n_114463);
                bool bounds_check_127843 = cond_127835 && y_127842;
                bool index_certs_127844;
                
                if (!bounds_check_127843) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_127834,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_127845 =
                      ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                       (gtid_119205 *
                                                        ctx_param_ext_122099 +
                                                        x_127834 *
                                                        ctx_param_ext_122101)];
                
                defunc_0_f_res_127841 = defunc_0_f_res_t_res_127845;
            } else {
                defunc_0_f_res_127841 = 0.0F;
            }
            ((float *) mem_122787)[i_127831] = defunc_0_f_res_127841;
            ((float *) mem_122790)[i_127831] = defunc_0_f_res_127836;
        }
        memmove(mem_122818.mem + gtid_119205 * n_114463 * (int64_t) 4,
                mem_122790 + (int64_t) 0, n_114463 * (int64_t) 4);
        memmove(mem_122822.mem + gtid_119205 * n_114463 * (int64_t) 4,
                mem_122787 + (int64_t) 0, n_114463 * (int64_t) 4);
        memmove(mem_122826.mem + gtid_119205 * n_114463 * (int64_t) 4,
                mem_122760 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122757);
    free(mem_122760);
    free(mem_122787);
    free(mem_122790);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131365_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131365_end -
                 futhark_mc_segmap_parloop_131365_start;
        
        ctx->futhark_mc_segmap_parloop_131365_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131365_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131365_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131363(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119204 = tid;
    int num_tasks_127818 = info.nsubtasks;
    struct futhark_mc_task_131362 *futhark_mc_task_131362 =
                                  (struct futhark_mc_task_131362 *) args;
    struct futhark_context *ctx = futhark_mc_task_131362->ctx;
    uint64_t futhark_mc_segmap_task_131363_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131363_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131362->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131362->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131362->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131362->free_C_len_114511;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131362->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131362->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131362->free_bytes_121846;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131362->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131362->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131362->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131362->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131362->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_task_131362->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 = futhark_mc_task_131362->free_ext_122742;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131362->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131362->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122826 = {.desc ="mem_122826", .mem =
                                  futhark_mc_task_131362->free_mem_122826,
                                  .size =0, .references =NULL};
    int64_t iter_127819;
    struct futhark_mc_segmap_parloop_struct_131364
    futhark_mc_segmap_parloop_struct_131364;
    
    futhark_mc_segmap_parloop_struct_131364.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131364.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131364.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131364.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131364.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131364.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131364.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131364.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131364.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131364.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131364.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131364.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131364.free_mem_122191 = mem_122191.mem;
    futhark_mc_segmap_parloop_struct_131364.free_ext_mem_122741 =
        ext_mem_122741.mem;
    futhark_mc_segmap_parloop_struct_131364.free_ext_122742 = ext_122742;
    futhark_mc_segmap_parloop_struct_131364.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131364.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131364.free_mem_122826 = mem_122826.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131365_task;
    
    futhark_mc_segmap_parloop_131365_task.name =
        "futhark_mc_segmap_parloop_131365";
    futhark_mc_segmap_parloop_131365_task.fn = futhark_mc_segmap_parloop_131365;
    futhark_mc_segmap_parloop_131365_task.args =
        &futhark_mc_segmap_parloop_struct_131364;
    futhark_mc_segmap_parloop_131365_task.iterations = iterations;
    futhark_mc_segmap_parloop_131365_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131365_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131365_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131365_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131365_task);
    
    if (futhark_mc_segmap_parloop_131365_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131365_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131365_total_end -
                 futhark_mc_segmap_parloop_131365_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131365_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131365_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131365_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131363_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131363_end -
                 futhark_mc_segmap_task_131363_start;
        
        ctx->futhark_mc_segmap_task_131363_runs[tid]++;
        ctx->futhark_mc_segmap_task_131363_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131363_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131371 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    char *free_Y_mem_121802;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122191;
    char *free_ext_mem_122741;
    int64_t free_ext_122742;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122826;
};
struct futhark_mc_task_131377 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    int64_t free_gtid_119207;
    char *free_Y_mem_121802;
    char *free_mem_122191;
    char *free_ext_mem_122741;
    int64_t free_ext_122742;
    char *free_mem_122745;
    char *free_mem_122748;
};
struct futhark_mc_segmap_parloop_struct_131379 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_n_p_114465;
    int64_t free_C_len_114511;
    int64_t free_gtid_119207;
    char *free_Y_mem_121802;
    char *free_mem_122191;
    char *free_ext_mem_122741;
    int64_t free_ext_122742;
    char *free_mem_122745;
    char *free_mem_122748;
};
static int futhark_mc_segmap_parloop_131380(void *args, int64_t start,
                                            int64_t end, int flat_tid_119208,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131379
    *futhark_mc_segmap_parloop_struct_131379 =
    (struct futhark_mc_segmap_parloop_struct_131379 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131379->ctx;
    uint64_t futhark_mc_segmap_parloop_131380_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131380_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131379->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131379->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131379->free_C_len_114511;
    int64_t gtid_119207 =
            futhark_mc_segmap_parloop_struct_131379->free_gtid_119207;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131379->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131379->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_segmap_parloop_struct_131379->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 =
            futhark_mc_segmap_parloop_struct_131379->free_ext_122742;
    struct memblock mem_122745 = {.desc ="mem_122745", .mem =
                                  futhark_mc_segmap_parloop_struct_131379->free_mem_122745,
                                  .size =0, .references =NULL};
    struct memblock mem_122748 = {.desc ="mem_122748", .mem =
                                  futhark_mc_segmap_parloop_struct_131379->free_mem_122748,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127876 = start;
    
    for (; iter_127876 < end; iter_127876++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127877 = n_114463;
        int64_t gtid_119209 = iter_127876;
        int64_t remnant_127878 = iter_127876 - gtid_119209;
        int64_t slice_127855 = n_p_114465 + gtid_119209;
        float x_127856 = ((float *) mem_122191.mem)[gtid_119207 * C_len_114511 +
                                                    slice_127855];
        float x_127857 = ((float *) ext_mem_122741.mem)[gtid_119207 *
                                                        ext_122742 +
                                                        gtid_119209];
        float x_127858 = ((float *) Y_mem_121802.mem)[gtid_119207 * n_114463 +
                                                      gtid_119209];
        float defunc_1_f_res_127859 = x_127856 - x_127857;
        float defunc_1_f_res_127860 = x_127858 - defunc_1_f_res_127859;
        
        ((float *) mem_122745.mem)[gtid_119209] = defunc_1_f_res_127860;
        ((float *) mem_122748.mem)[gtid_119209] = defunc_1_f_res_127859;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131380_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131380_end -
                 futhark_mc_segmap_parloop_131380_start;
        
        ctx->futhark_mc_segmap_parloop_131380_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131380_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131380_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131378(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119208 = tid;
    int num_tasks_127875 = info.nsubtasks;
    struct futhark_mc_task_131377 *futhark_mc_task_131377 =
                                  (struct futhark_mc_task_131377 *) args;
    struct futhark_context *ctx = futhark_mc_task_131377->ctx;
    uint64_t futhark_mc_segmap_task_131378_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131378_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131377->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131377->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131377->free_C_len_114511;
    int64_t gtid_119207 = futhark_mc_task_131377->free_gtid_119207;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131377->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131377->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_task_131377->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 = futhark_mc_task_131377->free_ext_122742;
    struct memblock mem_122745 = {.desc ="mem_122745", .mem =
                                  futhark_mc_task_131377->free_mem_122745,
                                  .size =0, .references =NULL};
    struct memblock mem_122748 = {.desc ="mem_122748", .mem =
                                  futhark_mc_task_131377->free_mem_122748,
                                  .size =0, .references =NULL};
    int64_t iter_127876;
    struct futhark_mc_segmap_parloop_struct_131379
    futhark_mc_segmap_parloop_struct_131379;
    
    futhark_mc_segmap_parloop_struct_131379.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131379.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131379.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131379.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131379.free_gtid_119207 = gtid_119207;
    futhark_mc_segmap_parloop_struct_131379.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131379.free_mem_122191 = mem_122191.mem;
    futhark_mc_segmap_parloop_struct_131379.free_ext_mem_122741 =
        ext_mem_122741.mem;
    futhark_mc_segmap_parloop_struct_131379.free_ext_122742 = ext_122742;
    futhark_mc_segmap_parloop_struct_131379.free_mem_122745 = mem_122745.mem;
    futhark_mc_segmap_parloop_struct_131379.free_mem_122748 = mem_122748.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131380_task;
    
    futhark_mc_segmap_parloop_131380_task.name =
        "futhark_mc_segmap_parloop_131380";
    futhark_mc_segmap_parloop_131380_task.fn = futhark_mc_segmap_parloop_131380;
    futhark_mc_segmap_parloop_131380_task.args =
        &futhark_mc_segmap_parloop_struct_131379;
    futhark_mc_segmap_parloop_131380_task.iterations = iterations;
    futhark_mc_segmap_parloop_131380_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131380_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131380_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131380_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131380_task);
    
    if (futhark_mc_segmap_parloop_131380_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131380_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131380_total_end -
                 futhark_mc_segmap_parloop_131380_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131380_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131380_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131380_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131378_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131378_end -
                 futhark_mc_segmap_task_131378_start;
        
        ctx->futhark_mc_segmap_task_131378_runs[tid]++;
        ctx->futhark_mc_segmap_task_131378_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131378_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131381 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119207;
    char *free_mem_121842;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122745;
    char *free_mem_122751;
    char *free_mem_122754;
};
struct futhark_mc_segmap_parloop_struct_131383 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119207;
    char *free_mem_121842;
    int64_t free_ctx_param_ext_122098;
    int64_t free_ctx_param_ext_122099;
    int64_t free_ctx_param_ext_122101;
    char *free_mem_param_122103;
    char *free_mem_122745;
    char *free_mem_122751;
    char *free_mem_122754;
};
static int futhark_mc_segmap_parloop_131384(void *args, int64_t start,
                                            int64_t end, int flat_tid_119210,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131383
    *futhark_mc_segmap_parloop_struct_131383 =
    (struct futhark_mc_segmap_parloop_struct_131383 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131383->ctx;
    uint64_t futhark_mc_segmap_parloop_131384_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131384_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131383->free_n_114463;
    int64_t gtid_119207 =
            futhark_mc_segmap_parloop_struct_131383->free_gtid_119207;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131383->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131383->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131383->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131383->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131383->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122745 = {.desc ="mem_122745", .mem =
                                  futhark_mc_segmap_parloop_struct_131383->free_mem_122745,
                                  .size =0, .references =NULL};
    struct memblock mem_122751 = {.desc ="mem_122751", .mem =
                                  futhark_mc_segmap_parloop_struct_131383->free_mem_122751,
                                  .size =0, .references =NULL};
    struct memblock mem_122754 = {.desc ="mem_122754", .mem =
                                  futhark_mc_segmap_parloop_struct_131383->free_mem_122754,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127880 = start;
    
    for (; iter_127880 < end; iter_127880++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127889 = n_114463;
        int64_t gtid_119211 = iter_127880;
        int64_t remnant_127890 = iter_127880 - gtid_119211;
        int64_t x_127861 = ((int64_t *) mem_121842.mem)[gtid_119207 * n_114463 +
                                                        gtid_119211];
        bool cond_127862 = sle64((int64_t) 0, x_127861);
        float defunc_0_f_res_127863;
        
        if (cond_127862) {
            bool y_127881 = slt64(x_127861, n_114463);
            bool bounds_check_127882 = cond_127862 && y_127881;
            bool index_certs_127883;
            
            if (!bounds_check_127882) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_127861,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_127884 =
                  ((float *) mem_122745.mem)[x_127861];
            
            defunc_0_f_res_127863 = defunc_0_f_res_t_res_127884;
        } else {
            defunc_0_f_res_127863 = 0.0F;
        }
        
        float defunc_0_f_res_127868;
        
        if (cond_127862) {
            bool y_127885 = slt64(x_127861, n_114463);
            bool bounds_check_127886 = cond_127862 && y_127885;
            bool index_certs_127887;
            
            if (!bounds_check_127886) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_127861,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_127888 =
                  ((float *) mem_param_122103.mem)[ctx_param_ext_122098 +
                                                   (gtid_119207 *
                                                    ctx_param_ext_122099 +
                                                    x_127861 *
                                                    ctx_param_ext_122101)];
            
            defunc_0_f_res_127868 = defunc_0_f_res_t_res_127888;
        } else {
            defunc_0_f_res_127868 = 0.0F;
        }
        ((float *) mem_122751.mem)[gtid_119211] = defunc_0_f_res_127868;
        ((float *) mem_122754.mem)[gtid_119211] = defunc_0_f_res_127863;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131384_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131384_end -
                 futhark_mc_segmap_parloop_131384_start;
        
        ctx->futhark_mc_segmap_parloop_131384_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131384_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131384_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131382(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119210 = tid;
    int num_tasks_127879 = info.nsubtasks;
    struct futhark_mc_task_131381 *futhark_mc_task_131381 =
                                  (struct futhark_mc_task_131381 *) args;
    struct futhark_context *ctx = futhark_mc_task_131381->ctx;
    uint64_t futhark_mc_segmap_task_131382_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131382_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131381->free_n_114463;
    int64_t gtid_119207 = futhark_mc_task_131381->free_gtid_119207;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131381->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131381->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131381->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131381->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131381->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122745 = {.desc ="mem_122745", .mem =
                                  futhark_mc_task_131381->free_mem_122745,
                                  .size =0, .references =NULL};
    struct memblock mem_122751 = {.desc ="mem_122751", .mem =
                                  futhark_mc_task_131381->free_mem_122751,
                                  .size =0, .references =NULL};
    struct memblock mem_122754 = {.desc ="mem_122754", .mem =
                                  futhark_mc_task_131381->free_mem_122754,
                                  .size =0, .references =NULL};
    int64_t iter_127880;
    struct futhark_mc_segmap_parloop_struct_131383
    futhark_mc_segmap_parloop_struct_131383;
    
    futhark_mc_segmap_parloop_struct_131383.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131383.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131383.free_gtid_119207 = gtid_119207;
    futhark_mc_segmap_parloop_struct_131383.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131383.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131383.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131383.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131383.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131383.free_mem_122745 = mem_122745.mem;
    futhark_mc_segmap_parloop_struct_131383.free_mem_122751 = mem_122751.mem;
    futhark_mc_segmap_parloop_struct_131383.free_mem_122754 = mem_122754.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131384_task;
    
    futhark_mc_segmap_parloop_131384_task.name =
        "futhark_mc_segmap_parloop_131384";
    futhark_mc_segmap_parloop_131384_task.fn = futhark_mc_segmap_parloop_131384;
    futhark_mc_segmap_parloop_131384_task.args =
        &futhark_mc_segmap_parloop_struct_131383;
    futhark_mc_segmap_parloop_131384_task.iterations = iterations;
    futhark_mc_segmap_parloop_131384_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131384_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131384_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131384_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131384_task);
    
    if (futhark_mc_segmap_parloop_131384_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131384_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131384_total_end -
                 futhark_mc_segmap_parloop_131384_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131384_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131384_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131384_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131382_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131382_end -
                 futhark_mc_segmap_task_131382_start;
        
        ctx->futhark_mc_segmap_task_131382_runs[tid]++;
        ctx->futhark_mc_segmap_task_131382_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131382_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131372(void *args, int64_t start,
                                            int64_t end, int flat_tid_119206,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131371
    *futhark_mc_segmap_parloop_struct_131371 =
    (struct futhark_mc_segmap_parloop_struct_131371 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131371->ctx;
    uint64_t futhark_mc_segmap_parloop_131372_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131372_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131371->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131371->free_n_114463;
    int64_t n_p_114465 =
            futhark_mc_segmap_parloop_struct_131371->free_n_p_114465;
    int64_t C_len_114511 =
            futhark_mc_segmap_parloop_struct_131371->free_C_len_114511;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131371->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131371->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131371->free_bytes_121846;
    int64_t ctx_param_ext_122098 =
            futhark_mc_segmap_parloop_struct_131371->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_segmap_parloop_struct_131371->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_segmap_parloop_struct_131371->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_segmap_parloop_struct_131371->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_segmap_parloop_struct_131371->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_segmap_parloop_struct_131371->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 =
            futhark_mc_segmap_parloop_struct_131371->free_ext_122742;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131371->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131371->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122826 = {.desc ="mem_122826", .mem =
                                  futhark_mc_segmap_parloop_struct_131371->free_mem_122826,
                                  .size =0, .references =NULL};
    size_t mem_122745_cached_sizze_131373 = 0;
    char *mem_122745 = NULL;
    size_t mem_122748_cached_sizze_131374 = 0;
    char *mem_122748 = NULL;
    size_t mem_122751_cached_sizze_131375 = 0;
    char *mem_122751 = NULL;
    size_t mem_122754_cached_sizze_131376 = 0;
    char *mem_122754 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127854 = start;
    
    if (mem_122745_cached_sizze_131373 < (size_t) bytes_121846) {
        mem_122745 = realloc(mem_122745, bytes_121846);
        mem_122745_cached_sizze_131373 = bytes_121846;
    }
    if (mem_122748_cached_sizze_131374 < (size_t) bytes_121846) {
        mem_122748 = realloc(mem_122748, bytes_121846);
        mem_122748_cached_sizze_131374 = bytes_121846;
    }
    if (mem_122751_cached_sizze_131375 < (size_t) bytes_121846) {
        mem_122751 = realloc(mem_122751, bytes_121846);
        mem_122751_cached_sizze_131375 = bytes_121846;
    }
    if (mem_122754_cached_sizze_131376 < (size_t) bytes_121846) {
        mem_122754 = realloc(mem_122754, bytes_121846);
        mem_122754_cached_sizze_131376 = bytes_121846;
    }
    for (; iter_127854 < end; iter_127854++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127873 = m_114462;
        int64_t gtid_119207 = iter_127854;
        int64_t remnant_127874 = iter_127854 - gtid_119207;
        int64_t flat_tid_119208 = (int64_t) 0;
        int32_t num_tasks_127875;
        struct futhark_mc_task_131377 futhark_mc_task_131377;
        
        futhark_mc_task_131377.ctx = ctx;
        futhark_mc_task_131377.free_n_114463 = n_114463;
        futhark_mc_task_131377.free_n_p_114465 = n_p_114465;
        futhark_mc_task_131377.free_C_len_114511 = C_len_114511;
        futhark_mc_task_131377.free_gtid_119207 = gtid_119207;
        futhark_mc_task_131377.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_131377.free_mem_122191 = mem_122191.mem;
        futhark_mc_task_131377.free_ext_mem_122741 = ext_mem_122741.mem;
        futhark_mc_task_131377.free_ext_122742 = ext_122742;
        futhark_mc_task_131377.free_mem_122745 = mem_122745;
        futhark_mc_task_131377.free_mem_122748 = mem_122748;
        
        struct scheduler_segop futhark_mc_task_131377_task;
        
        futhark_mc_task_131377_task.args = &futhark_mc_task_131377;
        futhark_mc_task_131377_task.top_level_fn =
            futhark_mc_segmap_task_131378;
        futhark_mc_task_131377_task.name = "futhark_mc_segmap_task_131378";
        futhark_mc_task_131377_task.iterations = n_114463;
        futhark_mc_task_131377_task.task_time =
            &ctx->futhark_mc_segmap_task_131378_total_time;
        futhark_mc_task_131377_task.task_iter =
            &ctx->futhark_mc_segmap_task_131378_total_iter;
        futhark_mc_task_131377_task.sched = STATIC;
        futhark_mc_task_131377_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131378_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131377_task);
        
        if (futhark_mc_segmap_task_131378_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_119210 = (int64_t) 0;
        int32_t num_tasks_127879;
        struct futhark_mc_task_131381 futhark_mc_task_131381;
        
        futhark_mc_task_131381.ctx = ctx;
        futhark_mc_task_131381.free_n_114463 = n_114463;
        futhark_mc_task_131381.free_gtid_119207 = gtid_119207;
        futhark_mc_task_131381.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131381.free_ctx_param_ext_122098 = ctx_param_ext_122098;
        futhark_mc_task_131381.free_ctx_param_ext_122099 = ctx_param_ext_122099;
        futhark_mc_task_131381.free_ctx_param_ext_122101 = ctx_param_ext_122101;
        futhark_mc_task_131381.free_mem_param_122103 = mem_param_122103.mem;
        futhark_mc_task_131381.free_mem_122745 = mem_122745;
        futhark_mc_task_131381.free_mem_122751 = mem_122751;
        futhark_mc_task_131381.free_mem_122754 = mem_122754;
        
        struct scheduler_segop futhark_mc_task_131381_task;
        
        futhark_mc_task_131381_task.args = &futhark_mc_task_131381;
        futhark_mc_task_131381_task.top_level_fn =
            futhark_mc_segmap_task_131382;
        futhark_mc_task_131381_task.name = "futhark_mc_segmap_task_131382";
        futhark_mc_task_131381_task.iterations = n_114463;
        futhark_mc_task_131381_task.task_time =
            &ctx->futhark_mc_segmap_task_131382_total_time;
        futhark_mc_task_131381_task.task_iter =
            &ctx->futhark_mc_segmap_task_131382_total_iter;
        futhark_mc_task_131381_task.sched = STATIC;
        futhark_mc_task_131381_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131382_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131381_task);
        
        if (futhark_mc_segmap_task_131382_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122818.mem + gtid_119207 * n_114463 * (int64_t) 4,
                mem_122754 + (int64_t) 0, n_114463 * (int64_t) 4);
        memmove(mem_122822.mem + gtid_119207 * n_114463 * (int64_t) 4,
                mem_122751 + (int64_t) 0, n_114463 * (int64_t) 4);
        memmove(mem_122826.mem + gtid_119207 * n_114463 * (int64_t) 4,
                mem_122748 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122745);
    free(mem_122748);
    free(mem_122751);
    free(mem_122754);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131372_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131372_end -
                 futhark_mc_segmap_parloop_131372_start;
        
        ctx->futhark_mc_segmap_parloop_131372_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131372_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131372_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131370(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119206 = tid;
    int num_tasks_127818 = info.nsubtasks;
    struct futhark_mc_task_131362 *futhark_mc_task_131362 =
                                  (struct futhark_mc_task_131362 *) args;
    struct futhark_context *ctx = futhark_mc_task_131362->ctx;
    uint64_t futhark_mc_segmap_nested_task_131370_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131370_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131362->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131362->free_n_114463;
    int64_t n_p_114465 = futhark_mc_task_131362->free_n_p_114465;
    int64_t C_len_114511 = futhark_mc_task_131362->free_C_len_114511;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131362->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131362->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131362->free_bytes_121846;
    int64_t ctx_param_ext_122098 =
            futhark_mc_task_131362->free_ctx_param_ext_122098;
    int64_t ctx_param_ext_122099 =
            futhark_mc_task_131362->free_ctx_param_ext_122099;
    int64_t ctx_param_ext_122101 =
            futhark_mc_task_131362->free_ctx_param_ext_122101;
    struct memblock mem_param_122103 = {.desc ="mem_param_122103", .mem =
                                        futhark_mc_task_131362->free_mem_param_122103,
                                        .size =0, .references =NULL};
    struct memblock mem_122191 = {.desc ="mem_122191", .mem =
                                  futhark_mc_task_131362->free_mem_122191,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_122741 = {.desc ="ext_mem_122741", .mem =
                                      futhark_mc_task_131362->free_ext_mem_122741,
                                      .size =0, .references =NULL};
    int64_t ext_122742 = futhark_mc_task_131362->free_ext_122742;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131362->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131362->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122826 = {.desc ="mem_122826", .mem =
                                  futhark_mc_task_131362->free_mem_122826,
                                  .size =0, .references =NULL};
    int64_t iter_127854;
    struct futhark_mc_segmap_parloop_struct_131371
    futhark_mc_segmap_parloop_struct_131371;
    
    futhark_mc_segmap_parloop_struct_131371.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131371.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131371.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131371.free_n_p_114465 = n_p_114465;
    futhark_mc_segmap_parloop_struct_131371.free_C_len_114511 = C_len_114511;
    futhark_mc_segmap_parloop_struct_131371.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131371.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131371.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131371.free_ctx_param_ext_122098 =
        ctx_param_ext_122098;
    futhark_mc_segmap_parloop_struct_131371.free_ctx_param_ext_122099 =
        ctx_param_ext_122099;
    futhark_mc_segmap_parloop_struct_131371.free_ctx_param_ext_122101 =
        ctx_param_ext_122101;
    futhark_mc_segmap_parloop_struct_131371.free_mem_param_122103 =
        mem_param_122103.mem;
    futhark_mc_segmap_parloop_struct_131371.free_mem_122191 = mem_122191.mem;
    futhark_mc_segmap_parloop_struct_131371.free_ext_mem_122741 =
        ext_mem_122741.mem;
    futhark_mc_segmap_parloop_struct_131371.free_ext_122742 = ext_122742;
    futhark_mc_segmap_parloop_struct_131371.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131371.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131371.free_mem_122826 = mem_122826.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131372_task;
    
    futhark_mc_segmap_parloop_131372_task.name =
        "futhark_mc_segmap_parloop_131372";
    futhark_mc_segmap_parloop_131372_task.fn = futhark_mc_segmap_parloop_131372;
    futhark_mc_segmap_parloop_131372_task.args =
        &futhark_mc_segmap_parloop_struct_131371;
    futhark_mc_segmap_parloop_131372_task.iterations = iterations;
    futhark_mc_segmap_parloop_131372_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131372_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131372_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131372_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131372_task);
    
    if (futhark_mc_segmap_parloop_131372_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131372_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131372_total_end -
                 futhark_mc_segmap_parloop_131372_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131372_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131372_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131372_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131370_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131370_end -
                 futhark_mc_segmap_nested_task_131370_start;
        
        ctx->futhark_mc_segmap_nested_task_131370_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131370_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131370_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131385 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122852;
};
struct futhark_mc_segmap_parloop_struct_131387 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122852;
};
static int futhark_mc_segmap_parloop_131388(void *args, int64_t start,
                                            int64_t end, int flat_tid_119238,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131387
    *futhark_mc_segmap_parloop_struct_131387 =
    (struct futhark_mc_segmap_parloop_struct_131387 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131387->ctx;
    uint64_t futhark_mc_segmap_parloop_131388_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131388_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131387->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131387->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131387->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131387->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131387->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131387->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131387->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122852 = {.desc ="mem_122852", .mem =
                                  futhark_mc_segmap_parloop_struct_131387->free_mem_122852,
                                  .size =0, .references =NULL};
    size_t mem_122836_cached_sizze_131389 = 0;
    char *mem_122836 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127894 = start;
    
    if (mem_122836_cached_sizze_131389 < (size_t) bytes_121998) {
        mem_122836 = realloc(mem_122836, bytes_121998);
        mem_122836_cached_sizze_131389 = bytes_121998;
    }
    for (; iter_127894 < end; iter_127894++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127951 = m_114462;
        int64_t gtid_119239 = iter_127894;
        int64_t remnant_127952 = iter_127894 - gtid_119239;
        int64_t x_115799 = ((int64_t *) mem_121845.mem)[gtid_119239];
        
        for (int64_t i_127895 = 0; i_127895 < t_n_m_114520; i_127895++) {
            int64_t x_127897 = ((int64_t *) mem_122067.mem)[gtid_119239 *
                                                            t_n_m_114520 +
                                                            i_127895];
            float x_127898 = ((float *) mem_122071.mem)[gtid_119239 *
                                                        t_n_m_114520 +
                                                        i_127895];
            int64_t min_arg_127899 = mul64(t_jump_114470, i_127895);
            int64_t min_res_127900 = smin64(i_114539, min_arg_127899);
            float defunc_0_f_res_127901 = sitofp_i64_f32(min_res_127900);
            float defunc_2_reduce_res_127902;
            float redout_127904 = 0.0F;
            
            for (int64_t i_127903 = 0; i_127903 < t_window_114466; i_127903++) {
                bool cond_127905 = sle64(x_115799, i_127903);
                float defunc_0_f_res_127906;
                
                if (cond_127905) {
                    defunc_0_f_res_127906 = 0.0F;
                } else {
                    int64_t i_127907 = add64(x_127897, i_127903);
                    float x_127908 = ((float *) mem_121867.mem)[gtid_119239 *
                                                                n_114463 +
                                                                i_127907];
                    float defunc_0_f_res_f_res_127909 = 1.0F + x_127908;
                    
                    defunc_0_f_res_127906 = defunc_0_f_res_f_res_127909;
                }
                
                float defunc_0_f_res_127910;
                
                if (cond_127905) {
                    defunc_0_f_res_127910 = 0.0F;
                } else {
                    int64_t i_127911 = add64(x_127897, i_127903);
                    float x_127912 = ((float *) mem_122822.mem)[gtid_119239 *
                                                                n_114463 +
                                                                i_127911];
                    
                    defunc_0_f_res_127910 = x_127912;
                }
                
                float x_j_127913 = defunc_0_f_res_127906 -
                      defunc_0_f_res_127901;
                float abs_res_127914 = (float) fabs(x_j_127913);
                float tmp1_127915 = abs_res_127914 / x_127898;
                float x_127916 = tmp1_127915 * tmp1_127915;
                float y_127917 = tmp1_127915 * x_127916;
                float tmp2_127918 = 1.0F - y_127917;
                float x_127919 = tmp2_127918 * tmp2_127918;
                float tmp3_127920 = tmp2_127918 * x_127919;
                float w_j_127921 = defunc_0_f_res_127910 * tmp3_127920;
                float defunc_1_op_res_127922 = w_j_127921 + redout_127904;
                float redout_tmp_127954 = defunc_1_op_res_127922;
                
                redout_127904 = redout_tmp_127954;
            }
            defunc_2_reduce_res_127902 = redout_127904;
            
            float a0_127923 = 1.0F / defunc_2_reduce_res_127902;
            float defunc_2_reduce_res_127924;
            float redout_127926 = 0.0F;
            
            for (int64_t i_127925 = 0; i_127925 < t_window_114466; i_127925++) {
                bool cond_127927 = sle64(x_115799, i_127925);
                float defunc_0_f_res_127928;
                
                if (cond_127927) {
                    defunc_0_f_res_127928 = 0.0F;
                } else {
                    int64_t i_127929 = add64(x_127897, i_127925);
                    float x_127930 = ((float *) mem_121867.mem)[gtid_119239 *
                                                                n_114463 +
                                                                i_127929];
                    float defunc_0_f_res_f_res_127931 = 1.0F + x_127930;
                    
                    defunc_0_f_res_127928 = defunc_0_f_res_f_res_127931;
                }
                
                float defunc_0_f_res_127932;
                
                if (cond_127927) {
                    defunc_0_f_res_127932 = 0.0F;
                } else {
                    int64_t i_127933 = add64(x_127897, i_127925);
                    float x_127934 = ((float *) mem_122822.mem)[gtid_119239 *
                                                                n_114463 +
                                                                i_127933];
                    
                    defunc_0_f_res_127932 = x_127934;
                }
                
                float x_j_127935 = defunc_0_f_res_127928 -
                      defunc_0_f_res_127901;
                float abs_res_127936 = (float) fabs(x_j_127935);
                float tmp1_127937 = abs_res_127936 / x_127898;
                float x_127938 = tmp1_127937 * tmp1_127937;
                float y_127939 = tmp1_127937 * x_127938;
                float tmp2_127940 = 1.0F - y_127939;
                float x_127941 = tmp2_127940 * tmp2_127940;
                float tmp3_127942 = tmp2_127940 * x_127941;
                float tmp4_127943 = defunc_0_f_res_127932 * tmp3_127942;
                float defunc_0_f_res_127944;
                
                if (cond_127927) {
                    defunc_0_f_res_127944 = 0.0F;
                } else {
                    int64_t i_127945 = add64(x_127897, i_127925);
                    float x_127946 = ((float *) mem_122818.mem)[gtid_119239 *
                                                                n_114463 +
                                                                i_127945];
                    
                    defunc_0_f_res_127944 = x_127946;
                }
                
                float x_127947 = a0_127923 * tmp4_127943;
                float defunc_9_fit_fun_res_127948 = defunc_0_f_res_127944 *
                      x_127947;
                float defunc_1_op_res_127949 = defunc_9_fit_fun_res_127948 +
                      redout_127926;
                float redout_tmp_127955 = defunc_1_op_res_127949;
                
                redout_127926 = redout_tmp_127955;
            }
            defunc_2_reduce_res_127924 = redout_127926;
            ((float *) mem_122836)[i_127895] = defunc_2_reduce_res_127924;
        }
        memmove(mem_122852.mem + gtid_119239 * t_n_m_114520 * (int64_t) 4,
                mem_122836 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122836);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131388_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131388_end -
                 futhark_mc_segmap_parloop_131388_start;
        
        ctx->futhark_mc_segmap_parloop_131388_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131388_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131388_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131386(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119238 = tid;
    int num_tasks_127893 = info.nsubtasks;
    struct futhark_mc_task_131385 *futhark_mc_task_131385 =
                                  (struct futhark_mc_task_131385 *) args;
    struct futhark_context *ctx = futhark_mc_task_131385->ctx;
    uint64_t futhark_mc_segmap_task_131386_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131386_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131385->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131385->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131385->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131385->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131385->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131385->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131385->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131385->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131385->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131385->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131385->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131385->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131385->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122852 = {.desc ="mem_122852", .mem =
                                  futhark_mc_task_131385->free_mem_122852,
                                  .size =0, .references =NULL};
    int64_t iter_127894;
    struct futhark_mc_segmap_parloop_struct_131387
    futhark_mc_segmap_parloop_struct_131387;
    
    futhark_mc_segmap_parloop_struct_131387.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131387.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131387.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131387.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131387.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131387.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131387.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131387.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131387.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131387.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131387.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131387.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131387.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131387.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131387.free_mem_122852 = mem_122852.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131388_task;
    
    futhark_mc_segmap_parloop_131388_task.name =
        "futhark_mc_segmap_parloop_131388";
    futhark_mc_segmap_parloop_131388_task.fn = futhark_mc_segmap_parloop_131388;
    futhark_mc_segmap_parloop_131388_task.args =
        &futhark_mc_segmap_parloop_struct_131387;
    futhark_mc_segmap_parloop_131388_task.iterations = iterations;
    futhark_mc_segmap_parloop_131388_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131388_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131388_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131388_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131388_task);
    
    if (futhark_mc_segmap_parloop_131388_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131388_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131388_total_end -
                 futhark_mc_segmap_parloop_131388_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131388_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131388_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131388_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131386_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131386_end -
                 futhark_mc_segmap_task_131386_start;
        
        ctx->futhark_mc_segmap_task_131386_runs[tid]++;
        ctx->futhark_mc_segmap_task_131386_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131386_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131391 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122852;
};
struct futhark_mc_task_131394 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122833;
};
struct futhark_mc_segmap_parloop_struct_131396 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122833;
};
static int futhark_mc_segmap_parloop_131397(void *args, int64_t start,
                                            int64_t end, int flat_tid_119242,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131396
    *futhark_mc_segmap_parloop_struct_131396 =
    (struct futhark_mc_segmap_parloop_struct_131396 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131396->ctx;
    uint64_t futhark_mc_segmap_parloop_131397_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131397_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131396->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131396->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131396->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131396->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131396->free_i_114539;
    int64_t gtid_119241 =
            futhark_mc_segmap_parloop_struct_131396->free_gtid_119241;
    int64_t x_119311 = futhark_mc_segmap_parloop_struct_131396->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122833 = {.desc ="mem_122833", .mem =
                                  futhark_mc_segmap_parloop_struct_131396->free_mem_122833,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128066 = start;
    
    for (; iter_128066 < end; iter_128066++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128112 = t_n_m_114520;
        int64_t gtid_119243 = iter_128066;
        int64_t remnant_128113 = iter_128066 - gtid_119243;
        int64_t x_128010 = ((int64_t *) mem_122067.mem)[gtid_119241 *
                                                        t_n_m_114520 +
                                                        gtid_119243];
        float x_128011 = ((float *) mem_122071.mem)[gtid_119241 * t_n_m_114520 +
                                                    gtid_119243];
        int64_t min_arg_128012 = mul64(t_jump_114470, gtid_119243);
        int64_t min_res_128013 = smin64(i_114539, min_arg_128012);
        float defunc_0_f_res_128014 = sitofp_i64_f32(min_res_128013);
        float defunc_2_reduce_res_128015;
        float redout_128068 = 0.0F;
        
        for (int64_t i_128067 = 0; i_128067 < t_window_114466; i_128067++) {
            bool cond_128069 = sle64(x_119311, i_128067);
            float defunc_0_f_res_128070;
            
            if (cond_128069) {
                defunc_0_f_res_128070 = 0.0F;
            } else {
                int64_t i_128071 = add64(x_128010, i_128067);
                float x_128072 = ((float *) mem_121867.mem)[gtid_119241 *
                                                            n_114463 +
                                                            i_128071];
                float defunc_0_f_res_f_res_128073 = 1.0F + x_128072;
                
                defunc_0_f_res_128070 = defunc_0_f_res_f_res_128073;
            }
            
            float defunc_0_f_res_128074;
            
            if (cond_128069) {
                defunc_0_f_res_128074 = 0.0F;
            } else {
                int64_t i_128075 = add64(x_128010, i_128067);
                float x_128076 = ((float *) mem_122822.mem)[gtid_119241 *
                                                            n_114463 +
                                                            i_128075];
                
                defunc_0_f_res_128074 = x_128076;
            }
            
            float x_j_128077 = defunc_0_f_res_128070 - defunc_0_f_res_128014;
            float abs_res_128078 = (float) fabs(x_j_128077);
            float tmp1_128079 = abs_res_128078 / x_128011;
            float x_128080 = tmp1_128079 * tmp1_128079;
            float y_128081 = tmp1_128079 * x_128080;
            float tmp2_128082 = 1.0F - y_128081;
            float x_128083 = tmp2_128082 * tmp2_128082;
            float tmp3_128084 = tmp2_128082 * x_128083;
            float w_j_128085 = defunc_0_f_res_128074 * tmp3_128084;
            float defunc_1_op_res_128086 = w_j_128085 + redout_128068;
            float redout_tmp_128114 = defunc_1_op_res_128086;
            
            redout_128068 = redout_tmp_128114;
        }
        defunc_2_reduce_res_128015 = redout_128068;
        
        float a0_128036 = 1.0F / defunc_2_reduce_res_128015;
        float defunc_2_reduce_res_128037;
        float redout_128088 = 0.0F;
        
        for (int64_t i_128087 = 0; i_128087 < t_window_114466; i_128087++) {
            bool cond_128089 = sle64(x_119311, i_128087);
            float defunc_0_f_res_128090;
            
            if (cond_128089) {
                defunc_0_f_res_128090 = 0.0F;
            } else {
                int64_t i_128091 = add64(x_128010, i_128087);
                float x_128092 = ((float *) mem_121867.mem)[gtid_119241 *
                                                            n_114463 +
                                                            i_128091];
                float defunc_0_f_res_f_res_128093 = 1.0F + x_128092;
                
                defunc_0_f_res_128090 = defunc_0_f_res_f_res_128093;
            }
            
            float defunc_0_f_res_128094;
            
            if (cond_128089) {
                defunc_0_f_res_128094 = 0.0F;
            } else {
                int64_t i_128095 = add64(x_128010, i_128087);
                float x_128096 = ((float *) mem_122822.mem)[gtid_119241 *
                                                            n_114463 +
                                                            i_128095];
                
                defunc_0_f_res_128094 = x_128096;
            }
            
            float x_j_128097 = defunc_0_f_res_128090 - defunc_0_f_res_128014;
            float abs_res_128098 = (float) fabs(x_j_128097);
            float tmp1_128099 = abs_res_128098 / x_128011;
            float x_128100 = tmp1_128099 * tmp1_128099;
            float y_128101 = tmp1_128099 * x_128100;
            float tmp2_128102 = 1.0F - y_128101;
            float x_128103 = tmp2_128102 * tmp2_128102;
            float tmp3_128104 = tmp2_128102 * x_128103;
            float tmp4_128105 = defunc_0_f_res_128094 * tmp3_128104;
            float defunc_0_f_res_128106;
            
            if (cond_128089) {
                defunc_0_f_res_128106 = 0.0F;
            } else {
                int64_t i_128107 = add64(x_128010, i_128087);
                float x_128108 = ((float *) mem_122818.mem)[gtid_119241 *
                                                            n_114463 +
                                                            i_128107];
                
                defunc_0_f_res_128106 = x_128108;
            }
            
            float x_128109 = a0_128036 * tmp4_128105;
            float defunc_9_fit_fun_res_128110 = defunc_0_f_res_128106 *
                  x_128109;
            float defunc_1_op_res_128111 = defunc_9_fit_fun_res_128110 +
                  redout_128088;
            float redout_tmp_128115 = defunc_1_op_res_128111;
            
            redout_128088 = redout_tmp_128115;
        }
        defunc_2_reduce_res_128037 = redout_128088;
        ((float *) mem_122833.mem)[gtid_119243] = defunc_2_reduce_res_128037;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131397_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131397_end -
                 futhark_mc_segmap_parloop_131397_start;
        
        ctx->futhark_mc_segmap_parloop_131397_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131397_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131397_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131395(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119242 = tid;
    int num_tasks_128065 = info.nsubtasks;
    struct futhark_mc_task_131394 *futhark_mc_task_131394 =
                                  (struct futhark_mc_task_131394 *) args;
    struct futhark_context *ctx = futhark_mc_task_131394->ctx;
    uint64_t futhark_mc_segmap_task_131395_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131395_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131394->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131394->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131394->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131394->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131394->free_i_114539;
    int64_t gtid_119241 = futhark_mc_task_131394->free_gtid_119241;
    int64_t x_119311 = futhark_mc_task_131394->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131394->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131394->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131394->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131394->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131394->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122833 = {.desc ="mem_122833", .mem =
                                  futhark_mc_task_131394->free_mem_122833,
                                  .size =0, .references =NULL};
    int64_t iter_128066;
    struct futhark_mc_segmap_parloop_struct_131396
    futhark_mc_segmap_parloop_struct_131396;
    
    futhark_mc_segmap_parloop_struct_131396.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131396.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131396.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131396.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131396.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131396.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131396.free_gtid_119241 = gtid_119241;
    futhark_mc_segmap_parloop_struct_131396.free_x_119311 = x_119311;
    futhark_mc_segmap_parloop_struct_131396.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131396.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131396.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131396.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131396.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131396.free_mem_122833 = mem_122833.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131397_task;
    
    futhark_mc_segmap_parloop_131397_task.name =
        "futhark_mc_segmap_parloop_131397";
    futhark_mc_segmap_parloop_131397_task.fn = futhark_mc_segmap_parloop_131397;
    futhark_mc_segmap_parloop_131397_task.args =
        &futhark_mc_segmap_parloop_struct_131396;
    futhark_mc_segmap_parloop_131397_task.iterations = iterations;
    futhark_mc_segmap_parloop_131397_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131397_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131397_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131397_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131397_task);
    
    if (futhark_mc_segmap_parloop_131397_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131397_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131397_total_end -
                 futhark_mc_segmap_parloop_131397_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131397_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131397_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131397_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131395_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131395_end -
                 futhark_mc_segmap_task_131395_start;
        
        ctx->futhark_mc_segmap_task_131395_runs[tid]++;
        ctx->futhark_mc_segmap_task_131395_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131395_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131399 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122833;
};
struct futhark_mc_task_131401 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_127957;
    float free_x_127958;
    float free_defunc_0_f_res_127961;
    float *retval_defunc_2_reduce_res_127962;
};
struct futhark_mc_segred_stage_1_parloop_struct_131404 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_127957;
    float free_x_127958;
    float free_defunc_0_f_res_127961;
    char *free_reduce_stage_1_tid_res_arr_mem_128165;
};
static int futhark_mc_segred_stage_1_parloop_131405(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119246,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131404
    *futhark_mc_segred_stage_1_parloop_struct_131404 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131404 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131404->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131405_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131405_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131404->free_n_114463;
    int64_t gtid_119241 =
            futhark_mc_segred_stage_1_parloop_struct_131404->free_gtid_119241;
    int64_t x_119311 =
            futhark_mc_segred_stage_1_parloop_struct_131404->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131404->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131404->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_127957 =
            futhark_mc_segred_stage_1_parloop_struct_131404->free_x_127957;
    float x_127958 =
          futhark_mc_segred_stage_1_parloop_struct_131404->free_x_127958;
    float defunc_0_f_res_127961 =
          futhark_mc_segred_stage_1_parloop_struct_131404->free_defunc_0_f_res_127961;
    struct memblock reduce_stage_1_tid_res_arr_mem_128165 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128165",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131404->free_reduce_stage_1_tid_res_arr_mem_128165,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128167 = start;
    float x_128117;
    float x_128118;
    float local_acc_128168 = 0.0F;
    
    for (; iter_128167 < end; iter_128167++) {
        int64_t gtid_119247 = iter_128167;
        bool cond_128120 = sle64(x_119311, gtid_119247);
        float defunc_0_f_res_128121;
        
        if (cond_128120) {
            defunc_0_f_res_128121 = 0.0F;
        } else {
            int64_t i_128122 = add64(gtid_119247, x_127957);
            float x_128123 = ((float *) mem_121867.mem)[gtid_119241 * n_114463 +
                                                        i_128122];
            float defunc_0_f_res_f_res_128124 = 1.0F + x_128123;
            
            defunc_0_f_res_128121 = defunc_0_f_res_f_res_128124;
        }
        
        float defunc_0_f_res_128125;
        
        if (cond_128120) {
            defunc_0_f_res_128125 = 0.0F;
        } else {
            int64_t i_128126 = add64(gtid_119247, x_127957);
            float x_128127 = ((float *) mem_122822.mem)[gtid_119241 * n_114463 +
                                                        i_128126];
            
            defunc_0_f_res_128125 = x_128127;
        }
        
        float x_j_128128 = defunc_0_f_res_128121 - defunc_0_f_res_127961;
        float abs_res_128129 = (float) fabs(x_j_128128);
        float tmp1_128130 = abs_res_128129 / x_127958;
        float x_128131 = tmp1_128130 * tmp1_128130;
        float y_128132 = tmp1_128130 * x_128131;
        float tmp2_128133 = 1.0F - y_128132;
        float x_128134 = tmp2_128133 * tmp2_128133;
        float tmp3_128135 = tmp2_128133 * x_128134;
        float w_j_128136 = defunc_0_f_res_128125 * tmp3_128135;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128117 = local_acc_128168;
        }
        // Load next params
        {
            x_128118 = w_j_128136;
        }
        // Red body
        {
            float defunc_1_op_res_128119 = x_128117 + x_128118;
            
            local_acc_128168 = defunc_1_op_res_128119;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128165.mem)[flat_tid_119246] =
        local_acc_128168;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131405_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131405_end -
                 futhark_mc_segred_stage_1_parloop_131405_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131405_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131405_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131405_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131402(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119246 = tid;
    int num_tasks_128164 = info.nsubtasks;
    struct futhark_mc_task_131401 *futhark_mc_task_131401 =
                                  (struct futhark_mc_task_131401 *) args;
    struct futhark_context *ctx = futhark_mc_task_131401->ctx;
    uint64_t futhark_mc_segred_task_131402_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131402_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131401->free_n_114463;
    int64_t gtid_119241 = futhark_mc_task_131401->free_gtid_119241;
    int64_t x_119311 = futhark_mc_task_131401->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131401->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131401->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_127957 = futhark_mc_task_131401->free_x_127957;
    float x_127958 = futhark_mc_task_131401->free_x_127958;
    float defunc_0_f_res_127961 =
          futhark_mc_task_131401->free_defunc_0_f_res_127961;
    float defunc_2_reduce_res_127962 =
          *futhark_mc_task_131401->retval_defunc_2_reduce_res_127962;
    size_t reduce_stage_1_tid_res_arr_mem_128165_cached_sizze_131403 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128165 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128165_cached_sizze_131403 <
        (size_t) ((int64_t) 4 * num_tasks_128164)) {
        reduce_stage_1_tid_res_arr_mem_128165 =
            realloc(reduce_stage_1_tid_res_arr_mem_128165, (int64_t) 4 *
                    num_tasks_128164);
        reduce_stage_1_tid_res_arr_mem_128165_cached_sizze_131403 =
            (int64_t) 4 * num_tasks_128164;
    }
    
    int64_t iter_128167;
    struct futhark_mc_segred_stage_1_parloop_struct_131404
    futhark_mc_segred_stage_1_parloop_struct_131404;
    
    futhark_mc_segred_stage_1_parloop_struct_131404.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_gtid_119241 =
        gtid_119241;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_x_119311 = x_119311;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_x_127957 = x_127957;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_x_127958 = x_127958;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_defunc_0_f_res_127961 =
        defunc_0_f_res_127961;
    futhark_mc_segred_stage_1_parloop_struct_131404.free_reduce_stage_1_tid_res_arr_mem_128165 =
        reduce_stage_1_tid_res_arr_mem_128165;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131405_task;
    
    futhark_mc_segred_stage_1_parloop_131405_task.name =
        "futhark_mc_segred_stage_1_parloop_131405";
    futhark_mc_segred_stage_1_parloop_131405_task.fn =
        futhark_mc_segred_stage_1_parloop_131405;
    futhark_mc_segred_stage_1_parloop_131405_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131404;
    futhark_mc_segred_stage_1_parloop_131405_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131405_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131405_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131405_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131405_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131405_task);
    
    if (futhark_mc_segred_stage_1_parloop_131405_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131405_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131405_total_end -
                 futhark_mc_segred_stage_1_parloop_131405_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131405_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131405_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131405_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127962 = 0.0F;
    }
    
    float x_128169;
    float x_128170;
    
    for (int32_t i_128172 = 0; i_128172 < num_tasks_128164; i_128172++) {
        flat_tid_119246 = i_128172;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128169 = defunc_2_reduce_res_127962;
            }
            // load next params
            {
                x_128170 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128165)[flat_tid_119246];
            }
            // red body
            {
                float defunc_1_op_res_128171 = x_128169 + x_128170;
                
                defunc_2_reduce_res_127962 = defunc_1_op_res_128171;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128165);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131402_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131402_end -
                 futhark_mc_segred_task_131402_start;
        
        ctx->futhark_mc_segred_task_131402_runs[tid]++;
        ctx->futhark_mc_segred_task_131402_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131402_iter[tid] += iterations;
    }
    *futhark_mc_task_131401->retval_defunc_2_reduce_res_127962 =
        defunc_2_reduce_res_127962;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131406 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_127957;
    float free_x_127958;
    float free_defunc_0_f_res_127961;
    float free_a0_127983;
    float *retval_defunc_2_reduce_res_127984;
};
struct futhark_mc_segred_stage_1_parloop_struct_131409 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119241;
    int64_t free_x_119311;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_127957;
    float free_x_127958;
    float free_defunc_0_f_res_127961;
    float free_a0_127983;
    char *free_reduce_stage_1_tid_res_arr_mem_128174;
};
static int futhark_mc_segred_stage_1_parloop_131410(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119248,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131409
    *futhark_mc_segred_stage_1_parloop_struct_131409 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131409 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131409->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131410_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131410_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131409->free_n_114463;
    int64_t gtid_119241 =
            futhark_mc_segred_stage_1_parloop_struct_131409->free_gtid_119241;
    int64_t x_119311 =
            futhark_mc_segred_stage_1_parloop_struct_131409->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131409->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131409->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131409->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_127957 =
            futhark_mc_segred_stage_1_parloop_struct_131409->free_x_127957;
    float x_127958 =
          futhark_mc_segred_stage_1_parloop_struct_131409->free_x_127958;
    float defunc_0_f_res_127961 =
          futhark_mc_segred_stage_1_parloop_struct_131409->free_defunc_0_f_res_127961;
    float a0_127983 =
          futhark_mc_segred_stage_1_parloop_struct_131409->free_a0_127983;
    struct memblock reduce_stage_1_tid_res_arr_mem_128174 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128174",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131409->free_reduce_stage_1_tid_res_arr_mem_128174,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128176 = start;
    float x_128137;
    float x_128138;
    float local_acc_128177 = 0.0F;
    
    for (; iter_128176 < end; iter_128176++) {
        int64_t gtid_119249 = iter_128176;
        bool cond_128140 = sle64(x_119311, gtid_119249);
        float defunc_0_f_res_128141;
        
        if (cond_128140) {
            defunc_0_f_res_128141 = 0.0F;
        } else {
            int64_t i_128142 = add64(gtid_119249, x_127957);
            float x_128143 = ((float *) mem_121867.mem)[gtid_119241 * n_114463 +
                                                        i_128142];
            float defunc_0_f_res_f_res_128144 = 1.0F + x_128143;
            
            defunc_0_f_res_128141 = defunc_0_f_res_f_res_128144;
        }
        
        float defunc_0_f_res_128145;
        
        if (cond_128140) {
            defunc_0_f_res_128145 = 0.0F;
        } else {
            int64_t i_128146 = add64(gtid_119249, x_127957);
            float x_128147 = ((float *) mem_122822.mem)[gtid_119241 * n_114463 +
                                                        i_128146];
            
            defunc_0_f_res_128145 = x_128147;
        }
        
        float x_j_128148 = defunc_0_f_res_128141 - defunc_0_f_res_127961;
        float abs_res_128149 = (float) fabs(x_j_128148);
        float tmp1_128150 = abs_res_128149 / x_127958;
        float x_128151 = tmp1_128150 * tmp1_128150;
        float y_128152 = tmp1_128150 * x_128151;
        float tmp2_128153 = 1.0F - y_128152;
        float x_128154 = tmp2_128153 * tmp2_128153;
        float tmp3_128155 = tmp2_128153 * x_128154;
        float tmp4_128156 = defunc_0_f_res_128145 * tmp3_128155;
        float defunc_0_f_res_128157;
        
        if (cond_128140) {
            defunc_0_f_res_128157 = 0.0F;
        } else {
            int64_t i_128158 = add64(gtid_119249, x_127957);
            float x_128159 = ((float *) mem_122818.mem)[gtid_119241 * n_114463 +
                                                        i_128158];
            
            defunc_0_f_res_128157 = x_128159;
        }
        
        float x_128160 = a0_127983 * tmp4_128156;
        float defunc_9_fit_fun_res_128161 = defunc_0_f_res_128157 * x_128160;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128137 = local_acc_128177;
        }
        // Load next params
        {
            x_128138 = defunc_9_fit_fun_res_128161;
        }
        // Red body
        {
            float defunc_1_op_res_128139 = x_128137 + x_128138;
            
            local_acc_128177 = defunc_1_op_res_128139;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128174.mem)[flat_tid_119248] =
        local_acc_128177;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131410_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131410_end -
                 futhark_mc_segred_stage_1_parloop_131410_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131410_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131410_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131410_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131407(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119248 = tid;
    int num_tasks_128173 = info.nsubtasks;
    struct futhark_mc_task_131406 *futhark_mc_task_131406 =
                                  (struct futhark_mc_task_131406 *) args;
    struct futhark_context *ctx = futhark_mc_task_131406->ctx;
    uint64_t futhark_mc_segred_task_131407_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131407_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131406->free_n_114463;
    int64_t gtid_119241 = futhark_mc_task_131406->free_gtid_119241;
    int64_t x_119311 = futhark_mc_task_131406->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131406->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131406->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131406->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_127957 = futhark_mc_task_131406->free_x_127957;
    float x_127958 = futhark_mc_task_131406->free_x_127958;
    float defunc_0_f_res_127961 =
          futhark_mc_task_131406->free_defunc_0_f_res_127961;
    float a0_127983 = futhark_mc_task_131406->free_a0_127983;
    float defunc_2_reduce_res_127984 =
          *futhark_mc_task_131406->retval_defunc_2_reduce_res_127984;
    size_t reduce_stage_1_tid_res_arr_mem_128174_cached_sizze_131408 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128174 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128174_cached_sizze_131408 <
        (size_t) ((int64_t) 4 * num_tasks_128173)) {
        reduce_stage_1_tid_res_arr_mem_128174 =
            realloc(reduce_stage_1_tid_res_arr_mem_128174, (int64_t) 4 *
                    num_tasks_128173);
        reduce_stage_1_tid_res_arr_mem_128174_cached_sizze_131408 =
            (int64_t) 4 * num_tasks_128173;
    }
    
    int64_t iter_128176;
    struct futhark_mc_segred_stage_1_parloop_struct_131409
    futhark_mc_segred_stage_1_parloop_struct_131409;
    
    futhark_mc_segred_stage_1_parloop_struct_131409.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_gtid_119241 =
        gtid_119241;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_x_119311 = x_119311;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_x_127957 = x_127957;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_x_127958 = x_127958;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_defunc_0_f_res_127961 =
        defunc_0_f_res_127961;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_a0_127983 = a0_127983;
    futhark_mc_segred_stage_1_parloop_struct_131409.free_reduce_stage_1_tid_res_arr_mem_128174 =
        reduce_stage_1_tid_res_arr_mem_128174;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131410_task;
    
    futhark_mc_segred_stage_1_parloop_131410_task.name =
        "futhark_mc_segred_stage_1_parloop_131410";
    futhark_mc_segred_stage_1_parloop_131410_task.fn =
        futhark_mc_segred_stage_1_parloop_131410;
    futhark_mc_segred_stage_1_parloop_131410_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131409;
    futhark_mc_segred_stage_1_parloop_131410_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131410_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131410_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131410_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131410_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131410_task);
    
    if (futhark_mc_segred_stage_1_parloop_131410_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131410_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131410_total_end -
                 futhark_mc_segred_stage_1_parloop_131410_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131410_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131410_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131410_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127984 = 0.0F;
    }
    
    float x_128178;
    float x_128179;
    
    for (int32_t i_128181 = 0; i_128181 < num_tasks_128173; i_128181++) {
        flat_tid_119248 = i_128181;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128178 = defunc_2_reduce_res_127984;
            }
            // load next params
            {
                x_128179 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128174)[flat_tid_119248];
            }
            // red body
            {
                float defunc_1_op_res_128180 = x_128178 + x_128179;
                
                defunc_2_reduce_res_127984 = defunc_1_op_res_128180;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128174);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131407_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131407_end -
                 futhark_mc_segred_task_131407_start;
        
        ctx->futhark_mc_segred_task_131407_runs[tid]++;
        ctx->futhark_mc_segred_task_131407_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131407_iter[tid] += iterations;
    }
    *futhark_mc_task_131406->retval_defunc_2_reduce_res_127984 =
        defunc_2_reduce_res_127984;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131400(void *args, int64_t start,
                                            int64_t end, int flat_tid_119244,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131399
    *futhark_mc_segmap_parloop_struct_131399 =
    (struct futhark_mc_segmap_parloop_struct_131399 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131399->ctx;
    uint64_t futhark_mc_segmap_parloop_131400_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131400_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131399->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131399->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131399->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131399->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131399->free_i_114539;
    int64_t gtid_119241 =
            futhark_mc_segmap_parloop_struct_131399->free_gtid_119241;
    int64_t x_119311 = futhark_mc_segmap_parloop_struct_131399->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122833 = {.desc ="mem_122833", .mem =
                                  futhark_mc_segmap_parloop_struct_131399->free_mem_122833,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128116 = start;
    
    for (; iter_128116 < end; iter_128116++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128162 = t_n_m_114520;
        int64_t gtid_119245 = iter_128116;
        int64_t remnant_128163 = iter_128116 - gtid_119245;
        int64_t x_127957 = ((int64_t *) mem_122067.mem)[gtid_119241 *
                                                        t_n_m_114520 +
                                                        gtid_119245];
        float x_127958 = ((float *) mem_122071.mem)[gtid_119241 * t_n_m_114520 +
                                                    gtid_119245];
        int64_t min_arg_127959 = mul64(t_jump_114470, gtid_119245);
        int64_t min_res_127960 = smin64(i_114539, min_arg_127959);
        float defunc_0_f_res_127961 = sitofp_i64_f32(min_res_127960);
        float defunc_2_reduce_res_127962;
        int64_t flat_tid_119246 = (int64_t) 0;
        int32_t num_tasks_128164;
        struct futhark_mc_task_131401 futhark_mc_task_131401;
        
        futhark_mc_task_131401.ctx = ctx;
        futhark_mc_task_131401.free_n_114463 = n_114463;
        futhark_mc_task_131401.free_gtid_119241 = gtid_119241;
        futhark_mc_task_131401.free_x_119311 = x_119311;
        futhark_mc_task_131401.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131401.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131401.free_x_127957 = x_127957;
        futhark_mc_task_131401.free_x_127958 = x_127958;
        futhark_mc_task_131401.free_defunc_0_f_res_127961 =
            defunc_0_f_res_127961;
        futhark_mc_task_131401.retval_defunc_2_reduce_res_127962 =
            &defunc_2_reduce_res_127962;
        
        struct scheduler_segop futhark_mc_task_131401_task;
        
        futhark_mc_task_131401_task.args = &futhark_mc_task_131401;
        futhark_mc_task_131401_task.top_level_fn =
            futhark_mc_segred_task_131402;
        futhark_mc_task_131401_task.name = "futhark_mc_segred_task_131402";
        futhark_mc_task_131401_task.iterations = t_window_114466;
        futhark_mc_task_131401_task.task_time =
            &ctx->futhark_mc_segred_task_131402_total_time;
        futhark_mc_task_131401_task.task_iter =
            &ctx->futhark_mc_segred_task_131402_total_iter;
        futhark_mc_task_131401_task.sched = STATIC;
        futhark_mc_task_131401_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131402_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131401_task);
        
        if (futhark_mc_segred_task_131402_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_127983 = 1.0F / defunc_2_reduce_res_127962;
        float defunc_2_reduce_res_127984;
        int64_t flat_tid_119248 = (int64_t) 0;
        int32_t num_tasks_128173;
        struct futhark_mc_task_131406 futhark_mc_task_131406;
        
        futhark_mc_task_131406.ctx = ctx;
        futhark_mc_task_131406.free_n_114463 = n_114463;
        futhark_mc_task_131406.free_gtid_119241 = gtid_119241;
        futhark_mc_task_131406.free_x_119311 = x_119311;
        futhark_mc_task_131406.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131406.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131406.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131406.free_x_127957 = x_127957;
        futhark_mc_task_131406.free_x_127958 = x_127958;
        futhark_mc_task_131406.free_defunc_0_f_res_127961 =
            defunc_0_f_res_127961;
        futhark_mc_task_131406.free_a0_127983 = a0_127983;
        futhark_mc_task_131406.retval_defunc_2_reduce_res_127984 =
            &defunc_2_reduce_res_127984;
        
        struct scheduler_segop futhark_mc_task_131406_task;
        
        futhark_mc_task_131406_task.args = &futhark_mc_task_131406;
        futhark_mc_task_131406_task.top_level_fn =
            futhark_mc_segred_task_131407;
        futhark_mc_task_131406_task.name = "futhark_mc_segred_task_131407";
        futhark_mc_task_131406_task.iterations = t_window_114466;
        futhark_mc_task_131406_task.task_time =
            &ctx->futhark_mc_segred_task_131407_total_time;
        futhark_mc_task_131406_task.task_iter =
            &ctx->futhark_mc_segred_task_131407_total_iter;
        futhark_mc_task_131406_task.sched = STATIC;
        futhark_mc_task_131406_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131407_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131406_task);
        
        if (futhark_mc_segred_task_131407_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122833.mem)[gtid_119245] = defunc_2_reduce_res_127984;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131400_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131400_end -
                 futhark_mc_segmap_parloop_131400_start;
        
        ctx->futhark_mc_segmap_parloop_131400_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131400_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131400_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131398(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119244 = tid;
    int num_tasks_128065 = info.nsubtasks;
    struct futhark_mc_task_131394 *futhark_mc_task_131394 =
                                  (struct futhark_mc_task_131394 *) args;
    struct futhark_context *ctx = futhark_mc_task_131394->ctx;
    uint64_t futhark_mc_segmap_nested_task_131398_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131398_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131394->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131394->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131394->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131394->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131394->free_i_114539;
    int64_t gtid_119241 = futhark_mc_task_131394->free_gtid_119241;
    int64_t x_119311 = futhark_mc_task_131394->free_x_119311;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131394->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131394->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131394->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131394->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131394->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122833 = {.desc ="mem_122833", .mem =
                                  futhark_mc_task_131394->free_mem_122833,
                                  .size =0, .references =NULL};
    int64_t iter_128116;
    struct futhark_mc_segmap_parloop_struct_131399
    futhark_mc_segmap_parloop_struct_131399;
    
    futhark_mc_segmap_parloop_struct_131399.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131399.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131399.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131399.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131399.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131399.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131399.free_gtid_119241 = gtid_119241;
    futhark_mc_segmap_parloop_struct_131399.free_x_119311 = x_119311;
    futhark_mc_segmap_parloop_struct_131399.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131399.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131399.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131399.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131399.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131399.free_mem_122833 = mem_122833.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131400_task;
    
    futhark_mc_segmap_parloop_131400_task.name =
        "futhark_mc_segmap_parloop_131400";
    futhark_mc_segmap_parloop_131400_task.fn = futhark_mc_segmap_parloop_131400;
    futhark_mc_segmap_parloop_131400_task.args =
        &futhark_mc_segmap_parloop_struct_131399;
    futhark_mc_segmap_parloop_131400_task.iterations = iterations;
    futhark_mc_segmap_parloop_131400_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131400_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131400_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131400_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131400_task);
    
    if (futhark_mc_segmap_parloop_131400_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131400_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131400_total_end -
                 futhark_mc_segmap_parloop_131400_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131400_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131400_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131400_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131398_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131398_end -
                 futhark_mc_segmap_nested_task_131398_start;
        
        ctx->futhark_mc_segmap_nested_task_131398_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131398_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131398_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131392(void *args, int64_t start,
                                            int64_t end, int flat_tid_119240,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131391
    *futhark_mc_segmap_parloop_struct_131391 =
    (struct futhark_mc_segmap_parloop_struct_131391 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131391->ctx;
    uint64_t futhark_mc_segmap_parloop_131392_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131392_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131391->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131391->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131391->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131391->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131391->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131391->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131391->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122852 = {.desc ="mem_122852", .mem =
                                  futhark_mc_segmap_parloop_struct_131391->free_mem_122852,
                                  .size =0, .references =NULL};
    size_t mem_122833_cached_sizze_131393 = 0;
    char *mem_122833 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127956 = start;
    
    if (mem_122833_cached_sizze_131393 < (size_t) bytes_121998) {
        mem_122833 = realloc(mem_122833, bytes_121998);
        mem_122833_cached_sizze_131393 = bytes_121998;
    }
    for (; iter_127956 < end; iter_127956++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128063 = m_114462;
        int64_t gtid_119241 = iter_127956;
        int64_t remnant_128064 = iter_127956 - gtid_119241;
        int64_t x_119311 = ((int64_t *) mem_121845.mem)[gtid_119241];
        int64_t flat_tid_119242 = (int64_t) 0;
        int32_t num_tasks_128065;
        int64_t flat_tid_119244 = (int64_t) 0;
        struct futhark_mc_task_131394 futhark_mc_task_131394;
        
        futhark_mc_task_131394.ctx = ctx;
        futhark_mc_task_131394.free_n_114463 = n_114463;
        futhark_mc_task_131394.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131394.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131394.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131394.free_i_114539 = i_114539;
        futhark_mc_task_131394.free_gtid_119241 = gtid_119241;
        futhark_mc_task_131394.free_x_119311 = x_119311;
        futhark_mc_task_131394.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131394.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131394.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131394.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131394.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131394.free_mem_122833 = mem_122833;
        
        struct scheduler_segop futhark_mc_task_131394_task;
        
        futhark_mc_task_131394_task.args = &futhark_mc_task_131394;
        futhark_mc_task_131394_task.top_level_fn =
            futhark_mc_segmap_task_131395;
        futhark_mc_task_131394_task.name = "futhark_mc_segmap_task_131395";
        futhark_mc_task_131394_task.iterations = t_n_m_114520;
        futhark_mc_task_131394_task.task_time =
            &ctx->futhark_mc_segmap_task_131395_total_time;
        futhark_mc_task_131394_task.task_iter =
            &ctx->futhark_mc_segmap_task_131395_total_iter;
        futhark_mc_task_131394_task.sched = STATIC;
        futhark_mc_task_131394_task.nested_fn =
            futhark_mc_segmap_nested_task_131398;
        
        int futhark_mc_segmap_task_131395_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131394_task);
        
        if (futhark_mc_segmap_task_131395_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122852.mem + gtid_119241 * t_n_m_114520 * (int64_t) 4,
                mem_122833 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122833);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131392_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131392_end -
                 futhark_mc_segmap_parloop_131392_start;
        
        ctx->futhark_mc_segmap_parloop_131392_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131392_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131392_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131390(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119240 = tid;
    int num_tasks_127893 = info.nsubtasks;
    struct futhark_mc_task_131385 *futhark_mc_task_131385 =
                                  (struct futhark_mc_task_131385 *) args;
    struct futhark_context *ctx = futhark_mc_task_131385->ctx;
    uint64_t futhark_mc_segmap_nested_task_131390_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131390_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131385->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131385->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131385->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131385->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131385->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131385->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131385->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131385->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131385->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131385->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131385->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131385->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131385->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122852 = {.desc ="mem_122852", .mem =
                                  futhark_mc_task_131385->free_mem_122852,
                                  .size =0, .references =NULL};
    int64_t iter_127956;
    struct futhark_mc_segmap_parloop_struct_131391
    futhark_mc_segmap_parloop_struct_131391;
    
    futhark_mc_segmap_parloop_struct_131391.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131391.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131391.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131391.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131391.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131391.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131391.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131391.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131391.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131391.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131391.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131391.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131391.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131391.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131391.free_mem_122852 = mem_122852.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131392_task;
    
    futhark_mc_segmap_parloop_131392_task.name =
        "futhark_mc_segmap_parloop_131392";
    futhark_mc_segmap_parloop_131392_task.fn = futhark_mc_segmap_parloop_131392;
    futhark_mc_segmap_parloop_131392_task.args =
        &futhark_mc_segmap_parloop_struct_131391;
    futhark_mc_segmap_parloop_131392_task.iterations = iterations;
    futhark_mc_segmap_parloop_131392_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131392_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131392_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131392_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131392_task);
    
    if (futhark_mc_segmap_parloop_131392_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131392_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131392_total_end -
                 futhark_mc_segmap_parloop_131392_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131392_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131392_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131392_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131390_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131390_end -
                 futhark_mc_segmap_nested_task_131390_start;
        
        ctx->futhark_mc_segmap_nested_task_131390_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131390_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131390_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131411 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122892;
    char *free_mem_122896;
};
struct futhark_mc_segmap_parloop_struct_131413 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122892;
    char *free_mem_122896;
};
static int futhark_mc_segmap_parloop_131414(void *args, int64_t start,
                                            int64_t end, int flat_tid_119425,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131413
    *futhark_mc_segmap_parloop_struct_131413 =
    (struct futhark_mc_segmap_parloop_struct_131413 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131413->ctx;
    uint64_t futhark_mc_segmap_parloop_131414_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131414_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131413->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131413->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131413->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131413->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131413->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131413->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131413->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122892 = {.desc ="mem_122892", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122892,
                                  .size =0, .references =NULL};
    struct memblock mem_122896 = {.desc ="mem_122896", .mem =
                                  futhark_mc_segmap_parloop_struct_131413->free_mem_122896,
                                  .size =0, .references =NULL};
    size_t mem_122861_cached_sizze_131415 = 0;
    char *mem_122861 = NULL;
    size_t mem_122864_cached_sizze_131416 = 0;
    char *mem_122864 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128183 = start;
    
    if (mem_122861_cached_sizze_131415 < (size_t) bytes_121998) {
        mem_122861 = realloc(mem_122861, bytes_121998);
        mem_122861_cached_sizze_131415 = bytes_121998;
    }
    if (mem_122864_cached_sizze_131416 < (size_t) bytes_121998) {
        mem_122864 = realloc(mem_122864, bytes_121998);
        mem_122864_cached_sizze_131416 = bytes_121998;
    }
    for (; iter_128183 < end; iter_128183++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128267 = m_114462;
        int64_t gtid_119426 = iter_128183;
        int64_t remnant_128268 = iter_128183 - gtid_119426;
        int64_t x_115870 = ((int64_t *) mem_121845.mem)[gtid_119426];
        
        for (int64_t i_128184 = 0; i_128184 < t_n_m_114520; i_128184++) {
            int64_t x_128187 = ((int64_t *) mem_122067.mem)[gtid_119426 *
                                                            t_n_m_114520 +
                                                            i_128184];
            float x_128188 = ((float *) mem_122071.mem)[gtid_119426 *
                                                        t_n_m_114520 +
                                                        i_128184];
            int64_t min_arg_128189 = mul64(t_jump_114470, i_128184);
            int64_t min_res_128190 = smin64(i_114539, min_arg_128189);
            float defunc_0_f_res_128191 = sitofp_i64_f32(min_res_128190);
            float defunc_2_reduce_res_128192;
            float defunc_2_reduce_res_128193;
            float defunc_2_reduce_res_128194;
            float redout_128196;
            float redout_128197;
            float redout_128198;
            
            redout_128196 = 0.0F;
            redout_128197 = 0.0F;
            redout_128198 = 0.0F;
            for (int64_t i_128195 = 0; i_128195 < t_window_114466; i_128195++) {
                bool cond_128199 = sle64(x_115870, i_128195);
                float defunc_0_f_res_128200;
                
                if (cond_128199) {
                    defunc_0_f_res_128200 = 0.0F;
                } else {
                    int64_t i_128201 = add64(x_128187, i_128195);
                    float x_128202 = ((float *) mem_121867.mem)[gtid_119426 *
                                                                n_114463 +
                                                                i_128201];
                    float defunc_0_f_res_f_res_128203 = 1.0F + x_128202;
                    
                    defunc_0_f_res_128200 = defunc_0_f_res_f_res_128203;
                }
                
                float defunc_0_f_res_128204;
                
                if (cond_128199) {
                    defunc_0_f_res_128204 = 0.0F;
                } else {
                    int64_t i_128205 = add64(x_128187, i_128195);
                    float x_128206 = ((float *) mem_122822.mem)[gtid_119426 *
                                                                n_114463 +
                                                                i_128205];
                    
                    defunc_0_f_res_128204 = x_128206;
                }
                
                float x_j_128207 = defunc_0_f_res_128200 -
                      defunc_0_f_res_128191;
                float abs_res_128208 = (float) fabs(x_j_128207);
                float tmp1_128209 = abs_res_128208 / x_128188;
                float x_128210 = tmp1_128209 * tmp1_128209;
                float y_128211 = tmp1_128209 * x_128210;
                float tmp2_128212 = 1.0F - y_128211;
                float x_128213 = tmp2_128212 * tmp2_128212;
                float tmp3_128214 = tmp2_128212 * x_128213;
                float w_j_128215 = defunc_0_f_res_128204 * tmp3_128214;
                float xw_j_128216 = x_j_128207 * w_j_128215;
                float x2w_j_128217 = x_j_128207 * xw_j_128216;
                float defunc_1_op_res_128218 = w_j_128215 + redout_128196;
                float defunc_1_op_res_128219 = xw_j_128216 + redout_128197;
                float defunc_1_op_res_128220 = x2w_j_128217 + redout_128198;
                float redout_tmp_128271 = defunc_1_op_res_128218;
                float redout_tmp_128272 = defunc_1_op_res_128219;
                float redout_tmp_128273 = defunc_1_op_res_128220;
                
                redout_128196 = redout_tmp_128271;
                redout_128197 = redout_tmp_128272;
                redout_128198 = redout_tmp_128273;
            }
            defunc_2_reduce_res_128192 = redout_128196;
            defunc_2_reduce_res_128193 = redout_128197;
            defunc_2_reduce_res_128194 = redout_128198;
            
            float x_128221 = defunc_2_reduce_res_128192 *
                  defunc_2_reduce_res_128194;
            float y_128222 = defunc_2_reduce_res_128193 *
                  defunc_2_reduce_res_128193;
            float y_128223 = x_128221 - y_128222;
            float det1_128224 = 1.0F / y_128223;
            float a11_128225 = defunc_2_reduce_res_128194 * det1_128224;
            float negate_arg_128226 = defunc_2_reduce_res_128193 * det1_128224;
            float b11_128227 = 0.0F - negate_arg_128226;
            float c11_128228 = defunc_2_reduce_res_128192 * det1_128224;
            float defunc_2_reduce_res_128229;
            float defunc_2_reduce_res_128230;
            float redout_128232;
            float redout_128233;
            
            redout_128232 = 0.0F;
            redout_128233 = 0.0F;
            for (int64_t i_128231 = 0; i_128231 < t_window_114466; i_128231++) {
                bool cond_128234 = sle64(x_115870, i_128231);
                float defunc_0_f_res_128235;
                
                if (cond_128234) {
                    defunc_0_f_res_128235 = 0.0F;
                } else {
                    int64_t i_128236 = add64(x_128187, i_128231);
                    float x_128237 = ((float *) mem_121867.mem)[gtid_119426 *
                                                                n_114463 +
                                                                i_128236];
                    float defunc_0_f_res_f_res_128238 = 1.0F + x_128237;
                    
                    defunc_0_f_res_128235 = defunc_0_f_res_f_res_128238;
                }
                
                float defunc_0_f_res_128239;
                
                if (cond_128234) {
                    defunc_0_f_res_128239 = 0.0F;
                } else {
                    int64_t i_128240 = add64(x_128187, i_128231);
                    float x_128241 = ((float *) mem_122822.mem)[gtid_119426 *
                                                                n_114463 +
                                                                i_128240];
                    
                    defunc_0_f_res_128239 = x_128241;
                }
                
                float x_j_128242 = defunc_0_f_res_128235 -
                      defunc_0_f_res_128191;
                float abs_res_128243 = (float) fabs(x_j_128242);
                float tmp1_128244 = abs_res_128243 / x_128188;
                float x_128245 = tmp1_128244 * tmp1_128244;
                float y_128246 = tmp1_128244 * x_128245;
                float tmp2_128247 = 1.0F - y_128246;
                float x_128248 = tmp2_128247 * tmp2_128247;
                float tmp3_128249 = tmp2_128247 * x_128248;
                float tmp4_128250 = defunc_0_f_res_128239 * tmp3_128249;
                float defunc_1_f_res_128251 = x_j_128242 * tmp4_128250;
                float defunc_0_f_res_128252;
                
                if (cond_128234) {
                    defunc_0_f_res_128252 = 0.0F;
                } else {
                    int64_t i_128253 = add64(x_128187, i_128231);
                    float x_128254 = ((float *) mem_122818.mem)[gtid_119426 *
                                                                n_114463 +
                                                                i_128253];
                    
                    defunc_0_f_res_128252 = x_128254;
                }
                
                float x_128255 = a11_128225 * tmp4_128250;
                float y_128256 = b11_128227 * defunc_1_f_res_128251;
                float x_128257 = x_128255 + y_128256;
                float defunc_9_fit_fun_res_128258 = defunc_0_f_res_128252 *
                      x_128257;
                float x_128259 = b11_128227 * tmp4_128250;
                float y_128260 = c11_128228 * defunc_1_f_res_128251;
                float x_128261 = x_128259 + y_128260;
                float defunc_9_slope_fun_res_128262 = defunc_0_f_res_128252 *
                      x_128261;
                float defunc_1_op_res_128263 = defunc_9_fit_fun_res_128258 +
                      redout_128232;
                float defunc_1_op_res_128264 = defunc_9_slope_fun_res_128262 +
                      redout_128233;
                float redout_tmp_128274 = defunc_1_op_res_128263;
                float redout_tmp_128275 = defunc_1_op_res_128264;
                
                redout_128232 = redout_tmp_128274;
                redout_128233 = redout_tmp_128275;
            }
            defunc_2_reduce_res_128229 = redout_128232;
            defunc_2_reduce_res_128230 = redout_128233;
            ((float *) mem_122861)[i_128184] = defunc_2_reduce_res_128229;
            ((float *) mem_122864)[i_128184] = defunc_2_reduce_res_128230;
        }
        memmove(mem_122892.mem + gtid_119426 * t_n_m_114520 * (int64_t) 4,
                mem_122861 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_122896.mem + gtid_119426 * t_n_m_114520 * (int64_t) 4,
                mem_122864 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122861);
    free(mem_122864);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131414_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131414_end -
                 futhark_mc_segmap_parloop_131414_start;
        
        ctx->futhark_mc_segmap_parloop_131414_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131414_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131414_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131412(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119425 = tid;
    int num_tasks_128182 = info.nsubtasks;
    struct futhark_mc_task_131411 *futhark_mc_task_131411 =
                                  (struct futhark_mc_task_131411 *) args;
    struct futhark_context *ctx = futhark_mc_task_131411->ctx;
    uint64_t futhark_mc_segmap_task_131412_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131412_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131411->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131411->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131411->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131411->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131411->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131411->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131411->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131411->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131411->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131411->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131411->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131411->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131411->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122892 = {.desc ="mem_122892", .mem =
                                  futhark_mc_task_131411->free_mem_122892,
                                  .size =0, .references =NULL};
    struct memblock mem_122896 = {.desc ="mem_122896", .mem =
                                  futhark_mc_task_131411->free_mem_122896,
                                  .size =0, .references =NULL};
    int64_t iter_128183;
    struct futhark_mc_segmap_parloop_struct_131413
    futhark_mc_segmap_parloop_struct_131413;
    
    futhark_mc_segmap_parloop_struct_131413.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131413.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131413.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131413.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131413.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131413.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131413.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131413.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131413.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122892 = mem_122892.mem;
    futhark_mc_segmap_parloop_struct_131413.free_mem_122896 = mem_122896.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131414_task;
    
    futhark_mc_segmap_parloop_131414_task.name =
        "futhark_mc_segmap_parloop_131414";
    futhark_mc_segmap_parloop_131414_task.fn = futhark_mc_segmap_parloop_131414;
    futhark_mc_segmap_parloop_131414_task.args =
        &futhark_mc_segmap_parloop_struct_131413;
    futhark_mc_segmap_parloop_131414_task.iterations = iterations;
    futhark_mc_segmap_parloop_131414_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131414_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131414_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131414_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131414_task);
    
    if (futhark_mc_segmap_parloop_131414_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131414_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131414_total_end -
                 futhark_mc_segmap_parloop_131414_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131414_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131414_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131414_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131412_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131412_end -
                 futhark_mc_segmap_task_131412_start;
        
        ctx->futhark_mc_segmap_task_131412_runs[tid]++;
        ctx->futhark_mc_segmap_task_131412_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131412_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131418 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122892;
    char *free_mem_122896;
};
struct futhark_mc_task_131422 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122855;
    char *free_mem_122858;
};
struct futhark_mc_segmap_parloop_struct_131424 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122855;
    char *free_mem_122858;
};
static int futhark_mc_segmap_parloop_131425(void *args, int64_t start,
                                            int64_t end, int flat_tid_119429,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131424
    *futhark_mc_segmap_parloop_struct_131424 =
    (struct futhark_mc_segmap_parloop_struct_131424 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131424->ctx;
    uint64_t futhark_mc_segmap_parloop_131425_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131425_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131424->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131424->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131424->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131424->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131424->free_i_114539;
    int64_t gtid_119428 =
            futhark_mc_segmap_parloop_struct_131424->free_gtid_119428;
    int64_t x_119526 = futhark_mc_segmap_parloop_struct_131424->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122855 = {.desc ="mem_122855", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122855,
                                  .size =0, .references =NULL};
    struct memblock mem_122858 = {.desc ="mem_122858", .mem =
                                  futhark_mc_segmap_parloop_struct_131424->free_mem_122858,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128439 = start;
    
    for (; iter_128439 < end; iter_128439++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128500 = t_n_m_114520;
        int64_t gtid_119430 = iter_128439;
        int64_t remnant_128501 = iter_128439 - gtid_119430;
        int64_t x_128358 = ((int64_t *) mem_122067.mem)[gtid_119428 *
                                                        t_n_m_114520 +
                                                        gtid_119430];
        float x_128359 = ((float *) mem_122071.mem)[gtid_119428 * t_n_m_114520 +
                                                    gtid_119430];
        int64_t min_arg_128360 = mul64(t_jump_114470, gtid_119430);
        int64_t min_res_128361 = smin64(i_114539, min_arg_128360);
        float defunc_0_f_res_128362 = sitofp_i64_f32(min_res_128361);
        float defunc_2_reduce_res_128363;
        float defunc_2_reduce_res_128364;
        float defunc_2_reduce_res_128365;
        float redout_128441;
        float redout_128442;
        float redout_128443;
        
        redout_128441 = 0.0F;
        redout_128442 = 0.0F;
        redout_128443 = 0.0F;
        for (int64_t i_128440 = 0; i_128440 < t_window_114466; i_128440++) {
            bool cond_128444 = sle64(x_119526, i_128440);
            float defunc_0_f_res_128445;
            
            if (cond_128444) {
                defunc_0_f_res_128445 = 0.0F;
            } else {
                int64_t i_128446 = add64(x_128358, i_128440);
                float x_128447 = ((float *) mem_121867.mem)[gtid_119428 *
                                                            n_114463 +
                                                            i_128446];
                float defunc_0_f_res_f_res_128448 = 1.0F + x_128447;
                
                defunc_0_f_res_128445 = defunc_0_f_res_f_res_128448;
            }
            
            float defunc_0_f_res_128449;
            
            if (cond_128444) {
                defunc_0_f_res_128449 = 0.0F;
            } else {
                int64_t i_128450 = add64(x_128358, i_128440);
                float x_128451 = ((float *) mem_122822.mem)[gtid_119428 *
                                                            n_114463 +
                                                            i_128450];
                
                defunc_0_f_res_128449 = x_128451;
            }
            
            float x_j_128452 = defunc_0_f_res_128445 - defunc_0_f_res_128362;
            float abs_res_128453 = (float) fabs(x_j_128452);
            float tmp1_128454 = abs_res_128453 / x_128359;
            float x_128455 = tmp1_128454 * tmp1_128454;
            float y_128456 = tmp1_128454 * x_128455;
            float tmp2_128457 = 1.0F - y_128456;
            float x_128458 = tmp2_128457 * tmp2_128457;
            float tmp3_128459 = tmp2_128457 * x_128458;
            float w_j_128460 = defunc_0_f_res_128449 * tmp3_128459;
            float xw_j_128461 = x_j_128452 * w_j_128460;
            float x2w_j_128462 = x_j_128452 * xw_j_128461;
            float defunc_1_op_res_128463 = w_j_128460 + redout_128441;
            float defunc_1_op_res_128464 = xw_j_128461 + redout_128442;
            float defunc_1_op_res_128465 = x2w_j_128462 + redout_128443;
            float redout_tmp_128502 = defunc_1_op_res_128463;
            float redout_tmp_128503 = defunc_1_op_res_128464;
            float redout_tmp_128504 = defunc_1_op_res_128465;
            
            redout_128441 = redout_tmp_128502;
            redout_128442 = redout_tmp_128503;
            redout_128443 = redout_tmp_128504;
        }
        defunc_2_reduce_res_128363 = redout_128441;
        defunc_2_reduce_res_128364 = redout_128442;
        defunc_2_reduce_res_128365 = redout_128443;
        
        float x_128392 = defunc_2_reduce_res_128363 *
              defunc_2_reduce_res_128365;
        float y_128393 = defunc_2_reduce_res_128364 *
              defunc_2_reduce_res_128364;
        float y_128394 = x_128392 - y_128393;
        float det1_128395 = 1.0F / y_128394;
        float a11_128396 = defunc_2_reduce_res_128365 * det1_128395;
        float negate_arg_128397 = defunc_2_reduce_res_128364 * det1_128395;
        float b11_128398 = 0.0F - negate_arg_128397;
        float c11_128399 = defunc_2_reduce_res_128363 * det1_128395;
        float defunc_2_reduce_res_128400;
        float defunc_2_reduce_res_128401;
        float redout_128467;
        float redout_128468;
        
        redout_128467 = 0.0F;
        redout_128468 = 0.0F;
        for (int64_t i_128466 = 0; i_128466 < t_window_114466; i_128466++) {
            bool cond_128469 = sle64(x_119526, i_128466);
            float defunc_0_f_res_128470;
            
            if (cond_128469) {
                defunc_0_f_res_128470 = 0.0F;
            } else {
                int64_t i_128471 = add64(x_128358, i_128466);
                float x_128472 = ((float *) mem_121867.mem)[gtid_119428 *
                                                            n_114463 +
                                                            i_128471];
                float defunc_0_f_res_f_res_128473 = 1.0F + x_128472;
                
                defunc_0_f_res_128470 = defunc_0_f_res_f_res_128473;
            }
            
            float defunc_0_f_res_128474;
            
            if (cond_128469) {
                defunc_0_f_res_128474 = 0.0F;
            } else {
                int64_t i_128475 = add64(x_128358, i_128466);
                float x_128476 = ((float *) mem_122822.mem)[gtid_119428 *
                                                            n_114463 +
                                                            i_128475];
                
                defunc_0_f_res_128474 = x_128476;
            }
            
            float x_j_128477 = defunc_0_f_res_128470 - defunc_0_f_res_128362;
            float abs_res_128478 = (float) fabs(x_j_128477);
            float tmp1_128479 = abs_res_128478 / x_128359;
            float x_128480 = tmp1_128479 * tmp1_128479;
            float y_128481 = tmp1_128479 * x_128480;
            float tmp2_128482 = 1.0F - y_128481;
            float x_128483 = tmp2_128482 * tmp2_128482;
            float tmp3_128484 = tmp2_128482 * x_128483;
            float tmp4_128485 = defunc_0_f_res_128474 * tmp3_128484;
            float defunc_1_f_res_128486 = x_j_128477 * tmp4_128485;
            float defunc_0_f_res_128487;
            
            if (cond_128469) {
                defunc_0_f_res_128487 = 0.0F;
            } else {
                int64_t i_128488 = add64(x_128358, i_128466);
                float x_128489 = ((float *) mem_122818.mem)[gtid_119428 *
                                                            n_114463 +
                                                            i_128488];
                
                defunc_0_f_res_128487 = x_128489;
            }
            
            float x_128490 = a11_128396 * tmp4_128485;
            float y_128491 = b11_128398 * defunc_1_f_res_128486;
            float x_128492 = x_128490 + y_128491;
            float defunc_9_fit_fun_res_128493 = defunc_0_f_res_128487 *
                  x_128492;
            float x_128494 = b11_128398 * tmp4_128485;
            float y_128495 = c11_128399 * defunc_1_f_res_128486;
            float x_128496 = x_128494 + y_128495;
            float defunc_9_slope_fun_res_128497 = defunc_0_f_res_128487 *
                  x_128496;
            float defunc_1_op_res_128498 = defunc_9_fit_fun_res_128493 +
                  redout_128467;
            float defunc_1_op_res_128499 = defunc_9_slope_fun_res_128497 +
                  redout_128468;
            float redout_tmp_128505 = defunc_1_op_res_128498;
            float redout_tmp_128506 = defunc_1_op_res_128499;
            
            redout_128467 = redout_tmp_128505;
            redout_128468 = redout_tmp_128506;
        }
        defunc_2_reduce_res_128400 = redout_128467;
        defunc_2_reduce_res_128401 = redout_128468;
        ((float *) mem_122855.mem)[gtid_119430] = defunc_2_reduce_res_128400;
        ((float *) mem_122858.mem)[gtid_119430] = defunc_2_reduce_res_128401;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131425_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131425_end -
                 futhark_mc_segmap_parloop_131425_start;
        
        ctx->futhark_mc_segmap_parloop_131425_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131425_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131425_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131423(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119429 = tid;
    int num_tasks_128438 = info.nsubtasks;
    struct futhark_mc_task_131422 *futhark_mc_task_131422 =
                                  (struct futhark_mc_task_131422 *) args;
    struct futhark_context *ctx = futhark_mc_task_131422->ctx;
    uint64_t futhark_mc_segmap_task_131423_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131423_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131422->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131422->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131422->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131422->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131422->free_i_114539;
    int64_t gtid_119428 = futhark_mc_task_131422->free_gtid_119428;
    int64_t x_119526 = futhark_mc_task_131422->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131422->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131422->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131422->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131422->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131422->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122855 = {.desc ="mem_122855", .mem =
                                  futhark_mc_task_131422->free_mem_122855,
                                  .size =0, .references =NULL};
    struct memblock mem_122858 = {.desc ="mem_122858", .mem =
                                  futhark_mc_task_131422->free_mem_122858,
                                  .size =0, .references =NULL};
    int64_t iter_128439;
    struct futhark_mc_segmap_parloop_struct_131424
    futhark_mc_segmap_parloop_struct_131424;
    
    futhark_mc_segmap_parloop_struct_131424.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131424.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131424.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131424.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131424.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131424.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131424.free_gtid_119428 = gtid_119428;
    futhark_mc_segmap_parloop_struct_131424.free_x_119526 = x_119526;
    futhark_mc_segmap_parloop_struct_131424.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122855 = mem_122855.mem;
    futhark_mc_segmap_parloop_struct_131424.free_mem_122858 = mem_122858.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131425_task;
    
    futhark_mc_segmap_parloop_131425_task.name =
        "futhark_mc_segmap_parloop_131425";
    futhark_mc_segmap_parloop_131425_task.fn = futhark_mc_segmap_parloop_131425;
    futhark_mc_segmap_parloop_131425_task.args =
        &futhark_mc_segmap_parloop_struct_131424;
    futhark_mc_segmap_parloop_131425_task.iterations = iterations;
    futhark_mc_segmap_parloop_131425_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131425_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131425_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131425_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131425_task);
    
    if (futhark_mc_segmap_parloop_131425_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131425_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131425_total_end -
                 futhark_mc_segmap_parloop_131425_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131425_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131425_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131425_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131423_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131423_end -
                 futhark_mc_segmap_task_131423_start;
        
        ctx->futhark_mc_segmap_task_131423_runs[tid]++;
        ctx->futhark_mc_segmap_task_131423_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131423_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131427 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122855;
    char *free_mem_122858;
};
struct futhark_mc_task_131429 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_128277;
    float free_x_128278;
    float free_defunc_0_f_res_128281;
    float *retval_defunc_2_reduce_res_128282;
    float *retval_defunc_2_reduce_res_128283;
    float *retval_defunc_2_reduce_res_128284;
};
struct futhark_mc_segred_stage_1_parloop_struct_131434 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_128277;
    float free_x_128278;
    float free_defunc_0_f_res_128281;
    char *free_reduce_stage_1_tid_res_arr_mem_128574;
    char *free_reduce_stage_1_tid_res_arr_mem_128576;
    char *free_reduce_stage_1_tid_res_arr_mem_128578;
};
static int futhark_mc_segred_stage_1_parloop_131435(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119433,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131434
    *futhark_mc_segred_stage_1_parloop_struct_131434 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131434 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131434->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131435_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131435_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131434->free_n_114463;
    int64_t gtid_119428 =
            futhark_mc_segred_stage_1_parloop_struct_131434->free_gtid_119428;
    int64_t x_119526 =
            futhark_mc_segred_stage_1_parloop_struct_131434->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131434->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131434->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128277 =
            futhark_mc_segred_stage_1_parloop_struct_131434->free_x_128277;
    float x_128278 =
          futhark_mc_segred_stage_1_parloop_struct_131434->free_x_128278;
    float defunc_0_f_res_128281 =
          futhark_mc_segred_stage_1_parloop_struct_131434->free_defunc_0_f_res_128281;
    struct memblock reduce_stage_1_tid_res_arr_mem_128574 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128574",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131434->free_reduce_stage_1_tid_res_arr_mem_128574,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128576 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128576",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131434->free_reduce_stage_1_tid_res_arr_mem_128576,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128578 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128578",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131434->free_reduce_stage_1_tid_res_arr_mem_128578,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128580 = start;
    float x_128508;
    float x_128509;
    float x_128511;
    float x_128512;
    float x_128514;
    float x_128515;
    float local_acc_128581 = 0.0F;
    float local_acc_128582 = 0.0F;
    float local_acc_128583 = 0.0F;
    
    for (; iter_128580 < end; iter_128580++) {
        int64_t gtid_119434 = iter_128580;
        bool cond_128517 = sle64(x_119526, gtid_119434);
        float defunc_0_f_res_128518;
        
        if (cond_128517) {
            defunc_0_f_res_128518 = 0.0F;
        } else {
            int64_t i_128519 = add64(gtid_119434, x_128277);
            float x_128520 = ((float *) mem_121867.mem)[gtid_119428 * n_114463 +
                                                        i_128519];
            float defunc_0_f_res_f_res_128521 = 1.0F + x_128520;
            
            defunc_0_f_res_128518 = defunc_0_f_res_f_res_128521;
        }
        
        float defunc_0_f_res_128522;
        
        if (cond_128517) {
            defunc_0_f_res_128522 = 0.0F;
        } else {
            int64_t i_128523 = add64(gtid_119434, x_128277);
            float x_128524 = ((float *) mem_122822.mem)[gtid_119428 * n_114463 +
                                                        i_128523];
            
            defunc_0_f_res_128522 = x_128524;
        }
        
        float x_j_128525 = defunc_0_f_res_128518 - defunc_0_f_res_128281;
        float abs_res_128526 = (float) fabs(x_j_128525);
        float tmp1_128527 = abs_res_128526 / x_128278;
        float x_128528 = tmp1_128527 * tmp1_128527;
        float y_128529 = tmp1_128527 * x_128528;
        float tmp2_128530 = 1.0F - y_128529;
        float x_128531 = tmp2_128530 * tmp2_128530;
        float tmp3_128532 = tmp2_128530 * x_128531;
        float w_j_128533 = defunc_0_f_res_128522 * tmp3_128532;
        float xw_j_128534 = x_j_128525 * w_j_128533;
        float x2w_j_128535 = x_j_128525 * xw_j_128534;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128508 = local_acc_128581;
        }
        // Load next params
        {
            x_128509 = w_j_128533;
        }
        // Red body
        {
            float defunc_1_op_res_128510 = x_128508 + x_128509;
            
            local_acc_128581 = defunc_1_op_res_128510;
        }
        // Load accum params
        {
            x_128511 = local_acc_128582;
        }
        // Load next params
        {
            x_128512 = xw_j_128534;
        }
        // Red body
        {
            float defunc_1_op_res_128513 = x_128511 + x_128512;
            
            local_acc_128582 = defunc_1_op_res_128513;
        }
        // Load accum params
        {
            x_128514 = local_acc_128583;
        }
        // Load next params
        {
            x_128515 = x2w_j_128535;
        }
        // Red body
        {
            float defunc_1_op_res_128516 = x_128514 + x_128515;
            
            local_acc_128583 = defunc_1_op_res_128516;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128574.mem)[flat_tid_119433] =
        local_acc_128581;
    ((float *) reduce_stage_1_tid_res_arr_mem_128576.mem)[flat_tid_119433] =
        local_acc_128582;
    ((float *) reduce_stage_1_tid_res_arr_mem_128578.mem)[flat_tid_119433] =
        local_acc_128583;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131435_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131435_end -
                 futhark_mc_segred_stage_1_parloop_131435_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131435_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131435_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131435_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131430(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119433 = tid;
    int num_tasks_128573 = info.nsubtasks;
    struct futhark_mc_task_131429 *futhark_mc_task_131429 =
                                  (struct futhark_mc_task_131429 *) args;
    struct futhark_context *ctx = futhark_mc_task_131429->ctx;
    uint64_t futhark_mc_segred_task_131430_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131430_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131429->free_n_114463;
    int64_t gtid_119428 = futhark_mc_task_131429->free_gtid_119428;
    int64_t x_119526 = futhark_mc_task_131429->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131429->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131429->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128277 = futhark_mc_task_131429->free_x_128277;
    float x_128278 = futhark_mc_task_131429->free_x_128278;
    float defunc_0_f_res_128281 =
          futhark_mc_task_131429->free_defunc_0_f_res_128281;
    float defunc_2_reduce_res_128282 =
          *futhark_mc_task_131429->retval_defunc_2_reduce_res_128282;
    float defunc_2_reduce_res_128283 =
          *futhark_mc_task_131429->retval_defunc_2_reduce_res_128283;
    float defunc_2_reduce_res_128284 =
          *futhark_mc_task_131429->retval_defunc_2_reduce_res_128284;
    size_t reduce_stage_1_tid_res_arr_mem_128574_cached_sizze_131431 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128574 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128576_cached_sizze_131432 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128576 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128578_cached_sizze_131433 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128578 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128574_cached_sizze_131431 <
        (size_t) ((int64_t) 4 * num_tasks_128573)) {
        reduce_stage_1_tid_res_arr_mem_128574 =
            realloc(reduce_stage_1_tid_res_arr_mem_128574, (int64_t) 4 *
                    num_tasks_128573);
        reduce_stage_1_tid_res_arr_mem_128574_cached_sizze_131431 =
            (int64_t) 4 * num_tasks_128573;
    }
    if (reduce_stage_1_tid_res_arr_mem_128576_cached_sizze_131432 <
        (size_t) ((int64_t) 4 * num_tasks_128573)) {
        reduce_stage_1_tid_res_arr_mem_128576 =
            realloc(reduce_stage_1_tid_res_arr_mem_128576, (int64_t) 4 *
                    num_tasks_128573);
        reduce_stage_1_tid_res_arr_mem_128576_cached_sizze_131432 =
            (int64_t) 4 * num_tasks_128573;
    }
    if (reduce_stage_1_tid_res_arr_mem_128578_cached_sizze_131433 <
        (size_t) ((int64_t) 4 * num_tasks_128573)) {
        reduce_stage_1_tid_res_arr_mem_128578 =
            realloc(reduce_stage_1_tid_res_arr_mem_128578, (int64_t) 4 *
                    num_tasks_128573);
        reduce_stage_1_tid_res_arr_mem_128578_cached_sizze_131433 =
            (int64_t) 4 * num_tasks_128573;
    }
    
    int64_t iter_128580;
    struct futhark_mc_segred_stage_1_parloop_struct_131434
    futhark_mc_segred_stage_1_parloop_struct_131434;
    
    futhark_mc_segred_stage_1_parloop_struct_131434.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_gtid_119428 =
        gtid_119428;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_x_119526 = x_119526;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_x_128277 = x_128277;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_x_128278 = x_128278;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_defunc_0_f_res_128281 =
        defunc_0_f_res_128281;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_reduce_stage_1_tid_res_arr_mem_128574 =
        reduce_stage_1_tid_res_arr_mem_128574;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_reduce_stage_1_tid_res_arr_mem_128576 =
        reduce_stage_1_tid_res_arr_mem_128576;
    futhark_mc_segred_stage_1_parloop_struct_131434.free_reduce_stage_1_tid_res_arr_mem_128578 =
        reduce_stage_1_tid_res_arr_mem_128578;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131435_task;
    
    futhark_mc_segred_stage_1_parloop_131435_task.name =
        "futhark_mc_segred_stage_1_parloop_131435";
    futhark_mc_segred_stage_1_parloop_131435_task.fn =
        futhark_mc_segred_stage_1_parloop_131435;
    futhark_mc_segred_stage_1_parloop_131435_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131434;
    futhark_mc_segred_stage_1_parloop_131435_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131435_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131435_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131435_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131435_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131435_task);
    
    if (futhark_mc_segred_stage_1_parloop_131435_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131435_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131435_total_end -
                 futhark_mc_segred_stage_1_parloop_131435_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131435_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131435_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131435_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128282 = 0.0F;
        defunc_2_reduce_res_128283 = 0.0F;
        defunc_2_reduce_res_128284 = 0.0F;
    }
    
    float x_128584;
    float x_128585;
    float x_128587;
    float x_128588;
    float x_128590;
    float x_128591;
    
    for (int32_t i_128593 = 0; i_128593 < num_tasks_128573; i_128593++) {
        flat_tid_119433 = i_128593;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128584 = defunc_2_reduce_res_128282;
            }
            // load next params
            {
                x_128585 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128574)[flat_tid_119433];
            }
            // red body
            {
                float defunc_1_op_res_128586 = x_128584 + x_128585;
                
                defunc_2_reduce_res_128282 = defunc_1_op_res_128586;
            }
            // load acc params
            {
                x_128587 = defunc_2_reduce_res_128283;
            }
            // load next params
            {
                x_128588 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128576)[flat_tid_119433];
            }
            // red body
            {
                float defunc_1_op_res_128589 = x_128587 + x_128588;
                
                defunc_2_reduce_res_128283 = defunc_1_op_res_128589;
            }
            // load acc params
            {
                x_128590 = defunc_2_reduce_res_128284;
            }
            // load next params
            {
                x_128591 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128578)[flat_tid_119433];
            }
            // red body
            {
                float defunc_1_op_res_128592 = x_128590 + x_128591;
                
                defunc_2_reduce_res_128284 = defunc_1_op_res_128592;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128574);
    free(reduce_stage_1_tid_res_arr_mem_128576);
    free(reduce_stage_1_tid_res_arr_mem_128578);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131430_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131430_end -
                 futhark_mc_segred_task_131430_start;
        
        ctx->futhark_mc_segred_task_131430_runs[tid]++;
        ctx->futhark_mc_segred_task_131430_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131430_iter[tid] += iterations;
    }
    *futhark_mc_task_131429->retval_defunc_2_reduce_res_128282 =
        defunc_2_reduce_res_128282;
    *futhark_mc_task_131429->retval_defunc_2_reduce_res_128283 =
        defunc_2_reduce_res_128283;
    *futhark_mc_task_131429->retval_defunc_2_reduce_res_128284 =
        defunc_2_reduce_res_128284;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131436 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_128277;
    float free_x_128278;
    float free_defunc_0_f_res_128281;
    float free_a11_128317;
    float free_b11_128319;
    float free_c11_128320;
    float *retval_defunc_2_reduce_res_128321;
    float *retval_defunc_2_reduce_res_128322;
};
struct futhark_mc_segred_stage_1_parloop_struct_131440 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119428;
    int64_t free_x_119526;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_128277;
    float free_x_128278;
    float free_defunc_0_f_res_128281;
    float free_a11_128317;
    float free_b11_128319;
    float free_c11_128320;
    char *free_reduce_stage_1_tid_res_arr_mem_128595;
    char *free_reduce_stage_1_tid_res_arr_mem_128597;
};
static int futhark_mc_segred_stage_1_parloop_131441(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119435,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131440
    *futhark_mc_segred_stage_1_parloop_struct_131440 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131440 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131440->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131441_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131441_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131440->free_n_114463;
    int64_t gtid_119428 =
            futhark_mc_segred_stage_1_parloop_struct_131440->free_gtid_119428;
    int64_t x_119526 =
            futhark_mc_segred_stage_1_parloop_struct_131440->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131440->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131440->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131440->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128277 =
            futhark_mc_segred_stage_1_parloop_struct_131440->free_x_128277;
    float x_128278 =
          futhark_mc_segred_stage_1_parloop_struct_131440->free_x_128278;
    float defunc_0_f_res_128281 =
          futhark_mc_segred_stage_1_parloop_struct_131440->free_defunc_0_f_res_128281;
    float a11_128317 =
          futhark_mc_segred_stage_1_parloop_struct_131440->free_a11_128317;
    float b11_128319 =
          futhark_mc_segred_stage_1_parloop_struct_131440->free_b11_128319;
    float c11_128320 =
          futhark_mc_segred_stage_1_parloop_struct_131440->free_c11_128320;
    struct memblock reduce_stage_1_tid_res_arr_mem_128595 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128595",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131440->free_reduce_stage_1_tid_res_arr_mem_128595,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128597 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128597",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131440->free_reduce_stage_1_tid_res_arr_mem_128597,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128599 = start;
    float x_128536;
    float x_128537;
    float x_128539;
    float x_128540;
    float local_acc_128600 = 0.0F;
    float local_acc_128601 = 0.0F;
    
    for (; iter_128599 < end; iter_128599++) {
        int64_t gtid_119436 = iter_128599;
        bool cond_128542 = sle64(x_119526, gtid_119436);
        float defunc_0_f_res_128543;
        
        if (cond_128542) {
            defunc_0_f_res_128543 = 0.0F;
        } else {
            int64_t i_128544 = add64(gtid_119436, x_128277);
            float x_128545 = ((float *) mem_121867.mem)[gtid_119428 * n_114463 +
                                                        i_128544];
            float defunc_0_f_res_f_res_128546 = 1.0F + x_128545;
            
            defunc_0_f_res_128543 = defunc_0_f_res_f_res_128546;
        }
        
        float defunc_0_f_res_128547;
        
        if (cond_128542) {
            defunc_0_f_res_128547 = 0.0F;
        } else {
            int64_t i_128548 = add64(gtid_119436, x_128277);
            float x_128549 = ((float *) mem_122822.mem)[gtid_119428 * n_114463 +
                                                        i_128548];
            
            defunc_0_f_res_128547 = x_128549;
        }
        
        float x_j_128550 = defunc_0_f_res_128543 - defunc_0_f_res_128281;
        float abs_res_128551 = (float) fabs(x_j_128550);
        float tmp1_128552 = abs_res_128551 / x_128278;
        float x_128553 = tmp1_128552 * tmp1_128552;
        float y_128554 = tmp1_128552 * x_128553;
        float tmp2_128555 = 1.0F - y_128554;
        float x_128556 = tmp2_128555 * tmp2_128555;
        float tmp3_128557 = tmp2_128555 * x_128556;
        float tmp4_128558 = defunc_0_f_res_128547 * tmp3_128557;
        float defunc_1_f_res_128559 = x_j_128550 * tmp4_128558;
        float defunc_0_f_res_128560;
        
        if (cond_128542) {
            defunc_0_f_res_128560 = 0.0F;
        } else {
            int64_t i_128561 = add64(gtid_119436, x_128277);
            float x_128562 = ((float *) mem_122818.mem)[gtid_119428 * n_114463 +
                                                        i_128561];
            
            defunc_0_f_res_128560 = x_128562;
        }
        
        float x_128563 = a11_128317 * tmp4_128558;
        float y_128564 = b11_128319 * defunc_1_f_res_128559;
        float x_128565 = x_128563 + y_128564;
        float defunc_9_fit_fun_res_128566 = defunc_0_f_res_128560 * x_128565;
        float x_128567 = b11_128319 * tmp4_128558;
        float y_128568 = c11_128320 * defunc_1_f_res_128559;
        float x_128569 = x_128567 + y_128568;
        float defunc_9_slope_fun_res_128570 = defunc_0_f_res_128560 * x_128569;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128536 = local_acc_128600;
        }
        // Load next params
        {
            x_128537 = defunc_9_fit_fun_res_128566;
        }
        // Red body
        {
            float defunc_1_op_res_128538 = x_128536 + x_128537;
            
            local_acc_128600 = defunc_1_op_res_128538;
        }
        // Load accum params
        {
            x_128539 = local_acc_128601;
        }
        // Load next params
        {
            x_128540 = defunc_9_slope_fun_res_128570;
        }
        // Red body
        {
            float defunc_1_op_res_128541 = x_128539 + x_128540;
            
            local_acc_128601 = defunc_1_op_res_128541;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128595.mem)[flat_tid_119435] =
        local_acc_128600;
    ((float *) reduce_stage_1_tid_res_arr_mem_128597.mem)[flat_tid_119435] =
        local_acc_128601;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131441_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131441_end -
                 futhark_mc_segred_stage_1_parloop_131441_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131441_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131441_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131441_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131437(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119435 = tid;
    int num_tasks_128594 = info.nsubtasks;
    struct futhark_mc_task_131436 *futhark_mc_task_131436 =
                                  (struct futhark_mc_task_131436 *) args;
    struct futhark_context *ctx = futhark_mc_task_131436->ctx;
    uint64_t futhark_mc_segred_task_131437_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131437_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131436->free_n_114463;
    int64_t gtid_119428 = futhark_mc_task_131436->free_gtid_119428;
    int64_t x_119526 = futhark_mc_task_131436->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131436->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131436->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131436->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128277 = futhark_mc_task_131436->free_x_128277;
    float x_128278 = futhark_mc_task_131436->free_x_128278;
    float defunc_0_f_res_128281 =
          futhark_mc_task_131436->free_defunc_0_f_res_128281;
    float a11_128317 = futhark_mc_task_131436->free_a11_128317;
    float b11_128319 = futhark_mc_task_131436->free_b11_128319;
    float c11_128320 = futhark_mc_task_131436->free_c11_128320;
    float defunc_2_reduce_res_128321 =
          *futhark_mc_task_131436->retval_defunc_2_reduce_res_128321;
    float defunc_2_reduce_res_128322 =
          *futhark_mc_task_131436->retval_defunc_2_reduce_res_128322;
    size_t reduce_stage_1_tid_res_arr_mem_128595_cached_sizze_131438 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128595 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_128597_cached_sizze_131439 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128597 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128595_cached_sizze_131438 <
        (size_t) ((int64_t) 4 * num_tasks_128594)) {
        reduce_stage_1_tid_res_arr_mem_128595 =
            realloc(reduce_stage_1_tid_res_arr_mem_128595, (int64_t) 4 *
                    num_tasks_128594);
        reduce_stage_1_tid_res_arr_mem_128595_cached_sizze_131438 =
            (int64_t) 4 * num_tasks_128594;
    }
    if (reduce_stage_1_tid_res_arr_mem_128597_cached_sizze_131439 <
        (size_t) ((int64_t) 4 * num_tasks_128594)) {
        reduce_stage_1_tid_res_arr_mem_128597 =
            realloc(reduce_stage_1_tid_res_arr_mem_128597, (int64_t) 4 *
                    num_tasks_128594);
        reduce_stage_1_tid_res_arr_mem_128597_cached_sizze_131439 =
            (int64_t) 4 * num_tasks_128594;
    }
    
    int64_t iter_128599;
    struct futhark_mc_segred_stage_1_parloop_struct_131440
    futhark_mc_segred_stage_1_parloop_struct_131440;
    
    futhark_mc_segred_stage_1_parloop_struct_131440.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_gtid_119428 =
        gtid_119428;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_x_119526 = x_119526;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_x_128277 = x_128277;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_x_128278 = x_128278;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_defunc_0_f_res_128281 =
        defunc_0_f_res_128281;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_a11_128317 =
        a11_128317;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_b11_128319 =
        b11_128319;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_c11_128320 =
        c11_128320;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_reduce_stage_1_tid_res_arr_mem_128595 =
        reduce_stage_1_tid_res_arr_mem_128595;
    futhark_mc_segred_stage_1_parloop_struct_131440.free_reduce_stage_1_tid_res_arr_mem_128597 =
        reduce_stage_1_tid_res_arr_mem_128597;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131441_task;
    
    futhark_mc_segred_stage_1_parloop_131441_task.name =
        "futhark_mc_segred_stage_1_parloop_131441";
    futhark_mc_segred_stage_1_parloop_131441_task.fn =
        futhark_mc_segred_stage_1_parloop_131441;
    futhark_mc_segred_stage_1_parloop_131441_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131440;
    futhark_mc_segred_stage_1_parloop_131441_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131441_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131441_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131441_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131441_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131441_task);
    
    if (futhark_mc_segred_stage_1_parloop_131441_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131441_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131441_total_end -
                 futhark_mc_segred_stage_1_parloop_131441_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131441_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131441_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131441_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128321 = 0.0F;
        defunc_2_reduce_res_128322 = 0.0F;
    }
    
    float x_128602;
    float x_128603;
    float x_128605;
    float x_128606;
    
    for (int32_t i_128608 = 0; i_128608 < num_tasks_128594; i_128608++) {
        flat_tid_119435 = i_128608;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128602 = defunc_2_reduce_res_128321;
            }
            // load next params
            {
                x_128603 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128595)[flat_tid_119435];
            }
            // red body
            {
                float defunc_1_op_res_128604 = x_128602 + x_128603;
                
                defunc_2_reduce_res_128321 = defunc_1_op_res_128604;
            }
            // load acc params
            {
                x_128605 = defunc_2_reduce_res_128322;
            }
            // load next params
            {
                x_128606 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128597)[flat_tid_119435];
            }
            // red body
            {
                float defunc_1_op_res_128607 = x_128605 + x_128606;
                
                defunc_2_reduce_res_128322 = defunc_1_op_res_128607;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128595);
    free(reduce_stage_1_tid_res_arr_mem_128597);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131437_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131437_end -
                 futhark_mc_segred_task_131437_start;
        
        ctx->futhark_mc_segred_task_131437_runs[tid]++;
        ctx->futhark_mc_segred_task_131437_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131437_iter[tid] += iterations;
    }
    *futhark_mc_task_131436->retval_defunc_2_reduce_res_128321 =
        defunc_2_reduce_res_128321;
    *futhark_mc_task_131436->retval_defunc_2_reduce_res_128322 =
        defunc_2_reduce_res_128322;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131428(void *args, int64_t start,
                                            int64_t end, int flat_tid_119431,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131427
    *futhark_mc_segmap_parloop_struct_131427 =
    (struct futhark_mc_segmap_parloop_struct_131427 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131427->ctx;
    uint64_t futhark_mc_segmap_parloop_131428_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131428_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131427->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131427->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131427->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131427->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131427->free_i_114539;
    int64_t gtid_119428 =
            futhark_mc_segmap_parloop_struct_131427->free_gtid_119428;
    int64_t x_119526 = futhark_mc_segmap_parloop_struct_131427->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122855 = {.desc ="mem_122855", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122855,
                                  .size =0, .references =NULL};
    struct memblock mem_122858 = {.desc ="mem_122858", .mem =
                                  futhark_mc_segmap_parloop_struct_131427->free_mem_122858,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128507 = start;
    
    for (; iter_128507 < end; iter_128507++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128571 = t_n_m_114520;
        int64_t gtid_119432 = iter_128507;
        int64_t remnant_128572 = iter_128507 - gtid_119432;
        int64_t x_128277 = ((int64_t *) mem_122067.mem)[gtid_119428 *
                                                        t_n_m_114520 +
                                                        gtid_119432];
        float x_128278 = ((float *) mem_122071.mem)[gtid_119428 * t_n_m_114520 +
                                                    gtid_119432];
        int64_t min_arg_128279 = mul64(t_jump_114470, gtid_119432);
        int64_t min_res_128280 = smin64(i_114539, min_arg_128279);
        float defunc_0_f_res_128281 = sitofp_i64_f32(min_res_128280);
        float defunc_2_reduce_res_128282;
        float defunc_2_reduce_res_128283;
        float defunc_2_reduce_res_128284;
        int64_t flat_tid_119433 = (int64_t) 0;
        int32_t num_tasks_128573;
        struct futhark_mc_task_131429 futhark_mc_task_131429;
        
        futhark_mc_task_131429.ctx = ctx;
        futhark_mc_task_131429.free_n_114463 = n_114463;
        futhark_mc_task_131429.free_gtid_119428 = gtid_119428;
        futhark_mc_task_131429.free_x_119526 = x_119526;
        futhark_mc_task_131429.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131429.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131429.free_x_128277 = x_128277;
        futhark_mc_task_131429.free_x_128278 = x_128278;
        futhark_mc_task_131429.free_defunc_0_f_res_128281 =
            defunc_0_f_res_128281;
        futhark_mc_task_131429.retval_defunc_2_reduce_res_128282 =
            &defunc_2_reduce_res_128282;
        futhark_mc_task_131429.retval_defunc_2_reduce_res_128283 =
            &defunc_2_reduce_res_128283;
        futhark_mc_task_131429.retval_defunc_2_reduce_res_128284 =
            &defunc_2_reduce_res_128284;
        
        struct scheduler_segop futhark_mc_task_131429_task;
        
        futhark_mc_task_131429_task.args = &futhark_mc_task_131429;
        futhark_mc_task_131429_task.top_level_fn =
            futhark_mc_segred_task_131430;
        futhark_mc_task_131429_task.name = "futhark_mc_segred_task_131430";
        futhark_mc_task_131429_task.iterations = t_window_114466;
        futhark_mc_task_131429_task.task_time =
            &ctx->futhark_mc_segred_task_131430_total_time;
        futhark_mc_task_131429_task.task_iter =
            &ctx->futhark_mc_segred_task_131430_total_iter;
        futhark_mc_task_131429_task.sched = STATIC;
        futhark_mc_task_131429_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131430_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131429_task);
        
        if (futhark_mc_segred_task_131430_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_128313 = defunc_2_reduce_res_128282 *
              defunc_2_reduce_res_128284;
        float y_128314 = defunc_2_reduce_res_128283 *
              defunc_2_reduce_res_128283;
        float y_128315 = x_128313 - y_128314;
        float det1_128316 = 1.0F / y_128315;
        float a11_128317 = defunc_2_reduce_res_128284 * det1_128316;
        float negate_arg_128318 = defunc_2_reduce_res_128283 * det1_128316;
        float b11_128319 = 0.0F - negate_arg_128318;
        float c11_128320 = defunc_2_reduce_res_128282 * det1_128316;
        float defunc_2_reduce_res_128321;
        float defunc_2_reduce_res_128322;
        int64_t flat_tid_119435 = (int64_t) 0;
        int32_t num_tasks_128594;
        struct futhark_mc_task_131436 futhark_mc_task_131436;
        
        futhark_mc_task_131436.ctx = ctx;
        futhark_mc_task_131436.free_n_114463 = n_114463;
        futhark_mc_task_131436.free_gtid_119428 = gtid_119428;
        futhark_mc_task_131436.free_x_119526 = x_119526;
        futhark_mc_task_131436.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131436.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131436.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131436.free_x_128277 = x_128277;
        futhark_mc_task_131436.free_x_128278 = x_128278;
        futhark_mc_task_131436.free_defunc_0_f_res_128281 =
            defunc_0_f_res_128281;
        futhark_mc_task_131436.free_a11_128317 = a11_128317;
        futhark_mc_task_131436.free_b11_128319 = b11_128319;
        futhark_mc_task_131436.free_c11_128320 = c11_128320;
        futhark_mc_task_131436.retval_defunc_2_reduce_res_128321 =
            &defunc_2_reduce_res_128321;
        futhark_mc_task_131436.retval_defunc_2_reduce_res_128322 =
            &defunc_2_reduce_res_128322;
        
        struct scheduler_segop futhark_mc_task_131436_task;
        
        futhark_mc_task_131436_task.args = &futhark_mc_task_131436;
        futhark_mc_task_131436_task.top_level_fn =
            futhark_mc_segred_task_131437;
        futhark_mc_task_131436_task.name = "futhark_mc_segred_task_131437";
        futhark_mc_task_131436_task.iterations = t_window_114466;
        futhark_mc_task_131436_task.task_time =
            &ctx->futhark_mc_segred_task_131437_total_time;
        futhark_mc_task_131436_task.task_iter =
            &ctx->futhark_mc_segred_task_131437_total_iter;
        futhark_mc_task_131436_task.sched = STATIC;
        futhark_mc_task_131436_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131437_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131436_task);
        
        if (futhark_mc_segred_task_131437_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122855.mem)[gtid_119432] = defunc_2_reduce_res_128321;
        ((float *) mem_122858.mem)[gtid_119432] = defunc_2_reduce_res_128322;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131428_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131428_end -
                 futhark_mc_segmap_parloop_131428_start;
        
        ctx->futhark_mc_segmap_parloop_131428_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131428_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131428_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131426(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119431 = tid;
    int num_tasks_128438 = info.nsubtasks;
    struct futhark_mc_task_131422 *futhark_mc_task_131422 =
                                  (struct futhark_mc_task_131422 *) args;
    struct futhark_context *ctx = futhark_mc_task_131422->ctx;
    uint64_t futhark_mc_segmap_nested_task_131426_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131426_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131422->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131422->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131422->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131422->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131422->free_i_114539;
    int64_t gtid_119428 = futhark_mc_task_131422->free_gtid_119428;
    int64_t x_119526 = futhark_mc_task_131422->free_x_119526;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131422->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131422->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131422->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131422->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131422->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122855 = {.desc ="mem_122855", .mem =
                                  futhark_mc_task_131422->free_mem_122855,
                                  .size =0, .references =NULL};
    struct memblock mem_122858 = {.desc ="mem_122858", .mem =
                                  futhark_mc_task_131422->free_mem_122858,
                                  .size =0, .references =NULL};
    int64_t iter_128507;
    struct futhark_mc_segmap_parloop_struct_131427
    futhark_mc_segmap_parloop_struct_131427;
    
    futhark_mc_segmap_parloop_struct_131427.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131427.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131427.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131427.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131427.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131427.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131427.free_gtid_119428 = gtid_119428;
    futhark_mc_segmap_parloop_struct_131427.free_x_119526 = x_119526;
    futhark_mc_segmap_parloop_struct_131427.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122855 = mem_122855.mem;
    futhark_mc_segmap_parloop_struct_131427.free_mem_122858 = mem_122858.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131428_task;
    
    futhark_mc_segmap_parloop_131428_task.name =
        "futhark_mc_segmap_parloop_131428";
    futhark_mc_segmap_parloop_131428_task.fn = futhark_mc_segmap_parloop_131428;
    futhark_mc_segmap_parloop_131428_task.args =
        &futhark_mc_segmap_parloop_struct_131427;
    futhark_mc_segmap_parloop_131428_task.iterations = iterations;
    futhark_mc_segmap_parloop_131428_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131428_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131428_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131428_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131428_task);
    
    if (futhark_mc_segmap_parloop_131428_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131428_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131428_total_end -
                 futhark_mc_segmap_parloop_131428_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131428_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131426_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131426_end -
                 futhark_mc_segmap_nested_task_131426_start;
        
        ctx->futhark_mc_segmap_nested_task_131426_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131426_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131426_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131419(void *args, int64_t start,
                                            int64_t end, int flat_tid_119427,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131418
    *futhark_mc_segmap_parloop_struct_131418 =
    (struct futhark_mc_segmap_parloop_struct_131418 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131418->ctx;
    uint64_t futhark_mc_segmap_parloop_131419_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131419_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131418->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131418->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131418->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131418->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131418->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131418->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131418->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122892 = {.desc ="mem_122892", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122892,
                                  .size =0, .references =NULL};
    struct memblock mem_122896 = {.desc ="mem_122896", .mem =
                                  futhark_mc_segmap_parloop_struct_131418->free_mem_122896,
                                  .size =0, .references =NULL};
    size_t mem_122855_cached_sizze_131420 = 0;
    char *mem_122855 = NULL;
    size_t mem_122858_cached_sizze_131421 = 0;
    char *mem_122858 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128276 = start;
    
    if (mem_122855_cached_sizze_131420 < (size_t) bytes_121998) {
        mem_122855 = realloc(mem_122855, bytes_121998);
        mem_122855_cached_sizze_131420 = bytes_121998;
    }
    if (mem_122858_cached_sizze_131421 < (size_t) bytes_121998) {
        mem_122858 = realloc(mem_122858, bytes_121998);
        mem_122858_cached_sizze_131421 = bytes_121998;
    }
    for (; iter_128276 < end; iter_128276++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128436 = m_114462;
        int64_t gtid_119428 = iter_128276;
        int64_t remnant_128437 = iter_128276 - gtid_119428;
        int64_t x_119526 = ((int64_t *) mem_121845.mem)[gtid_119428];
        int64_t flat_tid_119429 = (int64_t) 0;
        int32_t num_tasks_128438;
        int64_t flat_tid_119431 = (int64_t) 0;
        struct futhark_mc_task_131422 futhark_mc_task_131422;
        
        futhark_mc_task_131422.ctx = ctx;
        futhark_mc_task_131422.free_n_114463 = n_114463;
        futhark_mc_task_131422.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131422.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131422.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131422.free_i_114539 = i_114539;
        futhark_mc_task_131422.free_gtid_119428 = gtid_119428;
        futhark_mc_task_131422.free_x_119526 = x_119526;
        futhark_mc_task_131422.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131422.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131422.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131422.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131422.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131422.free_mem_122855 = mem_122855;
        futhark_mc_task_131422.free_mem_122858 = mem_122858;
        
        struct scheduler_segop futhark_mc_task_131422_task;
        
        futhark_mc_task_131422_task.args = &futhark_mc_task_131422;
        futhark_mc_task_131422_task.top_level_fn =
            futhark_mc_segmap_task_131423;
        futhark_mc_task_131422_task.name = "futhark_mc_segmap_task_131423";
        futhark_mc_task_131422_task.iterations = t_n_m_114520;
        futhark_mc_task_131422_task.task_time =
            &ctx->futhark_mc_segmap_task_131423_total_time;
        futhark_mc_task_131422_task.task_iter =
            &ctx->futhark_mc_segmap_task_131423_total_iter;
        futhark_mc_task_131422_task.sched = STATIC;
        futhark_mc_task_131422_task.nested_fn =
            futhark_mc_segmap_nested_task_131426;
        
        int futhark_mc_segmap_task_131423_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131422_task);
        
        if (futhark_mc_segmap_task_131423_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122892.mem + gtid_119428 * t_n_m_114520 * (int64_t) 4,
                mem_122855 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_122896.mem + gtid_119428 * t_n_m_114520 * (int64_t) 4,
                mem_122858 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122855);
    free(mem_122858);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131419_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131419_end -
                 futhark_mc_segmap_parloop_131419_start;
        
        ctx->futhark_mc_segmap_parloop_131419_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131419_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131419_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131417(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119427 = tid;
    int num_tasks_128182 = info.nsubtasks;
    struct futhark_mc_task_131411 *futhark_mc_task_131411 =
                                  (struct futhark_mc_task_131411 *) args;
    struct futhark_context *ctx = futhark_mc_task_131411->ctx;
    uint64_t futhark_mc_segmap_nested_task_131417_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131417_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131411->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131411->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131411->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131411->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131411->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131411->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131411->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131411->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131411->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131411->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131411->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131411->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131411->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122892 = {.desc ="mem_122892", .mem =
                                  futhark_mc_task_131411->free_mem_122892,
                                  .size =0, .references =NULL};
    struct memblock mem_122896 = {.desc ="mem_122896", .mem =
                                  futhark_mc_task_131411->free_mem_122896,
                                  .size =0, .references =NULL};
    int64_t iter_128276;
    struct futhark_mc_segmap_parloop_struct_131418
    futhark_mc_segmap_parloop_struct_131418;
    
    futhark_mc_segmap_parloop_struct_131418.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131418.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131418.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131418.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131418.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131418.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131418.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131418.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131418.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122892 = mem_122892.mem;
    futhark_mc_segmap_parloop_struct_131418.free_mem_122896 = mem_122896.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131419_task;
    
    futhark_mc_segmap_parloop_131419_task.name =
        "futhark_mc_segmap_parloop_131419";
    futhark_mc_segmap_parloop_131419_task.fn = futhark_mc_segmap_parloop_131419;
    futhark_mc_segmap_parloop_131419_task.args =
        &futhark_mc_segmap_parloop_struct_131418;
    futhark_mc_segmap_parloop_131419_task.iterations = iterations;
    futhark_mc_segmap_parloop_131419_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131419_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131419_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131419_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131419_task);
    
    if (futhark_mc_segmap_parloop_131419_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131419_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131419_total_end -
                 futhark_mc_segmap_parloop_131419_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131419_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131419_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131419_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131417_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131417_end -
                 futhark_mc_segmap_nested_task_131417_start;
        
        ctx->futhark_mc_segmap_nested_task_131417_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131417_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131417_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131442 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122936;
    char *free_mem_122940;
};
struct futhark_mc_segmap_parloop_struct_131444 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122936;
    char *free_mem_122940;
};
static int futhark_mc_segmap_parloop_131445(void *args, int64_t start,
                                            int64_t end, int flat_tid_119697,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131444
    *futhark_mc_segmap_parloop_struct_131444 =
    (struct futhark_mc_segmap_parloop_struct_131444 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131444->ctx;
    uint64_t futhark_mc_segmap_parloop_131445_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131445_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131444->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131444->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131444->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131444->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131444->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131444->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131444->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122936 = {.desc ="mem_122936", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122936,
                                  .size =0, .references =NULL};
    struct memblock mem_122940 = {.desc ="mem_122940", .mem =
                                  futhark_mc_segmap_parloop_struct_131444->free_mem_122940,
                                  .size =0, .references =NULL};
    size_t mem_122905_cached_sizze_131446 = 0;
    char *mem_122905 = NULL;
    size_t mem_122908_cached_sizze_131447 = 0;
    char *mem_122908 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128610 = start;
    
    if (mem_122905_cached_sizze_131446 < (size_t) bytes_121998) {
        mem_122905 = realloc(mem_122905, bytes_121998);
        mem_122905_cached_sizze_131446 = bytes_121998;
    }
    if (mem_122908_cached_sizze_131447 < (size_t) bytes_121998) {
        mem_122908 = realloc(mem_122908, bytes_121998);
        mem_122908_cached_sizze_131447 = bytes_121998;
    }
    for (; iter_128610 < end; iter_128610++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128724 = m_114462;
        int64_t gtid_119698 = iter_128610;
        int64_t remnant_128725 = iter_128610 - gtid_119698;
        int64_t x_115967 = ((int64_t *) mem_121845.mem)[gtid_119698];
        
        for (int64_t i_128611 = 0; i_128611 < t_n_m_114520; i_128611++) {
            int64_t x_128614 = ((int64_t *) mem_122067.mem)[gtid_119698 *
                                                            t_n_m_114520 +
                                                            i_128611];
            float x_128615 = ((float *) mem_122071.mem)[gtid_119698 *
                                                        t_n_m_114520 +
                                                        i_128611];
            int64_t min_arg_128616 = mul64(t_jump_114470, i_128611);
            int64_t min_res_128617 = smin64(i_114539, min_arg_128616);
            float defunc_0_f_res_128618 = sitofp_i64_f32(min_res_128617);
            float defunc_2_reduce_res_128619;
            float defunc_2_reduce_res_128620;
            float defunc_2_reduce_res_128621;
            float defunc_2_reduce_res_128622;
            float defunc_2_reduce_res_128623;
            float redout_128625;
            float redout_128626;
            float redout_128627;
            float redout_128628;
            float redout_128629;
            
            redout_128625 = 0.0F;
            redout_128626 = 0.0F;
            redout_128627 = 0.0F;
            redout_128628 = 0.0F;
            redout_128629 = 0.0F;
            for (int64_t i_128624 = 0; i_128624 < t_window_114466; i_128624++) {
                bool cond_128630 = sle64(x_115967, i_128624);
                float defunc_0_f_res_128631;
                
                if (cond_128630) {
                    defunc_0_f_res_128631 = 0.0F;
                } else {
                    int64_t i_128632 = add64(x_128614, i_128624);
                    float x_128633 = ((float *) mem_121867.mem)[gtid_119698 *
                                                                n_114463 +
                                                                i_128632];
                    float defunc_0_f_res_f_res_128634 = 1.0F + x_128633;
                    
                    defunc_0_f_res_128631 = defunc_0_f_res_f_res_128634;
                }
                
                float defunc_0_f_res_128635;
                
                if (cond_128630) {
                    defunc_0_f_res_128635 = 0.0F;
                } else {
                    int64_t i_128636 = add64(x_128614, i_128624);
                    float x_128637 = ((float *) mem_122822.mem)[gtid_119698 *
                                                                n_114463 +
                                                                i_128636];
                    
                    defunc_0_f_res_128635 = x_128637;
                }
                
                float x_j_128638 = defunc_0_f_res_128631 -
                      defunc_0_f_res_128618;
                float abs_res_128639 = (float) fabs(x_j_128638);
                float tmp1_128640 = abs_res_128639 / x_128615;
                float x_128641 = tmp1_128640 * tmp1_128640;
                float y_128642 = tmp1_128640 * x_128641;
                float tmp2_128643 = 1.0F - y_128642;
                float x_128644 = tmp2_128643 * tmp2_128643;
                float tmp3_128645 = tmp2_128643 * x_128644;
                float w_j_128646 = defunc_0_f_res_128635 * tmp3_128645;
                float xw_j_128647 = x_j_128638 * w_j_128646;
                float x2w_j_128648 = x_j_128638 * xw_j_128647;
                float x3w_j_128649 = x_j_128638 * x2w_j_128648;
                float x4w_j_128650 = x_j_128638 * x3w_j_128649;
                float defunc_1_op_res_128651 = w_j_128646 + redout_128625;
                float defunc_1_op_res_128652 = xw_j_128647 + redout_128626;
                float defunc_1_op_res_128653 = x2w_j_128648 + redout_128627;
                float defunc_1_op_res_128654 = x3w_j_128649 + redout_128628;
                float defunc_1_op_res_128655 = x4w_j_128650 + redout_128629;
                float redout_tmp_128728 = defunc_1_op_res_128651;
                float redout_tmp_128729 = defunc_1_op_res_128652;
                float redout_tmp_128730 = defunc_1_op_res_128653;
                float redout_tmp_128731 = defunc_1_op_res_128654;
                float redout_tmp_128732 = defunc_1_op_res_128655;
                
                redout_128625 = redout_tmp_128728;
                redout_128626 = redout_tmp_128729;
                redout_128627 = redout_tmp_128730;
                redout_128628 = redout_tmp_128731;
                redout_128629 = redout_tmp_128732;
            }
            defunc_2_reduce_res_128619 = redout_128625;
            defunc_2_reduce_res_128620 = redout_128626;
            defunc_2_reduce_res_128621 = redout_128627;
            defunc_2_reduce_res_128622 = redout_128628;
            defunc_2_reduce_res_128623 = redout_128629;
            
            float x_128656 = defunc_2_reduce_res_128621 *
                  defunc_2_reduce_res_128623;
            float y_128657 = defunc_2_reduce_res_128622 *
                  defunc_2_reduce_res_128622;
            float a12_128658 = x_128656 - y_128657;
            float x_128659 = defunc_2_reduce_res_128621 *
                  defunc_2_reduce_res_128622;
            float y_128660 = defunc_2_reduce_res_128620 *
                  defunc_2_reduce_res_128623;
            float b12_128661 = x_128659 - y_128660;
            float x_128662 = defunc_2_reduce_res_128620 *
                  defunc_2_reduce_res_128622;
            float y_128663 = defunc_2_reduce_res_128621 *
                  defunc_2_reduce_res_128621;
            float c12_128664 = x_128662 - y_128663;
            float x_128665 = defunc_2_reduce_res_128619 *
                  defunc_2_reduce_res_128623;
            float b2_128666 = x_128665 - y_128663;
            float x_128667 = defunc_2_reduce_res_128620 *
                  defunc_2_reduce_res_128621;
            float y_128668 = defunc_2_reduce_res_128619 *
                  defunc_2_reduce_res_128622;
            float c2_128669 = x_128667 - y_128668;
            float x_128670 = defunc_2_reduce_res_128619 * a12_128658;
            float y_128671 = defunc_2_reduce_res_128620 * b12_128661;
            float x_128672 = x_128670 + y_128671;
            float y_128673 = defunc_2_reduce_res_128621 * c12_128664;
            float y_128674 = x_128672 + y_128673;
            float det_128675 = 1.0F / y_128674;
            float a12_128676 = a12_128658 * det_128675;
            float b12_128677 = b12_128661 * det_128675;
            float c12_128678 = c12_128664 * det_128675;
            float b2_128679 = b2_128666 * det_128675;
            float c2_128680 = c2_128669 * det_128675;
            float defunc_2_reduce_res_128681;
            float defunc_2_reduce_res_128682;
            float redout_128684;
            float redout_128685;
            
            redout_128684 = 0.0F;
            redout_128685 = 0.0F;
            for (int64_t i_128683 = 0; i_128683 < t_window_114466; i_128683++) {
                bool cond_128686 = sle64(x_115967, i_128683);
                float defunc_0_f_res_128687;
                
                if (cond_128686) {
                    defunc_0_f_res_128687 = 0.0F;
                } else {
                    int64_t i_128688 = add64(x_128614, i_128683);
                    float x_128689 = ((float *) mem_121867.mem)[gtid_119698 *
                                                                n_114463 +
                                                                i_128688];
                    float defunc_0_f_res_f_res_128690 = 1.0F + x_128689;
                    
                    defunc_0_f_res_128687 = defunc_0_f_res_f_res_128690;
                }
                
                float defunc_0_f_res_128691;
                
                if (cond_128686) {
                    defunc_0_f_res_128691 = 0.0F;
                } else {
                    int64_t i_128692 = add64(x_128614, i_128683);
                    float x_128693 = ((float *) mem_122822.mem)[gtid_119698 *
                                                                n_114463 +
                                                                i_128692];
                    
                    defunc_0_f_res_128691 = x_128693;
                }
                
                float x_j_128694 = defunc_0_f_res_128687 -
                      defunc_0_f_res_128618;
                float abs_res_128695 = (float) fabs(x_j_128694);
                float tmp1_128696 = abs_res_128695 / x_128615;
                float x_128697 = tmp1_128696 * tmp1_128696;
                float y_128698 = tmp1_128696 * x_128697;
                float tmp2_128699 = 1.0F - y_128698;
                float x_128700 = tmp2_128699 * tmp2_128699;
                float tmp3_128701 = tmp2_128699 * x_128700;
                float tmp4_128702 = defunc_0_f_res_128691 * tmp3_128701;
                float defunc_1_f_res_128703 = x_j_128694 * tmp4_128702;
                float defunc_1_f_res_128704 = x_j_128694 *
                      defunc_1_f_res_128703;
                float defunc_0_f_res_128705;
                
                if (cond_128686) {
                    defunc_0_f_res_128705 = 0.0F;
                } else {
                    int64_t i_128706 = add64(x_128614, i_128683);
                    float x_128707 = ((float *) mem_122818.mem)[gtid_119698 *
                                                                n_114463 +
                                                                i_128706];
                    
                    defunc_0_f_res_128705 = x_128707;
                }
                
                float x_128708 = a12_128676 * tmp4_128702;
                float y_128709 = b12_128677 * defunc_1_f_res_128703;
                float x_128710 = x_128708 + y_128709;
                float y_128711 = c12_128678 * defunc_1_f_res_128704;
                float x_128712 = x_128710 + y_128711;
                float defunc_9_fit_fun_res_128713 = defunc_0_f_res_128705 *
                      x_128712;
                float x_128714 = b12_128677 * tmp4_128702;
                float y_128715 = b2_128679 * defunc_1_f_res_128703;
                float x_128716 = x_128714 + y_128715;
                float y_128717 = c2_128680 * defunc_1_f_res_128704;
                float x_128718 = x_128716 + y_128717;
                float defunc_9_slope_fun_res_128719 = defunc_0_f_res_128705 *
                      x_128718;
                float defunc_1_op_res_128720 = defunc_9_fit_fun_res_128713 +
                      redout_128684;
                float defunc_1_op_res_128721 = defunc_9_slope_fun_res_128719 +
                      redout_128685;
                float redout_tmp_128733 = defunc_1_op_res_128720;
                float redout_tmp_128734 = defunc_1_op_res_128721;
                
                redout_128684 = redout_tmp_128733;
                redout_128685 = redout_tmp_128734;
            }
            defunc_2_reduce_res_128681 = redout_128684;
            defunc_2_reduce_res_128682 = redout_128685;
            ((float *) mem_122905)[i_128611] = defunc_2_reduce_res_128681;
            ((float *) mem_122908)[i_128611] = defunc_2_reduce_res_128682;
        }
        memmove(mem_122936.mem + gtid_119698 * t_n_m_114520 * (int64_t) 4,
                mem_122905 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_122940.mem + gtid_119698 * t_n_m_114520 * (int64_t) 4,
                mem_122908 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122905);
    free(mem_122908);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131445_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131445_end -
                 futhark_mc_segmap_parloop_131445_start;
        
        ctx->futhark_mc_segmap_parloop_131445_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131445_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131445_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131443(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119697 = tid;
    int num_tasks_128609 = info.nsubtasks;
    struct futhark_mc_task_131442 *futhark_mc_task_131442 =
                                  (struct futhark_mc_task_131442 *) args;
    struct futhark_context *ctx = futhark_mc_task_131442->ctx;
    uint64_t futhark_mc_segmap_task_131443_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131443_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131442->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131442->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131442->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131442->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131442->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131442->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131442->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131442->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131442->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131442->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131442->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131442->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131442->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122936 = {.desc ="mem_122936", .mem =
                                  futhark_mc_task_131442->free_mem_122936,
                                  .size =0, .references =NULL};
    struct memblock mem_122940 = {.desc ="mem_122940", .mem =
                                  futhark_mc_task_131442->free_mem_122940,
                                  .size =0, .references =NULL};
    int64_t iter_128610;
    struct futhark_mc_segmap_parloop_struct_131444
    futhark_mc_segmap_parloop_struct_131444;
    
    futhark_mc_segmap_parloop_struct_131444.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131444.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131444.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131444.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131444.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131444.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131444.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131444.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131444.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122936 = mem_122936.mem;
    futhark_mc_segmap_parloop_struct_131444.free_mem_122940 = mem_122940.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131445_task;
    
    futhark_mc_segmap_parloop_131445_task.name =
        "futhark_mc_segmap_parloop_131445";
    futhark_mc_segmap_parloop_131445_task.fn = futhark_mc_segmap_parloop_131445;
    futhark_mc_segmap_parloop_131445_task.args =
        &futhark_mc_segmap_parloop_struct_131444;
    futhark_mc_segmap_parloop_131445_task.iterations = iterations;
    futhark_mc_segmap_parloop_131445_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131445_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131445_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131445_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131445_task);
    
    if (futhark_mc_segmap_parloop_131445_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131445_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131445_total_end -
                 futhark_mc_segmap_parloop_131445_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131445_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131445_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131445_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131443_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131443_end -
                 futhark_mc_segmap_task_131443_start;
        
        ctx->futhark_mc_segmap_task_131443_runs[tid]++;
        ctx->futhark_mc_segmap_task_131443_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131443_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131449 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122936;
    char *free_mem_122940;
};
struct futhark_mc_task_131453 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122899;
    char *free_mem_122902;
};
struct futhark_mc_segmap_parloop_struct_131455 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122899;
    char *free_mem_122902;
};
static int futhark_mc_segmap_parloop_131456(void *args, int64_t start,
                                            int64_t end, int flat_tid_119701,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131455
    *futhark_mc_segmap_parloop_struct_131455 =
    (struct futhark_mc_segmap_parloop_struct_131455 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131455->ctx;
    uint64_t futhark_mc_segmap_parloop_131456_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131456_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131455->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131455->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131455->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131455->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131455->free_i_114539;
    int64_t gtid_119700 =
            futhark_mc_segmap_parloop_struct_131455->free_gtid_119700;
    int64_t x_119830 = futhark_mc_segmap_parloop_struct_131455->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122899,
                                  .size =0, .references =NULL};
    struct memblock mem_122902 = {.desc ="mem_122902", .mem =
                                  futhark_mc_segmap_parloop_struct_131455->free_mem_122902,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128960 = start;
    
    for (; iter_128960 < end; iter_128960++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129032 = t_n_m_114520;
        int64_t gtid_119702 = iter_128960;
        int64_t remnant_129033 = iter_128960 - gtid_119702;
        int64_t x_128849 = ((int64_t *) mem_122067.mem)[gtid_119700 *
                                                        t_n_m_114520 +
                                                        gtid_119702];
        float x_128850 = ((float *) mem_122071.mem)[gtid_119700 * t_n_m_114520 +
                                                    gtid_119702];
        int64_t min_arg_128851 = mul64(t_jump_114470, gtid_119702);
        int64_t min_res_128852 = smin64(i_114539, min_arg_128851);
        float defunc_0_f_res_128853 = sitofp_i64_f32(min_res_128852);
        float defunc_2_reduce_res_128854;
        float defunc_2_reduce_res_128855;
        float defunc_2_reduce_res_128856;
        float defunc_2_reduce_res_128857;
        float defunc_2_reduce_res_128858;
        float redout_128962;
        float redout_128963;
        float redout_128964;
        float redout_128965;
        float redout_128966;
        
        redout_128962 = 0.0F;
        redout_128963 = 0.0F;
        redout_128964 = 0.0F;
        redout_128965 = 0.0F;
        redout_128966 = 0.0F;
        for (int64_t i_128961 = 0; i_128961 < t_window_114466; i_128961++) {
            bool cond_128967 = sle64(x_119830, i_128961);
            float defunc_0_f_res_128968;
            
            if (cond_128967) {
                defunc_0_f_res_128968 = 0.0F;
            } else {
                int64_t i_128969 = add64(x_128849, i_128961);
                float x_128970 = ((float *) mem_121867.mem)[gtid_119700 *
                                                            n_114463 +
                                                            i_128969];
                float defunc_0_f_res_f_res_128971 = 1.0F + x_128970;
                
                defunc_0_f_res_128968 = defunc_0_f_res_f_res_128971;
            }
            
            float defunc_0_f_res_128972;
            
            if (cond_128967) {
                defunc_0_f_res_128972 = 0.0F;
            } else {
                int64_t i_128973 = add64(x_128849, i_128961);
                float x_128974 = ((float *) mem_122822.mem)[gtid_119700 *
                                                            n_114463 +
                                                            i_128973];
                
                defunc_0_f_res_128972 = x_128974;
            }
            
            float x_j_128975 = defunc_0_f_res_128968 - defunc_0_f_res_128853;
            float abs_res_128976 = (float) fabs(x_j_128975);
            float tmp1_128977 = abs_res_128976 / x_128850;
            float x_128978 = tmp1_128977 * tmp1_128977;
            float y_128979 = tmp1_128977 * x_128978;
            float tmp2_128980 = 1.0F - y_128979;
            float x_128981 = tmp2_128980 * tmp2_128980;
            float tmp3_128982 = tmp2_128980 * x_128981;
            float w_j_128983 = defunc_0_f_res_128972 * tmp3_128982;
            float xw_j_128984 = x_j_128975 * w_j_128983;
            float x2w_j_128985 = x_j_128975 * xw_j_128984;
            float x3w_j_128986 = x_j_128975 * x2w_j_128985;
            float x4w_j_128987 = x_j_128975 * x3w_j_128986;
            float defunc_1_op_res_128988 = w_j_128983 + redout_128962;
            float defunc_1_op_res_128989 = xw_j_128984 + redout_128963;
            float defunc_1_op_res_128990 = x2w_j_128985 + redout_128964;
            float defunc_1_op_res_128991 = x3w_j_128986 + redout_128965;
            float defunc_1_op_res_128992 = x4w_j_128987 + redout_128966;
            float redout_tmp_129034 = defunc_1_op_res_128988;
            float redout_tmp_129035 = defunc_1_op_res_128989;
            float redout_tmp_129036 = defunc_1_op_res_128990;
            float redout_tmp_129037 = defunc_1_op_res_128991;
            float redout_tmp_129038 = defunc_1_op_res_128992;
            
            redout_128962 = redout_tmp_129034;
            redout_128963 = redout_tmp_129035;
            redout_128964 = redout_tmp_129036;
            redout_128965 = redout_tmp_129037;
            redout_128966 = redout_tmp_129038;
        }
        defunc_2_reduce_res_128854 = redout_128962;
        defunc_2_reduce_res_128855 = redout_128963;
        defunc_2_reduce_res_128856 = redout_128964;
        defunc_2_reduce_res_128857 = redout_128965;
        defunc_2_reduce_res_128858 = redout_128966;
        
        float x_128891 = defunc_2_reduce_res_128856 *
              defunc_2_reduce_res_128858;
        float y_128892 = defunc_2_reduce_res_128857 *
              defunc_2_reduce_res_128857;
        float a12_128893 = x_128891 - y_128892;
        float x_128894 = defunc_2_reduce_res_128856 *
              defunc_2_reduce_res_128857;
        float y_128895 = defunc_2_reduce_res_128855 *
              defunc_2_reduce_res_128858;
        float b12_128896 = x_128894 - y_128895;
        float x_128897 = defunc_2_reduce_res_128855 *
              defunc_2_reduce_res_128857;
        float y_128898 = defunc_2_reduce_res_128856 *
              defunc_2_reduce_res_128856;
        float c12_128899 = x_128897 - y_128898;
        float x_128900 = defunc_2_reduce_res_128854 *
              defunc_2_reduce_res_128858;
        float b2_128901 = x_128900 - y_128898;
        float x_128902 = defunc_2_reduce_res_128855 *
              defunc_2_reduce_res_128856;
        float y_128903 = defunc_2_reduce_res_128854 *
              defunc_2_reduce_res_128857;
        float c2_128904 = x_128902 - y_128903;
        float x_128905 = defunc_2_reduce_res_128854 * a12_128893;
        float y_128906 = defunc_2_reduce_res_128855 * b12_128896;
        float x_128907 = x_128905 + y_128906;
        float y_128908 = defunc_2_reduce_res_128856 * c12_128899;
        float y_128909 = x_128907 + y_128908;
        float det_128910 = 1.0F / y_128909;
        float a12_128911 = a12_128893 * det_128910;
        float b12_128912 = b12_128896 * det_128910;
        float c12_128913 = c12_128899 * det_128910;
        float b2_128914 = b2_128901 * det_128910;
        float c2_128915 = c2_128904 * det_128910;
        float defunc_2_reduce_res_128916;
        float defunc_2_reduce_res_128917;
        float redout_128994;
        float redout_128995;
        
        redout_128994 = 0.0F;
        redout_128995 = 0.0F;
        for (int64_t i_128993 = 0; i_128993 < t_window_114466; i_128993++) {
            bool cond_128996 = sle64(x_119830, i_128993);
            float defunc_0_f_res_128997;
            
            if (cond_128996) {
                defunc_0_f_res_128997 = 0.0F;
            } else {
                int64_t i_128998 = add64(x_128849, i_128993);
                float x_128999 = ((float *) mem_121867.mem)[gtid_119700 *
                                                            n_114463 +
                                                            i_128998];
                float defunc_0_f_res_f_res_129000 = 1.0F + x_128999;
                
                defunc_0_f_res_128997 = defunc_0_f_res_f_res_129000;
            }
            
            float defunc_0_f_res_129001;
            
            if (cond_128996) {
                defunc_0_f_res_129001 = 0.0F;
            } else {
                int64_t i_129002 = add64(x_128849, i_128993);
                float x_129003 = ((float *) mem_122822.mem)[gtid_119700 *
                                                            n_114463 +
                                                            i_129002];
                
                defunc_0_f_res_129001 = x_129003;
            }
            
            float x_j_129004 = defunc_0_f_res_128997 - defunc_0_f_res_128853;
            float abs_res_129005 = (float) fabs(x_j_129004);
            float tmp1_129006 = abs_res_129005 / x_128850;
            float x_129007 = tmp1_129006 * tmp1_129006;
            float y_129008 = tmp1_129006 * x_129007;
            float tmp2_129009 = 1.0F - y_129008;
            float x_129010 = tmp2_129009 * tmp2_129009;
            float tmp3_129011 = tmp2_129009 * x_129010;
            float tmp4_129012 = defunc_0_f_res_129001 * tmp3_129011;
            float defunc_1_f_res_129013 = x_j_129004 * tmp4_129012;
            float defunc_1_f_res_129014 = x_j_129004 * defunc_1_f_res_129013;
            float defunc_0_f_res_129015;
            
            if (cond_128996) {
                defunc_0_f_res_129015 = 0.0F;
            } else {
                int64_t i_129016 = add64(x_128849, i_128993);
                float x_129017 = ((float *) mem_122818.mem)[gtid_119700 *
                                                            n_114463 +
                                                            i_129016];
                
                defunc_0_f_res_129015 = x_129017;
            }
            
            float x_129018 = a12_128911 * tmp4_129012;
            float y_129019 = b12_128912 * defunc_1_f_res_129013;
            float x_129020 = x_129018 + y_129019;
            float y_129021 = c12_128913 * defunc_1_f_res_129014;
            float x_129022 = x_129020 + y_129021;
            float defunc_9_fit_fun_res_129023 = defunc_0_f_res_129015 *
                  x_129022;
            float x_129024 = b12_128912 * tmp4_129012;
            float y_129025 = b2_128914 * defunc_1_f_res_129013;
            float x_129026 = x_129024 + y_129025;
            float y_129027 = c2_128915 * defunc_1_f_res_129014;
            float x_129028 = x_129026 + y_129027;
            float defunc_9_slope_fun_res_129029 = defunc_0_f_res_129015 *
                  x_129028;
            float defunc_1_op_res_129030 = defunc_9_fit_fun_res_129023 +
                  redout_128994;
            float defunc_1_op_res_129031 = defunc_9_slope_fun_res_129029 +
                  redout_128995;
            float redout_tmp_129039 = defunc_1_op_res_129030;
            float redout_tmp_129040 = defunc_1_op_res_129031;
            
            redout_128994 = redout_tmp_129039;
            redout_128995 = redout_tmp_129040;
        }
        defunc_2_reduce_res_128916 = redout_128994;
        defunc_2_reduce_res_128917 = redout_128995;
        ((float *) mem_122899.mem)[gtid_119702] = defunc_2_reduce_res_128916;
        ((float *) mem_122902.mem)[gtid_119702] = defunc_2_reduce_res_128917;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131456_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131456_end -
                 futhark_mc_segmap_parloop_131456_start;
        
        ctx->futhark_mc_segmap_parloop_131456_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131456_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131456_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131454(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119701 = tid;
    int num_tasks_128959 = info.nsubtasks;
    struct futhark_mc_task_131453 *futhark_mc_task_131453 =
                                  (struct futhark_mc_task_131453 *) args;
    struct futhark_context *ctx = futhark_mc_task_131453->ctx;
    uint64_t futhark_mc_segmap_task_131454_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131454_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131453->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131453->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131453->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131453->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131453->free_i_114539;
    int64_t gtid_119700 = futhark_mc_task_131453->free_gtid_119700;
    int64_t x_119830 = futhark_mc_task_131453->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131453->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131453->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131453->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131453->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131453->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_task_131453->free_mem_122899,
                                  .size =0, .references =NULL};
    struct memblock mem_122902 = {.desc ="mem_122902", .mem =
                                  futhark_mc_task_131453->free_mem_122902,
                                  .size =0, .references =NULL};
    int64_t iter_128960;
    struct futhark_mc_segmap_parloop_struct_131455
    futhark_mc_segmap_parloop_struct_131455;
    
    futhark_mc_segmap_parloop_struct_131455.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131455.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131455.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131455.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131455.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131455.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131455.free_gtid_119700 = gtid_119700;
    futhark_mc_segmap_parloop_struct_131455.free_x_119830 = x_119830;
    futhark_mc_segmap_parloop_struct_131455.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122899 = mem_122899.mem;
    futhark_mc_segmap_parloop_struct_131455.free_mem_122902 = mem_122902.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131456_task;
    
    futhark_mc_segmap_parloop_131456_task.name =
        "futhark_mc_segmap_parloop_131456";
    futhark_mc_segmap_parloop_131456_task.fn = futhark_mc_segmap_parloop_131456;
    futhark_mc_segmap_parloop_131456_task.args =
        &futhark_mc_segmap_parloop_struct_131455;
    futhark_mc_segmap_parloop_131456_task.iterations = iterations;
    futhark_mc_segmap_parloop_131456_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131456_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131456_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131456_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131456_task);
    
    if (futhark_mc_segmap_parloop_131456_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131456_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131456_total_end -
                 futhark_mc_segmap_parloop_131456_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131456_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131456_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131456_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131454_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131454_end -
                 futhark_mc_segmap_task_131454_start;
        
        ctx->futhark_mc_segmap_task_131454_runs[tid]++;
        ctx->futhark_mc_segmap_task_131454_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131454_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131458 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    char *free_mem_122899;
    char *free_mem_122902;
};
struct futhark_mc_task_131460 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_128736;
    float free_x_128737;
    float free_defunc_0_f_res_128740;
    float *retval_defunc_2_reduce_res_128741;
    float *retval_defunc_2_reduce_res_128742;
    float *retval_defunc_2_reduce_res_128743;
    float *retval_defunc_2_reduce_res_128744;
    float *retval_defunc_2_reduce_res_128745;
};
struct futhark_mc_segred_stage_1_parloop_struct_131467 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_128736;
    float free_x_128737;
    float free_defunc_0_f_res_128740;
    char *free_reduce_stage_1_tid_res_arr_mem_129121;
    char *free_reduce_stage_1_tid_res_arr_mem_129123;
    char *free_reduce_stage_1_tid_res_arr_mem_129125;
    char *free_reduce_stage_1_tid_res_arr_mem_129127;
    char *free_reduce_stage_1_tid_res_arr_mem_129129;
};
static int futhark_mc_segred_stage_1_parloop_131468(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119705,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131467
    *futhark_mc_segred_stage_1_parloop_struct_131467 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131467 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131467->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131468_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131468_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131467->free_n_114463;
    int64_t gtid_119700 =
            futhark_mc_segred_stage_1_parloop_struct_131467->free_gtid_119700;
    int64_t x_119830 =
            futhark_mc_segred_stage_1_parloop_struct_131467->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131467->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131467->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128736 =
            futhark_mc_segred_stage_1_parloop_struct_131467->free_x_128736;
    float x_128737 =
          futhark_mc_segred_stage_1_parloop_struct_131467->free_x_128737;
    float defunc_0_f_res_128740 =
          futhark_mc_segred_stage_1_parloop_struct_131467->free_defunc_0_f_res_128740;
    struct memblock reduce_stage_1_tid_res_arr_mem_129121 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129121",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131467->free_reduce_stage_1_tid_res_arr_mem_129121,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129123 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129123",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131467->free_reduce_stage_1_tid_res_arr_mem_129123,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129125 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129125",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131467->free_reduce_stage_1_tid_res_arr_mem_129125,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129127 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129127",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131467->free_reduce_stage_1_tid_res_arr_mem_129127,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129129 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129129",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131467->free_reduce_stage_1_tid_res_arr_mem_129129,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129131 = start;
    float x_129042;
    float x_129043;
    float x_129045;
    float x_129046;
    float x_129048;
    float x_129049;
    float x_129051;
    float x_129052;
    float x_129054;
    float x_129055;
    float local_acc_129132 = 0.0F;
    float local_acc_129133 = 0.0F;
    float local_acc_129134 = 0.0F;
    float local_acc_129135 = 0.0F;
    float local_acc_129136 = 0.0F;
    
    for (; iter_129131 < end; iter_129131++) {
        int64_t gtid_119706 = iter_129131;
        bool cond_129057 = sle64(x_119830, gtid_119706);
        float defunc_0_f_res_129058;
        
        if (cond_129057) {
            defunc_0_f_res_129058 = 0.0F;
        } else {
            int64_t i_129059 = add64(gtid_119706, x_128736);
            float x_129060 = ((float *) mem_121867.mem)[gtid_119700 * n_114463 +
                                                        i_129059];
            float defunc_0_f_res_f_res_129061 = 1.0F + x_129060;
            
            defunc_0_f_res_129058 = defunc_0_f_res_f_res_129061;
        }
        
        float defunc_0_f_res_129062;
        
        if (cond_129057) {
            defunc_0_f_res_129062 = 0.0F;
        } else {
            int64_t i_129063 = add64(gtid_119706, x_128736);
            float x_129064 = ((float *) mem_122822.mem)[gtid_119700 * n_114463 +
                                                        i_129063];
            
            defunc_0_f_res_129062 = x_129064;
        }
        
        float x_j_129065 = defunc_0_f_res_129058 - defunc_0_f_res_128740;
        float abs_res_129066 = (float) fabs(x_j_129065);
        float tmp1_129067 = abs_res_129066 / x_128737;
        float x_129068 = tmp1_129067 * tmp1_129067;
        float y_129069 = tmp1_129067 * x_129068;
        float tmp2_129070 = 1.0F - y_129069;
        float x_129071 = tmp2_129070 * tmp2_129070;
        float tmp3_129072 = tmp2_129070 * x_129071;
        float w_j_129073 = defunc_0_f_res_129062 * tmp3_129072;
        float xw_j_129074 = x_j_129065 * w_j_129073;
        float x2w_j_129075 = x_j_129065 * xw_j_129074;
        float x3w_j_129076 = x_j_129065 * x2w_j_129075;
        float x4w_j_129077 = x_j_129065 * x3w_j_129076;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129042 = local_acc_129132;
        }
        // Load next params
        {
            x_129043 = w_j_129073;
        }
        // Red body
        {
            float defunc_1_op_res_129044 = x_129042 + x_129043;
            
            local_acc_129132 = defunc_1_op_res_129044;
        }
        // Load accum params
        {
            x_129045 = local_acc_129133;
        }
        // Load next params
        {
            x_129046 = xw_j_129074;
        }
        // Red body
        {
            float defunc_1_op_res_129047 = x_129045 + x_129046;
            
            local_acc_129133 = defunc_1_op_res_129047;
        }
        // Load accum params
        {
            x_129048 = local_acc_129134;
        }
        // Load next params
        {
            x_129049 = x2w_j_129075;
        }
        // Red body
        {
            float defunc_1_op_res_129050 = x_129048 + x_129049;
            
            local_acc_129134 = defunc_1_op_res_129050;
        }
        // Load accum params
        {
            x_129051 = local_acc_129135;
        }
        // Load next params
        {
            x_129052 = x3w_j_129076;
        }
        // Red body
        {
            float defunc_1_op_res_129053 = x_129051 + x_129052;
            
            local_acc_129135 = defunc_1_op_res_129053;
        }
        // Load accum params
        {
            x_129054 = local_acc_129136;
        }
        // Load next params
        {
            x_129055 = x4w_j_129077;
        }
        // Red body
        {
            float defunc_1_op_res_129056 = x_129054 + x_129055;
            
            local_acc_129136 = defunc_1_op_res_129056;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129121.mem)[flat_tid_119705] =
        local_acc_129132;
    ((float *) reduce_stage_1_tid_res_arr_mem_129123.mem)[flat_tid_119705] =
        local_acc_129133;
    ((float *) reduce_stage_1_tid_res_arr_mem_129125.mem)[flat_tid_119705] =
        local_acc_129134;
    ((float *) reduce_stage_1_tid_res_arr_mem_129127.mem)[flat_tid_119705] =
        local_acc_129135;
    ((float *) reduce_stage_1_tid_res_arr_mem_129129.mem)[flat_tid_119705] =
        local_acc_129136;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131468_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131468_end -
                 futhark_mc_segred_stage_1_parloop_131468_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131468_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131468_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131468_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131461(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119705 = tid;
    int num_tasks_129120 = info.nsubtasks;
    struct futhark_mc_task_131460 *futhark_mc_task_131460 =
                                  (struct futhark_mc_task_131460 *) args;
    struct futhark_context *ctx = futhark_mc_task_131460->ctx;
    uint64_t futhark_mc_segred_task_131461_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131461_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131460->free_n_114463;
    int64_t gtid_119700 = futhark_mc_task_131460->free_gtid_119700;
    int64_t x_119830 = futhark_mc_task_131460->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131460->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131460->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128736 = futhark_mc_task_131460->free_x_128736;
    float x_128737 = futhark_mc_task_131460->free_x_128737;
    float defunc_0_f_res_128740 =
          futhark_mc_task_131460->free_defunc_0_f_res_128740;
    float defunc_2_reduce_res_128741 =
          *futhark_mc_task_131460->retval_defunc_2_reduce_res_128741;
    float defunc_2_reduce_res_128742 =
          *futhark_mc_task_131460->retval_defunc_2_reduce_res_128742;
    float defunc_2_reduce_res_128743 =
          *futhark_mc_task_131460->retval_defunc_2_reduce_res_128743;
    float defunc_2_reduce_res_128744 =
          *futhark_mc_task_131460->retval_defunc_2_reduce_res_128744;
    float defunc_2_reduce_res_128745 =
          *futhark_mc_task_131460->retval_defunc_2_reduce_res_128745;
    size_t reduce_stage_1_tid_res_arr_mem_129121_cached_sizze_131462 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129121 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129123_cached_sizze_131463 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129123 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129125_cached_sizze_131464 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129125 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129127_cached_sizze_131465 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129127 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129129_cached_sizze_131466 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129129 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129121_cached_sizze_131462 <
        (size_t) ((int64_t) 4 * num_tasks_129120)) {
        reduce_stage_1_tid_res_arr_mem_129121 =
            realloc(reduce_stage_1_tid_res_arr_mem_129121, (int64_t) 4 *
                    num_tasks_129120);
        reduce_stage_1_tid_res_arr_mem_129121_cached_sizze_131462 =
            (int64_t) 4 * num_tasks_129120;
    }
    if (reduce_stage_1_tid_res_arr_mem_129123_cached_sizze_131463 <
        (size_t) ((int64_t) 4 * num_tasks_129120)) {
        reduce_stage_1_tid_res_arr_mem_129123 =
            realloc(reduce_stage_1_tid_res_arr_mem_129123, (int64_t) 4 *
                    num_tasks_129120);
        reduce_stage_1_tid_res_arr_mem_129123_cached_sizze_131463 =
            (int64_t) 4 * num_tasks_129120;
    }
    if (reduce_stage_1_tid_res_arr_mem_129125_cached_sizze_131464 <
        (size_t) ((int64_t) 4 * num_tasks_129120)) {
        reduce_stage_1_tid_res_arr_mem_129125 =
            realloc(reduce_stage_1_tid_res_arr_mem_129125, (int64_t) 4 *
                    num_tasks_129120);
        reduce_stage_1_tid_res_arr_mem_129125_cached_sizze_131464 =
            (int64_t) 4 * num_tasks_129120;
    }
    if (reduce_stage_1_tid_res_arr_mem_129127_cached_sizze_131465 <
        (size_t) ((int64_t) 4 * num_tasks_129120)) {
        reduce_stage_1_tid_res_arr_mem_129127 =
            realloc(reduce_stage_1_tid_res_arr_mem_129127, (int64_t) 4 *
                    num_tasks_129120);
        reduce_stage_1_tid_res_arr_mem_129127_cached_sizze_131465 =
            (int64_t) 4 * num_tasks_129120;
    }
    if (reduce_stage_1_tid_res_arr_mem_129129_cached_sizze_131466 <
        (size_t) ((int64_t) 4 * num_tasks_129120)) {
        reduce_stage_1_tid_res_arr_mem_129129 =
            realloc(reduce_stage_1_tid_res_arr_mem_129129, (int64_t) 4 *
                    num_tasks_129120);
        reduce_stage_1_tid_res_arr_mem_129129_cached_sizze_131466 =
            (int64_t) 4 * num_tasks_129120;
    }
    
    int64_t iter_129131;
    struct futhark_mc_segred_stage_1_parloop_struct_131467
    futhark_mc_segred_stage_1_parloop_struct_131467;
    
    futhark_mc_segred_stage_1_parloop_struct_131467.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_gtid_119700 =
        gtid_119700;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_x_119830 = x_119830;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_x_128736 = x_128736;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_x_128737 = x_128737;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_defunc_0_f_res_128740 =
        defunc_0_f_res_128740;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_reduce_stage_1_tid_res_arr_mem_129121 =
        reduce_stage_1_tid_res_arr_mem_129121;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_reduce_stage_1_tid_res_arr_mem_129123 =
        reduce_stage_1_tid_res_arr_mem_129123;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_reduce_stage_1_tid_res_arr_mem_129125 =
        reduce_stage_1_tid_res_arr_mem_129125;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_reduce_stage_1_tid_res_arr_mem_129127 =
        reduce_stage_1_tid_res_arr_mem_129127;
    futhark_mc_segred_stage_1_parloop_struct_131467.free_reduce_stage_1_tid_res_arr_mem_129129 =
        reduce_stage_1_tid_res_arr_mem_129129;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131468_task;
    
    futhark_mc_segred_stage_1_parloop_131468_task.name =
        "futhark_mc_segred_stage_1_parloop_131468";
    futhark_mc_segred_stage_1_parloop_131468_task.fn =
        futhark_mc_segred_stage_1_parloop_131468;
    futhark_mc_segred_stage_1_parloop_131468_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131467;
    futhark_mc_segred_stage_1_parloop_131468_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131468_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131468_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131468_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131468_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131468_task);
    
    if (futhark_mc_segred_stage_1_parloop_131468_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131468_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131468_total_end -
                 futhark_mc_segred_stage_1_parloop_131468_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131468_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131468_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131468_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128741 = 0.0F;
        defunc_2_reduce_res_128742 = 0.0F;
        defunc_2_reduce_res_128743 = 0.0F;
        defunc_2_reduce_res_128744 = 0.0F;
        defunc_2_reduce_res_128745 = 0.0F;
    }
    
    float x_129137;
    float x_129138;
    float x_129140;
    float x_129141;
    float x_129143;
    float x_129144;
    float x_129146;
    float x_129147;
    float x_129149;
    float x_129150;
    
    for (int32_t i_129152 = 0; i_129152 < num_tasks_129120; i_129152++) {
        flat_tid_119705 = i_129152;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129137 = defunc_2_reduce_res_128741;
            }
            // load next params
            {
                x_129138 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129121)[flat_tid_119705];
            }
            // red body
            {
                float defunc_1_op_res_129139 = x_129137 + x_129138;
                
                defunc_2_reduce_res_128741 = defunc_1_op_res_129139;
            }
            // load acc params
            {
                x_129140 = defunc_2_reduce_res_128742;
            }
            // load next params
            {
                x_129141 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129123)[flat_tid_119705];
            }
            // red body
            {
                float defunc_1_op_res_129142 = x_129140 + x_129141;
                
                defunc_2_reduce_res_128742 = defunc_1_op_res_129142;
            }
            // load acc params
            {
                x_129143 = defunc_2_reduce_res_128743;
            }
            // load next params
            {
                x_129144 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129125)[flat_tid_119705];
            }
            // red body
            {
                float defunc_1_op_res_129145 = x_129143 + x_129144;
                
                defunc_2_reduce_res_128743 = defunc_1_op_res_129145;
            }
            // load acc params
            {
                x_129146 = defunc_2_reduce_res_128744;
            }
            // load next params
            {
                x_129147 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129127)[flat_tid_119705];
            }
            // red body
            {
                float defunc_1_op_res_129148 = x_129146 + x_129147;
                
                defunc_2_reduce_res_128744 = defunc_1_op_res_129148;
            }
            // load acc params
            {
                x_129149 = defunc_2_reduce_res_128745;
            }
            // load next params
            {
                x_129150 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129129)[flat_tid_119705];
            }
            // red body
            {
                float defunc_1_op_res_129151 = x_129149 + x_129150;
                
                defunc_2_reduce_res_128745 = defunc_1_op_res_129151;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129121);
    free(reduce_stage_1_tid_res_arr_mem_129123);
    free(reduce_stage_1_tid_res_arr_mem_129125);
    free(reduce_stage_1_tid_res_arr_mem_129127);
    free(reduce_stage_1_tid_res_arr_mem_129129);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131461_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131461_end -
                 futhark_mc_segred_task_131461_start;
        
        ctx->futhark_mc_segred_task_131461_runs[tid]++;
        ctx->futhark_mc_segred_task_131461_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131461_iter[tid] += iterations;
    }
    *futhark_mc_task_131460->retval_defunc_2_reduce_res_128741 =
        defunc_2_reduce_res_128741;
    *futhark_mc_task_131460->retval_defunc_2_reduce_res_128742 =
        defunc_2_reduce_res_128742;
    *futhark_mc_task_131460->retval_defunc_2_reduce_res_128743 =
        defunc_2_reduce_res_128743;
    *futhark_mc_task_131460->retval_defunc_2_reduce_res_128744 =
        defunc_2_reduce_res_128744;
    *futhark_mc_task_131460->retval_defunc_2_reduce_res_128745 =
        defunc_2_reduce_res_128745;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131469 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_128736;
    float free_x_128737;
    float free_defunc_0_f_res_128740;
    float free_a12_128802;
    float free_b12_128803;
    float free_c12_128804;
    float free_b2_128805;
    float free_c2_128806;
    float *retval_defunc_2_reduce_res_128807;
    float *retval_defunc_2_reduce_res_128808;
};
struct futhark_mc_segred_stage_1_parloop_struct_131473 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_119700;
    int64_t free_x_119830;
    char *free_mem_121867;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_x_128736;
    float free_x_128737;
    float free_defunc_0_f_res_128740;
    float free_a12_128802;
    float free_b12_128803;
    float free_c12_128804;
    float free_b2_128805;
    float free_c2_128806;
    char *free_reduce_stage_1_tid_res_arr_mem_129154;
    char *free_reduce_stage_1_tid_res_arr_mem_129156;
};
static int futhark_mc_segred_stage_1_parloop_131474(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_119707,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131473
    *futhark_mc_segred_stage_1_parloop_struct_131473 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131473 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131473->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131474_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131474_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131473->free_n_114463;
    int64_t gtid_119700 =
            futhark_mc_segred_stage_1_parloop_struct_131473->free_gtid_119700;
    int64_t x_119830 =
            futhark_mc_segred_stage_1_parloop_struct_131473->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131473->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131473->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131473->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128736 =
            futhark_mc_segred_stage_1_parloop_struct_131473->free_x_128736;
    float x_128737 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_x_128737;
    float defunc_0_f_res_128740 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_defunc_0_f_res_128740;
    float a12_128802 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_a12_128802;
    float b12_128803 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_b12_128803;
    float c12_128804 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_c12_128804;
    float b2_128805 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_b2_128805;
    float c2_128806 =
          futhark_mc_segred_stage_1_parloop_struct_131473->free_c2_128806;
    struct memblock reduce_stage_1_tid_res_arr_mem_129154 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129154",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131473->free_reduce_stage_1_tid_res_arr_mem_129154,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129156 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129156",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131473->free_reduce_stage_1_tid_res_arr_mem_129156,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129158 = start;
    float x_129078;
    float x_129079;
    float x_129081;
    float x_129082;
    float local_acc_129159 = 0.0F;
    float local_acc_129160 = 0.0F;
    
    for (; iter_129158 < end; iter_129158++) {
        int64_t gtid_119708 = iter_129158;
        bool cond_129084 = sle64(x_119830, gtid_119708);
        float defunc_0_f_res_129085;
        
        if (cond_129084) {
            defunc_0_f_res_129085 = 0.0F;
        } else {
            int64_t i_129086 = add64(gtid_119708, x_128736);
            float x_129087 = ((float *) mem_121867.mem)[gtid_119700 * n_114463 +
                                                        i_129086];
            float defunc_0_f_res_f_res_129088 = 1.0F + x_129087;
            
            defunc_0_f_res_129085 = defunc_0_f_res_f_res_129088;
        }
        
        float defunc_0_f_res_129089;
        
        if (cond_129084) {
            defunc_0_f_res_129089 = 0.0F;
        } else {
            int64_t i_129090 = add64(gtid_119708, x_128736);
            float x_129091 = ((float *) mem_122822.mem)[gtid_119700 * n_114463 +
                                                        i_129090];
            
            defunc_0_f_res_129089 = x_129091;
        }
        
        float x_j_129092 = defunc_0_f_res_129085 - defunc_0_f_res_128740;
        float abs_res_129093 = (float) fabs(x_j_129092);
        float tmp1_129094 = abs_res_129093 / x_128737;
        float x_129095 = tmp1_129094 * tmp1_129094;
        float y_129096 = tmp1_129094 * x_129095;
        float tmp2_129097 = 1.0F - y_129096;
        float x_129098 = tmp2_129097 * tmp2_129097;
        float tmp3_129099 = tmp2_129097 * x_129098;
        float tmp4_129100 = defunc_0_f_res_129089 * tmp3_129099;
        float defunc_1_f_res_129101 = x_j_129092 * tmp4_129100;
        float defunc_1_f_res_129102 = x_j_129092 * defunc_1_f_res_129101;
        float defunc_0_f_res_129103;
        
        if (cond_129084) {
            defunc_0_f_res_129103 = 0.0F;
        } else {
            int64_t i_129104 = add64(gtid_119708, x_128736);
            float x_129105 = ((float *) mem_122818.mem)[gtid_119700 * n_114463 +
                                                        i_129104];
            
            defunc_0_f_res_129103 = x_129105;
        }
        
        float x_129106 = a12_128802 * tmp4_129100;
        float y_129107 = b12_128803 * defunc_1_f_res_129101;
        float x_129108 = x_129106 + y_129107;
        float y_129109 = c12_128804 * defunc_1_f_res_129102;
        float x_129110 = x_129108 + y_129109;
        float defunc_9_fit_fun_res_129111 = defunc_0_f_res_129103 * x_129110;
        float x_129112 = b12_128803 * tmp4_129100;
        float y_129113 = b2_128805 * defunc_1_f_res_129101;
        float x_129114 = x_129112 + y_129113;
        float y_129115 = c2_128806 * defunc_1_f_res_129102;
        float x_129116 = x_129114 + y_129115;
        float defunc_9_slope_fun_res_129117 = defunc_0_f_res_129103 * x_129116;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129078 = local_acc_129159;
        }
        // Load next params
        {
            x_129079 = defunc_9_fit_fun_res_129111;
        }
        // Red body
        {
            float defunc_1_op_res_129080 = x_129078 + x_129079;
            
            local_acc_129159 = defunc_1_op_res_129080;
        }
        // Load accum params
        {
            x_129081 = local_acc_129160;
        }
        // Load next params
        {
            x_129082 = defunc_9_slope_fun_res_129117;
        }
        // Red body
        {
            float defunc_1_op_res_129083 = x_129081 + x_129082;
            
            local_acc_129160 = defunc_1_op_res_129083;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129154.mem)[flat_tid_119707] =
        local_acc_129159;
    ((float *) reduce_stage_1_tid_res_arr_mem_129156.mem)[flat_tid_119707] =
        local_acc_129160;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131474_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131474_end -
                 futhark_mc_segred_stage_1_parloop_131474_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131474_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131474_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131474_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131470(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119707 = tid;
    int num_tasks_129153 = info.nsubtasks;
    struct futhark_mc_task_131469 *futhark_mc_task_131469 =
                                  (struct futhark_mc_task_131469 *) args;
    struct futhark_context *ctx = futhark_mc_task_131469->ctx;
    uint64_t futhark_mc_segred_task_131470_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131470_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131469->free_n_114463;
    int64_t gtid_119700 = futhark_mc_task_131469->free_gtid_119700;
    int64_t x_119830 = futhark_mc_task_131469->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131469->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131469->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131469->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_128736 = futhark_mc_task_131469->free_x_128736;
    float x_128737 = futhark_mc_task_131469->free_x_128737;
    float defunc_0_f_res_128740 =
          futhark_mc_task_131469->free_defunc_0_f_res_128740;
    float a12_128802 = futhark_mc_task_131469->free_a12_128802;
    float b12_128803 = futhark_mc_task_131469->free_b12_128803;
    float c12_128804 = futhark_mc_task_131469->free_c12_128804;
    float b2_128805 = futhark_mc_task_131469->free_b2_128805;
    float c2_128806 = futhark_mc_task_131469->free_c2_128806;
    float defunc_2_reduce_res_128807 =
          *futhark_mc_task_131469->retval_defunc_2_reduce_res_128807;
    float defunc_2_reduce_res_128808 =
          *futhark_mc_task_131469->retval_defunc_2_reduce_res_128808;
    size_t reduce_stage_1_tid_res_arr_mem_129154_cached_sizze_131471 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129154 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129156_cached_sizze_131472 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129156 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129154_cached_sizze_131471 <
        (size_t) ((int64_t) 4 * num_tasks_129153)) {
        reduce_stage_1_tid_res_arr_mem_129154 =
            realloc(reduce_stage_1_tid_res_arr_mem_129154, (int64_t) 4 *
                    num_tasks_129153);
        reduce_stage_1_tid_res_arr_mem_129154_cached_sizze_131471 =
            (int64_t) 4 * num_tasks_129153;
    }
    if (reduce_stage_1_tid_res_arr_mem_129156_cached_sizze_131472 <
        (size_t) ((int64_t) 4 * num_tasks_129153)) {
        reduce_stage_1_tid_res_arr_mem_129156 =
            realloc(reduce_stage_1_tid_res_arr_mem_129156, (int64_t) 4 *
                    num_tasks_129153);
        reduce_stage_1_tid_res_arr_mem_129156_cached_sizze_131472 =
            (int64_t) 4 * num_tasks_129153;
    }
    
    int64_t iter_129158;
    struct futhark_mc_segred_stage_1_parloop_struct_131473
    futhark_mc_segred_stage_1_parloop_struct_131473;
    
    futhark_mc_segred_stage_1_parloop_struct_131473.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_gtid_119700 =
        gtid_119700;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_x_119830 = x_119830;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_x_128736 = x_128736;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_x_128737 = x_128737;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_defunc_0_f_res_128740 =
        defunc_0_f_res_128740;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_a12_128802 =
        a12_128802;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_b12_128803 =
        b12_128803;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_c12_128804 =
        c12_128804;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_b2_128805 = b2_128805;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_c2_128806 = c2_128806;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_reduce_stage_1_tid_res_arr_mem_129154 =
        reduce_stage_1_tid_res_arr_mem_129154;
    futhark_mc_segred_stage_1_parloop_struct_131473.free_reduce_stage_1_tid_res_arr_mem_129156 =
        reduce_stage_1_tid_res_arr_mem_129156;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131474_task;
    
    futhark_mc_segred_stage_1_parloop_131474_task.name =
        "futhark_mc_segred_stage_1_parloop_131474";
    futhark_mc_segred_stage_1_parloop_131474_task.fn =
        futhark_mc_segred_stage_1_parloop_131474;
    futhark_mc_segred_stage_1_parloop_131474_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131473;
    futhark_mc_segred_stage_1_parloop_131474_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131474_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131474_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131474_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131474_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131474_task);
    
    if (futhark_mc_segred_stage_1_parloop_131474_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131474_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131474_total_end -
                 futhark_mc_segred_stage_1_parloop_131474_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131474_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131474_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131474_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_128807 = 0.0F;
        defunc_2_reduce_res_128808 = 0.0F;
    }
    
    float x_129161;
    float x_129162;
    float x_129164;
    float x_129165;
    
    for (int32_t i_129167 = 0; i_129167 < num_tasks_129153; i_129167++) {
        flat_tid_119707 = i_129167;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129161 = defunc_2_reduce_res_128807;
            }
            // load next params
            {
                x_129162 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129154)[flat_tid_119707];
            }
            // red body
            {
                float defunc_1_op_res_129163 = x_129161 + x_129162;
                
                defunc_2_reduce_res_128807 = defunc_1_op_res_129163;
            }
            // load acc params
            {
                x_129164 = defunc_2_reduce_res_128808;
            }
            // load next params
            {
                x_129165 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129156)[flat_tid_119707];
            }
            // red body
            {
                float defunc_1_op_res_129166 = x_129164 + x_129165;
                
                defunc_2_reduce_res_128808 = defunc_1_op_res_129166;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129154);
    free(reduce_stage_1_tid_res_arr_mem_129156);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131470_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131470_end -
                 futhark_mc_segred_task_131470_start;
        
        ctx->futhark_mc_segred_task_131470_runs[tid]++;
        ctx->futhark_mc_segred_task_131470_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131470_iter[tid] += iterations;
    }
    *futhark_mc_task_131469->retval_defunc_2_reduce_res_128807 =
        defunc_2_reduce_res_128807;
    *futhark_mc_task_131469->retval_defunc_2_reduce_res_128808 =
        defunc_2_reduce_res_128808;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131459(void *args, int64_t start,
                                            int64_t end, int flat_tid_119703,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131458
    *futhark_mc_segmap_parloop_struct_131458 =
    (struct futhark_mc_segmap_parloop_struct_131458 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131458->ctx;
    uint64_t futhark_mc_segmap_parloop_131459_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131459_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131458->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131458->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131458->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131458->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131458->free_i_114539;
    int64_t gtid_119700 =
            futhark_mc_segmap_parloop_struct_131458->free_gtid_119700;
    int64_t x_119830 = futhark_mc_segmap_parloop_struct_131458->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122899,
                                  .size =0, .references =NULL};
    struct memblock mem_122902 = {.desc ="mem_122902", .mem =
                                  futhark_mc_segmap_parloop_struct_131458->free_mem_122902,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129041 = start;
    
    for (; iter_129041 < end; iter_129041++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129118 = t_n_m_114520;
        int64_t gtid_119704 = iter_129041;
        int64_t remnant_129119 = iter_129041 - gtid_119704;
        int64_t x_128736 = ((int64_t *) mem_122067.mem)[gtid_119700 *
                                                        t_n_m_114520 +
                                                        gtid_119704];
        float x_128737 = ((float *) mem_122071.mem)[gtid_119700 * t_n_m_114520 +
                                                    gtid_119704];
        int64_t min_arg_128738 = mul64(t_jump_114470, gtid_119704);
        int64_t min_res_128739 = smin64(i_114539, min_arg_128738);
        float defunc_0_f_res_128740 = sitofp_i64_f32(min_res_128739);
        float defunc_2_reduce_res_128741;
        float defunc_2_reduce_res_128742;
        float defunc_2_reduce_res_128743;
        float defunc_2_reduce_res_128744;
        float defunc_2_reduce_res_128745;
        int64_t flat_tid_119705 = (int64_t) 0;
        int32_t num_tasks_129120;
        struct futhark_mc_task_131460 futhark_mc_task_131460;
        
        futhark_mc_task_131460.ctx = ctx;
        futhark_mc_task_131460.free_n_114463 = n_114463;
        futhark_mc_task_131460.free_gtid_119700 = gtid_119700;
        futhark_mc_task_131460.free_x_119830 = x_119830;
        futhark_mc_task_131460.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131460.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131460.free_x_128736 = x_128736;
        futhark_mc_task_131460.free_x_128737 = x_128737;
        futhark_mc_task_131460.free_defunc_0_f_res_128740 =
            defunc_0_f_res_128740;
        futhark_mc_task_131460.retval_defunc_2_reduce_res_128741 =
            &defunc_2_reduce_res_128741;
        futhark_mc_task_131460.retval_defunc_2_reduce_res_128742 =
            &defunc_2_reduce_res_128742;
        futhark_mc_task_131460.retval_defunc_2_reduce_res_128743 =
            &defunc_2_reduce_res_128743;
        futhark_mc_task_131460.retval_defunc_2_reduce_res_128744 =
            &defunc_2_reduce_res_128744;
        futhark_mc_task_131460.retval_defunc_2_reduce_res_128745 =
            &defunc_2_reduce_res_128745;
        
        struct scheduler_segop futhark_mc_task_131460_task;
        
        futhark_mc_task_131460_task.args = &futhark_mc_task_131460;
        futhark_mc_task_131460_task.top_level_fn =
            futhark_mc_segred_task_131461;
        futhark_mc_task_131460_task.name = "futhark_mc_segred_task_131461";
        futhark_mc_task_131460_task.iterations = t_window_114466;
        futhark_mc_task_131460_task.task_time =
            &ctx->futhark_mc_segred_task_131461_total_time;
        futhark_mc_task_131460_task.task_iter =
            &ctx->futhark_mc_segred_task_131461_total_iter;
        futhark_mc_task_131460_task.sched = STATIC;
        futhark_mc_task_131460_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131461_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131460_task);
        
        if (futhark_mc_segred_task_131461_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_128782 = defunc_2_reduce_res_128743 *
              defunc_2_reduce_res_128745;
        float y_128783 = defunc_2_reduce_res_128744 *
              defunc_2_reduce_res_128744;
        float a12_128784 = x_128782 - y_128783;
        float x_128785 = defunc_2_reduce_res_128743 *
              defunc_2_reduce_res_128744;
        float y_128786 = defunc_2_reduce_res_128742 *
              defunc_2_reduce_res_128745;
        float b12_128787 = x_128785 - y_128786;
        float x_128788 = defunc_2_reduce_res_128742 *
              defunc_2_reduce_res_128744;
        float y_128789 = defunc_2_reduce_res_128743 *
              defunc_2_reduce_res_128743;
        float c12_128790 = x_128788 - y_128789;
        float x_128791 = defunc_2_reduce_res_128741 *
              defunc_2_reduce_res_128745;
        float b2_128792 = x_128791 - y_128789;
        float x_128793 = defunc_2_reduce_res_128742 *
              defunc_2_reduce_res_128743;
        float y_128794 = defunc_2_reduce_res_128741 *
              defunc_2_reduce_res_128744;
        float c2_128795 = x_128793 - y_128794;
        float x_128796 = defunc_2_reduce_res_128741 * a12_128784;
        float y_128797 = defunc_2_reduce_res_128742 * b12_128787;
        float x_128798 = x_128796 + y_128797;
        float y_128799 = defunc_2_reduce_res_128743 * c12_128790;
        float y_128800 = x_128798 + y_128799;
        float det_128801 = 1.0F / y_128800;
        float a12_128802 = a12_128784 * det_128801;
        float b12_128803 = b12_128787 * det_128801;
        float c12_128804 = c12_128790 * det_128801;
        float b2_128805 = b2_128792 * det_128801;
        float c2_128806 = c2_128795 * det_128801;
        float defunc_2_reduce_res_128807;
        float defunc_2_reduce_res_128808;
        int64_t flat_tid_119707 = (int64_t) 0;
        int32_t num_tasks_129153;
        struct futhark_mc_task_131469 futhark_mc_task_131469;
        
        futhark_mc_task_131469.ctx = ctx;
        futhark_mc_task_131469.free_n_114463 = n_114463;
        futhark_mc_task_131469.free_gtid_119700 = gtid_119700;
        futhark_mc_task_131469.free_x_119830 = x_119830;
        futhark_mc_task_131469.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131469.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131469.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131469.free_x_128736 = x_128736;
        futhark_mc_task_131469.free_x_128737 = x_128737;
        futhark_mc_task_131469.free_defunc_0_f_res_128740 =
            defunc_0_f_res_128740;
        futhark_mc_task_131469.free_a12_128802 = a12_128802;
        futhark_mc_task_131469.free_b12_128803 = b12_128803;
        futhark_mc_task_131469.free_c12_128804 = c12_128804;
        futhark_mc_task_131469.free_b2_128805 = b2_128805;
        futhark_mc_task_131469.free_c2_128806 = c2_128806;
        futhark_mc_task_131469.retval_defunc_2_reduce_res_128807 =
            &defunc_2_reduce_res_128807;
        futhark_mc_task_131469.retval_defunc_2_reduce_res_128808 =
            &defunc_2_reduce_res_128808;
        
        struct scheduler_segop futhark_mc_task_131469_task;
        
        futhark_mc_task_131469_task.args = &futhark_mc_task_131469;
        futhark_mc_task_131469_task.top_level_fn =
            futhark_mc_segred_task_131470;
        futhark_mc_task_131469_task.name = "futhark_mc_segred_task_131470";
        futhark_mc_task_131469_task.iterations = t_window_114466;
        futhark_mc_task_131469_task.task_time =
            &ctx->futhark_mc_segred_task_131470_total_time;
        futhark_mc_task_131469_task.task_iter =
            &ctx->futhark_mc_segred_task_131470_total_iter;
        futhark_mc_task_131469_task.sched = STATIC;
        futhark_mc_task_131469_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131470_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131469_task);
        
        if (futhark_mc_segred_task_131470_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122899.mem)[gtid_119704] = defunc_2_reduce_res_128807;
        ((float *) mem_122902.mem)[gtid_119704] = defunc_2_reduce_res_128808;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131459_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131459_end -
                 futhark_mc_segmap_parloop_131459_start;
        
        ctx->futhark_mc_segmap_parloop_131459_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131459_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131459_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131457(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119703 = tid;
    int num_tasks_128959 = info.nsubtasks;
    struct futhark_mc_task_131453 *futhark_mc_task_131453 =
                                  (struct futhark_mc_task_131453 *) args;
    struct futhark_context *ctx = futhark_mc_task_131453->ctx;
    uint64_t futhark_mc_segmap_nested_task_131457_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131457_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131453->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131453->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131453->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131453->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131453->free_i_114539;
    int64_t gtid_119700 = futhark_mc_task_131453->free_gtid_119700;
    int64_t x_119830 = futhark_mc_task_131453->free_x_119830;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131453->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131453->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131453->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131453->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131453->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122899 = {.desc ="mem_122899", .mem =
                                  futhark_mc_task_131453->free_mem_122899,
                                  .size =0, .references =NULL};
    struct memblock mem_122902 = {.desc ="mem_122902", .mem =
                                  futhark_mc_task_131453->free_mem_122902,
                                  .size =0, .references =NULL};
    int64_t iter_129041;
    struct futhark_mc_segmap_parloop_struct_131458
    futhark_mc_segmap_parloop_struct_131458;
    
    futhark_mc_segmap_parloop_struct_131458.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131458.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131458.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131458.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131458.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131458.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131458.free_gtid_119700 = gtid_119700;
    futhark_mc_segmap_parloop_struct_131458.free_x_119830 = x_119830;
    futhark_mc_segmap_parloop_struct_131458.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122899 = mem_122899.mem;
    futhark_mc_segmap_parloop_struct_131458.free_mem_122902 = mem_122902.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131459_task;
    
    futhark_mc_segmap_parloop_131459_task.name =
        "futhark_mc_segmap_parloop_131459";
    futhark_mc_segmap_parloop_131459_task.fn = futhark_mc_segmap_parloop_131459;
    futhark_mc_segmap_parloop_131459_task.args =
        &futhark_mc_segmap_parloop_struct_131458;
    futhark_mc_segmap_parloop_131459_task.iterations = iterations;
    futhark_mc_segmap_parloop_131459_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131459_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131459_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131459_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131459_task);
    
    if (futhark_mc_segmap_parloop_131459_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131459_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131459_total_end -
                 futhark_mc_segmap_parloop_131459_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131459_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131457_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131457_end -
                 futhark_mc_segmap_nested_task_131457_start;
        
        ctx->futhark_mc_segmap_nested_task_131457_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131457_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131457_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131450(void *args, int64_t start,
                                            int64_t end, int flat_tid_119699,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131449
    *futhark_mc_segmap_parloop_struct_131449 =
    (struct futhark_mc_segmap_parloop_struct_131449 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131449->ctx;
    uint64_t futhark_mc_segmap_parloop_131450_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131450_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131449->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131449->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131449->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131449->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131449->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131449->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131449->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122936 = {.desc ="mem_122936", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122936,
                                  .size =0, .references =NULL};
    struct memblock mem_122940 = {.desc ="mem_122940", .mem =
                                  futhark_mc_segmap_parloop_struct_131449->free_mem_122940,
                                  .size =0, .references =NULL};
    size_t mem_122899_cached_sizze_131451 = 0;
    char *mem_122899 = NULL;
    size_t mem_122902_cached_sizze_131452 = 0;
    char *mem_122902 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128735 = start;
    
    if (mem_122899_cached_sizze_131451 < (size_t) bytes_121998) {
        mem_122899 = realloc(mem_122899, bytes_121998);
        mem_122899_cached_sizze_131451 = bytes_121998;
    }
    if (mem_122902_cached_sizze_131452 < (size_t) bytes_121998) {
        mem_122902 = realloc(mem_122902, bytes_121998);
        mem_122902_cached_sizze_131452 = bytes_121998;
    }
    for (; iter_128735 < end; iter_128735++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128957 = m_114462;
        int64_t gtid_119700 = iter_128735;
        int64_t remnant_128958 = iter_128735 - gtid_119700;
        int64_t x_119830 = ((int64_t *) mem_121845.mem)[gtid_119700];
        int64_t flat_tid_119701 = (int64_t) 0;
        int32_t num_tasks_128959;
        int64_t flat_tid_119703 = (int64_t) 0;
        struct futhark_mc_task_131453 futhark_mc_task_131453;
        
        futhark_mc_task_131453.ctx = ctx;
        futhark_mc_task_131453.free_n_114463 = n_114463;
        futhark_mc_task_131453.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131453.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131453.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131453.free_i_114539 = i_114539;
        futhark_mc_task_131453.free_gtid_119700 = gtid_119700;
        futhark_mc_task_131453.free_x_119830 = x_119830;
        futhark_mc_task_131453.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131453.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131453.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131453.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131453.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131453.free_mem_122899 = mem_122899;
        futhark_mc_task_131453.free_mem_122902 = mem_122902;
        
        struct scheduler_segop futhark_mc_task_131453_task;
        
        futhark_mc_task_131453_task.args = &futhark_mc_task_131453;
        futhark_mc_task_131453_task.top_level_fn =
            futhark_mc_segmap_task_131454;
        futhark_mc_task_131453_task.name = "futhark_mc_segmap_task_131454";
        futhark_mc_task_131453_task.iterations = t_n_m_114520;
        futhark_mc_task_131453_task.task_time =
            &ctx->futhark_mc_segmap_task_131454_total_time;
        futhark_mc_task_131453_task.task_iter =
            &ctx->futhark_mc_segmap_task_131454_total_iter;
        futhark_mc_task_131453_task.sched = STATIC;
        futhark_mc_task_131453_task.nested_fn =
            futhark_mc_segmap_nested_task_131457;
        
        int futhark_mc_segmap_task_131454_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131453_task);
        
        if (futhark_mc_segmap_task_131454_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_122936.mem + gtid_119700 * t_n_m_114520 * (int64_t) 4,
                mem_122899 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_122940.mem + gtid_119700 * t_n_m_114520 * (int64_t) 4,
                mem_122902 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122899);
    free(mem_122902);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131450_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131450_end -
                 futhark_mc_segmap_parloop_131450_start;
        
        ctx->futhark_mc_segmap_parloop_131450_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131450_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131450_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131448(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_119699 = tid;
    int num_tasks_128609 = info.nsubtasks;
    struct futhark_mc_task_131442 *futhark_mc_task_131442 =
                                  (struct futhark_mc_task_131442 *) args;
    struct futhark_context *ctx = futhark_mc_task_131442->ctx;
    uint64_t futhark_mc_segmap_nested_task_131448_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131448_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131442->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131442->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131442->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131442->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131442->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131442->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131442->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131442->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131442->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131442->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131442->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131442->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131442->free_mem_122822,
                                  .size =0, .references =NULL};
    struct memblock mem_122936 = {.desc ="mem_122936", .mem =
                                  futhark_mc_task_131442->free_mem_122936,
                                  .size =0, .references =NULL};
    struct memblock mem_122940 = {.desc ="mem_122940", .mem =
                                  futhark_mc_task_131442->free_mem_122940,
                                  .size =0, .references =NULL};
    int64_t iter_128735;
    struct futhark_mc_segmap_parloop_struct_131449
    futhark_mc_segmap_parloop_struct_131449;
    
    futhark_mc_segmap_parloop_struct_131449.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131449.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131449.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131449.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131449.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131449.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131449.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131449.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131449.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122936 = mem_122936.mem;
    futhark_mc_segmap_parloop_struct_131449.free_mem_122940 = mem_122940.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131450_task;
    
    futhark_mc_segmap_parloop_131450_task.name =
        "futhark_mc_segmap_parloop_131450";
    futhark_mc_segmap_parloop_131450_task.fn = futhark_mc_segmap_parloop_131450;
    futhark_mc_segmap_parloop_131450_task.args =
        &futhark_mc_segmap_parloop_struct_131449;
    futhark_mc_segmap_parloop_131450_task.iterations = iterations;
    futhark_mc_segmap_parloop_131450_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131450_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131450_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131450_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131450_task);
    
    if (futhark_mc_segmap_parloop_131450_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131450_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131450_total_end -
                 futhark_mc_segmap_parloop_131450_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131450_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131450_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131450_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131448_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131448_end -
                 futhark_mc_segmap_nested_task_131448_start;
        
        ctx->futhark_mc_segmap_nested_task_131448_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131448_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131448_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131475 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_123003;
};
struct futhark_mc_segmap_parloop_struct_131477 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_123003;
};
static int futhark_mc_segmap_parloop_131478(void *args, int64_t start,
                                            int64_t end, int flat_tid_120065,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131477
    *futhark_mc_segmap_parloop_struct_131477 =
    (struct futhark_mc_segmap_parloop_struct_131477 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131477->ctx;
    uint64_t futhark_mc_segmap_parloop_131478_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131478_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131477->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131477->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131477->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131477->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131477->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131477->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131477->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 =
            futhark_mc_segmap_parloop_struct_131477->free_bytes_122949;
    struct memblock mem_123003 = {.desc ="mem_123003", .mem =
                                  futhark_mc_segmap_parloop_struct_131477->free_mem_123003,
                                  .size =0, .references =NULL};
    size_t mem_122972_cached_sizze_131479 = 0;
    char *mem_122972 = NULL;
    size_t mem_122982_cached_sizze_131480 = 0;
    char *mem_122982 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129171 = start;
    
    if (mem_122972_cached_sizze_131479 < (size_t) bytes_121998) {
        mem_122972 = realloc(mem_122972, bytes_121998);
        mem_122972_cached_sizze_131479 = bytes_121998;
    }
    if (mem_122982_cached_sizze_131480 < (size_t) bytes_122949) {
        mem_122982 = realloc(mem_122982, bytes_122949);
        mem_122982_cached_sizze_131480 = bytes_122949;
    }
    for (; iter_129171 < end; iter_129171++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129217 = m_114462;
        int64_t gtid_120066 = iter_129171;
        int64_t remnant_129218 = iter_129171 - gtid_120066;
        int64_t x_116099 = ((int64_t *) mem_121845.mem)[gtid_120066];
        
        for (int64_t i_129172 = 0; i_129172 < t_n_m_114520; i_129172++) {
            int64_t x_129174 = ((int64_t *) mem_122067.mem)[gtid_120066 *
                                                            t_n_m_114520 +
                                                            i_129172];
            float x_129175 = ((float *) mem_122071.mem)[gtid_120066 *
                                                        t_n_m_114520 +
                                                        i_129172];
            int64_t min_arg_129176 = mul64(t_jump_114470, i_129172);
            int64_t min_res_129177 = smin64(i_114539, min_arg_129176);
            float defunc_0_f_res_129178 = sitofp_i64_f32(min_res_129177);
            float defunc_2_reduce_res_129180;
            float redout_129183 = 0.0F;
            
            for (int64_t i_129182 = 0; i_129182 < t_window_114466; i_129182++) {
                bool cond_129185 = sle64(x_116099, i_129182);
                float defunc_0_f_res_129186;
                
                if (cond_129185) {
                    defunc_0_f_res_129186 = 0.0F;
                } else {
                    int64_t i_129187 = add64(x_129174, i_129182);
                    float x_129188 = ((float *) mem_121867.mem)[gtid_120066 *
                                                                n_114463 +
                                                                i_129187];
                    float defunc_0_f_res_f_res_129189 = 1.0F + x_129188;
                    
                    defunc_0_f_res_129186 = defunc_0_f_res_f_res_129189;
                }
                
                float defunc_0_f_res_129190;
                
                if (cond_129185) {
                    defunc_0_f_res_129190 = 0.0F;
                } else {
                    int64_t i_129191 = add64(x_129174, i_129182);
                    float x_129192 = ((float *) mem_122822.mem)[gtid_120066 *
                                                                n_114463 +
                                                                i_129191];
                    
                    defunc_0_f_res_129190 = x_129192;
                }
                
                float x_j_129193 = defunc_0_f_res_129186 -
                      defunc_0_f_res_129178;
                float abs_res_129194 = (float) fabs(x_j_129193);
                float tmp1_129195 = abs_res_129194 / x_129175;
                float x_129196 = tmp1_129195 * tmp1_129195;
                float y_129197 = tmp1_129195 * x_129196;
                float tmp2_129198 = 1.0F - y_129197;
                float x_129199 = tmp2_129198 * tmp2_129198;
                float tmp3_129200 = tmp2_129198 * x_129199;
                float tmp4_129201 = defunc_0_f_res_129190 * tmp3_129200;
                float defunc_1_op_res_129202 = tmp4_129201 + redout_129183;
                
                ((float *) mem_122982)[i_129182] = tmp4_129201;
                
                float redout_tmp_129220 = defunc_1_op_res_129202;
                
                redout_129183 = redout_tmp_129220;
            }
            defunc_2_reduce_res_129180 = redout_129183;
            
            float a0_129204 = 1.0F / defunc_2_reduce_res_129180;
            float defunc_2_reduce_res_129205;
            float redout_129207 = 0.0F;
            
            for (int64_t i_129206 = 0; i_129206 < t_window_114466; i_129206++) {
                float x_129208 = ((float *) mem_122982)[i_129206];
                bool cond_129209 = sle64(x_116099, i_129206);
                float defunc_0_f_res_129210;
                
                if (cond_129209) {
                    defunc_0_f_res_129210 = 0.0F;
                } else {
                    int64_t i_129211 = add64(x_129174, i_129206);
                    float x_129212 = ((float *) mem_122818.mem)[gtid_120066 *
                                                                n_114463 +
                                                                i_129211];
                    
                    defunc_0_f_res_129210 = x_129212;
                }
                
                float x_129213 = a0_129204 * x_129208;
                float defunc_9_fit_fun_res_129214 = defunc_0_f_res_129210 *
                      x_129213;
                float defunc_1_op_res_129215 = defunc_9_fit_fun_res_129214 +
                      redout_129207;
                float redout_tmp_129222 = defunc_1_op_res_129215;
                
                redout_129207 = redout_tmp_129222;
            }
            defunc_2_reduce_res_129205 = redout_129207;
            ((float *) mem_122972)[i_129172] = defunc_2_reduce_res_129205;
        }
        memmove(mem_123003.mem + gtid_120066 * t_n_m_114520 * (int64_t) 4,
                mem_122972 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122972);
    free(mem_122982);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131478_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131478_end -
                 futhark_mc_segmap_parloop_131478_start;
        
        ctx->futhark_mc_segmap_parloop_131478_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131478_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131478_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131476(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120065 = tid;
    int num_tasks_129170 = info.nsubtasks;
    struct futhark_mc_task_131475 *futhark_mc_task_131475 =
                                  (struct futhark_mc_task_131475 *) args;
    struct futhark_context *ctx = futhark_mc_task_131475->ctx;
    uint64_t futhark_mc_segmap_task_131476_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131476_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131475->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131475->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131475->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131475->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131475->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131475->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131475->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131475->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131475->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131475->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131475->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131475->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131475->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 = futhark_mc_task_131475->free_bytes_122949;
    struct memblock mem_123003 = {.desc ="mem_123003", .mem =
                                  futhark_mc_task_131475->free_mem_123003,
                                  .size =0, .references =NULL};
    int64_t iter_129171;
    struct futhark_mc_segmap_parloop_struct_131477
    futhark_mc_segmap_parloop_struct_131477;
    
    futhark_mc_segmap_parloop_struct_131477.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131477.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131477.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131477.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131477.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131477.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131477.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131477.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131477.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131477.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131477.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131477.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131477.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131477.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131477.free_bytes_122949 = bytes_122949;
    futhark_mc_segmap_parloop_struct_131477.free_mem_123003 = mem_123003.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131478_task;
    
    futhark_mc_segmap_parloop_131478_task.name =
        "futhark_mc_segmap_parloop_131478";
    futhark_mc_segmap_parloop_131478_task.fn = futhark_mc_segmap_parloop_131478;
    futhark_mc_segmap_parloop_131478_task.args =
        &futhark_mc_segmap_parloop_struct_131477;
    futhark_mc_segmap_parloop_131478_task.iterations = iterations;
    futhark_mc_segmap_parloop_131478_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131478_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131478_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131478_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131478_task);
    
    if (futhark_mc_segmap_parloop_131478_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131478_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131478_total_end -
                 futhark_mc_segmap_parloop_131478_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131478_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131478_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131478_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131476_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131476_end -
                 futhark_mc_segmap_task_131476_start;
        
        ctx->futhark_mc_segmap_task_131476_runs[tid]++;
        ctx->futhark_mc_segmap_task_131476_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131476_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131482 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_123003;
};
struct futhark_mc_task_131485 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_122969;
};
struct futhark_mc_segmap_parloop_struct_131487 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_122969;
};
static int futhark_mc_segmap_parloop_131488(void *args, int64_t start,
                                            int64_t end, int flat_tid_120069,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131487
    *futhark_mc_segmap_parloop_struct_131487 =
    (struct futhark_mc_segmap_parloop_struct_131487 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131487->ctx;
    uint64_t futhark_mc_segmap_parloop_131488_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131488_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131487->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131487->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131487->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131487->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131487->free_i_114539;
    int64_t gtid_120068 =
            futhark_mc_segmap_parloop_struct_131487->free_gtid_120068;
    int64_t x_120124 = futhark_mc_segmap_parloop_struct_131487->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 =
            futhark_mc_segmap_parloop_struct_131487->free_bytes_122949;
    struct memblock mem_122969 = {.desc ="mem_122969", .mem =
                                  futhark_mc_segmap_parloop_struct_131487->free_mem_122969,
                                  .size =0, .references =NULL};
    size_t mem_129269_cached_sizze_131489 = 0;
    char *mem_129269 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129310 = start;
    
    if (mem_129269_cached_sizze_131489 < (size_t) bytes_122949) {
        mem_129269 = realloc(mem_129269, bytes_122949);
        mem_129269_cached_sizze_131489 = bytes_122949;
    }
    for (; iter_129310 < end; iter_129310++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129343 = t_n_m_114520;
        int64_t gtid_120070 = iter_129310;
        int64_t remnant_129344 = iter_129310 - gtid_120070;
        int64_t x_129264 = ((int64_t *) mem_122067.mem)[gtid_120068 *
                                                        t_n_m_114520 +
                                                        gtid_120070];
        float x_129265 = ((float *) mem_122071.mem)[gtid_120068 * t_n_m_114520 +
                                                    gtid_120070];
        int64_t min_arg_129266 = mul64(t_jump_114470, gtid_120070);
        int64_t min_res_129267 = smin64(i_114539, min_arg_129266);
        float defunc_0_f_res_129268 = sitofp_i64_f32(min_res_129267);
        float defunc_2_reduce_res_129271;
        float redout_129312 = 0.0F;
        
        for (int64_t i_129311 = 0; i_129311 < t_window_114466; i_129311++) {
            bool cond_129314 = sle64(x_120124, i_129311);
            float defunc_0_f_res_129315;
            
            if (cond_129314) {
                defunc_0_f_res_129315 = 0.0F;
            } else {
                int64_t i_129316 = add64(x_129264, i_129311);
                float x_129317 = ((float *) mem_121867.mem)[gtid_120068 *
                                                            n_114463 +
                                                            i_129316];
                float defunc_0_f_res_f_res_129318 = 1.0F + x_129317;
                
                defunc_0_f_res_129315 = defunc_0_f_res_f_res_129318;
            }
            
            float defunc_0_f_res_129319;
            
            if (cond_129314) {
                defunc_0_f_res_129319 = 0.0F;
            } else {
                int64_t i_129320 = add64(x_129264, i_129311);
                float x_129321 = ((float *) mem_122822.mem)[gtid_120068 *
                                                            n_114463 +
                                                            i_129320];
                
                defunc_0_f_res_129319 = x_129321;
            }
            
            float x_j_129322 = defunc_0_f_res_129315 - defunc_0_f_res_129268;
            float abs_res_129323 = (float) fabs(x_j_129322);
            float tmp1_129324 = abs_res_129323 / x_129265;
            float x_129325 = tmp1_129324 * tmp1_129324;
            float y_129326 = tmp1_129324 * x_129325;
            float tmp2_129327 = 1.0F - y_129326;
            float x_129328 = tmp2_129327 * tmp2_129327;
            float tmp3_129329 = tmp2_129327 * x_129328;
            float tmp4_129330 = defunc_0_f_res_129319 * tmp3_129329;
            float defunc_1_op_res_129331 = tmp4_129330 + redout_129312;
            
            ((float *) mem_129269)[i_129311] = tmp4_129330;
            
            float redout_tmp_129345 = defunc_1_op_res_129331;
            
            redout_129312 = redout_tmp_129345;
        }
        defunc_2_reduce_res_129271 = redout_129312;
        
        float a0_129295 = 1.0F / defunc_2_reduce_res_129271;
        float defunc_2_reduce_res_129296;
        float redout_129334 = 0.0F;
        
        for (int64_t i_129333 = 0; i_129333 < t_window_114466; i_129333++) {
            float x_129335 = ((float *) mem_129269)[i_129333];
            bool cond_129336 = sle64(x_120124, i_129333);
            float defunc_0_f_res_129337;
            
            if (cond_129336) {
                defunc_0_f_res_129337 = 0.0F;
            } else {
                int64_t i_129338 = add64(x_129264, i_129333);
                float x_129339 = ((float *) mem_122818.mem)[gtid_120068 *
                                                            n_114463 +
                                                            i_129338];
                
                defunc_0_f_res_129337 = x_129339;
            }
            
            float x_129340 = a0_129295 * x_129335;
            float defunc_9_fit_fun_res_129341 = defunc_0_f_res_129337 *
                  x_129340;
            float defunc_1_op_res_129342 = defunc_9_fit_fun_res_129341 +
                  redout_129334;
            float redout_tmp_129347 = defunc_1_op_res_129342;
            
            redout_129334 = redout_tmp_129347;
        }
        defunc_2_reduce_res_129296 = redout_129334;
        ((float *) mem_122969.mem)[gtid_120070] = defunc_2_reduce_res_129296;
    }
    
  cleanup:
    { }
    free(mem_129269);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131488_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131488_end -
                 futhark_mc_segmap_parloop_131488_start;
        
        ctx->futhark_mc_segmap_parloop_131488_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131488_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131488_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131486(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120069 = tid;
    int num_tasks_129309 = info.nsubtasks;
    struct futhark_mc_task_131485 *futhark_mc_task_131485 =
                                  (struct futhark_mc_task_131485 *) args;
    struct futhark_context *ctx = futhark_mc_task_131485->ctx;
    uint64_t futhark_mc_segmap_task_131486_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131486_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131485->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131485->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131485->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131485->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131485->free_i_114539;
    int64_t gtid_120068 = futhark_mc_task_131485->free_gtid_120068;
    int64_t x_120124 = futhark_mc_task_131485->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131485->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131485->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131485->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131485->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131485->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 = futhark_mc_task_131485->free_bytes_122949;
    struct memblock mem_122969 = {.desc ="mem_122969", .mem =
                                  futhark_mc_task_131485->free_mem_122969,
                                  .size =0, .references =NULL};
    int64_t iter_129310;
    struct futhark_mc_segmap_parloop_struct_131487
    futhark_mc_segmap_parloop_struct_131487;
    
    futhark_mc_segmap_parloop_struct_131487.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131487.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131487.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131487.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131487.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131487.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131487.free_gtid_120068 = gtid_120068;
    futhark_mc_segmap_parloop_struct_131487.free_x_120124 = x_120124;
    futhark_mc_segmap_parloop_struct_131487.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131487.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131487.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131487.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131487.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131487.free_bytes_122949 = bytes_122949;
    futhark_mc_segmap_parloop_struct_131487.free_mem_122969 = mem_122969.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131488_task;
    
    futhark_mc_segmap_parloop_131488_task.name =
        "futhark_mc_segmap_parloop_131488";
    futhark_mc_segmap_parloop_131488_task.fn = futhark_mc_segmap_parloop_131488;
    futhark_mc_segmap_parloop_131488_task.args =
        &futhark_mc_segmap_parloop_struct_131487;
    futhark_mc_segmap_parloop_131488_task.iterations = iterations;
    futhark_mc_segmap_parloop_131488_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131488_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131488_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131488_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131488_task);
    
    if (futhark_mc_segmap_parloop_131488_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131488_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131488_total_end -
                 futhark_mc_segmap_parloop_131488_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131488_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131488_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131488_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131486_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131486_end -
                 futhark_mc_segmap_task_131486_start;
        
        ctx->futhark_mc_segmap_task_131486_runs[tid]++;
        ctx->futhark_mc_segmap_task_131486_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131486_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131491 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_122949;
    char *free_mem_122969;
};
struct futhark_mc_task_131494 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129224;
    float free_x_129225;
    float free_defunc_0_f_res_129228;
    float *retval_defunc_2_reduce_res_129230;
    char *retval_mem_129229;
};
struct futhark_mc_segred_stage_1_parloop_struct_131497 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129224;
    float free_x_129225;
    float free_defunc_0_f_res_129228;
    char *free_mem_129229;
    char *free_reduce_stage_1_tid_res_arr_mem_129382;
};
static int futhark_mc_segred_stage_1_parloop_131498(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120073,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131497
    *futhark_mc_segred_stage_1_parloop_struct_131497 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131497 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131497->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131498_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131497->free_n_114463;
    int64_t gtid_120068 =
            futhark_mc_segred_stage_1_parloop_struct_131497->free_gtid_120068;
    int64_t x_120124 =
            futhark_mc_segred_stage_1_parloop_struct_131497->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131497->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131497->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129224 =
            futhark_mc_segred_stage_1_parloop_struct_131497->free_x_129224;
    float x_129225 =
          futhark_mc_segred_stage_1_parloop_struct_131497->free_x_129225;
    float defunc_0_f_res_129228 =
          futhark_mc_segred_stage_1_parloop_struct_131497->free_defunc_0_f_res_129228;
    struct memblock mem_129229 = {.desc ="mem_129229", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131497->free_mem_129229,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129382 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129382",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131497->free_reduce_stage_1_tid_res_arr_mem_129382,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129384 = start;
    float x_129349;
    float x_129350;
    float local_acc_129385 = 0.0F;
    
    for (; iter_129384 < end; iter_129384++) {
        int64_t gtid_120074 = iter_129384;
        bool cond_129352 = sle64(x_120124, gtid_120074);
        float defunc_0_f_res_129353;
        
        if (cond_129352) {
            defunc_0_f_res_129353 = 0.0F;
        } else {
            int64_t i_129354 = add64(gtid_120074, x_129224);
            float x_129355 = ((float *) mem_121867.mem)[gtid_120068 * n_114463 +
                                                        i_129354];
            float defunc_0_f_res_f_res_129356 = 1.0F + x_129355;
            
            defunc_0_f_res_129353 = defunc_0_f_res_f_res_129356;
        }
        
        float defunc_0_f_res_129357;
        
        if (cond_129352) {
            defunc_0_f_res_129357 = 0.0F;
        } else {
            int64_t i_129358 = add64(gtid_120074, x_129224);
            float x_129359 = ((float *) mem_122822.mem)[gtid_120068 * n_114463 +
                                                        i_129358];
            
            defunc_0_f_res_129357 = x_129359;
        }
        
        float x_j_129360 = defunc_0_f_res_129353 - defunc_0_f_res_129228;
        float abs_res_129361 = (float) fabs(x_j_129360);
        float tmp1_129362 = abs_res_129361 / x_129225;
        float x_129363 = tmp1_129362 * tmp1_129362;
        float y_129364 = tmp1_129362 * x_129363;
        float tmp2_129365 = 1.0F - y_129364;
        float x_129366 = tmp2_129365 * tmp2_129365;
        float tmp3_129367 = tmp2_129365 * x_129366;
        float tmp4_129368 = defunc_0_f_res_129357 * tmp3_129367;
        
        // save map-out results
        {
            ((float *) mem_129229.mem)[gtid_120074] = tmp4_129368;
        }
        // Load accum params
        {
            x_129349 = local_acc_129385;
        }
        // Load next params
        {
            x_129350 = tmp4_129368;
        }
        // Red body
        {
            float defunc_1_op_res_129351 = x_129349 + x_129350;
            
            local_acc_129385 = defunc_1_op_res_129351;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129382.mem)[flat_tid_120073] =
        local_acc_129385;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131498_end -
                 futhark_mc_segred_stage_1_parloop_131498_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131498_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131498_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131498_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131495(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120073 = tid;
    int num_tasks_129381 = info.nsubtasks;
    struct futhark_mc_task_131494 *futhark_mc_task_131494 =
                                  (struct futhark_mc_task_131494 *) args;
    struct futhark_context *ctx = futhark_mc_task_131494->ctx;
    uint64_t futhark_mc_segred_task_131495_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131495_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131494->free_n_114463;
    int64_t gtid_120068 = futhark_mc_task_131494->free_gtid_120068;
    int64_t x_120124 = futhark_mc_task_131494->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131494->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131494->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129224 = futhark_mc_task_131494->free_x_129224;
    float x_129225 = futhark_mc_task_131494->free_x_129225;
    float defunc_0_f_res_129228 =
          futhark_mc_task_131494->free_defunc_0_f_res_129228;
    float defunc_2_reduce_res_129230 =
          *futhark_mc_task_131494->retval_defunc_2_reduce_res_129230;
    struct memblock mem_129229 = {.desc ="mem_129229", .mem =
                                  futhark_mc_task_131494->retval_mem_129229,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_129382_cached_sizze_131496 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129382 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129382_cached_sizze_131496 <
        (size_t) ((int64_t) 4 * num_tasks_129381)) {
        reduce_stage_1_tid_res_arr_mem_129382 =
            realloc(reduce_stage_1_tid_res_arr_mem_129382, (int64_t) 4 *
                    num_tasks_129381);
        reduce_stage_1_tid_res_arr_mem_129382_cached_sizze_131496 =
            (int64_t) 4 * num_tasks_129381;
    }
    
    int64_t iter_129384;
    struct futhark_mc_segred_stage_1_parloop_struct_131497
    futhark_mc_segred_stage_1_parloop_struct_131497;
    
    futhark_mc_segred_stage_1_parloop_struct_131497.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_gtid_120068 =
        gtid_120068;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_x_120124 = x_120124;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_x_129224 = x_129224;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_x_129225 = x_129225;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_defunc_0_f_res_129228 =
        defunc_0_f_res_129228;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_mem_129229 =
        mem_129229.mem;
    futhark_mc_segred_stage_1_parloop_struct_131497.free_reduce_stage_1_tid_res_arr_mem_129382 =
        reduce_stage_1_tid_res_arr_mem_129382;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131498_task;
    
    futhark_mc_segred_stage_1_parloop_131498_task.name =
        "futhark_mc_segred_stage_1_parloop_131498";
    futhark_mc_segred_stage_1_parloop_131498_task.fn =
        futhark_mc_segred_stage_1_parloop_131498;
    futhark_mc_segred_stage_1_parloop_131498_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131497;
    futhark_mc_segred_stage_1_parloop_131498_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131498_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131498_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131498_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131498_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131498_task);
    
    if (futhark_mc_segred_stage_1_parloop_131498_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131498_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131498_total_end -
                 futhark_mc_segred_stage_1_parloop_131498_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131498_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131498_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131498_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129230 = 0.0F;
    }
    
    float x_129386;
    float x_129387;
    
    for (int32_t i_129389 = 0; i_129389 < num_tasks_129381; i_129389++) {
        flat_tid_120073 = i_129389;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129386 = defunc_2_reduce_res_129230;
            }
            // load next params
            {
                x_129387 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129382)[flat_tid_120073];
            }
            // red body
            {
                float defunc_1_op_res_129388 = x_129386 + x_129387;
                
                defunc_2_reduce_res_129230 = defunc_1_op_res_129388;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129382);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131495_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131495_end -
                 futhark_mc_segred_task_131495_start;
        
        ctx->futhark_mc_segred_task_131495_runs[tid]++;
        ctx->futhark_mc_segred_task_131495_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131495_iter[tid] += iterations;
    }
    *futhark_mc_task_131494->retval_defunc_2_reduce_res_129230 =
        defunc_2_reduce_res_129230;
    futhark_mc_task_131494->retval_mem_129229 = mem_129229.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131499 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_122818;
    int64_t free_x_129224;
    char *free_mem_129229;
    float free_a0_129252;
    float *retval_defunc_2_reduce_res_129253;
};
struct futhark_mc_segred_stage_1_parloop_struct_131502 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120068;
    int64_t free_x_120124;
    char *free_mem_122818;
    int64_t free_x_129224;
    char *free_mem_129229;
    float free_a0_129252;
    char *free_reduce_stage_1_tid_res_arr_mem_129391;
};
static int futhark_mc_segred_stage_1_parloop_131503(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120075,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131502
    *futhark_mc_segred_stage_1_parloop_struct_131502 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131502 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131502->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131503_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131503_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131502->free_n_114463;
    int64_t gtid_120068 =
            futhark_mc_segred_stage_1_parloop_struct_131502->free_gtid_120068;
    int64_t x_120124 =
            futhark_mc_segred_stage_1_parloop_struct_131502->free_x_120124;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131502->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129224 =
            futhark_mc_segred_stage_1_parloop_struct_131502->free_x_129224;
    struct memblock mem_129229 = {.desc ="mem_129229", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131502->free_mem_129229,
                                  .size =0, .references =NULL};
    float a0_129252 =
          futhark_mc_segred_stage_1_parloop_struct_131502->free_a0_129252;
    struct memblock reduce_stage_1_tid_res_arr_mem_129391 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129391",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131502->free_reduce_stage_1_tid_res_arr_mem_129391,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129393 = start;
    float x_129369;
    float x_129370;
    float local_acc_129394 = 0.0F;
    
    for (; iter_129393 < end; iter_129393++) {
        int64_t gtid_120076 = iter_129393;
        float x_129372 = ((float *) mem_129229.mem)[gtid_120076];
        bool cond_129373 = sle64(x_120124, gtid_120076);
        float defunc_0_f_res_129374;
        
        if (cond_129373) {
            defunc_0_f_res_129374 = 0.0F;
        } else {
            int64_t i_129375 = add64(gtid_120076, x_129224);
            float x_129376 = ((float *) mem_122818.mem)[gtid_120068 * n_114463 +
                                                        i_129375];
            
            defunc_0_f_res_129374 = x_129376;
        }
        
        float x_129377 = a0_129252 * x_129372;
        float defunc_9_fit_fun_res_129378 = defunc_0_f_res_129374 * x_129377;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129369 = local_acc_129394;
        }
        // Load next params
        {
            x_129370 = defunc_9_fit_fun_res_129378;
        }
        // Red body
        {
            float defunc_1_op_res_129371 = x_129369 + x_129370;
            
            local_acc_129394 = defunc_1_op_res_129371;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129391.mem)[flat_tid_120075] =
        local_acc_129394;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131503_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131503_end -
                 futhark_mc_segred_stage_1_parloop_131503_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131503_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131503_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131503_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131500(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120075 = tid;
    int num_tasks_129390 = info.nsubtasks;
    struct futhark_mc_task_131499 *futhark_mc_task_131499 =
                                  (struct futhark_mc_task_131499 *) args;
    struct futhark_context *ctx = futhark_mc_task_131499->ctx;
    uint64_t futhark_mc_segred_task_131500_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131500_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131499->free_n_114463;
    int64_t gtid_120068 = futhark_mc_task_131499->free_gtid_120068;
    int64_t x_120124 = futhark_mc_task_131499->free_x_120124;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131499->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129224 = futhark_mc_task_131499->free_x_129224;
    struct memblock mem_129229 = {.desc ="mem_129229", .mem =
                                  futhark_mc_task_131499->free_mem_129229,
                                  .size =0, .references =NULL};
    float a0_129252 = futhark_mc_task_131499->free_a0_129252;
    float defunc_2_reduce_res_129253 =
          *futhark_mc_task_131499->retval_defunc_2_reduce_res_129253;
    size_t reduce_stage_1_tid_res_arr_mem_129391_cached_sizze_131501 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129391 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129391_cached_sizze_131501 <
        (size_t) ((int64_t) 4 * num_tasks_129390)) {
        reduce_stage_1_tid_res_arr_mem_129391 =
            realloc(reduce_stage_1_tid_res_arr_mem_129391, (int64_t) 4 *
                    num_tasks_129390);
        reduce_stage_1_tid_res_arr_mem_129391_cached_sizze_131501 =
            (int64_t) 4 * num_tasks_129390;
    }
    
    int64_t iter_129393;
    struct futhark_mc_segred_stage_1_parloop_struct_131502
    futhark_mc_segred_stage_1_parloop_struct_131502;
    
    futhark_mc_segred_stage_1_parloop_struct_131502.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_gtid_120068 =
        gtid_120068;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_x_120124 = x_120124;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_x_129224 = x_129224;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_mem_129229 =
        mem_129229.mem;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_a0_129252 = a0_129252;
    futhark_mc_segred_stage_1_parloop_struct_131502.free_reduce_stage_1_tid_res_arr_mem_129391 =
        reduce_stage_1_tid_res_arr_mem_129391;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131503_task;
    
    futhark_mc_segred_stage_1_parloop_131503_task.name =
        "futhark_mc_segred_stage_1_parloop_131503";
    futhark_mc_segred_stage_1_parloop_131503_task.fn =
        futhark_mc_segred_stage_1_parloop_131503;
    futhark_mc_segred_stage_1_parloop_131503_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131502;
    futhark_mc_segred_stage_1_parloop_131503_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131503_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131503_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131503_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131503_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131503_task);
    
    if (futhark_mc_segred_stage_1_parloop_131503_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131503_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131503_total_end -
                 futhark_mc_segred_stage_1_parloop_131503_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131503_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131503_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131503_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129253 = 0.0F;
    }
    
    float x_129395;
    float x_129396;
    
    for (int32_t i_129398 = 0; i_129398 < num_tasks_129390; i_129398++) {
        flat_tid_120075 = i_129398;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129395 = defunc_2_reduce_res_129253;
            }
            // load next params
            {
                x_129396 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129391)[flat_tid_120075];
            }
            // red body
            {
                float defunc_1_op_res_129397 = x_129395 + x_129396;
                
                defunc_2_reduce_res_129253 = defunc_1_op_res_129397;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129391);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131500_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131500_end -
                 futhark_mc_segred_task_131500_start;
        
        ctx->futhark_mc_segred_task_131500_runs[tid]++;
        ctx->futhark_mc_segred_task_131500_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131500_iter[tid] += iterations;
    }
    *futhark_mc_task_131499->retval_defunc_2_reduce_res_129253 =
        defunc_2_reduce_res_129253;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131492(void *args, int64_t start,
                                            int64_t end, int flat_tid_120071,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131491
    *futhark_mc_segmap_parloop_struct_131491 =
    (struct futhark_mc_segmap_parloop_struct_131491 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131491->ctx;
    uint64_t futhark_mc_segmap_parloop_131492_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131492_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131491->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131491->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131491->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131491->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131491->free_i_114539;
    int64_t gtid_120068 =
            futhark_mc_segmap_parloop_struct_131491->free_gtid_120068;
    int64_t x_120124 = futhark_mc_segmap_parloop_struct_131491->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 =
            futhark_mc_segmap_parloop_struct_131491->free_bytes_122949;
    struct memblock mem_122969 = {.desc ="mem_122969", .mem =
                                  futhark_mc_segmap_parloop_struct_131491->free_mem_122969,
                                  .size =0, .references =NULL};
    size_t mem_129229_cached_sizze_131493 = 0;
    char *mem_129229 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129348 = start;
    
    if (mem_129229_cached_sizze_131493 < (size_t) bytes_122949) {
        mem_129229 = realloc(mem_129229, bytes_122949);
        mem_129229_cached_sizze_131493 = bytes_122949;
    }
    for (; iter_129348 < end; iter_129348++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129379 = t_n_m_114520;
        int64_t gtid_120072 = iter_129348;
        int64_t remnant_129380 = iter_129348 - gtid_120072;
        int64_t x_129224 = ((int64_t *) mem_122067.mem)[gtid_120068 *
                                                        t_n_m_114520 +
                                                        gtid_120072];
        float x_129225 = ((float *) mem_122071.mem)[gtid_120068 * t_n_m_114520 +
                                                    gtid_120072];
        int64_t min_arg_129226 = mul64(t_jump_114470, gtid_120072);
        int64_t min_res_129227 = smin64(i_114539, min_arg_129226);
        float defunc_0_f_res_129228 = sitofp_i64_f32(min_res_129227);
        float defunc_2_reduce_res_129230;
        int64_t flat_tid_120073 = (int64_t) 0;
        int32_t num_tasks_129381;
        struct futhark_mc_task_131494 futhark_mc_task_131494;
        
        futhark_mc_task_131494.ctx = ctx;
        futhark_mc_task_131494.free_n_114463 = n_114463;
        futhark_mc_task_131494.free_gtid_120068 = gtid_120068;
        futhark_mc_task_131494.free_x_120124 = x_120124;
        futhark_mc_task_131494.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131494.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131494.free_x_129224 = x_129224;
        futhark_mc_task_131494.free_x_129225 = x_129225;
        futhark_mc_task_131494.free_defunc_0_f_res_129228 =
            defunc_0_f_res_129228;
        futhark_mc_task_131494.retval_defunc_2_reduce_res_129230 =
            &defunc_2_reduce_res_129230;
        futhark_mc_task_131494.retval_mem_129229 = mem_129229;
        
        struct scheduler_segop futhark_mc_task_131494_task;
        
        futhark_mc_task_131494_task.args = &futhark_mc_task_131494;
        futhark_mc_task_131494_task.top_level_fn =
            futhark_mc_segred_task_131495;
        futhark_mc_task_131494_task.name = "futhark_mc_segred_task_131495";
        futhark_mc_task_131494_task.iterations = t_window_114466;
        futhark_mc_task_131494_task.task_time =
            &ctx->futhark_mc_segred_task_131495_total_time;
        futhark_mc_task_131494_task.task_iter =
            &ctx->futhark_mc_segred_task_131495_total_iter;
        futhark_mc_task_131494_task.sched = STATIC;
        futhark_mc_task_131494_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131495_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131494_task);
        
        if (futhark_mc_segred_task_131495_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_129252 = 1.0F / defunc_2_reduce_res_129230;
        float defunc_2_reduce_res_129253;
        int64_t flat_tid_120075 = (int64_t) 0;
        int32_t num_tasks_129390;
        struct futhark_mc_task_131499 futhark_mc_task_131499;
        
        futhark_mc_task_131499.ctx = ctx;
        futhark_mc_task_131499.free_n_114463 = n_114463;
        futhark_mc_task_131499.free_gtid_120068 = gtid_120068;
        futhark_mc_task_131499.free_x_120124 = x_120124;
        futhark_mc_task_131499.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131499.free_x_129224 = x_129224;
        futhark_mc_task_131499.free_mem_129229 = mem_129229;
        futhark_mc_task_131499.free_a0_129252 = a0_129252;
        futhark_mc_task_131499.retval_defunc_2_reduce_res_129253 =
            &defunc_2_reduce_res_129253;
        
        struct scheduler_segop futhark_mc_task_131499_task;
        
        futhark_mc_task_131499_task.args = &futhark_mc_task_131499;
        futhark_mc_task_131499_task.top_level_fn =
            futhark_mc_segred_task_131500;
        futhark_mc_task_131499_task.name = "futhark_mc_segred_task_131500";
        futhark_mc_task_131499_task.iterations = t_window_114466;
        futhark_mc_task_131499_task.task_time =
            &ctx->futhark_mc_segred_task_131500_total_time;
        futhark_mc_task_131499_task.task_iter =
            &ctx->futhark_mc_segred_task_131500_total_iter;
        futhark_mc_task_131499_task.sched = STATIC;
        futhark_mc_task_131499_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131500_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131499_task);
        
        if (futhark_mc_segred_task_131500_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_122969.mem)[gtid_120072] = defunc_2_reduce_res_129253;
    }
    
  cleanup:
    { }
    free(mem_129229);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131492_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131492_end -
                 futhark_mc_segmap_parloop_131492_start;
        
        ctx->futhark_mc_segmap_parloop_131492_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131492_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131492_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131490(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120071 = tid;
    int num_tasks_129309 = info.nsubtasks;
    struct futhark_mc_task_131485 *futhark_mc_task_131485 =
                                  (struct futhark_mc_task_131485 *) args;
    struct futhark_context *ctx = futhark_mc_task_131485->ctx;
    uint64_t futhark_mc_segmap_nested_task_131490_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131490_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131485->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131485->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131485->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131485->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131485->free_i_114539;
    int64_t gtid_120068 = futhark_mc_task_131485->free_gtid_120068;
    int64_t x_120124 = futhark_mc_task_131485->free_x_120124;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131485->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131485->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131485->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131485->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131485->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 = futhark_mc_task_131485->free_bytes_122949;
    struct memblock mem_122969 = {.desc ="mem_122969", .mem =
                                  futhark_mc_task_131485->free_mem_122969,
                                  .size =0, .references =NULL};
    int64_t iter_129348;
    struct futhark_mc_segmap_parloop_struct_131491
    futhark_mc_segmap_parloop_struct_131491;
    
    futhark_mc_segmap_parloop_struct_131491.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131491.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131491.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131491.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131491.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131491.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131491.free_gtid_120068 = gtid_120068;
    futhark_mc_segmap_parloop_struct_131491.free_x_120124 = x_120124;
    futhark_mc_segmap_parloop_struct_131491.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131491.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131491.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131491.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131491.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131491.free_bytes_122949 = bytes_122949;
    futhark_mc_segmap_parloop_struct_131491.free_mem_122969 = mem_122969.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131492_task;
    
    futhark_mc_segmap_parloop_131492_task.name =
        "futhark_mc_segmap_parloop_131492";
    futhark_mc_segmap_parloop_131492_task.fn = futhark_mc_segmap_parloop_131492;
    futhark_mc_segmap_parloop_131492_task.args =
        &futhark_mc_segmap_parloop_struct_131491;
    futhark_mc_segmap_parloop_131492_task.iterations = iterations;
    futhark_mc_segmap_parloop_131492_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131492_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131492_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131492_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131492_task);
    
    if (futhark_mc_segmap_parloop_131492_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131492_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131492_total_end -
                 futhark_mc_segmap_parloop_131492_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131492_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131492_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131492_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131490_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131490_end -
                 futhark_mc_segmap_nested_task_131490_start;
        
        ctx->futhark_mc_segmap_nested_task_131490_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131490_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131490_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131483(void *args, int64_t start,
                                            int64_t end, int flat_tid_120067,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131482
    *futhark_mc_segmap_parloop_struct_131482 =
    (struct futhark_mc_segmap_parloop_struct_131482 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131482->ctx;
    uint64_t futhark_mc_segmap_parloop_131483_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131483_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131482->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131482->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131482->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131482->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131482->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131482->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131482->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 =
            futhark_mc_segmap_parloop_struct_131482->free_bytes_122949;
    struct memblock mem_123003 = {.desc ="mem_123003", .mem =
                                  futhark_mc_segmap_parloop_struct_131482->free_mem_123003,
                                  .size =0, .references =NULL};
    size_t mem_122969_cached_sizze_131484 = 0;
    char *mem_122969 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129223 = start;
    
    if (mem_122969_cached_sizze_131484 < (size_t) bytes_121998) {
        mem_122969 = realloc(mem_122969, bytes_121998);
        mem_122969_cached_sizze_131484 = bytes_121998;
    }
    for (; iter_129223 < end; iter_129223++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129307 = m_114462;
        int64_t gtid_120068 = iter_129223;
        int64_t remnant_129308 = iter_129223 - gtid_120068;
        int64_t x_120124 = ((int64_t *) mem_121845.mem)[gtid_120068];
        int64_t flat_tid_120069 = (int64_t) 0;
        int32_t num_tasks_129309;
        int64_t flat_tid_120071 = (int64_t) 0;
        struct futhark_mc_task_131485 futhark_mc_task_131485;
        
        futhark_mc_task_131485.ctx = ctx;
        futhark_mc_task_131485.free_n_114463 = n_114463;
        futhark_mc_task_131485.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131485.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131485.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131485.free_i_114539 = i_114539;
        futhark_mc_task_131485.free_gtid_120068 = gtid_120068;
        futhark_mc_task_131485.free_x_120124 = x_120124;
        futhark_mc_task_131485.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131485.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131485.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131485.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131485.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131485.free_bytes_122949 = bytes_122949;
        futhark_mc_task_131485.free_mem_122969 = mem_122969;
        
        struct scheduler_segop futhark_mc_task_131485_task;
        
        futhark_mc_task_131485_task.args = &futhark_mc_task_131485;
        futhark_mc_task_131485_task.top_level_fn =
            futhark_mc_segmap_task_131486;
        futhark_mc_task_131485_task.name = "futhark_mc_segmap_task_131486";
        futhark_mc_task_131485_task.iterations = t_n_m_114520;
        futhark_mc_task_131485_task.task_time =
            &ctx->futhark_mc_segmap_task_131486_total_time;
        futhark_mc_task_131485_task.task_iter =
            &ctx->futhark_mc_segmap_task_131486_total_iter;
        futhark_mc_task_131485_task.sched = STATIC;
        futhark_mc_task_131485_task.nested_fn =
            futhark_mc_segmap_nested_task_131490;
        
        int futhark_mc_segmap_task_131486_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131485_task);
        
        if (futhark_mc_segmap_task_131486_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123003.mem + gtid_120068 * t_n_m_114520 * (int64_t) 4,
                mem_122969 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_122969);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131483_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131483_end -
                 futhark_mc_segmap_parloop_131483_start;
        
        ctx->futhark_mc_segmap_parloop_131483_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131483_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131483_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131481(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120067 = tid;
    int num_tasks_129170 = info.nsubtasks;
    struct futhark_mc_task_131475 *futhark_mc_task_131475 =
                                  (struct futhark_mc_task_131475 *) args;
    struct futhark_context *ctx = futhark_mc_task_131475->ctx;
    uint64_t futhark_mc_segmap_nested_task_131481_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131481_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131475->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131475->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131475->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131475->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131475->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131475->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131475->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131475->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131475->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131475->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131475->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131475->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131475->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_122949 = futhark_mc_task_131475->free_bytes_122949;
    struct memblock mem_123003 = {.desc ="mem_123003", .mem =
                                  futhark_mc_task_131475->free_mem_123003,
                                  .size =0, .references =NULL};
    int64_t iter_129223;
    struct futhark_mc_segmap_parloop_struct_131482
    futhark_mc_segmap_parloop_struct_131482;
    
    futhark_mc_segmap_parloop_struct_131482.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131482.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131482.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131482.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131482.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131482.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131482.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131482.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131482.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131482.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131482.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131482.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131482.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131482.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131482.free_bytes_122949 = bytes_122949;
    futhark_mc_segmap_parloop_struct_131482.free_mem_123003 = mem_123003.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131483_task;
    
    futhark_mc_segmap_parloop_131483_task.name =
        "futhark_mc_segmap_parloop_131483";
    futhark_mc_segmap_parloop_131483_task.fn = futhark_mc_segmap_parloop_131483;
    futhark_mc_segmap_parloop_131483_task.args =
        &futhark_mc_segmap_parloop_struct_131482;
    futhark_mc_segmap_parloop_131483_task.iterations = iterations;
    futhark_mc_segmap_parloop_131483_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131483_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131483_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131483_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131483_task);
    
    if (futhark_mc_segmap_parloop_131483_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131483_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131483_total_end -
                 futhark_mc_segmap_parloop_131483_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131483_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131483_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131483_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131481_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131481_end -
                 futhark_mc_segmap_nested_task_131481_start;
        
        ctx->futhark_mc_segmap_nested_task_131481_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131481_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131481_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131504 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123109;
    char *free_mem_123113;
};
struct futhark_mc_segmap_parloop_struct_131506 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123109;
    char *free_mem_123113;
};
static int futhark_mc_segmap_parloop_131507(void *args, int64_t start,
                                            int64_t end, int flat_tid_120210,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131506
    *futhark_mc_segmap_parloop_struct_131506 =
    (struct futhark_mc_segmap_parloop_struct_131506 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131506->ctx;
    uint64_t futhark_mc_segmap_parloop_131507_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131507_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131506->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131506->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131506->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131506->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131506->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131506->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131506->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 =
            futhark_mc_segmap_parloop_struct_131506->free_bytes_123004;
    struct memblock mem_123109 = {.desc ="mem_123109", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_123109,
                                  .size =0, .references =NULL};
    struct memblock mem_123113 = {.desc ="mem_123113", .mem =
                                  futhark_mc_segmap_parloop_struct_131506->free_mem_123113,
                                  .size =0, .references =NULL};
    size_t mem_123048_cached_sizze_131508 = 0;
    char *mem_123048 = NULL;
    size_t mem_123051_cached_sizze_131509 = 0;
    char *mem_123051 = NULL;
    size_t mem_123068_cached_sizze_131510 = 0;
    char *mem_123068 = NULL;
    size_t mem_123071_cached_sizze_131511 = 0;
    char *mem_123071 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129400 = start;
    
    if (mem_123048_cached_sizze_131508 < (size_t) bytes_121998) {
        mem_123048 = realloc(mem_123048, bytes_121998);
        mem_123048_cached_sizze_131508 = bytes_121998;
    }
    if (mem_123051_cached_sizze_131509 < (size_t) bytes_121998) {
        mem_123051 = realloc(mem_123051, bytes_121998);
        mem_123051_cached_sizze_131509 = bytes_121998;
    }
    if (mem_123068_cached_sizze_131510 < (size_t) bytes_123004) {
        mem_123068 = realloc(mem_123068, bytes_123004);
        mem_123068_cached_sizze_131510 = bytes_123004;
    }
    if (mem_123071_cached_sizze_131511 < (size_t) bytes_123004) {
        mem_123071 = realloc(mem_123071, bytes_123004);
        mem_123071_cached_sizze_131511 = bytes_123004;
    }
    for (; iter_129400 < end; iter_129400++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129477 = m_114462;
        int64_t gtid_120211 = iter_129400;
        int64_t remnant_129478 = iter_129400 - gtid_120211;
        int64_t x_116156 = ((int64_t *) mem_121845.mem)[gtid_120211];
        
        for (int64_t i_129401 = 0; i_129401 < t_n_m_114520; i_129401++) {
            int64_t x_129404 = ((int64_t *) mem_122067.mem)[gtid_120211 *
                                                            t_n_m_114520 +
                                                            i_129401];
            float x_129405 = ((float *) mem_122071.mem)[gtid_120211 *
                                                        t_n_m_114520 +
                                                        i_129401];
            int64_t min_arg_129406 = mul64(t_jump_114470, i_129401);
            int64_t min_res_129407 = smin64(i_114539, min_arg_129406);
            float defunc_0_f_res_129408 = sitofp_i64_f32(min_res_129407);
            float defunc_2_reduce_res_129411;
            float defunc_2_reduce_res_129412;
            float defunc_2_reduce_res_129413;
            float redout_129417;
            float redout_129418;
            float redout_129419;
            
            redout_129417 = 0.0F;
            redout_129418 = 0.0F;
            redout_129419 = 0.0F;
            for (int64_t i_129416 = 0; i_129416 < t_window_114466; i_129416++) {
                bool cond_129422 = sle64(x_116156, i_129416);
                float defunc_0_f_res_129423;
                
                if (cond_129422) {
                    defunc_0_f_res_129423 = 0.0F;
                } else {
                    int64_t i_129424 = add64(x_129404, i_129416);
                    float x_129425 = ((float *) mem_121867.mem)[gtid_120211 *
                                                                n_114463 +
                                                                i_129424];
                    float defunc_0_f_res_f_res_129426 = 1.0F + x_129425;
                    
                    defunc_0_f_res_129423 = defunc_0_f_res_f_res_129426;
                }
                
                float defunc_0_f_res_129427;
                
                if (cond_129422) {
                    defunc_0_f_res_129427 = 0.0F;
                } else {
                    int64_t i_129428 = add64(x_129404, i_129416);
                    float x_129429 = ((float *) mem_122822.mem)[gtid_120211 *
                                                                n_114463 +
                                                                i_129428];
                    
                    defunc_0_f_res_129427 = x_129429;
                }
                
                float x_j_129430 = defunc_0_f_res_129423 -
                      defunc_0_f_res_129408;
                float abs_res_129431 = (float) fabs(x_j_129430);
                float tmp1_129432 = abs_res_129431 / x_129405;
                float x_129433 = tmp1_129432 * tmp1_129432;
                float y_129434 = tmp1_129432 * x_129433;
                float tmp2_129435 = 1.0F - y_129434;
                float x_129436 = tmp2_129435 * tmp2_129435;
                float tmp3_129437 = tmp2_129435 * x_129436;
                float tmp4_129438 = defunc_0_f_res_129427 * tmp3_129437;
                float defunc_1_f_res_129439 = x_j_129430 * tmp4_129438;
                float defunc_1_f_res_129440 = x_j_129430 *
                      defunc_1_f_res_129439;
                float defunc_1_op_res_129441 = tmp4_129438 + redout_129417;
                float defunc_1_op_res_129442 = defunc_1_f_res_129439 +
                      redout_129418;
                float defunc_1_op_res_129443 = defunc_1_f_res_129440 +
                      redout_129419;
                
                ((float *) mem_123068)[i_129416] = defunc_1_f_res_129439;
                ((float *) mem_123071)[i_129416] = tmp4_129438;
                
                float redout_tmp_129481 = defunc_1_op_res_129441;
                float redout_tmp_129482 = defunc_1_op_res_129442;
                float redout_tmp_129483 = defunc_1_op_res_129443;
                
                redout_129417 = redout_tmp_129481;
                redout_129418 = redout_tmp_129482;
                redout_129419 = redout_tmp_129483;
            }
            defunc_2_reduce_res_129411 = redout_129417;
            defunc_2_reduce_res_129412 = redout_129418;
            defunc_2_reduce_res_129413 = redout_129419;
            
            float x_129446 = defunc_2_reduce_res_129411 *
                  defunc_2_reduce_res_129413;
            float y_129447 = defunc_2_reduce_res_129412 *
                  defunc_2_reduce_res_129412;
            float y_129448 = x_129446 - y_129447;
            float det1_129449 = 1.0F / y_129448;
            float a11_129450 = defunc_2_reduce_res_129413 * det1_129449;
            float negate_arg_129451 = defunc_2_reduce_res_129412 * det1_129449;
            float b11_129452 = 0.0F - negate_arg_129451;
            float c11_129453 = defunc_2_reduce_res_129411 * det1_129449;
            float defunc_2_reduce_res_129454;
            float defunc_2_reduce_res_129455;
            float redout_129457;
            float redout_129458;
            
            redout_129457 = 0.0F;
            redout_129458 = 0.0F;
            for (int64_t i_129456 = 0; i_129456 < t_window_114466; i_129456++) {
                float x_129459 = ((float *) mem_123071)[i_129456];
                float x_129460 = ((float *) mem_123068)[i_129456];
                bool cond_129461 = sle64(x_116156, i_129456);
                float defunc_0_f_res_129462;
                
                if (cond_129461) {
                    defunc_0_f_res_129462 = 0.0F;
                } else {
                    int64_t i_129463 = add64(x_129404, i_129456);
                    float x_129464 = ((float *) mem_122818.mem)[gtid_120211 *
                                                                n_114463 +
                                                                i_129463];
                    
                    defunc_0_f_res_129462 = x_129464;
                }
                
                float x_129465 = a11_129450 * x_129459;
                float y_129466 = b11_129452 * x_129460;
                float x_129467 = x_129465 + y_129466;
                float defunc_9_fit_fun_res_129468 = defunc_0_f_res_129462 *
                      x_129467;
                float x_129469 = b11_129452 * x_129459;
                float y_129470 = c11_129453 * x_129460;
                float x_129471 = x_129469 + y_129470;
                float defunc_9_slope_fun_res_129472 = defunc_0_f_res_129462 *
                      x_129471;
                float defunc_1_op_res_129473 = defunc_9_fit_fun_res_129468 +
                      redout_129457;
                float defunc_1_op_res_129474 = defunc_9_slope_fun_res_129472 +
                      redout_129458;
                float redout_tmp_129486 = defunc_1_op_res_129473;
                float redout_tmp_129487 = defunc_1_op_res_129474;
                
                redout_129457 = redout_tmp_129486;
                redout_129458 = redout_tmp_129487;
            }
            defunc_2_reduce_res_129454 = redout_129457;
            defunc_2_reduce_res_129455 = redout_129458;
            ((float *) mem_123048)[i_129401] = defunc_2_reduce_res_129454;
            ((float *) mem_123051)[i_129401] = defunc_2_reduce_res_129455;
        }
        memmove(mem_123109.mem + gtid_120211 * t_n_m_114520 * (int64_t) 4,
                mem_123048 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_123113.mem + gtid_120211 * t_n_m_114520 * (int64_t) 4,
                mem_123051 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123048);
    free(mem_123051);
    free(mem_123068);
    free(mem_123071);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131507_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131507_end -
                 futhark_mc_segmap_parloop_131507_start;
        
        ctx->futhark_mc_segmap_parloop_131507_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131507_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131507_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131505(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120210 = tid;
    int num_tasks_129399 = info.nsubtasks;
    struct futhark_mc_task_131504 *futhark_mc_task_131504 =
                                  (struct futhark_mc_task_131504 *) args;
    struct futhark_context *ctx = futhark_mc_task_131504->ctx;
    uint64_t futhark_mc_segmap_task_131505_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131505_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131504->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131504->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131504->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131504->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131504->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131504->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131504->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131504->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131504->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131504->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131504->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131504->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131504->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 = futhark_mc_task_131504->free_bytes_123004;
    struct memblock mem_123109 = {.desc ="mem_123109", .mem =
                                  futhark_mc_task_131504->free_mem_123109,
                                  .size =0, .references =NULL};
    struct memblock mem_123113 = {.desc ="mem_123113", .mem =
                                  futhark_mc_task_131504->free_mem_123113,
                                  .size =0, .references =NULL};
    int64_t iter_129400;
    struct futhark_mc_segmap_parloop_struct_131506
    futhark_mc_segmap_parloop_struct_131506;
    
    futhark_mc_segmap_parloop_struct_131506.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131506.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131506.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131506.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131506.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131506.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131506.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131506.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131506.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131506.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131506.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131506.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131506.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131506.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131506.free_bytes_123004 = bytes_123004;
    futhark_mc_segmap_parloop_struct_131506.free_mem_123109 = mem_123109.mem;
    futhark_mc_segmap_parloop_struct_131506.free_mem_123113 = mem_123113.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131507_task;
    
    futhark_mc_segmap_parloop_131507_task.name =
        "futhark_mc_segmap_parloop_131507";
    futhark_mc_segmap_parloop_131507_task.fn = futhark_mc_segmap_parloop_131507;
    futhark_mc_segmap_parloop_131507_task.args =
        &futhark_mc_segmap_parloop_struct_131506;
    futhark_mc_segmap_parloop_131507_task.iterations = iterations;
    futhark_mc_segmap_parloop_131507_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131507_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131507_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131507_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131507_task);
    
    if (futhark_mc_segmap_parloop_131507_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131507_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131507_total_end -
                 futhark_mc_segmap_parloop_131507_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131507_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131507_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131507_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131505_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131505_end -
                 futhark_mc_segmap_task_131505_start;
        
        ctx->futhark_mc_segmap_task_131505_runs[tid]++;
        ctx->futhark_mc_segmap_task_131505_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131505_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131513 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123109;
    char *free_mem_123113;
};
struct futhark_mc_task_131517 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123042;
    char *free_mem_123045;
};
struct futhark_mc_segmap_parloop_struct_131519 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123042;
    char *free_mem_123045;
};
static int futhark_mc_segmap_parloop_131520(void *args, int64_t start,
                                            int64_t end, int flat_tid_120214,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131519
    *futhark_mc_segmap_parloop_struct_131519 =
    (struct futhark_mc_segmap_parloop_struct_131519 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131519->ctx;
    uint64_t futhark_mc_segmap_parloop_131520_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131520_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131519->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131519->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131519->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131519->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131519->free_i_114539;
    int64_t gtid_120213 =
            futhark_mc_segmap_parloop_struct_131519->free_gtid_120213;
    int64_t x_120298 = futhark_mc_segmap_parloop_struct_131519->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 =
            futhark_mc_segmap_parloop_struct_131519->free_bytes_123004;
    struct memblock mem_123042 = {.desc ="mem_123042", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_123042,
                                  .size =0, .references =NULL};
    struct memblock mem_123045 = {.desc ="mem_123045", .mem =
                                  futhark_mc_segmap_parloop_struct_131519->free_mem_123045,
                                  .size =0, .references =NULL};
    size_t mem_129564_cached_sizze_131521 = 0;
    char *mem_129564 = NULL;
    size_t mem_129566_cached_sizze_131522 = 0;
    char *mem_129566 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129635 = start;
    
    if (mem_129564_cached_sizze_131521 < (size_t) bytes_123004) {
        mem_129564 = realloc(mem_129564, bytes_123004);
        mem_129564_cached_sizze_131521 = bytes_123004;
    }
    if (mem_129566_cached_sizze_131522 < (size_t) bytes_123004) {
        mem_129566 = realloc(mem_129566, bytes_123004);
        mem_129566_cached_sizze_131522 = bytes_123004;
    }
    for (; iter_129635 < end; iter_129635++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129685 = t_n_m_114520;
        int64_t gtid_120215 = iter_129635;
        int64_t remnant_129686 = iter_129635 - gtid_120215;
        int64_t x_129559 = ((int64_t *) mem_122067.mem)[gtid_120213 *
                                                        t_n_m_114520 +
                                                        gtid_120215];
        float x_129560 = ((float *) mem_122071.mem)[gtid_120213 * t_n_m_114520 +
                                                    gtid_120215];
        int64_t min_arg_129561 = mul64(t_jump_114470, gtid_120215);
        int64_t min_res_129562 = smin64(i_114539, min_arg_129561);
        float defunc_0_f_res_129563 = sitofp_i64_f32(min_res_129562);
        float defunc_2_reduce_res_129568;
        float defunc_2_reduce_res_129569;
        float defunc_2_reduce_res_129570;
        float redout_129637;
        float redout_129638;
        float redout_129639;
        
        redout_129637 = 0.0F;
        redout_129638 = 0.0F;
        redout_129639 = 0.0F;
        for (int64_t i_129636 = 0; i_129636 < t_window_114466; i_129636++) {
            bool cond_129642 = sle64(x_120298, i_129636);
            float defunc_0_f_res_129643;
            
            if (cond_129642) {
                defunc_0_f_res_129643 = 0.0F;
            } else {
                int64_t i_129644 = add64(x_129559, i_129636);
                float x_129645 = ((float *) mem_121867.mem)[gtid_120213 *
                                                            n_114463 +
                                                            i_129644];
                float defunc_0_f_res_f_res_129646 = 1.0F + x_129645;
                
                defunc_0_f_res_129643 = defunc_0_f_res_f_res_129646;
            }
            
            float defunc_0_f_res_129647;
            
            if (cond_129642) {
                defunc_0_f_res_129647 = 0.0F;
            } else {
                int64_t i_129648 = add64(x_129559, i_129636);
                float x_129649 = ((float *) mem_122822.mem)[gtid_120213 *
                                                            n_114463 +
                                                            i_129648];
                
                defunc_0_f_res_129647 = x_129649;
            }
            
            float x_j_129650 = defunc_0_f_res_129643 - defunc_0_f_res_129563;
            float abs_res_129651 = (float) fabs(x_j_129650);
            float tmp1_129652 = abs_res_129651 / x_129560;
            float x_129653 = tmp1_129652 * tmp1_129652;
            float y_129654 = tmp1_129652 * x_129653;
            float tmp2_129655 = 1.0F - y_129654;
            float x_129656 = tmp2_129655 * tmp2_129655;
            float tmp3_129657 = tmp2_129655 * x_129656;
            float tmp4_129658 = defunc_0_f_res_129647 * tmp3_129657;
            float defunc_1_f_res_129659 = x_j_129650 * tmp4_129658;
            float defunc_1_f_res_129660 = x_j_129650 * defunc_1_f_res_129659;
            float defunc_1_op_res_129661 = tmp4_129658 + redout_129637;
            float defunc_1_op_res_129662 = defunc_1_f_res_129659 +
                  redout_129638;
            float defunc_1_op_res_129663 = defunc_1_f_res_129660 +
                  redout_129639;
            
            ((float *) mem_129564)[i_129636] = defunc_1_f_res_129659;
            ((float *) mem_129566)[i_129636] = tmp4_129658;
            
            float redout_tmp_129687 = defunc_1_op_res_129661;
            float redout_tmp_129688 = defunc_1_op_res_129662;
            float redout_tmp_129689 = defunc_1_op_res_129663;
            
            redout_129637 = redout_tmp_129687;
            redout_129638 = redout_tmp_129688;
            redout_129639 = redout_tmp_129689;
        }
        defunc_2_reduce_res_129568 = redout_129637;
        defunc_2_reduce_res_129569 = redout_129638;
        defunc_2_reduce_res_129570 = redout_129639;
        
        float x_129603 = defunc_2_reduce_res_129568 *
              defunc_2_reduce_res_129570;
        float y_129604 = defunc_2_reduce_res_129569 *
              defunc_2_reduce_res_129569;
        float y_129605 = x_129603 - y_129604;
        float det1_129606 = 1.0F / y_129605;
        float a11_129607 = defunc_2_reduce_res_129570 * det1_129606;
        float negate_arg_129608 = defunc_2_reduce_res_129569 * det1_129606;
        float b11_129609 = 0.0F - negate_arg_129608;
        float c11_129610 = defunc_2_reduce_res_129568 * det1_129606;
        float defunc_2_reduce_res_129611;
        float defunc_2_reduce_res_129612;
        float redout_129667;
        float redout_129668;
        
        redout_129667 = 0.0F;
        redout_129668 = 0.0F;
        for (int64_t i_129666 = 0; i_129666 < t_window_114466; i_129666++) {
            float x_129669 = ((float *) mem_129566)[i_129666];
            float x_129670 = ((float *) mem_129564)[i_129666];
            bool cond_129671 = sle64(x_120298, i_129666);
            float defunc_0_f_res_129672;
            
            if (cond_129671) {
                defunc_0_f_res_129672 = 0.0F;
            } else {
                int64_t i_129673 = add64(x_129559, i_129666);
                float x_129674 = ((float *) mem_122818.mem)[gtid_120213 *
                                                            n_114463 +
                                                            i_129673];
                
                defunc_0_f_res_129672 = x_129674;
            }
            
            float x_129675 = a11_129607 * x_129669;
            float y_129676 = b11_129609 * x_129670;
            float x_129677 = x_129675 + y_129676;
            float defunc_9_fit_fun_res_129678 = defunc_0_f_res_129672 *
                  x_129677;
            float x_129679 = b11_129609 * x_129669;
            float y_129680 = c11_129610 * x_129670;
            float x_129681 = x_129679 + y_129680;
            float defunc_9_slope_fun_res_129682 = defunc_0_f_res_129672 *
                  x_129681;
            float defunc_1_op_res_129683 = defunc_9_fit_fun_res_129678 +
                  redout_129667;
            float defunc_1_op_res_129684 = defunc_9_slope_fun_res_129682 +
                  redout_129668;
            float redout_tmp_129692 = defunc_1_op_res_129683;
            float redout_tmp_129693 = defunc_1_op_res_129684;
            
            redout_129667 = redout_tmp_129692;
            redout_129668 = redout_tmp_129693;
        }
        defunc_2_reduce_res_129611 = redout_129667;
        defunc_2_reduce_res_129612 = redout_129668;
        ((float *) mem_123042.mem)[gtid_120215] = defunc_2_reduce_res_129611;
        ((float *) mem_123045.mem)[gtid_120215] = defunc_2_reduce_res_129612;
    }
    
  cleanup:
    { }
    free(mem_129564);
    free(mem_129566);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131520_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131520_end -
                 futhark_mc_segmap_parloop_131520_start;
        
        ctx->futhark_mc_segmap_parloop_131520_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131520_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131520_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131518(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120214 = tid;
    int num_tasks_129634 = info.nsubtasks;
    struct futhark_mc_task_131517 *futhark_mc_task_131517 =
                                  (struct futhark_mc_task_131517 *) args;
    struct futhark_context *ctx = futhark_mc_task_131517->ctx;
    uint64_t futhark_mc_segmap_task_131518_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131518_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131517->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131517->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131517->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131517->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131517->free_i_114539;
    int64_t gtid_120213 = futhark_mc_task_131517->free_gtid_120213;
    int64_t x_120298 = futhark_mc_task_131517->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131517->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131517->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131517->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131517->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131517->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 = futhark_mc_task_131517->free_bytes_123004;
    struct memblock mem_123042 = {.desc ="mem_123042", .mem =
                                  futhark_mc_task_131517->free_mem_123042,
                                  .size =0, .references =NULL};
    struct memblock mem_123045 = {.desc ="mem_123045", .mem =
                                  futhark_mc_task_131517->free_mem_123045,
                                  .size =0, .references =NULL};
    int64_t iter_129635;
    struct futhark_mc_segmap_parloop_struct_131519
    futhark_mc_segmap_parloop_struct_131519;
    
    futhark_mc_segmap_parloop_struct_131519.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131519.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131519.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131519.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131519.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131519.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131519.free_gtid_120213 = gtid_120213;
    futhark_mc_segmap_parloop_struct_131519.free_x_120298 = x_120298;
    futhark_mc_segmap_parloop_struct_131519.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131519.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131519.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131519.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131519.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131519.free_bytes_123004 = bytes_123004;
    futhark_mc_segmap_parloop_struct_131519.free_mem_123042 = mem_123042.mem;
    futhark_mc_segmap_parloop_struct_131519.free_mem_123045 = mem_123045.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131520_task;
    
    futhark_mc_segmap_parloop_131520_task.name =
        "futhark_mc_segmap_parloop_131520";
    futhark_mc_segmap_parloop_131520_task.fn = futhark_mc_segmap_parloop_131520;
    futhark_mc_segmap_parloop_131520_task.args =
        &futhark_mc_segmap_parloop_struct_131519;
    futhark_mc_segmap_parloop_131520_task.iterations = iterations;
    futhark_mc_segmap_parloop_131520_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131520_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131520_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131520_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131520_task);
    
    if (futhark_mc_segmap_parloop_131520_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131520_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131520_total_end -
                 futhark_mc_segmap_parloop_131520_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131520_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131520_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131520_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131518_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131518_end -
                 futhark_mc_segmap_task_131518_start;
        
        ctx->futhark_mc_segmap_task_131518_runs[tid]++;
        ctx->futhark_mc_segmap_task_131518_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131518_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131524 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123004;
    char *free_mem_123042;
    char *free_mem_123045;
};
struct futhark_mc_task_131528 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129489;
    float free_x_129490;
    float free_defunc_0_f_res_129493;
    float *retval_defunc_2_reduce_res_129496;
    float *retval_defunc_2_reduce_res_129497;
    float *retval_defunc_2_reduce_res_129498;
    char *retval_mem_129494;
    char *retval_mem_129495;
};
struct futhark_mc_segred_stage_1_parloop_struct_131533 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129489;
    float free_x_129490;
    float free_defunc_0_f_res_129493;
    char *free_mem_129494;
    char *free_mem_129495;
    char *free_reduce_stage_1_tid_res_arr_mem_129746;
    char *free_reduce_stage_1_tid_res_arr_mem_129748;
    char *free_reduce_stage_1_tid_res_arr_mem_129750;
};
static int futhark_mc_segred_stage_1_parloop_131534(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120218,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131533
    *futhark_mc_segred_stage_1_parloop_struct_131533 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131533 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131533->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131534_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131534_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_n_114463;
    int64_t gtid_120213 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_gtid_120213;
    int64_t x_120298 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129489 =
            futhark_mc_segred_stage_1_parloop_struct_131533->free_x_129489;
    float x_129490 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_x_129490;
    float defunc_0_f_res_129493 =
          futhark_mc_segred_stage_1_parloop_struct_131533->free_defunc_0_f_res_129493;
    struct memblock mem_129494 = {.desc ="mem_129494", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_129494,
                                  .size =0, .references =NULL};
    struct memblock mem_129495 = {.desc ="mem_129495", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131533->free_mem_129495,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129746 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129746",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131533->free_reduce_stage_1_tid_res_arr_mem_129746,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129748 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129748",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131533->free_reduce_stage_1_tid_res_arr_mem_129748,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129750 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129750",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131533->free_reduce_stage_1_tid_res_arr_mem_129750,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129752 = start;
    float x_129695;
    float x_129696;
    float x_129698;
    float x_129699;
    float x_129701;
    float x_129702;
    float local_acc_129753 = 0.0F;
    float local_acc_129754 = 0.0F;
    float local_acc_129755 = 0.0F;
    
    for (; iter_129752 < end; iter_129752++) {
        int64_t gtid_120219 = iter_129752;
        bool cond_129704 = sle64(x_120298, gtid_120219);
        float defunc_0_f_res_129705;
        
        if (cond_129704) {
            defunc_0_f_res_129705 = 0.0F;
        } else {
            int64_t i_129706 = add64(gtid_120219, x_129489);
            float x_129707 = ((float *) mem_121867.mem)[gtid_120213 * n_114463 +
                                                        i_129706];
            float defunc_0_f_res_f_res_129708 = 1.0F + x_129707;
            
            defunc_0_f_res_129705 = defunc_0_f_res_f_res_129708;
        }
        
        float defunc_0_f_res_129709;
        
        if (cond_129704) {
            defunc_0_f_res_129709 = 0.0F;
        } else {
            int64_t i_129710 = add64(gtid_120219, x_129489);
            float x_129711 = ((float *) mem_122822.mem)[gtid_120213 * n_114463 +
                                                        i_129710];
            
            defunc_0_f_res_129709 = x_129711;
        }
        
        float x_j_129712 = defunc_0_f_res_129705 - defunc_0_f_res_129493;
        float abs_res_129713 = (float) fabs(x_j_129712);
        float tmp1_129714 = abs_res_129713 / x_129490;
        float x_129715 = tmp1_129714 * tmp1_129714;
        float y_129716 = tmp1_129714 * x_129715;
        float tmp2_129717 = 1.0F - y_129716;
        float x_129718 = tmp2_129717 * tmp2_129717;
        float tmp3_129719 = tmp2_129717 * x_129718;
        float tmp4_129720 = defunc_0_f_res_129709 * tmp3_129719;
        float defunc_1_f_res_129721 = x_j_129712 * tmp4_129720;
        float defunc_1_f_res_129722 = x_j_129712 * defunc_1_f_res_129721;
        
        // save map-out results
        {
            ((float *) mem_129494.mem)[gtid_120219] = defunc_1_f_res_129721;
            ((float *) mem_129495.mem)[gtid_120219] = tmp4_129720;
        }
        // Load accum params
        {
            x_129695 = local_acc_129753;
        }
        // Load next params
        {
            x_129696 = tmp4_129720;
        }
        // Red body
        {
            float defunc_1_op_res_129697 = x_129695 + x_129696;
            
            local_acc_129753 = defunc_1_op_res_129697;
        }
        // Load accum params
        {
            x_129698 = local_acc_129754;
        }
        // Load next params
        {
            x_129699 = defunc_1_f_res_129721;
        }
        // Red body
        {
            float defunc_1_op_res_129700 = x_129698 + x_129699;
            
            local_acc_129754 = defunc_1_op_res_129700;
        }
        // Load accum params
        {
            x_129701 = local_acc_129755;
        }
        // Load next params
        {
            x_129702 = defunc_1_f_res_129722;
        }
        // Red body
        {
            float defunc_1_op_res_129703 = x_129701 + x_129702;
            
            local_acc_129755 = defunc_1_op_res_129703;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129746.mem)[flat_tid_120218] =
        local_acc_129753;
    ((float *) reduce_stage_1_tid_res_arr_mem_129748.mem)[flat_tid_120218] =
        local_acc_129754;
    ((float *) reduce_stage_1_tid_res_arr_mem_129750.mem)[flat_tid_120218] =
        local_acc_129755;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131534_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131534_end -
                 futhark_mc_segred_stage_1_parloop_131534_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131534_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131534_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131534_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131529(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120218 = tid;
    int num_tasks_129745 = info.nsubtasks;
    struct futhark_mc_task_131528 *futhark_mc_task_131528 =
                                  (struct futhark_mc_task_131528 *) args;
    struct futhark_context *ctx = futhark_mc_task_131528->ctx;
    uint64_t futhark_mc_segred_task_131529_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131529_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131528->free_n_114463;
    int64_t gtid_120213 = futhark_mc_task_131528->free_gtid_120213;
    int64_t x_120298 = futhark_mc_task_131528->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131528->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131528->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129489 = futhark_mc_task_131528->free_x_129489;
    float x_129490 = futhark_mc_task_131528->free_x_129490;
    float defunc_0_f_res_129493 =
          futhark_mc_task_131528->free_defunc_0_f_res_129493;
    float defunc_2_reduce_res_129496 =
          *futhark_mc_task_131528->retval_defunc_2_reduce_res_129496;
    float defunc_2_reduce_res_129497 =
          *futhark_mc_task_131528->retval_defunc_2_reduce_res_129497;
    float defunc_2_reduce_res_129498 =
          *futhark_mc_task_131528->retval_defunc_2_reduce_res_129498;
    struct memblock mem_129494 = {.desc ="mem_129494", .mem =
                                  futhark_mc_task_131528->retval_mem_129494,
                                  .size =0, .references =NULL};
    struct memblock mem_129495 = {.desc ="mem_129495", .mem =
                                  futhark_mc_task_131528->retval_mem_129495,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_129746_cached_sizze_131530 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129746 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129748_cached_sizze_131531 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129748 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129750_cached_sizze_131532 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129750 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129746_cached_sizze_131530 <
        (size_t) ((int64_t) 4 * num_tasks_129745)) {
        reduce_stage_1_tid_res_arr_mem_129746 =
            realloc(reduce_stage_1_tid_res_arr_mem_129746, (int64_t) 4 *
                    num_tasks_129745);
        reduce_stage_1_tid_res_arr_mem_129746_cached_sizze_131530 =
            (int64_t) 4 * num_tasks_129745;
    }
    if (reduce_stage_1_tid_res_arr_mem_129748_cached_sizze_131531 <
        (size_t) ((int64_t) 4 * num_tasks_129745)) {
        reduce_stage_1_tid_res_arr_mem_129748 =
            realloc(reduce_stage_1_tid_res_arr_mem_129748, (int64_t) 4 *
                    num_tasks_129745);
        reduce_stage_1_tid_res_arr_mem_129748_cached_sizze_131531 =
            (int64_t) 4 * num_tasks_129745;
    }
    if (reduce_stage_1_tid_res_arr_mem_129750_cached_sizze_131532 <
        (size_t) ((int64_t) 4 * num_tasks_129745)) {
        reduce_stage_1_tid_res_arr_mem_129750 =
            realloc(reduce_stage_1_tid_res_arr_mem_129750, (int64_t) 4 *
                    num_tasks_129745);
        reduce_stage_1_tid_res_arr_mem_129750_cached_sizze_131532 =
            (int64_t) 4 * num_tasks_129745;
    }
    
    int64_t iter_129752;
    struct futhark_mc_segred_stage_1_parloop_struct_131533
    futhark_mc_segred_stage_1_parloop_struct_131533;
    
    futhark_mc_segred_stage_1_parloop_struct_131533.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_gtid_120213 =
        gtid_120213;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_x_120298 = x_120298;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_121867 =
        mem_121867.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_122822 =
        mem_122822.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_x_129489 = x_129489;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_x_129490 = x_129490;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_defunc_0_f_res_129493 =
        defunc_0_f_res_129493;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_129494 =
        mem_129494.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_mem_129495 =
        mem_129495.mem;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_reduce_stage_1_tid_res_arr_mem_129746 =
        reduce_stage_1_tid_res_arr_mem_129746;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_reduce_stage_1_tid_res_arr_mem_129748 =
        reduce_stage_1_tid_res_arr_mem_129748;
    futhark_mc_segred_stage_1_parloop_struct_131533.free_reduce_stage_1_tid_res_arr_mem_129750 =
        reduce_stage_1_tid_res_arr_mem_129750;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131534_task;
    
    futhark_mc_segred_stage_1_parloop_131534_task.name =
        "futhark_mc_segred_stage_1_parloop_131534";
    futhark_mc_segred_stage_1_parloop_131534_task.fn =
        futhark_mc_segred_stage_1_parloop_131534;
    futhark_mc_segred_stage_1_parloop_131534_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131533;
    futhark_mc_segred_stage_1_parloop_131534_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131534_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131534_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131534_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131534_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131534_task);
    
    if (futhark_mc_segred_stage_1_parloop_131534_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131534_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131534_total_end -
                 futhark_mc_segred_stage_1_parloop_131534_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131534_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129496 = 0.0F;
        defunc_2_reduce_res_129497 = 0.0F;
        defunc_2_reduce_res_129498 = 0.0F;
    }
    
    float x_129756;
    float x_129757;
    float x_129759;
    float x_129760;
    float x_129762;
    float x_129763;
    
    for (int32_t i_129765 = 0; i_129765 < num_tasks_129745; i_129765++) {
        flat_tid_120218 = i_129765;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129756 = defunc_2_reduce_res_129496;
            }
            // load next params
            {
                x_129757 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129746)[flat_tid_120218];
            }
            // red body
            {
                float defunc_1_op_res_129758 = x_129756 + x_129757;
                
                defunc_2_reduce_res_129496 = defunc_1_op_res_129758;
            }
            // load acc params
            {
                x_129759 = defunc_2_reduce_res_129497;
            }
            // load next params
            {
                x_129760 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129748)[flat_tid_120218];
            }
            // red body
            {
                float defunc_1_op_res_129761 = x_129759 + x_129760;
                
                defunc_2_reduce_res_129497 = defunc_1_op_res_129761;
            }
            // load acc params
            {
                x_129762 = defunc_2_reduce_res_129498;
            }
            // load next params
            {
                x_129763 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129750)[flat_tid_120218];
            }
            // red body
            {
                float defunc_1_op_res_129764 = x_129762 + x_129763;
                
                defunc_2_reduce_res_129498 = defunc_1_op_res_129764;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129746);
    free(reduce_stage_1_tid_res_arr_mem_129748);
    free(reduce_stage_1_tid_res_arr_mem_129750);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131529_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131529_end -
                 futhark_mc_segred_task_131529_start;
        
        ctx->futhark_mc_segred_task_131529_runs[tid]++;
        ctx->futhark_mc_segred_task_131529_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131529_iter[tid] += iterations;
    }
    *futhark_mc_task_131528->retval_defunc_2_reduce_res_129496 =
        defunc_2_reduce_res_129496;
    *futhark_mc_task_131528->retval_defunc_2_reduce_res_129497 =
        defunc_2_reduce_res_129497;
    *futhark_mc_task_131528->retval_defunc_2_reduce_res_129498 =
        defunc_2_reduce_res_129498;
    futhark_mc_task_131528->retval_mem_129494 = mem_129494.mem;
    futhark_mc_task_131528->retval_mem_129495 = mem_129495.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131535 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_122818;
    int64_t free_x_129489;
    char *free_mem_129494;
    char *free_mem_129495;
    float free_a11_129533;
    float free_b11_129535;
    float free_c11_129536;
    float *retval_defunc_2_reduce_res_129537;
    float *retval_defunc_2_reduce_res_129538;
};
struct futhark_mc_segred_stage_1_parloop_struct_131539 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120213;
    int64_t free_x_120298;
    char *free_mem_122818;
    int64_t free_x_129489;
    char *free_mem_129494;
    char *free_mem_129495;
    float free_a11_129533;
    float free_b11_129535;
    float free_c11_129536;
    char *free_reduce_stage_1_tid_res_arr_mem_129767;
    char *free_reduce_stage_1_tid_res_arr_mem_129769;
};
static int futhark_mc_segred_stage_1_parloop_131540(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120220,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131539
    *futhark_mc_segred_stage_1_parloop_struct_131539 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131539 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131539->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131540_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131540_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131539->free_n_114463;
    int64_t gtid_120213 =
            futhark_mc_segred_stage_1_parloop_struct_131539->free_gtid_120213;
    int64_t x_120298 =
            futhark_mc_segred_stage_1_parloop_struct_131539->free_x_120298;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131539->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129489 =
            futhark_mc_segred_stage_1_parloop_struct_131539->free_x_129489;
    struct memblock mem_129494 = {.desc ="mem_129494", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131539->free_mem_129494,
                                  .size =0, .references =NULL};
    struct memblock mem_129495 = {.desc ="mem_129495", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131539->free_mem_129495,
                                  .size =0, .references =NULL};
    float a11_129533 =
          futhark_mc_segred_stage_1_parloop_struct_131539->free_a11_129533;
    float b11_129535 =
          futhark_mc_segred_stage_1_parloop_struct_131539->free_b11_129535;
    float c11_129536 =
          futhark_mc_segred_stage_1_parloop_struct_131539->free_c11_129536;
    struct memblock reduce_stage_1_tid_res_arr_mem_129767 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129767",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131539->free_reduce_stage_1_tid_res_arr_mem_129767,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_129769 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_129769",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131539->free_reduce_stage_1_tid_res_arr_mem_129769,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_129771 = start;
    float x_129723;
    float x_129724;
    float x_129726;
    float x_129727;
    float local_acc_129772 = 0.0F;
    float local_acc_129773 = 0.0F;
    
    for (; iter_129771 < end; iter_129771++) {
        int64_t gtid_120221 = iter_129771;
        float x_129729 = ((float *) mem_129495.mem)[gtid_120221];
        float x_129730 = ((float *) mem_129494.mem)[gtid_120221];
        bool cond_129731 = sle64(x_120298, gtid_120221);
        float defunc_0_f_res_129732;
        
        if (cond_129731) {
            defunc_0_f_res_129732 = 0.0F;
        } else {
            int64_t i_129733 = add64(gtid_120221, x_129489);
            float x_129734 = ((float *) mem_122818.mem)[gtid_120213 * n_114463 +
                                                        i_129733];
            
            defunc_0_f_res_129732 = x_129734;
        }
        
        float x_129735 = a11_129533 * x_129729;
        float y_129736 = b11_129535 * x_129730;
        float x_129737 = x_129735 + y_129736;
        float defunc_9_fit_fun_res_129738 = defunc_0_f_res_129732 * x_129737;
        float x_129739 = b11_129535 * x_129729;
        float y_129740 = c11_129536 * x_129730;
        float x_129741 = x_129739 + y_129740;
        float defunc_9_slope_fun_res_129742 = defunc_0_f_res_129732 * x_129741;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_129723 = local_acc_129772;
        }
        // Load next params
        {
            x_129724 = defunc_9_fit_fun_res_129738;
        }
        // Red body
        {
            float defunc_1_op_res_129725 = x_129723 + x_129724;
            
            local_acc_129772 = defunc_1_op_res_129725;
        }
        // Load accum params
        {
            x_129726 = local_acc_129773;
        }
        // Load next params
        {
            x_129727 = defunc_9_slope_fun_res_129742;
        }
        // Red body
        {
            float defunc_1_op_res_129728 = x_129726 + x_129727;
            
            local_acc_129773 = defunc_1_op_res_129728;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_129767.mem)[flat_tid_120220] =
        local_acc_129772;
    ((float *) reduce_stage_1_tid_res_arr_mem_129769.mem)[flat_tid_120220] =
        local_acc_129773;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131540_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131540_end -
                 futhark_mc_segred_stage_1_parloop_131540_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131540_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131540_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131540_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131536(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120220 = tid;
    int num_tasks_129766 = info.nsubtasks;
    struct futhark_mc_task_131535 *futhark_mc_task_131535 =
                                  (struct futhark_mc_task_131535 *) args;
    struct futhark_context *ctx = futhark_mc_task_131535->ctx;
    uint64_t futhark_mc_segred_task_131536_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131536_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131535->free_n_114463;
    int64_t gtid_120213 = futhark_mc_task_131535->free_gtid_120213;
    int64_t x_120298 = futhark_mc_task_131535->free_x_120298;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131535->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129489 = futhark_mc_task_131535->free_x_129489;
    struct memblock mem_129494 = {.desc ="mem_129494", .mem =
                                  futhark_mc_task_131535->free_mem_129494,
                                  .size =0, .references =NULL};
    struct memblock mem_129495 = {.desc ="mem_129495", .mem =
                                  futhark_mc_task_131535->free_mem_129495,
                                  .size =0, .references =NULL};
    float a11_129533 = futhark_mc_task_131535->free_a11_129533;
    float b11_129535 = futhark_mc_task_131535->free_b11_129535;
    float c11_129536 = futhark_mc_task_131535->free_c11_129536;
    float defunc_2_reduce_res_129537 =
          *futhark_mc_task_131535->retval_defunc_2_reduce_res_129537;
    float defunc_2_reduce_res_129538 =
          *futhark_mc_task_131535->retval_defunc_2_reduce_res_129538;
    size_t reduce_stage_1_tid_res_arr_mem_129767_cached_sizze_131537 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129767 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_129769_cached_sizze_131538 = 0;
    char *reduce_stage_1_tid_res_arr_mem_129769 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_129767_cached_sizze_131537 <
        (size_t) ((int64_t) 4 * num_tasks_129766)) {
        reduce_stage_1_tid_res_arr_mem_129767 =
            realloc(reduce_stage_1_tid_res_arr_mem_129767, (int64_t) 4 *
                    num_tasks_129766);
        reduce_stage_1_tid_res_arr_mem_129767_cached_sizze_131537 =
            (int64_t) 4 * num_tasks_129766;
    }
    if (reduce_stage_1_tid_res_arr_mem_129769_cached_sizze_131538 <
        (size_t) ((int64_t) 4 * num_tasks_129766)) {
        reduce_stage_1_tid_res_arr_mem_129769 =
            realloc(reduce_stage_1_tid_res_arr_mem_129769, (int64_t) 4 *
                    num_tasks_129766);
        reduce_stage_1_tid_res_arr_mem_129769_cached_sizze_131538 =
            (int64_t) 4 * num_tasks_129766;
    }
    
    int64_t iter_129771;
    struct futhark_mc_segred_stage_1_parloop_struct_131539
    futhark_mc_segred_stage_1_parloop_struct_131539;
    
    futhark_mc_segred_stage_1_parloop_struct_131539.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_gtid_120213 =
        gtid_120213;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_x_120298 = x_120298;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_x_129489 = x_129489;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_mem_129494 =
        mem_129494.mem;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_mem_129495 =
        mem_129495.mem;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_a11_129533 =
        a11_129533;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_b11_129535 =
        b11_129535;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_c11_129536 =
        c11_129536;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_reduce_stage_1_tid_res_arr_mem_129767 =
        reduce_stage_1_tid_res_arr_mem_129767;
    futhark_mc_segred_stage_1_parloop_struct_131539.free_reduce_stage_1_tid_res_arr_mem_129769 =
        reduce_stage_1_tid_res_arr_mem_129769;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131540_task;
    
    futhark_mc_segred_stage_1_parloop_131540_task.name =
        "futhark_mc_segred_stage_1_parloop_131540";
    futhark_mc_segred_stage_1_parloop_131540_task.fn =
        futhark_mc_segred_stage_1_parloop_131540;
    futhark_mc_segred_stage_1_parloop_131540_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131539;
    futhark_mc_segred_stage_1_parloop_131540_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131540_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131540_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131540_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131540_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131540_task);
    
    if (futhark_mc_segred_stage_1_parloop_131540_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131540_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131540_total_end -
                 futhark_mc_segred_stage_1_parloop_131540_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131540_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131540_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131540_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129537 = 0.0F;
        defunc_2_reduce_res_129538 = 0.0F;
    }
    
    float x_129774;
    float x_129775;
    float x_129777;
    float x_129778;
    
    for (int32_t i_129780 = 0; i_129780 < num_tasks_129766; i_129780++) {
        flat_tid_120220 = i_129780;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_129774 = defunc_2_reduce_res_129537;
            }
            // load next params
            {
                x_129775 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129767)[flat_tid_120220];
            }
            // red body
            {
                float defunc_1_op_res_129776 = x_129774 + x_129775;
                
                defunc_2_reduce_res_129537 = defunc_1_op_res_129776;
            }
            // load acc params
            {
                x_129777 = defunc_2_reduce_res_129538;
            }
            // load next params
            {
                x_129778 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_129769)[flat_tid_120220];
            }
            // red body
            {
                float defunc_1_op_res_129779 = x_129777 + x_129778;
                
                defunc_2_reduce_res_129538 = defunc_1_op_res_129779;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_129767);
    free(reduce_stage_1_tid_res_arr_mem_129769);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131536_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131536_end -
                 futhark_mc_segred_task_131536_start;
        
        ctx->futhark_mc_segred_task_131536_runs[tid]++;
        ctx->futhark_mc_segred_task_131536_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131536_iter[tid] += iterations;
    }
    *futhark_mc_task_131535->retval_defunc_2_reduce_res_129537 =
        defunc_2_reduce_res_129537;
    *futhark_mc_task_131535->retval_defunc_2_reduce_res_129538 =
        defunc_2_reduce_res_129538;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131525(void *args, int64_t start,
                                            int64_t end, int flat_tid_120216,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131524
    *futhark_mc_segmap_parloop_struct_131524 =
    (struct futhark_mc_segmap_parloop_struct_131524 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131524->ctx;
    uint64_t futhark_mc_segmap_parloop_131525_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131525_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131524->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131524->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131524->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131524->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131524->free_i_114539;
    int64_t gtid_120213 =
            futhark_mc_segmap_parloop_struct_131524->free_gtid_120213;
    int64_t x_120298 = futhark_mc_segmap_parloop_struct_131524->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 =
            futhark_mc_segmap_parloop_struct_131524->free_bytes_123004;
    struct memblock mem_123042 = {.desc ="mem_123042", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_123042,
                                  .size =0, .references =NULL};
    struct memblock mem_123045 = {.desc ="mem_123045", .mem =
                                  futhark_mc_segmap_parloop_struct_131524->free_mem_123045,
                                  .size =0, .references =NULL};
    size_t mem_129494_cached_sizze_131526 = 0;
    char *mem_129494 = NULL;
    size_t mem_129495_cached_sizze_131527 = 0;
    char *mem_129495 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129694 = start;
    
    if (mem_129494_cached_sizze_131526 < (size_t) bytes_123004) {
        mem_129494 = realloc(mem_129494, bytes_123004);
        mem_129494_cached_sizze_131526 = bytes_123004;
    }
    if (mem_129495_cached_sizze_131527 < (size_t) bytes_123004) {
        mem_129495 = realloc(mem_129495, bytes_123004);
        mem_129495_cached_sizze_131527 = bytes_123004;
    }
    for (; iter_129694 < end; iter_129694++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129743 = t_n_m_114520;
        int64_t gtid_120217 = iter_129694;
        int64_t remnant_129744 = iter_129694 - gtid_120217;
        int64_t x_129489 = ((int64_t *) mem_122067.mem)[gtid_120213 *
                                                        t_n_m_114520 +
                                                        gtid_120217];
        float x_129490 = ((float *) mem_122071.mem)[gtid_120213 * t_n_m_114520 +
                                                    gtid_120217];
        int64_t min_arg_129491 = mul64(t_jump_114470, gtid_120217);
        int64_t min_res_129492 = smin64(i_114539, min_arg_129491);
        float defunc_0_f_res_129493 = sitofp_i64_f32(min_res_129492);
        float defunc_2_reduce_res_129496;
        float defunc_2_reduce_res_129497;
        float defunc_2_reduce_res_129498;
        int64_t flat_tid_120218 = (int64_t) 0;
        int32_t num_tasks_129745;
        struct futhark_mc_task_131528 futhark_mc_task_131528;
        
        futhark_mc_task_131528.ctx = ctx;
        futhark_mc_task_131528.free_n_114463 = n_114463;
        futhark_mc_task_131528.free_gtid_120213 = gtid_120213;
        futhark_mc_task_131528.free_x_120298 = x_120298;
        futhark_mc_task_131528.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131528.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131528.free_x_129489 = x_129489;
        futhark_mc_task_131528.free_x_129490 = x_129490;
        futhark_mc_task_131528.free_defunc_0_f_res_129493 =
            defunc_0_f_res_129493;
        futhark_mc_task_131528.retval_defunc_2_reduce_res_129496 =
            &defunc_2_reduce_res_129496;
        futhark_mc_task_131528.retval_defunc_2_reduce_res_129497 =
            &defunc_2_reduce_res_129497;
        futhark_mc_task_131528.retval_defunc_2_reduce_res_129498 =
            &defunc_2_reduce_res_129498;
        futhark_mc_task_131528.retval_mem_129494 = mem_129494;
        futhark_mc_task_131528.retval_mem_129495 = mem_129495;
        
        struct scheduler_segop futhark_mc_task_131528_task;
        
        futhark_mc_task_131528_task.args = &futhark_mc_task_131528;
        futhark_mc_task_131528_task.top_level_fn =
            futhark_mc_segred_task_131529;
        futhark_mc_task_131528_task.name = "futhark_mc_segred_task_131529";
        futhark_mc_task_131528_task.iterations = t_window_114466;
        futhark_mc_task_131528_task.task_time =
            &ctx->futhark_mc_segred_task_131529_total_time;
        futhark_mc_task_131528_task.task_iter =
            &ctx->futhark_mc_segred_task_131529_total_iter;
        futhark_mc_task_131528_task.sched = STATIC;
        futhark_mc_task_131528_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131529_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131528_task);
        
        if (futhark_mc_segred_task_131529_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_129529 = defunc_2_reduce_res_129496 *
              defunc_2_reduce_res_129498;
        float y_129530 = defunc_2_reduce_res_129497 *
              defunc_2_reduce_res_129497;
        float y_129531 = x_129529 - y_129530;
        float det1_129532 = 1.0F / y_129531;
        float a11_129533 = defunc_2_reduce_res_129498 * det1_129532;
        float negate_arg_129534 = defunc_2_reduce_res_129497 * det1_129532;
        float b11_129535 = 0.0F - negate_arg_129534;
        float c11_129536 = defunc_2_reduce_res_129496 * det1_129532;
        float defunc_2_reduce_res_129537;
        float defunc_2_reduce_res_129538;
        int64_t flat_tid_120220 = (int64_t) 0;
        int32_t num_tasks_129766;
        struct futhark_mc_task_131535 futhark_mc_task_131535;
        
        futhark_mc_task_131535.ctx = ctx;
        futhark_mc_task_131535.free_n_114463 = n_114463;
        futhark_mc_task_131535.free_gtid_120213 = gtid_120213;
        futhark_mc_task_131535.free_x_120298 = x_120298;
        futhark_mc_task_131535.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131535.free_x_129489 = x_129489;
        futhark_mc_task_131535.free_mem_129494 = mem_129494;
        futhark_mc_task_131535.free_mem_129495 = mem_129495;
        futhark_mc_task_131535.free_a11_129533 = a11_129533;
        futhark_mc_task_131535.free_b11_129535 = b11_129535;
        futhark_mc_task_131535.free_c11_129536 = c11_129536;
        futhark_mc_task_131535.retval_defunc_2_reduce_res_129537 =
            &defunc_2_reduce_res_129537;
        futhark_mc_task_131535.retval_defunc_2_reduce_res_129538 =
            &defunc_2_reduce_res_129538;
        
        struct scheduler_segop futhark_mc_task_131535_task;
        
        futhark_mc_task_131535_task.args = &futhark_mc_task_131535;
        futhark_mc_task_131535_task.top_level_fn =
            futhark_mc_segred_task_131536;
        futhark_mc_task_131535_task.name = "futhark_mc_segred_task_131536";
        futhark_mc_task_131535_task.iterations = t_window_114466;
        futhark_mc_task_131535_task.task_time =
            &ctx->futhark_mc_segred_task_131536_total_time;
        futhark_mc_task_131535_task.task_iter =
            &ctx->futhark_mc_segred_task_131536_total_iter;
        futhark_mc_task_131535_task.sched = STATIC;
        futhark_mc_task_131535_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131536_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131535_task);
        
        if (futhark_mc_segred_task_131536_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123042.mem)[gtid_120217] = defunc_2_reduce_res_129537;
        ((float *) mem_123045.mem)[gtid_120217] = defunc_2_reduce_res_129538;
    }
    
  cleanup:
    { }
    free(mem_129494);
    free(mem_129495);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131525_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131525_end -
                 futhark_mc_segmap_parloop_131525_start;
        
        ctx->futhark_mc_segmap_parloop_131525_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131525_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131525_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131523(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120216 = tid;
    int num_tasks_129634 = info.nsubtasks;
    struct futhark_mc_task_131517 *futhark_mc_task_131517 =
                                  (struct futhark_mc_task_131517 *) args;
    struct futhark_context *ctx = futhark_mc_task_131517->ctx;
    uint64_t futhark_mc_segmap_nested_task_131523_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131523_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131517->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131517->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131517->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131517->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131517->free_i_114539;
    int64_t gtid_120213 = futhark_mc_task_131517->free_gtid_120213;
    int64_t x_120298 = futhark_mc_task_131517->free_x_120298;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131517->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131517->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131517->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131517->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131517->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 = futhark_mc_task_131517->free_bytes_123004;
    struct memblock mem_123042 = {.desc ="mem_123042", .mem =
                                  futhark_mc_task_131517->free_mem_123042,
                                  .size =0, .references =NULL};
    struct memblock mem_123045 = {.desc ="mem_123045", .mem =
                                  futhark_mc_task_131517->free_mem_123045,
                                  .size =0, .references =NULL};
    int64_t iter_129694;
    struct futhark_mc_segmap_parloop_struct_131524
    futhark_mc_segmap_parloop_struct_131524;
    
    futhark_mc_segmap_parloop_struct_131524.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131524.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131524.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131524.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131524.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131524.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131524.free_gtid_120213 = gtid_120213;
    futhark_mc_segmap_parloop_struct_131524.free_x_120298 = x_120298;
    futhark_mc_segmap_parloop_struct_131524.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131524.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131524.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131524.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131524.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131524.free_bytes_123004 = bytes_123004;
    futhark_mc_segmap_parloop_struct_131524.free_mem_123042 = mem_123042.mem;
    futhark_mc_segmap_parloop_struct_131524.free_mem_123045 = mem_123045.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131525_task;
    
    futhark_mc_segmap_parloop_131525_task.name =
        "futhark_mc_segmap_parloop_131525";
    futhark_mc_segmap_parloop_131525_task.fn = futhark_mc_segmap_parloop_131525;
    futhark_mc_segmap_parloop_131525_task.args =
        &futhark_mc_segmap_parloop_struct_131524;
    futhark_mc_segmap_parloop_131525_task.iterations = iterations;
    futhark_mc_segmap_parloop_131525_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131525_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131525_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131525_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131525_task);
    
    if (futhark_mc_segmap_parloop_131525_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131525_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131525_total_end -
                 futhark_mc_segmap_parloop_131525_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131525_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131525_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131525_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131523_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131523_end -
                 futhark_mc_segmap_nested_task_131523_start;
        
        ctx->futhark_mc_segmap_nested_task_131523_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131523_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131523_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131514(void *args, int64_t start,
                                            int64_t end, int flat_tid_120212,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131513
    *futhark_mc_segmap_parloop_struct_131513 =
    (struct futhark_mc_segmap_parloop_struct_131513 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131513->ctx;
    uint64_t futhark_mc_segmap_parloop_131514_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131514_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131513->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131513->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131513->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131513->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131513->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131513->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131513->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 =
            futhark_mc_segmap_parloop_struct_131513->free_bytes_123004;
    struct memblock mem_123109 = {.desc ="mem_123109", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_123109,
                                  .size =0, .references =NULL};
    struct memblock mem_123113 = {.desc ="mem_123113", .mem =
                                  futhark_mc_segmap_parloop_struct_131513->free_mem_123113,
                                  .size =0, .references =NULL};
    size_t mem_123042_cached_sizze_131515 = 0;
    char *mem_123042 = NULL;
    size_t mem_123045_cached_sizze_131516 = 0;
    char *mem_123045 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129488 = start;
    
    if (mem_123042_cached_sizze_131515 < (size_t) bytes_121998) {
        mem_123042 = realloc(mem_123042, bytes_121998);
        mem_123042_cached_sizze_131515 = bytes_121998;
    }
    if (mem_123045_cached_sizze_131516 < (size_t) bytes_121998) {
        mem_123045 = realloc(mem_123045, bytes_121998);
        mem_123045_cached_sizze_131516 = bytes_121998;
    }
    for (; iter_129488 < end; iter_129488++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129632 = m_114462;
        int64_t gtid_120213 = iter_129488;
        int64_t remnant_129633 = iter_129488 - gtid_120213;
        int64_t x_120298 = ((int64_t *) mem_121845.mem)[gtid_120213];
        int64_t flat_tid_120214 = (int64_t) 0;
        int32_t num_tasks_129634;
        int64_t flat_tid_120216 = (int64_t) 0;
        struct futhark_mc_task_131517 futhark_mc_task_131517;
        
        futhark_mc_task_131517.ctx = ctx;
        futhark_mc_task_131517.free_n_114463 = n_114463;
        futhark_mc_task_131517.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131517.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131517.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131517.free_i_114539 = i_114539;
        futhark_mc_task_131517.free_gtid_120213 = gtid_120213;
        futhark_mc_task_131517.free_x_120298 = x_120298;
        futhark_mc_task_131517.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131517.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131517.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131517.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131517.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131517.free_bytes_123004 = bytes_123004;
        futhark_mc_task_131517.free_mem_123042 = mem_123042;
        futhark_mc_task_131517.free_mem_123045 = mem_123045;
        
        struct scheduler_segop futhark_mc_task_131517_task;
        
        futhark_mc_task_131517_task.args = &futhark_mc_task_131517;
        futhark_mc_task_131517_task.top_level_fn =
            futhark_mc_segmap_task_131518;
        futhark_mc_task_131517_task.name = "futhark_mc_segmap_task_131518";
        futhark_mc_task_131517_task.iterations = t_n_m_114520;
        futhark_mc_task_131517_task.task_time =
            &ctx->futhark_mc_segmap_task_131518_total_time;
        futhark_mc_task_131517_task.task_iter =
            &ctx->futhark_mc_segmap_task_131518_total_iter;
        futhark_mc_task_131517_task.sched = STATIC;
        futhark_mc_task_131517_task.nested_fn =
            futhark_mc_segmap_nested_task_131523;
        
        int futhark_mc_segmap_task_131518_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131517_task);
        
        if (futhark_mc_segmap_task_131518_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123109.mem + gtid_120213 * t_n_m_114520 * (int64_t) 4,
                mem_123042 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_123113.mem + gtid_120213 * t_n_m_114520 * (int64_t) 4,
                mem_123045 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123042);
    free(mem_123045);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131514_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131514_end -
                 futhark_mc_segmap_parloop_131514_start;
        
        ctx->futhark_mc_segmap_parloop_131514_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131514_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131514_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131512(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120212 = tid;
    int num_tasks_129399 = info.nsubtasks;
    struct futhark_mc_task_131504 *futhark_mc_task_131504 =
                                  (struct futhark_mc_task_131504 *) args;
    struct futhark_context *ctx = futhark_mc_task_131504->ctx;
    uint64_t futhark_mc_segmap_nested_task_131512_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131512_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131504->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131504->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131504->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131504->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131504->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131504->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131504->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131504->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131504->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131504->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131504->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131504->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131504->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123004 = futhark_mc_task_131504->free_bytes_123004;
    struct memblock mem_123109 = {.desc ="mem_123109", .mem =
                                  futhark_mc_task_131504->free_mem_123109,
                                  .size =0, .references =NULL};
    struct memblock mem_123113 = {.desc ="mem_123113", .mem =
                                  futhark_mc_task_131504->free_mem_123113,
                                  .size =0, .references =NULL};
    int64_t iter_129488;
    struct futhark_mc_segmap_parloop_struct_131513
    futhark_mc_segmap_parloop_struct_131513;
    
    futhark_mc_segmap_parloop_struct_131513.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131513.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131513.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131513.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131513.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131513.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131513.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131513.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131513.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131513.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131513.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131513.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131513.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131513.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131513.free_bytes_123004 = bytes_123004;
    futhark_mc_segmap_parloop_struct_131513.free_mem_123109 = mem_123109.mem;
    futhark_mc_segmap_parloop_struct_131513.free_mem_123113 = mem_123113.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131514_task;
    
    futhark_mc_segmap_parloop_131514_task.name =
        "futhark_mc_segmap_parloop_131514";
    futhark_mc_segmap_parloop_131514_task.fn = futhark_mc_segmap_parloop_131514;
    futhark_mc_segmap_parloop_131514_task.args =
        &futhark_mc_segmap_parloop_struct_131513;
    futhark_mc_segmap_parloop_131514_task.iterations = iterations;
    futhark_mc_segmap_parloop_131514_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131514_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131514_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131514_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131514_task);
    
    if (futhark_mc_segmap_parloop_131514_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131514_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131514_total_end -
                 futhark_mc_segmap_parloop_131514_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131514_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131514_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131514_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131512_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131512_end -
                 futhark_mc_segmap_nested_task_131512_start;
        
        ctx->futhark_mc_segmap_nested_task_131512_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131512_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131512_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131541 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123285;
    char *free_mem_123289;
};
struct futhark_mc_segmap_parloop_struct_131543 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123285;
    char *free_mem_123289;
};
static int futhark_mc_segmap_parloop_131544(void *args, int64_t start,
                                            int64_t end, int flat_tid_120443,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131543
    *futhark_mc_segmap_parloop_struct_131543 =
    (struct futhark_mc_segmap_parloop_struct_131543 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131543->ctx;
    uint64_t futhark_mc_segmap_parloop_131544_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131544_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131543->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131543->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131543->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131543->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131543->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131543->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131543->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 =
            futhark_mc_segmap_parloop_struct_131543->free_bytes_123114;
    struct memblock mem_123285 = {.desc ="mem_123285", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_123285,
                                  .size =0, .references =NULL};
    struct memblock mem_123289 = {.desc ="mem_123289", .mem =
                                  futhark_mc_segmap_parloop_struct_131543->free_mem_123289,
                                  .size =0, .references =NULL};
    size_t mem_123194_cached_sizze_131545 = 0;
    char *mem_123194 = NULL;
    size_t mem_123197_cached_sizze_131546 = 0;
    char *mem_123197 = NULL;
    size_t mem_123214_cached_sizze_131547 = 0;
    char *mem_123214 = NULL;
    size_t mem_123217_cached_sizze_131548 = 0;
    char *mem_123217 = NULL;
    size_t mem_123244_cached_sizze_131549 = 0;
    char *mem_123244 = NULL;
    size_t mem_123247_cached_sizze_131550 = 0;
    char *mem_123247 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129782 = start;
    
    if (mem_123194_cached_sizze_131545 < (size_t) bytes_121998) {
        mem_123194 = realloc(mem_123194, bytes_121998);
        mem_123194_cached_sizze_131545 = bytes_121998;
    }
    if (mem_123197_cached_sizze_131546 < (size_t) bytes_121998) {
        mem_123197 = realloc(mem_123197, bytes_121998);
        mem_123197_cached_sizze_131546 = bytes_121998;
    }
    if (mem_123214_cached_sizze_131547 < (size_t) bytes_123114) {
        mem_123214 = realloc(mem_123214, bytes_123114);
        mem_123214_cached_sizze_131547 = bytes_123114;
    }
    if (mem_123217_cached_sizze_131548 < (size_t) bytes_123114) {
        mem_123217 = realloc(mem_123217, bytes_123114);
        mem_123217_cached_sizze_131548 = bytes_123114;
    }
    if (mem_123244_cached_sizze_131549 < (size_t) bytes_123114) {
        mem_123244 = realloc(mem_123244, bytes_123114);
        mem_123244_cached_sizze_131549 = bytes_123114;
    }
    if (mem_123247_cached_sizze_131550 < (size_t) bytes_123114) {
        mem_123247 = realloc(mem_123247, bytes_123114);
        mem_123247_cached_sizze_131550 = bytes_123114;
    }
    for (; iter_129782 < end; iter_129782++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_129900 = m_114462;
        int64_t gtid_120444 = iter_129782;
        int64_t remnant_129901 = iter_129782 - gtid_120444;
        int64_t x_116267 = ((int64_t *) mem_121845.mem)[gtid_120444];
        
        for (int64_t i_129783 = 0; i_129783 < t_n_m_114520; i_129783++) {
            int64_t x_129786 = ((int64_t *) mem_122067.mem)[gtid_120444 *
                                                            t_n_m_114520 +
                                                            i_129783];
            float x_129787 = ((float *) mem_122071.mem)[gtid_120444 *
                                                        t_n_m_114520 +
                                                        i_129783];
            int64_t min_arg_129788 = mul64(t_jump_114470, i_129783);
            int64_t min_res_129789 = smin64(i_114539, min_arg_129788);
            float defunc_0_f_res_129790 = sitofp_i64_f32(min_res_129789);
            
            for (int64_t i_129795 = 0; i_129795 < t_window_114466; i_129795++) {
                bool cond_129798 = sle64(x_116267, i_129795);
                float defunc_0_f_res_129799;
                
                if (cond_129798) {
                    defunc_0_f_res_129799 = 0.0F;
                } else {
                    int64_t i_129800 = add64(x_129786, i_129795);
                    float x_129801 = ((float *) mem_121867.mem)[gtid_120444 *
                                                                n_114463 +
                                                                i_129800];
                    float defunc_0_f_res_f_res_129802 = 1.0F + x_129801;
                    
                    defunc_0_f_res_129799 = defunc_0_f_res_f_res_129802;
                }
                
                float defunc_0_f_res_129803;
                
                if (cond_129798) {
                    defunc_0_f_res_129803 = 0.0F;
                } else {
                    int64_t i_129804 = add64(x_129786, i_129795);
                    float x_129805 = ((float *) mem_122822.mem)[gtid_120444 *
                                                                n_114463 +
                                                                i_129804];
                    
                    defunc_0_f_res_129803 = x_129805;
                }
                
                float x_j_129806 = defunc_0_f_res_129799 -
                      defunc_0_f_res_129790;
                float abs_res_129807 = (float) fabs(x_j_129806);
                float tmp1_129808 = abs_res_129807 / x_129787;
                float x_129809 = tmp1_129808 * tmp1_129808;
                float y_129810 = tmp1_129808 * x_129809;
                float tmp2_129811 = 1.0F - y_129810;
                float x_129812 = tmp2_129811 * tmp2_129811;
                float tmp3_129813 = tmp2_129811 * x_129812;
                float tmp4_129814 = defunc_0_f_res_129803 * tmp3_129813;
                
                ((float *) mem_123214)[i_129795] = x_j_129806;
                ((float *) mem_123217)[i_129795] = tmp4_129814;
            }
            
            float defunc_2_reduce_res_129819;
            float defunc_2_reduce_res_129820;
            float defunc_2_reduce_res_129821;
            float defunc_2_reduce_res_129822;
            float defunc_2_reduce_res_129823;
            float redout_129827;
            float redout_129828;
            float redout_129829;
            float redout_129830;
            float redout_129831;
            
            redout_129827 = 0.0F;
            redout_129828 = 0.0F;
            redout_129829 = 0.0F;
            redout_129830 = 0.0F;
            redout_129831 = 0.0F;
            for (int64_t i_129826 = 0; i_129826 < t_window_114466; i_129826++) {
                float x_129834 = ((float *) mem_123214)[i_129826];
                float x_129835 = ((float *) mem_123217)[i_129826];
                float defunc_1_f_res_129836 = x_129834 * x_129835;
                float defunc_1_f_res_129837 = x_129834 * defunc_1_f_res_129836;
                float defunc_1_f_res_129838 = x_129834 * defunc_1_f_res_129837;
                float defunc_1_f_res_129839 = x_129834 * defunc_1_f_res_129838;
                float defunc_1_op_res_129840 = x_129835 + redout_129827;
                float defunc_1_op_res_129841 = defunc_1_f_res_129836 +
                      redout_129828;
                float defunc_1_op_res_129842 = defunc_1_f_res_129837 +
                      redout_129829;
                float defunc_1_op_res_129843 = defunc_1_f_res_129838 +
                      redout_129830;
                float defunc_1_op_res_129844 = defunc_1_f_res_129839 +
                      redout_129831;
                
                ((float *) mem_123244)[i_129826] = defunc_1_f_res_129837;
                ((float *) mem_123247)[i_129826] = defunc_1_f_res_129836;
                
                float redout_tmp_129906 = defunc_1_op_res_129840;
                float redout_tmp_129907 = defunc_1_op_res_129841;
                float redout_tmp_129908 = defunc_1_op_res_129842;
                float redout_tmp_129909 = defunc_1_op_res_129843;
                float redout_tmp_129910 = defunc_1_op_res_129844;
                
                redout_129827 = redout_tmp_129906;
                redout_129828 = redout_tmp_129907;
                redout_129829 = redout_tmp_129908;
                redout_129830 = redout_tmp_129909;
                redout_129831 = redout_tmp_129910;
            }
            defunc_2_reduce_res_129819 = redout_129827;
            defunc_2_reduce_res_129820 = redout_129828;
            defunc_2_reduce_res_129821 = redout_129829;
            defunc_2_reduce_res_129822 = redout_129830;
            defunc_2_reduce_res_129823 = redout_129831;
            
            float x_129847 = defunc_2_reduce_res_129821 *
                  defunc_2_reduce_res_129823;
            float y_129848 = defunc_2_reduce_res_129822 *
                  defunc_2_reduce_res_129822;
            float a12_129849 = x_129847 - y_129848;
            float x_129850 = defunc_2_reduce_res_129821 *
                  defunc_2_reduce_res_129822;
            float y_129851 = defunc_2_reduce_res_129820 *
                  defunc_2_reduce_res_129823;
            float b12_129852 = x_129850 - y_129851;
            float x_129853 = defunc_2_reduce_res_129820 *
                  defunc_2_reduce_res_129822;
            float y_129854 = defunc_2_reduce_res_129821 *
                  defunc_2_reduce_res_129821;
            float c12_129855 = x_129853 - y_129854;
            float x_129856 = defunc_2_reduce_res_129819 *
                  defunc_2_reduce_res_129823;
            float b2_129857 = x_129856 - y_129854;
            float x_129858 = defunc_2_reduce_res_129820 *
                  defunc_2_reduce_res_129821;
            float y_129859 = defunc_2_reduce_res_129819 *
                  defunc_2_reduce_res_129822;
            float c2_129860 = x_129858 - y_129859;
            float x_129861 = defunc_2_reduce_res_129819 * a12_129849;
            float y_129862 = defunc_2_reduce_res_129820 * b12_129852;
            float x_129863 = x_129861 + y_129862;
            float y_129864 = defunc_2_reduce_res_129821 * c12_129855;
            float y_129865 = x_129863 + y_129864;
            float det_129866 = 1.0F / y_129865;
            float a12_129867 = a12_129849 * det_129866;
            float b12_129868 = b12_129852 * det_129866;
            float c12_129869 = c12_129855 * det_129866;
            float b2_129870 = b2_129857 * det_129866;
            float c2_129871 = c2_129860 * det_129866;
            float defunc_2_reduce_res_129872;
            float defunc_2_reduce_res_129873;
            float redout_129875;
            float redout_129876;
            
            redout_129875 = 0.0F;
            redout_129876 = 0.0F;
            for (int64_t i_129874 = 0; i_129874 < t_window_114466; i_129874++) {
                float x_129877 = ((float *) mem_123217)[i_129874];
                float x_129878 = ((float *) mem_123247)[i_129874];
                float x_129879 = ((float *) mem_123244)[i_129874];
                bool cond_129880 = sle64(x_116267, i_129874);
                float defunc_0_f_res_129881;
                
                if (cond_129880) {
                    defunc_0_f_res_129881 = 0.0F;
                } else {
                    int64_t i_129882 = add64(x_129786, i_129874);
                    float x_129883 = ((float *) mem_122818.mem)[gtid_120444 *
                                                                n_114463 +
                                                                i_129882];
                    
                    defunc_0_f_res_129881 = x_129883;
                }
                
                float x_129884 = a12_129867 * x_129877;
                float y_129885 = b12_129868 * x_129878;
                float x_129886 = x_129884 + y_129885;
                float y_129887 = c12_129869 * x_129879;
                float x_129888 = x_129886 + y_129887;
                float defunc_9_fit_fun_res_129889 = defunc_0_f_res_129881 *
                      x_129888;
                float x_129890 = b12_129868 * x_129877;
                float y_129891 = b2_129870 * x_129878;
                float x_129892 = x_129890 + y_129891;
                float y_129893 = c2_129871 * x_129879;
                float x_129894 = x_129892 + y_129893;
                float defunc_9_slope_fun_res_129895 = defunc_0_f_res_129881 *
                      x_129894;
                float defunc_1_op_res_129896 = defunc_9_fit_fun_res_129889 +
                      redout_129875;
                float defunc_1_op_res_129897 = defunc_9_slope_fun_res_129895 +
                      redout_129876;
                float redout_tmp_129913 = defunc_1_op_res_129896;
                float redout_tmp_129914 = defunc_1_op_res_129897;
                
                redout_129875 = redout_tmp_129913;
                redout_129876 = redout_tmp_129914;
            }
            defunc_2_reduce_res_129872 = redout_129875;
            defunc_2_reduce_res_129873 = redout_129876;
            ((float *) mem_123194)[i_129783] = defunc_2_reduce_res_129872;
            ((float *) mem_123197)[i_129783] = defunc_2_reduce_res_129873;
        }
        memmove(mem_123285.mem + gtid_120444 * t_n_m_114520 * (int64_t) 4,
                mem_123194 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_123289.mem + gtid_120444 * t_n_m_114520 * (int64_t) 4,
                mem_123197 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123194);
    free(mem_123197);
    free(mem_123214);
    free(mem_123217);
    free(mem_123244);
    free(mem_123247);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131544_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131544_end -
                 futhark_mc_segmap_parloop_131544_start;
        
        ctx->futhark_mc_segmap_parloop_131544_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131544_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131544_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131542(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120443 = tid;
    int num_tasks_129781 = info.nsubtasks;
    struct futhark_mc_task_131541 *futhark_mc_task_131541 =
                                  (struct futhark_mc_task_131541 *) args;
    struct futhark_context *ctx = futhark_mc_task_131541->ctx;
    uint64_t futhark_mc_segmap_task_131542_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131542_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131541->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131541->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131541->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131541->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131541->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131541->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131541->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131541->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131541->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131541->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131541->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131541->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131541->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 = futhark_mc_task_131541->free_bytes_123114;
    struct memblock mem_123285 = {.desc ="mem_123285", .mem =
                                  futhark_mc_task_131541->free_mem_123285,
                                  .size =0, .references =NULL};
    struct memblock mem_123289 = {.desc ="mem_123289", .mem =
                                  futhark_mc_task_131541->free_mem_123289,
                                  .size =0, .references =NULL};
    int64_t iter_129782;
    struct futhark_mc_segmap_parloop_struct_131543
    futhark_mc_segmap_parloop_struct_131543;
    
    futhark_mc_segmap_parloop_struct_131543.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131543.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131543.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131543.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131543.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131543.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131543.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131543.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131543.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131543.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131543.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131543.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131543.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131543.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131543.free_bytes_123114 = bytes_123114;
    futhark_mc_segmap_parloop_struct_131543.free_mem_123285 = mem_123285.mem;
    futhark_mc_segmap_parloop_struct_131543.free_mem_123289 = mem_123289.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131544_task;
    
    futhark_mc_segmap_parloop_131544_task.name =
        "futhark_mc_segmap_parloop_131544";
    futhark_mc_segmap_parloop_131544_task.fn = futhark_mc_segmap_parloop_131544;
    futhark_mc_segmap_parloop_131544_task.args =
        &futhark_mc_segmap_parloop_struct_131543;
    futhark_mc_segmap_parloop_131544_task.iterations = iterations;
    futhark_mc_segmap_parloop_131544_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131544_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131544_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131544_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131544_task);
    
    if (futhark_mc_segmap_parloop_131544_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131544_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131544_total_end -
                 futhark_mc_segmap_parloop_131544_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131544_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131544_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131544_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131542_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131542_end -
                 futhark_mc_segmap_task_131542_start;
        
        ctx->futhark_mc_segmap_task_131542_runs[tid]++;
        ctx->futhark_mc_segmap_task_131542_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131542_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131552 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    char *free_mem_121845;
    char *free_mem_121867;
    int64_t free_bytes_121998;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123285;
    char *free_mem_123289;
};
struct futhark_mc_task_131556 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123188;
    char *free_mem_123191;
};
struct futhark_mc_segmap_parloop_struct_131558 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123188;
    char *free_mem_123191;
};
static int futhark_mc_segmap_parloop_131559(void *args, int64_t start,
                                            int64_t end, int flat_tid_120447,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131558
    *futhark_mc_segmap_parloop_struct_131558 =
    (struct futhark_mc_segmap_parloop_struct_131558 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131558->ctx;
    uint64_t futhark_mc_segmap_parloop_131559_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131559_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131558->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131558->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131558->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131558->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131558->free_i_114539;
    int64_t gtid_120446 =
            futhark_mc_segmap_parloop_struct_131558->free_gtid_120446;
    int64_t x_120569 = futhark_mc_segmap_parloop_struct_131558->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 =
            futhark_mc_segmap_parloop_struct_131558->free_bytes_123114;
    struct memblock mem_123188 = {.desc ="mem_123188", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_123188,
                                  .size =0, .references =NULL};
    struct memblock mem_123191 = {.desc ="mem_123191", .mem =
                                  futhark_mc_segmap_parloop_struct_131558->free_mem_123191,
                                  .size =0, .references =NULL};
    size_t mem_130029_cached_sizze_131560 = 0;
    char *mem_130029 = NULL;
    size_t mem_130031_cached_sizze_131561 = 0;
    char *mem_130031 = NULL;
    size_t mem_130057_cached_sizze_131562 = 0;
    char *mem_130057 = NULL;
    size_t mem_130059_cached_sizze_131563 = 0;
    char *mem_130059 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130143 = start;
    
    if (mem_130029_cached_sizze_131560 < (size_t) bytes_123114) {
        mem_130029 = realloc(mem_130029, bytes_123114);
        mem_130029_cached_sizze_131560 = bytes_123114;
    }
    if (mem_130031_cached_sizze_131561 < (size_t) bytes_123114) {
        mem_130031 = realloc(mem_130031, bytes_123114);
        mem_130031_cached_sizze_131561 = bytes_123114;
    }
    if (mem_130057_cached_sizze_131562 < (size_t) bytes_123114) {
        mem_130057 = realloc(mem_130057, bytes_123114);
        mem_130057_cached_sizze_131562 = bytes_123114;
    }
    if (mem_130059_cached_sizze_131563 < (size_t) bytes_123114) {
        mem_130059 = realloc(mem_130059, bytes_123114);
        mem_130059_cached_sizze_131563 = bytes_123114;
    }
    for (; iter_130143 < end; iter_130143++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130211 = t_n_m_114520;
        int64_t gtid_120448 = iter_130143;
        int64_t remnant_130212 = iter_130143 - gtid_120448;
        int64_t x_130024 = ((int64_t *) mem_122067.mem)[gtid_120446 *
                                                        t_n_m_114520 +
                                                        gtid_120448];
        float x_130025 = ((float *) mem_122071.mem)[gtid_120446 * t_n_m_114520 +
                                                    gtid_120448];
        int64_t min_arg_130026 = mul64(t_jump_114470, gtid_120448);
        int64_t min_res_130027 = smin64(i_114539, min_arg_130026);
        float defunc_0_f_res_130028 = sitofp_i64_f32(min_res_130027);
        
        for (int64_t i_130144 = 0; i_130144 < t_window_114466; i_130144++) {
            bool cond_130147 = sle64(x_120569, i_130144);
            float defunc_0_f_res_130148;
            
            if (cond_130147) {
                defunc_0_f_res_130148 = 0.0F;
            } else {
                int64_t i_130149 = add64(x_130024, i_130144);
                float x_130150 = ((float *) mem_121867.mem)[gtid_120446 *
                                                            n_114463 +
                                                            i_130149];
                float defunc_0_f_res_f_res_130151 = 1.0F + x_130150;
                
                defunc_0_f_res_130148 = defunc_0_f_res_f_res_130151;
            }
            
            float defunc_0_f_res_130152;
            
            if (cond_130147) {
                defunc_0_f_res_130152 = 0.0F;
            } else {
                int64_t i_130153 = add64(x_130024, i_130144);
                float x_130154 = ((float *) mem_122822.mem)[gtid_120446 *
                                                            n_114463 +
                                                            i_130153];
                
                defunc_0_f_res_130152 = x_130154;
            }
            
            float x_j_130155 = defunc_0_f_res_130148 - defunc_0_f_res_130028;
            float abs_res_130156 = (float) fabs(x_j_130155);
            float tmp1_130157 = abs_res_130156 / x_130025;
            float x_130158 = tmp1_130157 * tmp1_130157;
            float y_130159 = tmp1_130157 * x_130158;
            float tmp2_130160 = 1.0F - y_130159;
            float x_130161 = tmp2_130160 * tmp2_130160;
            float tmp3_130162 = tmp2_130160 * x_130161;
            float tmp4_130163 = defunc_0_f_res_130152 * tmp3_130162;
            
            ((float *) mem_130029)[i_130144] = x_j_130155;
            ((float *) mem_130031)[i_130144] = tmp4_130163;
        }
        
        float defunc_2_reduce_res_130061;
        float defunc_2_reduce_res_130062;
        float defunc_2_reduce_res_130063;
        float defunc_2_reduce_res_130064;
        float defunc_2_reduce_res_130065;
        float redout_130167;
        float redout_130168;
        float redout_130169;
        float redout_130170;
        float redout_130171;
        
        redout_130167 = 0.0F;
        redout_130168 = 0.0F;
        redout_130169 = 0.0F;
        redout_130170 = 0.0F;
        redout_130171 = 0.0F;
        for (int64_t i_130166 = 0; i_130166 < t_window_114466; i_130166++) {
            float x_130174 = ((float *) mem_130029)[i_130166];
            float x_130175 = ((float *) mem_130031)[i_130166];
            float defunc_1_f_res_130176 = x_130174 * x_130175;
            float defunc_1_f_res_130177 = x_130174 * defunc_1_f_res_130176;
            float defunc_1_f_res_130178 = x_130174 * defunc_1_f_res_130177;
            float defunc_1_f_res_130179 = x_130174 * defunc_1_f_res_130178;
            float defunc_1_op_res_130180 = x_130175 + redout_130167;
            float defunc_1_op_res_130181 = defunc_1_f_res_130176 +
                  redout_130168;
            float defunc_1_op_res_130182 = defunc_1_f_res_130177 +
                  redout_130169;
            float defunc_1_op_res_130183 = defunc_1_f_res_130178 +
                  redout_130170;
            float defunc_1_op_res_130184 = defunc_1_f_res_130179 +
                  redout_130171;
            
            ((float *) mem_130057)[i_130166] = defunc_1_f_res_130177;
            ((float *) mem_130059)[i_130166] = defunc_1_f_res_130176;
            
            float redout_tmp_130215 = defunc_1_op_res_130180;
            float redout_tmp_130216 = defunc_1_op_res_130181;
            float redout_tmp_130217 = defunc_1_op_res_130182;
            float redout_tmp_130218 = defunc_1_op_res_130183;
            float redout_tmp_130219 = defunc_1_op_res_130184;
            
            redout_130167 = redout_tmp_130215;
            redout_130168 = redout_tmp_130216;
            redout_130169 = redout_tmp_130217;
            redout_130170 = redout_tmp_130218;
            redout_130171 = redout_tmp_130219;
        }
        defunc_2_reduce_res_130061 = redout_130167;
        defunc_2_reduce_res_130062 = redout_130168;
        defunc_2_reduce_res_130063 = redout_130169;
        defunc_2_reduce_res_130064 = redout_130170;
        defunc_2_reduce_res_130065 = redout_130171;
        
        float x_130089 = defunc_2_reduce_res_130063 *
              defunc_2_reduce_res_130065;
        float y_130090 = defunc_2_reduce_res_130064 *
              defunc_2_reduce_res_130064;
        float a12_130091 = x_130089 - y_130090;
        float x_130092 = defunc_2_reduce_res_130063 *
              defunc_2_reduce_res_130064;
        float y_130093 = defunc_2_reduce_res_130062 *
              defunc_2_reduce_res_130065;
        float b12_130094 = x_130092 - y_130093;
        float x_130095 = defunc_2_reduce_res_130062 *
              defunc_2_reduce_res_130064;
        float y_130096 = defunc_2_reduce_res_130063 *
              defunc_2_reduce_res_130063;
        float c12_130097 = x_130095 - y_130096;
        float x_130098 = defunc_2_reduce_res_130061 *
              defunc_2_reduce_res_130065;
        float b2_130099 = x_130098 - y_130096;
        float x_130100 = defunc_2_reduce_res_130062 *
              defunc_2_reduce_res_130063;
        float y_130101 = defunc_2_reduce_res_130061 *
              defunc_2_reduce_res_130064;
        float c2_130102 = x_130100 - y_130101;
        float x_130103 = defunc_2_reduce_res_130061 * a12_130091;
        float y_130104 = defunc_2_reduce_res_130062 * b12_130094;
        float x_130105 = x_130103 + y_130104;
        float y_130106 = defunc_2_reduce_res_130063 * c12_130097;
        float y_130107 = x_130105 + y_130106;
        float det_130108 = 1.0F / y_130107;
        float a12_130109 = a12_130091 * det_130108;
        float b12_130110 = b12_130094 * det_130108;
        float c12_130111 = c12_130097 * det_130108;
        float b2_130112 = b2_130099 * det_130108;
        float c2_130113 = c2_130102 * det_130108;
        float defunc_2_reduce_res_130114;
        float defunc_2_reduce_res_130115;
        float redout_130188;
        float redout_130189;
        
        redout_130188 = 0.0F;
        redout_130189 = 0.0F;
        for (int64_t i_130187 = 0; i_130187 < t_window_114466; i_130187++) {
            float x_130190 = ((float *) mem_130031)[i_130187];
            float x_130191 = ((float *) mem_130059)[i_130187];
            float x_130192 = ((float *) mem_130057)[i_130187];
            bool cond_130193 = sle64(x_120569, i_130187);
            float defunc_0_f_res_130194;
            
            if (cond_130193) {
                defunc_0_f_res_130194 = 0.0F;
            } else {
                int64_t i_130195 = add64(x_130024, i_130187);
                float x_130196 = ((float *) mem_122818.mem)[gtid_120446 *
                                                            n_114463 +
                                                            i_130195];
                
                defunc_0_f_res_130194 = x_130196;
            }
            
            float x_130197 = a12_130109 * x_130190;
            float y_130198 = b12_130110 * x_130191;
            float x_130199 = x_130197 + y_130198;
            float y_130200 = c12_130111 * x_130192;
            float x_130201 = x_130199 + y_130200;
            float defunc_9_fit_fun_res_130202 = defunc_0_f_res_130194 *
                  x_130201;
            float x_130203 = b12_130110 * x_130190;
            float y_130204 = b2_130112 * x_130191;
            float x_130205 = x_130203 + y_130204;
            float y_130206 = c2_130113 * x_130192;
            float x_130207 = x_130205 + y_130206;
            float defunc_9_slope_fun_res_130208 = defunc_0_f_res_130194 *
                  x_130207;
            float defunc_1_op_res_130209 = defunc_9_fit_fun_res_130202 +
                  redout_130188;
            float defunc_1_op_res_130210 = defunc_9_slope_fun_res_130208 +
                  redout_130189;
            float redout_tmp_130222 = defunc_1_op_res_130209;
            float redout_tmp_130223 = defunc_1_op_res_130210;
            
            redout_130188 = redout_tmp_130222;
            redout_130189 = redout_tmp_130223;
        }
        defunc_2_reduce_res_130114 = redout_130188;
        defunc_2_reduce_res_130115 = redout_130189;
        ((float *) mem_123188.mem)[gtid_120448] = defunc_2_reduce_res_130114;
        ((float *) mem_123191.mem)[gtid_120448] = defunc_2_reduce_res_130115;
    }
    
  cleanup:
    { }
    free(mem_130029);
    free(mem_130031);
    free(mem_130057);
    free(mem_130059);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131559_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131559_end -
                 futhark_mc_segmap_parloop_131559_start;
        
        ctx->futhark_mc_segmap_parloop_131559_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131559_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131559_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131557(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120447 = tid;
    int num_tasks_130142 = info.nsubtasks;
    struct futhark_mc_task_131556 *futhark_mc_task_131556 =
                                  (struct futhark_mc_task_131556 *) args;
    struct futhark_context *ctx = futhark_mc_task_131556->ctx;
    uint64_t futhark_mc_segmap_task_131557_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131557_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131556->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131556->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131556->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131556->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131556->free_i_114539;
    int64_t gtid_120446 = futhark_mc_task_131556->free_gtid_120446;
    int64_t x_120569 = futhark_mc_task_131556->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131556->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131556->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131556->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131556->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131556->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 = futhark_mc_task_131556->free_bytes_123114;
    struct memblock mem_123188 = {.desc ="mem_123188", .mem =
                                  futhark_mc_task_131556->free_mem_123188,
                                  .size =0, .references =NULL};
    struct memblock mem_123191 = {.desc ="mem_123191", .mem =
                                  futhark_mc_task_131556->free_mem_123191,
                                  .size =0, .references =NULL};
    int64_t iter_130143;
    struct futhark_mc_segmap_parloop_struct_131558
    futhark_mc_segmap_parloop_struct_131558;
    
    futhark_mc_segmap_parloop_struct_131558.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131558.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131558.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131558.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131558.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131558.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131558.free_gtid_120446 = gtid_120446;
    futhark_mc_segmap_parloop_struct_131558.free_x_120569 = x_120569;
    futhark_mc_segmap_parloop_struct_131558.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131558.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131558.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131558.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131558.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131558.free_bytes_123114 = bytes_123114;
    futhark_mc_segmap_parloop_struct_131558.free_mem_123188 = mem_123188.mem;
    futhark_mc_segmap_parloop_struct_131558.free_mem_123191 = mem_123191.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131559_task;
    
    futhark_mc_segmap_parloop_131559_task.name =
        "futhark_mc_segmap_parloop_131559";
    futhark_mc_segmap_parloop_131559_task.fn = futhark_mc_segmap_parloop_131559;
    futhark_mc_segmap_parloop_131559_task.args =
        &futhark_mc_segmap_parloop_struct_131558;
    futhark_mc_segmap_parloop_131559_task.iterations = iterations;
    futhark_mc_segmap_parloop_131559_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131559_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131559_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131559_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131559_task);
    
    if (futhark_mc_segmap_parloop_131559_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131559_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131559_total_end -
                 futhark_mc_segmap_parloop_131559_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131559_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131559_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131559_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131557_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131557_end -
                 futhark_mc_segmap_task_131557_start;
        
        ctx->futhark_mc_segmap_task_131557_runs[tid]++;
        ctx->futhark_mc_segmap_task_131557_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131557_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131565 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_121867;
    char *free_mem_122067;
    char *free_mem_122071;
    char *free_mem_122818;
    char *free_mem_122822;
    int64_t free_bytes_123114;
    char *free_mem_123188;
    char *free_mem_123191;
};
struct futhark_mc_task_131571 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129916;
    float free_x_129917;
    float free_defunc_0_f_res_129920;
    char *free_mem_129921;
    char *free_mem_129922;
};
struct futhark_mc_segmap_parloop_struct_131573 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_window_114466;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_121867;
    char *free_mem_122822;
    int64_t free_x_129916;
    float free_x_129917;
    float free_defunc_0_f_res_129920;
    char *free_mem_129921;
    char *free_mem_129922;
};
static int futhark_mc_segmap_parloop_131574(void *args, int64_t start,
                                            int64_t end, int flat_tid_120451,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131573
    *futhark_mc_segmap_parloop_struct_131573 =
    (struct futhark_mc_segmap_parloop_struct_131573 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131573->ctx;
    uint64_t futhark_mc_segmap_parloop_131574_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131574_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131573->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131573->free_t_window_114466;
    int64_t gtid_120446 =
            futhark_mc_segmap_parloop_struct_131573->free_gtid_120446;
    int64_t x_120569 = futhark_mc_segmap_parloop_struct_131573->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131573->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131573->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129916 = futhark_mc_segmap_parloop_struct_131573->free_x_129916;
    float x_129917 = futhark_mc_segmap_parloop_struct_131573->free_x_129917;
    float defunc_0_f_res_129920 =
          futhark_mc_segmap_parloop_struct_131573->free_defunc_0_f_res_129920;
    struct memblock mem_129921 = {.desc ="mem_129921", .mem =
                                  futhark_mc_segmap_parloop_struct_131573->free_mem_129921,
                                  .size =0, .references =NULL};
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_segmap_parloop_struct_131573->free_mem_129922,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130291 = start;
    
    for (; iter_130291 < end; iter_130291++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130297 = t_window_114466;
        int64_t gtid_120452 = iter_130291;
        int64_t remnant_130298 = iter_130291 - gtid_120452;
        bool cond_130225 = sle64(x_120569, gtid_120452);
        float defunc_0_f_res_130226;
        
        if (cond_130225) {
            defunc_0_f_res_130226 = 0.0F;
        } else {
            int64_t i_130292 = add64(gtid_120452, x_129916);
            float x_130293 = ((float *) mem_121867.mem)[gtid_120446 * n_114463 +
                                                        i_130292];
            float defunc_0_f_res_f_res_130294 = 1.0F + x_130293;
            
            defunc_0_f_res_130226 = defunc_0_f_res_f_res_130294;
        }
        
        float defunc_0_f_res_130230;
        
        if (cond_130225) {
            defunc_0_f_res_130230 = 0.0F;
        } else {
            int64_t i_130295 = add64(gtid_120452, x_129916);
            float x_130296 = ((float *) mem_122822.mem)[gtid_120446 * n_114463 +
                                                        i_130295];
            
            defunc_0_f_res_130230 = x_130296;
        }
        
        float x_j_130233 = defunc_0_f_res_130226 - defunc_0_f_res_129920;
        float abs_res_130234 = (float) fabs(x_j_130233);
        float tmp1_130235 = abs_res_130234 / x_129917;
        float x_130236 = tmp1_130235 * tmp1_130235;
        float y_130237 = tmp1_130235 * x_130236;
        float tmp2_130238 = 1.0F - y_130237;
        float x_130239 = tmp2_130238 * tmp2_130238;
        float tmp3_130240 = tmp2_130238 * x_130239;
        float tmp4_130241 = defunc_0_f_res_130230 * tmp3_130240;
        
        ((float *) mem_129921.mem)[gtid_120452] = x_j_130233;
        ((float *) mem_129922.mem)[gtid_120452] = tmp4_130241;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131574_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131574_end -
                 futhark_mc_segmap_parloop_131574_start;
        
        ctx->futhark_mc_segmap_parloop_131574_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131574_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131574_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131572(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120451 = tid;
    int num_tasks_130290 = info.nsubtasks;
    struct futhark_mc_task_131571 *futhark_mc_task_131571 =
                                  (struct futhark_mc_task_131571 *) args;
    struct futhark_context *ctx = futhark_mc_task_131571->ctx;
    uint64_t futhark_mc_segmap_task_131572_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131572_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131571->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131571->free_t_window_114466;
    int64_t gtid_120446 = futhark_mc_task_131571->free_gtid_120446;
    int64_t x_120569 = futhark_mc_task_131571->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131571->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131571->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t x_129916 = futhark_mc_task_131571->free_x_129916;
    float x_129917 = futhark_mc_task_131571->free_x_129917;
    float defunc_0_f_res_129920 =
          futhark_mc_task_131571->free_defunc_0_f_res_129920;
    struct memblock mem_129921 = {.desc ="mem_129921", .mem =
                                  futhark_mc_task_131571->free_mem_129921,
                                  .size =0, .references =NULL};
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_task_131571->free_mem_129922,
                                  .size =0, .references =NULL};
    int64_t iter_130291;
    struct futhark_mc_segmap_parloop_struct_131573
    futhark_mc_segmap_parloop_struct_131573;
    
    futhark_mc_segmap_parloop_struct_131573.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131573.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131573.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131573.free_gtid_120446 = gtid_120446;
    futhark_mc_segmap_parloop_struct_131573.free_x_120569 = x_120569;
    futhark_mc_segmap_parloop_struct_131573.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131573.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131573.free_x_129916 = x_129916;
    futhark_mc_segmap_parloop_struct_131573.free_x_129917 = x_129917;
    futhark_mc_segmap_parloop_struct_131573.free_defunc_0_f_res_129920 =
        defunc_0_f_res_129920;
    futhark_mc_segmap_parloop_struct_131573.free_mem_129921 = mem_129921.mem;
    futhark_mc_segmap_parloop_struct_131573.free_mem_129922 = mem_129922.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131574_task;
    
    futhark_mc_segmap_parloop_131574_task.name =
        "futhark_mc_segmap_parloop_131574";
    futhark_mc_segmap_parloop_131574_task.fn = futhark_mc_segmap_parloop_131574;
    futhark_mc_segmap_parloop_131574_task.args =
        &futhark_mc_segmap_parloop_struct_131573;
    futhark_mc_segmap_parloop_131574_task.iterations = iterations;
    futhark_mc_segmap_parloop_131574_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131574_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131574_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131574_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131574_task);
    
    if (futhark_mc_segmap_parloop_131574_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131574_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131574_total_end -
                 futhark_mc_segmap_parloop_131574_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131574_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131574_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131574_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131572_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131572_end -
                 futhark_mc_segmap_task_131572_start;
        
        ctx->futhark_mc_segmap_task_131572_runs[tid]++;
        ctx->futhark_mc_segmap_task_131572_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131572_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131575 {
    struct futhark_context *ctx;
    char *free_mem_129921;
    char *free_mem_129922;
    float *retval_defunc_2_reduce_res_129944;
    float *retval_defunc_2_reduce_res_129945;
    float *retval_defunc_2_reduce_res_129946;
    float *retval_defunc_2_reduce_res_129947;
    float *retval_defunc_2_reduce_res_129948;
    char *retval_mem_129942;
    char *retval_mem_129943;
};
struct futhark_mc_segred_stage_1_parloop_struct_131582 {
    struct futhark_context *ctx;
    char *free_mem_129921;
    char *free_mem_129922;
    char *free_mem_129942;
    char *free_mem_129943;
    char *free_reduce_stage_1_tid_res_arr_mem_130300;
    char *free_reduce_stage_1_tid_res_arr_mem_130302;
    char *free_reduce_stage_1_tid_res_arr_mem_130304;
    char *free_reduce_stage_1_tid_res_arr_mem_130306;
    char *free_reduce_stage_1_tid_res_arr_mem_130308;
};
static int futhark_mc_segred_stage_1_parloop_131583(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120453,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131582
    *futhark_mc_segred_stage_1_parloop_struct_131582 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131582 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131582->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131583_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131583_start = get_wall_time();
    
    struct memblock mem_129921 = {.desc ="mem_129921", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131582->free_mem_129921,
                                  .size =0, .references =NULL};
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131582->free_mem_129922,
                                  .size =0, .references =NULL};
    struct memblock mem_129942 = {.desc ="mem_129942", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131582->free_mem_129942,
                                  .size =0, .references =NULL};
    struct memblock mem_129943 = {.desc ="mem_129943", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131582->free_mem_129943,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130300 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130300",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131582->free_reduce_stage_1_tid_res_arr_mem_130300,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130302 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130302",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131582->free_reduce_stage_1_tid_res_arr_mem_130302,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130304 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130304",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131582->free_reduce_stage_1_tid_res_arr_mem_130304,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130306 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130306",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131582->free_reduce_stage_1_tid_res_arr_mem_130306,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130308 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130308",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131582->free_reduce_stage_1_tid_res_arr_mem_130308,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130310 = start;
    float x_130242;
    float x_130243;
    float x_130245;
    float x_130246;
    float x_130248;
    float x_130249;
    float x_130251;
    float x_130252;
    float x_130254;
    float x_130255;
    float local_acc_130311 = 0.0F;
    float local_acc_130312 = 0.0F;
    float local_acc_130313 = 0.0F;
    float local_acc_130314 = 0.0F;
    float local_acc_130315 = 0.0F;
    
    for (; iter_130310 < end; iter_130310++) {
        int64_t gtid_120454 = iter_130310;
        float x_130257 = ((float *) mem_129921.mem)[gtid_120454];
        float x_130258 = ((float *) mem_129922.mem)[gtid_120454];
        float defunc_1_f_res_130259 = x_130257 * x_130258;
        float defunc_1_f_res_130260 = x_130257 * defunc_1_f_res_130259;
        float defunc_1_f_res_130261 = x_130257 * defunc_1_f_res_130260;
        float defunc_1_f_res_130262 = x_130257 * defunc_1_f_res_130261;
        
        // save map-out results
        {
            ((float *) mem_129942.mem)[gtid_120454] = defunc_1_f_res_130260;
            ((float *) mem_129943.mem)[gtid_120454] = defunc_1_f_res_130259;
        }
        // Load accum params
        {
            x_130242 = local_acc_130311;
        }
        // Load next params
        {
            x_130243 = x_130258;
        }
        // Red body
        {
            float defunc_1_op_res_130244 = x_130242 + x_130243;
            
            local_acc_130311 = defunc_1_op_res_130244;
        }
        // Load accum params
        {
            x_130245 = local_acc_130312;
        }
        // Load next params
        {
            x_130246 = defunc_1_f_res_130259;
        }
        // Red body
        {
            float defunc_1_op_res_130247 = x_130245 + x_130246;
            
            local_acc_130312 = defunc_1_op_res_130247;
        }
        // Load accum params
        {
            x_130248 = local_acc_130313;
        }
        // Load next params
        {
            x_130249 = defunc_1_f_res_130260;
        }
        // Red body
        {
            float defunc_1_op_res_130250 = x_130248 + x_130249;
            
            local_acc_130313 = defunc_1_op_res_130250;
        }
        // Load accum params
        {
            x_130251 = local_acc_130314;
        }
        // Load next params
        {
            x_130252 = defunc_1_f_res_130261;
        }
        // Red body
        {
            float defunc_1_op_res_130253 = x_130251 + x_130252;
            
            local_acc_130314 = defunc_1_op_res_130253;
        }
        // Load accum params
        {
            x_130254 = local_acc_130315;
        }
        // Load next params
        {
            x_130255 = defunc_1_f_res_130262;
        }
        // Red body
        {
            float defunc_1_op_res_130256 = x_130254 + x_130255;
            
            local_acc_130315 = defunc_1_op_res_130256;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130300.mem)[flat_tid_120453] =
        local_acc_130311;
    ((float *) reduce_stage_1_tid_res_arr_mem_130302.mem)[flat_tid_120453] =
        local_acc_130312;
    ((float *) reduce_stage_1_tid_res_arr_mem_130304.mem)[flat_tid_120453] =
        local_acc_130313;
    ((float *) reduce_stage_1_tid_res_arr_mem_130306.mem)[flat_tid_120453] =
        local_acc_130314;
    ((float *) reduce_stage_1_tid_res_arr_mem_130308.mem)[flat_tid_120453] =
        local_acc_130315;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131583_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131583_end -
                 futhark_mc_segred_stage_1_parloop_131583_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131583_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131583_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131583_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131576(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120453 = tid;
    int num_tasks_130299 = info.nsubtasks;
    struct futhark_mc_task_131575 *futhark_mc_task_131575 =
                                  (struct futhark_mc_task_131575 *) args;
    struct futhark_context *ctx = futhark_mc_task_131575->ctx;
    uint64_t futhark_mc_segred_task_131576_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131576_start = get_wall_time();
    
    struct memblock mem_129921 = {.desc ="mem_129921", .mem =
                                  futhark_mc_task_131575->free_mem_129921,
                                  .size =0, .references =NULL};
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_task_131575->free_mem_129922,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_129944 =
          *futhark_mc_task_131575->retval_defunc_2_reduce_res_129944;
    float defunc_2_reduce_res_129945 =
          *futhark_mc_task_131575->retval_defunc_2_reduce_res_129945;
    float defunc_2_reduce_res_129946 =
          *futhark_mc_task_131575->retval_defunc_2_reduce_res_129946;
    float defunc_2_reduce_res_129947 =
          *futhark_mc_task_131575->retval_defunc_2_reduce_res_129947;
    float defunc_2_reduce_res_129948 =
          *futhark_mc_task_131575->retval_defunc_2_reduce_res_129948;
    struct memblock mem_129942 = {.desc ="mem_129942", .mem =
                                  futhark_mc_task_131575->retval_mem_129942,
                                  .size =0, .references =NULL};
    struct memblock mem_129943 = {.desc ="mem_129943", .mem =
                                  futhark_mc_task_131575->retval_mem_129943,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_130300_cached_sizze_131577 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130300 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130302_cached_sizze_131578 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130302 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130304_cached_sizze_131579 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130304 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130306_cached_sizze_131580 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130306 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130308_cached_sizze_131581 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130308 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130300_cached_sizze_131577 <
        (size_t) ((int64_t) 4 * num_tasks_130299)) {
        reduce_stage_1_tid_res_arr_mem_130300 =
            realloc(reduce_stage_1_tid_res_arr_mem_130300, (int64_t) 4 *
                    num_tasks_130299);
        reduce_stage_1_tid_res_arr_mem_130300_cached_sizze_131577 =
            (int64_t) 4 * num_tasks_130299;
    }
    if (reduce_stage_1_tid_res_arr_mem_130302_cached_sizze_131578 <
        (size_t) ((int64_t) 4 * num_tasks_130299)) {
        reduce_stage_1_tid_res_arr_mem_130302 =
            realloc(reduce_stage_1_tid_res_arr_mem_130302, (int64_t) 4 *
                    num_tasks_130299);
        reduce_stage_1_tid_res_arr_mem_130302_cached_sizze_131578 =
            (int64_t) 4 * num_tasks_130299;
    }
    if (reduce_stage_1_tid_res_arr_mem_130304_cached_sizze_131579 <
        (size_t) ((int64_t) 4 * num_tasks_130299)) {
        reduce_stage_1_tid_res_arr_mem_130304 =
            realloc(reduce_stage_1_tid_res_arr_mem_130304, (int64_t) 4 *
                    num_tasks_130299);
        reduce_stage_1_tid_res_arr_mem_130304_cached_sizze_131579 =
            (int64_t) 4 * num_tasks_130299;
    }
    if (reduce_stage_1_tid_res_arr_mem_130306_cached_sizze_131580 <
        (size_t) ((int64_t) 4 * num_tasks_130299)) {
        reduce_stage_1_tid_res_arr_mem_130306 =
            realloc(reduce_stage_1_tid_res_arr_mem_130306, (int64_t) 4 *
                    num_tasks_130299);
        reduce_stage_1_tid_res_arr_mem_130306_cached_sizze_131580 =
            (int64_t) 4 * num_tasks_130299;
    }
    if (reduce_stage_1_tid_res_arr_mem_130308_cached_sizze_131581 <
        (size_t) ((int64_t) 4 * num_tasks_130299)) {
        reduce_stage_1_tid_res_arr_mem_130308 =
            realloc(reduce_stage_1_tid_res_arr_mem_130308, (int64_t) 4 *
                    num_tasks_130299);
        reduce_stage_1_tid_res_arr_mem_130308_cached_sizze_131581 =
            (int64_t) 4 * num_tasks_130299;
    }
    
    int64_t iter_130310;
    struct futhark_mc_segred_stage_1_parloop_struct_131582
    futhark_mc_segred_stage_1_parloop_struct_131582;
    
    futhark_mc_segred_stage_1_parloop_struct_131582.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_mem_129921 =
        mem_129921.mem;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_mem_129922 =
        mem_129922.mem;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_mem_129942 =
        mem_129942.mem;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_mem_129943 =
        mem_129943.mem;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_reduce_stage_1_tid_res_arr_mem_130300 =
        reduce_stage_1_tid_res_arr_mem_130300;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_reduce_stage_1_tid_res_arr_mem_130302 =
        reduce_stage_1_tid_res_arr_mem_130302;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_reduce_stage_1_tid_res_arr_mem_130304 =
        reduce_stage_1_tid_res_arr_mem_130304;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_reduce_stage_1_tid_res_arr_mem_130306 =
        reduce_stage_1_tid_res_arr_mem_130306;
    futhark_mc_segred_stage_1_parloop_struct_131582.free_reduce_stage_1_tid_res_arr_mem_130308 =
        reduce_stage_1_tid_res_arr_mem_130308;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131583_task;
    
    futhark_mc_segred_stage_1_parloop_131583_task.name =
        "futhark_mc_segred_stage_1_parloop_131583";
    futhark_mc_segred_stage_1_parloop_131583_task.fn =
        futhark_mc_segred_stage_1_parloop_131583;
    futhark_mc_segred_stage_1_parloop_131583_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131582;
    futhark_mc_segred_stage_1_parloop_131583_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131583_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131583_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131583_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131583_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131583_task);
    
    if (futhark_mc_segred_stage_1_parloop_131583_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131583_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131583_total_end -
                 futhark_mc_segred_stage_1_parloop_131583_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131583_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131583_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131583_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129944 = 0.0F;
        defunc_2_reduce_res_129945 = 0.0F;
        defunc_2_reduce_res_129946 = 0.0F;
        defunc_2_reduce_res_129947 = 0.0F;
        defunc_2_reduce_res_129948 = 0.0F;
    }
    
    float x_130316;
    float x_130317;
    float x_130319;
    float x_130320;
    float x_130322;
    float x_130323;
    float x_130325;
    float x_130326;
    float x_130328;
    float x_130329;
    
    for (int32_t i_130331 = 0; i_130331 < num_tasks_130299; i_130331++) {
        flat_tid_120453 = i_130331;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130316 = defunc_2_reduce_res_129944;
            }
            // load next params
            {
                x_130317 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130300)[flat_tid_120453];
            }
            // red body
            {
                float defunc_1_op_res_130318 = x_130316 + x_130317;
                
                defunc_2_reduce_res_129944 = defunc_1_op_res_130318;
            }
            // load acc params
            {
                x_130319 = defunc_2_reduce_res_129945;
            }
            // load next params
            {
                x_130320 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130302)[flat_tid_120453];
            }
            // red body
            {
                float defunc_1_op_res_130321 = x_130319 + x_130320;
                
                defunc_2_reduce_res_129945 = defunc_1_op_res_130321;
            }
            // load acc params
            {
                x_130322 = defunc_2_reduce_res_129946;
            }
            // load next params
            {
                x_130323 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130304)[flat_tid_120453];
            }
            // red body
            {
                float defunc_1_op_res_130324 = x_130322 + x_130323;
                
                defunc_2_reduce_res_129946 = defunc_1_op_res_130324;
            }
            // load acc params
            {
                x_130325 = defunc_2_reduce_res_129947;
            }
            // load next params
            {
                x_130326 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130306)[flat_tid_120453];
            }
            // red body
            {
                float defunc_1_op_res_130327 = x_130325 + x_130326;
                
                defunc_2_reduce_res_129947 = defunc_1_op_res_130327;
            }
            // load acc params
            {
                x_130328 = defunc_2_reduce_res_129948;
            }
            // load next params
            {
                x_130329 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130308)[flat_tid_120453];
            }
            // red body
            {
                float defunc_1_op_res_130330 = x_130328 + x_130329;
                
                defunc_2_reduce_res_129948 = defunc_1_op_res_130330;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130300);
    free(reduce_stage_1_tid_res_arr_mem_130302);
    free(reduce_stage_1_tid_res_arr_mem_130304);
    free(reduce_stage_1_tid_res_arr_mem_130306);
    free(reduce_stage_1_tid_res_arr_mem_130308);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131576_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131576_end -
                 futhark_mc_segred_task_131576_start;
        
        ctx->futhark_mc_segred_task_131576_runs[tid]++;
        ctx->futhark_mc_segred_task_131576_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131576_iter[tid] += iterations;
    }
    *futhark_mc_task_131575->retval_defunc_2_reduce_res_129944 =
        defunc_2_reduce_res_129944;
    *futhark_mc_task_131575->retval_defunc_2_reduce_res_129945 =
        defunc_2_reduce_res_129945;
    *futhark_mc_task_131575->retval_defunc_2_reduce_res_129946 =
        defunc_2_reduce_res_129946;
    *futhark_mc_task_131575->retval_defunc_2_reduce_res_129947 =
        defunc_2_reduce_res_129947;
    *futhark_mc_task_131575->retval_defunc_2_reduce_res_129948 =
        defunc_2_reduce_res_129948;
    futhark_mc_task_131575->retval_mem_129942 = mem_129942.mem;
    futhark_mc_task_131575->retval_mem_129943 = mem_129943.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131584 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_122818;
    int64_t free_x_129916;
    char *free_mem_129922;
    char *free_mem_129942;
    char *free_mem_129943;
    float free_a12_129992;
    float free_b12_129993;
    float free_c12_129994;
    float free_b2_129995;
    float free_c2_129996;
    float *retval_defunc_2_reduce_res_129997;
    float *retval_defunc_2_reduce_res_129998;
};
struct futhark_mc_segred_stage_1_parloop_struct_131588 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120446;
    int64_t free_x_120569;
    char *free_mem_122818;
    int64_t free_x_129916;
    char *free_mem_129922;
    char *free_mem_129942;
    char *free_mem_129943;
    float free_a12_129992;
    float free_b12_129993;
    float free_c12_129994;
    float free_b2_129995;
    float free_c2_129996;
    char *free_reduce_stage_1_tid_res_arr_mem_130333;
    char *free_reduce_stage_1_tid_res_arr_mem_130335;
};
static int futhark_mc_segred_stage_1_parloop_131589(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120455,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131588
    *futhark_mc_segred_stage_1_parloop_struct_131588 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131588 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131588->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131589_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131589_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_n_114463;
    int64_t gtid_120446 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_gtid_120446;
    int64_t x_120569 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_x_120569;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129916 =
            futhark_mc_segred_stage_1_parloop_struct_131588->free_x_129916;
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_129922,
                                  .size =0, .references =NULL};
    struct memblock mem_129942 = {.desc ="mem_129942", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_129942,
                                  .size =0, .references =NULL};
    struct memblock mem_129943 = {.desc ="mem_129943", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131588->free_mem_129943,
                                  .size =0, .references =NULL};
    float a12_129992 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_a12_129992;
    float b12_129993 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_b12_129993;
    float c12_129994 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_c12_129994;
    float b2_129995 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_b2_129995;
    float c2_129996 =
          futhark_mc_segred_stage_1_parloop_struct_131588->free_c2_129996;
    struct memblock reduce_stage_1_tid_res_arr_mem_130333 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130333",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131588->free_reduce_stage_1_tid_res_arr_mem_130333,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130335 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130335",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131588->free_reduce_stage_1_tid_res_arr_mem_130335,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130337 = start;
    float x_130263;
    float x_130264;
    float x_130266;
    float x_130267;
    float local_acc_130338 = 0.0F;
    float local_acc_130339 = 0.0F;
    
    for (; iter_130337 < end; iter_130337++) {
        int64_t gtid_120456 = iter_130337;
        float x_130269 = ((float *) mem_129922.mem)[gtid_120456];
        float x_130270 = ((float *) mem_129943.mem)[gtid_120456];
        float x_130271 = ((float *) mem_129942.mem)[gtid_120456];
        bool cond_130272 = sle64(x_120569, gtid_120456);
        float defunc_0_f_res_130273;
        
        if (cond_130272) {
            defunc_0_f_res_130273 = 0.0F;
        } else {
            int64_t i_130274 = add64(gtid_120456, x_129916);
            float x_130275 = ((float *) mem_122818.mem)[gtid_120446 * n_114463 +
                                                        i_130274];
            
            defunc_0_f_res_130273 = x_130275;
        }
        
        float x_130276 = a12_129992 * x_130269;
        float y_130277 = b12_129993 * x_130270;
        float x_130278 = x_130276 + y_130277;
        float y_130279 = c12_129994 * x_130271;
        float x_130280 = x_130278 + y_130279;
        float defunc_9_fit_fun_res_130281 = defunc_0_f_res_130273 * x_130280;
        float x_130282 = b12_129993 * x_130269;
        float y_130283 = b2_129995 * x_130270;
        float x_130284 = x_130282 + y_130283;
        float y_130285 = c2_129996 * x_130271;
        float x_130286 = x_130284 + y_130285;
        float defunc_9_slope_fun_res_130287 = defunc_0_f_res_130273 * x_130286;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_130263 = local_acc_130338;
        }
        // Load next params
        {
            x_130264 = defunc_9_fit_fun_res_130281;
        }
        // Red body
        {
            float defunc_1_op_res_130265 = x_130263 + x_130264;
            
            local_acc_130338 = defunc_1_op_res_130265;
        }
        // Load accum params
        {
            x_130266 = local_acc_130339;
        }
        // Load next params
        {
            x_130267 = defunc_9_slope_fun_res_130287;
        }
        // Red body
        {
            float defunc_1_op_res_130268 = x_130266 + x_130267;
            
            local_acc_130339 = defunc_1_op_res_130268;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130333.mem)[flat_tid_120455] =
        local_acc_130338;
    ((float *) reduce_stage_1_tid_res_arr_mem_130335.mem)[flat_tid_120455] =
        local_acc_130339;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131589_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131589_end -
                 futhark_mc_segred_stage_1_parloop_131589_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131589_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131589_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131589_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131585(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120455 = tid;
    int num_tasks_130332 = info.nsubtasks;
    struct futhark_mc_task_131584 *futhark_mc_task_131584 =
                                  (struct futhark_mc_task_131584 *) args;
    struct futhark_context *ctx = futhark_mc_task_131584->ctx;
    uint64_t futhark_mc_segred_task_131585_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131585_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131584->free_n_114463;
    int64_t gtid_120446 = futhark_mc_task_131584->free_gtid_120446;
    int64_t x_120569 = futhark_mc_task_131584->free_x_120569;
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131584->free_mem_122818,
                                  .size =0, .references =NULL};
    int64_t x_129916 = futhark_mc_task_131584->free_x_129916;
    struct memblock mem_129922 = {.desc ="mem_129922", .mem =
                                  futhark_mc_task_131584->free_mem_129922,
                                  .size =0, .references =NULL};
    struct memblock mem_129942 = {.desc ="mem_129942", .mem =
                                  futhark_mc_task_131584->free_mem_129942,
                                  .size =0, .references =NULL};
    struct memblock mem_129943 = {.desc ="mem_129943", .mem =
                                  futhark_mc_task_131584->free_mem_129943,
                                  .size =0, .references =NULL};
    float a12_129992 = futhark_mc_task_131584->free_a12_129992;
    float b12_129993 = futhark_mc_task_131584->free_b12_129993;
    float c12_129994 = futhark_mc_task_131584->free_c12_129994;
    float b2_129995 = futhark_mc_task_131584->free_b2_129995;
    float c2_129996 = futhark_mc_task_131584->free_c2_129996;
    float defunc_2_reduce_res_129997 =
          *futhark_mc_task_131584->retval_defunc_2_reduce_res_129997;
    float defunc_2_reduce_res_129998 =
          *futhark_mc_task_131584->retval_defunc_2_reduce_res_129998;
    size_t reduce_stage_1_tid_res_arr_mem_130333_cached_sizze_131586 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130333 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_130335_cached_sizze_131587 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130335 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130333_cached_sizze_131586 <
        (size_t) ((int64_t) 4 * num_tasks_130332)) {
        reduce_stage_1_tid_res_arr_mem_130333 =
            realloc(reduce_stage_1_tid_res_arr_mem_130333, (int64_t) 4 *
                    num_tasks_130332);
        reduce_stage_1_tid_res_arr_mem_130333_cached_sizze_131586 =
            (int64_t) 4 * num_tasks_130332;
    }
    if (reduce_stage_1_tid_res_arr_mem_130335_cached_sizze_131587 <
        (size_t) ((int64_t) 4 * num_tasks_130332)) {
        reduce_stage_1_tid_res_arr_mem_130335 =
            realloc(reduce_stage_1_tid_res_arr_mem_130335, (int64_t) 4 *
                    num_tasks_130332);
        reduce_stage_1_tid_res_arr_mem_130335_cached_sizze_131587 =
            (int64_t) 4 * num_tasks_130332;
    }
    
    int64_t iter_130337;
    struct futhark_mc_segred_stage_1_parloop_struct_131588
    futhark_mc_segred_stage_1_parloop_struct_131588;
    
    futhark_mc_segred_stage_1_parloop_struct_131588.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_gtid_120446 =
        gtid_120446;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_x_120569 = x_120569;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_122818 =
        mem_122818.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_x_129916 = x_129916;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_129922 =
        mem_129922.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_129942 =
        mem_129942.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_mem_129943 =
        mem_129943.mem;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_a12_129992 =
        a12_129992;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_b12_129993 =
        b12_129993;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_c12_129994 =
        c12_129994;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_b2_129995 = b2_129995;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_c2_129996 = c2_129996;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_reduce_stage_1_tid_res_arr_mem_130333 =
        reduce_stage_1_tid_res_arr_mem_130333;
    futhark_mc_segred_stage_1_parloop_struct_131588.free_reduce_stage_1_tid_res_arr_mem_130335 =
        reduce_stage_1_tid_res_arr_mem_130335;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131589_task;
    
    futhark_mc_segred_stage_1_parloop_131589_task.name =
        "futhark_mc_segred_stage_1_parloop_131589";
    futhark_mc_segred_stage_1_parloop_131589_task.fn =
        futhark_mc_segred_stage_1_parloop_131589;
    futhark_mc_segred_stage_1_parloop_131589_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131588;
    futhark_mc_segred_stage_1_parloop_131589_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131589_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131589_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131589_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131589_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131589_task);
    
    if (futhark_mc_segred_stage_1_parloop_131589_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131589_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131589_total_end -
                 futhark_mc_segred_stage_1_parloop_131589_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131589_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_129997 = 0.0F;
        defunc_2_reduce_res_129998 = 0.0F;
    }
    
    float x_130340;
    float x_130341;
    float x_130343;
    float x_130344;
    
    for (int32_t i_130346 = 0; i_130346 < num_tasks_130332; i_130346++) {
        flat_tid_120455 = i_130346;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130340 = defunc_2_reduce_res_129997;
            }
            // load next params
            {
                x_130341 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130333)[flat_tid_120455];
            }
            // red body
            {
                float defunc_1_op_res_130342 = x_130340 + x_130341;
                
                defunc_2_reduce_res_129997 = defunc_1_op_res_130342;
            }
            // load acc params
            {
                x_130343 = defunc_2_reduce_res_129998;
            }
            // load next params
            {
                x_130344 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130335)[flat_tid_120455];
            }
            // red body
            {
                float defunc_1_op_res_130345 = x_130343 + x_130344;
                
                defunc_2_reduce_res_129998 = defunc_1_op_res_130345;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130333);
    free(reduce_stage_1_tid_res_arr_mem_130335);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131585_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131585_end -
                 futhark_mc_segred_task_131585_start;
        
        ctx->futhark_mc_segred_task_131585_runs[tid]++;
        ctx->futhark_mc_segred_task_131585_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131585_iter[tid] += iterations;
    }
    *futhark_mc_task_131584->retval_defunc_2_reduce_res_129997 =
        defunc_2_reduce_res_129997;
    *futhark_mc_task_131584->retval_defunc_2_reduce_res_129998 =
        defunc_2_reduce_res_129998;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131566(void *args, int64_t start,
                                            int64_t end, int flat_tid_120449,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131565
    *futhark_mc_segmap_parloop_struct_131565 =
    (struct futhark_mc_segmap_parloop_struct_131565 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131565->ctx;
    uint64_t futhark_mc_segmap_parloop_131566_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131566_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131565->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131565->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131565->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131565->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131565->free_i_114539;
    int64_t gtid_120446 =
            futhark_mc_segmap_parloop_struct_131565->free_gtid_120446;
    int64_t x_120569 = futhark_mc_segmap_parloop_struct_131565->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 =
            futhark_mc_segmap_parloop_struct_131565->free_bytes_123114;
    struct memblock mem_123188 = {.desc ="mem_123188", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_123188,
                                  .size =0, .references =NULL};
    struct memblock mem_123191 = {.desc ="mem_123191", .mem =
                                  futhark_mc_segmap_parloop_struct_131565->free_mem_123191,
                                  .size =0, .references =NULL};
    size_t mem_129921_cached_sizze_131567 = 0;
    char *mem_129921 = NULL;
    size_t mem_129922_cached_sizze_131568 = 0;
    char *mem_129922 = NULL;
    size_t mem_129942_cached_sizze_131569 = 0;
    char *mem_129942 = NULL;
    size_t mem_129943_cached_sizze_131570 = 0;
    char *mem_129943 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130224 = start;
    
    if (mem_129921_cached_sizze_131567 < (size_t) bytes_123114) {
        mem_129921 = realloc(mem_129921, bytes_123114);
        mem_129921_cached_sizze_131567 = bytes_123114;
    }
    if (mem_129922_cached_sizze_131568 < (size_t) bytes_123114) {
        mem_129922 = realloc(mem_129922, bytes_123114);
        mem_129922_cached_sizze_131568 = bytes_123114;
    }
    if (mem_129942_cached_sizze_131569 < (size_t) bytes_123114) {
        mem_129942 = realloc(mem_129942, bytes_123114);
        mem_129942_cached_sizze_131569 = bytes_123114;
    }
    if (mem_129943_cached_sizze_131570 < (size_t) bytes_123114) {
        mem_129943 = realloc(mem_129943, bytes_123114);
        mem_129943_cached_sizze_131570 = bytes_123114;
    }
    for (; iter_130224 < end; iter_130224++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130288 = t_n_m_114520;
        int64_t gtid_120450 = iter_130224;
        int64_t remnant_130289 = iter_130224 - gtid_120450;
        int64_t x_129916 = ((int64_t *) mem_122067.mem)[gtid_120446 *
                                                        t_n_m_114520 +
                                                        gtid_120450];
        float x_129917 = ((float *) mem_122071.mem)[gtid_120446 * t_n_m_114520 +
                                                    gtid_120450];
        int64_t min_arg_129918 = mul64(t_jump_114470, gtid_120450);
        int64_t min_res_129919 = smin64(i_114539, min_arg_129918);
        float defunc_0_f_res_129920 = sitofp_i64_f32(min_res_129919);
        int64_t flat_tid_120451 = (int64_t) 0;
        int32_t num_tasks_130290;
        struct futhark_mc_task_131571 futhark_mc_task_131571;
        
        futhark_mc_task_131571.ctx = ctx;
        futhark_mc_task_131571.free_n_114463 = n_114463;
        futhark_mc_task_131571.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131571.free_gtid_120446 = gtid_120446;
        futhark_mc_task_131571.free_x_120569 = x_120569;
        futhark_mc_task_131571.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131571.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131571.free_x_129916 = x_129916;
        futhark_mc_task_131571.free_x_129917 = x_129917;
        futhark_mc_task_131571.free_defunc_0_f_res_129920 =
            defunc_0_f_res_129920;
        futhark_mc_task_131571.free_mem_129921 = mem_129921;
        futhark_mc_task_131571.free_mem_129922 = mem_129922;
        
        struct scheduler_segop futhark_mc_task_131571_task;
        
        futhark_mc_task_131571_task.args = &futhark_mc_task_131571;
        futhark_mc_task_131571_task.top_level_fn =
            futhark_mc_segmap_task_131572;
        futhark_mc_task_131571_task.name = "futhark_mc_segmap_task_131572";
        futhark_mc_task_131571_task.iterations = t_window_114466;
        futhark_mc_task_131571_task.task_time =
            &ctx->futhark_mc_segmap_task_131572_total_time;
        futhark_mc_task_131571_task.task_iter =
            &ctx->futhark_mc_segmap_task_131572_total_iter;
        futhark_mc_task_131571_task.sched = STATIC;
        futhark_mc_task_131571_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131572_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131571_task);
        
        if (futhark_mc_segmap_task_131572_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_129944;
        float defunc_2_reduce_res_129945;
        float defunc_2_reduce_res_129946;
        float defunc_2_reduce_res_129947;
        float defunc_2_reduce_res_129948;
        int64_t flat_tid_120453 = (int64_t) 0;
        int32_t num_tasks_130299;
        struct futhark_mc_task_131575 futhark_mc_task_131575;
        
        futhark_mc_task_131575.ctx = ctx;
        futhark_mc_task_131575.free_mem_129921 = mem_129921;
        futhark_mc_task_131575.free_mem_129922 = mem_129922;
        futhark_mc_task_131575.retval_defunc_2_reduce_res_129944 =
            &defunc_2_reduce_res_129944;
        futhark_mc_task_131575.retval_defunc_2_reduce_res_129945 =
            &defunc_2_reduce_res_129945;
        futhark_mc_task_131575.retval_defunc_2_reduce_res_129946 =
            &defunc_2_reduce_res_129946;
        futhark_mc_task_131575.retval_defunc_2_reduce_res_129947 =
            &defunc_2_reduce_res_129947;
        futhark_mc_task_131575.retval_defunc_2_reduce_res_129948 =
            &defunc_2_reduce_res_129948;
        futhark_mc_task_131575.retval_mem_129942 = mem_129942;
        futhark_mc_task_131575.retval_mem_129943 = mem_129943;
        
        struct scheduler_segop futhark_mc_task_131575_task;
        
        futhark_mc_task_131575_task.args = &futhark_mc_task_131575;
        futhark_mc_task_131575_task.top_level_fn =
            futhark_mc_segred_task_131576;
        futhark_mc_task_131575_task.name = "futhark_mc_segred_task_131576";
        futhark_mc_task_131575_task.iterations = t_window_114466;
        futhark_mc_task_131575_task.task_time =
            &ctx->futhark_mc_segred_task_131576_total_time;
        futhark_mc_task_131575_task.task_iter =
            &ctx->futhark_mc_segred_task_131576_total_iter;
        futhark_mc_task_131575_task.sched = STATIC;
        futhark_mc_task_131575_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131576_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131575_task);
        
        if (futhark_mc_segred_task_131576_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_129972 = defunc_2_reduce_res_129946 *
              defunc_2_reduce_res_129948;
        float y_129973 = defunc_2_reduce_res_129947 *
              defunc_2_reduce_res_129947;
        float a12_129974 = x_129972 - y_129973;
        float x_129975 = defunc_2_reduce_res_129946 *
              defunc_2_reduce_res_129947;
        float y_129976 = defunc_2_reduce_res_129945 *
              defunc_2_reduce_res_129948;
        float b12_129977 = x_129975 - y_129976;
        float x_129978 = defunc_2_reduce_res_129945 *
              defunc_2_reduce_res_129947;
        float y_129979 = defunc_2_reduce_res_129946 *
              defunc_2_reduce_res_129946;
        float c12_129980 = x_129978 - y_129979;
        float x_129981 = defunc_2_reduce_res_129944 *
              defunc_2_reduce_res_129948;
        float b2_129982 = x_129981 - y_129979;
        float x_129983 = defunc_2_reduce_res_129945 *
              defunc_2_reduce_res_129946;
        float y_129984 = defunc_2_reduce_res_129944 *
              defunc_2_reduce_res_129947;
        float c2_129985 = x_129983 - y_129984;
        float x_129986 = defunc_2_reduce_res_129944 * a12_129974;
        float y_129987 = defunc_2_reduce_res_129945 * b12_129977;
        float x_129988 = x_129986 + y_129987;
        float y_129989 = defunc_2_reduce_res_129946 * c12_129980;
        float y_129990 = x_129988 + y_129989;
        float det_129991 = 1.0F / y_129990;
        float a12_129992 = a12_129974 * det_129991;
        float b12_129993 = b12_129977 * det_129991;
        float c12_129994 = c12_129980 * det_129991;
        float b2_129995 = b2_129982 * det_129991;
        float c2_129996 = c2_129985 * det_129991;
        float defunc_2_reduce_res_129997;
        float defunc_2_reduce_res_129998;
        int64_t flat_tid_120455 = (int64_t) 0;
        int32_t num_tasks_130332;
        struct futhark_mc_task_131584 futhark_mc_task_131584;
        
        futhark_mc_task_131584.ctx = ctx;
        futhark_mc_task_131584.free_n_114463 = n_114463;
        futhark_mc_task_131584.free_gtid_120446 = gtid_120446;
        futhark_mc_task_131584.free_x_120569 = x_120569;
        futhark_mc_task_131584.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131584.free_x_129916 = x_129916;
        futhark_mc_task_131584.free_mem_129922 = mem_129922;
        futhark_mc_task_131584.free_mem_129942 = mem_129942;
        futhark_mc_task_131584.free_mem_129943 = mem_129943;
        futhark_mc_task_131584.free_a12_129992 = a12_129992;
        futhark_mc_task_131584.free_b12_129993 = b12_129993;
        futhark_mc_task_131584.free_c12_129994 = c12_129994;
        futhark_mc_task_131584.free_b2_129995 = b2_129995;
        futhark_mc_task_131584.free_c2_129996 = c2_129996;
        futhark_mc_task_131584.retval_defunc_2_reduce_res_129997 =
            &defunc_2_reduce_res_129997;
        futhark_mc_task_131584.retval_defunc_2_reduce_res_129998 =
            &defunc_2_reduce_res_129998;
        
        struct scheduler_segop futhark_mc_task_131584_task;
        
        futhark_mc_task_131584_task.args = &futhark_mc_task_131584;
        futhark_mc_task_131584_task.top_level_fn =
            futhark_mc_segred_task_131585;
        futhark_mc_task_131584_task.name = "futhark_mc_segred_task_131585";
        futhark_mc_task_131584_task.iterations = t_window_114466;
        futhark_mc_task_131584_task.task_time =
            &ctx->futhark_mc_segred_task_131585_total_time;
        futhark_mc_task_131584_task.task_iter =
            &ctx->futhark_mc_segred_task_131585_total_iter;
        futhark_mc_task_131584_task.sched = STATIC;
        futhark_mc_task_131584_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131585_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131584_task);
        
        if (futhark_mc_segred_task_131585_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_123188.mem)[gtid_120450] = defunc_2_reduce_res_129997;
        ((float *) mem_123191.mem)[gtid_120450] = defunc_2_reduce_res_129998;
    }
    
  cleanup:
    { }
    free(mem_129921);
    free(mem_129922);
    free(mem_129942);
    free(mem_129943);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131566_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131566_end -
                 futhark_mc_segmap_parloop_131566_start;
        
        ctx->futhark_mc_segmap_parloop_131566_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131566_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131566_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131564(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120449 = tid;
    int num_tasks_130142 = info.nsubtasks;
    struct futhark_mc_task_131556 *futhark_mc_task_131556 =
                                  (struct futhark_mc_task_131556 *) args;
    struct futhark_context *ctx = futhark_mc_task_131556->ctx;
    uint64_t futhark_mc_segmap_nested_task_131564_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131564_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131556->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131556->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131556->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131556->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131556->free_i_114539;
    int64_t gtid_120446 = futhark_mc_task_131556->free_gtid_120446;
    int64_t x_120569 = futhark_mc_task_131556->free_x_120569;
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131556->free_mem_121867,
                                  .size =0, .references =NULL};
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131556->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131556->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131556->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131556->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 = futhark_mc_task_131556->free_bytes_123114;
    struct memblock mem_123188 = {.desc ="mem_123188", .mem =
                                  futhark_mc_task_131556->free_mem_123188,
                                  .size =0, .references =NULL};
    struct memblock mem_123191 = {.desc ="mem_123191", .mem =
                                  futhark_mc_task_131556->free_mem_123191,
                                  .size =0, .references =NULL};
    int64_t iter_130224;
    struct futhark_mc_segmap_parloop_struct_131565
    futhark_mc_segmap_parloop_struct_131565;
    
    futhark_mc_segmap_parloop_struct_131565.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131565.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131565.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131565.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131565.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131565.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131565.free_gtid_120446 = gtid_120446;
    futhark_mc_segmap_parloop_struct_131565.free_x_120569 = x_120569;
    futhark_mc_segmap_parloop_struct_131565.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131565.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131565.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131565.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131565.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131565.free_bytes_123114 = bytes_123114;
    futhark_mc_segmap_parloop_struct_131565.free_mem_123188 = mem_123188.mem;
    futhark_mc_segmap_parloop_struct_131565.free_mem_123191 = mem_123191.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131566_task;
    
    futhark_mc_segmap_parloop_131566_task.name =
        "futhark_mc_segmap_parloop_131566";
    futhark_mc_segmap_parloop_131566_task.fn = futhark_mc_segmap_parloop_131566;
    futhark_mc_segmap_parloop_131566_task.args =
        &futhark_mc_segmap_parloop_struct_131565;
    futhark_mc_segmap_parloop_131566_task.iterations = iterations;
    futhark_mc_segmap_parloop_131566_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131566_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131566_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131566_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131566_task);
    
    if (futhark_mc_segmap_parloop_131566_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131566_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131566_total_end -
                 futhark_mc_segmap_parloop_131566_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131566_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131566_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131566_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131564_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131564_end -
                 futhark_mc_segmap_nested_task_131564_start;
        
        ctx->futhark_mc_segmap_nested_task_131564_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131564_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131564_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131553(void *args, int64_t start,
                                            int64_t end, int flat_tid_120445,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131552
    *futhark_mc_segmap_parloop_struct_131552 =
    (struct futhark_mc_segmap_parloop_struct_131552 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131552->ctx;
    uint64_t futhark_mc_segmap_parloop_131553_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131553_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131552->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131552->free_n_114463;
    int64_t t_window_114466 =
            futhark_mc_segmap_parloop_struct_131552->free_t_window_114466;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131552->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131552->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131552->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 =
            futhark_mc_segmap_parloop_struct_131552->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 =
            futhark_mc_segmap_parloop_struct_131552->free_bytes_123114;
    struct memblock mem_123285 = {.desc ="mem_123285", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_123285,
                                  .size =0, .references =NULL};
    struct memblock mem_123289 = {.desc ="mem_123289", .mem =
                                  futhark_mc_segmap_parloop_struct_131552->free_mem_123289,
                                  .size =0, .references =NULL};
    size_t mem_123188_cached_sizze_131554 = 0;
    char *mem_123188 = NULL;
    size_t mem_123191_cached_sizze_131555 = 0;
    char *mem_123191 = NULL;
    int64_t iterations = end - start;
    int64_t iter_129915 = start;
    
    if (mem_123188_cached_sizze_131554 < (size_t) bytes_121998) {
        mem_123188 = realloc(mem_123188, bytes_121998);
        mem_123188_cached_sizze_131554 = bytes_121998;
    }
    if (mem_123191_cached_sizze_131555 < (size_t) bytes_121998) {
        mem_123191 = realloc(mem_123191, bytes_121998);
        mem_123191_cached_sizze_131555 = bytes_121998;
    }
    for (; iter_129915 < end; iter_129915++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130140 = m_114462;
        int64_t gtid_120446 = iter_129915;
        int64_t remnant_130141 = iter_129915 - gtid_120446;
        int64_t x_120569 = ((int64_t *) mem_121845.mem)[gtid_120446];
        int64_t flat_tid_120447 = (int64_t) 0;
        int32_t num_tasks_130142;
        int64_t flat_tid_120449 = (int64_t) 0;
        struct futhark_mc_task_131556 futhark_mc_task_131556;
        
        futhark_mc_task_131556.ctx = ctx;
        futhark_mc_task_131556.free_n_114463 = n_114463;
        futhark_mc_task_131556.free_t_window_114466 = t_window_114466;
        futhark_mc_task_131556.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131556.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131556.free_i_114539 = i_114539;
        futhark_mc_task_131556.free_gtid_120446 = gtid_120446;
        futhark_mc_task_131556.free_x_120569 = x_120569;
        futhark_mc_task_131556.free_mem_121867 = mem_121867.mem;
        futhark_mc_task_131556.free_mem_122067 = mem_122067.mem;
        futhark_mc_task_131556.free_mem_122071 = mem_122071.mem;
        futhark_mc_task_131556.free_mem_122818 = mem_122818.mem;
        futhark_mc_task_131556.free_mem_122822 = mem_122822.mem;
        futhark_mc_task_131556.free_bytes_123114 = bytes_123114;
        futhark_mc_task_131556.free_mem_123188 = mem_123188;
        futhark_mc_task_131556.free_mem_123191 = mem_123191;
        
        struct scheduler_segop futhark_mc_task_131556_task;
        
        futhark_mc_task_131556_task.args = &futhark_mc_task_131556;
        futhark_mc_task_131556_task.top_level_fn =
            futhark_mc_segmap_task_131557;
        futhark_mc_task_131556_task.name = "futhark_mc_segmap_task_131557";
        futhark_mc_task_131556_task.iterations = t_n_m_114520;
        futhark_mc_task_131556_task.task_time =
            &ctx->futhark_mc_segmap_task_131557_total_time;
        futhark_mc_task_131556_task.task_iter =
            &ctx->futhark_mc_segmap_task_131557_total_iter;
        futhark_mc_task_131556_task.sched = STATIC;
        futhark_mc_task_131556_task.nested_fn =
            futhark_mc_segmap_nested_task_131564;
        
        int futhark_mc_segmap_task_131557_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131556_task);
        
        if (futhark_mc_segmap_task_131557_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123285.mem + gtid_120446 * t_n_m_114520 * (int64_t) 4,
                mem_123188 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
        memmove(mem_123289.mem + gtid_120446 * t_n_m_114520 * (int64_t) 4,
                mem_123191 + (int64_t) 0, t_n_m_114520 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123188);
    free(mem_123191);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131553_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131553_end -
                 futhark_mc_segmap_parloop_131553_start;
        
        ctx->futhark_mc_segmap_parloop_131553_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131553_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131553_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131551(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120445 = tid;
    int num_tasks_129781 = info.nsubtasks;
    struct futhark_mc_task_131541 *futhark_mc_task_131541 =
                                  (struct futhark_mc_task_131541 *) args;
    struct futhark_context *ctx = futhark_mc_task_131541->ctx;
    uint64_t futhark_mc_segmap_nested_task_131551_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131551_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131541->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131541->free_n_114463;
    int64_t t_window_114466 = futhark_mc_task_131541->free_t_window_114466;
    int64_t t_jump_114470 = futhark_mc_task_131541->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131541->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131541->free_i_114539;
    struct memblock mem_121845 = {.desc ="mem_121845", .mem =
                                  futhark_mc_task_131541->free_mem_121845,
                                  .size =0, .references =NULL};
    struct memblock mem_121867 = {.desc ="mem_121867", .mem =
                                  futhark_mc_task_131541->free_mem_121867,
                                  .size =0, .references =NULL};
    int64_t bytes_121998 = futhark_mc_task_131541->free_bytes_121998;
    struct memblock mem_122067 = {.desc ="mem_122067", .mem =
                                  futhark_mc_task_131541->free_mem_122067,
                                  .size =0, .references =NULL};
    struct memblock mem_122071 = {.desc ="mem_122071", .mem =
                                  futhark_mc_task_131541->free_mem_122071,
                                  .size =0, .references =NULL};
    struct memblock mem_122818 = {.desc ="mem_122818", .mem =
                                  futhark_mc_task_131541->free_mem_122818,
                                  .size =0, .references =NULL};
    struct memblock mem_122822 = {.desc ="mem_122822", .mem =
                                  futhark_mc_task_131541->free_mem_122822,
                                  .size =0, .references =NULL};
    int64_t bytes_123114 = futhark_mc_task_131541->free_bytes_123114;
    struct memblock mem_123285 = {.desc ="mem_123285", .mem =
                                  futhark_mc_task_131541->free_mem_123285,
                                  .size =0, .references =NULL};
    struct memblock mem_123289 = {.desc ="mem_123289", .mem =
                                  futhark_mc_task_131541->free_mem_123289,
                                  .size =0, .references =NULL};
    int64_t iter_129915;
    struct futhark_mc_segmap_parloop_struct_131552
    futhark_mc_segmap_parloop_struct_131552;
    
    futhark_mc_segmap_parloop_struct_131552.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131552.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131552.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131552.free_t_window_114466 =
        t_window_114466;
    futhark_mc_segmap_parloop_struct_131552.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131552.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131552.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131552.free_mem_121845 = mem_121845.mem;
    futhark_mc_segmap_parloop_struct_131552.free_mem_121867 = mem_121867.mem;
    futhark_mc_segmap_parloop_struct_131552.free_bytes_121998 = bytes_121998;
    futhark_mc_segmap_parloop_struct_131552.free_mem_122067 = mem_122067.mem;
    futhark_mc_segmap_parloop_struct_131552.free_mem_122071 = mem_122071.mem;
    futhark_mc_segmap_parloop_struct_131552.free_mem_122818 = mem_122818.mem;
    futhark_mc_segmap_parloop_struct_131552.free_mem_122822 = mem_122822.mem;
    futhark_mc_segmap_parloop_struct_131552.free_bytes_123114 = bytes_123114;
    futhark_mc_segmap_parloop_struct_131552.free_mem_123285 = mem_123285.mem;
    futhark_mc_segmap_parloop_struct_131552.free_mem_123289 = mem_123289.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131553_task;
    
    futhark_mc_segmap_parloop_131553_task.name =
        "futhark_mc_segmap_parloop_131553";
    futhark_mc_segmap_parloop_131553_task.fn = futhark_mc_segmap_parloop_131553;
    futhark_mc_segmap_parloop_131553_task.args =
        &futhark_mc_segmap_parloop_struct_131552;
    futhark_mc_segmap_parloop_131553_task.iterations = iterations;
    futhark_mc_segmap_parloop_131553_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131553_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131553_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131553_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131553_task);
    
    if (futhark_mc_segmap_parloop_131553_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131553_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131553_total_end -
                 futhark_mc_segmap_parloop_131553_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131553_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131553_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131553_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131551_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131551_end -
                 futhark_mc_segmap_nested_task_131551_start;
        
        ctx->futhark_mc_segmap_nested_task_131551_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131551_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131551_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131590 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_y_116396;
    int64_t free_bytes_121846;
    char *free_ext_mem_123294;
    char *free_ext_mem_123295;
    char *free_mem_123317;
};
struct futhark_mc_segmap_parloop_struct_131592 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_y_116396;
    int64_t free_bytes_121846;
    char *free_ext_mem_123294;
    char *free_ext_mem_123295;
    char *free_mem_123317;
};
static int futhark_mc_segmap_parloop_131593(void *args, int64_t start,
                                            int64_t end, int flat_tid_120786,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131592
    *futhark_mc_segmap_parloop_struct_131592 =
    (struct futhark_mc_segmap_parloop_struct_131592 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131592->ctx;
    uint64_t futhark_mc_segmap_parloop_131593_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131593_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131592->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131592->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131592->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131592->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131592->free_i_114539;
    int64_t y_116396 = futhark_mc_segmap_parloop_struct_131592->free_y_116396;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131592->free_bytes_121846;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_segmap_parloop_struct_131592->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_segmap_parloop_struct_131592->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123317 = {.desc ="mem_123317", .mem =
                                  futhark_mc_segmap_parloop_struct_131592->free_mem_123317,
                                  .size =0, .references =NULL};
    size_t mem_123301_cached_sizze_131594 = 0;
    char *mem_123301 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130348 = start;
    
    if (mem_123301_cached_sizze_131594 < (size_t) bytes_121846) {
        mem_123301 = realloc(mem_123301, bytes_121846);
        mem_123301_cached_sizze_131594 = bytes_121846;
    }
    for (; iter_130348 < end; iter_130348++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130398 = m_114462;
        int64_t gtid_120787 = iter_130348;
        int64_t remnant_130399 = iter_130348 - gtid_120787;
        
        for (int64_t i_130349 = 0; i_130349 < n_114463; i_130349++) {
            int64_t m_v_130351 = sdiv64(i_130349, t_jump_114470);
            bool cond_130352 = m_v_130351 == y_116396;
            int64_t j_130353;
            
            if (cond_130352) {
                int64_t j_t_res_130354 = sub64(m_v_130351, (int64_t) 1);
                
                j_130353 = j_t_res_130354;
            } else {
                j_130353 = m_v_130351;
            }
            
            int64_t min_arg_130355 = mul64(t_jump_114470, j_130353);
            int64_t min_res_130356 = smin64(i_114539, min_arg_130355);
            int64_t defunc_0_m_fun_arg_130357 = add64((int64_t) 1, j_130353);
            int64_t min_arg_130358 = mul64(t_jump_114470,
                                           defunc_0_m_fun_arg_130357);
            int64_t min_res_130359 = smin64(i_114539, min_arg_130358);
            int64_t i64_arg_130360 = sub64(min_res_130359, min_res_130356);
            float i64_res_130361 = sitofp_i64_f32(i64_arg_130360);
            int64_t i64_arg_130362 = sub64(i_130349, min_res_130356);
            float i64_res_130363 = sitofp_i64_f32(i64_arg_130362);
            float u_130364 = i64_res_130363 / i64_res_130361;
            float u2_130365 = u_130364 * u_130364;
            float u3_130366 = u_130364 * u2_130365;
            float x_130367 = 2.0F * u3_130366;
            float y_130368 = 3.0F * u2_130365;
            float x_130369 = x_130367 - y_130368;
            float x_130370 = 1.0F + x_130369;
            bool x_130371 = sle64((int64_t) 0, j_130353);
            bool y_130372 = slt64(j_130353, t_n_m_114520);
            bool bounds_check_130373 = x_130371 && y_130372;
            bool index_certs_130374;
            
            if (!bounds_check_130373) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_130353,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_114520, "].",
                              "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_130375 = ((float *) ext_mem_123295.mem)[gtid_120787 *
                                                            t_n_m_114520 +
                                                            j_130353];
            float x_130376 = x_130370 * y_130375;
            float x_130377 = y_130368 - x_130367;
            bool x_130378 = sle64((int64_t) 0, defunc_0_m_fun_arg_130357);
            bool y_130379 = slt64(defunc_0_m_fun_arg_130357, t_n_m_114520);
            bool bounds_check_130380 = x_130378 && y_130379;
            bool index_certs_130381;
            
            if (!bounds_check_130380) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_130357,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_114520, "].",
                              "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_130382 = ((float *) ext_mem_123295.mem)[gtid_120787 *
                                                            t_n_m_114520 +
                                                            defunc_0_m_fun_arg_130357];
            float y_130383 = x_130377 * y_130382;
            float x_130384 = x_130376 + y_130383;
            float y_130385 = 2.0F * u2_130365;
            float x_130386 = u3_130366 - y_130385;
            float x_130387 = u_130364 + x_130386;
            float y_130388 = ((float *) ext_mem_123294.mem)[gtid_120787 *
                                                            t_n_m_114520 +
                                                            j_130353];
            float x_130389 = x_130387 * y_130388;
            float y_130390 = i64_res_130361 * x_130389;
            float x_130391 = x_130384 + y_130390;
            float x_130392 = u3_130366 - u2_130365;
            float y_130393 = ((float *) ext_mem_123294.mem)[gtid_120787 *
                                                            t_n_m_114520 +
                                                            defunc_0_m_fun_arg_130357];
            float x_130394 = x_130392 * y_130393;
            float y_130395 = i64_res_130361 * x_130394;
            float defunc_0_f_res_130396 = x_130391 + y_130395;
            
            ((float *) mem_123301)[i_130349] = defunc_0_f_res_130396;
        }
        memmove(mem_123317.mem + gtid_120787 * n_114463 * (int64_t) 4,
                mem_123301 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123301);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131593_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131593_end -
                 futhark_mc_segmap_parloop_131593_start;
        
        ctx->futhark_mc_segmap_parloop_131593_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131593_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131593_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131591(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120786 = tid;
    int num_tasks_130347 = info.nsubtasks;
    struct futhark_mc_task_131590 *futhark_mc_task_131590 =
                                  (struct futhark_mc_task_131590 *) args;
    struct futhark_context *ctx = futhark_mc_task_131590->ctx;
    uint64_t futhark_mc_segmap_task_131591_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131591_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131590->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131590->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131590->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131590->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131590->free_i_114539;
    int64_t y_116396 = futhark_mc_task_131590->free_y_116396;
    int64_t bytes_121846 = futhark_mc_task_131590->free_bytes_121846;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_task_131590->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_task_131590->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123317 = {.desc ="mem_123317", .mem =
                                  futhark_mc_task_131590->free_mem_123317,
                                  .size =0, .references =NULL};
    int64_t iter_130348;
    struct futhark_mc_segmap_parloop_struct_131592
    futhark_mc_segmap_parloop_struct_131592;
    
    futhark_mc_segmap_parloop_struct_131592.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131592.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131592.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131592.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131592.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131592.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131592.free_y_116396 = y_116396;
    futhark_mc_segmap_parloop_struct_131592.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131592.free_ext_mem_123294 =
        ext_mem_123294.mem;
    futhark_mc_segmap_parloop_struct_131592.free_ext_mem_123295 =
        ext_mem_123295.mem;
    futhark_mc_segmap_parloop_struct_131592.free_mem_123317 = mem_123317.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131593_task;
    
    futhark_mc_segmap_parloop_131593_task.name =
        "futhark_mc_segmap_parloop_131593";
    futhark_mc_segmap_parloop_131593_task.fn = futhark_mc_segmap_parloop_131593;
    futhark_mc_segmap_parloop_131593_task.args =
        &futhark_mc_segmap_parloop_struct_131592;
    futhark_mc_segmap_parloop_131593_task.iterations = iterations;
    futhark_mc_segmap_parloop_131593_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131593_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131593_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131593_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131593_task);
    
    if (futhark_mc_segmap_parloop_131593_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131593_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131593_total_end -
                 futhark_mc_segmap_parloop_131593_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131593_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131593_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131593_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131591_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131591_end -
                 futhark_mc_segmap_task_131591_start;
        
        ctx->futhark_mc_segmap_task_131591_runs[tid]++;
        ctx->futhark_mc_segmap_task_131591_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131591_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131596 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_y_116396;
    int64_t free_bytes_121846;
    char *free_ext_mem_123294;
    char *free_ext_mem_123295;
    char *free_mem_123317;
};
struct futhark_mc_task_131599 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_y_116396;
    int64_t free_gtid_120789;
    char *free_ext_mem_123294;
    char *free_ext_mem_123295;
    char *free_mem_123298;
};
struct futhark_mc_segmap_parloop_struct_131601 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_t_jump_114470;
    int64_t free_t_n_m_114520;
    int64_t free_i_114539;
    int64_t free_y_116396;
    int64_t free_gtid_120789;
    char *free_ext_mem_123294;
    char *free_ext_mem_123295;
    char *free_mem_123298;
};
static int futhark_mc_segmap_parloop_131602(void *args, int64_t start,
                                            int64_t end, int flat_tid_120790,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131601
    *futhark_mc_segmap_parloop_struct_131601 =
    (struct futhark_mc_segmap_parloop_struct_131601 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131601->ctx;
    uint64_t futhark_mc_segmap_parloop_131602_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131602_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131601->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131601->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131601->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131601->free_i_114539;
    int64_t y_116396 = futhark_mc_segmap_parloop_struct_131601->free_y_116396;
    int64_t gtid_120789 =
            futhark_mc_segmap_parloop_struct_131601->free_gtid_120789;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_segmap_parloop_struct_131601->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_segmap_parloop_struct_131601->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123298 = {.desc ="mem_123298", .mem =
                                  futhark_mc_segmap_parloop_struct_131601->free_mem_123298,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130451 = start;
    
    for (; iter_130451 < end; iter_130451++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130453 = n_114463;
        int64_t gtid_120791 = iter_130451;
        int64_t remnant_130454 = iter_130451 - gtid_120791;
        int64_t m_v_130402 = sdiv64(gtid_120791, t_jump_114470);
        bool cond_130403 = m_v_130402 == y_116396;
        int64_t j_130404;
        
        if (cond_130403) {
            int64_t j_t_res_130452 = sub64(m_v_130402, (int64_t) 1);
            
            j_130404 = j_t_res_130452;
        } else {
            j_130404 = m_v_130402;
        }
        
        int64_t min_arg_130406 = mul64(t_jump_114470, j_130404);
        int64_t min_res_130407 = smin64(i_114539, min_arg_130406);
        int64_t defunc_0_m_fun_arg_130408 = add64((int64_t) 1, j_130404);
        int64_t min_arg_130409 = mul64(t_jump_114470,
                                       defunc_0_m_fun_arg_130408);
        int64_t min_res_130410 = smin64(i_114539, min_arg_130409);
        int64_t i64_arg_130411 = sub64(min_res_130410, min_res_130407);
        float i64_res_130412 = sitofp_i64_f32(i64_arg_130411);
        int64_t i64_arg_130413 = sub64(gtid_120791, min_res_130407);
        float i64_res_130414 = sitofp_i64_f32(i64_arg_130413);
        float u_130415 = i64_res_130414 / i64_res_130412;
        float u2_130416 = u_130415 * u_130415;
        float u3_130417 = u_130415 * u2_130416;
        float x_130418 = 2.0F * u3_130417;
        float y_130419 = 3.0F * u2_130416;
        float x_130420 = x_130418 - y_130419;
        float x_130421 = 1.0F + x_130420;
        bool x_130422 = sle64((int64_t) 0, j_130404);
        bool y_130423 = slt64(j_130404, t_n_m_114520);
        bool bounds_check_130424 = x_130422 && y_130423;
        bool index_certs_130425;
        
        if (!bounds_check_130424) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_130404,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_114520, "].",
                                   "-> #0  loess.fut:446:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_130426 = ((float *) ext_mem_123295.mem)[gtid_120789 *
                                                        t_n_m_114520 +
                                                        j_130404];
        float x_130427 = x_130421 * y_130426;
        float x_130428 = y_130419 - x_130418;
        bool x_130429 = sle64((int64_t) 0, defunc_0_m_fun_arg_130408);
        bool y_130430 = slt64(defunc_0_m_fun_arg_130408, t_n_m_114520);
        bool bounds_check_130431 = x_130429 && y_130430;
        bool index_certs_130432;
        
        if (!bounds_check_130431) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_130408,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_114520, "].",
                                   "-> #0  loess.fut:447:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_130433 = ((float *) ext_mem_123295.mem)[gtid_120789 *
                                                        t_n_m_114520 +
                                                        defunc_0_m_fun_arg_130408];
        float y_130434 = x_130428 * y_130433;
        float x_130435 = x_130427 + y_130434;
        float y_130436 = 2.0F * u2_130416;
        float x_130437 = u3_130417 - y_130436;
        float x_130438 = u_130415 + x_130437;
        float y_130439 = ((float *) ext_mem_123294.mem)[gtid_120789 *
                                                        t_n_m_114520 +
                                                        j_130404];
        float x_130440 = x_130438 * y_130439;
        float y_130441 = i64_res_130412 * x_130440;
        float x_130442 = x_130435 + y_130441;
        float x_130443 = u3_130417 - u2_130416;
        float y_130444 = ((float *) ext_mem_123294.mem)[gtid_120789 *
                                                        t_n_m_114520 +
                                                        defunc_0_m_fun_arg_130408];
        float x_130445 = x_130443 * y_130444;
        float y_130446 = i64_res_130412 * x_130445;
        float defunc_0_f_res_130447 = x_130442 + y_130446;
        
        ((float *) mem_123298.mem)[gtid_120791] = defunc_0_f_res_130447;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131602_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131602_end -
                 futhark_mc_segmap_parloop_131602_start;
        
        ctx->futhark_mc_segmap_parloop_131602_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131602_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131602_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131600(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120790 = tid;
    int num_tasks_130450 = info.nsubtasks;
    struct futhark_mc_task_131599 *futhark_mc_task_131599 =
                                  (struct futhark_mc_task_131599 *) args;
    struct futhark_context *ctx = futhark_mc_task_131599->ctx;
    uint64_t futhark_mc_segmap_task_131600_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131600_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131599->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131599->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131599->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131599->free_i_114539;
    int64_t y_116396 = futhark_mc_task_131599->free_y_116396;
    int64_t gtid_120789 = futhark_mc_task_131599->free_gtid_120789;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_task_131599->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_task_131599->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123298 = {.desc ="mem_123298", .mem =
                                  futhark_mc_task_131599->free_mem_123298,
                                  .size =0, .references =NULL};
    int64_t iter_130451;
    struct futhark_mc_segmap_parloop_struct_131601
    futhark_mc_segmap_parloop_struct_131601;
    
    futhark_mc_segmap_parloop_struct_131601.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131601.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131601.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131601.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131601.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131601.free_y_116396 = y_116396;
    futhark_mc_segmap_parloop_struct_131601.free_gtid_120789 = gtid_120789;
    futhark_mc_segmap_parloop_struct_131601.free_ext_mem_123294 =
        ext_mem_123294.mem;
    futhark_mc_segmap_parloop_struct_131601.free_ext_mem_123295 =
        ext_mem_123295.mem;
    futhark_mc_segmap_parloop_struct_131601.free_mem_123298 = mem_123298.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131602_task;
    
    futhark_mc_segmap_parloop_131602_task.name =
        "futhark_mc_segmap_parloop_131602";
    futhark_mc_segmap_parloop_131602_task.fn = futhark_mc_segmap_parloop_131602;
    futhark_mc_segmap_parloop_131602_task.args =
        &futhark_mc_segmap_parloop_struct_131601;
    futhark_mc_segmap_parloop_131602_task.iterations = iterations;
    futhark_mc_segmap_parloop_131602_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131602_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131602_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131602_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131602_task);
    
    if (futhark_mc_segmap_parloop_131602_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131602_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131602_total_end -
                 futhark_mc_segmap_parloop_131602_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131602_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131602_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131602_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131600_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131600_end -
                 futhark_mc_segmap_task_131600_start;
        
        ctx->futhark_mc_segmap_task_131600_runs[tid]++;
        ctx->futhark_mc_segmap_task_131600_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131600_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131597(void *args, int64_t start,
                                            int64_t end, int flat_tid_120788,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131596
    *futhark_mc_segmap_parloop_struct_131596 =
    (struct futhark_mc_segmap_parloop_struct_131596 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131596->ctx;
    uint64_t futhark_mc_segmap_parloop_131597_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131597_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131596->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131596->free_n_114463;
    int64_t t_jump_114470 =
            futhark_mc_segmap_parloop_struct_131596->free_t_jump_114470;
    int64_t t_n_m_114520 =
            futhark_mc_segmap_parloop_struct_131596->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131596->free_i_114539;
    int64_t y_116396 = futhark_mc_segmap_parloop_struct_131596->free_y_116396;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131596->free_bytes_121846;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_segmap_parloop_struct_131596->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_segmap_parloop_struct_131596->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123317 = {.desc ="mem_123317", .mem =
                                  futhark_mc_segmap_parloop_struct_131596->free_mem_123317,
                                  .size =0, .references =NULL};
    size_t mem_123298_cached_sizze_131598 = 0;
    char *mem_123298 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130401 = start;
    
    if (mem_123298_cached_sizze_131598 < (size_t) bytes_121846) {
        mem_123298 = realloc(mem_123298, bytes_121846);
        mem_123298_cached_sizze_131598 = bytes_121846;
    }
    for (; iter_130401 < end; iter_130401++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130448 = m_114462;
        int64_t gtid_120789 = iter_130401;
        int64_t remnant_130449 = iter_130401 - gtid_120789;
        int64_t flat_tid_120790 = (int64_t) 0;
        int32_t num_tasks_130450;
        struct futhark_mc_task_131599 futhark_mc_task_131599;
        
        futhark_mc_task_131599.ctx = ctx;
        futhark_mc_task_131599.free_n_114463 = n_114463;
        futhark_mc_task_131599.free_t_jump_114470 = t_jump_114470;
        futhark_mc_task_131599.free_t_n_m_114520 = t_n_m_114520;
        futhark_mc_task_131599.free_i_114539 = i_114539;
        futhark_mc_task_131599.free_y_116396 = y_116396;
        futhark_mc_task_131599.free_gtid_120789 = gtid_120789;
        futhark_mc_task_131599.free_ext_mem_123294 = ext_mem_123294.mem;
        futhark_mc_task_131599.free_ext_mem_123295 = ext_mem_123295.mem;
        futhark_mc_task_131599.free_mem_123298 = mem_123298;
        
        struct scheduler_segop futhark_mc_task_131599_task;
        
        futhark_mc_task_131599_task.args = &futhark_mc_task_131599;
        futhark_mc_task_131599_task.top_level_fn =
            futhark_mc_segmap_task_131600;
        futhark_mc_task_131599_task.name = "futhark_mc_segmap_task_131600";
        futhark_mc_task_131599_task.iterations = n_114463;
        futhark_mc_task_131599_task.task_time =
            &ctx->futhark_mc_segmap_task_131600_total_time;
        futhark_mc_task_131599_task.task_iter =
            &ctx->futhark_mc_segmap_task_131600_total_iter;
        futhark_mc_task_131599_task.sched = STATIC;
        futhark_mc_task_131599_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131600_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131599_task);
        
        if (futhark_mc_segmap_task_131600_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123317.mem + gtid_120789 * n_114463 * (int64_t) 4,
                mem_123298 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123298);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131597_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131597_end -
                 futhark_mc_segmap_parloop_131597_start;
        
        ctx->futhark_mc_segmap_parloop_131597_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131597_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131597_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131595(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120788 = tid;
    int num_tasks_130347 = info.nsubtasks;
    struct futhark_mc_task_131590 *futhark_mc_task_131590 =
                                  (struct futhark_mc_task_131590 *) args;
    struct futhark_context *ctx = futhark_mc_task_131590->ctx;
    uint64_t futhark_mc_segmap_nested_task_131595_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131595_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131590->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131590->free_n_114463;
    int64_t t_jump_114470 = futhark_mc_task_131590->free_t_jump_114470;
    int64_t t_n_m_114520 = futhark_mc_task_131590->free_t_n_m_114520;
    int64_t i_114539 = futhark_mc_task_131590->free_i_114539;
    int64_t y_116396 = futhark_mc_task_131590->free_y_116396;
    int64_t bytes_121846 = futhark_mc_task_131590->free_bytes_121846;
    struct memblock ext_mem_123294 = {.desc ="ext_mem_123294", .mem =
                                      futhark_mc_task_131590->free_ext_mem_123294,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123295 = {.desc ="ext_mem_123295", .mem =
                                      futhark_mc_task_131590->free_ext_mem_123295,
                                      .size =0, .references =NULL};
    struct memblock mem_123317 = {.desc ="mem_123317", .mem =
                                  futhark_mc_task_131590->free_mem_123317,
                                  .size =0, .references =NULL};
    int64_t iter_130401;
    struct futhark_mc_segmap_parloop_struct_131596
    futhark_mc_segmap_parloop_struct_131596;
    
    futhark_mc_segmap_parloop_struct_131596.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131596.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131596.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131596.free_t_jump_114470 = t_jump_114470;
    futhark_mc_segmap_parloop_struct_131596.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_segmap_parloop_struct_131596.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131596.free_y_116396 = y_116396;
    futhark_mc_segmap_parloop_struct_131596.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131596.free_ext_mem_123294 =
        ext_mem_123294.mem;
    futhark_mc_segmap_parloop_struct_131596.free_ext_mem_123295 =
        ext_mem_123295.mem;
    futhark_mc_segmap_parloop_struct_131596.free_mem_123317 = mem_123317.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131597_task;
    
    futhark_mc_segmap_parloop_131597_task.name =
        "futhark_mc_segmap_parloop_131597";
    futhark_mc_segmap_parloop_131597_task.fn = futhark_mc_segmap_parloop_131597;
    futhark_mc_segmap_parloop_131597_task.args =
        &futhark_mc_segmap_parloop_struct_131596;
    futhark_mc_segmap_parloop_131597_task.iterations = iterations;
    futhark_mc_segmap_parloop_131597_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131597_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131597_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131597_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131597_task);
    
    if (futhark_mc_segmap_parloop_131597_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131597_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131597_total_end -
                 futhark_mc_segmap_parloop_131597_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131597_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131597_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131597_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131595_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131595_end -
                 futhark_mc_segmap_nested_task_131595_start;
        
        ctx->futhark_mc_segmap_nested_task_131595_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131595_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131595_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131603 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123324;
    char *free_ext_mem_123325;
    int64_t free_ext_123329;
    char *free_mem_123361;
};
struct futhark_mc_segmap_parloop_struct_131605 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123324;
    char *free_ext_mem_123325;
    int64_t free_ext_123329;
    char *free_mem_123361;
};
static int futhark_mc_segmap_parloop_131606(void *args, int64_t start,
                                            int64_t end, int flat_tid_120842,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131605
    *futhark_mc_segmap_parloop_struct_131605 =
    (struct futhark_mc_segmap_parloop_struct_131605 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131605->ctx;
    uint64_t futhark_mc_segmap_parloop_131606_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131606_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131605->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131605->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131605->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131605->free_bytes_121846;
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_segmap_parloop_struct_131605->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_segmap_parloop_struct_131605->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 =
            futhark_mc_segmap_parloop_struct_131605->free_ext_123329;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131605->free_mem_123361,
                                  .size =0, .references =NULL};
    size_t mem_123345_cached_sizze_131607 = 0;
    char *mem_123345 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130456 = start;
    
    if (mem_123345_cached_sizze_131607 < (size_t) bytes_121846) {
        mem_123345 = realloc(mem_123345, bytes_121846);
        mem_123345_cached_sizze_131607 = bytes_121846;
    }
    for (; iter_130456 < end; iter_130456++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130468 = m_114462;
        int64_t gtid_120843 = iter_130456;
        int64_t remnant_130469 = iter_130456 - gtid_120843;
        
        for (int64_t i_130457 = 0; i_130457 < n_114463; i_130457++) {
            float x_130459 = ((float *) Y_mem_121802.mem)[gtid_120843 *
                                                          n_114463 + i_130457];
            float x_130460 = ((float *) ext_mem_123325.mem)[gtid_120843 *
                                                            n_114463 +
                                                            i_130457];
            float x_130461 = ((float *) ext_mem_123324.mem)[gtid_120843 *
                                                            ext_123329 +
                                                            i_130457];
            float x_130462 = x_130459 - x_130460;
            float defunc_2_f_res_130463 = x_130462 - x_130461;
            bool isnan_res_130464;
            
            isnan_res_130464 = futrts_isnan32(defunc_2_f_res_130463);
            
            float defunc_0_f_res_130465;
            
            if (isnan_res_130464) {
                defunc_0_f_res_130465 = NAN;
            } else {
                float abs_res_130466 = (float) fabs(defunc_2_f_res_130463);
                
                defunc_0_f_res_130465 = abs_res_130466;
            }
            ((float *) mem_123345)[i_130457] = defunc_0_f_res_130465;
        }
        memmove(mem_123361.mem + gtid_120843 * n_114463 * (int64_t) 4,
                mem_123345 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123345);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131606_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131606_end -
                 futhark_mc_segmap_parloop_131606_start;
        
        ctx->futhark_mc_segmap_parloop_131606_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131606_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131606_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131604(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120842 = tid;
    int num_tasks_130455 = info.nsubtasks;
    struct futhark_mc_task_131603 *futhark_mc_task_131603 =
                                  (struct futhark_mc_task_131603 *) args;
    struct futhark_context *ctx = futhark_mc_task_131603->ctx;
    uint64_t futhark_mc_segmap_task_131604_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131604_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131603->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131603->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131603->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131603->free_bytes_121846;
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_task_131603->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_task_131603->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 = futhark_mc_task_131603->free_ext_123329;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131603->free_mem_123361,
                                  .size =0, .references =NULL};
    int64_t iter_130456;
    struct futhark_mc_segmap_parloop_struct_131605
    futhark_mc_segmap_parloop_struct_131605;
    
    futhark_mc_segmap_parloop_struct_131605.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131605.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131605.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131605.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131605.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131605.free_ext_mem_123324 =
        ext_mem_123324.mem;
    futhark_mc_segmap_parloop_struct_131605.free_ext_mem_123325 =
        ext_mem_123325.mem;
    futhark_mc_segmap_parloop_struct_131605.free_ext_123329 = ext_123329;
    futhark_mc_segmap_parloop_struct_131605.free_mem_123361 = mem_123361.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131606_task;
    
    futhark_mc_segmap_parloop_131606_task.name =
        "futhark_mc_segmap_parloop_131606";
    futhark_mc_segmap_parloop_131606_task.fn = futhark_mc_segmap_parloop_131606;
    futhark_mc_segmap_parloop_131606_task.args =
        &futhark_mc_segmap_parloop_struct_131605;
    futhark_mc_segmap_parloop_131606_task.iterations = iterations;
    futhark_mc_segmap_parloop_131606_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131606_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131606_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131606_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131606_task);
    
    if (futhark_mc_segmap_parloop_131606_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131606_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131606_total_end -
                 futhark_mc_segmap_parloop_131606_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131606_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131606_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131606_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131604_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131604_end -
                 futhark_mc_segmap_task_131604_start;
        
        ctx->futhark_mc_segmap_task_131604_runs[tid]++;
        ctx->futhark_mc_segmap_task_131604_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131604_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131609 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123324;
    char *free_ext_mem_123325;
    int64_t free_ext_123329;
    char *free_mem_123361;
};
struct futhark_mc_task_131612 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120845;
    char *free_Y_mem_121802;
    char *free_ext_mem_123324;
    char *free_ext_mem_123325;
    int64_t free_ext_123329;
    char *free_mem_123342;
};
struct futhark_mc_segmap_parloop_struct_131614 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120845;
    char *free_Y_mem_121802;
    char *free_ext_mem_123324;
    char *free_ext_mem_123325;
    int64_t free_ext_123329;
    char *free_mem_123342;
};
static int futhark_mc_segmap_parloop_131615(void *args, int64_t start,
                                            int64_t end, int flat_tid_120846,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131614
    *futhark_mc_segmap_parloop_struct_131614 =
    (struct futhark_mc_segmap_parloop_struct_131614 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131614->ctx;
    uint64_t futhark_mc_segmap_parloop_131615_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131615_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131614->free_n_114463;
    int64_t gtid_120845 =
            futhark_mc_segmap_parloop_struct_131614->free_gtid_120845;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131614->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_segmap_parloop_struct_131614->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_segmap_parloop_struct_131614->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 =
            futhark_mc_segmap_parloop_struct_131614->free_ext_123329;
    struct memblock mem_123342 = {.desc ="mem_123342", .mem =
                                  futhark_mc_segmap_parloop_struct_131614->free_mem_123342,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130483 = start;
    
    for (; iter_130483 < end; iter_130483++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130485 = n_114463;
        int64_t gtid_120847 = iter_130483;
        int64_t remnant_130486 = iter_130483 - gtid_120847;
        float x_130472 = ((float *) Y_mem_121802.mem)[gtid_120845 * n_114463 +
                                                      gtid_120847];
        float x_130473 = ((float *) ext_mem_123325.mem)[gtid_120845 * n_114463 +
                                                        gtid_120847];
        float x_130474 = ((float *) ext_mem_123324.mem)[gtid_120845 *
                                                        ext_123329 +
                                                        gtid_120847];
        float x_130475 = x_130472 - x_130473;
        float defunc_2_f_res_130476 = x_130475 - x_130474;
        bool isnan_res_130477;
        
        isnan_res_130477 = futrts_isnan32(defunc_2_f_res_130476);
        
        float defunc_0_f_res_130478;
        
        if (isnan_res_130477) {
            defunc_0_f_res_130478 = NAN;
        } else {
            float abs_res_130484 = (float) fabs(defunc_2_f_res_130476);
            
            defunc_0_f_res_130478 = abs_res_130484;
        }
        ((float *) mem_123342.mem)[gtid_120847] = defunc_0_f_res_130478;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131615_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131615_end -
                 futhark_mc_segmap_parloop_131615_start;
        
        ctx->futhark_mc_segmap_parloop_131615_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131615_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131615_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131613(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120846 = tid;
    int num_tasks_130482 = info.nsubtasks;
    struct futhark_mc_task_131612 *futhark_mc_task_131612 =
                                  (struct futhark_mc_task_131612 *) args;
    struct futhark_context *ctx = futhark_mc_task_131612->ctx;
    uint64_t futhark_mc_segmap_task_131613_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131613_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131612->free_n_114463;
    int64_t gtid_120845 = futhark_mc_task_131612->free_gtid_120845;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131612->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_task_131612->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_task_131612->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 = futhark_mc_task_131612->free_ext_123329;
    struct memblock mem_123342 = {.desc ="mem_123342", .mem =
                                  futhark_mc_task_131612->free_mem_123342,
                                  .size =0, .references =NULL};
    int64_t iter_130483;
    struct futhark_mc_segmap_parloop_struct_131614
    futhark_mc_segmap_parloop_struct_131614;
    
    futhark_mc_segmap_parloop_struct_131614.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131614.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131614.free_gtid_120845 = gtid_120845;
    futhark_mc_segmap_parloop_struct_131614.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131614.free_ext_mem_123324 =
        ext_mem_123324.mem;
    futhark_mc_segmap_parloop_struct_131614.free_ext_mem_123325 =
        ext_mem_123325.mem;
    futhark_mc_segmap_parloop_struct_131614.free_ext_123329 = ext_123329;
    futhark_mc_segmap_parloop_struct_131614.free_mem_123342 = mem_123342.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131615_task;
    
    futhark_mc_segmap_parloop_131615_task.name =
        "futhark_mc_segmap_parloop_131615";
    futhark_mc_segmap_parloop_131615_task.fn = futhark_mc_segmap_parloop_131615;
    futhark_mc_segmap_parloop_131615_task.args =
        &futhark_mc_segmap_parloop_struct_131614;
    futhark_mc_segmap_parloop_131615_task.iterations = iterations;
    futhark_mc_segmap_parloop_131615_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131615_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131615_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131615_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131615_task);
    
    if (futhark_mc_segmap_parloop_131615_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131615_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131615_total_end -
                 futhark_mc_segmap_parloop_131615_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131615_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131615_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131615_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131613_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131613_end -
                 futhark_mc_segmap_task_131613_start;
        
        ctx->futhark_mc_segmap_task_131613_runs[tid]++;
        ctx->futhark_mc_segmap_task_131613_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131613_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131610(void *args, int64_t start,
                                            int64_t end, int flat_tid_120844,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131609
    *futhark_mc_segmap_parloop_struct_131609 =
    (struct futhark_mc_segmap_parloop_struct_131609 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131609->ctx;
    uint64_t futhark_mc_segmap_parloop_131610_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131610_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131609->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131609->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131609->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131609->free_bytes_121846;
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_segmap_parloop_struct_131609->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_segmap_parloop_struct_131609->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 =
            futhark_mc_segmap_parloop_struct_131609->free_ext_123329;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131609->free_mem_123361,
                                  .size =0, .references =NULL};
    size_t mem_123342_cached_sizze_131611 = 0;
    char *mem_123342 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130471 = start;
    
    if (mem_123342_cached_sizze_131611 < (size_t) bytes_121846) {
        mem_123342 = realloc(mem_123342, bytes_121846);
        mem_123342_cached_sizze_131611 = bytes_121846;
    }
    for (; iter_130471 < end; iter_130471++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130480 = m_114462;
        int64_t gtid_120845 = iter_130471;
        int64_t remnant_130481 = iter_130471 - gtid_120845;
        int64_t flat_tid_120846 = (int64_t) 0;
        int32_t num_tasks_130482;
        struct futhark_mc_task_131612 futhark_mc_task_131612;
        
        futhark_mc_task_131612.ctx = ctx;
        futhark_mc_task_131612.free_n_114463 = n_114463;
        futhark_mc_task_131612.free_gtid_120845 = gtid_120845;
        futhark_mc_task_131612.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_131612.free_ext_mem_123324 = ext_mem_123324.mem;
        futhark_mc_task_131612.free_ext_mem_123325 = ext_mem_123325.mem;
        futhark_mc_task_131612.free_ext_123329 = ext_123329;
        futhark_mc_task_131612.free_mem_123342 = mem_123342;
        
        struct scheduler_segop futhark_mc_task_131612_task;
        
        futhark_mc_task_131612_task.args = &futhark_mc_task_131612;
        futhark_mc_task_131612_task.top_level_fn =
            futhark_mc_segmap_task_131613;
        futhark_mc_task_131612_task.name = "futhark_mc_segmap_task_131613";
        futhark_mc_task_131612_task.iterations = n_114463;
        futhark_mc_task_131612_task.task_time =
            &ctx->futhark_mc_segmap_task_131613_total_time;
        futhark_mc_task_131612_task.task_iter =
            &ctx->futhark_mc_segmap_task_131613_total_iter;
        futhark_mc_task_131612_task.sched = STATIC;
        futhark_mc_task_131612_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131613_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131612_task);
        
        if (futhark_mc_segmap_task_131613_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123361.mem + gtid_120845 * n_114463 * (int64_t) 4,
                mem_123342 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123342);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131610_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131610_end -
                 futhark_mc_segmap_parloop_131610_start;
        
        ctx->futhark_mc_segmap_parloop_131610_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131610_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131610_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131608(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120844 = tid;
    int num_tasks_130455 = info.nsubtasks;
    struct futhark_mc_task_131603 *futhark_mc_task_131603 =
                                  (struct futhark_mc_task_131603 *) args;
    struct futhark_context *ctx = futhark_mc_task_131603->ctx;
    uint64_t futhark_mc_segmap_nested_task_131608_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131608_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131603->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131603->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131603->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131603->free_bytes_121846;
    struct memblock ext_mem_123324 = {.desc ="ext_mem_123324", .mem =
                                      futhark_mc_task_131603->free_ext_mem_123324,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123325 = {.desc ="ext_mem_123325", .mem =
                                      futhark_mc_task_131603->free_ext_mem_123325,
                                      .size =0, .references =NULL};
    int64_t ext_123329 = futhark_mc_task_131603->free_ext_123329;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131603->free_mem_123361,
                                  .size =0, .references =NULL};
    int64_t iter_130471;
    struct futhark_mc_segmap_parloop_struct_131609
    futhark_mc_segmap_parloop_struct_131609;
    
    futhark_mc_segmap_parloop_struct_131609.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131609.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131609.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131609.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131609.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131609.free_ext_mem_123324 =
        ext_mem_123324.mem;
    futhark_mc_segmap_parloop_struct_131609.free_ext_mem_123325 =
        ext_mem_123325.mem;
    futhark_mc_segmap_parloop_struct_131609.free_ext_123329 = ext_123329;
    futhark_mc_segmap_parloop_struct_131609.free_mem_123361 = mem_123361.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131610_task;
    
    futhark_mc_segmap_parloop_131610_task.name =
        "futhark_mc_segmap_parloop_131610";
    futhark_mc_segmap_parloop_131610_task.fn = futhark_mc_segmap_parloop_131610;
    futhark_mc_segmap_parloop_131610_task.args =
        &futhark_mc_segmap_parloop_struct_131609;
    futhark_mc_segmap_parloop_131610_task.iterations = iterations;
    futhark_mc_segmap_parloop_131610_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131610_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131610_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131610_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131610_task);
    
    if (futhark_mc_segmap_parloop_131610_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131610_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131610_total_end -
                 futhark_mc_segmap_parloop_131610_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131610_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131610_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131610_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131608_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131608_end -
                 futhark_mc_segmap_nested_task_131608_start;
        
        ctx->futhark_mc_segmap_nested_task_131608_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131608_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131608_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131616 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123383;
};
struct futhark_mc_segmap_parloop_struct_131618 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123383;
};
static int futhark_mc_segmap_parloop_131619(void *args, int64_t start,
                                            int64_t end, int flat_tid_120860,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131618
    *futhark_mc_segmap_parloop_struct_131618 =
    (struct futhark_mc_segmap_parloop_struct_131618 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131618->ctx;
    uint64_t futhark_mc_segmap_parloop_131619_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131619_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131618->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131618->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131618->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131618->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131618->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_segmap_parloop_struct_131618->free_mem_123383,
                                  .size =0, .references =NULL};
    size_t mem_123367_cached_sizze_131620 = 0;
    char *mem_123367 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130488 = start;
    
    if (mem_123367_cached_sizze_131620 < (size_t) bytes_121846) {
        mem_123367 = realloc(mem_123367, bytes_121846);
        mem_123367_cached_sizze_131620 = bytes_121846;
    }
    for (; iter_130488 < end; iter_130488++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130499 = m_114462;
        int64_t gtid_120861 = iter_130488;
        int64_t remnant_130500 = iter_130488 - gtid_120861;
        
        for (int64_t i_130489 = 0; i_130489 < n_114463; i_130489++) {
            int64_t x_130491 = ((int64_t *) mem_121842.mem)[gtid_120861 *
                                                            n_114463 +
                                                            i_130489];
            bool cond_130492 = sle64((int64_t) 0, x_130491);
            float defunc_0_f_res_130493;
            
            if (cond_130492) {
                bool y_130494 = slt64(x_130491, n_114463);
                bool bounds_check_130495 = cond_130492 && y_130494;
                bool index_certs_130496;
                
                if (!bounds_check_130495) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_130491,
                                  "] out of bounds for array of shape [",
                                  (long long) n_114463, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_130497 =
                      ((float *) mem_123361.mem)[gtid_120861 * n_114463 +
                                                 x_130491];
                
                defunc_0_f_res_130493 = defunc_0_f_res_t_res_130497;
            } else {
                defunc_0_f_res_130493 = INFINITY;
            }
            ((float *) mem_123367)[i_130489] = defunc_0_f_res_130493;
        }
        memmove(mem_123383.mem + gtid_120861 * n_114463 * (int64_t) 4,
                mem_123367 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123367);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131619_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131619_end -
                 futhark_mc_segmap_parloop_131619_start;
        
        ctx->futhark_mc_segmap_parloop_131619_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131619_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131619_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131617(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120860 = tid;
    int num_tasks_130487 = info.nsubtasks;
    struct futhark_mc_task_131616 *futhark_mc_task_131616 =
                                  (struct futhark_mc_task_131616 *) args;
    struct futhark_context *ctx = futhark_mc_task_131616->ctx;
    uint64_t futhark_mc_segmap_task_131617_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131617_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131616->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131616->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131616->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131616->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131616->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_task_131616->free_mem_123383,
                                  .size =0, .references =NULL};
    int64_t iter_130488;
    struct futhark_mc_segmap_parloop_struct_131618
    futhark_mc_segmap_parloop_struct_131618;
    
    futhark_mc_segmap_parloop_struct_131618.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131618.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131618.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131618.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131618.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131618.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131618.free_mem_123383 = mem_123383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131619_task;
    
    futhark_mc_segmap_parloop_131619_task.name =
        "futhark_mc_segmap_parloop_131619";
    futhark_mc_segmap_parloop_131619_task.fn = futhark_mc_segmap_parloop_131619;
    futhark_mc_segmap_parloop_131619_task.args =
        &futhark_mc_segmap_parloop_struct_131618;
    futhark_mc_segmap_parloop_131619_task.iterations = iterations;
    futhark_mc_segmap_parloop_131619_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131619_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131619_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131619_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131619_task);
    
    if (futhark_mc_segmap_parloop_131619_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131619_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131619_total_end -
                 futhark_mc_segmap_parloop_131619_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131619_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131619_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131619_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131617_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131617_end -
                 futhark_mc_segmap_task_131617_start;
        
        ctx->futhark_mc_segmap_task_131617_runs[tid]++;
        ctx->futhark_mc_segmap_task_131617_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131617_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131622 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_mem_121842;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123383;
};
struct futhark_mc_task_131625 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120863;
    char *free_mem_121842;
    char *free_mem_123361;
    char *free_mem_123364;
};
struct futhark_mc_segmap_parloop_struct_131627 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120863;
    char *free_mem_121842;
    char *free_mem_123361;
    char *free_mem_123364;
};
static int futhark_mc_segmap_parloop_131628(void *args, int64_t start,
                                            int64_t end, int flat_tid_120864,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131627
    *futhark_mc_segmap_parloop_struct_131627 =
    (struct futhark_mc_segmap_parloop_struct_131627 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131627->ctx;
    uint64_t futhark_mc_segmap_parloop_131628_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131628_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131627->free_n_114463;
    int64_t gtid_120863 =
            futhark_mc_segmap_parloop_struct_131627->free_gtid_120863;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131627->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131627->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123364 = {.desc ="mem_123364", .mem =
                                  futhark_mc_segmap_parloop_struct_131627->free_mem_123364,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130513 = start;
    
    for (; iter_130513 < end; iter_130513++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130518 = n_114463;
        int64_t gtid_120865 = iter_130513;
        int64_t remnant_130519 = iter_130513 - gtid_120865;
        int64_t x_130503 = ((int64_t *) mem_121842.mem)[gtid_120863 * n_114463 +
                                                        gtid_120865];
        bool cond_130504 = sle64((int64_t) 0, x_130503);
        float defunc_0_f_res_130505;
        
        if (cond_130504) {
            bool y_130514 = slt64(x_130503, n_114463);
            bool bounds_check_130515 = cond_130504 && y_130514;
            bool index_certs_130516;
            
            if (!bounds_check_130515) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_130503,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_130517 =
                  ((float *) mem_123361.mem)[gtid_120863 * n_114463 + x_130503];
            
            defunc_0_f_res_130505 = defunc_0_f_res_t_res_130517;
        } else {
            defunc_0_f_res_130505 = INFINITY;
        }
        ((float *) mem_123364.mem)[gtid_120865] = defunc_0_f_res_130505;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131628_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131628_end -
                 futhark_mc_segmap_parloop_131628_start;
        
        ctx->futhark_mc_segmap_parloop_131628_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131628_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131628_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131626(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120864 = tid;
    int num_tasks_130512 = info.nsubtasks;
    struct futhark_mc_task_131625 *futhark_mc_task_131625 =
                                  (struct futhark_mc_task_131625 *) args;
    struct futhark_context *ctx = futhark_mc_task_131625->ctx;
    uint64_t futhark_mc_segmap_task_131626_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131626_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131625->free_n_114463;
    int64_t gtid_120863 = futhark_mc_task_131625->free_gtid_120863;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131625->free_mem_121842,
                                  .size =0, .references =NULL};
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131625->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123364 = {.desc ="mem_123364", .mem =
                                  futhark_mc_task_131625->free_mem_123364,
                                  .size =0, .references =NULL};
    int64_t iter_130513;
    struct futhark_mc_segmap_parloop_struct_131627
    futhark_mc_segmap_parloop_struct_131627;
    
    futhark_mc_segmap_parloop_struct_131627.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131627.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131627.free_gtid_120863 = gtid_120863;
    futhark_mc_segmap_parloop_struct_131627.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131627.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131627.free_mem_123364 = mem_123364.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131628_task;
    
    futhark_mc_segmap_parloop_131628_task.name =
        "futhark_mc_segmap_parloop_131628";
    futhark_mc_segmap_parloop_131628_task.fn = futhark_mc_segmap_parloop_131628;
    futhark_mc_segmap_parloop_131628_task.args =
        &futhark_mc_segmap_parloop_struct_131627;
    futhark_mc_segmap_parloop_131628_task.iterations = iterations;
    futhark_mc_segmap_parloop_131628_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131628_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131628_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131628_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131628_task);
    
    if (futhark_mc_segmap_parloop_131628_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131628_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131628_total_end -
                 futhark_mc_segmap_parloop_131628_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131628_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131628_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131628_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131626_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131626_end -
                 futhark_mc_segmap_task_131626_start;
        
        ctx->futhark_mc_segmap_task_131626_runs[tid]++;
        ctx->futhark_mc_segmap_task_131626_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131626_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131623(void *args, int64_t start,
                                            int64_t end, int flat_tid_120862,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131622
    *futhark_mc_segmap_parloop_struct_131622 =
    (struct futhark_mc_segmap_parloop_struct_131622 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131622->ctx;
    uint64_t futhark_mc_segmap_parloop_131623_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131623_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131622->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131622->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_segmap_parloop_struct_131622->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131622->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131622->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_segmap_parloop_struct_131622->free_mem_123383,
                                  .size =0, .references =NULL};
    size_t mem_123364_cached_sizze_131624 = 0;
    char *mem_123364 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130502 = start;
    
    if (mem_123364_cached_sizze_131624 < (size_t) bytes_121846) {
        mem_123364 = realloc(mem_123364, bytes_121846);
        mem_123364_cached_sizze_131624 = bytes_121846;
    }
    for (; iter_130502 < end; iter_130502++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130510 = m_114462;
        int64_t gtid_120863 = iter_130502;
        int64_t remnant_130511 = iter_130502 - gtid_120863;
        int64_t flat_tid_120864 = (int64_t) 0;
        int32_t num_tasks_130512;
        struct futhark_mc_task_131625 futhark_mc_task_131625;
        
        futhark_mc_task_131625.ctx = ctx;
        futhark_mc_task_131625.free_n_114463 = n_114463;
        futhark_mc_task_131625.free_gtid_120863 = gtid_120863;
        futhark_mc_task_131625.free_mem_121842 = mem_121842.mem;
        futhark_mc_task_131625.free_mem_123361 = mem_123361.mem;
        futhark_mc_task_131625.free_mem_123364 = mem_123364;
        
        struct scheduler_segop futhark_mc_task_131625_task;
        
        futhark_mc_task_131625_task.args = &futhark_mc_task_131625;
        futhark_mc_task_131625_task.top_level_fn =
            futhark_mc_segmap_task_131626;
        futhark_mc_task_131625_task.name = "futhark_mc_segmap_task_131626";
        futhark_mc_task_131625_task.iterations = n_114463;
        futhark_mc_task_131625_task.task_time =
            &ctx->futhark_mc_segmap_task_131626_total_time;
        futhark_mc_task_131625_task.task_iter =
            &ctx->futhark_mc_segmap_task_131626_total_iter;
        futhark_mc_task_131625_task.sched = STATIC;
        futhark_mc_task_131625_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131626_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131625_task);
        
        if (futhark_mc_segmap_task_131626_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123383.mem + gtid_120863 * n_114463 * (int64_t) 4,
                mem_123364 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123364);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131623_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131623_end -
                 futhark_mc_segmap_parloop_131623_start;
        
        ctx->futhark_mc_segmap_parloop_131623_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131623_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131623_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131621(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120862 = tid;
    int num_tasks_130487 = info.nsubtasks;
    struct futhark_mc_task_131616 *futhark_mc_task_131616 =
                                  (struct futhark_mc_task_131616 *) args;
    struct futhark_context *ctx = futhark_mc_task_131616->ctx;
    uint64_t futhark_mc_segmap_nested_task_131621_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131621_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131616->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131616->free_n_114463;
    struct memblock mem_121842 = {.desc ="mem_121842", .mem =
                                  futhark_mc_task_131616->free_mem_121842,
                                  .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131616->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131616->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_task_131616->free_mem_123383,
                                  .size =0, .references =NULL};
    int64_t iter_130502;
    struct futhark_mc_segmap_parloop_struct_131622
    futhark_mc_segmap_parloop_struct_131622;
    
    futhark_mc_segmap_parloop_struct_131622.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131622.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131622.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131622.free_mem_121842 = mem_121842.mem;
    futhark_mc_segmap_parloop_struct_131622.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131622.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131622.free_mem_123383 = mem_123383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131623_task;
    
    futhark_mc_segmap_parloop_131623_task.name =
        "futhark_mc_segmap_parloop_131623";
    futhark_mc_segmap_parloop_131623_task.fn = futhark_mc_segmap_parloop_131623;
    futhark_mc_segmap_parloop_131623_task.args =
        &futhark_mc_segmap_parloop_struct_131622;
    futhark_mc_segmap_parloop_131623_task.iterations = iterations;
    futhark_mc_segmap_parloop_131623_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131623_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131623_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131623_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131623_task);
    
    if (futhark_mc_segmap_parloop_131623_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131623_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131623_total_end -
                 futhark_mc_segmap_parloop_131623_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131623_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131623_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131623_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131621_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131621_end -
                 futhark_mc_segmap_nested_task_131621_start;
        
        ctx->futhark_mc_segmap_nested_task_131621_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131621_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131621_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131629 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    int32_t free_iters_116480;
    int64_t free_bytes_121803;
    int64_t free_bytes_121846;
    char *free_mem_123383;
    char *free_mem_123537;
    int64_t free_double_buffer_sizze_123681;
    int64_t free_double_buffer_sizze_123685;
};
struct futhark_mc_segmap_parloop_struct_131631 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    int32_t free_iters_116480;
    int64_t free_bytes_121803;
    int64_t free_bytes_121846;
    char *free_mem_123383;
    char *free_mem_123537;
    int64_t free_double_buffer_sizze_123685;
};
static int futhark_mc_segmap_parloop_131632(void *args, int64_t start,
                                            int64_t end, int flat_tid_120876,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131631
    *futhark_mc_segmap_parloop_struct_131631 =
    (struct futhark_mc_segmap_parloop_struct_131631 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131631->ctx;
    uint64_t futhark_mc_segmap_parloop_131632_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131632_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131631->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131631->free_n_114463;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131631->free_i_114539;
    int32_t iters_116480 =
            futhark_mc_segmap_parloop_struct_131631->free_iters_116480;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_131631->free_bytes_121803;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131631->free_bytes_121846;
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_segmap_parloop_struct_131631->free_mem_123383,
                                  .size =0, .references =NULL};
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_segmap_parloop_struct_131631->free_mem_123537,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123685 =
            futhark_mc_segmap_parloop_struct_131631->free_double_buffer_sizze_123685;
    size_t mem_123441_cached_sizze_131633 = 0;
    char *mem_123441 = NULL;
    size_t mem_123444_cached_sizze_131634 = 0;
    char *mem_123444 = NULL;
    size_t mem_123447_cached_sizze_131635 = 0;
    char *mem_123447 = NULL;
    size_t mem_123450_cached_sizze_131636 = 0;
    char *mem_123450 = NULL;
    size_t mem_123453_cached_sizze_131637 = 0;
    char *mem_123453 = NULL;
    size_t mem_123516_cached_sizze_131638 = 0;
    char *mem_123516 = NULL;
    size_t double_buffer_mem_123683_cached_sizze_131639 = 0;
    char *double_buffer_mem_123683 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130521 = start;
    
    if (mem_123441_cached_sizze_131633 < (size_t) bytes_121803) {
        mem_123441 = realloc(mem_123441, bytes_121803);
        mem_123441_cached_sizze_131633 = bytes_121803;
    }
    if (mem_123444_cached_sizze_131634 < (size_t) bytes_121803) {
        mem_123444 = realloc(mem_123444, bytes_121803);
        mem_123444_cached_sizze_131634 = bytes_121803;
    }
    if (mem_123447_cached_sizze_131635 < (size_t) bytes_121803) {
        mem_123447 = realloc(mem_123447, bytes_121803);
        mem_123447_cached_sizze_131635 = bytes_121803;
    }
    if (mem_123450_cached_sizze_131636 < (size_t) bytes_121803) {
        mem_123450 = realloc(mem_123450, bytes_121803);
        mem_123450_cached_sizze_131636 = bytes_121803;
    }
    if (mem_123453_cached_sizze_131637 < (size_t) bytes_121846) {
        mem_123453 = realloc(mem_123453, bytes_121846);
        mem_123453_cached_sizze_131637 = bytes_121846;
    }
    if (double_buffer_mem_123683_cached_sizze_131639 <
        (size_t) double_buffer_sizze_123685) {
        double_buffer_mem_123683 = realloc(double_buffer_mem_123683,
                                           double_buffer_sizze_123685);
        double_buffer_mem_123683_cached_sizze_131639 =
            double_buffer_sizze_123685;
    }
    if (mem_123516_cached_sizze_131638 < (size_t) bytes_121846) {
        mem_123516 = realloc(mem_123516, bytes_121846);
        mem_123516_cached_sizze_131638 = bytes_121846;
    }
    for (; iter_130521 < end; iter_130521++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130625 = m_114462;
        int64_t gtid_120877 = iter_130521;
        int64_t remnant_130626 = iter_130521 - gtid_120877;
        
        memmove(double_buffer_mem_123683 + (int64_t) 0, mem_123383.mem +
                gtid_120877 * n_114463 * (int64_t) 4, n_114463 * (int64_t) 4);
        for (int32_t i_130522 = 0; i_130522 < iters_116480; i_130522++) {
            int32_t defunc_2_radix_sort_step_arg_130524 = mul32(2, i_130522);
            int32_t defunc_0_get_bit_arg_130525 = add32(1,
                                                        defunc_2_radix_sort_step_arg_130524);
            bool cond_f_res_130526 = defunc_0_get_bit_arg_130525 == 31;
            bool cond_f_res_130527 = defunc_2_radix_sort_step_arg_130524 == 31;
            int64_t discard_130533;
            int64_t discard_130534;
            int64_t discard_130535;
            int64_t discard_130536;
            int64_t scanacc_130543;
            int64_t scanacc_130544;
            int64_t scanacc_130545;
            int64_t scanacc_130546;
            
            scanacc_130543 = (int64_t) 0;
            scanacc_130544 = (int64_t) 0;
            scanacc_130545 = (int64_t) 0;
            scanacc_130546 = (int64_t) 0;
            for (int64_t i_130542 = 0; i_130542 < n_114463; i_130542++) {
                float x_130552 = ((float *) double_buffer_mem_123683)[i_130542];
                int32_t i32_arg_130553;
                
                i32_arg_130553 = futrts_to_bits32(x_130552);
                
                int32_t unsign_arg_130554 = ashr32(i32_arg_130553,
                                                   defunc_0_get_bit_arg_130525);
                int32_t unsign_arg_130555 = 1 & unsign_arg_130554;
                int32_t unsign_arg_130556 = ashr32(i32_arg_130553, 31);
                int32_t unsign_arg_130557 = 1 & unsign_arg_130556;
                bool cond_130558 = unsign_arg_130557 == 1;
                bool x_130559 = !cond_130558;
                bool y_130560 = cond_f_res_130526 && x_130559;
                bool cond_130561 = cond_130558 || y_130560;
                int32_t defunc_1_get_bit_res_130562;
                
                if (cond_130561) {
                    int32_t defunc_1_get_bit_res_t_res_130563 = 1 ^
                            unsign_arg_130555;
                    
                    defunc_1_get_bit_res_130562 =
                        defunc_1_get_bit_res_t_res_130563;
                } else {
                    defunc_1_get_bit_res_130562 = unsign_arg_130555;
                }
                
                int32_t x_130564 = mul32(2, defunc_1_get_bit_res_130562);
                int32_t unsign_arg_130565 = ashr32(i32_arg_130553,
                                                   defunc_2_radix_sort_step_arg_130524);
                int32_t unsign_arg_130566 = 1 & unsign_arg_130565;
                bool y_130567 = cond_f_res_130527 && x_130559;
                bool cond_130568 = cond_130558 || y_130567;
                int32_t defunc_1_get_bit_res_130569;
                
                if (cond_130568) {
                    int32_t defunc_1_get_bit_res_t_res_130570 = 1 ^
                            unsign_arg_130566;
                    
                    defunc_1_get_bit_res_130569 =
                        defunc_1_get_bit_res_t_res_130570;
                } else {
                    defunc_1_get_bit_res_130569 = unsign_arg_130566;
                }
                
                int32_t defunc_0_f_res_130571 = add32(x_130564,
                                                      defunc_1_get_bit_res_130569);
                bool cond_130572 = defunc_0_f_res_130571 == 0;
                int64_t defunc_0_f_res_130573 = btoi_bool_i64(cond_130572);
                int64_t defunc_0_f_res_130574;
                int64_t defunc_0_f_res_130575;
                int64_t defunc_0_f_res_130576;
                
                if (cond_130572) {
                    defunc_0_f_res_130574 = (int64_t) 0;
                    defunc_0_f_res_130575 = (int64_t) 0;
                    defunc_0_f_res_130576 = (int64_t) 0;
                } else {
                    bool cond_130577 = defunc_0_f_res_130571 == 1;
                    int64_t defunc_0_f_res_f_res_130578 =
                            btoi_bool_i64(cond_130577);
                    int64_t defunc_0_f_res_f_res_130579;
                    int64_t defunc_0_f_res_f_res_130580;
                    
                    if (cond_130577) {
                        defunc_0_f_res_f_res_130579 = (int64_t) 0;
                        defunc_0_f_res_f_res_130580 = (int64_t) 0;
                    } else {
                        bool cond_130581 = defunc_0_f_res_130571 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_130582 =
                                btoi_bool_i64(cond_130581);
                        bool cond_neg_130583 = !cond_130581;
                        int64_t defunc_0_f_res_f_res_f_res_130584 =
                                btoi_bool_i64(cond_neg_130583);
                        
                        defunc_0_f_res_f_res_130579 =
                            defunc_0_f_res_f_res_f_res_130582;
                        defunc_0_f_res_f_res_130580 =
                            defunc_0_f_res_f_res_f_res_130584;
                    }
                    defunc_0_f_res_130574 = defunc_0_f_res_f_res_130578;
                    defunc_0_f_res_130575 = defunc_0_f_res_f_res_130579;
                    defunc_0_f_res_130576 = defunc_0_f_res_f_res_130580;
                }
                
                int64_t defunc_1_op_res_130585 = add64(defunc_0_f_res_130573,
                                                       scanacc_130543);
                int64_t defunc_1_op_res_130586 = add64(defunc_0_f_res_130574,
                                                       scanacc_130544);
                int64_t defunc_1_op_res_130587 = add64(defunc_0_f_res_130575,
                                                       scanacc_130545);
                int64_t defunc_1_op_res_130588 = add64(defunc_0_f_res_130576,
                                                       scanacc_130546);
                
                ((int64_t *) mem_123441)[i_130542] = defunc_1_op_res_130585;
                ((int64_t *) mem_123444)[i_130542] = defunc_1_op_res_130586;
                ((int64_t *) mem_123447)[i_130542] = defunc_1_op_res_130587;
                ((int64_t *) mem_123450)[i_130542] = defunc_1_op_res_130588;
                ((int32_t *) mem_123453)[i_130542] = defunc_0_f_res_130571;
                
                int64_t scanacc_tmp_130628 = defunc_1_op_res_130585;
                int64_t scanacc_tmp_130629 = defunc_1_op_res_130586;
                int64_t scanacc_tmp_130630 = defunc_1_op_res_130587;
                int64_t scanacc_tmp_130631 = defunc_1_op_res_130588;
                
                scanacc_130543 = scanacc_tmp_130628;
                scanacc_130544 = scanacc_tmp_130629;
                scanacc_130545 = scanacc_tmp_130630;
                scanacc_130546 = scanacc_tmp_130631;
            }
            discard_130533 = scanacc_130543;
            discard_130534 = scanacc_130544;
            discard_130535 = scanacc_130545;
            discard_130536 = scanacc_130546;
            
            int64_t last_res_130594 = ((int64_t *) mem_123441)[i_114539];
            int64_t last_res_130595 = ((int64_t *) mem_123444)[i_114539];
            int64_t last_res_130596 = ((int64_t *) mem_123447)[i_114539];
            
            memmove(mem_123516 + (int64_t) 0, double_buffer_mem_123683 +
                    (int64_t) 0, n_114463 * (int64_t) 4);
            for (int64_t write_iter_130599 = 0; write_iter_130599 < n_114463;
                 write_iter_130599++) {
                int32_t write_iv_130601 =
                        ((int32_t *) mem_123453)[write_iter_130599];
                bool match_lit_130602 = 0 == write_iv_130601;
                int64_t defunc_1_f_res_130603;
                
                if (match_lit_130602) {
                    int64_t write_iv_130604 =
                            ((int64_t *) mem_123441)[write_iter_130599];
                    int64_t case_res_130605 = sub64(write_iv_130604,
                                                    (int64_t) 1);
                    
                    defunc_1_f_res_130603 = case_res_130605;
                } else {
                    bool match_lit_130606 = 1 == write_iv_130601;
                    int64_t x_130607;
                    
                    if (match_lit_130606) {
                        int64_t write_iv_130608 =
                                ((int64_t *) mem_123444)[write_iter_130599];
                        int64_t x_130609 = add64(last_res_130594,
                                                 write_iv_130608);
                        int64_t case_res_130610 = sub64(x_130609, (int64_t) 1);
                        
                        x_130607 = case_res_130610;
                    } else {
                        bool match_lit_130611 = 2 == write_iv_130601;
                        int64_t x_130612;
                        
                        if (match_lit_130611) {
                            int64_t write_iv_130613 =
                                    ((int64_t *) mem_123447)[write_iter_130599];
                            int64_t x_130614 = add64(last_res_130594,
                                                     last_res_130595);
                            int64_t x_130615 = add64(x_130614, write_iv_130613);
                            int64_t case_res_130616 = sub64(x_130615,
                                                            (int64_t) 1);
                            
                            x_130612 = case_res_130616;
                        } else {
                            int64_t write_iv_130617 =
                                    ((int64_t *) mem_123450)[write_iter_130599];
                            int64_t x_130618 = add64(last_res_130594,
                                                     last_res_130595);
                            int64_t x_130619 = add64(last_res_130596, x_130618);
                            int64_t x_130620 = add64(x_130619, write_iv_130617);
                            int64_t defunc_1_f_res_res_130621 = sub64(x_130620,
                                                                      (int64_t) 1);
                            
                            x_130612 = defunc_1_f_res_res_130621;
                        }
                        x_130607 = x_130612;
                    }
                    defunc_1_f_res_130603 = x_130607;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_130603) &&
                    slt64(defunc_1_f_res_130603, n_114463)) {
                    memmove(mem_123516 + defunc_1_f_res_130603 * (int64_t) 4,
                            double_buffer_mem_123683 + write_iter_130599 *
                            (int64_t) 4, (int64_t) 4);
                }
            }
            memmove(double_buffer_mem_123683 + (int64_t) 0, mem_123516 +
                    (int64_t) 0, n_114463 * (int64_t) 4);
        }
        memmove(mem_123537.mem + gtid_120877 * n_114463 * (int64_t) 4,
                double_buffer_mem_123683 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123441);
    free(mem_123444);
    free(mem_123447);
    free(mem_123450);
    free(mem_123453);
    free(mem_123516);
    free(double_buffer_mem_123683);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131632_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131632_end -
                 futhark_mc_segmap_parloop_131632_start;
        
        ctx->futhark_mc_segmap_parloop_131632_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131632_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131632_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131630(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120876 = tid;
    int num_tasks_130520 = info.nsubtasks;
    struct futhark_mc_task_131629 *futhark_mc_task_131629 =
                                  (struct futhark_mc_task_131629 *) args;
    struct futhark_context *ctx = futhark_mc_task_131629->ctx;
    uint64_t futhark_mc_segmap_task_131630_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131630_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131629->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131629->free_n_114463;
    int64_t i_114539 = futhark_mc_task_131629->free_i_114539;
    int32_t iters_116480 = futhark_mc_task_131629->free_iters_116480;
    int64_t bytes_121803 = futhark_mc_task_131629->free_bytes_121803;
    int64_t bytes_121846 = futhark_mc_task_131629->free_bytes_121846;
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_task_131629->free_mem_123383,
                                  .size =0, .references =NULL};
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_task_131629->free_mem_123537,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123681 =
            futhark_mc_task_131629->free_double_buffer_sizze_123681;
    int64_t double_buffer_sizze_123685 =
            futhark_mc_task_131629->free_double_buffer_sizze_123685;
    int64_t iter_130521;
    struct futhark_mc_segmap_parloop_struct_131631
    futhark_mc_segmap_parloop_struct_131631;
    
    futhark_mc_segmap_parloop_struct_131631.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131631.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131631.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131631.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131631.free_iters_116480 = iters_116480;
    futhark_mc_segmap_parloop_struct_131631.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_131631.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131631.free_mem_123383 = mem_123383.mem;
    futhark_mc_segmap_parloop_struct_131631.free_mem_123537 = mem_123537.mem;
    futhark_mc_segmap_parloop_struct_131631.free_double_buffer_sizze_123685 =
        double_buffer_sizze_123685;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131632_task;
    
    futhark_mc_segmap_parloop_131632_task.name =
        "futhark_mc_segmap_parloop_131632";
    futhark_mc_segmap_parloop_131632_task.fn = futhark_mc_segmap_parloop_131632;
    futhark_mc_segmap_parloop_131632_task.args =
        &futhark_mc_segmap_parloop_struct_131631;
    futhark_mc_segmap_parloop_131632_task.iterations = iterations;
    futhark_mc_segmap_parloop_131632_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131632_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131632_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131632_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131632_task);
    
    if (futhark_mc_segmap_parloop_131632_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131632_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131632_total_end -
                 futhark_mc_segmap_parloop_131632_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131632_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131632_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131632_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131630_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131630_end -
                 futhark_mc_segmap_task_131630_start;
        
        ctx->futhark_mc_segmap_task_131630_runs[tid]++;
        ctx->futhark_mc_segmap_task_131630_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131630_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131641 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_i_114539;
    int32_t free_iters_116480;
    int64_t free_bytes_121803;
    int64_t free_bytes_121846;
    char *free_mem_123383;
    char *free_mem_123537;
    int64_t free_double_buffer_sizze_123681;
};
struct futhark_mc_task_131650 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    char *free_mem_123401;
    char *free_mem_123404;
    char *free_mem_123407;
    char *free_mem_123410;
    char *free_mem_123413;
    char *free_double_buffer_mem_123679;
    int32_t free_defunc_2_radix_sort_step_arg_130641;
    int32_t free_defunc_0_get_bit_arg_130642;
    bool free_cond_f_res_130643;
    bool free_cond_f_res_130644;
};
struct futhark_mc_scan_stage_1_parloop_struct_131656 {
    struct futhark_context *ctx;
    char *free_mem_123401;
    char *free_mem_123404;
    char *free_mem_123407;
    char *free_mem_123410;
    char *free_mem_123413;
    char *free_double_buffer_mem_123679;
    int32_t free_defunc_2_radix_sort_step_arg_130641;
    int32_t free_defunc_0_get_bit_arg_130642;
    bool free_cond_f_res_130643;
    bool free_cond_f_res_130644;
};
static int futhark_mc_scan_stage_1_parloop_131657(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_120880, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_131656
    *futhark_mc_scan_stage_1_parloop_struct_131656 =
    (struct futhark_mc_scan_stage_1_parloop_struct_131656 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_131656->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_131657_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131657_start = get_wall_time();
    
    struct memblock mem_123401 = {.desc ="mem_123401", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131656->free_mem_123401,
                                  .size =0, .references =NULL};
    struct memblock mem_123404 = {.desc ="mem_123404", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131656->free_mem_123404,
                                  .size =0, .references =NULL};
    struct memblock mem_123407 = {.desc ="mem_123407", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131656->free_mem_123407,
                                  .size =0, .references =NULL};
    struct memblock mem_123410 = {.desc ="mem_123410", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131656->free_mem_123410,
                                  .size =0, .references =NULL};
    struct memblock mem_123413 = {.desc ="mem_123413", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_131656->free_mem_123413,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123679 = {.desc =
                                                "double_buffer_mem_123679",
                                                .mem =
                                                futhark_mc_scan_stage_1_parloop_struct_131656->free_double_buffer_mem_123679,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130641 =
            futhark_mc_scan_stage_1_parloop_struct_131656->free_defunc_2_radix_sort_step_arg_130641;
    int32_t defunc_0_get_bit_arg_130642 =
            futhark_mc_scan_stage_1_parloop_struct_131656->free_defunc_0_get_bit_arg_130642;
    bool cond_f_res_130643 =
         futhark_mc_scan_stage_1_parloop_struct_131656->free_cond_f_res_130643;
    bool cond_f_res_130644 =
         futhark_mc_scan_stage_1_parloop_struct_131656->free_cond_f_res_130644;
    int64_t iterations = end - start;
    int64_t iter_130727 = start;
    int64_t x_130650;
    int64_t x_130651;
    int64_t x_130652;
    int64_t x_130653;
    int64_t x_130654;
    int64_t x_130655;
    int64_t x_130656;
    int64_t x_130657;
    
    x_130650 = (int64_t) 0;
    x_130651 = (int64_t) 0;
    x_130652 = (int64_t) 0;
    x_130653 = (int64_t) 0;
    for (; iter_130727 < end; iter_130727++) {
        int64_t gtid_120881 = iter_130727;
        
        // stage 1 scan body
        {
            float x_130662 =
                  ((float *) double_buffer_mem_123679.mem)[gtid_120881];
            int32_t i32_arg_130663;
            
            i32_arg_130663 = futrts_to_bits32(x_130662);
            
            int32_t unsign_arg_130664 = ashr32(i32_arg_130663,
                                               defunc_0_get_bit_arg_130642);
            int32_t unsign_arg_130665 = 1 & unsign_arg_130664;
            int32_t unsign_arg_130666 = ashr32(i32_arg_130663, 31);
            int32_t unsign_arg_130667 = 1 & unsign_arg_130666;
            bool cond_130668 = unsign_arg_130667 == 1;
            bool x_130669 = !cond_130668;
            bool y_130670 = cond_f_res_130643 && x_130669;
            bool cond_130671 = cond_130668 || y_130670;
            int32_t defunc_1_get_bit_res_130672;
            
            if (cond_130671) {
                int32_t defunc_1_get_bit_res_t_res_130673 = 1 ^
                        unsign_arg_130665;
                
                defunc_1_get_bit_res_130672 = defunc_1_get_bit_res_t_res_130673;
            } else {
                defunc_1_get_bit_res_130672 = unsign_arg_130665;
            }
            
            int32_t x_130674 = mul32(2, defunc_1_get_bit_res_130672);
            int32_t unsign_arg_130675 = ashr32(i32_arg_130663,
                                               defunc_2_radix_sort_step_arg_130641);
            int32_t unsign_arg_130676 = 1 & unsign_arg_130675;
            bool y_130677 = cond_f_res_130644 && x_130669;
            bool cond_130678 = cond_130668 || y_130677;
            int32_t defunc_1_get_bit_res_130679;
            
            if (cond_130678) {
                int32_t defunc_1_get_bit_res_t_res_130680 = 1 ^
                        unsign_arg_130676;
                
                defunc_1_get_bit_res_130679 = defunc_1_get_bit_res_t_res_130680;
            } else {
                defunc_1_get_bit_res_130679 = unsign_arg_130676;
            }
            
            int32_t defunc_0_f_res_130681 = add32(x_130674,
                                                  defunc_1_get_bit_res_130679);
            bool cond_130682 = defunc_0_f_res_130681 == 0;
            int64_t defunc_0_f_res_130683 = btoi_bool_i64(cond_130682);
            int64_t defunc_0_f_res_130684;
            int64_t defunc_0_f_res_130685;
            int64_t defunc_0_f_res_130686;
            
            if (cond_130682) {
                defunc_0_f_res_130684 = (int64_t) 0;
                defunc_0_f_res_130685 = (int64_t) 0;
                defunc_0_f_res_130686 = (int64_t) 0;
            } else {
                bool cond_130687 = defunc_0_f_res_130681 == 1;
                int64_t defunc_0_f_res_f_res_130688 =
                        btoi_bool_i64(cond_130687);
                int64_t defunc_0_f_res_f_res_130689;
                int64_t defunc_0_f_res_f_res_130690;
                
                if (cond_130687) {
                    defunc_0_f_res_f_res_130689 = (int64_t) 0;
                    defunc_0_f_res_f_res_130690 = (int64_t) 0;
                } else {
                    bool cond_130691 = defunc_0_f_res_130681 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130692 =
                            btoi_bool_i64(cond_130691);
                    bool cond_neg_130693 = !cond_130691;
                    int64_t defunc_0_f_res_f_res_f_res_130694 =
                            btoi_bool_i64(cond_neg_130693);
                    
                    defunc_0_f_res_f_res_130689 =
                        defunc_0_f_res_f_res_f_res_130692;
                    defunc_0_f_res_f_res_130690 =
                        defunc_0_f_res_f_res_f_res_130694;
                }
                defunc_0_f_res_130684 = defunc_0_f_res_f_res_130688;
                defunc_0_f_res_130685 = defunc_0_f_res_f_res_130689;
                defunc_0_f_res_130686 = defunc_0_f_res_f_res_130690;
            }
            // write mapped values results to memory
            {
                ((int32_t *) mem_123413.mem)[gtid_120881] =
                    defunc_0_f_res_130681;
            }
            x_130650 = x_130650;
            x_130651 = x_130651;
            x_130652 = x_130652;
            x_130653 = x_130653;
            // Read next values
            {
                x_130654 = defunc_0_f_res_130683;
                x_130655 = defunc_0_f_res_130684;
                x_130656 = defunc_0_f_res_130685;
                x_130657 = defunc_0_f_res_130686;
            }
            
            int64_t defunc_1_op_res_130658 = add64(x_130650, x_130654);
            int64_t defunc_1_op_res_130659 = add64(x_130651, x_130655);
            int64_t defunc_1_op_res_130660 = add64(x_130652, x_130656);
            int64_t defunc_1_op_res_130661 = add64(x_130653, x_130657);
            
            ((int64_t *) mem_123401.mem)[gtid_120881] = defunc_1_op_res_130658;
            x_130650 = defunc_1_op_res_130658;
            ((int64_t *) mem_123404.mem)[gtid_120881] = defunc_1_op_res_130659;
            x_130651 = defunc_1_op_res_130659;
            ((int64_t *) mem_123407.mem)[gtid_120881] = defunc_1_op_res_130660;
            x_130652 = defunc_1_op_res_130660;
            ((int64_t *) mem_123410.mem)[gtid_120881] = defunc_1_op_res_130661;
            x_130653 = defunc_1_op_res_130661;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131657_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131657_end -
                 futhark_mc_scan_stage_1_parloop_131657_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_131657_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_131657_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_131657_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_131658 {
    struct futhark_context *ctx;
    char *free_mem_123401;
    char *free_mem_123404;
    char *free_mem_123407;
    char *free_mem_123410;
    char *free_double_buffer_mem_123679;
    int32_t free_defunc_2_radix_sort_step_arg_130641;
    int32_t free_defunc_0_get_bit_arg_130642;
    bool free_cond_f_res_130643;
    bool free_cond_f_res_130644;
};
static int futhark_mc_scan_stage_3_parloop_131659(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_120880, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_131658
    *futhark_mc_scan_stage_3_parloop_struct_131658 =
    (struct futhark_mc_scan_stage_3_parloop_struct_131658 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_131658->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_131659_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_131659_start = get_wall_time();
    
    struct memblock mem_123401 = {.desc ="mem_123401", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131658->free_mem_123401,
                                  .size =0, .references =NULL};
    struct memblock mem_123404 = {.desc ="mem_123404", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131658->free_mem_123404,
                                  .size =0, .references =NULL};
    struct memblock mem_123407 = {.desc ="mem_123407", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131658->free_mem_123407,
                                  .size =0, .references =NULL};
    struct memblock mem_123410 = {.desc ="mem_123410", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_131658->free_mem_123410,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123679 = {.desc =
                                                "double_buffer_mem_123679",
                                                .mem =
                                                futhark_mc_scan_stage_3_parloop_struct_131658->free_double_buffer_mem_123679,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130641 =
            futhark_mc_scan_stage_3_parloop_struct_131658->free_defunc_2_radix_sort_step_arg_130641;
    int32_t defunc_0_get_bit_arg_130642 =
            futhark_mc_scan_stage_3_parloop_struct_131658->free_defunc_0_get_bit_arg_130642;
    bool cond_f_res_130643 =
         futhark_mc_scan_stage_3_parloop_struct_131658->free_cond_f_res_130643;
    bool cond_f_res_130644 =
         futhark_mc_scan_stage_3_parloop_struct_131658->free_cond_f_res_130644;
    int64_t iterations = end - start;
    int64_t iter_130763 = start;
    int64_t x_130751;
    int64_t x_130752;
    int64_t x_130753;
    int64_t x_130754;
    int64_t x_130755;
    int64_t x_130756;
    int64_t x_130757;
    int64_t x_130758;
    
    if (iter_130763 == (int64_t) 0) {
        x_130751 = (int64_t) 0;
    } else {
        x_130751 = ((int64_t *) mem_123401.mem)[iter_130763 - (int64_t) 1];
    }
    if (iter_130763 == (int64_t) 0) {
        x_130752 = (int64_t) 0;
    } else {
        x_130752 = ((int64_t *) mem_123404.mem)[iter_130763 - (int64_t) 1];
    }
    if (iter_130763 == (int64_t) 0) {
        x_130753 = (int64_t) 0;
    } else {
        x_130753 = ((int64_t *) mem_123407.mem)[iter_130763 - (int64_t) 1];
    }
    if (iter_130763 == (int64_t) 0) {
        x_130754 = (int64_t) 0;
    } else {
        x_130754 = ((int64_t *) mem_123410.mem)[iter_130763 - (int64_t) 1];
    }
    for (; iter_130763 < end; iter_130763++) {
        int64_t gtid_120881 = iter_130763;
        
        // stage 3 scan body
        {
            float x_130662 =
                  ((float *) double_buffer_mem_123679.mem)[gtid_120881];
            int32_t i32_arg_130663;
            
            i32_arg_130663 = futrts_to_bits32(x_130662);
            
            int32_t unsign_arg_130664 = ashr32(i32_arg_130663,
                                               defunc_0_get_bit_arg_130642);
            int32_t unsign_arg_130665 = 1 & unsign_arg_130664;
            int32_t unsign_arg_130666 = ashr32(i32_arg_130663, 31);
            int32_t unsign_arg_130667 = 1 & unsign_arg_130666;
            bool cond_130668 = unsign_arg_130667 == 1;
            bool x_130669 = !cond_130668;
            bool y_130670 = cond_f_res_130643 && x_130669;
            bool cond_130671 = cond_130668 || y_130670;
            int32_t defunc_1_get_bit_res_130672;
            
            if (cond_130671) {
                int32_t defunc_1_get_bit_res_t_res_130673 = 1 ^
                        unsign_arg_130665;
                
                defunc_1_get_bit_res_130672 = defunc_1_get_bit_res_t_res_130673;
            } else {
                defunc_1_get_bit_res_130672 = unsign_arg_130665;
            }
            
            int32_t x_130674 = mul32(2, defunc_1_get_bit_res_130672);
            int32_t unsign_arg_130675 = ashr32(i32_arg_130663,
                                               defunc_2_radix_sort_step_arg_130641);
            int32_t unsign_arg_130676 = 1 & unsign_arg_130675;
            bool y_130677 = cond_f_res_130644 && x_130669;
            bool cond_130678 = cond_130668 || y_130677;
            int32_t defunc_1_get_bit_res_130679;
            
            if (cond_130678) {
                int32_t defunc_1_get_bit_res_t_res_130680 = 1 ^
                        unsign_arg_130676;
                
                defunc_1_get_bit_res_130679 = defunc_1_get_bit_res_t_res_130680;
            } else {
                defunc_1_get_bit_res_130679 = unsign_arg_130676;
            }
            
            int32_t defunc_0_f_res_130681 = add32(x_130674,
                                                  defunc_1_get_bit_res_130679);
            bool cond_130682 = defunc_0_f_res_130681 == 0;
            int64_t defunc_0_f_res_130683 = btoi_bool_i64(cond_130682);
            int64_t defunc_0_f_res_130684;
            int64_t defunc_0_f_res_130685;
            int64_t defunc_0_f_res_130686;
            
            if (cond_130682) {
                defunc_0_f_res_130684 = (int64_t) 0;
                defunc_0_f_res_130685 = (int64_t) 0;
                defunc_0_f_res_130686 = (int64_t) 0;
            } else {
                bool cond_130687 = defunc_0_f_res_130681 == 1;
                int64_t defunc_0_f_res_f_res_130688 =
                        btoi_bool_i64(cond_130687);
                int64_t defunc_0_f_res_f_res_130689;
                int64_t defunc_0_f_res_f_res_130690;
                
                if (cond_130687) {
                    defunc_0_f_res_f_res_130689 = (int64_t) 0;
                    defunc_0_f_res_f_res_130690 = (int64_t) 0;
                } else {
                    bool cond_130691 = defunc_0_f_res_130681 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130692 =
                            btoi_bool_i64(cond_130691);
                    bool cond_neg_130693 = !cond_130691;
                    int64_t defunc_0_f_res_f_res_f_res_130694 =
                            btoi_bool_i64(cond_neg_130693);
                    
                    defunc_0_f_res_f_res_130689 =
                        defunc_0_f_res_f_res_f_res_130692;
                    defunc_0_f_res_f_res_130690 =
                        defunc_0_f_res_f_res_f_res_130694;
                }
                defunc_0_f_res_130684 = defunc_0_f_res_f_res_130688;
                defunc_0_f_res_130685 = defunc_0_f_res_f_res_130689;
                defunc_0_f_res_130686 = defunc_0_f_res_f_res_130690;
            }
            x_130751 = x_130751;
            x_130752 = x_130752;
            x_130753 = x_130753;
            x_130754 = x_130754;
            x_130755 = defunc_0_f_res_130683;
            x_130756 = defunc_0_f_res_130684;
            x_130757 = defunc_0_f_res_130685;
            x_130758 = defunc_0_f_res_130686;
            
            int64_t defunc_1_op_res_130759 = add64(x_130751, x_130755);
            int64_t defunc_1_op_res_130760 = add64(x_130752, x_130756);
            int64_t defunc_1_op_res_130761 = add64(x_130753, x_130757);
            int64_t defunc_1_op_res_130762 = add64(x_130754, x_130758);
            
            ((int64_t *) mem_123401.mem)[gtid_120881] = defunc_1_op_res_130759;
            x_130751 = defunc_1_op_res_130759;
            ((int64_t *) mem_123404.mem)[gtid_120881] = defunc_1_op_res_130760;
            x_130752 = defunc_1_op_res_130760;
            ((int64_t *) mem_123407.mem)[gtid_120881] = defunc_1_op_res_130761;
            x_130753 = defunc_1_op_res_130761;
            ((int64_t *) mem_123410.mem)[gtid_120881] = defunc_1_op_res_130762;
            x_130754 = defunc_1_op_res_130762;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_131659_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_131659_end -
                 futhark_mc_scan_stage_3_parloop_131659_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_131659_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_131659_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_131659_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_131651(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120880 = tid;
    int num_tasks_130726 = info.nsubtasks;
    struct futhark_mc_task_131650 *futhark_mc_task_131650 =
                                  (struct futhark_mc_task_131650 *) args;
    struct futhark_context *ctx = futhark_mc_task_131650->ctx;
    uint64_t futhark_mc_segscan_task_131651_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_131651_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131650->free_n_114463;
    struct memblock mem_123401 = {.desc ="mem_123401", .mem =
                                  futhark_mc_task_131650->free_mem_123401,
                                  .size =0, .references =NULL};
    struct memblock mem_123404 = {.desc ="mem_123404", .mem =
                                  futhark_mc_task_131650->free_mem_123404,
                                  .size =0, .references =NULL};
    struct memblock mem_123407 = {.desc ="mem_123407", .mem =
                                  futhark_mc_task_131650->free_mem_123407,
                                  .size =0, .references =NULL};
    struct memblock mem_123410 = {.desc ="mem_123410", .mem =
                                  futhark_mc_task_131650->free_mem_123410,
                                  .size =0, .references =NULL};
    struct memblock mem_123413 = {.desc ="mem_123413", .mem =
                                  futhark_mc_task_131650->free_mem_123413,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123679 = {.desc =
                                                "double_buffer_mem_123679",
                                                .mem =
                                                futhark_mc_task_131650->free_double_buffer_mem_123679,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_130641 =
            futhark_mc_task_131650->free_defunc_2_radix_sort_step_arg_130641;
    int32_t defunc_0_get_bit_arg_130642 =
            futhark_mc_task_131650->free_defunc_0_get_bit_arg_130642;
    bool cond_f_res_130643 = futhark_mc_task_131650->free_cond_f_res_130643;
    bool cond_f_res_130644 = futhark_mc_task_131650->free_cond_f_res_130644;
    size_t scan_stage_2_accum_mem_130742_cached_sizze_131652 = 0;
    char *scan_stage_2_accum_mem_130742 = NULL;
    size_t scan_stage_2_accum_mem_130744_cached_sizze_131653 = 0;
    char *scan_stage_2_accum_mem_130744 = NULL;
    size_t scan_stage_2_accum_mem_130746_cached_sizze_131654 = 0;
    char *scan_stage_2_accum_mem_130746 = NULL;
    size_t scan_stage_2_accum_mem_130748_cached_sizze_131655 = 0;
    char *scan_stage_2_accum_mem_130748 = NULL;
    int64_t iter_130727;
    struct futhark_mc_scan_stage_1_parloop_struct_131656
    futhark_mc_scan_stage_1_parloop_struct_131656;
    
    futhark_mc_scan_stage_1_parloop_struct_131656.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_mem_123401 =
        mem_123401.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_mem_123404 =
        mem_123404.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_mem_123407 =
        mem_123407.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_mem_123410 =
        mem_123410.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_mem_123413 =
        mem_123413.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_double_buffer_mem_123679 =
        double_buffer_mem_123679.mem;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_defunc_2_radix_sort_step_arg_130641 =
        defunc_2_radix_sort_step_arg_130641;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_defunc_0_get_bit_arg_130642 =
        defunc_0_get_bit_arg_130642;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_cond_f_res_130643 =
        cond_f_res_130643;
    futhark_mc_scan_stage_1_parloop_struct_131656.free_cond_f_res_130644 =
        cond_f_res_130644;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_131657_task;
    
    futhark_mc_scan_stage_1_parloop_131657_task.name =
        "futhark_mc_scan_stage_1_parloop_131657";
    futhark_mc_scan_stage_1_parloop_131657_task.fn =
        futhark_mc_scan_stage_1_parloop_131657;
    futhark_mc_scan_stage_1_parloop_131657_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_131656;
    futhark_mc_scan_stage_1_parloop_131657_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_131657_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_131657_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_131657_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_131657_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_131657_task);
    
    if (futhark_mc_scan_stage_1_parloop_131657_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_131657_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_131657_total_end -
                 futhark_mc_scan_stage_1_parloop_131657_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131657_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131657_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_131657_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_130726)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_130728;
        int64_t x_130729;
        int64_t x_130730;
        int64_t x_130731;
        int64_t x_130732;
        int64_t x_130733;
        int64_t x_130734;
        int64_t x_130735;
        int64_t offset_130740 = (int64_t) 0;
        int64_t offset_index_130741 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_130742_cached_sizze_131652 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130742 =
                realloc(scan_stage_2_accum_mem_130742, (int64_t) 8);
            scan_stage_2_accum_mem_130742_cached_sizze_131652 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130744_cached_sizze_131653 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130744 =
                realloc(scan_stage_2_accum_mem_130744, (int64_t) 8);
            scan_stage_2_accum_mem_130744_cached_sizze_131653 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130746_cached_sizze_131654 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130746 =
                realloc(scan_stage_2_accum_mem_130746, (int64_t) 8);
            scan_stage_2_accum_mem_130746_cached_sizze_131654 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_130748_cached_sizze_131655 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_130748 =
                realloc(scan_stage_2_accum_mem_130748, (int64_t) 8);
            scan_stage_2_accum_mem_130748_cached_sizze_131655 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_130742)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130744)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130746)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_130748)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_130750 = 0; i_130750 < num_tasks_130726 - 1;
             i_130750++) {
            offset_130740 = squot64(n_114463, sext_i32_i64(num_tasks_130726));
            if (slt64(sext_i32_i64(i_130750), srem64(n_114463,
                                                     sext_i32_i64(num_tasks_130726)))) {
                offset_130740 += (int64_t) 1;
            }
            offset_index_130741 += offset_130740;
            
            int64_t gtid_120881 = offset_index_130741;
            float x_130662 =
                  ((float *) double_buffer_mem_123679.mem)[gtid_120881];
            int32_t i32_arg_130663;
            
            i32_arg_130663 = futrts_to_bits32(x_130662);
            
            int32_t unsign_arg_130664 = ashr32(i32_arg_130663,
                                               defunc_0_get_bit_arg_130642);
            int32_t unsign_arg_130665 = 1 & unsign_arg_130664;
            int32_t unsign_arg_130666 = ashr32(i32_arg_130663, 31);
            int32_t unsign_arg_130667 = 1 & unsign_arg_130666;
            bool cond_130668 = unsign_arg_130667 == 1;
            bool x_130669 = !cond_130668;
            bool y_130670 = cond_f_res_130643 && x_130669;
            bool cond_130671 = cond_130668 || y_130670;
            int32_t defunc_1_get_bit_res_130672;
            
            if (cond_130671) {
                int32_t defunc_1_get_bit_res_t_res_130673 = 1 ^
                        unsign_arg_130665;
                
                defunc_1_get_bit_res_130672 = defunc_1_get_bit_res_t_res_130673;
            } else {
                defunc_1_get_bit_res_130672 = unsign_arg_130665;
            }
            
            int32_t x_130674 = mul32(2, defunc_1_get_bit_res_130672);
            int32_t unsign_arg_130675 = ashr32(i32_arg_130663,
                                               defunc_2_radix_sort_step_arg_130641);
            int32_t unsign_arg_130676 = 1 & unsign_arg_130675;
            bool y_130677 = cond_f_res_130644 && x_130669;
            bool cond_130678 = cond_130668 || y_130677;
            int32_t defunc_1_get_bit_res_130679;
            
            if (cond_130678) {
                int32_t defunc_1_get_bit_res_t_res_130680 = 1 ^
                        unsign_arg_130676;
                
                defunc_1_get_bit_res_130679 = defunc_1_get_bit_res_t_res_130680;
            } else {
                defunc_1_get_bit_res_130679 = unsign_arg_130676;
            }
            
            int32_t defunc_0_f_res_130681 = add32(x_130674,
                                                  defunc_1_get_bit_res_130679);
            bool cond_130682 = defunc_0_f_res_130681 == 0;
            int64_t defunc_0_f_res_130683 = btoi_bool_i64(cond_130682);
            int64_t defunc_0_f_res_130684;
            int64_t defunc_0_f_res_130685;
            int64_t defunc_0_f_res_130686;
            
            if (cond_130682) {
                defunc_0_f_res_130684 = (int64_t) 0;
                defunc_0_f_res_130685 = (int64_t) 0;
                defunc_0_f_res_130686 = (int64_t) 0;
            } else {
                bool cond_130687 = defunc_0_f_res_130681 == 1;
                int64_t defunc_0_f_res_f_res_130688 =
                        btoi_bool_i64(cond_130687);
                int64_t defunc_0_f_res_f_res_130689;
                int64_t defunc_0_f_res_f_res_130690;
                
                if (cond_130687) {
                    defunc_0_f_res_f_res_130689 = (int64_t) 0;
                    defunc_0_f_res_f_res_130690 = (int64_t) 0;
                } else {
                    bool cond_130691 = defunc_0_f_res_130681 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_130692 =
                            btoi_bool_i64(cond_130691);
                    bool cond_neg_130693 = !cond_130691;
                    int64_t defunc_0_f_res_f_res_f_res_130694 =
                            btoi_bool_i64(cond_neg_130693);
                    
                    defunc_0_f_res_f_res_130689 =
                        defunc_0_f_res_f_res_f_res_130692;
                    defunc_0_f_res_f_res_130690 =
                        defunc_0_f_res_f_res_f_res_130694;
                }
                defunc_0_f_res_130684 = defunc_0_f_res_f_res_130688;
                defunc_0_f_res_130685 = defunc_0_f_res_f_res_130689;
                defunc_0_f_res_130686 = defunc_0_f_res_f_res_130690;
            }
            // Read carry in
            {
                x_130728 =
                    ((int64_t *) scan_stage_2_accum_mem_130742)[(int64_t) 0];
                x_130729 =
                    ((int64_t *) scan_stage_2_accum_mem_130744)[(int64_t) 0];
                x_130730 =
                    ((int64_t *) scan_stage_2_accum_mem_130746)[(int64_t) 0];
                x_130731 =
                    ((int64_t *) scan_stage_2_accum_mem_130748)[(int64_t) 0];
            }
            // Read next values
            {
                x_130732 = ((int64_t *) mem_123401.mem)[offset_index_130741 -
                                                        (int64_t) 1];
                x_130733 = ((int64_t *) mem_123404.mem)[offset_index_130741 -
                                                        (int64_t) 1];
                x_130734 = ((int64_t *) mem_123407.mem)[offset_index_130741 -
                                                        (int64_t) 1];
                x_130735 = ((int64_t *) mem_123410.mem)[offset_index_130741 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_130736 = add64(x_130728, x_130732);
            int64_t defunc_1_op_res_130737 = add64(x_130729, x_130733);
            int64_t defunc_1_op_res_130738 = add64(x_130730, x_130734);
            int64_t defunc_1_op_res_130739 = add64(x_130731, x_130735);
            
            ((int64_t *) mem_123401.mem)[offset_index_130741 - (int64_t) 1] =
                defunc_1_op_res_130736;
            ((int64_t *) scan_stage_2_accum_mem_130742)[(int64_t) 0] =
                defunc_1_op_res_130736;
            ((int64_t *) mem_123404.mem)[offset_index_130741 - (int64_t) 1] =
                defunc_1_op_res_130737;
            ((int64_t *) scan_stage_2_accum_mem_130744)[(int64_t) 0] =
                defunc_1_op_res_130737;
            ((int64_t *) mem_123407.mem)[offset_index_130741 - (int64_t) 1] =
                defunc_1_op_res_130738;
            ((int64_t *) scan_stage_2_accum_mem_130746)[(int64_t) 0] =
                defunc_1_op_res_130738;
            ((int64_t *) mem_123410.mem)[offset_index_130741 - (int64_t) 1] =
                defunc_1_op_res_130739;
            ((int64_t *) scan_stage_2_accum_mem_130748)[(int64_t) 0] =
                defunc_1_op_res_130739;
        }
        
        int64_t iter_130763 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_131658
        futhark_mc_scan_stage_3_parloop_struct_131658;
        
        futhark_mc_scan_stage_3_parloop_struct_131658.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_mem_123401 =
            mem_123401.mem;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_mem_123404 =
            mem_123404.mem;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_mem_123407 =
            mem_123407.mem;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_mem_123410 =
            mem_123410.mem;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_double_buffer_mem_123679 =
            double_buffer_mem_123679.mem;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_defunc_2_radix_sort_step_arg_130641 =
            defunc_2_radix_sort_step_arg_130641;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_defunc_0_get_bit_arg_130642 =
            defunc_0_get_bit_arg_130642;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_cond_f_res_130643 =
            cond_f_res_130643;
        futhark_mc_scan_stage_3_parloop_struct_131658.free_cond_f_res_130644 =
            cond_f_res_130644;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_131659_task;
        
        futhark_mc_scan_stage_3_parloop_131659_task.name =
            "futhark_mc_scan_stage_3_parloop_131659";
        futhark_mc_scan_stage_3_parloop_131659_task.fn =
            futhark_mc_scan_stage_3_parloop_131659;
        futhark_mc_scan_stage_3_parloop_131659_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_131658;
        futhark_mc_scan_stage_3_parloop_131659_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_131659_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_131659_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_131659_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_131659_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_131659_task);
        
        if (futhark_mc_scan_stage_3_parloop_131659_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_131659_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_131659_total_end -
                     futhark_mc_scan_stage_3_parloop_131659_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131659_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131659_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_131659_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_130742);
    free(scan_stage_2_accum_mem_130744);
    free(scan_stage_2_accum_mem_130746);
    free(scan_stage_2_accum_mem_130748);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_131651_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_131651_end -
                 futhark_mc_segscan_task_131651_start;
        
        ctx->futhark_mc_segscan_task_131651_runs[tid]++;
        ctx->futhark_mc_segscan_task_131651_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_131651_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131660 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    char *free_mem_123401;
    char *free_mem_123404;
    char *free_mem_123407;
    char *free_mem_123410;
    char *free_mem_123413;
    char *free_mem_123416;
    char *free_double_buffer_mem_123679;
    int64_t free_last_res_130695;
    int64_t free_last_res_130696;
    int64_t free_last_res_130697;
};
struct futhark_mc_segmap_parloop_struct_131662 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    char *free_mem_123401;
    char *free_mem_123404;
    char *free_mem_123407;
    char *free_mem_123410;
    char *free_mem_123413;
    char *free_mem_123416;
    char *free_double_buffer_mem_123679;
    int64_t free_last_res_130695;
    int64_t free_last_res_130696;
    int64_t free_last_res_130697;
};
static int futhark_mc_segmap_parloop_131663(void *args, int64_t start,
                                            int64_t end, int flat_tid_120882,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131662
    *futhark_mc_segmap_parloop_struct_131662 =
    (struct futhark_mc_segmap_parloop_struct_131662 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131662->ctx;
    uint64_t futhark_mc_segmap_parloop_131663_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131663_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131662->free_n_114463;
    struct memblock mem_123401 = {.desc ="mem_123401", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123401,
                                  .size =0, .references =NULL};
    struct memblock mem_123404 = {.desc ="mem_123404", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123404,
                                  .size =0, .references =NULL};
    struct memblock mem_123407 = {.desc ="mem_123407", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123407,
                                  .size =0, .references =NULL};
    struct memblock mem_123410 = {.desc ="mem_123410", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123410,
                                  .size =0, .references =NULL};
    struct memblock mem_123413 = {.desc ="mem_123413", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123413,
                                  .size =0, .references =NULL};
    struct memblock mem_123416 = {.desc ="mem_123416", .mem =
                                  futhark_mc_segmap_parloop_struct_131662->free_mem_123416,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123679 = {.desc =
                                                "double_buffer_mem_123679",
                                                .mem =
                                                futhark_mc_segmap_parloop_struct_131662->free_double_buffer_mem_123679,
                                                .size =0, .references =NULL};
    int64_t last_res_130695 =
            futhark_mc_segmap_parloop_struct_131662->free_last_res_130695;
    int64_t last_res_130696 =
            futhark_mc_segmap_parloop_struct_131662->free_last_res_130696;
    int64_t last_res_130697 =
            futhark_mc_segmap_parloop_struct_131662->free_last_res_130697;
    int64_t iterations = end - start;
    int64_t iter_130765 = start;
    
    for (; iter_130765 < end; iter_130765++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130784 = n_114463;
        int64_t gtid_120883 = iter_130765;
        int64_t remnant_130785 = iter_130765 - gtid_120883;
        int32_t x_130700 = ((int32_t *) mem_123413.mem)[gtid_120883];
        float write_value_130701 =
              ((float *) double_buffer_mem_123679.mem)[gtid_120883];
        bool match_lit_130702 = 0 == x_130700;
        int64_t defunc_1_f_res_130703;
        
        if (match_lit_130702) {
            int64_t x_130766 = ((int64_t *) mem_123401.mem)[gtid_120883];
            int64_t case_res_130767 = sub64(x_130766, (int64_t) 1);
            
            defunc_1_f_res_130703 = case_res_130767;
        } else {
            bool match_lit_130768 = 1 == x_130700;
            int64_t x_130769;
            
            if (match_lit_130768) {
                int64_t x_130770 = ((int64_t *) mem_123404.mem)[gtid_120883];
                int64_t x_130771 = add64(last_res_130695, x_130770);
                int64_t case_res_130772 = sub64(x_130771, (int64_t) 1);
                
                x_130769 = case_res_130772;
            } else {
                bool match_lit_130773 = 2 == x_130700;
                int64_t x_130774;
                
                if (match_lit_130773) {
                    int64_t x_130775 =
                            ((int64_t *) mem_123407.mem)[gtid_120883];
                    int64_t x_130776 = add64(last_res_130695, last_res_130696);
                    int64_t x_130777 = add64(x_130775, x_130776);
                    int64_t case_res_130778 = sub64(x_130777, (int64_t) 1);
                    
                    x_130774 = case_res_130778;
                } else {
                    int64_t x_130779 =
                            ((int64_t *) mem_123410.mem)[gtid_120883];
                    int64_t x_130780 = add64(last_res_130695, last_res_130696);
                    int64_t x_130781 = add64(last_res_130697, x_130780);
                    int64_t x_130782 = add64(x_130779, x_130781);
                    int64_t defunc_1_f_res_res_130783 = sub64(x_130782,
                                                              (int64_t) 1);
                    
                    x_130774 = defunc_1_f_res_res_130783;
                }
                x_130769 = x_130774;
            }
            defunc_1_f_res_130703 = x_130769;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_130703) &&
            slt64(defunc_1_f_res_130703, n_114463)) {
            ((float *) mem_123416.mem)[defunc_1_f_res_130703] =
                write_value_130701;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131663_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131663_end -
                 futhark_mc_segmap_parloop_131663_start;
        
        ctx->futhark_mc_segmap_parloop_131663_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131663_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131663_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131661(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120882 = tid;
    int num_tasks_130764 = info.nsubtasks;
    struct futhark_mc_task_131660 *futhark_mc_task_131660 =
                                  (struct futhark_mc_task_131660 *) args;
    struct futhark_context *ctx = futhark_mc_task_131660->ctx;
    uint64_t futhark_mc_segmap_task_131661_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131661_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131660->free_n_114463;
    struct memblock mem_123401 = {.desc ="mem_123401", .mem =
                                  futhark_mc_task_131660->free_mem_123401,
                                  .size =0, .references =NULL};
    struct memblock mem_123404 = {.desc ="mem_123404", .mem =
                                  futhark_mc_task_131660->free_mem_123404,
                                  .size =0, .references =NULL};
    struct memblock mem_123407 = {.desc ="mem_123407", .mem =
                                  futhark_mc_task_131660->free_mem_123407,
                                  .size =0, .references =NULL};
    struct memblock mem_123410 = {.desc ="mem_123410", .mem =
                                  futhark_mc_task_131660->free_mem_123410,
                                  .size =0, .references =NULL};
    struct memblock mem_123413 = {.desc ="mem_123413", .mem =
                                  futhark_mc_task_131660->free_mem_123413,
                                  .size =0, .references =NULL};
    struct memblock mem_123416 = {.desc ="mem_123416", .mem =
                                  futhark_mc_task_131660->free_mem_123416,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_123679 = {.desc =
                                                "double_buffer_mem_123679",
                                                .mem =
                                                futhark_mc_task_131660->free_double_buffer_mem_123679,
                                                .size =0, .references =NULL};
    int64_t last_res_130695 = futhark_mc_task_131660->free_last_res_130695;
    int64_t last_res_130696 = futhark_mc_task_131660->free_last_res_130696;
    int64_t last_res_130697 = futhark_mc_task_131660->free_last_res_130697;
    int64_t iter_130765;
    struct futhark_mc_segmap_parloop_struct_131662
    futhark_mc_segmap_parloop_struct_131662;
    
    futhark_mc_segmap_parloop_struct_131662.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131662.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123401 = mem_123401.mem;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123404 = mem_123404.mem;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123407 = mem_123407.mem;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123410 = mem_123410.mem;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123413 = mem_123413.mem;
    futhark_mc_segmap_parloop_struct_131662.free_mem_123416 = mem_123416.mem;
    futhark_mc_segmap_parloop_struct_131662.free_double_buffer_mem_123679 =
        double_buffer_mem_123679.mem;
    futhark_mc_segmap_parloop_struct_131662.free_last_res_130695 =
        last_res_130695;
    futhark_mc_segmap_parloop_struct_131662.free_last_res_130696 =
        last_res_130696;
    futhark_mc_segmap_parloop_struct_131662.free_last_res_130697 =
        last_res_130697;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131663_task;
    
    futhark_mc_segmap_parloop_131663_task.name =
        "futhark_mc_segmap_parloop_131663";
    futhark_mc_segmap_parloop_131663_task.fn = futhark_mc_segmap_parloop_131663;
    futhark_mc_segmap_parloop_131663_task.args =
        &futhark_mc_segmap_parloop_struct_131662;
    futhark_mc_segmap_parloop_131663_task.iterations = iterations;
    futhark_mc_segmap_parloop_131663_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131663_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131663_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131663_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131663_task);
    
    if (futhark_mc_segmap_parloop_131663_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131663_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131663_total_end -
                 futhark_mc_segmap_parloop_131663_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131663_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131663_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131663_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131661_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131661_end -
                 futhark_mc_segmap_task_131661_start;
        
        ctx->futhark_mc_segmap_task_131661_runs[tid]++;
        ctx->futhark_mc_segmap_task_131661_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131661_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131642(void *args, int64_t start,
                                            int64_t end, int flat_tid_120878,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131641
    *futhark_mc_segmap_parloop_struct_131641 =
    (struct futhark_mc_segmap_parloop_struct_131641 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131641->ctx;
    uint64_t futhark_mc_segmap_parloop_131642_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131642_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131641->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131641->free_n_114463;
    int64_t i_114539 = futhark_mc_segmap_parloop_struct_131641->free_i_114539;
    int32_t iters_116480 =
            futhark_mc_segmap_parloop_struct_131641->free_iters_116480;
    int64_t bytes_121803 =
            futhark_mc_segmap_parloop_struct_131641->free_bytes_121803;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131641->free_bytes_121846;
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_segmap_parloop_struct_131641->free_mem_123383,
                                  .size =0, .references =NULL};
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_segmap_parloop_struct_131641->free_mem_123537,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123681 =
            futhark_mc_segmap_parloop_struct_131641->free_double_buffer_sizze_123681;
    size_t mem_123401_cached_sizze_131643 = 0;
    char *mem_123401 = NULL;
    size_t mem_123404_cached_sizze_131644 = 0;
    char *mem_123404 = NULL;
    size_t mem_123407_cached_sizze_131645 = 0;
    char *mem_123407 = NULL;
    size_t mem_123410_cached_sizze_131646 = 0;
    char *mem_123410 = NULL;
    size_t mem_123413_cached_sizze_131647 = 0;
    char *mem_123413 = NULL;
    size_t mem_123416_cached_sizze_131648 = 0;
    char *mem_123416 = NULL;
    size_t double_buffer_mem_123679_cached_sizze_131649 = 0;
    char *double_buffer_mem_123679 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130638 = start;
    
    if (mem_123401_cached_sizze_131643 < (size_t) bytes_121803) {
        mem_123401 = realloc(mem_123401, bytes_121803);
        mem_123401_cached_sizze_131643 = bytes_121803;
    }
    if (mem_123404_cached_sizze_131644 < (size_t) bytes_121803) {
        mem_123404 = realloc(mem_123404, bytes_121803);
        mem_123404_cached_sizze_131644 = bytes_121803;
    }
    if (mem_123407_cached_sizze_131645 < (size_t) bytes_121803) {
        mem_123407 = realloc(mem_123407, bytes_121803);
        mem_123407_cached_sizze_131645 = bytes_121803;
    }
    if (mem_123410_cached_sizze_131646 < (size_t) bytes_121803) {
        mem_123410 = realloc(mem_123410, bytes_121803);
        mem_123410_cached_sizze_131646 = bytes_121803;
    }
    if (mem_123413_cached_sizze_131647 < (size_t) bytes_121846) {
        mem_123413 = realloc(mem_123413, bytes_121846);
        mem_123413_cached_sizze_131647 = bytes_121846;
    }
    if (double_buffer_mem_123679_cached_sizze_131649 <
        (size_t) double_buffer_sizze_123681) {
        double_buffer_mem_123679 = realloc(double_buffer_mem_123679,
                                           double_buffer_sizze_123681);
        double_buffer_mem_123679_cached_sizze_131649 =
            double_buffer_sizze_123681;
    }
    if (mem_123416_cached_sizze_131648 < (size_t) bytes_121846) {
        mem_123416 = realloc(mem_123416, bytes_121846);
        mem_123416_cached_sizze_131648 = bytes_121846;
    }
    for (; iter_130638 < end; iter_130638++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130723 = m_114462;
        int64_t gtid_120879 = iter_130638;
        int64_t remnant_130724 = iter_130638 - gtid_120879;
        
        memmove(double_buffer_mem_123679 + (int64_t) 0, mem_123383.mem +
                gtid_120879 * n_114463 * (int64_t) 4, n_114463 * (int64_t) 4);
        for (int32_t i_130639 = 0; i_130639 < iters_116480; i_130639++) {
            int32_t defunc_2_radix_sort_step_arg_130641 = mul32(2, i_130639);
            int32_t defunc_0_get_bit_arg_130642 = add32(1,
                                                        defunc_2_radix_sort_step_arg_130641);
            bool cond_f_res_130643 = defunc_0_get_bit_arg_130642 == 31;
            bool cond_f_res_130644 = defunc_2_radix_sort_step_arg_130641 == 31;
            int64_t flat_tid_120880 = (int64_t) 0;
            int32_t num_tasks_130726;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "nonsegmented segScan");
            
            struct futhark_mc_task_131650 futhark_mc_task_131650;
            
            futhark_mc_task_131650.ctx = ctx;
            futhark_mc_task_131650.free_n_114463 = n_114463;
            futhark_mc_task_131650.free_mem_123401 = mem_123401;
            futhark_mc_task_131650.free_mem_123404 = mem_123404;
            futhark_mc_task_131650.free_mem_123407 = mem_123407;
            futhark_mc_task_131650.free_mem_123410 = mem_123410;
            futhark_mc_task_131650.free_mem_123413 = mem_123413;
            futhark_mc_task_131650.free_double_buffer_mem_123679 =
                double_buffer_mem_123679;
            futhark_mc_task_131650.free_defunc_2_radix_sort_step_arg_130641 =
                defunc_2_radix_sort_step_arg_130641;
            futhark_mc_task_131650.free_defunc_0_get_bit_arg_130642 =
                defunc_0_get_bit_arg_130642;
            futhark_mc_task_131650.free_cond_f_res_130643 = cond_f_res_130643;
            futhark_mc_task_131650.free_cond_f_res_130644 = cond_f_res_130644;
            
            struct scheduler_segop futhark_mc_task_131650_task;
            
            futhark_mc_task_131650_task.args = &futhark_mc_task_131650;
            futhark_mc_task_131650_task.top_level_fn =
                futhark_mc_segscan_task_131651;
            futhark_mc_task_131650_task.name = "futhark_mc_segscan_task_131651";
            futhark_mc_task_131650_task.iterations = n_114463;
            futhark_mc_task_131650_task.task_time =
                &ctx->futhark_mc_segscan_task_131651_total_time;
            futhark_mc_task_131650_task.task_iter =
                &ctx->futhark_mc_segscan_task_131651_total_iter;
            futhark_mc_task_131650_task.sched = STATIC;
            futhark_mc_task_131650_task.nested_fn = NULL;
            
            int futhark_mc_segscan_task_131651_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131650_task);
            
            if (futhark_mc_segscan_task_131651_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t last_res_130695 = ((int64_t *) mem_123401)[i_114539];
            int64_t last_res_130696 = ((int64_t *) mem_123404)[i_114539];
            int64_t last_res_130697 = ((int64_t *) mem_123407)[i_114539];
            
            memmove(mem_123416 + (int64_t) 0, double_buffer_mem_123679 +
                    (int64_t) 0, n_114463 * (int64_t) 4);
            
            int64_t flat_tid_120882 = (int64_t) 0;
            int32_t num_tasks_130764;
            struct futhark_mc_task_131660 futhark_mc_task_131660;
            
            futhark_mc_task_131660.ctx = ctx;
            futhark_mc_task_131660.free_n_114463 = n_114463;
            futhark_mc_task_131660.free_mem_123401 = mem_123401;
            futhark_mc_task_131660.free_mem_123404 = mem_123404;
            futhark_mc_task_131660.free_mem_123407 = mem_123407;
            futhark_mc_task_131660.free_mem_123410 = mem_123410;
            futhark_mc_task_131660.free_mem_123413 = mem_123413;
            futhark_mc_task_131660.free_mem_123416 = mem_123416;
            futhark_mc_task_131660.free_double_buffer_mem_123679 =
                double_buffer_mem_123679;
            futhark_mc_task_131660.free_last_res_130695 = last_res_130695;
            futhark_mc_task_131660.free_last_res_130696 = last_res_130696;
            futhark_mc_task_131660.free_last_res_130697 = last_res_130697;
            
            struct scheduler_segop futhark_mc_task_131660_task;
            
            futhark_mc_task_131660_task.args = &futhark_mc_task_131660;
            futhark_mc_task_131660_task.top_level_fn =
                futhark_mc_segmap_task_131661;
            futhark_mc_task_131660_task.name = "futhark_mc_segmap_task_131661";
            futhark_mc_task_131660_task.iterations = n_114463;
            futhark_mc_task_131660_task.task_time =
                &ctx->futhark_mc_segmap_task_131661_total_time;
            futhark_mc_task_131660_task.task_iter =
                &ctx->futhark_mc_segmap_task_131661_total_iter;
            futhark_mc_task_131660_task.sched = STATIC;
            futhark_mc_task_131660_task.nested_fn = NULL;
            
            int futhark_mc_segmap_task_131661_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131660_task);
            
            if (futhark_mc_segmap_task_131661_err != 0) {
                err = 1;
                goto cleanup;
            }
            memmove(double_buffer_mem_123679 + (int64_t) 0, mem_123416 +
                    (int64_t) 0, n_114463 * (int64_t) 4);
        }
        memmove(mem_123537.mem + gtid_120879 * n_114463 * (int64_t) 4,
                double_buffer_mem_123679 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123401);
    free(mem_123404);
    free(mem_123407);
    free(mem_123410);
    free(mem_123413);
    free(mem_123416);
    free(double_buffer_mem_123679);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131642_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131642_end -
                 futhark_mc_segmap_parloop_131642_start;
        
        ctx->futhark_mc_segmap_parloop_131642_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131642_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131642_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131640(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120878 = tid;
    int num_tasks_130520 = info.nsubtasks;
    struct futhark_mc_task_131629 *futhark_mc_task_131629 =
                                  (struct futhark_mc_task_131629 *) args;
    struct futhark_context *ctx = futhark_mc_task_131629->ctx;
    uint64_t futhark_mc_segmap_nested_task_131640_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131640_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131629->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131629->free_n_114463;
    int64_t i_114539 = futhark_mc_task_131629->free_i_114539;
    int32_t iters_116480 = futhark_mc_task_131629->free_iters_116480;
    int64_t bytes_121803 = futhark_mc_task_131629->free_bytes_121803;
    int64_t bytes_121846 = futhark_mc_task_131629->free_bytes_121846;
    struct memblock mem_123383 = {.desc ="mem_123383", .mem =
                                  futhark_mc_task_131629->free_mem_123383,
                                  .size =0, .references =NULL};
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_task_131629->free_mem_123537,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_123681 =
            futhark_mc_task_131629->free_double_buffer_sizze_123681;
    int64_t double_buffer_sizze_123685 =
            futhark_mc_task_131629->free_double_buffer_sizze_123685;
    int64_t iter_130638;
    struct futhark_mc_segmap_parloop_struct_131641
    futhark_mc_segmap_parloop_struct_131641;
    
    futhark_mc_segmap_parloop_struct_131641.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131641.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131641.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131641.free_i_114539 = i_114539;
    futhark_mc_segmap_parloop_struct_131641.free_iters_116480 = iters_116480;
    futhark_mc_segmap_parloop_struct_131641.free_bytes_121803 = bytes_121803;
    futhark_mc_segmap_parloop_struct_131641.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131641.free_mem_123383 = mem_123383.mem;
    futhark_mc_segmap_parloop_struct_131641.free_mem_123537 = mem_123537.mem;
    futhark_mc_segmap_parloop_struct_131641.free_double_buffer_sizze_123681 =
        double_buffer_sizze_123681;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131642_task;
    
    futhark_mc_segmap_parloop_131642_task.name =
        "futhark_mc_segmap_parloop_131642";
    futhark_mc_segmap_parloop_131642_task.fn = futhark_mc_segmap_parloop_131642;
    futhark_mc_segmap_parloop_131642_task.args =
        &futhark_mc_segmap_parloop_struct_131641;
    futhark_mc_segmap_parloop_131642_task.iterations = iterations;
    futhark_mc_segmap_parloop_131642_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131642_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131642_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131642_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131642_task);
    
    if (futhark_mc_segmap_parloop_131642_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131642_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131642_total_end -
                 futhark_mc_segmap_parloop_131642_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131642_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131642_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131642_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131640_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131640_end -
                 futhark_mc_segmap_nested_task_131640_start;
        
        ctx->futhark_mc_segmap_nested_task_131640_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131640_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131640_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131664 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_stl_res_114533;
    int64_t free_j_m_i_114931;
    char *free_mem_123537;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
};
struct futhark_mc_segmap_parloop_struct_131666 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_stl_res_114533;
    int64_t free_j_m_i_114931;
    char *free_mem_123537;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
};
static int futhark_mc_segmap_parloop_131667(void *args, int64_t start,
                                            int64_t end, int flat_tid_120969,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131666
    *futhark_mc_segmap_parloop_struct_131666 =
    (struct futhark_mc_segmap_parloop_struct_131666 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131666->ctx;
    uint64_t futhark_mc_segmap_parloop_131667_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131667_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131666->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131666->free_n_114463;
    int64_t stl_res_114533 =
            futhark_mc_segmap_parloop_struct_131666->free_stl_res_114533;
    int64_t j_m_i_114931 =
            futhark_mc_segmap_parloop_struct_131666->free_j_m_i_114931;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_123537,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_segmap_parloop_struct_131666->free_mem_123546,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130787 = start;
    
    for (; iter_130787 < end; iter_130787++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130793 = m_114462;
        int64_t gtid_120970 = iter_130787;
        int64_t remnant_130794 = iter_130787 - gtid_120970;
        float defunc_2_reduce_res_116616;
        float redout_130789 = 0.0F;
        
        for (int64_t i_130788 = 0; i_130788 < j_m_i_114931; i_130788++) {
            int64_t slice_130790 = stl_res_114533 + i_130788;
            float x_130791 = ((float *) mem_123537.mem)[gtid_120970 * n_114463 +
                                                        slice_130790];
            float defunc_1_op_res_130792 = x_130791 + redout_130789;
            float redout_tmp_130795 = defunc_1_op_res_130792;
            
            redout_130789 = redout_tmp_130795;
        }
        defunc_2_reduce_res_116616 = redout_130789;
        
        float h_116621 = 3.0F * defunc_2_reduce_res_116616;
        float h9_116622 = 0.999F * h_116621;
        float h1_116623 = 1.0e-3F * h_116621;
        
        ((float *) mem_123540.mem)[gtid_120970] = h_116621;
        ((float *) mem_123543.mem)[gtid_120970] = h9_116622;
        ((float *) mem_123546.mem)[gtid_120970] = h1_116623;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131667_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131667_end -
                 futhark_mc_segmap_parloop_131667_start;
        
        ctx->futhark_mc_segmap_parloop_131667_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131667_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131667_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131665(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120969 = tid;
    int num_tasks_130786 = info.nsubtasks;
    struct futhark_mc_task_131664 *futhark_mc_task_131664 =
                                  (struct futhark_mc_task_131664 *) args;
    struct futhark_context *ctx = futhark_mc_task_131664->ctx;
    uint64_t futhark_mc_segmap_task_131665_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131665_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131664->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131664->free_n_114463;
    int64_t stl_res_114533 = futhark_mc_task_131664->free_stl_res_114533;
    int64_t j_m_i_114931 = futhark_mc_task_131664->free_j_m_i_114931;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_task_131664->free_mem_123537,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_task_131664->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_task_131664->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_task_131664->free_mem_123546,
                                  .size =0, .references =NULL};
    int64_t iter_130787;
    struct futhark_mc_segmap_parloop_struct_131666
    futhark_mc_segmap_parloop_struct_131666;
    
    futhark_mc_segmap_parloop_struct_131666.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131666.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131666.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131666.free_stl_res_114533 =
        stl_res_114533;
    futhark_mc_segmap_parloop_struct_131666.free_j_m_i_114931 = j_m_i_114931;
    futhark_mc_segmap_parloop_struct_131666.free_mem_123537 = mem_123537.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_123540 = mem_123540.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_123543 = mem_123543.mem;
    futhark_mc_segmap_parloop_struct_131666.free_mem_123546 = mem_123546.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131667_task;
    
    futhark_mc_segmap_parloop_131667_task.name =
        "futhark_mc_segmap_parloop_131667";
    futhark_mc_segmap_parloop_131667_task.fn = futhark_mc_segmap_parloop_131667;
    futhark_mc_segmap_parloop_131667_task.args =
        &futhark_mc_segmap_parloop_struct_131666;
    futhark_mc_segmap_parloop_131667_task.iterations = iterations;
    futhark_mc_segmap_parloop_131667_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131667_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131667_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131667_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131667_task);
    
    if (futhark_mc_segmap_parloop_131667_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131667_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131667_total_end -
                 futhark_mc_segmap_parloop_131667_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131667_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131665_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131665_end -
                 futhark_mc_segmap_task_131665_start;
        
        ctx->futhark_mc_segmap_task_131665_runs[tid]++;
        ctx->futhark_mc_segmap_task_131665_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131665_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131669 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_stl_res_114533;
    int64_t free_j_m_i_114931;
    char *free_mem_123537;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
};
struct futhark_mc_task_131671 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_stl_res_114533;
    int64_t free_gtid_120972;
    char *free_mem_123537;
    float *retval_defunc_2_reduce_res_120976;
};
struct futhark_mc_segred_stage_1_parloop_struct_131674 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_stl_res_114533;
    int64_t free_gtid_120972;
    char *free_mem_123537;
    char *free_reduce_stage_1_tid_res_arr_mem_130805;
};
static int futhark_mc_segred_stage_1_parloop_131675(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_120973,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_131674
    *futhark_mc_segred_stage_1_parloop_struct_131674 =
    (struct futhark_mc_segred_stage_1_parloop_struct_131674 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_131674->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_131675_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131675_start = get_wall_time();
    
    int64_t n_114463 =
            futhark_mc_segred_stage_1_parloop_struct_131674->free_n_114463;
    int64_t stl_res_114533 =
            futhark_mc_segred_stage_1_parloop_struct_131674->free_stl_res_114533;
    int64_t gtid_120972 =
            futhark_mc_segred_stage_1_parloop_struct_131674->free_gtid_120972;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_131674->free_mem_123537,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_130805 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_130805",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_131674->free_reduce_stage_1_tid_res_arr_mem_130805,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130807 = start;
    float x_130797;
    float x_130798;
    float local_acc_130808 = 0.0F;
    
    for (; iter_130807 < end; iter_130807++) {
        int64_t gtid_120974 = iter_130807;
        int64_t slice_130800 = stl_res_114533 + gtid_120974;
        float x_130801 = ((float *) mem_123537.mem)[gtid_120972 * n_114463 +
                                                    slice_130800];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_130797 = local_acc_130808;
        }
        // Load next params
        {
            x_130798 = x_130801;
        }
        // Red body
        {
            float defunc_1_op_res_130799 = x_130797 + x_130798;
            
            local_acc_130808 = defunc_1_op_res_130799;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_130805.mem)[flat_tid_120973] =
        local_acc_130808;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131675_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131675_end -
                 futhark_mc_segred_stage_1_parloop_131675_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_131675_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_131675_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_131675_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_131672(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120973 = tid;
    int num_tasks_130804 = info.nsubtasks;
    struct futhark_mc_task_131671 *futhark_mc_task_131671 =
                                  (struct futhark_mc_task_131671 *) args;
    struct futhark_context *ctx = futhark_mc_task_131671->ctx;
    uint64_t futhark_mc_segred_task_131672_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_131672_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131671->free_n_114463;
    int64_t stl_res_114533 = futhark_mc_task_131671->free_stl_res_114533;
    int64_t gtid_120972 = futhark_mc_task_131671->free_gtid_120972;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_task_131671->free_mem_123537,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_120976 =
          *futhark_mc_task_131671->retval_defunc_2_reduce_res_120976;
    size_t reduce_stage_1_tid_res_arr_mem_130805_cached_sizze_131673 = 0;
    char *reduce_stage_1_tid_res_arr_mem_130805 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_130805_cached_sizze_131673 <
        (size_t) ((int64_t) 4 * num_tasks_130804)) {
        reduce_stage_1_tid_res_arr_mem_130805 =
            realloc(reduce_stage_1_tid_res_arr_mem_130805, (int64_t) 4 *
                    num_tasks_130804);
        reduce_stage_1_tid_res_arr_mem_130805_cached_sizze_131673 =
            (int64_t) 4 * num_tasks_130804;
    }
    
    int64_t iter_130807;
    struct futhark_mc_segred_stage_1_parloop_struct_131674
    futhark_mc_segred_stage_1_parloop_struct_131674;
    
    futhark_mc_segred_stage_1_parloop_struct_131674.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_131674.free_n_114463 = n_114463;
    futhark_mc_segred_stage_1_parloop_struct_131674.free_stl_res_114533 =
        stl_res_114533;
    futhark_mc_segred_stage_1_parloop_struct_131674.free_gtid_120972 =
        gtid_120972;
    futhark_mc_segred_stage_1_parloop_struct_131674.free_mem_123537 =
        mem_123537.mem;
    futhark_mc_segred_stage_1_parloop_struct_131674.free_reduce_stage_1_tid_res_arr_mem_130805 =
        reduce_stage_1_tid_res_arr_mem_130805;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_131675_task;
    
    futhark_mc_segred_stage_1_parloop_131675_task.name =
        "futhark_mc_segred_stage_1_parloop_131675";
    futhark_mc_segred_stage_1_parloop_131675_task.fn =
        futhark_mc_segred_stage_1_parloop_131675;
    futhark_mc_segred_stage_1_parloop_131675_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_131674;
    futhark_mc_segred_stage_1_parloop_131675_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_131675_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_131675_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_131675_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_131675_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_131675_task);
    
    if (futhark_mc_segred_stage_1_parloop_131675_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_131675_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_131675_total_end -
                 futhark_mc_segred_stage_1_parloop_131675_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131675_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131675_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_131675_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_120976 = 0.0F;
    }
    
    float x_130809;
    float x_130810;
    
    for (int32_t i_130812 = 0; i_130812 < num_tasks_130804; i_130812++) {
        flat_tid_120973 = i_130812;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_130809 = defunc_2_reduce_res_120976;
            }
            // load next params
            {
                x_130810 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_130805)[flat_tid_120973];
            }
            // red body
            {
                float defunc_1_op_res_130811 = x_130809 + x_130810;
                
                defunc_2_reduce_res_120976 = defunc_1_op_res_130811;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_130805);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_131672_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_131672_end -
                 futhark_mc_segred_task_131672_start;
        
        ctx->futhark_mc_segred_task_131672_runs[tid]++;
        ctx->futhark_mc_segred_task_131672_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_131672_iter[tid] += iterations;
    }
    *futhark_mc_task_131671->retval_defunc_2_reduce_res_120976 =
        defunc_2_reduce_res_120976;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131670(void *args, int64_t start,
                                            int64_t end, int flat_tid_120971,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131669
    *futhark_mc_segmap_parloop_struct_131669 =
    (struct futhark_mc_segmap_parloop_struct_131669 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131669->ctx;
    uint64_t futhark_mc_segmap_parloop_131670_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131670_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131669->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131669->free_n_114463;
    int64_t stl_res_114533 =
            futhark_mc_segmap_parloop_struct_131669->free_stl_res_114533;
    int64_t j_m_i_114931 =
            futhark_mc_segmap_parloop_struct_131669->free_j_m_i_114931;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_segmap_parloop_struct_131669->free_mem_123537,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_segmap_parloop_struct_131669->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_segmap_parloop_struct_131669->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_segmap_parloop_struct_131669->free_mem_123546,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130796 = start;
    
    for (; iter_130796 < end; iter_130796++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130802 = m_114462;
        int64_t gtid_120972 = iter_130796;
        int64_t remnant_130803 = iter_130796 - gtid_120972;
        float defunc_2_reduce_res_120976;
        int64_t flat_tid_120973 = (int64_t) 0;
        int32_t num_tasks_130804;
        struct futhark_mc_task_131671 futhark_mc_task_131671;
        
        futhark_mc_task_131671.ctx = ctx;
        futhark_mc_task_131671.free_n_114463 = n_114463;
        futhark_mc_task_131671.free_stl_res_114533 = stl_res_114533;
        futhark_mc_task_131671.free_gtid_120972 = gtid_120972;
        futhark_mc_task_131671.free_mem_123537 = mem_123537.mem;
        futhark_mc_task_131671.retval_defunc_2_reduce_res_120976 =
            &defunc_2_reduce_res_120976;
        
        struct scheduler_segop futhark_mc_task_131671_task;
        
        futhark_mc_task_131671_task.args = &futhark_mc_task_131671;
        futhark_mc_task_131671_task.top_level_fn =
            futhark_mc_segred_task_131672;
        futhark_mc_task_131671_task.name = "futhark_mc_segred_task_131672";
        futhark_mc_task_131671_task.iterations = j_m_i_114931;
        futhark_mc_task_131671_task.task_time =
            &ctx->futhark_mc_segred_task_131672_total_time;
        futhark_mc_task_131671_task.task_iter =
            &ctx->futhark_mc_segred_task_131672_total_iter;
        futhark_mc_task_131671_task.sched = STATIC;
        futhark_mc_task_131671_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_131672_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131671_task);
        
        if (futhark_mc_segred_task_131672_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float h_120981 = 3.0F * defunc_2_reduce_res_120976;
        float h9_120982 = 0.999F * h_120981;
        float h1_120983 = 1.0e-3F * h_120981;
        
        ((float *) mem_123540.mem)[gtid_120972] = h_120981;
        ((float *) mem_123543.mem)[gtid_120972] = h9_120982;
        ((float *) mem_123546.mem)[gtid_120972] = h1_120983;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131670_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131670_end -
                 futhark_mc_segmap_parloop_131670_start;
        
        ctx->futhark_mc_segmap_parloop_131670_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131670_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131670_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131668(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120971 = tid;
    int num_tasks_130786 = info.nsubtasks;
    struct futhark_mc_task_131664 *futhark_mc_task_131664 =
                                  (struct futhark_mc_task_131664 *) args;
    struct futhark_context *ctx = futhark_mc_task_131664->ctx;
    uint64_t futhark_mc_segmap_nested_task_131668_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131668_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131664->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131664->free_n_114463;
    int64_t stl_res_114533 = futhark_mc_task_131664->free_stl_res_114533;
    int64_t j_m_i_114931 = futhark_mc_task_131664->free_j_m_i_114931;
    struct memblock mem_123537 = {.desc ="mem_123537", .mem =
                                  futhark_mc_task_131664->free_mem_123537,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_task_131664->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_task_131664->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_task_131664->free_mem_123546,
                                  .size =0, .references =NULL};
    int64_t iter_130796;
    struct futhark_mc_segmap_parloop_struct_131669
    futhark_mc_segmap_parloop_struct_131669;
    
    futhark_mc_segmap_parloop_struct_131669.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131669.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131669.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131669.free_stl_res_114533 =
        stl_res_114533;
    futhark_mc_segmap_parloop_struct_131669.free_j_m_i_114931 = j_m_i_114931;
    futhark_mc_segmap_parloop_struct_131669.free_mem_123537 = mem_123537.mem;
    futhark_mc_segmap_parloop_struct_131669.free_mem_123540 = mem_123540.mem;
    futhark_mc_segmap_parloop_struct_131669.free_mem_123543 = mem_123543.mem;
    futhark_mc_segmap_parloop_struct_131669.free_mem_123546 = mem_123546.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131670_task;
    
    futhark_mc_segmap_parloop_131670_task.name =
        "futhark_mc_segmap_parloop_131670";
    futhark_mc_segmap_parloop_131670_task.fn = futhark_mc_segmap_parloop_131670;
    futhark_mc_segmap_parloop_131670_task.args =
        &futhark_mc_segmap_parloop_struct_131669;
    futhark_mc_segmap_parloop_131670_task.iterations = iterations;
    futhark_mc_segmap_parloop_131670_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131670_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131670_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131670_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131670_task);
    
    if (futhark_mc_segmap_parloop_131670_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131670_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131670_total_end -
                 futhark_mc_segmap_parloop_131670_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131670_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131670_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131670_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131668_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131668_end -
                 futhark_mc_segmap_nested_task_131668_start;
        
        ctx->futhark_mc_segmap_nested_task_131668_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131668_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131668_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131676 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
    char *free_mem_123568;
};
struct futhark_mc_segmap_parloop_struct_131678 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
    char *free_mem_123568;
};
static int futhark_mc_segmap_parloop_131679(void *args, int64_t start,
                                            int64_t end, int flat_tid_120984,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131678
    *futhark_mc_segmap_parloop_struct_131678 =
    (struct futhark_mc_segmap_parloop_struct_131678 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131678->ctx;
    uint64_t futhark_mc_segmap_parloop_131679_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131679_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131678->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131678->free_n_114463;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131678->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131678->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_segmap_parloop_struct_131678->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_segmap_parloop_struct_131678->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_segmap_parloop_struct_131678->free_mem_123546,
                                  .size =0, .references =NULL};
    struct memblock mem_123568 = {.desc ="mem_123568", .mem =
                                  futhark_mc_segmap_parloop_struct_131678->free_mem_123568,
                                  .size =0, .references =NULL};
    size_t mem_123552_cached_sizze_131680 = 0;
    char *mem_123552 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130814 = start;
    
    if (mem_123552_cached_sizze_131680 < (size_t) bytes_121846) {
        mem_123552 = realloc(mem_123552, bytes_121846);
        mem_123552_cached_sizze_131680 = bytes_121846;
    }
    for (; iter_130814 < end; iter_130814++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130835 = m_114462;
        int64_t gtid_120985 = iter_130814;
        int64_t remnant_130836 = iter_130814 - gtid_120985;
        float x_116629 = ((float *) mem_123540.mem)[gtid_120985];
        float x_116630 = ((float *) mem_123543.mem)[gtid_120985];
        float x_116631 = ((float *) mem_123546.mem)[gtid_120985];
        
        for (int64_t i_130815 = 0; i_130815 < n_114463; i_130815++) {
            float x_130817 = ((float *) mem_123361.mem)[gtid_120985 * n_114463 +
                                                        i_130815];
            float x_130818 = x_130817 / x_116629;
            float y_130819 = fpow32(x_130818, 2.0F);
            float x_130820 = 1.0F - y_130819;
            float bicube_130821 = fpow32(x_130820, 2.0F);
            bool isnan_res_130822;
            
            isnan_res_130822 = futrts_isnan32(x_130817);
            
            bool cond_f_res_130823 = x_130817 <= x_116631;
            bool x_130824 = !isnan_res_130822;
            bool y_130825 = cond_f_res_130823 && x_130824;
            bool cond_130826 = isnan_res_130822 || y_130825;
            float defunc_0_f_res_130827;
            
            if (cond_130826) {
                defunc_0_f_res_130827 = 1.0F;
            } else {
                bool cond_130828 = x_116630 <= x_130817;
                bool cond_f_res_130829 = x_130817 <= 1.0e-6F;
                bool x_130830 = !cond_130828;
                bool y_130831 = cond_f_res_130829 && x_130830;
                bool cond_130832 = cond_130828 || y_130831;
                float defunc_0_f_res_f_res_130833;
                
                if (cond_130832) {
                    defunc_0_f_res_f_res_130833 = 1.0e-6F;
                } else {
                    defunc_0_f_res_f_res_130833 = bicube_130821;
                }
                defunc_0_f_res_130827 = defunc_0_f_res_f_res_130833;
            }
            ((float *) mem_123552)[i_130815] = defunc_0_f_res_130827;
        }
        memmove(mem_123568.mem + gtid_120985 * n_114463 * (int64_t) 4,
                mem_123552 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123552);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131679_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131679_end -
                 futhark_mc_segmap_parloop_131679_start;
        
        ctx->futhark_mc_segmap_parloop_131679_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131679_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131679_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131677(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120984 = tid;
    int num_tasks_130813 = info.nsubtasks;
    struct futhark_mc_task_131676 *futhark_mc_task_131676 =
                                  (struct futhark_mc_task_131676 *) args;
    struct futhark_context *ctx = futhark_mc_task_131676->ctx;
    uint64_t futhark_mc_segmap_task_131677_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131677_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131676->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131676->free_n_114463;
    int64_t bytes_121846 = futhark_mc_task_131676->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131676->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_task_131676->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_task_131676->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_task_131676->free_mem_123546,
                                  .size =0, .references =NULL};
    struct memblock mem_123568 = {.desc ="mem_123568", .mem =
                                  futhark_mc_task_131676->free_mem_123568,
                                  .size =0, .references =NULL};
    int64_t iter_130814;
    struct futhark_mc_segmap_parloop_struct_131678
    futhark_mc_segmap_parloop_struct_131678;
    
    futhark_mc_segmap_parloop_struct_131678.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131678.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131678.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131678.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131678.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131678.free_mem_123540 = mem_123540.mem;
    futhark_mc_segmap_parloop_struct_131678.free_mem_123543 = mem_123543.mem;
    futhark_mc_segmap_parloop_struct_131678.free_mem_123546 = mem_123546.mem;
    futhark_mc_segmap_parloop_struct_131678.free_mem_123568 = mem_123568.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131679_task;
    
    futhark_mc_segmap_parloop_131679_task.name =
        "futhark_mc_segmap_parloop_131679";
    futhark_mc_segmap_parloop_131679_task.fn = futhark_mc_segmap_parloop_131679;
    futhark_mc_segmap_parloop_131679_task.args =
        &futhark_mc_segmap_parloop_struct_131678;
    futhark_mc_segmap_parloop_131679_task.iterations = iterations;
    futhark_mc_segmap_parloop_131679_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131679_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131679_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131679_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131679_task);
    
    if (futhark_mc_segmap_parloop_131679_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131679_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131679_total_end -
                 futhark_mc_segmap_parloop_131679_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131679_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131679_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131679_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131677_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131677_end -
                 futhark_mc_segmap_task_131677_start;
        
        ctx->futhark_mc_segmap_task_131677_runs[tid]++;
        ctx->futhark_mc_segmap_task_131677_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131677_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131682 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    int64_t free_bytes_121846;
    char *free_mem_123361;
    char *free_mem_123540;
    char *free_mem_123543;
    char *free_mem_123546;
    char *free_mem_123568;
};
struct futhark_mc_task_131685 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120987;
    float free_x_120991;
    float free_x_120992;
    float free_x_120993;
    char *free_mem_123361;
    char *free_mem_123549;
};
struct futhark_mc_segmap_parloop_struct_131687 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_120987;
    float free_x_120991;
    float free_x_120992;
    float free_x_120993;
    char *free_mem_123361;
    char *free_mem_123549;
};
static int futhark_mc_segmap_parloop_131688(void *args, int64_t start,
                                            int64_t end, int flat_tid_120988,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131687
    *futhark_mc_segmap_parloop_struct_131687 =
    (struct futhark_mc_segmap_parloop_struct_131687 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131687->ctx;
    uint64_t futhark_mc_segmap_parloop_131688_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131688_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131687->free_n_114463;
    int64_t gtid_120987 =
            futhark_mc_segmap_parloop_struct_131687->free_gtid_120987;
    float x_120991 = futhark_mc_segmap_parloop_struct_131687->free_x_120991;
    float x_120992 = futhark_mc_segmap_parloop_struct_131687->free_x_120992;
    float x_120993 = futhark_mc_segmap_parloop_struct_131687->free_x_120993;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131687->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123549 = {.desc ="mem_123549", .mem =
                                  futhark_mc_segmap_parloop_struct_131687->free_mem_123549,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130859 = start;
    
    for (; iter_130859 < end; iter_130859++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130866 = n_114463;
        int64_t gtid_120989 = iter_130859;
        int64_t remnant_130867 = iter_130859 - gtid_120989;
        float x_130839 = ((float *) mem_123361.mem)[gtid_120987 * n_114463 +
                                                    gtid_120989];
        float x_130840 = x_130839 / x_120991;
        float y_130841 = fpow32(x_130840, 2.0F);
        float x_130842 = 1.0F - y_130841;
        float bicube_130843 = fpow32(x_130842, 2.0F);
        bool isnan_res_130844;
        
        isnan_res_130844 = futrts_isnan32(x_130839);
        
        bool cond_f_res_130845 = x_130839 <= x_120993;
        bool x_130846 = !isnan_res_130844;
        bool y_130847 = cond_f_res_130845 && x_130846;
        bool cond_130848 = isnan_res_130844 || y_130847;
        float defunc_0_f_res_130849;
        
        if (cond_130848) {
            defunc_0_f_res_130849 = 1.0F;
        } else {
            bool cond_130860 = x_120992 <= x_130839;
            bool cond_f_res_130861 = x_130839 <= 1.0e-6F;
            bool x_130862 = !cond_130860;
            bool y_130863 = cond_f_res_130861 && x_130862;
            bool cond_130864 = cond_130860 || y_130863;
            float defunc_0_f_res_f_res_130865;
            
            if (cond_130864) {
                defunc_0_f_res_f_res_130865 = 1.0e-6F;
            } else {
                defunc_0_f_res_f_res_130865 = bicube_130843;
            }
            defunc_0_f_res_130849 = defunc_0_f_res_f_res_130865;
        }
        ((float *) mem_123549.mem)[gtid_120989] = defunc_0_f_res_130849;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131688_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131688_end -
                 futhark_mc_segmap_parloop_131688_start;
        
        ctx->futhark_mc_segmap_parloop_131688_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131688_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131688_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131686(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120988 = tid;
    int num_tasks_130858 = info.nsubtasks;
    struct futhark_mc_task_131685 *futhark_mc_task_131685 =
                                  (struct futhark_mc_task_131685 *) args;
    struct futhark_context *ctx = futhark_mc_task_131685->ctx;
    uint64_t futhark_mc_segmap_task_131686_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131686_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131685->free_n_114463;
    int64_t gtid_120987 = futhark_mc_task_131685->free_gtid_120987;
    float x_120991 = futhark_mc_task_131685->free_x_120991;
    float x_120992 = futhark_mc_task_131685->free_x_120992;
    float x_120993 = futhark_mc_task_131685->free_x_120993;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131685->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123549 = {.desc ="mem_123549", .mem =
                                  futhark_mc_task_131685->free_mem_123549,
                                  .size =0, .references =NULL};
    int64_t iter_130859;
    struct futhark_mc_segmap_parloop_struct_131687
    futhark_mc_segmap_parloop_struct_131687;
    
    futhark_mc_segmap_parloop_struct_131687.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131687.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131687.free_gtid_120987 = gtid_120987;
    futhark_mc_segmap_parloop_struct_131687.free_x_120991 = x_120991;
    futhark_mc_segmap_parloop_struct_131687.free_x_120992 = x_120992;
    futhark_mc_segmap_parloop_struct_131687.free_x_120993 = x_120993;
    futhark_mc_segmap_parloop_struct_131687.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131687.free_mem_123549 = mem_123549.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131688_task;
    
    futhark_mc_segmap_parloop_131688_task.name =
        "futhark_mc_segmap_parloop_131688";
    futhark_mc_segmap_parloop_131688_task.fn = futhark_mc_segmap_parloop_131688;
    futhark_mc_segmap_parloop_131688_task.args =
        &futhark_mc_segmap_parloop_struct_131687;
    futhark_mc_segmap_parloop_131688_task.iterations = iterations;
    futhark_mc_segmap_parloop_131688_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131688_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131688_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131688_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131688_task);
    
    if (futhark_mc_segmap_parloop_131688_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131688_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131688_total_end -
                 futhark_mc_segmap_parloop_131688_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131688_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131688_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131688_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131686_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131686_end -
                 futhark_mc_segmap_task_131686_start;
        
        ctx->futhark_mc_segmap_task_131686_runs[tid]++;
        ctx->futhark_mc_segmap_task_131686_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131686_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131683(void *args, int64_t start,
                                            int64_t end, int flat_tid_120986,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131682
    *futhark_mc_segmap_parloop_struct_131682 =
    (struct futhark_mc_segmap_parloop_struct_131682 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131682->ctx;
    uint64_t futhark_mc_segmap_parloop_131683_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131683_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131682->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131682->free_n_114463;
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131682->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_segmap_parloop_struct_131682->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_segmap_parloop_struct_131682->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_segmap_parloop_struct_131682->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_segmap_parloop_struct_131682->free_mem_123546,
                                  .size =0, .references =NULL};
    struct memblock mem_123568 = {.desc ="mem_123568", .mem =
                                  futhark_mc_segmap_parloop_struct_131682->free_mem_123568,
                                  .size =0, .references =NULL};
    size_t mem_123549_cached_sizze_131684 = 0;
    char *mem_123549 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130838 = start;
    
    if (mem_123549_cached_sizze_131684 < (size_t) bytes_121846) {
        mem_123549 = realloc(mem_123549, bytes_121846);
        mem_123549_cached_sizze_131684 = bytes_121846;
    }
    for (; iter_130838 < end; iter_130838++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130856 = m_114462;
        int64_t gtid_120987 = iter_130838;
        int64_t remnant_130857 = iter_130838 - gtid_120987;
        float x_120991 = ((float *) mem_123540.mem)[gtid_120987];
        float x_120992 = ((float *) mem_123543.mem)[gtid_120987];
        float x_120993 = ((float *) mem_123546.mem)[gtid_120987];
        int64_t flat_tid_120988 = (int64_t) 0;
        int32_t num_tasks_130858;
        struct futhark_mc_task_131685 futhark_mc_task_131685;
        
        futhark_mc_task_131685.ctx = ctx;
        futhark_mc_task_131685.free_n_114463 = n_114463;
        futhark_mc_task_131685.free_gtid_120987 = gtid_120987;
        futhark_mc_task_131685.free_x_120991 = x_120991;
        futhark_mc_task_131685.free_x_120992 = x_120992;
        futhark_mc_task_131685.free_x_120993 = x_120993;
        futhark_mc_task_131685.free_mem_123361 = mem_123361.mem;
        futhark_mc_task_131685.free_mem_123549 = mem_123549;
        
        struct scheduler_segop futhark_mc_task_131685_task;
        
        futhark_mc_task_131685_task.args = &futhark_mc_task_131685;
        futhark_mc_task_131685_task.top_level_fn =
            futhark_mc_segmap_task_131686;
        futhark_mc_task_131685_task.name = "futhark_mc_segmap_task_131686";
        futhark_mc_task_131685_task.iterations = n_114463;
        futhark_mc_task_131685_task.task_time =
            &ctx->futhark_mc_segmap_task_131686_total_time;
        futhark_mc_task_131685_task.task_iter =
            &ctx->futhark_mc_segmap_task_131686_total_iter;
        futhark_mc_task_131685_task.sched = STATIC;
        futhark_mc_task_131685_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131686_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131685_task);
        
        if (futhark_mc_segmap_task_131686_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123568.mem + gtid_120987 * n_114463 * (int64_t) 4,
                mem_123549 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123549);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131683_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131683_end -
                 futhark_mc_segmap_parloop_131683_start;
        
        ctx->futhark_mc_segmap_parloop_131683_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131683_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131683_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131681(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_120986 = tid;
    int num_tasks_130813 = info.nsubtasks;
    struct futhark_mc_task_131676 *futhark_mc_task_131676 =
                                  (struct futhark_mc_task_131676 *) args;
    struct futhark_context *ctx = futhark_mc_task_131676->ctx;
    uint64_t futhark_mc_segmap_nested_task_131681_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131681_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131676->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131676->free_n_114463;
    int64_t bytes_121846 = futhark_mc_task_131676->free_bytes_121846;
    struct memblock mem_123361 = {.desc ="mem_123361", .mem =
                                  futhark_mc_task_131676->free_mem_123361,
                                  .size =0, .references =NULL};
    struct memblock mem_123540 = {.desc ="mem_123540", .mem =
                                  futhark_mc_task_131676->free_mem_123540,
                                  .size =0, .references =NULL};
    struct memblock mem_123543 = {.desc ="mem_123543", .mem =
                                  futhark_mc_task_131676->free_mem_123543,
                                  .size =0, .references =NULL};
    struct memblock mem_123546 = {.desc ="mem_123546", .mem =
                                  futhark_mc_task_131676->free_mem_123546,
                                  .size =0, .references =NULL};
    struct memblock mem_123568 = {.desc ="mem_123568", .mem =
                                  futhark_mc_task_131676->free_mem_123568,
                                  .size =0, .references =NULL};
    int64_t iter_130838;
    struct futhark_mc_segmap_parloop_struct_131682
    futhark_mc_segmap_parloop_struct_131682;
    
    futhark_mc_segmap_parloop_struct_131682.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131682.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131682.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131682.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131682.free_mem_123361 = mem_123361.mem;
    futhark_mc_segmap_parloop_struct_131682.free_mem_123540 = mem_123540.mem;
    futhark_mc_segmap_parloop_struct_131682.free_mem_123543 = mem_123543.mem;
    futhark_mc_segmap_parloop_struct_131682.free_mem_123546 = mem_123546.mem;
    futhark_mc_segmap_parloop_struct_131682.free_mem_123568 = mem_123568.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131683_task;
    
    futhark_mc_segmap_parloop_131683_task.name =
        "futhark_mc_segmap_parloop_131683";
    futhark_mc_segmap_parloop_131683_task.fn = futhark_mc_segmap_parloop_131683;
    futhark_mc_segmap_parloop_131683_task.args =
        &futhark_mc_segmap_parloop_struct_131682;
    futhark_mc_segmap_parloop_131683_task.iterations = iterations;
    futhark_mc_segmap_parloop_131683_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131683_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131683_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131683_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131683_task);
    
    if (futhark_mc_segmap_parloop_131683_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131683_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131683_total_end -
                 futhark_mc_segmap_parloop_131683_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131683_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131683_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131683_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131681_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131681_end -
                 futhark_mc_segmap_nested_task_131681_start;
        
        ctx->futhark_mc_segmap_nested_task_131681_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131681_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131681_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_131689 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123578;
    char *free_ext_mem_123579;
    int64_t free_ext_123590;
    char *free_mem_123622;
};
struct futhark_mc_segmap_parloop_struct_131691 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123578;
    char *free_ext_mem_123579;
    int64_t free_ext_123590;
    char *free_mem_123622;
};
static int futhark_mc_segmap_parloop_131692(void *args, int64_t start,
                                            int64_t end, int flat_tid_121012,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131691
    *futhark_mc_segmap_parloop_struct_131691 =
    (struct futhark_mc_segmap_parloop_struct_131691 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131691->ctx;
    uint64_t futhark_mc_segmap_parloop_131692_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131692_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131691->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131691->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131691->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131691->free_bytes_121846;
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_segmap_parloop_struct_131691->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_segmap_parloop_struct_131691->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 =
            futhark_mc_segmap_parloop_struct_131691->free_ext_123590;
    struct memblock mem_123622 = {.desc ="mem_123622", .mem =
                                  futhark_mc_segmap_parloop_struct_131691->free_mem_123622,
                                  .size =0, .references =NULL};
    size_t mem_123606_cached_sizze_131693 = 0;
    char *mem_123606 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130869 = start;
    
    if (mem_123606_cached_sizze_131693 < (size_t) bytes_121846) {
        mem_123606 = realloc(mem_123606, bytes_121846);
        mem_123606_cached_sizze_131693 = bytes_121846;
    }
    for (; iter_130869 < end; iter_130869++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130878 = m_114462;
        int64_t gtid_121013 = iter_130869;
        int64_t remnant_130879 = iter_130869 - gtid_121013;
        
        for (int64_t i_130870 = 0; i_130870 < n_114463; i_130870++) {
            float x_130872 = ((float *) Y_mem_121802.mem)[gtid_121013 *
                                                          n_114463 + i_130870];
            float x_130873 = ((float *) ext_mem_123579.mem)[gtid_121013 *
                                                            n_114463 +
                                                            i_130870];
            float x_130874 = ((float *) ext_mem_123578.mem)[gtid_121013 *
                                                            ext_123590 +
                                                            i_130870];
            float x_130875 = x_130872 - x_130873;
            float defunc_2_f_res_130876 = x_130875 - x_130874;
            
            ((float *) mem_123606)[i_130870] = defunc_2_f_res_130876;
        }
        memmove(mem_123622.mem + gtid_121013 * n_114463 * (int64_t) 4,
                mem_123606 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123606);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131692_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131692_end -
                 futhark_mc_segmap_parloop_131692_start;
        
        ctx->futhark_mc_segmap_parloop_131692_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131692_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131692_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131690(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121012 = tid;
    int num_tasks_130868 = info.nsubtasks;
    struct futhark_mc_task_131689 *futhark_mc_task_131689 =
                                  (struct futhark_mc_task_131689 *) args;
    struct futhark_context *ctx = futhark_mc_task_131689->ctx;
    uint64_t futhark_mc_segmap_task_131690_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131690_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131689->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131689->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131689->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131689->free_bytes_121846;
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_task_131689->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_task_131689->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 = futhark_mc_task_131689->free_ext_123590;
    struct memblock mem_123622 = {.desc ="mem_123622", .mem =
                                  futhark_mc_task_131689->free_mem_123622,
                                  .size =0, .references =NULL};
    int64_t iter_130869;
    struct futhark_mc_segmap_parloop_struct_131691
    futhark_mc_segmap_parloop_struct_131691;
    
    futhark_mc_segmap_parloop_struct_131691.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131691.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131691.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131691.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131691.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131691.free_ext_mem_123578 =
        ext_mem_123578.mem;
    futhark_mc_segmap_parloop_struct_131691.free_ext_mem_123579 =
        ext_mem_123579.mem;
    futhark_mc_segmap_parloop_struct_131691.free_ext_123590 = ext_123590;
    futhark_mc_segmap_parloop_struct_131691.free_mem_123622 = mem_123622.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131692_task;
    
    futhark_mc_segmap_parloop_131692_task.name =
        "futhark_mc_segmap_parloop_131692";
    futhark_mc_segmap_parloop_131692_task.fn = futhark_mc_segmap_parloop_131692;
    futhark_mc_segmap_parloop_131692_task.args =
        &futhark_mc_segmap_parloop_struct_131691;
    futhark_mc_segmap_parloop_131692_task.iterations = iterations;
    futhark_mc_segmap_parloop_131692_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131692_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131692_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131692_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131692_task);
    
    if (futhark_mc_segmap_parloop_131692_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131692_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131692_total_end -
                 futhark_mc_segmap_parloop_131692_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131692_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131692_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131692_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131690_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131690_end -
                 futhark_mc_segmap_task_131690_start;
        
        ctx->futhark_mc_segmap_task_131690_runs[tid]++;
        ctx->futhark_mc_segmap_task_131690_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131690_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_131695 {
    struct futhark_context *ctx;
    int64_t free_m_114462;
    int64_t free_n_114463;
    char *free_Y_mem_121802;
    int64_t free_bytes_121846;
    char *free_ext_mem_123578;
    char *free_ext_mem_123579;
    int64_t free_ext_123590;
    char *free_mem_123622;
};
struct futhark_mc_task_131698 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_121015;
    char *free_Y_mem_121802;
    char *free_ext_mem_123578;
    char *free_ext_mem_123579;
    int64_t free_ext_123590;
    char *free_mem_123603;
};
struct futhark_mc_segmap_parloop_struct_131700 {
    struct futhark_context *ctx;
    int64_t free_n_114463;
    int64_t free_gtid_121015;
    char *free_Y_mem_121802;
    char *free_ext_mem_123578;
    char *free_ext_mem_123579;
    int64_t free_ext_123590;
    char *free_mem_123603;
};
static int futhark_mc_segmap_parloop_131701(void *args, int64_t start,
                                            int64_t end, int flat_tid_121016,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131700
    *futhark_mc_segmap_parloop_struct_131700 =
    (struct futhark_mc_segmap_parloop_struct_131700 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131700->ctx;
    uint64_t futhark_mc_segmap_parloop_131701_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131701_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131700->free_n_114463;
    int64_t gtid_121015 =
            futhark_mc_segmap_parloop_struct_131700->free_gtid_121015;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131700->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_segmap_parloop_struct_131700->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_segmap_parloop_struct_131700->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 =
            futhark_mc_segmap_parloop_struct_131700->free_ext_123590;
    struct memblock mem_123603 = {.desc ="mem_123603", .mem =
                                  futhark_mc_segmap_parloop_struct_131700->free_mem_123603,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_130890 = start;
    
    for (; iter_130890 < end; iter_130890++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130891 = n_114463;
        int64_t gtid_121017 = iter_130890;
        int64_t remnant_130892 = iter_130890 - gtid_121017;
        float x_130882 = ((float *) Y_mem_121802.mem)[gtid_121015 * n_114463 +
                                                      gtid_121017];
        float x_130883 = ((float *) ext_mem_123579.mem)[gtid_121015 * n_114463 +
                                                        gtid_121017];
        float x_130884 = ((float *) ext_mem_123578.mem)[gtid_121015 *
                                                        ext_123590 +
                                                        gtid_121017];
        float x_130885 = x_130882 - x_130883;
        float defunc_2_f_res_130886 = x_130885 - x_130884;
        
        ((float *) mem_123603.mem)[gtid_121017] = defunc_2_f_res_130886;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131701_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131701_end -
                 futhark_mc_segmap_parloop_131701_start;
        
        ctx->futhark_mc_segmap_parloop_131701_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131701_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131701_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_131699(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121016 = tid;
    int num_tasks_130889 = info.nsubtasks;
    struct futhark_mc_task_131698 *futhark_mc_task_131698 =
                                  (struct futhark_mc_task_131698 *) args;
    struct futhark_context *ctx = futhark_mc_task_131698->ctx;
    uint64_t futhark_mc_segmap_task_131699_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_131699_start = get_wall_time();
    
    int64_t n_114463 = futhark_mc_task_131698->free_n_114463;
    int64_t gtid_121015 = futhark_mc_task_131698->free_gtid_121015;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131698->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_task_131698->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_task_131698->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 = futhark_mc_task_131698->free_ext_123590;
    struct memblock mem_123603 = {.desc ="mem_123603", .mem =
                                  futhark_mc_task_131698->free_mem_123603,
                                  .size =0, .references =NULL};
    int64_t iter_130890;
    struct futhark_mc_segmap_parloop_struct_131700
    futhark_mc_segmap_parloop_struct_131700;
    
    futhark_mc_segmap_parloop_struct_131700.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131700.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131700.free_gtid_121015 = gtid_121015;
    futhark_mc_segmap_parloop_struct_131700.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131700.free_ext_mem_123578 =
        ext_mem_123578.mem;
    futhark_mc_segmap_parloop_struct_131700.free_ext_mem_123579 =
        ext_mem_123579.mem;
    futhark_mc_segmap_parloop_struct_131700.free_ext_123590 = ext_123590;
    futhark_mc_segmap_parloop_struct_131700.free_mem_123603 = mem_123603.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131701_task;
    
    futhark_mc_segmap_parloop_131701_task.name =
        "futhark_mc_segmap_parloop_131701";
    futhark_mc_segmap_parloop_131701_task.fn = futhark_mc_segmap_parloop_131701;
    futhark_mc_segmap_parloop_131701_task.args =
        &futhark_mc_segmap_parloop_struct_131700;
    futhark_mc_segmap_parloop_131701_task.iterations = iterations;
    futhark_mc_segmap_parloop_131701_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131701_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131701_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131701_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131701_task);
    
    if (futhark_mc_segmap_parloop_131701_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131701_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131701_total_end -
                 futhark_mc_segmap_parloop_131701_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131701_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131701_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131701_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_131699_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_131699_end -
                 futhark_mc_segmap_task_131699_start;
        
        ctx->futhark_mc_segmap_task_131699_runs[tid]++;
        ctx->futhark_mc_segmap_task_131699_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_131699_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_131696(void *args, int64_t start,
                                            int64_t end, int flat_tid_121014,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_131695
    *futhark_mc_segmap_parloop_struct_131695 =
    (struct futhark_mc_segmap_parloop_struct_131695 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_131695->ctx;
    uint64_t futhark_mc_segmap_parloop_131696_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131696_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_segmap_parloop_struct_131695->free_m_114462;
    int64_t n_114463 = futhark_mc_segmap_parloop_struct_131695->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_segmap_parloop_struct_131695->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 =
            futhark_mc_segmap_parloop_struct_131695->free_bytes_121846;
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_segmap_parloop_struct_131695->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_segmap_parloop_struct_131695->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 =
            futhark_mc_segmap_parloop_struct_131695->free_ext_123590;
    struct memblock mem_123622 = {.desc ="mem_123622", .mem =
                                  futhark_mc_segmap_parloop_struct_131695->free_mem_123622,
                                  .size =0, .references =NULL};
    size_t mem_123603_cached_sizze_131697 = 0;
    char *mem_123603 = NULL;
    int64_t iterations = end - start;
    int64_t iter_130881 = start;
    
    if (mem_123603_cached_sizze_131697 < (size_t) bytes_121846) {
        mem_123603 = realloc(mem_123603, bytes_121846);
        mem_123603_cached_sizze_131697 = bytes_121846;
    }
    for (; iter_130881 < end; iter_130881++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_130887 = m_114462;
        int64_t gtid_121015 = iter_130881;
        int64_t remnant_130888 = iter_130881 - gtid_121015;
        int64_t flat_tid_121016 = (int64_t) 0;
        int32_t num_tasks_130889;
        struct futhark_mc_task_131698 futhark_mc_task_131698;
        
        futhark_mc_task_131698.ctx = ctx;
        futhark_mc_task_131698.free_n_114463 = n_114463;
        futhark_mc_task_131698.free_gtid_121015 = gtid_121015;
        futhark_mc_task_131698.free_Y_mem_121802 = Y_mem_121802.mem;
        futhark_mc_task_131698.free_ext_mem_123578 = ext_mem_123578.mem;
        futhark_mc_task_131698.free_ext_mem_123579 = ext_mem_123579.mem;
        futhark_mc_task_131698.free_ext_123590 = ext_123590;
        futhark_mc_task_131698.free_mem_123603 = mem_123603;
        
        struct scheduler_segop futhark_mc_task_131698_task;
        
        futhark_mc_task_131698_task.args = &futhark_mc_task_131698;
        futhark_mc_task_131698_task.top_level_fn =
            futhark_mc_segmap_task_131699;
        futhark_mc_task_131698_task.name = "futhark_mc_segmap_task_131699";
        futhark_mc_task_131698_task.iterations = n_114463;
        futhark_mc_task_131698_task.task_time =
            &ctx->futhark_mc_segmap_task_131699_total_time;
        futhark_mc_task_131698_task.task_iter =
            &ctx->futhark_mc_segmap_task_131699_total_iter;
        futhark_mc_task_131698_task.sched = STATIC;
        futhark_mc_task_131698_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_131699_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_131698_task);
        
        if (futhark_mc_segmap_task_131699_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_123622.mem + gtid_121015 * n_114463 * (int64_t) 4,
                mem_123603 + (int64_t) 0, n_114463 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_123603);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131696_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131696_end -
                 futhark_mc_segmap_parloop_131696_start;
        
        ctx->futhark_mc_segmap_parloop_131696_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_131696_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_131696_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_131694(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_121014 = tid;
    int num_tasks_130868 = info.nsubtasks;
    struct futhark_mc_task_131689 *futhark_mc_task_131689 =
                                  (struct futhark_mc_task_131689 *) args;
    struct futhark_context *ctx = futhark_mc_task_131689->ctx;
    uint64_t futhark_mc_segmap_nested_task_131694_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_131694_start = get_wall_time();
    
    int64_t m_114462 = futhark_mc_task_131689->free_m_114462;
    int64_t n_114463 = futhark_mc_task_131689->free_n_114463;
    struct memblock Y_mem_121802 = {.desc ="Y_mem_121802", .mem =
                                    futhark_mc_task_131689->free_Y_mem_121802,
                                    .size =0, .references =NULL};
    int64_t bytes_121846 = futhark_mc_task_131689->free_bytes_121846;
    struct memblock ext_mem_123578 = {.desc ="ext_mem_123578", .mem =
                                      futhark_mc_task_131689->free_ext_mem_123578,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_123579 = {.desc ="ext_mem_123579", .mem =
                                      futhark_mc_task_131689->free_ext_mem_123579,
                                      .size =0, .references =NULL};
    int64_t ext_123590 = futhark_mc_task_131689->free_ext_123590;
    struct memblock mem_123622 = {.desc ="mem_123622", .mem =
                                  futhark_mc_task_131689->free_mem_123622,
                                  .size =0, .references =NULL};
    int64_t iter_130881;
    struct futhark_mc_segmap_parloop_struct_131695
    futhark_mc_segmap_parloop_struct_131695;
    
    futhark_mc_segmap_parloop_struct_131695.ctx = ctx;
    futhark_mc_segmap_parloop_struct_131695.free_m_114462 = m_114462;
    futhark_mc_segmap_parloop_struct_131695.free_n_114463 = n_114463;
    futhark_mc_segmap_parloop_struct_131695.free_Y_mem_121802 =
        Y_mem_121802.mem;
    futhark_mc_segmap_parloop_struct_131695.free_bytes_121846 = bytes_121846;
    futhark_mc_segmap_parloop_struct_131695.free_ext_mem_123578 =
        ext_mem_123578.mem;
    futhark_mc_segmap_parloop_struct_131695.free_ext_mem_123579 =
        ext_mem_123579.mem;
    futhark_mc_segmap_parloop_struct_131695.free_ext_123590 = ext_123590;
    futhark_mc_segmap_parloop_struct_131695.free_mem_123622 = mem_123622.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_131696_task;
    
    futhark_mc_segmap_parloop_131696_task.name =
        "futhark_mc_segmap_parloop_131696";
    futhark_mc_segmap_parloop_131696_task.fn = futhark_mc_segmap_parloop_131696;
    futhark_mc_segmap_parloop_131696_task.args =
        &futhark_mc_segmap_parloop_struct_131695;
    futhark_mc_segmap_parloop_131696_task.iterations = iterations;
    futhark_mc_segmap_parloop_131696_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_131696_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_131696_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_131696_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_131696_task);
    
    if (futhark_mc_segmap_parloop_131696_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_131696_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_131696_total_end -
                 futhark_mc_segmap_parloop_131696_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131696_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131696_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_131696_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_131694_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_131694_end -
                 futhark_mc_segmap_nested_task_131694_start;
        
        ctx->futhark_mc_segmap_nested_task_131694_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_131694_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_131694_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_130893,
                             struct memblock *mem_out_p_130894,
                             struct memblock *mem_out_p_130895,
                             struct memblock Y_mem_121802, int64_t m_114462,
                             int64_t n_114463, int64_t n_p_114465,
                             int64_t t_window_114466, int64_t l_window_114467,
                             int64_t t_degree_114468, int64_t l_degree_114469,
                             int64_t t_jump_114470, int64_t l_jump_114471,
                             int64_t inner_114472, int64_t outer_114473,
                             int64_t jump_threshold_114474,
                             int64_t max_group_sizze_114475)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_121842_cached_sizze_130896 = 0;
    char *mem_121842 = NULL;
    size_t mem_121845_cached_sizze_130897 = 0;
    char *mem_121845 = NULL;
    size_t mem_121867_cached_sizze_130898 = 0;
    char *mem_121867 = NULL;
    size_t mem_121889_cached_sizze_130899 = 0;
    char *mem_121889 = NULL;
    size_t mem_121911_cached_sizze_130900 = 0;
    char *mem_121911 = NULL;
    size_t mem_121987_cached_sizze_130901 = 0;
    char *mem_121987 = NULL;
    size_t mem_121991_cached_sizze_130902 = 0;
    char *mem_121991 = NULL;
    size_t mem_122067_cached_sizze_130903 = 0;
    char *mem_122067 = NULL;
    size_t mem_122071_cached_sizze_130904 = 0;
    char *mem_122071 = NULL;
    size_t mem_122147_cached_sizze_130905 = 0;
    char *mem_122147 = NULL;
    size_t mem_122169_cached_sizze_130906 = 0;
    char *mem_122169 = NULL;
    size_t mem_122191_cached_sizze_130907 = 0;
    char *mem_122191 = NULL;
    size_t mem_122249_cached_sizze_130908 = 0;
    char *mem_122249 = NULL;
    size_t mem_122818_cached_sizze_130909 = 0;
    char *mem_122818 = NULL;
    size_t mem_122822_cached_sizze_130910 = 0;
    char *mem_122822 = NULL;
    size_t mem_123361_cached_sizze_130911 = 0;
    char *mem_123361 = NULL;
    size_t mem_123383_cached_sizze_130912 = 0;
    char *mem_123383 = NULL;
    size_t mem_123537_cached_sizze_130913 = 0;
    char *mem_123537 = NULL;
    size_t mem_123540_cached_sizze_130914 = 0;
    char *mem_123540 = NULL;
    size_t mem_123543_cached_sizze_130915 = 0;
    char *mem_123543 = NULL;
    size_t mem_123546_cached_sizze_130916 = 0;
    char *mem_123546 = NULL;
    struct memblock mem_out_123691;
    
    mem_out_123691.references = NULL;
    
    struct memblock mem_out_123692;
    
    mem_out_123692.references = NULL;
    
    struct memblock mem_out_123693;
    
    mem_out_123693.references = NULL;
    
    bool assert_cond_114476 = sle64((int64_t) 4, n_p_114465);
    bool assert_c_114477;
    
    if (!assert_cond_114476) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:67:13-33\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114478 = smod64(t_window_114466, (int64_t) 2);
    bool assert_cond_114479 = x_114478 == (int64_t) 1;
    bool assert_c_114480;
    
    if (!assert_cond_114479) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114481 = slt64((int64_t) 0, t_window_114466);
    bool assert_c_114482;
    
    if (!assert_cond_114481) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114483 = smod64(l_window_114467, (int64_t) 2);
    bool assert_cond_114484 = x_114483 == (int64_t) 1;
    bool assert_c_114485;
    
    if (!assert_cond_114484) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114486 = slt64((int64_t) 0, l_window_114467);
    bool assert_c_114487;
    
    if (!assert_cond_114486) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool cond_114488 = sle64((int64_t) 0, t_degree_114468);
    bool assert_cond_t_res_114489 = sle64(t_degree_114468, (int64_t) 2);
    bool x_114490 = cond_114488 && assert_cond_t_res_114489;
    bool assert_c_114491;
    
    if (!x_114490) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:72:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool cond_114492 = sle64((int64_t) 0, l_degree_114469);
    bool assert_cond_t_res_114493 = sle64(l_degree_114469, (int64_t) 2);
    bool x_114494 = cond_114492 && assert_cond_t_res_114493;
    bool assert_c_114495;
    
    if (!x_114494) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:73:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114496 = sle64((int64_t) 0, t_jump_114470);
    bool assert_c_114497;
    
    if (!assert_cond_114496) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:75:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114498 = sle64((int64_t) 0, l_jump_114471);
    bool assert_c_114499;
    
    if (!assert_cond_114498) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:76:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114500 = slt64((int64_t) 0, inner_114472);
    bool assert_c_114501;
    
    if (!assert_cond_114500) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  stl.fut:78:15-29\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_114502 = sle64((int64_t) 0, outer_114473);
    bool assert_c_114503;
    
    if (!assert_cond_114502) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:79:15-32\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    float i64_res_114504 = sitofp_i64_f32(n_114463);
    float i64_res_114505 = sitofp_i64_f32(n_p_114465);
    float binop_p_114506 = i64_res_114504 / i64_res_114505;
    float defunc_0_f_res_114507;
    
    defunc_0_f_res_114507 = futrts_ceil32(binop_p_114506);
    
    int64_t defunc_0_f_res_114508 = fptosi_f32_i64(defunc_0_f_res_114507);
    int64_t css_chunk_len_114509 = add64((int64_t) 2, defunc_0_f_res_114508);
    int64_t y_114510 = mul64((int64_t) 2, n_p_114465);
    int64_t C_len_114511 = add64(n_114463, y_114510);
    bool cond_114512 = l_jump_114471 == (int64_t) 1;
    int64_t l_n_m_114513;
    
    if (cond_114512) {
        l_n_m_114513 = n_114463;
    } else {
        bool zzero_114514 = l_jump_114471 == (int64_t) 0;
        bool nonzzero_114515 = !zzero_114514;
        bool nonzzero_cert_114516;
        
        if (!nonzzero_114515) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:87:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_114517 = sdiv64(n_114463, l_jump_114471);
        int64_t l_n_m_f_res_114518 = add64((int64_t) 1, x_114517);
        
        l_n_m_114513 = l_n_m_f_res_114518;
    }
    
    bool cond_114519 = t_jump_114470 == (int64_t) 1;
    int64_t t_n_m_114520;
    
    if (cond_114519) {
        t_n_m_114520 = n_114463;
    } else {
        bool zzero_114521 = t_jump_114470 == (int64_t) 0;
        bool nonzzero_114522 = !zzero_114521;
        bool nonzzero_cert_114523;
        
        if (!nonzzero_114522) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:91:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_114524 = sdiv64(n_114463, t_jump_114470);
        int64_t t_n_m_f_res_114525 = add64((int64_t) 1, x_114524);
        
        t_n_m_114520 = t_n_m_f_res_114525;
    }
    
    float x_114526 = i64_res_114504 / 2.0F;
    float floor_arg_114527 = 1.0F + x_114526;
    float floor_res_114528;
    
    floor_res_114528 = futrts_floor32(floor_arg_114527);
    
    int64_t defunc_0_f_res_114529 = fptosi_f32_i64(floor_res_114528);
    int64_t x_114530 = sub64(n_114463, defunc_0_f_res_114529);
    int64_t mid2_114531 = add64((int64_t) 1, x_114530);
    bool cond_114532 = defunc_0_f_res_114529 == mid2_114531;
    int64_t stl_res_114533;
    int64_t stl_res_114534;
    
    if (cond_114532) {
        int64_t stl_res_t_res_114535 = sub64(defunc_0_f_res_114529,
                                             (int64_t) 1);
        
        stl_res_114533 = stl_res_t_res_114535;
        stl_res_114534 = defunc_0_f_res_114529;
    } else {
        int64_t min_res_114536 = smin64(defunc_0_f_res_114529, mid2_114531);
        int64_t stl_res_f_res_114537 = sub64(min_res_114536, (int64_t) 1);
        int64_t max_res_114538 = smax64(defunc_0_f_res_114529, mid2_114531);
        
        stl_res_114533 = stl_res_f_res_114537;
        stl_res_114534 = max_res_114538;
    }
    
    int64_t i_114539 = sub64(n_114463, (int64_t) 1);
    bool x_114540 = sle64((int64_t) 0, i_114539);
    bool y_114541 = slt64(i_114539, n_114463);
    bool bounds_check_114542 = x_114540 && y_114541;
    bool index_certs_114543;
    
    if (!bounds_check_114542) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_114539,
                               "] out of bounds for array of shape [",
                               (long long) n_114463, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  stl.fut:105:31-49\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_121840 = m_114462 * n_114463;
    int64_t binop_y_121841 = (int64_t) 8 * binop_x_121840;
    int64_t bytes_121839 = smax64((int64_t) 0, binop_y_121841);
    
    if (mem_121842_cached_sizze_130896 < (size_t) bytes_121839) {
        mem_121842 = realloc(mem_121842, bytes_121839);
        mem_121842_cached_sizze_130896 = bytes_121839;
    }
    
    int64_t binop_y_121844 = (int64_t) 8 * m_114462;
    int64_t bytes_121843 = smax64((int64_t) 0, binop_y_121844);
    
    if (mem_121845_cached_sizze_130897 < (size_t) bytes_121843) {
        mem_121845 = realloc(mem_121845, bytes_121843);
        mem_121845_cached_sizze_130897 = bytes_121843;
    }
    
    int64_t binop_y_121804 = (int64_t) 8 * n_114463;
    int64_t bytes_121803 = smax64((int64_t) 0, binop_y_121804);
    int64_t flat_tid_116662 = (int64_t) 0;
    int32_t num_tasks_123694;
    int64_t flat_tid_116664 = (int64_t) 0;
    struct futhark_mc_task_130917 futhark_mc_task_130917;
    
    futhark_mc_task_130917.ctx = ctx;
    futhark_mc_task_130917.free_m_114462 = m_114462;
    futhark_mc_task_130917.free_n_114463 = n_114463;
    futhark_mc_task_130917.free_i_114539 = i_114539;
    futhark_mc_task_130917.free_Y_mem_121802 = Y_mem_121802.mem;
    futhark_mc_task_130917.free_bytes_121803 = bytes_121803;
    futhark_mc_task_130917.free_mem_121842 = mem_121842;
    futhark_mc_task_130917.free_mem_121845 = mem_121845;
    
    struct scheduler_segop futhark_mc_task_130917_task;
    
    futhark_mc_task_130917_task.args = &futhark_mc_task_130917;
    futhark_mc_task_130917_task.top_level_fn = futhark_mc_segmap_task_130918;
    futhark_mc_task_130917_task.name = "futhark_mc_segmap_task_130918";
    futhark_mc_task_130917_task.iterations = m_114462;
    futhark_mc_task_130917_task.task_time =
        &ctx->futhark_mc_segmap_task_130918_total_time;
    futhark_mc_task_130917_task.task_iter =
        &ctx->futhark_mc_segmap_task_130918_total_iter;
    futhark_mc_task_130917_task.sched = STATIC;
    futhark_mc_task_130917_task.nested_fn =
        futhark_mc_segmap_nested_task_130923;
    
    int futhark_mc_segmap_task_130918_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_130917_task);
    
    if (futhark_mc_segmap_task_130918_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_121866 = (int64_t) 4 * binop_x_121840;
    int64_t bytes_121864 = smax64((int64_t) 0, binop_y_121866);
    
    if (mem_121867_cached_sizze_130898 < (size_t) bytes_121864) {
        mem_121867 = realloc(mem_121867, bytes_121864);
        mem_121867_cached_sizze_130898 = bytes_121864;
    }
    
    int64_t binop_y_121847 = (int64_t) 4 * n_114463;
    int64_t bytes_121846 = smax64((int64_t) 0, binop_y_121847);
    int64_t flat_tid_116689 = (int64_t) 0;
    int32_t num_tasks_123757;
    int64_t flat_tid_116691 = (int64_t) 0;
    struct futhark_mc_task_130939 futhark_mc_task_130939;
    
    futhark_mc_task_130939.ctx = ctx;
    futhark_mc_task_130939.free_m_114462 = m_114462;
    futhark_mc_task_130939.free_n_114463 = n_114463;
    futhark_mc_task_130939.free_mem_121842 = mem_121842;
    futhark_mc_task_130939.free_bytes_121846 = bytes_121846;
    futhark_mc_task_130939.free_mem_121867 = mem_121867;
    
    struct scheduler_segop futhark_mc_task_130939_task;
    
    futhark_mc_task_130939_task.args = &futhark_mc_task_130939;
    futhark_mc_task_130939_task.top_level_fn = futhark_mc_segmap_task_130940;
    futhark_mc_task_130939_task.name = "futhark_mc_segmap_task_130940";
    futhark_mc_task_130939_task.iterations = m_114462;
    futhark_mc_task_130939_task.task_time =
        &ctx->futhark_mc_segmap_task_130940_total_time;
    futhark_mc_task_130939_task.task_iter =
        &ctx->futhark_mc_segmap_task_130940_total_iter;
    futhark_mc_task_130939_task.sched = STATIC;
    futhark_mc_task_130939_task.nested_fn =
        futhark_mc_segmap_nested_task_130944;
    
    int futhark_mc_segmap_task_130940_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_130939_task);
    
    if (futhark_mc_segmap_task_130940_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_114574 = slt64(n_p_114465, (int64_t) 0);
    bool valid_114575 = !bounds_invalid_upwards_114574;
    bool range_valid_c_114576;
    
    if (!valid_114575) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_114465, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:111:5-121:14\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114578 = slt64(css_chunk_len_114509,
                                               (int64_t) 0);
    bool valid_114579 = !bounds_invalid_upwards_114578;
    bool range_valid_c_114580;
    
    if (!valid_114579) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) css_chunk_len_114509, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:114:17-120:39\n   #3  /prelude/soacs.fut:59:3-10\n   #4  /prelude/array.fut:195:3-17\n   #5  stl.fut:111:5-121:14\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_121887 = n_p_114465 * css_chunk_len_114509;
    int64_t binop_y_121888 = (int64_t) 8 * binop_x_121887;
    int64_t bytes_121886 = smax64((int64_t) 0, binop_y_121888);
    
    if (mem_121889_cached_sizze_130899 < (size_t) bytes_121886) {
        mem_121889 = realloc(mem_121889, bytes_121886);
        mem_121889_cached_sizze_130899 = bytes_121886;
    }
    
    int64_t binop_y_121869 = (int64_t) 8 * css_chunk_len_114509;
    int64_t bytes_121868 = smax64((int64_t) 0, binop_y_121869);
    int64_t flat_tid_116699 = (int64_t) 0;
    int32_t num_tasks_123776;
    int64_t flat_tid_116701 = (int64_t) 0;
    struct futhark_mc_task_130952 futhark_mc_task_130952;
    
    futhark_mc_task_130952.ctx = ctx;
    futhark_mc_task_130952.free_n_p_114465 = n_p_114465;
    futhark_mc_task_130952.free_css_chunk_len_114509 = css_chunk_len_114509;
    futhark_mc_task_130952.free_i_114539 = i_114539;
    futhark_mc_task_130952.free_bytes_121868 = bytes_121868;
    futhark_mc_task_130952.free_mem_121889 = mem_121889;
    
    struct scheduler_segop futhark_mc_task_130952_task;
    
    futhark_mc_task_130952_task.args = &futhark_mc_task_130952;
    futhark_mc_task_130952_task.top_level_fn = futhark_mc_segmap_task_130953;
    futhark_mc_task_130952_task.name = "futhark_mc_segmap_task_130953";
    futhark_mc_task_130952_task.iterations = n_p_114465;
    futhark_mc_task_130952_task.task_time =
        &ctx->futhark_mc_segmap_task_130953_total_time;
    futhark_mc_task_130952_task.task_iter =
        &ctx->futhark_mc_segmap_task_130953_total_iter;
    futhark_mc_task_130952_task.sched = STATIC;
    futhark_mc_task_130952_task.nested_fn =
        futhark_mc_segmap_nested_task_130957;
    
    int futhark_mc_segmap_task_130953_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_130952_task);
    
    if (futhark_mc_segmap_task_130953_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_x_121909 = m_114462 * n_p_114465;
    int64_t binop_y_121910 = (int64_t) 4 * binop_x_121909;
    int64_t bytes_121908 = smax64((int64_t) 0, binop_y_121910);
    
    if (mem_121911_cached_sizze_130900 < (size_t) bytes_121908) {
        mem_121911 = realloc(mem_121911, bytes_121908);
        mem_121911_cached_sizze_130900 = bytes_121908;
    }
    
    int64_t binop_y_121891 = (int64_t) 4 * n_p_114465;
    int64_t bytes_121890 = smax64((int64_t) 0, binop_y_121891);
    int64_t flat_tid_116712 = (int64_t) 0;
    int32_t num_tasks_123799;
    int64_t flat_tid_116714 = (int64_t) 0;
    struct futhark_mc_task_130965 futhark_mc_task_130965;
    
    futhark_mc_task_130965.ctx = ctx;
    futhark_mc_task_130965.free_m_114462 = m_114462;
    futhark_mc_task_130965.free_n_114463 = n_114463;
    futhark_mc_task_130965.free_n_p_114465 = n_p_114465;
    futhark_mc_task_130965.free_css_chunk_len_114509 = css_chunk_len_114509;
    futhark_mc_task_130965.free_Y_mem_121802 = Y_mem_121802.mem;
    futhark_mc_task_130965.free_mem_121889 = mem_121889;
    futhark_mc_task_130965.free_bytes_121890 = bytes_121890;
    futhark_mc_task_130965.free_mem_121911 = mem_121911;
    
    struct scheduler_segop futhark_mc_task_130965_task;
    
    futhark_mc_task_130965_task.args = &futhark_mc_task_130965;
    futhark_mc_task_130965_task.top_level_fn = futhark_mc_segmap_task_130966;
    futhark_mc_task_130965_task.name = "futhark_mc_segmap_task_130966";
    futhark_mc_task_130965_task.iterations = m_114462;
    futhark_mc_task_130965_task.task_time =
        &ctx->futhark_mc_segmap_task_130966_total_time;
    futhark_mc_task_130965_task.task_iter =
        &ctx->futhark_mc_segmap_task_130966_total_iter;
    futhark_mc_task_130965_task.sched = STATIC;
    futhark_mc_task_130965_task.nested_fn =
        futhark_mc_segmap_nested_task_130970;
    
    int futhark_mc_segmap_task_130966_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_130965_task);
    
    if (futhark_mc_segmap_task_130966_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_114611 = smin64(n_114463, l_window_114467);
    bool bounds_invalid_upwards_114612 = slt64(l_n_m_114513, (int64_t) 0);
    bool valid_114613 = !bounds_invalid_upwards_114612;
    bool range_valid_c_114614;
    
    if (!valid_114613) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_114513, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:348:3-389:7\n   #3  loess.fut:424:15-58\n   #4  stl.fut:143:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:141:5-144:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114616 = min_res_114611 == (int64_t) 0;
    int64_t m_114617 = sub64(min_res_114611, (int64_t) 1);
    float i64_res_114618 = sitofp_i64_f32(l_window_114467);
    int64_t binop_x_121985 = m_114462 * l_n_m_114513;
    int64_t binop_y_121986 = (int64_t) 8 * binop_x_121985;
    int64_t bytes_121984 = smax64((int64_t) 0, binop_y_121986);
    
    if (mem_121987_cached_sizze_130901 < (size_t) bytes_121984) {
        mem_121987 = realloc(mem_121987, bytes_121984);
        mem_121987_cached_sizze_130901 = bytes_121984;
    }
    
    int64_t binop_y_121990 = (int64_t) 4 * binop_x_121985;
    int64_t bytes_121988 = smax64((int64_t) 0, binop_y_121990);
    
    if (mem_121991_cached_sizze_130902 < (size_t) bytes_121988) {
        mem_121991 = realloc(mem_121991, bytes_121988);
        mem_121991_cached_sizze_130902 = bytes_121988;
    }
    
    int64_t binop_y_121919 = (int64_t) 4 * l_n_m_114513;
    int64_t bytes_121918 = smax64((int64_t) 0, binop_y_121919);
    int64_t binop_y_121922 = (int64_t) 8 * l_n_m_114513;
    int64_t bytes_121921 = smax64((int64_t) 0, binop_y_121922);
    int64_t flat_tid_116772 = (int64_t) 0;
    int32_t num_tasks_123897;
    int64_t flat_tid_116774 = (int64_t) 0;
    struct futhark_mc_task_130986 futhark_mc_task_130986;
    
    futhark_mc_task_130986.ctx = ctx;
    futhark_mc_task_130986.free_m_114462 = m_114462;
    futhark_mc_task_130986.free_n_114463 = n_114463;
    futhark_mc_task_130986.free_l_jump_114471 = l_jump_114471;
    futhark_mc_task_130986.free_l_n_m_114513 = l_n_m_114513;
    futhark_mc_task_130986.free_i_114539 = i_114539;
    futhark_mc_task_130986.free_x_114540 = x_114540;
    futhark_mc_task_130986.free_min_res_114611 = min_res_114611;
    futhark_mc_task_130986.free_empty_slice_114616 = empty_slice_114616;
    futhark_mc_task_130986.free_m_114617 = m_114617;
    futhark_mc_task_130986.free_i64_res_114618 = i64_res_114618;
    futhark_mc_task_130986.free_bytes_121803 = bytes_121803;
    futhark_mc_task_130986.free_mem_121842 = mem_121842;
    futhark_mc_task_130986.free_mem_121845 = mem_121845;
    futhark_mc_task_130986.free_bytes_121918 = bytes_121918;
    futhark_mc_task_130986.free_bytes_121921 = bytes_121921;
    futhark_mc_task_130986.free_mem_121987 = mem_121987;
    futhark_mc_task_130986.free_mem_121991 = mem_121991;
    
    struct scheduler_segop futhark_mc_task_130986_task;
    
    futhark_mc_task_130986_task.args = &futhark_mc_task_130986;
    futhark_mc_task_130986_task.top_level_fn = futhark_mc_segmap_task_130987;
    futhark_mc_task_130986_task.name = "futhark_mc_segmap_task_130987";
    futhark_mc_task_130986_task.iterations = m_114462;
    futhark_mc_task_130986_task.task_time =
        &ctx->futhark_mc_segmap_task_130987_total_time;
    futhark_mc_task_130986_task.task_iter =
        &ctx->futhark_mc_segmap_task_130987_total_iter;
    futhark_mc_task_130986_task.sched = DYNAMIC;
    futhark_mc_task_130986_task.nested_fn =
        futhark_mc_segmap_nested_task_130994;
    
    int futhark_mc_segmap_task_130987_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_130986_task);
    
    if (futhark_mc_segmap_task_130987_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_114737 = smin64(n_114463, t_window_114466);
    bool bounds_invalid_upwards_114738 = slt64(t_n_m_114520, (int64_t) 0);
    bool valid_114739 = !bounds_invalid_upwards_114738;
    bool range_valid_c_114740;
    
    if (!valid_114739) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_114520, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:348:3-389:7\n   #3  loess.fut:424:15-58\n   #4  stl.fut:150:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:148:5-151:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114742 = min_res_114737 == (int64_t) 0;
    int64_t m_114743 = sub64(min_res_114737, (int64_t) 1);
    float i64_res_114744 = sitofp_i64_f32(t_window_114466);
    int64_t binop_x_122065 = m_114462 * t_n_m_114520;
    int64_t binop_y_122066 = (int64_t) 8 * binop_x_122065;
    int64_t bytes_122064 = smax64((int64_t) 0, binop_y_122066);
    
    if (mem_122067_cached_sizze_130903 < (size_t) bytes_122064) {
        mem_122067 = realloc(mem_122067, bytes_122064);
        mem_122067_cached_sizze_130903 = bytes_122064;
    }
    
    int64_t binop_y_122070 = (int64_t) 4 * binop_x_122065;
    int64_t bytes_122068 = smax64((int64_t) 0, binop_y_122070);
    
    if (mem_122071_cached_sizze_130904 < (size_t) bytes_122068) {
        mem_122071 = realloc(mem_122071, bytes_122068);
        mem_122071_cached_sizze_130904 = bytes_122068;
    }
    
    int64_t binop_y_121999 = (int64_t) 4 * t_n_m_114520;
    int64_t bytes_121998 = smax64((int64_t) 0, binop_y_121999);
    int64_t binop_y_122002 = (int64_t) 8 * t_n_m_114520;
    int64_t bytes_122001 = smax64((int64_t) 0, binop_y_122002);
    int64_t flat_tid_117096 = (int64_t) 0;
    int32_t num_tasks_124369;
    int64_t flat_tid_117098 = (int64_t) 0;
    struct futhark_mc_task_131017 futhark_mc_task_131017;
    
    futhark_mc_task_131017.ctx = ctx;
    futhark_mc_task_131017.free_m_114462 = m_114462;
    futhark_mc_task_131017.free_n_114463 = n_114463;
    futhark_mc_task_131017.free_t_jump_114470 = t_jump_114470;
    futhark_mc_task_131017.free_t_n_m_114520 = t_n_m_114520;
    futhark_mc_task_131017.free_i_114539 = i_114539;
    futhark_mc_task_131017.free_x_114540 = x_114540;
    futhark_mc_task_131017.free_min_res_114737 = min_res_114737;
    futhark_mc_task_131017.free_empty_slice_114742 = empty_slice_114742;
    futhark_mc_task_131017.free_m_114743 = m_114743;
    futhark_mc_task_131017.free_i64_res_114744 = i64_res_114744;
    futhark_mc_task_131017.free_bytes_121803 = bytes_121803;
    futhark_mc_task_131017.free_mem_121842 = mem_121842;
    futhark_mc_task_131017.free_mem_121845 = mem_121845;
    futhark_mc_task_131017.free_bytes_121998 = bytes_121998;
    futhark_mc_task_131017.free_bytes_122001 = bytes_122001;
    futhark_mc_task_131017.free_mem_122067 = mem_122067;
    futhark_mc_task_131017.free_mem_122071 = mem_122071;
    
    struct scheduler_segop futhark_mc_task_131017_task;
    
    futhark_mc_task_131017_task.args = &futhark_mc_task_131017;
    futhark_mc_task_131017_task.top_level_fn = futhark_mc_segmap_task_131018;
    futhark_mc_task_131017_task.name = "futhark_mc_segmap_task_131018";
    futhark_mc_task_131017_task.iterations = m_114462;
    futhark_mc_task_131017_task.task_time =
        &ctx->futhark_mc_segmap_task_131018_total_time;
    futhark_mc_task_131017_task.task_iter =
        &ctx->futhark_mc_segmap_task_131018_total_iter;
    futhark_mc_task_131017_task.sched = DYNAMIC;
    futhark_mc_task_131017_task.nested_fn =
        futhark_mc_segmap_nested_task_131025;
    
    int futhark_mc_segmap_task_131018_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131017_task);
    
    if (futhark_mc_segmap_task_131018_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_122075;
    
    mem_122075.references = NULL;
    if (memblock_alloc(ctx, &mem_122075, bytes_121864, "mem_122075")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_124841 = 0; i_124841 < m_114462; i_124841++) {
        for (int64_t i_124842 = 0; i_124842 < n_114463; i_124842++) {
            ((float *) mem_122075.mem)[i_124841 * n_114463 + i_124842] = 0.0F;
        }
    }
    
    struct memblock mem_122079;
    
    mem_122079.references = NULL;
    if (memblock_alloc(ctx, &mem_122079, bytes_121864, "mem_122079")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_124843 = 0; i_124843 < m_114462; i_124843++) {
        for (int64_t i_124844 = 0; i_124844 < n_114463; i_124844++) {
            ((float *) mem_122079.mem)[i_124843 * n_114463 + i_124844] = 1.0F;
        }
    }
    
    bool cond_114865 = slt64((int64_t) 1, l_jump_114471);
    bool cond_114866 = slt64((int64_t) 1, t_jump_114470);
    int64_t y_114867 = sub64(outer_114473, (int64_t) 1);
    bool loop_nonempty_114868 = slt64((int64_t) 0, outer_114473);
    bool bounds_invalid_upwards_114869 = slt64(C_len_114511, (int64_t) 0);
    bool valid_114870 = !bounds_invalid_upwards_114869;
    bool loop_not_taken_114871 = !assert_cond_114500;
    bool protect_assert_disj_114872 = valid_114870 || loop_not_taken_114871;
    bool loop_not_taken_114873 = !loop_nonempty_114868;
    bool protect_assert_disj_114874 = protect_assert_disj_114872 ||
         loop_not_taken_114873;
    bool range_valid_c_114875;
    
    if (!protect_assert_disj_114874) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_114511, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:194:20-59\n   #3  stl.fut:192:13-195:24\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool zzero_114877 = n_p_114465 == (int64_t) 0;
    bool nonzzero_114878 = !zzero_114877;
    bool protect_assert_disj_114879 = loop_not_taken_114871 || nonzzero_114878;
    bool protect_assert_disj_114880 = loop_not_taken_114873 ||
         protect_assert_disj_114879;
    bool nonzzero_cert_114881;
    
    if (!protect_assert_disj_114880) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:194:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_114882 = add64(n_114463, n_p_114465);
    int64_t lifted_single_ma_arg_114883 = add64((int64_t) 1, x_114882);
    int64_t m_114884 = sub64(n_p_114465, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_114885 = sle64((int64_t) 0, m_114884);
    bool i_p_m_t_s_leq_w_114886 = slt64(m_114884, C_len_114511);
    bool i_lte_j_114887 = sle64((int64_t) 0, n_p_114465);
    bool y_114888 = zzero_leq_i_p_m_t_s_114885 && i_p_m_t_s_leq_w_114886;
    bool y_114889 = i_lte_j_114887 && y_114888;
    bool ok_or_empty_114890 = zzero_114877 || y_114889;
    bool protect_assert_disj_114891 = loop_not_taken_114871 ||
         ok_or_empty_114890;
    bool protect_assert_disj_114892 = loop_not_taken_114873 ||
         protect_assert_disj_114891;
    bool index_certs_114893;
    
    if (!protect_assert_disj_114892) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_114465,
                               "] out of bounds for array of shape [",
                               (long long) C_len_114511, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  stl.fut:43:3-32\n   #2  stl.fut:200:30-50\n   #3  stl.fut:199:23-201:31\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114894 = slt64(lifted_single_ma_arg_114883,
                                               (int64_t) 0);
    bool valid_114895 = !bounds_invalid_upwards_114894;
    bool protect_assert_disj_114896 = loop_not_taken_114871 || valid_114895;
    bool protect_assert_disj_114897 = loop_not_taken_114873 ||
         protect_assert_disj_114896;
    bool range_valid_c_114898;
    
    if (!protect_assert_disj_114897) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_114883,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  stl.fut:43:3-32\n   #4  stl.fut:200:30-50\n   #5  stl.fut:199:23-201:31\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t lifted_single_ma_arg_114900 = add64((int64_t) 2, n_114463);
    bool i_p_m_t_s_leq_w_114901 = slt64(m_114884, lifted_single_ma_arg_114883);
    bool y_114902 = zzero_leq_i_p_m_t_s_114885 && i_p_m_t_s_leq_w_114901;
    bool y_114903 = i_lte_j_114887 && y_114902;
    bool ok_or_empty_114904 = zzero_114877 || y_114903;
    bool protect_assert_disj_114905 = loop_not_taken_114871 ||
         ok_or_empty_114904;
    bool protect_assert_disj_114906 = loop_not_taken_114873 ||
         protect_assert_disj_114905;
    bool index_certs_114907;
    
    if (!protect_assert_disj_114906) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_114465,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_114883, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-58\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_114908 = slt64(lifted_single_ma_arg_114900,
                                               (int64_t) 0);
    bool valid_114909 = !bounds_invalid_upwards_114908;
    bool protect_assert_disj_114910 = loop_not_taken_114871 || valid_114909;
    bool protect_assert_disj_114911 = loop_not_taken_114873 ||
         protect_assert_disj_114910;
    bool range_valid_c_114912;
    
    if (!protect_assert_disj_114911) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_114900,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  /prelude/functional.fut:9:42-44\n   #4  stl.fut:43:3-58\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool i_p_m_t_s_leq_w_114914 = slt64((int64_t) 2,
                                        lifted_single_ma_arg_114900);
    bool protect_assert_disj_114915 = loop_not_taken_114871 ||
         i_p_m_t_s_leq_w_114914;
    bool protect_assert_disj_114916 = loop_not_taken_114873 ||
         protect_assert_disj_114915;
    bool index_certs_114917;
    
    if (!protect_assert_disj_114916) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_114900, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-76\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_114918 = n_114463 == (int64_t) 0;
    int64_t i_p_m_t_s_114919 = add64(n_p_114465, i_114539);
    bool zzero_leq_i_p_m_t_s_114920 = sle64((int64_t) 0, i_p_m_t_s_114919);
    bool i_p_m_t_s_leq_w_114921 = slt64(i_p_m_t_s_114919, C_len_114511);
    bool i_lte_j_114922 = sle64(n_p_114465, x_114882);
    bool y_114923 = i_lte_j_114887 && i_p_m_t_s_leq_w_114921;
    bool y_114924 = zzero_leq_i_p_m_t_s_114920 && y_114923;
    bool y_114925 = i_lte_j_114922 && y_114924;
    bool forwards_ok_114926 = i_lte_j_114887 && y_114925;
    bool ok_or_empty_114927 = empty_slice_114918 || forwards_ok_114926;
    bool protect_assert_disj_114928 = loop_not_taken_114871 ||
         ok_or_empty_114927;
    bool protect_assert_disj_114929 = loop_not_taken_114873 ||
         protect_assert_disj_114928;
    bool index_certs_114930;
    
    if (!protect_assert_disj_114929) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_114465, ":",
                               (long long) x_114882,
                               "] out of bounds for array of shape [",
                               (long long) C_len_114511, "].",
                               "-> #0  stl.fut:231:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:229:13-234:26\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
            return 1;
        return 1;
    }
    
    int64_t j_m_i_114931 = sub64(stl_res_114534, stl_res_114533);
    bool cond_114932 = slt64(l_jump_114471, jump_threshold_114474);
    bool cond_f_res_114933 = slt64(max_group_sizze_114475, l_window_114467);
    bool x_114934 = !cond_114932;
    bool y_114935 = cond_f_res_114933 && x_114934;
    bool cond_114936 = cond_114932 || y_114935;
    bool cond_114937 = slt64(t_jump_114470, jump_threshold_114474);
    bool cond_f_res_114938 = slt64(max_group_sizze_114475, t_window_114466);
    bool x_114939 = !cond_114937;
    bool y_114940 = cond_f_res_114938 && x_114939;
    bool cond_114941 = cond_114937 || y_114940;
    
    if (mem_122147_cached_sizze_130905 < (size_t) bytes_121864) {
        mem_122147 = realloc(mem_122147, bytes_121864);
        mem_122147_cached_sizze_130905 = bytes_121864;
    }
    if (mem_122169_cached_sizze_130906 < (size_t) bytes_121908) {
        mem_122169 = realloc(mem_122169, bytes_121908);
        mem_122169_cached_sizze_130906 = bytes_121908;
    }
    
    int64_t binop_x_122189 = m_114462 * C_len_114511;
    int64_t binop_y_122190 = (int64_t) 4 * binop_x_122189;
    int64_t bytes_122188 = smax64((int64_t) 0, binop_y_122190);
    
    if (mem_122191_cached_sizze_130907 < (size_t) bytes_122188) {
        mem_122191 = realloc(mem_122191, bytes_122188);
        mem_122191_cached_sizze_130907 = bytes_122188;
    }
    
    int64_t binop_y_122171 = (int64_t) 4 * C_len_114511;
    int64_t bytes_122170 = smax64((int64_t) 0, binop_y_122171);
    
    if (mem_122249_cached_sizze_130908 < (size_t) bytes_121864) {
        mem_122249 = realloc(mem_122249, bytes_121864);
        mem_122249_cached_sizze_130908 = bytes_121864;
    }
    
    int64_t binop_y_122193 = (int64_t) 4 * lifted_single_ma_arg_114883;
    int64_t bytes_122192 = smax64((int64_t) 0, binop_y_122193);
    int64_t binop_y_122196 = (int64_t) 4 * lifted_single_ma_arg_114900;
    int64_t bytes_122195 = smax64((int64_t) 0, binop_y_122196);
    int64_t ext_122742;
    
    if (cond_114865) {
        ext_122742 = n_114463;
    } else {
        ext_122742 = l_n_m_114513;
    }
    if (mem_122818_cached_sizze_130909 < (size_t) bytes_121864) {
        mem_122818 = realloc(mem_122818, bytes_121864);
        mem_122818_cached_sizze_130909 = bytes_121864;
    }
    if (mem_122822_cached_sizze_130910 < (size_t) bytes_121864) {
        mem_122822 = realloc(mem_122822, bytes_121864);
        mem_122822_cached_sizze_130910 = bytes_121864;
    }
    
    int64_t ext_123319;
    
    if (cond_114866) {
        ext_123319 = n_114463;
    } else {
        ext_123319 = t_n_m_114520;
    }
    
    int64_t ext_123592;
    int64_t ext_123590;
    int64_t ext_123586;
    int64_t ext_123585;
    int64_t ext_123584;
    int64_t ext_123583;
    int64_t ext_123582;
    int64_t ext_123581;
    int64_t ext_123580;
    struct memblock ext_mem_123579;
    
    ext_mem_123579.references = NULL;
    
    struct memblock ext_mem_123578;
    
    ext_mem_123578.references = NULL;
    
    struct memblock ext_mem_123577;
    
    ext_mem_123577.references = NULL;
    
    struct memblock mem_param_122087;
    
    mem_param_122087.references = NULL;
    
    int64_t ctx_param_ext_122089;
    int64_t ctx_param_ext_122091;
    struct memblock mem_param_122095;
    
    mem_param_122095.references = NULL;
    
    int64_t ctx_param_ext_122096;
    int64_t ctx_param_ext_122097;
    int64_t ctx_param_ext_122098;
    int64_t ctx_param_ext_122099;
    int64_t ctx_param_ext_122100;
    int64_t ctx_param_ext_122101;
    int64_t ctx_param_ext_122102;
    struct memblock mem_param_122103;
    
    mem_param_122103.references = NULL;
    ctx_param_ext_122089 = n_114463;
    ctx_param_ext_122091 = n_114463;
    ctx_param_ext_122096 = m_114462;
    ctx_param_ext_122097 = n_114463;
    ctx_param_ext_122098 = (int64_t) 0;
    ctx_param_ext_122099 = n_114463;
    ctx_param_ext_122100 = m_114462;
    ctx_param_ext_122101 = (int64_t) 1;
    ctx_param_ext_122102 = n_114463;
    if (memblock_set(ctx, &mem_param_122087, &mem_122075, "mem_122075") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_122095, &mem_122075, "mem_122075") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_122103, &mem_122079, "mem_122079") != 0)
        return 1;
    for (int64_t i_outer_114945 = 0; i_outer_114945 < outer_114473;
         i_outer_114945++) {
        int64_t ext_123331;
        int64_t ext_123329;
        struct memblock ext_mem_123325;
        
        ext_mem_123325.references = NULL;
        
        struct memblock ext_mem_123324;
        
        ext_mem_123324.references = NULL;
        
        struct memblock mem_param_122117;
        
        mem_param_122117.references = NULL;
        
        int64_t ctx_param_ext_122119;
        int64_t ctx_param_ext_122121;
        struct memblock mem_param_122125;
        
        mem_param_122125.references = NULL;
        ctx_param_ext_122119 = ctx_param_ext_122089;
        ctx_param_ext_122121 = ctx_param_ext_122091;
        if (memblock_set(ctx, &mem_param_122117, &mem_param_122087,
                         "mem_param_122087") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122125, &mem_param_122095,
                         "mem_param_122095") != 0)
            return 1;
        for (int64_t _i_inner_114951 = 0; _i_inner_114951 < inner_114472;
             _i_inner_114951++) {
            int64_t flat_tid_117420 = (int64_t) 0;
            int32_t num_tasks_124866;
            int64_t flat_tid_117422 = (int64_t) 0;
            struct futhark_mc_task_131048 futhark_mc_task_131048;
            
            futhark_mc_task_131048.ctx = ctx;
            futhark_mc_task_131048.free_m_114462 = m_114462;
            futhark_mc_task_131048.free_n_114463 = n_114463;
            futhark_mc_task_131048.free_Y_mem_121802 = Y_mem_121802.mem;
            futhark_mc_task_131048.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131048.free_ctx_param_ext_122121 =
                ctx_param_ext_122121;
            futhark_mc_task_131048.free_mem_param_122125 = mem_param_122125.mem;
            futhark_mc_task_131048.free_mem_122147 = mem_122147;
            
            struct scheduler_segop futhark_mc_task_131048_task;
            
            futhark_mc_task_131048_task.args = &futhark_mc_task_131048;
            futhark_mc_task_131048_task.top_level_fn =
                futhark_mc_segmap_task_131049;
            futhark_mc_task_131048_task.name = "futhark_mc_segmap_task_131049";
            futhark_mc_task_131048_task.iterations = m_114462;
            futhark_mc_task_131048_task.task_time =
                &ctx->futhark_mc_segmap_task_131049_total_time;
            futhark_mc_task_131048_task.task_iter =
                &ctx->futhark_mc_segmap_task_131049_total_iter;
            futhark_mc_task_131048_task.sched = STATIC;
            futhark_mc_task_131048_task.nested_fn =
                futhark_mc_segmap_nested_task_131053;
            
            int futhark_mc_segmap_task_131049_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131048_task);
            
            if (futhark_mc_segmap_task_131049_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117432 = (int64_t) 0;
            int32_t num_tasks_124887;
            int64_t flat_tid_117434 = (int64_t) 0;
            struct futhark_mc_task_131061 futhark_mc_task_131061;
            
            futhark_mc_task_131061.ctx = ctx;
            futhark_mc_task_131061.free_m_114462 = m_114462;
            futhark_mc_task_131061.free_n_114463 = n_114463;
            futhark_mc_task_131061.free_n_p_114465 = n_p_114465;
            futhark_mc_task_131061.free_css_chunk_len_114509 =
                css_chunk_len_114509;
            futhark_mc_task_131061.free_mem_121889 = mem_121889;
            futhark_mc_task_131061.free_bytes_121890 = bytes_121890;
            futhark_mc_task_131061.free_mem_121911 = mem_121911;
            futhark_mc_task_131061.free_mem_122147 = mem_122147;
            futhark_mc_task_131061.free_mem_122169 = mem_122169;
            
            struct scheduler_segop futhark_mc_task_131061_task;
            
            futhark_mc_task_131061_task.args = &futhark_mc_task_131061;
            futhark_mc_task_131061_task.top_level_fn =
                futhark_mc_segmap_task_131062;
            futhark_mc_task_131061_task.name = "futhark_mc_segmap_task_131062";
            futhark_mc_task_131061_task.iterations = m_114462;
            futhark_mc_task_131061_task.task_time =
                &ctx->futhark_mc_segmap_task_131062_total_time;
            futhark_mc_task_131061_task.task_iter =
                &ctx->futhark_mc_segmap_task_131062_total_iter;
            futhark_mc_task_131061_task.sched = STATIC;
            futhark_mc_task_131061_task.nested_fn =
                futhark_mc_segmap_nested_task_131066;
            
            int futhark_mc_segmap_task_131062_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131061_task);
            
            if (futhark_mc_segmap_task_131062_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117493 = (int64_t) 0;
            int32_t num_tasks_124985;
            int64_t flat_tid_117495 = (int64_t) 0;
            struct futhark_mc_task_131082 futhark_mc_task_131082;
            
            futhark_mc_task_131082.ctx = ctx;
            futhark_mc_task_131082.free_m_114462 = m_114462;
            futhark_mc_task_131082.free_n_p_114465 = n_p_114465;
            futhark_mc_task_131082.free_C_len_114511 = C_len_114511;
            futhark_mc_task_131082.free_mem_122169 = mem_122169;
            futhark_mc_task_131082.free_bytes_122170 = bytes_122170;
            futhark_mc_task_131082.free_mem_122191 = mem_122191;
            
            struct scheduler_segop futhark_mc_task_131082_task;
            
            futhark_mc_task_131082_task.args = &futhark_mc_task_131082;
            futhark_mc_task_131082_task.top_level_fn =
                futhark_mc_segmap_task_131083;
            futhark_mc_task_131082_task.name = "futhark_mc_segmap_task_131083";
            futhark_mc_task_131082_task.iterations = m_114462;
            futhark_mc_task_131082_task.task_time =
                &ctx->futhark_mc_segmap_task_131083_total_time;
            futhark_mc_task_131082_task.task_iter =
                &ctx->futhark_mc_segmap_task_131083_total_iter;
            futhark_mc_task_131082_task.sched = STATIC;
            futhark_mc_task_131082_task.nested_fn =
                futhark_mc_segmap_nested_task_131087;
            
            int futhark_mc_segmap_task_131083_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131082_task);
            
            if (futhark_mc_segmap_task_131083_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117508 = (int64_t) 0;
            int32_t num_tasks_125012;
            int64_t flat_tid_117510 = (int64_t) 0;
            struct futhark_mc_task_131095 futhark_mc_task_131095;
            
            futhark_mc_task_131095.ctx = ctx;
            futhark_mc_task_131095.free_m_114462 = m_114462;
            futhark_mc_task_131095.free_n_114463 = n_114463;
            futhark_mc_task_131095.free_n_p_114465 = n_p_114465;
            futhark_mc_task_131095.free_i64_res_114505 = i64_res_114505;
            futhark_mc_task_131095.free_C_len_114511 = C_len_114511;
            futhark_mc_task_131095.free_lifted_single_ma_arg_114883 =
                lifted_single_ma_arg_114883;
            futhark_mc_task_131095.free_lifted_single_ma_arg_114900 =
                lifted_single_ma_arg_114900;
            futhark_mc_task_131095.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131095.free_mem_122191 = mem_122191;
            futhark_mc_task_131095.free_bytes_122192 = bytes_122192;
            futhark_mc_task_131095.free_bytes_122195 = bytes_122195;
            futhark_mc_task_131095.free_mem_122249 = mem_122249;
            
            struct scheduler_segop futhark_mc_task_131095_task;
            
            futhark_mc_task_131095_task.args = &futhark_mc_task_131095;
            futhark_mc_task_131095_task.top_level_fn =
                futhark_mc_segmap_task_131096;
            futhark_mc_task_131095_task.name = "futhark_mc_segmap_task_131096";
            futhark_mc_task_131095_task.iterations = m_114462;
            futhark_mc_task_131095_task.task_time =
                &ctx->futhark_mc_segmap_task_131096_total_time;
            futhark_mc_task_131095_task.task_iter =
                &ctx->futhark_mc_segmap_task_131096_total_iter;
            futhark_mc_task_131095_task.sched = STATIC;
            futhark_mc_task_131095_task.nested_fn =
                futhark_mc_segmap_nested_task_131102;
            
            int futhark_mc_segmap_task_131096_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131095_task);
            
            if (futhark_mc_segmap_task_131096_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock ext_mem_122718;
            
            ext_mem_122718.references = NULL;
            
            struct memblock ext_mem_122717;
            
            ext_mem_122717.references = NULL;
            if (cond_114936) {
                bool match_lit_115087 = (int64_t) 0 == l_degree_114469;
                struct memblock ext_mem_122367;
                
                ext_mem_122367.references = NULL;
                
                struct memblock ext_mem_122366;
                
                ext_mem_122366.references = NULL;
                if (match_lit_115087) {
                    struct memblock mem_122253;
                    
                    mem_122253.references = NULL;
                    if (memblock_alloc(ctx, &mem_122253, bytes_121988,
                                       "mem_122253")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_125254 = 0; i_125254 < m_114462;
                         i_125254++) {
                        for (int64_t i_125255 = 0; i_125255 < l_n_m_114513;
                             i_125255++) {
                            ((float *) mem_122253.mem)[i_125254 * l_n_m_114513 +
                                                       i_125255] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122275;
                    
                    mem_122275.references = NULL;
                    if (memblock_alloc(ctx, &mem_122275, bytes_121988,
                                       "mem_122275")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_117612 = (int64_t) 0;
                    int32_t num_tasks_125256;
                    int64_t flat_tid_117614 = (int64_t) 0;
                    struct futhark_mc_task_131144 futhark_mc_task_131144;
                    
                    futhark_mc_task_131144.ctx = ctx;
                    futhark_mc_task_131144.free_m_114462 = m_114462;
                    futhark_mc_task_131144.free_n_114463 = n_114463;
                    futhark_mc_task_131144.free_l_window_114467 =
                        l_window_114467;
                    futhark_mc_task_131144.free_t_jump_114470 = t_jump_114470;
                    futhark_mc_task_131144.free_l_n_m_114513 = l_n_m_114513;
                    futhark_mc_task_131144.free_i_114539 = i_114539;
                    futhark_mc_task_131144.free_bytes_121918 = bytes_121918;
                    futhark_mc_task_131144.free_mem_121987 = mem_121987;
                    futhark_mc_task_131144.free_mem_121991 = mem_121991;
                    futhark_mc_task_131144.free_ctx_param_ext_122098 =
                        ctx_param_ext_122098;
                    futhark_mc_task_131144.free_ctx_param_ext_122099 =
                        ctx_param_ext_122099;
                    futhark_mc_task_131144.free_ctx_param_ext_122101 =
                        ctx_param_ext_122101;
                    futhark_mc_task_131144.free_mem_param_122103 =
                        mem_param_122103.mem;
                    futhark_mc_task_131144.free_mem_122249 = mem_122249;
                    futhark_mc_task_131144.free_mem_122275 = mem_122275.mem;
                    
                    struct scheduler_segop futhark_mc_task_131144_task;
                    
                    futhark_mc_task_131144_task.args = &futhark_mc_task_131144;
                    futhark_mc_task_131144_task.top_level_fn =
                        futhark_mc_segmap_task_131145;
                    futhark_mc_task_131144_task.name =
                        "futhark_mc_segmap_task_131145";
                    futhark_mc_task_131144_task.iterations = m_114462;
                    futhark_mc_task_131144_task.task_time =
                        &ctx->futhark_mc_segmap_task_131145_total_time;
                    futhark_mc_task_131144_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131145_total_iter;
                    futhark_mc_task_131144_task.sched = STATIC;
                    futhark_mc_task_131144_task.nested_fn =
                        futhark_mc_segmap_nested_task_131149;
                    
                    int futhark_mc_segmap_task_131145_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131144_task);
                    
                    if (futhark_mc_segmap_task_131145_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_122367, &mem_122275,
                                     "mem_122275") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122366, &mem_122253,
                                     "mem_122253") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122275, "mem_122275") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122253, "mem_122253") != 0)
                        return 1;
                } else {
                    bool match_lit_115156 = (int64_t) 1 == l_degree_114469;
                    struct memblock ext_mem_122365;
                    
                    ext_mem_122365.references = NULL;
                    
                    struct memblock ext_mem_122364;
                    
                    ext_mem_122364.references = NULL;
                    if (match_lit_115156) {
                        struct memblock mem_122315;
                        
                        mem_122315.references = NULL;
                        if (memblock_alloc(ctx, &mem_122315, bytes_121988,
                                           "mem_122315")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122319;
                        
                        mem_122319.references = NULL;
                        if (memblock_alloc(ctx, &mem_122319, bytes_121988,
                                           "mem_122319")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117797 = (int64_t) 0;
                        int32_t num_tasks_125545;
                        int64_t flat_tid_117799 = (int64_t) 0;
                        struct futhark_mc_task_131170 futhark_mc_task_131170;
                        
                        futhark_mc_task_131170.ctx = ctx;
                        futhark_mc_task_131170.free_m_114462 = m_114462;
                        futhark_mc_task_131170.free_n_114463 = n_114463;
                        futhark_mc_task_131170.free_l_window_114467 =
                            l_window_114467;
                        futhark_mc_task_131170.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131170.free_l_n_m_114513 = l_n_m_114513;
                        futhark_mc_task_131170.free_i_114539 = i_114539;
                        futhark_mc_task_131170.free_bytes_121918 = bytes_121918;
                        futhark_mc_task_131170.free_mem_121987 = mem_121987;
                        futhark_mc_task_131170.free_mem_121991 = mem_121991;
                        futhark_mc_task_131170.free_ctx_param_ext_122098 =
                            ctx_param_ext_122098;
                        futhark_mc_task_131170.free_ctx_param_ext_122099 =
                            ctx_param_ext_122099;
                        futhark_mc_task_131170.free_ctx_param_ext_122101 =
                            ctx_param_ext_122101;
                        futhark_mc_task_131170.free_mem_param_122103 =
                            mem_param_122103.mem;
                        futhark_mc_task_131170.free_mem_122249 = mem_122249;
                        futhark_mc_task_131170.free_mem_122315 = mem_122315.mem;
                        futhark_mc_task_131170.free_mem_122319 = mem_122319.mem;
                        
                        struct scheduler_segop futhark_mc_task_131170_task;
                        
                        futhark_mc_task_131170_task.args =
                            &futhark_mc_task_131170;
                        futhark_mc_task_131170_task.top_level_fn =
                            futhark_mc_segmap_task_131171;
                        futhark_mc_task_131170_task.name =
                            "futhark_mc_segmap_task_131171";
                        futhark_mc_task_131170_task.iterations = m_114462;
                        futhark_mc_task_131170_task.task_time =
                            &ctx->futhark_mc_segmap_task_131171_total_time;
                        futhark_mc_task_131170_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131171_total_iter;
                        futhark_mc_task_131170_task.sched = STATIC;
                        futhark_mc_task_131170_task.nested_fn =
                            futhark_mc_segmap_nested_task_131176;
                        
                        int futhark_mc_segmap_task_131171_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131170_task);
                        
                        if (futhark_mc_segmap_task_131171_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122365, &mem_122315,
                                         "mem_122315") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122364, &mem_122319,
                                         "mem_122319") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122319, "mem_122319") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122315, "mem_122315") != 0)
                            return 1;
                    } else {
                        struct memblock mem_122359;
                        
                        mem_122359.references = NULL;
                        if (memblock_alloc(ctx, &mem_122359, bytes_121988,
                                           "mem_122359")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122363;
                        
                        mem_122363.references = NULL;
                        if (memblock_alloc(ctx, &mem_122363, bytes_121988,
                                           "mem_122363")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_118067 = (int64_t) 0;
                        int32_t num_tasks_125972;
                        int64_t flat_tid_118069 = (int64_t) 0;
                        struct futhark_mc_task_131201 futhark_mc_task_131201;
                        
                        futhark_mc_task_131201.ctx = ctx;
                        futhark_mc_task_131201.free_m_114462 = m_114462;
                        futhark_mc_task_131201.free_n_114463 = n_114463;
                        futhark_mc_task_131201.free_l_window_114467 =
                            l_window_114467;
                        futhark_mc_task_131201.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131201.free_l_n_m_114513 = l_n_m_114513;
                        futhark_mc_task_131201.free_i_114539 = i_114539;
                        futhark_mc_task_131201.free_bytes_121918 = bytes_121918;
                        futhark_mc_task_131201.free_mem_121987 = mem_121987;
                        futhark_mc_task_131201.free_mem_121991 = mem_121991;
                        futhark_mc_task_131201.free_ctx_param_ext_122098 =
                            ctx_param_ext_122098;
                        futhark_mc_task_131201.free_ctx_param_ext_122099 =
                            ctx_param_ext_122099;
                        futhark_mc_task_131201.free_ctx_param_ext_122101 =
                            ctx_param_ext_122101;
                        futhark_mc_task_131201.free_mem_param_122103 =
                            mem_param_122103.mem;
                        futhark_mc_task_131201.free_mem_122249 = mem_122249;
                        futhark_mc_task_131201.free_mem_122359 = mem_122359.mem;
                        futhark_mc_task_131201.free_mem_122363 = mem_122363.mem;
                        
                        struct scheduler_segop futhark_mc_task_131201_task;
                        
                        futhark_mc_task_131201_task.args =
                            &futhark_mc_task_131201;
                        futhark_mc_task_131201_task.top_level_fn =
                            futhark_mc_segmap_task_131202;
                        futhark_mc_task_131201_task.name =
                            "futhark_mc_segmap_task_131202";
                        futhark_mc_task_131201_task.iterations = m_114462;
                        futhark_mc_task_131201_task.task_time =
                            &ctx->futhark_mc_segmap_task_131202_total_time;
                        futhark_mc_task_131201_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131202_total_iter;
                        futhark_mc_task_131201_task.sched = STATIC;
                        futhark_mc_task_131201_task.nested_fn =
                            futhark_mc_segmap_nested_task_131207;
                        
                        int futhark_mc_segmap_task_131202_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131201_task);
                        
                        if (futhark_mc_segmap_task_131202_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122365, &mem_122359,
                                         "mem_122359") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122364, &mem_122363,
                                         "mem_122363") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122363, "mem_122363") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122359, "mem_122359") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_122367, &ext_mem_122365,
                                     "ext_mem_122365") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122366, &ext_mem_122364,
                                     "ext_mem_122364") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122364,
                                       "ext_mem_122364") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122365,
                                       "ext_mem_122365") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_122718, &ext_mem_122367,
                                 "ext_mem_122367") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_122717, &ext_mem_122366,
                                 "ext_mem_122366") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122366, "ext_mem_122366") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122367, "ext_mem_122367") != 0)
                    return 1;
            } else {
                bool match_lit_115381 = (int64_t) 0 == l_degree_114469;
                struct memblock ext_mem_122716;
                
                ext_mem_122716.references = NULL;
                
                struct memblock ext_mem_122715;
                
                ext_mem_122715.references = NULL;
                if (match_lit_115381) {
                    struct memblock mem_122371;
                    
                    mem_122371.references = NULL;
                    if (memblock_alloc(ctx, &mem_122371, bytes_121988,
                                       "mem_122371")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_126531 = 0; i_126531 < m_114462;
                         i_126531++) {
                        for (int64_t i_126532 = 0; i_126532 < l_n_m_114513;
                             i_126532++) {
                            ((float *) mem_122371.mem)[i_126531 * l_n_m_114513 +
                                                       i_126532] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122426;
                    
                    mem_122426.references = NULL;
                    if (memblock_alloc(ctx, &mem_122426, bytes_121988,
                                       "mem_122426")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_122373 = (int64_t) 4 * l_window_114467;
                    int64_t bytes_122372 = smax64((int64_t) 0, binop_y_122373);
                    int64_t flat_tid_118433 = (int64_t) 0;
                    int32_t num_tasks_126533;
                    int64_t flat_tid_118435 = (int64_t) 0;
                    struct futhark_mc_task_131234 futhark_mc_task_131234;
                    
                    futhark_mc_task_131234.ctx = ctx;
                    futhark_mc_task_131234.free_m_114462 = m_114462;
                    futhark_mc_task_131234.free_n_114463 = n_114463;
                    futhark_mc_task_131234.free_l_window_114467 =
                        l_window_114467;
                    futhark_mc_task_131234.free_t_jump_114470 = t_jump_114470;
                    futhark_mc_task_131234.free_l_n_m_114513 = l_n_m_114513;
                    futhark_mc_task_131234.free_i_114539 = i_114539;
                    futhark_mc_task_131234.free_bytes_121918 = bytes_121918;
                    futhark_mc_task_131234.free_mem_121987 = mem_121987;
                    futhark_mc_task_131234.free_mem_121991 = mem_121991;
                    futhark_mc_task_131234.free_ctx_param_ext_122098 =
                        ctx_param_ext_122098;
                    futhark_mc_task_131234.free_ctx_param_ext_122099 =
                        ctx_param_ext_122099;
                    futhark_mc_task_131234.free_ctx_param_ext_122101 =
                        ctx_param_ext_122101;
                    futhark_mc_task_131234.free_mem_param_122103 =
                        mem_param_122103.mem;
                    futhark_mc_task_131234.free_mem_122249 = mem_122249;
                    futhark_mc_task_131234.free_bytes_122372 = bytes_122372;
                    futhark_mc_task_131234.free_mem_122426 = mem_122426.mem;
                    
                    struct scheduler_segop futhark_mc_task_131234_task;
                    
                    futhark_mc_task_131234_task.args = &futhark_mc_task_131234;
                    futhark_mc_task_131234_task.top_level_fn =
                        futhark_mc_segmap_task_131235;
                    futhark_mc_task_131234_task.name =
                        "futhark_mc_segmap_task_131235";
                    futhark_mc_task_131234_task.iterations = m_114462;
                    futhark_mc_task_131234_task.task_time =
                        &ctx->futhark_mc_segmap_task_131235_total_time;
                    futhark_mc_task_131234_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131235_total_iter;
                    futhark_mc_task_131234_task.sched = STATIC;
                    futhark_mc_task_131234_task.nested_fn =
                        futhark_mc_segmap_nested_task_131240;
                    
                    int futhark_mc_segmap_task_131235_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131234_task);
                    
                    if (futhark_mc_segmap_task_131235_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_122716, &mem_122426,
                                     "mem_122426") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122715, &mem_122371,
                                     "mem_122371") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122426, "mem_122426") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122371, "mem_122371") != 0)
                        return 1;
                } else {
                    bool match_lit_115436 = (int64_t) 1 == l_degree_114469;
                    struct memblock ext_mem_122714;
                    
                    ext_mem_122714.references = NULL;
                    
                    struct memblock ext_mem_122713;
                    
                    ext_mem_122713.references = NULL;
                    if (match_lit_115436) {
                        struct memblock mem_122532;
                        
                        mem_122532.references = NULL;
                        if (memblock_alloc(ctx, &mem_122532, bytes_121988,
                                           "mem_122532")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122536;
                        
                        mem_122536.references = NULL;
                        if (memblock_alloc(ctx, &mem_122536, bytes_121988,
                                           "mem_122536")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_122428 = (int64_t) 4 * l_window_114467;
                        int64_t bytes_122427 = smax64((int64_t) 0,
                                                      binop_y_122428);
                        int64_t flat_tid_118576 = (int64_t) 0;
                        int32_t num_tasks_126762;
                        int64_t flat_tid_118578 = (int64_t) 0;
                        struct futhark_mc_task_131263 futhark_mc_task_131263;
                        
                        futhark_mc_task_131263.ctx = ctx;
                        futhark_mc_task_131263.free_m_114462 = m_114462;
                        futhark_mc_task_131263.free_n_114463 = n_114463;
                        futhark_mc_task_131263.free_l_window_114467 =
                            l_window_114467;
                        futhark_mc_task_131263.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131263.free_l_n_m_114513 = l_n_m_114513;
                        futhark_mc_task_131263.free_i_114539 = i_114539;
                        futhark_mc_task_131263.free_bytes_121918 = bytes_121918;
                        futhark_mc_task_131263.free_mem_121987 = mem_121987;
                        futhark_mc_task_131263.free_mem_121991 = mem_121991;
                        futhark_mc_task_131263.free_ctx_param_ext_122098 =
                            ctx_param_ext_122098;
                        futhark_mc_task_131263.free_ctx_param_ext_122099 =
                            ctx_param_ext_122099;
                        futhark_mc_task_131263.free_ctx_param_ext_122101 =
                            ctx_param_ext_122101;
                        futhark_mc_task_131263.free_mem_param_122103 =
                            mem_param_122103.mem;
                        futhark_mc_task_131263.free_mem_122249 = mem_122249;
                        futhark_mc_task_131263.free_bytes_122427 = bytes_122427;
                        futhark_mc_task_131263.free_mem_122532 = mem_122532.mem;
                        futhark_mc_task_131263.free_mem_122536 = mem_122536.mem;
                        
                        struct scheduler_segop futhark_mc_task_131263_task;
                        
                        futhark_mc_task_131263_task.args =
                            &futhark_mc_task_131263;
                        futhark_mc_task_131263_task.top_level_fn =
                            futhark_mc_segmap_task_131264;
                        futhark_mc_task_131263_task.name =
                            "futhark_mc_segmap_task_131264";
                        futhark_mc_task_131263_task.iterations = m_114462;
                        futhark_mc_task_131263_task.task_time =
                            &ctx->futhark_mc_segmap_task_131264_total_time;
                        futhark_mc_task_131263_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131264_total_iter;
                        futhark_mc_task_131263_task.sched = STATIC;
                        futhark_mc_task_131263_task.nested_fn =
                            futhark_mc_segmap_nested_task_131271;
                        
                        int futhark_mc_segmap_task_131264_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131263_task);
                        
                        if (futhark_mc_segmap_task_131264_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122714, &mem_122532,
                                         "mem_122532") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122713, &mem_122536,
                                         "mem_122536") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122536, "mem_122536") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122532, "mem_122532") != 0)
                            return 1;
                    } else {
                        struct memblock mem_122708;
                        
                        mem_122708.references = NULL;
                        if (memblock_alloc(ctx, &mem_122708, bytes_121988,
                                           "mem_122708")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122712;
                        
                        mem_122712.references = NULL;
                        if (memblock_alloc(ctx, &mem_122712, bytes_121988,
                                           "mem_122712")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_122538 = (int64_t) 4 * l_window_114467;
                        int64_t bytes_122537 = smax64((int64_t) 0,
                                                      binop_y_122538);
                        int64_t flat_tid_118807 = (int64_t) 0;
                        int32_t num_tasks_127144;
                        int64_t flat_tid_118809 = (int64_t) 0;
                        struct futhark_mc_task_131300 futhark_mc_task_131300;
                        
                        futhark_mc_task_131300.ctx = ctx;
                        futhark_mc_task_131300.free_m_114462 = m_114462;
                        futhark_mc_task_131300.free_n_114463 = n_114463;
                        futhark_mc_task_131300.free_l_window_114467 =
                            l_window_114467;
                        futhark_mc_task_131300.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131300.free_l_n_m_114513 = l_n_m_114513;
                        futhark_mc_task_131300.free_i_114539 = i_114539;
                        futhark_mc_task_131300.free_bytes_121918 = bytes_121918;
                        futhark_mc_task_131300.free_mem_121987 = mem_121987;
                        futhark_mc_task_131300.free_mem_121991 = mem_121991;
                        futhark_mc_task_131300.free_ctx_param_ext_122098 =
                            ctx_param_ext_122098;
                        futhark_mc_task_131300.free_ctx_param_ext_122099 =
                            ctx_param_ext_122099;
                        futhark_mc_task_131300.free_ctx_param_ext_122101 =
                            ctx_param_ext_122101;
                        futhark_mc_task_131300.free_mem_param_122103 =
                            mem_param_122103.mem;
                        futhark_mc_task_131300.free_mem_122249 = mem_122249;
                        futhark_mc_task_131300.free_bytes_122537 = bytes_122537;
                        futhark_mc_task_131300.free_mem_122708 = mem_122708.mem;
                        futhark_mc_task_131300.free_mem_122712 = mem_122712.mem;
                        
                        struct scheduler_segop futhark_mc_task_131300_task;
                        
                        futhark_mc_task_131300_task.args =
                            &futhark_mc_task_131300;
                        futhark_mc_task_131300_task.top_level_fn =
                            futhark_mc_segmap_task_131301;
                        futhark_mc_task_131300_task.name =
                            "futhark_mc_segmap_task_131301";
                        futhark_mc_task_131300_task.iterations = m_114462;
                        futhark_mc_task_131300_task.task_time =
                            &ctx->futhark_mc_segmap_task_131301_total_time;
                        futhark_mc_task_131300_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131301_total_iter;
                        futhark_mc_task_131300_task.sched = STATIC;
                        futhark_mc_task_131300_task.nested_fn =
                            futhark_mc_segmap_nested_task_131310;
                        
                        int futhark_mc_segmap_task_131301_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131300_task);
                        
                        if (futhark_mc_segmap_task_131301_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122714, &mem_122708,
                                         "mem_122708") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122713, &mem_122712,
                                         "mem_122712") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122712, "mem_122712") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122708, "mem_122708") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_122716, &ext_mem_122714,
                                     "ext_mem_122714") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122715, &ext_mem_122713,
                                     "ext_mem_122713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122713,
                                       "ext_mem_122713") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122714,
                                       "ext_mem_122714") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_122718, &ext_mem_122716,
                                 "ext_mem_122716") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_122717, &ext_mem_122715,
                                 "ext_mem_122715") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122715, "ext_mem_122715") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122716, "ext_mem_122716") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_122741;
            
            ext_mem_122741.references = NULL;
            if (cond_114865) {
                bool zzero_115680 = l_jump_114471 == (int64_t) 0;
                bool nonzzero_115681 = !zzero_115680;
                bool nonzzero_cert_115682;
                
                if (!nonzzero_115681) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:438:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_122741,
                                       "ext_mem_122741") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122717,
                                       "ext_mem_122717") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122718,
                                       "ext_mem_122718") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122125,
                                       "mem_param_122125") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122117,
                                       "mem_param_122117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123324,
                                       "ext_mem_123324") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123325,
                                       "ext_mem_123325") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122103,
                                       "mem_param_122103") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122095,
                                       "mem_param_122095") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122087,
                                       "mem_param_122087") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123577,
                                       "ext_mem_123577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123578,
                                       "ext_mem_123578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123579,
                                       "ext_mem_123579") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123693,
                                       "mem_out_123693") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123692,
                                       "mem_out_123692") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123691,
                                       "mem_out_123691") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_115683 = sub64(l_n_m_114513, (int64_t) 1);
                struct memblock mem_122740;
                
                mem_122740.references = NULL;
                if (memblock_alloc(ctx, &mem_122740, bytes_121864,
                                   "mem_122740")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_119148 = (int64_t) 0;
                int32_t num_tasks_127710;
                int64_t flat_tid_119150 = (int64_t) 0;
                struct futhark_mc_task_131349 futhark_mc_task_131349;
                
                futhark_mc_task_131349.ctx = ctx;
                futhark_mc_task_131349.free_m_114462 = m_114462;
                futhark_mc_task_131349.free_n_114463 = n_114463;
                futhark_mc_task_131349.free_l_jump_114471 = l_jump_114471;
                futhark_mc_task_131349.free_l_n_m_114513 = l_n_m_114513;
                futhark_mc_task_131349.free_i_114539 = i_114539;
                futhark_mc_task_131349.free_y_115683 = y_115683;
                futhark_mc_task_131349.free_bytes_121846 = bytes_121846;
                futhark_mc_task_131349.free_ext_mem_122717 = ext_mem_122717.mem;
                futhark_mc_task_131349.free_ext_mem_122718 = ext_mem_122718.mem;
                futhark_mc_task_131349.free_mem_122740 = mem_122740.mem;
                
                struct scheduler_segop futhark_mc_task_131349_task;
                
                futhark_mc_task_131349_task.args = &futhark_mc_task_131349;
                futhark_mc_task_131349_task.top_level_fn =
                    futhark_mc_segmap_task_131350;
                futhark_mc_task_131349_task.name =
                    "futhark_mc_segmap_task_131350";
                futhark_mc_task_131349_task.iterations = m_114462;
                futhark_mc_task_131349_task.task_time =
                    &ctx->futhark_mc_segmap_task_131350_total_time;
                futhark_mc_task_131349_task.task_iter =
                    &ctx->futhark_mc_segmap_task_131350_total_iter;
                futhark_mc_task_131349_task.sched = STATIC;
                futhark_mc_task_131349_task.nested_fn =
                    futhark_mc_segmap_nested_task_131354;
                
                int futhark_mc_segmap_task_131350_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_131349_task);
                
                if (futhark_mc_segmap_task_131350_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_122741, &mem_122740,
                                 "mem_122740") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122740, "mem_122740") != 0)
                    return 1;
            } else {
                bool dim_match_115735 = n_114463 == l_n_m_114513;
                bool empty_or_match_cert_115736;
                
                if (!dim_match_115735) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_114462, ", ",
                                  (long long) l_n_m_114513,
                                  ") cannot match shape of type `[",
                                  (long long) m_114462, "][",
                                  (long long) n_114463, "]t`.",
                                  "-> #0  stl.fut:224:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_122741,
                                       "ext_mem_122741") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122717,
                                       "ext_mem_122717") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122718,
                                       "ext_mem_122718") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122125,
                                       "mem_param_122125") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122117,
                                       "mem_param_122117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123324,
                                       "ext_mem_123324") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123325,
                                       "ext_mem_123325") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122103,
                                       "mem_param_122103") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122095,
                                       "mem_param_122095") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122087,
                                       "mem_param_122087") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123577,
                                       "ext_mem_123577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123578,
                                       "ext_mem_123578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123579,
                                       "ext_mem_123579") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123693,
                                       "mem_out_123693") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123692,
                                       "mem_out_123692") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123691,
                                       "mem_out_123691") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_122741, &ext_mem_122718,
                                 "ext_mem_122718") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_122717, "ext_mem_122717") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122718, "ext_mem_122718") != 0)
                return 1;
            
            struct memblock mem_122826;
            
            mem_122826.references = NULL;
            if (memblock_alloc(ctx, &mem_122826, bytes_121864, "mem_122826")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_119204 = (int64_t) 0;
            int32_t num_tasks_127818;
            int64_t flat_tid_119206 = (int64_t) 0;
            struct futhark_mc_task_131362 futhark_mc_task_131362;
            
            futhark_mc_task_131362.ctx = ctx;
            futhark_mc_task_131362.free_m_114462 = m_114462;
            futhark_mc_task_131362.free_n_114463 = n_114463;
            futhark_mc_task_131362.free_n_p_114465 = n_p_114465;
            futhark_mc_task_131362.free_C_len_114511 = C_len_114511;
            futhark_mc_task_131362.free_Y_mem_121802 = Y_mem_121802.mem;
            futhark_mc_task_131362.free_mem_121842 = mem_121842;
            futhark_mc_task_131362.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131362.free_ctx_param_ext_122098 =
                ctx_param_ext_122098;
            futhark_mc_task_131362.free_ctx_param_ext_122099 =
                ctx_param_ext_122099;
            futhark_mc_task_131362.free_ctx_param_ext_122101 =
                ctx_param_ext_122101;
            futhark_mc_task_131362.free_mem_param_122103 = mem_param_122103.mem;
            futhark_mc_task_131362.free_mem_122191 = mem_122191;
            futhark_mc_task_131362.free_ext_mem_122741 = ext_mem_122741.mem;
            futhark_mc_task_131362.free_ext_122742 = ext_122742;
            futhark_mc_task_131362.free_mem_122818 = mem_122818;
            futhark_mc_task_131362.free_mem_122822 = mem_122822;
            futhark_mc_task_131362.free_mem_122826 = mem_122826.mem;
            
            struct scheduler_segop futhark_mc_task_131362_task;
            
            futhark_mc_task_131362_task.args = &futhark_mc_task_131362;
            futhark_mc_task_131362_task.top_level_fn =
                futhark_mc_segmap_task_131363;
            futhark_mc_task_131362_task.name = "futhark_mc_segmap_task_131363";
            futhark_mc_task_131362_task.iterations = m_114462;
            futhark_mc_task_131362_task.task_time =
                &ctx->futhark_mc_segmap_task_131363_total_time;
            futhark_mc_task_131362_task.task_iter =
                &ctx->futhark_mc_segmap_task_131363_total_iter;
            futhark_mc_task_131362_task.sched = STATIC;
            futhark_mc_task_131362_task.nested_fn =
                futhark_mc_segmap_nested_task_131370;
            
            int futhark_mc_segmap_task_131363_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131362_task);
            
            if (futhark_mc_segmap_task_131363_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &ext_mem_122741, "ext_mem_122741") != 0)
                return 1;
            
            struct memblock ext_mem_123295;
            
            ext_mem_123295.references = NULL;
            
            struct memblock ext_mem_123294;
            
            ext_mem_123294.references = NULL;
            if (cond_114941) {
                bool match_lit_115788 = (int64_t) 0 == t_degree_114468;
                struct memblock ext_mem_122944;
                
                ext_mem_122944.references = NULL;
                
                struct memblock ext_mem_122943;
                
                ext_mem_122943.references = NULL;
                if (match_lit_115788) {
                    struct memblock mem_122830;
                    
                    mem_122830.references = NULL;
                    if (memblock_alloc(ctx, &mem_122830, bytes_122068,
                                       "mem_122830")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_127891 = 0; i_127891 < m_114462;
                         i_127891++) {
                        for (int64_t i_127892 = 0; i_127892 < t_n_m_114520;
                             i_127892++) {
                            ((float *) mem_122830.mem)[i_127891 * t_n_m_114520 +
                                                       i_127892] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_122852;
                    
                    mem_122852.references = NULL;
                    if (memblock_alloc(ctx, &mem_122852, bytes_122068,
                                       "mem_122852")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_119238 = (int64_t) 0;
                    int32_t num_tasks_127893;
                    int64_t flat_tid_119240 = (int64_t) 0;
                    struct futhark_mc_task_131385 futhark_mc_task_131385;
                    
                    futhark_mc_task_131385.ctx = ctx;
                    futhark_mc_task_131385.free_m_114462 = m_114462;
                    futhark_mc_task_131385.free_n_114463 = n_114463;
                    futhark_mc_task_131385.free_t_window_114466 =
                        t_window_114466;
                    futhark_mc_task_131385.free_t_jump_114470 = t_jump_114470;
                    futhark_mc_task_131385.free_t_n_m_114520 = t_n_m_114520;
                    futhark_mc_task_131385.free_i_114539 = i_114539;
                    futhark_mc_task_131385.free_mem_121845 = mem_121845;
                    futhark_mc_task_131385.free_mem_121867 = mem_121867;
                    futhark_mc_task_131385.free_bytes_121998 = bytes_121998;
                    futhark_mc_task_131385.free_mem_122067 = mem_122067;
                    futhark_mc_task_131385.free_mem_122071 = mem_122071;
                    futhark_mc_task_131385.free_mem_122818 = mem_122818;
                    futhark_mc_task_131385.free_mem_122822 = mem_122822;
                    futhark_mc_task_131385.free_mem_122852 = mem_122852.mem;
                    
                    struct scheduler_segop futhark_mc_task_131385_task;
                    
                    futhark_mc_task_131385_task.args = &futhark_mc_task_131385;
                    futhark_mc_task_131385_task.top_level_fn =
                        futhark_mc_segmap_task_131386;
                    futhark_mc_task_131385_task.name =
                        "futhark_mc_segmap_task_131386";
                    futhark_mc_task_131385_task.iterations = m_114462;
                    futhark_mc_task_131385_task.task_time =
                        &ctx->futhark_mc_segmap_task_131386_total_time;
                    futhark_mc_task_131385_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131386_total_iter;
                    futhark_mc_task_131385_task.sched = STATIC;
                    futhark_mc_task_131385_task.nested_fn =
                        futhark_mc_segmap_nested_task_131390;
                    
                    int futhark_mc_segmap_task_131386_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131385_task);
                    
                    if (futhark_mc_segmap_task_131386_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_122944, &mem_122852,
                                     "mem_122852") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122943, &mem_122830,
                                     "mem_122830") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122852, "mem_122852") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122830, "mem_122830") != 0)
                        return 1;
                } else {
                    bool match_lit_115859 = (int64_t) 1 == t_degree_114468;
                    struct memblock ext_mem_122942;
                    
                    ext_mem_122942.references = NULL;
                    
                    struct memblock ext_mem_122941;
                    
                    ext_mem_122941.references = NULL;
                    if (match_lit_115859) {
                        struct memblock mem_122892;
                        
                        mem_122892.references = NULL;
                        if (memblock_alloc(ctx, &mem_122892, bytes_122068,
                                           "mem_122892")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122896;
                        
                        mem_122896.references = NULL;
                        if (memblock_alloc(ctx, &mem_122896, bytes_122068,
                                           "mem_122896")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_119425 = (int64_t) 0;
                        int32_t num_tasks_128182;
                        int64_t flat_tid_119427 = (int64_t) 0;
                        struct futhark_mc_task_131411 futhark_mc_task_131411;
                        
                        futhark_mc_task_131411.ctx = ctx;
                        futhark_mc_task_131411.free_m_114462 = m_114462;
                        futhark_mc_task_131411.free_n_114463 = n_114463;
                        futhark_mc_task_131411.free_t_window_114466 =
                            t_window_114466;
                        futhark_mc_task_131411.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131411.free_t_n_m_114520 = t_n_m_114520;
                        futhark_mc_task_131411.free_i_114539 = i_114539;
                        futhark_mc_task_131411.free_mem_121845 = mem_121845;
                        futhark_mc_task_131411.free_mem_121867 = mem_121867;
                        futhark_mc_task_131411.free_bytes_121998 = bytes_121998;
                        futhark_mc_task_131411.free_mem_122067 = mem_122067;
                        futhark_mc_task_131411.free_mem_122071 = mem_122071;
                        futhark_mc_task_131411.free_mem_122818 = mem_122818;
                        futhark_mc_task_131411.free_mem_122822 = mem_122822;
                        futhark_mc_task_131411.free_mem_122892 = mem_122892.mem;
                        futhark_mc_task_131411.free_mem_122896 = mem_122896.mem;
                        
                        struct scheduler_segop futhark_mc_task_131411_task;
                        
                        futhark_mc_task_131411_task.args =
                            &futhark_mc_task_131411;
                        futhark_mc_task_131411_task.top_level_fn =
                            futhark_mc_segmap_task_131412;
                        futhark_mc_task_131411_task.name =
                            "futhark_mc_segmap_task_131412";
                        futhark_mc_task_131411_task.iterations = m_114462;
                        futhark_mc_task_131411_task.task_time =
                            &ctx->futhark_mc_segmap_task_131412_total_time;
                        futhark_mc_task_131411_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131412_total_iter;
                        futhark_mc_task_131411_task.sched = STATIC;
                        futhark_mc_task_131411_task.nested_fn =
                            futhark_mc_segmap_nested_task_131417;
                        
                        int futhark_mc_segmap_task_131412_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131411_task);
                        
                        if (futhark_mc_segmap_task_131412_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122942, &mem_122892,
                                         "mem_122892") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122941, &mem_122896,
                                         "mem_122896") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122896, "mem_122896") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122892, "mem_122892") != 0)
                            return 1;
                    } else {
                        struct memblock mem_122936;
                        
                        mem_122936.references = NULL;
                        if (memblock_alloc(ctx, &mem_122936, bytes_122068,
                                           "mem_122936")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_122940;
                        
                        mem_122940.references = NULL;
                        if (memblock_alloc(ctx, &mem_122940, bytes_122068,
                                           "mem_122940")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_119697 = (int64_t) 0;
                        int32_t num_tasks_128609;
                        int64_t flat_tid_119699 = (int64_t) 0;
                        struct futhark_mc_task_131442 futhark_mc_task_131442;
                        
                        futhark_mc_task_131442.ctx = ctx;
                        futhark_mc_task_131442.free_m_114462 = m_114462;
                        futhark_mc_task_131442.free_n_114463 = n_114463;
                        futhark_mc_task_131442.free_t_window_114466 =
                            t_window_114466;
                        futhark_mc_task_131442.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131442.free_t_n_m_114520 = t_n_m_114520;
                        futhark_mc_task_131442.free_i_114539 = i_114539;
                        futhark_mc_task_131442.free_mem_121845 = mem_121845;
                        futhark_mc_task_131442.free_mem_121867 = mem_121867;
                        futhark_mc_task_131442.free_bytes_121998 = bytes_121998;
                        futhark_mc_task_131442.free_mem_122067 = mem_122067;
                        futhark_mc_task_131442.free_mem_122071 = mem_122071;
                        futhark_mc_task_131442.free_mem_122818 = mem_122818;
                        futhark_mc_task_131442.free_mem_122822 = mem_122822;
                        futhark_mc_task_131442.free_mem_122936 = mem_122936.mem;
                        futhark_mc_task_131442.free_mem_122940 = mem_122940.mem;
                        
                        struct scheduler_segop futhark_mc_task_131442_task;
                        
                        futhark_mc_task_131442_task.args =
                            &futhark_mc_task_131442;
                        futhark_mc_task_131442_task.top_level_fn =
                            futhark_mc_segmap_task_131443;
                        futhark_mc_task_131442_task.name =
                            "futhark_mc_segmap_task_131443";
                        futhark_mc_task_131442_task.iterations = m_114462;
                        futhark_mc_task_131442_task.task_time =
                            &ctx->futhark_mc_segmap_task_131443_total_time;
                        futhark_mc_task_131442_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131443_total_iter;
                        futhark_mc_task_131442_task.sched = STATIC;
                        futhark_mc_task_131442_task.nested_fn =
                            futhark_mc_segmap_nested_task_131448;
                        
                        int futhark_mc_segmap_task_131443_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131442_task);
                        
                        if (futhark_mc_segmap_task_131443_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_122942, &mem_122936,
                                         "mem_122936") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_122941, &mem_122940,
                                         "mem_122940") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122940, "mem_122940") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_122936, "mem_122936") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_122944, &ext_mem_122942,
                                     "ext_mem_122942") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_122943, &ext_mem_122941,
                                     "ext_mem_122941") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122941,
                                       "ext_mem_122941") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122942,
                                       "ext_mem_122942") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_123295, &ext_mem_122944,
                                 "ext_mem_122944") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_123294, &ext_mem_122943,
                                 "ext_mem_122943") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122943, "ext_mem_122943") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_122944, "ext_mem_122944") != 0)
                    return 1;
            } else {
                bool match_lit_116088 = (int64_t) 0 == t_degree_114468;
                struct memblock ext_mem_123293;
                
                ext_mem_123293.references = NULL;
                
                struct memblock ext_mem_123292;
                
                ext_mem_123292.references = NULL;
                if (match_lit_116088) {
                    struct memblock mem_122948;
                    
                    mem_122948.references = NULL;
                    if (memblock_alloc(ctx, &mem_122948, bytes_122068,
                                       "mem_122948")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_129168 = 0; i_129168 < m_114462;
                         i_129168++) {
                        for (int64_t i_129169 = 0; i_129169 < t_n_m_114520;
                             i_129169++) {
                            ((float *) mem_122948.mem)[i_129168 * t_n_m_114520 +
                                                       i_129169] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_123003;
                    
                    mem_123003.references = NULL;
                    if (memblock_alloc(ctx, &mem_123003, bytes_122068,
                                       "mem_123003")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_122950 = (int64_t) 4 * t_window_114466;
                    int64_t bytes_122949 = smax64((int64_t) 0, binop_y_122950);
                    int64_t flat_tid_120065 = (int64_t) 0;
                    int32_t num_tasks_129170;
                    int64_t flat_tid_120067 = (int64_t) 0;
                    struct futhark_mc_task_131475 futhark_mc_task_131475;
                    
                    futhark_mc_task_131475.ctx = ctx;
                    futhark_mc_task_131475.free_m_114462 = m_114462;
                    futhark_mc_task_131475.free_n_114463 = n_114463;
                    futhark_mc_task_131475.free_t_window_114466 =
                        t_window_114466;
                    futhark_mc_task_131475.free_t_jump_114470 = t_jump_114470;
                    futhark_mc_task_131475.free_t_n_m_114520 = t_n_m_114520;
                    futhark_mc_task_131475.free_i_114539 = i_114539;
                    futhark_mc_task_131475.free_mem_121845 = mem_121845;
                    futhark_mc_task_131475.free_mem_121867 = mem_121867;
                    futhark_mc_task_131475.free_bytes_121998 = bytes_121998;
                    futhark_mc_task_131475.free_mem_122067 = mem_122067;
                    futhark_mc_task_131475.free_mem_122071 = mem_122071;
                    futhark_mc_task_131475.free_mem_122818 = mem_122818;
                    futhark_mc_task_131475.free_mem_122822 = mem_122822;
                    futhark_mc_task_131475.free_bytes_122949 = bytes_122949;
                    futhark_mc_task_131475.free_mem_123003 = mem_123003.mem;
                    
                    struct scheduler_segop futhark_mc_task_131475_task;
                    
                    futhark_mc_task_131475_task.args = &futhark_mc_task_131475;
                    futhark_mc_task_131475_task.top_level_fn =
                        futhark_mc_segmap_task_131476;
                    futhark_mc_task_131475_task.name =
                        "futhark_mc_segmap_task_131476";
                    futhark_mc_task_131475_task.iterations = m_114462;
                    futhark_mc_task_131475_task.task_time =
                        &ctx->futhark_mc_segmap_task_131476_total_time;
                    futhark_mc_task_131475_task.task_iter =
                        &ctx->futhark_mc_segmap_task_131476_total_iter;
                    futhark_mc_task_131475_task.sched = STATIC;
                    futhark_mc_task_131475_task.nested_fn =
                        futhark_mc_segmap_nested_task_131481;
                    
                    int futhark_mc_segmap_task_131476_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_131475_task);
                    
                    if (futhark_mc_segmap_task_131476_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_123293, &mem_123003,
                                     "mem_123003") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123292, &mem_122948,
                                     "mem_122948") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_123003, "mem_123003") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122948, "mem_122948") != 0)
                        return 1;
                } else {
                    bool match_lit_116145 = (int64_t) 1 == t_degree_114468;
                    struct memblock ext_mem_123291;
                    
                    ext_mem_123291.references = NULL;
                    
                    struct memblock ext_mem_123290;
                    
                    ext_mem_123290.references = NULL;
                    if (match_lit_116145) {
                        struct memblock mem_123109;
                        
                        mem_123109.references = NULL;
                        if (memblock_alloc(ctx, &mem_123109, bytes_122068,
                                           "mem_123109")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123113;
                        
                        mem_123113.references = NULL;
                        if (memblock_alloc(ctx, &mem_123113, bytes_122068,
                                           "mem_123113")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_123005 = (int64_t) 4 * t_window_114466;
                        int64_t bytes_123004 = smax64((int64_t) 0,
                                                      binop_y_123005);
                        int64_t flat_tid_120210 = (int64_t) 0;
                        int32_t num_tasks_129399;
                        int64_t flat_tid_120212 = (int64_t) 0;
                        struct futhark_mc_task_131504 futhark_mc_task_131504;
                        
                        futhark_mc_task_131504.ctx = ctx;
                        futhark_mc_task_131504.free_m_114462 = m_114462;
                        futhark_mc_task_131504.free_n_114463 = n_114463;
                        futhark_mc_task_131504.free_t_window_114466 =
                            t_window_114466;
                        futhark_mc_task_131504.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131504.free_t_n_m_114520 = t_n_m_114520;
                        futhark_mc_task_131504.free_i_114539 = i_114539;
                        futhark_mc_task_131504.free_mem_121845 = mem_121845;
                        futhark_mc_task_131504.free_mem_121867 = mem_121867;
                        futhark_mc_task_131504.free_bytes_121998 = bytes_121998;
                        futhark_mc_task_131504.free_mem_122067 = mem_122067;
                        futhark_mc_task_131504.free_mem_122071 = mem_122071;
                        futhark_mc_task_131504.free_mem_122818 = mem_122818;
                        futhark_mc_task_131504.free_mem_122822 = mem_122822;
                        futhark_mc_task_131504.free_bytes_123004 = bytes_123004;
                        futhark_mc_task_131504.free_mem_123109 = mem_123109.mem;
                        futhark_mc_task_131504.free_mem_123113 = mem_123113.mem;
                        
                        struct scheduler_segop futhark_mc_task_131504_task;
                        
                        futhark_mc_task_131504_task.args =
                            &futhark_mc_task_131504;
                        futhark_mc_task_131504_task.top_level_fn =
                            futhark_mc_segmap_task_131505;
                        futhark_mc_task_131504_task.name =
                            "futhark_mc_segmap_task_131505";
                        futhark_mc_task_131504_task.iterations = m_114462;
                        futhark_mc_task_131504_task.task_time =
                            &ctx->futhark_mc_segmap_task_131505_total_time;
                        futhark_mc_task_131504_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131505_total_iter;
                        futhark_mc_task_131504_task.sched = STATIC;
                        futhark_mc_task_131504_task.nested_fn =
                            futhark_mc_segmap_nested_task_131512;
                        
                        int futhark_mc_segmap_task_131505_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131504_task);
                        
                        if (futhark_mc_segmap_task_131505_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123291, &mem_123109,
                                         "mem_123109") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123290, &mem_123113,
                                         "mem_123113") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123113, "mem_123113") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123109, "mem_123109") != 0)
                            return 1;
                    } else {
                        struct memblock mem_123285;
                        
                        mem_123285.references = NULL;
                        if (memblock_alloc(ctx, &mem_123285, bytes_122068,
                                           "mem_123285")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_123289;
                        
                        mem_123289.references = NULL;
                        if (memblock_alloc(ctx, &mem_123289, bytes_122068,
                                           "mem_123289")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_123115 = (int64_t) 4 * t_window_114466;
                        int64_t bytes_123114 = smax64((int64_t) 0,
                                                      binop_y_123115);
                        int64_t flat_tid_120443 = (int64_t) 0;
                        int32_t num_tasks_129781;
                        int64_t flat_tid_120445 = (int64_t) 0;
                        struct futhark_mc_task_131541 futhark_mc_task_131541;
                        
                        futhark_mc_task_131541.ctx = ctx;
                        futhark_mc_task_131541.free_m_114462 = m_114462;
                        futhark_mc_task_131541.free_n_114463 = n_114463;
                        futhark_mc_task_131541.free_t_window_114466 =
                            t_window_114466;
                        futhark_mc_task_131541.free_t_jump_114470 =
                            t_jump_114470;
                        futhark_mc_task_131541.free_t_n_m_114520 = t_n_m_114520;
                        futhark_mc_task_131541.free_i_114539 = i_114539;
                        futhark_mc_task_131541.free_mem_121845 = mem_121845;
                        futhark_mc_task_131541.free_mem_121867 = mem_121867;
                        futhark_mc_task_131541.free_bytes_121998 = bytes_121998;
                        futhark_mc_task_131541.free_mem_122067 = mem_122067;
                        futhark_mc_task_131541.free_mem_122071 = mem_122071;
                        futhark_mc_task_131541.free_mem_122818 = mem_122818;
                        futhark_mc_task_131541.free_mem_122822 = mem_122822;
                        futhark_mc_task_131541.free_bytes_123114 = bytes_123114;
                        futhark_mc_task_131541.free_mem_123285 = mem_123285.mem;
                        futhark_mc_task_131541.free_mem_123289 = mem_123289.mem;
                        
                        struct scheduler_segop futhark_mc_task_131541_task;
                        
                        futhark_mc_task_131541_task.args =
                            &futhark_mc_task_131541;
                        futhark_mc_task_131541_task.top_level_fn =
                            futhark_mc_segmap_task_131542;
                        futhark_mc_task_131541_task.name =
                            "futhark_mc_segmap_task_131542";
                        futhark_mc_task_131541_task.iterations = m_114462;
                        futhark_mc_task_131541_task.task_time =
                            &ctx->futhark_mc_segmap_task_131542_total_time;
                        futhark_mc_task_131541_task.task_iter =
                            &ctx->futhark_mc_segmap_task_131542_total_iter;
                        futhark_mc_task_131541_task.sched = STATIC;
                        futhark_mc_task_131541_task.nested_fn =
                            futhark_mc_segmap_nested_task_131551;
                        
                        int futhark_mc_segmap_task_131542_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_131541_task);
                        
                        if (futhark_mc_segmap_task_131542_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_123291, &mem_123285,
                                         "mem_123285") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_123290, &mem_123289,
                                         "mem_123289") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123289, "mem_123289") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_123285, "mem_123285") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_123293, &ext_mem_123291,
                                     "ext_mem_123291") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_123292, &ext_mem_123290,
                                     "ext_mem_123290") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123290,
                                       "ext_mem_123290") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123291,
                                       "ext_mem_123291") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_123295, &ext_mem_123293,
                                 "ext_mem_123293") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_123294, &ext_mem_123292,
                                 "ext_mem_123292") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123292, "ext_mem_123292") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123293, "ext_mem_123293") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_123318;
            
            ext_mem_123318.references = NULL;
            if (cond_114866) {
                bool zzero_116393 = t_jump_114470 == (int64_t) 0;
                bool nonzzero_116394 = !zzero_116393;
                bool nonzzero_cert_116395;
                
                if (!nonzzero_116394) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:438:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:437:3-450:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_123318,
                                       "ext_mem_123318") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123294,
                                       "ext_mem_123294") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123295,
                                       "ext_mem_123295") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122826, "mem_122826") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122741,
                                       "ext_mem_122741") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122717,
                                       "ext_mem_122717") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122718,
                                       "ext_mem_122718") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122125,
                                       "mem_param_122125") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122117,
                                       "mem_param_122117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123324,
                                       "ext_mem_123324") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123325,
                                       "ext_mem_123325") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122103,
                                       "mem_param_122103") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122095,
                                       "mem_param_122095") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122087,
                                       "mem_param_122087") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123577,
                                       "ext_mem_123577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123578,
                                       "ext_mem_123578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123579,
                                       "ext_mem_123579") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123693,
                                       "mem_out_123693") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123692,
                                       "mem_out_123692") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123691,
                                       "mem_out_123691") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_116396 = sub64(t_n_m_114520, (int64_t) 1);
                struct memblock mem_123317;
                
                mem_123317.references = NULL;
                if (memblock_alloc(ctx, &mem_123317, bytes_121864,
                                   "mem_123317")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_120786 = (int64_t) 0;
                int32_t num_tasks_130347;
                int64_t flat_tid_120788 = (int64_t) 0;
                struct futhark_mc_task_131590 futhark_mc_task_131590;
                
                futhark_mc_task_131590.ctx = ctx;
                futhark_mc_task_131590.free_m_114462 = m_114462;
                futhark_mc_task_131590.free_n_114463 = n_114463;
                futhark_mc_task_131590.free_t_jump_114470 = t_jump_114470;
                futhark_mc_task_131590.free_t_n_m_114520 = t_n_m_114520;
                futhark_mc_task_131590.free_i_114539 = i_114539;
                futhark_mc_task_131590.free_y_116396 = y_116396;
                futhark_mc_task_131590.free_bytes_121846 = bytes_121846;
                futhark_mc_task_131590.free_ext_mem_123294 = ext_mem_123294.mem;
                futhark_mc_task_131590.free_ext_mem_123295 = ext_mem_123295.mem;
                futhark_mc_task_131590.free_mem_123317 = mem_123317.mem;
                
                struct scheduler_segop futhark_mc_task_131590_task;
                
                futhark_mc_task_131590_task.args = &futhark_mc_task_131590;
                futhark_mc_task_131590_task.top_level_fn =
                    futhark_mc_segmap_task_131591;
                futhark_mc_task_131590_task.name =
                    "futhark_mc_segmap_task_131591";
                futhark_mc_task_131590_task.iterations = m_114462;
                futhark_mc_task_131590_task.task_time =
                    &ctx->futhark_mc_segmap_task_131591_total_time;
                futhark_mc_task_131590_task.task_iter =
                    &ctx->futhark_mc_segmap_task_131591_total_iter;
                futhark_mc_task_131590_task.sched = STATIC;
                futhark_mc_task_131590_task.nested_fn =
                    futhark_mc_segmap_nested_task_131595;
                
                int futhark_mc_segmap_task_131591_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_131590_task);
                
                if (futhark_mc_segmap_task_131591_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_123318, &mem_123317,
                                 "mem_123317") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_123317, "mem_123317") != 0)
                    return 1;
            } else {
                bool dim_match_116449 = n_114463 == t_n_m_114520;
                bool empty_or_match_cert_116450;
                
                if (!dim_match_116449) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_114462, ", ",
                                  (long long) t_n_m_114520,
                                  ") cannot match shape of type `[",
                                  (long long) m_114462, "][",
                                  (long long) n_114463, "]t`.",
                                  "-> #0  stl.fut:274:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_123318,
                                       "ext_mem_123318") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123294,
                                       "ext_mem_123294") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123295,
                                       "ext_mem_123295") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122826, "mem_122826") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122741,
                                       "ext_mem_122741") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122717,
                                       "ext_mem_122717") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_122718,
                                       "ext_mem_122718") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122125,
                                       "mem_param_122125") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122117,
                                       "mem_param_122117") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123324,
                                       "ext_mem_123324") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123325,
                                       "ext_mem_123325") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122103,
                                       "mem_param_122103") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122095,
                                       "mem_param_122095") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_122087,
                                       "mem_param_122087") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123577,
                                       "ext_mem_123577") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123578,
                                       "ext_mem_123578") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_123579,
                                       "ext_mem_123579") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123693,
                                       "mem_out_123693") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123692,
                                       "mem_out_123692") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_123691,
                                       "mem_out_123691") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_123318, &ext_mem_123295,
                                 "ext_mem_123295") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_123294, "ext_mem_123294") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123295, "ext_mem_123295") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_124860 = ext_123319;
            int64_t ctx_param_ext_tmp_124861 = ext_123319;
            struct memblock mem_param_tmp_124862;
            
            mem_param_tmp_124862.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_124862, &mem_122826,
                             "mem_122826") != 0)
                return 1;
            
            struct memblock mem_param_tmp_124863;
            
            mem_param_tmp_124863.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_124863, &ext_mem_123318,
                             "ext_mem_123318") != 0)
                return 1;
            ctx_param_ext_122119 = ctx_param_ext_tmp_124860;
            ctx_param_ext_122121 = ctx_param_ext_tmp_124861;
            if (memblock_set(ctx, &mem_param_122117, &mem_param_tmp_124862,
                             "mem_param_tmp_124862") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_122125, &mem_param_tmp_124863,
                             "mem_param_tmp_124863") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_124863,
                               "mem_param_tmp_124863") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_124862,
                               "mem_param_tmp_124862") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123318, "ext_mem_123318") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123294, "ext_mem_123294") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_123295, "ext_mem_123295") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_122826, "mem_122826") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122741, "ext_mem_122741") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122717, "ext_mem_122717") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_122718, "ext_mem_122718") != 0)
                return 1;
        }
        ext_123331 = ctx_param_ext_122119;
        ext_123329 = ctx_param_ext_122121;
        if (memblock_set(ctx, &ext_mem_123325, &mem_param_122117,
                         "mem_param_122117") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_123324, &mem_param_122125,
                         "mem_param_122125") != 0)
            return 1;
        
        bool cond_116452 = slt64(i_outer_114945, y_114867);
        int64_t ext_123576;
        
        if (cond_116452) {
            ext_123576 = m_114462;
        } else {
            ext_123576 = ctx_param_ext_122100;
        }
        
        int64_t ext_123575;
        
        if (cond_116452) {
            ext_123575 = n_114463;
        } else {
            ext_123575 = ctx_param_ext_122102;
        }
        
        int64_t ext_123574;
        
        if (cond_116452) {
            ext_123574 = m_114462;
        } else {
            ext_123574 = ctx_param_ext_122096;
        }
        
        int64_t ext_123573;
        
        if (cond_116452) {
            ext_123573 = n_114463;
        } else {
            ext_123573 = ctx_param_ext_122097;
        }
        
        int64_t ext_123572;
        
        if (cond_116452) {
            ext_123572 = n_114463;
        } else {
            ext_123572 = ctx_param_ext_122099;
        }
        
        int64_t ext_123571;
        
        if (cond_116452) {
            ext_123571 = (int64_t) 1;
        } else {
            ext_123571 = ctx_param_ext_122101;
        }
        
        int64_t ext_123570;
        
        if (cond_116452) {
            ext_123570 = (int64_t) 0;
        } else {
            ext_123570 = ctx_param_ext_122098;
        }
        
        struct memblock ext_mem_123569;
        
        ext_mem_123569.references = NULL;
        if (cond_116452) {
            if (mem_123361_cached_sizze_130911 < (size_t) bytes_121864) {
                mem_123361 = realloc(mem_123361, bytes_121864);
                mem_123361_cached_sizze_130911 = bytes_121864;
            }
            
            int64_t flat_tid_120842 = (int64_t) 0;
            int32_t num_tasks_130455;
            int64_t flat_tid_120844 = (int64_t) 0;
            struct futhark_mc_task_131603 futhark_mc_task_131603;
            
            futhark_mc_task_131603.ctx = ctx;
            futhark_mc_task_131603.free_m_114462 = m_114462;
            futhark_mc_task_131603.free_n_114463 = n_114463;
            futhark_mc_task_131603.free_Y_mem_121802 = Y_mem_121802.mem;
            futhark_mc_task_131603.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131603.free_ext_mem_123324 = ext_mem_123324.mem;
            futhark_mc_task_131603.free_ext_mem_123325 = ext_mem_123325.mem;
            futhark_mc_task_131603.free_ext_123329 = ext_123329;
            futhark_mc_task_131603.free_mem_123361 = mem_123361;
            
            struct scheduler_segop futhark_mc_task_131603_task;
            
            futhark_mc_task_131603_task.args = &futhark_mc_task_131603;
            futhark_mc_task_131603_task.top_level_fn =
                futhark_mc_segmap_task_131604;
            futhark_mc_task_131603_task.name = "futhark_mc_segmap_task_131604";
            futhark_mc_task_131603_task.iterations = m_114462;
            futhark_mc_task_131603_task.task_time =
                &ctx->futhark_mc_segmap_task_131604_total_time;
            futhark_mc_task_131603_task.task_iter =
                &ctx->futhark_mc_segmap_task_131604_total_iter;
            futhark_mc_task_131603_task.sched = STATIC;
            futhark_mc_task_131603_task.nested_fn =
                futhark_mc_segmap_nested_task_131608;
            
            int futhark_mc_segmap_task_131604_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131603_task);
            
            if (futhark_mc_segmap_task_131604_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (mem_123383_cached_sizze_130912 < (size_t) bytes_121864) {
                mem_123383 = realloc(mem_123383, bytes_121864);
                mem_123383_cached_sizze_130912 = bytes_121864;
            }
            
            int64_t flat_tid_120860 = (int64_t) 0;
            int32_t num_tasks_130487;
            int64_t flat_tid_120862 = (int64_t) 0;
            struct futhark_mc_task_131616 futhark_mc_task_131616;
            
            futhark_mc_task_131616.ctx = ctx;
            futhark_mc_task_131616.free_m_114462 = m_114462;
            futhark_mc_task_131616.free_n_114463 = n_114463;
            futhark_mc_task_131616.free_mem_121842 = mem_121842;
            futhark_mc_task_131616.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131616.free_mem_123361 = mem_123361;
            futhark_mc_task_131616.free_mem_123383 = mem_123383;
            
            struct scheduler_segop futhark_mc_task_131616_task;
            
            futhark_mc_task_131616_task.args = &futhark_mc_task_131616;
            futhark_mc_task_131616_task.top_level_fn =
                futhark_mc_segmap_task_131617;
            futhark_mc_task_131616_task.name = "futhark_mc_segmap_task_131617";
            futhark_mc_task_131616_task.iterations = m_114462;
            futhark_mc_task_131616_task.task_time =
                &ctx->futhark_mc_segmap_task_131617_total_time;
            futhark_mc_task_131616_task.task_iter =
                &ctx->futhark_mc_segmap_task_131617_total_iter;
            futhark_mc_task_131616_task.sched = STATIC;
            futhark_mc_task_131616_task.nested_fn =
                futhark_mc_segmap_nested_task_131621;
            
            int futhark_mc_segmap_task_131617_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131616_task);
            
            if (futhark_mc_segmap_task_131617_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t iters_116480;
            
            if (empty_slice_114918) {
                iters_116480 = 0;
            } else {
                iters_116480 = 16;
            }
            
            bool loop_nonempty_116481 = slt32(0, iters_116480);
            bool loop_not_taken_116482 = !loop_nonempty_116481;
            bool protect_assert_disj_116483 = bounds_check_114542 ||
                 loop_not_taken_116482;
            bool index_certs_116484;
            
            if (!protect_assert_disj_116483) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_114539,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  stl.fut:305:35-77\n   #5  stl.fut:304:28-306:40\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_123569, "ext_mem_123569") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122125,
                                   "mem_param_122125") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122117,
                                   "mem_param_122117") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123324, "ext_mem_123324") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123325, "ext_mem_123325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122103,
                                   "mem_param_122103") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122095,
                                   "mem_param_122095") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122087,
                                   "mem_param_122087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123577, "ext_mem_123577") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123578, "ext_mem_123578") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123579, "ext_mem_123579") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
                    return 1;
                return 1;
            }
            if (mem_123537_cached_sizze_130913 < (size_t) bytes_121864) {
                mem_123537 = realloc(mem_123537, bytes_121864);
                mem_123537_cached_sizze_130913 = bytes_121864;
            }
            
            int64_t double_buffer_sizze_123681 = (int64_t) 4 * n_114463;
            int64_t double_buffer_sizze_123685 = (int64_t) 4 * n_114463;
            int64_t flat_tid_120876 = (int64_t) 0;
            int32_t num_tasks_130520;
            int64_t flat_tid_120878 = (int64_t) 0;
            struct futhark_mc_task_131629 futhark_mc_task_131629;
            
            futhark_mc_task_131629.ctx = ctx;
            futhark_mc_task_131629.free_m_114462 = m_114462;
            futhark_mc_task_131629.free_n_114463 = n_114463;
            futhark_mc_task_131629.free_i_114539 = i_114539;
            futhark_mc_task_131629.free_iters_116480 = iters_116480;
            futhark_mc_task_131629.free_bytes_121803 = bytes_121803;
            futhark_mc_task_131629.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131629.free_mem_123383 = mem_123383;
            futhark_mc_task_131629.free_mem_123537 = mem_123537;
            futhark_mc_task_131629.free_double_buffer_sizze_123681 =
                double_buffer_sizze_123681;
            futhark_mc_task_131629.free_double_buffer_sizze_123685 =
                double_buffer_sizze_123685;
            
            struct scheduler_segop futhark_mc_task_131629_task;
            
            futhark_mc_task_131629_task.args = &futhark_mc_task_131629;
            futhark_mc_task_131629_task.top_level_fn =
                futhark_mc_segmap_task_131630;
            futhark_mc_task_131629_task.name = "futhark_mc_segmap_task_131630";
            futhark_mc_task_131629_task.iterations = m_114462;
            futhark_mc_task_131629_task.task_time =
                &ctx->futhark_mc_segmap_task_131630_total_time;
            futhark_mc_task_131629_task.task_iter =
                &ctx->futhark_mc_segmap_task_131630_total_iter;
            futhark_mc_task_131629_task.sched = STATIC;
            futhark_mc_task_131629_task.nested_fn =
                futhark_mc_segmap_nested_task_131640;
            
            int futhark_mc_segmap_task_131630_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131629_task);
            
            if (futhark_mc_segmap_task_131630_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            bool empty_slice_116598 = j_m_i_114931 == (int64_t) 0;
            int64_t m_116599 = sub64(j_m_i_114931, (int64_t) 1);
            int64_t i_p_m_t_s_116600 = add64(stl_res_114533, m_116599);
            bool zzero_leq_i_p_m_t_s_116601 = sle64((int64_t) 0,
                                                    i_p_m_t_s_116600);
            bool i_p_m_t_s_leq_w_116602 = slt64(i_p_m_t_s_116600, n_114463);
            bool zzero_lte_i_116603 = sle64((int64_t) 0, stl_res_114533);
            bool i_lte_j_116604 = sle64(stl_res_114533, stl_res_114534);
            bool y_116605 = i_p_m_t_s_leq_w_116602 && zzero_lte_i_116603;
            bool y_116606 = zzero_leq_i_p_m_t_s_116601 && y_116605;
            bool y_116607 = i_lte_j_116604 && y_116606;
            bool forwards_ok_116608 = zzero_lte_i_116603 && y_116607;
            bool ok_or_empty_116609 = empty_slice_116598 || forwards_ok_116608;
            bool index_certs_116610;
            
            if (!ok_or_empty_116609) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) stl_res_114533, ":",
                              (long long) stl_res_114534,
                              "] out of bounds for array of shape [",
                              (long long) n_114463, "].",
                              "-> #0  stl.fut:311:33-51\n   #1  stl.fut:309:13-316:28\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_123569, "ext_mem_123569") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122125,
                                   "mem_param_122125") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122117,
                                   "mem_param_122117") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123324, "ext_mem_123324") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123325, "ext_mem_123325") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122103,
                                   "mem_param_122103") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122095,
                                   "mem_param_122095") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_122087,
                                   "mem_param_122087") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123577, "ext_mem_123577") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123578, "ext_mem_123578") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_123579, "ext_mem_123579") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
                    return 1;
                return 1;
            }
            
            int64_t binop_y_123539 = (int64_t) 4 * m_114462;
            int64_t bytes_123538 = smax64((int64_t) 0, binop_y_123539);
            
            if (mem_123540_cached_sizze_130914 < (size_t) bytes_123538) {
                mem_123540 = realloc(mem_123540, bytes_123538);
                mem_123540_cached_sizze_130914 = bytes_123538;
            }
            if (mem_123543_cached_sizze_130915 < (size_t) bytes_123538) {
                mem_123543 = realloc(mem_123543, bytes_123538);
                mem_123543_cached_sizze_130915 = bytes_123538;
            }
            if (mem_123546_cached_sizze_130916 < (size_t) bytes_123538) {
                mem_123546 = realloc(mem_123546, bytes_123538);
                mem_123546_cached_sizze_130916 = bytes_123538;
            }
            
            int64_t flat_tid_120969 = (int64_t) 0;
            int32_t num_tasks_130786;
            int64_t flat_tid_120971 = (int64_t) 0;
            struct futhark_mc_task_131664 futhark_mc_task_131664;
            
            futhark_mc_task_131664.ctx = ctx;
            futhark_mc_task_131664.free_m_114462 = m_114462;
            futhark_mc_task_131664.free_n_114463 = n_114463;
            futhark_mc_task_131664.free_stl_res_114533 = stl_res_114533;
            futhark_mc_task_131664.free_j_m_i_114931 = j_m_i_114931;
            futhark_mc_task_131664.free_mem_123537 = mem_123537;
            futhark_mc_task_131664.free_mem_123540 = mem_123540;
            futhark_mc_task_131664.free_mem_123543 = mem_123543;
            futhark_mc_task_131664.free_mem_123546 = mem_123546;
            
            struct scheduler_segop futhark_mc_task_131664_task;
            
            futhark_mc_task_131664_task.args = &futhark_mc_task_131664;
            futhark_mc_task_131664_task.top_level_fn =
                futhark_mc_segmap_task_131665;
            futhark_mc_task_131664_task.name = "futhark_mc_segmap_task_131665";
            futhark_mc_task_131664_task.iterations = m_114462;
            futhark_mc_task_131664_task.task_time =
                &ctx->futhark_mc_segmap_task_131665_total_time;
            futhark_mc_task_131664_task.task_iter =
                &ctx->futhark_mc_segmap_task_131665_total_iter;
            futhark_mc_task_131664_task.sched = STATIC;
            futhark_mc_task_131664_task.nested_fn =
                futhark_mc_segmap_nested_task_131668;
            
            int futhark_mc_segmap_task_131665_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131664_task);
            
            if (futhark_mc_segmap_task_131665_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock mem_123568;
            
            mem_123568.references = NULL;
            if (memblock_alloc(ctx, &mem_123568, bytes_121864, "mem_123568")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_120984 = (int64_t) 0;
            int32_t num_tasks_130813;
            int64_t flat_tid_120986 = (int64_t) 0;
            struct futhark_mc_task_131676 futhark_mc_task_131676;
            
            futhark_mc_task_131676.ctx = ctx;
            futhark_mc_task_131676.free_m_114462 = m_114462;
            futhark_mc_task_131676.free_n_114463 = n_114463;
            futhark_mc_task_131676.free_bytes_121846 = bytes_121846;
            futhark_mc_task_131676.free_mem_123361 = mem_123361;
            futhark_mc_task_131676.free_mem_123540 = mem_123540;
            futhark_mc_task_131676.free_mem_123543 = mem_123543;
            futhark_mc_task_131676.free_mem_123546 = mem_123546;
            futhark_mc_task_131676.free_mem_123568 = mem_123568.mem;
            
            struct scheduler_segop futhark_mc_task_131676_task;
            
            futhark_mc_task_131676_task.args = &futhark_mc_task_131676;
            futhark_mc_task_131676_task.top_level_fn =
                futhark_mc_segmap_task_131677;
            futhark_mc_task_131676_task.name = "futhark_mc_segmap_task_131677";
            futhark_mc_task_131676_task.iterations = m_114462;
            futhark_mc_task_131676_task.task_time =
                &ctx->futhark_mc_segmap_task_131677_total_time;
            futhark_mc_task_131676_task.task_iter =
                &ctx->futhark_mc_segmap_task_131677_total_iter;
            futhark_mc_task_131676_task.sched = STATIC;
            futhark_mc_task_131676_task.nested_fn =
                futhark_mc_segmap_nested_task_131681;
            
            int futhark_mc_segmap_task_131677_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_131676_task);
            
            if (futhark_mc_segmap_task_131677_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_123569, &mem_123568, "mem_123568") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_123568, "mem_123568") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_123569, &mem_param_122103,
                             "mem_param_122103") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_124845 = ext_123331;
        int64_t ctx_param_ext_tmp_124846 = ext_123329;
        int64_t ctx_param_ext_tmp_124847 = ext_123574;
        int64_t ctx_param_ext_tmp_124848 = ext_123573;
        int64_t ctx_param_ext_tmp_124849 = ext_123570;
        int64_t ctx_param_ext_tmp_124850 = ext_123572;
        int64_t ctx_param_ext_tmp_124851 = ext_123576;
        int64_t ctx_param_ext_tmp_124852 = ext_123571;
        int64_t ctx_param_ext_tmp_124853 = ext_123575;
        struct memblock mem_param_tmp_124854;
        
        mem_param_tmp_124854.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124854, &ext_mem_123325,
                         "ext_mem_123325") != 0)
            return 1;
        
        struct memblock mem_param_tmp_124855;
        
        mem_param_tmp_124855.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124855, &ext_mem_123324,
                         "ext_mem_123324") != 0)
            return 1;
        
        struct memblock mem_param_tmp_124856;
        
        mem_param_tmp_124856.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_124856, &ext_mem_123569,
                         "ext_mem_123569") != 0)
            return 1;
        ctx_param_ext_122089 = ctx_param_ext_tmp_124845;
        ctx_param_ext_122091 = ctx_param_ext_tmp_124846;
        ctx_param_ext_122096 = ctx_param_ext_tmp_124847;
        ctx_param_ext_122097 = ctx_param_ext_tmp_124848;
        ctx_param_ext_122098 = ctx_param_ext_tmp_124849;
        ctx_param_ext_122099 = ctx_param_ext_tmp_124850;
        ctx_param_ext_122100 = ctx_param_ext_tmp_124851;
        ctx_param_ext_122101 = ctx_param_ext_tmp_124852;
        ctx_param_ext_122102 = ctx_param_ext_tmp_124853;
        if (memblock_set(ctx, &mem_param_122087, &mem_param_tmp_124854,
                         "mem_param_tmp_124854") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122095, &mem_param_tmp_124855,
                         "mem_param_tmp_124855") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_122103, &mem_param_tmp_124856,
                         "mem_param_tmp_124856") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_124856,
                           "mem_param_tmp_124856") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_124855,
                           "mem_param_tmp_124855") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_124854,
                           "mem_param_tmp_124854") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123569, "ext_mem_123569") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_122125, "mem_param_122125") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_122117, "mem_param_122117") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123324, "ext_mem_123324") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_123325, "ext_mem_123325") != 0)
            return 1;
    }
    ext_123592 = ctx_param_ext_122089;
    ext_123590 = ctx_param_ext_122091;
    ext_123586 = ctx_param_ext_122096;
    ext_123585 = ctx_param_ext_122097;
    ext_123584 = ctx_param_ext_122098;
    ext_123583 = ctx_param_ext_122099;
    ext_123582 = ctx_param_ext_122100;
    ext_123581 = ctx_param_ext_122101;
    ext_123580 = ctx_param_ext_122102;
    if (memblock_set(ctx, &ext_mem_123579, &mem_param_122087,
                     "mem_param_122087") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_123578, &mem_param_122095,
                     "mem_param_122095") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_123577, &mem_param_122103,
                     "mem_param_122103") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
        return 1;
    
    struct memblock mem_123622;
    
    mem_123622.references = NULL;
    if (memblock_alloc(ctx, &mem_123622, bytes_121864, "mem_123622")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t flat_tid_121012 = (int64_t) 0;
    int32_t num_tasks_130868;
    int64_t flat_tid_121014 = (int64_t) 0;
    struct futhark_mc_task_131689 futhark_mc_task_131689;
    
    futhark_mc_task_131689.ctx = ctx;
    futhark_mc_task_131689.free_m_114462 = m_114462;
    futhark_mc_task_131689.free_n_114463 = n_114463;
    futhark_mc_task_131689.free_Y_mem_121802 = Y_mem_121802.mem;
    futhark_mc_task_131689.free_bytes_121846 = bytes_121846;
    futhark_mc_task_131689.free_ext_mem_123578 = ext_mem_123578.mem;
    futhark_mc_task_131689.free_ext_mem_123579 = ext_mem_123579.mem;
    futhark_mc_task_131689.free_ext_123590 = ext_123590;
    futhark_mc_task_131689.free_mem_123622 = mem_123622.mem;
    
    struct scheduler_segop futhark_mc_task_131689_task;
    
    futhark_mc_task_131689_task.args = &futhark_mc_task_131689;
    futhark_mc_task_131689_task.top_level_fn = futhark_mc_segmap_task_131690;
    futhark_mc_task_131689_task.name = "futhark_mc_segmap_task_131690";
    futhark_mc_task_131689_task.iterations = m_114462;
    futhark_mc_task_131689_task.task_time =
        &ctx->futhark_mc_segmap_task_131690_total_time;
    futhark_mc_task_131689_task.task_iter =
        &ctx->futhark_mc_segmap_task_131690_total_iter;
    futhark_mc_task_131689_task.sched = STATIC;
    futhark_mc_task_131689_task.nested_fn =
        futhark_mc_segmap_nested_task_131694;
    
    int futhark_mc_segmap_task_131690_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_131689_task);
    
    if (futhark_mc_segmap_task_131690_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_123626;
    
    mem_123626.references = NULL;
    if (memblock_alloc(ctx, &mem_123626, bytes_121864, "mem_123626")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_123626.mem + (int64_t) 0, ext_mem_123579.mem + (int64_t) 0,
            m_114462 * n_114463 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_123579, "ext_mem_123579") != 0)
        return 1;
    
    struct memblock mem_123631;
    
    mem_123631.references = NULL;
    if (memblock_alloc(ctx, &mem_123631, bytes_121864, "mem_123631")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_123631.mem + (int64_t) 0, ext_mem_123578.mem + (int64_t) 0,
            m_114462 * n_114463 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_123578, "ext_mem_123578") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123691, &mem_123626, "mem_123626") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123692, &mem_123631, "mem_123631") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_123693, &mem_123622, "mem_123622") != 0)
        return 1;
    (*mem_out_p_130893).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_130893, &mem_out_123691,
                     "mem_out_123691") != 0)
        return 1;
    (*mem_out_p_130894).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_130894, &mem_out_123692,
                     "mem_out_123692") != 0)
        return 1;
    (*mem_out_p_130895).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_130895, &mem_out_123693,
                     "mem_out_123693") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123631, "mem_123631") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123626, "mem_123626") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_123622, "mem_123622") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122103, "mem_param_122103") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122095, "mem_param_122095") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_122087, "mem_param_122087") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123577, "ext_mem_123577") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123578, "ext_mem_123578") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_123579, "ext_mem_123579") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122079, "mem_122079") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_122075, "mem_122075") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123693, "mem_out_123693") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123692, "mem_out_123692") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_123691, "mem_out_123691") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_121842);
    free(mem_121845);
    free(mem_121867);
    free(mem_121889);
    free(mem_121911);
    free(mem_121987);
    free(mem_121991);
    free(mem_122067);
    free(mem_122071);
    free(mem_122147);
    free(mem_122169);
    free(mem_122191);
    free(mem_122249);
    free(mem_122818);
    free(mem_122822);
    free(mem_123361);
    free(mem_123383);
    free(mem_123537);
    free(mem_123540);
    free(mem_123543);
    free(mem_123546);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11)
{
    struct memblock Y_mem_121802;
    
    Y_mem_121802.references = NULL;
    
    int64_t m_114462;
    int64_t n_114463;
    int64_t n_p_114465;
    int64_t t_window_114466;
    int64_t l_window_114467;
    int64_t t_degree_114468;
    int64_t l_degree_114469;
    int64_t t_jump_114470;
    int64_t l_jump_114471;
    int64_t inner_114472;
    int64_t outer_114473;
    int64_t jump_threshold_114474;
    int64_t max_group_sizze_114475;
    struct memblock mem_out_123691;
    
    mem_out_123691.references = NULL;
    
    struct memblock mem_out_123692;
    
    mem_out_123692.references = NULL;
    
    struct memblock mem_out_123693;
    
    mem_out_123693.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_121802 = in0->mem;
    m_114462 = in0->shape[0];
    n_114463 = in0->shape[1];
    n_p_114465 = in1;
    t_window_114466 = in2;
    l_window_114467 = in3;
    t_degree_114468 = in4;
    l_degree_114469 = in5;
    t_jump_114470 = in6;
    l_jump_114471 = in7;
    inner_114472 = in8;
    outer_114473 = in9;
    jump_threshold_114474 = in10;
    max_group_sizze_114475 = in11;
    if (!(m_114462 == in0->shape[0] && n_114463 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_123691, &mem_out_123692,
                                &mem_out_123693, Y_mem_121802, m_114462,
                                n_114463, n_p_114465, t_window_114466,
                                l_window_114467, t_degree_114468,
                                l_degree_114469, t_jump_114470, l_jump_114471,
                                inner_114472, outer_114473,
                                jump_threshold_114474, max_group_sizze_114475);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_123691;
            (*out0)->shape[0] = m_114462;
            (*out0)->shape[1] = n_114463;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_123692;
            (*out1)->shape[0] = m_114462;
            (*out1)->shape[1] = n_114463;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_123693;
            (*out2)->shape[0] = m_114462;
            (*out2)->shape[1] = n_114463;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
