// Generated by Futhark 0.20.0
// git: 5cc4d4b (Tue Jul 6 11:53:53 2021 -0700)
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifdef __clang__
#pragma clang diagnostic ignored "-Wunused-function"
#pragma clang diagnostic ignored "-Wunused-variable"
#pragma clang diagnostic ignored "-Wparentheses"
#pragma clang diagnostic ignored "-Wunused-label"
#elif __GNUC__
#pragma GCC diagnostic ignored "-Wunused-function"
#pragma GCC diagnostic ignored "-Wunused-variable"
#pragma GCC diagnostic ignored "-Wparentheses"
#pragma GCC diagnostic ignored "-Wunused-label"
#pragma GCC diagnostic ignored "-Wunused-but-set-variable"
#endif
// Headers

#include <stdint.h>
#include <stddef.h>
#include <stdbool.h>
#include <stdio.h>
#include <float.h>

#ifdef __cplusplus
extern "C" {
#endif

// Initialisation

struct futhark_context_config;
struct futhark_context_config *futhark_context_config_new(void);
void futhark_context_config_free(struct futhark_context_config *cfg);
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag);
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int flag);
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n);
struct futhark_context;
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg);
void futhark_context_free(struct futhark_context *ctx);
int futhark_context_sync(struct futhark_context *ctx);
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value);
int futhark_get_num_sizes(void);
const char *futhark_get_size_name(int);
const char *futhark_get_size_class(int);

// Arrays

struct futhark_f32_2d;
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1);
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1);
int futhark_free_f32_2d(struct futhark_context *ctx,
                        struct futhark_f32_2d *arr);
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data);
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr);
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr);

// Opaque values


// Entry points

int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11);

// Miscellaneous

char *futhark_context_report(struct futhark_context *ctx);
char *futhark_context_get_error(struct futhark_context *ctx);
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f);
void futhark_context_pause_profiling(struct futhark_context *ctx);
void futhark_context_unpause_profiling(struct futhark_context *ctx);
int futhark_context_clear_caches(struct futhark_context *ctx);
#define FUTHARK_BACKEND_multicore
#ifdef __cplusplus
}
#endif
#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <math.h>
#include <stdint.h>
#undef NDEBUG
#include <assert.h>
#include <stdarg.h>
// Start of util.h.
//
// Various helper functions that are useful in all generated C code.

#include <errno.h>
#include <string.h>

static const char *fut_progname = "(embedded Futhark)";

static void futhark_panic(int eval, const char *fmt, ...) {
  va_list ap;
  va_start(ap, fmt);
  fprintf(stderr, "%s: ", fut_progname);
  vfprintf(stderr, fmt, ap);
  va_end(ap);
  exit(eval);
}

// For generating arbitrary-sized error messages.  It is the callers
// responsibility to free the buffer at some point.
static char* msgprintf(const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = 1 + (size_t)vsnprintf(NULL, 0, s, vl);
  char *buffer = (char*) malloc(needed);
  va_start(vl, s); // Must re-init.
  vsnprintf(buffer, needed, s, vl);
  return buffer;
}


static inline void check_err(int errval, int sets_errno, const char *fun, int line,
                            const char *msg, ...) {
  if (errval) {
    char errnum[10];

    va_list vl;
    va_start(vl, msg);

    fprintf(stderr, "ERROR: ");
    vfprintf(stderr, msg, vl);
    fprintf(stderr, " in %s() at line %d with error code %s\n",
            fun, line,
            sets_errno ? strerror(errno) : errnum);
    exit(errval);
  }
}

#define CHECK_ERR(err, msg...) check_err(err, 0, __func__, __LINE__, msg)
#define CHECK_ERRNO(err, msg...) check_err(err, 1, __func__, __LINE__, msg)

// Read the rest of an open file into a NUL-terminated string; returns
// NULL on error.
static void* fslurp_file(FILE *f, size_t *size) {
  size_t start = ftell(f);
  fseek(f, 0, SEEK_END);
  size_t src_size = ftell(f)-start;
  fseek(f, start, SEEK_SET);
  unsigned char *s = (unsigned char*) malloc(src_size + 1);
  if (fread(s, 1, src_size, f) != src_size) {
    free(s);
    s = NULL;
  } else {
    s[src_size] = '\0';
  }

  if (size) {
    *size = src_size;
  }

  return s;
}

// Read a file into a NUL-terminated string; returns NULL on error.
static void* slurp_file(const char *filename, size_t *size) {
  FILE *f = fopen(filename, "rb"); // To avoid Windows messing with linebreaks.
  if (f == NULL) return NULL;
  unsigned char *s = fslurp_file(f, size);
  fclose(f);
  return s;
}

// Dump 'n' bytes from 'buf' into the file at the designated location.
// Returns 0 on success.
static int dump_file(const char *file, const void *buf, size_t n) {
  FILE *f = fopen(file, "w");

  if (f == NULL) {
    return 1;
  }

  if (fwrite(buf, sizeof(char), n, f) != n) {
    return 1;
  }

  if (fclose(f) != 0) {
    return 1;
  }

  return 0;
}

struct str_builder {
  char *str;
  size_t capacity; // Size of buffer.
  size_t used; // Bytes used, *not* including final zero.
};

static void str_builder_init(struct str_builder *b) {
  b->capacity = 10;
  b->used = 0;
  b->str = malloc(b->capacity);
  b->str[0] = 0;
}

static void str_builder(struct str_builder *b, const char *s, ...) {
  va_list vl;
  va_start(vl, s);
  size_t needed = (size_t)vsnprintf(NULL, 0, s, vl);

  while (b->capacity < b->used + needed + 1) {
    b->capacity *= 2;
    b->str = realloc(b->str, b->capacity);
  }

  va_start(vl, s); // Must re-init.
  vsnprintf(b->str+b->used, b->capacity-b->used, s, vl);
  b->used += needed;
}

// End of util.h.

// Start of timing.h.

// The function get_wall_time() returns the wall time in microseconds
// (with an unspecified offset).

#ifdef _WIN32

#include <windows.h>

static int64_t get_wall_time(void) {
  LARGE_INTEGER time,freq;
  assert(QueryPerformanceFrequency(&freq));
  assert(QueryPerformanceCounter(&time));
  return ((double)time.QuadPart / freq.QuadPart) * 1000000;
}

#else
// Assuming POSIX

#include <time.h>
#include <sys/time.h>

static int64_t get_wall_time(void) {
  struct timeval time;
  assert(gettimeofday(&time,NULL) == 0);
  return time.tv_sec * 1000000 + time.tv_usec;
}

static int64_t get_wall_time_ns(void) {
  struct timespec time;
  assert(clock_gettime(CLOCK_REALTIME, &time) == 0);
  return time.tv_sec * 1000000000 + time.tv_nsec;
}

#endif

// End of timing.h.

#ifdef _MSC_VER
#define inline __inline
#endif
#include <string.h>
#include <string.h>
#include <errno.h>
#include <assert.h>
#include <ctype.h>

// Start of lock.h.

// A very simple cross-platform implementation of locks.  Uses
// pthreads on Unix and some Windows thing there.  Futhark's
// host-level code is not multithreaded, but user code may be, so we
// need some mechanism for ensuring atomic access to API functions.
// This is that mechanism.  It is not exposed to user code at all, so
// we do not have to worry about name collisions.

#ifdef _WIN32

typedef HANDLE lock_t;

static void create_lock(lock_t *lock) {
  *lock = CreateMutex(NULL,  // Default security attributes.
                      FALSE, // Initially unlocked.
                      NULL); // Unnamed.
}

static void lock_lock(lock_t *lock) {
  assert(WaitForSingleObject(*lock, INFINITE) == WAIT_OBJECT_0);
}

static void lock_unlock(lock_t *lock) {
  assert(ReleaseMutex(*lock));
}

static void free_lock(lock_t *lock) {
  CloseHandle(*lock);
}

#else
// Assuming POSIX

#include <pthread.h>

typedef pthread_mutex_t lock_t;

static void create_lock(lock_t *lock) {
  int r = pthread_mutex_init(lock, NULL);
  assert(r == 0);
}

static void lock_lock(lock_t *lock) {
  int r = pthread_mutex_lock(lock);
  assert(r == 0);
}

static void lock_unlock(lock_t *lock) {
  int r = pthread_mutex_unlock(lock);
  assert(r == 0);
}

static void free_lock(lock_t *lock) {
  // Nothing to do for pthreads.
  (void)lock;
}

#endif

// End of lock.h.

static inline uint8_t add8(uint8_t x, uint8_t y)
{
    return x + y;
}
static inline uint16_t add16(uint16_t x, uint16_t y)
{
    return x + y;
}
static inline uint32_t add32(uint32_t x, uint32_t y)
{
    return x + y;
}
static inline uint64_t add64(uint64_t x, uint64_t y)
{
    return x + y;
}
static inline uint8_t sub8(uint8_t x, uint8_t y)
{
    return x - y;
}
static inline uint16_t sub16(uint16_t x, uint16_t y)
{
    return x - y;
}
static inline uint32_t sub32(uint32_t x, uint32_t y)
{
    return x - y;
}
static inline uint64_t sub64(uint64_t x, uint64_t y)
{
    return x - y;
}
static inline uint8_t mul8(uint8_t x, uint8_t y)
{
    return x * y;
}
static inline uint16_t mul16(uint16_t x, uint16_t y)
{
    return x * y;
}
static inline uint32_t mul32(uint32_t x, uint32_t y)
{
    return x * y;
}
static inline uint64_t mul64(uint64_t x, uint64_t y)
{
    return x * y;
}
static inline uint8_t udiv8(uint8_t x, uint8_t y)
{
    return x / y;
}
static inline uint16_t udiv16(uint16_t x, uint16_t y)
{
    return x / y;
}
static inline uint32_t udiv32(uint32_t x, uint32_t y)
{
    return x / y;
}
static inline uint64_t udiv64(uint64_t x, uint64_t y)
{
    return x / y;
}
static inline uint8_t udiv_up8(uint8_t x, uint8_t y)
{
    return (x + y - 1) / y;
}
static inline uint16_t udiv_up16(uint16_t x, uint16_t y)
{
    return (x + y - 1) / y;
}
static inline uint32_t udiv_up32(uint32_t x, uint32_t y)
{
    return (x + y - 1) / y;
}
static inline uint64_t udiv_up64(uint64_t x, uint64_t y)
{
    return (x + y - 1) / y;
}
static inline uint8_t umod8(uint8_t x, uint8_t y)
{
    return x % y;
}
static inline uint16_t umod16(uint16_t x, uint16_t y)
{
    return x % y;
}
static inline uint32_t umod32(uint32_t x, uint32_t y)
{
    return x % y;
}
static inline uint64_t umod64(uint64_t x, uint64_t y)
{
    return x % y;
}
static inline uint8_t udiv_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint16_t udiv_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint32_t udiv_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint64_t udiv_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline uint8_t udiv_up_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint16_t udiv_up_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint32_t udiv_up_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint64_t udiv_up_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : (x + y - 1) / y;
}
static inline uint8_t umod_safe8(uint8_t x, uint8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint16_t umod_safe16(uint16_t x, uint16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint32_t umod_safe32(uint32_t x, uint32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline uint64_t umod_safe64(uint64_t x, uint64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t sdiv8(int8_t x, int8_t y)
{
    int8_t q = x / y;
    int8_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int16_t sdiv16(int16_t x, int16_t y)
{
    int16_t q = x / y;
    int16_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int32_t sdiv32(int32_t x, int32_t y)
{
    int32_t q = x / y;
    int32_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int64_t sdiv64(int64_t x, int64_t y)
{
    int64_t q = x / y;
    int64_t r = x % y;
    
    return q - ((r != 0 && r < 0 != y < 0) ? 1 : 0);
}
static inline int8_t sdiv_up8(int8_t x, int8_t y)
{
    return sdiv8(x + y - 1, y);
}
static inline int16_t sdiv_up16(int16_t x, int16_t y)
{
    return sdiv16(x + y - 1, y);
}
static inline int32_t sdiv_up32(int32_t x, int32_t y)
{
    return sdiv32(x + y - 1, y);
}
static inline int64_t sdiv_up64(int64_t x, int64_t y)
{
    return sdiv64(x + y - 1, y);
}
static inline int8_t smod8(int8_t x, int8_t y)
{
    int8_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int16_t smod16(int16_t x, int16_t y)
{
    int16_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int32_t smod32(int32_t x, int32_t y)
{
    int32_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int64_t smod64(int64_t x, int64_t y)
{
    int64_t r = x % y;
    
    return r + (r == 0 || (x > 0 && y > 0) || (x < 0 && y < 0) ? 0 : y);
}
static inline int8_t sdiv_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : sdiv8(x, y);
}
static inline int16_t sdiv_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : sdiv16(x, y);
}
static inline int32_t sdiv_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : sdiv32(x, y);
}
static inline int64_t sdiv_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : sdiv64(x, y);
}
static inline int8_t sdiv_up_safe8(int8_t x, int8_t y)
{
    return sdiv_safe8(x + y - 1, y);
}
static inline int16_t sdiv_up_safe16(int16_t x, int16_t y)
{
    return sdiv_safe16(x + y - 1, y);
}
static inline int32_t sdiv_up_safe32(int32_t x, int32_t y)
{
    return sdiv_safe32(x + y - 1, y);
}
static inline int64_t sdiv_up_safe64(int64_t x, int64_t y)
{
    return sdiv_safe64(x + y - 1, y);
}
static inline int8_t smod_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : smod8(x, y);
}
static inline int16_t smod_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : smod16(x, y);
}
static inline int32_t smod_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : smod32(x, y);
}
static inline int64_t smod_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : smod64(x, y);
}
static inline int8_t squot8(int8_t x, int8_t y)
{
    return x / y;
}
static inline int16_t squot16(int16_t x, int16_t y)
{
    return x / y;
}
static inline int32_t squot32(int32_t x, int32_t y)
{
    return x / y;
}
static inline int64_t squot64(int64_t x, int64_t y)
{
    return x / y;
}
static inline int8_t srem8(int8_t x, int8_t y)
{
    return x % y;
}
static inline int16_t srem16(int16_t x, int16_t y)
{
    return x % y;
}
static inline int32_t srem32(int32_t x, int32_t y)
{
    return x % y;
}
static inline int64_t srem64(int64_t x, int64_t y)
{
    return x % y;
}
static inline int8_t squot_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int16_t squot_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int32_t squot_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int64_t squot_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x / y;
}
static inline int8_t srem_safe8(int8_t x, int8_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int16_t srem_safe16(int16_t x, int16_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int32_t srem_safe32(int32_t x, int32_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int64_t srem_safe64(int64_t x, int64_t y)
{
    return y == 0 ? 0 : x % y;
}
static inline int8_t smin8(int8_t x, int8_t y)
{
    return x < y ? x : y;
}
static inline int16_t smin16(int16_t x, int16_t y)
{
    return x < y ? x : y;
}
static inline int32_t smin32(int32_t x, int32_t y)
{
    return x < y ? x : y;
}
static inline int64_t smin64(int64_t x, int64_t y)
{
    return x < y ? x : y;
}
static inline uint8_t umin8(uint8_t x, uint8_t y)
{
    return x < y ? x : y;
}
static inline uint16_t umin16(uint16_t x, uint16_t y)
{
    return x < y ? x : y;
}
static inline uint32_t umin32(uint32_t x, uint32_t y)
{
    return x < y ? x : y;
}
static inline uint64_t umin64(uint64_t x, uint64_t y)
{
    return x < y ? x : y;
}
static inline int8_t smax8(int8_t x, int8_t y)
{
    return x < y ? y : x;
}
static inline int16_t smax16(int16_t x, int16_t y)
{
    return x < y ? y : x;
}
static inline int32_t smax32(int32_t x, int32_t y)
{
    return x < y ? y : x;
}
static inline int64_t smax64(int64_t x, int64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t umax8(uint8_t x, uint8_t y)
{
    return x < y ? y : x;
}
static inline uint16_t umax16(uint16_t x, uint16_t y)
{
    return x < y ? y : x;
}
static inline uint32_t umax32(uint32_t x, uint32_t y)
{
    return x < y ? y : x;
}
static inline uint64_t umax64(uint64_t x, uint64_t y)
{
    return x < y ? y : x;
}
static inline uint8_t shl8(uint8_t x, uint8_t y)
{
    return x << y;
}
static inline uint16_t shl16(uint16_t x, uint16_t y)
{
    return x << y;
}
static inline uint32_t shl32(uint32_t x, uint32_t y)
{
    return x << y;
}
static inline uint64_t shl64(uint64_t x, uint64_t y)
{
    return x << y;
}
static inline uint8_t lshr8(uint8_t x, uint8_t y)
{
    return x >> y;
}
static inline uint16_t lshr16(uint16_t x, uint16_t y)
{
    return x >> y;
}
static inline uint32_t lshr32(uint32_t x, uint32_t y)
{
    return x >> y;
}
static inline uint64_t lshr64(uint64_t x, uint64_t y)
{
    return x >> y;
}
static inline int8_t ashr8(int8_t x, int8_t y)
{
    return x >> y;
}
static inline int16_t ashr16(int16_t x, int16_t y)
{
    return x >> y;
}
static inline int32_t ashr32(int32_t x, int32_t y)
{
    return x >> y;
}
static inline int64_t ashr64(int64_t x, int64_t y)
{
    return x >> y;
}
static inline uint8_t and8(uint8_t x, uint8_t y)
{
    return x & y;
}
static inline uint16_t and16(uint16_t x, uint16_t y)
{
    return x & y;
}
static inline uint32_t and32(uint32_t x, uint32_t y)
{
    return x & y;
}
static inline uint64_t and64(uint64_t x, uint64_t y)
{
    return x & y;
}
static inline uint8_t or8(uint8_t x, uint8_t y)
{
    return x | y;
}
static inline uint16_t or16(uint16_t x, uint16_t y)
{
    return x | y;
}
static inline uint32_t or32(uint32_t x, uint32_t y)
{
    return x | y;
}
static inline uint64_t or64(uint64_t x, uint64_t y)
{
    return x | y;
}
static inline uint8_t xor8(uint8_t x, uint8_t y)
{
    return x ^ y;
}
static inline uint16_t xor16(uint16_t x, uint16_t y)
{
    return x ^ y;
}
static inline uint32_t xor32(uint32_t x, uint32_t y)
{
    return x ^ y;
}
static inline uint64_t xor64(uint64_t x, uint64_t y)
{
    return x ^ y;
}
static inline bool ult8(uint8_t x, uint8_t y)
{
    return x < y;
}
static inline bool ult16(uint16_t x, uint16_t y)
{
    return x < y;
}
static inline bool ult32(uint32_t x, uint32_t y)
{
    return x < y;
}
static inline bool ult64(uint64_t x, uint64_t y)
{
    return x < y;
}
static inline bool ule8(uint8_t x, uint8_t y)
{
    return x <= y;
}
static inline bool ule16(uint16_t x, uint16_t y)
{
    return x <= y;
}
static inline bool ule32(uint32_t x, uint32_t y)
{
    return x <= y;
}
static inline bool ule64(uint64_t x, uint64_t y)
{
    return x <= y;
}
static inline bool slt8(int8_t x, int8_t y)
{
    return x < y;
}
static inline bool slt16(int16_t x, int16_t y)
{
    return x < y;
}
static inline bool slt32(int32_t x, int32_t y)
{
    return x < y;
}
static inline bool slt64(int64_t x, int64_t y)
{
    return x < y;
}
static inline bool sle8(int8_t x, int8_t y)
{
    return x <= y;
}
static inline bool sle16(int16_t x, int16_t y)
{
    return x <= y;
}
static inline bool sle32(int32_t x, int32_t y)
{
    return x <= y;
}
static inline bool sle64(int64_t x, int64_t y)
{
    return x <= y;
}
static inline int8_t pow8(int8_t x, int8_t y)
{
    int8_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int16_t pow16(int16_t x, int16_t y)
{
    int16_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int32_t pow32(int32_t x, int32_t y)
{
    int32_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline int64_t pow64(int64_t x, int64_t y)
{
    int64_t res = 1, rem = y;
    
    while (rem != 0) {
        if (rem & 1)
            res *= x;
        rem >>= 1;
        x *= x;
    }
    return res;
}
static inline bool itob_i8_bool(int8_t x)
{
    return x;
}
static inline bool itob_i16_bool(int16_t x)
{
    return x;
}
static inline bool itob_i32_bool(int32_t x)
{
    return x;
}
static inline bool itob_i64_bool(int64_t x)
{
    return x;
}
static inline int8_t btoi_bool_i8(bool x)
{
    return x;
}
static inline int16_t btoi_bool_i16(bool x)
{
    return x;
}
static inline int32_t btoi_bool_i32(bool x)
{
    return x;
}
static inline int64_t btoi_bool_i64(bool x)
{
    return x;
}
#define sext_i8_i8(x) ((int8_t) (int8_t) x)
#define sext_i8_i16(x) ((int16_t) (int8_t) x)
#define sext_i8_i32(x) ((int32_t) (int8_t) x)
#define sext_i8_i64(x) ((int64_t) (int8_t) x)
#define sext_i16_i8(x) ((int8_t) (int16_t) x)
#define sext_i16_i16(x) ((int16_t) (int16_t) x)
#define sext_i16_i32(x) ((int32_t) (int16_t) x)
#define sext_i16_i64(x) ((int64_t) (int16_t) x)
#define sext_i32_i8(x) ((int8_t) (int32_t) x)
#define sext_i32_i16(x) ((int16_t) (int32_t) x)
#define sext_i32_i32(x) ((int32_t) (int32_t) x)
#define sext_i32_i64(x) ((int64_t) (int32_t) x)
#define sext_i64_i8(x) ((int8_t) (int64_t) x)
#define sext_i64_i16(x) ((int16_t) (int64_t) x)
#define sext_i64_i32(x) ((int32_t) (int64_t) x)
#define sext_i64_i64(x) ((int64_t) (int64_t) x)
#define zext_i8_i8(x) ((int8_t) (uint8_t) x)
#define zext_i8_i16(x) ((int16_t) (uint8_t) x)
#define zext_i8_i32(x) ((int32_t) (uint8_t) x)
#define zext_i8_i64(x) ((int64_t) (uint8_t) x)
#define zext_i16_i8(x) ((int8_t) (uint16_t) x)
#define zext_i16_i16(x) ((int16_t) (uint16_t) x)
#define zext_i16_i32(x) ((int32_t) (uint16_t) x)
#define zext_i16_i64(x) ((int64_t) (uint16_t) x)
#define zext_i32_i8(x) ((int8_t) (uint32_t) x)
#define zext_i32_i16(x) ((int16_t) (uint32_t) x)
#define zext_i32_i32(x) ((int32_t) (uint32_t) x)
#define zext_i32_i64(x) ((int64_t) (uint32_t) x)
#define zext_i64_i8(x) ((int8_t) (uint64_t) x)
#define zext_i64_i16(x) ((int16_t) (uint64_t) x)
#define zext_i64_i32(x) ((int32_t) (uint64_t) x)
#define zext_i64_i64(x) ((int64_t) (uint64_t) x)
static int8_t abs8(int8_t x)
{
    return abs(x);
}
static int16_t abs16(int16_t x)
{
    return abs(x);
}
static int32_t abs32(int32_t x)
{
    return abs(x);
}
#if defined(__OPENCL_VERSION__)
static int64_t abs64(int64_t x)
{
    return abs(x);
}
#else
static int64_t abs64(int64_t x)
{
    return llabs(x);
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_popc8(int8_t x)
{
    return popcount(x);
}
static int32_t futrts_popc16(int16_t x)
{
    return popcount(x);
}
static int32_t futrts_popc32(int32_t x)
{
    return popcount(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return popcount(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_popc8(int8_t x)
{
    return __popc(zext_i8_i32(x));
}
static int32_t futrts_popc16(int16_t x)
{
    return __popc(zext_i16_i32(x));
}
static int32_t futrts_popc32(int32_t x)
{
    return __popc(x);
}
static int32_t futrts_popc64(int64_t x)
{
    return __popcll(x);
}
#else
static int32_t futrts_popc8(int8_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc16(int16_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc32(int32_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
static int32_t futrts_popc64(int64_t x)
{
    int c = 0;
    
    for (; x; ++c)
        x &= x - 1;
    return c;
}
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    return mul_hi(a, b);
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    return mul_hi(a, b);
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mul_hi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul_hi(a, b);
}
#elif defined(__CUDA_ARCH__)
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    return mulhi(a, b);
}
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    return mul64hi(a, b);
}
#else
static uint8_t futrts_mul_hi8(uint8_t a, uint8_t b)
{
    uint16_t aa = a;
    uint16_t bb = b;
    
    return aa * bb >> 8;
}
static uint16_t futrts_mul_hi16(uint16_t a, uint16_t b)
{
    uint32_t aa = a;
    uint32_t bb = b;
    
    return aa * bb >> 16;
}
static uint32_t futrts_mul_hi32(uint32_t a, uint32_t b)
{
    uint64_t aa = a;
    uint64_t bb = b;
    
    return aa * bb >> 32;
}
#ifdef __EMSCRIPTEN__
static uint64_t futrts_mul_hi64(uint64_t x, uint64_t y)
{
    uint64_t a = x >> 32, b = x & 0xffffffff;
    uint64_t c = y >> 32, d = y & 0xffffffff;
    uint64_t ac = a * c;
    uint64_t bc = b * c;
    uint64_t ad = a * d;
    uint64_t bd = b * d;
    uint64_t mid34 = (bd >> 32) + (bc & 0xffffffff) + (ad & 0xffffffff);
    uint64_t upper64 = ac + (bc >> 32) + (ad >> 32) + (mid34 >> 32);
    
    return upper64;
}
#else
static uint64_t futrts_mul_hi64(uint64_t a, uint64_t b)
{
    __uint128_t aa = a;
    __uint128_t bb = b;
    
    return aa * bb >> 64;
}
#endif
#endif
#if defined(__OPENCL_VERSION__)
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return mad_hi(a, b, c);
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return mad_hi(a, b, c);
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return mad_hi(a, b, c);
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return mad_hi(a, b, c);
}
#else
static uint8_t futrts_mad_hi8(uint8_t a, uint8_t b, uint8_t c)
{
    return futrts_mul_hi8(a, b) + c;
}
static uint16_t futrts_mad_hi16(uint16_t a, uint16_t b, uint16_t c)
{
    return futrts_mul_hi16(a, b) + c;
}
static uint32_t futrts_mad_hi32(uint32_t a, uint32_t b, uint32_t c)
{
    return futrts_mul_hi32(a, b) + c;
}
static uint64_t futrts_mad_hi64(uint64_t a, uint64_t b, uint64_t c)
{
    return futrts_mul_hi64(a, b) + c;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_clzz8(int8_t x)
{
    return clz(x);
}
static int32_t futrts_clzz16(int16_t x)
{
    return clz(x);
}
static int32_t futrts_clzz32(int32_t x)
{
    return clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return clz(x);
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_clzz8(int8_t x)
{
    return __clz(zext_i8_i32(x)) - 24;
}
static int32_t futrts_clzz16(int16_t x)
{
    return __clz(zext_i16_i32(x)) - 16;
}
static int32_t futrts_clzz32(int32_t x)
{
    return __clz(x);
}
static int32_t futrts_clzz64(int64_t x)
{
    return __clzll(x);
}
#else
static int32_t futrts_clzz8(int8_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz16(int16_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz32(int32_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
static int32_t futrts_clzz64(int64_t x)
{
    int n = 0;
    int bits = sizeof(x) * 8;
    
    for (int i = 0; i < bits; i++) {
        if (x < 0)
            break;
        n++;
        x <<= 1;
    }
    return n;
}
#endif
#if defined(__OPENCL_VERSION__)
static int32_t futrts_ctzz8(int8_t x)
{
    int i = 0;
    
    for (; i < 8 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int i = 0;
    
    for (; i < 16 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int i = 0;
    
    for (; i < 32 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int i = 0;
    
    for (; i < 64 && (x & 1) == 0; i++, x >>= 1)
        ;
    return i;
}
#elif defined(__CUDA_ARCH__)
static int32_t futrts_ctzz8(int8_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 8 : y - 1;
}
static int32_t futrts_ctzz16(int16_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 16 : y - 1;
}
static int32_t futrts_ctzz32(int32_t x)
{
    int y = __ffs(x);
    
    return y == 0 ? 32 : y - 1;
}
static int32_t futrts_ctzz64(int64_t x)
{
    int y = __ffsll(x);
    
    return y == 0 ? 64 : y - 1;
}
#else
static int32_t futrts_ctzz8(int8_t x)
{
    return x == 0 ? 8 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz16(int16_t x)
{
    return x == 0 ? 16 : __builtin_ctz((uint32_t) x);
}
static int32_t futrts_ctzz32(int32_t x)
{
    return x == 0 ? 32 : __builtin_ctz(x);
}
static int32_t futrts_ctzz64(int64_t x)
{
    return x == 0 ? 64 : __builtin_ctzll(x);
}
#endif
static inline float fdiv32(float x, float y)
{
    return x / y;
}
static inline float fadd32(float x, float y)
{
    return x + y;
}
static inline float fsub32(float x, float y)
{
    return x - y;
}
static inline float fmul32(float x, float y)
{
    return x * y;
}
static inline bool cmplt32(float x, float y)
{
    return x < y;
}
static inline bool cmple32(float x, float y)
{
    return x <= y;
}
static inline float sitofp_i8_f32(int8_t x)
{
    return (float) x;
}
static inline float sitofp_i16_f32(int16_t x)
{
    return (float) x;
}
static inline float sitofp_i32_f32(int32_t x)
{
    return (float) x;
}
static inline float sitofp_i64_f32(int64_t x)
{
    return (float) x;
}
static inline float uitofp_i8_f32(uint8_t x)
{
    return (float) x;
}
static inline float uitofp_i16_f32(uint16_t x)
{
    return (float) x;
}
static inline float uitofp_i32_f32(uint32_t x)
{
    return (float) x;
}
static inline float uitofp_i64_f32(uint64_t x)
{
    return (float) x;
}
static inline int8_t fptosi_f32_i8(float x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f32_i16(float x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f32_i32(float x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f32_i64(float x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f32_i8(float x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f32_i16(float x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f32_i32(float x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f32_i64(float x)
{
    return (uint64_t) x;
}
static inline double fdiv64(double x, double y)
{
    return x / y;
}
static inline double fadd64(double x, double y)
{
    return x + y;
}
static inline double fsub64(double x, double y)
{
    return x - y;
}
static inline double fmul64(double x, double y)
{
    return x * y;
}
static inline bool cmplt64(double x, double y)
{
    return x < y;
}
static inline bool cmple64(double x, double y)
{
    return x <= y;
}
static inline double sitofp_i8_f64(int8_t x)
{
    return (double) x;
}
static inline double sitofp_i16_f64(int16_t x)
{
    return (double) x;
}
static inline double sitofp_i32_f64(int32_t x)
{
    return (double) x;
}
static inline double sitofp_i64_f64(int64_t x)
{
    return (double) x;
}
static inline double uitofp_i8_f64(uint8_t x)
{
    return (double) x;
}
static inline double uitofp_i16_f64(uint16_t x)
{
    return (double) x;
}
static inline double uitofp_i32_f64(uint32_t x)
{
    return (double) x;
}
static inline double uitofp_i64_f64(uint64_t x)
{
    return (double) x;
}
static inline int8_t fptosi_f64_i8(double x)
{
    return (int8_t) x;
}
static inline int16_t fptosi_f64_i16(double x)
{
    return (int16_t) x;
}
static inline int32_t fptosi_f64_i32(double x)
{
    return (int32_t) x;
}
static inline int64_t fptosi_f64_i64(double x)
{
    return (int64_t) x;
}
static inline uint8_t fptoui_f64_i8(double x)
{
    return (uint8_t) x;
}
static inline uint16_t fptoui_f64_i16(double x)
{
    return (uint16_t) x;
}
static inline uint32_t fptoui_f64_i32(double x)
{
    return (uint32_t) x;
}
static inline uint64_t fptoui_f64_i64(double x)
{
    return (uint64_t) x;
}
static inline float fpconv_f32_f32(float x)
{
    return (float) x;
}
static inline double fpconv_f32_f64(float x)
{
    return (double) x;
}
static inline float fpconv_f64_f32(double x)
{
    return (float) x;
}
static inline double fpconv_f64_f64(double x)
{
    return (double) x;
}
#ifdef __OPENCL_VERSION__
static inline float fabs32(float x)
{
    return fabs(x);
}
static inline float fmax32(float x, float y)
{
    return fmax(x, y);
}
static inline float fmin32(float x, float y)
{
    return fmin(x, y);
}
static inline float fpow32(float x, float y)
{
    return pow(x, y);
}
#else
static inline float fabs32(float x)
{
    return fabsf(x);
}
static inline float fmax32(float x, float y)
{
    return fmaxf(x, y);
}
static inline float fmin32(float x, float y)
{
    return fminf(x, y);
}
static inline float fpow32(float x, float y)
{
    return powf(x, y);
}
#endif
static inline bool futrts_isnan32(float x)
{
    return isnan(x);
}
static inline bool futrts_isinf32(float x)
{
    return isinf(x);
}
#ifdef __OPENCL_VERSION__
static inline float futrts_log32(float x)
{
    return log(x);
}
static inline float futrts_log2_32(float x)
{
    return log2(x);
}
static inline float futrts_log10_32(float x)
{
    return log10(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrt(x);
}
static inline float futrts_exp32(float x)
{
    return exp(x);
}
static inline float futrts_cos32(float x)
{
    return cos(x);
}
static inline float futrts_sin32(float x)
{
    return sin(x);
}
static inline float futrts_tan32(float x)
{
    return tan(x);
}
static inline float futrts_acos32(float x)
{
    return acos(x);
}
static inline float futrts_asin32(float x)
{
    return asin(x);
}
static inline float futrts_atan32(float x)
{
    return atan(x);
}
static inline float futrts_cosh32(float x)
{
    return cosh(x);
}
static inline float futrts_sinh32(float x)
{
    return sinh(x);
}
static inline float futrts_tanh32(float x)
{
    return tanh(x);
}
static inline float futrts_acosh32(float x)
{
    return acosh(x);
}
static inline float futrts_asinh32(float x)
{
    return asinh(x);
}
static inline float futrts_atanh32(float x)
{
    return atanh(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypot(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgamma(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgamma(x);
}
static inline float fmod32(float x, float y)
{
    return fmod(x, y);
}
static inline float futrts_round32(float x)
{
    return rint(x);
}
static inline float futrts_floor32(float x)
{
    return floor(x);
}
static inline float futrts_ceil32(float x)
{
    return ceil(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return mix(v0, v1, t);
}
static inline float futrts_mad32(float a, float b, float c)
{
    return mad(a, b, c);
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fma(a, b, c);
}
#else
static inline float futrts_log32(float x)
{
    return logf(x);
}
static inline float futrts_log2_32(float x)
{
    return log2f(x);
}
static inline float futrts_log10_32(float x)
{
    return log10f(x);
}
static inline float futrts_sqrt32(float x)
{
    return sqrtf(x);
}
static inline float futrts_exp32(float x)
{
    return expf(x);
}
static inline float futrts_cos32(float x)
{
    return cosf(x);
}
static inline float futrts_sin32(float x)
{
    return sinf(x);
}
static inline float futrts_tan32(float x)
{
    return tanf(x);
}
static inline float futrts_acos32(float x)
{
    return acosf(x);
}
static inline float futrts_asin32(float x)
{
    return asinf(x);
}
static inline float futrts_atan32(float x)
{
    return atanf(x);
}
static inline float futrts_cosh32(float x)
{
    return coshf(x);
}
static inline float futrts_sinh32(float x)
{
    return sinhf(x);
}
static inline float futrts_tanh32(float x)
{
    return tanhf(x);
}
static inline float futrts_acosh32(float x)
{
    return acoshf(x);
}
static inline float futrts_asinh32(float x)
{
    return asinhf(x);
}
static inline float futrts_atanh32(float x)
{
    return atanhf(x);
}
static inline float futrts_atan2_32(float x, float y)
{
    return atan2f(x, y);
}
static inline float futrts_hypot32(float x, float y)
{
    return hypotf(x, y);
}
static inline float futrts_gamma32(float x)
{
    return tgammaf(x);
}
static inline float futrts_lgamma32(float x)
{
    return lgammaf(x);
}
static inline float fmod32(float x, float y)
{
    return fmodf(x, y);
}
static inline float futrts_round32(float x)
{
    return rintf(x);
}
static inline float futrts_floor32(float x)
{
    return floorf(x);
}
static inline float futrts_ceil32(float x)
{
    return ceilf(x);
}
static inline float futrts_lerp32(float v0, float v1, float t)
{
    return v0 + (v1 - v0) * t;
}
static inline float futrts_mad32(float a, float b, float c)
{
    return a * b + c;
}
static inline float futrts_fma32(float a, float b, float c)
{
    return fmaf(a, b, c);
}
#endif
static inline int32_t futrts_to_bits32(float x)
{
    union {
        float f;
        int32_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float futrts_from_bits32(int32_t x)
{
    union {
        int32_t f;
        float t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline float fsignum32(float x)
{
    return futrts_isnan32(x) ? x : (x > 0) - (x < 0);
}
static inline double fabs64(double x)
{
    return fabs(x);
}
static inline float fmax64(double x, double y)
{
    return fmax(x, y);
}
static inline float fmin64(double x, double y)
{
    return fmin(x, y);
}
static inline double fpow64(double x, double y)
{
    return pow(x, y);
}
static inline double futrts_log64(double x)
{
    return log(x);
}
static inline double futrts_log2_64(double x)
{
    return log2(x);
}
static inline double futrts_log10_64(double x)
{
    return log10(x);
}
static inline double futrts_sqrt64(double x)
{
    return sqrt(x);
}
static inline double futrts_exp64(double x)
{
    return exp(x);
}
static inline double futrts_cos64(double x)
{
    return cos(x);
}
static inline double futrts_sin64(double x)
{
    return sin(x);
}
static inline double futrts_tan64(double x)
{
    return tan(x);
}
static inline double futrts_acos64(double x)
{
    return acos(x);
}
static inline double futrts_asin64(double x)
{
    return asin(x);
}
static inline double futrts_atan64(double x)
{
    return atan(x);
}
static inline double futrts_cosh64(double x)
{
    return cosh(x);
}
static inline double futrts_sinh64(double x)
{
    return sinh(x);
}
static inline double futrts_tanh64(double x)
{
    return tanh(x);
}
static inline double futrts_acosh64(double x)
{
    return acosh(x);
}
static inline double futrts_asinh64(double x)
{
    return asinh(x);
}
static inline double futrts_atanh64(double x)
{
    return atanh(x);
}
static inline double futrts_atan2_64(double x, double y)
{
    return atan2(x, y);
}
static inline double futrts_hypot64(double x, double y)
{
    return hypot(x, y);
}
static inline double futrts_gamma64(double x)
{
    return tgamma(x);
}
static inline double futrts_lgamma64(double x)
{
    return lgamma(x);
}
static inline double futrts_fma64(double a, double b, double c)
{
    return fma(a, b, c);
}
static inline double futrts_round64(double x)
{
    return rint(x);
}
static inline double futrts_ceil64(double x)
{
    return ceil(x);
}
static inline double futrts_floor64(double x)
{
    return floor(x);
}
static inline bool futrts_isnan64(double x)
{
    return isnan(x);
}
static inline bool futrts_isinf64(double x)
{
    return isinf(x);
}
static inline int64_t futrts_to_bits64(double x)
{
    union {
        double f;
        int64_t t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double futrts_from_bits64(int64_t x)
{
    union {
        int64_t f;
        double t;
    } p;
    
    p.f = x;
    return p.t;
}
static inline double fmod64(double x, double y)
{
    return fmod(x, y);
}
static inline double fsignum64(double x)
{
    return futrts_isnan64(x) ? x : (x > 0) - (x < 0);
}
#ifdef __OPENCL_VERSION__
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return mix(v0, v1, t);
}
static inline double futrts_mad64(double a, double b, double c)
{
    return mad(a, b, c);
}
#else
static inline double futrts_lerp64(double v0, double v1, double t)
{
    return v0 + (v1 - v0) * t;
}
static inline double futrts_mad64(double a, double b, double c)
{
    return a * b + c;
}
#endif
static int init_constants(struct futhark_context *);
static int free_constants(struct futhark_context *);
struct memblock {
    int *references;
    char *mem;
    int64_t size;
    const char *desc;
};
// start of scheduler.h

// First, the API that the generated code will access.  In principle,
// we could then compile the scheduler separately and link an object
// file with the generated code.  In practice, we will embed all of
// this in the generated code.

// Scheduler handle.
struct scheduler;

// Initialise a scheduler (and start worker threads).
static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa);

// Shut down a scheduler (and destroy worker threads).
static int scheduler_destroy(struct scheduler *scheduler);

// Figure out the smallest amount of work that amortises task
// creation.
static int determine_kappa(double *kappa);

// How a segop should be scheduled.
enum scheduling {
  DYNAMIC,
  STATIC
};

// How a given task should be executed.  Filled out by the scheduler
// and passed to the segop function
struct scheduler_info {
  int64_t iter_pr_subtask;
  int64_t remainder;
  int nsubtasks;
  enum scheduling sched;
  int wake_up_threads;

  int64_t *task_time;
  int64_t *task_iter;
};

// A segop function.  This is what you hand the scheduler for
// execution.
typedef int (*segop_fn)(void* args,
                        int64_t iterations,
                        int tid,
                        struct scheduler_info info);

// A task for the scheduler to execute.
struct scheduler_segop {
  void *args;
  segop_fn top_level_fn;
  segop_fn nested_fn;
  int64_t iterations;
  enum scheduling sched;

  // Pointers to timer and iter associated with the task
  int64_t *task_time;
  int64_t *task_iter;

  // For debugging
  const char* name;
};

static inline int scheduler_prepare_task(struct scheduler *scheduler,
                                         struct scheduler_segop *task);

typedef int (*parloop_fn)(void* args,
                          int64_t start,
                          int64_t end,
                          int subtask_id,
                          int tid);

// A parallel parloop task.
struct scheduler_parloop {
  void* args;
  parloop_fn fn;
  int64_t iterations;
  struct scheduler_info info;

  // For debugging
  const char* name;
};

static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task);

// Then the API implementation.

#include <signal.h>

#if defined(_WIN32)
#include <windows.h>
#elif defined(__APPLE__)
#include <sys/sysctl.h>
// For getting cpu usage of threads
#include <mach/mach.h>
#include <sys/resource.h>
#elif defined(__linux__)
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#elif defined(__EMSCRIPTEN__)
#include <emscripten/threading.h>
#include <sys/sysinfo.h>
#include <sys/resource.h>
#include <signal.h>
#endif

/* Multicore Utility functions */

/* A wrapper for getting rusage on Linux and MacOS */
/* TODO maybe figure out this for windows */
static inline int getrusage_thread(struct rusage *rusage)
{
  int err = -1;
#if  defined(__APPLE__)
    thread_basic_info_data_t info = { 0 };
    mach_msg_type_number_t info_count = THREAD_BASIC_INFO_COUNT;
    kern_return_t kern_err;

    kern_err = thread_info(mach_thread_self(),
                           THREAD_BASIC_INFO,
                           (thread_info_t)&info,
                           &info_count);
    if (kern_err == KERN_SUCCESS) {
        memset(rusage, 0, sizeof(struct rusage));
        rusage->ru_utime.tv_sec = info.user_time.seconds;
        rusage->ru_utime.tv_usec = info.user_time.microseconds;
        rusage->ru_stime.tv_sec = info.system_time.seconds;
        rusage->ru_stime.tv_usec = info.system_time.microseconds;
        err = 0;
    } else {
        errno = EINVAL;
    }
#elif defined(__linux__) || __EMSCRIPTEN__
    err = getrusage(RUSAGE_THREAD, rusage);
#endif
    return err;
}

/* returns the number of logical cores */
static int num_processors()
{
#if  defined(_WIN32)
/* https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/ns-sysinfoapi-system_info */
    SYSTEM_INFO sysinfo;
    GetSystemInfo(&sysinfo);
    int ncores = sysinfo.dwNumberOfProcessors;
    fprintf(stderr, "Found %d cores on your Windows machine\n Is that correct?\n", ncores);
    return ncores;
#elif defined(__APPLE__)
    int ncores;
    size_t ncores_size = sizeof(ncores);
    CHECK_ERRNO(sysctlbyname("hw.logicalcpu", &ncores, &ncores_size, NULL, 0),
                "sysctlbyname (hw.logicalcpu)");
    return ncores;
#elif defined(__linux__)
  return get_nprocs();
#elif __EMSCRIPTEN__
  return emscripten_num_logical_cores();
#else
  fprintf(stderr, "operating system not recognised\n");
  return -1;
#endif
}

static unsigned int g_seed;

// Used to seed the generator.
static inline void fast_srand(unsigned int seed) {
    g_seed = seed;
}

// Compute a pseudorandom integer.
// Output value in range [0, 32767]
static inline unsigned int fast_rand(void) {
    g_seed = (214013*g_seed+2531011);
    return (g_seed>>16)&0x7FFF;
}

struct subtask_queue {
  int capacity;             // Size of the buffer.
  int first;                // Index of the start of the ring buffer.
  int num_used;             // Number of used elements in the buffer.
  struct subtask **buffer;

  pthread_mutex_t mutex;    // Mutex used for synchronisation.
  pthread_cond_t cond;      // Condition variable used for synchronisation.
  int dead;

#if defined(MCPROFILE)
  /* Profiling fields */
  uint64_t time_enqueue;
  uint64_t time_dequeue;
  uint64_t n_dequeues;
  uint64_t n_enqueues;
#endif
};

/* A subtask that can be executed by a worker */
struct subtask {
  /* The parloop function */
  parloop_fn fn;
  /* Execution parameters */
  void* args;
  int64_t start, end;
  int id;

  /* Dynamic scheduling parameters */
  int chunkable;
  int64_t chunk_size;

  /* Shared variables across subtasks */
  volatile int *counter; // Counter for ongoing subtasks
  // Shared task timers and iterators
  int64_t *task_time;
  int64_t *task_iter;

  /* For debugging */
  const char *name;
};


struct worker {
  pthread_t thread;
  struct scheduler *scheduler;  /* Reference to the scheduler struct the worker belongs to*/
  struct subtask_queue q;
  int dead;
  int tid;                      /* Just a thread id */

  /* "thread local" time fields used for online algorithm */
  uint64_t timer;
  uint64_t total;
  int nested; /* How nested the current computation is */

  // Profiling fields
  int output_usage;            /* Whether to dump thread usage */
  uint64_t time_spent_working; /* Time spent in parloop functions */
};

static inline void output_worker_usage(struct worker *worker)
{
  struct rusage usage;
  CHECK_ERRNO(getrusage_thread(&usage), "getrusage_thread");
  struct timeval user_cpu_time = usage.ru_utime;
  struct timeval sys_cpu_time = usage.ru_stime;
  fprintf(stderr, "tid: %2d - work time %10llu us - user time: %10llu us - sys: %10llu us\n",
          worker->tid,
          (long long unsigned)worker->time_spent_working / 1000,
          (long long unsigned)(user_cpu_time.tv_sec * 1000000 + user_cpu_time.tv_usec),
          (long long unsigned)(sys_cpu_time.tv_sec * 1000000 + sys_cpu_time.tv_usec));
}

/* Doubles the size of the queue */
static inline int subtask_queue_grow_queue(struct subtask_queue *subtask_queue) {

  int new_capacity = 2 * subtask_queue->capacity;
#ifdef MCDEBUG
  fprintf(stderr, "Growing queue to %d\n", subtask_queue->capacity * 2);
#endif

  struct subtask **new_buffer = calloc(new_capacity, sizeof(struct subtask*));
  for (int i = 0; i < subtask_queue->num_used; i++) {
    new_buffer[i] = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
  }

  free(subtask_queue->buffer);
  subtask_queue->buffer = new_buffer;
  subtask_queue->capacity = new_capacity;
  subtask_queue->first = 0;

  return 0;
}

// Initialise a job queue with the given capacity.  The queue starts out
// empty.  Returns non-zero on error.
static inline int subtask_queue_init(struct subtask_queue *subtask_queue, int capacity)
{
  assert(subtask_queue != NULL);
  memset(subtask_queue, 0, sizeof(struct subtask_queue));

  subtask_queue->capacity = capacity;
  subtask_queue->buffer = calloc(capacity, sizeof(struct subtask*));
  if (subtask_queue->buffer == NULL) {
    return -1;
  }

  CHECK_ERRNO(pthread_mutex_init(&subtask_queue->mutex, NULL), "pthread_mutex_init");
  CHECK_ERRNO(pthread_cond_init(&subtask_queue->cond, NULL), "pthread_cond_init");

  return 0;
}

// Destroy the job queue.  Blocks until the queue is empty before it
// is destroyed.
static inline int subtask_queue_destroy(struct subtask_queue *subtask_queue)
{
  assert(subtask_queue != NULL);

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  while (subtask_queue->num_used != 0) {
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  // Queue is now empty.  Let's kill it!
  subtask_queue->dead = 1;
  free(subtask_queue->buffer);
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline void dump_queue(struct worker *worker)
{
  struct subtask_queue *subtask_queue = &worker->q;
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  for (int i = 0; i < subtask_queue->num_used; i++) {
    struct subtask * subtask = subtask_queue->buffer[(subtask_queue->first + i) % subtask_queue->capacity];
    printf("queue tid %d with %d task %s\n", worker->tid, i, subtask->name);
  }
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
}

// Push an element onto the end of the job queue.  Blocks if the
// subtask_queue is full (its size is equal to its capacity).  Returns
// non-zero on error.  It is an error to push a job onto a queue that
// has been destroyed.
static inline int subtask_queue_enqueue(struct worker *worker, struct subtask *subtask )
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  // Wait until there is room in the subtask_queue.
  while (subtask_queue->num_used == subtask_queue->capacity && !subtask_queue->dead) {
    if (subtask_queue->num_used == subtask_queue->capacity) {
      CHECK_ERR(subtask_queue_grow_queue(subtask_queue), "subtask_queue_grow_queue");
      continue;
    }
    CHECK_ERR(pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex), "pthread_cond_wait");
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // If we made it past the loop, there is room in the subtask_queue.
  subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used) % subtask_queue->capacity] = subtask;
  subtask_queue->num_used++;

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_enqueue += (end - start);
  subtask_queue->n_enqueues++;
#endif
  // Broadcast a reader (if any) that there is now an element.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


/* Like subtask_queue_dequeue, but with two differences:
   1) the subtask is stolen from the __front__ of the queue
   2) returns immediately if there is no subtasks queued,
      as we dont' want to block on another workers queue and
*/
static inline int subtask_queue_steal(struct worker *worker,
                                      struct subtask **subtask)
{
  struct subtask_queue *subtask_queue = &worker->q;
  assert(subtask_queue != NULL);

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif
  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");

  if (subtask_queue->num_used == 0) {
    CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // Tasks gets stolen from the "front"
  struct subtask *cur_back = subtask_queue->buffer[subtask_queue->first];
  struct subtask *new_subtask = NULL;
  int remaining_iter = cur_back->end - cur_back->start;
  // If subtask is chunkable, we steal half of the iterations
  if (cur_back->chunkable && remaining_iter > 1) {
      int64_t half = remaining_iter / 2;
      new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *cur_back;
      new_subtask->start = cur_back->end - half;
      cur_back->end = new_subtask->start;
      __atomic_fetch_add(cur_back->counter, 1, __ATOMIC_RELAXED);
  } else {
    new_subtask = cur_back;
    subtask_queue->num_used--;
    subtask_queue->first = (subtask_queue->first + 1) % subtask_queue->capacity;
  }
  *subtask = new_subtask;

  if (*subtask == NULL) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return 1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}


// Pop an element from the back of the job queue.
// Optional argument can be provided to block or not
static inline int subtask_queue_dequeue(struct worker *worker,
                                        struct subtask **subtask, int blocking)
{
  assert(worker != NULL);
  struct subtask_queue *subtask_queue = &worker->q;

#ifdef MCPROFILE
  uint64_t start = get_wall_time();
#endif

  CHECK_ERR(pthread_mutex_lock(&subtask_queue->mutex), "pthread_mutex_lock");
  if (subtask_queue->num_used == 0 && !blocking) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return 1;
  }
  // Try to steal some work while the subtask_queue is empty
  while (subtask_queue->num_used == 0 && !subtask_queue->dead) {
    pthread_cond_wait(&subtask_queue->cond, &subtask_queue->mutex);
  }

  if (subtask_queue->dead) {
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");
    return -1;
  }

  // dequeue pops from the back
  *subtask = subtask_queue->buffer[(subtask_queue->first + subtask_queue->num_used - 1) % subtask_queue->capacity];
  subtask_queue->num_used--;

  if (*subtask == NULL) {
    assert(!"got NULL ptr");
    CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthred_mutex_unlock");
    return -1;
  }

#ifdef MCPROFILE
  uint64_t end = get_wall_time();
  subtask_queue->time_dequeue += (end - start);
  subtask_queue->n_dequeues++;
#endif

  // Broadcast a writer (if any) that there is now room for more.
  CHECK_ERR(pthread_cond_broadcast(&subtask_queue->cond), "pthread_cond_broadcast");
  CHECK_ERR(pthread_mutex_unlock(&subtask_queue->mutex), "pthread_mutex_unlock");

  return 0;
}

static inline int subtask_queue_is_empty(struct subtask_queue *subtask_queue)
{
  return subtask_queue->num_used == 0;
}

/* Scheduler definitions */

struct scheduler {
  struct worker *workers;
  int num_threads;

  // If there is work to steal => active_work > 0
  volatile int active_work;

  // Only one error can be returned at the time now.  Maybe we can
  // provide a stack like structure for pushing errors onto if we wish
  // to backpropagte multiple errors
  volatile int error;

  // kappa time unit in nanoseconds
  double kappa;
};


// Thread local variable worker struct
// Note that, accesses to tls variables are expensive
// Minimize direct references to this variable
__thread struct worker* worker_local = NULL;

static int64_t total_now(int64_t total, int64_t time) {
  return total + (get_wall_time_ns() - time);
}

static int random_other_worker(struct scheduler *scheduler, int my_id) {
  int my_num_workers = scheduler->num_threads;
  assert(my_num_workers != 1);
  int i = fast_rand() % (my_num_workers - 1);
  if (i >= my_id) {
    i++;
  }
#ifdef MCDEBUG
  assert(i >= 0);
  assert(i < my_num_workers);
  assert(i != my_id);
#endif

  return i;
}


static inline int64_t compute_chunk_size(double kappa, struct subtask* subtask)
{
  double C = (double)*subtask->task_time / (double)*subtask->task_iter;
  if (C == 0.0F) C += DBL_EPSILON;
  return smax64((int64_t)(kappa / C), 1);
}

/* Takes a chunk from subtask and enqueues the remaining iterations onto the worker's queue */
/* A no-op if the subtask is not chunkable */
static inline struct subtask* chunk_subtask(struct worker* worker, struct subtask *subtask)
{
  if (subtask->chunkable) {
    // Do we have information from previous runs avaliable
    if (*subtask->task_iter > 0) {
      subtask->chunk_size = compute_chunk_size(worker->scheduler->kappa, subtask);
      assert(subtask->chunk_size > 0);
    }
    int64_t remaining_iter = subtask->end - subtask->start;
    assert(remaining_iter > 0);
    if (remaining_iter > subtask->chunk_size) {
      struct subtask *new_subtask = malloc(sizeof(struct subtask));
      *new_subtask = *subtask;
      // increment the subtask join counter to account for new subtask
      __atomic_fetch_add(subtask->counter, 1, __ATOMIC_RELAXED);
      // Update range parameters
      subtask->end = subtask->start + subtask->chunk_size;
      new_subtask->start = subtask->end;
      subtask_queue_enqueue(worker, new_subtask);
    }
  }
  return subtask;
}

static inline int run_subtask(struct worker* worker, struct subtask* subtask)
{
  assert(subtask != NULL);
  assert(worker != NULL);

  subtask = chunk_subtask(worker, subtask);
  worker->total = 0;
  worker->timer = get_wall_time_ns();
#if defined(MCPROFILE)
  int64_t start = worker->timer;
#endif
  worker->nested++;
  int err = subtask->fn(subtask->args, subtask->start, subtask->end,
                        subtask->chunkable ? worker->tid : subtask->id,
                        worker->tid);
  worker->nested--;
  // Some error occured during some other subtask
  // so we just clean-up and return
  if (worker->scheduler->error != 0) {
    // Even a failed task counts as finished.
    __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
    free(subtask);
    return 0;
  }
  if (err != 0) {
    __atomic_store_n(&worker->scheduler->error, err, __ATOMIC_RELAXED);
  }
  // Total sequential time spent
  int64_t time_elapsed = total_now(worker->total, worker->timer);
#if defined(MCPROFILE)
  worker->time_spent_working += get_wall_time_ns() - start;
#endif
  int64_t iter = subtask->end - subtask->start;
  // report measurements
  // These updates should really be done using a single atomic CAS operation
  __atomic_fetch_add(subtask->task_time, time_elapsed, __ATOMIC_RELAXED);
  __atomic_fetch_add(subtask->task_iter, iter, __ATOMIC_RELAXED);
  // We need a fence here, since if the counter is decremented before either
  // of the two above are updated bad things can happen, e.g. if they are stack-allocated
  __atomic_thread_fence(__ATOMIC_SEQ_CST);
  __atomic_fetch_sub(subtask->counter, 1, __ATOMIC_RELAXED);
  free(subtask);
  return 0;
}


static inline int is_small(struct scheduler_segop *task, struct scheduler *scheduler, int *nsubtasks)
{
  int64_t time = *task->task_time;
  int64_t iter = *task->task_iter;

  if (task->sched == DYNAMIC || iter == 0) {
    *nsubtasks = scheduler->num_threads;
    return 0;
  }

  // Estimate the constant C
  double C = (double)time / (double)iter;
  double cur_task_iter = (double) task->iterations;

  // Returns true if the task is small i.e.
  // if the number of iterations times C is smaller
  // than the overhead of subtask creation
  if (C == 0.0F || C * cur_task_iter < scheduler->kappa) {
    *nsubtasks = 1;
    return 1;
  }

  // Else compute how many subtasks this tasks should create
  int64_t min_iter_pr_subtask = smax64(scheduler->kappa / C, 1);
  *nsubtasks = smin64(smax64(task->iterations / min_iter_pr_subtask, 1), scheduler->num_threads);

  return 0;
}

// TODO make this prettier
static inline struct subtask* create_subtask(parloop_fn fn,
                                             void* args,
                                             const char* name,
                                             volatile int* counter,
                                             int64_t *timer,
                                             int64_t *iter,
                                             int64_t start, int64_t end,
                                             int chunkable,
                                             int64_t chunk_size,
                                             int id)
{
  struct subtask* subtask = malloc(sizeof(struct subtask));
  if (subtask == NULL) {
    assert(!"malloc failed in create_subtask");
    return NULL;
  }
  subtask->fn         = fn;
  subtask->args       = args;

  subtask->counter    = counter;
  subtask->task_time  = timer;
  subtask->task_iter  = iter;

  subtask->start      = start;
  subtask->end        = end;
  subtask->id         = id;
  subtask->chunkable  = chunkable;
  subtask->chunk_size = chunk_size;

  subtask->name       = name;
  return subtask;
}

static int dummy_counter = 0;
static int64_t dummy_timer = 0;
static int64_t dummy_iter = 0;

static int dummy_fn(void *args, int64_t start, int64_t end, int subtask_id, int tid) {
  (void)args;
  (void)start;
  (void)end;
  (void)subtask_id;
  (void)tid;
  return 0;
}

// Wake up threads, who are blocking by pushing a dummy task
// onto their queue
static inline void wake_up_threads(struct scheduler *scheduler, int start_tid, int end_tid) {

#if defined(MCDEBUG)
  assert(start_tid >= 1);
  assert(end_tid <= scheduler->num_threads);
#endif
  for (int i = start_tid; i < end_tid; i++) {
    struct subtask *subtask = create_subtask(dummy_fn, NULL, "dummy_fn",
                                            &dummy_counter,
                                            &dummy_timer, &dummy_iter,
                                            0, 0,
                                            0, 0,
                                            0);
    CHECK_ERR(subtask_queue_enqueue(&scheduler->workers[i], subtask), "subtask_queue_enqueue");
  }
}

static inline int is_finished(struct worker *worker) {
  return worker->dead && subtask_queue_is_empty(&worker->q);
}

// Try to steal from a random queue
static inline int steal_from_random_worker(struct worker* worker)
{
  int my_id = worker->tid;
  struct scheduler* scheduler = worker->scheduler;
  int k = random_other_worker(scheduler, my_id);
  struct worker *worker_k = &scheduler->workers[k];
  struct subtask* subtask =  NULL;
  int retval = subtask_queue_steal(worker_k, &subtask);
  if (retval == 0) {
    subtask_queue_enqueue(worker, subtask);
    return 1;
  }
  return 0;
}


static inline void *scheduler_worker(void* args)
{
  struct worker *worker = (struct worker*) args;
  struct scheduler *scheduler = worker->scheduler;
  worker_local = worker;
  struct subtask *subtask = NULL;

  while(!is_finished(worker)) {
    if (!subtask_queue_is_empty(&worker->q)) {
      int retval = subtask_queue_dequeue(worker, &subtask, 0);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      } // else someone stole our work

    } else if (scheduler->active_work) { /* steal */
      while (!is_finished(worker) && scheduler->active_work) {
        if (steal_from_random_worker(worker)) {
          break;
        }
      }
    } else { /* go back to sleep and wait for work */
      int retval = subtask_queue_dequeue(worker, &subtask, 1);
      if (retval == 0) {
        assert(subtask != NULL);
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    }
  }

  assert(subtask_queue_is_empty(&worker->q));
#if defined(MCPROFILE)
  if (worker->output_usage)
    output_worker_usage(worker);
#endif
  return NULL;
}


static inline int scheduler_execute_parloop(struct scheduler *scheduler,
                                            struct scheduler_parloop *task,
                                            int64_t *timer)
{

  struct worker *worker = worker_local;

  struct scheduler_info info = task->info;
  int64_t iter_pr_subtask = info.iter_pr_subtask;
  int64_t remainder = info.remainder;
  int nsubtasks = info.nsubtasks;
  volatile int join_counter = nsubtasks;

  // Shared timer used to sum up all
  // sequential work from each subtask
  int64_t task_timer = 0;
  int64_t task_iter = 0;

  enum scheduling sched = info.sched;
  /* If each subtasks should be processed in chunks */
  int chunkable = sched == STATIC ? 0 : 1;
  int64_t chunk_size = 1; // The initial chunk size when no info is avaliable


  if (info.wake_up_threads || sched == DYNAMIC)
    __atomic_add_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);

  int64_t start = 0;
  int64_t end = iter_pr_subtask + (int64_t)(remainder != 0);
  for (int subtask_id = 0; subtask_id < nsubtasks; subtask_id++) {
    struct subtask *subtask = create_subtask(task->fn, task->args, task->name,
                                              &join_counter,
                                              &task_timer, &task_iter,
                                              start, end,
                                              chunkable, chunk_size,
                                              subtask_id);
    assert(subtask != NULL);
    // In most cases we will never have more subtasks than workers,
    // but there can be exceptions (e.g. the kappa tuning function).
    struct worker *subtask_worker =
      worker->nested
      ? &scheduler->workers[worker->tid]
      : &scheduler->workers[subtask_id % scheduler->num_threads];
    CHECK_ERR(subtask_queue_enqueue(subtask_worker, subtask),
              "subtask_queue_enqueue");
    // Update range params
    start = end;
    end += iter_pr_subtask + ((subtask_id + 1) < remainder);
  }

  if (info.wake_up_threads) {
    wake_up_threads(scheduler, nsubtasks, scheduler->num_threads);
  }

  // Join (wait for subtasks to finish)
  while(join_counter != 0) {
    if (!subtask_queue_is_empty(&worker->q)) {
      struct subtask *subtask = NULL;
      int err = subtask_queue_dequeue(worker, &subtask, 0);
      if (err == 0 ) {
        CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
      }
    } else {
      if (steal_from_random_worker(worker)) {
        struct subtask *subtask = NULL;
        int err = subtask_queue_dequeue(worker, &subtask, 0);
        if (err == 0) {
          CHECK_ERR(run_subtask(worker, subtask), "run_subtask");
        }
      }
    }
  }


  if (info.wake_up_threads || sched == DYNAMIC) {
    __atomic_sub_fetch(&scheduler->active_work, nsubtasks, __ATOMIC_RELAXED);
  }

  // Write back timing results of all sequential work
  (*timer) += task_timer;
  return scheduler->error;
}


static inline int scheduler_execute_task(struct scheduler *scheduler,
                                         struct scheduler_parloop *task)
{

  struct worker *worker = worker_local;

  int err = 0;

  // How much sequential work was performed by the task
  int64_t task_timer = 0;

  /* Execute task sequential or parallel based on decision made earlier */
  if (task->info.nsubtasks == 1) {
    int64_t start = get_wall_time_ns();
    err = task->fn(task->args, 0, task->iterations, 0, worker->tid);
    int64_t end = get_wall_time_ns();
    task_timer = end - start;
    worker->time_spent_working += task_timer;
    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);
  } else {
    // Add "before" time if we already are inside a task
    int64_t time_before = 0;
    if (worker->nested > 0) {
      time_before = total_now(worker->total, worker->timer);
    }

    err = scheduler_execute_parloop(scheduler, task, &task_timer);

    // Report time measurements
    // TODO the update of both of these should really be a single atomic!!
    __atomic_fetch_add(task->info.task_time, task_timer, __ATOMIC_RELAXED);
    __atomic_fetch_add(task->info.task_iter, task->iterations, __ATOMIC_RELAXED);

    // Update timers to account for new timings
    worker->total = time_before + task_timer;
    worker->timer = get_wall_time_ns();
  }


  return err;
}

/* Decide on how schedule the incoming task i.e. how many subtasks and
   to run sequential or (potentially nested) parallel code body */
static inline int scheduler_prepare_task(struct scheduler* scheduler,
                                         struct scheduler_segop *task)
{
  assert(task != NULL);

  struct worker *worker = worker_local;
  struct scheduler_info info;
  info.task_time = task->task_time;
  info.task_iter = task->task_iter;

  int nsubtasks;
  // Decide if task should be scheduled sequentially
  if (is_small(task, scheduler, &nsubtasks)) {
    info.iter_pr_subtask = task->iterations;
    info.remainder = 0;
    info.nsubtasks = nsubtasks;
    return task->top_level_fn(task->args, task->iterations, worker->tid, info);
  } else {
    info.iter_pr_subtask = task->iterations / nsubtasks;
    info.remainder = task->iterations % nsubtasks;
    info.sched = task->sched;
    switch (task->sched) {
    case STATIC:
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : ((task->iterations - info.remainder) / info.iter_pr_subtask);
      break;
    case DYNAMIC:
      // As any thread can take any subtasks, we are being safe with using
      // an upper bound on the number of tasks such that the task allocate enough memory
      info.nsubtasks = info.iter_pr_subtask == 0 ? info.remainder : nsubtasks;
      break;
    default:
      assert(!"Got unknown scheduling");
    }
  }

  info.wake_up_threads = 0;
  // We only use the nested parallel segop function if we can't exchaust all cores
  // using the outer most level
  if (task->nested_fn != NULL && info.nsubtasks < scheduler->num_threads && info.nsubtasks == task->iterations) {
    if (worker->nested == 0)
      info.wake_up_threads = 1;
    return task->nested_fn(task->args, task->iterations, worker->tid, info);
  }

  return task->top_level_fn(task->args, task->iterations, worker->tid, info);
}

// Now some code for finding the proper value of kappa on a given
// machine (the smallest amount of work that amortises the cost of
// task creation).

struct tuning_struct {
  int32_t *free_tuning_res;
  int32_t *array;
};

// Reduction function over an integer array
static int tuning_loop(void *args, int64_t start, int64_t end,
                                     int flat_tid, int tid) {
  (void)flat_tid;
  (void)tid;

  int err = 0;
  struct tuning_struct *tuning_struct = (struct tuning_struct *) args;
  int32_t *array = tuning_struct->array;
  int32_t *tuning_res = tuning_struct->free_tuning_res;

  int32_t sum = 0;
  for (int i = start; i < end; i++) {
    int32_t y = array[i];
    sum = add32(sum, y);
  }
  *tuning_res = sum;
  return err;
}

// The main entry point for the tuning process.  Sets the provided
// variable ``kappa``.
static int determine_kappa(double *kappa) {
  int err = 0;

  int64_t iterations = 100000000;
  int64_t tuning_time = 0;
  int64_t tuning_iter = 0;

  int32_t *array = malloc(sizeof(int32_t) * iterations);
  for (int64_t i = 0; i < iterations; i++) {
    array[i] = fast_rand();
  }

  int64_t start_tuning = get_wall_time_ns();
  /* **************************** */
  /* Run sequential reduce first' */
  /* **************************** */
  int64_t tuning_sequentiual_start = get_wall_time_ns();
  struct tuning_struct tuning_struct;
  int32_t tuning_res;
  tuning_struct.free_tuning_res = &tuning_res;
  tuning_struct.array = array;

  err = tuning_loop(&tuning_struct, 0, iterations, 0, 0);
  int64_t tuning_sequentiual_end = get_wall_time_ns();
  int64_t sequential_elapsed = tuning_sequentiual_end - tuning_sequentiual_start;

  double C = (double)sequential_elapsed / (double)iterations;
  fprintf(stderr, " Time for sequential run is %lld - Found C %f\n", (long long)sequential_elapsed, C);

  /* ********************** */
  /* Now run tuning process */
  /* ********************** */
  // Setup a scheduler with a single worker
  struct scheduler scheduler;
  scheduler.num_threads = 1;
  scheduler.workers = malloc(sizeof(struct worker));
  worker_local = &scheduler.workers[0];
  worker_local->tid = 0;
  CHECK_ERR(subtask_queue_init(&scheduler.workers[0].q, 1024),
            "failed to init queue for worker %d\n", 0);

  // Start tuning for kappa
  double kappa_tune = 1000; // Initial kappa is 1 us
  double ratio;
  int64_t time_elapsed;
  while(1) {
    int64_t min_iter_pr_subtask = (int64_t) (kappa_tune / C) == 0 ? 1 : (kappa_tune / C);
    int nsubtasks = iterations / min_iter_pr_subtask;
    struct scheduler_info info;
    info.iter_pr_subtask = min_iter_pr_subtask;

    info.nsubtasks = iterations / min_iter_pr_subtask;
    info.remainder = iterations % min_iter_pr_subtask;
    info.task_time = &tuning_time;
    info.task_iter = &tuning_iter;
    info.sched = STATIC;

    struct scheduler_parloop parloop;
    parloop.name = "tuning_loop";
    parloop.fn = tuning_loop;
    parloop.args = &tuning_struct;
    parloop.iterations = iterations;
    parloop.info = info;

    int64_t tuning_chunked_start = get_wall_time_ns();
    int determine_kappa_err =
      scheduler_execute_task(&scheduler,
                             &parloop);
    assert(determine_kappa_err == 0);
    int64_t tuning_chunked_end = get_wall_time_ns();
    time_elapsed =  tuning_chunked_end - tuning_chunked_start;

    ratio = (double)time_elapsed / (double)sequential_elapsed;
    if (ratio < 1.055) {
      break;
    }
    kappa_tune += 100; // Increase by 100 ns at the time
    fprintf(stderr, "nsubtask %d - kappa %f - ratio %f\n", nsubtasks, kappa_tune, ratio);
  }

  int64_t end_tuning = get_wall_time_ns();
  fprintf(stderr, "tuning took %lld ns and found kappa %f - time %lld - ratio %f\n",
          (long long)end_tuning - start_tuning,
          kappa_tune,
          (long long)time_elapsed,
          ratio);
  *kappa = kappa_tune;

  // Clean-up
  CHECK_ERR(subtask_queue_destroy(&scheduler.workers[0].q), "failed to destroy queue");
  free(array);
  free(scheduler.workers);
  return err;
}

static int scheduler_init(struct scheduler *scheduler,
                          int num_workers,
                          double kappa) {
  assert(num_workers > 0);

  scheduler->kappa = kappa;
  scheduler->num_threads = num_workers;
  scheduler->active_work = 0;
  scheduler->error = 0;

  scheduler->workers = calloc(num_workers, sizeof(struct worker));

  const int queue_capacity = 1024;

  worker_local = &scheduler->workers[0];
  worker_local->tid = 0;
  worker_local->scheduler = scheduler;
  CHECK_ERR(subtask_queue_init(&worker_local->q, queue_capacity),
            "failed to init queue for worker %d\n", 0);

  for (int i = 1; i < num_workers; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    memset(cur_worker, 0, sizeof(struct worker));
    cur_worker->tid = i;
    cur_worker->output_usage = 0;
    cur_worker->scheduler = scheduler;
    CHECK_ERR(subtask_queue_init(&cur_worker->q, queue_capacity),
              "failed to init queue for worker %d\n", i);

    CHECK_ERR(pthread_create(&cur_worker->thread,
                             NULL,
                             &scheduler_worker,
                             cur_worker),
              "Failed to create worker %d\n", i);
  }

  return 0;
}

static int scheduler_destroy(struct scheduler *scheduler) {
  // First mark them all as dead.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    cur_worker->dead = 1;
  }

  // Then destroy their task queues (this will wake up the threads and
  // make them do their shutdown).
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    subtask_queue_destroy(&cur_worker->q);
  }

  // Then actually wait for them to stop.
  for (int i = 1; i < scheduler->num_threads; i++) {
    struct worker *cur_worker = &scheduler->workers[i];
    CHECK_ERR(pthread_join(scheduler->workers[i].thread, NULL), "pthread_join");
  }

  free(scheduler->workers);

  return 0;
}

// End of scheduler.h

struct futhark_context_config {
    int debugging;
    int profiling;
    int num_threads;
};
struct futhark_context_config *futhark_context_config_new(void)
{
    struct futhark_context_config *cfg =
                                  (struct futhark_context_config *) malloc(sizeof(struct futhark_context_config));
    
    if (cfg == NULL)
        return NULL;
    cfg->debugging = 0;
    cfg->profiling = 0;
    cfg->num_threads = 0;
    return cfg;
}
void futhark_context_config_free(struct futhark_context_config *cfg)
{
    free(cfg);
}
void futhark_context_config_set_debugging(struct futhark_context_config *cfg,
                                          int detail)
{
    cfg->debugging = detail;
}
void futhark_context_config_set_profiling(struct futhark_context_config *cfg,
                                          int flag)
{
    cfg->profiling = flag;
}
void futhark_context_config_set_logging(struct futhark_context_config *cfg,
                                        int detail)
{
    /* Does nothing for this backend. */
    (void) cfg;
    (void) detail;
}
void futhark_context_config_set_num_threads(struct futhark_context_config *cfg,
                                            int n)
{
    cfg->num_threads = n;
}
struct futhark_context {
    struct scheduler scheduler;
    int detail_memory;
    int debugging;
    int profiling;
    int profiling_paused;
    int logging;
    lock_t lock;
    char *error;
    FILE *log;
    int total_runs;
    long total_runtime;
    int64_t peak_mem_usage_default;
    int64_t cur_mem_usage_default;
    struct {
        int dummy;
    } constants;
    int64_t *futhark_mc_segmap_parloop_128329_total_runtime;
    int *futhark_mc_segmap_parloop_128329_runs;
    int64_t *futhark_mc_segmap_parloop_128329_iter;
    int64_t futhark_mc_segmap_parloop_128329_total_total_runtime;
    int futhark_mc_segmap_parloop_128329_total_runs;
    int64_t futhark_mc_segmap_parloop_128329_total_iter;
    int64_t *futhark_mc_segmap_task_128327_total_runtime;
    int *futhark_mc_segmap_task_128327_runs;
    int64_t *futhark_mc_segmap_task_128327_iter;
    int64_t futhark_mc_segmap_task_128327_total_time;
    int64_t futhark_mc_segmap_task_128327_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128341_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128341_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128341_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128341_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128341_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128341_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128343_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128343_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128343_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128343_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128343_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128343_total_iter;
    int64_t *futhark_mc_segscan_task_128338_total_runtime;
    int *futhark_mc_segscan_task_128338_runs;
    int64_t *futhark_mc_segscan_task_128338_iter;
    int64_t futhark_mc_segscan_task_128338_total_time;
    int64_t futhark_mc_segscan_task_128338_total_iter;
    int64_t *futhark_mc_segmap_parloop_128347_total_runtime;
    int *futhark_mc_segmap_parloop_128347_runs;
    int64_t *futhark_mc_segmap_parloop_128347_iter;
    int64_t futhark_mc_segmap_parloop_128347_total_total_runtime;
    int futhark_mc_segmap_parloop_128347_total_runs;
    int64_t futhark_mc_segmap_parloop_128347_total_iter;
    int64_t *futhark_mc_segmap_task_128345_total_runtime;
    int *futhark_mc_segmap_task_128345_runs;
    int64_t *futhark_mc_segmap_task_128345_iter;
    int64_t futhark_mc_segmap_task_128345_total_time;
    int64_t futhark_mc_segmap_task_128345_total_iter;
    int64_t *futhark_mc_segmap_parloop_128334_total_runtime;
    int *futhark_mc_segmap_parloop_128334_runs;
    int64_t *futhark_mc_segmap_parloop_128334_iter;
    int64_t futhark_mc_segmap_parloop_128334_total_total_runtime;
    int futhark_mc_segmap_parloop_128334_total_runs;
    int64_t futhark_mc_segmap_parloop_128334_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128332_total_runtime;
    int *futhark_mc_segmap_nested_task_128332_runs;
    int64_t *futhark_mc_segmap_nested_task_128332_iter;
    int64_t *futhark_mc_segmap_parloop_128351_total_runtime;
    int *futhark_mc_segmap_parloop_128351_runs;
    int64_t *futhark_mc_segmap_parloop_128351_iter;
    int64_t futhark_mc_segmap_parloop_128351_total_total_runtime;
    int futhark_mc_segmap_parloop_128351_total_runs;
    int64_t futhark_mc_segmap_parloop_128351_total_iter;
    int64_t *futhark_mc_segmap_task_128349_total_runtime;
    int *futhark_mc_segmap_task_128349_runs;
    int64_t *futhark_mc_segmap_task_128349_iter;
    int64_t futhark_mc_segmap_task_128349_total_time;
    int64_t futhark_mc_segmap_task_128349_total_iter;
    int64_t *futhark_mc_segmap_parloop_128360_total_runtime;
    int *futhark_mc_segmap_parloop_128360_runs;
    int64_t *futhark_mc_segmap_parloop_128360_iter;
    int64_t futhark_mc_segmap_parloop_128360_total_total_runtime;
    int futhark_mc_segmap_parloop_128360_total_runs;
    int64_t futhark_mc_segmap_parloop_128360_total_iter;
    int64_t *futhark_mc_segmap_task_128358_total_runtime;
    int *futhark_mc_segmap_task_128358_runs;
    int64_t *futhark_mc_segmap_task_128358_iter;
    int64_t futhark_mc_segmap_task_128358_total_time;
    int64_t futhark_mc_segmap_task_128358_total_iter;
    int64_t *futhark_mc_segmap_parloop_128355_total_runtime;
    int *futhark_mc_segmap_parloop_128355_runs;
    int64_t *futhark_mc_segmap_parloop_128355_iter;
    int64_t futhark_mc_segmap_parloop_128355_total_total_runtime;
    int futhark_mc_segmap_parloop_128355_total_runs;
    int64_t futhark_mc_segmap_parloop_128355_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128353_total_runtime;
    int *futhark_mc_segmap_nested_task_128353_runs;
    int64_t *futhark_mc_segmap_nested_task_128353_iter;
    int64_t *futhark_mc_segmap_parloop_128364_total_runtime;
    int *futhark_mc_segmap_parloop_128364_runs;
    int64_t *futhark_mc_segmap_parloop_128364_iter;
    int64_t futhark_mc_segmap_parloop_128364_total_total_runtime;
    int futhark_mc_segmap_parloop_128364_total_runs;
    int64_t futhark_mc_segmap_parloop_128364_total_iter;
    int64_t *futhark_mc_segmap_task_128362_total_runtime;
    int *futhark_mc_segmap_task_128362_runs;
    int64_t *futhark_mc_segmap_task_128362_iter;
    int64_t futhark_mc_segmap_task_128362_total_time;
    int64_t futhark_mc_segmap_task_128362_total_iter;
    int64_t *futhark_mc_segmap_parloop_128373_total_runtime;
    int *futhark_mc_segmap_parloop_128373_runs;
    int64_t *futhark_mc_segmap_parloop_128373_iter;
    int64_t futhark_mc_segmap_parloop_128373_total_total_runtime;
    int futhark_mc_segmap_parloop_128373_total_runs;
    int64_t futhark_mc_segmap_parloop_128373_total_iter;
    int64_t *futhark_mc_segmap_task_128371_total_runtime;
    int *futhark_mc_segmap_task_128371_runs;
    int64_t *futhark_mc_segmap_task_128371_iter;
    int64_t futhark_mc_segmap_task_128371_total_time;
    int64_t futhark_mc_segmap_task_128371_total_iter;
    int64_t *futhark_mc_segmap_parloop_128368_total_runtime;
    int *futhark_mc_segmap_parloop_128368_runs;
    int64_t *futhark_mc_segmap_parloop_128368_iter;
    int64_t futhark_mc_segmap_parloop_128368_total_total_runtime;
    int futhark_mc_segmap_parloop_128368_total_runs;
    int64_t futhark_mc_segmap_parloop_128368_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128366_total_runtime;
    int *futhark_mc_segmap_nested_task_128366_runs;
    int64_t *futhark_mc_segmap_nested_task_128366_iter;
    int64_t *futhark_mc_segmap_parloop_128377_total_runtime;
    int *futhark_mc_segmap_parloop_128377_runs;
    int64_t *futhark_mc_segmap_parloop_128377_iter;
    int64_t futhark_mc_segmap_parloop_128377_total_total_runtime;
    int futhark_mc_segmap_parloop_128377_total_runs;
    int64_t futhark_mc_segmap_parloop_128377_total_iter;
    int64_t *futhark_mc_segmap_task_128375_total_runtime;
    int *futhark_mc_segmap_task_128375_runs;
    int64_t *futhark_mc_segmap_task_128375_iter;
    int64_t futhark_mc_segmap_task_128375_total_time;
    int64_t futhark_mc_segmap_task_128375_total_iter;
    int64_t *futhark_mc_segmap_parloop_128386_total_runtime;
    int *futhark_mc_segmap_parloop_128386_runs;
    int64_t *futhark_mc_segmap_parloop_128386_iter;
    int64_t futhark_mc_segmap_parloop_128386_total_total_runtime;
    int futhark_mc_segmap_parloop_128386_total_runs;
    int64_t futhark_mc_segmap_parloop_128386_total_iter;
    int64_t *futhark_mc_segmap_task_128384_total_runtime;
    int *futhark_mc_segmap_task_128384_runs;
    int64_t *futhark_mc_segmap_task_128384_iter;
    int64_t futhark_mc_segmap_task_128384_total_time;
    int64_t futhark_mc_segmap_task_128384_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128394_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128394_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128394_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128394_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128394_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128394_total_iter;
    int64_t *futhark_mc_segred_task_128391_total_runtime;
    int *futhark_mc_segred_task_128391_runs;
    int64_t *futhark_mc_segred_task_128391_iter;
    int64_t futhark_mc_segred_task_128391_total_time;
    int64_t futhark_mc_segred_task_128391_total_iter;
    int64_t *futhark_mc_segmap_parloop_128389_total_runtime;
    int *futhark_mc_segmap_parloop_128389_runs;
    int64_t *futhark_mc_segmap_parloop_128389_iter;
    int64_t futhark_mc_segmap_parloop_128389_total_total_runtime;
    int futhark_mc_segmap_parloop_128389_total_runs;
    int64_t futhark_mc_segmap_parloop_128389_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128387_total_runtime;
    int *futhark_mc_segmap_nested_task_128387_runs;
    int64_t *futhark_mc_segmap_nested_task_128387_iter;
    int64_t *futhark_mc_segmap_parloop_128381_total_runtime;
    int *futhark_mc_segmap_parloop_128381_runs;
    int64_t *futhark_mc_segmap_parloop_128381_iter;
    int64_t futhark_mc_segmap_parloop_128381_total_total_runtime;
    int futhark_mc_segmap_parloop_128381_total_runs;
    int64_t futhark_mc_segmap_parloop_128381_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128379_total_runtime;
    int *futhark_mc_segmap_nested_task_128379_runs;
    int64_t *futhark_mc_segmap_nested_task_128379_iter;
    int64_t *futhark_mc_segmap_parloop_128398_total_runtime;
    int *futhark_mc_segmap_parloop_128398_runs;
    int64_t *futhark_mc_segmap_parloop_128398_iter;
    int64_t futhark_mc_segmap_parloop_128398_total_total_runtime;
    int futhark_mc_segmap_parloop_128398_total_runs;
    int64_t futhark_mc_segmap_parloop_128398_total_iter;
    int64_t *futhark_mc_segmap_task_128396_total_runtime;
    int *futhark_mc_segmap_task_128396_runs;
    int64_t *futhark_mc_segmap_task_128396_iter;
    int64_t futhark_mc_segmap_task_128396_total_time;
    int64_t futhark_mc_segmap_task_128396_total_iter;
    int64_t *futhark_mc_segmap_parloop_128411_total_runtime;
    int *futhark_mc_segmap_parloop_128411_runs;
    int64_t *futhark_mc_segmap_parloop_128411_iter;
    int64_t futhark_mc_segmap_parloop_128411_total_total_runtime;
    int futhark_mc_segmap_parloop_128411_total_runs;
    int64_t futhark_mc_segmap_parloop_128411_total_iter;
    int64_t *futhark_mc_segmap_task_128409_total_runtime;
    int *futhark_mc_segmap_task_128409_runs;
    int64_t *futhark_mc_segmap_task_128409_iter;
    int64_t futhark_mc_segmap_task_128409_total_time;
    int64_t futhark_mc_segmap_task_128409_total_iter;
    int64_t *futhark_mc_segmap_parloop_128415_total_runtime;
    int *futhark_mc_segmap_parloop_128415_runs;
    int64_t *futhark_mc_segmap_parloop_128415_iter;
    int64_t futhark_mc_segmap_parloop_128415_total_total_runtime;
    int futhark_mc_segmap_parloop_128415_total_runs;
    int64_t futhark_mc_segmap_parloop_128415_total_iter;
    int64_t *futhark_mc_segmap_task_128413_total_runtime;
    int *futhark_mc_segmap_task_128413_runs;
    int64_t *futhark_mc_segmap_task_128413_iter;
    int64_t futhark_mc_segmap_task_128413_total_time;
    int64_t futhark_mc_segmap_task_128413_total_iter;
    int64_t *futhark_mc_segmap_parloop_128404_total_runtime;
    int *futhark_mc_segmap_parloop_128404_runs;
    int64_t *futhark_mc_segmap_parloop_128404_iter;
    int64_t futhark_mc_segmap_parloop_128404_total_total_runtime;
    int futhark_mc_segmap_parloop_128404_total_runs;
    int64_t futhark_mc_segmap_parloop_128404_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128402_total_runtime;
    int *futhark_mc_segmap_nested_task_128402_runs;
    int64_t *futhark_mc_segmap_nested_task_128402_iter;
    int64_t *futhark_mc_segmap_parloop_128419_total_runtime;
    int *futhark_mc_segmap_parloop_128419_runs;
    int64_t *futhark_mc_segmap_parloop_128419_iter;
    int64_t futhark_mc_segmap_parloop_128419_total_total_runtime;
    int futhark_mc_segmap_parloop_128419_total_runs;
    int64_t futhark_mc_segmap_parloop_128419_total_iter;
    int64_t *futhark_mc_segmap_task_128417_total_runtime;
    int *futhark_mc_segmap_task_128417_runs;
    int64_t *futhark_mc_segmap_task_128417_iter;
    int64_t futhark_mc_segmap_task_128417_total_time;
    int64_t futhark_mc_segmap_task_128417_total_iter;
    int64_t *futhark_mc_segmap_parloop_128432_total_runtime;
    int *futhark_mc_segmap_parloop_128432_runs;
    int64_t *futhark_mc_segmap_parloop_128432_iter;
    int64_t futhark_mc_segmap_parloop_128432_total_total_runtime;
    int futhark_mc_segmap_parloop_128432_total_runs;
    int64_t futhark_mc_segmap_parloop_128432_total_iter;
    int64_t *futhark_mc_segmap_task_128430_total_runtime;
    int *futhark_mc_segmap_task_128430_runs;
    int64_t *futhark_mc_segmap_task_128430_iter;
    int64_t futhark_mc_segmap_task_128430_total_time;
    int64_t futhark_mc_segmap_task_128430_total_iter;
    int64_t *futhark_mc_segmap_parloop_128436_total_runtime;
    int *futhark_mc_segmap_parloop_128436_runs;
    int64_t *futhark_mc_segmap_parloop_128436_iter;
    int64_t futhark_mc_segmap_parloop_128436_total_total_runtime;
    int futhark_mc_segmap_parloop_128436_total_runs;
    int64_t futhark_mc_segmap_parloop_128436_total_iter;
    int64_t *futhark_mc_segmap_task_128434_total_runtime;
    int *futhark_mc_segmap_task_128434_runs;
    int64_t *futhark_mc_segmap_task_128434_iter;
    int64_t futhark_mc_segmap_task_128434_total_time;
    int64_t futhark_mc_segmap_task_128434_total_iter;
    int64_t *futhark_mc_segmap_parloop_128425_total_runtime;
    int *futhark_mc_segmap_parloop_128425_runs;
    int64_t *futhark_mc_segmap_parloop_128425_iter;
    int64_t futhark_mc_segmap_parloop_128425_total_total_runtime;
    int futhark_mc_segmap_parloop_128425_total_runs;
    int64_t futhark_mc_segmap_parloop_128425_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128423_total_runtime;
    int *futhark_mc_segmap_nested_task_128423_runs;
    int64_t *futhark_mc_segmap_nested_task_128423_iter;
    int64_t *futhark_mc_segmap_parloop_128440_total_runtime;
    int *futhark_mc_segmap_parloop_128440_runs;
    int64_t *futhark_mc_segmap_parloop_128440_iter;
    int64_t futhark_mc_segmap_parloop_128440_total_total_runtime;
    int futhark_mc_segmap_parloop_128440_total_runs;
    int64_t futhark_mc_segmap_parloop_128440_total_iter;
    int64_t *futhark_mc_segmap_task_128438_total_runtime;
    int *futhark_mc_segmap_task_128438_runs;
    int64_t *futhark_mc_segmap_task_128438_iter;
    int64_t futhark_mc_segmap_task_128438_total_time;
    int64_t futhark_mc_segmap_task_128438_total_iter;
    int64_t *futhark_mc_segmap_parloop_128449_total_runtime;
    int *futhark_mc_segmap_parloop_128449_runs;
    int64_t *futhark_mc_segmap_parloop_128449_iter;
    int64_t futhark_mc_segmap_parloop_128449_total_total_runtime;
    int futhark_mc_segmap_parloop_128449_total_runs;
    int64_t futhark_mc_segmap_parloop_128449_total_iter;
    int64_t *futhark_mc_segmap_task_128447_total_runtime;
    int *futhark_mc_segmap_task_128447_runs;
    int64_t *futhark_mc_segmap_task_128447_iter;
    int64_t futhark_mc_segmap_task_128447_total_time;
    int64_t futhark_mc_segmap_task_128447_total_iter;
    int64_t *futhark_mc_segmap_parloop_128444_total_runtime;
    int *futhark_mc_segmap_parloop_128444_runs;
    int64_t *futhark_mc_segmap_parloop_128444_iter;
    int64_t futhark_mc_segmap_parloop_128444_total_total_runtime;
    int futhark_mc_segmap_parloop_128444_total_runs;
    int64_t futhark_mc_segmap_parloop_128444_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128442_total_runtime;
    int *futhark_mc_segmap_nested_task_128442_runs;
    int64_t *futhark_mc_segmap_nested_task_128442_iter;
    int64_t *futhark_mc_segmap_parloop_128453_total_runtime;
    int *futhark_mc_segmap_parloop_128453_runs;
    int64_t *futhark_mc_segmap_parloop_128453_iter;
    int64_t futhark_mc_segmap_parloop_128453_total_total_runtime;
    int futhark_mc_segmap_parloop_128453_total_runs;
    int64_t futhark_mc_segmap_parloop_128453_total_iter;
    int64_t *futhark_mc_segmap_task_128451_total_runtime;
    int *futhark_mc_segmap_task_128451_runs;
    int64_t *futhark_mc_segmap_task_128451_iter;
    int64_t futhark_mc_segmap_task_128451_total_time;
    int64_t futhark_mc_segmap_task_128451_total_iter;
    int64_t *futhark_mc_segmap_parloop_128462_total_runtime;
    int *futhark_mc_segmap_parloop_128462_runs;
    int64_t *futhark_mc_segmap_parloop_128462_iter;
    int64_t futhark_mc_segmap_parloop_128462_total_total_runtime;
    int futhark_mc_segmap_parloop_128462_total_runs;
    int64_t futhark_mc_segmap_parloop_128462_total_iter;
    int64_t *futhark_mc_segmap_task_128460_total_runtime;
    int *futhark_mc_segmap_task_128460_runs;
    int64_t *futhark_mc_segmap_task_128460_iter;
    int64_t futhark_mc_segmap_task_128460_total_time;
    int64_t futhark_mc_segmap_task_128460_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128470_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128470_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128470_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128470_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128470_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128470_total_iter;
    int64_t *futhark_mc_segred_task_128467_total_runtime;
    int *futhark_mc_segred_task_128467_runs;
    int64_t *futhark_mc_segred_task_128467_iter;
    int64_t futhark_mc_segred_task_128467_total_time;
    int64_t futhark_mc_segred_task_128467_total_iter;
    int64_t *futhark_mc_segmap_parloop_128465_total_runtime;
    int *futhark_mc_segmap_parloop_128465_runs;
    int64_t *futhark_mc_segmap_parloop_128465_iter;
    int64_t futhark_mc_segmap_parloop_128465_total_total_runtime;
    int futhark_mc_segmap_parloop_128465_total_runs;
    int64_t futhark_mc_segmap_parloop_128465_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128463_total_runtime;
    int *futhark_mc_segmap_nested_task_128463_runs;
    int64_t *futhark_mc_segmap_nested_task_128463_iter;
    int64_t *futhark_mc_segmap_parloop_128457_total_runtime;
    int *futhark_mc_segmap_parloop_128457_runs;
    int64_t *futhark_mc_segmap_parloop_128457_iter;
    int64_t futhark_mc_segmap_parloop_128457_total_total_runtime;
    int futhark_mc_segmap_parloop_128457_total_runs;
    int64_t futhark_mc_segmap_parloop_128457_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128455_total_runtime;
    int *futhark_mc_segmap_nested_task_128455_runs;
    int64_t *futhark_mc_segmap_nested_task_128455_iter;
    int64_t *futhark_mc_segmap_parloop_128474_total_runtime;
    int *futhark_mc_segmap_parloop_128474_runs;
    int64_t *futhark_mc_segmap_parloop_128474_iter;
    int64_t futhark_mc_segmap_parloop_128474_total_total_runtime;
    int futhark_mc_segmap_parloop_128474_total_runs;
    int64_t futhark_mc_segmap_parloop_128474_total_iter;
    int64_t *futhark_mc_segmap_task_128472_total_runtime;
    int *futhark_mc_segmap_task_128472_runs;
    int64_t *futhark_mc_segmap_task_128472_iter;
    int64_t futhark_mc_segmap_task_128472_total_time;
    int64_t futhark_mc_segmap_task_128472_total_iter;
    int64_t *futhark_mc_segmap_parloop_128483_total_runtime;
    int *futhark_mc_segmap_parloop_128483_runs;
    int64_t *futhark_mc_segmap_parloop_128483_iter;
    int64_t futhark_mc_segmap_parloop_128483_total_total_runtime;
    int futhark_mc_segmap_parloop_128483_total_runs;
    int64_t futhark_mc_segmap_parloop_128483_total_iter;
    int64_t *futhark_mc_segmap_task_128481_total_runtime;
    int *futhark_mc_segmap_task_128481_runs;
    int64_t *futhark_mc_segmap_task_128481_iter;
    int64_t futhark_mc_segmap_task_128481_total_time;
    int64_t futhark_mc_segmap_task_128481_total_iter;
    int64_t *futhark_mc_segmap_parloop_128478_total_runtime;
    int *futhark_mc_segmap_parloop_128478_runs;
    int64_t *futhark_mc_segmap_parloop_128478_iter;
    int64_t futhark_mc_segmap_parloop_128478_total_total_runtime;
    int futhark_mc_segmap_parloop_128478_total_runs;
    int64_t futhark_mc_segmap_parloop_128478_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128476_total_runtime;
    int *futhark_mc_segmap_nested_task_128476_runs;
    int64_t *futhark_mc_segmap_nested_task_128476_iter;
    int64_t *futhark_mc_segmap_parloop_128487_total_runtime;
    int *futhark_mc_segmap_parloop_128487_runs;
    int64_t *futhark_mc_segmap_parloop_128487_iter;
    int64_t futhark_mc_segmap_parloop_128487_total_total_runtime;
    int futhark_mc_segmap_parloop_128487_total_runs;
    int64_t futhark_mc_segmap_parloop_128487_total_iter;
    int64_t *futhark_mc_segmap_task_128485_total_runtime;
    int *futhark_mc_segmap_task_128485_runs;
    int64_t *futhark_mc_segmap_task_128485_iter;
    int64_t futhark_mc_segmap_task_128485_total_time;
    int64_t futhark_mc_segmap_task_128485_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128501_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128501_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128501_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128501_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128501_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128501_total_iter;
    int64_t *futhark_mc_segred_task_128498_total_runtime;
    int *futhark_mc_segred_task_128498_runs;
    int64_t *futhark_mc_segred_task_128498_iter;
    int64_t futhark_mc_segred_task_128498_total_time;
    int64_t futhark_mc_segred_task_128498_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128506_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128506_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128506_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128506_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128506_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128506_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128508_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128508_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128508_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128508_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128508_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128508_total_iter;
    int64_t *futhark_mc_segscan_task_128503_total_runtime;
    int *futhark_mc_segscan_task_128503_runs;
    int64_t *futhark_mc_segscan_task_128503_iter;
    int64_t futhark_mc_segscan_task_128503_total_time;
    int64_t futhark_mc_segscan_task_128503_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128513_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128513_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128513_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128513_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128513_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128513_total_iter;
    int64_t *futhark_mc_segred_task_128510_total_runtime;
    int *futhark_mc_segred_task_128510_runs;
    int64_t *futhark_mc_segred_task_128510_iter;
    int64_t futhark_mc_segred_task_128510_total_time;
    int64_t futhark_mc_segred_task_128510_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128518_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128518_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128518_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128518_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128518_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128518_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128520_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128520_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128520_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128520_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128520_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128520_total_iter;
    int64_t *futhark_mc_segscan_task_128515_total_runtime;
    int *futhark_mc_segscan_task_128515_runs;
    int64_t *futhark_mc_segscan_task_128515_iter;
    int64_t futhark_mc_segscan_task_128515_total_time;
    int64_t futhark_mc_segscan_task_128515_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128525_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128525_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128525_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128525_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128525_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128525_total_iter;
    int64_t *futhark_mc_segred_task_128522_total_runtime;
    int *futhark_mc_segred_task_128522_runs;
    int64_t *futhark_mc_segred_task_128522_iter;
    int64_t futhark_mc_segred_task_128522_total_time;
    int64_t futhark_mc_segred_task_128522_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_128530_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_128530_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_128530_iter;
    int64_t futhark_mc_scan_stage_1_parloop_128530_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_128530_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_128530_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_128532_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_128532_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_128532_iter;
    int64_t futhark_mc_scan_stage_3_parloop_128532_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_128532_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_128532_total_iter;
    int64_t *futhark_mc_segscan_task_128527_total_runtime;
    int *futhark_mc_segscan_task_128527_runs;
    int64_t *futhark_mc_segscan_task_128527_iter;
    int64_t futhark_mc_segscan_task_128527_total_time;
    int64_t futhark_mc_segscan_task_128527_total_iter;
    int64_t *futhark_mc_segmap_parloop_128493_total_runtime;
    int *futhark_mc_segmap_parloop_128493_runs;
    int64_t *futhark_mc_segmap_parloop_128493_iter;
    int64_t futhark_mc_segmap_parloop_128493_total_total_runtime;
    int futhark_mc_segmap_parloop_128493_total_runs;
    int64_t futhark_mc_segmap_parloop_128493_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128491_total_runtime;
    int *futhark_mc_segmap_nested_task_128491_runs;
    int64_t *futhark_mc_segmap_nested_task_128491_iter;
    int64_t *futhark_mc_segmap_parloop_128536_total_runtime;
    int *futhark_mc_segmap_parloop_128536_runs;
    int64_t *futhark_mc_segmap_parloop_128536_iter;
    int64_t futhark_mc_segmap_parloop_128536_total_total_runtime;
    int futhark_mc_segmap_parloop_128536_total_runs;
    int64_t futhark_mc_segmap_parloop_128536_total_iter;
    int64_t *futhark_mc_segmap_task_128534_total_runtime;
    int *futhark_mc_segmap_task_128534_runs;
    int64_t *futhark_mc_segmap_task_128534_iter;
    int64_t futhark_mc_segmap_task_128534_total_time;
    int64_t futhark_mc_segmap_task_128534_total_iter;
    int64_t *futhark_mc_segmap_parloop_128545_total_runtime;
    int *futhark_mc_segmap_parloop_128545_runs;
    int64_t *futhark_mc_segmap_parloop_128545_iter;
    int64_t futhark_mc_segmap_parloop_128545_total_total_runtime;
    int futhark_mc_segmap_parloop_128545_total_runs;
    int64_t futhark_mc_segmap_parloop_128545_total_iter;
    int64_t *futhark_mc_segmap_task_128543_total_runtime;
    int *futhark_mc_segmap_task_128543_runs;
    int64_t *futhark_mc_segmap_task_128543_iter;
    int64_t futhark_mc_segmap_task_128543_total_time;
    int64_t futhark_mc_segmap_task_128543_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128553_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128553_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128553_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128553_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128553_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128553_total_iter;
    int64_t *futhark_mc_segred_task_128550_total_runtime;
    int *futhark_mc_segred_task_128550_runs;
    int64_t *futhark_mc_segred_task_128550_iter;
    int64_t futhark_mc_segred_task_128550_total_time;
    int64_t futhark_mc_segred_task_128550_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128558_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128558_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128558_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128558_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128558_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128558_total_iter;
    int64_t *futhark_mc_segred_task_128555_total_runtime;
    int *futhark_mc_segred_task_128555_runs;
    int64_t *futhark_mc_segred_task_128555_iter;
    int64_t futhark_mc_segred_task_128555_total_time;
    int64_t futhark_mc_segred_task_128555_total_iter;
    int64_t *futhark_mc_segmap_parloop_128548_total_runtime;
    int *futhark_mc_segmap_parloop_128548_runs;
    int64_t *futhark_mc_segmap_parloop_128548_iter;
    int64_t futhark_mc_segmap_parloop_128548_total_total_runtime;
    int futhark_mc_segmap_parloop_128548_total_runs;
    int64_t futhark_mc_segmap_parloop_128548_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128546_total_runtime;
    int *futhark_mc_segmap_nested_task_128546_runs;
    int64_t *futhark_mc_segmap_nested_task_128546_iter;
    int64_t *futhark_mc_segmap_parloop_128540_total_runtime;
    int *futhark_mc_segmap_parloop_128540_runs;
    int64_t *futhark_mc_segmap_parloop_128540_iter;
    int64_t futhark_mc_segmap_parloop_128540_total_total_runtime;
    int futhark_mc_segmap_parloop_128540_total_runs;
    int64_t futhark_mc_segmap_parloop_128540_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128538_total_runtime;
    int *futhark_mc_segmap_nested_task_128538_runs;
    int64_t *futhark_mc_segmap_nested_task_128538_iter;
    int64_t *futhark_mc_segmap_parloop_128562_total_runtime;
    int *futhark_mc_segmap_parloop_128562_runs;
    int64_t *futhark_mc_segmap_parloop_128562_iter;
    int64_t futhark_mc_segmap_parloop_128562_total_total_runtime;
    int futhark_mc_segmap_parloop_128562_total_runs;
    int64_t futhark_mc_segmap_parloop_128562_total_iter;
    int64_t *futhark_mc_segmap_task_128560_total_runtime;
    int *futhark_mc_segmap_task_128560_runs;
    int64_t *futhark_mc_segmap_task_128560_iter;
    int64_t futhark_mc_segmap_task_128560_total_time;
    int64_t futhark_mc_segmap_task_128560_total_iter;
    int64_t *futhark_mc_segmap_parloop_128573_total_runtime;
    int *futhark_mc_segmap_parloop_128573_runs;
    int64_t *futhark_mc_segmap_parloop_128573_iter;
    int64_t futhark_mc_segmap_parloop_128573_total_total_runtime;
    int futhark_mc_segmap_parloop_128573_total_runs;
    int64_t futhark_mc_segmap_parloop_128573_total_iter;
    int64_t *futhark_mc_segmap_task_128571_total_runtime;
    int *futhark_mc_segmap_task_128571_runs;
    int64_t *futhark_mc_segmap_task_128571_iter;
    int64_t futhark_mc_segmap_task_128571_total_time;
    int64_t futhark_mc_segmap_task_128571_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128583_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128583_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128583_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128583_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128583_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128583_total_iter;
    int64_t *futhark_mc_segred_task_128578_total_runtime;
    int *futhark_mc_segred_task_128578_runs;
    int64_t *futhark_mc_segred_task_128578_iter;
    int64_t futhark_mc_segred_task_128578_total_time;
    int64_t futhark_mc_segred_task_128578_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128589_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128589_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128589_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128589_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128589_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128589_total_iter;
    int64_t *futhark_mc_segred_task_128585_total_runtime;
    int *futhark_mc_segred_task_128585_runs;
    int64_t *futhark_mc_segred_task_128585_iter;
    int64_t futhark_mc_segred_task_128585_total_time;
    int64_t futhark_mc_segred_task_128585_total_iter;
    int64_t *futhark_mc_segmap_parloop_128576_total_runtime;
    int *futhark_mc_segmap_parloop_128576_runs;
    int64_t *futhark_mc_segmap_parloop_128576_iter;
    int64_t futhark_mc_segmap_parloop_128576_total_total_runtime;
    int futhark_mc_segmap_parloop_128576_total_runs;
    int64_t futhark_mc_segmap_parloop_128576_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128574_total_runtime;
    int *futhark_mc_segmap_nested_task_128574_runs;
    int64_t *futhark_mc_segmap_nested_task_128574_iter;
    int64_t *futhark_mc_segmap_parloop_128567_total_runtime;
    int *futhark_mc_segmap_parloop_128567_runs;
    int64_t *futhark_mc_segmap_parloop_128567_iter;
    int64_t futhark_mc_segmap_parloop_128567_total_total_runtime;
    int futhark_mc_segmap_parloop_128567_total_runs;
    int64_t futhark_mc_segmap_parloop_128567_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128565_total_runtime;
    int *futhark_mc_segmap_nested_task_128565_runs;
    int64_t *futhark_mc_segmap_nested_task_128565_iter;
    int64_t *futhark_mc_segmap_parloop_128593_total_runtime;
    int *futhark_mc_segmap_parloop_128593_runs;
    int64_t *futhark_mc_segmap_parloop_128593_iter;
    int64_t futhark_mc_segmap_parloop_128593_total_total_runtime;
    int futhark_mc_segmap_parloop_128593_total_runs;
    int64_t futhark_mc_segmap_parloop_128593_total_iter;
    int64_t *futhark_mc_segmap_task_128591_total_runtime;
    int *futhark_mc_segmap_task_128591_runs;
    int64_t *futhark_mc_segmap_task_128591_iter;
    int64_t futhark_mc_segmap_task_128591_total_time;
    int64_t futhark_mc_segmap_task_128591_total_iter;
    int64_t *futhark_mc_segmap_parloop_128604_total_runtime;
    int *futhark_mc_segmap_parloop_128604_runs;
    int64_t *futhark_mc_segmap_parloop_128604_iter;
    int64_t futhark_mc_segmap_parloop_128604_total_total_runtime;
    int futhark_mc_segmap_parloop_128604_total_runs;
    int64_t futhark_mc_segmap_parloop_128604_total_iter;
    int64_t *futhark_mc_segmap_task_128602_total_runtime;
    int *futhark_mc_segmap_task_128602_runs;
    int64_t *futhark_mc_segmap_task_128602_iter;
    int64_t futhark_mc_segmap_task_128602_total_time;
    int64_t futhark_mc_segmap_task_128602_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128616_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128616_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128616_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128616_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128616_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128616_total_iter;
    int64_t *futhark_mc_segred_task_128609_total_runtime;
    int *futhark_mc_segred_task_128609_runs;
    int64_t *futhark_mc_segred_task_128609_iter;
    int64_t futhark_mc_segred_task_128609_total_time;
    int64_t futhark_mc_segred_task_128609_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128622_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128622_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128622_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128622_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128622_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128622_total_iter;
    int64_t *futhark_mc_segred_task_128618_total_runtime;
    int *futhark_mc_segred_task_128618_runs;
    int64_t *futhark_mc_segred_task_128618_iter;
    int64_t futhark_mc_segred_task_128618_total_time;
    int64_t futhark_mc_segred_task_128618_total_iter;
    int64_t *futhark_mc_segmap_parloop_128607_total_runtime;
    int *futhark_mc_segmap_parloop_128607_runs;
    int64_t *futhark_mc_segmap_parloop_128607_iter;
    int64_t futhark_mc_segmap_parloop_128607_total_total_runtime;
    int futhark_mc_segmap_parloop_128607_total_runs;
    int64_t futhark_mc_segmap_parloop_128607_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128605_total_runtime;
    int *futhark_mc_segmap_nested_task_128605_runs;
    int64_t *futhark_mc_segmap_nested_task_128605_iter;
    int64_t *futhark_mc_segmap_parloop_128598_total_runtime;
    int *futhark_mc_segmap_parloop_128598_runs;
    int64_t *futhark_mc_segmap_parloop_128598_iter;
    int64_t futhark_mc_segmap_parloop_128598_total_total_runtime;
    int futhark_mc_segmap_parloop_128598_total_runs;
    int64_t futhark_mc_segmap_parloop_128598_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128596_total_runtime;
    int *futhark_mc_segmap_nested_task_128596_runs;
    int64_t *futhark_mc_segmap_nested_task_128596_iter;
    int64_t *futhark_mc_segmap_parloop_128626_total_runtime;
    int *futhark_mc_segmap_parloop_128626_runs;
    int64_t *futhark_mc_segmap_parloop_128626_iter;
    int64_t futhark_mc_segmap_parloop_128626_total_total_runtime;
    int futhark_mc_segmap_parloop_128626_total_runs;
    int64_t futhark_mc_segmap_parloop_128626_total_iter;
    int64_t *futhark_mc_segmap_task_128624_total_runtime;
    int *futhark_mc_segmap_task_128624_runs;
    int64_t *futhark_mc_segmap_task_128624_iter;
    int64_t futhark_mc_segmap_task_128624_total_time;
    int64_t futhark_mc_segmap_task_128624_total_iter;
    int64_t *futhark_mc_segmap_parloop_128636_total_runtime;
    int *futhark_mc_segmap_parloop_128636_runs;
    int64_t *futhark_mc_segmap_parloop_128636_iter;
    int64_t futhark_mc_segmap_parloop_128636_total_total_runtime;
    int futhark_mc_segmap_parloop_128636_total_runs;
    int64_t futhark_mc_segmap_parloop_128636_total_iter;
    int64_t *futhark_mc_segmap_task_128634_total_runtime;
    int *futhark_mc_segmap_task_128634_runs;
    int64_t *futhark_mc_segmap_task_128634_iter;
    int64_t futhark_mc_segmap_task_128634_total_time;
    int64_t futhark_mc_segmap_task_128634_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128646_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128646_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128646_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128646_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128646_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128646_total_iter;
    int64_t *futhark_mc_segred_task_128643_total_runtime;
    int *futhark_mc_segred_task_128643_runs;
    int64_t *futhark_mc_segred_task_128643_iter;
    int64_t futhark_mc_segred_task_128643_total_time;
    int64_t futhark_mc_segred_task_128643_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128651_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128651_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128651_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128651_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128651_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128651_total_iter;
    int64_t *futhark_mc_segred_task_128648_total_runtime;
    int *futhark_mc_segred_task_128648_runs;
    int64_t *futhark_mc_segred_task_128648_iter;
    int64_t futhark_mc_segred_task_128648_total_time;
    int64_t futhark_mc_segred_task_128648_total_iter;
    int64_t *futhark_mc_segmap_parloop_128640_total_runtime;
    int *futhark_mc_segmap_parloop_128640_runs;
    int64_t *futhark_mc_segmap_parloop_128640_iter;
    int64_t futhark_mc_segmap_parloop_128640_total_total_runtime;
    int futhark_mc_segmap_parloop_128640_total_runs;
    int64_t futhark_mc_segmap_parloop_128640_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128638_total_runtime;
    int *futhark_mc_segmap_nested_task_128638_runs;
    int64_t *futhark_mc_segmap_nested_task_128638_iter;
    int64_t *futhark_mc_segmap_parloop_128631_total_runtime;
    int *futhark_mc_segmap_parloop_128631_runs;
    int64_t *futhark_mc_segmap_parloop_128631_iter;
    int64_t futhark_mc_segmap_parloop_128631_total_total_runtime;
    int futhark_mc_segmap_parloop_128631_total_runs;
    int64_t futhark_mc_segmap_parloop_128631_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128629_total_runtime;
    int *futhark_mc_segmap_nested_task_128629_runs;
    int64_t *futhark_mc_segmap_nested_task_128629_iter;
    int64_t *futhark_mc_segmap_parloop_128655_total_runtime;
    int *futhark_mc_segmap_parloop_128655_runs;
    int64_t *futhark_mc_segmap_parloop_128655_iter;
    int64_t futhark_mc_segmap_parloop_128655_total_total_runtime;
    int futhark_mc_segmap_parloop_128655_total_runs;
    int64_t futhark_mc_segmap_parloop_128655_total_iter;
    int64_t *futhark_mc_segmap_task_128653_total_runtime;
    int *futhark_mc_segmap_task_128653_runs;
    int64_t *futhark_mc_segmap_task_128653_iter;
    int64_t futhark_mc_segmap_task_128653_total_time;
    int64_t futhark_mc_segmap_task_128653_total_iter;
    int64_t *futhark_mc_segmap_parloop_128668_total_runtime;
    int *futhark_mc_segmap_parloop_128668_runs;
    int64_t *futhark_mc_segmap_parloop_128668_iter;
    int64_t futhark_mc_segmap_parloop_128668_total_total_runtime;
    int futhark_mc_segmap_parloop_128668_total_runs;
    int64_t futhark_mc_segmap_parloop_128668_total_iter;
    int64_t *futhark_mc_segmap_task_128666_total_runtime;
    int *futhark_mc_segmap_task_128666_runs;
    int64_t *futhark_mc_segmap_task_128666_iter;
    int64_t futhark_mc_segmap_task_128666_total_time;
    int64_t futhark_mc_segmap_task_128666_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128682_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128682_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128682_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128682_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128682_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128682_total_iter;
    int64_t *futhark_mc_segred_task_128677_total_runtime;
    int *futhark_mc_segred_task_128677_runs;
    int64_t *futhark_mc_segred_task_128677_iter;
    int64_t futhark_mc_segred_task_128677_total_time;
    int64_t futhark_mc_segred_task_128677_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128688_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128688_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128688_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128688_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128688_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128688_total_iter;
    int64_t *futhark_mc_segred_task_128684_total_runtime;
    int *futhark_mc_segred_task_128684_runs;
    int64_t *futhark_mc_segred_task_128684_iter;
    int64_t futhark_mc_segred_task_128684_total_time;
    int64_t futhark_mc_segred_task_128684_total_iter;
    int64_t *futhark_mc_segmap_parloop_128673_total_runtime;
    int *futhark_mc_segmap_parloop_128673_runs;
    int64_t *futhark_mc_segmap_parloop_128673_iter;
    int64_t futhark_mc_segmap_parloop_128673_total_total_runtime;
    int futhark_mc_segmap_parloop_128673_total_runs;
    int64_t futhark_mc_segmap_parloop_128673_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128671_total_runtime;
    int *futhark_mc_segmap_nested_task_128671_runs;
    int64_t *futhark_mc_segmap_nested_task_128671_iter;
    int64_t *futhark_mc_segmap_parloop_128662_total_runtime;
    int *futhark_mc_segmap_parloop_128662_runs;
    int64_t *futhark_mc_segmap_parloop_128662_iter;
    int64_t futhark_mc_segmap_parloop_128662_total_total_runtime;
    int futhark_mc_segmap_parloop_128662_total_runs;
    int64_t futhark_mc_segmap_parloop_128662_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128660_total_runtime;
    int *futhark_mc_segmap_nested_task_128660_runs;
    int64_t *futhark_mc_segmap_nested_task_128660_iter;
    int64_t *futhark_mc_segmap_parloop_128692_total_runtime;
    int *futhark_mc_segmap_parloop_128692_runs;
    int64_t *futhark_mc_segmap_parloop_128692_iter;
    int64_t futhark_mc_segmap_parloop_128692_total_total_runtime;
    int futhark_mc_segmap_parloop_128692_total_runs;
    int64_t futhark_mc_segmap_parloop_128692_total_iter;
    int64_t *futhark_mc_segmap_task_128690_total_runtime;
    int *futhark_mc_segmap_task_128690_runs;
    int64_t *futhark_mc_segmap_task_128690_iter;
    int64_t futhark_mc_segmap_task_128690_total_time;
    int64_t futhark_mc_segmap_task_128690_total_iter;
    int64_t *futhark_mc_segmap_parloop_128707_total_runtime;
    int *futhark_mc_segmap_parloop_128707_runs;
    int64_t *futhark_mc_segmap_parloop_128707_iter;
    int64_t futhark_mc_segmap_parloop_128707_total_total_runtime;
    int futhark_mc_segmap_parloop_128707_total_runs;
    int64_t futhark_mc_segmap_parloop_128707_total_iter;
    int64_t *futhark_mc_segmap_task_128705_total_runtime;
    int *futhark_mc_segmap_task_128705_runs;
    int64_t *futhark_mc_segmap_task_128705_iter;
    int64_t futhark_mc_segmap_task_128705_total_time;
    int64_t futhark_mc_segmap_task_128705_total_iter;
    int64_t *futhark_mc_segmap_parloop_128722_total_runtime;
    int *futhark_mc_segmap_parloop_128722_runs;
    int64_t *futhark_mc_segmap_parloop_128722_iter;
    int64_t futhark_mc_segmap_parloop_128722_total_total_runtime;
    int futhark_mc_segmap_parloop_128722_total_runs;
    int64_t futhark_mc_segmap_parloop_128722_total_iter;
    int64_t *futhark_mc_segmap_task_128720_total_runtime;
    int *futhark_mc_segmap_task_128720_runs;
    int64_t *futhark_mc_segmap_task_128720_iter;
    int64_t futhark_mc_segmap_task_128720_total_time;
    int64_t futhark_mc_segmap_task_128720_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128731_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128731_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128731_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128731_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128731_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128731_total_iter;
    int64_t *futhark_mc_segred_task_128724_total_runtime;
    int *futhark_mc_segred_task_128724_runs;
    int64_t *futhark_mc_segred_task_128724_iter;
    int64_t futhark_mc_segred_task_128724_total_time;
    int64_t futhark_mc_segred_task_128724_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128737_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128737_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128737_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128737_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128737_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128737_total_iter;
    int64_t *futhark_mc_segred_task_128733_total_runtime;
    int *futhark_mc_segred_task_128733_runs;
    int64_t *futhark_mc_segred_task_128733_iter;
    int64_t futhark_mc_segred_task_128733_total_time;
    int64_t futhark_mc_segred_task_128733_total_iter;
    int64_t *futhark_mc_segmap_parloop_128714_total_runtime;
    int *futhark_mc_segmap_parloop_128714_runs;
    int64_t *futhark_mc_segmap_parloop_128714_iter;
    int64_t futhark_mc_segmap_parloop_128714_total_total_runtime;
    int futhark_mc_segmap_parloop_128714_total_runs;
    int64_t futhark_mc_segmap_parloop_128714_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128712_total_runtime;
    int *futhark_mc_segmap_nested_task_128712_runs;
    int64_t *futhark_mc_segmap_nested_task_128712_iter;
    int64_t *futhark_mc_segmap_parloop_128701_total_runtime;
    int *futhark_mc_segmap_parloop_128701_runs;
    int64_t *futhark_mc_segmap_parloop_128701_iter;
    int64_t futhark_mc_segmap_parloop_128701_total_total_runtime;
    int futhark_mc_segmap_parloop_128701_total_runs;
    int64_t futhark_mc_segmap_parloop_128701_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128699_total_runtime;
    int *futhark_mc_segmap_nested_task_128699_runs;
    int64_t *futhark_mc_segmap_nested_task_128699_iter;
    int64_t *futhark_mc_segmap_parloop_128741_total_runtime;
    int *futhark_mc_segmap_parloop_128741_runs;
    int64_t *futhark_mc_segmap_parloop_128741_iter;
    int64_t futhark_mc_segmap_parloop_128741_total_total_runtime;
    int futhark_mc_segmap_parloop_128741_total_runs;
    int64_t futhark_mc_segmap_parloop_128741_total_iter;
    int64_t *futhark_mc_segmap_task_128739_total_runtime;
    int *futhark_mc_segmap_task_128739_runs;
    int64_t *futhark_mc_segmap_task_128739_iter;
    int64_t futhark_mc_segmap_task_128739_total_time;
    int64_t futhark_mc_segmap_task_128739_total_iter;
    int64_t *futhark_mc_segmap_parloop_128750_total_runtime;
    int *futhark_mc_segmap_parloop_128750_runs;
    int64_t *futhark_mc_segmap_parloop_128750_iter;
    int64_t futhark_mc_segmap_parloop_128750_total_total_runtime;
    int futhark_mc_segmap_parloop_128750_total_runs;
    int64_t futhark_mc_segmap_parloop_128750_total_iter;
    int64_t *futhark_mc_segmap_task_128748_total_runtime;
    int *futhark_mc_segmap_task_128748_runs;
    int64_t *futhark_mc_segmap_task_128748_iter;
    int64_t futhark_mc_segmap_task_128748_total_time;
    int64_t futhark_mc_segmap_task_128748_total_iter;
    int64_t *futhark_mc_segmap_parloop_128745_total_runtime;
    int *futhark_mc_segmap_parloop_128745_runs;
    int64_t *futhark_mc_segmap_parloop_128745_iter;
    int64_t futhark_mc_segmap_parloop_128745_total_total_runtime;
    int futhark_mc_segmap_parloop_128745_total_runs;
    int64_t futhark_mc_segmap_parloop_128745_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128743_total_runtime;
    int *futhark_mc_segmap_nested_task_128743_runs;
    int64_t *futhark_mc_segmap_nested_task_128743_iter;
    int64_t *futhark_mc_segmap_parloop_128754_total_runtime;
    int *futhark_mc_segmap_parloop_128754_runs;
    int64_t *futhark_mc_segmap_parloop_128754_iter;
    int64_t futhark_mc_segmap_parloop_128754_total_total_runtime;
    int futhark_mc_segmap_parloop_128754_total_runs;
    int64_t futhark_mc_segmap_parloop_128754_total_iter;
    int64_t *futhark_mc_segmap_task_128752_total_runtime;
    int *futhark_mc_segmap_task_128752_runs;
    int64_t *futhark_mc_segmap_task_128752_iter;
    int64_t futhark_mc_segmap_task_128752_total_time;
    int64_t futhark_mc_segmap_task_128752_total_iter;
    int64_t *futhark_mc_segmap_parloop_128769_total_runtime;
    int *futhark_mc_segmap_parloop_128769_runs;
    int64_t *futhark_mc_segmap_parloop_128769_iter;
    int64_t futhark_mc_segmap_parloop_128769_total_total_runtime;
    int futhark_mc_segmap_parloop_128769_total_runs;
    int64_t futhark_mc_segmap_parloop_128769_total_iter;
    int64_t *futhark_mc_segmap_task_128767_total_runtime;
    int *futhark_mc_segmap_task_128767_runs;
    int64_t *futhark_mc_segmap_task_128767_iter;
    int64_t futhark_mc_segmap_task_128767_total_time;
    int64_t futhark_mc_segmap_task_128767_total_iter;
    int64_t *futhark_mc_segmap_parloop_128773_total_runtime;
    int *futhark_mc_segmap_parloop_128773_runs;
    int64_t *futhark_mc_segmap_parloop_128773_iter;
    int64_t futhark_mc_segmap_parloop_128773_total_total_runtime;
    int futhark_mc_segmap_parloop_128773_total_runs;
    int64_t futhark_mc_segmap_parloop_128773_total_iter;
    int64_t *futhark_mc_segmap_task_128771_total_runtime;
    int *futhark_mc_segmap_task_128771_runs;
    int64_t *futhark_mc_segmap_task_128771_iter;
    int64_t futhark_mc_segmap_task_128771_total_time;
    int64_t futhark_mc_segmap_task_128771_total_iter;
    int64_t *futhark_mc_segmap_parloop_128761_total_runtime;
    int *futhark_mc_segmap_parloop_128761_runs;
    int64_t *futhark_mc_segmap_parloop_128761_iter;
    int64_t futhark_mc_segmap_parloop_128761_total_total_runtime;
    int futhark_mc_segmap_parloop_128761_total_runs;
    int64_t futhark_mc_segmap_parloop_128761_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128759_total_runtime;
    int *futhark_mc_segmap_nested_task_128759_runs;
    int64_t *futhark_mc_segmap_nested_task_128759_iter;
    int64_t *futhark_mc_segmap_parloop_128777_total_runtime;
    int *futhark_mc_segmap_parloop_128777_runs;
    int64_t *futhark_mc_segmap_parloop_128777_iter;
    int64_t futhark_mc_segmap_parloop_128777_total_total_runtime;
    int futhark_mc_segmap_parloop_128777_total_runs;
    int64_t futhark_mc_segmap_parloop_128777_total_iter;
    int64_t *futhark_mc_segmap_task_128775_total_runtime;
    int *futhark_mc_segmap_task_128775_runs;
    int64_t *futhark_mc_segmap_task_128775_iter;
    int64_t futhark_mc_segmap_task_128775_total_time;
    int64_t futhark_mc_segmap_task_128775_total_iter;
    int64_t *futhark_mc_segmap_parloop_128786_total_runtime;
    int *futhark_mc_segmap_parloop_128786_runs;
    int64_t *futhark_mc_segmap_parloop_128786_iter;
    int64_t futhark_mc_segmap_parloop_128786_total_total_runtime;
    int futhark_mc_segmap_parloop_128786_total_runs;
    int64_t futhark_mc_segmap_parloop_128786_total_iter;
    int64_t *futhark_mc_segmap_task_128784_total_runtime;
    int *futhark_mc_segmap_task_128784_runs;
    int64_t *futhark_mc_segmap_task_128784_iter;
    int64_t futhark_mc_segmap_task_128784_total_time;
    int64_t futhark_mc_segmap_task_128784_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128794_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128794_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128794_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128794_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128794_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128794_total_iter;
    int64_t *futhark_mc_segred_task_128791_total_runtime;
    int *futhark_mc_segred_task_128791_runs;
    int64_t *futhark_mc_segred_task_128791_iter;
    int64_t futhark_mc_segred_task_128791_total_time;
    int64_t futhark_mc_segred_task_128791_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128799_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128799_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128799_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128799_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128799_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128799_total_iter;
    int64_t *futhark_mc_segred_task_128796_total_runtime;
    int *futhark_mc_segred_task_128796_runs;
    int64_t *futhark_mc_segred_task_128796_iter;
    int64_t futhark_mc_segred_task_128796_total_time;
    int64_t futhark_mc_segred_task_128796_total_iter;
    int64_t *futhark_mc_segmap_parloop_128789_total_runtime;
    int *futhark_mc_segmap_parloop_128789_runs;
    int64_t *futhark_mc_segmap_parloop_128789_iter;
    int64_t futhark_mc_segmap_parloop_128789_total_total_runtime;
    int futhark_mc_segmap_parloop_128789_total_runs;
    int64_t futhark_mc_segmap_parloop_128789_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128787_total_runtime;
    int *futhark_mc_segmap_nested_task_128787_runs;
    int64_t *futhark_mc_segmap_nested_task_128787_iter;
    int64_t *futhark_mc_segmap_parloop_128781_total_runtime;
    int *futhark_mc_segmap_parloop_128781_runs;
    int64_t *futhark_mc_segmap_parloop_128781_iter;
    int64_t futhark_mc_segmap_parloop_128781_total_total_runtime;
    int futhark_mc_segmap_parloop_128781_total_runs;
    int64_t futhark_mc_segmap_parloop_128781_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128779_total_runtime;
    int *futhark_mc_segmap_nested_task_128779_runs;
    int64_t *futhark_mc_segmap_nested_task_128779_iter;
    int64_t *futhark_mc_segmap_parloop_128803_total_runtime;
    int *futhark_mc_segmap_parloop_128803_runs;
    int64_t *futhark_mc_segmap_parloop_128803_iter;
    int64_t futhark_mc_segmap_parloop_128803_total_total_runtime;
    int futhark_mc_segmap_parloop_128803_total_runs;
    int64_t futhark_mc_segmap_parloop_128803_total_iter;
    int64_t *futhark_mc_segmap_task_128801_total_runtime;
    int *futhark_mc_segmap_task_128801_runs;
    int64_t *futhark_mc_segmap_task_128801_iter;
    int64_t futhark_mc_segmap_task_128801_total_time;
    int64_t futhark_mc_segmap_task_128801_total_iter;
    int64_t *futhark_mc_segmap_parloop_128814_total_runtime;
    int *futhark_mc_segmap_parloop_128814_runs;
    int64_t *futhark_mc_segmap_parloop_128814_iter;
    int64_t futhark_mc_segmap_parloop_128814_total_total_runtime;
    int futhark_mc_segmap_parloop_128814_total_runs;
    int64_t futhark_mc_segmap_parloop_128814_total_iter;
    int64_t *futhark_mc_segmap_task_128812_total_runtime;
    int *futhark_mc_segmap_task_128812_runs;
    int64_t *futhark_mc_segmap_task_128812_iter;
    int64_t futhark_mc_segmap_task_128812_total_time;
    int64_t futhark_mc_segmap_task_128812_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128824_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128824_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128824_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128824_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128824_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128824_total_iter;
    int64_t *futhark_mc_segred_task_128819_total_runtime;
    int *futhark_mc_segred_task_128819_runs;
    int64_t *futhark_mc_segred_task_128819_iter;
    int64_t futhark_mc_segred_task_128819_total_time;
    int64_t futhark_mc_segred_task_128819_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128830_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128830_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128830_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128830_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128830_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128830_total_iter;
    int64_t *futhark_mc_segred_task_128826_total_runtime;
    int *futhark_mc_segred_task_128826_runs;
    int64_t *futhark_mc_segred_task_128826_iter;
    int64_t futhark_mc_segred_task_128826_total_time;
    int64_t futhark_mc_segred_task_128826_total_iter;
    int64_t *futhark_mc_segmap_parloop_128817_total_runtime;
    int *futhark_mc_segmap_parloop_128817_runs;
    int64_t *futhark_mc_segmap_parloop_128817_iter;
    int64_t futhark_mc_segmap_parloop_128817_total_total_runtime;
    int futhark_mc_segmap_parloop_128817_total_runs;
    int64_t futhark_mc_segmap_parloop_128817_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128815_total_runtime;
    int *futhark_mc_segmap_nested_task_128815_runs;
    int64_t *futhark_mc_segmap_nested_task_128815_iter;
    int64_t *futhark_mc_segmap_parloop_128808_total_runtime;
    int *futhark_mc_segmap_parloop_128808_runs;
    int64_t *futhark_mc_segmap_parloop_128808_iter;
    int64_t futhark_mc_segmap_parloop_128808_total_total_runtime;
    int futhark_mc_segmap_parloop_128808_total_runs;
    int64_t futhark_mc_segmap_parloop_128808_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128806_total_runtime;
    int *futhark_mc_segmap_nested_task_128806_runs;
    int64_t *futhark_mc_segmap_nested_task_128806_iter;
    int64_t *futhark_mc_segmap_parloop_128834_total_runtime;
    int *futhark_mc_segmap_parloop_128834_runs;
    int64_t *futhark_mc_segmap_parloop_128834_iter;
    int64_t futhark_mc_segmap_parloop_128834_total_total_runtime;
    int futhark_mc_segmap_parloop_128834_total_runs;
    int64_t futhark_mc_segmap_parloop_128834_total_iter;
    int64_t *futhark_mc_segmap_task_128832_total_runtime;
    int *futhark_mc_segmap_task_128832_runs;
    int64_t *futhark_mc_segmap_task_128832_iter;
    int64_t futhark_mc_segmap_task_128832_total_time;
    int64_t futhark_mc_segmap_task_128832_total_iter;
    int64_t *futhark_mc_segmap_parloop_128845_total_runtime;
    int *futhark_mc_segmap_parloop_128845_runs;
    int64_t *futhark_mc_segmap_parloop_128845_iter;
    int64_t futhark_mc_segmap_parloop_128845_total_total_runtime;
    int futhark_mc_segmap_parloop_128845_total_runs;
    int64_t futhark_mc_segmap_parloop_128845_total_iter;
    int64_t *futhark_mc_segmap_task_128843_total_runtime;
    int *futhark_mc_segmap_task_128843_runs;
    int64_t *futhark_mc_segmap_task_128843_iter;
    int64_t futhark_mc_segmap_task_128843_total_time;
    int64_t futhark_mc_segmap_task_128843_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128857_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128857_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128857_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128857_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128857_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128857_total_iter;
    int64_t *futhark_mc_segred_task_128850_total_runtime;
    int *futhark_mc_segred_task_128850_runs;
    int64_t *futhark_mc_segred_task_128850_iter;
    int64_t futhark_mc_segred_task_128850_total_time;
    int64_t futhark_mc_segred_task_128850_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128863_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128863_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128863_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128863_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128863_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128863_total_iter;
    int64_t *futhark_mc_segred_task_128859_total_runtime;
    int *futhark_mc_segred_task_128859_runs;
    int64_t *futhark_mc_segred_task_128859_iter;
    int64_t futhark_mc_segred_task_128859_total_time;
    int64_t futhark_mc_segred_task_128859_total_iter;
    int64_t *futhark_mc_segmap_parloop_128848_total_runtime;
    int *futhark_mc_segmap_parloop_128848_runs;
    int64_t *futhark_mc_segmap_parloop_128848_iter;
    int64_t futhark_mc_segmap_parloop_128848_total_total_runtime;
    int futhark_mc_segmap_parloop_128848_total_runs;
    int64_t futhark_mc_segmap_parloop_128848_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128846_total_runtime;
    int *futhark_mc_segmap_nested_task_128846_runs;
    int64_t *futhark_mc_segmap_nested_task_128846_iter;
    int64_t *futhark_mc_segmap_parloop_128839_total_runtime;
    int *futhark_mc_segmap_parloop_128839_runs;
    int64_t *futhark_mc_segmap_parloop_128839_iter;
    int64_t futhark_mc_segmap_parloop_128839_total_total_runtime;
    int futhark_mc_segmap_parloop_128839_total_runs;
    int64_t futhark_mc_segmap_parloop_128839_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128837_total_runtime;
    int *futhark_mc_segmap_nested_task_128837_runs;
    int64_t *futhark_mc_segmap_nested_task_128837_iter;
    int64_t *futhark_mc_segmap_parloop_128867_total_runtime;
    int *futhark_mc_segmap_parloop_128867_runs;
    int64_t *futhark_mc_segmap_parloop_128867_iter;
    int64_t futhark_mc_segmap_parloop_128867_total_total_runtime;
    int futhark_mc_segmap_parloop_128867_total_runs;
    int64_t futhark_mc_segmap_parloop_128867_total_iter;
    int64_t *futhark_mc_segmap_task_128865_total_runtime;
    int *futhark_mc_segmap_task_128865_runs;
    int64_t *futhark_mc_segmap_task_128865_iter;
    int64_t futhark_mc_segmap_task_128865_total_time;
    int64_t futhark_mc_segmap_task_128865_total_iter;
    int64_t *futhark_mc_segmap_parloop_128877_total_runtime;
    int *futhark_mc_segmap_parloop_128877_runs;
    int64_t *futhark_mc_segmap_parloop_128877_iter;
    int64_t futhark_mc_segmap_parloop_128877_total_total_runtime;
    int futhark_mc_segmap_parloop_128877_total_runs;
    int64_t futhark_mc_segmap_parloop_128877_total_iter;
    int64_t *futhark_mc_segmap_task_128875_total_runtime;
    int *futhark_mc_segmap_task_128875_runs;
    int64_t *futhark_mc_segmap_task_128875_iter;
    int64_t futhark_mc_segmap_task_128875_total_time;
    int64_t futhark_mc_segmap_task_128875_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128887_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128887_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128887_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128887_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128887_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128887_total_iter;
    int64_t *futhark_mc_segred_task_128884_total_runtime;
    int *futhark_mc_segred_task_128884_runs;
    int64_t *futhark_mc_segred_task_128884_iter;
    int64_t futhark_mc_segred_task_128884_total_time;
    int64_t futhark_mc_segred_task_128884_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128892_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128892_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128892_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128892_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128892_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128892_total_iter;
    int64_t *futhark_mc_segred_task_128889_total_runtime;
    int *futhark_mc_segred_task_128889_runs;
    int64_t *futhark_mc_segred_task_128889_iter;
    int64_t futhark_mc_segred_task_128889_total_time;
    int64_t futhark_mc_segred_task_128889_total_iter;
    int64_t *futhark_mc_segmap_parloop_128881_total_runtime;
    int *futhark_mc_segmap_parloop_128881_runs;
    int64_t *futhark_mc_segmap_parloop_128881_iter;
    int64_t futhark_mc_segmap_parloop_128881_total_total_runtime;
    int futhark_mc_segmap_parloop_128881_total_runs;
    int64_t futhark_mc_segmap_parloop_128881_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128879_total_runtime;
    int *futhark_mc_segmap_nested_task_128879_runs;
    int64_t *futhark_mc_segmap_nested_task_128879_iter;
    int64_t *futhark_mc_segmap_parloop_128872_total_runtime;
    int *futhark_mc_segmap_parloop_128872_runs;
    int64_t *futhark_mc_segmap_parloop_128872_iter;
    int64_t futhark_mc_segmap_parloop_128872_total_total_runtime;
    int futhark_mc_segmap_parloop_128872_total_runs;
    int64_t futhark_mc_segmap_parloop_128872_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128870_total_runtime;
    int *futhark_mc_segmap_nested_task_128870_runs;
    int64_t *futhark_mc_segmap_nested_task_128870_iter;
    int64_t *futhark_mc_segmap_parloop_128896_total_runtime;
    int *futhark_mc_segmap_parloop_128896_runs;
    int64_t *futhark_mc_segmap_parloop_128896_iter;
    int64_t futhark_mc_segmap_parloop_128896_total_total_runtime;
    int futhark_mc_segmap_parloop_128896_total_runs;
    int64_t futhark_mc_segmap_parloop_128896_total_iter;
    int64_t *futhark_mc_segmap_task_128894_total_runtime;
    int *futhark_mc_segmap_task_128894_runs;
    int64_t *futhark_mc_segmap_task_128894_iter;
    int64_t futhark_mc_segmap_task_128894_total_time;
    int64_t futhark_mc_segmap_task_128894_total_iter;
    int64_t *futhark_mc_segmap_parloop_128909_total_runtime;
    int *futhark_mc_segmap_parloop_128909_runs;
    int64_t *futhark_mc_segmap_parloop_128909_iter;
    int64_t futhark_mc_segmap_parloop_128909_total_total_runtime;
    int futhark_mc_segmap_parloop_128909_total_runs;
    int64_t futhark_mc_segmap_parloop_128909_total_iter;
    int64_t *futhark_mc_segmap_task_128907_total_runtime;
    int *futhark_mc_segmap_task_128907_runs;
    int64_t *futhark_mc_segmap_task_128907_iter;
    int64_t futhark_mc_segmap_task_128907_total_time;
    int64_t futhark_mc_segmap_task_128907_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128923_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128923_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128923_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128923_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128923_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128923_total_iter;
    int64_t *futhark_mc_segred_task_128918_total_runtime;
    int *futhark_mc_segred_task_128918_runs;
    int64_t *futhark_mc_segred_task_128918_iter;
    int64_t futhark_mc_segred_task_128918_total_time;
    int64_t futhark_mc_segred_task_128918_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128929_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128929_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128929_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128929_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128929_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128929_total_iter;
    int64_t *futhark_mc_segred_task_128925_total_runtime;
    int *futhark_mc_segred_task_128925_runs;
    int64_t *futhark_mc_segred_task_128925_iter;
    int64_t futhark_mc_segred_task_128925_total_time;
    int64_t futhark_mc_segred_task_128925_total_iter;
    int64_t *futhark_mc_segmap_parloop_128914_total_runtime;
    int *futhark_mc_segmap_parloop_128914_runs;
    int64_t *futhark_mc_segmap_parloop_128914_iter;
    int64_t futhark_mc_segmap_parloop_128914_total_total_runtime;
    int futhark_mc_segmap_parloop_128914_total_runs;
    int64_t futhark_mc_segmap_parloop_128914_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128912_total_runtime;
    int *futhark_mc_segmap_nested_task_128912_runs;
    int64_t *futhark_mc_segmap_nested_task_128912_iter;
    int64_t *futhark_mc_segmap_parloop_128903_total_runtime;
    int *futhark_mc_segmap_parloop_128903_runs;
    int64_t *futhark_mc_segmap_parloop_128903_iter;
    int64_t futhark_mc_segmap_parloop_128903_total_total_runtime;
    int futhark_mc_segmap_parloop_128903_total_runs;
    int64_t futhark_mc_segmap_parloop_128903_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128901_total_runtime;
    int *futhark_mc_segmap_nested_task_128901_runs;
    int64_t *futhark_mc_segmap_nested_task_128901_iter;
    int64_t *futhark_mc_segmap_parloop_128933_total_runtime;
    int *futhark_mc_segmap_parloop_128933_runs;
    int64_t *futhark_mc_segmap_parloop_128933_iter;
    int64_t futhark_mc_segmap_parloop_128933_total_total_runtime;
    int futhark_mc_segmap_parloop_128933_total_runs;
    int64_t futhark_mc_segmap_parloop_128933_total_iter;
    int64_t *futhark_mc_segmap_task_128931_total_runtime;
    int *futhark_mc_segmap_task_128931_runs;
    int64_t *futhark_mc_segmap_task_128931_iter;
    int64_t futhark_mc_segmap_task_128931_total_time;
    int64_t futhark_mc_segmap_task_128931_total_iter;
    int64_t *futhark_mc_segmap_parloop_128948_total_runtime;
    int *futhark_mc_segmap_parloop_128948_runs;
    int64_t *futhark_mc_segmap_parloop_128948_iter;
    int64_t futhark_mc_segmap_parloop_128948_total_total_runtime;
    int futhark_mc_segmap_parloop_128948_total_runs;
    int64_t futhark_mc_segmap_parloop_128948_total_iter;
    int64_t *futhark_mc_segmap_task_128946_total_runtime;
    int *futhark_mc_segmap_task_128946_runs;
    int64_t *futhark_mc_segmap_task_128946_iter;
    int64_t futhark_mc_segmap_task_128946_total_time;
    int64_t futhark_mc_segmap_task_128946_total_iter;
    int64_t *futhark_mc_segmap_parloop_128963_total_runtime;
    int *futhark_mc_segmap_parloop_128963_runs;
    int64_t *futhark_mc_segmap_parloop_128963_iter;
    int64_t futhark_mc_segmap_parloop_128963_total_total_runtime;
    int futhark_mc_segmap_parloop_128963_total_runs;
    int64_t futhark_mc_segmap_parloop_128963_total_iter;
    int64_t *futhark_mc_segmap_task_128961_total_runtime;
    int *futhark_mc_segmap_task_128961_runs;
    int64_t *futhark_mc_segmap_task_128961_iter;
    int64_t futhark_mc_segmap_task_128961_total_time;
    int64_t futhark_mc_segmap_task_128961_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128972_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128972_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128972_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128972_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128972_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128972_total_iter;
    int64_t *futhark_mc_segred_task_128965_total_runtime;
    int *futhark_mc_segred_task_128965_runs;
    int64_t *futhark_mc_segred_task_128965_iter;
    int64_t futhark_mc_segred_task_128965_total_time;
    int64_t futhark_mc_segred_task_128965_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_128978_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_128978_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_128978_iter;
    int64_t futhark_mc_segred_stage_1_parloop_128978_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_128978_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_128978_total_iter;
    int64_t *futhark_mc_segred_task_128974_total_runtime;
    int *futhark_mc_segred_task_128974_runs;
    int64_t *futhark_mc_segred_task_128974_iter;
    int64_t futhark_mc_segred_task_128974_total_time;
    int64_t futhark_mc_segred_task_128974_total_iter;
    int64_t *futhark_mc_segmap_parloop_128955_total_runtime;
    int *futhark_mc_segmap_parloop_128955_runs;
    int64_t *futhark_mc_segmap_parloop_128955_iter;
    int64_t futhark_mc_segmap_parloop_128955_total_total_runtime;
    int futhark_mc_segmap_parloop_128955_total_runs;
    int64_t futhark_mc_segmap_parloop_128955_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128953_total_runtime;
    int *futhark_mc_segmap_nested_task_128953_runs;
    int64_t *futhark_mc_segmap_nested_task_128953_iter;
    int64_t *futhark_mc_segmap_parloop_128942_total_runtime;
    int *futhark_mc_segmap_parloop_128942_runs;
    int64_t *futhark_mc_segmap_parloop_128942_iter;
    int64_t futhark_mc_segmap_parloop_128942_total_total_runtime;
    int futhark_mc_segmap_parloop_128942_total_runs;
    int64_t futhark_mc_segmap_parloop_128942_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128940_total_runtime;
    int *futhark_mc_segmap_nested_task_128940_runs;
    int64_t *futhark_mc_segmap_nested_task_128940_iter;
    int64_t *futhark_mc_segmap_parloop_128982_total_runtime;
    int *futhark_mc_segmap_parloop_128982_runs;
    int64_t *futhark_mc_segmap_parloop_128982_iter;
    int64_t futhark_mc_segmap_parloop_128982_total_total_runtime;
    int futhark_mc_segmap_parloop_128982_total_runs;
    int64_t futhark_mc_segmap_parloop_128982_total_iter;
    int64_t *futhark_mc_segmap_task_128980_total_runtime;
    int *futhark_mc_segmap_task_128980_runs;
    int64_t *futhark_mc_segmap_task_128980_iter;
    int64_t futhark_mc_segmap_task_128980_total_time;
    int64_t futhark_mc_segmap_task_128980_total_iter;
    int64_t *futhark_mc_segmap_parloop_128991_total_runtime;
    int *futhark_mc_segmap_parloop_128991_runs;
    int64_t *futhark_mc_segmap_parloop_128991_iter;
    int64_t futhark_mc_segmap_parloop_128991_total_total_runtime;
    int futhark_mc_segmap_parloop_128991_total_runs;
    int64_t futhark_mc_segmap_parloop_128991_total_iter;
    int64_t *futhark_mc_segmap_task_128989_total_runtime;
    int *futhark_mc_segmap_task_128989_runs;
    int64_t *futhark_mc_segmap_task_128989_iter;
    int64_t futhark_mc_segmap_task_128989_total_time;
    int64_t futhark_mc_segmap_task_128989_total_iter;
    int64_t *futhark_mc_segmap_parloop_128986_total_runtime;
    int *futhark_mc_segmap_parloop_128986_runs;
    int64_t *futhark_mc_segmap_parloop_128986_iter;
    int64_t futhark_mc_segmap_parloop_128986_total_total_runtime;
    int futhark_mc_segmap_parloop_128986_total_runs;
    int64_t futhark_mc_segmap_parloop_128986_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128984_total_runtime;
    int *futhark_mc_segmap_nested_task_128984_runs;
    int64_t *futhark_mc_segmap_nested_task_128984_iter;
    int64_t *futhark_mc_segmap_parloop_128995_total_runtime;
    int *futhark_mc_segmap_parloop_128995_runs;
    int64_t *futhark_mc_segmap_parloop_128995_iter;
    int64_t futhark_mc_segmap_parloop_128995_total_total_runtime;
    int futhark_mc_segmap_parloop_128995_total_runs;
    int64_t futhark_mc_segmap_parloop_128995_total_iter;
    int64_t *futhark_mc_segmap_task_128993_total_runtime;
    int *futhark_mc_segmap_task_128993_runs;
    int64_t *futhark_mc_segmap_task_128993_iter;
    int64_t futhark_mc_segmap_task_128993_total_time;
    int64_t futhark_mc_segmap_task_128993_total_iter;
    int64_t *futhark_mc_segmap_parloop_129004_total_runtime;
    int *futhark_mc_segmap_parloop_129004_runs;
    int64_t *futhark_mc_segmap_parloop_129004_iter;
    int64_t futhark_mc_segmap_parloop_129004_total_total_runtime;
    int futhark_mc_segmap_parloop_129004_total_runs;
    int64_t futhark_mc_segmap_parloop_129004_total_iter;
    int64_t *futhark_mc_segmap_task_129002_total_runtime;
    int *futhark_mc_segmap_task_129002_runs;
    int64_t *futhark_mc_segmap_task_129002_iter;
    int64_t futhark_mc_segmap_task_129002_total_time;
    int64_t futhark_mc_segmap_task_129002_total_iter;
    int64_t *futhark_mc_segmap_parloop_128999_total_runtime;
    int *futhark_mc_segmap_parloop_128999_runs;
    int64_t *futhark_mc_segmap_parloop_128999_iter;
    int64_t futhark_mc_segmap_parloop_128999_total_total_runtime;
    int futhark_mc_segmap_parloop_128999_total_runs;
    int64_t futhark_mc_segmap_parloop_128999_total_iter;
    int64_t *futhark_mc_segmap_nested_task_128997_total_runtime;
    int *futhark_mc_segmap_nested_task_128997_runs;
    int64_t *futhark_mc_segmap_nested_task_128997_iter;
    int64_t *futhark_mc_segmap_parloop_129008_total_runtime;
    int *futhark_mc_segmap_parloop_129008_runs;
    int64_t *futhark_mc_segmap_parloop_129008_iter;
    int64_t futhark_mc_segmap_parloop_129008_total_total_runtime;
    int futhark_mc_segmap_parloop_129008_total_runs;
    int64_t futhark_mc_segmap_parloop_129008_total_iter;
    int64_t *futhark_mc_segmap_task_129006_total_runtime;
    int *futhark_mc_segmap_task_129006_runs;
    int64_t *futhark_mc_segmap_task_129006_iter;
    int64_t futhark_mc_segmap_task_129006_total_time;
    int64_t futhark_mc_segmap_task_129006_total_iter;
    int64_t *futhark_mc_segmap_parloop_129017_total_runtime;
    int *futhark_mc_segmap_parloop_129017_runs;
    int64_t *futhark_mc_segmap_parloop_129017_iter;
    int64_t futhark_mc_segmap_parloop_129017_total_total_runtime;
    int futhark_mc_segmap_parloop_129017_total_runs;
    int64_t futhark_mc_segmap_parloop_129017_total_iter;
    int64_t *futhark_mc_segmap_task_129015_total_runtime;
    int *futhark_mc_segmap_task_129015_runs;
    int64_t *futhark_mc_segmap_task_129015_iter;
    int64_t futhark_mc_segmap_task_129015_total_time;
    int64_t futhark_mc_segmap_task_129015_total_iter;
    int64_t *futhark_mc_segmap_parloop_129012_total_runtime;
    int *futhark_mc_segmap_parloop_129012_runs;
    int64_t *futhark_mc_segmap_parloop_129012_iter;
    int64_t futhark_mc_segmap_parloop_129012_total_total_runtime;
    int futhark_mc_segmap_parloop_129012_total_runs;
    int64_t futhark_mc_segmap_parloop_129012_total_iter;
    int64_t *futhark_mc_segmap_nested_task_129010_total_runtime;
    int *futhark_mc_segmap_nested_task_129010_runs;
    int64_t *futhark_mc_segmap_nested_task_129010_iter;
    int64_t *futhark_mc_segmap_parloop_129021_total_runtime;
    int *futhark_mc_segmap_parloop_129021_runs;
    int64_t *futhark_mc_segmap_parloop_129021_iter;
    int64_t futhark_mc_segmap_parloop_129021_total_total_runtime;
    int futhark_mc_segmap_parloop_129021_total_runs;
    int64_t futhark_mc_segmap_parloop_129021_total_iter;
    int64_t *futhark_mc_segmap_task_129019_total_runtime;
    int *futhark_mc_segmap_task_129019_runs;
    int64_t *futhark_mc_segmap_task_129019_iter;
    int64_t futhark_mc_segmap_task_129019_total_time;
    int64_t futhark_mc_segmap_task_129019_total_iter;
    int64_t *futhark_mc_scan_stage_1_parloop_129046_total_runtime;
    int *futhark_mc_scan_stage_1_parloop_129046_runs;
    int64_t *futhark_mc_scan_stage_1_parloop_129046_iter;
    int64_t futhark_mc_scan_stage_1_parloop_129046_total_total_runtime;
    int futhark_mc_scan_stage_1_parloop_129046_total_runs;
    int64_t futhark_mc_scan_stage_1_parloop_129046_total_iter;
    int64_t *futhark_mc_scan_stage_3_parloop_129048_total_runtime;
    int *futhark_mc_scan_stage_3_parloop_129048_runs;
    int64_t *futhark_mc_scan_stage_3_parloop_129048_iter;
    int64_t futhark_mc_scan_stage_3_parloop_129048_total_total_runtime;
    int futhark_mc_scan_stage_3_parloop_129048_total_runs;
    int64_t futhark_mc_scan_stage_3_parloop_129048_total_iter;
    int64_t *futhark_mc_segscan_task_129040_total_runtime;
    int *futhark_mc_segscan_task_129040_runs;
    int64_t *futhark_mc_segscan_task_129040_iter;
    int64_t futhark_mc_segscan_task_129040_total_time;
    int64_t futhark_mc_segscan_task_129040_total_iter;
    int64_t *futhark_mc_segmap_parloop_129052_total_runtime;
    int *futhark_mc_segmap_parloop_129052_runs;
    int64_t *futhark_mc_segmap_parloop_129052_iter;
    int64_t futhark_mc_segmap_parloop_129052_total_total_runtime;
    int futhark_mc_segmap_parloop_129052_total_runs;
    int64_t futhark_mc_segmap_parloop_129052_total_iter;
    int64_t *futhark_mc_segmap_task_129050_total_runtime;
    int *futhark_mc_segmap_task_129050_runs;
    int64_t *futhark_mc_segmap_task_129050_iter;
    int64_t futhark_mc_segmap_task_129050_total_time;
    int64_t futhark_mc_segmap_task_129050_total_iter;
    int64_t *futhark_mc_segmap_parloop_129031_total_runtime;
    int *futhark_mc_segmap_parloop_129031_runs;
    int64_t *futhark_mc_segmap_parloop_129031_iter;
    int64_t futhark_mc_segmap_parloop_129031_total_total_runtime;
    int futhark_mc_segmap_parloop_129031_total_runs;
    int64_t futhark_mc_segmap_parloop_129031_total_iter;
    int64_t *futhark_mc_segmap_nested_task_129029_total_runtime;
    int *futhark_mc_segmap_nested_task_129029_runs;
    int64_t *futhark_mc_segmap_nested_task_129029_iter;
    int64_t *futhark_mc_segmap_parloop_129056_total_runtime;
    int *futhark_mc_segmap_parloop_129056_runs;
    int64_t *futhark_mc_segmap_parloop_129056_iter;
    int64_t futhark_mc_segmap_parloop_129056_total_total_runtime;
    int futhark_mc_segmap_parloop_129056_total_runs;
    int64_t futhark_mc_segmap_parloop_129056_total_iter;
    int64_t *futhark_mc_segmap_task_129054_total_runtime;
    int *futhark_mc_segmap_task_129054_runs;
    int64_t *futhark_mc_segmap_task_129054_iter;
    int64_t futhark_mc_segmap_task_129054_total_time;
    int64_t futhark_mc_segmap_task_129054_total_iter;
    int64_t *futhark_mc_segred_stage_1_parloop_129064_total_runtime;
    int *futhark_mc_segred_stage_1_parloop_129064_runs;
    int64_t *futhark_mc_segred_stage_1_parloop_129064_iter;
    int64_t futhark_mc_segred_stage_1_parloop_129064_total_total_runtime;
    int futhark_mc_segred_stage_1_parloop_129064_total_runs;
    int64_t futhark_mc_segred_stage_1_parloop_129064_total_iter;
    int64_t *futhark_mc_segred_task_129061_total_runtime;
    int *futhark_mc_segred_task_129061_runs;
    int64_t *futhark_mc_segred_task_129061_iter;
    int64_t futhark_mc_segred_task_129061_total_time;
    int64_t futhark_mc_segred_task_129061_total_iter;
    int64_t *futhark_mc_segmap_parloop_129059_total_runtime;
    int *futhark_mc_segmap_parloop_129059_runs;
    int64_t *futhark_mc_segmap_parloop_129059_iter;
    int64_t futhark_mc_segmap_parloop_129059_total_total_runtime;
    int futhark_mc_segmap_parloop_129059_total_runs;
    int64_t futhark_mc_segmap_parloop_129059_total_iter;
    int64_t *futhark_mc_segmap_nested_task_129057_total_runtime;
    int *futhark_mc_segmap_nested_task_129057_runs;
    int64_t *futhark_mc_segmap_nested_task_129057_iter;
    int64_t *futhark_mc_segmap_parloop_129068_total_runtime;
    int *futhark_mc_segmap_parloop_129068_runs;
    int64_t *futhark_mc_segmap_parloop_129068_iter;
    int64_t futhark_mc_segmap_parloop_129068_total_total_runtime;
    int futhark_mc_segmap_parloop_129068_total_runs;
    int64_t futhark_mc_segmap_parloop_129068_total_iter;
    int64_t *futhark_mc_segmap_task_129066_total_runtime;
    int *futhark_mc_segmap_task_129066_runs;
    int64_t *futhark_mc_segmap_task_129066_iter;
    int64_t futhark_mc_segmap_task_129066_total_time;
    int64_t futhark_mc_segmap_task_129066_total_iter;
    int64_t *futhark_mc_segmap_parloop_129077_total_runtime;
    int *futhark_mc_segmap_parloop_129077_runs;
    int64_t *futhark_mc_segmap_parloop_129077_iter;
    int64_t futhark_mc_segmap_parloop_129077_total_total_runtime;
    int futhark_mc_segmap_parloop_129077_total_runs;
    int64_t futhark_mc_segmap_parloop_129077_total_iter;
    int64_t *futhark_mc_segmap_task_129075_total_runtime;
    int *futhark_mc_segmap_task_129075_runs;
    int64_t *futhark_mc_segmap_task_129075_iter;
    int64_t futhark_mc_segmap_task_129075_total_time;
    int64_t futhark_mc_segmap_task_129075_total_iter;
    int64_t *futhark_mc_segmap_parloop_129072_total_runtime;
    int *futhark_mc_segmap_parloop_129072_runs;
    int64_t *futhark_mc_segmap_parloop_129072_iter;
    int64_t futhark_mc_segmap_parloop_129072_total_total_runtime;
    int futhark_mc_segmap_parloop_129072_total_runs;
    int64_t futhark_mc_segmap_parloop_129072_total_iter;
    int64_t *futhark_mc_segmap_nested_task_129070_total_runtime;
    int *futhark_mc_segmap_nested_task_129070_runs;
    int64_t *futhark_mc_segmap_nested_task_129070_iter;
    int64_t *futhark_mc_segmap_parloop_129081_total_runtime;
    int *futhark_mc_segmap_parloop_129081_runs;
    int64_t *futhark_mc_segmap_parloop_129081_iter;
    int64_t futhark_mc_segmap_parloop_129081_total_total_runtime;
    int futhark_mc_segmap_parloop_129081_total_runs;
    int64_t futhark_mc_segmap_parloop_129081_total_iter;
    int64_t *futhark_mc_segmap_task_129079_total_runtime;
    int *futhark_mc_segmap_task_129079_runs;
    int64_t *futhark_mc_segmap_task_129079_iter;
    int64_t futhark_mc_segmap_task_129079_total_time;
    int64_t futhark_mc_segmap_task_129079_total_iter;
    int64_t *futhark_mc_segmap_parloop_129090_total_runtime;
    int *futhark_mc_segmap_parloop_129090_runs;
    int64_t *futhark_mc_segmap_parloop_129090_iter;
    int64_t futhark_mc_segmap_parloop_129090_total_total_runtime;
    int futhark_mc_segmap_parloop_129090_total_runs;
    int64_t futhark_mc_segmap_parloop_129090_total_iter;
    int64_t *futhark_mc_segmap_task_129088_total_runtime;
    int *futhark_mc_segmap_task_129088_runs;
    int64_t *futhark_mc_segmap_task_129088_iter;
    int64_t futhark_mc_segmap_task_129088_total_time;
    int64_t futhark_mc_segmap_task_129088_total_iter;
    int64_t *futhark_mc_segmap_parloop_129085_total_runtime;
    int *futhark_mc_segmap_parloop_129085_runs;
    int64_t *futhark_mc_segmap_parloop_129085_iter;
    int64_t futhark_mc_segmap_parloop_129085_total_total_runtime;
    int futhark_mc_segmap_parloop_129085_total_runs;
    int64_t futhark_mc_segmap_parloop_129085_total_iter;
    int64_t *futhark_mc_segmap_nested_task_129083_total_runtime;
    int *futhark_mc_segmap_nested_task_129083_runs;
    int64_t *futhark_mc_segmap_nested_task_129083_iter;
    int64_t tuning_timing;
    int64_t tuning_iter;
};
struct futhark_context *futhark_context_new(struct futhark_context_config *cfg)
{
    struct futhark_context *ctx =
                           (struct futhark_context *) malloc(sizeof(struct futhark_context));
    
    if (ctx == NULL)
        return NULL;
    fast_srand(time(0));
    ctx->detail_memory = cfg->debugging;
    ctx->debugging = cfg->debugging;
    ctx->profiling = cfg->profiling;
    ctx->profiling_paused = 0;
    ctx->logging = 0;
    ctx->error = NULL;
    ctx->log = stderr;
    create_lock(&ctx->lock);
    
    int tune_kappa = 0;
    double kappa = 5.1f * 1000;
    
    if (tune_kappa) {
        if (determine_kappa(&kappa) != 0)
            return NULL;
    }
    if (scheduler_init(&ctx->scheduler, cfg->num_threads >
                       0 ? cfg->num_threads : num_processors(), kappa) != 0)
        return NULL;
    ctx->peak_mem_usage_default = 0;
    ctx->cur_mem_usage_default = 0;
    ctx->futhark_mc_segmap_parloop_128329_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128329_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128329_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128329_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128329_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128329_total_iter = 0;
    ctx->futhark_mc_segmap_task_128327_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128327_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128327_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128327_total_time = 0;
    ctx->futhark_mc_segmap_task_128327_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128341_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128341_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128341_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128343_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128343_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128343_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter = 0;
    ctx->futhark_mc_segscan_task_128338_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128338_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128338_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128338_total_time = 0;
    ctx->futhark_mc_segscan_task_128338_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128347_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128347_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128347_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128347_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128347_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128347_total_iter = 0;
    ctx->futhark_mc_segmap_task_128345_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128345_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128345_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128345_total_time = 0;
    ctx->futhark_mc_segmap_task_128345_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128334_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128334_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128334_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128334_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128334_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128334_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128332_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128332_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128332_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128351_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128351_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128351_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128351_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128351_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128351_total_iter = 0;
    ctx->futhark_mc_segmap_task_128349_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128349_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128349_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128349_total_time = 0;
    ctx->futhark_mc_segmap_task_128349_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128360_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128360_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128360_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128360_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128360_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128360_total_iter = 0;
    ctx->futhark_mc_segmap_task_128358_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128358_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128358_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128358_total_time = 0;
    ctx->futhark_mc_segmap_task_128358_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128355_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128355_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128355_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128355_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128355_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128355_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128353_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128353_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128353_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128364_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128364_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128364_total_iter = 0;
    ctx->futhark_mc_segmap_task_128362_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128362_total_time = 0;
    ctx->futhark_mc_segmap_task_128362_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128373_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128373_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128373_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128373_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128373_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128373_total_iter = 0;
    ctx->futhark_mc_segmap_task_128371_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128371_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128371_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128371_total_time = 0;
    ctx->futhark_mc_segmap_task_128371_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128368_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128368_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128366_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128366_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128366_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128377_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128377_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128377_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128377_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128377_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128377_total_iter = 0;
    ctx->futhark_mc_segmap_task_128375_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128375_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128375_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128375_total_time = 0;
    ctx->futhark_mc_segmap_task_128375_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128386_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128386_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128386_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128386_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128386_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128386_total_iter = 0;
    ctx->futhark_mc_segmap_task_128384_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128384_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128384_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128384_total_time = 0;
    ctx->futhark_mc_segmap_task_128384_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128394_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128394_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128394_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter = 0;
    ctx->futhark_mc_segred_task_128391_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128391_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128391_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128391_total_time = 0;
    ctx->futhark_mc_segred_task_128391_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128389_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128389_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128389_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128389_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128389_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128389_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128387_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128387_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128387_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128381_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128381_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128381_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128381_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128381_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128381_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128379_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128379_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128379_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128398_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128398_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128398_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128398_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128398_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128398_total_iter = 0;
    ctx->futhark_mc_segmap_task_128396_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128396_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128396_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128396_total_time = 0;
    ctx->futhark_mc_segmap_task_128396_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128411_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128411_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128411_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128411_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128411_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128411_total_iter = 0;
    ctx->futhark_mc_segmap_task_128409_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128409_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128409_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128409_total_time = 0;
    ctx->futhark_mc_segmap_task_128409_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128415_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128415_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128415_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128415_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128415_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128415_total_iter = 0;
    ctx->futhark_mc_segmap_task_128413_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128413_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128413_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128413_total_time = 0;
    ctx->futhark_mc_segmap_task_128413_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128404_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128404_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128404_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128404_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128404_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128404_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128402_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128402_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128402_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128419_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128419_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128419_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128419_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128419_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128419_total_iter = 0;
    ctx->futhark_mc_segmap_task_128417_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128417_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128417_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128417_total_time = 0;
    ctx->futhark_mc_segmap_task_128417_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128432_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128432_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128432_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128432_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128432_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128432_total_iter = 0;
    ctx->futhark_mc_segmap_task_128430_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128430_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128430_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128430_total_time = 0;
    ctx->futhark_mc_segmap_task_128430_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128436_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128436_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128436_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128436_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128436_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128436_total_iter = 0;
    ctx->futhark_mc_segmap_task_128434_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128434_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128434_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128434_total_time = 0;
    ctx->futhark_mc_segmap_task_128434_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128425_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128425_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128425_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128425_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128425_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128425_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128423_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128423_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128423_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128440_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128440_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128440_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128440_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128440_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128440_total_iter = 0;
    ctx->futhark_mc_segmap_task_128438_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128438_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128438_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128438_total_time = 0;
    ctx->futhark_mc_segmap_task_128438_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128449_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128449_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128449_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128449_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128449_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128449_total_iter = 0;
    ctx->futhark_mc_segmap_task_128447_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128447_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128447_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128447_total_time = 0;
    ctx->futhark_mc_segmap_task_128447_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128444_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128444_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128444_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128444_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128444_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128444_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128442_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128442_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128442_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128453_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128453_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128453_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128453_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128453_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128453_total_iter = 0;
    ctx->futhark_mc_segmap_task_128451_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128451_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128451_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128451_total_time = 0;
    ctx->futhark_mc_segmap_task_128451_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128462_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128462_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128462_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128462_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128462_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128462_total_iter = 0;
    ctx->futhark_mc_segmap_task_128460_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128460_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128460_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128460_total_time = 0;
    ctx->futhark_mc_segmap_task_128460_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128470_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128470_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128470_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter = 0;
    ctx->futhark_mc_segred_task_128467_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128467_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128467_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128467_total_time = 0;
    ctx->futhark_mc_segred_task_128467_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128465_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128465_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128465_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128465_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128465_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128465_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128463_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128463_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128463_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128457_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128457_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128457_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128457_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128457_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128457_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128455_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128455_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128455_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128474_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128474_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128474_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128474_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128474_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128474_total_iter = 0;
    ctx->futhark_mc_segmap_task_128472_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128472_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128472_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128472_total_time = 0;
    ctx->futhark_mc_segmap_task_128472_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128483_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128483_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128483_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128483_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128483_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128483_total_iter = 0;
    ctx->futhark_mc_segmap_task_128481_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128481_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128481_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128481_total_time = 0;
    ctx->futhark_mc_segmap_task_128481_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128478_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128478_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128476_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128476_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128476_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128487_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128487_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128487_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128487_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128487_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128487_total_iter = 0;
    ctx->futhark_mc_segmap_task_128485_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128485_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128485_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128485_total_time = 0;
    ctx->futhark_mc_segmap_task_128485_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128501_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128501_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128501_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter = 0;
    ctx->futhark_mc_segred_task_128498_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128498_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128498_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128498_total_time = 0;
    ctx->futhark_mc_segred_task_128498_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128506_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128506_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128506_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128508_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128508_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128508_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter = 0;
    ctx->futhark_mc_segscan_task_128503_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128503_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128503_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128503_total_time = 0;
    ctx->futhark_mc_segscan_task_128503_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128513_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128513_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128513_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter = 0;
    ctx->futhark_mc_segred_task_128510_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128510_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128510_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128510_total_time = 0;
    ctx->futhark_mc_segred_task_128510_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128518_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128518_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128518_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128520_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128520_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128520_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter = 0;
    ctx->futhark_mc_segscan_task_128515_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128515_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128515_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128515_total_time = 0;
    ctx->futhark_mc_segscan_task_128515_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128525_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128525_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128525_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter = 0;
    ctx->futhark_mc_segred_task_128522_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128522_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128522_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128522_total_time = 0;
    ctx->futhark_mc_segred_task_128522_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128530_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128530_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128530_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128532_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128532_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128532_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter = 0;
    ctx->futhark_mc_segscan_task_128527_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128527_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128527_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_128527_total_time = 0;
    ctx->futhark_mc_segscan_task_128527_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128493_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128493_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128493_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128493_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128493_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128493_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128491_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128491_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128491_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128536_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128536_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128536_total_iter = 0;
    ctx->futhark_mc_segmap_task_128534_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128534_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128534_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128534_total_time = 0;
    ctx->futhark_mc_segmap_task_128534_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128545_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128545_total_iter = 0;
    ctx->futhark_mc_segmap_task_128543_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128543_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128543_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128543_total_time = 0;
    ctx->futhark_mc_segmap_task_128543_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128553_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128553_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128553_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter = 0;
    ctx->futhark_mc_segred_task_128550_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128550_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128550_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128550_total_time = 0;
    ctx->futhark_mc_segred_task_128550_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter = 0;
    ctx->futhark_mc_segred_task_128555_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128555_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128555_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128555_total_time = 0;
    ctx->futhark_mc_segred_task_128555_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128548_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128548_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128548_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128548_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128548_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128548_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128546_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128546_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128546_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128540_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128540_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128540_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128540_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128540_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128540_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128538_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128538_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128538_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128562_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128562_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128562_total_iter = 0;
    ctx->futhark_mc_segmap_task_128560_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128560_total_time = 0;
    ctx->futhark_mc_segmap_task_128560_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128573_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128573_total_iter = 0;
    ctx->futhark_mc_segmap_task_128571_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128571_total_time = 0;
    ctx->futhark_mc_segmap_task_128571_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128583_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128583_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128583_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter = 0;
    ctx->futhark_mc_segred_task_128578_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128578_total_time = 0;
    ctx->futhark_mc_segred_task_128578_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128589_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128589_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128589_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter = 0;
    ctx->futhark_mc_segred_task_128585_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128585_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128585_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128585_total_time = 0;
    ctx->futhark_mc_segred_task_128585_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128576_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128576_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128574_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128574_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128574_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128567_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128567_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128567_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128565_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128565_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128565_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128593_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128593_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128593_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128593_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128593_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128593_total_iter = 0;
    ctx->futhark_mc_segmap_task_128591_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128591_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128591_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128591_total_time = 0;
    ctx->futhark_mc_segmap_task_128591_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128604_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128604_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128604_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128604_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128604_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128604_total_iter = 0;
    ctx->futhark_mc_segmap_task_128602_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128602_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128602_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128602_total_time = 0;
    ctx->futhark_mc_segmap_task_128602_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128616_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128616_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128616_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter = 0;
    ctx->futhark_mc_segred_task_128609_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128609_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128609_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128609_total_time = 0;
    ctx->futhark_mc_segred_task_128609_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128622_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128622_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128622_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter = 0;
    ctx->futhark_mc_segred_task_128618_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128618_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128618_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128618_total_time = 0;
    ctx->futhark_mc_segred_task_128618_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128607_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128607_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128607_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128607_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128607_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128607_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128605_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128605_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128605_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128598_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128598_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128598_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128598_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128598_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128598_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128596_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128596_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128596_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128626_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128626_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128626_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128626_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128626_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128626_total_iter = 0;
    ctx->futhark_mc_segmap_task_128624_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128624_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128624_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128624_total_time = 0;
    ctx->futhark_mc_segmap_task_128624_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128636_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128636_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128636_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128636_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128636_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128636_total_iter = 0;
    ctx->futhark_mc_segmap_task_128634_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128634_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128634_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128634_total_time = 0;
    ctx->futhark_mc_segmap_task_128634_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128646_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128646_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128646_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter = 0;
    ctx->futhark_mc_segred_task_128643_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128643_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128643_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128643_total_time = 0;
    ctx->futhark_mc_segred_task_128643_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter = 0;
    ctx->futhark_mc_segred_task_128648_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128648_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128648_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128648_total_time = 0;
    ctx->futhark_mc_segred_task_128648_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128640_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128640_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128640_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128640_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128640_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128640_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128638_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128638_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128638_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128631_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128631_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128631_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128629_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128629_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128629_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128655_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128655_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128655_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128655_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128655_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128655_total_iter = 0;
    ctx->futhark_mc_segmap_task_128653_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128653_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128653_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128653_total_time = 0;
    ctx->futhark_mc_segmap_task_128653_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128668_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128668_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128668_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128668_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128668_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128668_total_iter = 0;
    ctx->futhark_mc_segmap_task_128666_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128666_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128666_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128666_total_time = 0;
    ctx->futhark_mc_segmap_task_128666_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128682_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128682_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128682_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter = 0;
    ctx->futhark_mc_segred_task_128677_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128677_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128677_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128677_total_time = 0;
    ctx->futhark_mc_segred_task_128677_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128688_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128688_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128688_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter = 0;
    ctx->futhark_mc_segred_task_128684_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128684_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128684_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128684_total_time = 0;
    ctx->futhark_mc_segred_task_128684_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128673_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128673_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128673_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128673_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128673_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128673_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128671_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128671_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128671_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128662_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128662_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128662_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128662_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128662_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128662_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128660_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128660_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128660_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128692_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128692_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128692_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128692_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128692_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128692_total_iter = 0;
    ctx->futhark_mc_segmap_task_128690_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128690_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128690_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128690_total_time = 0;
    ctx->futhark_mc_segmap_task_128690_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128707_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128707_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128707_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128707_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128707_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128707_total_iter = 0;
    ctx->futhark_mc_segmap_task_128705_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128705_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128705_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128705_total_time = 0;
    ctx->futhark_mc_segmap_task_128705_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128722_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128722_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128722_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128722_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128722_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128722_total_iter = 0;
    ctx->futhark_mc_segmap_task_128720_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128720_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128720_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128720_total_time = 0;
    ctx->futhark_mc_segmap_task_128720_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128731_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128731_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128731_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter = 0;
    ctx->futhark_mc_segred_task_128724_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128724_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128724_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128724_total_time = 0;
    ctx->futhark_mc_segred_task_128724_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128737_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128737_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128737_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter = 0;
    ctx->futhark_mc_segred_task_128733_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128733_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128733_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128733_total_time = 0;
    ctx->futhark_mc_segred_task_128733_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128714_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128714_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128712_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128712_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128712_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128701_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128701_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128701_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128701_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128701_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128701_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128699_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128699_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128699_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128741_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128741_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128741_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128741_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128741_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128741_total_iter = 0;
    ctx->futhark_mc_segmap_task_128739_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128739_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128739_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128739_total_time = 0;
    ctx->futhark_mc_segmap_task_128739_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128750_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128750_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128750_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128750_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128750_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128750_total_iter = 0;
    ctx->futhark_mc_segmap_task_128748_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128748_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128748_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128748_total_time = 0;
    ctx->futhark_mc_segmap_task_128748_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128745_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128745_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128743_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128743_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128743_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128754_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128754_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128754_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128754_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128754_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128754_total_iter = 0;
    ctx->futhark_mc_segmap_task_128752_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128752_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128752_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128752_total_time = 0;
    ctx->futhark_mc_segmap_task_128752_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128769_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128769_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128769_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128769_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128769_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128769_total_iter = 0;
    ctx->futhark_mc_segmap_task_128767_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128767_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128767_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128767_total_time = 0;
    ctx->futhark_mc_segmap_task_128767_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128773_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128773_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128773_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128773_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128773_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128773_total_iter = 0;
    ctx->futhark_mc_segmap_task_128771_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128771_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128771_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128771_total_time = 0;
    ctx->futhark_mc_segmap_task_128771_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128761_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128761_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128761_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128761_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128761_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128761_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128759_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128759_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128759_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128777_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128777_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128777_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128777_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128777_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128777_total_iter = 0;
    ctx->futhark_mc_segmap_task_128775_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128775_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128775_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128775_total_time = 0;
    ctx->futhark_mc_segmap_task_128775_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128786_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128786_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128786_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128786_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128786_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128786_total_iter = 0;
    ctx->futhark_mc_segmap_task_128784_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128784_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128784_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128784_total_time = 0;
    ctx->futhark_mc_segmap_task_128784_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128794_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128794_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128794_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter = 0;
    ctx->futhark_mc_segred_task_128791_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128791_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128791_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128791_total_time = 0;
    ctx->futhark_mc_segred_task_128791_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128799_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128799_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128799_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter = 0;
    ctx->futhark_mc_segred_task_128796_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128796_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128796_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128796_total_time = 0;
    ctx->futhark_mc_segred_task_128796_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128789_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128789_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128789_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128789_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128789_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128789_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128787_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128787_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128787_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128781_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128781_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128781_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128781_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128781_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128781_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128779_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128779_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128779_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128803_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128803_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128803_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128803_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128803_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128803_total_iter = 0;
    ctx->futhark_mc_segmap_task_128801_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128801_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128801_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128801_total_time = 0;
    ctx->futhark_mc_segmap_task_128801_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128814_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128814_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128814_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128814_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128814_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128814_total_iter = 0;
    ctx->futhark_mc_segmap_task_128812_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128812_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128812_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128812_total_time = 0;
    ctx->futhark_mc_segmap_task_128812_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128824_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128824_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128824_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter = 0;
    ctx->futhark_mc_segred_task_128819_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128819_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128819_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128819_total_time = 0;
    ctx->futhark_mc_segred_task_128819_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128830_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128830_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128830_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter = 0;
    ctx->futhark_mc_segred_task_128826_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128826_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128826_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128826_total_time = 0;
    ctx->futhark_mc_segred_task_128826_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128817_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128817_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128817_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128817_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128817_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128817_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128815_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128815_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128815_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128808_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128808_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128808_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128808_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128808_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128808_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128806_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128806_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128806_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128834_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128834_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128834_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128834_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128834_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128834_total_iter = 0;
    ctx->futhark_mc_segmap_task_128832_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128832_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128832_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128832_total_time = 0;
    ctx->futhark_mc_segmap_task_128832_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128845_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128845_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128845_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128845_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128845_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128845_total_iter = 0;
    ctx->futhark_mc_segmap_task_128843_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128843_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128843_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128843_total_time = 0;
    ctx->futhark_mc_segmap_task_128843_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128857_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128857_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128857_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter = 0;
    ctx->futhark_mc_segred_task_128850_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128850_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128850_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128850_total_time = 0;
    ctx->futhark_mc_segred_task_128850_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128863_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128863_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128863_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter = 0;
    ctx->futhark_mc_segred_task_128859_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128859_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128859_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128859_total_time = 0;
    ctx->futhark_mc_segred_task_128859_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128848_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128848_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128848_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128848_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128848_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128848_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128846_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128846_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128846_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128839_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128839_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128839_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128839_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128839_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128839_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128837_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128837_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128837_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128867_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128867_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128867_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128867_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128867_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128867_total_iter = 0;
    ctx->futhark_mc_segmap_task_128865_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128865_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128865_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128865_total_time = 0;
    ctx->futhark_mc_segmap_task_128865_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128877_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128877_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128877_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128877_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128877_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128877_total_iter = 0;
    ctx->futhark_mc_segmap_task_128875_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128875_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128875_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128875_total_time = 0;
    ctx->futhark_mc_segmap_task_128875_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128887_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128887_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128887_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter = 0;
    ctx->futhark_mc_segred_task_128884_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128884_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128884_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128884_total_time = 0;
    ctx->futhark_mc_segred_task_128884_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128892_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128892_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128892_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter = 0;
    ctx->futhark_mc_segred_task_128889_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128889_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128889_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128889_total_time = 0;
    ctx->futhark_mc_segred_task_128889_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128881_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128881_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128881_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128881_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128881_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128881_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128879_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128879_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128879_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128872_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128872_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128872_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128872_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128872_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128872_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128870_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128870_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128870_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128896_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128896_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128896_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128896_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128896_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128896_total_iter = 0;
    ctx->futhark_mc_segmap_task_128894_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128894_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128894_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128894_total_time = 0;
    ctx->futhark_mc_segmap_task_128894_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128909_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128909_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128909_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128909_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128909_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128909_total_iter = 0;
    ctx->futhark_mc_segmap_task_128907_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128907_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128907_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128907_total_time = 0;
    ctx->futhark_mc_segmap_task_128907_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128923_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128923_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128923_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter = 0;
    ctx->futhark_mc_segred_task_128918_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128918_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128918_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128918_total_time = 0;
    ctx->futhark_mc_segred_task_128918_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128929_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128929_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128929_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter = 0;
    ctx->futhark_mc_segred_task_128925_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128925_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128925_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128925_total_time = 0;
    ctx->futhark_mc_segred_task_128925_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128914_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128914_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128914_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128914_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128914_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128914_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128912_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128912_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128912_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128903_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128903_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128903_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128903_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128903_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128903_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128901_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128901_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128901_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128933_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128933_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128933_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128933_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128933_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128933_total_iter = 0;
    ctx->futhark_mc_segmap_task_128931_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128931_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128931_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128931_total_time = 0;
    ctx->futhark_mc_segmap_task_128931_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128948_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128948_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128948_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128948_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128948_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128948_total_iter = 0;
    ctx->futhark_mc_segmap_task_128946_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128946_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128946_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128946_total_time = 0;
    ctx->futhark_mc_segmap_task_128946_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128963_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128963_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128963_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128963_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128963_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128963_total_iter = 0;
    ctx->futhark_mc_segmap_task_128961_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128961_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128961_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128961_total_time = 0;
    ctx->futhark_mc_segmap_task_128961_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128972_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128972_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128972_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter = 0;
    ctx->futhark_mc_segred_task_128965_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128965_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128965_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128965_total_time = 0;
    ctx->futhark_mc_segred_task_128965_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128978_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128978_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128978_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter = 0;
    ctx->futhark_mc_segred_task_128974_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128974_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128974_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_128974_total_time = 0;
    ctx->futhark_mc_segred_task_128974_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128955_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128955_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128955_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128955_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128955_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128955_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128953_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128953_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128953_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128942_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128942_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128942_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128942_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128942_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128942_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128940_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128940_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128940_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128982_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128982_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128982_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128982_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128982_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128982_total_iter = 0;
    ctx->futhark_mc_segmap_task_128980_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128980_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128980_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128980_total_time = 0;
    ctx->futhark_mc_segmap_task_128980_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128991_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128991_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128991_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128991_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128991_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128991_total_iter = 0;
    ctx->futhark_mc_segmap_task_128989_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128989_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128989_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128989_total_time = 0;
    ctx->futhark_mc_segmap_task_128989_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128986_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128986_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128986_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128986_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128986_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128986_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128984_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128984_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128984_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128995_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128995_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128995_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128995_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128995_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128995_total_iter = 0;
    ctx->futhark_mc_segmap_task_128993_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128993_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128993_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_128993_total_time = 0;
    ctx->futhark_mc_segmap_task_128993_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129004_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129004_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129004_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129004_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129004_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129004_total_iter = 0;
    ctx->futhark_mc_segmap_task_129002_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129002_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129002_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129002_total_time = 0;
    ctx->futhark_mc_segmap_task_129002_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_128999_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128999_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128999_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_128999_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_128999_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_128999_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_128997_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128997_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_128997_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129008_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129008_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129008_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129008_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129008_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129008_total_iter = 0;
    ctx->futhark_mc_segmap_task_129006_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129006_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129006_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129006_total_time = 0;
    ctx->futhark_mc_segmap_task_129006_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129017_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129017_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129017_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129017_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129017_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129017_total_iter = 0;
    ctx->futhark_mc_segmap_task_129015_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129015_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129015_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129015_total_time = 0;
    ctx->futhark_mc_segmap_task_129015_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129012_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129012_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129012_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129012_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129012_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129012_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_129010_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129010_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129010_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129021_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129021_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129021_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129021_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129021_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129021_total_iter = 0;
    ctx->futhark_mc_segmap_task_129019_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129019_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129019_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129019_total_time = 0;
    ctx->futhark_mc_segmap_task_129019_total_iter = 0;
    ctx->futhark_mc_scan_stage_1_parloop_129046_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_129046_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_129046_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs = 0;
    ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter = 0;
    ctx->futhark_mc_scan_stage_3_parloop_129048_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_129048_runs = calloc(sizeof(int),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_129048_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime = 0;
    ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs = 0;
    ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter = 0;
    ctx->futhark_mc_segscan_task_129040_total_runtime = calloc(sizeof(int64_t),
                                                               ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_129040_runs = calloc(sizeof(int),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_129040_iter = calloc(sizeof(sizeof(int64_t)),
                                                      ctx->scheduler.num_threads);
    ctx->futhark_mc_segscan_task_129040_total_time = 0;
    ctx->futhark_mc_segscan_task_129040_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129052_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129052_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129052_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129052_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129052_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129052_total_iter = 0;
    ctx->futhark_mc_segmap_task_129050_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129050_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129050_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129050_total_time = 0;
    ctx->futhark_mc_segmap_task_129050_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129031_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129031_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129031_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129031_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129031_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129031_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_129029_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129029_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129029_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129056_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129056_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129056_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129056_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129056_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129056_total_iter = 0;
    ctx->futhark_mc_segmap_task_129054_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129054_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129054_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129054_total_time = 0;
    ctx->futhark_mc_segmap_task_129054_total_iter = 0;
    ctx->futhark_mc_segred_stage_1_parloop_129064_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_129064_runs = calloc(sizeof(int),
                                                                ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_129064_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime = 0;
    ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs = 0;
    ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter = 0;
    ctx->futhark_mc_segred_task_129061_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_129061_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_129061_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segred_task_129061_total_time = 0;
    ctx->futhark_mc_segred_task_129061_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129059_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129059_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129059_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129059_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129059_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129059_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_129057_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129057_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129057_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129068_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129068_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129068_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129068_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129068_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129068_total_iter = 0;
    ctx->futhark_mc_segmap_task_129066_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129066_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129066_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129066_total_time = 0;
    ctx->futhark_mc_segmap_task_129066_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129077_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129077_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129077_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129077_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129077_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129077_total_iter = 0;
    ctx->futhark_mc_segmap_task_129075_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129075_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129075_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129075_total_time = 0;
    ctx->futhark_mc_segmap_task_129075_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129072_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129072_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129072_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129072_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129072_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129072_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_129070_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129070_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129070_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129081_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129081_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129081_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129081_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129081_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129081_total_iter = 0;
    ctx->futhark_mc_segmap_task_129079_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129079_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129079_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129079_total_time = 0;
    ctx->futhark_mc_segmap_task_129079_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129090_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129090_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129090_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129090_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129090_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129090_total_iter = 0;
    ctx->futhark_mc_segmap_task_129088_total_runtime = calloc(sizeof(int64_t),
                                                              ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129088_runs = calloc(sizeof(int),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129088_iter = calloc(sizeof(sizeof(int64_t)),
                                                     ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_task_129088_total_time = 0;
    ctx->futhark_mc_segmap_task_129088_total_iter = 0;
    ctx->futhark_mc_segmap_parloop_129085_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129085_runs = calloc(sizeof(int),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129085_iter = calloc(sizeof(sizeof(int64_t)),
                                                        ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_parloop_129085_total_total_runtime = 0;
    ctx->futhark_mc_segmap_parloop_129085_total_runs = 0;
    ctx->futhark_mc_segmap_parloop_129085_total_iter = 0;
    ctx->futhark_mc_segmap_nested_task_129083_total_runtime =
        calloc(sizeof(int64_t), ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129083_runs = calloc(sizeof(int),
                                                            ctx->scheduler.num_threads);
    ctx->futhark_mc_segmap_nested_task_129083_iter =
        calloc(sizeof(sizeof(int64_t)), ctx->scheduler.num_threads);
    init_constants(ctx);
    return ctx;
}
void futhark_context_free(struct futhark_context *ctx)
{
    free_constants(ctx);
    (void) scheduler_destroy(&ctx->scheduler);
    free_lock(&ctx->lock);
    free(ctx);
}
int futhark_context_sync(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
static const char *size_names[0];
static const char *size_vars[0];
static const char *size_classes[0];
int futhark_context_config_set_size(struct futhark_context_config *cfg, const
                                    char *size_name, size_t size_value)
{
    (void) cfg;
    (void) size_name;
    (void) size_value;
    return 1;
}
static int memblock_unref(struct futhark_context *ctx, struct memblock *block,
                          const char *desc)
{
    if (block->references != NULL) {
        *block->references -= 1;
        if (ctx->detail_memory)
            fprintf(ctx->log,
                    "Unreferencing block %s (allocated as %s) in %s: %d references remaining.\n",
                    desc, block->desc, "default space", *block->references);
        if (*block->references == 0) {
            ctx->cur_mem_usage_default -= block->size;
            free(block->mem);
            free(block->references);
            if (ctx->detail_memory)
                fprintf(ctx->log,
                        "%lld bytes freed (now allocated: %lld bytes)\n",
                        (long long) block->size,
                        (long long) ctx->cur_mem_usage_default);
        }
        block->references = NULL;
    }
    return 0;
}
static int memblock_alloc(struct futhark_context *ctx, struct memblock *block,
                          int64_t size, const char *desc)
{
    if (size < 0)
        futhark_panic(1,
                      "Negative allocation of %lld bytes attempted for %s in %s.\n",
                      (long long) size, desc, "default space",
                      ctx->cur_mem_usage_default);
    
    int ret = memblock_unref(ctx, block, desc);
    
    ctx->cur_mem_usage_default += size;
    if (ctx->detail_memory)
        fprintf(ctx->log,
                "Allocating %lld bytes for %s in %s (then allocated: %lld bytes)",
                (long long) size, desc, "default space",
                (long long) ctx->cur_mem_usage_default);
    if (ctx->cur_mem_usage_default > ctx->peak_mem_usage_default) {
        ctx->peak_mem_usage_default = ctx->cur_mem_usage_default;
        if (ctx->detail_memory)
            fprintf(ctx->log, " (new peak).\n");
    } else if (ctx->detail_memory)
        fprintf(ctx->log, ".\n");
    block->mem = (char *) malloc(size);
    block->references = (int *) malloc(sizeof(int));
    *block->references = 1;
    block->size = size;
    block->desc = desc;
    return ret;
}
static int memblock_set(struct futhark_context *ctx, struct memblock *lhs,
                        struct memblock *rhs, const char *lhs_desc)
{
    int ret = memblock_unref(ctx, lhs, lhs_desc);
    
    if (rhs->references != NULL)
        (*rhs->references)++;
    *lhs = *rhs;
    return ret;
}
int futhark_get_num_sizes(void)
{
    return sizeof(size_names) / sizeof(size_names[0]);
}
const char *futhark_get_size_name(int i)
{
    return size_names[i];
}
const char *futhark_get_size_class(int i)
{
    return size_classes[i];
}
char *futhark_context_report(struct futhark_context *ctx)
{
    if (futhark_context_sync(ctx) != 0)
        return NULL;
    
    struct str_builder builder;
    
    str_builder_init(&builder);
    if (ctx->detail_memory || ctx->profiling || ctx->logging) {
        { }
    }
    if (ctx->profiling) {
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128329         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128329_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128329_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128329_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128329_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128329_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128329_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128329_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128329_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128329_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128329_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128329_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128329_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128329_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128329_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128329_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128329_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128329_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128329_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128329_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128329_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128329_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128329_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128329_total_iter /
                (ctx->futhark_mc_segmap_parloop_128329_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128329_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128329_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128329_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128341   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128341_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128341_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128341_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128341_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128341_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128341_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128341_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128341_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128341_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128341_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128341_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128343   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128343_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128343_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128343_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128343_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128343_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128343_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128343_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128343_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128343_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128343_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128343_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128338           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128338_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128338_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128338_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128338_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128338_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128338_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128338_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128338_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128338_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128338_iter[i] /
                    (ctx->futhark_mc_segscan_task_128338_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128338_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128347         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128347_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128347_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128347_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128347_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128347_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128347_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128347_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128347_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128347_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128347_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128347_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128347_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128347_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128347_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128347_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128347_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128347_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128347_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128347_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128347_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128347_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128347_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128347_total_iter /
                (ctx->futhark_mc_segmap_parloop_128347_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128347_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128347_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128347_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128345            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128345_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128345_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128345_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128345_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128345_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128345_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128345_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128345_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128345_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128345_iter[i] /
                    (ctx->futhark_mc_segmap_task_128345_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128345_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128334         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128334_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128334_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128334_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128334_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128334_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128334_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128334_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128334_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128334_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128334_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128334_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128334_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128334_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128334_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128334_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128334_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128334_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128334_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128334_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128334_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128334_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128334_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128334_total_iter /
                (ctx->futhark_mc_segmap_parloop_128334_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128334_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128334_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128334_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128327            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128327_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128327_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128327_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128327_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128327_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128327_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128327_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128327_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128327_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128327_iter[i] /
                    (ctx->futhark_mc_segmap_task_128327_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128327_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128332     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128332_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128332_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128332_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128332_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128332_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128332_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128332_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128332_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128332_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128332_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128332_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128332_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128351         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128351_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128351_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128351_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128351_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128351_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128351_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128351_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128351_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128351_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128351_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128351_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128351_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128351_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128351_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128351_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128351_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128351_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128351_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128351_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128351_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128351_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128351_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128351_total_iter /
                (ctx->futhark_mc_segmap_parloop_128351_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128351_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128351_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128351_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128360         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128360_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128360_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128360_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128360_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128360_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128360_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128360_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128360_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128360_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128360_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128360_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128360_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128360_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128360_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128360_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128360_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128360_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128360_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128360_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128360_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128360_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128360_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128360_total_iter /
                (ctx->futhark_mc_segmap_parloop_128360_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128360_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128360_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128360_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128358            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128358_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128358_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128358_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128358_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128358_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128358_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128358_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128358_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128358_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128358_iter[i] /
                    (ctx->futhark_mc_segmap_task_128358_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128358_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128355         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128355_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128355_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128355_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128355_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128355_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128355_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128355_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128355_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128355_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128355_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128355_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128355_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128355_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128355_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128355_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128355_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128355_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128355_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128355_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128355_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128355_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128355_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128355_total_iter /
                (ctx->futhark_mc_segmap_parloop_128355_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128355_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128355_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128355_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128349            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128349_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128349_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128349_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128349_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128349_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128349_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128349_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128349_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128349_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128349_iter[i] /
                    (ctx->futhark_mc_segmap_task_128349_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128349_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128353     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128353_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128353_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128353_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128353_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128353_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128353_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128353_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128353_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128353_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128353_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128353_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128353_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128364         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128364_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128364_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128364_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128364_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128364_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128364_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128364_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128364_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128364_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128364_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128364_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128364_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128364_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128364_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128364_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128364_total_iter /
                (ctx->futhark_mc_segmap_parloop_128364_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128364_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128364_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128364_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128373         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128373_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128373_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128373_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128373_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128373_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128373_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128373_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128373_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128373_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128373_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128373_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128373_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128373_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128373_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128373_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128373_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128373_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128373_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128373_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128373_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128373_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128373_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128373_total_iter /
                (ctx->futhark_mc_segmap_parloop_128373_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128373_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128373_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128373_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128371            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128371_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128371_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128371_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128371_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128371_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128371_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128371_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128371_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128371_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128371_iter[i] /
                    (ctx->futhark_mc_segmap_task_128371_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128371_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128368         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128368_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128368_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128368_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128368_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128368_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128368_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128368_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128368_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128368_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128368_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128368_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128368_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128368_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128368_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128368_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128368_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128368_total_iter /
                (ctx->futhark_mc_segmap_parloop_128368_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128368_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128368_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128368_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128362            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128362_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128362_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128362_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128362_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128362_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128362_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128362_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128362_iter[i] /
                    (ctx->futhark_mc_segmap_task_128362_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128362_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128366     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128366_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128366_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128366_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128366_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128366_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128366_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128366_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128366_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128377         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128377_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128377_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128377_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128377_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128377_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128377_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128377_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128377_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128377_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128377_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128377_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128377_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128377_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128377_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128377_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128377_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128377_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128377_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128377_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128377_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128377_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128377_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128377_total_iter /
                (ctx->futhark_mc_segmap_parloop_128377_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128377_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128377_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128377_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128386         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128386_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128386_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128386_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128386_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128386_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128386_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128386_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128386_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128386_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128386_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128386_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128386_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128386_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128386_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128386_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128386_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128386_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128386_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128386_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128386_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128386_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128386_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128386_total_iter /
                (ctx->futhark_mc_segmap_parloop_128386_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128386_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128386_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128386_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128394 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128394_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128394_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128394_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128394_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128394_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128394_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128394_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128394_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128394_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128394_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128394_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128391            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128391_runs[i],
                    (long) ctx->futhark_mc_segred_task_128391_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128391_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128391_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128391_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128391_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128391_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128391_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128391_iter[i],
                    (long) ctx->futhark_mc_segred_task_128391_iter[i] /
                    (ctx->futhark_mc_segred_task_128391_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128391_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128389         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128389_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128389_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128389_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128389_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128389_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128389_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128389_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128389_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128389_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128389_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128389_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128389_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128389_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128389_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128389_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128389_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128389_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128389_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128389_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128389_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128389_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128389_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128389_total_iter /
                (ctx->futhark_mc_segmap_parloop_128389_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128389_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128389_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128389_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128384            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128384_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128384_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128384_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128384_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128384_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128384_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128384_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128384_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128384_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128384_iter[i] /
                    (ctx->futhark_mc_segmap_task_128384_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128384_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128387     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128387_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128387_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128387_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128387_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128387_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128387_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128387_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128387_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128387_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128387_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128387_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128387_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128381         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128381_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128381_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128381_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128381_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128381_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128381_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128381_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128381_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128381_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128381_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128381_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128381_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128381_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128381_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128381_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128381_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128381_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128381_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128381_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128381_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128381_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128381_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128381_total_iter /
                (ctx->futhark_mc_segmap_parloop_128381_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128381_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128381_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128381_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128375            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128375_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128375_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128375_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128375_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128375_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128375_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128375_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128375_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128375_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128375_iter[i] /
                    (ctx->futhark_mc_segmap_task_128375_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128375_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128379     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128379_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128379_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128379_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128379_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128379_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128379_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128379_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128379_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128379_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128379_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128379_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128379_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128398         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128398_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128398_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128398_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128398_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128398_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128398_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128398_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128398_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128398_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128398_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128398_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128398_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128398_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128398_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128398_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128398_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128398_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128398_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128398_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128398_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128398_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128398_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128398_total_iter /
                (ctx->futhark_mc_segmap_parloop_128398_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128398_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128398_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128398_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128411         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128411_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128411_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128411_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128411_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128411_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128411_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128411_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128411_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128411_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128411_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128411_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128411_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128411_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128411_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128411_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128411_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128411_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128411_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128411_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128411_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128411_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128411_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128411_total_iter /
                (ctx->futhark_mc_segmap_parloop_128411_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128411_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128411_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128411_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128409            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128409_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128409_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128409_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128409_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128409_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128409_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128409_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128409_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128409_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128409_iter[i] /
                    (ctx->futhark_mc_segmap_task_128409_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128409_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128415         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128415_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128415_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128415_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128415_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128415_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128415_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128415_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128415_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128415_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128415_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128415_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128415_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128415_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128415_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128415_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128415_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128415_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128415_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128415_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128415_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128415_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128415_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128415_total_iter /
                (ctx->futhark_mc_segmap_parloop_128415_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128415_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128415_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128415_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128413            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128413_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128413_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128413_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128413_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128413_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128413_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128413_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128413_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128413_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128413_iter[i] /
                    (ctx->futhark_mc_segmap_task_128413_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128413_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128404         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128404_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128404_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128404_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128404_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128404_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128404_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128404_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128404_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128404_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128404_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128404_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128404_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128404_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128404_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128404_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128404_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128404_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128404_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128404_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128404_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128404_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128404_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128404_total_iter /
                (ctx->futhark_mc_segmap_parloop_128404_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128404_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128404_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128404_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128396            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128396_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128396_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128396_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128396_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128396_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128396_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128396_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128396_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128396_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128396_iter[i] /
                    (ctx->futhark_mc_segmap_task_128396_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128396_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128402     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128402_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128402_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128402_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128402_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128402_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128402_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128402_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128402_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128402_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128402_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128419         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128419_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128419_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128419_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128419_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128419_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128419_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128419_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128419_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128419_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128419_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128419_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128419_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128419_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128419_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128419_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128419_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128419_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128419_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128419_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128419_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128419_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128419_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128419_total_iter /
                (ctx->futhark_mc_segmap_parloop_128419_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128419_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128419_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128419_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128432         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128432_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128432_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128432_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128432_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128432_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128432_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128432_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128432_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128432_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128432_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128432_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128432_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128432_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128432_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128432_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128432_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128432_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128432_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128432_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128432_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128432_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128432_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128432_total_iter /
                (ctx->futhark_mc_segmap_parloop_128432_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128432_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128432_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128432_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128430            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128430_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128430_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128430_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128430_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128430_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128430_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128430_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128430_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128430_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128430_iter[i] /
                    (ctx->futhark_mc_segmap_task_128430_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128430_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128436         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128436_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128436_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128436_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128436_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128436_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128436_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128436_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128436_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128436_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128436_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128436_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128436_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128436_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128436_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128436_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128436_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128436_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128436_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128436_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128436_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128436_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128436_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128436_total_iter /
                (ctx->futhark_mc_segmap_parloop_128436_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128436_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128436_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128436_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128434            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128434_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128434_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128434_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128434_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128434_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128434_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128434_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128434_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128434_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128434_iter[i] /
                    (ctx->futhark_mc_segmap_task_128434_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128434_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128425         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128425_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128425_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128425_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128425_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128425_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128425_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128425_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128425_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128425_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128425_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128425_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128425_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128425_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128425_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128425_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128425_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128425_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128425_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128425_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128425_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128425_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128425_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128425_total_iter /
                (ctx->futhark_mc_segmap_parloop_128425_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128425_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128425_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128425_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128417            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128417_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128417_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128417_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128417_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128417_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128417_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128417_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128417_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128417_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128417_iter[i] /
                    (ctx->futhark_mc_segmap_task_128417_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128417_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128423     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128423_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128423_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128423_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128423_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128423_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128423_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128423_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128423_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128423_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128423_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128440         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128440_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128440_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128440_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128440_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128440_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128440_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128440_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128440_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128440_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128440_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128440_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128440_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128440_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128440_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128440_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128440_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128440_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128440_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128440_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128440_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128440_total_iter /
                (ctx->futhark_mc_segmap_parloop_128440_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128440_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128440_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128440_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128449         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128449_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128449_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128449_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128449_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128449_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128449_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128449_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128449_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128449_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128449_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128449_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128449_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128449_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128449_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128449_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128449_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128449_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128449_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128449_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128449_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128449_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128449_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128449_total_iter /
                (ctx->futhark_mc_segmap_parloop_128449_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128449_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128449_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128449_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128447            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128447_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128447_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128447_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128447_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128447_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128447_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128447_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128447_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128447_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128447_iter[i] /
                    (ctx->futhark_mc_segmap_task_128447_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128447_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128444         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128444_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128444_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128444_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128444_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128444_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128444_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128444_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128444_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128444_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128444_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128444_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128444_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128444_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128444_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128444_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128444_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128444_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128444_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128444_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128444_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128444_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128444_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128444_total_iter /
                (ctx->futhark_mc_segmap_parloop_128444_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128444_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128444_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128444_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128438            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128438_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128438_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128438_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128438_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128438_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128438_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128438_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128438_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128438_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128438_iter[i] /
                    (ctx->futhark_mc_segmap_task_128438_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128438_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128442     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128442_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128442_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128442_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128442_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128442_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128442_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128442_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128442_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128442_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128442_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128453         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128453_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128453_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128453_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128453_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128453_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128453_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128453_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128453_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128453_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128453_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128453_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128453_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128453_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128453_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128453_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128453_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128453_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128453_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128453_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128453_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128453_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128453_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128453_total_iter /
                (ctx->futhark_mc_segmap_parloop_128453_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128453_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128453_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128453_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128462         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128462_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128462_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128462_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128462_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128462_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128462_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128462_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128462_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128462_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128462_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128462_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128462_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128462_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128462_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128462_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128462_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128462_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128462_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128462_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128462_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128462_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128462_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128462_total_iter /
                (ctx->futhark_mc_segmap_parloop_128462_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128462_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128462_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128462_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128470 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128470_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128470_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128470_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128470_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128470_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128470_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128470_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128470_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128470_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128470_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128470_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128467            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128467_runs[i],
                    (long) ctx->futhark_mc_segred_task_128467_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128467_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128467_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128467_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128467_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128467_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128467_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128467_iter[i],
                    (long) ctx->futhark_mc_segred_task_128467_iter[i] /
                    (ctx->futhark_mc_segred_task_128467_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128467_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128465         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128465_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128465_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128465_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128465_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128465_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128465_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128465_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128465_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128465_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128465_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128465_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128465_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128465_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128465_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128465_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128465_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128465_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128465_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128465_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128465_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128465_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128465_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128465_total_iter /
                (ctx->futhark_mc_segmap_parloop_128465_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128465_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128465_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128465_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128460            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128460_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128460_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128460_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128460_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128460_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128460_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128460_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128460_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128460_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128460_iter[i] /
                    (ctx->futhark_mc_segmap_task_128460_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128460_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128463     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128463_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128463_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128463_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128463_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128463_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128463_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128463_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128463_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128463_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128463_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128463_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128463_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128457         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128457_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128457_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128457_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128457_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128457_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128457_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128457_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128457_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128457_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128457_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128457_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128457_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128457_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128457_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128457_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128457_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128457_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128457_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128457_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128457_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128457_total_iter /
                (ctx->futhark_mc_segmap_parloop_128457_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128457_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128457_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128457_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128451            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128451_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128451_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128451_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128451_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128451_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128451_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128451_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128451_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128451_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128451_iter[i] /
                    (ctx->futhark_mc_segmap_task_128451_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128451_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128455     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128455_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128455_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128455_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128455_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128455_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128455_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128455_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128455_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128455_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128455_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128455_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128455_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128474         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128474_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128474_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128474_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128474_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128474_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128474_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128474_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128474_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128474_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128474_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128474_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128474_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128474_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128474_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128474_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128474_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128474_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128474_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128474_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128474_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128474_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128474_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128474_total_iter /
                (ctx->futhark_mc_segmap_parloop_128474_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128474_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128474_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128474_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128483         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128483_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128483_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128483_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128483_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128483_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128483_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128483_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128483_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128483_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128483_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128483_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128483_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128483_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128483_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128483_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128483_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128483_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128483_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128483_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128483_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128483_total_iter /
                (ctx->futhark_mc_segmap_parloop_128483_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128483_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128483_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128483_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128481            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128481_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128481_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128481_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128481_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128481_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128481_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128481_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128481_iter[i] /
                    (ctx->futhark_mc_segmap_task_128481_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128481_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128478         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128478_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128478_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128478_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128478_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128478_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128478_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128478_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128478_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128478_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128478_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128478_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128478_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128478_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128478_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128478_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128478_total_iter /
                (ctx->futhark_mc_segmap_parloop_128478_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128478_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128478_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128478_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128472            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128472_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128472_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128472_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128472_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128472_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128472_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128472_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128472_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128472_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128472_iter[i] /
                    (ctx->futhark_mc_segmap_task_128472_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128472_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128476     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128476_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128476_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128476_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128476_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128476_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128476_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128476_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128476_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128476_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128476_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128487         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128487_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128487_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128487_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128487_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128487_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128487_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128487_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128487_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128487_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128487_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128487_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128487_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128487_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128487_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128487_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128487_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128487_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128487_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128487_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128487_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128487_total_iter /
                (ctx->futhark_mc_segmap_parloop_128487_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128487_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128487_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128487_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128501 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128501_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128501_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128501_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128501_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128501_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128501_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128501_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128501_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128501_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128501_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128501_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128498            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128498_runs[i],
                    (long) ctx->futhark_mc_segred_task_128498_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128498_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128498_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128498_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128498_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128498_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128498_iter[i],
                    (long) ctx->futhark_mc_segred_task_128498_iter[i] /
                    (ctx->futhark_mc_segred_task_128498_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128498_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128506   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128506_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128506_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128506_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128506_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128506_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128506_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128506_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128506_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128506_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128506_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128506_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128508   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128508_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128508_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128508_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128508_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128508_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128508_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128508_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128508_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128508_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128508_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128508_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128503           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128503_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128503_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128503_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128503_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128503_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128503_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128503_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128503_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128503_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128503_iter[i] /
                    (ctx->futhark_mc_segscan_task_128503_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128503_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128513 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128513_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128513_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128513_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128513_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128513_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128513_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128513_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128513_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128513_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128513_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128513_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128510            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128510_runs[i],
                    (long) ctx->futhark_mc_segred_task_128510_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128510_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128510_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128510_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128510_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128510_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128510_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128510_iter[i],
                    (long) ctx->futhark_mc_segred_task_128510_iter[i] /
                    (ctx->futhark_mc_segred_task_128510_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128510_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128518   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128518_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128518_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128518_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128518_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128518_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128518_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128518_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128518_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128518_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128518_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128518_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128520   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128520_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128520_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128520_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128520_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128520_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128520_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128520_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128520_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128520_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128520_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128520_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128515           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128515_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128515_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128515_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128515_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128515_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128515_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128515_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128515_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128515_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128515_iter[i] /
                    (ctx->futhark_mc_segscan_task_128515_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128515_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128525 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128525_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128525_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128525_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128525_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128525_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128525_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128525_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128525_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128525_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128525_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128525_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128522            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128522_runs[i],
                    (long) ctx->futhark_mc_segred_task_128522_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128522_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128522_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128522_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128522_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128522_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128522_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128522_iter[i],
                    (long) ctx->futhark_mc_segred_task_128522_iter[i] /
                    (ctx->futhark_mc_segred_task_128522_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128522_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_128530   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_128530_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128530_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128530_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_128530_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128530_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128530_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128530_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_128530_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_128530_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_128530_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_128530_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_128532   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_128532_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128532_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128532_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_128532_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128532_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128532_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128532_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_128532_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_128532_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_128532_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_128532_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_128527           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_128527_runs[i],
                    (long) ctx->futhark_mc_segscan_task_128527_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128527_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128527_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_128527_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_128527_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_128527_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_128527_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_128527_iter[i],
                    (long) ctx->futhark_mc_segscan_task_128527_iter[i] /
                    (ctx->futhark_mc_segscan_task_128527_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_128527_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128493         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128493_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128493_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128493_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128493_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128493_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128493_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128493_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128493_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128493_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128493_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128493_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128493_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128493_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128493_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128493_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128493_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128493_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128493_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128493_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128493_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128493_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128493_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128493_total_iter /
                (ctx->futhark_mc_segmap_parloop_128493_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128493_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128493_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128493_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128485            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128485_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128485_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128485_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128485_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128485_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128485_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128485_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128485_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128485_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128485_iter[i] /
                    (ctx->futhark_mc_segmap_task_128485_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128485_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128491     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128491_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128491_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128491_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128491_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128491_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128491_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128491_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128491_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128491_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128491_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128491_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128491_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128536         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128536_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128536_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128536_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128536_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128536_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128536_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128536_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128536_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128536_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128536_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128536_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128536_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128536_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128536_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128536_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128536_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128536_total_iter /
                (ctx->futhark_mc_segmap_parloop_128536_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128536_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128536_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128536_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128545         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128545_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128545_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128545_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128545_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128545_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128545_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128545_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128545_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128545_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128545_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128545_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128545_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128545_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128545_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128545_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128545_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128545_total_iter /
                (ctx->futhark_mc_segmap_parloop_128545_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128545_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128545_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128545_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128553 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128553_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128553_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128553_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128553_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128553_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128553_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128553_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128553_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128553_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128553_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128553_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128550            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128550_runs[i],
                    (long) ctx->futhark_mc_segred_task_128550_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128550_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128550_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128550_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128550_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128550_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128550_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128550_iter[i],
                    (long) ctx->futhark_mc_segred_task_128550_iter[i] /
                    (ctx->futhark_mc_segred_task_128550_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128550_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128558 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128558_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128558_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128555            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128555_runs[i],
                    (long) ctx->futhark_mc_segred_task_128555_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128555_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128555_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128555_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128555_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128555_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128555_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128555_iter[i],
                    (long) ctx->futhark_mc_segred_task_128555_iter[i] /
                    (ctx->futhark_mc_segred_task_128555_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128555_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128548         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128548_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128548_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128548_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128548_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128548_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128548_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128548_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128548_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128548_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128548_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128548_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128548_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128548_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128548_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128548_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128548_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128548_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128548_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128548_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128548_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128548_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128548_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128548_total_iter /
                (ctx->futhark_mc_segmap_parloop_128548_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128548_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128548_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128548_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128543            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128543_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128543_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128543_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128543_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128543_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128543_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128543_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128543_iter[i] /
                    (ctx->futhark_mc_segmap_task_128543_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128543_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128546     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128546_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128546_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128546_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128546_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128546_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128546_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128546_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128546_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128546_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128546_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128546_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128546_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128540         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128540_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128540_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128540_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128540_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128540_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128540_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128540_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128540_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128540_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128540_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128540_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128540_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128540_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128540_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128540_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128540_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128540_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128540_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128540_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128540_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128540_total_iter /
                (ctx->futhark_mc_segmap_parloop_128540_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128540_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128540_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128540_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128534            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128534_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128534_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128534_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128534_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128534_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128534_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128534_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128534_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128534_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128534_iter[i] /
                    (ctx->futhark_mc_segmap_task_128534_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128534_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128538     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128538_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128538_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128538_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128538_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128538_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128538_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128538_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128538_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128538_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128538_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128538_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128538_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128562         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128562_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128562_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128562_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128562_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128562_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128562_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128562_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128562_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128562_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128562_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128562_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128562_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128562_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128562_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128562_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128562_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128562_total_iter /
                (ctx->futhark_mc_segmap_parloop_128562_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128562_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128562_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128562_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128573         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128573_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128573_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128573_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128573_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128573_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128573_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128573_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128573_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128573_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128573_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128573_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128573_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128573_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128573_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128573_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128573_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128573_total_iter /
                (ctx->futhark_mc_segmap_parloop_128573_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128573_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128573_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128573_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128583 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128583_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128583_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128583_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128583_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128583_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128583_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128583_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128583_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128583_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128583_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128583_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128578            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128578_runs[i],
                    (long) ctx->futhark_mc_segred_task_128578_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128578_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128578_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128578_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128578_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128578_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128578_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128578_iter[i],
                    (long) ctx->futhark_mc_segred_task_128578_iter[i] /
                    (ctx->futhark_mc_segred_task_128578_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128578_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128589 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128589_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128589_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128589_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128589_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128589_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128589_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128589_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128589_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128589_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128589_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128585            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128585_runs[i],
                    (long) ctx->futhark_mc_segred_task_128585_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128585_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128585_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128585_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128585_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128585_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128585_iter[i],
                    (long) ctx->futhark_mc_segred_task_128585_iter[i] /
                    (ctx->futhark_mc_segred_task_128585_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128585_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128576         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128576_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128576_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128576_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128576_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128576_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128576_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128576_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128576_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128576_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128576_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128576_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128576_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128576_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128576_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128576_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128576_total_iter /
                (ctx->futhark_mc_segmap_parloop_128576_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128576_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128576_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128576_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128571            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128571_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128571_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128571_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128571_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128571_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128571_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128571_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128571_iter[i] /
                    (ctx->futhark_mc_segmap_task_128571_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128571_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128574     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128574_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128574_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128574_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128574_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128574_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128574_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128574_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128574_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128567         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128567_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128567_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128567_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128567_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128567_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128567_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128567_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128567_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128567_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128567_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128567_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128567_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128567_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128567_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128567_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128567_total_iter /
                (ctx->futhark_mc_segmap_parloop_128567_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128567_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128567_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128567_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128560            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128560_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128560_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128560_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128560_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128560_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128560_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128560_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128560_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128560_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128560_iter[i] /
                    (ctx->futhark_mc_segmap_task_128560_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128560_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128565     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128565_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128565_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128565_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128565_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128565_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128565_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128565_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128565_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128593         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128593_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128593_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128593_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128593_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128593_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128593_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128593_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128593_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128593_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128593_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128593_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128593_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128593_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128593_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128593_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128593_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128593_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128593_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128593_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128593_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128593_total_iter /
                (ctx->futhark_mc_segmap_parloop_128593_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128593_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128593_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128593_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128604         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128604_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128604_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128604_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128604_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128604_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128604_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128604_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128604_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128604_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128604_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128604_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128604_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128604_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128604_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128604_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128604_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128604_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128604_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128604_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128604_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128604_total_iter /
                (ctx->futhark_mc_segmap_parloop_128604_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128604_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128604_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128604_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128616 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128616_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128616_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128616_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128616_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128616_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128616_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128616_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128616_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128616_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128616_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128616_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128609            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128609_runs[i],
                    (long) ctx->futhark_mc_segred_task_128609_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128609_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128609_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128609_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128609_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128609_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128609_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128609_iter[i],
                    (long) ctx->futhark_mc_segred_task_128609_iter[i] /
                    (ctx->futhark_mc_segred_task_128609_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128609_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128622 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128622_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128622_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128622_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128622_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128622_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128622_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128622_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128622_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128622_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128622_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128622_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128618            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128618_runs[i],
                    (long) ctx->futhark_mc_segred_task_128618_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128618_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128618_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128618_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128618_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128618_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128618_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128618_iter[i],
                    (long) ctx->futhark_mc_segred_task_128618_iter[i] /
                    (ctx->futhark_mc_segred_task_128618_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128618_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128607         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128607_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128607_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128607_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128607_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128607_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128607_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128607_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128607_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128607_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128607_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128607_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128607_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128607_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128607_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128607_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128607_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128607_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128607_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128607_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128607_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128607_total_iter /
                (ctx->futhark_mc_segmap_parloop_128607_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128607_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128607_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128607_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128602            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128602_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128602_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128602_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128602_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128602_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128602_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128602_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128602_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128602_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128602_iter[i] /
                    (ctx->futhark_mc_segmap_task_128602_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128602_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128605     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128605_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128605_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128605_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128605_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128605_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128605_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128605_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128605_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128605_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128605_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128605_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128605_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128598         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128598_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128598_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128598_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128598_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128598_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128598_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128598_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128598_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128598_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128598_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128598_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128598_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128598_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128598_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128598_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128598_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128598_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128598_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128598_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128598_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128598_total_iter /
                (ctx->futhark_mc_segmap_parloop_128598_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128598_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128598_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128598_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128591            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128591_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128591_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128591_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128591_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128591_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128591_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128591_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128591_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128591_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128591_iter[i] /
                    (ctx->futhark_mc_segmap_task_128591_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128591_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128596     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128596_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128596_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128596_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128596_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128596_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128596_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128596_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128596_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128596_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128596_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128596_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128596_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128626         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128626_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128626_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128626_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128626_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128626_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128626_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128626_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128626_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128626_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128626_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128626_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128626_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128626_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128626_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128626_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128626_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128626_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128626_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128626_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128626_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128626_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128626_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128626_total_iter /
                (ctx->futhark_mc_segmap_parloop_128626_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128626_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128626_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128626_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128636         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128636_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128636_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128636_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128636_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128636_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128636_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128636_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128636_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128636_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128636_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128636_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128636_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128636_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128636_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128636_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128636_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128636_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128636_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128636_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128636_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128636_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128636_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128636_total_iter /
                (ctx->futhark_mc_segmap_parloop_128636_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128636_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128636_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128636_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128646 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128646_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128646_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128646_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128646_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128646_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128646_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128646_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128646_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128646_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128646_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128646_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128643            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128643_runs[i],
                    (long) ctx->futhark_mc_segred_task_128643_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128643_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128643_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128643_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128643_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128643_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128643_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128643_iter[i],
                    (long) ctx->futhark_mc_segred_task_128643_iter[i] /
                    (ctx->futhark_mc_segred_task_128643_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128643_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128651 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128651_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128651_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128648            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128648_runs[i],
                    (long) ctx->futhark_mc_segred_task_128648_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128648_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128648_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128648_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128648_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128648_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128648_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128648_iter[i],
                    (long) ctx->futhark_mc_segred_task_128648_iter[i] /
                    (ctx->futhark_mc_segred_task_128648_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128648_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128640         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128640_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128640_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128640_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128640_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128640_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128640_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128640_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128640_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128640_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128640_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128640_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128640_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128640_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128640_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128640_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128640_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128640_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128640_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128640_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128640_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128640_total_iter /
                (ctx->futhark_mc_segmap_parloop_128640_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128640_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128640_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128640_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128634            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128634_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128634_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128634_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128634_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128634_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128634_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128634_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128634_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128634_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128634_iter[i] /
                    (ctx->futhark_mc_segmap_task_128634_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128634_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128638     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128638_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128638_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128638_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128638_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128638_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128638_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128638_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128638_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128638_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128638_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128638_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128638_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128631         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128631_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128631_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128631_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128631_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128631_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128631_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128631_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128631_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128631_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128631_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128631_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128631_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128631_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128631_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128631_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128631_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128631_total_iter /
                (ctx->futhark_mc_segmap_parloop_128631_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128631_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128631_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128631_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128624            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128624_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128624_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128624_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128624_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128624_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128624_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128624_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128624_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128624_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128624_iter[i] /
                    (ctx->futhark_mc_segmap_task_128624_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128624_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128629     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128629_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128629_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128629_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128629_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128629_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128629_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128629_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128629_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128655         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128655_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128655_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128655_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128655_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128655_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128655_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128655_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128655_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128655_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128655_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128655_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128655_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128655_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128655_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128655_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128655_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128655_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128655_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128655_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128655_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128655_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128655_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128655_total_iter /
                (ctx->futhark_mc_segmap_parloop_128655_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128655_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128655_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128655_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128668         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128668_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128668_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128668_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128668_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128668_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128668_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128668_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128668_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128668_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128668_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128668_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128668_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128668_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128668_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128668_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128668_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128668_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128668_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128668_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128668_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128668_total_iter /
                (ctx->futhark_mc_segmap_parloop_128668_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128668_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128668_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128668_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128682 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128682_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128682_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128682_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128682_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128682_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128682_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128682_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128682_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128682_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128682_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128682_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128677            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128677_runs[i],
                    (long) ctx->futhark_mc_segred_task_128677_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128677_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128677_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128677_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128677_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128677_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128677_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128677_iter[i],
                    (long) ctx->futhark_mc_segred_task_128677_iter[i] /
                    (ctx->futhark_mc_segred_task_128677_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128677_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128688 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128688_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128688_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128688_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128688_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128688_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128688_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128688_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128688_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128688_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128688_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128688_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128684            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128684_runs[i],
                    (long) ctx->futhark_mc_segred_task_128684_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128684_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128684_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128684_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128684_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128684_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128684_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128684_iter[i],
                    (long) ctx->futhark_mc_segred_task_128684_iter[i] /
                    (ctx->futhark_mc_segred_task_128684_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128684_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128673         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128673_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128673_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128673_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128673_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128673_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128673_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128673_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128673_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128673_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128673_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128673_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128673_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128673_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128673_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128673_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128673_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128673_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128673_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128673_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128673_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128673_total_iter /
                (ctx->futhark_mc_segmap_parloop_128673_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128673_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128673_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128673_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128666            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128666_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128666_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128666_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128666_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128666_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128666_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128666_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128666_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128666_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128666_iter[i] /
                    (ctx->futhark_mc_segmap_task_128666_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128666_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128671     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128671_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128671_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128671_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128671_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128671_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128671_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128671_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128671_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128671_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128671_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128662         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128662_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128662_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128662_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128662_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128662_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128662_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128662_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128662_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128662_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128662_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128662_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128662_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128662_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128662_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128662_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128662_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128662_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128662_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128662_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128662_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128662_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128662_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128662_total_iter /
                (ctx->futhark_mc_segmap_parloop_128662_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128662_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128662_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128662_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128653            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128653_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128653_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128653_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128653_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128653_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128653_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128653_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128653_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128653_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128653_iter[i] /
                    (ctx->futhark_mc_segmap_task_128653_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128653_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128660     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128660_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128660_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128660_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128660_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128660_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128660_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128660_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128660_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128660_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128660_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128660_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128660_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128692         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128692_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128692_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128692_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128692_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128692_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128692_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128692_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128692_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128692_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128692_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128692_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128692_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128692_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128692_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128692_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128692_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128692_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128692_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128692_total_iter /
                (ctx->futhark_mc_segmap_parloop_128692_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128692_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128692_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128692_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128707         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128707_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128707_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128707_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128707_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128707_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128707_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128707_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128707_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128707_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128707_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128707_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128707_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128707_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128707_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128707_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128707_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128707_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128707_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128707_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128707_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128707_total_iter /
                (ctx->futhark_mc_segmap_parloop_128707_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128707_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128707_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128707_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128722         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128722_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128722_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128722_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128722_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128722_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128722_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128722_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128722_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128722_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128722_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128722_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128722_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128722_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128722_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128722_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128722_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128722_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128722_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128722_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128722_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128722_total_iter /
                (ctx->futhark_mc_segmap_parloop_128722_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128722_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128722_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128722_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128720            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128720_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128720_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128720_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128720_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128720_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128720_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128720_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128720_iter[i] /
                    (ctx->futhark_mc_segmap_task_128720_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128720_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128731 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128731_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128731_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128731_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128731_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128731_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128731_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128731_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128731_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128731_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128731_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128731_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128724            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128724_runs[i],
                    (long) ctx->futhark_mc_segred_task_128724_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128724_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128724_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128724_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128724_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128724_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128724_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128724_iter[i],
                    (long) ctx->futhark_mc_segred_task_128724_iter[i] /
                    (ctx->futhark_mc_segred_task_128724_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128724_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128737 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128737_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128737_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128737_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128737_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128737_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128737_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128737_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128737_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128737_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128737_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128737_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128733            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128733_runs[i],
                    (long) ctx->futhark_mc_segred_task_128733_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128733_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128733_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128733_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128733_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128733_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128733_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128733_iter[i],
                    (long) ctx->futhark_mc_segred_task_128733_iter[i] /
                    (ctx->futhark_mc_segred_task_128733_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128733_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128714         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128714_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128714_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128714_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128714_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128714_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128714_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128714_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128714_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128714_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128714_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128714_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128714_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128714_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128714_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128714_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128714_total_iter /
                (ctx->futhark_mc_segmap_parloop_128714_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128714_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128714_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128714_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128705            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128705_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128705_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128705_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128705_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128705_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128705_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128705_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128705_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128705_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128705_iter[i] /
                    (ctx->futhark_mc_segmap_task_128705_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128705_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128712     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128712_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128712_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128712_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128712_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128712_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128712_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128712_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128712_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128701         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128701_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128701_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128701_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128701_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128701_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128701_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128701_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128701_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128701_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128701_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128701_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128701_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128701_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128701_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128701_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128701_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128701_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128701_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128701_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128701_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128701_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128701_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128701_total_iter /
                (ctx->futhark_mc_segmap_parloop_128701_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128701_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128701_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128701_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128690            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128690_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128690_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128690_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128690_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128690_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128690_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128690_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128690_iter[i] /
                    (ctx->futhark_mc_segmap_task_128690_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128690_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128699     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128699_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128699_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128699_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128699_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128699_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128699_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128699_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128699_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128699_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128699_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128699_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128699_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128741         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128741_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128741_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128741_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128741_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128741_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128741_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128741_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128741_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128741_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128741_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128741_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128741_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128741_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128741_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128741_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128741_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128741_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128741_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128741_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128741_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128741_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128741_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128741_total_iter /
                (ctx->futhark_mc_segmap_parloop_128741_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128741_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128741_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128741_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128750         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128750_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128750_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128750_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128750_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128750_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128750_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128750_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128750_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128750_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128750_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128750_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128750_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128750_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128750_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128750_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128750_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128750_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128750_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128750_total_iter /
                (ctx->futhark_mc_segmap_parloop_128750_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128750_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128750_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128750_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128748            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128748_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128748_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128748_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128748_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128748_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128748_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128748_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128748_iter[i] /
                    (ctx->futhark_mc_segmap_task_128748_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128748_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128745         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128745_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128745_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128745_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128745_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128745_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128745_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128745_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128745_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128745_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128745_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128745_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128745_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128745_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128745_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128745_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128745_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128745_total_iter /
                (ctx->futhark_mc_segmap_parloop_128745_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128745_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128745_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128745_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128739            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128739_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128739_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128739_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128739_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128739_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128739_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128739_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128739_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128739_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128739_iter[i] /
                    (ctx->futhark_mc_segmap_task_128739_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128739_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128743     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128743_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128743_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128743_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128743_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128743_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128743_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128743_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128743_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128743_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128743_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128754         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128754_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128754_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128754_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128754_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128754_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128754_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128754_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128754_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128754_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128754_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128754_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128754_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128754_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128754_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128754_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128754_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128754_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128754_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128754_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128754_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128754_total_iter /
                (ctx->futhark_mc_segmap_parloop_128754_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128754_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128754_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128754_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128769         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128769_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128769_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128769_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128769_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128769_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128769_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128769_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128769_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128769_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128769_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128769_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128769_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128769_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128769_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128769_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128769_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128769_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128769_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128769_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128769_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128769_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128769_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128769_total_iter /
                (ctx->futhark_mc_segmap_parloop_128769_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128769_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128769_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128769_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128767            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128767_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128767_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128767_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128767_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128767_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128767_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128767_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128767_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128767_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128767_iter[i] /
                    (ctx->futhark_mc_segmap_task_128767_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128767_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128773         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128773_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128773_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128773_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128773_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128773_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128773_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128773_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128773_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128773_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128773_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128773_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128773_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128773_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128773_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128773_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128773_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128773_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128773_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128773_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128773_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128773_total_iter /
                (ctx->futhark_mc_segmap_parloop_128773_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128773_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128773_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128773_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128771            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128771_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128771_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128771_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128771_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128771_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128771_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128771_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128771_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128771_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128771_iter[i] /
                    (ctx->futhark_mc_segmap_task_128771_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128771_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128761         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128761_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128761_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128761_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128761_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128761_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128761_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128761_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128761_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128761_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128761_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128761_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128761_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128761_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128761_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128761_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128761_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128761_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128761_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128761_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128761_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128761_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128761_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128761_total_iter /
                (ctx->futhark_mc_segmap_parloop_128761_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128761_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128761_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128761_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128752            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128752_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128752_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128752_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128752_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128752_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128752_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128752_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128752_iter[i] /
                    (ctx->futhark_mc_segmap_task_128752_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128752_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128759     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128759_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128759_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128759_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128759_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128759_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128759_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128759_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128759_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128759_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128759_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128777         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128777_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128777_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128777_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128777_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128777_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128777_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128777_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128777_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128777_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128777_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128777_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128777_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128777_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128777_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128777_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128777_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128777_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128777_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128777_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128777_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128777_total_iter /
                (ctx->futhark_mc_segmap_parloop_128777_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128777_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128777_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128777_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128786         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128786_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128786_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128786_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128786_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128786_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128786_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128786_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128786_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128786_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128786_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128786_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128786_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128786_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128786_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128786_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128786_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128786_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128786_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128786_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128786_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128786_total_iter /
                (ctx->futhark_mc_segmap_parloop_128786_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128786_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128786_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128786_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128794 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128794_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128794_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128794_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128794_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128794_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128794_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128794_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128794_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128794_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128794_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128794_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128791            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128791_runs[i],
                    (long) ctx->futhark_mc_segred_task_128791_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128791_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128791_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128791_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128791_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128791_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128791_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128791_iter[i],
                    (long) ctx->futhark_mc_segred_task_128791_iter[i] /
                    (ctx->futhark_mc_segred_task_128791_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128791_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128799 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128799_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128799_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128799_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128799_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128799_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128799_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128799_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128799_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128799_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128799_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128799_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128796            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128796_runs[i],
                    (long) ctx->futhark_mc_segred_task_128796_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128796_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128796_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128796_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128796_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128796_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128796_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128796_iter[i],
                    (long) ctx->futhark_mc_segred_task_128796_iter[i] /
                    (ctx->futhark_mc_segred_task_128796_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128796_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128789         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128789_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128789_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128789_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128789_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128789_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128789_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128789_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128789_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128789_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128789_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128789_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128789_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128789_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128789_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128789_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128789_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128789_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128789_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128789_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128789_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128789_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128789_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128789_total_iter /
                (ctx->futhark_mc_segmap_parloop_128789_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128789_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128789_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128789_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128784            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128784_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128784_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128784_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128784_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128784_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128784_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128784_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128784_iter[i] /
                    (ctx->futhark_mc_segmap_task_128784_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128784_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128787     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128787_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128787_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128787_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128787_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128787_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128787_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128787_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128787_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128787_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128787_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128781         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128781_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128781_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128781_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128781_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128781_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128781_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128781_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128781_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128781_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128781_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128781_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128781_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128781_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128781_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128781_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128781_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128781_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128781_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128781_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128781_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128781_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128781_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128781_total_iter /
                (ctx->futhark_mc_segmap_parloop_128781_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128781_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128781_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128781_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128775            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128775_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128775_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128775_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128775_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128775_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128775_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128775_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128775_iter[i] /
                    (ctx->futhark_mc_segmap_task_128775_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128775_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128779     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128779_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128779_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128779_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128779_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128779_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128779_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128779_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128779_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128779_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128779_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128803         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128803_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128803_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128803_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128803_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128803_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128803_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128803_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128803_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128803_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128803_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128803_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128803_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128803_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128803_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128803_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128803_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128803_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128803_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128803_total_iter /
                (ctx->futhark_mc_segmap_parloop_128803_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128803_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128803_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128803_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128814         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128814_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128814_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128814_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128814_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128814_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128814_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128814_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128814_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128814_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128814_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128814_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128814_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128814_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128814_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128814_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128814_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128814_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128814_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128814_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128814_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128814_total_iter /
                (ctx->futhark_mc_segmap_parloop_128814_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128814_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128814_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128814_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128824 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128824_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128824_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128824_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128824_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128824_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128824_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128824_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128824_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128824_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128824_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128824_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128819            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128819_runs[i],
                    (long) ctx->futhark_mc_segred_task_128819_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128819_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128819_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128819_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128819_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128819_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128819_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128819_iter[i],
                    (long) ctx->futhark_mc_segred_task_128819_iter[i] /
                    (ctx->futhark_mc_segred_task_128819_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128819_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128830 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128830_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128830_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128830_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128830_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128830_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128830_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128830_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128830_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128830_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128830_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128830_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128826            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128826_runs[i],
                    (long) ctx->futhark_mc_segred_task_128826_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128826_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128826_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128826_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128826_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128826_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128826_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128826_iter[i],
                    (long) ctx->futhark_mc_segred_task_128826_iter[i] /
                    (ctx->futhark_mc_segred_task_128826_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128826_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128817         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128817_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128817_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128817_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128817_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128817_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128817_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128817_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128817_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128817_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128817_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128817_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128817_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128817_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128817_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128817_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128817_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128817_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128817_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128817_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128817_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128817_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128817_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128817_total_iter /
                (ctx->futhark_mc_segmap_parloop_128817_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128817_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128817_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128817_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128812            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128812_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128812_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128812_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128812_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128812_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128812_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128812_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128812_iter[i] /
                    (ctx->futhark_mc_segmap_task_128812_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128812_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128815     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128815_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128815_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128815_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128815_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128815_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128815_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128815_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128815_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128815_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128815_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128815_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128815_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128808         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128808_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128808_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128808_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128808_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128808_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128808_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128808_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128808_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128808_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128808_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128808_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128808_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128808_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128808_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128808_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128808_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128808_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128808_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128808_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128808_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128808_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128808_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128808_total_iter /
                (ctx->futhark_mc_segmap_parloop_128808_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128808_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128808_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128808_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128801            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128801_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128801_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128801_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128801_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128801_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128801_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128801_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128801_iter[i] /
                    (ctx->futhark_mc_segmap_task_128801_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128801_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128806     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128806_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128806_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128806_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128806_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128806_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128806_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128806_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128806_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128806_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128806_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128806_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128806_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128834         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128834_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128834_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128834_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128834_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128834_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128834_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128834_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128834_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128834_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128834_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128834_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128834_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128834_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128834_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128834_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128834_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128834_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128834_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128834_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128834_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128834_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128834_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128834_total_iter /
                (ctx->futhark_mc_segmap_parloop_128834_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128834_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128834_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128834_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128845         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128845_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128845_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128845_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128845_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128845_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128845_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128845_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128845_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128845_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128845_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128845_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128845_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128845_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128845_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128845_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128845_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128845_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128845_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128845_total_iter /
                (ctx->futhark_mc_segmap_parloop_128845_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128845_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128845_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128845_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128857 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128857_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128857_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128857_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128857_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128857_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128857_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128857_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128857_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128857_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128857_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128857_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128850            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128850_runs[i],
                    (long) ctx->futhark_mc_segred_task_128850_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128850_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128850_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128850_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128850_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128850_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128850_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128850_iter[i],
                    (long) ctx->futhark_mc_segred_task_128850_iter[i] /
                    (ctx->futhark_mc_segred_task_128850_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128850_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128863 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128863_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128863_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128863_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128863_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128863_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128863_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128863_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128863_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128863_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128863_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128863_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128859            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128859_runs[i],
                    (long) ctx->futhark_mc_segred_task_128859_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128859_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128859_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128859_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128859_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128859_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128859_iter[i],
                    (long) ctx->futhark_mc_segred_task_128859_iter[i] /
                    (ctx->futhark_mc_segred_task_128859_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128859_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128848         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128848_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128848_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128848_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128848_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128848_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128848_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128848_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128848_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128848_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128848_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128848_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128848_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128848_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128848_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128848_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128848_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128848_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128848_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128848_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128848_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128848_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128848_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128848_total_iter /
                (ctx->futhark_mc_segmap_parloop_128848_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128848_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128848_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128848_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128843            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128843_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128843_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128843_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128843_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128843_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128843_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128843_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128843_iter[i] /
                    (ctx->futhark_mc_segmap_task_128843_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128843_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128846     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128846_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128846_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128846_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128846_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128846_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128846_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128846_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128846_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128846_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128846_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128846_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128846_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128839         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128839_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128839_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128839_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128839_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128839_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128839_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128839_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128839_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128839_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128839_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128839_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128839_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128839_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128839_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128839_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128839_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128839_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128839_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128839_total_iter /
                (ctx->futhark_mc_segmap_parloop_128839_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128839_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128839_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128839_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128832            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128832_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128832_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128832_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128832_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128832_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128832_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128832_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128832_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128832_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128832_iter[i] /
                    (ctx->futhark_mc_segmap_task_128832_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128832_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128837     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128837_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128837_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128837_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128837_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128837_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128837_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128837_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128837_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128837_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128837_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128867         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128867_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128867_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128867_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128867_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128867_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128867_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128867_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128867_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128867_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128867_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128867_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128867_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128867_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128867_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128867_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128867_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128867_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128867_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128867_total_iter /
                (ctx->futhark_mc_segmap_parloop_128867_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128867_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128867_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128867_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128877         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128877_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128877_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128877_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128877_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128877_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128877_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128877_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128877_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128877_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128877_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128877_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128877_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128877_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128877_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128877_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128877_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128877_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128877_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128877_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128877_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128877_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128877_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128877_total_iter /
                (ctx->futhark_mc_segmap_parloop_128877_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128877_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128877_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128877_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128887 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128887_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128887_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128887_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128887_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128887_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128887_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128887_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128887_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128887_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128887_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128887_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128884            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128884_runs[i],
                    (long) ctx->futhark_mc_segred_task_128884_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128884_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128884_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128884_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128884_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128884_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128884_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128884_iter[i],
                    (long) ctx->futhark_mc_segred_task_128884_iter[i] /
                    (ctx->futhark_mc_segred_task_128884_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128884_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128892 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128892_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128892_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128892_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128892_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128892_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128892_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128892_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128892_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128892_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128892_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128892_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128889            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128889_runs[i],
                    (long) ctx->futhark_mc_segred_task_128889_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128889_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128889_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128889_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128889_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128889_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128889_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128889_iter[i],
                    (long) ctx->futhark_mc_segred_task_128889_iter[i] /
                    (ctx->futhark_mc_segred_task_128889_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128889_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128881         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128881_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128881_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128881_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128881_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128881_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128881_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128881_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128881_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128881_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128881_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128881_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128881_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128881_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128881_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128881_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128881_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128881_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128881_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128881_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128881_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128881_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128881_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128881_total_iter /
                (ctx->futhark_mc_segmap_parloop_128881_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128881_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128881_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128881_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128875            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128875_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128875_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128875_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128875_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128875_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128875_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128875_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128875_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128875_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128875_iter[i] /
                    (ctx->futhark_mc_segmap_task_128875_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128875_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128879     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128879_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128879_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128879_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128879_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128879_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128879_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128879_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128879_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128879_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128879_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128879_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128879_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128872         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128872_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128872_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128872_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128872_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128872_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128872_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128872_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128872_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128872_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128872_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128872_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128872_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128872_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128872_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128872_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128872_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128872_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128872_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128872_total_iter /
                (ctx->futhark_mc_segmap_parloop_128872_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128872_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128872_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128872_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128865            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128865_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128865_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128865_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128865_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128865_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128865_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128865_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128865_iter[i] /
                    (ctx->futhark_mc_segmap_task_128865_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128865_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128870     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128870_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128870_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128870_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128870_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128870_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128870_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128870_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128870_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128870_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128870_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128896         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128896_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128896_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128896_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128896_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128896_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128896_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128896_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128896_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128896_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128896_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128896_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128896_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128896_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128896_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128896_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128896_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128896_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128896_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128896_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128896_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128896_total_iter /
                (ctx->futhark_mc_segmap_parloop_128896_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128896_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128896_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128896_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128909         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128909_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128909_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128909_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128909_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128909_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128909_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128909_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128909_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128909_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128909_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128909_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128909_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128909_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128909_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128909_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128909_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128909_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128909_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128909_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128909_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128909_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128909_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128909_total_iter /
                (ctx->futhark_mc_segmap_parloop_128909_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128909_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128909_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128909_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128923 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128923_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128923_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128923_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128923_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128923_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128923_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128923_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128923_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128923_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128923_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128923_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128918            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128918_runs[i],
                    (long) ctx->futhark_mc_segred_task_128918_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128918_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128918_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128918_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128918_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128918_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128918_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128918_iter[i],
                    (long) ctx->futhark_mc_segred_task_128918_iter[i] /
                    (ctx->futhark_mc_segred_task_128918_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128918_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128929 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128929_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128929_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128929_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128929_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128929_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128929_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128929_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128929_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128929_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128929_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128929_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128925            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128925_runs[i],
                    (long) ctx->futhark_mc_segred_task_128925_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128925_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128925_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128925_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128925_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128925_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128925_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128925_iter[i],
                    (long) ctx->futhark_mc_segred_task_128925_iter[i] /
                    (ctx->futhark_mc_segred_task_128925_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128925_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128914         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128914_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128914_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128914_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128914_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128914_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128914_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128914_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128914_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128914_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128914_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128914_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128914_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128914_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128914_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128914_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128914_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128914_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128914_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128914_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128914_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128914_total_iter /
                (ctx->futhark_mc_segmap_parloop_128914_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128914_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128914_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128914_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128907            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128907_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128907_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128907_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128907_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128907_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128907_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128907_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128907_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128907_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128907_iter[i] /
                    (ctx->futhark_mc_segmap_task_128907_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128907_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128912     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128912_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128912_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128912_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128912_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128912_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128912_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128912_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128912_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128912_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128912_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128903         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128903_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128903_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128903_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128903_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128903_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128903_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128903_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128903_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128903_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128903_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128903_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128903_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128903_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128903_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128903_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128903_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128903_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128903_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128903_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128903_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128903_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128903_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128903_total_iter /
                (ctx->futhark_mc_segmap_parloop_128903_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128903_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128903_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128903_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128894            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128894_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128894_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128894_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128894_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128894_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128894_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128894_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128894_iter[i] /
                    (ctx->futhark_mc_segmap_task_128894_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128894_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128901     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128901_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128901_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128901_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128901_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128901_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128901_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128901_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128901_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128901_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128901_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128901_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128901_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128933         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128933_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128933_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128933_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128933_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128933_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128933_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128933_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128933_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128933_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128933_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128933_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128933_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128933_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128933_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128933_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128933_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128933_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128933_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128933_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128933_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128933_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128933_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128933_total_iter /
                (ctx->futhark_mc_segmap_parloop_128933_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128933_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128933_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128933_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128948         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128948_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128948_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128948_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128948_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128948_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128948_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128948_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128948_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128948_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128948_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128948_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128948_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128948_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128948_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128948_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128948_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128948_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128948_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128948_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128948_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128948_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128948_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128948_total_iter /
                (ctx->futhark_mc_segmap_parloop_128948_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128948_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128948_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128948_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128963         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128963_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128963_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128963_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128963_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128963_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128963_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128963_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128963_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128963_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128963_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128963_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128963_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128963_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128963_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128963_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128963_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128963_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128963_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128963_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128963_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128963_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128963_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128963_total_iter /
                (ctx->futhark_mc_segmap_parloop_128963_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128963_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128963_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128963_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128961            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128961_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128961_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128961_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128961_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128961_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128961_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128961_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128961_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128961_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128961_iter[i] /
                    (ctx->futhark_mc_segmap_task_128961_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128961_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128972 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128972_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128972_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128972_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128972_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128972_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128972_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128972_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128972_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128972_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128972_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128972_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128965            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128965_runs[i],
                    (long) ctx->futhark_mc_segred_task_128965_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128965_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128965_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128965_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128965_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128965_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128965_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128965_iter[i],
                    (long) ctx->futhark_mc_segred_task_128965_iter[i] /
                    (ctx->futhark_mc_segred_task_128965_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128965_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_128978 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_128978_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128978_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128978_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_128978_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128978_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128978_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128978_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_128978_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_128978_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_128978_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_128978_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_128974            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_128974_runs[i],
                    (long) ctx->futhark_mc_segred_task_128974_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128974_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128974_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_128974_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_128974_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_128974_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_128974_iter[i]),
                    (long) ctx->futhark_mc_segred_task_128974_iter[i],
                    (long) ctx->futhark_mc_segred_task_128974_iter[i] /
                    (ctx->futhark_mc_segred_task_128974_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_128974_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128955         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128955_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128955_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128955_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128955_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128955_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128955_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128955_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128955_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128955_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128955_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128955_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128955_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128955_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128955_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128955_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128955_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128955_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128955_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128955_total_iter /
                (ctx->futhark_mc_segmap_parloop_128955_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128955_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128955_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128955_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128946            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128946_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128946_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128946_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128946_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128946_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128946_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128946_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128946_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128946_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128946_iter[i] /
                    (ctx->futhark_mc_segmap_task_128946_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128946_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128953     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128953_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128953_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128953_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128953_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128953_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128953_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128953_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128953_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128953_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128953_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128942         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128942_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128942_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128942_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128942_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128942_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128942_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128942_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128942_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128942_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128942_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128942_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128942_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128942_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128942_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128942_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128942_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128942_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128942_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128942_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128942_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128942_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128942_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128942_total_iter /
                (ctx->futhark_mc_segmap_parloop_128942_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128942_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128942_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128942_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128931            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128931_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128931_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128931_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128931_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128931_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128931_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128931_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128931_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128931_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128931_iter[i] /
                    (ctx->futhark_mc_segmap_task_128931_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128931_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128940     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128940_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128940_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128940_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128940_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128940_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128940_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128940_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128940_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128940_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128940_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128982         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128982_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128982_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128982_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128982_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128982_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128982_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128982_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128982_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128982_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128982_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128982_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128982_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128982_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128982_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128982_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128982_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128982_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128982_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128982_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128982_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128982_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128982_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128982_total_iter /
                (ctx->futhark_mc_segmap_parloop_128982_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128982_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128982_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128982_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128991         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128991_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128991_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128991_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128991_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128991_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128991_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128991_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128991_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128991_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128991_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128991_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128991_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128991_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128991_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128991_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128991_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128991_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128991_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128991_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128991_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128991_total_iter /
                (ctx->futhark_mc_segmap_parloop_128991_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128991_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128991_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128991_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128989            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128989_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128989_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128989_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128989_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128989_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128989_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128989_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128989_iter[i] /
                    (ctx->futhark_mc_segmap_task_128989_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128989_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128986         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128986_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128986_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128986_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128986_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128986_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128986_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128986_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128986_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128986_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128986_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128986_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128986_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128986_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128986_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128986_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128986_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128986_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128986_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128986_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128986_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128986_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128986_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128986_total_iter /
                (ctx->futhark_mc_segmap_parloop_128986_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128986_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128986_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128986_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128980            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128980_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128980_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128980_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128980_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128980_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128980_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128980_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128980_iter[i] /
                    (ctx->futhark_mc_segmap_task_128980_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128980_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128984     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128984_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128984_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128984_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128984_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128984_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128984_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128984_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128984_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128984_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128984_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128984_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128984_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128995         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128995_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128995_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128995_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128995_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128995_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128995_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128995_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128995_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128995_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128995_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128995_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128995_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128995_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128995_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128995_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128995_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128995_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128995_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128995_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128995_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128995_total_iter /
                (ctx->futhark_mc_segmap_parloop_128995_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128995_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128995_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128995_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129004         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129004_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129004_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129004_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129004_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129004_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129004_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129004_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129004_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129004_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129004_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129004_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129004_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129004_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129004_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129004_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129004_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129004_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129004_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129004_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129004_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129004_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129004_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129004_total_iter /
                (ctx->futhark_mc_segmap_parloop_129004_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129004_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129004_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129004_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129002            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129002_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129002_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129002_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129002_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129002_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129002_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129002_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129002_iter[i] /
                    (ctx->futhark_mc_segmap_task_129002_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129002_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_128999         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_128999_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_128999_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128999_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128999_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_128999_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_128999_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_128999_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128999_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_128999_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_128999_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_128999_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_128999_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_128999_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_128999_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_128999_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128999_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128999_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_128999_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_128999_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_128999_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_128999_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_128999_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_128999_total_iter /
                (ctx->futhark_mc_segmap_parloop_128999_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_128999_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_128999_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_128999_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_128993            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_128993_runs[i],
                    (long) ctx->futhark_mc_segmap_task_128993_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128993_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128993_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_128993_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_128993_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_128993_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_128993_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_128993_iter[i],
                    (long) ctx->futhark_mc_segmap_task_128993_iter[i] /
                    (ctx->futhark_mc_segmap_task_128993_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_128993_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_128997     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_128997_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128997_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_128997_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_128997_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_128997_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_128997_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_128997_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_128997_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_128997_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_128997_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129008         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129008_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129008_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129008_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129008_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129008_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129008_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129008_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129008_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129008_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129008_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129008_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129008_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129008_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129008_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129008_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129008_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129008_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129008_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129008_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129008_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129008_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129008_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129008_total_iter /
                (ctx->futhark_mc_segmap_parloop_129008_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129008_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129008_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129008_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129017         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129017_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129017_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129017_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129017_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129017_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129017_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129017_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129017_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129017_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129017_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129017_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129017_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129017_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129017_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129017_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129017_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129017_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129017_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129017_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129017_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129017_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129017_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129017_total_iter /
                (ctx->futhark_mc_segmap_parloop_129017_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129017_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129017_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129017_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129015            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129015_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129015_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129015_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129015_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129015_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129015_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129015_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129015_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129015_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129015_iter[i] /
                    (ctx->futhark_mc_segmap_task_129015_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129015_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129012         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129012_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129012_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129012_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129012_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129012_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129012_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129012_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129012_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129012_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129012_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129012_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129012_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129012_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129012_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129012_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129012_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129012_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129012_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129012_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129012_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129012_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129012_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129012_total_iter /
                (ctx->futhark_mc_segmap_parloop_129012_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129012_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129012_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129012_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129006            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129006_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129006_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129006_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129006_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129006_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129006_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129006_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129006_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129006_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129006_iter[i] /
                    (ctx->futhark_mc_segmap_task_129006_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129006_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_129010     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_129010_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129010_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129010_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129010_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_129010_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_129010_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129010_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_129010_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_129010_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129010_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_129010_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129010_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129021         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129021_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129021_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129021_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129021_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129021_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129021_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129021_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129021_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129021_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129021_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129021_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129021_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129021_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129021_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129021_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129021_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129021_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129021_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129021_total_iter /
                (ctx->futhark_mc_segmap_parloop_129021_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129021_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129021_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129021_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_1_parloop_129046   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_1_parloop_129046_runs[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_129046_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_129046_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_1_parloop_129046_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_129046_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_129046_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_1_parloop_129046_iter[i],
                    (long) ctx->futhark_mc_scan_stage_1_parloop_129046_iter[i] /
                    (ctx->futhark_mc_scan_stage_1_parloop_129046_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_1_parloop_129046_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_1_parloop_129046_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs,
                (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime /
                (ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter),
                (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter,
                (long) ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter /
                (ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_scan_stage_3_parloop_129048   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_scan_stage_3_parloop_129048_runs[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_129048_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_129048_runs[i] : 1),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_runtime[i],
                    (double) ctx->futhark_mc_scan_stage_3_parloop_129048_total_runtime[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_129048_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_129048_iter[i]),
                    (long) ctx->futhark_mc_scan_stage_3_parloop_129048_iter[i],
                    (long) ctx->futhark_mc_scan_stage_3_parloop_129048_iter[i] /
                    (ctx->futhark_mc_scan_stage_3_parloop_129048_runs[i] !=
                     0 ? ctx->futhark_mc_scan_stage_3_parloop_129048_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_scan_stage_3_parloop_129048_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs,
                (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs : 1),
                (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime,
                (double) ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime /
                (ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter),
                (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter,
                (long) ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter /
                (ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs !=
                 0 ? ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segscan_task_129040           ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segscan_task_129040_runs[i],
                    (long) ctx->futhark_mc_segscan_task_129040_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_129040_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_129040_runs[i] : 1),
                    (long) ctx->futhark_mc_segscan_task_129040_total_runtime[i],
                    (double) ctx->futhark_mc_segscan_task_129040_total_runtime[i] /
                    (ctx->futhark_mc_segscan_task_129040_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segscan_task_129040_iter[i]),
                    (long) ctx->futhark_mc_segscan_task_129040_iter[i],
                    (long) ctx->futhark_mc_segscan_task_129040_iter[i] /
                    (ctx->futhark_mc_segscan_task_129040_runs[i] !=
                     0 ? ctx->futhark_mc_segscan_task_129040_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129052         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129052_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129052_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129052_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129052_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129052_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129052_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129052_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129052_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129052_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129052_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129052_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129052_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129052_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129052_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129052_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129052_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129052_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129052_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129052_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129052_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129052_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129052_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129052_total_iter /
                (ctx->futhark_mc_segmap_parloop_129052_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129052_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129052_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129052_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129050            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129050_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129050_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129050_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129050_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129050_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129050_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129050_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129050_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129050_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129050_iter[i] /
                    (ctx->futhark_mc_segmap_task_129050_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129050_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129031         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129031_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129031_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129031_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129031_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129031_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129031_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129031_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129031_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129031_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129031_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129031_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129031_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129031_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129031_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129031_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129031_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129031_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129031_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129031_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129031_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129031_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129031_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129031_total_iter /
                (ctx->futhark_mc_segmap_parloop_129031_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129031_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129031_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129031_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129019            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129019_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129019_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129019_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129019_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129019_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129019_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129019_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129019_iter[i] /
                    (ctx->futhark_mc_segmap_task_129019_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129019_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_129029     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_129029_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129029_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129029_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129029_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_129029_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_129029_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129029_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_129029_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_129029_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129029_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_129029_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129029_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129056         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129056_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129056_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129056_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129056_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129056_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129056_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129056_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129056_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129056_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129056_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129056_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129056_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129056_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129056_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129056_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129056_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129056_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129056_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129056_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129056_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129056_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129056_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129056_total_iter /
                (ctx->futhark_mc_segmap_parloop_129056_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129056_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129056_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129056_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_stage_1_parloop_129064 ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_stage_1_parloop_129064_runs[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_129064_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_129064_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_runtime[i],
                    (double) ctx->futhark_mc_segred_stage_1_parloop_129064_total_runtime[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_129064_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_129064_iter[i]),
                    (long) ctx->futhark_mc_segred_stage_1_parloop_129064_iter[i],
                    (long) ctx->futhark_mc_segred_stage_1_parloop_129064_iter[i] /
                    (ctx->futhark_mc_segred_stage_1_parloop_129064_runs[i] !=
                     0 ? ctx->futhark_mc_segred_stage_1_parloop_129064_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segred_stage_1_parloop_129064_total ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs,
                (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs : 1),
                (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime,
                (double) ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime /
                (ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter),
                (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter,
                (long) ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter /
                (ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs !=
                 0 ? ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime;
        ctx->total_runs +=
            ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segred_task_129061            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segred_task_129061_runs[i],
                    (long) ctx->futhark_mc_segred_task_129061_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_129061_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_129061_runs[i] : 1),
                    (long) ctx->futhark_mc_segred_task_129061_total_runtime[i],
                    (double) ctx->futhark_mc_segred_task_129061_total_runtime[i] /
                    (ctx->futhark_mc_segred_task_129061_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segred_task_129061_iter[i]),
                    (long) ctx->futhark_mc_segred_task_129061_iter[i],
                    (long) ctx->futhark_mc_segred_task_129061_iter[i] /
                    (ctx->futhark_mc_segred_task_129061_runs[i] !=
                     0 ? ctx->futhark_mc_segred_task_129061_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129059         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129059_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129059_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129059_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129059_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129059_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129059_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129059_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129059_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129059_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129059_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129059_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129059_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129059_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129059_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129059_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129059_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129059_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129059_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129059_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129059_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129059_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129059_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129059_total_iter /
                (ctx->futhark_mc_segmap_parloop_129059_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129059_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129059_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129059_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129054            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129054_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129054_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129054_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129054_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129054_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129054_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129054_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129054_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129054_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129054_iter[i] /
                    (ctx->futhark_mc_segmap_task_129054_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129054_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_129057     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_129057_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129057_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_129057_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_129057_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129057_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_129057_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_129057_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129057_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_129057_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129057_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129068         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129068_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129068_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129068_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129068_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129068_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129068_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129068_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129068_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129068_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129068_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129068_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129068_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129068_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129068_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129068_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129068_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129068_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129068_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129068_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129068_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129068_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129068_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129068_total_iter /
                (ctx->futhark_mc_segmap_parloop_129068_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129068_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129068_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129068_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129077         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129077_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129077_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129077_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129077_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129077_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129077_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129077_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129077_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129077_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129077_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129077_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129077_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129077_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129077_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129077_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129077_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129077_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129077_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129077_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129077_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129077_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129077_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129077_total_iter /
                (ctx->futhark_mc_segmap_parloop_129077_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129077_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129077_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129077_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129075            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129075_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129075_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129075_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129075_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129075_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129075_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129075_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129075_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129075_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129075_iter[i] /
                    (ctx->futhark_mc_segmap_task_129075_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129075_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129072         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129072_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129072_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129072_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129072_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129072_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129072_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129072_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129072_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129072_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129072_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129072_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129072_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129072_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129072_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129072_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129072_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129072_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129072_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129072_total_iter /
                (ctx->futhark_mc_segmap_parloop_129072_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129072_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129072_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129072_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129066            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129066_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129066_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129066_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129066_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129066_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129066_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129066_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129066_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129066_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129066_iter[i] /
                    (ctx->futhark_mc_segmap_task_129066_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129066_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_129070     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_129070_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129070_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_129070_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_129070_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129070_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_129070_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_129070_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129070_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_129070_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129070_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129081         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129081_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129081_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129081_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129081_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129081_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129081_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129081_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129081_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129081_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129081_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129081_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129081_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129081_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129081_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129081_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129081_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129081_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129081_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129081_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129081_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129081_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129081_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129081_total_iter /
                (ctx->futhark_mc_segmap_parloop_129081_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129081_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129081_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129081_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129090         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129090_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129090_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129090_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129090_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129090_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129090_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129090_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129090_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129090_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129090_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129090_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129090_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129090_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129090_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129090_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129090_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129090_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129090_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129090_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129090_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129090_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129090_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129090_total_iter /
                (ctx->futhark_mc_segmap_parloop_129090_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129090_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129090_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129090_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129088            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129088_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129088_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129088_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129088_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129088_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129088_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129088_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129088_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129088_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129088_iter[i] /
                    (ctx->futhark_mc_segmap_task_129088_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129088_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_parloop_129085         ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_parloop_129085_runs[i],
                    (long) ctx->futhark_mc_segmap_parloop_129085_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129085_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129085_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_parloop_129085_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_parloop_129085_total_runtime[i] /
                    (ctx->futhark_mc_segmap_parloop_129085_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129085_iter[i]),
                    (long) ctx->futhark_mc_segmap_parloop_129085_iter[i],
                    (long) ctx->futhark_mc_segmap_parloop_129085_iter[i] /
                    (ctx->futhark_mc_segmap_parloop_129085_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_parloop_129085_runs[i] : 1));
        fprintf(ctx->log,
                "         futhark_mc_segmap_parloop_129085_total   ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                ctx->futhark_mc_segmap_parloop_129085_total_runs,
                (long) ctx->futhark_mc_segmap_parloop_129085_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129085_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129085_total_runs : 1),
                (long) ctx->futhark_mc_segmap_parloop_129085_total_total_runtime,
                (double) ctx->futhark_mc_segmap_parloop_129085_total_total_runtime /
                (ctx->futhark_mc_segmap_parloop_129085_total_iter ==
                 0 ? 1 : (double) ctx->futhark_mc_segmap_parloop_129085_total_iter),
                (long) ctx->futhark_mc_segmap_parloop_129085_total_iter,
                (long) ctx->futhark_mc_segmap_parloop_129085_total_iter /
                (ctx->futhark_mc_segmap_parloop_129085_total_runs !=
                 0 ? ctx->futhark_mc_segmap_parloop_129085_total_runs : 1));
        ctx->total_runtime +=
            ctx->futhark_mc_segmap_parloop_129085_total_total_runtime;
        ctx->total_runs += ctx->futhark_mc_segmap_parloop_129085_total_runs;
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_task_129079            ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_task_129079_runs[i],
                    (long) ctx->futhark_mc_segmap_task_129079_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129079_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129079_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_task_129079_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_task_129079_total_runtime[i] /
                    (ctx->futhark_mc_segmap_task_129079_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_task_129079_iter[i]),
                    (long) ctx->futhark_mc_segmap_task_129079_iter[i],
                    (long) ctx->futhark_mc_segmap_task_129079_iter[i] /
                    (ctx->futhark_mc_segmap_task_129079_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_task_129079_runs[i] : 1));
        for (int i = 0; i < ctx->scheduler.num_threads; i++)
            fprintf(ctx->log,
                    "tid %2d - futhark_mc_segmap_nested_task_129083     ran %10d times; avg: %10ldus; total: %10ldus; time pr. iter %9.6f; iters %9ld; avg %ld\n",
                    i, ctx->futhark_mc_segmap_nested_task_129083_runs[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129083_runs[i] : 1),
                    (long) ctx->futhark_mc_segmap_nested_task_129083_total_runtime[i],
                    (double) ctx->futhark_mc_segmap_nested_task_129083_total_runtime[i] /
                    (ctx->futhark_mc_segmap_nested_task_129083_iter[i] ==
                     0 ? 1 : (double) ctx->futhark_mc_segmap_nested_task_129083_iter[i]),
                    (long) ctx->futhark_mc_segmap_nested_task_129083_iter[i],
                    (long) ctx->futhark_mc_segmap_nested_task_129083_iter[i] /
                    (ctx->futhark_mc_segmap_nested_task_129083_runs[i] !=
                     0 ? ctx->futhark_mc_segmap_nested_task_129083_runs[i] : 1));
    }
    return builder.str;
}
char *futhark_context_get_error(struct futhark_context *ctx)
{
    char *error = ctx->error;
    
    ctx->error = NULL;
    return error;
}
void futhark_context_set_logging_file(struct futhark_context *ctx, FILE *f)
{
    ctx->log = f;
}
void futhark_context_pause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 1;
}
void futhark_context_unpause_profiling(struct futhark_context *ctx)
{
    ctx->profiling_paused = 0;
}
int futhark_context_clear_caches(struct futhark_context *ctx)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    ctx->peak_mem_usage_default = 0;
    lock_unlock(&ctx->lock);
    return ctx->error != NULL;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_128302,
                             struct memblock *mem_out_p_128303,
                             struct memblock *mem_out_p_128304,
                             struct memblock Y_mem_119653, int64_t m_112803,
                             int64_t n_112804, int64_t n_p_112806,
                             int64_t t_window_112807, int64_t l_window_112808,
                             int64_t t_degree_112809, int64_t l_degree_112810,
                             int64_t t_jump_112811, int64_t l_jump_112812,
                             int64_t inner_112813, int64_t outer_112814,
                             int64_t jump_threshold_112815,
                             int64_t max_group_sizze_112816);
static int init_constants(struct futhark_context *ctx)
{
    (void) ctx;
    
    int err = 0;
    
    
  cleanup:
    return err;
}
static int free_constants(struct futhark_context *ctx)
{
    (void) ctx;
    return 0;
}
struct futhark_mc_task_128326 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    char *free_Y_mem_119653;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
};
struct futhark_mc_segmap_parloop_struct_128328 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    char *free_Y_mem_119653;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
};
static int futhark_mc_segmap_parloop_128329(void *args, int64_t start,
                                            int64_t end, int flat_tid_114971,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128328
    *futhark_mc_segmap_parloop_struct_128328 =
    (struct futhark_mc_segmap_parloop_struct_128328 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128328->ctx;
    uint64_t futhark_mc_segmap_parloop_128329_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128329_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128328->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128328->free_n_112804;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128328->free_i_112880;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128328->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128328->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128328->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128328->free_mem_119696,
                                  .size =0, .references =NULL};
    size_t mem_119662_cached_sizze_128330 = 0;
    char *mem_119662 = NULL;
    size_t mem_119677_cached_sizze_128331 = 0;
    char *mem_119677 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121510 = start;
    
    if (mem_119662_cached_sizze_128330 < (size_t) bytes_119654) {
        mem_119662 = realloc(mem_119662, bytes_119654);
        mem_119662_cached_sizze_128330 = bytes_119654;
    }
    if (mem_119677_cached_sizze_128331 < (size_t) bytes_119654) {
        mem_119677 = realloc(mem_119677, bytes_119654);
        mem_119677_cached_sizze_128331 = bytes_119654;
    }
    for (; iter_121510 < end; iter_121510++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121529 = m_112803;
        int64_t gtid_114972 = iter_121510;
        int64_t remnant_121530 = iter_121510 - gtid_114972;
        int64_t discard_119029;
        int64_t scanacc_121512 = (int64_t) 0;
        
        for (int64_t i_121511 = 0; i_121511 < n_112804; i_121511++) {
            float x_121514 = ((float *) Y_mem_119653.mem)[gtid_114972 *
                                                          n_112804 + i_121511];
            bool isnan_res_121515;
            
            isnan_res_121515 = futrts_isnan32(x_121514);
            
            bool defunc_0_p_res_121516 = !isnan_res_121515;
            int64_t defunc_0_f_res_121517 =
                    btoi_bool_i64(defunc_0_p_res_121516);
            int64_t defunc_1_op_res_121518 = add64(defunc_0_f_res_121517,
                                                   scanacc_121512);
            
            ((int64_t *) mem_119662)[i_121511] = defunc_1_op_res_121518;
            
            int64_t scanacc_tmp_121531 = defunc_1_op_res_121518;
            
            scanacc_121512 = scanacc_tmp_121531;
        }
        discard_119029 = scanacc_121512;
        
        int64_t last_res_112897 = ((int64_t *) mem_119662)[i_112880];
        
        for (int64_t i_121533 = 0; i_121533 < n_112804; i_121533++) {
            ((int64_t *) mem_119677)[i_121533] = (int64_t) -1;
        }
        for (int64_t write_iter_121520 = 0; write_iter_121520 < n_112804;
             write_iter_121520++) {
            float write_iv_121522 = ((float *) Y_mem_119653.mem)[gtid_114972 *
                                                                 n_112804 +
                                                                 write_iter_121520];
            bool isnan_res_121523;
            
            isnan_res_121523 = futrts_isnan32(write_iv_121522);
            
            bool defunc_0_p_res_121524 = !isnan_res_121523;
            int64_t defunc_1_f_res_121525;
            
            if (defunc_0_p_res_121524) {
                int64_t write_iv_121526 =
                        ((int64_t *) mem_119662)[write_iter_121520];
                int64_t defunc_1_f_res_t_res_121527 = sub64(write_iv_121526,
                                                            (int64_t) 1);
                
                defunc_1_f_res_121525 = defunc_1_f_res_t_res_121527;
            } else {
                defunc_1_f_res_121525 = (int64_t) -1;
            }
            if (sle64((int64_t) 0, defunc_1_f_res_121525) &&
                slt64(defunc_1_f_res_121525, n_112804)) {
                ((int64_t *) mem_119677)[defunc_1_f_res_121525] =
                    write_iter_121520;
            }
        }
        memmove(mem_119693.mem + gtid_114972 * n_112804 * (int64_t) 8,
                mem_119677 + (int64_t) 0, n_112804 * (int64_t) 8);
        ((int64_t *) mem_119696.mem)[gtid_114972] = last_res_112897;
    }
    
  cleanup:
    { }
    free(mem_119662);
    free(mem_119677);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128329_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128329_end -
                 futhark_mc_segmap_parloop_128329_start;
        
        ctx->futhark_mc_segmap_parloop_128329_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128329_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128329_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128327(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114971 = tid;
    int num_tasks_121509 = info.nsubtasks;
    struct futhark_mc_task_128326 *futhark_mc_task_128326 =
                                  (struct futhark_mc_task_128326 *) args;
    struct futhark_context *ctx = futhark_mc_task_128326->ctx;
    uint64_t futhark_mc_segmap_task_128327_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128327_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128326->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128326->free_n_112804;
    int64_t i_112880 = futhark_mc_task_128326->free_i_112880;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128326->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119654 = futhark_mc_task_128326->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128326->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128326->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t iter_121510;
    struct futhark_mc_segmap_parloop_struct_128328
    futhark_mc_segmap_parloop_struct_128328;
    
    futhark_mc_segmap_parloop_struct_128328.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128328.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128328.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128328.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128328.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128328.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128328.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128328.free_mem_119696 = mem_119696.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128329_task;
    
    futhark_mc_segmap_parloop_128329_task.name =
        "futhark_mc_segmap_parloop_128329";
    futhark_mc_segmap_parloop_128329_task.fn = futhark_mc_segmap_parloop_128329;
    futhark_mc_segmap_parloop_128329_task.args =
        &futhark_mc_segmap_parloop_struct_128328;
    futhark_mc_segmap_parloop_128329_task.iterations = iterations;
    futhark_mc_segmap_parloop_128329_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128329_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128329_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128329_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128329_task);
    
    if (futhark_mc_segmap_parloop_128329_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128329_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128329_total_end -
                 futhark_mc_segmap_parloop_128329_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128329_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128329_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128329_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128327_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128327_end -
                 futhark_mc_segmap_task_128327_start;
        
        ctx->futhark_mc_segmap_task_128327_runs[tid]++;
        ctx->futhark_mc_segmap_task_128327_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128327_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128333 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    char *free_Y_mem_119653;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
};
struct futhark_mc_task_128337 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_114974;
    char *free_Y_mem_119653;
    char *free_mem_119656;
};
struct futhark_mc_scan_stage_1_parloop_struct_128340 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_114974;
    char *free_Y_mem_119653;
    char *free_mem_119656;
};
static int futhark_mc_scan_stage_1_parloop_128341(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_114975, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128340
    *futhark_mc_scan_stage_1_parloop_struct_128340 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128340 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128340->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128341_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128341_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_scan_stage_1_parloop_struct_128340->free_n_112804;
    int64_t gtid_114974 =
            futhark_mc_scan_stage_1_parloop_struct_128340->free_gtid_114974;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_scan_stage_1_parloop_struct_128340->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119656 = {.desc ="mem_119656", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128340->free_mem_119656,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121552 = start;
    int64_t x_121536;
    int64_t x_121537;
    
    x_121536 = (int64_t) 0;
    for (; iter_121552 < end; iter_121552++) {
        int64_t gtid_114976 = iter_121552;
        
        // stage 1 scan body
        {
            float x_121539 = ((float *) Y_mem_119653.mem)[gtid_114974 *
                                                          n_112804 +
                                                          gtid_114976];
            bool isnan_res_121540;
            
            isnan_res_121540 = futrts_isnan32(x_121539);
            
            bool defunc_0_p_res_121541 = !isnan_res_121540;
            int64_t defunc_0_f_res_121542 =
                    btoi_bool_i64(defunc_0_p_res_121541);
            
            // write mapped values results to memory
            { }
            x_121536 = x_121536;
            // Read next values
            {
                x_121537 = defunc_0_f_res_121542;
            }
            
            int64_t defunc_1_op_res_121538 = add64(x_121536, x_121537);
            
            ((int64_t *) mem_119656.mem)[gtid_114976] = defunc_1_op_res_121538;
            x_121536 = defunc_1_op_res_121538;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128341_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128341_end -
                 futhark_mc_scan_stage_1_parloop_128341_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128341_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128341_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128341_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128342 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_114974;
    char *free_Y_mem_119653;
    char *free_mem_119656;
};
static int futhark_mc_scan_stage_3_parloop_128343(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_114975, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128342
    *futhark_mc_scan_stage_3_parloop_struct_128342 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128342 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128342->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128343_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128343_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_scan_stage_3_parloop_struct_128342->free_n_112804;
    int64_t gtid_114974 =
            futhark_mc_scan_stage_3_parloop_struct_128342->free_gtid_114974;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_scan_stage_3_parloop_struct_128342->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119656 = {.desc ="mem_119656", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128342->free_mem_119656,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121564 = start;
    int64_t x_121561;
    int64_t x_121562;
    
    if (iter_121564 == (int64_t) 0) {
        x_121561 = (int64_t) 0;
    } else {
        x_121561 = ((int64_t *) mem_119656.mem)[iter_121564 - (int64_t) 1];
    }
    for (; iter_121564 < end; iter_121564++) {
        int64_t gtid_114976 = iter_121564;
        
        // stage 3 scan body
        {
            float x_121539 = ((float *) Y_mem_119653.mem)[gtid_114974 *
                                                          n_112804 +
                                                          gtid_114976];
            bool isnan_res_121540;
            
            isnan_res_121540 = futrts_isnan32(x_121539);
            
            bool defunc_0_p_res_121541 = !isnan_res_121540;
            int64_t defunc_0_f_res_121542 =
                    btoi_bool_i64(defunc_0_p_res_121541);
            
            x_121561 = x_121561;
            x_121562 = defunc_0_f_res_121542;
            
            int64_t defunc_1_op_res_121563 = add64(x_121561, x_121562);
            
            ((int64_t *) mem_119656.mem)[gtid_114976] = defunc_1_op_res_121563;
            x_121561 = defunc_1_op_res_121563;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128343_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128343_end -
                 futhark_mc_scan_stage_3_parloop_128343_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128343_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128343_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128343_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128338(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114975 = tid;
    int num_tasks_121551 = info.nsubtasks;
    struct futhark_mc_task_128337 *futhark_mc_task_128337 =
                                  (struct futhark_mc_task_128337 *) args;
    struct futhark_context *ctx = futhark_mc_task_128337->ctx;
    uint64_t futhark_mc_segscan_task_128338_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128338_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128337->free_n_112804;
    int64_t gtid_114974 = futhark_mc_task_128337->free_gtid_114974;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128337->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119656 = {.desc ="mem_119656", .mem =
                                  futhark_mc_task_128337->free_mem_119656,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_121558_cached_sizze_128339 = 0;
    char *scan_stage_2_accum_mem_121558 = NULL;
    int64_t iter_121552;
    struct futhark_mc_scan_stage_1_parloop_struct_128340
    futhark_mc_scan_stage_1_parloop_struct_128340;
    
    futhark_mc_scan_stage_1_parloop_struct_128340.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128340.free_n_112804 = n_112804;
    futhark_mc_scan_stage_1_parloop_struct_128340.free_gtid_114974 =
        gtid_114974;
    futhark_mc_scan_stage_1_parloop_struct_128340.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_scan_stage_1_parloop_struct_128340.free_mem_119656 =
        mem_119656.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128341_task;
    
    futhark_mc_scan_stage_1_parloop_128341_task.name =
        "futhark_mc_scan_stage_1_parloop_128341";
    futhark_mc_scan_stage_1_parloop_128341_task.fn =
        futhark_mc_scan_stage_1_parloop_128341;
    futhark_mc_scan_stage_1_parloop_128341_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128340;
    futhark_mc_scan_stage_1_parloop_128341_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128341_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128341_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128341_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128341_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128341_task);
    
    if (futhark_mc_scan_stage_1_parloop_128341_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128341_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128341_total_end -
                 futhark_mc_scan_stage_1_parloop_128341_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128341_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128341_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128341_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_121551)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_121553;
        int64_t x_121554;
        int64_t offset_121556 = (int64_t) 0;
        int64_t offset_index_121557 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_121558_cached_sizze_128339 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_121558 =
                realloc(scan_stage_2_accum_mem_121558, (int64_t) 8);
            scan_stage_2_accum_mem_121558_cached_sizze_128339 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_121558)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_121560 = 0; i_121560 < num_tasks_121551 - 1;
             i_121560++) {
            offset_121556 = squot64(n_112804, sext_i32_i64(num_tasks_121551));
            if (slt64(sext_i32_i64(i_121560), srem64(n_112804,
                                                     sext_i32_i64(num_tasks_121551)))) {
                offset_121556 += (int64_t) 1;
            }
            offset_index_121557 += offset_121556;
            
            int64_t gtid_114976 = offset_index_121557;
            float x_121539 = ((float *) Y_mem_119653.mem)[gtid_114974 *
                                                          n_112804 +
                                                          gtid_114976];
            bool isnan_res_121540;
            
            isnan_res_121540 = futrts_isnan32(x_121539);
            
            bool defunc_0_p_res_121541 = !isnan_res_121540;
            int64_t defunc_0_f_res_121542 =
                    btoi_bool_i64(defunc_0_p_res_121541);
            
            // Read carry in
            {
                x_121553 =
                    ((int64_t *) scan_stage_2_accum_mem_121558)[(int64_t) 0];
            }
            // Read next values
            {
                x_121554 = ((int64_t *) mem_119656.mem)[offset_index_121557 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_121555 = add64(x_121553, x_121554);
            
            ((int64_t *) mem_119656.mem)[offset_index_121557 - (int64_t) 1] =
                defunc_1_op_res_121555;
            ((int64_t *) scan_stage_2_accum_mem_121558)[(int64_t) 0] =
                defunc_1_op_res_121555;
        }
        
        int64_t iter_121564 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128342
        futhark_mc_scan_stage_3_parloop_struct_128342;
        
        futhark_mc_scan_stage_3_parloop_struct_128342.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128342.free_n_112804 = n_112804;
        futhark_mc_scan_stage_3_parloop_struct_128342.free_gtid_114974 =
            gtid_114974;
        futhark_mc_scan_stage_3_parloop_struct_128342.free_Y_mem_119653 =
            Y_mem_119653.mem;
        futhark_mc_scan_stage_3_parloop_struct_128342.free_mem_119656 =
            mem_119656.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128343_task;
        
        futhark_mc_scan_stage_3_parloop_128343_task.name =
            "futhark_mc_scan_stage_3_parloop_128343";
        futhark_mc_scan_stage_3_parloop_128343_task.fn =
            futhark_mc_scan_stage_3_parloop_128343;
        futhark_mc_scan_stage_3_parloop_128343_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128342;
        futhark_mc_scan_stage_3_parloop_128343_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128343_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128343_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128343_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128343_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128343_task);
        
        if (futhark_mc_scan_stage_3_parloop_128343_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128343_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128343_total_end -
                     futhark_mc_scan_stage_3_parloop_128343_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128343_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128343_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128343_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_121558);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128338_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128338_end -
                 futhark_mc_segscan_task_128338_start;
        
        ctx->futhark_mc_segscan_task_128338_runs[tid]++;
        ctx->futhark_mc_segscan_task_128338_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128338_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128344 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_114974;
    char *free_Y_mem_119653;
    char *free_mem_119656;
    char *free_mem_119659;
};
struct futhark_mc_segmap_parloop_struct_128346 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_114974;
    char *free_Y_mem_119653;
    char *free_mem_119656;
    char *free_mem_119659;
};
static int futhark_mc_segmap_parloop_128347(void *args, int64_t start,
                                            int64_t end, int flat_tid_114977,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128346
    *futhark_mc_segmap_parloop_struct_128346 =
    (struct futhark_mc_segmap_parloop_struct_128346 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128346->ctx;
    uint64_t futhark_mc_segmap_parloop_128347_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128347_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128346->free_n_112804;
    int64_t gtid_114974 =
            futhark_mc_segmap_parloop_struct_128346->free_gtid_114974;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128346->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119656 = {.desc ="mem_119656", .mem =
                                  futhark_mc_segmap_parloop_struct_128346->free_mem_119656,
                                  .size =0, .references =NULL};
    struct memblock mem_119659 = {.desc ="mem_119659", .mem =
                                  futhark_mc_segmap_parloop_struct_128346->free_mem_119659,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121567 = start;
    
    for (; iter_121567 < end; iter_121567++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121570 = n_112804;
        int64_t gtid_114978 = iter_121567;
        int64_t remnant_121571 = iter_121567 - gtid_114978;
        float x_121543 = ((float *) Y_mem_119653.mem)[gtid_114974 * n_112804 +
                                                      gtid_114978];
        bool isnan_res_121544;
        
        isnan_res_121544 = futrts_isnan32(x_121543);
        
        bool defunc_0_p_res_121545 = !isnan_res_121544;
        int64_t defunc_1_f_res_121546;
        
        if (defunc_0_p_res_121545) {
            int64_t x_121568 = ((int64_t *) mem_119656.mem)[gtid_114978];
            int64_t defunc_1_f_res_t_res_121569 = sub64(x_121568, (int64_t) 1);
            
            defunc_1_f_res_121546 = defunc_1_f_res_t_res_121569;
        } else {
            defunc_1_f_res_121546 = (int64_t) -1;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_121546) &&
            slt64(defunc_1_f_res_121546, n_112804)) {
            ((int64_t *) mem_119659.mem)[defunc_1_f_res_121546] = gtid_114978;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128347_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128347_end -
                 futhark_mc_segmap_parloop_128347_start;
        
        ctx->futhark_mc_segmap_parloop_128347_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128347_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128347_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128345(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114977 = tid;
    int num_tasks_121566 = info.nsubtasks;
    struct futhark_mc_task_128344 *futhark_mc_task_128344 =
                                  (struct futhark_mc_task_128344 *) args;
    struct futhark_context *ctx = futhark_mc_task_128344->ctx;
    uint64_t futhark_mc_segmap_task_128345_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128345_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128344->free_n_112804;
    int64_t gtid_114974 = futhark_mc_task_128344->free_gtid_114974;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128344->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119656 = {.desc ="mem_119656", .mem =
                                  futhark_mc_task_128344->free_mem_119656,
                                  .size =0, .references =NULL};
    struct memblock mem_119659 = {.desc ="mem_119659", .mem =
                                  futhark_mc_task_128344->free_mem_119659,
                                  .size =0, .references =NULL};
    int64_t iter_121567;
    struct futhark_mc_segmap_parloop_struct_128346
    futhark_mc_segmap_parloop_struct_128346;
    
    futhark_mc_segmap_parloop_struct_128346.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128346.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128346.free_gtid_114974 = gtid_114974;
    futhark_mc_segmap_parloop_struct_128346.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128346.free_mem_119656 = mem_119656.mem;
    futhark_mc_segmap_parloop_struct_128346.free_mem_119659 = mem_119659.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128347_task;
    
    futhark_mc_segmap_parloop_128347_task.name =
        "futhark_mc_segmap_parloop_128347";
    futhark_mc_segmap_parloop_128347_task.fn = futhark_mc_segmap_parloop_128347;
    futhark_mc_segmap_parloop_128347_task.args =
        &futhark_mc_segmap_parloop_struct_128346;
    futhark_mc_segmap_parloop_128347_task.iterations = iterations;
    futhark_mc_segmap_parloop_128347_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128347_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128347_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128347_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128347_task);
    
    if (futhark_mc_segmap_parloop_128347_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128347_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128347_total_end -
                 futhark_mc_segmap_parloop_128347_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128347_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128347_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128347_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128345_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128345_end -
                 futhark_mc_segmap_task_128345_start;
        
        ctx->futhark_mc_segmap_task_128345_runs[tid]++;
        ctx->futhark_mc_segmap_task_128345_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128345_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128334(void *args, int64_t start,
                                            int64_t end, int flat_tid_114973,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128333
    *futhark_mc_segmap_parloop_struct_128333 =
    (struct futhark_mc_segmap_parloop_struct_128333 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128333->ctx;
    uint64_t futhark_mc_segmap_parloop_128334_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128334_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128333->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128333->free_n_112804;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128333->free_i_112880;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128333->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128333->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128333->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128333->free_mem_119696,
                                  .size =0, .references =NULL};
    size_t mem_119656_cached_sizze_128335 = 0;
    char *mem_119656 = NULL;
    size_t mem_119659_cached_sizze_128336 = 0;
    char *mem_119659 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121535 = start;
    
    if (mem_119656_cached_sizze_128335 < (size_t) bytes_119654) {
        mem_119656 = realloc(mem_119656, bytes_119654);
        mem_119656_cached_sizze_128335 = bytes_119654;
    }
    if (mem_119659_cached_sizze_128336 < (size_t) bytes_119654) {
        mem_119659 = realloc(mem_119659, bytes_119654);
        mem_119659_cached_sizze_128336 = bytes_119654;
    }
    for (; iter_121535 < end; iter_121535++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121549 = m_112803;
        int64_t gtid_114974 = iter_121535;
        int64_t remnant_121550 = iter_121535 - gtid_114974;
        int64_t flat_tid_114975 = (int64_t) 0;
        int32_t num_tasks_121551;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128337 futhark_mc_task_128337;
        
        futhark_mc_task_128337.ctx = ctx;
        futhark_mc_task_128337.free_n_112804 = n_112804;
        futhark_mc_task_128337.free_gtid_114974 = gtid_114974;
        futhark_mc_task_128337.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128337.free_mem_119656 = mem_119656;
        
        struct scheduler_segop futhark_mc_task_128337_task;
        
        futhark_mc_task_128337_task.args = &futhark_mc_task_128337;
        futhark_mc_task_128337_task.top_level_fn =
            futhark_mc_segscan_task_128338;
        futhark_mc_task_128337_task.name = "futhark_mc_segscan_task_128338";
        futhark_mc_task_128337_task.iterations = n_112804;
        futhark_mc_task_128337_task.task_time =
            &ctx->futhark_mc_segscan_task_128338_total_time;
        futhark_mc_task_128337_task.task_iter =
            &ctx->futhark_mc_segscan_task_128338_total_iter;
        futhark_mc_task_128337_task.sched = STATIC;
        futhark_mc_task_128337_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128338_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128337_task);
        
        if (futhark_mc_segscan_task_128338_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t last_res_114988 = ((int64_t *) mem_119656)[i_112880];
        
        for (int64_t i_121565 = 0; i_121565 < n_112804; i_121565++) {
            ((int64_t *) mem_119659)[i_121565] = (int64_t) -1;
        }
        
        int64_t flat_tid_114977 = (int64_t) 0;
        int32_t num_tasks_121566;
        struct futhark_mc_task_128344 futhark_mc_task_128344;
        
        futhark_mc_task_128344.ctx = ctx;
        futhark_mc_task_128344.free_n_112804 = n_112804;
        futhark_mc_task_128344.free_gtid_114974 = gtid_114974;
        futhark_mc_task_128344.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128344.free_mem_119656 = mem_119656;
        futhark_mc_task_128344.free_mem_119659 = mem_119659;
        
        struct scheduler_segop futhark_mc_task_128344_task;
        
        futhark_mc_task_128344_task.args = &futhark_mc_task_128344;
        futhark_mc_task_128344_task.top_level_fn =
            futhark_mc_segmap_task_128345;
        futhark_mc_task_128344_task.name = "futhark_mc_segmap_task_128345";
        futhark_mc_task_128344_task.iterations = n_112804;
        futhark_mc_task_128344_task.task_time =
            &ctx->futhark_mc_segmap_task_128345_total_time;
        futhark_mc_task_128344_task.task_iter =
            &ctx->futhark_mc_segmap_task_128345_total_iter;
        futhark_mc_task_128344_task.sched = STATIC;
        futhark_mc_task_128344_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128345_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128344_task);
        
        if (futhark_mc_segmap_task_128345_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119693.mem + gtid_114974 * n_112804 * (int64_t) 8,
                mem_119659 + (int64_t) 0, n_112804 * (int64_t) 8);
        ((int64_t *) mem_119696.mem)[gtid_114974] = last_res_114988;
    }
    
  cleanup:
    { }
    free(mem_119656);
    free(mem_119659);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128334_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128334_end -
                 futhark_mc_segmap_parloop_128334_start;
        
        ctx->futhark_mc_segmap_parloop_128334_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128334_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128334_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128332(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114973 = tid;
    int num_tasks_121509 = info.nsubtasks;
    struct futhark_mc_task_128326 *futhark_mc_task_128326 =
                                  (struct futhark_mc_task_128326 *) args;
    struct futhark_context *ctx = futhark_mc_task_128326->ctx;
    uint64_t futhark_mc_segmap_nested_task_128332_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128332_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128326->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128326->free_n_112804;
    int64_t i_112880 = futhark_mc_task_128326->free_i_112880;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128326->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119654 = futhark_mc_task_128326->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128326->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128326->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t iter_121535;
    struct futhark_mc_segmap_parloop_struct_128333
    futhark_mc_segmap_parloop_struct_128333;
    
    futhark_mc_segmap_parloop_struct_128333.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128333.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128333.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128333.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128333.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128333.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128333.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128333.free_mem_119696 = mem_119696.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128334_task;
    
    futhark_mc_segmap_parloop_128334_task.name =
        "futhark_mc_segmap_parloop_128334";
    futhark_mc_segmap_parloop_128334_task.fn = futhark_mc_segmap_parloop_128334;
    futhark_mc_segmap_parloop_128334_task.args =
        &futhark_mc_segmap_parloop_struct_128333;
    futhark_mc_segmap_parloop_128334_task.iterations = iterations;
    futhark_mc_segmap_parloop_128334_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128334_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128334_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128334_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128334_task);
    
    if (futhark_mc_segmap_parloop_128334_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128334_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128334_total_end -
                 futhark_mc_segmap_parloop_128334_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128334_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128334_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128334_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128332_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128332_end -
                 futhark_mc_segmap_nested_task_128332_start;
        
        ctx->futhark_mc_segmap_nested_task_128332_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128332_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128332_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128348 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_119718;
};
struct futhark_mc_segmap_parloop_struct_128350 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_119718;
};
static int futhark_mc_segmap_parloop_128351(void *args, int64_t start,
                                            int64_t end, int flat_tid_114998,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128350
    *futhark_mc_segmap_parloop_struct_128350 =
    (struct futhark_mc_segmap_parloop_struct_128350 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128350->ctx;
    uint64_t futhark_mc_segmap_parloop_128351_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128351_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128350->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128350->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128350->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128350->free_bytes_119697;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128350->free_mem_119718,
                                  .size =0, .references =NULL};
    size_t mem_119702_cached_sizze_128352 = 0;
    char *mem_119702 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121573 = start;
    
    if (mem_119702_cached_sizze_128352 < (size_t) bytes_119697) {
        mem_119702 = realloc(mem_119702, bytes_119697);
        mem_119702_cached_sizze_128352 = bytes_119697;
    }
    for (; iter_121573 < end; iter_121573++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121579 = m_112803;
        int64_t gtid_114999 = iter_121573;
        int64_t remnant_121580 = iter_121573 - gtid_114999;
        
        for (int64_t i_121574 = 0; i_121574 < n_112804; i_121574++) {
            int64_t x_121576 = ((int64_t *) mem_119693.mem)[gtid_114999 *
                                                            n_112804 +
                                                            i_121574];
            float i64_res_121577 = sitofp_i64_f32(x_121576);
            
            ((float *) mem_119702)[i_121574] = i64_res_121577;
        }
        memmove(mem_119718.mem + gtid_114999 * n_112804 * (int64_t) 4,
                mem_119702 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119702);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128351_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128351_end -
                 futhark_mc_segmap_parloop_128351_start;
        
        ctx->futhark_mc_segmap_parloop_128351_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128351_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128351_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128349(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_114998 = tid;
    int num_tasks_121572 = info.nsubtasks;
    struct futhark_mc_task_128348 *futhark_mc_task_128348 =
                                  (struct futhark_mc_task_128348 *) args;
    struct futhark_context *ctx = futhark_mc_task_128348->ctx;
    uint64_t futhark_mc_segmap_task_128349_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128349_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128348->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128348->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128348->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128348->free_bytes_119697;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128348->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t iter_121573;
    struct futhark_mc_segmap_parloop_struct_128350
    futhark_mc_segmap_parloop_struct_128350;
    
    futhark_mc_segmap_parloop_struct_128350.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128350.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128350.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128350.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128350.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128350.free_mem_119718 = mem_119718.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128351_task;
    
    futhark_mc_segmap_parloop_128351_task.name =
        "futhark_mc_segmap_parloop_128351";
    futhark_mc_segmap_parloop_128351_task.fn = futhark_mc_segmap_parloop_128351;
    futhark_mc_segmap_parloop_128351_task.args =
        &futhark_mc_segmap_parloop_struct_128350;
    futhark_mc_segmap_parloop_128351_task.iterations = iterations;
    futhark_mc_segmap_parloop_128351_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128351_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128351_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128351_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128351_task);
    
    if (futhark_mc_segmap_parloop_128351_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128351_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128351_total_end -
                 futhark_mc_segmap_parloop_128351_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128351_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128351_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128351_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128349_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128349_end -
                 futhark_mc_segmap_task_128349_start;
        
        ctx->futhark_mc_segmap_task_128349_runs[tid]++;
        ctx->futhark_mc_segmap_task_128349_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128349_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128354 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_119718;
};
struct futhark_mc_task_128357 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115001;
    char *free_mem_119693;
    char *free_mem_119699;
};
struct futhark_mc_segmap_parloop_struct_128359 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115001;
    char *free_mem_119693;
    char *free_mem_119699;
};
static int futhark_mc_segmap_parloop_128360(void *args, int64_t start,
                                            int64_t end, int flat_tid_115002,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128359
    *futhark_mc_segmap_parloop_struct_128359 =
    (struct futhark_mc_segmap_parloop_struct_128359 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128359->ctx;
    uint64_t futhark_mc_segmap_parloop_128360_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128360_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128359->free_n_112804;
    int64_t gtid_115001 =
            futhark_mc_segmap_parloop_struct_128359->free_gtid_115001;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128359->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119699 = {.desc ="mem_119699", .mem =
                                  futhark_mc_segmap_parloop_struct_128359->free_mem_119699,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121588 = start;
    
    for (; iter_121588 < end; iter_121588++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121589 = n_112804;
        int64_t gtid_115003 = iter_121588;
        int64_t remnant_121590 = iter_121588 - gtid_115003;
        int64_t x_121583 = ((int64_t *) mem_119693.mem)[gtid_115001 * n_112804 +
                                                        gtid_115003];
        float i64_res_121584 = sitofp_i64_f32(x_121583);
        
        ((float *) mem_119699.mem)[gtid_115003] = i64_res_121584;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128360_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128360_end -
                 futhark_mc_segmap_parloop_128360_start;
        
        ctx->futhark_mc_segmap_parloop_128360_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128360_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128360_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128358(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115002 = tid;
    int num_tasks_121587 = info.nsubtasks;
    struct futhark_mc_task_128357 *futhark_mc_task_128357 =
                                  (struct futhark_mc_task_128357 *) args;
    struct futhark_context *ctx = futhark_mc_task_128357->ctx;
    uint64_t futhark_mc_segmap_task_128358_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128358_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128357->free_n_112804;
    int64_t gtid_115001 = futhark_mc_task_128357->free_gtid_115001;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128357->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119699 = {.desc ="mem_119699", .mem =
                                  futhark_mc_task_128357->free_mem_119699,
                                  .size =0, .references =NULL};
    int64_t iter_121588;
    struct futhark_mc_segmap_parloop_struct_128359
    futhark_mc_segmap_parloop_struct_128359;
    
    futhark_mc_segmap_parloop_struct_128359.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128359.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128359.free_gtid_115001 = gtid_115001;
    futhark_mc_segmap_parloop_struct_128359.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128359.free_mem_119699 = mem_119699.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128360_task;
    
    futhark_mc_segmap_parloop_128360_task.name =
        "futhark_mc_segmap_parloop_128360";
    futhark_mc_segmap_parloop_128360_task.fn = futhark_mc_segmap_parloop_128360;
    futhark_mc_segmap_parloop_128360_task.args =
        &futhark_mc_segmap_parloop_struct_128359;
    futhark_mc_segmap_parloop_128360_task.iterations = iterations;
    futhark_mc_segmap_parloop_128360_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128360_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128360_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128360_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128360_task);
    
    if (futhark_mc_segmap_parloop_128360_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128360_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128360_total_end -
                 futhark_mc_segmap_parloop_128360_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128360_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128360_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128360_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128358_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128358_end -
                 futhark_mc_segmap_task_128358_start;
        
        ctx->futhark_mc_segmap_task_128358_runs[tid]++;
        ctx->futhark_mc_segmap_task_128358_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128358_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128355(void *args, int64_t start,
                                            int64_t end, int flat_tid_115000,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128354
    *futhark_mc_segmap_parloop_struct_128354 =
    (struct futhark_mc_segmap_parloop_struct_128354 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128354->ctx;
    uint64_t futhark_mc_segmap_parloop_128355_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128355_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128354->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128354->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128354->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128354->free_bytes_119697;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128354->free_mem_119718,
                                  .size =0, .references =NULL};
    size_t mem_119699_cached_sizze_128356 = 0;
    char *mem_119699 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121582 = start;
    
    if (mem_119699_cached_sizze_128356 < (size_t) bytes_119697) {
        mem_119699 = realloc(mem_119699, bytes_119697);
        mem_119699_cached_sizze_128356 = bytes_119697;
    }
    for (; iter_121582 < end; iter_121582++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121585 = m_112803;
        int64_t gtid_115001 = iter_121582;
        int64_t remnant_121586 = iter_121582 - gtid_115001;
        int64_t flat_tid_115002 = (int64_t) 0;
        int32_t num_tasks_121587;
        struct futhark_mc_task_128357 futhark_mc_task_128357;
        
        futhark_mc_task_128357.ctx = ctx;
        futhark_mc_task_128357.free_n_112804 = n_112804;
        futhark_mc_task_128357.free_gtid_115001 = gtid_115001;
        futhark_mc_task_128357.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128357.free_mem_119699 = mem_119699;
        
        struct scheduler_segop futhark_mc_task_128357_task;
        
        futhark_mc_task_128357_task.args = &futhark_mc_task_128357;
        futhark_mc_task_128357_task.top_level_fn =
            futhark_mc_segmap_task_128358;
        futhark_mc_task_128357_task.name = "futhark_mc_segmap_task_128358";
        futhark_mc_task_128357_task.iterations = n_112804;
        futhark_mc_task_128357_task.task_time =
            &ctx->futhark_mc_segmap_task_128358_total_time;
        futhark_mc_task_128357_task.task_iter =
            &ctx->futhark_mc_segmap_task_128358_total_iter;
        futhark_mc_task_128357_task.sched = STATIC;
        futhark_mc_task_128357_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128358_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128357_task);
        
        if (futhark_mc_segmap_task_128358_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119718.mem + gtid_115001 * n_112804 * (int64_t) 4,
                mem_119699 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119699);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128355_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128355_end -
                 futhark_mc_segmap_parloop_128355_start;
        
        ctx->futhark_mc_segmap_parloop_128355_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128355_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128355_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128353(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115000 = tid;
    int num_tasks_121572 = info.nsubtasks;
    struct futhark_mc_task_128348 *futhark_mc_task_128348 =
                                  (struct futhark_mc_task_128348 *) args;
    struct futhark_context *ctx = futhark_mc_task_128348->ctx;
    uint64_t futhark_mc_segmap_nested_task_128353_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128353_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128348->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128348->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128348->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128348->free_bytes_119697;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128348->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t iter_121582;
    struct futhark_mc_segmap_parloop_struct_128354
    futhark_mc_segmap_parloop_struct_128354;
    
    futhark_mc_segmap_parloop_struct_128354.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128354.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128354.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128354.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128354.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128354.free_mem_119718 = mem_119718.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128355_task;
    
    futhark_mc_segmap_parloop_128355_task.name =
        "futhark_mc_segmap_parloop_128355";
    futhark_mc_segmap_parloop_128355_task.fn = futhark_mc_segmap_parloop_128355;
    futhark_mc_segmap_parloop_128355_task.args =
        &futhark_mc_segmap_parloop_struct_128354;
    futhark_mc_segmap_parloop_128355_task.iterations = iterations;
    futhark_mc_segmap_parloop_128355_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128355_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128355_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128355_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128355_task);
    
    if (futhark_mc_segmap_parloop_128355_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128355_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128355_total_end -
                 futhark_mc_segmap_parloop_128355_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128355_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128355_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128355_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128353_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128353_end -
                 futhark_mc_segmap_nested_task_128353_start;
        
        ctx->futhark_mc_segmap_nested_task_128353_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128353_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128353_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128361 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_i_112880;
    int64_t free_bytes_119719;
    char *free_mem_119740;
};
struct futhark_mc_segmap_parloop_struct_128363 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_i_112880;
    int64_t free_bytes_119719;
    char *free_mem_119740;
};
static int futhark_mc_segmap_parloop_128364(void *args, int64_t start,
                                            int64_t end, int flat_tid_115008,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128363
    *futhark_mc_segmap_parloop_struct_128363 =
    (struct futhark_mc_segmap_parloop_struct_128363 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128363->ctx;
    uint64_t futhark_mc_segmap_parloop_128364_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128364_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128363->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128363->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128363->free_i_112880;
    int64_t bytes_119719 =
            futhark_mc_segmap_parloop_struct_128363->free_bytes_119719;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128363->free_mem_119740,
                                  .size =0, .references =NULL};
    size_t mem_119724_cached_sizze_128365 = 0;
    char *mem_119724 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121592 = start;
    
    if (mem_119724_cached_sizze_128365 < (size_t) bytes_119719) {
        mem_119724 = realloc(mem_119724, bytes_119719);
        mem_119724_cached_sizze_128365 = bytes_119719;
    }
    for (; iter_121592 < end; iter_121592++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121600 = n_p_112806;
        int64_t gtid_115009 = iter_121592;
        int64_t remnant_121601 = iter_121592 - gtid_115009;
        
        for (int64_t i_121593 = 0; i_121593 < css_chunk_len_112850;
             i_121593++) {
            int64_t y_121595 = mul64(n_p_112806, i_121593);
            int64_t res_idx_121596 = add64(y_121595, gtid_115009);
            bool cond_121597 = slt64(i_112880, res_idx_121596);
            int64_t defunc_0_f_res_121598;
            
            if (cond_121597) {
                defunc_0_f_res_121598 = (int64_t) -1;
            } else {
                defunc_0_f_res_121598 = res_idx_121596;
            }
            ((int64_t *) mem_119724)[i_121593] = defunc_0_f_res_121598;
        }
        memmove(mem_119740.mem + gtid_115009 * css_chunk_len_112850 *
                (int64_t) 8, mem_119724 + (int64_t) 0, css_chunk_len_112850 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_119724);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128364_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128364_end -
                 futhark_mc_segmap_parloop_128364_start;
        
        ctx->futhark_mc_segmap_parloop_128364_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128364_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128364_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128362(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115008 = tid;
    int num_tasks_121591 = info.nsubtasks;
    struct futhark_mc_task_128361 *futhark_mc_task_128361 =
                                  (struct futhark_mc_task_128361 *) args;
    struct futhark_context *ctx = futhark_mc_task_128361->ctx;
    uint64_t futhark_mc_segmap_task_128362_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128362_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128361->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128361->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_task_128361->free_i_112880;
    int64_t bytes_119719 = futhark_mc_task_128361->free_bytes_119719;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128361->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t iter_121592;
    struct futhark_mc_segmap_parloop_struct_128363
    futhark_mc_segmap_parloop_struct_128363;
    
    futhark_mc_segmap_parloop_struct_128363.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128363.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128363.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128363.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128363.free_bytes_119719 = bytes_119719;
    futhark_mc_segmap_parloop_struct_128363.free_mem_119740 = mem_119740.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128364_task;
    
    futhark_mc_segmap_parloop_128364_task.name =
        "futhark_mc_segmap_parloop_128364";
    futhark_mc_segmap_parloop_128364_task.fn = futhark_mc_segmap_parloop_128364;
    futhark_mc_segmap_parloop_128364_task.args =
        &futhark_mc_segmap_parloop_struct_128363;
    futhark_mc_segmap_parloop_128364_task.iterations = iterations;
    futhark_mc_segmap_parloop_128364_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128364_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128364_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128364_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128364_task);
    
    if (futhark_mc_segmap_parloop_128364_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128364_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128364_total_end -
                 futhark_mc_segmap_parloop_128364_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128364_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128362_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128362_end -
                 futhark_mc_segmap_task_128362_start;
        
        ctx->futhark_mc_segmap_task_128362_runs[tid]++;
        ctx->futhark_mc_segmap_task_128362_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128362_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128367 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_i_112880;
    int64_t free_bytes_119719;
    char *free_mem_119740;
};
struct futhark_mc_task_128370 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_i_112880;
    int64_t free_gtid_115011;
    char *free_mem_119721;
};
struct futhark_mc_segmap_parloop_struct_128372 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_i_112880;
    int64_t free_gtid_115011;
    char *free_mem_119721;
};
static int futhark_mc_segmap_parloop_128373(void *args, int64_t start,
                                            int64_t end, int flat_tid_115012,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128372
    *futhark_mc_segmap_parloop_struct_128372 =
    (struct futhark_mc_segmap_parloop_struct_128372 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128372->ctx;
    uint64_t futhark_mc_segmap_parloop_128373_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128373_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128372->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128372->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128372->free_i_112880;
    int64_t gtid_115011 =
            futhark_mc_segmap_parloop_struct_128372->free_gtid_115011;
    struct memblock mem_119721 = {.desc ="mem_119721", .mem =
                                  futhark_mc_segmap_parloop_struct_128372->free_mem_119721,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121611 = start;
    
    for (; iter_121611 < end; iter_121611++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121612 = css_chunk_len_112850;
        int64_t gtid_115013 = iter_121611;
        int64_t remnant_121613 = iter_121611 - gtid_115013;
        int64_t y_121604 = mul64(n_p_112806, gtid_115013);
        int64_t res_idx_121605 = add64(gtid_115011, y_121604);
        bool cond_121606 = slt64(i_112880, res_idx_121605);
        int64_t defunc_0_f_res_121607;
        
        if (cond_121606) {
            defunc_0_f_res_121607 = (int64_t) -1;
        } else {
            defunc_0_f_res_121607 = res_idx_121605;
        }
        ((int64_t *) mem_119721.mem)[gtid_115013] = defunc_0_f_res_121607;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128373_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128373_end -
                 futhark_mc_segmap_parloop_128373_start;
        
        ctx->futhark_mc_segmap_parloop_128373_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128373_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128373_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128371(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115012 = tid;
    int num_tasks_121610 = info.nsubtasks;
    struct futhark_mc_task_128370 *futhark_mc_task_128370 =
                                  (struct futhark_mc_task_128370 *) args;
    struct futhark_context *ctx = futhark_mc_task_128370->ctx;
    uint64_t futhark_mc_segmap_task_128371_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128371_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128370->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128370->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_task_128370->free_i_112880;
    int64_t gtid_115011 = futhark_mc_task_128370->free_gtid_115011;
    struct memblock mem_119721 = {.desc ="mem_119721", .mem =
                                  futhark_mc_task_128370->free_mem_119721,
                                  .size =0, .references =NULL};
    int64_t iter_121611;
    struct futhark_mc_segmap_parloop_struct_128372
    futhark_mc_segmap_parloop_struct_128372;
    
    futhark_mc_segmap_parloop_struct_128372.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128372.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128372.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128372.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128372.free_gtid_115011 = gtid_115011;
    futhark_mc_segmap_parloop_struct_128372.free_mem_119721 = mem_119721.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128373_task;
    
    futhark_mc_segmap_parloop_128373_task.name =
        "futhark_mc_segmap_parloop_128373";
    futhark_mc_segmap_parloop_128373_task.fn = futhark_mc_segmap_parloop_128373;
    futhark_mc_segmap_parloop_128373_task.args =
        &futhark_mc_segmap_parloop_struct_128372;
    futhark_mc_segmap_parloop_128373_task.iterations = iterations;
    futhark_mc_segmap_parloop_128373_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128373_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128373_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128373_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128373_task);
    
    if (futhark_mc_segmap_parloop_128373_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128373_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128373_total_end -
                 futhark_mc_segmap_parloop_128373_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128373_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128373_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128373_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128371_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128371_end -
                 futhark_mc_segmap_task_128371_start;
        
        ctx->futhark_mc_segmap_task_128371_runs[tid]++;
        ctx->futhark_mc_segmap_task_128371_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128371_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128368(void *args, int64_t start,
                                            int64_t end, int flat_tid_115010,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128367
    *futhark_mc_segmap_parloop_struct_128367 =
    (struct futhark_mc_segmap_parloop_struct_128367 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128367->ctx;
    uint64_t futhark_mc_segmap_parloop_128368_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128368_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128367->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128367->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128367->free_i_112880;
    int64_t bytes_119719 =
            futhark_mc_segmap_parloop_struct_128367->free_bytes_119719;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128367->free_mem_119740,
                                  .size =0, .references =NULL};
    size_t mem_119721_cached_sizze_128369 = 0;
    char *mem_119721 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121603 = start;
    
    if (mem_119721_cached_sizze_128369 < (size_t) bytes_119719) {
        mem_119721 = realloc(mem_119721, bytes_119719);
        mem_119721_cached_sizze_128369 = bytes_119719;
    }
    for (; iter_121603 < end; iter_121603++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121608 = n_p_112806;
        int64_t gtid_115011 = iter_121603;
        int64_t remnant_121609 = iter_121603 - gtid_115011;
        int64_t flat_tid_115012 = (int64_t) 0;
        int32_t num_tasks_121610;
        struct futhark_mc_task_128370 futhark_mc_task_128370;
        
        futhark_mc_task_128370.ctx = ctx;
        futhark_mc_task_128370.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128370.free_css_chunk_len_112850 = css_chunk_len_112850;
        futhark_mc_task_128370.free_i_112880 = i_112880;
        futhark_mc_task_128370.free_gtid_115011 = gtid_115011;
        futhark_mc_task_128370.free_mem_119721 = mem_119721;
        
        struct scheduler_segop futhark_mc_task_128370_task;
        
        futhark_mc_task_128370_task.args = &futhark_mc_task_128370;
        futhark_mc_task_128370_task.top_level_fn =
            futhark_mc_segmap_task_128371;
        futhark_mc_task_128370_task.name = "futhark_mc_segmap_task_128371";
        futhark_mc_task_128370_task.iterations = css_chunk_len_112850;
        futhark_mc_task_128370_task.task_time =
            &ctx->futhark_mc_segmap_task_128371_total_time;
        futhark_mc_task_128370_task.task_iter =
            &ctx->futhark_mc_segmap_task_128371_total_iter;
        futhark_mc_task_128370_task.sched = STATIC;
        futhark_mc_task_128370_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128371_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128370_task);
        
        if (futhark_mc_segmap_task_128371_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119740.mem + gtid_115011 * css_chunk_len_112850 *
                (int64_t) 8, mem_119721 + (int64_t) 0, css_chunk_len_112850 *
                (int64_t) 8);
    }
    
  cleanup:
    { }
    free(mem_119721);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128368_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128368_end -
                 futhark_mc_segmap_parloop_128368_start;
        
        ctx->futhark_mc_segmap_parloop_128368_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128368_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128368_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128366(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115010 = tid;
    int num_tasks_121591 = info.nsubtasks;
    struct futhark_mc_task_128361 *futhark_mc_task_128361 =
                                  (struct futhark_mc_task_128361 *) args;
    struct futhark_context *ctx = futhark_mc_task_128361->ctx;
    uint64_t futhark_mc_segmap_nested_task_128366_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128366_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128361->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128361->free_css_chunk_len_112850;
    int64_t i_112880 = futhark_mc_task_128361->free_i_112880;
    int64_t bytes_119719 = futhark_mc_task_128361->free_bytes_119719;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128361->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t iter_121603;
    struct futhark_mc_segmap_parloop_struct_128367
    futhark_mc_segmap_parloop_struct_128367;
    
    futhark_mc_segmap_parloop_struct_128367.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128367.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128367.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128367.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128367.free_bytes_119719 = bytes_119719;
    futhark_mc_segmap_parloop_struct_128367.free_mem_119740 = mem_119740.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128368_task;
    
    futhark_mc_segmap_parloop_128368_task.name =
        "futhark_mc_segmap_parloop_128368";
    futhark_mc_segmap_parloop_128368_task.fn = futhark_mc_segmap_parloop_128368;
    futhark_mc_segmap_parloop_128368_task.args =
        &futhark_mc_segmap_parloop_struct_128367;
    futhark_mc_segmap_parloop_128368_task.iterations = iterations;
    futhark_mc_segmap_parloop_128368_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128368_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128368_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128368_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128368_task);
    
    if (futhark_mc_segmap_parloop_128368_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128368_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128368_total_end -
                 futhark_mc_segmap_parloop_128368_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128368_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128366_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128366_end -
                 futhark_mc_segmap_nested_task_128366_start;
        
        ctx->futhark_mc_segmap_nested_task_128366_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128366_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128366_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128374 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
};
struct futhark_mc_segmap_parloop_struct_128376 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
};
static int futhark_mc_segmap_parloop_128377(void *args, int64_t start,
                                            int64_t end, int flat_tid_115021,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128376
    *futhark_mc_segmap_parloop_struct_128376 =
    (struct futhark_mc_segmap_parloop_struct_128376 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128376->ctx;
    uint64_t futhark_mc_segmap_parloop_128377_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128377_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128376->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128376->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128376->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128376->free_css_chunk_len_112850;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128376->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128376->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 =
            futhark_mc_segmap_parloop_struct_128376->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128376->free_mem_119762,
                                  .size =0, .references =NULL};
    size_t mem_119746_cached_sizze_128378 = 0;
    char *mem_119746 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121615 = start;
    
    if (mem_119746_cached_sizze_128378 < (size_t) bytes_119741) {
        mem_119746 = realloc(mem_119746, bytes_119741);
        mem_119746_cached_sizze_128378 = bytes_119741;
    }
    for (; iter_121615 < end; iter_121615++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121634 = m_112803;
        int64_t gtid_115022 = iter_121615;
        int64_t remnant_121635 = iter_121615 - gtid_115022;
        
        for (int64_t i_121616 = 0; i_121616 < n_p_112806; i_121616++) {
            float defunc_2_reduce_res_121618;
            float redout_121620 = 0.0F;
            
            for (int64_t i_121619 = 0; i_121619 < css_chunk_len_112850;
                 i_121619++) {
                int64_t x_121621 = ((int64_t *) mem_119740.mem)[i_121616 *
                                                                css_chunk_len_112850 +
                                                                i_121619];
                bool cond_121622 = sle64((int64_t) 0, x_121621);
                float defunc_0_f_res_121623;
                
                if (cond_121622) {
                    bool y_121624 = slt64(x_121621, n_112804);
                    bool bounds_check_121625 = cond_121622 && y_121624;
                    bool index_certs_121626;
                    
                    if (!bounds_check_121625) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_121621,
                                      "] out of bounds for array of shape [",
                                      (long long) n_112804, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_121627 =
                          ((float *) Y_mem_119653.mem)[gtid_115022 * n_112804 +
                                                       x_121621];
                    
                    defunc_0_f_res_121623 = defunc_0_f_res_t_res_121627;
                } else {
                    defunc_0_f_res_121623 = NAN;
                }
                
                bool isnan_res_121628;
                
                isnan_res_121628 = futrts_isnan32(defunc_0_f_res_121623);
                
                float defunc_0_f_res_121629;
                
                if (isnan_res_121628) {
                    defunc_0_f_res_121629 = 0.0F;
                } else {
                    defunc_0_f_res_121629 = 1.0F;
                }
                
                float defunc_1_op_res_121630 = defunc_0_f_res_121629 +
                      redout_121620;
                float redout_tmp_121637 = defunc_1_op_res_121630;
                
                redout_121620 = redout_tmp_121637;
            }
            defunc_2_reduce_res_121618 = redout_121620;
            
            bool sub_series_is_not_all_nan_121631 = 0.0F <
                 defunc_2_reduce_res_121618;
            bool assert_c_121632;
            
            if (!sub_series_is_not_all_nan_121631) {
                ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                       "Assertion is false: sub_series_is_not_all_nan",
                                       "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
                return 1;
            }
            ((float *) mem_119746)[i_121616] = defunc_2_reduce_res_121618;
        }
        memmove(mem_119762.mem + gtid_115022 * n_p_112806 * (int64_t) 4,
                mem_119746 + (int64_t) 0, n_p_112806 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119746);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128377_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128377_end -
                 futhark_mc_segmap_parloop_128377_start;
        
        ctx->futhark_mc_segmap_parloop_128377_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128377_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128377_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128375(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115021 = tid;
    int num_tasks_121614 = info.nsubtasks;
    struct futhark_mc_task_128374 *futhark_mc_task_128374 =
                                  (struct futhark_mc_task_128374 *) args;
    struct futhark_context *ctx = futhark_mc_task_128374->ctx;
    uint64_t futhark_mc_segmap_task_128375_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128375_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128374->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128374->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128374->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128374->free_css_chunk_len_112850;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128374->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128374->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 = futhark_mc_task_128374->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128374->free_mem_119762,
                                  .size =0, .references =NULL};
    int64_t iter_121615;
    struct futhark_mc_segmap_parloop_struct_128376
    futhark_mc_segmap_parloop_struct_128376;
    
    futhark_mc_segmap_parloop_struct_128376.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128376.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128376.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128376.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128376.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128376.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128376.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128376.free_bytes_119741 = bytes_119741;
    futhark_mc_segmap_parloop_struct_128376.free_mem_119762 = mem_119762.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128377_task;
    
    futhark_mc_segmap_parloop_128377_task.name =
        "futhark_mc_segmap_parloop_128377";
    futhark_mc_segmap_parloop_128377_task.fn = futhark_mc_segmap_parloop_128377;
    futhark_mc_segmap_parloop_128377_task.args =
        &futhark_mc_segmap_parloop_struct_128376;
    futhark_mc_segmap_parloop_128377_task.iterations = iterations;
    futhark_mc_segmap_parloop_128377_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128377_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128377_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128377_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128377_task);
    
    if (futhark_mc_segmap_parloop_128377_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128377_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128377_total_end -
                 futhark_mc_segmap_parloop_128377_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128377_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128377_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128377_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128375_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128375_end -
                 futhark_mc_segmap_task_128375_start;
        
        ctx->futhark_mc_segmap_task_128375_runs[tid]++;
        ctx->futhark_mc_segmap_task_128375_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128375_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128380 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
};
struct futhark_mc_task_128383 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115024;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    char *free_mem_119743;
};
struct futhark_mc_segmap_parloop_struct_128385 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115024;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    char *free_mem_119743;
};
static int futhark_mc_segmap_parloop_128386(void *args, int64_t start,
                                            int64_t end, int flat_tid_115025,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128385
    *futhark_mc_segmap_parloop_struct_128385 =
    (struct futhark_mc_segmap_parloop_struct_128385 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128385->ctx;
    uint64_t futhark_mc_segmap_parloop_128386_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128386_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128385->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128385->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128385->free_css_chunk_len_112850;
    int64_t gtid_115024 =
            futhark_mc_segmap_parloop_struct_128385->free_gtid_115024;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128385->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128385->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119743 = {.desc ="mem_119743", .mem =
                                  futhark_mc_segmap_parloop_struct_128385->free_mem_119743,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121672 = start;
    
    for (; iter_121672 < end; iter_121672++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121685 = n_p_112806;
        int64_t gtid_115026 = iter_121672;
        int64_t remnant_121686 = iter_121672 - gtid_115026;
        float defunc_2_reduce_res_121654;
        float redout_121674 = 0.0F;
        
        for (int64_t i_121673 = 0; i_121673 < css_chunk_len_112850;
             i_121673++) {
            int64_t x_121675 = ((int64_t *) mem_119740.mem)[gtid_115026 *
                                                            css_chunk_len_112850 +
                                                            i_121673];
            bool cond_121676 = sle64((int64_t) 0, x_121675);
            float defunc_0_f_res_121677;
            
            if (cond_121676) {
                bool y_121678 = slt64(x_121675, n_112804);
                bool bounds_check_121679 = cond_121676 && y_121678;
                bool index_certs_121680;
                
                if (!bounds_check_121679) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_121675,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_121681 =
                      ((float *) Y_mem_119653.mem)[gtid_115024 * n_112804 +
                                                   x_121675];
                
                defunc_0_f_res_121677 = defunc_0_f_res_t_res_121681;
            } else {
                defunc_0_f_res_121677 = NAN;
            }
            
            bool isnan_res_121682;
            
            isnan_res_121682 = futrts_isnan32(defunc_0_f_res_121677);
            
            float defunc_0_f_res_121683;
            
            if (isnan_res_121682) {
                defunc_0_f_res_121683 = 0.0F;
            } else {
                defunc_0_f_res_121683 = 1.0F;
            }
            
            float defunc_1_op_res_121684 = defunc_0_f_res_121683 +
                  redout_121674;
            float redout_tmp_121687 = defunc_1_op_res_121684;
            
            redout_121674 = redout_tmp_121687;
        }
        defunc_2_reduce_res_121654 = redout_121674;
        
        bool sub_series_is_not_all_nan_121667 = 0.0F <
             defunc_2_reduce_res_121654;
        bool assert_c_121668;
        
        if (!sub_series_is_not_all_nan_121667) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_119743.mem)[gtid_115026] = defunc_2_reduce_res_121654;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128386_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128386_end -
                 futhark_mc_segmap_parloop_128386_start;
        
        ctx->futhark_mc_segmap_parloop_128386_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128386_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128386_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128384(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115025 = tid;
    int num_tasks_121671 = info.nsubtasks;
    struct futhark_mc_task_128383 *futhark_mc_task_128383 =
                                  (struct futhark_mc_task_128383 *) args;
    struct futhark_context *ctx = futhark_mc_task_128383->ctx;
    uint64_t futhark_mc_segmap_task_128384_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128384_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128383->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128383->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128383->free_css_chunk_len_112850;
    int64_t gtid_115024 = futhark_mc_task_128383->free_gtid_115024;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128383->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128383->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119743 = {.desc ="mem_119743", .mem =
                                  futhark_mc_task_128383->free_mem_119743,
                                  .size =0, .references =NULL};
    int64_t iter_121672;
    struct futhark_mc_segmap_parloop_struct_128385
    futhark_mc_segmap_parloop_struct_128385;
    
    futhark_mc_segmap_parloop_struct_128385.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128385.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128385.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128385.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128385.free_gtid_115024 = gtid_115024;
    futhark_mc_segmap_parloop_struct_128385.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128385.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128385.free_mem_119743 = mem_119743.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128386_task;
    
    futhark_mc_segmap_parloop_128386_task.name =
        "futhark_mc_segmap_parloop_128386";
    futhark_mc_segmap_parloop_128386_task.fn = futhark_mc_segmap_parloop_128386;
    futhark_mc_segmap_parloop_128386_task.args =
        &futhark_mc_segmap_parloop_struct_128385;
    futhark_mc_segmap_parloop_128386_task.iterations = iterations;
    futhark_mc_segmap_parloop_128386_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128386_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128386_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128386_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128386_task);
    
    if (futhark_mc_segmap_parloop_128386_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128386_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128386_total_end -
                 futhark_mc_segmap_parloop_128386_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128386_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128386_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128386_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128384_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128384_end -
                 futhark_mc_segmap_task_128384_start;
        
        ctx->futhark_mc_segmap_task_128384_runs[tid]++;
        ctx->futhark_mc_segmap_task_128384_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128384_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128388 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115024;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    char *free_mem_119743;
};
struct futhark_mc_task_128390 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115024;
    int64_t free_gtid_115028;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    float *retval_defunc_2_reduce_res_121639;
};
struct futhark_mc_segred_stage_1_parloop_struct_128393 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115024;
    int64_t free_gtid_115028;
    char *free_Y_mem_119653;
    char *free_mem_119740;
    char *free_reduce_stage_1_tid_res_arr_mem_121704;
};
static int futhark_mc_segred_stage_1_parloop_128394(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115029,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128393
    *futhark_mc_segred_stage_1_parloop_struct_128393 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128393 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128393->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128394_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128394_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128393->free_n_112804;
    int64_t css_chunk_len_112850 =
            futhark_mc_segred_stage_1_parloop_struct_128393->free_css_chunk_len_112850;
    int64_t gtid_115024 =
            futhark_mc_segred_stage_1_parloop_struct_128393->free_gtid_115024;
    int64_t gtid_115028 =
            futhark_mc_segred_stage_1_parloop_struct_128393->free_gtid_115028;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segred_stage_1_parloop_struct_128393->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128393->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_121704 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_121704",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128393->free_reduce_stage_1_tid_res_arr_mem_121704,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121706 = start;
    float x_121689;
    float x_121690;
    float local_acc_121707 = 0.0F;
    
    for (; iter_121706 < end; iter_121706++) {
        int64_t gtid_115030 = iter_121706;
        int64_t x_121692 = ((int64_t *) mem_119740.mem)[gtid_115028 *
                                                        css_chunk_len_112850 +
                                                        gtid_115030];
        bool cond_121693 = sle64((int64_t) 0, x_121692);
        float defunc_0_f_res_121694;
        
        if (cond_121693) {
            bool y_121695 = slt64(x_121692, n_112804);
            bool bounds_check_121696 = cond_121693 && y_121695;
            bool index_certs_121697;
            
            if (!bounds_check_121696) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_121692,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:129:30-55\n   #3  stl.fut:127:13-136:26\n   #4  stl.fut:125:5-137:11\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_121698 =
                  ((float *) Y_mem_119653.mem)[gtid_115024 * n_112804 +
                                               x_121692];
            
            defunc_0_f_res_121694 = defunc_0_f_res_t_res_121698;
        } else {
            defunc_0_f_res_121694 = NAN;
        }
        
        bool isnan_res_121699;
        
        isnan_res_121699 = futrts_isnan32(defunc_0_f_res_121694);
        
        float defunc_0_f_res_121700;
        
        if (isnan_res_121699) {
            defunc_0_f_res_121700 = 0.0F;
        } else {
            defunc_0_f_res_121700 = 1.0F;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_121689 = local_acc_121707;
        }
        // Load next params
        {
            x_121690 = defunc_0_f_res_121700;
        }
        // Red body
        {
            float defunc_1_op_res_121691 = x_121689 + x_121690;
            
            local_acc_121707 = defunc_1_op_res_121691;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_121704.mem)[flat_tid_115029] =
        local_acc_121707;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128394_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128394_end -
                 futhark_mc_segred_stage_1_parloop_128394_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128394_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128394_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128394_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128391(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115029 = tid;
    int num_tasks_121703 = info.nsubtasks;
    struct futhark_mc_task_128390 *futhark_mc_task_128390 =
                                  (struct futhark_mc_task_128390 *) args;
    struct futhark_context *ctx = futhark_mc_task_128390->ctx;
    uint64_t futhark_mc_segred_task_128391_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128391_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128390->free_n_112804;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128390->free_css_chunk_len_112850;
    int64_t gtid_115024 = futhark_mc_task_128390->free_gtid_115024;
    int64_t gtid_115028 = futhark_mc_task_128390->free_gtid_115028;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128390->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128390->free_mem_119740,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_121639 =
          *futhark_mc_task_128390->retval_defunc_2_reduce_res_121639;
    size_t reduce_stage_1_tid_res_arr_mem_121704_cached_sizze_128392 = 0;
    char *reduce_stage_1_tid_res_arr_mem_121704 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_121704_cached_sizze_128392 <
        (size_t) ((int64_t) 4 * num_tasks_121703)) {
        reduce_stage_1_tid_res_arr_mem_121704 =
            realloc(reduce_stage_1_tid_res_arr_mem_121704, (int64_t) 4 *
                    num_tasks_121703);
        reduce_stage_1_tid_res_arr_mem_121704_cached_sizze_128392 =
            (int64_t) 4 * num_tasks_121703;
    }
    
    int64_t iter_121706;
    struct futhark_mc_segred_stage_1_parloop_struct_128393
    futhark_mc_segred_stage_1_parloop_struct_128393;
    
    futhark_mc_segred_stage_1_parloop_struct_128393.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_gtid_115024 =
        gtid_115024;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_gtid_115028 =
        gtid_115028;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_mem_119740 =
        mem_119740.mem;
    futhark_mc_segred_stage_1_parloop_struct_128393.free_reduce_stage_1_tid_res_arr_mem_121704 =
        reduce_stage_1_tid_res_arr_mem_121704;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128394_task;
    
    futhark_mc_segred_stage_1_parloop_128394_task.name =
        "futhark_mc_segred_stage_1_parloop_128394";
    futhark_mc_segred_stage_1_parloop_128394_task.fn =
        futhark_mc_segred_stage_1_parloop_128394;
    futhark_mc_segred_stage_1_parloop_128394_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128393;
    futhark_mc_segred_stage_1_parloop_128394_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128394_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128394_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128394_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128394_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128394_task);
    
    if (futhark_mc_segred_stage_1_parloop_128394_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128394_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128394_total_end -
                 futhark_mc_segred_stage_1_parloop_128394_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128394_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128394_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128394_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_121639 = 0.0F;
    }
    
    float x_121708;
    float x_121709;
    
    for (int32_t i_121711 = 0; i_121711 < num_tasks_121703; i_121711++) {
        flat_tid_115029 = i_121711;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_121708 = defunc_2_reduce_res_121639;
            }
            // load next params
            {
                x_121709 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_121704)[flat_tid_115029];
            }
            // red body
            {
                float defunc_1_op_res_121710 = x_121708 + x_121709;
                
                defunc_2_reduce_res_121639 = defunc_1_op_res_121710;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_121704);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128391_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128391_end -
                 futhark_mc_segred_task_128391_start;
        
        ctx->futhark_mc_segred_task_128391_runs[tid]++;
        ctx->futhark_mc_segred_task_128391_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128391_iter[tid] += iterations;
    }
    *futhark_mc_task_128390->retval_defunc_2_reduce_res_121639 =
        defunc_2_reduce_res_121639;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128389(void *args, int64_t start,
                                            int64_t end, int flat_tid_115027,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128388
    *futhark_mc_segmap_parloop_struct_128388 =
    (struct futhark_mc_segmap_parloop_struct_128388 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128388->ctx;
    uint64_t futhark_mc_segmap_parloop_128389_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128389_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128388->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128388->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128388->free_css_chunk_len_112850;
    int64_t gtid_115024 =
            futhark_mc_segmap_parloop_struct_128388->free_gtid_115024;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128388->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128388->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119743 = {.desc ="mem_119743", .mem =
                                  futhark_mc_segmap_parloop_struct_128388->free_mem_119743,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121688 = start;
    
    for (; iter_121688 < end; iter_121688++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121701 = n_p_112806;
        int64_t gtid_115028 = iter_121688;
        int64_t remnant_121702 = iter_121688 - gtid_115028;
        float defunc_2_reduce_res_121639;
        int64_t flat_tid_115029 = (int64_t) 0;
        int32_t num_tasks_121703;
        struct futhark_mc_task_128390 futhark_mc_task_128390;
        
        futhark_mc_task_128390.ctx = ctx;
        futhark_mc_task_128390.free_n_112804 = n_112804;
        futhark_mc_task_128390.free_css_chunk_len_112850 = css_chunk_len_112850;
        futhark_mc_task_128390.free_gtid_115024 = gtid_115024;
        futhark_mc_task_128390.free_gtid_115028 = gtid_115028;
        futhark_mc_task_128390.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128390.free_mem_119740 = mem_119740.mem;
        futhark_mc_task_128390.retval_defunc_2_reduce_res_121639 =
            &defunc_2_reduce_res_121639;
        
        struct scheduler_segop futhark_mc_task_128390_task;
        
        futhark_mc_task_128390_task.args = &futhark_mc_task_128390;
        futhark_mc_task_128390_task.top_level_fn =
            futhark_mc_segred_task_128391;
        futhark_mc_task_128390_task.name = "futhark_mc_segred_task_128391";
        futhark_mc_task_128390_task.iterations = css_chunk_len_112850;
        futhark_mc_task_128390_task.task_time =
            &ctx->futhark_mc_segred_task_128391_total_time;
        futhark_mc_task_128390_task.task_iter =
            &ctx->futhark_mc_segred_task_128391_total_iter;
        futhark_mc_task_128390_task.sched = STATIC;
        futhark_mc_task_128390_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128391_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128390_task);
        
        if (futhark_mc_segred_task_128391_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        bool sub_series_is_not_all_nan_121652 = 0.0F <
             defunc_2_reduce_res_121639;
        bool assert_c_121653;
        
        if (!sub_series_is_not_all_nan_121652) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "Assertion is false: sub_series_is_not_all_nan",
                                   "-> #0  stl.fut:134:34-75\n   #1  stl.fut:127:13-136:26\n   #2  stl.fut:125:5-137:11\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
            return 1;
        }
        ((float *) mem_119743.mem)[gtid_115028] = defunc_2_reduce_res_121639;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128389_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128389_end -
                 futhark_mc_segmap_parloop_128389_start;
        
        ctx->futhark_mc_segmap_parloop_128389_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128389_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128389_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128387(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115027 = tid;
    int num_tasks_121671 = info.nsubtasks;
    struct futhark_mc_task_128383 *futhark_mc_task_128383 =
                                  (struct futhark_mc_task_128383 *) args;
    struct futhark_context *ctx = futhark_mc_task_128383->ctx;
    uint64_t futhark_mc_segmap_nested_task_128387_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128387_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128383->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128383->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128383->free_css_chunk_len_112850;
    int64_t gtid_115024 = futhark_mc_task_128383->free_gtid_115024;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128383->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128383->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119743 = {.desc ="mem_119743", .mem =
                                  futhark_mc_task_128383->free_mem_119743,
                                  .size =0, .references =NULL};
    int64_t iter_121688;
    struct futhark_mc_segmap_parloop_struct_128388
    futhark_mc_segmap_parloop_struct_128388;
    
    futhark_mc_segmap_parloop_struct_128388.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128388.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128388.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128388.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128388.free_gtid_115024 = gtid_115024;
    futhark_mc_segmap_parloop_struct_128388.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128388.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128388.free_mem_119743 = mem_119743.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128389_task;
    
    futhark_mc_segmap_parloop_128389_task.name =
        "futhark_mc_segmap_parloop_128389";
    futhark_mc_segmap_parloop_128389_task.fn = futhark_mc_segmap_parloop_128389;
    futhark_mc_segmap_parloop_128389_task.args =
        &futhark_mc_segmap_parloop_struct_128388;
    futhark_mc_segmap_parloop_128389_task.iterations = iterations;
    futhark_mc_segmap_parloop_128389_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128389_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128389_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128389_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128389_task);
    
    if (futhark_mc_segmap_parloop_128389_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128389_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128389_total_end -
                 futhark_mc_segmap_parloop_128389_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128389_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128389_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128389_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128387_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128387_end -
                 futhark_mc_segmap_nested_task_128387_start;
        
        ctx->futhark_mc_segmap_nested_task_128387_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128387_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128387_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128381(void *args, int64_t start,
                                            int64_t end, int flat_tid_115023,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128380
    *futhark_mc_segmap_parloop_struct_128380 =
    (struct futhark_mc_segmap_parloop_struct_128380 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128380->ctx;
    uint64_t futhark_mc_segmap_parloop_128381_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128381_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128380->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128380->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128380->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128380->free_css_chunk_len_112850;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128380->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128380->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 =
            futhark_mc_segmap_parloop_struct_128380->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128380->free_mem_119762,
                                  .size =0, .references =NULL};
    size_t mem_119743_cached_sizze_128382 = 0;
    char *mem_119743 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121638 = start;
    
    if (mem_119743_cached_sizze_128382 < (size_t) bytes_119741) {
        mem_119743 = realloc(mem_119743, bytes_119741);
        mem_119743_cached_sizze_128382 = bytes_119741;
    }
    for (; iter_121638 < end; iter_121638++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121669 = m_112803;
        int64_t gtid_115024 = iter_121638;
        int64_t remnant_121670 = iter_121638 - gtid_115024;
        int64_t flat_tid_115025 = (int64_t) 0;
        int32_t num_tasks_121671;
        int64_t flat_tid_115027 = (int64_t) 0;
        struct futhark_mc_task_128383 futhark_mc_task_128383;
        
        futhark_mc_task_128383.ctx = ctx;
        futhark_mc_task_128383.free_n_112804 = n_112804;
        futhark_mc_task_128383.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128383.free_css_chunk_len_112850 = css_chunk_len_112850;
        futhark_mc_task_128383.free_gtid_115024 = gtid_115024;
        futhark_mc_task_128383.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128383.free_mem_119740 = mem_119740.mem;
        futhark_mc_task_128383.free_mem_119743 = mem_119743;
        
        struct scheduler_segop futhark_mc_task_128383_task;
        
        futhark_mc_task_128383_task.args = &futhark_mc_task_128383;
        futhark_mc_task_128383_task.top_level_fn =
            futhark_mc_segmap_task_128384;
        futhark_mc_task_128383_task.name = "futhark_mc_segmap_task_128384";
        futhark_mc_task_128383_task.iterations = n_p_112806;
        futhark_mc_task_128383_task.task_time =
            &ctx->futhark_mc_segmap_task_128384_total_time;
        futhark_mc_task_128383_task.task_iter =
            &ctx->futhark_mc_segmap_task_128384_total_iter;
        futhark_mc_task_128383_task.sched = STATIC;
        futhark_mc_task_128383_task.nested_fn =
            futhark_mc_segmap_nested_task_128387;
        
        int futhark_mc_segmap_task_128384_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128383_task);
        
        if (futhark_mc_segmap_task_128384_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119762.mem + gtid_115024 * n_p_112806 * (int64_t) 4,
                mem_119743 + (int64_t) 0, n_p_112806 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119743);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128381_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128381_end -
                 futhark_mc_segmap_parloop_128381_start;
        
        ctx->futhark_mc_segmap_parloop_128381_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128381_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128381_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128379(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115023 = tid;
    int num_tasks_121614 = info.nsubtasks;
    struct futhark_mc_task_128374 *futhark_mc_task_128374 =
                                  (struct futhark_mc_task_128374 *) args;
    struct futhark_context *ctx = futhark_mc_task_128374->ctx;
    uint64_t futhark_mc_segmap_nested_task_128379_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128379_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128374->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128374->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128374->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128374->free_css_chunk_len_112850;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128374->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128374->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 = futhark_mc_task_128374->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128374->free_mem_119762,
                                  .size =0, .references =NULL};
    int64_t iter_121638;
    struct futhark_mc_segmap_parloop_struct_128380
    futhark_mc_segmap_parloop_struct_128380;
    
    futhark_mc_segmap_parloop_struct_128380.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128380.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128380.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128380.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128380.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128380.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128380.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128380.free_bytes_119741 = bytes_119741;
    futhark_mc_segmap_parloop_struct_128380.free_mem_119762 = mem_119762.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128381_task;
    
    futhark_mc_segmap_parloop_128381_task.name =
        "futhark_mc_segmap_parloop_128381";
    futhark_mc_segmap_parloop_128381_task.fn = futhark_mc_segmap_parloop_128381;
    futhark_mc_segmap_parloop_128381_task.args =
        &futhark_mc_segmap_parloop_struct_128380;
    futhark_mc_segmap_parloop_128381_task.iterations = iterations;
    futhark_mc_segmap_parloop_128381_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128381_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128381_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128381_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128381_task);
    
    if (futhark_mc_segmap_parloop_128381_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128381_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128381_total_end -
                 futhark_mc_segmap_parloop_128381_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128381_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128381_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128381_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128379_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128379_end -
                 futhark_mc_segmap_nested_task_128379_start;
        
        ctx->futhark_mc_segmap_nested_task_128379_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128379_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128379_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128395 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_112952;
    bool free_loop_cond_112957;
    float free_i64_res_112958;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119766;
    int64_t free_bytes_119769;
    char *free_mem_119820;
    char *free_mem_119824;
};
struct futhark_mc_segmap_parloop_struct_128397 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_112952;
    bool free_loop_cond_112957;
    float free_i64_res_112958;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119766;
    int64_t free_bytes_119769;
    char *free_mem_119820;
    char *free_mem_119824;
};
static int futhark_mc_segmap_parloop_128398(void *args, int64_t start,
                                            int64_t end, int flat_tid_115081,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128397
    *futhark_mc_segmap_parloop_struct_128397 =
    (struct futhark_mc_segmap_parloop_struct_128397 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128397->ctx;
    uint64_t futhark_mc_segmap_parloop_128398_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128398_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128397->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128397->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128397->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128397->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128397->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128397->free_x_112881;
    int64_t min_res_112952 =
            futhark_mc_segmap_parloop_struct_128397->free_min_res_112952;
    bool loop_cond_112957 =
         futhark_mc_segmap_parloop_struct_128397->free_loop_cond_112957;
    float i64_res_112958 =
          futhark_mc_segmap_parloop_struct_128397->free_i64_res_112958;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128397->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128397->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128397->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128397->free_bytes_119766;
    int64_t bytes_119769 =
            futhark_mc_segmap_parloop_struct_128397->free_bytes_119769;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128397->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128397->free_mem_119824,
                                  .size =0, .references =NULL};
    size_t mem_119774_cached_sizze_128399 = 0;
    char *mem_119774 = NULL;
    size_t mem_119789_cached_sizze_128400 = 0;
    char *mem_119789 = NULL;
    size_t mem_119792_cached_sizze_128401 = 0;
    char *mem_119792 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121713 = start;
    
    if (mem_119774_cached_sizze_128399 < (size_t) bytes_119654) {
        mem_119774 = realloc(mem_119774, bytes_119654);
        mem_119774_cached_sizze_128399 = bytes_119654;
    }
    if (mem_119789_cached_sizze_128400 < (size_t) bytes_119766) {
        mem_119789 = realloc(mem_119789, bytes_119766);
        mem_119789_cached_sizze_128400 = bytes_119766;
    }
    if (mem_119792_cached_sizze_128401 < (size_t) bytes_119769) {
        mem_119792 = realloc(mem_119792, bytes_119769);
        mem_119792_cached_sizze_128401 = bytes_119769;
    }
    for (; iter_121713 < end; iter_121713++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121809 = m_112803;
        int64_t gtid_115082 = iter_121713;
        int64_t remnant_121810 = iter_121713 - gtid_115082;
        int64_t x_112962 = ((int64_t *) mem_119696.mem)[gtid_115082];
        
        for (int64_t i_121714 = 0; i_121714 < n_112804; i_121714++) {
            int64_t x_121716 = ((int64_t *) mem_119693.mem)[gtid_115082 *
                                                            n_112804 +
                                                            i_121714];
            int64_t defunc_0_f_res_121717 = add64((int64_t) 1, x_121716);
            
            ((int64_t *) mem_119774)[i_121714] = defunc_0_f_res_121717;
        }
        
        int64_t min_arg_112966 = sub64(x_112962, (int64_t) 1);
        int64_t min_arg_112967 = sub64(x_112962, min_res_112952);
        float i64_res_112968 = sitofp_i64_f32(x_112962);
        float x_112969 = i64_res_112958 - i64_res_112968;
        float max_arg_112970 = x_112969 / 2.0F;
        float max_res_112971 = fmax32(0.0F, max_arg_112970);
        
        for (int64_t i_121719 = 0; i_121719 < l_n_m_112854; i_121719++) {
            int64_t min_arg_121722 = mul64(l_jump_112812, i_121719);
            int64_t min_res_121723 = smin64(i_112880, min_arg_121722);
            int64_t defunc_0_g_res_121724 = add64((int64_t) 1, min_res_121723);
            bool init_idx_121725;
            int64_t init_idx_121726;
            int64_t init_idx_121727;
            bool loop_while_121728;
            int64_t low_121729;
            int64_t high_121730;
            
            loop_while_121728 = x_112881;
            low_121729 = (int64_t) 0;
            high_121730 = i_112880;
            while (loop_while_121728) {
                int64_t x_121731 = add64(low_121729, high_121730);
                int64_t mid_121732 = sdiv64(x_121731, (int64_t) 2);
                bool x_121733 = sle64((int64_t) 0, mid_121732);
                bool y_121734 = slt64(mid_121732, n_112804);
                bool bounds_check_121735 = x_121733 && y_121734;
                bool index_certs_121736;
                
                if (!bounds_check_121735) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_121732,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t mid_id_121737 = ((int64_t *) mem_119774)[mid_121732];
                bool cond_121738 = slt64(mid_id_121737, (int64_t) 0);
                int64_t mid_idx_121739;
                
                if (cond_121738) {
                    mid_idx_121739 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_121739 = mid_id_121737;
                }
                
                bool cond_121740 = sle64(defunc_0_g_res_121724, mid_idx_121739);
                int64_t loopres_121741;
                int64_t loopres_121742;
                
                if (cond_121740) {
                    int64_t loopres_t_res_121743 = sub64(mid_121732,
                                                         (int64_t) 1);
                    
                    loopres_121741 = low_121729;
                    loopres_121742 = loopres_t_res_121743;
                } else {
                    int64_t loopres_f_res_121744 = add64((int64_t) 1,
                                                         mid_121732);
                    
                    loopres_121741 = loopres_f_res_121744;
                    loopres_121742 = high_121730;
                }
                
                bool loop_cond_121745 = sle64(loopres_121741, loopres_121742);
                bool loop_while_tmp_121814 = loop_cond_121745;
                int64_t low_tmp_121815 = loopres_121741;
                int64_t high_tmp_121816 = loopres_121742;
                
                loop_while_121728 = loop_while_tmp_121814;
                low_121729 = low_tmp_121815;
                high_121730 = high_tmp_121816;
            }
            init_idx_121725 = loop_while_121728;
            init_idx_121726 = low_121729;
            init_idx_121727 = high_121730;
            
            bool idx_121746;
            int64_t idx_121747;
            int64_t idx_121748;
            int64_t idx_121749;
            bool loop_while_121750;
            int64_t l_idx_121751;
            int64_t r_idx_121752;
            int64_t span_121753;
            
            loop_while_121750 = loop_cond_112957;
            l_idx_121751 = init_idx_121726;
            r_idx_121752 = init_idx_121726;
            span_121753 = (int64_t) 1;
            while (loop_while_121750) {
                int64_t max_arg_121754 = sub64(l_idx_121751, (int64_t) 1);
                int64_t max_res_121755 = smax64((int64_t) 0, max_arg_121754);
                int64_t min_arg_121756 = add64((int64_t) 1, r_idx_121752);
                int64_t min_res_121757 = smin64(min_arg_112966, min_arg_121756);
                bool x_121758 = sle64((int64_t) 0, max_res_121755);
                bool y_121759 = slt64(max_res_121755, n_112804);
                bool bounds_check_121760 = x_121758 && y_121759;
                bool index_certs_121761;
                
                if (!bounds_check_121760) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_121755,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121762 = ((int64_t *) mem_119774)[max_res_121755];
                int64_t abs_arg_121763 = sub64(x_121762, defunc_0_g_res_121724);
                int64_t abs_res_121764 = abs64(abs_arg_121763);
                bool x_121765 = sle64((int64_t) 0, min_res_121757);
                bool y_121766 = slt64(min_res_121757, n_112804);
                bool bounds_check_121767 = x_121765 && y_121766;
                bool index_certs_121768;
                
                if (!bounds_check_121767) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_121757,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_121769 = ((int64_t *) mem_119774)[min_res_121757];
                int64_t abs_arg_121770 = sub64(x_121769, defunc_0_g_res_121724);
                int64_t abs_res_121771 = abs64(abs_arg_121770);
                bool cond_121772 = max_res_121755 == l_idx_121751;
                int64_t loopres_121773;
                int64_t loopres_121774;
                int64_t loopres_121775;
                
                if (cond_121772) {
                    loopres_121773 = l_idx_121751;
                    loopres_121774 = r_idx_121752;
                    loopres_121775 = min_res_112952;
                } else {
                    bool cond_121776 = slt64(abs_res_121764, abs_res_121771);
                    bool cond_f_res_121777 = min_res_121757 == r_idx_121752;
                    bool x_121778 = !cond_121776;
                    bool y_121779 = cond_f_res_121777 && x_121778;
                    bool cond_121780 = cond_121776 || y_121779;
                    int64_t loopres_f_res_121781;
                    
                    if (cond_121780) {
                        loopres_f_res_121781 = max_res_121755;
                    } else {
                        loopres_f_res_121781 = l_idx_121751;
                    }
                    
                    int64_t loopres_f_res_121782;
                    
                    if (cond_121780) {
                        loopres_f_res_121782 = r_idx_121752;
                    } else {
                        loopres_f_res_121782 = min_res_121757;
                    }
                    
                    int64_t loopres_f_res_121783;
                    
                    if (cond_121780) {
                        int64_t loopres_f_res_t_res_121784 = add64((int64_t) 1,
                                                                   span_121753);
                        
                        loopres_f_res_121783 = loopres_f_res_t_res_121784;
                    } else {
                        int64_t loopres_f_res_f_res_121785 = add64((int64_t) 1,
                                                                   span_121753);
                        
                        loopres_f_res_121783 = loopres_f_res_f_res_121785;
                    }
                    loopres_121773 = loopres_f_res_121781;
                    loopres_121774 = loopres_f_res_121782;
                    loopres_121775 = loopres_f_res_121783;
                }
                
                bool loop_cond_121786 = slt64(loopres_121775, min_res_112952);
                bool loop_while_tmp_121817 = loop_cond_121786;
                int64_t l_idx_tmp_121818 = loopres_121773;
                int64_t r_idx_tmp_121819 = loopres_121774;
                int64_t span_tmp_121820 = loopres_121775;
                
                loop_while_121750 = loop_while_tmp_121817;
                l_idx_121751 = l_idx_tmp_121818;
                r_idx_121752 = r_idx_tmp_121819;
                span_121753 = span_tmp_121820;
            }
            idx_121746 = loop_while_121750;
            idx_121747 = l_idx_121751;
            idx_121748 = r_idx_121752;
            idx_121749 = span_121753;
            
            int64_t min_res_121787 = smin64(min_arg_112967, idx_121747);
            int64_t x_121788 = add64(min_res_112952, min_res_121787);
            int64_t r_121789 = sub64(x_121788, (int64_t) 1);
            bool x_121790 = sle64((int64_t) 0, r_121789);
            bool y_121791 = slt64(r_121789, n_112804);
            bool bounds_check_121792 = x_121790 && y_121791;
            bool index_certs_121793;
            
            if (!bounds_check_121792) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_121789,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121794 = ((int64_t *) mem_119693.mem)[gtid_115082 *
                                                            n_112804 +
                                                            r_121789];
            int64_t abs_arg_121795 = sub64(x_121794, min_res_121723);
            int64_t abs_res_121796 = abs64(abs_arg_121795);
            bool x_121797 = sle64((int64_t) 0, min_res_121787);
            bool y_121798 = slt64(min_res_121787, n_112804);
            bool bounds_check_121799 = x_121797 && y_121798;
            bool index_certs_121800;
            
            if (!bounds_check_121799) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_121787,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121801 = ((int64_t *) mem_119693.mem)[gtid_115082 *
                                                            n_112804 +
                                                            min_res_121787];
            int64_t abs_arg_121802 = sub64(x_121801, min_res_121723);
            int64_t abs_res_121803 = abs64(abs_arg_121802);
            int64_t max_res_121804 = smax64(abs_res_121796, abs_res_121803);
            float defunc_0_f_res_121805 = sitofp_i64_f32(max_res_121804);
            float defunc_1_f_res_121806 = max_res_112971 +
                  defunc_0_f_res_121805;
            
            ((float *) mem_119789)[i_121719] = defunc_1_f_res_121806;
            ((int64_t *) mem_119792)[i_121719] = min_res_121787;
        }
        memmove(mem_119820.mem + gtid_115082 * l_n_m_112854 * (int64_t) 8,
                mem_119792 + (int64_t) 0, l_n_m_112854 * (int64_t) 8);
        memmove(mem_119824.mem + gtid_115082 * l_n_m_112854 * (int64_t) 4,
                mem_119789 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119774);
    free(mem_119789);
    free(mem_119792);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128398_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128398_end -
                 futhark_mc_segmap_parloop_128398_start;
        
        ctx->futhark_mc_segmap_parloop_128398_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128398_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128398_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128396(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115081 = tid;
    int num_tasks_121712 = info.nsubtasks;
    struct futhark_mc_task_128395 *futhark_mc_task_128395 =
                                  (struct futhark_mc_task_128395 *) args;
    struct futhark_context *ctx = futhark_mc_task_128395->ctx;
    uint64_t futhark_mc_segmap_task_128396_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128396_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128395->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128395->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128395->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128395->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128395->free_i_112880;
    bool x_112881 = futhark_mc_task_128395->free_x_112881;
    int64_t min_res_112952 = futhark_mc_task_128395->free_min_res_112952;
    bool loop_cond_112957 = futhark_mc_task_128395->free_loop_cond_112957;
    float i64_res_112958 = futhark_mc_task_128395->free_i64_res_112958;
    int64_t bytes_119654 = futhark_mc_task_128395->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128395->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128395->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119766 = futhark_mc_task_128395->free_bytes_119766;
    int64_t bytes_119769 = futhark_mc_task_128395->free_bytes_119769;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128395->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128395->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t iter_121713;
    struct futhark_mc_segmap_parloop_struct_128397
    futhark_mc_segmap_parloop_struct_128397;
    
    futhark_mc_segmap_parloop_struct_128397.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128397.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128397.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128397.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128397.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128397.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128397.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128397.free_min_res_112952 =
        min_res_112952;
    futhark_mc_segmap_parloop_struct_128397.free_loop_cond_112957 =
        loop_cond_112957;
    futhark_mc_segmap_parloop_struct_128397.free_i64_res_112958 =
        i64_res_112958;
    futhark_mc_segmap_parloop_struct_128397.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128397.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128397.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128397.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128397.free_bytes_119769 = bytes_119769;
    futhark_mc_segmap_parloop_struct_128397.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128397.free_mem_119824 = mem_119824.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128398_task;
    
    futhark_mc_segmap_parloop_128398_task.name =
        "futhark_mc_segmap_parloop_128398";
    futhark_mc_segmap_parloop_128398_task.fn = futhark_mc_segmap_parloop_128398;
    futhark_mc_segmap_parloop_128398_task.args =
        &futhark_mc_segmap_parloop_struct_128397;
    futhark_mc_segmap_parloop_128398_task.iterations = iterations;
    futhark_mc_segmap_parloop_128398_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128398_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128398_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128398_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128398_task);
    
    if (futhark_mc_segmap_parloop_128398_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128398_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128398_total_end -
                 futhark_mc_segmap_parloop_128398_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128398_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128398_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128398_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128396_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128396_end -
                 futhark_mc_segmap_task_128396_start;
        
        ctx->futhark_mc_segmap_task_128396_runs[tid]++;
        ctx->futhark_mc_segmap_task_128396_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128396_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128403 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_112952;
    bool free_loop_cond_112957;
    float free_i64_res_112958;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119766;
    int64_t free_bytes_119769;
    char *free_mem_119820;
    char *free_mem_119824;
};
struct futhark_mc_task_128408 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115084;
    char *free_mem_119693;
    char *free_mem_119765;
};
struct futhark_mc_segmap_parloop_struct_128410 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115084;
    char *free_mem_119693;
    char *free_mem_119765;
};
static int futhark_mc_segmap_parloop_128411(void *args, int64_t start,
                                            int64_t end, int flat_tid_115085,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128410
    *futhark_mc_segmap_parloop_struct_128410 =
    (struct futhark_mc_segmap_parloop_struct_128410 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128410->ctx;
    uint64_t futhark_mc_segmap_parloop_128411_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128411_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128410->free_n_112804;
    int64_t gtid_115084 =
            futhark_mc_segmap_parloop_struct_128410->free_gtid_115084;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128410->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119765 = {.desc ="mem_119765", .mem =
                                  futhark_mc_segmap_parloop_struct_128410->free_mem_119765,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121912 = start;
    
    for (; iter_121912 < end; iter_121912++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121913 = n_112804;
        int64_t gtid_115086 = iter_121912;
        int64_t remnant_121914 = iter_121912 - gtid_115086;
        int64_t x_121822 = ((int64_t *) mem_119693.mem)[gtid_115084 * n_112804 +
                                                        gtid_115086];
        int64_t defunc_0_f_res_121823 = add64((int64_t) 1, x_121822);
        
        ((int64_t *) mem_119765.mem)[gtid_115086] = defunc_0_f_res_121823;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128411_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128411_end -
                 futhark_mc_segmap_parloop_128411_start;
        
        ctx->futhark_mc_segmap_parloop_128411_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128411_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128411_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128409(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115085 = tid;
    int num_tasks_121911 = info.nsubtasks;
    struct futhark_mc_task_128408 *futhark_mc_task_128408 =
                                  (struct futhark_mc_task_128408 *) args;
    struct futhark_context *ctx = futhark_mc_task_128408->ctx;
    uint64_t futhark_mc_segmap_task_128409_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128409_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128408->free_n_112804;
    int64_t gtid_115084 = futhark_mc_task_128408->free_gtid_115084;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128408->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119765 = {.desc ="mem_119765", .mem =
                                  futhark_mc_task_128408->free_mem_119765,
                                  .size =0, .references =NULL};
    int64_t iter_121912;
    struct futhark_mc_segmap_parloop_struct_128410
    futhark_mc_segmap_parloop_struct_128410;
    
    futhark_mc_segmap_parloop_struct_128410.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128410.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128410.free_gtid_115084 = gtid_115084;
    futhark_mc_segmap_parloop_struct_128410.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128410.free_mem_119765 = mem_119765.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128411_task;
    
    futhark_mc_segmap_parloop_128411_task.name =
        "futhark_mc_segmap_parloop_128411";
    futhark_mc_segmap_parloop_128411_task.fn = futhark_mc_segmap_parloop_128411;
    futhark_mc_segmap_parloop_128411_task.args =
        &futhark_mc_segmap_parloop_struct_128410;
    futhark_mc_segmap_parloop_128411_task.iterations = iterations;
    futhark_mc_segmap_parloop_128411_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128411_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128411_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128411_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128411_task);
    
    if (futhark_mc_segmap_parloop_128411_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128411_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128411_total_end -
                 futhark_mc_segmap_parloop_128411_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128411_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128411_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128411_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128409_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128409_end -
                 futhark_mc_segmap_task_128409_start;
        
        ctx->futhark_mc_segmap_task_128409_runs[tid]++;
        ctx->futhark_mc_segmap_task_128409_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128409_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128412 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_112952;
    bool free_loop_cond_112957;
    int64_t free_gtid_115084;
    int64_t free_min_arg_115094;
    int64_t free_min_arg_115095;
    float free_max_res_115099;
    char *free_mem_119693;
    char *free_mem_119765;
    char *free_mem_119768;
    char *free_mem_119771;
};
struct futhark_mc_segmap_parloop_struct_128414 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_112952;
    bool free_loop_cond_112957;
    int64_t free_gtid_115084;
    int64_t free_min_arg_115094;
    int64_t free_min_arg_115095;
    float free_max_res_115099;
    char *free_mem_119693;
    char *free_mem_119765;
    char *free_mem_119768;
    char *free_mem_119771;
};
static int futhark_mc_segmap_parloop_128415(void *args, int64_t start,
                                            int64_t end, int flat_tid_115087,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128414
    *futhark_mc_segmap_parloop_struct_128414 =
    (struct futhark_mc_segmap_parloop_struct_128414 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128414->ctx;
    uint64_t futhark_mc_segmap_parloop_128415_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128415_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128414->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128414->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128414->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128414->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128414->free_x_112881;
    int64_t min_res_112952 =
            futhark_mc_segmap_parloop_struct_128414->free_min_res_112952;
    bool loop_cond_112957 =
         futhark_mc_segmap_parloop_struct_128414->free_loop_cond_112957;
    int64_t gtid_115084 =
            futhark_mc_segmap_parloop_struct_128414->free_gtid_115084;
    int64_t min_arg_115094 =
            futhark_mc_segmap_parloop_struct_128414->free_min_arg_115094;
    int64_t min_arg_115095 =
            futhark_mc_segmap_parloop_struct_128414->free_min_arg_115095;
    float max_res_115099 =
          futhark_mc_segmap_parloop_struct_128414->free_max_res_115099;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128414->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119765 = {.desc ="mem_119765", .mem =
                                  futhark_mc_segmap_parloop_struct_128414->free_mem_119765,
                                  .size =0, .references =NULL};
    struct memblock mem_119768 = {.desc ="mem_119768", .mem =
                                  futhark_mc_segmap_parloop_struct_128414->free_mem_119768,
                                  .size =0, .references =NULL};
    struct memblock mem_119771 = {.desc ="mem_119771", .mem =
                                  futhark_mc_segmap_parloop_struct_128414->free_mem_119771,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_121916 = start;
    
    for (; iter_121916 < end; iter_121916++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121972 = l_n_m_112854;
        int64_t gtid_115088 = iter_121916;
        int64_t remnant_121973 = iter_121916 - gtid_115088;
        int64_t min_arg_121824 = mul64(l_jump_112812, gtid_115088);
        int64_t min_res_121825 = smin64(i_112880, min_arg_121824);
        int64_t defunc_0_g_res_121826 = add64((int64_t) 1, min_res_121825);
        bool init_idx_121827;
        int64_t init_idx_121828;
        int64_t init_idx_121829;
        bool loop_while_121917;
        int64_t low_121918;
        int64_t high_121919;
        
        loop_while_121917 = x_112881;
        low_121918 = (int64_t) 0;
        high_121919 = i_112880;
        while (loop_while_121917) {
            int64_t x_121920 = add64(low_121918, high_121919);
            int64_t mid_121921 = sdiv64(x_121920, (int64_t) 2);
            bool x_121922 = sle64((int64_t) 0, mid_121921);
            bool y_121923 = slt64(mid_121921, n_112804);
            bool bounds_check_121924 = x_121922 && y_121923;
            bool index_certs_121925;
            
            if (!bounds_check_121924) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_121921,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t mid_id_121926 = ((int64_t *) mem_119765.mem)[mid_121921];
            bool cond_121927 = slt64(mid_id_121926, (int64_t) 0);
            int64_t mid_idx_121928;
            
            if (cond_121927) {
                mid_idx_121928 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_121928 = mid_id_121926;
            }
            
            bool cond_121929 = sle64(defunc_0_g_res_121826, mid_idx_121928);
            int64_t loopres_121930;
            int64_t loopres_121931;
            
            if (cond_121929) {
                int64_t loopres_t_res_121932 = sub64(mid_121921, (int64_t) 1);
                
                loopres_121930 = low_121918;
                loopres_121931 = loopres_t_res_121932;
            } else {
                int64_t loopres_f_res_121933 = add64((int64_t) 1, mid_121921);
                
                loopres_121930 = loopres_f_res_121933;
                loopres_121931 = high_121919;
            }
            
            bool loop_cond_121934 = sle64(loopres_121930, loopres_121931);
            bool loop_while_tmp_121974 = loop_cond_121934;
            int64_t low_tmp_121975 = loopres_121930;
            int64_t high_tmp_121976 = loopres_121931;
            
            loop_while_121917 = loop_while_tmp_121974;
            low_121918 = low_tmp_121975;
            high_121919 = high_tmp_121976;
        }
        init_idx_121827 = loop_while_121917;
        init_idx_121828 = low_121918;
        init_idx_121829 = high_121919;
        
        bool idx_121848;
        int64_t idx_121849;
        int64_t idx_121850;
        int64_t idx_121851;
        bool loop_while_121935;
        int64_t l_idx_121936;
        int64_t r_idx_121937;
        int64_t span_121938;
        
        loop_while_121935 = loop_cond_112957;
        l_idx_121936 = init_idx_121828;
        r_idx_121937 = init_idx_121828;
        span_121938 = (int64_t) 1;
        while (loop_while_121935) {
            int64_t max_arg_121939 = sub64(l_idx_121936, (int64_t) 1);
            int64_t max_res_121940 = smax64((int64_t) 0, max_arg_121939);
            int64_t min_arg_121941 = add64((int64_t) 1, r_idx_121937);
            int64_t min_res_121942 = smin64(min_arg_115094, min_arg_121941);
            bool x_121943 = sle64((int64_t) 0, max_res_121940);
            bool y_121944 = slt64(max_res_121940, n_112804);
            bool bounds_check_121945 = x_121943 && y_121944;
            bool index_certs_121946;
            
            if (!bounds_check_121945) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_121940,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121947 = ((int64_t *) mem_119765.mem)[max_res_121940];
            int64_t abs_arg_121948 = sub64(x_121947, defunc_0_g_res_121826);
            int64_t abs_res_121949 = abs64(abs_arg_121948);
            bool x_121950 = sle64((int64_t) 0, min_res_121942);
            bool y_121951 = slt64(min_res_121942, n_112804);
            bool bounds_check_121952 = x_121950 && y_121951;
            bool index_certs_121953;
            
            if (!bounds_check_121952) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_121942,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_121954 = ((int64_t *) mem_119765.mem)[min_res_121942];
            int64_t abs_arg_121955 = sub64(x_121954, defunc_0_g_res_121826);
            int64_t abs_res_121956 = abs64(abs_arg_121955);
            bool cond_121957 = max_res_121940 == l_idx_121936;
            int64_t loopres_121958;
            int64_t loopres_121959;
            int64_t loopres_121960;
            
            if (cond_121957) {
                loopres_121958 = l_idx_121936;
                loopres_121959 = r_idx_121937;
                loopres_121960 = min_res_112952;
            } else {
                bool cond_121961 = slt64(abs_res_121949, abs_res_121956);
                bool cond_f_res_121962 = min_res_121942 == r_idx_121937;
                bool x_121963 = !cond_121961;
                bool y_121964 = cond_f_res_121962 && x_121963;
                bool cond_121965 = cond_121961 || y_121964;
                int64_t loopres_f_res_121966;
                
                if (cond_121965) {
                    loopres_f_res_121966 = max_res_121940;
                } else {
                    loopres_f_res_121966 = l_idx_121936;
                }
                
                int64_t loopres_f_res_121967;
                
                if (cond_121965) {
                    loopres_f_res_121967 = r_idx_121937;
                } else {
                    loopres_f_res_121967 = min_res_121942;
                }
                
                int64_t loopres_f_res_121968;
                
                if (cond_121965) {
                    int64_t loopres_f_res_t_res_121969 = add64((int64_t) 1,
                                                               span_121938);
                    
                    loopres_f_res_121968 = loopres_f_res_t_res_121969;
                } else {
                    int64_t loopres_f_res_f_res_121970 = add64((int64_t) 1,
                                                               span_121938);
                    
                    loopres_f_res_121968 = loopres_f_res_f_res_121970;
                }
                loopres_121958 = loopres_f_res_121966;
                loopres_121959 = loopres_f_res_121967;
                loopres_121960 = loopres_f_res_121968;
            }
            
            bool loop_cond_121971 = slt64(loopres_121960, min_res_112952);
            bool loop_while_tmp_121977 = loop_cond_121971;
            int64_t l_idx_tmp_121978 = loopres_121958;
            int64_t r_idx_tmp_121979 = loopres_121959;
            int64_t span_tmp_121980 = loopres_121960;
            
            loop_while_121935 = loop_while_tmp_121977;
            l_idx_121936 = l_idx_tmp_121978;
            r_idx_121937 = r_idx_tmp_121979;
            span_121938 = span_tmp_121980;
        }
        idx_121848 = loop_while_121935;
        idx_121849 = l_idx_121936;
        idx_121850 = r_idx_121937;
        idx_121851 = span_121938;
        
        int64_t min_res_121889 = smin64(min_arg_115095, idx_121849);
        int64_t x_121890 = add64(min_res_112952, min_res_121889);
        int64_t r_121891 = sub64(x_121890, (int64_t) 1);
        bool x_121892 = sle64((int64_t) 0, r_121891);
        bool y_121893 = slt64(r_121891, n_112804);
        bool bounds_check_121894 = x_121892 && y_121893;
        bool index_certs_121895;
        
        if (!bounds_check_121894) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_121891,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112804, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121896 = ((int64_t *) mem_119693.mem)[gtid_115084 * n_112804 +
                                                        r_121891];
        int64_t abs_arg_121897 = sub64(x_121896, min_res_121825);
        int64_t abs_res_121898 = abs64(abs_arg_121897);
        bool x_121899 = sle64((int64_t) 0, min_res_121889);
        bool y_121900 = slt64(min_res_121889, n_112804);
        bool bounds_check_121901 = x_121899 && y_121900;
        bool index_certs_121902;
        
        if (!bounds_check_121901) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_121889,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112804, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:143:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:141:5-144:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_121903 = ((int64_t *) mem_119693.mem)[gtid_115084 * n_112804 +
                                                        min_res_121889];
        int64_t abs_arg_121904 = sub64(x_121903, min_res_121825);
        int64_t abs_res_121905 = abs64(abs_arg_121904);
        int64_t max_res_121906 = smax64(abs_res_121898, abs_res_121905);
        float defunc_0_f_res_121907 = sitofp_i64_f32(max_res_121906);
        float defunc_1_f_res_121908 = max_res_115099 + defunc_0_f_res_121907;
        
        ((float *) mem_119768.mem)[gtid_115088] = defunc_1_f_res_121908;
        ((int64_t *) mem_119771.mem)[gtid_115088] = min_res_121889;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128415_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128415_end -
                 futhark_mc_segmap_parloop_128415_start;
        
        ctx->futhark_mc_segmap_parloop_128415_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128415_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128415_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128413(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115087 = tid;
    int num_tasks_121915 = info.nsubtasks;
    struct futhark_mc_task_128412 *futhark_mc_task_128412 =
                                  (struct futhark_mc_task_128412 *) args;
    struct futhark_context *ctx = futhark_mc_task_128412->ctx;
    uint64_t futhark_mc_segmap_task_128413_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128413_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128412->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128412->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128412->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128412->free_i_112880;
    bool x_112881 = futhark_mc_task_128412->free_x_112881;
    int64_t min_res_112952 = futhark_mc_task_128412->free_min_res_112952;
    bool loop_cond_112957 = futhark_mc_task_128412->free_loop_cond_112957;
    int64_t gtid_115084 = futhark_mc_task_128412->free_gtid_115084;
    int64_t min_arg_115094 = futhark_mc_task_128412->free_min_arg_115094;
    int64_t min_arg_115095 = futhark_mc_task_128412->free_min_arg_115095;
    float max_res_115099 = futhark_mc_task_128412->free_max_res_115099;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128412->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119765 = {.desc ="mem_119765", .mem =
                                  futhark_mc_task_128412->free_mem_119765,
                                  .size =0, .references =NULL};
    struct memblock mem_119768 = {.desc ="mem_119768", .mem =
                                  futhark_mc_task_128412->free_mem_119768,
                                  .size =0, .references =NULL};
    struct memblock mem_119771 = {.desc ="mem_119771", .mem =
                                  futhark_mc_task_128412->free_mem_119771,
                                  .size =0, .references =NULL};
    int64_t iter_121916;
    struct futhark_mc_segmap_parloop_struct_128414
    futhark_mc_segmap_parloop_struct_128414;
    
    futhark_mc_segmap_parloop_struct_128414.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128414.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128414.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128414.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128414.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128414.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128414.free_min_res_112952 =
        min_res_112952;
    futhark_mc_segmap_parloop_struct_128414.free_loop_cond_112957 =
        loop_cond_112957;
    futhark_mc_segmap_parloop_struct_128414.free_gtid_115084 = gtid_115084;
    futhark_mc_segmap_parloop_struct_128414.free_min_arg_115094 =
        min_arg_115094;
    futhark_mc_segmap_parloop_struct_128414.free_min_arg_115095 =
        min_arg_115095;
    futhark_mc_segmap_parloop_struct_128414.free_max_res_115099 =
        max_res_115099;
    futhark_mc_segmap_parloop_struct_128414.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128414.free_mem_119765 = mem_119765.mem;
    futhark_mc_segmap_parloop_struct_128414.free_mem_119768 = mem_119768.mem;
    futhark_mc_segmap_parloop_struct_128414.free_mem_119771 = mem_119771.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128415_task;
    
    futhark_mc_segmap_parloop_128415_task.name =
        "futhark_mc_segmap_parloop_128415";
    futhark_mc_segmap_parloop_128415_task.fn = futhark_mc_segmap_parloop_128415;
    futhark_mc_segmap_parloop_128415_task.args =
        &futhark_mc_segmap_parloop_struct_128414;
    futhark_mc_segmap_parloop_128415_task.iterations = iterations;
    futhark_mc_segmap_parloop_128415_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128415_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128415_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128415_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128415_task);
    
    if (futhark_mc_segmap_parloop_128415_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128415_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128415_total_end -
                 futhark_mc_segmap_parloop_128415_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128415_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128415_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128415_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128413_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128413_end -
                 futhark_mc_segmap_task_128413_start;
        
        ctx->futhark_mc_segmap_task_128413_runs[tid]++;
        ctx->futhark_mc_segmap_task_128413_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128413_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128404(void *args, int64_t start,
                                            int64_t end, int flat_tid_115083,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128403
    *futhark_mc_segmap_parloop_struct_128403 =
    (struct futhark_mc_segmap_parloop_struct_128403 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128403->ctx;
    uint64_t futhark_mc_segmap_parloop_128404_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128404_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128403->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128403->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128403->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128403->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128403->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128403->free_x_112881;
    int64_t min_res_112952 =
            futhark_mc_segmap_parloop_struct_128403->free_min_res_112952;
    bool loop_cond_112957 =
         futhark_mc_segmap_parloop_struct_128403->free_loop_cond_112957;
    float i64_res_112958 =
          futhark_mc_segmap_parloop_struct_128403->free_i64_res_112958;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128403->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128403->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128403->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128403->free_bytes_119766;
    int64_t bytes_119769 =
            futhark_mc_segmap_parloop_struct_128403->free_bytes_119769;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128403->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128403->free_mem_119824,
                                  .size =0, .references =NULL};
    size_t mem_119765_cached_sizze_128405 = 0;
    char *mem_119765 = NULL;
    size_t mem_119768_cached_sizze_128406 = 0;
    char *mem_119768 = NULL;
    size_t mem_119771_cached_sizze_128407 = 0;
    char *mem_119771 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121821 = start;
    
    if (mem_119765_cached_sizze_128405 < (size_t) bytes_119654) {
        mem_119765 = realloc(mem_119765, bytes_119654);
        mem_119765_cached_sizze_128405 = bytes_119654;
    }
    if (mem_119768_cached_sizze_128406 < (size_t) bytes_119766) {
        mem_119768 = realloc(mem_119768, bytes_119766);
        mem_119768_cached_sizze_128406 = bytes_119766;
    }
    if (mem_119771_cached_sizze_128407 < (size_t) bytes_119769) {
        mem_119771 = realloc(mem_119771, bytes_119769);
        mem_119771_cached_sizze_128407 = bytes_119769;
    }
    for (; iter_121821 < end; iter_121821++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_121909 = m_112803;
        int64_t gtid_115084 = iter_121821;
        int64_t remnant_121910 = iter_121821 - gtid_115084;
        int64_t x_115090 = ((int64_t *) mem_119696.mem)[gtid_115084];
        int64_t flat_tid_115085 = (int64_t) 0;
        int32_t num_tasks_121911;
        struct futhark_mc_task_128408 futhark_mc_task_128408;
        
        futhark_mc_task_128408.ctx = ctx;
        futhark_mc_task_128408.free_n_112804 = n_112804;
        futhark_mc_task_128408.free_gtid_115084 = gtid_115084;
        futhark_mc_task_128408.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128408.free_mem_119765 = mem_119765;
        
        struct scheduler_segop futhark_mc_task_128408_task;
        
        futhark_mc_task_128408_task.args = &futhark_mc_task_128408;
        futhark_mc_task_128408_task.top_level_fn =
            futhark_mc_segmap_task_128409;
        futhark_mc_task_128408_task.name = "futhark_mc_segmap_task_128409";
        futhark_mc_task_128408_task.iterations = n_112804;
        futhark_mc_task_128408_task.task_time =
            &ctx->futhark_mc_segmap_task_128409_total_time;
        futhark_mc_task_128408_task.task_iter =
            &ctx->futhark_mc_segmap_task_128409_total_iter;
        futhark_mc_task_128408_task.sched = STATIC;
        futhark_mc_task_128408_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128409_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128408_task);
        
        if (futhark_mc_segmap_task_128409_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_115094 = sub64(x_115090, (int64_t) 1);
        int64_t min_arg_115095 = sub64(x_115090, min_res_112952);
        float i64_res_115096 = sitofp_i64_f32(x_115090);
        float x_115097 = i64_res_112958 - i64_res_115096;
        float max_arg_115098 = x_115097 / 2.0F;
        float max_res_115099 = fmax32(0.0F, max_arg_115098);
        int64_t flat_tid_115087 = (int64_t) 0;
        int32_t num_tasks_121915;
        struct futhark_mc_task_128412 futhark_mc_task_128412;
        
        futhark_mc_task_128412.ctx = ctx;
        futhark_mc_task_128412.free_n_112804 = n_112804;
        futhark_mc_task_128412.free_l_jump_112812 = l_jump_112812;
        futhark_mc_task_128412.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128412.free_i_112880 = i_112880;
        futhark_mc_task_128412.free_x_112881 = x_112881;
        futhark_mc_task_128412.free_min_res_112952 = min_res_112952;
        futhark_mc_task_128412.free_loop_cond_112957 = loop_cond_112957;
        futhark_mc_task_128412.free_gtid_115084 = gtid_115084;
        futhark_mc_task_128412.free_min_arg_115094 = min_arg_115094;
        futhark_mc_task_128412.free_min_arg_115095 = min_arg_115095;
        futhark_mc_task_128412.free_max_res_115099 = max_res_115099;
        futhark_mc_task_128412.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128412.free_mem_119765 = mem_119765;
        futhark_mc_task_128412.free_mem_119768 = mem_119768;
        futhark_mc_task_128412.free_mem_119771 = mem_119771;
        
        struct scheduler_segop futhark_mc_task_128412_task;
        
        futhark_mc_task_128412_task.args = &futhark_mc_task_128412;
        futhark_mc_task_128412_task.top_level_fn =
            futhark_mc_segmap_task_128413;
        futhark_mc_task_128412_task.name = "futhark_mc_segmap_task_128413";
        futhark_mc_task_128412_task.iterations = l_n_m_112854;
        futhark_mc_task_128412_task.task_time =
            &ctx->futhark_mc_segmap_task_128413_total_time;
        futhark_mc_task_128412_task.task_iter =
            &ctx->futhark_mc_segmap_task_128413_total_iter;
        futhark_mc_task_128412_task.sched = DYNAMIC;
        futhark_mc_task_128412_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128413_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128412_task);
        
        if (futhark_mc_segmap_task_128413_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119820.mem + gtid_115084 * l_n_m_112854 * (int64_t) 8,
                mem_119771 + (int64_t) 0, l_n_m_112854 * (int64_t) 8);
        memmove(mem_119824.mem + gtid_115084 * l_n_m_112854 * (int64_t) 4,
                mem_119768 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119765);
    free(mem_119768);
    free(mem_119771);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128404_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128404_end -
                 futhark_mc_segmap_parloop_128404_start;
        
        ctx->futhark_mc_segmap_parloop_128404_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128404_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128404_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128402(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115083 = tid;
    int num_tasks_121712 = info.nsubtasks;
    struct futhark_mc_task_128395 *futhark_mc_task_128395 =
                                  (struct futhark_mc_task_128395 *) args;
    struct futhark_context *ctx = futhark_mc_task_128395->ctx;
    uint64_t futhark_mc_segmap_nested_task_128402_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128402_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128395->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128395->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128395->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128395->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128395->free_i_112880;
    bool x_112881 = futhark_mc_task_128395->free_x_112881;
    int64_t min_res_112952 = futhark_mc_task_128395->free_min_res_112952;
    bool loop_cond_112957 = futhark_mc_task_128395->free_loop_cond_112957;
    float i64_res_112958 = futhark_mc_task_128395->free_i64_res_112958;
    int64_t bytes_119654 = futhark_mc_task_128395->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128395->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128395->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119766 = futhark_mc_task_128395->free_bytes_119766;
    int64_t bytes_119769 = futhark_mc_task_128395->free_bytes_119769;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128395->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128395->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t iter_121821;
    struct futhark_mc_segmap_parloop_struct_128403
    futhark_mc_segmap_parloop_struct_128403;
    
    futhark_mc_segmap_parloop_struct_128403.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128403.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128403.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128403.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128403.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128403.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128403.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128403.free_min_res_112952 =
        min_res_112952;
    futhark_mc_segmap_parloop_struct_128403.free_loop_cond_112957 =
        loop_cond_112957;
    futhark_mc_segmap_parloop_struct_128403.free_i64_res_112958 =
        i64_res_112958;
    futhark_mc_segmap_parloop_struct_128403.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128403.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128403.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128403.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128403.free_bytes_119769 = bytes_119769;
    futhark_mc_segmap_parloop_struct_128403.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128403.free_mem_119824 = mem_119824.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128404_task;
    
    futhark_mc_segmap_parloop_128404_task.name =
        "futhark_mc_segmap_parloop_128404";
    futhark_mc_segmap_parloop_128404_task.fn = futhark_mc_segmap_parloop_128404;
    futhark_mc_segmap_parloop_128404_task.args =
        &futhark_mc_segmap_parloop_struct_128403;
    futhark_mc_segmap_parloop_128404_task.iterations = iterations;
    futhark_mc_segmap_parloop_128404_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128404_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128404_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128404_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128404_task);
    
    if (futhark_mc_segmap_parloop_128404_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128404_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128404_total_end -
                 futhark_mc_segmap_parloop_128404_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128404_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128404_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128404_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128402_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128402_end -
                 futhark_mc_segmap_nested_task_128402_start;
        
        ctx->futhark_mc_segmap_nested_task_128402_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128402_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128402_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128416 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_113062;
    bool free_loop_cond_113067;
    float free_i64_res_113068;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119828;
    int64_t free_bytes_119831;
    char *free_mem_119882;
    char *free_mem_119886;
};
struct futhark_mc_segmap_parloop_struct_128418 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_113062;
    bool free_loop_cond_113067;
    float free_i64_res_113068;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119828;
    int64_t free_bytes_119831;
    char *free_mem_119882;
    char *free_mem_119886;
};
static int futhark_mc_segmap_parloop_128419(void *args, int64_t start,
                                            int64_t end, int flat_tid_115188,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128418
    *futhark_mc_segmap_parloop_struct_128418 =
    (struct futhark_mc_segmap_parloop_struct_128418 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128418->ctx;
    uint64_t futhark_mc_segmap_parloop_128419_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128419_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128418->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128418->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128418->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128418->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128418->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128418->free_x_112881;
    int64_t min_res_113062 =
            futhark_mc_segmap_parloop_struct_128418->free_min_res_113062;
    bool loop_cond_113067 =
         futhark_mc_segmap_parloop_struct_128418->free_loop_cond_113067;
    float i64_res_113068 =
          futhark_mc_segmap_parloop_struct_128418->free_i64_res_113068;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128418->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128418->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128418->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128418->free_bytes_119828;
    int64_t bytes_119831 =
            futhark_mc_segmap_parloop_struct_128418->free_bytes_119831;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128418->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128418->free_mem_119886,
                                  .size =0, .references =NULL};
    size_t mem_119836_cached_sizze_128420 = 0;
    char *mem_119836 = NULL;
    size_t mem_119851_cached_sizze_128421 = 0;
    char *mem_119851 = NULL;
    size_t mem_119854_cached_sizze_128422 = 0;
    char *mem_119854 = NULL;
    int64_t iterations = end - start;
    int64_t iter_121982 = start;
    
    if (mem_119836_cached_sizze_128420 < (size_t) bytes_119654) {
        mem_119836 = realloc(mem_119836, bytes_119654);
        mem_119836_cached_sizze_128420 = bytes_119654;
    }
    if (mem_119851_cached_sizze_128421 < (size_t) bytes_119828) {
        mem_119851 = realloc(mem_119851, bytes_119828);
        mem_119851_cached_sizze_128421 = bytes_119828;
    }
    if (mem_119854_cached_sizze_128422 < (size_t) bytes_119831) {
        mem_119854 = realloc(mem_119854, bytes_119831);
        mem_119854_cached_sizze_128422 = bytes_119831;
    }
    for (; iter_121982 < end; iter_121982++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122078 = m_112803;
        int64_t gtid_115189 = iter_121982;
        int64_t remnant_122079 = iter_121982 - gtid_115189;
        int64_t x_113072 = ((int64_t *) mem_119696.mem)[gtid_115189];
        
        for (int64_t i_121983 = 0; i_121983 < n_112804; i_121983++) {
            int64_t x_121985 = ((int64_t *) mem_119693.mem)[gtid_115189 *
                                                            n_112804 +
                                                            i_121983];
            int64_t defunc_0_f_res_121986 = add64((int64_t) 1, x_121985);
            
            ((int64_t *) mem_119836)[i_121983] = defunc_0_f_res_121986;
        }
        
        int64_t min_arg_113076 = sub64(x_113072, (int64_t) 1);
        int64_t min_arg_113077 = sub64(x_113072, min_res_113062);
        float i64_res_113078 = sitofp_i64_f32(x_113072);
        float x_113079 = i64_res_113068 - i64_res_113078;
        float max_arg_113080 = x_113079 / 2.0F;
        float max_res_113081 = fmax32(0.0F, max_arg_113080);
        
        for (int64_t i_121988 = 0; i_121988 < t_n_m_112861; i_121988++) {
            int64_t min_arg_121991 = mul64(t_jump_112811, i_121988);
            int64_t min_res_121992 = smin64(i_112880, min_arg_121991);
            int64_t defunc_0_g_res_121993 = add64((int64_t) 1, min_res_121992);
            bool init_idx_121994;
            int64_t init_idx_121995;
            int64_t init_idx_121996;
            bool loop_while_121997;
            int64_t low_121998;
            int64_t high_121999;
            
            loop_while_121997 = x_112881;
            low_121998 = (int64_t) 0;
            high_121999 = i_112880;
            while (loop_while_121997) {
                int64_t x_122000 = add64(low_121998, high_121999);
                int64_t mid_122001 = sdiv64(x_122000, (int64_t) 2);
                bool x_122002 = sle64((int64_t) 0, mid_122001);
                bool y_122003 = slt64(mid_122001, n_112804);
                bool bounds_check_122004 = x_122002 && y_122003;
                bool index_certs_122005;
                
                if (!bounds_check_122004) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) mid_122001,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t mid_id_122006 = ((int64_t *) mem_119836)[mid_122001];
                bool cond_122007 = slt64(mid_id_122006, (int64_t) 0);
                int64_t mid_idx_122008;
                
                if (cond_122007) {
                    mid_idx_122008 = (int64_t) 9223372036854775807;
                } else {
                    mid_idx_122008 = mid_id_122006;
                }
                
                bool cond_122009 = sle64(defunc_0_g_res_121993, mid_idx_122008);
                int64_t loopres_122010;
                int64_t loopres_122011;
                
                if (cond_122009) {
                    int64_t loopres_t_res_122012 = sub64(mid_122001,
                                                         (int64_t) 1);
                    
                    loopres_122010 = low_121998;
                    loopres_122011 = loopres_t_res_122012;
                } else {
                    int64_t loopres_f_res_122013 = add64((int64_t) 1,
                                                         mid_122001);
                    
                    loopres_122010 = loopres_f_res_122013;
                    loopres_122011 = high_121999;
                }
                
                bool loop_cond_122014 = sle64(loopres_122010, loopres_122011);
                bool loop_while_tmp_122083 = loop_cond_122014;
                int64_t low_tmp_122084 = loopres_122010;
                int64_t high_tmp_122085 = loopres_122011;
                
                loop_while_121997 = loop_while_tmp_122083;
                low_121998 = low_tmp_122084;
                high_121999 = high_tmp_122085;
            }
            init_idx_121994 = loop_while_121997;
            init_idx_121995 = low_121998;
            init_idx_121996 = high_121999;
            
            bool idx_122015;
            int64_t idx_122016;
            int64_t idx_122017;
            int64_t idx_122018;
            bool loop_while_122019;
            int64_t l_idx_122020;
            int64_t r_idx_122021;
            int64_t span_122022;
            
            loop_while_122019 = loop_cond_113067;
            l_idx_122020 = init_idx_121995;
            r_idx_122021 = init_idx_121995;
            span_122022 = (int64_t) 1;
            while (loop_while_122019) {
                int64_t max_arg_122023 = sub64(l_idx_122020, (int64_t) 1);
                int64_t max_res_122024 = smax64((int64_t) 0, max_arg_122023);
                int64_t min_arg_122025 = add64((int64_t) 1, r_idx_122021);
                int64_t min_res_122026 = smin64(min_arg_113076, min_arg_122025);
                bool x_122027 = sle64((int64_t) 0, max_res_122024);
                bool y_122028 = slt64(max_res_122024, n_112804);
                bool bounds_check_122029 = x_122027 && y_122028;
                bool index_certs_122030;
                
                if (!bounds_check_122029) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) max_res_122024,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_122031 = ((int64_t *) mem_119836)[max_res_122024];
                int64_t abs_arg_122032 = sub64(x_122031, defunc_0_g_res_121993);
                int64_t abs_res_122033 = abs64(abs_arg_122032);
                bool x_122034 = sle64((int64_t) 0, min_res_122026);
                bool y_122035 = slt64(min_res_122026, n_112804);
                bool bounds_check_122036 = x_122034 && y_122035;
                bool index_certs_122037;
                
                if (!bounds_check_122036) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) min_res_122026,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                int64_t x_122038 = ((int64_t *) mem_119836)[min_res_122026];
                int64_t abs_arg_122039 = sub64(x_122038, defunc_0_g_res_121993);
                int64_t abs_res_122040 = abs64(abs_arg_122039);
                bool cond_122041 = max_res_122024 == l_idx_122020;
                int64_t loopres_122042;
                int64_t loopres_122043;
                int64_t loopres_122044;
                
                if (cond_122041) {
                    loopres_122042 = l_idx_122020;
                    loopres_122043 = r_idx_122021;
                    loopres_122044 = min_res_113062;
                } else {
                    bool cond_122045 = slt64(abs_res_122033, abs_res_122040);
                    bool cond_f_res_122046 = min_res_122026 == r_idx_122021;
                    bool x_122047 = !cond_122045;
                    bool y_122048 = cond_f_res_122046 && x_122047;
                    bool cond_122049 = cond_122045 || y_122048;
                    int64_t loopres_f_res_122050;
                    
                    if (cond_122049) {
                        loopres_f_res_122050 = max_res_122024;
                    } else {
                        loopres_f_res_122050 = l_idx_122020;
                    }
                    
                    int64_t loopres_f_res_122051;
                    
                    if (cond_122049) {
                        loopres_f_res_122051 = r_idx_122021;
                    } else {
                        loopres_f_res_122051 = min_res_122026;
                    }
                    
                    int64_t loopres_f_res_122052;
                    
                    if (cond_122049) {
                        int64_t loopres_f_res_t_res_122053 = add64((int64_t) 1,
                                                                   span_122022);
                        
                        loopres_f_res_122052 = loopres_f_res_t_res_122053;
                    } else {
                        int64_t loopres_f_res_f_res_122054 = add64((int64_t) 1,
                                                                   span_122022);
                        
                        loopres_f_res_122052 = loopres_f_res_f_res_122054;
                    }
                    loopres_122042 = loopres_f_res_122050;
                    loopres_122043 = loopres_f_res_122051;
                    loopres_122044 = loopres_f_res_122052;
                }
                
                bool loop_cond_122055 = slt64(loopres_122044, min_res_113062);
                bool loop_while_tmp_122086 = loop_cond_122055;
                int64_t l_idx_tmp_122087 = loopres_122042;
                int64_t r_idx_tmp_122088 = loopres_122043;
                int64_t span_tmp_122089 = loopres_122044;
                
                loop_while_122019 = loop_while_tmp_122086;
                l_idx_122020 = l_idx_tmp_122087;
                r_idx_122021 = r_idx_tmp_122088;
                span_122022 = span_tmp_122089;
            }
            idx_122015 = loop_while_122019;
            idx_122016 = l_idx_122020;
            idx_122017 = r_idx_122021;
            idx_122018 = span_122022;
            
            int64_t min_res_122056 = smin64(min_arg_113077, idx_122016);
            int64_t x_122057 = add64(min_res_113062, min_res_122056);
            int64_t r_122058 = sub64(x_122057, (int64_t) 1);
            bool x_122059 = sle64((int64_t) 0, r_122058);
            bool y_122060 = slt64(r_122058, n_112804);
            bool bounds_check_122061 = x_122059 && y_122060;
            bool index_certs_122062;
            
            if (!bounds_check_122061) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) r_122058,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_122063 = ((int64_t *) mem_119693.mem)[gtid_115189 *
                                                            n_112804 +
                                                            r_122058];
            int64_t abs_arg_122064 = sub64(x_122063, min_res_121992);
            int64_t abs_res_122065 = abs64(abs_arg_122064);
            bool x_122066 = sle64((int64_t) 0, min_res_122056);
            bool y_122067 = slt64(min_res_122056, n_112804);
            bool bounds_check_122068 = x_122066 && y_122067;
            bool index_certs_122069;
            
            if (!bounds_check_122068) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_122056,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_122070 = ((int64_t *) mem_119693.mem)[gtid_115189 *
                                                            n_112804 +
                                                            min_res_122056];
            int64_t abs_arg_122071 = sub64(x_122070, min_res_121992);
            int64_t abs_res_122072 = abs64(abs_arg_122071);
            int64_t max_res_122073 = smax64(abs_res_122065, abs_res_122072);
            float defunc_0_f_res_122074 = sitofp_i64_f32(max_res_122073);
            float defunc_1_f_res_122075 = max_res_113081 +
                  defunc_0_f_res_122074;
            
            ((float *) mem_119851)[i_121988] = defunc_1_f_res_122075;
            ((int64_t *) mem_119854)[i_121988] = min_res_122056;
        }
        memmove(mem_119882.mem + gtid_115189 * t_n_m_112861 * (int64_t) 8,
                mem_119854 + (int64_t) 0, t_n_m_112861 * (int64_t) 8);
        memmove(mem_119886.mem + gtid_115189 * t_n_m_112861 * (int64_t) 4,
                mem_119851 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119836);
    free(mem_119851);
    free(mem_119854);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128419_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128419_end -
                 futhark_mc_segmap_parloop_128419_start;
        
        ctx->futhark_mc_segmap_parloop_128419_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128419_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128419_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128417(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115188 = tid;
    int num_tasks_121981 = info.nsubtasks;
    struct futhark_mc_task_128416 *futhark_mc_task_128416 =
                                  (struct futhark_mc_task_128416 *) args;
    struct futhark_context *ctx = futhark_mc_task_128416->ctx;
    uint64_t futhark_mc_segmap_task_128417_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128417_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128416->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128416->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128416->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128416->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128416->free_i_112880;
    bool x_112881 = futhark_mc_task_128416->free_x_112881;
    int64_t min_res_113062 = futhark_mc_task_128416->free_min_res_113062;
    bool loop_cond_113067 = futhark_mc_task_128416->free_loop_cond_113067;
    float i64_res_113068 = futhark_mc_task_128416->free_i64_res_113068;
    int64_t bytes_119654 = futhark_mc_task_128416->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128416->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128416->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128416->free_bytes_119828;
    int64_t bytes_119831 = futhark_mc_task_128416->free_bytes_119831;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128416->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128416->free_mem_119886,
                                  .size =0, .references =NULL};
    int64_t iter_121982;
    struct futhark_mc_segmap_parloop_struct_128418
    futhark_mc_segmap_parloop_struct_128418;
    
    futhark_mc_segmap_parloop_struct_128418.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128418.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128418.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128418.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128418.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128418.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128418.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128418.free_min_res_113062 =
        min_res_113062;
    futhark_mc_segmap_parloop_struct_128418.free_loop_cond_113067 =
        loop_cond_113067;
    futhark_mc_segmap_parloop_struct_128418.free_i64_res_113068 =
        i64_res_113068;
    futhark_mc_segmap_parloop_struct_128418.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128418.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128418.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128418.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128418.free_bytes_119831 = bytes_119831;
    futhark_mc_segmap_parloop_struct_128418.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128418.free_mem_119886 = mem_119886.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128419_task;
    
    futhark_mc_segmap_parloop_128419_task.name =
        "futhark_mc_segmap_parloop_128419";
    futhark_mc_segmap_parloop_128419_task.fn = futhark_mc_segmap_parloop_128419;
    futhark_mc_segmap_parloop_128419_task.args =
        &futhark_mc_segmap_parloop_struct_128418;
    futhark_mc_segmap_parloop_128419_task.iterations = iterations;
    futhark_mc_segmap_parloop_128419_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128419_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128419_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128419_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128419_task);
    
    if (futhark_mc_segmap_parloop_128419_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128419_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128419_total_end -
                 futhark_mc_segmap_parloop_128419_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128419_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128419_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128419_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128417_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128417_end -
                 futhark_mc_segmap_task_128417_start;
        
        ctx->futhark_mc_segmap_task_128417_runs[tid]++;
        ctx->futhark_mc_segmap_task_128417_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128417_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128424 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_113062;
    bool free_loop_cond_113067;
    float free_i64_res_113068;
    int64_t free_bytes_119654;
    char *free_mem_119693;
    char *free_mem_119696;
    int64_t free_bytes_119828;
    int64_t free_bytes_119831;
    char *free_mem_119882;
    char *free_mem_119886;
};
struct futhark_mc_task_128429 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115191;
    char *free_mem_119693;
    char *free_mem_119827;
};
struct futhark_mc_segmap_parloop_struct_128431 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115191;
    char *free_mem_119693;
    char *free_mem_119827;
};
static int futhark_mc_segmap_parloop_128432(void *args, int64_t start,
                                            int64_t end, int flat_tid_115192,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128431
    *futhark_mc_segmap_parloop_struct_128431 =
    (struct futhark_mc_segmap_parloop_struct_128431 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128431->ctx;
    uint64_t futhark_mc_segmap_parloop_128432_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128432_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128431->free_n_112804;
    int64_t gtid_115191 =
            futhark_mc_segmap_parloop_struct_128431->free_gtid_115191;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128431->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119827 = {.desc ="mem_119827", .mem =
                                  futhark_mc_segmap_parloop_struct_128431->free_mem_119827,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122181 = start;
    
    for (; iter_122181 < end; iter_122181++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122182 = n_112804;
        int64_t gtid_115193 = iter_122181;
        int64_t remnant_122183 = iter_122181 - gtid_115193;
        int64_t x_122091 = ((int64_t *) mem_119693.mem)[gtid_115191 * n_112804 +
                                                        gtid_115193];
        int64_t defunc_0_f_res_122092 = add64((int64_t) 1, x_122091);
        
        ((int64_t *) mem_119827.mem)[gtid_115193] = defunc_0_f_res_122092;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128432_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128432_end -
                 futhark_mc_segmap_parloop_128432_start;
        
        ctx->futhark_mc_segmap_parloop_128432_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128432_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128432_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128430(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115192 = tid;
    int num_tasks_122180 = info.nsubtasks;
    struct futhark_mc_task_128429 *futhark_mc_task_128429 =
                                  (struct futhark_mc_task_128429 *) args;
    struct futhark_context *ctx = futhark_mc_task_128429->ctx;
    uint64_t futhark_mc_segmap_task_128430_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128430_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128429->free_n_112804;
    int64_t gtid_115191 = futhark_mc_task_128429->free_gtid_115191;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128429->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119827 = {.desc ="mem_119827", .mem =
                                  futhark_mc_task_128429->free_mem_119827,
                                  .size =0, .references =NULL};
    int64_t iter_122181;
    struct futhark_mc_segmap_parloop_struct_128431
    futhark_mc_segmap_parloop_struct_128431;
    
    futhark_mc_segmap_parloop_struct_128431.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128431.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128431.free_gtid_115191 = gtid_115191;
    futhark_mc_segmap_parloop_struct_128431.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128431.free_mem_119827 = mem_119827.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128432_task;
    
    futhark_mc_segmap_parloop_128432_task.name =
        "futhark_mc_segmap_parloop_128432";
    futhark_mc_segmap_parloop_128432_task.fn = futhark_mc_segmap_parloop_128432;
    futhark_mc_segmap_parloop_128432_task.args =
        &futhark_mc_segmap_parloop_struct_128431;
    futhark_mc_segmap_parloop_128432_task.iterations = iterations;
    futhark_mc_segmap_parloop_128432_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128432_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128432_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128432_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128432_task);
    
    if (futhark_mc_segmap_parloop_128432_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128432_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128432_total_end -
                 futhark_mc_segmap_parloop_128432_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128432_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128432_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128432_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128430_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128430_end -
                 futhark_mc_segmap_task_128430_start;
        
        ctx->futhark_mc_segmap_task_128430_runs[tid]++;
        ctx->futhark_mc_segmap_task_128430_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128430_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128433 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_113062;
    bool free_loop_cond_113067;
    int64_t free_gtid_115191;
    int64_t free_min_arg_115201;
    int64_t free_min_arg_115202;
    float free_max_res_115206;
    char *free_mem_119693;
    char *free_mem_119827;
    char *free_mem_119830;
    char *free_mem_119833;
};
struct futhark_mc_segmap_parloop_struct_128435 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    bool free_x_112881;
    int64_t free_min_res_113062;
    bool free_loop_cond_113067;
    int64_t free_gtid_115191;
    int64_t free_min_arg_115201;
    int64_t free_min_arg_115202;
    float free_max_res_115206;
    char *free_mem_119693;
    char *free_mem_119827;
    char *free_mem_119830;
    char *free_mem_119833;
};
static int futhark_mc_segmap_parloop_128436(void *args, int64_t start,
                                            int64_t end, int flat_tid_115194,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128435
    *futhark_mc_segmap_parloop_struct_128435 =
    (struct futhark_mc_segmap_parloop_struct_128435 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128435->ctx;
    uint64_t futhark_mc_segmap_parloop_128436_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128436_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128435->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128435->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128435->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128435->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128435->free_x_112881;
    int64_t min_res_113062 =
            futhark_mc_segmap_parloop_struct_128435->free_min_res_113062;
    bool loop_cond_113067 =
         futhark_mc_segmap_parloop_struct_128435->free_loop_cond_113067;
    int64_t gtid_115191 =
            futhark_mc_segmap_parloop_struct_128435->free_gtid_115191;
    int64_t min_arg_115201 =
            futhark_mc_segmap_parloop_struct_128435->free_min_arg_115201;
    int64_t min_arg_115202 =
            futhark_mc_segmap_parloop_struct_128435->free_min_arg_115202;
    float max_res_115206 =
          futhark_mc_segmap_parloop_struct_128435->free_max_res_115206;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128435->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119827 = {.desc ="mem_119827", .mem =
                                  futhark_mc_segmap_parloop_struct_128435->free_mem_119827,
                                  .size =0, .references =NULL};
    struct memblock mem_119830 = {.desc ="mem_119830", .mem =
                                  futhark_mc_segmap_parloop_struct_128435->free_mem_119830,
                                  .size =0, .references =NULL};
    struct memblock mem_119833 = {.desc ="mem_119833", .mem =
                                  futhark_mc_segmap_parloop_struct_128435->free_mem_119833,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122185 = start;
    
    for (; iter_122185 < end; iter_122185++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122241 = t_n_m_112861;
        int64_t gtid_115195 = iter_122185;
        int64_t remnant_122242 = iter_122185 - gtid_115195;
        int64_t min_arg_122093 = mul64(t_jump_112811, gtid_115195);
        int64_t min_res_122094 = smin64(i_112880, min_arg_122093);
        int64_t defunc_0_g_res_122095 = add64((int64_t) 1, min_res_122094);
        bool init_idx_122096;
        int64_t init_idx_122097;
        int64_t init_idx_122098;
        bool loop_while_122186;
        int64_t low_122187;
        int64_t high_122188;
        
        loop_while_122186 = x_112881;
        low_122187 = (int64_t) 0;
        high_122188 = i_112880;
        while (loop_while_122186) {
            int64_t x_122189 = add64(low_122187, high_122188);
            int64_t mid_122190 = sdiv64(x_122189, (int64_t) 2);
            bool x_122191 = sle64((int64_t) 0, mid_122190);
            bool y_122192 = slt64(mid_122190, n_112804);
            bool bounds_check_122193 = x_122191 && y_122192;
            bool index_certs_122194;
            
            if (!bounds_check_122193) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) mid_122190,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:352:25-35\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t mid_id_122195 = ((int64_t *) mem_119827.mem)[mid_122190];
            bool cond_122196 = slt64(mid_id_122195, (int64_t) 0);
            int64_t mid_idx_122197;
            
            if (cond_122196) {
                mid_idx_122197 = (int64_t) 9223372036854775807;
            } else {
                mid_idx_122197 = mid_id_122195;
            }
            
            bool cond_122198 = sle64(defunc_0_g_res_122095, mid_idx_122197);
            int64_t loopres_122199;
            int64_t loopres_122200;
            
            if (cond_122198) {
                int64_t loopres_t_res_122201 = sub64(mid_122190, (int64_t) 1);
                
                loopres_122199 = low_122187;
                loopres_122200 = loopres_t_res_122201;
            } else {
                int64_t loopres_f_res_122202 = add64((int64_t) 1, mid_122190);
                
                loopres_122199 = loopres_f_res_122202;
                loopres_122200 = high_122188;
            }
            
            bool loop_cond_122203 = sle64(loopres_122199, loopres_122200);
            bool loop_while_tmp_122243 = loop_cond_122203;
            int64_t low_tmp_122244 = loopres_122199;
            int64_t high_tmp_122245 = loopres_122200;
            
            loop_while_122186 = loop_while_tmp_122243;
            low_122187 = low_tmp_122244;
            high_122188 = high_tmp_122245;
        }
        init_idx_122096 = loop_while_122186;
        init_idx_122097 = low_122187;
        init_idx_122098 = high_122188;
        
        bool idx_122117;
        int64_t idx_122118;
        int64_t idx_122119;
        int64_t idx_122120;
        bool loop_while_122204;
        int64_t l_idx_122205;
        int64_t r_idx_122206;
        int64_t span_122207;
        
        loop_while_122204 = loop_cond_113067;
        l_idx_122205 = init_idx_122097;
        r_idx_122206 = init_idx_122097;
        span_122207 = (int64_t) 1;
        while (loop_while_122204) {
            int64_t max_arg_122208 = sub64(l_idx_122205, (int64_t) 1);
            int64_t max_res_122209 = smax64((int64_t) 0, max_arg_122208);
            int64_t min_arg_122210 = add64((int64_t) 1, r_idx_122206);
            int64_t min_res_122211 = smin64(min_arg_115201, min_arg_122210);
            bool x_122212 = sle64((int64_t) 0, max_res_122209);
            bool y_122213 = slt64(max_res_122209, n_112804);
            bool bounds_check_122214 = x_122212 && y_122213;
            bool index_certs_122215;
            
            if (!bounds_check_122214) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) max_res_122209,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:363:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_122216 = ((int64_t *) mem_119827.mem)[max_res_122209];
            int64_t abs_arg_122217 = sub64(x_122216, defunc_0_g_res_122095);
            int64_t abs_res_122218 = abs64(abs_arg_122217);
            bool x_122219 = sle64((int64_t) 0, min_res_122211);
            bool y_122220 = slt64(min_res_122211, n_112804);
            bool bounds_check_122221 = x_122219 && y_122220;
            bool index_certs_122222;
            
            if (!bounds_check_122221) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) min_res_122211,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  loess.fut:364:36-49\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:345:3-373:7\n   #4  loess.fut:460:15-58\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            int64_t x_122223 = ((int64_t *) mem_119827.mem)[min_res_122211];
            int64_t abs_arg_122224 = sub64(x_122223, defunc_0_g_res_122095);
            int64_t abs_res_122225 = abs64(abs_arg_122224);
            bool cond_122226 = max_res_122209 == l_idx_122205;
            int64_t loopres_122227;
            int64_t loopres_122228;
            int64_t loopres_122229;
            
            if (cond_122226) {
                loopres_122227 = l_idx_122205;
                loopres_122228 = r_idx_122206;
                loopres_122229 = min_res_113062;
            } else {
                bool cond_122230 = slt64(abs_res_122218, abs_res_122225);
                bool cond_f_res_122231 = min_res_122211 == r_idx_122206;
                bool x_122232 = !cond_122230;
                bool y_122233 = cond_f_res_122231 && x_122232;
                bool cond_122234 = cond_122230 || y_122233;
                int64_t loopres_f_res_122235;
                
                if (cond_122234) {
                    loopres_f_res_122235 = max_res_122209;
                } else {
                    loopres_f_res_122235 = l_idx_122205;
                }
                
                int64_t loopres_f_res_122236;
                
                if (cond_122234) {
                    loopres_f_res_122236 = r_idx_122206;
                } else {
                    loopres_f_res_122236 = min_res_122211;
                }
                
                int64_t loopres_f_res_122237;
                
                if (cond_122234) {
                    int64_t loopres_f_res_t_res_122238 = add64((int64_t) 1,
                                                               span_122207);
                    
                    loopres_f_res_122237 = loopres_f_res_t_res_122238;
                } else {
                    int64_t loopres_f_res_f_res_122239 = add64((int64_t) 1,
                                                               span_122207);
                    
                    loopres_f_res_122237 = loopres_f_res_f_res_122239;
                }
                loopres_122227 = loopres_f_res_122235;
                loopres_122228 = loopres_f_res_122236;
                loopres_122229 = loopres_f_res_122237;
            }
            
            bool loop_cond_122240 = slt64(loopres_122229, min_res_113062);
            bool loop_while_tmp_122246 = loop_cond_122240;
            int64_t l_idx_tmp_122247 = loopres_122227;
            int64_t r_idx_tmp_122248 = loopres_122228;
            int64_t span_tmp_122249 = loopres_122229;
            
            loop_while_122204 = loop_while_tmp_122246;
            l_idx_122205 = l_idx_tmp_122247;
            r_idx_122206 = r_idx_tmp_122248;
            span_122207 = span_tmp_122249;
        }
        idx_122117 = loop_while_122204;
        idx_122118 = l_idx_122205;
        idx_122119 = r_idx_122206;
        idx_122120 = span_122207;
        
        int64_t min_res_122158 = smin64(min_arg_115202, idx_122118);
        int64_t x_122159 = add64(min_res_113062, min_res_122158);
        int64_t r_122160 = sub64(x_122159, (int64_t) 1);
        bool x_122161 = sle64((int64_t) 0, r_122160);
        bool y_122162 = slt64(r_122160, n_112804);
        bool bounds_check_122163 = x_122161 && y_122162;
        bool index_certs_122164;
        
        if (!bounds_check_122163) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) r_122160,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112804, "].",
                                   "-> #0  loess.fut:442:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_122165 = ((int64_t *) mem_119693.mem)[gtid_115191 * n_112804 +
                                                        r_122160];
        int64_t abs_arg_122166 = sub64(x_122165, min_res_122094);
        int64_t abs_res_122167 = abs64(abs_arg_122166);
        bool x_122168 = sle64((int64_t) 0, min_res_122158);
        bool y_122169 = slt64(min_res_122158, n_112804);
        bool bounds_check_122170 = x_122168 && y_122169;
        bool index_certs_122171;
        
        if (!bounds_check_122170) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) min_res_122158,
                                   "] out of bounds for array of shape [",
                                   (long long) n_112804, "].",
                                   "-> #0  loess.fut:441:40-47\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  loess.fut:438:3-445:25\n   #4  loess.fut:461:18-55\n   #5  stl.fut:150:13-65\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:148:5-151:26\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
            return 1;
        }
        
        int64_t x_122172 = ((int64_t *) mem_119693.mem)[gtid_115191 * n_112804 +
                                                        min_res_122158];
        int64_t abs_arg_122173 = sub64(x_122172, min_res_122094);
        int64_t abs_res_122174 = abs64(abs_arg_122173);
        int64_t max_res_122175 = smax64(abs_res_122167, abs_res_122174);
        float defunc_0_f_res_122176 = sitofp_i64_f32(max_res_122175);
        float defunc_1_f_res_122177 = max_res_115206 + defunc_0_f_res_122176;
        
        ((float *) mem_119830.mem)[gtid_115195] = defunc_1_f_res_122177;
        ((int64_t *) mem_119833.mem)[gtid_115195] = min_res_122158;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128436_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128436_end -
                 futhark_mc_segmap_parloop_128436_start;
        
        ctx->futhark_mc_segmap_parloop_128436_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128436_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128436_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128434(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115194 = tid;
    int num_tasks_122184 = info.nsubtasks;
    struct futhark_mc_task_128433 *futhark_mc_task_128433 =
                                  (struct futhark_mc_task_128433 *) args;
    struct futhark_context *ctx = futhark_mc_task_128433->ctx;
    uint64_t futhark_mc_segmap_task_128434_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128434_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128433->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128433->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128433->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128433->free_i_112880;
    bool x_112881 = futhark_mc_task_128433->free_x_112881;
    int64_t min_res_113062 = futhark_mc_task_128433->free_min_res_113062;
    bool loop_cond_113067 = futhark_mc_task_128433->free_loop_cond_113067;
    int64_t gtid_115191 = futhark_mc_task_128433->free_gtid_115191;
    int64_t min_arg_115201 = futhark_mc_task_128433->free_min_arg_115201;
    int64_t min_arg_115202 = futhark_mc_task_128433->free_min_arg_115202;
    float max_res_115206 = futhark_mc_task_128433->free_max_res_115206;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128433->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119827 = {.desc ="mem_119827", .mem =
                                  futhark_mc_task_128433->free_mem_119827,
                                  .size =0, .references =NULL};
    struct memblock mem_119830 = {.desc ="mem_119830", .mem =
                                  futhark_mc_task_128433->free_mem_119830,
                                  .size =0, .references =NULL};
    struct memblock mem_119833 = {.desc ="mem_119833", .mem =
                                  futhark_mc_task_128433->free_mem_119833,
                                  .size =0, .references =NULL};
    int64_t iter_122185;
    struct futhark_mc_segmap_parloop_struct_128435
    futhark_mc_segmap_parloop_struct_128435;
    
    futhark_mc_segmap_parloop_struct_128435.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128435.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128435.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128435.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128435.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128435.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128435.free_min_res_113062 =
        min_res_113062;
    futhark_mc_segmap_parloop_struct_128435.free_loop_cond_113067 =
        loop_cond_113067;
    futhark_mc_segmap_parloop_struct_128435.free_gtid_115191 = gtid_115191;
    futhark_mc_segmap_parloop_struct_128435.free_min_arg_115201 =
        min_arg_115201;
    futhark_mc_segmap_parloop_struct_128435.free_min_arg_115202 =
        min_arg_115202;
    futhark_mc_segmap_parloop_struct_128435.free_max_res_115206 =
        max_res_115206;
    futhark_mc_segmap_parloop_struct_128435.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128435.free_mem_119827 = mem_119827.mem;
    futhark_mc_segmap_parloop_struct_128435.free_mem_119830 = mem_119830.mem;
    futhark_mc_segmap_parloop_struct_128435.free_mem_119833 = mem_119833.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128436_task;
    
    futhark_mc_segmap_parloop_128436_task.name =
        "futhark_mc_segmap_parloop_128436";
    futhark_mc_segmap_parloop_128436_task.fn = futhark_mc_segmap_parloop_128436;
    futhark_mc_segmap_parloop_128436_task.args =
        &futhark_mc_segmap_parloop_struct_128435;
    futhark_mc_segmap_parloop_128436_task.iterations = iterations;
    futhark_mc_segmap_parloop_128436_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128436_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128436_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128436_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128436_task);
    
    if (futhark_mc_segmap_parloop_128436_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128436_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128436_total_end -
                 futhark_mc_segmap_parloop_128436_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128436_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128436_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128436_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128434_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128434_end -
                 futhark_mc_segmap_task_128434_start;
        
        ctx->futhark_mc_segmap_task_128434_runs[tid]++;
        ctx->futhark_mc_segmap_task_128434_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128434_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128425(void *args, int64_t start,
                                            int64_t end, int flat_tid_115190,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128424
    *futhark_mc_segmap_parloop_struct_128424 =
    (struct futhark_mc_segmap_parloop_struct_128424 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128424->ctx;
    uint64_t futhark_mc_segmap_parloop_128425_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128425_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128424->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128424->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128424->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128424->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128424->free_i_112880;
    bool x_112881 = futhark_mc_segmap_parloop_struct_128424->free_x_112881;
    int64_t min_res_113062 =
            futhark_mc_segmap_parloop_struct_128424->free_min_res_113062;
    bool loop_cond_113067 =
         futhark_mc_segmap_parloop_struct_128424->free_loop_cond_113067;
    float i64_res_113068 =
          futhark_mc_segmap_parloop_struct_128424->free_i64_res_113068;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_128424->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128424->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128424->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128424->free_bytes_119828;
    int64_t bytes_119831 =
            futhark_mc_segmap_parloop_struct_128424->free_bytes_119831;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128424->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128424->free_mem_119886,
                                  .size =0, .references =NULL};
    size_t mem_119827_cached_sizze_128426 = 0;
    char *mem_119827 = NULL;
    size_t mem_119830_cached_sizze_128427 = 0;
    char *mem_119830 = NULL;
    size_t mem_119833_cached_sizze_128428 = 0;
    char *mem_119833 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122090 = start;
    
    if (mem_119827_cached_sizze_128426 < (size_t) bytes_119654) {
        mem_119827 = realloc(mem_119827, bytes_119654);
        mem_119827_cached_sizze_128426 = bytes_119654;
    }
    if (mem_119830_cached_sizze_128427 < (size_t) bytes_119828) {
        mem_119830 = realloc(mem_119830, bytes_119828);
        mem_119830_cached_sizze_128427 = bytes_119828;
    }
    if (mem_119833_cached_sizze_128428 < (size_t) bytes_119831) {
        mem_119833 = realloc(mem_119833, bytes_119831);
        mem_119833_cached_sizze_128428 = bytes_119831;
    }
    for (; iter_122090 < end; iter_122090++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122178 = m_112803;
        int64_t gtid_115191 = iter_122090;
        int64_t remnant_122179 = iter_122090 - gtid_115191;
        int64_t x_115197 = ((int64_t *) mem_119696.mem)[gtid_115191];
        int64_t flat_tid_115192 = (int64_t) 0;
        int32_t num_tasks_122180;
        struct futhark_mc_task_128429 futhark_mc_task_128429;
        
        futhark_mc_task_128429.ctx = ctx;
        futhark_mc_task_128429.free_n_112804 = n_112804;
        futhark_mc_task_128429.free_gtid_115191 = gtid_115191;
        futhark_mc_task_128429.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128429.free_mem_119827 = mem_119827;
        
        struct scheduler_segop futhark_mc_task_128429_task;
        
        futhark_mc_task_128429_task.args = &futhark_mc_task_128429;
        futhark_mc_task_128429_task.top_level_fn =
            futhark_mc_segmap_task_128430;
        futhark_mc_task_128429_task.name = "futhark_mc_segmap_task_128430";
        futhark_mc_task_128429_task.iterations = n_112804;
        futhark_mc_task_128429_task.task_time =
            &ctx->futhark_mc_segmap_task_128430_total_time;
        futhark_mc_task_128429_task.task_iter =
            &ctx->futhark_mc_segmap_task_128430_total_iter;
        futhark_mc_task_128429_task.sched = STATIC;
        futhark_mc_task_128429_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128430_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128429_task);
        
        if (futhark_mc_segmap_task_128430_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t min_arg_115201 = sub64(x_115197, (int64_t) 1);
        int64_t min_arg_115202 = sub64(x_115197, min_res_113062);
        float i64_res_115203 = sitofp_i64_f32(x_115197);
        float x_115204 = i64_res_113068 - i64_res_115203;
        float max_arg_115205 = x_115204 / 2.0F;
        float max_res_115206 = fmax32(0.0F, max_arg_115205);
        int64_t flat_tid_115194 = (int64_t) 0;
        int32_t num_tasks_122184;
        struct futhark_mc_task_128433 futhark_mc_task_128433;
        
        futhark_mc_task_128433.ctx = ctx;
        futhark_mc_task_128433.free_n_112804 = n_112804;
        futhark_mc_task_128433.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128433.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128433.free_i_112880 = i_112880;
        futhark_mc_task_128433.free_x_112881 = x_112881;
        futhark_mc_task_128433.free_min_res_113062 = min_res_113062;
        futhark_mc_task_128433.free_loop_cond_113067 = loop_cond_113067;
        futhark_mc_task_128433.free_gtid_115191 = gtid_115191;
        futhark_mc_task_128433.free_min_arg_115201 = min_arg_115201;
        futhark_mc_task_128433.free_min_arg_115202 = min_arg_115202;
        futhark_mc_task_128433.free_max_res_115206 = max_res_115206;
        futhark_mc_task_128433.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128433.free_mem_119827 = mem_119827;
        futhark_mc_task_128433.free_mem_119830 = mem_119830;
        futhark_mc_task_128433.free_mem_119833 = mem_119833;
        
        struct scheduler_segop futhark_mc_task_128433_task;
        
        futhark_mc_task_128433_task.args = &futhark_mc_task_128433;
        futhark_mc_task_128433_task.top_level_fn =
            futhark_mc_segmap_task_128434;
        futhark_mc_task_128433_task.name = "futhark_mc_segmap_task_128434";
        futhark_mc_task_128433_task.iterations = t_n_m_112861;
        futhark_mc_task_128433_task.task_time =
            &ctx->futhark_mc_segmap_task_128434_total_time;
        futhark_mc_task_128433_task.task_iter =
            &ctx->futhark_mc_segmap_task_128434_total_iter;
        futhark_mc_task_128433_task.sched = DYNAMIC;
        futhark_mc_task_128433_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128434_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128433_task);
        
        if (futhark_mc_segmap_task_128434_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119882.mem + gtid_115191 * t_n_m_112861 * (int64_t) 8,
                mem_119833 + (int64_t) 0, t_n_m_112861 * (int64_t) 8);
        memmove(mem_119886.mem + gtid_115191 * t_n_m_112861 * (int64_t) 4,
                mem_119830 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119827);
    free(mem_119830);
    free(mem_119833);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128425_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128425_end -
                 futhark_mc_segmap_parloop_128425_start;
        
        ctx->futhark_mc_segmap_parloop_128425_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128425_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128425_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128423(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115190 = tid;
    int num_tasks_121981 = info.nsubtasks;
    struct futhark_mc_task_128416 *futhark_mc_task_128416 =
                                  (struct futhark_mc_task_128416 *) args;
    struct futhark_context *ctx = futhark_mc_task_128416->ctx;
    uint64_t futhark_mc_segmap_nested_task_128423_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128423_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128416->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128416->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128416->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128416->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128416->free_i_112880;
    bool x_112881 = futhark_mc_task_128416->free_x_112881;
    int64_t min_res_113062 = futhark_mc_task_128416->free_min_res_113062;
    bool loop_cond_113067 = futhark_mc_task_128416->free_loop_cond_113067;
    float i64_res_113068 = futhark_mc_task_128416->free_i64_res_113068;
    int64_t bytes_119654 = futhark_mc_task_128416->free_bytes_119654;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128416->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128416->free_mem_119696,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128416->free_bytes_119828;
    int64_t bytes_119831 = futhark_mc_task_128416->free_bytes_119831;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128416->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128416->free_mem_119886,
                                  .size =0, .references =NULL};
    int64_t iter_122090;
    struct futhark_mc_segmap_parloop_struct_128424
    futhark_mc_segmap_parloop_struct_128424;
    
    futhark_mc_segmap_parloop_struct_128424.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128424.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128424.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128424.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128424.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128424.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128424.free_x_112881 = x_112881;
    futhark_mc_segmap_parloop_struct_128424.free_min_res_113062 =
        min_res_113062;
    futhark_mc_segmap_parloop_struct_128424.free_loop_cond_113067 =
        loop_cond_113067;
    futhark_mc_segmap_parloop_struct_128424.free_i64_res_113068 =
        i64_res_113068;
    futhark_mc_segmap_parloop_struct_128424.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_128424.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128424.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128424.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128424.free_bytes_119831 = bytes_119831;
    futhark_mc_segmap_parloop_struct_128424.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128424.free_mem_119886 = mem_119886.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128425_task;
    
    futhark_mc_segmap_parloop_128425_task.name =
        "futhark_mc_segmap_parloop_128425";
    futhark_mc_segmap_parloop_128425_task.fn = futhark_mc_segmap_parloop_128425;
    futhark_mc_segmap_parloop_128425_task.args =
        &futhark_mc_segmap_parloop_struct_128424;
    futhark_mc_segmap_parloop_128425_task.iterations = iterations;
    futhark_mc_segmap_parloop_128425_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128425_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128425_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128425_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128425_task);
    
    if (futhark_mc_segmap_parloop_128425_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128425_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128425_total_end -
                 futhark_mc_segmap_parloop_128425_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128425_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128425_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128425_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128423_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128423_end -
                 futhark_mc_segmap_nested_task_128423_start;
        
        ctx->futhark_mc_segmap_nested_task_128423_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128423_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128423_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128437 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119936;
    char *free_mem_param_119940;
    char *free_mem_119962;
};
struct futhark_mc_segmap_parloop_struct_128439 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119936;
    char *free_mem_param_119940;
    char *free_mem_119962;
};
static int futhark_mc_segmap_parloop_128440(void *args, int64_t start,
                                            int64_t end, int flat_tid_115295,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128439
    *futhark_mc_segmap_parloop_struct_128439 =
    (struct futhark_mc_segmap_parloop_struct_128439 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128439->ctx;
    uint64_t futhark_mc_segmap_parloop_128440_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128440_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128439->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128439->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128439->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128439->free_bytes_119697;
    int64_t ctx_param_ext_119936 =
            futhark_mc_segmap_parloop_struct_128439->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_segmap_parloop_struct_128439->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128439->free_mem_119962,
                                  .size =0, .references =NULL};
    size_t mem_119946_cached_sizze_128441 = 0;
    char *mem_119946 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122276 = start;
    
    if (mem_119946_cached_sizze_128441 < (size_t) bytes_119697) {
        mem_119946 = realloc(mem_119946, bytes_119697);
        mem_119946_cached_sizze_128441 = bytes_119697;
    }
    for (; iter_122276 < end; iter_122276++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122283 = m_112803;
        int64_t gtid_115296 = iter_122276;
        int64_t remnant_122284 = iter_122276 - gtid_115296;
        
        for (int64_t i_122277 = 0; i_122277 < n_112804; i_122277++) {
            float x_122279 = ((float *) Y_mem_119653.mem)[gtid_115296 *
                                                          n_112804 + i_122277];
            float x_122280 = ((float *) mem_param_119940.mem)[gtid_115296 *
                                                              ctx_param_ext_119936 +
                                                              i_122277];
            float defunc_1_f_res_122281 = x_122279 - x_122280;
            
            ((float *) mem_119946)[i_122277] = defunc_1_f_res_122281;
        }
        memmove(mem_119962.mem + gtid_115296 * n_112804 * (int64_t) 4,
                mem_119946 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119946);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128440_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128440_end -
                 futhark_mc_segmap_parloop_128440_start;
        
        ctx->futhark_mc_segmap_parloop_128440_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128440_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128440_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128438(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115295 = tid;
    int num_tasks_122275 = info.nsubtasks;
    struct futhark_mc_task_128437 *futhark_mc_task_128437 =
                                  (struct futhark_mc_task_128437 *) args;
    struct futhark_context *ctx = futhark_mc_task_128437->ctx;
    uint64_t futhark_mc_segmap_task_128438_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128438_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128437->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128437->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128437->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128437->free_bytes_119697;
    int64_t ctx_param_ext_119936 =
            futhark_mc_task_128437->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_task_128437->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128437->free_mem_119962,
                                  .size =0, .references =NULL};
    int64_t iter_122276;
    struct futhark_mc_segmap_parloop_struct_128439
    futhark_mc_segmap_parloop_struct_128439;
    
    futhark_mc_segmap_parloop_struct_128439.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128439.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128439.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128439.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128439.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128439.free_ctx_param_ext_119936 =
        ctx_param_ext_119936;
    futhark_mc_segmap_parloop_struct_128439.free_mem_param_119940 =
        mem_param_119940.mem;
    futhark_mc_segmap_parloop_struct_128439.free_mem_119962 = mem_119962.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128440_task;
    
    futhark_mc_segmap_parloop_128440_task.name =
        "futhark_mc_segmap_parloop_128440";
    futhark_mc_segmap_parloop_128440_task.fn = futhark_mc_segmap_parloop_128440;
    futhark_mc_segmap_parloop_128440_task.args =
        &futhark_mc_segmap_parloop_struct_128439;
    futhark_mc_segmap_parloop_128440_task.iterations = iterations;
    futhark_mc_segmap_parloop_128440_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128440_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128440_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128440_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128440_task);
    
    if (futhark_mc_segmap_parloop_128440_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128440_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128440_total_end -
                 futhark_mc_segmap_parloop_128440_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128440_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128440_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128440_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128438_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128438_end -
                 futhark_mc_segmap_task_128438_start;
        
        ctx->futhark_mc_segmap_task_128438_runs[tid]++;
        ctx->futhark_mc_segmap_task_128438_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128438_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128443 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119936;
    char *free_mem_param_119940;
    char *free_mem_119962;
};
struct futhark_mc_task_128446 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115298;
    char *free_Y_mem_119653;
    int64_t free_ctx_param_ext_119936;
    char *free_mem_param_119940;
    char *free_mem_119943;
};
struct futhark_mc_segmap_parloop_struct_128448 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115298;
    char *free_Y_mem_119653;
    int64_t free_ctx_param_ext_119936;
    char *free_mem_param_119940;
    char *free_mem_119943;
};
static int futhark_mc_segmap_parloop_128449(void *args, int64_t start,
                                            int64_t end, int flat_tid_115299,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128448
    *futhark_mc_segmap_parloop_struct_128448 =
    (struct futhark_mc_segmap_parloop_struct_128448 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128448->ctx;
    uint64_t futhark_mc_segmap_parloop_128449_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128449_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128448->free_n_112804;
    int64_t gtid_115298 =
            futhark_mc_segmap_parloop_struct_128448->free_gtid_115298;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128448->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_119936 =
            futhark_mc_segmap_parloop_struct_128448->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_segmap_parloop_struct_128448->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119943 = {.desc ="mem_119943", .mem =
                                  futhark_mc_segmap_parloop_struct_128448->free_mem_119943,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122293 = start;
    
    for (; iter_122293 < end; iter_122293++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122294 = n_112804;
        int64_t gtid_115300 = iter_122293;
        int64_t remnant_122295 = iter_122293 - gtid_115300;
        float x_122287 = ((float *) Y_mem_119653.mem)[gtid_115298 * n_112804 +
                                                      gtid_115300];
        float x_122288 = ((float *) mem_param_119940.mem)[gtid_115298 *
                                                          ctx_param_ext_119936 +
                                                          gtid_115300];
        float defunc_1_f_res_122289 = x_122287 - x_122288;
        
        ((float *) mem_119943.mem)[gtid_115300] = defunc_1_f_res_122289;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128449_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128449_end -
                 futhark_mc_segmap_parloop_128449_start;
        
        ctx->futhark_mc_segmap_parloop_128449_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128449_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128449_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128447(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115299 = tid;
    int num_tasks_122292 = info.nsubtasks;
    struct futhark_mc_task_128446 *futhark_mc_task_128446 =
                                  (struct futhark_mc_task_128446 *) args;
    struct futhark_context *ctx = futhark_mc_task_128446->ctx;
    uint64_t futhark_mc_segmap_task_128447_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128447_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128446->free_n_112804;
    int64_t gtid_115298 = futhark_mc_task_128446->free_gtid_115298;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128446->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t ctx_param_ext_119936 =
            futhark_mc_task_128446->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_task_128446->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119943 = {.desc ="mem_119943", .mem =
                                  futhark_mc_task_128446->free_mem_119943,
                                  .size =0, .references =NULL};
    int64_t iter_122293;
    struct futhark_mc_segmap_parloop_struct_128448
    futhark_mc_segmap_parloop_struct_128448;
    
    futhark_mc_segmap_parloop_struct_128448.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128448.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128448.free_gtid_115298 = gtid_115298;
    futhark_mc_segmap_parloop_struct_128448.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128448.free_ctx_param_ext_119936 =
        ctx_param_ext_119936;
    futhark_mc_segmap_parloop_struct_128448.free_mem_param_119940 =
        mem_param_119940.mem;
    futhark_mc_segmap_parloop_struct_128448.free_mem_119943 = mem_119943.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128449_task;
    
    futhark_mc_segmap_parloop_128449_task.name =
        "futhark_mc_segmap_parloop_128449";
    futhark_mc_segmap_parloop_128449_task.fn = futhark_mc_segmap_parloop_128449;
    futhark_mc_segmap_parloop_128449_task.args =
        &futhark_mc_segmap_parloop_struct_128448;
    futhark_mc_segmap_parloop_128449_task.iterations = iterations;
    futhark_mc_segmap_parloop_128449_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128449_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128449_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128449_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128449_task);
    
    if (futhark_mc_segmap_parloop_128449_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128449_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128449_total_end -
                 futhark_mc_segmap_parloop_128449_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128449_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128449_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128449_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128447_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128447_end -
                 futhark_mc_segmap_task_128447_start;
        
        ctx->futhark_mc_segmap_task_128447_runs[tid]++;
        ctx->futhark_mc_segmap_task_128447_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128447_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128444(void *args, int64_t start,
                                            int64_t end, int flat_tid_115297,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128443
    *futhark_mc_segmap_parloop_struct_128443 =
    (struct futhark_mc_segmap_parloop_struct_128443 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128443->ctx;
    uint64_t futhark_mc_segmap_parloop_128444_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128444_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128443->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128443->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128443->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128443->free_bytes_119697;
    int64_t ctx_param_ext_119936 =
            futhark_mc_segmap_parloop_struct_128443->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_segmap_parloop_struct_128443->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128443->free_mem_119962,
                                  .size =0, .references =NULL};
    size_t mem_119943_cached_sizze_128445 = 0;
    char *mem_119943 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122286 = start;
    
    if (mem_119943_cached_sizze_128445 < (size_t) bytes_119697) {
        mem_119943 = realloc(mem_119943, bytes_119697);
        mem_119943_cached_sizze_128445 = bytes_119697;
    }
    for (; iter_122286 < end; iter_122286++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122290 = m_112803;
        int64_t gtid_115298 = iter_122286;
        int64_t remnant_122291 = iter_122286 - gtid_115298;
        int64_t flat_tid_115299 = (int64_t) 0;
        int32_t num_tasks_122292;
        struct futhark_mc_task_128446 futhark_mc_task_128446;
        
        futhark_mc_task_128446.ctx = ctx;
        futhark_mc_task_128446.free_n_112804 = n_112804;
        futhark_mc_task_128446.free_gtid_115298 = gtid_115298;
        futhark_mc_task_128446.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128446.free_ctx_param_ext_119936 = ctx_param_ext_119936;
        futhark_mc_task_128446.free_mem_param_119940 = mem_param_119940.mem;
        futhark_mc_task_128446.free_mem_119943 = mem_119943;
        
        struct scheduler_segop futhark_mc_task_128446_task;
        
        futhark_mc_task_128446_task.args = &futhark_mc_task_128446;
        futhark_mc_task_128446_task.top_level_fn =
            futhark_mc_segmap_task_128447;
        futhark_mc_task_128446_task.name = "futhark_mc_segmap_task_128447";
        futhark_mc_task_128446_task.iterations = n_112804;
        futhark_mc_task_128446_task.task_time =
            &ctx->futhark_mc_segmap_task_128447_total_time;
        futhark_mc_task_128446_task.task_iter =
            &ctx->futhark_mc_segmap_task_128447_total_iter;
        futhark_mc_task_128446_task.sched = STATIC;
        futhark_mc_task_128446_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128447_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128446_task);
        
        if (futhark_mc_segmap_task_128447_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119962.mem + gtid_115298 * n_112804 * (int64_t) 4,
                mem_119943 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119943);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128444_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128444_end -
                 futhark_mc_segmap_parloop_128444_start;
        
        ctx->futhark_mc_segmap_parloop_128444_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128444_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128444_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128442(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115297 = tid;
    int num_tasks_122275 = info.nsubtasks;
    struct futhark_mc_task_128437 *futhark_mc_task_128437 =
                                  (struct futhark_mc_task_128437 *) args;
    struct futhark_context *ctx = futhark_mc_task_128437->ctx;
    uint64_t futhark_mc_segmap_nested_task_128442_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128442_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128437->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128437->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128437->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128437->free_bytes_119697;
    int64_t ctx_param_ext_119936 =
            futhark_mc_task_128437->free_ctx_param_ext_119936;
    struct memblock mem_param_119940 = {.desc ="mem_param_119940", .mem =
                                        futhark_mc_task_128437->free_mem_param_119940,
                                        .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128437->free_mem_119962,
                                  .size =0, .references =NULL};
    int64_t iter_122286;
    struct futhark_mc_segmap_parloop_struct_128443
    futhark_mc_segmap_parloop_struct_128443;
    
    futhark_mc_segmap_parloop_struct_128443.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128443.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128443.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128443.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128443.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128443.free_ctx_param_ext_119936 =
        ctx_param_ext_119936;
    futhark_mc_segmap_parloop_struct_128443.free_mem_param_119940 =
        mem_param_119940.mem;
    futhark_mc_segmap_parloop_struct_128443.free_mem_119962 = mem_119962.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128444_task;
    
    futhark_mc_segmap_parloop_128444_task.name =
        "futhark_mc_segmap_parloop_128444";
    futhark_mc_segmap_parloop_128444_task.fn = futhark_mc_segmap_parloop_128444;
    futhark_mc_segmap_parloop_128444_task.args =
        &futhark_mc_segmap_parloop_struct_128443;
    futhark_mc_segmap_parloop_128444_task.iterations = iterations;
    futhark_mc_segmap_parloop_128444_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128444_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128444_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128444_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128444_task);
    
    if (futhark_mc_segmap_parloop_128444_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128444_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128444_total_end -
                 futhark_mc_segmap_parloop_128444_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128444_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128444_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128444_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128442_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128442_end -
                 futhark_mc_segmap_nested_task_128442_start;
        
        ctx->futhark_mc_segmap_nested_task_128442_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128442_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128442_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128450 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119984;
};
struct futhark_mc_segmap_parloop_struct_128452 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119984;
};
static int futhark_mc_segmap_parloop_128453(void *args, int64_t start,
                                            int64_t end, int flat_tid_115307,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128452
    *futhark_mc_segmap_parloop_struct_128452 =
    (struct futhark_mc_segmap_parloop_struct_128452 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128452->ctx;
    uint64_t futhark_mc_segmap_parloop_128453_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128453_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128452->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128452->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128452->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128452->free_css_chunk_len_112850;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128452->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 =
            futhark_mc_segmap_parloop_struct_128452->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128452->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128452->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_segmap_parloop_struct_128452->free_mem_119984,
                                  .size =0, .references =NULL};
    size_t mem_119968_cached_sizze_128454 = 0;
    char *mem_119968 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122297 = start;
    
    if (mem_119968_cached_sizze_128454 < (size_t) bytes_119741) {
        mem_119968 = realloc(mem_119968, bytes_119741);
        mem_119968_cached_sizze_128454 = bytes_119741;
    }
    for (; iter_122297 < end; iter_122297++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122316 = m_112803;
        int64_t gtid_115308 = iter_122297;
        int64_t remnant_122317 = iter_122297 - gtid_115308;
        
        for (int64_t i_122298 = 0; i_122298 < n_p_112806; i_122298++) {
            float x_122300 = ((float *) mem_119762.mem)[gtid_115308 *
                                                        n_p_112806 + i_122298];
            float defunc_2_reduce_res_122301;
            float redout_122303 = 0.0F;
            
            for (int64_t i_122302 = 0; i_122302 < css_chunk_len_112850;
                 i_122302++) {
                int64_t x_122304 = ((int64_t *) mem_119740.mem)[i_122298 *
                                                                css_chunk_len_112850 +
                                                                i_122302];
                bool cond_122305 = sle64((int64_t) 0, x_122304);
                float defunc_0_f_res_122306;
                
                if (cond_122305) {
                    bool y_122307 = slt64(x_122304, n_112804);
                    bool bounds_check_122308 = cond_122305 && y_122307;
                    bool index_certs_122309;
                    
                    if (!bounds_check_122308) {
                        ctx->error =
                            msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                      "Index [", (long long) x_122304,
                                      "] out of bounds for array of shape [",
                                      (long long) n_112804, "].",
                                      "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                        return 1;
                    }
                    
                    float defunc_0_f_res_t_res_122310 =
                          ((float *) mem_119962.mem)[gtid_115308 * n_112804 +
                                                     x_122304];
                    
                    defunc_0_f_res_122306 = defunc_0_f_res_t_res_122310;
                } else {
                    defunc_0_f_res_122306 = NAN;
                }
                
                bool isnan_res_122311;
                
                isnan_res_122311 = futrts_isnan32(defunc_0_f_res_122306);
                
                float defunc_0_f_res_122312;
                
                if (isnan_res_122311) {
                    defunc_0_f_res_122312 = 0.0F;
                } else {
                    defunc_0_f_res_122312 = defunc_0_f_res_122306;
                }
                
                float defunc_1_op_res_122313 = defunc_0_f_res_122312 +
                      redout_122303;
                float redout_tmp_122319 = defunc_1_op_res_122313;
                
                redout_122303 = redout_tmp_122319;
            }
            defunc_2_reduce_res_122301 = redout_122303;
            
            float defunc_1_f_res_122314 = defunc_2_reduce_res_122301 / x_122300;
            
            ((float *) mem_119968)[i_122298] = defunc_1_f_res_122314;
        }
        memmove(mem_119984.mem + gtid_115308 * n_p_112806 * (int64_t) 4,
                mem_119968 + (int64_t) 0, n_p_112806 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119968);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128453_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128453_end -
                 futhark_mc_segmap_parloop_128453_start;
        
        ctx->futhark_mc_segmap_parloop_128453_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128453_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128453_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128451(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115307 = tid;
    int num_tasks_122296 = info.nsubtasks;
    struct futhark_mc_task_128450 *futhark_mc_task_128450 =
                                  (struct futhark_mc_task_128450 *) args;
    struct futhark_context *ctx = futhark_mc_task_128450->ctx;
    uint64_t futhark_mc_segmap_task_128451_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128451_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128450->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128450->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128450->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128450->free_css_chunk_len_112850;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128450->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 = futhark_mc_task_128450->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128450->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128450->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_task_128450->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t iter_122297;
    struct futhark_mc_segmap_parloop_struct_128452
    futhark_mc_segmap_parloop_struct_128452;
    
    futhark_mc_segmap_parloop_struct_128452.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128452.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128452.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128452.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128452.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128452.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128452.free_bytes_119741 = bytes_119741;
    futhark_mc_segmap_parloop_struct_128452.free_mem_119762 = mem_119762.mem;
    futhark_mc_segmap_parloop_struct_128452.free_mem_119962 = mem_119962.mem;
    futhark_mc_segmap_parloop_struct_128452.free_mem_119984 = mem_119984.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128453_task;
    
    futhark_mc_segmap_parloop_128453_task.name =
        "futhark_mc_segmap_parloop_128453";
    futhark_mc_segmap_parloop_128453_task.fn = futhark_mc_segmap_parloop_128453;
    futhark_mc_segmap_parloop_128453_task.args =
        &futhark_mc_segmap_parloop_struct_128452;
    futhark_mc_segmap_parloop_128453_task.iterations = iterations;
    futhark_mc_segmap_parloop_128453_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128453_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128453_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128453_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128453_task);
    
    if (futhark_mc_segmap_parloop_128453_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128453_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128453_total_end -
                 futhark_mc_segmap_parloop_128453_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128453_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128453_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128453_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128451_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128451_end -
                 futhark_mc_segmap_task_128451_start;
        
        ctx->futhark_mc_segmap_task_128451_runs[tid]++;
        ctx->futhark_mc_segmap_task_128451_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128451_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128456 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    char *free_mem_119740;
    int64_t free_bytes_119741;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119984;
};
struct futhark_mc_task_128459 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115310;
    char *free_mem_119740;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119965;
};
struct futhark_mc_segmap_parloop_struct_128461 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115310;
    char *free_mem_119740;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119965;
};
static int futhark_mc_segmap_parloop_128462(void *args, int64_t start,
                                            int64_t end, int flat_tid_115311,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128461
    *futhark_mc_segmap_parloop_struct_128461 =
    (struct futhark_mc_segmap_parloop_struct_128461 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128461->ctx;
    uint64_t futhark_mc_segmap_parloop_128462_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128462_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128461->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128461->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128461->free_css_chunk_len_112850;
    int64_t gtid_115310 =
            futhark_mc_segmap_parloop_struct_128461->free_gtid_115310;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128461->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128461->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128461->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_segmap_parloop_struct_128461->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122354 = start;
    
    for (; iter_122354 < end; iter_122354++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122367 = n_p_112806;
        int64_t gtid_115312 = iter_122354;
        int64_t remnant_122368 = iter_122354 - gtid_115312;
        float x_122336 = ((float *) mem_119762.mem)[gtid_115310 * n_p_112806 +
                                                    gtid_115312];
        float defunc_2_reduce_res_122337;
        float redout_122356 = 0.0F;
        
        for (int64_t i_122355 = 0; i_122355 < css_chunk_len_112850;
             i_122355++) {
            int64_t x_122357 = ((int64_t *) mem_119740.mem)[gtid_115312 *
                                                            css_chunk_len_112850 +
                                                            i_122355];
            bool cond_122358 = sle64((int64_t) 0, x_122357);
            float defunc_0_f_res_122359;
            
            if (cond_122358) {
                bool y_122360 = slt64(x_122357, n_112804);
                bool bounds_check_122361 = cond_122358 && y_122360;
                bool index_certs_122362;
                
                if (!bounds_check_122361) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_122357,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_122363 =
                      ((float *) mem_119962.mem)[gtid_115310 * n_112804 +
                                                 x_122357];
                
                defunc_0_f_res_122359 = defunc_0_f_res_t_res_122363;
            } else {
                defunc_0_f_res_122359 = NAN;
            }
            
            bool isnan_res_122364;
            
            isnan_res_122364 = futrts_isnan32(defunc_0_f_res_122359);
            
            float defunc_0_f_res_122365;
            
            if (isnan_res_122364) {
                defunc_0_f_res_122365 = 0.0F;
            } else {
                defunc_0_f_res_122365 = defunc_0_f_res_122359;
            }
            
            float defunc_1_op_res_122366 = defunc_0_f_res_122365 +
                  redout_122356;
            float redout_tmp_122369 = defunc_1_op_res_122366;
            
            redout_122356 = redout_tmp_122369;
        }
        defunc_2_reduce_res_122337 = redout_122356;
        
        float defunc_1_f_res_122350 = defunc_2_reduce_res_122337 / x_122336;
        
        ((float *) mem_119965.mem)[gtid_115312] = defunc_1_f_res_122350;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128462_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128462_end -
                 futhark_mc_segmap_parloop_128462_start;
        
        ctx->futhark_mc_segmap_parloop_128462_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128462_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128462_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128460(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115311 = tid;
    int num_tasks_122353 = info.nsubtasks;
    struct futhark_mc_task_128459 *futhark_mc_task_128459 =
                                  (struct futhark_mc_task_128459 *) args;
    struct futhark_context *ctx = futhark_mc_task_128459->ctx;
    uint64_t futhark_mc_segmap_task_128460_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128460_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128459->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128459->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128459->free_css_chunk_len_112850;
    int64_t gtid_115310 = futhark_mc_task_128459->free_gtid_115310;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128459->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128459->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128459->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_task_128459->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iter_122354;
    struct futhark_mc_segmap_parloop_struct_128461
    futhark_mc_segmap_parloop_struct_128461;
    
    futhark_mc_segmap_parloop_struct_128461.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128461.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128461.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128461.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128461.free_gtid_115310 = gtid_115310;
    futhark_mc_segmap_parloop_struct_128461.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128461.free_mem_119762 = mem_119762.mem;
    futhark_mc_segmap_parloop_struct_128461.free_mem_119962 = mem_119962.mem;
    futhark_mc_segmap_parloop_struct_128461.free_mem_119965 = mem_119965.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128462_task;
    
    futhark_mc_segmap_parloop_128462_task.name =
        "futhark_mc_segmap_parloop_128462";
    futhark_mc_segmap_parloop_128462_task.fn = futhark_mc_segmap_parloop_128462;
    futhark_mc_segmap_parloop_128462_task.args =
        &futhark_mc_segmap_parloop_struct_128461;
    futhark_mc_segmap_parloop_128462_task.iterations = iterations;
    futhark_mc_segmap_parloop_128462_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128462_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128462_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128462_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128462_task);
    
    if (futhark_mc_segmap_parloop_128462_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128462_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128462_total_end -
                 futhark_mc_segmap_parloop_128462_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128462_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128462_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128462_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128460_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128460_end -
                 futhark_mc_segmap_task_128460_start;
        
        ctx->futhark_mc_segmap_task_128460_runs[tid]++;
        ctx->futhark_mc_segmap_task_128460_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128460_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128464 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115310;
    char *free_mem_119740;
    char *free_mem_119762;
    char *free_mem_119962;
    char *free_mem_119965;
};
struct futhark_mc_task_128466 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115310;
    int64_t free_gtid_115314;
    char *free_mem_119740;
    char *free_mem_119962;
    float *retval_defunc_2_reduce_res_122322;
};
struct futhark_mc_segred_stage_1_parloop_struct_128469 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_css_chunk_len_112850;
    int64_t free_gtid_115310;
    int64_t free_gtid_115314;
    char *free_mem_119740;
    char *free_mem_119962;
    char *free_reduce_stage_1_tid_res_arr_mem_122386;
};
static int futhark_mc_segred_stage_1_parloop_128470(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115315,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128469
    *futhark_mc_segred_stage_1_parloop_struct_128469 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128469 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128469->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128470_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128470_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128469->free_n_112804;
    int64_t css_chunk_len_112850 =
            futhark_mc_segred_stage_1_parloop_struct_128469->free_css_chunk_len_112850;
    int64_t gtid_115310 =
            futhark_mc_segred_stage_1_parloop_struct_128469->free_gtid_115310;
    int64_t gtid_115314 =
            futhark_mc_segred_stage_1_parloop_struct_128469->free_gtid_115314;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128469->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128469->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122386 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122386",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128469->free_reduce_stage_1_tid_res_arr_mem_122386,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122388 = start;
    float x_122371;
    float x_122372;
    float local_acc_122389 = 0.0F;
    
    for (; iter_122388 < end; iter_122388++) {
        int64_t gtid_115316 = iter_122388;
        int64_t x_122374 = ((int64_t *) mem_119740.mem)[gtid_115314 *
                                                        css_chunk_len_112850 +
                                                        gtid_115316];
        bool cond_122375 = sle64((int64_t) 0, x_122374);
        float defunc_0_f_res_122376;
        
        if (cond_122375) {
            bool y_122377 = slt64(x_122374, n_112804);
            bool bounds_check_122378 = cond_122375 && y_122377;
            bool index_certs_122379;
            
            if (!bounds_check_122378) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_122374,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:184:40-75\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:182:21-187:44\n   #6  /prelude/soacs.fut:67:19-23\n   #7  /prelude/soacs.fut:67:3-37\n   #8  stl.fut:180:13-188:43\n   #9  stl.fut:365:3-376:33\n   #10 stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_122380 =
                  ((float *) mem_119962.mem)[gtid_115310 * n_112804 + x_122374];
            
            defunc_0_f_res_122376 = defunc_0_f_res_t_res_122380;
        } else {
            defunc_0_f_res_122376 = NAN;
        }
        
        bool isnan_res_122381;
        
        isnan_res_122381 = futrts_isnan32(defunc_0_f_res_122376);
        
        float defunc_0_f_res_122382;
        
        if (isnan_res_122381) {
            defunc_0_f_res_122382 = 0.0F;
        } else {
            defunc_0_f_res_122382 = defunc_0_f_res_122376;
        }
        // save map-out results
        { }
        // Load accum params
        {
            x_122371 = local_acc_122389;
        }
        // Load next params
        {
            x_122372 = defunc_0_f_res_122382;
        }
        // Red body
        {
            float defunc_1_op_res_122373 = x_122371 + x_122372;
            
            local_acc_122389 = defunc_1_op_res_122373;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122386.mem)[flat_tid_115315] =
        local_acc_122389;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128470_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128470_end -
                 futhark_mc_segred_stage_1_parloop_128470_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128470_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128470_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128470_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128467(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115315 = tid;
    int num_tasks_122385 = info.nsubtasks;
    struct futhark_mc_task_128466 *futhark_mc_task_128466 =
                                  (struct futhark_mc_task_128466 *) args;
    struct futhark_context *ctx = futhark_mc_task_128466->ctx;
    uint64_t futhark_mc_segred_task_128467_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128467_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128466->free_n_112804;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128466->free_css_chunk_len_112850;
    int64_t gtid_115310 = futhark_mc_task_128466->free_gtid_115310;
    int64_t gtid_115314 = futhark_mc_task_128466->free_gtid_115314;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128466->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128466->free_mem_119962,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_122322 =
          *futhark_mc_task_128466->retval_defunc_2_reduce_res_122322;
    size_t reduce_stage_1_tid_res_arr_mem_122386_cached_sizze_128468 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122386 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122386_cached_sizze_128468 <
        (size_t) ((int64_t) 4 * num_tasks_122385)) {
        reduce_stage_1_tid_res_arr_mem_122386 =
            realloc(reduce_stage_1_tid_res_arr_mem_122386, (int64_t) 4 *
                    num_tasks_122385);
        reduce_stage_1_tid_res_arr_mem_122386_cached_sizze_128468 =
            (int64_t) 4 * num_tasks_122385;
    }
    
    int64_t iter_122388;
    struct futhark_mc_segred_stage_1_parloop_struct_128469
    futhark_mc_segred_stage_1_parloop_struct_128469;
    
    futhark_mc_segred_stage_1_parloop_struct_128469.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_gtid_115310 =
        gtid_115310;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_gtid_115314 =
        gtid_115314;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_mem_119740 =
        mem_119740.mem;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_mem_119962 =
        mem_119962.mem;
    futhark_mc_segred_stage_1_parloop_struct_128469.free_reduce_stage_1_tid_res_arr_mem_122386 =
        reduce_stage_1_tid_res_arr_mem_122386;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128470_task;
    
    futhark_mc_segred_stage_1_parloop_128470_task.name =
        "futhark_mc_segred_stage_1_parloop_128470";
    futhark_mc_segred_stage_1_parloop_128470_task.fn =
        futhark_mc_segred_stage_1_parloop_128470;
    futhark_mc_segred_stage_1_parloop_128470_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128469;
    futhark_mc_segred_stage_1_parloop_128470_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128470_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128470_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128470_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128470_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128470_task);
    
    if (futhark_mc_segred_stage_1_parloop_128470_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128470_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128470_total_end -
                 futhark_mc_segred_stage_1_parloop_128470_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128470_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128470_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128470_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122322 = 0.0F;
    }
    
    float x_122390;
    float x_122391;
    
    for (int32_t i_122393 = 0; i_122393 < num_tasks_122385; i_122393++) {
        flat_tid_115315 = i_122393;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122390 = defunc_2_reduce_res_122322;
            }
            // load next params
            {
                x_122391 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122386)[flat_tid_115315];
            }
            // red body
            {
                float defunc_1_op_res_122392 = x_122390 + x_122391;
                
                defunc_2_reduce_res_122322 = defunc_1_op_res_122392;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122386);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128467_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128467_end -
                 futhark_mc_segred_task_128467_start;
        
        ctx->futhark_mc_segred_task_128467_runs[tid]++;
        ctx->futhark_mc_segred_task_128467_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128467_iter[tid] += iterations;
    }
    *futhark_mc_task_128466->retval_defunc_2_reduce_res_122322 =
        defunc_2_reduce_res_122322;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128465(void *args, int64_t start,
                                            int64_t end, int flat_tid_115313,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128464
    *futhark_mc_segmap_parloop_struct_128464 =
    (struct futhark_mc_segmap_parloop_struct_128464 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128464->ctx;
    uint64_t futhark_mc_segmap_parloop_128465_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128465_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128464->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128464->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128464->free_css_chunk_len_112850;
    int64_t gtid_115310 =
            futhark_mc_segmap_parloop_struct_128464->free_gtid_115310;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128464->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128464->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128464->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_segmap_parloop_struct_128464->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122370 = start;
    
    for (; iter_122370 < end; iter_122370++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122383 = n_p_112806;
        int64_t gtid_115314 = iter_122370;
        int64_t remnant_122384 = iter_122370 - gtid_115314;
        float x_122321 = ((float *) mem_119762.mem)[gtid_115310 * n_p_112806 +
                                                    gtid_115314];
        float defunc_2_reduce_res_122322;
        int64_t flat_tid_115315 = (int64_t) 0;
        int32_t num_tasks_122385;
        struct futhark_mc_task_128466 futhark_mc_task_128466;
        
        futhark_mc_task_128466.ctx = ctx;
        futhark_mc_task_128466.free_n_112804 = n_112804;
        futhark_mc_task_128466.free_css_chunk_len_112850 = css_chunk_len_112850;
        futhark_mc_task_128466.free_gtid_115310 = gtid_115310;
        futhark_mc_task_128466.free_gtid_115314 = gtid_115314;
        futhark_mc_task_128466.free_mem_119740 = mem_119740.mem;
        futhark_mc_task_128466.free_mem_119962 = mem_119962.mem;
        futhark_mc_task_128466.retval_defunc_2_reduce_res_122322 =
            &defunc_2_reduce_res_122322;
        
        struct scheduler_segop futhark_mc_task_128466_task;
        
        futhark_mc_task_128466_task.args = &futhark_mc_task_128466;
        futhark_mc_task_128466_task.top_level_fn =
            futhark_mc_segred_task_128467;
        futhark_mc_task_128466_task.name = "futhark_mc_segred_task_128467";
        futhark_mc_task_128466_task.iterations = css_chunk_len_112850;
        futhark_mc_task_128466_task.task_time =
            &ctx->futhark_mc_segred_task_128467_total_time;
        futhark_mc_task_128466_task.task_iter =
            &ctx->futhark_mc_segred_task_128467_total_iter;
        futhark_mc_task_128466_task.sched = STATIC;
        futhark_mc_task_128466_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128467_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128466_task);
        
        if (futhark_mc_segred_task_128467_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_1_f_res_122335 = defunc_2_reduce_res_122322 / x_122321;
        
        ((float *) mem_119965.mem)[gtid_115314] = defunc_1_f_res_122335;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128465_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128465_end -
                 futhark_mc_segmap_parloop_128465_start;
        
        ctx->futhark_mc_segmap_parloop_128465_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128465_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128465_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128463(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115313 = tid;
    int num_tasks_122353 = info.nsubtasks;
    struct futhark_mc_task_128459 *futhark_mc_task_128459 =
                                  (struct futhark_mc_task_128459 *) args;
    struct futhark_context *ctx = futhark_mc_task_128459->ctx;
    uint64_t futhark_mc_segmap_nested_task_128463_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128463_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128459->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128459->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128459->free_css_chunk_len_112850;
    int64_t gtid_115310 = futhark_mc_task_128459->free_gtid_115310;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128459->free_mem_119740,
                                  .size =0, .references =NULL};
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128459->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128459->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119965 = {.desc ="mem_119965", .mem =
                                  futhark_mc_task_128459->free_mem_119965,
                                  .size =0, .references =NULL};
    int64_t iter_122370;
    struct futhark_mc_segmap_parloop_struct_128464
    futhark_mc_segmap_parloop_struct_128464;
    
    futhark_mc_segmap_parloop_struct_128464.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128464.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128464.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128464.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128464.free_gtid_115310 = gtid_115310;
    futhark_mc_segmap_parloop_struct_128464.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128464.free_mem_119762 = mem_119762.mem;
    futhark_mc_segmap_parloop_struct_128464.free_mem_119962 = mem_119962.mem;
    futhark_mc_segmap_parloop_struct_128464.free_mem_119965 = mem_119965.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128465_task;
    
    futhark_mc_segmap_parloop_128465_task.name =
        "futhark_mc_segmap_parloop_128465";
    futhark_mc_segmap_parloop_128465_task.fn = futhark_mc_segmap_parloop_128465;
    futhark_mc_segmap_parloop_128465_task.args =
        &futhark_mc_segmap_parloop_struct_128464;
    futhark_mc_segmap_parloop_128465_task.iterations = iterations;
    futhark_mc_segmap_parloop_128465_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128465_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128465_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128465_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128465_task);
    
    if (futhark_mc_segmap_parloop_128465_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128465_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128465_total_end -
                 futhark_mc_segmap_parloop_128465_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128465_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128465_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128465_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128463_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128463_end -
                 futhark_mc_segmap_nested_task_128463_start;
        
        ctx->futhark_mc_segmap_nested_task_128463_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128463_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128463_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128457(void *args, int64_t start,
                                            int64_t end, int flat_tid_115309,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128456
    *futhark_mc_segmap_parloop_struct_128456 =
    (struct futhark_mc_segmap_parloop_struct_128456 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128456->ctx;
    uint64_t futhark_mc_segmap_parloop_128457_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128457_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128456->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128456->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128456->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_segmap_parloop_struct_128456->free_css_chunk_len_112850;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_segmap_parloop_struct_128456->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 =
            futhark_mc_segmap_parloop_struct_128456->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_segmap_parloop_struct_128456->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_segmap_parloop_struct_128456->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_segmap_parloop_struct_128456->free_mem_119984,
                                  .size =0, .references =NULL};
    size_t mem_119965_cached_sizze_128458 = 0;
    char *mem_119965 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122320 = start;
    
    if (mem_119965_cached_sizze_128458 < (size_t) bytes_119741) {
        mem_119965 = realloc(mem_119965, bytes_119741);
        mem_119965_cached_sizze_128458 = bytes_119741;
    }
    for (; iter_122320 < end; iter_122320++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122351 = m_112803;
        int64_t gtid_115310 = iter_122320;
        int64_t remnant_122352 = iter_122320 - gtid_115310;
        int64_t flat_tid_115311 = (int64_t) 0;
        int32_t num_tasks_122353;
        int64_t flat_tid_115313 = (int64_t) 0;
        struct futhark_mc_task_128459 futhark_mc_task_128459;
        
        futhark_mc_task_128459.ctx = ctx;
        futhark_mc_task_128459.free_n_112804 = n_112804;
        futhark_mc_task_128459.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128459.free_css_chunk_len_112850 = css_chunk_len_112850;
        futhark_mc_task_128459.free_gtid_115310 = gtid_115310;
        futhark_mc_task_128459.free_mem_119740 = mem_119740.mem;
        futhark_mc_task_128459.free_mem_119762 = mem_119762.mem;
        futhark_mc_task_128459.free_mem_119962 = mem_119962.mem;
        futhark_mc_task_128459.free_mem_119965 = mem_119965;
        
        struct scheduler_segop futhark_mc_task_128459_task;
        
        futhark_mc_task_128459_task.args = &futhark_mc_task_128459;
        futhark_mc_task_128459_task.top_level_fn =
            futhark_mc_segmap_task_128460;
        futhark_mc_task_128459_task.name = "futhark_mc_segmap_task_128460";
        futhark_mc_task_128459_task.iterations = n_p_112806;
        futhark_mc_task_128459_task.task_time =
            &ctx->futhark_mc_segmap_task_128460_total_time;
        futhark_mc_task_128459_task.task_iter =
            &ctx->futhark_mc_segmap_task_128460_total_iter;
        futhark_mc_task_128459_task.sched = STATIC;
        futhark_mc_task_128459_task.nested_fn =
            futhark_mc_segmap_nested_task_128463;
        
        int futhark_mc_segmap_task_128460_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128459_task);
        
        if (futhark_mc_segmap_task_128460_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_119984.mem + gtid_115310 * n_p_112806 * (int64_t) 4,
                mem_119965 + (int64_t) 0, n_p_112806 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119965);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128457_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128457_end -
                 futhark_mc_segmap_parloop_128457_start;
        
        ctx->futhark_mc_segmap_parloop_128457_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128457_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128457_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128455(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115309 = tid;
    int num_tasks_122296 = info.nsubtasks;
    struct futhark_mc_task_128450 *futhark_mc_task_128450 =
                                  (struct futhark_mc_task_128450 *) args;
    struct futhark_context *ctx = futhark_mc_task_128450->ctx;
    uint64_t futhark_mc_segmap_nested_task_128455_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128455_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128450->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128450->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128450->free_n_p_112806;
    int64_t css_chunk_len_112850 =
            futhark_mc_task_128450->free_css_chunk_len_112850;
    struct memblock mem_119740 = {.desc ="mem_119740", .mem =
                                  futhark_mc_task_128450->free_mem_119740,
                                  .size =0, .references =NULL};
    int64_t bytes_119741 = futhark_mc_task_128450->free_bytes_119741;
    struct memblock mem_119762 = {.desc ="mem_119762", .mem =
                                  futhark_mc_task_128450->free_mem_119762,
                                  .size =0, .references =NULL};
    struct memblock mem_119962 = {.desc ="mem_119962", .mem =
                                  futhark_mc_task_128450->free_mem_119962,
                                  .size =0, .references =NULL};
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_task_128450->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t iter_122320;
    struct futhark_mc_segmap_parloop_struct_128456
    futhark_mc_segmap_parloop_struct_128456;
    
    futhark_mc_segmap_parloop_struct_128456.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128456.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128456.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128456.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128456.free_css_chunk_len_112850 =
        css_chunk_len_112850;
    futhark_mc_segmap_parloop_struct_128456.free_mem_119740 = mem_119740.mem;
    futhark_mc_segmap_parloop_struct_128456.free_bytes_119741 = bytes_119741;
    futhark_mc_segmap_parloop_struct_128456.free_mem_119762 = mem_119762.mem;
    futhark_mc_segmap_parloop_struct_128456.free_mem_119962 = mem_119962.mem;
    futhark_mc_segmap_parloop_struct_128456.free_mem_119984 = mem_119984.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128457_task;
    
    futhark_mc_segmap_parloop_128457_task.name =
        "futhark_mc_segmap_parloop_128457";
    futhark_mc_segmap_parloop_128457_task.fn = futhark_mc_segmap_parloop_128457;
    futhark_mc_segmap_parloop_128457_task.args =
        &futhark_mc_segmap_parloop_struct_128456;
    futhark_mc_segmap_parloop_128457_task.iterations = iterations;
    futhark_mc_segmap_parloop_128457_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128457_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128457_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128457_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128457_task);
    
    if (futhark_mc_segmap_parloop_128457_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128457_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128457_total_end -
                 futhark_mc_segmap_parloop_128457_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128457_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128457_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128457_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128455_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128455_end -
                 futhark_mc_segmap_nested_task_128455_start;
        
        ctx->futhark_mc_segmap_nested_task_128455_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128455_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128455_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128471 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_mem_119984;
    int64_t free_bytes_119985;
    char *free_mem_120006;
};
struct futhark_mc_segmap_parloop_struct_128473 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_mem_119984;
    int64_t free_bytes_119985;
    char *free_mem_120006;
};
static int futhark_mc_segmap_parloop_128474(void *args, int64_t start,
                                            int64_t end, int flat_tid_115368,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128473
    *futhark_mc_segmap_parloop_struct_128473 =
    (struct futhark_mc_segmap_parloop_struct_128473 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128473->ctx;
    uint64_t futhark_mc_segmap_parloop_128474_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128474_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128473->free_m_112803;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128473->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128473->free_C_len_112852;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_segmap_parloop_struct_128473->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t bytes_119985 =
            futhark_mc_segmap_parloop_struct_128473->free_bytes_119985;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128473->free_mem_120006,
                                  .size =0, .references =NULL};
    size_t mem_119990_cached_sizze_128475 = 0;
    char *mem_119990 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122395 = start;
    
    if (mem_119990_cached_sizze_128475 < (size_t) bytes_119985) {
        mem_119990 = realloc(mem_119990, bytes_119985);
        mem_119990_cached_sizze_128475 = bytes_119985;
    }
    for (; iter_122395 < end; iter_122395++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122405 = m_112803;
        int64_t gtid_115369 = iter_122395;
        int64_t remnant_122406 = iter_122395 - gtid_115369;
        
        for (int64_t i_122396 = 0; i_122396 < C_len_112852; i_122396++) {
            int64_t i_122398 = smod64(i_122396, n_p_112806);
            bool x_122399 = sle64((int64_t) 0, i_122398);
            bool y_122400 = slt64(i_122398, n_p_112806);
            bool bounds_check_122401 = x_122399 && y_122400;
            bool index_certs_122402;
            
            if (!bounds_check_122401) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_122398,
                              "] out of bounds for array of shape [",
                              (long long) n_p_112806, "].",
                              "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
                return 1;
            }
            memmove(mem_119990 + i_122396 * (int64_t) 4, mem_119984.mem +
                    (gtid_115369 * n_p_112806 + i_122398) * (int64_t) 4,
                    (int64_t) 4);
        }
        memmove(mem_120006.mem + gtid_115369 * C_len_112852 * (int64_t) 4,
                mem_119990 + (int64_t) 0, C_len_112852 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119990);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128474_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128474_end -
                 futhark_mc_segmap_parloop_128474_start;
        
        ctx->futhark_mc_segmap_parloop_128474_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128474_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128474_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128472(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115368 = tid;
    int num_tasks_122394 = info.nsubtasks;
    struct futhark_mc_task_128471 *futhark_mc_task_128471 =
                                  (struct futhark_mc_task_128471 *) args;
    struct futhark_context *ctx = futhark_mc_task_128471->ctx;
    uint64_t futhark_mc_segmap_task_128472_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128472_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128471->free_m_112803;
    int64_t n_p_112806 = futhark_mc_task_128471->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128471->free_C_len_112852;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_task_128471->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t bytes_119985 = futhark_mc_task_128471->free_bytes_119985;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128471->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t iter_122395;
    struct futhark_mc_segmap_parloop_struct_128473
    futhark_mc_segmap_parloop_struct_128473;
    
    futhark_mc_segmap_parloop_struct_128473.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128473.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128473.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128473.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128473.free_mem_119984 = mem_119984.mem;
    futhark_mc_segmap_parloop_struct_128473.free_bytes_119985 = bytes_119985;
    futhark_mc_segmap_parloop_struct_128473.free_mem_120006 = mem_120006.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128474_task;
    
    futhark_mc_segmap_parloop_128474_task.name =
        "futhark_mc_segmap_parloop_128474";
    futhark_mc_segmap_parloop_128474_task.fn = futhark_mc_segmap_parloop_128474;
    futhark_mc_segmap_parloop_128474_task.args =
        &futhark_mc_segmap_parloop_struct_128473;
    futhark_mc_segmap_parloop_128474_task.iterations = iterations;
    futhark_mc_segmap_parloop_128474_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128474_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128474_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128474_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128474_task);
    
    if (futhark_mc_segmap_parloop_128474_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128474_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128474_total_end -
                 futhark_mc_segmap_parloop_128474_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128474_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128474_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128474_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128472_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128472_end -
                 futhark_mc_segmap_task_128472_start;
        
        ctx->futhark_mc_segmap_task_128472_runs[tid]++;
        ctx->futhark_mc_segmap_task_128472_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128472_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128477 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_mem_119984;
    int64_t free_bytes_119985;
    char *free_mem_120006;
};
struct futhark_mc_task_128480 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    int64_t free_gtid_115371;
    char *free_mem_119984;
    char *free_mem_119987;
};
struct futhark_mc_segmap_parloop_struct_128482 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    int64_t free_gtid_115371;
    char *free_mem_119984;
    char *free_mem_119987;
};
static int futhark_mc_segmap_parloop_128483(void *args, int64_t start,
                                            int64_t end, int flat_tid_115372,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128482
    *futhark_mc_segmap_parloop_struct_128482 =
    (struct futhark_mc_segmap_parloop_struct_128482 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128482->ctx;
    uint64_t futhark_mc_segmap_parloop_128483_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128483_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128482->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128482->free_C_len_112852;
    int64_t gtid_115371 =
            futhark_mc_segmap_parloop_struct_128482->free_gtid_115371;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_segmap_parloop_struct_128482->free_mem_119984,
                                  .size =0, .references =NULL};
    struct memblock mem_119987 = {.desc ="mem_119987", .mem =
                                  futhark_mc_segmap_parloop_struct_128482->free_mem_119987,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122418 = start;
    
    for (; iter_122418 < end; iter_122418++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122419 = C_len_112852;
        int64_t gtid_115373 = iter_122418;
        int64_t remnant_122420 = iter_122418 - gtid_115373;
        int64_t i_122409 = smod64(gtid_115373, n_p_112806);
        bool x_122410 = sle64((int64_t) 0, i_122409);
        bool y_122411 = slt64(i_122409, n_p_112806);
        bool bounds_check_122412 = x_122410 && y_122411;
        bool index_certs_122413;
        
        if (!bounds_check_122412) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) i_122409,
                                   "] out of bounds for array of shape [",
                                   (long long) n_p_112806, "].",
                                   "-> #0  stl.fut:194:42-58\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float defunc_0_f_res_122414 = ((float *) mem_119984.mem)[gtid_115371 *
                                                                 n_p_112806 +
                                                                 i_122409];
        
        ((float *) mem_119987.mem)[gtid_115373] = defunc_0_f_res_122414;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128483_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128483_end -
                 futhark_mc_segmap_parloop_128483_start;
        
        ctx->futhark_mc_segmap_parloop_128483_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128483_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128483_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128481(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115372 = tid;
    int num_tasks_122417 = info.nsubtasks;
    struct futhark_mc_task_128480 *futhark_mc_task_128480 =
                                  (struct futhark_mc_task_128480 *) args;
    struct futhark_context *ctx = futhark_mc_task_128480->ctx;
    uint64_t futhark_mc_segmap_task_128481_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128481_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128480->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128480->free_C_len_112852;
    int64_t gtid_115371 = futhark_mc_task_128480->free_gtid_115371;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_task_128480->free_mem_119984,
                                  .size =0, .references =NULL};
    struct memblock mem_119987 = {.desc ="mem_119987", .mem =
                                  futhark_mc_task_128480->free_mem_119987,
                                  .size =0, .references =NULL};
    int64_t iter_122418;
    struct futhark_mc_segmap_parloop_struct_128482
    futhark_mc_segmap_parloop_struct_128482;
    
    futhark_mc_segmap_parloop_struct_128482.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128482.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128482.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128482.free_gtid_115371 = gtid_115371;
    futhark_mc_segmap_parloop_struct_128482.free_mem_119984 = mem_119984.mem;
    futhark_mc_segmap_parloop_struct_128482.free_mem_119987 = mem_119987.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128483_task;
    
    futhark_mc_segmap_parloop_128483_task.name =
        "futhark_mc_segmap_parloop_128483";
    futhark_mc_segmap_parloop_128483_task.fn = futhark_mc_segmap_parloop_128483;
    futhark_mc_segmap_parloop_128483_task.args =
        &futhark_mc_segmap_parloop_struct_128482;
    futhark_mc_segmap_parloop_128483_task.iterations = iterations;
    futhark_mc_segmap_parloop_128483_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128483_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128483_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128483_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128483_task);
    
    if (futhark_mc_segmap_parloop_128483_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128483_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128483_total_end -
                 futhark_mc_segmap_parloop_128483_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128483_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128483_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128483_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128481_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128481_end -
                 futhark_mc_segmap_task_128481_start;
        
        ctx->futhark_mc_segmap_task_128481_runs[tid]++;
        ctx->futhark_mc_segmap_task_128481_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128481_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128478(void *args, int64_t start,
                                            int64_t end, int flat_tid_115370,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128477
    *futhark_mc_segmap_parloop_struct_128477 =
    (struct futhark_mc_segmap_parloop_struct_128477 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128477->ctx;
    uint64_t futhark_mc_segmap_parloop_128478_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128478_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128477->free_m_112803;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128477->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128477->free_C_len_112852;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_segmap_parloop_struct_128477->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t bytes_119985 =
            futhark_mc_segmap_parloop_struct_128477->free_bytes_119985;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128477->free_mem_120006,
                                  .size =0, .references =NULL};
    size_t mem_119987_cached_sizze_128479 = 0;
    char *mem_119987 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122408 = start;
    
    if (mem_119987_cached_sizze_128479 < (size_t) bytes_119985) {
        mem_119987 = realloc(mem_119987, bytes_119985);
        mem_119987_cached_sizze_128479 = bytes_119985;
    }
    for (; iter_122408 < end; iter_122408++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122415 = m_112803;
        int64_t gtid_115371 = iter_122408;
        int64_t remnant_122416 = iter_122408 - gtid_115371;
        int64_t flat_tid_115372 = (int64_t) 0;
        int32_t num_tasks_122417;
        struct futhark_mc_task_128480 futhark_mc_task_128480;
        
        futhark_mc_task_128480.ctx = ctx;
        futhark_mc_task_128480.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128480.free_C_len_112852 = C_len_112852;
        futhark_mc_task_128480.free_gtid_115371 = gtid_115371;
        futhark_mc_task_128480.free_mem_119984 = mem_119984.mem;
        futhark_mc_task_128480.free_mem_119987 = mem_119987;
        
        struct scheduler_segop futhark_mc_task_128480_task;
        
        futhark_mc_task_128480_task.args = &futhark_mc_task_128480;
        futhark_mc_task_128480_task.top_level_fn =
            futhark_mc_segmap_task_128481;
        futhark_mc_task_128480_task.name = "futhark_mc_segmap_task_128481";
        futhark_mc_task_128480_task.iterations = C_len_112852;
        futhark_mc_task_128480_task.task_time =
            &ctx->futhark_mc_segmap_task_128481_total_time;
        futhark_mc_task_128480_task.task_iter =
            &ctx->futhark_mc_segmap_task_128481_total_iter;
        futhark_mc_task_128480_task.sched = STATIC;
        futhark_mc_task_128480_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128481_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128480_task);
        
        if (futhark_mc_segmap_task_128481_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120006.mem + gtid_115371 * C_len_112852 * (int64_t) 4,
                mem_119987 + (int64_t) 0, C_len_112852 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_119987);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128478_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128478_end -
                 futhark_mc_segmap_parloop_128478_start;
        
        ctx->futhark_mc_segmap_parloop_128478_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128478_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128478_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128476(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115370 = tid;
    int num_tasks_122394 = info.nsubtasks;
    struct futhark_mc_task_128471 *futhark_mc_task_128471 =
                                  (struct futhark_mc_task_128471 *) args;
    struct futhark_context *ctx = futhark_mc_task_128471->ctx;
    uint64_t futhark_mc_segmap_nested_task_128476_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128476_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128471->free_m_112803;
    int64_t n_p_112806 = futhark_mc_task_128471->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128471->free_C_len_112852;
    struct memblock mem_119984 = {.desc ="mem_119984", .mem =
                                  futhark_mc_task_128471->free_mem_119984,
                                  .size =0, .references =NULL};
    int64_t bytes_119985 = futhark_mc_task_128471->free_bytes_119985;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128471->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t iter_122408;
    struct futhark_mc_segmap_parloop_struct_128477
    futhark_mc_segmap_parloop_struct_128477;
    
    futhark_mc_segmap_parloop_struct_128477.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128477.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128477.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128477.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128477.free_mem_119984 = mem_119984.mem;
    futhark_mc_segmap_parloop_struct_128477.free_bytes_119985 = bytes_119985;
    futhark_mc_segmap_parloop_struct_128477.free_mem_120006 = mem_120006.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128478_task;
    
    futhark_mc_segmap_parloop_128478_task.name =
        "futhark_mc_segmap_parloop_128478";
    futhark_mc_segmap_parloop_128478_task.fn = futhark_mc_segmap_parloop_128478;
    futhark_mc_segmap_parloop_128478_task.args =
        &futhark_mc_segmap_parloop_struct_128477;
    futhark_mc_segmap_parloop_128478_task.iterations = iterations;
    futhark_mc_segmap_parloop_128478_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128478_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128478_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128478_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128478_task);
    
    if (futhark_mc_segmap_parloop_128478_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128478_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128478_total_end -
                 futhark_mc_segmap_parloop_128478_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128478_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128476_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128476_end -
                 futhark_mc_segmap_nested_task_128476_start;
        
        ctx->futhark_mc_segmap_nested_task_128476_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128476_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128476_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128484 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_lifted_single_ma_arg_113192;
    int64_t free_lifted_single_ma_arg_113209;
    int64_t free_bytes_119697;
    char *free_mem_120006;
    int64_t free_bytes_120007;
    int64_t free_bytes_120010;
    char *free_mem_120064;
};
struct futhark_mc_segmap_parloop_struct_128486 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_lifted_single_ma_arg_113192;
    int64_t free_lifted_single_ma_arg_113209;
    int64_t free_bytes_119697;
    char *free_mem_120006;
    int64_t free_bytes_120007;
    int64_t free_bytes_120010;
    char *free_mem_120064;
};
static int futhark_mc_segmap_parloop_128487(void *args, int64_t start,
                                            int64_t end, int flat_tid_115383,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128486
    *futhark_mc_segmap_parloop_struct_128486 =
    (struct futhark_mc_segmap_parloop_struct_128486 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128486->ctx;
    uint64_t futhark_mc_segmap_parloop_128487_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128487_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128486->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128486->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128486->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_segmap_parloop_struct_128486->free_i64_res_112846;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128486->free_C_len_112852;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_segmap_parloop_struct_128486->free_lifted_single_ma_arg_113192;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_segmap_parloop_struct_128486->free_lifted_single_ma_arg_113209;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128486->free_bytes_119697;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128486->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t bytes_120007 =
            futhark_mc_segmap_parloop_struct_128486->free_bytes_120007;
    int64_t bytes_120010 =
            futhark_mc_segmap_parloop_struct_128486->free_bytes_120010;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128486->free_mem_120064,
                                  .size =0, .references =NULL};
    size_t mem_120018_cached_sizze_128488 = 0;
    char *mem_120018 = NULL;
    size_t mem_120033_cached_sizze_128489 = 0;
    char *mem_120033 = NULL;
    size_t mem_120048_cached_sizze_128490 = 0;
    char *mem_120048 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122422 = start;
    
    if (mem_120018_cached_sizze_128488 < (size_t) bytes_120007) {
        mem_120018 = realloc(mem_120018, bytes_120007);
        mem_120018_cached_sizze_128488 = bytes_120007;
    }
    if (mem_120033_cached_sizze_128489 < (size_t) bytes_120010) {
        mem_120033 = realloc(mem_120033, bytes_120010);
        mem_120033_cached_sizze_128489 = bytes_120010;
    }
    if (mem_120048_cached_sizze_128490 < (size_t) bytes_119697) {
        mem_120048 = realloc(mem_120048, bytes_119697);
        mem_120048_cached_sizze_128490 = bytes_119697;
    }
    for (; iter_122422 < end; iter_122422++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122505 = m_112803;
        int64_t gtid_115384 = iter_122422;
        int64_t remnant_122506 = iter_122422 - gtid_115384;
        float defunc_2_reduce_res_113307;
        float redout_122424 = 0.0F;
        
        for (int64_t i_122423 = 0; i_122423 < n_p_112806; i_122423++) {
            float x_122425 = ((float *) mem_120006.mem)[gtid_115384 *
                                                        C_len_112852 +
                                                        i_122423];
            float defunc_1_op_res_122426 = x_122425 + redout_122424;
            float redout_tmp_122507 = defunc_1_op_res_122426;
            
            redout_122424 = redout_tmp_122507;
        }
        defunc_2_reduce_res_113307 = redout_122424;
        
        float discard_119097;
        float scanacc_122428 = 0.0F;
        
        for (int64_t i_122427 = 0; i_122427 < lifted_single_ma_arg_113192;
             i_122427++) {
            bool cond_122430 = i_122427 == (int64_t) 0;
            float defunc_0_f_res_122431;
            
            if (cond_122430) {
                float defunc_0_f_res_t_res_122432 = defunc_2_reduce_res_113307 /
                      i64_res_112846;
                
                defunc_0_f_res_122431 = defunc_0_f_res_t_res_122432;
            } else {
                int64_t x_122433 = add64(n_p_112806, i_122427);
                int64_t i_122434 = sub64(x_122433, (int64_t) 1);
                bool x_122435 = sle64((int64_t) 0, i_122434);
                bool y_122436 = slt64(i_122434, C_len_112852);
                bool bounds_check_122437 = x_122435 && y_122436;
                bool index_certs_122438;
                
                if (!bounds_check_122437) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122434,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122439 = ((float *) mem_120006.mem)[gtid_115384 *
                                                            C_len_112852 +
                                                            i_122434];
                int64_t i_122440 = sub64(i_122427, (int64_t) 1);
                bool x_122441 = sle64((int64_t) 0, i_122440);
                bool y_122442 = slt64(i_122440, C_len_112852);
                bool bounds_check_122443 = x_122441 && y_122442;
                bool index_certs_122444;
                
                if (!bounds_check_122443) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122440,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122445 = ((float *) mem_120006.mem)[gtid_115384 *
                                                            C_len_112852 +
                                                            i_122440];
                float x_122446 = x_122439 - y_122445;
                float defunc_0_f_res_f_res_122447 = x_122446 / i64_res_112846;
                
                defunc_0_f_res_122431 = defunc_0_f_res_f_res_122447;
            }
            
            float defunc_1_op_res_122448 = defunc_0_f_res_122431 +
                  scanacc_122428;
            
            ((float *) mem_120018)[i_122427] = defunc_1_op_res_122448;
            
            float scanacc_tmp_122508 = defunc_1_op_res_122448;
            
            scanacc_122428 = scanacc_tmp_122508;
        }
        discard_119097 = scanacc_122428;
        
        float defunc_2_reduce_res_113336;
        float redout_122451 = 0.0F;
        
        for (int64_t i_122450 = 0; i_122450 < n_p_112806; i_122450++) {
            float x_122452 = ((float *) mem_120018)[i_122450];
            float defunc_1_op_res_122453 = x_122452 + redout_122451;
            float redout_tmp_122510 = defunc_1_op_res_122453;
            
            redout_122451 = redout_tmp_122510;
        }
        defunc_2_reduce_res_113336 = redout_122451;
        
        float discard_119105;
        float scanacc_122455 = 0.0F;
        
        for (int64_t i_122454 = 0; i_122454 < lifted_single_ma_arg_113209;
             i_122454++) {
            bool cond_122457 = i_122454 == (int64_t) 0;
            float defunc_0_f_res_122458;
            
            if (cond_122457) {
                float defunc_0_f_res_t_res_122459 = defunc_2_reduce_res_113336 /
                      i64_res_112846;
                
                defunc_0_f_res_122458 = defunc_0_f_res_t_res_122459;
            } else {
                int64_t x_122460 = add64(n_p_112806, i_122454);
                int64_t i_122461 = sub64(x_122460, (int64_t) 1);
                bool x_122462 = sle64((int64_t) 0, i_122461);
                bool y_122463 = slt64(i_122461, lifted_single_ma_arg_113192);
                bool bounds_check_122464 = x_122462 && y_122463;
                bool index_certs_122465;
                
                if (!bounds_check_122464) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122461,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122466 = ((float *) mem_120018)[i_122461];
                int64_t i_122467 = sub64(i_122454, (int64_t) 1);
                bool x_122468 = sle64((int64_t) 0, i_122467);
                bool y_122469 = slt64(i_122467, lifted_single_ma_arg_113192);
                bool bounds_check_122470 = x_122468 && y_122469;
                bool index_certs_122471;
                
                if (!bounds_check_122470) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122467,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122472 = ((float *) mem_120018)[i_122467];
                float x_122473 = x_122466 - y_122472;
                float defunc_0_f_res_f_res_122474 = x_122473 / i64_res_112846;
                
                defunc_0_f_res_122458 = defunc_0_f_res_f_res_122474;
            }
            
            float defunc_1_op_res_122475 = defunc_0_f_res_122458 +
                  scanacc_122455;
            
            ((float *) mem_120033)[i_122454] = defunc_1_op_res_122475;
            
            float scanacc_tmp_122511 = defunc_1_op_res_122475;
            
            scanacc_122455 = scanacc_tmp_122511;
        }
        discard_119105 = scanacc_122455;
        
        float defunc_2_reduce_res_113365;
        float redout_122478 = 0.0F;
        
        for (int32_t i_122477 = 0; i_122477 < 3; i_122477++) {
            int64_t i_122479 = sext_i32_i64(i_122477);
            float x_122480 = ((float *) mem_120033)[i_122479];
            float defunc_1_op_res_122481 = x_122480 + redout_122478;
            float redout_tmp_122513 = defunc_1_op_res_122481;
            
            redout_122478 = redout_tmp_122513;
        }
        defunc_2_reduce_res_113365 = redout_122478;
        
        float discard_119113;
        float scanacc_122483 = 0.0F;
        
        for (int64_t i_122482 = 0; i_122482 < n_112804; i_122482++) {
            bool cond_122485 = i_122482 == (int64_t) 0;
            float defunc_0_f_res_122486;
            
            if (cond_122485) {
                float defunc_0_f_res_t_res_122487 = defunc_2_reduce_res_113365 /
                      3.0F;
                
                defunc_0_f_res_122486 = defunc_0_f_res_t_res_122487;
            } else {
                int64_t x_122488 = add64((int64_t) 3, i_122482);
                int64_t i_122489 = sub64(x_122488, (int64_t) 1);
                bool x_122490 = sle64((int64_t) 0, i_122489);
                bool y_122491 = slt64(i_122489, lifted_single_ma_arg_113209);
                bool bounds_check_122492 = x_122490 && y_122491;
                bool index_certs_122493;
                
                if (!bounds_check_122492) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122489,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122494 = ((float *) mem_120033)[i_122489];
                int64_t i_122495 = sub64(i_122482, (int64_t) 1);
                bool x_122496 = sle64((int64_t) 0, i_122495);
                bool y_122497 = slt64(i_122495, lifted_single_ma_arg_113209);
                bool bounds_check_122498 = x_122496 && y_122497;
                bool index_certs_122499;
                
                if (!bounds_check_122498) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122495,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122500 = ((float *) mem_120033)[i_122495];
                float x_122501 = x_122494 - y_122500;
                float defunc_0_f_res_f_res_122502 = x_122501 / 3.0F;
                
                defunc_0_f_res_122486 = defunc_0_f_res_f_res_122502;
            }
            
            float defunc_1_op_res_122503 = defunc_0_f_res_122486 +
                  scanacc_122483;
            
            ((float *) mem_120048)[i_122482] = defunc_1_op_res_122503;
            
            float scanacc_tmp_122514 = defunc_1_op_res_122503;
            
            scanacc_122483 = scanacc_tmp_122514;
        }
        discard_119113 = scanacc_122483;
        memmove(mem_120064.mem + gtid_115384 * n_112804 * (int64_t) 4,
                mem_120048 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120018);
    free(mem_120033);
    free(mem_120048);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128487_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128487_end -
                 futhark_mc_segmap_parloop_128487_start;
        
        ctx->futhark_mc_segmap_parloop_128487_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128487_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128487_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128485(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115383 = tid;
    int num_tasks_122421 = info.nsubtasks;
    struct futhark_mc_task_128484 *futhark_mc_task_128484 =
                                  (struct futhark_mc_task_128484 *) args;
    struct futhark_context *ctx = futhark_mc_task_128484->ctx;
    uint64_t futhark_mc_segmap_task_128485_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128485_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128484->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128484->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128484->free_n_p_112806;
    float i64_res_112846 = futhark_mc_task_128484->free_i64_res_112846;
    int64_t C_len_112852 = futhark_mc_task_128484->free_C_len_112852;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_task_128484->free_lifted_single_ma_arg_113192;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_task_128484->free_lifted_single_ma_arg_113209;
    int64_t bytes_119697 = futhark_mc_task_128484->free_bytes_119697;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128484->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t bytes_120007 = futhark_mc_task_128484->free_bytes_120007;
    int64_t bytes_120010 = futhark_mc_task_128484->free_bytes_120010;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128484->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t iter_122422;
    struct futhark_mc_segmap_parloop_struct_128486
    futhark_mc_segmap_parloop_struct_128486;
    
    futhark_mc_segmap_parloop_struct_128486.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128486.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128486.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128486.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128486.free_i64_res_112846 =
        i64_res_112846;
    futhark_mc_segmap_parloop_struct_128486.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128486.free_lifted_single_ma_arg_113192 =
        lifted_single_ma_arg_113192;
    futhark_mc_segmap_parloop_struct_128486.free_lifted_single_ma_arg_113209 =
        lifted_single_ma_arg_113209;
    futhark_mc_segmap_parloop_struct_128486.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128486.free_mem_120006 = mem_120006.mem;
    futhark_mc_segmap_parloop_struct_128486.free_bytes_120007 = bytes_120007;
    futhark_mc_segmap_parloop_struct_128486.free_bytes_120010 = bytes_120010;
    futhark_mc_segmap_parloop_struct_128486.free_mem_120064 = mem_120064.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128487_task;
    
    futhark_mc_segmap_parloop_128487_task.name =
        "futhark_mc_segmap_parloop_128487";
    futhark_mc_segmap_parloop_128487_task.fn = futhark_mc_segmap_parloop_128487;
    futhark_mc_segmap_parloop_128487_task.args =
        &futhark_mc_segmap_parloop_struct_128486;
    futhark_mc_segmap_parloop_128487_task.iterations = iterations;
    futhark_mc_segmap_parloop_128487_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128487_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128487_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128487_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128487_task);
    
    if (futhark_mc_segmap_parloop_128487_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128487_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128487_total_end -
                 futhark_mc_segmap_parloop_128487_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128487_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128487_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128487_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128485_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128485_end -
                 futhark_mc_segmap_task_128485_start;
        
        ctx->futhark_mc_segmap_task_128485_runs[tid]++;
        ctx->futhark_mc_segmap_task_128485_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128485_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128492 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_lifted_single_ma_arg_113192;
    int64_t free_lifted_single_ma_arg_113209;
    int64_t free_bytes_119697;
    char *free_mem_120006;
    int64_t free_bytes_120007;
    int64_t free_bytes_120010;
    char *free_mem_120064;
};
struct futhark_mc_task_128497 {
    struct futhark_context *ctx;
    int64_t free_C_len_112852;
    int64_t free_gtid_115386;
    char *free_mem_120006;
    float *retval_defunc_2_reduce_res_115401;
};
struct futhark_mc_segred_stage_1_parloop_struct_128500 {
    struct futhark_context *ctx;
    int64_t free_C_len_112852;
    int64_t free_gtid_115386;
    char *free_mem_120006;
    char *free_reduce_stage_1_tid_res_arr_mem_122595;
};
static int futhark_mc_segred_stage_1_parloop_128501(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115387,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128500
    *futhark_mc_segred_stage_1_parloop_struct_128500 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128500 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128500->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128501_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128501_start = get_wall_time();
    
    int64_t C_len_112852 =
            futhark_mc_segred_stage_1_parloop_struct_128500->free_C_len_112852;
    int64_t gtid_115386 =
            futhark_mc_segred_stage_1_parloop_struct_128500->free_gtid_115386;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128500->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122595 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122595",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128500->free_reduce_stage_1_tid_res_arr_mem_122595,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122597 = start;
    float x_122517;
    float x_122518;
    float local_acc_122598 = 0.0F;
    
    for (; iter_122597 < end; iter_122597++) {
        int64_t gtid_115388 = iter_122597;
        float x_122520 = ((float *) mem_120006.mem)[gtid_115386 * C_len_112852 +
                                                    gtid_115388];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122517 = local_acc_122598;
        }
        // Load next params
        {
            x_122518 = x_122520;
        }
        // Red body
        {
            float defunc_1_op_res_122519 = x_122517 + x_122518;
            
            local_acc_122598 = defunc_1_op_res_122519;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122595.mem)[flat_tid_115387] =
        local_acc_122598;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128501_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128501_end -
                 futhark_mc_segred_stage_1_parloop_128501_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128501_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128501_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128501_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128498(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115387 = tid;
    int num_tasks_122594 = info.nsubtasks;
    struct futhark_mc_task_128497 *futhark_mc_task_128497 =
                                  (struct futhark_mc_task_128497 *) args;
    struct futhark_context *ctx = futhark_mc_task_128497->ctx;
    uint64_t futhark_mc_segred_task_128498_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128498_start = get_wall_time();
    
    int64_t C_len_112852 = futhark_mc_task_128497->free_C_len_112852;
    int64_t gtid_115386 = futhark_mc_task_128497->free_gtid_115386;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128497->free_mem_120006,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115401 =
          *futhark_mc_task_128497->retval_defunc_2_reduce_res_115401;
    size_t reduce_stage_1_tid_res_arr_mem_122595_cached_sizze_128499 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122595 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122595_cached_sizze_128499 <
        (size_t) ((int64_t) 4 * num_tasks_122594)) {
        reduce_stage_1_tid_res_arr_mem_122595 =
            realloc(reduce_stage_1_tid_res_arr_mem_122595, (int64_t) 4 *
                    num_tasks_122594);
        reduce_stage_1_tid_res_arr_mem_122595_cached_sizze_128499 =
            (int64_t) 4 * num_tasks_122594;
    }
    
    int64_t iter_122597;
    struct futhark_mc_segred_stage_1_parloop_struct_128500
    futhark_mc_segred_stage_1_parloop_struct_128500;
    
    futhark_mc_segred_stage_1_parloop_struct_128500.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128500.free_C_len_112852 =
        C_len_112852;
    futhark_mc_segred_stage_1_parloop_struct_128500.free_gtid_115386 =
        gtid_115386;
    futhark_mc_segred_stage_1_parloop_struct_128500.free_mem_120006 =
        mem_120006.mem;
    futhark_mc_segred_stage_1_parloop_struct_128500.free_reduce_stage_1_tid_res_arr_mem_122595 =
        reduce_stage_1_tid_res_arr_mem_122595;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128501_task;
    
    futhark_mc_segred_stage_1_parloop_128501_task.name =
        "futhark_mc_segred_stage_1_parloop_128501";
    futhark_mc_segred_stage_1_parloop_128501_task.fn =
        futhark_mc_segred_stage_1_parloop_128501;
    futhark_mc_segred_stage_1_parloop_128501_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128500;
    futhark_mc_segred_stage_1_parloop_128501_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128501_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128501_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128501_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128501_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128501_task);
    
    if (futhark_mc_segred_stage_1_parloop_128501_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128501_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128501_total_end -
                 futhark_mc_segred_stage_1_parloop_128501_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128501_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128501_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128501_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115401 = 0.0F;
    }
    
    float x_122599;
    float x_122600;
    
    for (int32_t i_122602 = 0; i_122602 < num_tasks_122594; i_122602++) {
        flat_tid_115387 = i_122602;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122599 = defunc_2_reduce_res_115401;
            }
            // load next params
            {
                x_122600 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122595)[flat_tid_115387];
            }
            // red body
            {
                float defunc_1_op_res_122601 = x_122599 + x_122600;
                
                defunc_2_reduce_res_115401 = defunc_1_op_res_122601;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122595);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128498_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128498_end -
                 futhark_mc_segred_task_128498_start;
        
        ctx->futhark_mc_segred_task_128498_runs[tid]++;
        ctx->futhark_mc_segred_task_128498_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128498_iter[tid] += iterations;
    }
    *futhark_mc_task_128497->retval_defunc_2_reduce_res_115401 =
        defunc_2_reduce_res_115401;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128502 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_lifted_single_ma_arg_113192;
    int64_t free_gtid_115386;
    float free_defunc_2_reduce_res_115401;
    char *free_mem_120006;
    char *free_mem_120009;
};
struct futhark_mc_scan_stage_1_parloop_struct_128505 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_gtid_115386;
    float free_defunc_2_reduce_res_115401;
    char *free_mem_120006;
    char *free_mem_120009;
};
static int futhark_mc_scan_stage_1_parloop_128506(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115389, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128505
    *futhark_mc_scan_stage_1_parloop_struct_128505 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128505 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128505->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128506_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128506_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_scan_stage_1_parloop_struct_128505->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_scan_stage_1_parloop_struct_128505->free_i64_res_112846;
    int64_t C_len_112852 =
            futhark_mc_scan_stage_1_parloop_struct_128505->free_C_len_112852;
    int64_t gtid_115386 =
            futhark_mc_scan_stage_1_parloop_struct_128505->free_gtid_115386;
    float defunc_2_reduce_res_115401 =
          futhark_mc_scan_stage_1_parloop_struct_128505->free_defunc_2_reduce_res_115401;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128505->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128505->free_mem_120009,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122604 = start;
    float x_122521;
    float x_122522;
    
    x_122521 = 0.0F;
    for (; iter_122604 < end; iter_122604++) {
        int64_t gtid_115390 = iter_122604;
        
        // stage 1 scan body
        {
            bool cond_122524 = gtid_115390 == (int64_t) 0;
            float defunc_0_f_res_122525;
            
            if (cond_122524) {
                float defunc_0_f_res_t_res_122526 = defunc_2_reduce_res_115401 /
                      i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_t_res_122526;
            } else {
                int64_t x_122527 = add64(n_p_112806, gtid_115390);
                int64_t i_122528 = sub64(x_122527, (int64_t) 1);
                bool x_122529 = sle64((int64_t) 0, i_122528);
                bool y_122530 = slt64(i_122528, C_len_112852);
                bool bounds_check_122531 = x_122529 && y_122530;
                bool index_certs_122532;
                
                if (!bounds_check_122531) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122528,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122533 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122528];
                int64_t i_122534 = sub64(gtid_115390, (int64_t) 1);
                bool x_122535 = sle64((int64_t) 0, i_122534);
                bool y_122536 = slt64(i_122534, C_len_112852);
                bool bounds_check_122537 = x_122535 && y_122536;
                bool index_certs_122538;
                
                if (!bounds_check_122537) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122534,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122539 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122534];
                float x_122540 = x_122533 - y_122539;
                float defunc_0_f_res_f_res_122541 = x_122540 / i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_f_res_122541;
            }
            // write mapped values results to memory
            { }
            x_122521 = x_122521;
            // Read next values
            {
                x_122522 = defunc_0_f_res_122525;
            }
            
            float defunc_1_op_res_122523 = x_122521 + x_122522;
            
            ((float *) mem_120009.mem)[gtid_115390] = defunc_1_op_res_122523;
            x_122521 = defunc_1_op_res_122523;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128506_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128506_end -
                 futhark_mc_scan_stage_1_parloop_128506_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128506_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128506_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128506_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128507 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_C_len_112852;
    int64_t free_gtid_115386;
    float free_defunc_2_reduce_res_115401;
    char *free_mem_120006;
    char *free_mem_120009;
};
static int futhark_mc_scan_stage_3_parloop_128508(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115389, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128507
    *futhark_mc_scan_stage_3_parloop_struct_128507 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128507 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128507->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128508_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128508_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_scan_stage_3_parloop_struct_128507->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_scan_stage_3_parloop_struct_128507->free_i64_res_112846;
    int64_t C_len_112852 =
            futhark_mc_scan_stage_3_parloop_struct_128507->free_C_len_112852;
    int64_t gtid_115386 =
            futhark_mc_scan_stage_3_parloop_struct_128507->free_gtid_115386;
    float defunc_2_reduce_res_115401 =
          futhark_mc_scan_stage_3_parloop_struct_128507->free_defunc_2_reduce_res_115401;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128507->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128507->free_mem_120009,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122616 = start;
    float x_122613;
    float x_122614;
    
    if (iter_122616 == (int64_t) 0) {
        x_122613 = 0.0F;
    } else {
        x_122613 = ((float *) mem_120009.mem)[iter_122616 - (int64_t) 1];
    }
    for (; iter_122616 < end; iter_122616++) {
        int64_t gtid_115390 = iter_122616;
        
        // stage 3 scan body
        {
            bool cond_122524 = gtid_115390 == (int64_t) 0;
            float defunc_0_f_res_122525;
            
            if (cond_122524) {
                float defunc_0_f_res_t_res_122526 = defunc_2_reduce_res_115401 /
                      i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_t_res_122526;
            } else {
                int64_t x_122527 = add64(n_p_112806, gtid_115390);
                int64_t i_122528 = sub64(x_122527, (int64_t) 1);
                bool x_122529 = sle64((int64_t) 0, i_122528);
                bool y_122530 = slt64(i_122528, C_len_112852);
                bool bounds_check_122531 = x_122529 && y_122530;
                bool index_certs_122532;
                
                if (!bounds_check_122531) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122528,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122533 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122528];
                int64_t i_122534 = sub64(gtid_115390, (int64_t) 1);
                bool x_122535 = sle64((int64_t) 0, i_122534);
                bool y_122536 = slt64(i_122534, C_len_112852);
                bool bounds_check_122537 = x_122535 && y_122536;
                bool index_certs_122538;
                
                if (!bounds_check_122537) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122534,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122539 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122534];
                float x_122540 = x_122533 - y_122539;
                float defunc_0_f_res_f_res_122541 = x_122540 / i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_f_res_122541;
            }
            x_122613 = x_122613;
            x_122614 = defunc_0_f_res_122525;
            
            float defunc_1_op_res_122615 = x_122613 + x_122614;
            
            ((float *) mem_120009.mem)[gtid_115390] = defunc_1_op_res_122615;
            x_122613 = defunc_1_op_res_122615;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128508_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128508_end -
                 futhark_mc_scan_stage_3_parloop_128508_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128508_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128508_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128508_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128503(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115389 = tid;
    int num_tasks_122603 = info.nsubtasks;
    struct futhark_mc_task_128502 *futhark_mc_task_128502 =
                                  (struct futhark_mc_task_128502 *) args;
    struct futhark_context *ctx = futhark_mc_task_128502->ctx;
    uint64_t futhark_mc_segscan_task_128503_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128503_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128502->free_n_p_112806;
    float i64_res_112846 = futhark_mc_task_128502->free_i64_res_112846;
    int64_t C_len_112852 = futhark_mc_task_128502->free_C_len_112852;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_task_128502->free_lifted_single_ma_arg_113192;
    int64_t gtid_115386 = futhark_mc_task_128502->free_gtid_115386;
    float defunc_2_reduce_res_115401 =
          futhark_mc_task_128502->free_defunc_2_reduce_res_115401;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128502->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_task_128502->free_mem_120009,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122610_cached_sizze_128504 = 0;
    char *scan_stage_2_accum_mem_122610 = NULL;
    int64_t iter_122604;
    struct futhark_mc_scan_stage_1_parloop_struct_128505
    futhark_mc_scan_stage_1_parloop_struct_128505;
    
    futhark_mc_scan_stage_1_parloop_struct_128505.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_n_p_112806 = n_p_112806;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_i64_res_112846 =
        i64_res_112846;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_C_len_112852 =
        C_len_112852;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_gtid_115386 =
        gtid_115386;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_defunc_2_reduce_res_115401 =
        defunc_2_reduce_res_115401;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_mem_120006 =
        mem_120006.mem;
    futhark_mc_scan_stage_1_parloop_struct_128505.free_mem_120009 =
        mem_120009.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128506_task;
    
    futhark_mc_scan_stage_1_parloop_128506_task.name =
        "futhark_mc_scan_stage_1_parloop_128506";
    futhark_mc_scan_stage_1_parloop_128506_task.fn =
        futhark_mc_scan_stage_1_parloop_128506;
    futhark_mc_scan_stage_1_parloop_128506_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128505;
    futhark_mc_scan_stage_1_parloop_128506_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128506_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128506_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128506_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128506_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128506_task);
    
    if (futhark_mc_scan_stage_1_parloop_128506_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128506_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128506_total_end -
                 futhark_mc_scan_stage_1_parloop_128506_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128506_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128506_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128506_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122603)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122605;
        float x_122606;
        int64_t offset_122608 = (int64_t) 0;
        int64_t offset_index_122609 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122610_cached_sizze_128504 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122610 =
                realloc(scan_stage_2_accum_mem_122610, (int64_t) 4);
            scan_stage_2_accum_mem_122610_cached_sizze_128504 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122610)[(int64_t) 0] = 0.0F;
        for (int32_t i_122612 = 0; i_122612 < num_tasks_122603 - 1;
             i_122612++) {
            offset_122608 = squot64(lifted_single_ma_arg_113192,
                                    sext_i32_i64(num_tasks_122603));
            if (slt64(sext_i32_i64(i_122612),
                      srem64(lifted_single_ma_arg_113192,
                             sext_i32_i64(num_tasks_122603)))) {
                offset_122608 += (int64_t) 1;
            }
            offset_index_122609 += offset_122608;
            
            int64_t gtid_115390 = offset_index_122609;
            bool cond_122524 = gtid_115390 == (int64_t) 0;
            float defunc_0_f_res_122525;
            
            if (cond_122524) {
                float defunc_0_f_res_t_res_122526 = defunc_2_reduce_res_115401 /
                      i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_t_res_122526;
            } else {
                int64_t x_122527 = add64(n_p_112806, gtid_115390);
                int64_t i_122528 = sub64(x_122527, (int64_t) 1);
                bool x_122529 = sle64((int64_t) 0, i_122528);
                bool y_122530 = slt64(i_122528, C_len_112852);
                bool bounds_check_122531 = x_122529 && y_122530;
                bool index_certs_122532;
                
                if (!bounds_check_122531) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122528,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122533 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122528];
                int64_t i_122534 = sub64(gtid_115390, (int64_t) 1);
                bool x_122535 = sle64((int64_t) 0, i_122534);
                bool y_122536 = slt64(i_122534, C_len_112852);
                bool bounds_check_122537 = x_122535 && y_122536;
                bool index_certs_122538;
                
                if (!bounds_check_122537) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122534,
                                  "] out of bounds for array of shape [",
                                  (long long) C_len_112852, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  stl.fut:43:3-32\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122539 = ((float *) mem_120006.mem)[gtid_115386 *
                                                            C_len_112852 +
                                                            i_122534];
                float x_122540 = x_122533 - y_122539;
                float defunc_0_f_res_f_res_122541 = x_122540 / i64_res_112846;
                
                defunc_0_f_res_122525 = defunc_0_f_res_f_res_122541;
            }
            // Read carry in
            {
                x_122605 =
                    ((float *) scan_stage_2_accum_mem_122610)[(int64_t) 0];
            }
            // Read next values
            {
                x_122606 = ((float *) mem_120009.mem)[offset_index_122609 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122607 = x_122605 + x_122606;
            
            ((float *) mem_120009.mem)[offset_index_122609 - (int64_t) 1] =
                defunc_1_op_res_122607;
            ((float *) scan_stage_2_accum_mem_122610)[(int64_t) 0] =
                defunc_1_op_res_122607;
        }
        
        int64_t iter_122616 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128507
        futhark_mc_scan_stage_3_parloop_struct_128507;
        
        futhark_mc_scan_stage_3_parloop_struct_128507.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_n_p_112806 =
            n_p_112806;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_i64_res_112846 =
            i64_res_112846;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_C_len_112852 =
            C_len_112852;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_gtid_115386 =
            gtid_115386;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_defunc_2_reduce_res_115401 =
            defunc_2_reduce_res_115401;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_mem_120006 =
            mem_120006.mem;
        futhark_mc_scan_stage_3_parloop_struct_128507.free_mem_120009 =
            mem_120009.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128508_task;
        
        futhark_mc_scan_stage_3_parloop_128508_task.name =
            "futhark_mc_scan_stage_3_parloop_128508";
        futhark_mc_scan_stage_3_parloop_128508_task.fn =
            futhark_mc_scan_stage_3_parloop_128508;
        futhark_mc_scan_stage_3_parloop_128508_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128507;
        futhark_mc_scan_stage_3_parloop_128508_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128508_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128508_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128508_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128508_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128508_task);
        
        if (futhark_mc_scan_stage_3_parloop_128508_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128508_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128508_total_end -
                     futhark_mc_scan_stage_3_parloop_128508_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128508_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128508_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128508_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122610);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128503_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128503_end -
                 futhark_mc_segscan_task_128503_start;
        
        ctx->futhark_mc_segscan_task_128503_runs[tid]++;
        ctx->futhark_mc_segscan_task_128503_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128503_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128509 {
    struct futhark_context *ctx;
    char *free_mem_120009;
    float *retval_defunc_2_reduce_res_115430;
};
struct futhark_mc_segred_stage_1_parloop_struct_128512 {
    struct futhark_context *ctx;
    char *free_mem_120009;
    char *free_reduce_stage_1_tid_res_arr_mem_122618;
};
static int futhark_mc_segred_stage_1_parloop_128513(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115391,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128512
    *futhark_mc_segred_stage_1_parloop_struct_128512 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128512 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128512->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128513_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128513_start = get_wall_time();
    
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128512->free_mem_120009,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122618 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122618",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128512->free_reduce_stage_1_tid_res_arr_mem_122618,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122620 = start;
    float x_122542;
    float x_122543;
    float local_acc_122621 = 0.0F;
    
    for (; iter_122620 < end; iter_122620++) {
        int64_t gtid_115392 = iter_122620;
        float x_122545 = ((float *) mem_120009.mem)[gtid_115392];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122542 = local_acc_122621;
        }
        // Load next params
        {
            x_122543 = x_122545;
        }
        // Red body
        {
            float defunc_1_op_res_122544 = x_122542 + x_122543;
            
            local_acc_122621 = defunc_1_op_res_122544;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122618.mem)[flat_tid_115391] =
        local_acc_122621;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128513_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128513_end -
                 futhark_mc_segred_stage_1_parloop_128513_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128513_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128513_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128513_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128510(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115391 = tid;
    int num_tasks_122617 = info.nsubtasks;
    struct futhark_mc_task_128509 *futhark_mc_task_128509 =
                                  (struct futhark_mc_task_128509 *) args;
    struct futhark_context *ctx = futhark_mc_task_128509->ctx;
    uint64_t futhark_mc_segred_task_128510_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128510_start = get_wall_time();
    
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_task_128509->free_mem_120009,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115430 =
          *futhark_mc_task_128509->retval_defunc_2_reduce_res_115430;
    size_t reduce_stage_1_tid_res_arr_mem_122618_cached_sizze_128511 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122618 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122618_cached_sizze_128511 <
        (size_t) ((int64_t) 4 * num_tasks_122617)) {
        reduce_stage_1_tid_res_arr_mem_122618 =
            realloc(reduce_stage_1_tid_res_arr_mem_122618, (int64_t) 4 *
                    num_tasks_122617);
        reduce_stage_1_tid_res_arr_mem_122618_cached_sizze_128511 =
            (int64_t) 4 * num_tasks_122617;
    }
    
    int64_t iter_122620;
    struct futhark_mc_segred_stage_1_parloop_struct_128512
    futhark_mc_segred_stage_1_parloop_struct_128512;
    
    futhark_mc_segred_stage_1_parloop_struct_128512.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128512.free_mem_120009 =
        mem_120009.mem;
    futhark_mc_segred_stage_1_parloop_struct_128512.free_reduce_stage_1_tid_res_arr_mem_122618 =
        reduce_stage_1_tid_res_arr_mem_122618;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128513_task;
    
    futhark_mc_segred_stage_1_parloop_128513_task.name =
        "futhark_mc_segred_stage_1_parloop_128513";
    futhark_mc_segred_stage_1_parloop_128513_task.fn =
        futhark_mc_segred_stage_1_parloop_128513;
    futhark_mc_segred_stage_1_parloop_128513_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128512;
    futhark_mc_segred_stage_1_parloop_128513_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128513_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128513_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128513_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128513_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128513_task);
    
    if (futhark_mc_segred_stage_1_parloop_128513_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128513_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128513_total_end -
                 futhark_mc_segred_stage_1_parloop_128513_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128513_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128513_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128513_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115430 = 0.0F;
    }
    
    float x_122622;
    float x_122623;
    
    for (int32_t i_122625 = 0; i_122625 < num_tasks_122617; i_122625++) {
        flat_tid_115391 = i_122625;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122622 = defunc_2_reduce_res_115430;
            }
            // load next params
            {
                x_122623 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122618)[flat_tid_115391];
            }
            // red body
            {
                float defunc_1_op_res_122624 = x_122622 + x_122623;
                
                defunc_2_reduce_res_115430 = defunc_1_op_res_122624;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122618);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128510_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128510_end -
                 futhark_mc_segred_task_128510_start;
        
        ctx->futhark_mc_segred_task_128510_runs[tid]++;
        ctx->futhark_mc_segred_task_128510_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128510_iter[tid] += iterations;
    }
    *futhark_mc_task_128509->retval_defunc_2_reduce_res_115430 =
        defunc_2_reduce_res_115430;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128514 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_lifted_single_ma_arg_113192;
    int64_t free_lifted_single_ma_arg_113209;
    float free_defunc_2_reduce_res_115430;
    char *free_mem_120009;
    char *free_mem_120012;
};
struct futhark_mc_scan_stage_1_parloop_struct_128517 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_lifted_single_ma_arg_113192;
    float free_defunc_2_reduce_res_115430;
    char *free_mem_120009;
    char *free_mem_120012;
};
static int futhark_mc_scan_stage_1_parloop_128518(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115393, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128517
    *futhark_mc_scan_stage_1_parloop_struct_128517 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128517 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128517->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128518_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128518_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_scan_stage_1_parloop_struct_128517->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_scan_stage_1_parloop_struct_128517->free_i64_res_112846;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_scan_stage_1_parloop_struct_128517->free_lifted_single_ma_arg_113192;
    float defunc_2_reduce_res_115430 =
          futhark_mc_scan_stage_1_parloop_struct_128517->free_defunc_2_reduce_res_115430;
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128517->free_mem_120009,
                                  .size =0, .references =NULL};
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128517->free_mem_120012,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122627 = start;
    float x_122546;
    float x_122547;
    
    x_122546 = 0.0F;
    for (; iter_122627 < end; iter_122627++) {
        int64_t gtid_115394 = iter_122627;
        
        // stage 1 scan body
        {
            bool cond_122549 = gtid_115394 == (int64_t) 0;
            float defunc_0_f_res_122550;
            
            if (cond_122549) {
                float defunc_0_f_res_t_res_122551 = defunc_2_reduce_res_115430 /
                      i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_t_res_122551;
            } else {
                int64_t x_122552 = add64(n_p_112806, gtid_115394);
                int64_t i_122553 = sub64(x_122552, (int64_t) 1);
                bool x_122554 = sle64((int64_t) 0, i_122553);
                bool y_122555 = slt64(i_122553, lifted_single_ma_arg_113192);
                bool bounds_check_122556 = x_122554 && y_122555;
                bool index_certs_122557;
                
                if (!bounds_check_122556) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122553,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122558 = ((float *) mem_120009.mem)[i_122553];
                int64_t i_122559 = sub64(gtid_115394, (int64_t) 1);
                bool x_122560 = sle64((int64_t) 0, i_122559);
                bool y_122561 = slt64(i_122559, lifted_single_ma_arg_113192);
                bool bounds_check_122562 = x_122560 && y_122561;
                bool index_certs_122563;
                
                if (!bounds_check_122562) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122559,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122564 = ((float *) mem_120009.mem)[i_122559];
                float x_122565 = x_122558 - y_122564;
                float defunc_0_f_res_f_res_122566 = x_122565 / i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_f_res_122566;
            }
            // write mapped values results to memory
            { }
            x_122546 = x_122546;
            // Read next values
            {
                x_122547 = defunc_0_f_res_122550;
            }
            
            float defunc_1_op_res_122548 = x_122546 + x_122547;
            
            ((float *) mem_120012.mem)[gtid_115394] = defunc_1_op_res_122548;
            x_122546 = defunc_1_op_res_122548;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128518_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128518_end -
                 futhark_mc_scan_stage_1_parloop_128518_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128518_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128518_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128518_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128519 {
    struct futhark_context *ctx;
    int64_t free_n_p_112806;
    float free_i64_res_112846;
    int64_t free_lifted_single_ma_arg_113192;
    float free_defunc_2_reduce_res_115430;
    char *free_mem_120009;
    char *free_mem_120012;
};
static int futhark_mc_scan_stage_3_parloop_128520(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115393, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128519
    *futhark_mc_scan_stage_3_parloop_struct_128519 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128519 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128519->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128520_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128520_start = get_wall_time();
    
    int64_t n_p_112806 =
            futhark_mc_scan_stage_3_parloop_struct_128519->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_scan_stage_3_parloop_struct_128519->free_i64_res_112846;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_scan_stage_3_parloop_struct_128519->free_lifted_single_ma_arg_113192;
    float defunc_2_reduce_res_115430 =
          futhark_mc_scan_stage_3_parloop_struct_128519->free_defunc_2_reduce_res_115430;
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128519->free_mem_120009,
                                  .size =0, .references =NULL};
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128519->free_mem_120012,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122639 = start;
    float x_122636;
    float x_122637;
    
    if (iter_122639 == (int64_t) 0) {
        x_122636 = 0.0F;
    } else {
        x_122636 = ((float *) mem_120012.mem)[iter_122639 - (int64_t) 1];
    }
    for (; iter_122639 < end; iter_122639++) {
        int64_t gtid_115394 = iter_122639;
        
        // stage 3 scan body
        {
            bool cond_122549 = gtid_115394 == (int64_t) 0;
            float defunc_0_f_res_122550;
            
            if (cond_122549) {
                float defunc_0_f_res_t_res_122551 = defunc_2_reduce_res_115430 /
                      i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_t_res_122551;
            } else {
                int64_t x_122552 = add64(n_p_112806, gtid_115394);
                int64_t i_122553 = sub64(x_122552, (int64_t) 1);
                bool x_122554 = sle64((int64_t) 0, i_122553);
                bool y_122555 = slt64(i_122553, lifted_single_ma_arg_113192);
                bool bounds_check_122556 = x_122554 && y_122555;
                bool index_certs_122557;
                
                if (!bounds_check_122556) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122553,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122558 = ((float *) mem_120009.mem)[i_122553];
                int64_t i_122559 = sub64(gtid_115394, (int64_t) 1);
                bool x_122560 = sle64((int64_t) 0, i_122559);
                bool y_122561 = slt64(i_122559, lifted_single_ma_arg_113192);
                bool bounds_check_122562 = x_122560 && y_122561;
                bool index_certs_122563;
                
                if (!bounds_check_122562) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122559,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122564 = ((float *) mem_120009.mem)[i_122559];
                float x_122565 = x_122558 - y_122564;
                float defunc_0_f_res_f_res_122566 = x_122565 / i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_f_res_122566;
            }
            x_122636 = x_122636;
            x_122637 = defunc_0_f_res_122550;
            
            float defunc_1_op_res_122638 = x_122636 + x_122637;
            
            ((float *) mem_120012.mem)[gtid_115394] = defunc_1_op_res_122638;
            x_122636 = defunc_1_op_res_122638;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128520_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128520_end -
                 futhark_mc_scan_stage_3_parloop_128520_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128520_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128520_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128520_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128515(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115393 = tid;
    int num_tasks_122626 = info.nsubtasks;
    struct futhark_mc_task_128514 *futhark_mc_task_128514 =
                                  (struct futhark_mc_task_128514 *) args;
    struct futhark_context *ctx = futhark_mc_task_128514->ctx;
    uint64_t futhark_mc_segscan_task_128515_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128515_start = get_wall_time();
    
    int64_t n_p_112806 = futhark_mc_task_128514->free_n_p_112806;
    float i64_res_112846 = futhark_mc_task_128514->free_i64_res_112846;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_task_128514->free_lifted_single_ma_arg_113192;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_task_128514->free_lifted_single_ma_arg_113209;
    float defunc_2_reduce_res_115430 =
          futhark_mc_task_128514->free_defunc_2_reduce_res_115430;
    struct memblock mem_120009 = {.desc ="mem_120009", .mem =
                                  futhark_mc_task_128514->free_mem_120009,
                                  .size =0, .references =NULL};
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_task_128514->free_mem_120012,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122633_cached_sizze_128516 = 0;
    char *scan_stage_2_accum_mem_122633 = NULL;
    int64_t iter_122627;
    struct futhark_mc_scan_stage_1_parloop_struct_128517
    futhark_mc_scan_stage_1_parloop_struct_128517;
    
    futhark_mc_scan_stage_1_parloop_struct_128517.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_n_p_112806 = n_p_112806;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_i64_res_112846 =
        i64_res_112846;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_lifted_single_ma_arg_113192 =
        lifted_single_ma_arg_113192;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_defunc_2_reduce_res_115430 =
        defunc_2_reduce_res_115430;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_mem_120009 =
        mem_120009.mem;
    futhark_mc_scan_stage_1_parloop_struct_128517.free_mem_120012 =
        mem_120012.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128518_task;
    
    futhark_mc_scan_stage_1_parloop_128518_task.name =
        "futhark_mc_scan_stage_1_parloop_128518";
    futhark_mc_scan_stage_1_parloop_128518_task.fn =
        futhark_mc_scan_stage_1_parloop_128518;
    futhark_mc_scan_stage_1_parloop_128518_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128517;
    futhark_mc_scan_stage_1_parloop_128518_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128518_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128518_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128518_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128518_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128518_task);
    
    if (futhark_mc_scan_stage_1_parloop_128518_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128518_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128518_total_end -
                 futhark_mc_scan_stage_1_parloop_128518_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128518_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128518_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128518_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122626)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122628;
        float x_122629;
        int64_t offset_122631 = (int64_t) 0;
        int64_t offset_index_122632 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122633_cached_sizze_128516 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122633 =
                realloc(scan_stage_2_accum_mem_122633, (int64_t) 4);
            scan_stage_2_accum_mem_122633_cached_sizze_128516 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122633)[(int64_t) 0] = 0.0F;
        for (int32_t i_122635 = 0; i_122635 < num_tasks_122626 - 1;
             i_122635++) {
            offset_122631 = squot64(lifted_single_ma_arg_113209,
                                    sext_i32_i64(num_tasks_122626));
            if (slt64(sext_i32_i64(i_122635),
                      srem64(lifted_single_ma_arg_113209,
                             sext_i32_i64(num_tasks_122626)))) {
                offset_122631 += (int64_t) 1;
            }
            offset_index_122632 += offset_122631;
            
            int64_t gtid_115394 = offset_index_122632;
            bool cond_122549 = gtid_115394 == (int64_t) 0;
            float defunc_0_f_res_122550;
            
            if (cond_122549) {
                float defunc_0_f_res_t_res_122551 = defunc_2_reduce_res_115430 /
                      i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_t_res_122551;
            } else {
                int64_t x_122552 = add64(n_p_112806, gtid_115394);
                int64_t i_122553 = sub64(x_122552, (int64_t) 1);
                bool x_122554 = sle64((int64_t) 0, i_122553);
                bool y_122555 = slt64(i_122553, lifted_single_ma_arg_113192);
                bool bounds_check_122556 = x_122554 && y_122555;
                bool index_certs_122557;
                
                if (!bounds_check_122556) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122553,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122558 = ((float *) mem_120009.mem)[i_122553];
                int64_t i_122559 = sub64(gtid_115394, (int64_t) 1);
                bool x_122560 = sle64((int64_t) 0, i_122559);
                bool y_122561 = slt64(i_122559, lifted_single_ma_arg_113192);
                bool bounds_check_122562 = x_122560 && y_122561;
                bool index_certs_122563;
                
                if (!bounds_check_122562) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122559,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113192, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-58\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122564 = ((float *) mem_120009.mem)[i_122559];
                float x_122565 = x_122558 - y_122564;
                float defunc_0_f_res_f_res_122566 = x_122565 / i64_res_112846;
                
                defunc_0_f_res_122550 = defunc_0_f_res_f_res_122566;
            }
            // Read carry in
            {
                x_122628 =
                    ((float *) scan_stage_2_accum_mem_122633)[(int64_t) 0];
            }
            // Read next values
            {
                x_122629 = ((float *) mem_120012.mem)[offset_index_122632 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122630 = x_122628 + x_122629;
            
            ((float *) mem_120012.mem)[offset_index_122632 - (int64_t) 1] =
                defunc_1_op_res_122630;
            ((float *) scan_stage_2_accum_mem_122633)[(int64_t) 0] =
                defunc_1_op_res_122630;
        }
        
        int64_t iter_122639 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128519
        futhark_mc_scan_stage_3_parloop_struct_128519;
        
        futhark_mc_scan_stage_3_parloop_struct_128519.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_n_p_112806 =
            n_p_112806;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_i64_res_112846 =
            i64_res_112846;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_lifted_single_ma_arg_113192 =
            lifted_single_ma_arg_113192;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_defunc_2_reduce_res_115430 =
            defunc_2_reduce_res_115430;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_mem_120009 =
            mem_120009.mem;
        futhark_mc_scan_stage_3_parloop_struct_128519.free_mem_120012 =
            mem_120012.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128520_task;
        
        futhark_mc_scan_stage_3_parloop_128520_task.name =
            "futhark_mc_scan_stage_3_parloop_128520";
        futhark_mc_scan_stage_3_parloop_128520_task.fn =
            futhark_mc_scan_stage_3_parloop_128520;
        futhark_mc_scan_stage_3_parloop_128520_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128519;
        futhark_mc_scan_stage_3_parloop_128520_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128520_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128520_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128520_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128520_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128520_task);
        
        if (futhark_mc_scan_stage_3_parloop_128520_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128520_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128520_total_end -
                     futhark_mc_scan_stage_3_parloop_128520_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128520_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128520_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128520_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122633);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128515_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128515_end -
                 futhark_mc_segscan_task_128515_start;
        
        ctx->futhark_mc_segscan_task_128515_runs[tid]++;
        ctx->futhark_mc_segscan_task_128515_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128515_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128521 {
    struct futhark_context *ctx;
    char *free_mem_120012;
    float *retval_defunc_2_reduce_res_115459;
};
struct futhark_mc_segred_stage_1_parloop_struct_128524 {
    struct futhark_context *ctx;
    char *free_mem_120012;
    char *free_reduce_stage_1_tid_res_arr_mem_122641;
};
static int futhark_mc_segred_stage_1_parloop_128525(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115395,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128524
    *futhark_mc_segred_stage_1_parloop_struct_128524 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128524 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128524->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128525_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128525_start = get_wall_time();
    
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128524->free_mem_120012,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_122641 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122641",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128524->free_reduce_stage_1_tid_res_arr_mem_122641,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122643 = start;
    float x_122567;
    float x_122568;
    float local_acc_122644 = 0.0F;
    
    for (; iter_122643 < end; iter_122643++) {
        int64_t gtid_115396 = iter_122643;
        float x_122570 = ((float *) mem_120012.mem)[gtid_115396];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122567 = local_acc_122644;
        }
        // Load next params
        {
            x_122568 = x_122570;
        }
        // Red body
        {
            float defunc_1_op_res_122569 = x_122567 + x_122568;
            
            local_acc_122644 = defunc_1_op_res_122569;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122641.mem)[flat_tid_115395] =
        local_acc_122644;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128525_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128525_end -
                 futhark_mc_segred_stage_1_parloop_128525_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128525_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128525_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128525_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128522(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115395 = tid;
    int num_tasks_122640 = info.nsubtasks;
    struct futhark_mc_task_128521 *futhark_mc_task_128521 =
                                  (struct futhark_mc_task_128521 *) args;
    struct futhark_context *ctx = futhark_mc_task_128521->ctx;
    uint64_t futhark_mc_segred_task_128522_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128522_start = get_wall_time();
    
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_task_128521->free_mem_120012,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_115459 =
          *futhark_mc_task_128521->retval_defunc_2_reduce_res_115459;
    size_t reduce_stage_1_tid_res_arr_mem_122641_cached_sizze_128523 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122641 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122641_cached_sizze_128523 <
        (size_t) ((int64_t) 4 * num_tasks_122640)) {
        reduce_stage_1_tid_res_arr_mem_122641 =
            realloc(reduce_stage_1_tid_res_arr_mem_122641, (int64_t) 4 *
                    num_tasks_122640);
        reduce_stage_1_tid_res_arr_mem_122641_cached_sizze_128523 =
            (int64_t) 4 * num_tasks_122640;
    }
    
    int64_t iter_122643;
    struct futhark_mc_segred_stage_1_parloop_struct_128524
    futhark_mc_segred_stage_1_parloop_struct_128524;
    
    futhark_mc_segred_stage_1_parloop_struct_128524.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128524.free_mem_120012 =
        mem_120012.mem;
    futhark_mc_segred_stage_1_parloop_struct_128524.free_reduce_stage_1_tid_res_arr_mem_122641 =
        reduce_stage_1_tid_res_arr_mem_122641;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128525_task;
    
    futhark_mc_segred_stage_1_parloop_128525_task.name =
        "futhark_mc_segred_stage_1_parloop_128525";
    futhark_mc_segred_stage_1_parloop_128525_task.fn =
        futhark_mc_segred_stage_1_parloop_128525;
    futhark_mc_segred_stage_1_parloop_128525_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128524;
    futhark_mc_segred_stage_1_parloop_128525_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128525_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128525_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128525_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128525_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128525_task);
    
    if (futhark_mc_segred_stage_1_parloop_128525_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128525_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128525_total_end -
                 futhark_mc_segred_stage_1_parloop_128525_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128525_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128525_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128525_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_115459 = 0.0F;
    }
    
    float x_122645;
    float x_122646;
    
    for (int32_t i_122648 = 0; i_122648 < num_tasks_122640; i_122648++) {
        flat_tid_115395 = i_122648;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122645 = defunc_2_reduce_res_115459;
            }
            // load next params
            {
                x_122646 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122641)[flat_tid_115395];
            }
            // red body
            {
                float defunc_1_op_res_122647 = x_122645 + x_122646;
                
                defunc_2_reduce_res_115459 = defunc_1_op_res_122647;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122641);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128522_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128522_end -
                 futhark_mc_segred_task_128522_start;
        
        ctx->futhark_mc_segred_task_128522_runs[tid]++;
        ctx->futhark_mc_segred_task_128522_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128522_iter[tid] += iterations;
    }
    *futhark_mc_task_128521->retval_defunc_2_reduce_res_115459 =
        defunc_2_reduce_res_115459;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128526 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_lifted_single_ma_arg_113209;
    float free_defunc_2_reduce_res_115459;
    char *free_mem_120012;
    char *free_mem_120015;
};
struct futhark_mc_scan_stage_1_parloop_struct_128529 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_113209;
    float free_defunc_2_reduce_res_115459;
    char *free_mem_120012;
    char *free_mem_120015;
};
static int futhark_mc_scan_stage_1_parloop_128530(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115397, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_128529
    *futhark_mc_scan_stage_1_parloop_struct_128529 =
    (struct futhark_mc_scan_stage_1_parloop_struct_128529 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_128529->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_128530_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128530_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_scan_stage_1_parloop_struct_128529->free_lifted_single_ma_arg_113209;
    float defunc_2_reduce_res_115459 =
          futhark_mc_scan_stage_1_parloop_struct_128529->free_defunc_2_reduce_res_115459;
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128529->free_mem_120012,
                                  .size =0, .references =NULL};
    struct memblock mem_120015 = {.desc ="mem_120015", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_128529->free_mem_120015,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122650 = start;
    float x_122571;
    float x_122572;
    
    x_122571 = 0.0F;
    for (; iter_122650 < end; iter_122650++) {
        int64_t gtid_115398 = iter_122650;
        
        // stage 1 scan body
        {
            bool cond_122574 = gtid_115398 == (int64_t) 0;
            float defunc_0_f_res_122575;
            
            if (cond_122574) {
                float defunc_0_f_res_t_res_122576 = defunc_2_reduce_res_115459 /
                      3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_t_res_122576;
            } else {
                int64_t x_122577 = add64((int64_t) 3, gtid_115398);
                int64_t i_122578 = sub64(x_122577, (int64_t) 1);
                bool x_122579 = sle64((int64_t) 0, i_122578);
                bool y_122580 = slt64(i_122578, lifted_single_ma_arg_113209);
                bool bounds_check_122581 = x_122579 && y_122580;
                bool index_certs_122582;
                
                if (!bounds_check_122581) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122578,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122583 = ((float *) mem_120012.mem)[i_122578];
                int64_t i_122584 = sub64(gtid_115398, (int64_t) 1);
                bool x_122585 = sle64((int64_t) 0, i_122584);
                bool y_122586 = slt64(i_122584, lifted_single_ma_arg_113209);
                bool bounds_check_122587 = x_122585 && y_122586;
                bool index_certs_122588;
                
                if (!bounds_check_122587) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122584,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122589 = ((float *) mem_120012.mem)[i_122584];
                float x_122590 = x_122583 - y_122589;
                float defunc_0_f_res_f_res_122591 = x_122590 / 3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_f_res_122591;
            }
            // write mapped values results to memory
            { }
            x_122571 = x_122571;
            // Read next values
            {
                x_122572 = defunc_0_f_res_122575;
            }
            
            float defunc_1_op_res_122573 = x_122571 + x_122572;
            
            ((float *) mem_120015.mem)[gtid_115398] = defunc_1_op_res_122573;
            x_122571 = defunc_1_op_res_122573;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128530_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128530_end -
                 futhark_mc_scan_stage_1_parloop_128530_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_128530_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_128530_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_128530_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_128531 {
    struct futhark_context *ctx;
    int64_t free_lifted_single_ma_arg_113209;
    float free_defunc_2_reduce_res_115459;
    char *free_mem_120012;
    char *free_mem_120015;
};
static int futhark_mc_scan_stage_3_parloop_128532(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_115397, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_128531
    *futhark_mc_scan_stage_3_parloop_struct_128531 =
    (struct futhark_mc_scan_stage_3_parloop_struct_128531 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_128531->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_128532_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_128532_start = get_wall_time();
    
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_scan_stage_3_parloop_struct_128531->free_lifted_single_ma_arg_113209;
    float defunc_2_reduce_res_115459 =
          futhark_mc_scan_stage_3_parloop_struct_128531->free_defunc_2_reduce_res_115459;
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128531->free_mem_120012,
                                  .size =0, .references =NULL};
    struct memblock mem_120015 = {.desc ="mem_120015", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_128531->free_mem_120015,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122662 = start;
    float x_122659;
    float x_122660;
    
    if (iter_122662 == (int64_t) 0) {
        x_122659 = 0.0F;
    } else {
        x_122659 = ((float *) mem_120015.mem)[iter_122662 - (int64_t) 1];
    }
    for (; iter_122662 < end; iter_122662++) {
        int64_t gtid_115398 = iter_122662;
        
        // stage 3 scan body
        {
            bool cond_122574 = gtid_115398 == (int64_t) 0;
            float defunc_0_f_res_122575;
            
            if (cond_122574) {
                float defunc_0_f_res_t_res_122576 = defunc_2_reduce_res_115459 /
                      3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_t_res_122576;
            } else {
                int64_t x_122577 = add64((int64_t) 3, gtid_115398);
                int64_t i_122578 = sub64(x_122577, (int64_t) 1);
                bool x_122579 = sle64((int64_t) 0, i_122578);
                bool y_122580 = slt64(i_122578, lifted_single_ma_arg_113209);
                bool bounds_check_122581 = x_122579 && y_122580;
                bool index_certs_122582;
                
                if (!bounds_check_122581) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122578,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122583 = ((float *) mem_120012.mem)[i_122578];
                int64_t i_122584 = sub64(gtid_115398, (int64_t) 1);
                bool x_122585 = sle64((int64_t) 0, i_122584);
                bool y_122586 = slt64(i_122584, lifted_single_ma_arg_113209);
                bool bounds_check_122587 = x_122585 && y_122586;
                bool index_certs_122588;
                
                if (!bounds_check_122587) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122584,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122589 = ((float *) mem_120012.mem)[i_122584];
                float x_122590 = x_122583 - y_122589;
                float defunc_0_f_res_f_res_122591 = x_122590 / 3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_f_res_122591;
            }
            x_122659 = x_122659;
            x_122660 = defunc_0_f_res_122575;
            
            float defunc_1_op_res_122661 = x_122659 + x_122660;
            
            ((float *) mem_120015.mem)[gtid_115398] = defunc_1_op_res_122661;
            x_122659 = defunc_1_op_res_122661;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_128532_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_128532_end -
                 futhark_mc_scan_stage_3_parloop_128532_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_128532_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_128532_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_128532_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_128527(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115397 = tid;
    int num_tasks_122649 = info.nsubtasks;
    struct futhark_mc_task_128526 *futhark_mc_task_128526 =
                                  (struct futhark_mc_task_128526 *) args;
    struct futhark_context *ctx = futhark_mc_task_128526->ctx;
    uint64_t futhark_mc_segscan_task_128527_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_128527_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128526->free_n_112804;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_task_128526->free_lifted_single_ma_arg_113209;
    float defunc_2_reduce_res_115459 =
          futhark_mc_task_128526->free_defunc_2_reduce_res_115459;
    struct memblock mem_120012 = {.desc ="mem_120012", .mem =
                                  futhark_mc_task_128526->free_mem_120012,
                                  .size =0, .references =NULL};
    struct memblock mem_120015 = {.desc ="mem_120015", .mem =
                                  futhark_mc_task_128526->free_mem_120015,
                                  .size =0, .references =NULL};
    size_t scan_stage_2_accum_mem_122656_cached_sizze_128528 = 0;
    char *scan_stage_2_accum_mem_122656 = NULL;
    int64_t iter_122650;
    struct futhark_mc_scan_stage_1_parloop_struct_128529
    futhark_mc_scan_stage_1_parloop_struct_128529;
    
    futhark_mc_scan_stage_1_parloop_struct_128529.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_128529.free_lifted_single_ma_arg_113209 =
        lifted_single_ma_arg_113209;
    futhark_mc_scan_stage_1_parloop_struct_128529.free_defunc_2_reduce_res_115459 =
        defunc_2_reduce_res_115459;
    futhark_mc_scan_stage_1_parloop_struct_128529.free_mem_120012 =
        mem_120012.mem;
    futhark_mc_scan_stage_1_parloop_struct_128529.free_mem_120015 =
        mem_120015.mem;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_128530_task;
    
    futhark_mc_scan_stage_1_parloop_128530_task.name =
        "futhark_mc_scan_stage_1_parloop_128530";
    futhark_mc_scan_stage_1_parloop_128530_task.fn =
        futhark_mc_scan_stage_1_parloop_128530;
    futhark_mc_scan_stage_1_parloop_128530_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_128529;
    futhark_mc_scan_stage_1_parloop_128530_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_128530_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_128530_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_128530_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_128530_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_128530_task);
    
    if (futhark_mc_scan_stage_1_parloop_128530_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_128530_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_128530_total_end -
                 futhark_mc_scan_stage_1_parloop_128530_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128530_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128530_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_128530_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_122649)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        float x_122651;
        float x_122652;
        int64_t offset_122654 = (int64_t) 0;
        int64_t offset_index_122655 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_122656_cached_sizze_128528 <
            (size_t) (int64_t) 4) {
            scan_stage_2_accum_mem_122656 =
                realloc(scan_stage_2_accum_mem_122656, (int64_t) 4);
            scan_stage_2_accum_mem_122656_cached_sizze_128528 = (int64_t) 4;
        }
        ((float *) scan_stage_2_accum_mem_122656)[(int64_t) 0] = 0.0F;
        for (int32_t i_122658 = 0; i_122658 < num_tasks_122649 - 1;
             i_122658++) {
            offset_122654 = squot64(n_112804, sext_i32_i64(num_tasks_122649));
            if (slt64(sext_i32_i64(i_122658), srem64(n_112804,
                                                     sext_i32_i64(num_tasks_122649)))) {
                offset_122654 += (int64_t) 1;
            }
            offset_index_122655 += offset_122654;
            
            int64_t gtid_115398 = offset_index_122655;
            bool cond_122574 = gtid_115398 == (int64_t) 0;
            float defunc_0_f_res_122575;
            
            if (cond_122574) {
                float defunc_0_f_res_t_res_122576 = defunc_2_reduce_res_115459 /
                      3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_t_res_122576;
            } else {
                int64_t x_122577 = add64((int64_t) 3, gtid_115398);
                int64_t i_122578 = sub64(x_122577, (int64_t) 1);
                bool x_122579 = sle64((int64_t) 0, i_122578);
                bool y_122580 = slt64(i_122578, lifted_single_ma_arg_113209);
                bool bounds_check_122581 = x_122579 && y_122580;
                bool index_certs_122582;
                
                if (!bounds_check_122581) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122578,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:26-39\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float x_122583 = ((float *) mem_120012.mem)[i_122578];
                int64_t i_122584 = sub64(gtid_115398, (int64_t) 1);
                bool x_122585 = sle64((int64_t) 0, i_122584);
                bool y_122586 = slt64(i_122584, lifted_single_ma_arg_113209);
                bool bounds_check_122587 = x_122585 && y_122586;
                bool index_certs_122588;
                
                if (!bounds_check_122587) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) i_122584,
                                  "] out of bounds for array of shape [",
                                  (long long) lifted_single_ma_arg_113209, "].",
                                  "-> #0  stl.fut:38:43-50\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:33:9-39:16\n   #4  /prelude/functional.fut:9:42-44\n   #5  stl.fut:43:3-76\n   #6  stl.fut:200:30-50\n   #7  stl.fut:199:23-201:31\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float y_122589 = ((float *) mem_120012.mem)[i_122584];
                float x_122590 = x_122583 - y_122589;
                float defunc_0_f_res_f_res_122591 = x_122590 / 3.0F;
                
                defunc_0_f_res_122575 = defunc_0_f_res_f_res_122591;
            }
            // Read carry in
            {
                x_122651 =
                    ((float *) scan_stage_2_accum_mem_122656)[(int64_t) 0];
            }
            // Read next values
            {
                x_122652 = ((float *) mem_120015.mem)[offset_index_122655 -
                                                      (int64_t) 1];
            }
            
            float defunc_1_op_res_122653 = x_122651 + x_122652;
            
            ((float *) mem_120015.mem)[offset_index_122655 - (int64_t) 1] =
                defunc_1_op_res_122653;
            ((float *) scan_stage_2_accum_mem_122656)[(int64_t) 0] =
                defunc_1_op_res_122653;
        }
        
        int64_t iter_122662 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_128531
        futhark_mc_scan_stage_3_parloop_struct_128531;
        
        futhark_mc_scan_stage_3_parloop_struct_128531.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_128531.free_lifted_single_ma_arg_113209 =
            lifted_single_ma_arg_113209;
        futhark_mc_scan_stage_3_parloop_struct_128531.free_defunc_2_reduce_res_115459 =
            defunc_2_reduce_res_115459;
        futhark_mc_scan_stage_3_parloop_struct_128531.free_mem_120012 =
            mem_120012.mem;
        futhark_mc_scan_stage_3_parloop_struct_128531.free_mem_120015 =
            mem_120015.mem;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_128532_task;
        
        futhark_mc_scan_stage_3_parloop_128532_task.name =
            "futhark_mc_scan_stage_3_parloop_128532";
        futhark_mc_scan_stage_3_parloop_128532_task.fn =
            futhark_mc_scan_stage_3_parloop_128532;
        futhark_mc_scan_stage_3_parloop_128532_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_128531;
        futhark_mc_scan_stage_3_parloop_128532_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_128532_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_128532_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_128532_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_128532_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_128532_task);
        
        if (futhark_mc_scan_stage_3_parloop_128532_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_128532_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_128532_total_end -
                     futhark_mc_scan_stage_3_parloop_128532_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128532_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128532_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_128532_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_122656);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_128527_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_128527_end -
                 futhark_mc_segscan_task_128527_start;
        
        ctx->futhark_mc_segscan_task_128527_runs[tid]++;
        ctx->futhark_mc_segscan_task_128527_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_128527_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128493(void *args, int64_t start,
                                            int64_t end, int flat_tid_115385,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128492
    *futhark_mc_segmap_parloop_struct_128492 =
    (struct futhark_mc_segmap_parloop_struct_128492 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128492->ctx;
    uint64_t futhark_mc_segmap_parloop_128493_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128493_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128492->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128492->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128492->free_n_p_112806;
    float i64_res_112846 =
          futhark_mc_segmap_parloop_struct_128492->free_i64_res_112846;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128492->free_C_len_112852;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_segmap_parloop_struct_128492->free_lifted_single_ma_arg_113192;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_segmap_parloop_struct_128492->free_lifted_single_ma_arg_113209;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128492->free_bytes_119697;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128492->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t bytes_120007 =
            futhark_mc_segmap_parloop_struct_128492->free_bytes_120007;
    int64_t bytes_120010 =
            futhark_mc_segmap_parloop_struct_128492->free_bytes_120010;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128492->free_mem_120064,
                                  .size =0, .references =NULL};
    size_t mem_120009_cached_sizze_128494 = 0;
    char *mem_120009 = NULL;
    size_t mem_120012_cached_sizze_128495 = 0;
    char *mem_120012 = NULL;
    size_t mem_120015_cached_sizze_128496 = 0;
    char *mem_120015 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122516 = start;
    
    if (mem_120009_cached_sizze_128494 < (size_t) bytes_120007) {
        mem_120009 = realloc(mem_120009, bytes_120007);
        mem_120009_cached_sizze_128494 = bytes_120007;
    }
    if (mem_120012_cached_sizze_128495 < (size_t) bytes_120010) {
        mem_120012 = realloc(mem_120012, bytes_120010);
        mem_120012_cached_sizze_128495 = bytes_120010;
    }
    if (mem_120015_cached_sizze_128496 < (size_t) bytes_119697) {
        mem_120015 = realloc(mem_120015, bytes_119697);
        mem_120015_cached_sizze_128496 = bytes_119697;
    }
    for (; iter_122516 < end; iter_122516++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122592 = m_112803;
        int64_t gtid_115386 = iter_122516;
        int64_t remnant_122593 = iter_122516 - gtid_115386;
        float defunc_2_reduce_res_115401;
        int64_t flat_tid_115387 = (int64_t) 0;
        int32_t num_tasks_122594;
        struct futhark_mc_task_128497 futhark_mc_task_128497;
        
        futhark_mc_task_128497.ctx = ctx;
        futhark_mc_task_128497.free_C_len_112852 = C_len_112852;
        futhark_mc_task_128497.free_gtid_115386 = gtid_115386;
        futhark_mc_task_128497.free_mem_120006 = mem_120006.mem;
        futhark_mc_task_128497.retval_defunc_2_reduce_res_115401 =
            &defunc_2_reduce_res_115401;
        
        struct scheduler_segop futhark_mc_task_128497_task;
        
        futhark_mc_task_128497_task.args = &futhark_mc_task_128497;
        futhark_mc_task_128497_task.top_level_fn =
            futhark_mc_segred_task_128498;
        futhark_mc_task_128497_task.name = "futhark_mc_segred_task_128498";
        futhark_mc_task_128497_task.iterations = n_p_112806;
        futhark_mc_task_128497_task.task_time =
            &ctx->futhark_mc_segred_task_128498_total_time;
        futhark_mc_task_128497_task.task_iter =
            &ctx->futhark_mc_segred_task_128498_total_iter;
        futhark_mc_task_128497_task.sched = STATIC;
        futhark_mc_task_128497_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128498_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128497_task);
        
        if (futhark_mc_segred_task_128498_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115389 = (int64_t) 0;
        int32_t num_tasks_122603;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128502 futhark_mc_task_128502;
        
        futhark_mc_task_128502.ctx = ctx;
        futhark_mc_task_128502.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128502.free_i64_res_112846 = i64_res_112846;
        futhark_mc_task_128502.free_C_len_112852 = C_len_112852;
        futhark_mc_task_128502.free_lifted_single_ma_arg_113192 =
            lifted_single_ma_arg_113192;
        futhark_mc_task_128502.free_gtid_115386 = gtid_115386;
        futhark_mc_task_128502.free_defunc_2_reduce_res_115401 =
            defunc_2_reduce_res_115401;
        futhark_mc_task_128502.free_mem_120006 = mem_120006.mem;
        futhark_mc_task_128502.free_mem_120009 = mem_120009;
        
        struct scheduler_segop futhark_mc_task_128502_task;
        
        futhark_mc_task_128502_task.args = &futhark_mc_task_128502;
        futhark_mc_task_128502_task.top_level_fn =
            futhark_mc_segscan_task_128503;
        futhark_mc_task_128502_task.name = "futhark_mc_segscan_task_128503";
        futhark_mc_task_128502_task.iterations = lifted_single_ma_arg_113192;
        futhark_mc_task_128502_task.task_time =
            &ctx->futhark_mc_segscan_task_128503_total_time;
        futhark_mc_task_128502_task.task_iter =
            &ctx->futhark_mc_segscan_task_128503_total_iter;
        futhark_mc_task_128502_task.sched = STATIC;
        futhark_mc_task_128502_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128503_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128502_task);
        
        if (futhark_mc_segscan_task_128503_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_115430;
        int64_t flat_tid_115391 = (int64_t) 0;
        int32_t num_tasks_122617;
        struct futhark_mc_task_128509 futhark_mc_task_128509;
        
        futhark_mc_task_128509.ctx = ctx;
        futhark_mc_task_128509.free_mem_120009 = mem_120009;
        futhark_mc_task_128509.retval_defunc_2_reduce_res_115430 =
            &defunc_2_reduce_res_115430;
        
        struct scheduler_segop futhark_mc_task_128509_task;
        
        futhark_mc_task_128509_task.args = &futhark_mc_task_128509;
        futhark_mc_task_128509_task.top_level_fn =
            futhark_mc_segred_task_128510;
        futhark_mc_task_128509_task.name = "futhark_mc_segred_task_128510";
        futhark_mc_task_128509_task.iterations = n_p_112806;
        futhark_mc_task_128509_task.task_time =
            &ctx->futhark_mc_segred_task_128510_total_time;
        futhark_mc_task_128509_task.task_iter =
            &ctx->futhark_mc_segred_task_128510_total_iter;
        futhark_mc_task_128509_task.sched = STATIC;
        futhark_mc_task_128509_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128510_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128509_task);
        
        if (futhark_mc_segred_task_128510_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115393 = (int64_t) 0;
        int32_t num_tasks_122626;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128514 futhark_mc_task_128514;
        
        futhark_mc_task_128514.ctx = ctx;
        futhark_mc_task_128514.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128514.free_i64_res_112846 = i64_res_112846;
        futhark_mc_task_128514.free_lifted_single_ma_arg_113192 =
            lifted_single_ma_arg_113192;
        futhark_mc_task_128514.free_lifted_single_ma_arg_113209 =
            lifted_single_ma_arg_113209;
        futhark_mc_task_128514.free_defunc_2_reduce_res_115430 =
            defunc_2_reduce_res_115430;
        futhark_mc_task_128514.free_mem_120009 = mem_120009;
        futhark_mc_task_128514.free_mem_120012 = mem_120012;
        
        struct scheduler_segop futhark_mc_task_128514_task;
        
        futhark_mc_task_128514_task.args = &futhark_mc_task_128514;
        futhark_mc_task_128514_task.top_level_fn =
            futhark_mc_segscan_task_128515;
        futhark_mc_task_128514_task.name = "futhark_mc_segscan_task_128515";
        futhark_mc_task_128514_task.iterations = lifted_single_ma_arg_113209;
        futhark_mc_task_128514_task.task_time =
            &ctx->futhark_mc_segscan_task_128515_total_time;
        futhark_mc_task_128514_task.task_iter =
            &ctx->futhark_mc_segscan_task_128515_total_iter;
        futhark_mc_task_128514_task.sched = STATIC;
        futhark_mc_task_128514_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128515_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128514_task);
        
        if (futhark_mc_segscan_task_128515_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_115459;
        int64_t flat_tid_115395 = (int64_t) 0;
        int32_t num_tasks_122640;
        struct futhark_mc_task_128521 futhark_mc_task_128521;
        
        futhark_mc_task_128521.ctx = ctx;
        futhark_mc_task_128521.free_mem_120012 = mem_120012;
        futhark_mc_task_128521.retval_defunc_2_reduce_res_115459 =
            &defunc_2_reduce_res_115459;
        
        struct scheduler_segop futhark_mc_task_128521_task;
        
        futhark_mc_task_128521_task.args = &futhark_mc_task_128521;
        futhark_mc_task_128521_task.top_level_fn =
            futhark_mc_segred_task_128522;
        futhark_mc_task_128521_task.name = "futhark_mc_segred_task_128522";
        futhark_mc_task_128521_task.iterations = (int64_t) 3;
        futhark_mc_task_128521_task.task_time =
            &ctx->futhark_mc_segred_task_128522_total_time;
        futhark_mc_task_128521_task.task_iter =
            &ctx->futhark_mc_segred_task_128522_total_iter;
        futhark_mc_task_128521_task.sched = STATIC;
        futhark_mc_task_128521_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128522_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128521_task);
        
        if (futhark_mc_segred_task_128522_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_115397 = (int64_t) 0;
        int32_t num_tasks_122649;
        
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmented segScan");
        
        struct futhark_mc_task_128526 futhark_mc_task_128526;
        
        futhark_mc_task_128526.ctx = ctx;
        futhark_mc_task_128526.free_n_112804 = n_112804;
        futhark_mc_task_128526.free_lifted_single_ma_arg_113209 =
            lifted_single_ma_arg_113209;
        futhark_mc_task_128526.free_defunc_2_reduce_res_115459 =
            defunc_2_reduce_res_115459;
        futhark_mc_task_128526.free_mem_120012 = mem_120012;
        futhark_mc_task_128526.free_mem_120015 = mem_120015;
        
        struct scheduler_segop futhark_mc_task_128526_task;
        
        futhark_mc_task_128526_task.args = &futhark_mc_task_128526;
        futhark_mc_task_128526_task.top_level_fn =
            futhark_mc_segscan_task_128527;
        futhark_mc_task_128526_task.name = "futhark_mc_segscan_task_128527";
        futhark_mc_task_128526_task.iterations = n_112804;
        futhark_mc_task_128526_task.task_time =
            &ctx->futhark_mc_segscan_task_128527_total_time;
        futhark_mc_task_128526_task.task_iter =
            &ctx->futhark_mc_segscan_task_128527_total_iter;
        futhark_mc_task_128526_task.sched = STATIC;
        futhark_mc_task_128526_task.nested_fn = NULL;
        
        int futhark_mc_segscan_task_128527_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128526_task);
        
        if (futhark_mc_segscan_task_128527_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120064.mem + gtid_115386 * n_112804 * (int64_t) 4,
                mem_120015 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120009);
    free(mem_120012);
    free(mem_120015);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128493_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128493_end -
                 futhark_mc_segmap_parloop_128493_start;
        
        ctx->futhark_mc_segmap_parloop_128493_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128493_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128493_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128491(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115385 = tid;
    int num_tasks_122421 = info.nsubtasks;
    struct futhark_mc_task_128484 *futhark_mc_task_128484 =
                                  (struct futhark_mc_task_128484 *) args;
    struct futhark_context *ctx = futhark_mc_task_128484->ctx;
    uint64_t futhark_mc_segmap_nested_task_128491_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128491_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128484->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128484->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128484->free_n_p_112806;
    float i64_res_112846 = futhark_mc_task_128484->free_i64_res_112846;
    int64_t C_len_112852 = futhark_mc_task_128484->free_C_len_112852;
    int64_t lifted_single_ma_arg_113192 =
            futhark_mc_task_128484->free_lifted_single_ma_arg_113192;
    int64_t lifted_single_ma_arg_113209 =
            futhark_mc_task_128484->free_lifted_single_ma_arg_113209;
    int64_t bytes_119697 = futhark_mc_task_128484->free_bytes_119697;
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128484->free_mem_120006,
                                  .size =0, .references =NULL};
    int64_t bytes_120007 = futhark_mc_task_128484->free_bytes_120007;
    int64_t bytes_120010 = futhark_mc_task_128484->free_bytes_120010;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128484->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t iter_122516;
    struct futhark_mc_segmap_parloop_struct_128492
    futhark_mc_segmap_parloop_struct_128492;
    
    futhark_mc_segmap_parloop_struct_128492.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128492.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128492.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128492.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128492.free_i64_res_112846 =
        i64_res_112846;
    futhark_mc_segmap_parloop_struct_128492.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128492.free_lifted_single_ma_arg_113192 =
        lifted_single_ma_arg_113192;
    futhark_mc_segmap_parloop_struct_128492.free_lifted_single_ma_arg_113209 =
        lifted_single_ma_arg_113209;
    futhark_mc_segmap_parloop_struct_128492.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128492.free_mem_120006 = mem_120006.mem;
    futhark_mc_segmap_parloop_struct_128492.free_bytes_120007 = bytes_120007;
    futhark_mc_segmap_parloop_struct_128492.free_bytes_120010 = bytes_120010;
    futhark_mc_segmap_parloop_struct_128492.free_mem_120064 = mem_120064.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128493_task;
    
    futhark_mc_segmap_parloop_128493_task.name =
        "futhark_mc_segmap_parloop_128493";
    futhark_mc_segmap_parloop_128493_task.fn = futhark_mc_segmap_parloop_128493;
    futhark_mc_segmap_parloop_128493_task.args =
        &futhark_mc_segmap_parloop_struct_128492;
    futhark_mc_segmap_parloop_128493_task.iterations = iterations;
    futhark_mc_segmap_parloop_128493_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128493_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128493_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128493_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128493_task);
    
    if (futhark_mc_segmap_parloop_128493_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128493_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128493_total_end -
                 futhark_mc_segmap_parloop_128493_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128493_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128493_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128493_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128491_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128491_end -
                 futhark_mc_segmap_nested_task_128491_start;
        
        ctx->futhark_mc_segmap_nested_task_128491_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128491_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128491_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128533 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120090;
};
struct futhark_mc_segmap_parloop_struct_128535 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120090;
};
static int futhark_mc_segmap_parloop_128536(void *args, int64_t start,
                                            int64_t end, int flat_tid_115487,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128535
    *futhark_mc_segmap_parloop_struct_128535 =
    (struct futhark_mc_segmap_parloop_struct_128535 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128535->ctx;
    uint64_t futhark_mc_segmap_parloop_128536_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128536_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128535->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128535->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128535->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128535->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128535->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128535->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128535->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128535->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128535->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128535->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128535->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120090 = {.desc ="mem_120090", .mem =
                                  futhark_mc_segmap_parloop_struct_128535->free_mem_120090,
                                  .size =0, .references =NULL};
    size_t mem_120074_cached_sizze_128537 = 0;
    char *mem_120074 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122666 = start;
    
    if (mem_120074_cached_sizze_128537 < (size_t) bytes_119766) {
        mem_120074 = realloc(mem_120074, bytes_119766);
        mem_120074_cached_sizze_128537 = bytes_119766;
    }
    for (; iter_122666 < end; iter_122666++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122723 = m_112803;
        int64_t gtid_115488 = iter_122666;
        int64_t remnant_122724 = iter_122666 - gtid_115488;
        
        for (int64_t i_122667 = 0; i_122667 < l_n_m_112854; i_122667++) {
            int64_t x_122669 = ((int64_t *) mem_119820.mem)[gtid_115488 *
                                                            l_n_m_112854 +
                                                            i_122667];
            float x_122670 = ((float *) mem_119824.mem)[gtid_115488 *
                                                        l_n_m_112854 +
                                                        i_122667];
            int64_t min_arg_122671 = mul64(t_jump_112811, i_122667);
            int64_t min_res_122672 = smin64(i_112880, min_arg_122671);
            float defunc_0_f_res_122673 = sitofp_i64_f32(min_res_122672);
            float defunc_2_reduce_res_122674;
            float redout_122676 = 0.0F;
            
            for (int64_t i_122675 = 0; i_122675 < l_window_112808; i_122675++) {
                bool cond_122677 = sle64(n_112804, i_122675);
                float defunc_0_f_res_122678;
                
                if (cond_122677) {
                    defunc_0_f_res_122678 = 0.0F;
                } else {
                    int64_t i_122679 = add64(x_122669, i_122675);
                    float index_primexp_122680 = sitofp_i64_f32(i_122679);
                    float defunc_0_f_res_f_res_122681 = 1.0F +
                          index_primexp_122680;
                    
                    defunc_0_f_res_122678 = defunc_0_f_res_f_res_122681;
                }
                
                float defunc_0_f_res_122682;
                
                if (cond_122677) {
                    defunc_0_f_res_122682 = 0.0F;
                } else {
                    int64_t i_122683 = add64(x_122669, i_122675);
                    float x_122684 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115488 *
                                                            ctx_param_ext_119914 +
                                                            i_122683 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_122682 = x_122684;
                }
                
                float x_j_122685 = defunc_0_f_res_122678 -
                      defunc_0_f_res_122673;
                float abs_res_122686 = (float) fabs(x_j_122685);
                float tmp1_122687 = abs_res_122686 / x_122670;
                float x_122688 = tmp1_122687 * tmp1_122687;
                float y_122689 = tmp1_122687 * x_122688;
                float tmp2_122690 = 1.0F - y_122689;
                float x_122691 = tmp2_122690 * tmp2_122690;
                float tmp3_122692 = tmp2_122690 * x_122691;
                float w_j_122693 = defunc_0_f_res_122682 * tmp3_122692;
                float defunc_1_op_res_122694 = w_j_122693 + redout_122676;
                float redout_tmp_122726 = defunc_1_op_res_122694;
                
                redout_122676 = redout_tmp_122726;
            }
            defunc_2_reduce_res_122674 = redout_122676;
            
            float a0_122695 = 1.0F / defunc_2_reduce_res_122674;
            float defunc_2_reduce_res_122696;
            float redout_122698 = 0.0F;
            
            for (int64_t i_122697 = 0; i_122697 < l_window_112808; i_122697++) {
                bool cond_122699 = sle64(n_112804, i_122697);
                float defunc_0_f_res_122700;
                
                if (cond_122699) {
                    defunc_0_f_res_122700 = 0.0F;
                } else {
                    int64_t i_122701 = add64(x_122669, i_122697);
                    float index_primexp_122702 = sitofp_i64_f32(i_122701);
                    float defunc_0_f_res_f_res_122703 = 1.0F +
                          index_primexp_122702;
                    
                    defunc_0_f_res_122700 = defunc_0_f_res_f_res_122703;
                }
                
                float defunc_0_f_res_122704;
                
                if (cond_122699) {
                    defunc_0_f_res_122704 = 0.0F;
                } else {
                    int64_t i_122705 = add64(x_122669, i_122697);
                    float x_122706 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115488 *
                                                            ctx_param_ext_119914 +
                                                            i_122705 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_122704 = x_122706;
                }
                
                float x_j_122707 = defunc_0_f_res_122700 -
                      defunc_0_f_res_122673;
                float abs_res_122708 = (float) fabs(x_j_122707);
                float tmp1_122709 = abs_res_122708 / x_122670;
                float x_122710 = tmp1_122709 * tmp1_122709;
                float y_122711 = tmp1_122709 * x_122710;
                float tmp2_122712 = 1.0F - y_122711;
                float x_122713 = tmp2_122712 * tmp2_122712;
                float tmp3_122714 = tmp2_122712 * x_122713;
                float tmp4_122715 = defunc_0_f_res_122704 * tmp3_122714;
                float defunc_0_f_res_122716;
                
                if (cond_122699) {
                    defunc_0_f_res_122716 = 0.0F;
                } else {
                    int64_t i_122717 = add64(x_122669, i_122697);
                    float x_122718 = ((float *) mem_120064.mem)[gtid_115488 *
                                                                n_112804 +
                                                                i_122717];
                    
                    defunc_0_f_res_122716 = x_122718;
                }
                
                float x_122719 = a0_122695 * tmp4_122715;
                float defunc_9_fit_fun_res_122720 = defunc_0_f_res_122716 *
                      x_122719;
                float defunc_1_op_res_122721 = defunc_9_fit_fun_res_122720 +
                      redout_122698;
                float redout_tmp_122727 = defunc_1_op_res_122721;
                
                redout_122698 = redout_tmp_122727;
            }
            defunc_2_reduce_res_122696 = redout_122698;
            ((float *) mem_120074)[i_122667] = defunc_2_reduce_res_122696;
        }
        memmove(mem_120090.mem + gtid_115488 * l_n_m_112854 * (int64_t) 4,
                mem_120074 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120074);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128536_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128536_end -
                 futhark_mc_segmap_parloop_128536_start;
        
        ctx->futhark_mc_segmap_parloop_128536_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128536_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128536_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128534(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115487 = tid;
    int num_tasks_122665 = info.nsubtasks;
    struct futhark_mc_task_128533 *futhark_mc_task_128533 =
                                  (struct futhark_mc_task_128533 *) args;
    struct futhark_context *ctx = futhark_mc_task_128533->ctx;
    uint64_t futhark_mc_segmap_task_128534_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128534_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128533->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128533->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128533->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128533->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128533->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128533->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128533->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128533->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128533->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128533->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128533->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128533->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128533->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128533->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120090 = {.desc ="mem_120090", .mem =
                                  futhark_mc_task_128533->free_mem_120090,
                                  .size =0, .references =NULL};
    int64_t iter_122666;
    struct futhark_mc_segmap_parloop_struct_128535
    futhark_mc_segmap_parloop_struct_128535;
    
    futhark_mc_segmap_parloop_struct_128535.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128535.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128535.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128535.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128535.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128535.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128535.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128535.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128535.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128535.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128535.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128535.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128535.free_mem_120090 = mem_120090.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128536_task;
    
    futhark_mc_segmap_parloop_128536_task.name =
        "futhark_mc_segmap_parloop_128536";
    futhark_mc_segmap_parloop_128536_task.fn = futhark_mc_segmap_parloop_128536;
    futhark_mc_segmap_parloop_128536_task.args =
        &futhark_mc_segmap_parloop_struct_128535;
    futhark_mc_segmap_parloop_128536_task.iterations = iterations;
    futhark_mc_segmap_parloop_128536_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128536_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128536_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128536_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128536_task);
    
    if (futhark_mc_segmap_parloop_128536_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128536_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128536_total_end -
                 futhark_mc_segmap_parloop_128536_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128536_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128534_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128534_end -
                 futhark_mc_segmap_task_128534_start;
        
        ctx->futhark_mc_segmap_task_128534_runs[tid]++;
        ctx->futhark_mc_segmap_task_128534_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128534_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128539 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120090;
};
struct futhark_mc_task_128542 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115490;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120071;
};
struct futhark_mc_segmap_parloop_struct_128544 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115490;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120071;
};
static int futhark_mc_segmap_parloop_128545(void *args, int64_t start,
                                            int64_t end, int flat_tid_115491,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128544
    *futhark_mc_segmap_parloop_struct_128544 =
    (struct futhark_mc_segmap_parloop_struct_128544 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128544->ctx;
    uint64_t futhark_mc_segmap_parloop_128545_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128545_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128544->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128544->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128544->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128544->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128544->free_i_112880;
    int64_t gtid_115490 =
            futhark_mc_segmap_parloop_struct_128544->free_gtid_115490;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128544->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128544->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128544->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128544->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_segmap_parloop_struct_128544->free_mem_120071,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122838 = start;
    
    for (; iter_122838 < end; iter_122838++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122884 = l_n_m_112854;
        int64_t gtid_115492 = iter_122838;
        int64_t remnant_122885 = iter_122838 - gtid_115492;
        int64_t x_122782 = ((int64_t *) mem_119820.mem)[gtid_115490 *
                                                        l_n_m_112854 +
                                                        gtid_115492];
        float x_122783 = ((float *) mem_119824.mem)[gtid_115490 * l_n_m_112854 +
                                                    gtid_115492];
        int64_t min_arg_122784 = mul64(t_jump_112811, gtid_115492);
        int64_t min_res_122785 = smin64(i_112880, min_arg_122784);
        float defunc_0_f_res_122786 = sitofp_i64_f32(min_res_122785);
        float defunc_2_reduce_res_122787;
        float redout_122840 = 0.0F;
        
        for (int64_t i_122839 = 0; i_122839 < l_window_112808; i_122839++) {
            bool cond_122841 = sle64(n_112804, i_122839);
            float defunc_0_f_res_122842;
            
            if (cond_122841) {
                defunc_0_f_res_122842 = 0.0F;
            } else {
                int64_t i_122843 = add64(x_122782, i_122839);
                float index_primexp_122844 = sitofp_i64_f32(i_122843);
                float defunc_0_f_res_f_res_122845 = 1.0F + index_primexp_122844;
                
                defunc_0_f_res_122842 = defunc_0_f_res_f_res_122845;
            }
            
            float defunc_0_f_res_122846;
            
            if (cond_122841) {
                defunc_0_f_res_122846 = 0.0F;
            } else {
                int64_t i_122847 = add64(x_122782, i_122839);
                float x_122848 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115490 *
                                                        ctx_param_ext_119914 +
                                                        i_122847 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_122846 = x_122848;
            }
            
            float x_j_122849 = defunc_0_f_res_122842 - defunc_0_f_res_122786;
            float abs_res_122850 = (float) fabs(x_j_122849);
            float tmp1_122851 = abs_res_122850 / x_122783;
            float x_122852 = tmp1_122851 * tmp1_122851;
            float y_122853 = tmp1_122851 * x_122852;
            float tmp2_122854 = 1.0F - y_122853;
            float x_122855 = tmp2_122854 * tmp2_122854;
            float tmp3_122856 = tmp2_122854 * x_122855;
            float w_j_122857 = defunc_0_f_res_122846 * tmp3_122856;
            float defunc_1_op_res_122858 = w_j_122857 + redout_122840;
            float redout_tmp_122886 = defunc_1_op_res_122858;
            
            redout_122840 = redout_tmp_122886;
        }
        defunc_2_reduce_res_122787 = redout_122840;
        
        float a0_122808 = 1.0F / defunc_2_reduce_res_122787;
        float defunc_2_reduce_res_122809;
        float redout_122860 = 0.0F;
        
        for (int64_t i_122859 = 0; i_122859 < l_window_112808; i_122859++) {
            bool cond_122861 = sle64(n_112804, i_122859);
            float defunc_0_f_res_122862;
            
            if (cond_122861) {
                defunc_0_f_res_122862 = 0.0F;
            } else {
                int64_t i_122863 = add64(x_122782, i_122859);
                float index_primexp_122864 = sitofp_i64_f32(i_122863);
                float defunc_0_f_res_f_res_122865 = 1.0F + index_primexp_122864;
                
                defunc_0_f_res_122862 = defunc_0_f_res_f_res_122865;
            }
            
            float defunc_0_f_res_122866;
            
            if (cond_122861) {
                defunc_0_f_res_122866 = 0.0F;
            } else {
                int64_t i_122867 = add64(x_122782, i_122859);
                float x_122868 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115490 *
                                                        ctx_param_ext_119914 +
                                                        i_122867 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_122866 = x_122868;
            }
            
            float x_j_122869 = defunc_0_f_res_122862 - defunc_0_f_res_122786;
            float abs_res_122870 = (float) fabs(x_j_122869);
            float tmp1_122871 = abs_res_122870 / x_122783;
            float x_122872 = tmp1_122871 * tmp1_122871;
            float y_122873 = tmp1_122871 * x_122872;
            float tmp2_122874 = 1.0F - y_122873;
            float x_122875 = tmp2_122874 * tmp2_122874;
            float tmp3_122876 = tmp2_122874 * x_122875;
            float tmp4_122877 = defunc_0_f_res_122866 * tmp3_122876;
            float defunc_0_f_res_122878;
            
            if (cond_122861) {
                defunc_0_f_res_122878 = 0.0F;
            } else {
                int64_t i_122879 = add64(x_122782, i_122859);
                float x_122880 = ((float *) mem_120064.mem)[gtid_115490 *
                                                            n_112804 +
                                                            i_122879];
                
                defunc_0_f_res_122878 = x_122880;
            }
            
            float x_122881 = a0_122808 * tmp4_122877;
            float defunc_9_fit_fun_res_122882 = defunc_0_f_res_122878 *
                  x_122881;
            float defunc_1_op_res_122883 = defunc_9_fit_fun_res_122882 +
                  redout_122860;
            float redout_tmp_122887 = defunc_1_op_res_122883;
            
            redout_122860 = redout_tmp_122887;
        }
        defunc_2_reduce_res_122809 = redout_122860;
        ((float *) mem_120071.mem)[gtid_115492] = defunc_2_reduce_res_122809;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128545_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128545_end -
                 futhark_mc_segmap_parloop_128545_start;
        
        ctx->futhark_mc_segmap_parloop_128545_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128545_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128545_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128543(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115491 = tid;
    int num_tasks_122837 = info.nsubtasks;
    struct futhark_mc_task_128542 *futhark_mc_task_128542 =
                                  (struct futhark_mc_task_128542 *) args;
    struct futhark_context *ctx = futhark_mc_task_128542->ctx;
    uint64_t futhark_mc_segmap_task_128543_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128543_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128542->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128542->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128542->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128542->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128542->free_i_112880;
    int64_t gtid_115490 = futhark_mc_task_128542->free_gtid_115490;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128542->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128542->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128542->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128542->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128542->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128542->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128542->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_task_128542->free_mem_120071,
                                  .size =0, .references =NULL};
    int64_t iter_122838;
    struct futhark_mc_segmap_parloop_struct_128544
    futhark_mc_segmap_parloop_struct_128544;
    
    futhark_mc_segmap_parloop_struct_128544.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128544.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128544.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128544.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128544.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128544.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128544.free_gtid_115490 = gtid_115490;
    futhark_mc_segmap_parloop_struct_128544.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128544.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128544.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128544.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128544.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128544.free_mem_120071 = mem_120071.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128545_task;
    
    futhark_mc_segmap_parloop_128545_task.name =
        "futhark_mc_segmap_parloop_128545";
    futhark_mc_segmap_parloop_128545_task.fn = futhark_mc_segmap_parloop_128545;
    futhark_mc_segmap_parloop_128545_task.args =
        &futhark_mc_segmap_parloop_struct_128544;
    futhark_mc_segmap_parloop_128545_task.iterations = iterations;
    futhark_mc_segmap_parloop_128545_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128545_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128545_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128545_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128545_task);
    
    if (futhark_mc_segmap_parloop_128545_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128545_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128545_total_end -
                 futhark_mc_segmap_parloop_128545_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128545_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128543_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128543_end -
                 futhark_mc_segmap_task_128543_start;
        
        ctx->futhark_mc_segmap_task_128543_runs[tid]++;
        ctx->futhark_mc_segmap_task_128543_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128543_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128547 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115490;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120071;
};
struct futhark_mc_task_128549 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115490;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_122729;
    float free_x_122730;
    float free_defunc_0_f_res_122733;
    float *retval_defunc_2_reduce_res_122734;
};
struct futhark_mc_segred_stage_1_parloop_struct_128552 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115490;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_122729;
    float free_x_122730;
    float free_defunc_0_f_res_122733;
    char *free_reduce_stage_1_tid_res_arr_mem_122937;
};
static int futhark_mc_segred_stage_1_parloop_128553(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115495,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128552
    *futhark_mc_segred_stage_1_parloop_struct_128552 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128552 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128552->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128553_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128553_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_n_112804;
    int64_t gtid_115490 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_gtid_115490;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128552->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_122729 =
            futhark_mc_segred_stage_1_parloop_struct_128552->free_x_122729;
    float x_122730 =
          futhark_mc_segred_stage_1_parloop_struct_128552->free_x_122730;
    float defunc_0_f_res_122733 =
          futhark_mc_segred_stage_1_parloop_struct_128552->free_defunc_0_f_res_122733;
    struct memblock reduce_stage_1_tid_res_arr_mem_122937 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122937",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128552->free_reduce_stage_1_tid_res_arr_mem_122937,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122939 = start;
    float x_122889;
    float x_122890;
    float local_acc_122940 = 0.0F;
    
    for (; iter_122939 < end; iter_122939++) {
        int64_t gtid_115496 = iter_122939;
        bool cond_122892 = sle64(n_112804, gtid_115496);
        float defunc_0_f_res_122893;
        
        if (cond_122892) {
            defunc_0_f_res_122893 = 0.0F;
        } else {
            int64_t i_122894 = add64(gtid_115496, x_122729);
            float index_primexp_122895 = sitofp_i64_f32(i_122894);
            float defunc_0_f_res_f_res_122896 = 1.0F + index_primexp_122895;
            
            defunc_0_f_res_122893 = defunc_0_f_res_f_res_122896;
        }
        
        float defunc_0_f_res_122897;
        
        if (cond_122892) {
            defunc_0_f_res_122897 = 0.0F;
        } else {
            int64_t i_122898 = add64(gtid_115496, x_122729);
            float x_122899 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115490 *
                                                    ctx_param_ext_119914 +
                                                    i_122898 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_122897 = x_122899;
        }
        
        float x_j_122900 = defunc_0_f_res_122893 - defunc_0_f_res_122733;
        float abs_res_122901 = (float) fabs(x_j_122900);
        float tmp1_122902 = abs_res_122901 / x_122730;
        float x_122903 = tmp1_122902 * tmp1_122902;
        float y_122904 = tmp1_122902 * x_122903;
        float tmp2_122905 = 1.0F - y_122904;
        float x_122906 = tmp2_122905 * tmp2_122905;
        float tmp3_122907 = tmp2_122905 * x_122906;
        float w_j_122908 = defunc_0_f_res_122897 * tmp3_122907;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122889 = local_acc_122940;
        }
        // Load next params
        {
            x_122890 = w_j_122908;
        }
        // Red body
        {
            float defunc_1_op_res_122891 = x_122889 + x_122890;
            
            local_acc_122940 = defunc_1_op_res_122891;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122937.mem)[flat_tid_115495] =
        local_acc_122940;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128553_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128553_end -
                 futhark_mc_segred_stage_1_parloop_128553_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128553_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128553_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128553_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128550(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115495 = tid;
    int num_tasks_122936 = info.nsubtasks;
    struct futhark_mc_task_128549 *futhark_mc_task_128549 =
                                  (struct futhark_mc_task_128549 *) args;
    struct futhark_context *ctx = futhark_mc_task_128549->ctx;
    uint64_t futhark_mc_segred_task_128550_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128550_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128549->free_n_112804;
    int64_t gtid_115490 = futhark_mc_task_128549->free_gtid_115490;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128549->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128549->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128549->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128549->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_122729 = futhark_mc_task_128549->free_x_122729;
    float x_122730 = futhark_mc_task_128549->free_x_122730;
    float defunc_0_f_res_122733 =
          futhark_mc_task_128549->free_defunc_0_f_res_122733;
    float defunc_2_reduce_res_122734 =
          *futhark_mc_task_128549->retval_defunc_2_reduce_res_122734;
    size_t reduce_stage_1_tid_res_arr_mem_122937_cached_sizze_128551 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122937 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122937_cached_sizze_128551 <
        (size_t) ((int64_t) 4 * num_tasks_122936)) {
        reduce_stage_1_tid_res_arr_mem_122937 =
            realloc(reduce_stage_1_tid_res_arr_mem_122937, (int64_t) 4 *
                    num_tasks_122936);
        reduce_stage_1_tid_res_arr_mem_122937_cached_sizze_128551 =
            (int64_t) 4 * num_tasks_122936;
    }
    
    int64_t iter_122939;
    struct futhark_mc_segred_stage_1_parloop_struct_128552
    futhark_mc_segred_stage_1_parloop_struct_128552;
    
    futhark_mc_segred_stage_1_parloop_struct_128552.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_gtid_115490 =
        gtid_115490;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_x_122729 = x_122729;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_x_122730 = x_122730;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_defunc_0_f_res_122733 =
        defunc_0_f_res_122733;
    futhark_mc_segred_stage_1_parloop_struct_128552.free_reduce_stage_1_tid_res_arr_mem_122937 =
        reduce_stage_1_tid_res_arr_mem_122937;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128553_task;
    
    futhark_mc_segred_stage_1_parloop_128553_task.name =
        "futhark_mc_segred_stage_1_parloop_128553";
    futhark_mc_segred_stage_1_parloop_128553_task.fn =
        futhark_mc_segred_stage_1_parloop_128553;
    futhark_mc_segred_stage_1_parloop_128553_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128552;
    futhark_mc_segred_stage_1_parloop_128553_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128553_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128553_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128553_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128553_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128553_task);
    
    if (futhark_mc_segred_stage_1_parloop_128553_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128553_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128553_total_end -
                 futhark_mc_segred_stage_1_parloop_128553_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128553_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128553_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128553_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122734 = 0.0F;
    }
    
    float x_122941;
    float x_122942;
    
    for (int32_t i_122944 = 0; i_122944 < num_tasks_122936; i_122944++) {
        flat_tid_115495 = i_122944;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122941 = defunc_2_reduce_res_122734;
            }
            // load next params
            {
                x_122942 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122937)[flat_tid_115495];
            }
            // red body
            {
                float defunc_1_op_res_122943 = x_122941 + x_122942;
                
                defunc_2_reduce_res_122734 = defunc_1_op_res_122943;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122937);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128550_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128550_end -
                 futhark_mc_segred_task_128550_start;
        
        ctx->futhark_mc_segred_task_128550_runs[tid]++;
        ctx->futhark_mc_segred_task_128550_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128550_iter[tid] += iterations;
    }
    *futhark_mc_task_128549->retval_defunc_2_reduce_res_122734 =
        defunc_2_reduce_res_122734;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128554 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115490;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_122729;
    float free_x_122730;
    float free_defunc_0_f_res_122733;
    float free_a0_122755;
    float *retval_defunc_2_reduce_res_122756;
};
struct futhark_mc_segred_stage_1_parloop_struct_128557 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115490;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_122729;
    float free_x_122730;
    float free_defunc_0_f_res_122733;
    float free_a0_122755;
    char *free_reduce_stage_1_tid_res_arr_mem_122946;
};
static int futhark_mc_segred_stage_1_parloop_128558(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115497,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128557
    *futhark_mc_segred_stage_1_parloop_struct_128557 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128557 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128557->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128558_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128558_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_n_112804;
    int64_t gtid_115490 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_gtid_115490;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128557->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128557->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_122729 =
            futhark_mc_segred_stage_1_parloop_struct_128557->free_x_122729;
    float x_122730 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_x_122730;
    float defunc_0_f_res_122733 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_defunc_0_f_res_122733;
    float a0_122755 =
          futhark_mc_segred_stage_1_parloop_struct_128557->free_a0_122755;
    struct memblock reduce_stage_1_tid_res_arr_mem_122946 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_122946",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128557->free_reduce_stage_1_tid_res_arr_mem_122946,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122948 = start;
    float x_122909;
    float x_122910;
    float local_acc_122949 = 0.0F;
    
    for (; iter_122948 < end; iter_122948++) {
        int64_t gtid_115498 = iter_122948;
        bool cond_122912 = sle64(n_112804, gtid_115498);
        float defunc_0_f_res_122913;
        
        if (cond_122912) {
            defunc_0_f_res_122913 = 0.0F;
        } else {
            int64_t i_122914 = add64(gtid_115498, x_122729);
            float index_primexp_122915 = sitofp_i64_f32(i_122914);
            float defunc_0_f_res_f_res_122916 = 1.0F + index_primexp_122915;
            
            defunc_0_f_res_122913 = defunc_0_f_res_f_res_122916;
        }
        
        float defunc_0_f_res_122917;
        
        if (cond_122912) {
            defunc_0_f_res_122917 = 0.0F;
        } else {
            int64_t i_122918 = add64(gtid_115498, x_122729);
            float x_122919 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115490 *
                                                    ctx_param_ext_119914 +
                                                    i_122918 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_122917 = x_122919;
        }
        
        float x_j_122920 = defunc_0_f_res_122913 - defunc_0_f_res_122733;
        float abs_res_122921 = (float) fabs(x_j_122920);
        float tmp1_122922 = abs_res_122921 / x_122730;
        float x_122923 = tmp1_122922 * tmp1_122922;
        float y_122924 = tmp1_122922 * x_122923;
        float tmp2_122925 = 1.0F - y_122924;
        float x_122926 = tmp2_122925 * tmp2_122925;
        float tmp3_122927 = tmp2_122925 * x_122926;
        float tmp4_122928 = defunc_0_f_res_122917 * tmp3_122927;
        float defunc_0_f_res_122929;
        
        if (cond_122912) {
            defunc_0_f_res_122929 = 0.0F;
        } else {
            int64_t i_122930 = add64(gtid_115498, x_122729);
            float x_122931 = ((float *) mem_120064.mem)[gtid_115490 * n_112804 +
                                                        i_122930];
            
            defunc_0_f_res_122929 = x_122931;
        }
        
        float x_122932 = a0_122755 * tmp4_122928;
        float defunc_9_fit_fun_res_122933 = defunc_0_f_res_122929 * x_122932;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_122909 = local_acc_122949;
        }
        // Load next params
        {
            x_122910 = defunc_9_fit_fun_res_122933;
        }
        // Red body
        {
            float defunc_1_op_res_122911 = x_122909 + x_122910;
            
            local_acc_122949 = defunc_1_op_res_122911;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_122946.mem)[flat_tid_115497] =
        local_acc_122949;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128558_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128558_end -
                 futhark_mc_segred_stage_1_parloop_128558_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128558_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128558_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128558_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128555(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115497 = tid;
    int num_tasks_122945 = info.nsubtasks;
    struct futhark_mc_task_128554 *futhark_mc_task_128554 =
                                  (struct futhark_mc_task_128554 *) args;
    struct futhark_context *ctx = futhark_mc_task_128554->ctx;
    uint64_t futhark_mc_segred_task_128555_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128555_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128554->free_n_112804;
    int64_t gtid_115490 = futhark_mc_task_128554->free_gtid_115490;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128554->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128554->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128554->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128554->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128554->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_122729 = futhark_mc_task_128554->free_x_122729;
    float x_122730 = futhark_mc_task_128554->free_x_122730;
    float defunc_0_f_res_122733 =
          futhark_mc_task_128554->free_defunc_0_f_res_122733;
    float a0_122755 = futhark_mc_task_128554->free_a0_122755;
    float defunc_2_reduce_res_122756 =
          *futhark_mc_task_128554->retval_defunc_2_reduce_res_122756;
    size_t reduce_stage_1_tid_res_arr_mem_122946_cached_sizze_128556 = 0;
    char *reduce_stage_1_tid_res_arr_mem_122946 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_122946_cached_sizze_128556 <
        (size_t) ((int64_t) 4 * num_tasks_122945)) {
        reduce_stage_1_tid_res_arr_mem_122946 =
            realloc(reduce_stage_1_tid_res_arr_mem_122946, (int64_t) 4 *
                    num_tasks_122945);
        reduce_stage_1_tid_res_arr_mem_122946_cached_sizze_128556 =
            (int64_t) 4 * num_tasks_122945;
    }
    
    int64_t iter_122948;
    struct futhark_mc_segred_stage_1_parloop_struct_128557
    futhark_mc_segred_stage_1_parloop_struct_128557;
    
    futhark_mc_segred_stage_1_parloop_struct_128557.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_gtid_115490 =
        gtid_115490;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_x_122729 = x_122729;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_x_122730 = x_122730;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_defunc_0_f_res_122733 =
        defunc_0_f_res_122733;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_a0_122755 = a0_122755;
    futhark_mc_segred_stage_1_parloop_struct_128557.free_reduce_stage_1_tid_res_arr_mem_122946 =
        reduce_stage_1_tid_res_arr_mem_122946;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128558_task;
    
    futhark_mc_segred_stage_1_parloop_128558_task.name =
        "futhark_mc_segred_stage_1_parloop_128558";
    futhark_mc_segred_stage_1_parloop_128558_task.fn =
        futhark_mc_segred_stage_1_parloop_128558;
    futhark_mc_segred_stage_1_parloop_128558_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128557;
    futhark_mc_segred_stage_1_parloop_128558_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128558_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128558_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128558_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128558_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128558_task);
    
    if (futhark_mc_segred_stage_1_parloop_128558_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128558_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128558_total_end -
                 futhark_mc_segred_stage_1_parloop_128558_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128558_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_122756 = 0.0F;
    }
    
    float x_122950;
    float x_122951;
    
    for (int32_t i_122953 = 0; i_122953 < num_tasks_122945; i_122953++) {
        flat_tid_115497 = i_122953;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_122950 = defunc_2_reduce_res_122756;
            }
            // load next params
            {
                x_122951 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_122946)[flat_tid_115497];
            }
            // red body
            {
                float defunc_1_op_res_122952 = x_122950 + x_122951;
                
                defunc_2_reduce_res_122756 = defunc_1_op_res_122952;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_122946);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128555_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128555_end -
                 futhark_mc_segred_task_128555_start;
        
        ctx->futhark_mc_segred_task_128555_runs[tid]++;
        ctx->futhark_mc_segred_task_128555_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128555_iter[tid] += iterations;
    }
    *futhark_mc_task_128554->retval_defunc_2_reduce_res_122756 =
        defunc_2_reduce_res_122756;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128548(void *args, int64_t start,
                                            int64_t end, int flat_tid_115493,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128547
    *futhark_mc_segmap_parloop_struct_128547 =
    (struct futhark_mc_segmap_parloop_struct_128547 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128547->ctx;
    uint64_t futhark_mc_segmap_parloop_128548_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128548_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128547->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128547->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128547->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128547->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128547->free_i_112880;
    int64_t gtid_115490 =
            futhark_mc_segmap_parloop_struct_128547->free_gtid_115490;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128547->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128547->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128547->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128547->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128547->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128547->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128547->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_segmap_parloop_struct_128547->free_mem_120071,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_122888 = start;
    
    for (; iter_122888 < end; iter_122888++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122934 = l_n_m_112854;
        int64_t gtid_115494 = iter_122888;
        int64_t remnant_122935 = iter_122888 - gtid_115494;
        int64_t x_122729 = ((int64_t *) mem_119820.mem)[gtid_115490 *
                                                        l_n_m_112854 +
                                                        gtid_115494];
        float x_122730 = ((float *) mem_119824.mem)[gtid_115490 * l_n_m_112854 +
                                                    gtid_115494];
        int64_t min_arg_122731 = mul64(t_jump_112811, gtid_115494);
        int64_t min_res_122732 = smin64(i_112880, min_arg_122731);
        float defunc_0_f_res_122733 = sitofp_i64_f32(min_res_122732);
        float defunc_2_reduce_res_122734;
        int64_t flat_tid_115495 = (int64_t) 0;
        int32_t num_tasks_122936;
        struct futhark_mc_task_128549 futhark_mc_task_128549;
        
        futhark_mc_task_128549.ctx = ctx;
        futhark_mc_task_128549.free_n_112804 = n_112804;
        futhark_mc_task_128549.free_gtid_115490 = gtid_115490;
        futhark_mc_task_128549.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128549.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128549.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128549.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128549.free_x_122729 = x_122729;
        futhark_mc_task_128549.free_x_122730 = x_122730;
        futhark_mc_task_128549.free_defunc_0_f_res_122733 =
            defunc_0_f_res_122733;
        futhark_mc_task_128549.retval_defunc_2_reduce_res_122734 =
            &defunc_2_reduce_res_122734;
        
        struct scheduler_segop futhark_mc_task_128549_task;
        
        futhark_mc_task_128549_task.args = &futhark_mc_task_128549;
        futhark_mc_task_128549_task.top_level_fn =
            futhark_mc_segred_task_128550;
        futhark_mc_task_128549_task.name = "futhark_mc_segred_task_128550";
        futhark_mc_task_128549_task.iterations = l_window_112808;
        futhark_mc_task_128549_task.task_time =
            &ctx->futhark_mc_segred_task_128550_total_time;
        futhark_mc_task_128549_task.task_iter =
            &ctx->futhark_mc_segred_task_128550_total_iter;
        futhark_mc_task_128549_task.sched = STATIC;
        futhark_mc_task_128549_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128550_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128549_task);
        
        if (futhark_mc_segred_task_128550_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_122755 = 1.0F / defunc_2_reduce_res_122734;
        float defunc_2_reduce_res_122756;
        int64_t flat_tid_115497 = (int64_t) 0;
        int32_t num_tasks_122945;
        struct futhark_mc_task_128554 futhark_mc_task_128554;
        
        futhark_mc_task_128554.ctx = ctx;
        futhark_mc_task_128554.free_n_112804 = n_112804;
        futhark_mc_task_128554.free_gtid_115490 = gtid_115490;
        futhark_mc_task_128554.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128554.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128554.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128554.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128554.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128554.free_x_122729 = x_122729;
        futhark_mc_task_128554.free_x_122730 = x_122730;
        futhark_mc_task_128554.free_defunc_0_f_res_122733 =
            defunc_0_f_res_122733;
        futhark_mc_task_128554.free_a0_122755 = a0_122755;
        futhark_mc_task_128554.retval_defunc_2_reduce_res_122756 =
            &defunc_2_reduce_res_122756;
        
        struct scheduler_segop futhark_mc_task_128554_task;
        
        futhark_mc_task_128554_task.args = &futhark_mc_task_128554;
        futhark_mc_task_128554_task.top_level_fn =
            futhark_mc_segred_task_128555;
        futhark_mc_task_128554_task.name = "futhark_mc_segred_task_128555";
        futhark_mc_task_128554_task.iterations = l_window_112808;
        futhark_mc_task_128554_task.task_time =
            &ctx->futhark_mc_segred_task_128555_total_time;
        futhark_mc_task_128554_task.task_iter =
            &ctx->futhark_mc_segred_task_128555_total_iter;
        futhark_mc_task_128554_task.sched = STATIC;
        futhark_mc_task_128554_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128555_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128554_task);
        
        if (futhark_mc_segred_task_128555_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120071.mem)[gtid_115494] = defunc_2_reduce_res_122756;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128548_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128548_end -
                 futhark_mc_segmap_parloop_128548_start;
        
        ctx->futhark_mc_segmap_parloop_128548_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128548_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128548_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128546(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115493 = tid;
    int num_tasks_122837 = info.nsubtasks;
    struct futhark_mc_task_128542 *futhark_mc_task_128542 =
                                  (struct futhark_mc_task_128542 *) args;
    struct futhark_context *ctx = futhark_mc_task_128542->ctx;
    uint64_t futhark_mc_segmap_nested_task_128546_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128546_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128542->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128542->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128542->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128542->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128542->free_i_112880;
    int64_t gtid_115490 = futhark_mc_task_128542->free_gtid_115490;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128542->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128542->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128542->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128542->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128542->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128542->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128542->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120071 = {.desc ="mem_120071", .mem =
                                  futhark_mc_task_128542->free_mem_120071,
                                  .size =0, .references =NULL};
    int64_t iter_122888;
    struct futhark_mc_segmap_parloop_struct_128547
    futhark_mc_segmap_parloop_struct_128547;
    
    futhark_mc_segmap_parloop_struct_128547.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128547.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128547.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128547.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128547.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128547.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128547.free_gtid_115490 = gtid_115490;
    futhark_mc_segmap_parloop_struct_128547.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128547.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128547.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128547.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128547.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128547.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128547.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128547.free_mem_120071 = mem_120071.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128548_task;
    
    futhark_mc_segmap_parloop_128548_task.name =
        "futhark_mc_segmap_parloop_128548";
    futhark_mc_segmap_parloop_128548_task.fn = futhark_mc_segmap_parloop_128548;
    futhark_mc_segmap_parloop_128548_task.args =
        &futhark_mc_segmap_parloop_struct_128547;
    futhark_mc_segmap_parloop_128548_task.iterations = iterations;
    futhark_mc_segmap_parloop_128548_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128548_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128548_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128548_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128548_task);
    
    if (futhark_mc_segmap_parloop_128548_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128548_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128548_total_end -
                 futhark_mc_segmap_parloop_128548_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128548_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128548_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128548_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128546_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128546_end -
                 futhark_mc_segmap_nested_task_128546_start;
        
        ctx->futhark_mc_segmap_nested_task_128546_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128546_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128546_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128540(void *args, int64_t start,
                                            int64_t end, int flat_tid_115489,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128539
    *futhark_mc_segmap_parloop_struct_128539 =
    (struct futhark_mc_segmap_parloop_struct_128539 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128539->ctx;
    uint64_t futhark_mc_segmap_parloop_128540_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128540_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128539->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128539->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128539->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128539->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128539->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128539->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128539->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128539->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128539->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128539->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128539->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128539->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128539->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128539->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120090 = {.desc ="mem_120090", .mem =
                                  futhark_mc_segmap_parloop_struct_128539->free_mem_120090,
                                  .size =0, .references =NULL};
    size_t mem_120071_cached_sizze_128541 = 0;
    char *mem_120071 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122728 = start;
    
    if (mem_120071_cached_sizze_128541 < (size_t) bytes_119766) {
        mem_120071 = realloc(mem_120071, bytes_119766);
        mem_120071_cached_sizze_128541 = bytes_119766;
    }
    for (; iter_122728 < end; iter_122728++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_122835 = m_112803;
        int64_t gtid_115490 = iter_122728;
        int64_t remnant_122836 = iter_122728 - gtid_115490;
        int64_t flat_tid_115491 = (int64_t) 0;
        int32_t num_tasks_122837;
        int64_t flat_tid_115493 = (int64_t) 0;
        struct futhark_mc_task_128542 futhark_mc_task_128542;
        
        futhark_mc_task_128542.ctx = ctx;
        futhark_mc_task_128542.free_n_112804 = n_112804;
        futhark_mc_task_128542.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128542.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128542.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128542.free_i_112880 = i_112880;
        futhark_mc_task_128542.free_gtid_115490 = gtid_115490;
        futhark_mc_task_128542.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128542.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128542.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128542.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128542.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128542.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128542.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128542.free_mem_120071 = mem_120071;
        
        struct scheduler_segop futhark_mc_task_128542_task;
        
        futhark_mc_task_128542_task.args = &futhark_mc_task_128542;
        futhark_mc_task_128542_task.top_level_fn =
            futhark_mc_segmap_task_128543;
        futhark_mc_task_128542_task.name = "futhark_mc_segmap_task_128543";
        futhark_mc_task_128542_task.iterations = l_n_m_112854;
        futhark_mc_task_128542_task.task_time =
            &ctx->futhark_mc_segmap_task_128543_total_time;
        futhark_mc_task_128542_task.task_iter =
            &ctx->futhark_mc_segmap_task_128543_total_iter;
        futhark_mc_task_128542_task.sched = STATIC;
        futhark_mc_task_128542_task.nested_fn =
            futhark_mc_segmap_nested_task_128546;
        
        int futhark_mc_segmap_task_128543_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128542_task);
        
        if (futhark_mc_segmap_task_128543_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120090.mem + gtid_115490 * l_n_m_112854 * (int64_t) 4,
                mem_120071 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120071);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128540_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128540_end -
                 futhark_mc_segmap_parloop_128540_start;
        
        ctx->futhark_mc_segmap_parloop_128540_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128540_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128540_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128538(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115489 = tid;
    int num_tasks_122665 = info.nsubtasks;
    struct futhark_mc_task_128533 *futhark_mc_task_128533 =
                                  (struct futhark_mc_task_128533 *) args;
    struct futhark_context *ctx = futhark_mc_task_128533->ctx;
    uint64_t futhark_mc_segmap_nested_task_128538_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128538_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128533->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128533->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128533->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128533->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128533->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128533->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128533->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128533->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128533->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128533->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128533->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128533->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128533->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128533->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120090 = {.desc ="mem_120090", .mem =
                                  futhark_mc_task_128533->free_mem_120090,
                                  .size =0, .references =NULL};
    int64_t iter_122728;
    struct futhark_mc_segmap_parloop_struct_128539
    futhark_mc_segmap_parloop_struct_128539;
    
    futhark_mc_segmap_parloop_struct_128539.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128539.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128539.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128539.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128539.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128539.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128539.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128539.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128539.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128539.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128539.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128539.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128539.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128539.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128539.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128539.free_mem_120090 = mem_120090.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128540_task;
    
    futhark_mc_segmap_parloop_128540_task.name =
        "futhark_mc_segmap_parloop_128540";
    futhark_mc_segmap_parloop_128540_task.fn = futhark_mc_segmap_parloop_128540;
    futhark_mc_segmap_parloop_128540_task.args =
        &futhark_mc_segmap_parloop_struct_128539;
    futhark_mc_segmap_parloop_128540_task.iterations = iterations;
    futhark_mc_segmap_parloop_128540_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128540_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128540_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128540_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128540_task);
    
    if (futhark_mc_segmap_parloop_128540_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128540_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128540_total_end -
                 futhark_mc_segmap_parloop_128540_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128540_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128540_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128540_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128538_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128538_end -
                 futhark_mc_segmap_nested_task_128538_start;
        
        ctx->futhark_mc_segmap_nested_task_128538_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128538_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128538_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128559 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120130;
    char *free_mem_120134;
};
struct futhark_mc_segmap_parloop_struct_128561 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120130;
    char *free_mem_120134;
};
static int futhark_mc_segmap_parloop_128562(void *args, int64_t start,
                                            int64_t end, int flat_tid_115672,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128561
    *futhark_mc_segmap_parloop_struct_128561 =
    (struct futhark_mc_segmap_parloop_struct_128561 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128561->ctx;
    uint64_t futhark_mc_segmap_parloop_128562_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128562_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128561->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128561->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128561->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128561->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128561->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128561->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128561->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128561->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128561->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128561->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128561->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120130 = {.desc ="mem_120130", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120130,
                                  .size =0, .references =NULL};
    struct memblock mem_120134 = {.desc ="mem_120134", .mem =
                                  futhark_mc_segmap_parloop_struct_128561->free_mem_120134,
                                  .size =0, .references =NULL};
    size_t mem_120099_cached_sizze_128563 = 0;
    char *mem_120099 = NULL;
    size_t mem_120102_cached_sizze_128564 = 0;
    char *mem_120102 = NULL;
    int64_t iterations = end - start;
    int64_t iter_122955 = start;
    
    if (mem_120099_cached_sizze_128563 < (size_t) bytes_119766) {
        mem_120099 = realloc(mem_120099, bytes_119766);
        mem_120099_cached_sizze_128563 = bytes_119766;
    }
    if (mem_120102_cached_sizze_128564 < (size_t) bytes_119766) {
        mem_120102 = realloc(mem_120102, bytes_119766);
        mem_120102_cached_sizze_128564 = bytes_119766;
    }
    for (; iter_122955 < end; iter_122955++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123039 = m_112803;
        int64_t gtid_115673 = iter_122955;
        int64_t remnant_123040 = iter_122955 - gtid_115673;
        
        for (int64_t i_122956 = 0; i_122956 < l_n_m_112854; i_122956++) {
            int64_t x_122959 = ((int64_t *) mem_119820.mem)[gtid_115673 *
                                                            l_n_m_112854 +
                                                            i_122956];
            float x_122960 = ((float *) mem_119824.mem)[gtid_115673 *
                                                        l_n_m_112854 +
                                                        i_122956];
            int64_t min_arg_122961 = mul64(t_jump_112811, i_122956);
            int64_t min_res_122962 = smin64(i_112880, min_arg_122961);
            float defunc_0_f_res_122963 = sitofp_i64_f32(min_res_122962);
            float defunc_2_reduce_res_122964;
            float defunc_2_reduce_res_122965;
            float defunc_2_reduce_res_122966;
            float redout_122968;
            float redout_122969;
            float redout_122970;
            
            redout_122968 = 0.0F;
            redout_122969 = 0.0F;
            redout_122970 = 0.0F;
            for (int64_t i_122967 = 0; i_122967 < l_window_112808; i_122967++) {
                bool cond_122971 = sle64(n_112804, i_122967);
                float defunc_0_f_res_122972;
                
                if (cond_122971) {
                    defunc_0_f_res_122972 = 0.0F;
                } else {
                    int64_t i_122973 = add64(x_122959, i_122967);
                    float index_primexp_122974 = sitofp_i64_f32(i_122973);
                    float defunc_0_f_res_f_res_122975 = 1.0F +
                          index_primexp_122974;
                    
                    defunc_0_f_res_122972 = defunc_0_f_res_f_res_122975;
                }
                
                float defunc_0_f_res_122976;
                
                if (cond_122971) {
                    defunc_0_f_res_122976 = 0.0F;
                } else {
                    int64_t i_122977 = add64(x_122959, i_122967);
                    float x_122978 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115673 *
                                                            ctx_param_ext_119914 +
                                                            i_122977 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_122976 = x_122978;
                }
                
                float x_j_122979 = defunc_0_f_res_122972 -
                      defunc_0_f_res_122963;
                float abs_res_122980 = (float) fabs(x_j_122979);
                float tmp1_122981 = abs_res_122980 / x_122960;
                float x_122982 = tmp1_122981 * tmp1_122981;
                float y_122983 = tmp1_122981 * x_122982;
                float tmp2_122984 = 1.0F - y_122983;
                float x_122985 = tmp2_122984 * tmp2_122984;
                float tmp3_122986 = tmp2_122984 * x_122985;
                float w_j_122987 = defunc_0_f_res_122976 * tmp3_122986;
                float xw_j_122988 = x_j_122979 * w_j_122987;
                float x2w_j_122989 = x_j_122979 * xw_j_122988;
                float defunc_1_op_res_122990 = w_j_122987 + redout_122968;
                float defunc_1_op_res_122991 = xw_j_122988 + redout_122969;
                float defunc_1_op_res_122992 = x2w_j_122989 + redout_122970;
                float redout_tmp_123043 = defunc_1_op_res_122990;
                float redout_tmp_123044 = defunc_1_op_res_122991;
                float redout_tmp_123045 = defunc_1_op_res_122992;
                
                redout_122968 = redout_tmp_123043;
                redout_122969 = redout_tmp_123044;
                redout_122970 = redout_tmp_123045;
            }
            defunc_2_reduce_res_122964 = redout_122968;
            defunc_2_reduce_res_122965 = redout_122969;
            defunc_2_reduce_res_122966 = redout_122970;
            
            float x_122993 = defunc_2_reduce_res_122964 *
                  defunc_2_reduce_res_122966;
            float y_122994 = defunc_2_reduce_res_122965 *
                  defunc_2_reduce_res_122965;
            float y_122995 = x_122993 - y_122994;
            float det1_122996 = 1.0F / y_122995;
            float a11_122997 = defunc_2_reduce_res_122966 * det1_122996;
            float negate_arg_122998 = defunc_2_reduce_res_122965 * det1_122996;
            float b11_122999 = 0.0F - negate_arg_122998;
            float c11_123000 = defunc_2_reduce_res_122964 * det1_122996;
            float defunc_2_reduce_res_123001;
            float defunc_2_reduce_res_123002;
            float redout_123004;
            float redout_123005;
            
            redout_123004 = 0.0F;
            redout_123005 = 0.0F;
            for (int64_t i_123003 = 0; i_123003 < l_window_112808; i_123003++) {
                bool cond_123006 = sle64(n_112804, i_123003);
                float defunc_0_f_res_123007;
                
                if (cond_123006) {
                    defunc_0_f_res_123007 = 0.0F;
                } else {
                    int64_t i_123008 = add64(x_122959, i_123003);
                    float index_primexp_123009 = sitofp_i64_f32(i_123008);
                    float defunc_0_f_res_f_res_123010 = 1.0F +
                          index_primexp_123009;
                    
                    defunc_0_f_res_123007 = defunc_0_f_res_f_res_123010;
                }
                
                float defunc_0_f_res_123011;
                
                if (cond_123006) {
                    defunc_0_f_res_123011 = 0.0F;
                } else {
                    int64_t i_123012 = add64(x_122959, i_123003);
                    float x_123013 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115673 *
                                                            ctx_param_ext_119914 +
                                                            i_123012 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_123011 = x_123013;
                }
                
                float x_j_123014 = defunc_0_f_res_123007 -
                      defunc_0_f_res_122963;
                float abs_res_123015 = (float) fabs(x_j_123014);
                float tmp1_123016 = abs_res_123015 / x_122960;
                float x_123017 = tmp1_123016 * tmp1_123016;
                float y_123018 = tmp1_123016 * x_123017;
                float tmp2_123019 = 1.0F - y_123018;
                float x_123020 = tmp2_123019 * tmp2_123019;
                float tmp3_123021 = tmp2_123019 * x_123020;
                float tmp4_123022 = defunc_0_f_res_123011 * tmp3_123021;
                float defunc_1_f_res_123023 = x_j_123014 * tmp4_123022;
                float defunc_0_f_res_123024;
                
                if (cond_123006) {
                    defunc_0_f_res_123024 = 0.0F;
                } else {
                    int64_t i_123025 = add64(x_122959, i_123003);
                    float x_123026 = ((float *) mem_120064.mem)[gtid_115673 *
                                                                n_112804 +
                                                                i_123025];
                    
                    defunc_0_f_res_123024 = x_123026;
                }
                
                float x_123027 = a11_122997 * tmp4_123022;
                float y_123028 = b11_122999 * defunc_1_f_res_123023;
                float x_123029 = x_123027 + y_123028;
                float defunc_9_fit_fun_res_123030 = defunc_0_f_res_123024 *
                      x_123029;
                float x_123031 = b11_122999 * tmp4_123022;
                float y_123032 = c11_123000 * defunc_1_f_res_123023;
                float x_123033 = x_123031 + y_123032;
                float defunc_9_slope_fun_res_123034 = defunc_0_f_res_123024 *
                      x_123033;
                float defunc_1_op_res_123035 = defunc_9_fit_fun_res_123030 +
                      redout_123004;
                float defunc_1_op_res_123036 = defunc_9_slope_fun_res_123034 +
                      redout_123005;
                float redout_tmp_123046 = defunc_1_op_res_123035;
                float redout_tmp_123047 = defunc_1_op_res_123036;
                
                redout_123004 = redout_tmp_123046;
                redout_123005 = redout_tmp_123047;
            }
            defunc_2_reduce_res_123001 = redout_123004;
            defunc_2_reduce_res_123002 = redout_123005;
            ((float *) mem_120099)[i_122956] = defunc_2_reduce_res_123001;
            ((float *) mem_120102)[i_122956] = defunc_2_reduce_res_123002;
        }
        memmove(mem_120130.mem + gtid_115673 * l_n_m_112854 * (int64_t) 4,
                mem_120099 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120134.mem + gtid_115673 * l_n_m_112854 * (int64_t) 4,
                mem_120102 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120099);
    free(mem_120102);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128562_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128562_end -
                 futhark_mc_segmap_parloop_128562_start;
        
        ctx->futhark_mc_segmap_parloop_128562_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128562_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128562_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128560(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115672 = tid;
    int num_tasks_122954 = info.nsubtasks;
    struct futhark_mc_task_128559 *futhark_mc_task_128559 =
                                  (struct futhark_mc_task_128559 *) args;
    struct futhark_context *ctx = futhark_mc_task_128559->ctx;
    uint64_t futhark_mc_segmap_task_128560_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128560_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128559->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128559->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128559->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128559->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128559->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128559->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128559->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128559->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128559->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128559->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128559->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128559->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128559->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128559->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120130 = {.desc ="mem_120130", .mem =
                                  futhark_mc_task_128559->free_mem_120130,
                                  .size =0, .references =NULL};
    struct memblock mem_120134 = {.desc ="mem_120134", .mem =
                                  futhark_mc_task_128559->free_mem_120134,
                                  .size =0, .references =NULL};
    int64_t iter_122955;
    struct futhark_mc_segmap_parloop_struct_128561
    futhark_mc_segmap_parloop_struct_128561;
    
    futhark_mc_segmap_parloop_struct_128561.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128561.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128561.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128561.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128561.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128561.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128561.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128561.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128561.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128561.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128561.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128561.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120130 = mem_120130.mem;
    futhark_mc_segmap_parloop_struct_128561.free_mem_120134 = mem_120134.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128562_task;
    
    futhark_mc_segmap_parloop_128562_task.name =
        "futhark_mc_segmap_parloop_128562";
    futhark_mc_segmap_parloop_128562_task.fn = futhark_mc_segmap_parloop_128562;
    futhark_mc_segmap_parloop_128562_task.args =
        &futhark_mc_segmap_parloop_struct_128561;
    futhark_mc_segmap_parloop_128562_task.iterations = iterations;
    futhark_mc_segmap_parloop_128562_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128562_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128562_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128562_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128562_task);
    
    if (futhark_mc_segmap_parloop_128562_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128562_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128562_total_end -
                 futhark_mc_segmap_parloop_128562_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128562_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128560_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128560_end -
                 futhark_mc_segmap_task_128560_start;
        
        ctx->futhark_mc_segmap_task_128560_runs[tid]++;
        ctx->futhark_mc_segmap_task_128560_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128560_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128566 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120130;
    char *free_mem_120134;
};
struct futhark_mc_task_128570 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115675;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120093;
    char *free_mem_120096;
};
struct futhark_mc_segmap_parloop_struct_128572 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115675;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120093;
    char *free_mem_120096;
};
static int futhark_mc_segmap_parloop_128573(void *args, int64_t start,
                                            int64_t end, int flat_tid_115676,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128572
    *futhark_mc_segmap_parloop_struct_128572 =
    (struct futhark_mc_segmap_parloop_struct_128572 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128572->ctx;
    uint64_t futhark_mc_segmap_parloop_128573_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128573_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128572->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128572->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128572->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128572->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128572->free_i_112880;
    int64_t gtid_115675 =
            futhark_mc_segmap_parloop_struct_128572->free_gtid_115675;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128572->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128572->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128572->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128572->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120093 = {.desc ="mem_120093", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120093,
                                  .size =0, .references =NULL};
    struct memblock mem_120096 = {.desc ="mem_120096", .mem =
                                  futhark_mc_segmap_parloop_struct_128572->free_mem_120096,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123211 = start;
    
    for (; iter_123211 < end; iter_123211++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123272 = l_n_m_112854;
        int64_t gtid_115677 = iter_123211;
        int64_t remnant_123273 = iter_123211 - gtid_115677;
        int64_t x_123130 = ((int64_t *) mem_119820.mem)[gtid_115675 *
                                                        l_n_m_112854 +
                                                        gtid_115677];
        float x_123131 = ((float *) mem_119824.mem)[gtid_115675 * l_n_m_112854 +
                                                    gtid_115677];
        int64_t min_arg_123132 = mul64(t_jump_112811, gtid_115677);
        int64_t min_res_123133 = smin64(i_112880, min_arg_123132);
        float defunc_0_f_res_123134 = sitofp_i64_f32(min_res_123133);
        float defunc_2_reduce_res_123135;
        float defunc_2_reduce_res_123136;
        float defunc_2_reduce_res_123137;
        float redout_123213;
        float redout_123214;
        float redout_123215;
        
        redout_123213 = 0.0F;
        redout_123214 = 0.0F;
        redout_123215 = 0.0F;
        for (int64_t i_123212 = 0; i_123212 < l_window_112808; i_123212++) {
            bool cond_123216 = sle64(n_112804, i_123212);
            float defunc_0_f_res_123217;
            
            if (cond_123216) {
                defunc_0_f_res_123217 = 0.0F;
            } else {
                int64_t i_123218 = add64(x_123130, i_123212);
                float index_primexp_123219 = sitofp_i64_f32(i_123218);
                float defunc_0_f_res_f_res_123220 = 1.0F + index_primexp_123219;
                
                defunc_0_f_res_123217 = defunc_0_f_res_f_res_123220;
            }
            
            float defunc_0_f_res_123221;
            
            if (cond_123216) {
                defunc_0_f_res_123221 = 0.0F;
            } else {
                int64_t i_123222 = add64(x_123130, i_123212);
                float x_123223 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115675 *
                                                        ctx_param_ext_119914 +
                                                        i_123222 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_123221 = x_123223;
            }
            
            float x_j_123224 = defunc_0_f_res_123217 - defunc_0_f_res_123134;
            float abs_res_123225 = (float) fabs(x_j_123224);
            float tmp1_123226 = abs_res_123225 / x_123131;
            float x_123227 = tmp1_123226 * tmp1_123226;
            float y_123228 = tmp1_123226 * x_123227;
            float tmp2_123229 = 1.0F - y_123228;
            float x_123230 = tmp2_123229 * tmp2_123229;
            float tmp3_123231 = tmp2_123229 * x_123230;
            float w_j_123232 = defunc_0_f_res_123221 * tmp3_123231;
            float xw_j_123233 = x_j_123224 * w_j_123232;
            float x2w_j_123234 = x_j_123224 * xw_j_123233;
            float defunc_1_op_res_123235 = w_j_123232 + redout_123213;
            float defunc_1_op_res_123236 = xw_j_123233 + redout_123214;
            float defunc_1_op_res_123237 = x2w_j_123234 + redout_123215;
            float redout_tmp_123274 = defunc_1_op_res_123235;
            float redout_tmp_123275 = defunc_1_op_res_123236;
            float redout_tmp_123276 = defunc_1_op_res_123237;
            
            redout_123213 = redout_tmp_123274;
            redout_123214 = redout_tmp_123275;
            redout_123215 = redout_tmp_123276;
        }
        defunc_2_reduce_res_123135 = redout_123213;
        defunc_2_reduce_res_123136 = redout_123214;
        defunc_2_reduce_res_123137 = redout_123215;
        
        float x_123164 = defunc_2_reduce_res_123135 *
              defunc_2_reduce_res_123137;
        float y_123165 = defunc_2_reduce_res_123136 *
              defunc_2_reduce_res_123136;
        float y_123166 = x_123164 - y_123165;
        float det1_123167 = 1.0F / y_123166;
        float a11_123168 = defunc_2_reduce_res_123137 * det1_123167;
        float negate_arg_123169 = defunc_2_reduce_res_123136 * det1_123167;
        float b11_123170 = 0.0F - negate_arg_123169;
        float c11_123171 = defunc_2_reduce_res_123135 * det1_123167;
        float defunc_2_reduce_res_123172;
        float defunc_2_reduce_res_123173;
        float redout_123239;
        float redout_123240;
        
        redout_123239 = 0.0F;
        redout_123240 = 0.0F;
        for (int64_t i_123238 = 0; i_123238 < l_window_112808; i_123238++) {
            bool cond_123241 = sle64(n_112804, i_123238);
            float defunc_0_f_res_123242;
            
            if (cond_123241) {
                defunc_0_f_res_123242 = 0.0F;
            } else {
                int64_t i_123243 = add64(x_123130, i_123238);
                float index_primexp_123244 = sitofp_i64_f32(i_123243);
                float defunc_0_f_res_f_res_123245 = 1.0F + index_primexp_123244;
                
                defunc_0_f_res_123242 = defunc_0_f_res_f_res_123245;
            }
            
            float defunc_0_f_res_123246;
            
            if (cond_123241) {
                defunc_0_f_res_123246 = 0.0F;
            } else {
                int64_t i_123247 = add64(x_123130, i_123238);
                float x_123248 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115675 *
                                                        ctx_param_ext_119914 +
                                                        i_123247 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_123246 = x_123248;
            }
            
            float x_j_123249 = defunc_0_f_res_123242 - defunc_0_f_res_123134;
            float abs_res_123250 = (float) fabs(x_j_123249);
            float tmp1_123251 = abs_res_123250 / x_123131;
            float x_123252 = tmp1_123251 * tmp1_123251;
            float y_123253 = tmp1_123251 * x_123252;
            float tmp2_123254 = 1.0F - y_123253;
            float x_123255 = tmp2_123254 * tmp2_123254;
            float tmp3_123256 = tmp2_123254 * x_123255;
            float tmp4_123257 = defunc_0_f_res_123246 * tmp3_123256;
            float defunc_1_f_res_123258 = x_j_123249 * tmp4_123257;
            float defunc_0_f_res_123259;
            
            if (cond_123241) {
                defunc_0_f_res_123259 = 0.0F;
            } else {
                int64_t i_123260 = add64(x_123130, i_123238);
                float x_123261 = ((float *) mem_120064.mem)[gtid_115675 *
                                                            n_112804 +
                                                            i_123260];
                
                defunc_0_f_res_123259 = x_123261;
            }
            
            float x_123262 = a11_123168 * tmp4_123257;
            float y_123263 = b11_123170 * defunc_1_f_res_123258;
            float x_123264 = x_123262 + y_123263;
            float defunc_9_fit_fun_res_123265 = defunc_0_f_res_123259 *
                  x_123264;
            float x_123266 = b11_123170 * tmp4_123257;
            float y_123267 = c11_123171 * defunc_1_f_res_123258;
            float x_123268 = x_123266 + y_123267;
            float defunc_9_slope_fun_res_123269 = defunc_0_f_res_123259 *
                  x_123268;
            float defunc_1_op_res_123270 = defunc_9_fit_fun_res_123265 +
                  redout_123239;
            float defunc_1_op_res_123271 = defunc_9_slope_fun_res_123269 +
                  redout_123240;
            float redout_tmp_123277 = defunc_1_op_res_123270;
            float redout_tmp_123278 = defunc_1_op_res_123271;
            
            redout_123239 = redout_tmp_123277;
            redout_123240 = redout_tmp_123278;
        }
        defunc_2_reduce_res_123172 = redout_123239;
        defunc_2_reduce_res_123173 = redout_123240;
        ((float *) mem_120093.mem)[gtid_115677] = defunc_2_reduce_res_123172;
        ((float *) mem_120096.mem)[gtid_115677] = defunc_2_reduce_res_123173;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128573_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128573_end -
                 futhark_mc_segmap_parloop_128573_start;
        
        ctx->futhark_mc_segmap_parloop_128573_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128573_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128573_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128571(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115676 = tid;
    int num_tasks_123210 = info.nsubtasks;
    struct futhark_mc_task_128570 *futhark_mc_task_128570 =
                                  (struct futhark_mc_task_128570 *) args;
    struct futhark_context *ctx = futhark_mc_task_128570->ctx;
    uint64_t futhark_mc_segmap_task_128571_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128571_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128570->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128570->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128570->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128570->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128570->free_i_112880;
    int64_t gtid_115675 = futhark_mc_task_128570->free_gtid_115675;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128570->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128570->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128570->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128570->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128570->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128570->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128570->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120093 = {.desc ="mem_120093", .mem =
                                  futhark_mc_task_128570->free_mem_120093,
                                  .size =0, .references =NULL};
    struct memblock mem_120096 = {.desc ="mem_120096", .mem =
                                  futhark_mc_task_128570->free_mem_120096,
                                  .size =0, .references =NULL};
    int64_t iter_123211;
    struct futhark_mc_segmap_parloop_struct_128572
    futhark_mc_segmap_parloop_struct_128572;
    
    futhark_mc_segmap_parloop_struct_128572.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128572.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128572.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128572.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128572.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128572.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128572.free_gtid_115675 = gtid_115675;
    futhark_mc_segmap_parloop_struct_128572.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128572.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128572.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128572.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128572.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120093 = mem_120093.mem;
    futhark_mc_segmap_parloop_struct_128572.free_mem_120096 = mem_120096.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128573_task;
    
    futhark_mc_segmap_parloop_128573_task.name =
        "futhark_mc_segmap_parloop_128573";
    futhark_mc_segmap_parloop_128573_task.fn = futhark_mc_segmap_parloop_128573;
    futhark_mc_segmap_parloop_128573_task.args =
        &futhark_mc_segmap_parloop_struct_128572;
    futhark_mc_segmap_parloop_128573_task.iterations = iterations;
    futhark_mc_segmap_parloop_128573_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128573_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128573_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128573_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128573_task);
    
    if (futhark_mc_segmap_parloop_128573_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128573_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128573_total_end -
                 futhark_mc_segmap_parloop_128573_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128573_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128571_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128571_end -
                 futhark_mc_segmap_task_128571_start;
        
        ctx->futhark_mc_segmap_task_128571_runs[tid]++;
        ctx->futhark_mc_segmap_task_128571_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128571_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128575 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115675;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120093;
    char *free_mem_120096;
};
struct futhark_mc_task_128577 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115675;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123049;
    float free_x_123050;
    float free_defunc_0_f_res_123053;
    float *retval_defunc_2_reduce_res_123054;
    float *retval_defunc_2_reduce_res_123055;
    float *retval_defunc_2_reduce_res_123056;
};
struct futhark_mc_segred_stage_1_parloop_struct_128582 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115675;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123049;
    float free_x_123050;
    float free_defunc_0_f_res_123053;
    char *free_reduce_stage_1_tid_res_arr_mem_123346;
    char *free_reduce_stage_1_tid_res_arr_mem_123348;
    char *free_reduce_stage_1_tid_res_arr_mem_123350;
};
static int futhark_mc_segred_stage_1_parloop_128583(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115680,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128582
    *futhark_mc_segred_stage_1_parloop_struct_128582 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128582 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128582->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128583_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128583_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_n_112804;
    int64_t gtid_115675 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_gtid_115675;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128582->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123049 =
            futhark_mc_segred_stage_1_parloop_struct_128582->free_x_123049;
    float x_123050 =
          futhark_mc_segred_stage_1_parloop_struct_128582->free_x_123050;
    float defunc_0_f_res_123053 =
          futhark_mc_segred_stage_1_parloop_struct_128582->free_defunc_0_f_res_123053;
    struct memblock reduce_stage_1_tid_res_arr_mem_123346 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123346",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128582->free_reduce_stage_1_tid_res_arr_mem_123346,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123348 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123348",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128582->free_reduce_stage_1_tid_res_arr_mem_123348,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123350 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123350",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128582->free_reduce_stage_1_tid_res_arr_mem_123350,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123352 = start;
    float x_123280;
    float x_123281;
    float x_123283;
    float x_123284;
    float x_123286;
    float x_123287;
    float local_acc_123353 = 0.0F;
    float local_acc_123354 = 0.0F;
    float local_acc_123355 = 0.0F;
    
    for (; iter_123352 < end; iter_123352++) {
        int64_t gtid_115681 = iter_123352;
        bool cond_123289 = sle64(n_112804, gtid_115681);
        float defunc_0_f_res_123290;
        
        if (cond_123289) {
            defunc_0_f_res_123290 = 0.0F;
        } else {
            int64_t i_123291 = add64(gtid_115681, x_123049);
            float index_primexp_123292 = sitofp_i64_f32(i_123291);
            float defunc_0_f_res_f_res_123293 = 1.0F + index_primexp_123292;
            
            defunc_0_f_res_123290 = defunc_0_f_res_f_res_123293;
        }
        
        float defunc_0_f_res_123294;
        
        if (cond_123289) {
            defunc_0_f_res_123294 = 0.0F;
        } else {
            int64_t i_123295 = add64(gtid_115681, x_123049);
            float x_123296 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115675 *
                                                    ctx_param_ext_119914 +
                                                    i_123295 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_123294 = x_123296;
        }
        
        float x_j_123297 = defunc_0_f_res_123290 - defunc_0_f_res_123053;
        float abs_res_123298 = (float) fabs(x_j_123297);
        float tmp1_123299 = abs_res_123298 / x_123050;
        float x_123300 = tmp1_123299 * tmp1_123299;
        float y_123301 = tmp1_123299 * x_123300;
        float tmp2_123302 = 1.0F - y_123301;
        float x_123303 = tmp2_123302 * tmp2_123302;
        float tmp3_123304 = tmp2_123302 * x_123303;
        float w_j_123305 = defunc_0_f_res_123294 * tmp3_123304;
        float xw_j_123306 = x_j_123297 * w_j_123305;
        float x2w_j_123307 = x_j_123297 * xw_j_123306;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123280 = local_acc_123353;
        }
        // Load next params
        {
            x_123281 = w_j_123305;
        }
        // Red body
        {
            float defunc_1_op_res_123282 = x_123280 + x_123281;
            
            local_acc_123353 = defunc_1_op_res_123282;
        }
        // Load accum params
        {
            x_123283 = local_acc_123354;
        }
        // Load next params
        {
            x_123284 = xw_j_123306;
        }
        // Red body
        {
            float defunc_1_op_res_123285 = x_123283 + x_123284;
            
            local_acc_123354 = defunc_1_op_res_123285;
        }
        // Load accum params
        {
            x_123286 = local_acc_123355;
        }
        // Load next params
        {
            x_123287 = x2w_j_123307;
        }
        // Red body
        {
            float defunc_1_op_res_123288 = x_123286 + x_123287;
            
            local_acc_123355 = defunc_1_op_res_123288;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123346.mem)[flat_tid_115680] =
        local_acc_123353;
    ((float *) reduce_stage_1_tid_res_arr_mem_123348.mem)[flat_tid_115680] =
        local_acc_123354;
    ((float *) reduce_stage_1_tid_res_arr_mem_123350.mem)[flat_tid_115680] =
        local_acc_123355;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128583_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128583_end -
                 futhark_mc_segred_stage_1_parloop_128583_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128583_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128583_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128583_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128578(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115680 = tid;
    int num_tasks_123345 = info.nsubtasks;
    struct futhark_mc_task_128577 *futhark_mc_task_128577 =
                                  (struct futhark_mc_task_128577 *) args;
    struct futhark_context *ctx = futhark_mc_task_128577->ctx;
    uint64_t futhark_mc_segred_task_128578_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128578_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128577->free_n_112804;
    int64_t gtid_115675 = futhark_mc_task_128577->free_gtid_115675;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128577->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128577->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128577->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128577->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123049 = futhark_mc_task_128577->free_x_123049;
    float x_123050 = futhark_mc_task_128577->free_x_123050;
    float defunc_0_f_res_123053 =
          futhark_mc_task_128577->free_defunc_0_f_res_123053;
    float defunc_2_reduce_res_123054 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_123054;
    float defunc_2_reduce_res_123055 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_123055;
    float defunc_2_reduce_res_123056 =
          *futhark_mc_task_128577->retval_defunc_2_reduce_res_123056;
    size_t reduce_stage_1_tid_res_arr_mem_123346_cached_sizze_128579 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123346 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123348_cached_sizze_128580 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123348 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123350_cached_sizze_128581 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123350 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123346_cached_sizze_128579 <
        (size_t) ((int64_t) 4 * num_tasks_123345)) {
        reduce_stage_1_tid_res_arr_mem_123346 =
            realloc(reduce_stage_1_tid_res_arr_mem_123346, (int64_t) 4 *
                    num_tasks_123345);
        reduce_stage_1_tid_res_arr_mem_123346_cached_sizze_128579 =
            (int64_t) 4 * num_tasks_123345;
    }
    if (reduce_stage_1_tid_res_arr_mem_123348_cached_sizze_128580 <
        (size_t) ((int64_t) 4 * num_tasks_123345)) {
        reduce_stage_1_tid_res_arr_mem_123348 =
            realloc(reduce_stage_1_tid_res_arr_mem_123348, (int64_t) 4 *
                    num_tasks_123345);
        reduce_stage_1_tid_res_arr_mem_123348_cached_sizze_128580 =
            (int64_t) 4 * num_tasks_123345;
    }
    if (reduce_stage_1_tid_res_arr_mem_123350_cached_sizze_128581 <
        (size_t) ((int64_t) 4 * num_tasks_123345)) {
        reduce_stage_1_tid_res_arr_mem_123350 =
            realloc(reduce_stage_1_tid_res_arr_mem_123350, (int64_t) 4 *
                    num_tasks_123345);
        reduce_stage_1_tid_res_arr_mem_123350_cached_sizze_128581 =
            (int64_t) 4 * num_tasks_123345;
    }
    
    int64_t iter_123352;
    struct futhark_mc_segred_stage_1_parloop_struct_128582
    futhark_mc_segred_stage_1_parloop_struct_128582;
    
    futhark_mc_segred_stage_1_parloop_struct_128582.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_gtid_115675 =
        gtid_115675;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_x_123049 = x_123049;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_x_123050 = x_123050;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_defunc_0_f_res_123053 =
        defunc_0_f_res_123053;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_reduce_stage_1_tid_res_arr_mem_123346 =
        reduce_stage_1_tid_res_arr_mem_123346;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_reduce_stage_1_tid_res_arr_mem_123348 =
        reduce_stage_1_tid_res_arr_mem_123348;
    futhark_mc_segred_stage_1_parloop_struct_128582.free_reduce_stage_1_tid_res_arr_mem_123350 =
        reduce_stage_1_tid_res_arr_mem_123350;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128583_task;
    
    futhark_mc_segred_stage_1_parloop_128583_task.name =
        "futhark_mc_segred_stage_1_parloop_128583";
    futhark_mc_segred_stage_1_parloop_128583_task.fn =
        futhark_mc_segred_stage_1_parloop_128583;
    futhark_mc_segred_stage_1_parloop_128583_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128582;
    futhark_mc_segred_stage_1_parloop_128583_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128583_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128583_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128583_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128583_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128583_task);
    
    if (futhark_mc_segred_stage_1_parloop_128583_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128583_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128583_total_end -
                 futhark_mc_segred_stage_1_parloop_128583_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128583_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128583_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128583_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123054 = 0.0F;
        defunc_2_reduce_res_123055 = 0.0F;
        defunc_2_reduce_res_123056 = 0.0F;
    }
    
    float x_123356;
    float x_123357;
    float x_123359;
    float x_123360;
    float x_123362;
    float x_123363;
    
    for (int32_t i_123365 = 0; i_123365 < num_tasks_123345; i_123365++) {
        flat_tid_115680 = i_123365;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123356 = defunc_2_reduce_res_123054;
            }
            // load next params
            {
                x_123357 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123346)[flat_tid_115680];
            }
            // red body
            {
                float defunc_1_op_res_123358 = x_123356 + x_123357;
                
                defunc_2_reduce_res_123054 = defunc_1_op_res_123358;
            }
            // load acc params
            {
                x_123359 = defunc_2_reduce_res_123055;
            }
            // load next params
            {
                x_123360 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123348)[flat_tid_115680];
            }
            // red body
            {
                float defunc_1_op_res_123361 = x_123359 + x_123360;
                
                defunc_2_reduce_res_123055 = defunc_1_op_res_123361;
            }
            // load acc params
            {
                x_123362 = defunc_2_reduce_res_123056;
            }
            // load next params
            {
                x_123363 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123350)[flat_tid_115680];
            }
            // red body
            {
                float defunc_1_op_res_123364 = x_123362 + x_123363;
                
                defunc_2_reduce_res_123056 = defunc_1_op_res_123364;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123346);
    free(reduce_stage_1_tid_res_arr_mem_123348);
    free(reduce_stage_1_tid_res_arr_mem_123350);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128578_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128578_end -
                 futhark_mc_segred_task_128578_start;
        
        ctx->futhark_mc_segred_task_128578_runs[tid]++;
        ctx->futhark_mc_segred_task_128578_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128578_iter[tid] += iterations;
    }
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_123054 =
        defunc_2_reduce_res_123054;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_123055 =
        defunc_2_reduce_res_123055;
    *futhark_mc_task_128577->retval_defunc_2_reduce_res_123056 =
        defunc_2_reduce_res_123056;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128584 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115675;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_123049;
    float free_x_123050;
    float free_defunc_0_f_res_123053;
    float free_a11_123089;
    float free_b11_123091;
    float free_c11_123092;
    float *retval_defunc_2_reduce_res_123093;
    float *retval_defunc_2_reduce_res_123094;
};
struct futhark_mc_segred_stage_1_parloop_struct_128588 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115675;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_123049;
    float free_x_123050;
    float free_defunc_0_f_res_123053;
    float free_a11_123089;
    float free_b11_123091;
    float free_c11_123092;
    char *free_reduce_stage_1_tid_res_arr_mem_123367;
    char *free_reduce_stage_1_tid_res_arr_mem_123369;
};
static int futhark_mc_segred_stage_1_parloop_128589(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115682,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128588
    *futhark_mc_segred_stage_1_parloop_struct_128588 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128588 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128588->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128589_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128589_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_n_112804;
    int64_t gtid_115675 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_gtid_115675;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128588->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128588->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123049 =
            futhark_mc_segred_stage_1_parloop_struct_128588->free_x_123049;
    float x_123050 =
          futhark_mc_segred_stage_1_parloop_struct_128588->free_x_123050;
    float defunc_0_f_res_123053 =
          futhark_mc_segred_stage_1_parloop_struct_128588->free_defunc_0_f_res_123053;
    float a11_123089 =
          futhark_mc_segred_stage_1_parloop_struct_128588->free_a11_123089;
    float b11_123091 =
          futhark_mc_segred_stage_1_parloop_struct_128588->free_b11_123091;
    float c11_123092 =
          futhark_mc_segred_stage_1_parloop_struct_128588->free_c11_123092;
    struct memblock reduce_stage_1_tid_res_arr_mem_123367 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123367",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128588->free_reduce_stage_1_tid_res_arr_mem_123367,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123369 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123369",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128588->free_reduce_stage_1_tid_res_arr_mem_123369,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123371 = start;
    float x_123308;
    float x_123309;
    float x_123311;
    float x_123312;
    float local_acc_123372 = 0.0F;
    float local_acc_123373 = 0.0F;
    
    for (; iter_123371 < end; iter_123371++) {
        int64_t gtid_115683 = iter_123371;
        bool cond_123314 = sle64(n_112804, gtid_115683);
        float defunc_0_f_res_123315;
        
        if (cond_123314) {
            defunc_0_f_res_123315 = 0.0F;
        } else {
            int64_t i_123316 = add64(gtid_115683, x_123049);
            float index_primexp_123317 = sitofp_i64_f32(i_123316);
            float defunc_0_f_res_f_res_123318 = 1.0F + index_primexp_123317;
            
            defunc_0_f_res_123315 = defunc_0_f_res_f_res_123318;
        }
        
        float defunc_0_f_res_123319;
        
        if (cond_123314) {
            defunc_0_f_res_123319 = 0.0F;
        } else {
            int64_t i_123320 = add64(gtid_115683, x_123049);
            float x_123321 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115675 *
                                                    ctx_param_ext_119914 +
                                                    i_123320 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_123319 = x_123321;
        }
        
        float x_j_123322 = defunc_0_f_res_123315 - defunc_0_f_res_123053;
        float abs_res_123323 = (float) fabs(x_j_123322);
        float tmp1_123324 = abs_res_123323 / x_123050;
        float x_123325 = tmp1_123324 * tmp1_123324;
        float y_123326 = tmp1_123324 * x_123325;
        float tmp2_123327 = 1.0F - y_123326;
        float x_123328 = tmp2_123327 * tmp2_123327;
        float tmp3_123329 = tmp2_123327 * x_123328;
        float tmp4_123330 = defunc_0_f_res_123319 * tmp3_123329;
        float defunc_1_f_res_123331 = x_j_123322 * tmp4_123330;
        float defunc_0_f_res_123332;
        
        if (cond_123314) {
            defunc_0_f_res_123332 = 0.0F;
        } else {
            int64_t i_123333 = add64(gtid_115683, x_123049);
            float x_123334 = ((float *) mem_120064.mem)[gtid_115675 * n_112804 +
                                                        i_123333];
            
            defunc_0_f_res_123332 = x_123334;
        }
        
        float x_123335 = a11_123089 * tmp4_123330;
        float y_123336 = b11_123091 * defunc_1_f_res_123331;
        float x_123337 = x_123335 + y_123336;
        float defunc_9_fit_fun_res_123338 = defunc_0_f_res_123332 * x_123337;
        float x_123339 = b11_123091 * tmp4_123330;
        float y_123340 = c11_123092 * defunc_1_f_res_123331;
        float x_123341 = x_123339 + y_123340;
        float defunc_9_slope_fun_res_123342 = defunc_0_f_res_123332 * x_123341;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123308 = local_acc_123372;
        }
        // Load next params
        {
            x_123309 = defunc_9_fit_fun_res_123338;
        }
        // Red body
        {
            float defunc_1_op_res_123310 = x_123308 + x_123309;
            
            local_acc_123372 = defunc_1_op_res_123310;
        }
        // Load accum params
        {
            x_123311 = local_acc_123373;
        }
        // Load next params
        {
            x_123312 = defunc_9_slope_fun_res_123342;
        }
        // Red body
        {
            float defunc_1_op_res_123313 = x_123311 + x_123312;
            
            local_acc_123373 = defunc_1_op_res_123313;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123367.mem)[flat_tid_115682] =
        local_acc_123372;
    ((float *) reduce_stage_1_tid_res_arr_mem_123369.mem)[flat_tid_115682] =
        local_acc_123373;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128589_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128589_end -
                 futhark_mc_segred_stage_1_parloop_128589_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128589_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128589_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128589_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128585(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115682 = tid;
    int num_tasks_123366 = info.nsubtasks;
    struct futhark_mc_task_128584 *futhark_mc_task_128584 =
                                  (struct futhark_mc_task_128584 *) args;
    struct futhark_context *ctx = futhark_mc_task_128584->ctx;
    uint64_t futhark_mc_segred_task_128585_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128585_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128584->free_n_112804;
    int64_t gtid_115675 = futhark_mc_task_128584->free_gtid_115675;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128584->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128584->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128584->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128584->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128584->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123049 = futhark_mc_task_128584->free_x_123049;
    float x_123050 = futhark_mc_task_128584->free_x_123050;
    float defunc_0_f_res_123053 =
          futhark_mc_task_128584->free_defunc_0_f_res_123053;
    float a11_123089 = futhark_mc_task_128584->free_a11_123089;
    float b11_123091 = futhark_mc_task_128584->free_b11_123091;
    float c11_123092 = futhark_mc_task_128584->free_c11_123092;
    float defunc_2_reduce_res_123093 =
          *futhark_mc_task_128584->retval_defunc_2_reduce_res_123093;
    float defunc_2_reduce_res_123094 =
          *futhark_mc_task_128584->retval_defunc_2_reduce_res_123094;
    size_t reduce_stage_1_tid_res_arr_mem_123367_cached_sizze_128586 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123367 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123369_cached_sizze_128587 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123369 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123367_cached_sizze_128586 <
        (size_t) ((int64_t) 4 * num_tasks_123366)) {
        reduce_stage_1_tid_res_arr_mem_123367 =
            realloc(reduce_stage_1_tid_res_arr_mem_123367, (int64_t) 4 *
                    num_tasks_123366);
        reduce_stage_1_tid_res_arr_mem_123367_cached_sizze_128586 =
            (int64_t) 4 * num_tasks_123366;
    }
    if (reduce_stage_1_tid_res_arr_mem_123369_cached_sizze_128587 <
        (size_t) ((int64_t) 4 * num_tasks_123366)) {
        reduce_stage_1_tid_res_arr_mem_123369 =
            realloc(reduce_stage_1_tid_res_arr_mem_123369, (int64_t) 4 *
                    num_tasks_123366);
        reduce_stage_1_tid_res_arr_mem_123369_cached_sizze_128587 =
            (int64_t) 4 * num_tasks_123366;
    }
    
    int64_t iter_123371;
    struct futhark_mc_segred_stage_1_parloop_struct_128588
    futhark_mc_segred_stage_1_parloop_struct_128588;
    
    futhark_mc_segred_stage_1_parloop_struct_128588.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_gtid_115675 =
        gtid_115675;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_x_123049 = x_123049;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_x_123050 = x_123050;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_defunc_0_f_res_123053 =
        defunc_0_f_res_123053;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_a11_123089 =
        a11_123089;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_b11_123091 =
        b11_123091;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_c11_123092 =
        c11_123092;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_reduce_stage_1_tid_res_arr_mem_123367 =
        reduce_stage_1_tid_res_arr_mem_123367;
    futhark_mc_segred_stage_1_parloop_struct_128588.free_reduce_stage_1_tid_res_arr_mem_123369 =
        reduce_stage_1_tid_res_arr_mem_123369;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128589_task;
    
    futhark_mc_segred_stage_1_parloop_128589_task.name =
        "futhark_mc_segred_stage_1_parloop_128589";
    futhark_mc_segred_stage_1_parloop_128589_task.fn =
        futhark_mc_segred_stage_1_parloop_128589;
    futhark_mc_segred_stage_1_parloop_128589_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128588;
    futhark_mc_segred_stage_1_parloop_128589_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128589_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128589_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128589_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128589_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128589_task);
    
    if (futhark_mc_segred_stage_1_parloop_128589_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128589_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128589_total_end -
                 futhark_mc_segred_stage_1_parloop_128589_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128589_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128589_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128589_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123093 = 0.0F;
        defunc_2_reduce_res_123094 = 0.0F;
    }
    
    float x_123374;
    float x_123375;
    float x_123377;
    float x_123378;
    
    for (int32_t i_123380 = 0; i_123380 < num_tasks_123366; i_123380++) {
        flat_tid_115682 = i_123380;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123374 = defunc_2_reduce_res_123093;
            }
            // load next params
            {
                x_123375 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123367)[flat_tid_115682];
            }
            // red body
            {
                float defunc_1_op_res_123376 = x_123374 + x_123375;
                
                defunc_2_reduce_res_123093 = defunc_1_op_res_123376;
            }
            // load acc params
            {
                x_123377 = defunc_2_reduce_res_123094;
            }
            // load next params
            {
                x_123378 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123369)[flat_tid_115682];
            }
            // red body
            {
                float defunc_1_op_res_123379 = x_123377 + x_123378;
                
                defunc_2_reduce_res_123094 = defunc_1_op_res_123379;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123367);
    free(reduce_stage_1_tid_res_arr_mem_123369);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128585_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128585_end -
                 futhark_mc_segred_task_128585_start;
        
        ctx->futhark_mc_segred_task_128585_runs[tid]++;
        ctx->futhark_mc_segred_task_128585_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128585_iter[tid] += iterations;
    }
    *futhark_mc_task_128584->retval_defunc_2_reduce_res_123093 =
        defunc_2_reduce_res_123093;
    *futhark_mc_task_128584->retval_defunc_2_reduce_res_123094 =
        defunc_2_reduce_res_123094;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128576(void *args, int64_t start,
                                            int64_t end, int flat_tid_115678,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128575
    *futhark_mc_segmap_parloop_struct_128575 =
    (struct futhark_mc_segmap_parloop_struct_128575 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128575->ctx;
    uint64_t futhark_mc_segmap_parloop_128576_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128576_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128575->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128575->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128575->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128575->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128575->free_i_112880;
    int64_t gtid_115675 =
            futhark_mc_segmap_parloop_struct_128575->free_gtid_115675;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128575->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128575->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128575->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128575->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120093 = {.desc ="mem_120093", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120093,
                                  .size =0, .references =NULL};
    struct memblock mem_120096 = {.desc ="mem_120096", .mem =
                                  futhark_mc_segmap_parloop_struct_128575->free_mem_120096,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123279 = start;
    
    for (; iter_123279 < end; iter_123279++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123343 = l_n_m_112854;
        int64_t gtid_115679 = iter_123279;
        int64_t remnant_123344 = iter_123279 - gtid_115679;
        int64_t x_123049 = ((int64_t *) mem_119820.mem)[gtid_115675 *
                                                        l_n_m_112854 +
                                                        gtid_115679];
        float x_123050 = ((float *) mem_119824.mem)[gtid_115675 * l_n_m_112854 +
                                                    gtid_115679];
        int64_t min_arg_123051 = mul64(t_jump_112811, gtid_115679);
        int64_t min_res_123052 = smin64(i_112880, min_arg_123051);
        float defunc_0_f_res_123053 = sitofp_i64_f32(min_res_123052);
        float defunc_2_reduce_res_123054;
        float defunc_2_reduce_res_123055;
        float defunc_2_reduce_res_123056;
        int64_t flat_tid_115680 = (int64_t) 0;
        int32_t num_tasks_123345;
        struct futhark_mc_task_128577 futhark_mc_task_128577;
        
        futhark_mc_task_128577.ctx = ctx;
        futhark_mc_task_128577.free_n_112804 = n_112804;
        futhark_mc_task_128577.free_gtid_115675 = gtid_115675;
        futhark_mc_task_128577.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128577.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128577.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128577.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128577.free_x_123049 = x_123049;
        futhark_mc_task_128577.free_x_123050 = x_123050;
        futhark_mc_task_128577.free_defunc_0_f_res_123053 =
            defunc_0_f_res_123053;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_123054 =
            &defunc_2_reduce_res_123054;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_123055 =
            &defunc_2_reduce_res_123055;
        futhark_mc_task_128577.retval_defunc_2_reduce_res_123056 =
            &defunc_2_reduce_res_123056;
        
        struct scheduler_segop futhark_mc_task_128577_task;
        
        futhark_mc_task_128577_task.args = &futhark_mc_task_128577;
        futhark_mc_task_128577_task.top_level_fn =
            futhark_mc_segred_task_128578;
        futhark_mc_task_128577_task.name = "futhark_mc_segred_task_128578";
        futhark_mc_task_128577_task.iterations = l_window_112808;
        futhark_mc_task_128577_task.task_time =
            &ctx->futhark_mc_segred_task_128578_total_time;
        futhark_mc_task_128577_task.task_iter =
            &ctx->futhark_mc_segred_task_128578_total_iter;
        futhark_mc_task_128577_task.sched = STATIC;
        futhark_mc_task_128577_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128578_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128577_task);
        
        if (futhark_mc_segred_task_128578_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_123085 = defunc_2_reduce_res_123054 *
              defunc_2_reduce_res_123056;
        float y_123086 = defunc_2_reduce_res_123055 *
              defunc_2_reduce_res_123055;
        float y_123087 = x_123085 - y_123086;
        float det1_123088 = 1.0F / y_123087;
        float a11_123089 = defunc_2_reduce_res_123056 * det1_123088;
        float negate_arg_123090 = defunc_2_reduce_res_123055 * det1_123088;
        float b11_123091 = 0.0F - negate_arg_123090;
        float c11_123092 = defunc_2_reduce_res_123054 * det1_123088;
        float defunc_2_reduce_res_123093;
        float defunc_2_reduce_res_123094;
        int64_t flat_tid_115682 = (int64_t) 0;
        int32_t num_tasks_123366;
        struct futhark_mc_task_128584 futhark_mc_task_128584;
        
        futhark_mc_task_128584.ctx = ctx;
        futhark_mc_task_128584.free_n_112804 = n_112804;
        futhark_mc_task_128584.free_gtid_115675 = gtid_115675;
        futhark_mc_task_128584.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128584.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128584.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128584.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128584.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128584.free_x_123049 = x_123049;
        futhark_mc_task_128584.free_x_123050 = x_123050;
        futhark_mc_task_128584.free_defunc_0_f_res_123053 =
            defunc_0_f_res_123053;
        futhark_mc_task_128584.free_a11_123089 = a11_123089;
        futhark_mc_task_128584.free_b11_123091 = b11_123091;
        futhark_mc_task_128584.free_c11_123092 = c11_123092;
        futhark_mc_task_128584.retval_defunc_2_reduce_res_123093 =
            &defunc_2_reduce_res_123093;
        futhark_mc_task_128584.retval_defunc_2_reduce_res_123094 =
            &defunc_2_reduce_res_123094;
        
        struct scheduler_segop futhark_mc_task_128584_task;
        
        futhark_mc_task_128584_task.args = &futhark_mc_task_128584;
        futhark_mc_task_128584_task.top_level_fn =
            futhark_mc_segred_task_128585;
        futhark_mc_task_128584_task.name = "futhark_mc_segred_task_128585";
        futhark_mc_task_128584_task.iterations = l_window_112808;
        futhark_mc_task_128584_task.task_time =
            &ctx->futhark_mc_segred_task_128585_total_time;
        futhark_mc_task_128584_task.task_iter =
            &ctx->futhark_mc_segred_task_128585_total_iter;
        futhark_mc_task_128584_task.sched = STATIC;
        futhark_mc_task_128584_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128585_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128584_task);
        
        if (futhark_mc_segred_task_128585_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120093.mem)[gtid_115679] = defunc_2_reduce_res_123093;
        ((float *) mem_120096.mem)[gtid_115679] = defunc_2_reduce_res_123094;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128576_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128576_end -
                 futhark_mc_segmap_parloop_128576_start;
        
        ctx->futhark_mc_segmap_parloop_128576_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128576_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128576_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128574(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115678 = tid;
    int num_tasks_123210 = info.nsubtasks;
    struct futhark_mc_task_128570 *futhark_mc_task_128570 =
                                  (struct futhark_mc_task_128570 *) args;
    struct futhark_context *ctx = futhark_mc_task_128570->ctx;
    uint64_t futhark_mc_segmap_nested_task_128574_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128574_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128570->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128570->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128570->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128570->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128570->free_i_112880;
    int64_t gtid_115675 = futhark_mc_task_128570->free_gtid_115675;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128570->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128570->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128570->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128570->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128570->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128570->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128570->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120093 = {.desc ="mem_120093", .mem =
                                  futhark_mc_task_128570->free_mem_120093,
                                  .size =0, .references =NULL};
    struct memblock mem_120096 = {.desc ="mem_120096", .mem =
                                  futhark_mc_task_128570->free_mem_120096,
                                  .size =0, .references =NULL};
    int64_t iter_123279;
    struct futhark_mc_segmap_parloop_struct_128575
    futhark_mc_segmap_parloop_struct_128575;
    
    futhark_mc_segmap_parloop_struct_128575.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128575.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128575.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128575.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128575.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128575.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128575.free_gtid_115675 = gtid_115675;
    futhark_mc_segmap_parloop_struct_128575.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128575.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128575.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128575.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128575.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120093 = mem_120093.mem;
    futhark_mc_segmap_parloop_struct_128575.free_mem_120096 = mem_120096.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128576_task;
    
    futhark_mc_segmap_parloop_128576_task.name =
        "futhark_mc_segmap_parloop_128576";
    futhark_mc_segmap_parloop_128576_task.fn = futhark_mc_segmap_parloop_128576;
    futhark_mc_segmap_parloop_128576_task.args =
        &futhark_mc_segmap_parloop_struct_128575;
    futhark_mc_segmap_parloop_128576_task.iterations = iterations;
    futhark_mc_segmap_parloop_128576_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128576_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128576_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128576_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128576_task);
    
    if (futhark_mc_segmap_parloop_128576_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128576_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128576_total_end -
                 futhark_mc_segmap_parloop_128576_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128576_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128574_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128574_end -
                 futhark_mc_segmap_nested_task_128574_start;
        
        ctx->futhark_mc_segmap_nested_task_128574_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128574_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128574_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128567(void *args, int64_t start,
                                            int64_t end, int flat_tid_115674,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128566
    *futhark_mc_segmap_parloop_struct_128566 =
    (struct futhark_mc_segmap_parloop_struct_128566 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128566->ctx;
    uint64_t futhark_mc_segmap_parloop_128567_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128567_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128566->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128566->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128566->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128566->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128566->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128566->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128566->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128566->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128566->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128566->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128566->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120130 = {.desc ="mem_120130", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120130,
                                  .size =0, .references =NULL};
    struct memblock mem_120134 = {.desc ="mem_120134", .mem =
                                  futhark_mc_segmap_parloop_struct_128566->free_mem_120134,
                                  .size =0, .references =NULL};
    size_t mem_120093_cached_sizze_128568 = 0;
    char *mem_120093 = NULL;
    size_t mem_120096_cached_sizze_128569 = 0;
    char *mem_120096 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123048 = start;
    
    if (mem_120093_cached_sizze_128568 < (size_t) bytes_119766) {
        mem_120093 = realloc(mem_120093, bytes_119766);
        mem_120093_cached_sizze_128568 = bytes_119766;
    }
    if (mem_120096_cached_sizze_128569 < (size_t) bytes_119766) {
        mem_120096 = realloc(mem_120096, bytes_119766);
        mem_120096_cached_sizze_128569 = bytes_119766;
    }
    for (; iter_123048 < end; iter_123048++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123208 = m_112803;
        int64_t gtid_115675 = iter_123048;
        int64_t remnant_123209 = iter_123048 - gtid_115675;
        int64_t flat_tid_115676 = (int64_t) 0;
        int32_t num_tasks_123210;
        int64_t flat_tid_115678 = (int64_t) 0;
        struct futhark_mc_task_128570 futhark_mc_task_128570;
        
        futhark_mc_task_128570.ctx = ctx;
        futhark_mc_task_128570.free_n_112804 = n_112804;
        futhark_mc_task_128570.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128570.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128570.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128570.free_i_112880 = i_112880;
        futhark_mc_task_128570.free_gtid_115675 = gtid_115675;
        futhark_mc_task_128570.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128570.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128570.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128570.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128570.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128570.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128570.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128570.free_mem_120093 = mem_120093;
        futhark_mc_task_128570.free_mem_120096 = mem_120096;
        
        struct scheduler_segop futhark_mc_task_128570_task;
        
        futhark_mc_task_128570_task.args = &futhark_mc_task_128570;
        futhark_mc_task_128570_task.top_level_fn =
            futhark_mc_segmap_task_128571;
        futhark_mc_task_128570_task.name = "futhark_mc_segmap_task_128571";
        futhark_mc_task_128570_task.iterations = l_n_m_112854;
        futhark_mc_task_128570_task.task_time =
            &ctx->futhark_mc_segmap_task_128571_total_time;
        futhark_mc_task_128570_task.task_iter =
            &ctx->futhark_mc_segmap_task_128571_total_iter;
        futhark_mc_task_128570_task.sched = STATIC;
        futhark_mc_task_128570_task.nested_fn =
            futhark_mc_segmap_nested_task_128574;
        
        int futhark_mc_segmap_task_128571_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128570_task);
        
        if (futhark_mc_segmap_task_128571_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120130.mem + gtid_115675 * l_n_m_112854 * (int64_t) 4,
                mem_120093 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120134.mem + gtid_115675 * l_n_m_112854 * (int64_t) 4,
                mem_120096 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120093);
    free(mem_120096);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128567_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128567_end -
                 futhark_mc_segmap_parloop_128567_start;
        
        ctx->futhark_mc_segmap_parloop_128567_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128567_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128567_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128565(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115674 = tid;
    int num_tasks_122954 = info.nsubtasks;
    struct futhark_mc_task_128559 *futhark_mc_task_128559 =
                                  (struct futhark_mc_task_128559 *) args;
    struct futhark_context *ctx = futhark_mc_task_128559->ctx;
    uint64_t futhark_mc_segmap_nested_task_128565_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128565_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128559->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128559->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128559->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128559->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128559->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128559->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128559->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128559->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128559->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128559->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128559->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128559->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128559->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128559->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120130 = {.desc ="mem_120130", .mem =
                                  futhark_mc_task_128559->free_mem_120130,
                                  .size =0, .references =NULL};
    struct memblock mem_120134 = {.desc ="mem_120134", .mem =
                                  futhark_mc_task_128559->free_mem_120134,
                                  .size =0, .references =NULL};
    int64_t iter_123048;
    struct futhark_mc_segmap_parloop_struct_128566
    futhark_mc_segmap_parloop_struct_128566;
    
    futhark_mc_segmap_parloop_struct_128566.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128566.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128566.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128566.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128566.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128566.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128566.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128566.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128566.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128566.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128566.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128566.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120130 = mem_120130.mem;
    futhark_mc_segmap_parloop_struct_128566.free_mem_120134 = mem_120134.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128567_task;
    
    futhark_mc_segmap_parloop_128567_task.name =
        "futhark_mc_segmap_parloop_128567";
    futhark_mc_segmap_parloop_128567_task.fn = futhark_mc_segmap_parloop_128567;
    futhark_mc_segmap_parloop_128567_task.args =
        &futhark_mc_segmap_parloop_struct_128566;
    futhark_mc_segmap_parloop_128567_task.iterations = iterations;
    futhark_mc_segmap_parloop_128567_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128567_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128567_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128567_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128567_task);
    
    if (futhark_mc_segmap_parloop_128567_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128567_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128567_total_end -
                 futhark_mc_segmap_parloop_128567_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128567_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128565_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128565_end -
                 futhark_mc_segmap_nested_task_128565_start;
        
        ctx->futhark_mc_segmap_nested_task_128565_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128565_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128565_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128590 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120174;
    char *free_mem_120178;
};
struct futhark_mc_segmap_parloop_struct_128592 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120174;
    char *free_mem_120178;
};
static int futhark_mc_segmap_parloop_128593(void *args, int64_t start,
                                            int64_t end, int flat_tid_115942,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128592
    *futhark_mc_segmap_parloop_struct_128592 =
    (struct futhark_mc_segmap_parloop_struct_128592 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128592->ctx;
    uint64_t futhark_mc_segmap_parloop_128593_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128593_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128592->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128592->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128592->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128592->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128592->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128592->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128592->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128592->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128592->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128592->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128592->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128592->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128592->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128592->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120174 = {.desc ="mem_120174", .mem =
                                  futhark_mc_segmap_parloop_struct_128592->free_mem_120174,
                                  .size =0, .references =NULL};
    struct memblock mem_120178 = {.desc ="mem_120178", .mem =
                                  futhark_mc_segmap_parloop_struct_128592->free_mem_120178,
                                  .size =0, .references =NULL};
    size_t mem_120143_cached_sizze_128594 = 0;
    char *mem_120143 = NULL;
    size_t mem_120146_cached_sizze_128595 = 0;
    char *mem_120146 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123382 = start;
    
    if (mem_120143_cached_sizze_128594 < (size_t) bytes_119766) {
        mem_120143 = realloc(mem_120143, bytes_119766);
        mem_120143_cached_sizze_128594 = bytes_119766;
    }
    if (mem_120146_cached_sizze_128595 < (size_t) bytes_119766) {
        mem_120146 = realloc(mem_120146, bytes_119766);
        mem_120146_cached_sizze_128595 = bytes_119766;
    }
    for (; iter_123382 < end; iter_123382++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123496 = m_112803;
        int64_t gtid_115943 = iter_123382;
        int64_t remnant_123497 = iter_123382 - gtid_115943;
        
        for (int64_t i_123383 = 0; i_123383 < l_n_m_112854; i_123383++) {
            int64_t x_123386 = ((int64_t *) mem_119820.mem)[gtid_115943 *
                                                            l_n_m_112854 +
                                                            i_123383];
            float x_123387 = ((float *) mem_119824.mem)[gtid_115943 *
                                                        l_n_m_112854 +
                                                        i_123383];
            int64_t min_arg_123388 = mul64(t_jump_112811, i_123383);
            int64_t min_res_123389 = smin64(i_112880, min_arg_123388);
            float defunc_0_f_res_123390 = sitofp_i64_f32(min_res_123389);
            float defunc_2_reduce_res_123391;
            float defunc_2_reduce_res_123392;
            float defunc_2_reduce_res_123393;
            float defunc_2_reduce_res_123394;
            float defunc_2_reduce_res_123395;
            float redout_123397;
            float redout_123398;
            float redout_123399;
            float redout_123400;
            float redout_123401;
            
            redout_123397 = 0.0F;
            redout_123398 = 0.0F;
            redout_123399 = 0.0F;
            redout_123400 = 0.0F;
            redout_123401 = 0.0F;
            for (int64_t i_123396 = 0; i_123396 < l_window_112808; i_123396++) {
                bool cond_123402 = sle64(n_112804, i_123396);
                float defunc_0_f_res_123403;
                
                if (cond_123402) {
                    defunc_0_f_res_123403 = 0.0F;
                } else {
                    int64_t i_123404 = add64(x_123386, i_123396);
                    float index_primexp_123405 = sitofp_i64_f32(i_123404);
                    float defunc_0_f_res_f_res_123406 = 1.0F +
                          index_primexp_123405;
                    
                    defunc_0_f_res_123403 = defunc_0_f_res_f_res_123406;
                }
                
                float defunc_0_f_res_123407;
                
                if (cond_123402) {
                    defunc_0_f_res_123407 = 0.0F;
                } else {
                    int64_t i_123408 = add64(x_123386, i_123396);
                    float x_123409 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115943 *
                                                            ctx_param_ext_119914 +
                                                            i_123408 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_123407 = x_123409;
                }
                
                float x_j_123410 = defunc_0_f_res_123403 -
                      defunc_0_f_res_123390;
                float abs_res_123411 = (float) fabs(x_j_123410);
                float tmp1_123412 = abs_res_123411 / x_123387;
                float x_123413 = tmp1_123412 * tmp1_123412;
                float y_123414 = tmp1_123412 * x_123413;
                float tmp2_123415 = 1.0F - y_123414;
                float x_123416 = tmp2_123415 * tmp2_123415;
                float tmp3_123417 = tmp2_123415 * x_123416;
                float w_j_123418 = defunc_0_f_res_123407 * tmp3_123417;
                float xw_j_123419 = x_j_123410 * w_j_123418;
                float x2w_j_123420 = x_j_123410 * xw_j_123419;
                float x3w_j_123421 = x_j_123410 * x2w_j_123420;
                float x4w_j_123422 = x_j_123410 * x3w_j_123421;
                float defunc_1_op_res_123423 = w_j_123418 + redout_123397;
                float defunc_1_op_res_123424 = xw_j_123419 + redout_123398;
                float defunc_1_op_res_123425 = x2w_j_123420 + redout_123399;
                float defunc_1_op_res_123426 = x3w_j_123421 + redout_123400;
                float defunc_1_op_res_123427 = x4w_j_123422 + redout_123401;
                float redout_tmp_123500 = defunc_1_op_res_123423;
                float redout_tmp_123501 = defunc_1_op_res_123424;
                float redout_tmp_123502 = defunc_1_op_res_123425;
                float redout_tmp_123503 = defunc_1_op_res_123426;
                float redout_tmp_123504 = defunc_1_op_res_123427;
                
                redout_123397 = redout_tmp_123500;
                redout_123398 = redout_tmp_123501;
                redout_123399 = redout_tmp_123502;
                redout_123400 = redout_tmp_123503;
                redout_123401 = redout_tmp_123504;
            }
            defunc_2_reduce_res_123391 = redout_123397;
            defunc_2_reduce_res_123392 = redout_123398;
            defunc_2_reduce_res_123393 = redout_123399;
            defunc_2_reduce_res_123394 = redout_123400;
            defunc_2_reduce_res_123395 = redout_123401;
            
            float x_123428 = defunc_2_reduce_res_123393 *
                  defunc_2_reduce_res_123395;
            float y_123429 = defunc_2_reduce_res_123394 *
                  defunc_2_reduce_res_123394;
            float a12_123430 = x_123428 - y_123429;
            float x_123431 = defunc_2_reduce_res_123393 *
                  defunc_2_reduce_res_123394;
            float y_123432 = defunc_2_reduce_res_123392 *
                  defunc_2_reduce_res_123395;
            float b12_123433 = x_123431 - y_123432;
            float x_123434 = defunc_2_reduce_res_123392 *
                  defunc_2_reduce_res_123394;
            float y_123435 = defunc_2_reduce_res_123393 *
                  defunc_2_reduce_res_123393;
            float c12_123436 = x_123434 - y_123435;
            float x_123437 = defunc_2_reduce_res_123391 *
                  defunc_2_reduce_res_123395;
            float b2_123438 = x_123437 - y_123435;
            float x_123439 = defunc_2_reduce_res_123392 *
                  defunc_2_reduce_res_123393;
            float y_123440 = defunc_2_reduce_res_123391 *
                  defunc_2_reduce_res_123394;
            float c2_123441 = x_123439 - y_123440;
            float x_123442 = defunc_2_reduce_res_123391 * a12_123430;
            float y_123443 = defunc_2_reduce_res_123392 * b12_123433;
            float x_123444 = x_123442 + y_123443;
            float y_123445 = defunc_2_reduce_res_123393 * c12_123436;
            float y_123446 = x_123444 + y_123445;
            float det_123447 = 1.0F / y_123446;
            float a12_123448 = a12_123430 * det_123447;
            float b12_123449 = b12_123433 * det_123447;
            float c12_123450 = c12_123436 * det_123447;
            float b2_123451 = b2_123438 * det_123447;
            float c2_123452 = c2_123441 * det_123447;
            float defunc_2_reduce_res_123453;
            float defunc_2_reduce_res_123454;
            float redout_123456;
            float redout_123457;
            
            redout_123456 = 0.0F;
            redout_123457 = 0.0F;
            for (int64_t i_123455 = 0; i_123455 < l_window_112808; i_123455++) {
                bool cond_123458 = sle64(n_112804, i_123455);
                float defunc_0_f_res_123459;
                
                if (cond_123458) {
                    defunc_0_f_res_123459 = 0.0F;
                } else {
                    int64_t i_123460 = add64(x_123386, i_123455);
                    float index_primexp_123461 = sitofp_i64_f32(i_123460);
                    float defunc_0_f_res_f_res_123462 = 1.0F +
                          index_primexp_123461;
                    
                    defunc_0_f_res_123459 = defunc_0_f_res_f_res_123462;
                }
                
                float defunc_0_f_res_123463;
                
                if (cond_123458) {
                    defunc_0_f_res_123463 = 0.0F;
                } else {
                    int64_t i_123464 = add64(x_123386, i_123455);
                    float x_123465 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_115943 *
                                                            ctx_param_ext_119914 +
                                                            i_123464 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_123463 = x_123465;
                }
                
                float x_j_123466 = defunc_0_f_res_123459 -
                      defunc_0_f_res_123390;
                float abs_res_123467 = (float) fabs(x_j_123466);
                float tmp1_123468 = abs_res_123467 / x_123387;
                float x_123469 = tmp1_123468 * tmp1_123468;
                float y_123470 = tmp1_123468 * x_123469;
                float tmp2_123471 = 1.0F - y_123470;
                float x_123472 = tmp2_123471 * tmp2_123471;
                float tmp3_123473 = tmp2_123471 * x_123472;
                float tmp4_123474 = defunc_0_f_res_123463 * tmp3_123473;
                float defunc_1_f_res_123475 = x_j_123466 * tmp4_123474;
                float defunc_1_f_res_123476 = x_j_123466 *
                      defunc_1_f_res_123475;
                float defunc_0_f_res_123477;
                
                if (cond_123458) {
                    defunc_0_f_res_123477 = 0.0F;
                } else {
                    int64_t i_123478 = add64(x_123386, i_123455);
                    float x_123479 = ((float *) mem_120064.mem)[gtid_115943 *
                                                                n_112804 +
                                                                i_123478];
                    
                    defunc_0_f_res_123477 = x_123479;
                }
                
                float x_123480 = a12_123448 * tmp4_123474;
                float y_123481 = b12_123449 * defunc_1_f_res_123475;
                float x_123482 = x_123480 + y_123481;
                float y_123483 = c12_123450 * defunc_1_f_res_123476;
                float x_123484 = x_123482 + y_123483;
                float defunc_9_fit_fun_res_123485 = defunc_0_f_res_123477 *
                      x_123484;
                float x_123486 = b12_123449 * tmp4_123474;
                float y_123487 = b2_123451 * defunc_1_f_res_123475;
                float x_123488 = x_123486 + y_123487;
                float y_123489 = c2_123452 * defunc_1_f_res_123476;
                float x_123490 = x_123488 + y_123489;
                float defunc_9_slope_fun_res_123491 = defunc_0_f_res_123477 *
                      x_123490;
                float defunc_1_op_res_123492 = defunc_9_fit_fun_res_123485 +
                      redout_123456;
                float defunc_1_op_res_123493 = defunc_9_slope_fun_res_123491 +
                      redout_123457;
                float redout_tmp_123505 = defunc_1_op_res_123492;
                float redout_tmp_123506 = defunc_1_op_res_123493;
                
                redout_123456 = redout_tmp_123505;
                redout_123457 = redout_tmp_123506;
            }
            defunc_2_reduce_res_123453 = redout_123456;
            defunc_2_reduce_res_123454 = redout_123457;
            ((float *) mem_120143)[i_123383] = defunc_2_reduce_res_123453;
            ((float *) mem_120146)[i_123383] = defunc_2_reduce_res_123454;
        }
        memmove(mem_120174.mem + gtid_115943 * l_n_m_112854 * (int64_t) 4,
                mem_120143 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120178.mem + gtid_115943 * l_n_m_112854 * (int64_t) 4,
                mem_120146 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120143);
    free(mem_120146);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128593_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128593_end -
                 futhark_mc_segmap_parloop_128593_start;
        
        ctx->futhark_mc_segmap_parloop_128593_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128593_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128593_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128591(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115942 = tid;
    int num_tasks_123381 = info.nsubtasks;
    struct futhark_mc_task_128590 *futhark_mc_task_128590 =
                                  (struct futhark_mc_task_128590 *) args;
    struct futhark_context *ctx = futhark_mc_task_128590->ctx;
    uint64_t futhark_mc_segmap_task_128591_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128591_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128590->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128590->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128590->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128590->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128590->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128590->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128590->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128590->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128590->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128590->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128590->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128590->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128590->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128590->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120174 = {.desc ="mem_120174", .mem =
                                  futhark_mc_task_128590->free_mem_120174,
                                  .size =0, .references =NULL};
    struct memblock mem_120178 = {.desc ="mem_120178", .mem =
                                  futhark_mc_task_128590->free_mem_120178,
                                  .size =0, .references =NULL};
    int64_t iter_123382;
    struct futhark_mc_segmap_parloop_struct_128592
    futhark_mc_segmap_parloop_struct_128592;
    
    futhark_mc_segmap_parloop_struct_128592.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128592.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128592.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128592.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128592.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128592.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128592.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128592.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128592.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128592.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128592.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128592.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128592.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128592.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128592.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128592.free_mem_120174 = mem_120174.mem;
    futhark_mc_segmap_parloop_struct_128592.free_mem_120178 = mem_120178.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128593_task;
    
    futhark_mc_segmap_parloop_128593_task.name =
        "futhark_mc_segmap_parloop_128593";
    futhark_mc_segmap_parloop_128593_task.fn = futhark_mc_segmap_parloop_128593;
    futhark_mc_segmap_parloop_128593_task.args =
        &futhark_mc_segmap_parloop_struct_128592;
    futhark_mc_segmap_parloop_128593_task.iterations = iterations;
    futhark_mc_segmap_parloop_128593_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128593_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128593_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128593_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128593_task);
    
    if (futhark_mc_segmap_parloop_128593_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128593_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128593_total_end -
                 futhark_mc_segmap_parloop_128593_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128593_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128593_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128593_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128591_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128591_end -
                 futhark_mc_segmap_task_128591_start;
        
        ctx->futhark_mc_segmap_task_128591_runs[tid]++;
        ctx->futhark_mc_segmap_task_128591_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128591_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128597 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120174;
    char *free_mem_120178;
};
struct futhark_mc_task_128601 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115945;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120137;
    char *free_mem_120140;
};
struct futhark_mc_segmap_parloop_struct_128603 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115945;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120137;
    char *free_mem_120140;
};
static int futhark_mc_segmap_parloop_128604(void *args, int64_t start,
                                            int64_t end, int flat_tid_115946,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128603
    *futhark_mc_segmap_parloop_struct_128603 =
    (struct futhark_mc_segmap_parloop_struct_128603 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128603->ctx;
    uint64_t futhark_mc_segmap_parloop_128604_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128604_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128603->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128603->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128603->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128603->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128603->free_i_112880;
    int64_t gtid_115945 =
            futhark_mc_segmap_parloop_struct_128603->free_gtid_115945;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128603->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128603->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128603->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128603->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128603->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128603->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128603->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120137 = {.desc ="mem_120137", .mem =
                                  futhark_mc_segmap_parloop_struct_128603->free_mem_120137,
                                  .size =0, .references =NULL};
    struct memblock mem_120140 = {.desc ="mem_120140", .mem =
                                  futhark_mc_segmap_parloop_struct_128603->free_mem_120140,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123732 = start;
    
    for (; iter_123732 < end; iter_123732++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123804 = l_n_m_112854;
        int64_t gtid_115947 = iter_123732;
        int64_t remnant_123805 = iter_123732 - gtid_115947;
        int64_t x_123621 = ((int64_t *) mem_119820.mem)[gtid_115945 *
                                                        l_n_m_112854 +
                                                        gtid_115947];
        float x_123622 = ((float *) mem_119824.mem)[gtid_115945 * l_n_m_112854 +
                                                    gtid_115947];
        int64_t min_arg_123623 = mul64(t_jump_112811, gtid_115947);
        int64_t min_res_123624 = smin64(i_112880, min_arg_123623);
        float defunc_0_f_res_123625 = sitofp_i64_f32(min_res_123624);
        float defunc_2_reduce_res_123626;
        float defunc_2_reduce_res_123627;
        float defunc_2_reduce_res_123628;
        float defunc_2_reduce_res_123629;
        float defunc_2_reduce_res_123630;
        float redout_123734;
        float redout_123735;
        float redout_123736;
        float redout_123737;
        float redout_123738;
        
        redout_123734 = 0.0F;
        redout_123735 = 0.0F;
        redout_123736 = 0.0F;
        redout_123737 = 0.0F;
        redout_123738 = 0.0F;
        for (int64_t i_123733 = 0; i_123733 < l_window_112808; i_123733++) {
            bool cond_123739 = sle64(n_112804, i_123733);
            float defunc_0_f_res_123740;
            
            if (cond_123739) {
                defunc_0_f_res_123740 = 0.0F;
            } else {
                int64_t i_123741 = add64(x_123621, i_123733);
                float index_primexp_123742 = sitofp_i64_f32(i_123741);
                float defunc_0_f_res_f_res_123743 = 1.0F + index_primexp_123742;
                
                defunc_0_f_res_123740 = defunc_0_f_res_f_res_123743;
            }
            
            float defunc_0_f_res_123744;
            
            if (cond_123739) {
                defunc_0_f_res_123744 = 0.0F;
            } else {
                int64_t i_123745 = add64(x_123621, i_123733);
                float x_123746 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115945 *
                                                        ctx_param_ext_119914 +
                                                        i_123745 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_123744 = x_123746;
            }
            
            float x_j_123747 = defunc_0_f_res_123740 - defunc_0_f_res_123625;
            float abs_res_123748 = (float) fabs(x_j_123747);
            float tmp1_123749 = abs_res_123748 / x_123622;
            float x_123750 = tmp1_123749 * tmp1_123749;
            float y_123751 = tmp1_123749 * x_123750;
            float tmp2_123752 = 1.0F - y_123751;
            float x_123753 = tmp2_123752 * tmp2_123752;
            float tmp3_123754 = tmp2_123752 * x_123753;
            float w_j_123755 = defunc_0_f_res_123744 * tmp3_123754;
            float xw_j_123756 = x_j_123747 * w_j_123755;
            float x2w_j_123757 = x_j_123747 * xw_j_123756;
            float x3w_j_123758 = x_j_123747 * x2w_j_123757;
            float x4w_j_123759 = x_j_123747 * x3w_j_123758;
            float defunc_1_op_res_123760 = w_j_123755 + redout_123734;
            float defunc_1_op_res_123761 = xw_j_123756 + redout_123735;
            float defunc_1_op_res_123762 = x2w_j_123757 + redout_123736;
            float defunc_1_op_res_123763 = x3w_j_123758 + redout_123737;
            float defunc_1_op_res_123764 = x4w_j_123759 + redout_123738;
            float redout_tmp_123806 = defunc_1_op_res_123760;
            float redout_tmp_123807 = defunc_1_op_res_123761;
            float redout_tmp_123808 = defunc_1_op_res_123762;
            float redout_tmp_123809 = defunc_1_op_res_123763;
            float redout_tmp_123810 = defunc_1_op_res_123764;
            
            redout_123734 = redout_tmp_123806;
            redout_123735 = redout_tmp_123807;
            redout_123736 = redout_tmp_123808;
            redout_123737 = redout_tmp_123809;
            redout_123738 = redout_tmp_123810;
        }
        defunc_2_reduce_res_123626 = redout_123734;
        defunc_2_reduce_res_123627 = redout_123735;
        defunc_2_reduce_res_123628 = redout_123736;
        defunc_2_reduce_res_123629 = redout_123737;
        defunc_2_reduce_res_123630 = redout_123738;
        
        float x_123663 = defunc_2_reduce_res_123628 *
              defunc_2_reduce_res_123630;
        float y_123664 = defunc_2_reduce_res_123629 *
              defunc_2_reduce_res_123629;
        float a12_123665 = x_123663 - y_123664;
        float x_123666 = defunc_2_reduce_res_123628 *
              defunc_2_reduce_res_123629;
        float y_123667 = defunc_2_reduce_res_123627 *
              defunc_2_reduce_res_123630;
        float b12_123668 = x_123666 - y_123667;
        float x_123669 = defunc_2_reduce_res_123627 *
              defunc_2_reduce_res_123629;
        float y_123670 = defunc_2_reduce_res_123628 *
              defunc_2_reduce_res_123628;
        float c12_123671 = x_123669 - y_123670;
        float x_123672 = defunc_2_reduce_res_123626 *
              defunc_2_reduce_res_123630;
        float b2_123673 = x_123672 - y_123670;
        float x_123674 = defunc_2_reduce_res_123627 *
              defunc_2_reduce_res_123628;
        float y_123675 = defunc_2_reduce_res_123626 *
              defunc_2_reduce_res_123629;
        float c2_123676 = x_123674 - y_123675;
        float x_123677 = defunc_2_reduce_res_123626 * a12_123665;
        float y_123678 = defunc_2_reduce_res_123627 * b12_123668;
        float x_123679 = x_123677 + y_123678;
        float y_123680 = defunc_2_reduce_res_123628 * c12_123671;
        float y_123681 = x_123679 + y_123680;
        float det_123682 = 1.0F / y_123681;
        float a12_123683 = a12_123665 * det_123682;
        float b12_123684 = b12_123668 * det_123682;
        float c12_123685 = c12_123671 * det_123682;
        float b2_123686 = b2_123673 * det_123682;
        float c2_123687 = c2_123676 * det_123682;
        float defunc_2_reduce_res_123688;
        float defunc_2_reduce_res_123689;
        float redout_123766;
        float redout_123767;
        
        redout_123766 = 0.0F;
        redout_123767 = 0.0F;
        for (int64_t i_123765 = 0; i_123765 < l_window_112808; i_123765++) {
            bool cond_123768 = sle64(n_112804, i_123765);
            float defunc_0_f_res_123769;
            
            if (cond_123768) {
                defunc_0_f_res_123769 = 0.0F;
            } else {
                int64_t i_123770 = add64(x_123621, i_123765);
                float index_primexp_123771 = sitofp_i64_f32(i_123770);
                float defunc_0_f_res_f_res_123772 = 1.0F + index_primexp_123771;
                
                defunc_0_f_res_123769 = defunc_0_f_res_f_res_123772;
            }
            
            float defunc_0_f_res_123773;
            
            if (cond_123768) {
                defunc_0_f_res_123773 = 0.0F;
            } else {
                int64_t i_123774 = add64(x_123621, i_123765);
                float x_123775 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_115945 *
                                                        ctx_param_ext_119914 +
                                                        i_123774 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_123773 = x_123775;
            }
            
            float x_j_123776 = defunc_0_f_res_123769 - defunc_0_f_res_123625;
            float abs_res_123777 = (float) fabs(x_j_123776);
            float tmp1_123778 = abs_res_123777 / x_123622;
            float x_123779 = tmp1_123778 * tmp1_123778;
            float y_123780 = tmp1_123778 * x_123779;
            float tmp2_123781 = 1.0F - y_123780;
            float x_123782 = tmp2_123781 * tmp2_123781;
            float tmp3_123783 = tmp2_123781 * x_123782;
            float tmp4_123784 = defunc_0_f_res_123773 * tmp3_123783;
            float defunc_1_f_res_123785 = x_j_123776 * tmp4_123784;
            float defunc_1_f_res_123786 = x_j_123776 * defunc_1_f_res_123785;
            float defunc_0_f_res_123787;
            
            if (cond_123768) {
                defunc_0_f_res_123787 = 0.0F;
            } else {
                int64_t i_123788 = add64(x_123621, i_123765);
                float x_123789 = ((float *) mem_120064.mem)[gtid_115945 *
                                                            n_112804 +
                                                            i_123788];
                
                defunc_0_f_res_123787 = x_123789;
            }
            
            float x_123790 = a12_123683 * tmp4_123784;
            float y_123791 = b12_123684 * defunc_1_f_res_123785;
            float x_123792 = x_123790 + y_123791;
            float y_123793 = c12_123685 * defunc_1_f_res_123786;
            float x_123794 = x_123792 + y_123793;
            float defunc_9_fit_fun_res_123795 = defunc_0_f_res_123787 *
                  x_123794;
            float x_123796 = b12_123684 * tmp4_123784;
            float y_123797 = b2_123686 * defunc_1_f_res_123785;
            float x_123798 = x_123796 + y_123797;
            float y_123799 = c2_123687 * defunc_1_f_res_123786;
            float x_123800 = x_123798 + y_123799;
            float defunc_9_slope_fun_res_123801 = defunc_0_f_res_123787 *
                  x_123800;
            float defunc_1_op_res_123802 = defunc_9_fit_fun_res_123795 +
                  redout_123766;
            float defunc_1_op_res_123803 = defunc_9_slope_fun_res_123801 +
                  redout_123767;
            float redout_tmp_123811 = defunc_1_op_res_123802;
            float redout_tmp_123812 = defunc_1_op_res_123803;
            
            redout_123766 = redout_tmp_123811;
            redout_123767 = redout_tmp_123812;
        }
        defunc_2_reduce_res_123688 = redout_123766;
        defunc_2_reduce_res_123689 = redout_123767;
        ((float *) mem_120137.mem)[gtid_115947] = defunc_2_reduce_res_123688;
        ((float *) mem_120140.mem)[gtid_115947] = defunc_2_reduce_res_123689;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128604_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128604_end -
                 futhark_mc_segmap_parloop_128604_start;
        
        ctx->futhark_mc_segmap_parloop_128604_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128604_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128604_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128602(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115946 = tid;
    int num_tasks_123731 = info.nsubtasks;
    struct futhark_mc_task_128601 *futhark_mc_task_128601 =
                                  (struct futhark_mc_task_128601 *) args;
    struct futhark_context *ctx = futhark_mc_task_128601->ctx;
    uint64_t futhark_mc_segmap_task_128602_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128602_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128601->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128601->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128601->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128601->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128601->free_i_112880;
    int64_t gtid_115945 = futhark_mc_task_128601->free_gtid_115945;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128601->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128601->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128601->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128601->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128601->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128601->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128601->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120137 = {.desc ="mem_120137", .mem =
                                  futhark_mc_task_128601->free_mem_120137,
                                  .size =0, .references =NULL};
    struct memblock mem_120140 = {.desc ="mem_120140", .mem =
                                  futhark_mc_task_128601->free_mem_120140,
                                  .size =0, .references =NULL};
    int64_t iter_123732;
    struct futhark_mc_segmap_parloop_struct_128603
    futhark_mc_segmap_parloop_struct_128603;
    
    futhark_mc_segmap_parloop_struct_128603.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128603.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128603.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128603.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128603.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128603.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128603.free_gtid_115945 = gtid_115945;
    futhark_mc_segmap_parloop_struct_128603.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128603.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128603.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128603.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128603.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128603.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128603.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128603.free_mem_120137 = mem_120137.mem;
    futhark_mc_segmap_parloop_struct_128603.free_mem_120140 = mem_120140.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128604_task;
    
    futhark_mc_segmap_parloop_128604_task.name =
        "futhark_mc_segmap_parloop_128604";
    futhark_mc_segmap_parloop_128604_task.fn = futhark_mc_segmap_parloop_128604;
    futhark_mc_segmap_parloop_128604_task.args =
        &futhark_mc_segmap_parloop_struct_128603;
    futhark_mc_segmap_parloop_128604_task.iterations = iterations;
    futhark_mc_segmap_parloop_128604_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128604_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128604_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128604_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128604_task);
    
    if (futhark_mc_segmap_parloop_128604_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128604_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128604_total_end -
                 futhark_mc_segmap_parloop_128604_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128604_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128604_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128604_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128602_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128602_end -
                 futhark_mc_segmap_task_128602_start;
        
        ctx->futhark_mc_segmap_task_128602_runs[tid]++;
        ctx->futhark_mc_segmap_task_128602_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128602_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128606 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_115945;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    char *free_mem_120137;
    char *free_mem_120140;
};
struct futhark_mc_task_128608 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115945;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123508;
    float free_x_123509;
    float free_defunc_0_f_res_123512;
    float *retval_defunc_2_reduce_res_123513;
    float *retval_defunc_2_reduce_res_123514;
    float *retval_defunc_2_reduce_res_123515;
    float *retval_defunc_2_reduce_res_123516;
    float *retval_defunc_2_reduce_res_123517;
};
struct futhark_mc_segred_stage_1_parloop_struct_128615 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115945;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123508;
    float free_x_123509;
    float free_defunc_0_f_res_123512;
    char *free_reduce_stage_1_tid_res_arr_mem_123893;
    char *free_reduce_stage_1_tid_res_arr_mem_123895;
    char *free_reduce_stage_1_tid_res_arr_mem_123897;
    char *free_reduce_stage_1_tid_res_arr_mem_123899;
    char *free_reduce_stage_1_tid_res_arr_mem_123901;
};
static int futhark_mc_segred_stage_1_parloop_128616(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115950,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128615
    *futhark_mc_segred_stage_1_parloop_struct_128615 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128615 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128615->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128616_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128616_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_n_112804;
    int64_t gtid_115945 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_gtid_115945;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128615->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123508 =
            futhark_mc_segred_stage_1_parloop_struct_128615->free_x_123508;
    float x_123509 =
          futhark_mc_segred_stage_1_parloop_struct_128615->free_x_123509;
    float defunc_0_f_res_123512 =
          futhark_mc_segred_stage_1_parloop_struct_128615->free_defunc_0_f_res_123512;
    struct memblock reduce_stage_1_tid_res_arr_mem_123893 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123893",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128615->free_reduce_stage_1_tid_res_arr_mem_123893,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123895 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123895",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128615->free_reduce_stage_1_tid_res_arr_mem_123895,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123897 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123897",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128615->free_reduce_stage_1_tid_res_arr_mem_123897,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123899 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123899",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128615->free_reduce_stage_1_tid_res_arr_mem_123899,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123901 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123901",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128615->free_reduce_stage_1_tid_res_arr_mem_123901,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123903 = start;
    float x_123814;
    float x_123815;
    float x_123817;
    float x_123818;
    float x_123820;
    float x_123821;
    float x_123823;
    float x_123824;
    float x_123826;
    float x_123827;
    float local_acc_123904 = 0.0F;
    float local_acc_123905 = 0.0F;
    float local_acc_123906 = 0.0F;
    float local_acc_123907 = 0.0F;
    float local_acc_123908 = 0.0F;
    
    for (; iter_123903 < end; iter_123903++) {
        int64_t gtid_115951 = iter_123903;
        bool cond_123829 = sle64(n_112804, gtid_115951);
        float defunc_0_f_res_123830;
        
        if (cond_123829) {
            defunc_0_f_res_123830 = 0.0F;
        } else {
            int64_t i_123831 = add64(gtid_115951, x_123508);
            float index_primexp_123832 = sitofp_i64_f32(i_123831);
            float defunc_0_f_res_f_res_123833 = 1.0F + index_primexp_123832;
            
            defunc_0_f_res_123830 = defunc_0_f_res_f_res_123833;
        }
        
        float defunc_0_f_res_123834;
        
        if (cond_123829) {
            defunc_0_f_res_123834 = 0.0F;
        } else {
            int64_t i_123835 = add64(gtid_115951, x_123508);
            float x_123836 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115945 *
                                                    ctx_param_ext_119914 +
                                                    i_123835 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_123834 = x_123836;
        }
        
        float x_j_123837 = defunc_0_f_res_123830 - defunc_0_f_res_123512;
        float abs_res_123838 = (float) fabs(x_j_123837);
        float tmp1_123839 = abs_res_123838 / x_123509;
        float x_123840 = tmp1_123839 * tmp1_123839;
        float y_123841 = tmp1_123839 * x_123840;
        float tmp2_123842 = 1.0F - y_123841;
        float x_123843 = tmp2_123842 * tmp2_123842;
        float tmp3_123844 = tmp2_123842 * x_123843;
        float w_j_123845 = defunc_0_f_res_123834 * tmp3_123844;
        float xw_j_123846 = x_j_123837 * w_j_123845;
        float x2w_j_123847 = x_j_123837 * xw_j_123846;
        float x3w_j_123848 = x_j_123837 * x2w_j_123847;
        float x4w_j_123849 = x_j_123837 * x3w_j_123848;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123814 = local_acc_123904;
        }
        // Load next params
        {
            x_123815 = w_j_123845;
        }
        // Red body
        {
            float defunc_1_op_res_123816 = x_123814 + x_123815;
            
            local_acc_123904 = defunc_1_op_res_123816;
        }
        // Load accum params
        {
            x_123817 = local_acc_123905;
        }
        // Load next params
        {
            x_123818 = xw_j_123846;
        }
        // Red body
        {
            float defunc_1_op_res_123819 = x_123817 + x_123818;
            
            local_acc_123905 = defunc_1_op_res_123819;
        }
        // Load accum params
        {
            x_123820 = local_acc_123906;
        }
        // Load next params
        {
            x_123821 = x2w_j_123847;
        }
        // Red body
        {
            float defunc_1_op_res_123822 = x_123820 + x_123821;
            
            local_acc_123906 = defunc_1_op_res_123822;
        }
        // Load accum params
        {
            x_123823 = local_acc_123907;
        }
        // Load next params
        {
            x_123824 = x3w_j_123848;
        }
        // Red body
        {
            float defunc_1_op_res_123825 = x_123823 + x_123824;
            
            local_acc_123907 = defunc_1_op_res_123825;
        }
        // Load accum params
        {
            x_123826 = local_acc_123908;
        }
        // Load next params
        {
            x_123827 = x4w_j_123849;
        }
        // Red body
        {
            float defunc_1_op_res_123828 = x_123826 + x_123827;
            
            local_acc_123908 = defunc_1_op_res_123828;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123893.mem)[flat_tid_115950] =
        local_acc_123904;
    ((float *) reduce_stage_1_tid_res_arr_mem_123895.mem)[flat_tid_115950] =
        local_acc_123905;
    ((float *) reduce_stage_1_tid_res_arr_mem_123897.mem)[flat_tid_115950] =
        local_acc_123906;
    ((float *) reduce_stage_1_tid_res_arr_mem_123899.mem)[flat_tid_115950] =
        local_acc_123907;
    ((float *) reduce_stage_1_tid_res_arr_mem_123901.mem)[flat_tid_115950] =
        local_acc_123908;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128616_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128616_end -
                 futhark_mc_segred_stage_1_parloop_128616_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128616_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128616_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128616_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128609(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115950 = tid;
    int num_tasks_123892 = info.nsubtasks;
    struct futhark_mc_task_128608 *futhark_mc_task_128608 =
                                  (struct futhark_mc_task_128608 *) args;
    struct futhark_context *ctx = futhark_mc_task_128608->ctx;
    uint64_t futhark_mc_segred_task_128609_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128609_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128608->free_n_112804;
    int64_t gtid_115945 = futhark_mc_task_128608->free_gtid_115945;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128608->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128608->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128608->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128608->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123508 = futhark_mc_task_128608->free_x_123508;
    float x_123509 = futhark_mc_task_128608->free_x_123509;
    float defunc_0_f_res_123512 =
          futhark_mc_task_128608->free_defunc_0_f_res_123512;
    float defunc_2_reduce_res_123513 =
          *futhark_mc_task_128608->retval_defunc_2_reduce_res_123513;
    float defunc_2_reduce_res_123514 =
          *futhark_mc_task_128608->retval_defunc_2_reduce_res_123514;
    float defunc_2_reduce_res_123515 =
          *futhark_mc_task_128608->retval_defunc_2_reduce_res_123515;
    float defunc_2_reduce_res_123516 =
          *futhark_mc_task_128608->retval_defunc_2_reduce_res_123516;
    float defunc_2_reduce_res_123517 =
          *futhark_mc_task_128608->retval_defunc_2_reduce_res_123517;
    size_t reduce_stage_1_tid_res_arr_mem_123893_cached_sizze_128610 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123893 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123895_cached_sizze_128611 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123895 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123897_cached_sizze_128612 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123897 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123899_cached_sizze_128613 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123899 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123901_cached_sizze_128614 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123901 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123893_cached_sizze_128610 <
        (size_t) ((int64_t) 4 * num_tasks_123892)) {
        reduce_stage_1_tid_res_arr_mem_123893 =
            realloc(reduce_stage_1_tid_res_arr_mem_123893, (int64_t) 4 *
                    num_tasks_123892);
        reduce_stage_1_tid_res_arr_mem_123893_cached_sizze_128610 =
            (int64_t) 4 * num_tasks_123892;
    }
    if (reduce_stage_1_tid_res_arr_mem_123895_cached_sizze_128611 <
        (size_t) ((int64_t) 4 * num_tasks_123892)) {
        reduce_stage_1_tid_res_arr_mem_123895 =
            realloc(reduce_stage_1_tid_res_arr_mem_123895, (int64_t) 4 *
                    num_tasks_123892);
        reduce_stage_1_tid_res_arr_mem_123895_cached_sizze_128611 =
            (int64_t) 4 * num_tasks_123892;
    }
    if (reduce_stage_1_tid_res_arr_mem_123897_cached_sizze_128612 <
        (size_t) ((int64_t) 4 * num_tasks_123892)) {
        reduce_stage_1_tid_res_arr_mem_123897 =
            realloc(reduce_stage_1_tid_res_arr_mem_123897, (int64_t) 4 *
                    num_tasks_123892);
        reduce_stage_1_tid_res_arr_mem_123897_cached_sizze_128612 =
            (int64_t) 4 * num_tasks_123892;
    }
    if (reduce_stage_1_tid_res_arr_mem_123899_cached_sizze_128613 <
        (size_t) ((int64_t) 4 * num_tasks_123892)) {
        reduce_stage_1_tid_res_arr_mem_123899 =
            realloc(reduce_stage_1_tid_res_arr_mem_123899, (int64_t) 4 *
                    num_tasks_123892);
        reduce_stage_1_tid_res_arr_mem_123899_cached_sizze_128613 =
            (int64_t) 4 * num_tasks_123892;
    }
    if (reduce_stage_1_tid_res_arr_mem_123901_cached_sizze_128614 <
        (size_t) ((int64_t) 4 * num_tasks_123892)) {
        reduce_stage_1_tid_res_arr_mem_123901 =
            realloc(reduce_stage_1_tid_res_arr_mem_123901, (int64_t) 4 *
                    num_tasks_123892);
        reduce_stage_1_tid_res_arr_mem_123901_cached_sizze_128614 =
            (int64_t) 4 * num_tasks_123892;
    }
    
    int64_t iter_123903;
    struct futhark_mc_segred_stage_1_parloop_struct_128615
    futhark_mc_segred_stage_1_parloop_struct_128615;
    
    futhark_mc_segred_stage_1_parloop_struct_128615.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_gtid_115945 =
        gtid_115945;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_x_123508 = x_123508;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_x_123509 = x_123509;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_defunc_0_f_res_123512 =
        defunc_0_f_res_123512;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_reduce_stage_1_tid_res_arr_mem_123893 =
        reduce_stage_1_tid_res_arr_mem_123893;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_reduce_stage_1_tid_res_arr_mem_123895 =
        reduce_stage_1_tid_res_arr_mem_123895;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_reduce_stage_1_tid_res_arr_mem_123897 =
        reduce_stage_1_tid_res_arr_mem_123897;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_reduce_stage_1_tid_res_arr_mem_123899 =
        reduce_stage_1_tid_res_arr_mem_123899;
    futhark_mc_segred_stage_1_parloop_struct_128615.free_reduce_stage_1_tid_res_arr_mem_123901 =
        reduce_stage_1_tid_res_arr_mem_123901;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128616_task;
    
    futhark_mc_segred_stage_1_parloop_128616_task.name =
        "futhark_mc_segred_stage_1_parloop_128616";
    futhark_mc_segred_stage_1_parloop_128616_task.fn =
        futhark_mc_segred_stage_1_parloop_128616;
    futhark_mc_segred_stage_1_parloop_128616_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128615;
    futhark_mc_segred_stage_1_parloop_128616_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128616_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128616_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128616_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128616_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128616_task);
    
    if (futhark_mc_segred_stage_1_parloop_128616_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128616_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128616_total_end -
                 futhark_mc_segred_stage_1_parloop_128616_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128616_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128616_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128616_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123513 = 0.0F;
        defunc_2_reduce_res_123514 = 0.0F;
        defunc_2_reduce_res_123515 = 0.0F;
        defunc_2_reduce_res_123516 = 0.0F;
        defunc_2_reduce_res_123517 = 0.0F;
    }
    
    float x_123909;
    float x_123910;
    float x_123912;
    float x_123913;
    float x_123915;
    float x_123916;
    float x_123918;
    float x_123919;
    float x_123921;
    float x_123922;
    
    for (int32_t i_123924 = 0; i_123924 < num_tasks_123892; i_123924++) {
        flat_tid_115950 = i_123924;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123909 = defunc_2_reduce_res_123513;
            }
            // load next params
            {
                x_123910 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123893)[flat_tid_115950];
            }
            // red body
            {
                float defunc_1_op_res_123911 = x_123909 + x_123910;
                
                defunc_2_reduce_res_123513 = defunc_1_op_res_123911;
            }
            // load acc params
            {
                x_123912 = defunc_2_reduce_res_123514;
            }
            // load next params
            {
                x_123913 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123895)[flat_tid_115950];
            }
            // red body
            {
                float defunc_1_op_res_123914 = x_123912 + x_123913;
                
                defunc_2_reduce_res_123514 = defunc_1_op_res_123914;
            }
            // load acc params
            {
                x_123915 = defunc_2_reduce_res_123515;
            }
            // load next params
            {
                x_123916 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123897)[flat_tid_115950];
            }
            // red body
            {
                float defunc_1_op_res_123917 = x_123915 + x_123916;
                
                defunc_2_reduce_res_123515 = defunc_1_op_res_123917;
            }
            // load acc params
            {
                x_123918 = defunc_2_reduce_res_123516;
            }
            // load next params
            {
                x_123919 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123899)[flat_tid_115950];
            }
            // red body
            {
                float defunc_1_op_res_123920 = x_123918 + x_123919;
                
                defunc_2_reduce_res_123516 = defunc_1_op_res_123920;
            }
            // load acc params
            {
                x_123921 = defunc_2_reduce_res_123517;
            }
            // load next params
            {
                x_123922 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123901)[flat_tid_115950];
            }
            // red body
            {
                float defunc_1_op_res_123923 = x_123921 + x_123922;
                
                defunc_2_reduce_res_123517 = defunc_1_op_res_123923;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123893);
    free(reduce_stage_1_tid_res_arr_mem_123895);
    free(reduce_stage_1_tid_res_arr_mem_123897);
    free(reduce_stage_1_tid_res_arr_mem_123899);
    free(reduce_stage_1_tid_res_arr_mem_123901);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128609_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128609_end -
                 futhark_mc_segred_task_128609_start;
        
        ctx->futhark_mc_segred_task_128609_runs[tid]++;
        ctx->futhark_mc_segred_task_128609_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128609_iter[tid] += iterations;
    }
    *futhark_mc_task_128608->retval_defunc_2_reduce_res_123513 =
        defunc_2_reduce_res_123513;
    *futhark_mc_task_128608->retval_defunc_2_reduce_res_123514 =
        defunc_2_reduce_res_123514;
    *futhark_mc_task_128608->retval_defunc_2_reduce_res_123515 =
        defunc_2_reduce_res_123515;
    *futhark_mc_task_128608->retval_defunc_2_reduce_res_123516 =
        defunc_2_reduce_res_123516;
    *futhark_mc_task_128608->retval_defunc_2_reduce_res_123517 =
        defunc_2_reduce_res_123517;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128617 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115945;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_123508;
    float free_x_123509;
    float free_defunc_0_f_res_123512;
    float free_a12_123574;
    float free_b12_123575;
    float free_c12_123576;
    float free_b2_123577;
    float free_c2_123578;
    float *retval_defunc_2_reduce_res_123579;
    float *retval_defunc_2_reduce_res_123580;
};
struct futhark_mc_segred_stage_1_parloop_struct_128621 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_115945;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_x_123508;
    float free_x_123509;
    float free_defunc_0_f_res_123512;
    float free_a12_123574;
    float free_b12_123575;
    float free_c12_123576;
    float free_b2_123577;
    float free_c2_123578;
    char *free_reduce_stage_1_tid_res_arr_mem_123926;
    char *free_reduce_stage_1_tid_res_arr_mem_123928;
};
static int futhark_mc_segred_stage_1_parloop_128622(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_115952,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128621
    *futhark_mc_segred_stage_1_parloop_struct_128621 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128621 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128621->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128622_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128622_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_n_112804;
    int64_t gtid_115945 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_gtid_115945;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128621->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128621->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123508 =
            futhark_mc_segred_stage_1_parloop_struct_128621->free_x_123508;
    float x_123509 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_x_123509;
    float defunc_0_f_res_123512 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_defunc_0_f_res_123512;
    float a12_123574 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_a12_123574;
    float b12_123575 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_b12_123575;
    float c12_123576 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_c12_123576;
    float b2_123577 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_b2_123577;
    float c2_123578 =
          futhark_mc_segred_stage_1_parloop_struct_128621->free_c2_123578;
    struct memblock reduce_stage_1_tid_res_arr_mem_123926 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123926",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128621->free_reduce_stage_1_tid_res_arr_mem_123926,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_123928 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_123928",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128621->free_reduce_stage_1_tid_res_arr_mem_123928,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123930 = start;
    float x_123850;
    float x_123851;
    float x_123853;
    float x_123854;
    float local_acc_123931 = 0.0F;
    float local_acc_123932 = 0.0F;
    
    for (; iter_123930 < end; iter_123930++) {
        int64_t gtid_115953 = iter_123930;
        bool cond_123856 = sle64(n_112804, gtid_115953);
        float defunc_0_f_res_123857;
        
        if (cond_123856) {
            defunc_0_f_res_123857 = 0.0F;
        } else {
            int64_t i_123858 = add64(gtid_115953, x_123508);
            float index_primexp_123859 = sitofp_i64_f32(i_123858);
            float defunc_0_f_res_f_res_123860 = 1.0F + index_primexp_123859;
            
            defunc_0_f_res_123857 = defunc_0_f_res_f_res_123860;
        }
        
        float defunc_0_f_res_123861;
        
        if (cond_123856) {
            defunc_0_f_res_123861 = 0.0F;
        } else {
            int64_t i_123862 = add64(gtid_115953, x_123508);
            float x_123863 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_115945 *
                                                    ctx_param_ext_119914 +
                                                    i_123862 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_123861 = x_123863;
        }
        
        float x_j_123864 = defunc_0_f_res_123857 - defunc_0_f_res_123512;
        float abs_res_123865 = (float) fabs(x_j_123864);
        float tmp1_123866 = abs_res_123865 / x_123509;
        float x_123867 = tmp1_123866 * tmp1_123866;
        float y_123868 = tmp1_123866 * x_123867;
        float tmp2_123869 = 1.0F - y_123868;
        float x_123870 = tmp2_123869 * tmp2_123869;
        float tmp3_123871 = tmp2_123869 * x_123870;
        float tmp4_123872 = defunc_0_f_res_123861 * tmp3_123871;
        float defunc_1_f_res_123873 = x_j_123864 * tmp4_123872;
        float defunc_1_f_res_123874 = x_j_123864 * defunc_1_f_res_123873;
        float defunc_0_f_res_123875;
        
        if (cond_123856) {
            defunc_0_f_res_123875 = 0.0F;
        } else {
            int64_t i_123876 = add64(gtid_115953, x_123508);
            float x_123877 = ((float *) mem_120064.mem)[gtid_115945 * n_112804 +
                                                        i_123876];
            
            defunc_0_f_res_123875 = x_123877;
        }
        
        float x_123878 = a12_123574 * tmp4_123872;
        float y_123879 = b12_123575 * defunc_1_f_res_123873;
        float x_123880 = x_123878 + y_123879;
        float y_123881 = c12_123576 * defunc_1_f_res_123874;
        float x_123882 = x_123880 + y_123881;
        float defunc_9_fit_fun_res_123883 = defunc_0_f_res_123875 * x_123882;
        float x_123884 = b12_123575 * tmp4_123872;
        float y_123885 = b2_123577 * defunc_1_f_res_123873;
        float x_123886 = x_123884 + y_123885;
        float y_123887 = c2_123578 * defunc_1_f_res_123874;
        float x_123888 = x_123886 + y_123887;
        float defunc_9_slope_fun_res_123889 = defunc_0_f_res_123875 * x_123888;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_123850 = local_acc_123931;
        }
        // Load next params
        {
            x_123851 = defunc_9_fit_fun_res_123883;
        }
        // Red body
        {
            float defunc_1_op_res_123852 = x_123850 + x_123851;
            
            local_acc_123931 = defunc_1_op_res_123852;
        }
        // Load accum params
        {
            x_123853 = local_acc_123932;
        }
        // Load next params
        {
            x_123854 = defunc_9_slope_fun_res_123889;
        }
        // Red body
        {
            float defunc_1_op_res_123855 = x_123853 + x_123854;
            
            local_acc_123932 = defunc_1_op_res_123855;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_123926.mem)[flat_tid_115952] =
        local_acc_123931;
    ((float *) reduce_stage_1_tid_res_arr_mem_123928.mem)[flat_tid_115952] =
        local_acc_123932;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128622_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128622_end -
                 futhark_mc_segred_stage_1_parloop_128622_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128622_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128622_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128622_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128618(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115952 = tid;
    int num_tasks_123925 = info.nsubtasks;
    struct futhark_mc_task_128617 *futhark_mc_task_128617 =
                                  (struct futhark_mc_task_128617 *) args;
    struct futhark_context *ctx = futhark_mc_task_128617->ctx;
    uint64_t futhark_mc_segred_task_128618_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128618_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128617->free_n_112804;
    int64_t gtid_115945 = futhark_mc_task_128617->free_gtid_115945;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128617->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128617->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128617->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128617->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128617->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123508 = futhark_mc_task_128617->free_x_123508;
    float x_123509 = futhark_mc_task_128617->free_x_123509;
    float defunc_0_f_res_123512 =
          futhark_mc_task_128617->free_defunc_0_f_res_123512;
    float a12_123574 = futhark_mc_task_128617->free_a12_123574;
    float b12_123575 = futhark_mc_task_128617->free_b12_123575;
    float c12_123576 = futhark_mc_task_128617->free_c12_123576;
    float b2_123577 = futhark_mc_task_128617->free_b2_123577;
    float c2_123578 = futhark_mc_task_128617->free_c2_123578;
    float defunc_2_reduce_res_123579 =
          *futhark_mc_task_128617->retval_defunc_2_reduce_res_123579;
    float defunc_2_reduce_res_123580 =
          *futhark_mc_task_128617->retval_defunc_2_reduce_res_123580;
    size_t reduce_stage_1_tid_res_arr_mem_123926_cached_sizze_128619 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123926 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_123928_cached_sizze_128620 = 0;
    char *reduce_stage_1_tid_res_arr_mem_123928 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_123926_cached_sizze_128619 <
        (size_t) ((int64_t) 4 * num_tasks_123925)) {
        reduce_stage_1_tid_res_arr_mem_123926 =
            realloc(reduce_stage_1_tid_res_arr_mem_123926, (int64_t) 4 *
                    num_tasks_123925);
        reduce_stage_1_tid_res_arr_mem_123926_cached_sizze_128619 =
            (int64_t) 4 * num_tasks_123925;
    }
    if (reduce_stage_1_tid_res_arr_mem_123928_cached_sizze_128620 <
        (size_t) ((int64_t) 4 * num_tasks_123925)) {
        reduce_stage_1_tid_res_arr_mem_123928 =
            realloc(reduce_stage_1_tid_res_arr_mem_123928, (int64_t) 4 *
                    num_tasks_123925);
        reduce_stage_1_tid_res_arr_mem_123928_cached_sizze_128620 =
            (int64_t) 4 * num_tasks_123925;
    }
    
    int64_t iter_123930;
    struct futhark_mc_segred_stage_1_parloop_struct_128621
    futhark_mc_segred_stage_1_parloop_struct_128621;
    
    futhark_mc_segred_stage_1_parloop_struct_128621.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_gtid_115945 =
        gtid_115945;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_x_123508 = x_123508;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_x_123509 = x_123509;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_defunc_0_f_res_123512 =
        defunc_0_f_res_123512;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_a12_123574 =
        a12_123574;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_b12_123575 =
        b12_123575;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_c12_123576 =
        c12_123576;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_b2_123577 = b2_123577;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_c2_123578 = c2_123578;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_reduce_stage_1_tid_res_arr_mem_123926 =
        reduce_stage_1_tid_res_arr_mem_123926;
    futhark_mc_segred_stage_1_parloop_struct_128621.free_reduce_stage_1_tid_res_arr_mem_123928 =
        reduce_stage_1_tid_res_arr_mem_123928;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128622_task;
    
    futhark_mc_segred_stage_1_parloop_128622_task.name =
        "futhark_mc_segred_stage_1_parloop_128622";
    futhark_mc_segred_stage_1_parloop_128622_task.fn =
        futhark_mc_segred_stage_1_parloop_128622;
    futhark_mc_segred_stage_1_parloop_128622_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128621;
    futhark_mc_segred_stage_1_parloop_128622_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128622_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128622_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128622_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128622_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128622_task);
    
    if (futhark_mc_segred_stage_1_parloop_128622_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128622_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128622_total_end -
                 futhark_mc_segred_stage_1_parloop_128622_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128622_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128622_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128622_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_123579 = 0.0F;
        defunc_2_reduce_res_123580 = 0.0F;
    }
    
    float x_123933;
    float x_123934;
    float x_123936;
    float x_123937;
    
    for (int32_t i_123939 = 0; i_123939 < num_tasks_123925; i_123939++) {
        flat_tid_115952 = i_123939;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_123933 = defunc_2_reduce_res_123579;
            }
            // load next params
            {
                x_123934 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123926)[flat_tid_115952];
            }
            // red body
            {
                float defunc_1_op_res_123935 = x_123933 + x_123934;
                
                defunc_2_reduce_res_123579 = defunc_1_op_res_123935;
            }
            // load acc params
            {
                x_123936 = defunc_2_reduce_res_123580;
            }
            // load next params
            {
                x_123937 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_123928)[flat_tid_115952];
            }
            // red body
            {
                float defunc_1_op_res_123938 = x_123936 + x_123937;
                
                defunc_2_reduce_res_123580 = defunc_1_op_res_123938;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_123926);
    free(reduce_stage_1_tid_res_arr_mem_123928);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128618_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128618_end -
                 futhark_mc_segred_task_128618_start;
        
        ctx->futhark_mc_segred_task_128618_runs[tid]++;
        ctx->futhark_mc_segred_task_128618_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128618_iter[tid] += iterations;
    }
    *futhark_mc_task_128617->retval_defunc_2_reduce_res_123579 =
        defunc_2_reduce_res_123579;
    *futhark_mc_task_128617->retval_defunc_2_reduce_res_123580 =
        defunc_2_reduce_res_123580;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128607(void *args, int64_t start,
                                            int64_t end, int flat_tid_115948,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128606
    *futhark_mc_segmap_parloop_struct_128606 =
    (struct futhark_mc_segmap_parloop_struct_128606 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128606->ctx;
    uint64_t futhark_mc_segmap_parloop_128607_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128607_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128606->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128606->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128606->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128606->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128606->free_i_112880;
    int64_t gtid_115945 =
            futhark_mc_segmap_parloop_struct_128606->free_gtid_115945;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128606->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128606->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128606->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128606->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128606->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128606->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128606->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120137 = {.desc ="mem_120137", .mem =
                                  futhark_mc_segmap_parloop_struct_128606->free_mem_120137,
                                  .size =0, .references =NULL};
    struct memblock mem_120140 = {.desc ="mem_120140", .mem =
                                  futhark_mc_segmap_parloop_struct_128606->free_mem_120140,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_123813 = start;
    
    for (; iter_123813 < end; iter_123813++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123890 = l_n_m_112854;
        int64_t gtid_115949 = iter_123813;
        int64_t remnant_123891 = iter_123813 - gtid_115949;
        int64_t x_123508 = ((int64_t *) mem_119820.mem)[gtid_115945 *
                                                        l_n_m_112854 +
                                                        gtid_115949];
        float x_123509 = ((float *) mem_119824.mem)[gtid_115945 * l_n_m_112854 +
                                                    gtid_115949];
        int64_t min_arg_123510 = mul64(t_jump_112811, gtid_115949);
        int64_t min_res_123511 = smin64(i_112880, min_arg_123510);
        float defunc_0_f_res_123512 = sitofp_i64_f32(min_res_123511);
        float defunc_2_reduce_res_123513;
        float defunc_2_reduce_res_123514;
        float defunc_2_reduce_res_123515;
        float defunc_2_reduce_res_123516;
        float defunc_2_reduce_res_123517;
        int64_t flat_tid_115950 = (int64_t) 0;
        int32_t num_tasks_123892;
        struct futhark_mc_task_128608 futhark_mc_task_128608;
        
        futhark_mc_task_128608.ctx = ctx;
        futhark_mc_task_128608.free_n_112804 = n_112804;
        futhark_mc_task_128608.free_gtid_115945 = gtid_115945;
        futhark_mc_task_128608.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128608.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128608.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128608.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128608.free_x_123508 = x_123508;
        futhark_mc_task_128608.free_x_123509 = x_123509;
        futhark_mc_task_128608.free_defunc_0_f_res_123512 =
            defunc_0_f_res_123512;
        futhark_mc_task_128608.retval_defunc_2_reduce_res_123513 =
            &defunc_2_reduce_res_123513;
        futhark_mc_task_128608.retval_defunc_2_reduce_res_123514 =
            &defunc_2_reduce_res_123514;
        futhark_mc_task_128608.retval_defunc_2_reduce_res_123515 =
            &defunc_2_reduce_res_123515;
        futhark_mc_task_128608.retval_defunc_2_reduce_res_123516 =
            &defunc_2_reduce_res_123516;
        futhark_mc_task_128608.retval_defunc_2_reduce_res_123517 =
            &defunc_2_reduce_res_123517;
        
        struct scheduler_segop futhark_mc_task_128608_task;
        
        futhark_mc_task_128608_task.args = &futhark_mc_task_128608;
        futhark_mc_task_128608_task.top_level_fn =
            futhark_mc_segred_task_128609;
        futhark_mc_task_128608_task.name = "futhark_mc_segred_task_128609";
        futhark_mc_task_128608_task.iterations = l_window_112808;
        futhark_mc_task_128608_task.task_time =
            &ctx->futhark_mc_segred_task_128609_total_time;
        futhark_mc_task_128608_task.task_iter =
            &ctx->futhark_mc_segred_task_128609_total_iter;
        futhark_mc_task_128608_task.sched = STATIC;
        futhark_mc_task_128608_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128609_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128608_task);
        
        if (futhark_mc_segred_task_128609_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_123554 = defunc_2_reduce_res_123515 *
              defunc_2_reduce_res_123517;
        float y_123555 = defunc_2_reduce_res_123516 *
              defunc_2_reduce_res_123516;
        float a12_123556 = x_123554 - y_123555;
        float x_123557 = defunc_2_reduce_res_123515 *
              defunc_2_reduce_res_123516;
        float y_123558 = defunc_2_reduce_res_123514 *
              defunc_2_reduce_res_123517;
        float b12_123559 = x_123557 - y_123558;
        float x_123560 = defunc_2_reduce_res_123514 *
              defunc_2_reduce_res_123516;
        float y_123561 = defunc_2_reduce_res_123515 *
              defunc_2_reduce_res_123515;
        float c12_123562 = x_123560 - y_123561;
        float x_123563 = defunc_2_reduce_res_123513 *
              defunc_2_reduce_res_123517;
        float b2_123564 = x_123563 - y_123561;
        float x_123565 = defunc_2_reduce_res_123514 *
              defunc_2_reduce_res_123515;
        float y_123566 = defunc_2_reduce_res_123513 *
              defunc_2_reduce_res_123516;
        float c2_123567 = x_123565 - y_123566;
        float x_123568 = defunc_2_reduce_res_123513 * a12_123556;
        float y_123569 = defunc_2_reduce_res_123514 * b12_123559;
        float x_123570 = x_123568 + y_123569;
        float y_123571 = defunc_2_reduce_res_123515 * c12_123562;
        float y_123572 = x_123570 + y_123571;
        float det_123573 = 1.0F / y_123572;
        float a12_123574 = a12_123556 * det_123573;
        float b12_123575 = b12_123559 * det_123573;
        float c12_123576 = c12_123562 * det_123573;
        float b2_123577 = b2_123564 * det_123573;
        float c2_123578 = c2_123567 * det_123573;
        float defunc_2_reduce_res_123579;
        float defunc_2_reduce_res_123580;
        int64_t flat_tid_115952 = (int64_t) 0;
        int32_t num_tasks_123925;
        struct futhark_mc_task_128617 futhark_mc_task_128617;
        
        futhark_mc_task_128617.ctx = ctx;
        futhark_mc_task_128617.free_n_112804 = n_112804;
        futhark_mc_task_128617.free_gtid_115945 = gtid_115945;
        futhark_mc_task_128617.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128617.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128617.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128617.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128617.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128617.free_x_123508 = x_123508;
        futhark_mc_task_128617.free_x_123509 = x_123509;
        futhark_mc_task_128617.free_defunc_0_f_res_123512 =
            defunc_0_f_res_123512;
        futhark_mc_task_128617.free_a12_123574 = a12_123574;
        futhark_mc_task_128617.free_b12_123575 = b12_123575;
        futhark_mc_task_128617.free_c12_123576 = c12_123576;
        futhark_mc_task_128617.free_b2_123577 = b2_123577;
        futhark_mc_task_128617.free_c2_123578 = c2_123578;
        futhark_mc_task_128617.retval_defunc_2_reduce_res_123579 =
            &defunc_2_reduce_res_123579;
        futhark_mc_task_128617.retval_defunc_2_reduce_res_123580 =
            &defunc_2_reduce_res_123580;
        
        struct scheduler_segop futhark_mc_task_128617_task;
        
        futhark_mc_task_128617_task.args = &futhark_mc_task_128617;
        futhark_mc_task_128617_task.top_level_fn =
            futhark_mc_segred_task_128618;
        futhark_mc_task_128617_task.name = "futhark_mc_segred_task_128618";
        futhark_mc_task_128617_task.iterations = l_window_112808;
        futhark_mc_task_128617_task.task_time =
            &ctx->futhark_mc_segred_task_128618_total_time;
        futhark_mc_task_128617_task.task_iter =
            &ctx->futhark_mc_segred_task_128618_total_iter;
        futhark_mc_task_128617_task.sched = STATIC;
        futhark_mc_task_128617_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128618_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128617_task);
        
        if (futhark_mc_segred_task_128618_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120137.mem)[gtid_115949] = defunc_2_reduce_res_123579;
        ((float *) mem_120140.mem)[gtid_115949] = defunc_2_reduce_res_123580;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128607_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128607_end -
                 futhark_mc_segmap_parloop_128607_start;
        
        ctx->futhark_mc_segmap_parloop_128607_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128607_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128607_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128605(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115948 = tid;
    int num_tasks_123731 = info.nsubtasks;
    struct futhark_mc_task_128601 *futhark_mc_task_128601 =
                                  (struct futhark_mc_task_128601 *) args;
    struct futhark_context *ctx = futhark_mc_task_128601->ctx;
    uint64_t futhark_mc_segmap_nested_task_128605_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128605_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128601->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128601->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128601->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128601->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128601->free_i_112880;
    int64_t gtid_115945 = futhark_mc_task_128601->free_gtid_115945;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128601->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128601->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128601->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128601->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128601->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128601->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128601->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120137 = {.desc ="mem_120137", .mem =
                                  futhark_mc_task_128601->free_mem_120137,
                                  .size =0, .references =NULL};
    struct memblock mem_120140 = {.desc ="mem_120140", .mem =
                                  futhark_mc_task_128601->free_mem_120140,
                                  .size =0, .references =NULL};
    int64_t iter_123813;
    struct futhark_mc_segmap_parloop_struct_128606
    futhark_mc_segmap_parloop_struct_128606;
    
    futhark_mc_segmap_parloop_struct_128606.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128606.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128606.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128606.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128606.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128606.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128606.free_gtid_115945 = gtid_115945;
    futhark_mc_segmap_parloop_struct_128606.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128606.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128606.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128606.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128606.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128606.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128606.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128606.free_mem_120137 = mem_120137.mem;
    futhark_mc_segmap_parloop_struct_128606.free_mem_120140 = mem_120140.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128607_task;
    
    futhark_mc_segmap_parloop_128607_task.name =
        "futhark_mc_segmap_parloop_128607";
    futhark_mc_segmap_parloop_128607_task.fn = futhark_mc_segmap_parloop_128607;
    futhark_mc_segmap_parloop_128607_task.args =
        &futhark_mc_segmap_parloop_struct_128606;
    futhark_mc_segmap_parloop_128607_task.iterations = iterations;
    futhark_mc_segmap_parloop_128607_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128607_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128607_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128607_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128607_task);
    
    if (futhark_mc_segmap_parloop_128607_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128607_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128607_total_end -
                 futhark_mc_segmap_parloop_128607_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128607_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128607_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128607_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128605_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128605_end -
                 futhark_mc_segmap_nested_task_128605_start;
        
        ctx->futhark_mc_segmap_nested_task_128605_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128605_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128605_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128598(void *args, int64_t start,
                                            int64_t end, int flat_tid_115944,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128597
    *futhark_mc_segmap_parloop_struct_128597 =
    (struct futhark_mc_segmap_parloop_struct_128597 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128597->ctx;
    uint64_t futhark_mc_segmap_parloop_128598_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128598_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128597->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128597->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128597->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128597->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128597->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128597->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128597->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128597->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128597->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128597->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128597->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128597->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128597->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128597->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120174 = {.desc ="mem_120174", .mem =
                                  futhark_mc_segmap_parloop_struct_128597->free_mem_120174,
                                  .size =0, .references =NULL};
    struct memblock mem_120178 = {.desc ="mem_120178", .mem =
                                  futhark_mc_segmap_parloop_struct_128597->free_mem_120178,
                                  .size =0, .references =NULL};
    size_t mem_120137_cached_sizze_128599 = 0;
    char *mem_120137 = NULL;
    size_t mem_120140_cached_sizze_128600 = 0;
    char *mem_120140 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123507 = start;
    
    if (mem_120137_cached_sizze_128599 < (size_t) bytes_119766) {
        mem_120137 = realloc(mem_120137, bytes_119766);
        mem_120137_cached_sizze_128599 = bytes_119766;
    }
    if (mem_120140_cached_sizze_128600 < (size_t) bytes_119766) {
        mem_120140 = realloc(mem_120140, bytes_119766);
        mem_120140_cached_sizze_128600 = bytes_119766;
    }
    for (; iter_123507 < end; iter_123507++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123729 = m_112803;
        int64_t gtid_115945 = iter_123507;
        int64_t remnant_123730 = iter_123507 - gtid_115945;
        int64_t flat_tid_115946 = (int64_t) 0;
        int32_t num_tasks_123731;
        int64_t flat_tid_115948 = (int64_t) 0;
        struct futhark_mc_task_128601 futhark_mc_task_128601;
        
        futhark_mc_task_128601.ctx = ctx;
        futhark_mc_task_128601.free_n_112804 = n_112804;
        futhark_mc_task_128601.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128601.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128601.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128601.free_i_112880 = i_112880;
        futhark_mc_task_128601.free_gtid_115945 = gtid_115945;
        futhark_mc_task_128601.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128601.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128601.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128601.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128601.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128601.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128601.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128601.free_mem_120137 = mem_120137;
        futhark_mc_task_128601.free_mem_120140 = mem_120140;
        
        struct scheduler_segop futhark_mc_task_128601_task;
        
        futhark_mc_task_128601_task.args = &futhark_mc_task_128601;
        futhark_mc_task_128601_task.top_level_fn =
            futhark_mc_segmap_task_128602;
        futhark_mc_task_128601_task.name = "futhark_mc_segmap_task_128602";
        futhark_mc_task_128601_task.iterations = l_n_m_112854;
        futhark_mc_task_128601_task.task_time =
            &ctx->futhark_mc_segmap_task_128602_total_time;
        futhark_mc_task_128601_task.task_iter =
            &ctx->futhark_mc_segmap_task_128602_total_iter;
        futhark_mc_task_128601_task.sched = STATIC;
        futhark_mc_task_128601_task.nested_fn =
            futhark_mc_segmap_nested_task_128605;
        
        int futhark_mc_segmap_task_128602_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128601_task);
        
        if (futhark_mc_segmap_task_128602_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120174.mem + gtid_115945 * l_n_m_112854 * (int64_t) 4,
                mem_120137 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120178.mem + gtid_115945 * l_n_m_112854 * (int64_t) 4,
                mem_120140 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120137);
    free(mem_120140);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128598_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128598_end -
                 futhark_mc_segmap_parloop_128598_start;
        
        ctx->futhark_mc_segmap_parloop_128598_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128598_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128598_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128596(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_115944 = tid;
    int num_tasks_123381 = info.nsubtasks;
    struct futhark_mc_task_128590 *futhark_mc_task_128590 =
                                  (struct futhark_mc_task_128590 *) args;
    struct futhark_context *ctx = futhark_mc_task_128590->ctx;
    uint64_t futhark_mc_segmap_nested_task_128596_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128596_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128590->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128590->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128590->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128590->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128590->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128590->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128590->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128590->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128590->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128590->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128590->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128590->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128590->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128590->free_mem_120064,
                                  .size =0, .references =NULL};
    struct memblock mem_120174 = {.desc ="mem_120174", .mem =
                                  futhark_mc_task_128590->free_mem_120174,
                                  .size =0, .references =NULL};
    struct memblock mem_120178 = {.desc ="mem_120178", .mem =
                                  futhark_mc_task_128590->free_mem_120178,
                                  .size =0, .references =NULL};
    int64_t iter_123507;
    struct futhark_mc_segmap_parloop_struct_128597
    futhark_mc_segmap_parloop_struct_128597;
    
    futhark_mc_segmap_parloop_struct_128597.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128597.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128597.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128597.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128597.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128597.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128597.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128597.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128597.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128597.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128597.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128597.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128597.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128597.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128597.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128597.free_mem_120174 = mem_120174.mem;
    futhark_mc_segmap_parloop_struct_128597.free_mem_120178 = mem_120178.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128598_task;
    
    futhark_mc_segmap_parloop_128598_task.name =
        "futhark_mc_segmap_parloop_128598";
    futhark_mc_segmap_parloop_128598_task.fn = futhark_mc_segmap_parloop_128598;
    futhark_mc_segmap_parloop_128598_task.args =
        &futhark_mc_segmap_parloop_struct_128597;
    futhark_mc_segmap_parloop_128598_task.iterations = iterations;
    futhark_mc_segmap_parloop_128598_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128598_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128598_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128598_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128598_task);
    
    if (futhark_mc_segmap_parloop_128598_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128598_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128598_total_end -
                 futhark_mc_segmap_parloop_128598_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128598_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128598_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128598_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128596_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128596_end -
                 futhark_mc_segmap_nested_task_128596_start;
        
        ctx->futhark_mc_segmap_nested_task_128596_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128596_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128596_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128623 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120241;
};
struct futhark_mc_segmap_parloop_struct_128625 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120241;
};
static int futhark_mc_segmap_parloop_128626(void *args, int64_t start,
                                            int64_t end, int flat_tid_116308,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128625
    *futhark_mc_segmap_parloop_struct_128625 =
    (struct futhark_mc_segmap_parloop_struct_128625 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128625->ctx;
    uint64_t futhark_mc_segmap_parloop_128626_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128626_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128625->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128625->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128625->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128625->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128625->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128625->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128625->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128625->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128625->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128625->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128625->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128625->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128625->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128625->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 =
            futhark_mc_segmap_parloop_struct_128625->free_bytes_120187;
    struct memblock mem_120241 = {.desc ="mem_120241", .mem =
                                  futhark_mc_segmap_parloop_struct_128625->free_mem_120241,
                                  .size =0, .references =NULL};
    size_t mem_120210_cached_sizze_128627 = 0;
    char *mem_120210 = NULL;
    size_t mem_120220_cached_sizze_128628 = 0;
    char *mem_120220 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123943 = start;
    
    if (mem_120210_cached_sizze_128627 < (size_t) bytes_119766) {
        mem_120210 = realloc(mem_120210, bytes_119766);
        mem_120210_cached_sizze_128627 = bytes_119766;
    }
    if (mem_120220_cached_sizze_128628 < (size_t) bytes_120187) {
        mem_120220 = realloc(mem_120220, bytes_120187);
        mem_120220_cached_sizze_128628 = bytes_120187;
    }
    for (; iter_123943 < end; iter_123943++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_123989 = m_112803;
        int64_t gtid_116309 = iter_123943;
        int64_t remnant_123990 = iter_123943 - gtid_116309;
        
        for (int64_t i_123944 = 0; i_123944 < l_n_m_112854; i_123944++) {
            int64_t x_123946 = ((int64_t *) mem_119820.mem)[gtid_116309 *
                                                            l_n_m_112854 +
                                                            i_123944];
            float x_123947 = ((float *) mem_119824.mem)[gtid_116309 *
                                                        l_n_m_112854 +
                                                        i_123944];
            int64_t min_arg_123948 = mul64(t_jump_112811, i_123944);
            int64_t min_res_123949 = smin64(i_112880, min_arg_123948);
            float defunc_0_f_res_123950 = sitofp_i64_f32(min_res_123949);
            float defunc_2_reduce_res_123952;
            float redout_123955 = 0.0F;
            
            for (int64_t i_123954 = 0; i_123954 < l_window_112808; i_123954++) {
                bool cond_123957 = sle64(n_112804, i_123954);
                float defunc_0_f_res_123958;
                
                if (cond_123957) {
                    defunc_0_f_res_123958 = 0.0F;
                } else {
                    int64_t i_123959 = add64(x_123946, i_123954);
                    float index_primexp_123960 = sitofp_i64_f32(i_123959);
                    float defunc_0_f_res_f_res_123961 = 1.0F +
                          index_primexp_123960;
                    
                    defunc_0_f_res_123958 = defunc_0_f_res_f_res_123961;
                }
                
                float defunc_0_f_res_123962;
                
                if (cond_123957) {
                    defunc_0_f_res_123962 = 0.0F;
                } else {
                    int64_t i_123963 = add64(x_123946, i_123954);
                    float x_123964 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_116309 *
                                                            ctx_param_ext_119914 +
                                                            i_123963 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_123962 = x_123964;
                }
                
                float x_j_123965 = defunc_0_f_res_123958 -
                      defunc_0_f_res_123950;
                float abs_res_123966 = (float) fabs(x_j_123965);
                float tmp1_123967 = abs_res_123966 / x_123947;
                float x_123968 = tmp1_123967 * tmp1_123967;
                float y_123969 = tmp1_123967 * x_123968;
                float tmp2_123970 = 1.0F - y_123969;
                float x_123971 = tmp2_123970 * tmp2_123970;
                float tmp3_123972 = tmp2_123970 * x_123971;
                float tmp4_123973 = defunc_0_f_res_123962 * tmp3_123972;
                float defunc_1_op_res_123974 = tmp4_123973 + redout_123955;
                
                ((float *) mem_120220)[i_123954] = tmp4_123973;
                
                float redout_tmp_123992 = defunc_1_op_res_123974;
                
                redout_123955 = redout_tmp_123992;
            }
            defunc_2_reduce_res_123952 = redout_123955;
            
            float a0_123976 = 1.0F / defunc_2_reduce_res_123952;
            float defunc_2_reduce_res_123977;
            float redout_123979 = 0.0F;
            
            for (int64_t i_123978 = 0; i_123978 < l_window_112808; i_123978++) {
                float x_123980 = ((float *) mem_120220)[i_123978];
                bool cond_123981 = sle64(n_112804, i_123978);
                float defunc_0_f_res_123982;
                
                if (cond_123981) {
                    defunc_0_f_res_123982 = 0.0F;
                } else {
                    int64_t i_123983 = add64(x_123946, i_123978);
                    float x_123984 = ((float *) mem_120064.mem)[gtid_116309 *
                                                                n_112804 +
                                                                i_123983];
                    
                    defunc_0_f_res_123982 = x_123984;
                }
                
                float x_123985 = a0_123976 * x_123980;
                float defunc_9_fit_fun_res_123986 = defunc_0_f_res_123982 *
                      x_123985;
                float defunc_1_op_res_123987 = defunc_9_fit_fun_res_123986 +
                      redout_123979;
                float redout_tmp_123994 = defunc_1_op_res_123987;
                
                redout_123979 = redout_tmp_123994;
            }
            defunc_2_reduce_res_123977 = redout_123979;
            ((float *) mem_120210)[i_123944] = defunc_2_reduce_res_123977;
        }
        memmove(mem_120241.mem + gtid_116309 * l_n_m_112854 * (int64_t) 4,
                mem_120210 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120210);
    free(mem_120220);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128626_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128626_end -
                 futhark_mc_segmap_parloop_128626_start;
        
        ctx->futhark_mc_segmap_parloop_128626_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128626_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128626_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128624(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116308 = tid;
    int num_tasks_123942 = info.nsubtasks;
    struct futhark_mc_task_128623 *futhark_mc_task_128623 =
                                  (struct futhark_mc_task_128623 *) args;
    struct futhark_context *ctx = futhark_mc_task_128623->ctx;
    uint64_t futhark_mc_segmap_task_128624_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128624_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128623->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128623->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128623->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128623->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128623->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128623->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128623->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128623->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128623->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128623->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128623->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128623->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128623->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128623->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 = futhark_mc_task_128623->free_bytes_120187;
    struct memblock mem_120241 = {.desc ="mem_120241", .mem =
                                  futhark_mc_task_128623->free_mem_120241,
                                  .size =0, .references =NULL};
    int64_t iter_123943;
    struct futhark_mc_segmap_parloop_struct_128625
    futhark_mc_segmap_parloop_struct_128625;
    
    futhark_mc_segmap_parloop_struct_128625.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128625.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128625.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128625.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128625.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128625.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128625.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128625.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128625.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128625.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128625.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128625.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128625.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128625.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128625.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128625.free_bytes_120187 = bytes_120187;
    futhark_mc_segmap_parloop_struct_128625.free_mem_120241 = mem_120241.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128626_task;
    
    futhark_mc_segmap_parloop_128626_task.name =
        "futhark_mc_segmap_parloop_128626";
    futhark_mc_segmap_parloop_128626_task.fn = futhark_mc_segmap_parloop_128626;
    futhark_mc_segmap_parloop_128626_task.args =
        &futhark_mc_segmap_parloop_struct_128625;
    futhark_mc_segmap_parloop_128626_task.iterations = iterations;
    futhark_mc_segmap_parloop_128626_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128626_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128626_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128626_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128626_task);
    
    if (futhark_mc_segmap_parloop_128626_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128626_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128626_total_end -
                 futhark_mc_segmap_parloop_128626_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128626_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128626_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128626_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128624_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128624_end -
                 futhark_mc_segmap_task_128624_start;
        
        ctx->futhark_mc_segmap_task_128624_runs[tid]++;
        ctx->futhark_mc_segmap_task_128624_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128624_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128630 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120241;
};
struct futhark_mc_task_128633 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116311;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120207;
};
struct futhark_mc_segmap_parloop_struct_128635 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116311;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120207;
};
static int futhark_mc_segmap_parloop_128636(void *args, int64_t start,
                                            int64_t end, int flat_tid_116312,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128635
    *futhark_mc_segmap_parloop_struct_128635 =
    (struct futhark_mc_segmap_parloop_struct_128635 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128635->ctx;
    uint64_t futhark_mc_segmap_parloop_128636_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128636_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128635->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128635->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128635->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128635->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128635->free_i_112880;
    int64_t gtid_116311 =
            futhark_mc_segmap_parloop_struct_128635->free_gtid_116311;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128635->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128635->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128635->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128635->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128635->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128635->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128635->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 =
            futhark_mc_segmap_parloop_struct_128635->free_bytes_120187;
    struct memblock mem_120207 = {.desc ="mem_120207", .mem =
                                  futhark_mc_segmap_parloop_struct_128635->free_mem_120207,
                                  .size =0, .references =NULL};
    size_t mem_124041_cached_sizze_128637 = 0;
    char *mem_124041 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124082 = start;
    
    if (mem_124041_cached_sizze_128637 < (size_t) bytes_120187) {
        mem_124041 = realloc(mem_124041, bytes_120187);
        mem_124041_cached_sizze_128637 = bytes_120187;
    }
    for (; iter_124082 < end; iter_124082++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124115 = l_n_m_112854;
        int64_t gtid_116313 = iter_124082;
        int64_t remnant_124116 = iter_124082 - gtid_116313;
        int64_t x_124036 = ((int64_t *) mem_119820.mem)[gtid_116311 *
                                                        l_n_m_112854 +
                                                        gtid_116313];
        float x_124037 = ((float *) mem_119824.mem)[gtid_116311 * l_n_m_112854 +
                                                    gtid_116313];
        int64_t min_arg_124038 = mul64(t_jump_112811, gtid_116313);
        int64_t min_res_124039 = smin64(i_112880, min_arg_124038);
        float defunc_0_f_res_124040 = sitofp_i64_f32(min_res_124039);
        float defunc_2_reduce_res_124043;
        float redout_124084 = 0.0F;
        
        for (int64_t i_124083 = 0; i_124083 < l_window_112808; i_124083++) {
            bool cond_124086 = sle64(n_112804, i_124083);
            float defunc_0_f_res_124087;
            
            if (cond_124086) {
                defunc_0_f_res_124087 = 0.0F;
            } else {
                int64_t i_124088 = add64(x_124036, i_124083);
                float index_primexp_124089 = sitofp_i64_f32(i_124088);
                float defunc_0_f_res_f_res_124090 = 1.0F + index_primexp_124089;
                
                defunc_0_f_res_124087 = defunc_0_f_res_f_res_124090;
            }
            
            float defunc_0_f_res_124091;
            
            if (cond_124086) {
                defunc_0_f_res_124091 = 0.0F;
            } else {
                int64_t i_124092 = add64(x_124036, i_124083);
                float x_124093 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_116311 *
                                                        ctx_param_ext_119914 +
                                                        i_124092 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_124091 = x_124093;
            }
            
            float x_j_124094 = defunc_0_f_res_124087 - defunc_0_f_res_124040;
            float abs_res_124095 = (float) fabs(x_j_124094);
            float tmp1_124096 = abs_res_124095 / x_124037;
            float x_124097 = tmp1_124096 * tmp1_124096;
            float y_124098 = tmp1_124096 * x_124097;
            float tmp2_124099 = 1.0F - y_124098;
            float x_124100 = tmp2_124099 * tmp2_124099;
            float tmp3_124101 = tmp2_124099 * x_124100;
            float tmp4_124102 = defunc_0_f_res_124091 * tmp3_124101;
            float defunc_1_op_res_124103 = tmp4_124102 + redout_124084;
            
            ((float *) mem_124041)[i_124083] = tmp4_124102;
            
            float redout_tmp_124117 = defunc_1_op_res_124103;
            
            redout_124084 = redout_tmp_124117;
        }
        defunc_2_reduce_res_124043 = redout_124084;
        
        float a0_124067 = 1.0F / defunc_2_reduce_res_124043;
        float defunc_2_reduce_res_124068;
        float redout_124106 = 0.0F;
        
        for (int64_t i_124105 = 0; i_124105 < l_window_112808; i_124105++) {
            float x_124107 = ((float *) mem_124041)[i_124105];
            bool cond_124108 = sle64(n_112804, i_124105);
            float defunc_0_f_res_124109;
            
            if (cond_124108) {
                defunc_0_f_res_124109 = 0.0F;
            } else {
                int64_t i_124110 = add64(x_124036, i_124105);
                float x_124111 = ((float *) mem_120064.mem)[gtid_116311 *
                                                            n_112804 +
                                                            i_124110];
                
                defunc_0_f_res_124109 = x_124111;
            }
            
            float x_124112 = a0_124067 * x_124107;
            float defunc_9_fit_fun_res_124113 = defunc_0_f_res_124109 *
                  x_124112;
            float defunc_1_op_res_124114 = defunc_9_fit_fun_res_124113 +
                  redout_124106;
            float redout_tmp_124119 = defunc_1_op_res_124114;
            
            redout_124106 = redout_tmp_124119;
        }
        defunc_2_reduce_res_124068 = redout_124106;
        ((float *) mem_120207.mem)[gtid_116313] = defunc_2_reduce_res_124068;
    }
    
  cleanup:
    { }
    free(mem_124041);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128636_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128636_end -
                 futhark_mc_segmap_parloop_128636_start;
        
        ctx->futhark_mc_segmap_parloop_128636_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128636_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128636_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128634(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116312 = tid;
    int num_tasks_124081 = info.nsubtasks;
    struct futhark_mc_task_128633 *futhark_mc_task_128633 =
                                  (struct futhark_mc_task_128633 *) args;
    struct futhark_context *ctx = futhark_mc_task_128633->ctx;
    uint64_t futhark_mc_segmap_task_128634_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128634_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128633->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128633->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128633->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128633->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128633->free_i_112880;
    int64_t gtid_116311 = futhark_mc_task_128633->free_gtid_116311;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128633->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128633->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128633->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128633->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128633->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128633->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128633->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 = futhark_mc_task_128633->free_bytes_120187;
    struct memblock mem_120207 = {.desc ="mem_120207", .mem =
                                  futhark_mc_task_128633->free_mem_120207,
                                  .size =0, .references =NULL};
    int64_t iter_124082;
    struct futhark_mc_segmap_parloop_struct_128635
    futhark_mc_segmap_parloop_struct_128635;
    
    futhark_mc_segmap_parloop_struct_128635.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128635.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128635.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128635.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128635.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128635.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128635.free_gtid_116311 = gtid_116311;
    futhark_mc_segmap_parloop_struct_128635.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128635.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128635.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128635.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128635.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128635.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128635.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128635.free_bytes_120187 = bytes_120187;
    futhark_mc_segmap_parloop_struct_128635.free_mem_120207 = mem_120207.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128636_task;
    
    futhark_mc_segmap_parloop_128636_task.name =
        "futhark_mc_segmap_parloop_128636";
    futhark_mc_segmap_parloop_128636_task.fn = futhark_mc_segmap_parloop_128636;
    futhark_mc_segmap_parloop_128636_task.args =
        &futhark_mc_segmap_parloop_struct_128635;
    futhark_mc_segmap_parloop_128636_task.iterations = iterations;
    futhark_mc_segmap_parloop_128636_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128636_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128636_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128636_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128636_task);
    
    if (futhark_mc_segmap_parloop_128636_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128636_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128636_total_end -
                 futhark_mc_segmap_parloop_128636_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128636_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128636_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128636_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128634_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128634_end -
                 futhark_mc_segmap_task_128634_start;
        
        ctx->futhark_mc_segmap_task_128634_runs[tid]++;
        ctx->futhark_mc_segmap_task_128634_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128634_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128639 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116311;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120187;
    char *free_mem_120207;
};
struct futhark_mc_task_128642 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116311;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123996;
    float free_x_123997;
    float free_defunc_0_f_res_124000;
    float *retval_defunc_2_reduce_res_124002;
    char *retval_mem_124001;
};
struct futhark_mc_segred_stage_1_parloop_struct_128645 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116311;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_123996;
    float free_x_123997;
    float free_defunc_0_f_res_124000;
    char *free_mem_124001;
    char *free_reduce_stage_1_tid_res_arr_mem_124154;
};
static int futhark_mc_segred_stage_1_parloop_128646(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116316,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128645
    *futhark_mc_segred_stage_1_parloop_struct_128645 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128645 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128645->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128646_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128646_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_n_112804;
    int64_t gtid_116311 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_gtid_116311;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128645->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123996 =
            futhark_mc_segred_stage_1_parloop_struct_128645->free_x_123996;
    float x_123997 =
          futhark_mc_segred_stage_1_parloop_struct_128645->free_x_123997;
    float defunc_0_f_res_124000 =
          futhark_mc_segred_stage_1_parloop_struct_128645->free_defunc_0_f_res_124000;
    struct memblock mem_124001 = {.desc ="mem_124001", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128645->free_mem_124001,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124154 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124154",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128645->free_reduce_stage_1_tid_res_arr_mem_124154,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124156 = start;
    float x_124121;
    float x_124122;
    float local_acc_124157 = 0.0F;
    
    for (; iter_124156 < end; iter_124156++) {
        int64_t gtid_116317 = iter_124156;
        bool cond_124124 = sle64(n_112804, gtid_116317);
        float defunc_0_f_res_124125;
        
        if (cond_124124) {
            defunc_0_f_res_124125 = 0.0F;
        } else {
            int64_t i_124126 = add64(gtid_116317, x_123996);
            float index_primexp_124127 = sitofp_i64_f32(i_124126);
            float defunc_0_f_res_f_res_124128 = 1.0F + index_primexp_124127;
            
            defunc_0_f_res_124125 = defunc_0_f_res_f_res_124128;
        }
        
        float defunc_0_f_res_124129;
        
        if (cond_124124) {
            defunc_0_f_res_124129 = 0.0F;
        } else {
            int64_t i_124130 = add64(gtid_116317, x_123996);
            float x_124131 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_116311 *
                                                    ctx_param_ext_119914 +
                                                    i_124130 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_124129 = x_124131;
        }
        
        float x_j_124132 = defunc_0_f_res_124125 - defunc_0_f_res_124000;
        float abs_res_124133 = (float) fabs(x_j_124132);
        float tmp1_124134 = abs_res_124133 / x_123997;
        float x_124135 = tmp1_124134 * tmp1_124134;
        float y_124136 = tmp1_124134 * x_124135;
        float tmp2_124137 = 1.0F - y_124136;
        float x_124138 = tmp2_124137 * tmp2_124137;
        float tmp3_124139 = tmp2_124137 * x_124138;
        float tmp4_124140 = defunc_0_f_res_124129 * tmp3_124139;
        
        // save map-out results
        {
            ((float *) mem_124001.mem)[gtid_116317] = tmp4_124140;
        }
        // Load accum params
        {
            x_124121 = local_acc_124157;
        }
        // Load next params
        {
            x_124122 = tmp4_124140;
        }
        // Red body
        {
            float defunc_1_op_res_124123 = x_124121 + x_124122;
            
            local_acc_124157 = defunc_1_op_res_124123;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124154.mem)[flat_tid_116316] =
        local_acc_124157;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128646_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128646_end -
                 futhark_mc_segred_stage_1_parloop_128646_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128646_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128646_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128646_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128643(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116316 = tid;
    int num_tasks_124153 = info.nsubtasks;
    struct futhark_mc_task_128642 *futhark_mc_task_128642 =
                                  (struct futhark_mc_task_128642 *) args;
    struct futhark_context *ctx = futhark_mc_task_128642->ctx;
    uint64_t futhark_mc_segred_task_128643_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128643_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128642->free_n_112804;
    int64_t gtid_116311 = futhark_mc_task_128642->free_gtid_116311;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128642->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128642->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128642->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128642->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_123996 = futhark_mc_task_128642->free_x_123996;
    float x_123997 = futhark_mc_task_128642->free_x_123997;
    float defunc_0_f_res_124000 =
          futhark_mc_task_128642->free_defunc_0_f_res_124000;
    float defunc_2_reduce_res_124002 =
          *futhark_mc_task_128642->retval_defunc_2_reduce_res_124002;
    struct memblock mem_124001 = {.desc ="mem_124001", .mem =
                                  futhark_mc_task_128642->retval_mem_124001,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_124154_cached_sizze_128644 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124154 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124154_cached_sizze_128644 <
        (size_t) ((int64_t) 4 * num_tasks_124153)) {
        reduce_stage_1_tid_res_arr_mem_124154 =
            realloc(reduce_stage_1_tid_res_arr_mem_124154, (int64_t) 4 *
                    num_tasks_124153);
        reduce_stage_1_tid_res_arr_mem_124154_cached_sizze_128644 =
            (int64_t) 4 * num_tasks_124153;
    }
    
    int64_t iter_124156;
    struct futhark_mc_segred_stage_1_parloop_struct_128645
    futhark_mc_segred_stage_1_parloop_struct_128645;
    
    futhark_mc_segred_stage_1_parloop_struct_128645.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_gtid_116311 =
        gtid_116311;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_x_123996 = x_123996;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_x_123997 = x_123997;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_defunc_0_f_res_124000 =
        defunc_0_f_res_124000;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_mem_124001 =
        mem_124001.mem;
    futhark_mc_segred_stage_1_parloop_struct_128645.free_reduce_stage_1_tid_res_arr_mem_124154 =
        reduce_stage_1_tid_res_arr_mem_124154;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128646_task;
    
    futhark_mc_segred_stage_1_parloop_128646_task.name =
        "futhark_mc_segred_stage_1_parloop_128646";
    futhark_mc_segred_stage_1_parloop_128646_task.fn =
        futhark_mc_segred_stage_1_parloop_128646;
    futhark_mc_segred_stage_1_parloop_128646_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128645;
    futhark_mc_segred_stage_1_parloop_128646_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128646_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128646_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128646_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128646_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128646_task);
    
    if (futhark_mc_segred_stage_1_parloop_128646_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128646_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128646_total_end -
                 futhark_mc_segred_stage_1_parloop_128646_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128646_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128646_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128646_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124002 = 0.0F;
    }
    
    float x_124158;
    float x_124159;
    
    for (int32_t i_124161 = 0; i_124161 < num_tasks_124153; i_124161++) {
        flat_tid_116316 = i_124161;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124158 = defunc_2_reduce_res_124002;
            }
            // load next params
            {
                x_124159 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124154)[flat_tid_116316];
            }
            // red body
            {
                float defunc_1_op_res_124160 = x_124158 + x_124159;
                
                defunc_2_reduce_res_124002 = defunc_1_op_res_124160;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124154);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128643_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128643_end -
                 futhark_mc_segred_task_128643_start;
        
        ctx->futhark_mc_segred_task_128643_runs[tid]++;
        ctx->futhark_mc_segred_task_128643_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128643_iter[tid] += iterations;
    }
    *futhark_mc_task_128642->retval_defunc_2_reduce_res_124002 =
        defunc_2_reduce_res_124002;
    futhark_mc_task_128642->retval_mem_124001 = mem_124001.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128647 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116311;
    char *free_mem_120064;
    int64_t free_x_123996;
    char *free_mem_124001;
    float free_a0_124024;
    float *retval_defunc_2_reduce_res_124025;
};
struct futhark_mc_segred_stage_1_parloop_struct_128650 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116311;
    char *free_mem_120064;
    int64_t free_x_123996;
    char *free_mem_124001;
    float free_a0_124024;
    char *free_reduce_stage_1_tid_res_arr_mem_124163;
};
static int futhark_mc_segred_stage_1_parloop_128651(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116318,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128650
    *futhark_mc_segred_stage_1_parloop_struct_128650 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128650 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128650->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128651_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128651_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_n_112804;
    int64_t gtid_116311 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_gtid_116311;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123996 =
            futhark_mc_segred_stage_1_parloop_struct_128650->free_x_123996;
    struct memblock mem_124001 = {.desc ="mem_124001", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128650->free_mem_124001,
                                  .size =0, .references =NULL};
    float a0_124024 =
          futhark_mc_segred_stage_1_parloop_struct_128650->free_a0_124024;
    struct memblock reduce_stage_1_tid_res_arr_mem_124163 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124163",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128650->free_reduce_stage_1_tid_res_arr_mem_124163,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124165 = start;
    float x_124141;
    float x_124142;
    float local_acc_124166 = 0.0F;
    
    for (; iter_124165 < end; iter_124165++) {
        int64_t gtid_116319 = iter_124165;
        float x_124144 = ((float *) mem_124001.mem)[gtid_116319];
        bool cond_124145 = sle64(n_112804, gtid_116319);
        float defunc_0_f_res_124146;
        
        if (cond_124145) {
            defunc_0_f_res_124146 = 0.0F;
        } else {
            int64_t i_124147 = add64(gtid_116319, x_123996);
            float x_124148 = ((float *) mem_120064.mem)[gtid_116311 * n_112804 +
                                                        i_124147];
            
            defunc_0_f_res_124146 = x_124148;
        }
        
        float x_124149 = a0_124024 * x_124144;
        float defunc_9_fit_fun_res_124150 = defunc_0_f_res_124146 * x_124149;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124141 = local_acc_124166;
        }
        // Load next params
        {
            x_124142 = defunc_9_fit_fun_res_124150;
        }
        // Red body
        {
            float defunc_1_op_res_124143 = x_124141 + x_124142;
            
            local_acc_124166 = defunc_1_op_res_124143;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124163.mem)[flat_tid_116318] =
        local_acc_124166;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128651_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128651_end -
                 futhark_mc_segred_stage_1_parloop_128651_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128651_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128651_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128651_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128648(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116318 = tid;
    int num_tasks_124162 = info.nsubtasks;
    struct futhark_mc_task_128647 *futhark_mc_task_128647 =
                                  (struct futhark_mc_task_128647 *) args;
    struct futhark_context *ctx = futhark_mc_task_128647->ctx;
    uint64_t futhark_mc_segred_task_128648_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128648_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128647->free_n_112804;
    int64_t gtid_116311 = futhark_mc_task_128647->free_gtid_116311;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128647->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_123996 = futhark_mc_task_128647->free_x_123996;
    struct memblock mem_124001 = {.desc ="mem_124001", .mem =
                                  futhark_mc_task_128647->free_mem_124001,
                                  .size =0, .references =NULL};
    float a0_124024 = futhark_mc_task_128647->free_a0_124024;
    float defunc_2_reduce_res_124025 =
          *futhark_mc_task_128647->retval_defunc_2_reduce_res_124025;
    size_t reduce_stage_1_tid_res_arr_mem_124163_cached_sizze_128649 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124163 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124163_cached_sizze_128649 <
        (size_t) ((int64_t) 4 * num_tasks_124162)) {
        reduce_stage_1_tid_res_arr_mem_124163 =
            realloc(reduce_stage_1_tid_res_arr_mem_124163, (int64_t) 4 *
                    num_tasks_124162);
        reduce_stage_1_tid_res_arr_mem_124163_cached_sizze_128649 =
            (int64_t) 4 * num_tasks_124162;
    }
    
    int64_t iter_124165;
    struct futhark_mc_segred_stage_1_parloop_struct_128650
    futhark_mc_segred_stage_1_parloop_struct_128650;
    
    futhark_mc_segred_stage_1_parloop_struct_128650.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_gtid_116311 =
        gtid_116311;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_x_123996 = x_123996;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_mem_124001 =
        mem_124001.mem;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_a0_124024 = a0_124024;
    futhark_mc_segred_stage_1_parloop_struct_128650.free_reduce_stage_1_tid_res_arr_mem_124163 =
        reduce_stage_1_tid_res_arr_mem_124163;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128651_task;
    
    futhark_mc_segred_stage_1_parloop_128651_task.name =
        "futhark_mc_segred_stage_1_parloop_128651";
    futhark_mc_segred_stage_1_parloop_128651_task.fn =
        futhark_mc_segred_stage_1_parloop_128651;
    futhark_mc_segred_stage_1_parloop_128651_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128650;
    futhark_mc_segred_stage_1_parloop_128651_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128651_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128651_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128651_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128651_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128651_task);
    
    if (futhark_mc_segred_stage_1_parloop_128651_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128651_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128651_total_end -
                 futhark_mc_segred_stage_1_parloop_128651_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128651_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124025 = 0.0F;
    }
    
    float x_124167;
    float x_124168;
    
    for (int32_t i_124170 = 0; i_124170 < num_tasks_124162; i_124170++) {
        flat_tid_116318 = i_124170;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124167 = defunc_2_reduce_res_124025;
            }
            // load next params
            {
                x_124168 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124163)[flat_tid_116318];
            }
            // red body
            {
                float defunc_1_op_res_124169 = x_124167 + x_124168;
                
                defunc_2_reduce_res_124025 = defunc_1_op_res_124169;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124163);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128648_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128648_end -
                 futhark_mc_segred_task_128648_start;
        
        ctx->futhark_mc_segred_task_128648_runs[tid]++;
        ctx->futhark_mc_segred_task_128648_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128648_iter[tid] += iterations;
    }
    *futhark_mc_task_128647->retval_defunc_2_reduce_res_124025 =
        defunc_2_reduce_res_124025;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128640(void *args, int64_t start,
                                            int64_t end, int flat_tid_116314,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128639
    *futhark_mc_segmap_parloop_struct_128639 =
    (struct futhark_mc_segmap_parloop_struct_128639 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128639->ctx;
    uint64_t futhark_mc_segmap_parloop_128640_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128640_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128639->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128639->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128639->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128639->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128639->free_i_112880;
    int64_t gtid_116311 =
            futhark_mc_segmap_parloop_struct_128639->free_gtid_116311;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128639->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128639->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128639->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128639->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128639->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128639->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128639->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 =
            futhark_mc_segmap_parloop_struct_128639->free_bytes_120187;
    struct memblock mem_120207 = {.desc ="mem_120207", .mem =
                                  futhark_mc_segmap_parloop_struct_128639->free_mem_120207,
                                  .size =0, .references =NULL};
    size_t mem_124001_cached_sizze_128641 = 0;
    char *mem_124001 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124120 = start;
    
    if (mem_124001_cached_sizze_128641 < (size_t) bytes_120187) {
        mem_124001 = realloc(mem_124001, bytes_120187);
        mem_124001_cached_sizze_128641 = bytes_120187;
    }
    for (; iter_124120 < end; iter_124120++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124151 = l_n_m_112854;
        int64_t gtid_116315 = iter_124120;
        int64_t remnant_124152 = iter_124120 - gtid_116315;
        int64_t x_123996 = ((int64_t *) mem_119820.mem)[gtid_116311 *
                                                        l_n_m_112854 +
                                                        gtid_116315];
        float x_123997 = ((float *) mem_119824.mem)[gtid_116311 * l_n_m_112854 +
                                                    gtid_116315];
        int64_t min_arg_123998 = mul64(t_jump_112811, gtid_116315);
        int64_t min_res_123999 = smin64(i_112880, min_arg_123998);
        float defunc_0_f_res_124000 = sitofp_i64_f32(min_res_123999);
        float defunc_2_reduce_res_124002;
        int64_t flat_tid_116316 = (int64_t) 0;
        int32_t num_tasks_124153;
        struct futhark_mc_task_128642 futhark_mc_task_128642;
        
        futhark_mc_task_128642.ctx = ctx;
        futhark_mc_task_128642.free_n_112804 = n_112804;
        futhark_mc_task_128642.free_gtid_116311 = gtid_116311;
        futhark_mc_task_128642.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128642.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128642.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128642.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128642.free_x_123996 = x_123996;
        futhark_mc_task_128642.free_x_123997 = x_123997;
        futhark_mc_task_128642.free_defunc_0_f_res_124000 =
            defunc_0_f_res_124000;
        futhark_mc_task_128642.retval_defunc_2_reduce_res_124002 =
            &defunc_2_reduce_res_124002;
        futhark_mc_task_128642.retval_mem_124001 = mem_124001;
        
        struct scheduler_segop futhark_mc_task_128642_task;
        
        futhark_mc_task_128642_task.args = &futhark_mc_task_128642;
        futhark_mc_task_128642_task.top_level_fn =
            futhark_mc_segred_task_128643;
        futhark_mc_task_128642_task.name = "futhark_mc_segred_task_128643";
        futhark_mc_task_128642_task.iterations = l_window_112808;
        futhark_mc_task_128642_task.task_time =
            &ctx->futhark_mc_segred_task_128643_total_time;
        futhark_mc_task_128642_task.task_iter =
            &ctx->futhark_mc_segred_task_128643_total_iter;
        futhark_mc_task_128642_task.sched = STATIC;
        futhark_mc_task_128642_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128643_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128642_task);
        
        if (futhark_mc_segred_task_128643_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_124024 = 1.0F / defunc_2_reduce_res_124002;
        float defunc_2_reduce_res_124025;
        int64_t flat_tid_116318 = (int64_t) 0;
        int32_t num_tasks_124162;
        struct futhark_mc_task_128647 futhark_mc_task_128647;
        
        futhark_mc_task_128647.ctx = ctx;
        futhark_mc_task_128647.free_n_112804 = n_112804;
        futhark_mc_task_128647.free_gtid_116311 = gtid_116311;
        futhark_mc_task_128647.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128647.free_x_123996 = x_123996;
        futhark_mc_task_128647.free_mem_124001 = mem_124001;
        futhark_mc_task_128647.free_a0_124024 = a0_124024;
        futhark_mc_task_128647.retval_defunc_2_reduce_res_124025 =
            &defunc_2_reduce_res_124025;
        
        struct scheduler_segop futhark_mc_task_128647_task;
        
        futhark_mc_task_128647_task.args = &futhark_mc_task_128647;
        futhark_mc_task_128647_task.top_level_fn =
            futhark_mc_segred_task_128648;
        futhark_mc_task_128647_task.name = "futhark_mc_segred_task_128648";
        futhark_mc_task_128647_task.iterations = l_window_112808;
        futhark_mc_task_128647_task.task_time =
            &ctx->futhark_mc_segred_task_128648_total_time;
        futhark_mc_task_128647_task.task_iter =
            &ctx->futhark_mc_segred_task_128648_total_iter;
        futhark_mc_task_128647_task.sched = STATIC;
        futhark_mc_task_128647_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128648_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128647_task);
        
        if (futhark_mc_segred_task_128648_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120207.mem)[gtid_116315] = defunc_2_reduce_res_124025;
    }
    
  cleanup:
    { }
    free(mem_124001);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128640_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128640_end -
                 futhark_mc_segmap_parloop_128640_start;
        
        ctx->futhark_mc_segmap_parloop_128640_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128640_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128640_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128638(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116314 = tid;
    int num_tasks_124081 = info.nsubtasks;
    struct futhark_mc_task_128633 *futhark_mc_task_128633 =
                                  (struct futhark_mc_task_128633 *) args;
    struct futhark_context *ctx = futhark_mc_task_128633->ctx;
    uint64_t futhark_mc_segmap_nested_task_128638_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128638_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128633->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128633->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128633->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128633->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128633->free_i_112880;
    int64_t gtid_116311 = futhark_mc_task_128633->free_gtid_116311;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128633->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128633->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128633->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128633->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128633->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128633->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128633->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 = futhark_mc_task_128633->free_bytes_120187;
    struct memblock mem_120207 = {.desc ="mem_120207", .mem =
                                  futhark_mc_task_128633->free_mem_120207,
                                  .size =0, .references =NULL};
    int64_t iter_124120;
    struct futhark_mc_segmap_parloop_struct_128639
    futhark_mc_segmap_parloop_struct_128639;
    
    futhark_mc_segmap_parloop_struct_128639.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128639.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128639.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128639.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128639.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128639.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128639.free_gtid_116311 = gtid_116311;
    futhark_mc_segmap_parloop_struct_128639.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128639.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128639.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128639.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128639.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128639.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128639.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128639.free_bytes_120187 = bytes_120187;
    futhark_mc_segmap_parloop_struct_128639.free_mem_120207 = mem_120207.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128640_task;
    
    futhark_mc_segmap_parloop_128640_task.name =
        "futhark_mc_segmap_parloop_128640";
    futhark_mc_segmap_parloop_128640_task.fn = futhark_mc_segmap_parloop_128640;
    futhark_mc_segmap_parloop_128640_task.args =
        &futhark_mc_segmap_parloop_struct_128639;
    futhark_mc_segmap_parloop_128640_task.iterations = iterations;
    futhark_mc_segmap_parloop_128640_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128640_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128640_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128640_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128640_task);
    
    if (futhark_mc_segmap_parloop_128640_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128640_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128640_total_end -
                 futhark_mc_segmap_parloop_128640_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128640_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128640_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128640_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128638_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128638_end -
                 futhark_mc_segmap_nested_task_128638_start;
        
        ctx->futhark_mc_segmap_nested_task_128638_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128638_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128638_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128631(void *args, int64_t start,
                                            int64_t end, int flat_tid_116310,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128630
    *futhark_mc_segmap_parloop_struct_128630 =
    (struct futhark_mc_segmap_parloop_struct_128630 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128630->ctx;
    uint64_t futhark_mc_segmap_parloop_128631_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128631_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128630->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128630->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128630->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128630->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128630->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128630->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128630->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128630->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128630->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128630->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128630->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 =
            futhark_mc_segmap_parloop_struct_128630->free_bytes_120187;
    struct memblock mem_120241 = {.desc ="mem_120241", .mem =
                                  futhark_mc_segmap_parloop_struct_128630->free_mem_120241,
                                  .size =0, .references =NULL};
    size_t mem_120207_cached_sizze_128632 = 0;
    char *mem_120207 = NULL;
    int64_t iterations = end - start;
    int64_t iter_123995 = start;
    
    if (mem_120207_cached_sizze_128632 < (size_t) bytes_119766) {
        mem_120207 = realloc(mem_120207, bytes_119766);
        mem_120207_cached_sizze_128632 = bytes_119766;
    }
    for (; iter_123995 < end; iter_123995++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124079 = m_112803;
        int64_t gtid_116311 = iter_123995;
        int64_t remnant_124080 = iter_123995 - gtid_116311;
        int64_t flat_tid_116312 = (int64_t) 0;
        int32_t num_tasks_124081;
        int64_t flat_tid_116314 = (int64_t) 0;
        struct futhark_mc_task_128633 futhark_mc_task_128633;
        
        futhark_mc_task_128633.ctx = ctx;
        futhark_mc_task_128633.free_n_112804 = n_112804;
        futhark_mc_task_128633.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128633.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128633.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128633.free_i_112880 = i_112880;
        futhark_mc_task_128633.free_gtid_116311 = gtid_116311;
        futhark_mc_task_128633.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128633.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128633.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128633.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128633.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128633.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128633.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128633.free_bytes_120187 = bytes_120187;
        futhark_mc_task_128633.free_mem_120207 = mem_120207;
        
        struct scheduler_segop futhark_mc_task_128633_task;
        
        futhark_mc_task_128633_task.args = &futhark_mc_task_128633;
        futhark_mc_task_128633_task.top_level_fn =
            futhark_mc_segmap_task_128634;
        futhark_mc_task_128633_task.name = "futhark_mc_segmap_task_128634";
        futhark_mc_task_128633_task.iterations = l_n_m_112854;
        futhark_mc_task_128633_task.task_time =
            &ctx->futhark_mc_segmap_task_128634_total_time;
        futhark_mc_task_128633_task.task_iter =
            &ctx->futhark_mc_segmap_task_128634_total_iter;
        futhark_mc_task_128633_task.sched = STATIC;
        futhark_mc_task_128633_task.nested_fn =
            futhark_mc_segmap_nested_task_128638;
        
        int futhark_mc_segmap_task_128634_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128633_task);
        
        if (futhark_mc_segmap_task_128634_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120241.mem + gtid_116311 * l_n_m_112854 * (int64_t) 4,
                mem_120207 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120207);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128631_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128631_end -
                 futhark_mc_segmap_parloop_128631_start;
        
        ctx->futhark_mc_segmap_parloop_128631_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128631_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128631_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128629(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116310 = tid;
    int num_tasks_123942 = info.nsubtasks;
    struct futhark_mc_task_128623 *futhark_mc_task_128623 =
                                  (struct futhark_mc_task_128623 *) args;
    struct futhark_context *ctx = futhark_mc_task_128623->ctx;
    uint64_t futhark_mc_segmap_nested_task_128629_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128629_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128623->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128623->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128623->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128623->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128623->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128623->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128623->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128623->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128623->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128623->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128623->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128623->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128623->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128623->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120187 = futhark_mc_task_128623->free_bytes_120187;
    struct memblock mem_120241 = {.desc ="mem_120241", .mem =
                                  futhark_mc_task_128623->free_mem_120241,
                                  .size =0, .references =NULL};
    int64_t iter_123995;
    struct futhark_mc_segmap_parloop_struct_128630
    futhark_mc_segmap_parloop_struct_128630;
    
    futhark_mc_segmap_parloop_struct_128630.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128630.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128630.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128630.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128630.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128630.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128630.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128630.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128630.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128630.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128630.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128630.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128630.free_bytes_120187 = bytes_120187;
    futhark_mc_segmap_parloop_struct_128630.free_mem_120241 = mem_120241.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128631_task;
    
    futhark_mc_segmap_parloop_128631_task.name =
        "futhark_mc_segmap_parloop_128631";
    futhark_mc_segmap_parloop_128631_task.fn = futhark_mc_segmap_parloop_128631;
    futhark_mc_segmap_parloop_128631_task.args =
        &futhark_mc_segmap_parloop_struct_128630;
    futhark_mc_segmap_parloop_128631_task.iterations = iterations;
    futhark_mc_segmap_parloop_128631_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128631_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128631_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128631_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128631_task);
    
    if (futhark_mc_segmap_parloop_128631_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128631_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128631_total_end -
                 futhark_mc_segmap_parloop_128631_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128631_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128629_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128629_end -
                 futhark_mc_segmap_nested_task_128629_start;
        
        ctx->futhark_mc_segmap_nested_task_128629_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128629_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128629_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128652 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120347;
    char *free_mem_120351;
};
struct futhark_mc_segmap_parloop_struct_128654 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120347;
    char *free_mem_120351;
};
static int futhark_mc_segmap_parloop_128655(void *args, int64_t start,
                                            int64_t end, int flat_tid_116451,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128654
    *futhark_mc_segmap_parloop_struct_128654 =
    (struct futhark_mc_segmap_parloop_struct_128654 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128654->ctx;
    uint64_t futhark_mc_segmap_parloop_128655_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128655_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128654->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128654->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128654->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128654->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128654->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128654->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128654->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128654->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128654->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128654->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128654->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128654->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128654->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128654->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 =
            futhark_mc_segmap_parloop_struct_128654->free_bytes_120242;
    struct memblock mem_120347 = {.desc ="mem_120347", .mem =
                                  futhark_mc_segmap_parloop_struct_128654->free_mem_120347,
                                  .size =0, .references =NULL};
    struct memblock mem_120351 = {.desc ="mem_120351", .mem =
                                  futhark_mc_segmap_parloop_struct_128654->free_mem_120351,
                                  .size =0, .references =NULL};
    size_t mem_120286_cached_sizze_128656 = 0;
    char *mem_120286 = NULL;
    size_t mem_120289_cached_sizze_128657 = 0;
    char *mem_120289 = NULL;
    size_t mem_120306_cached_sizze_128658 = 0;
    char *mem_120306 = NULL;
    size_t mem_120309_cached_sizze_128659 = 0;
    char *mem_120309 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124172 = start;
    
    if (mem_120286_cached_sizze_128656 < (size_t) bytes_119766) {
        mem_120286 = realloc(mem_120286, bytes_119766);
        mem_120286_cached_sizze_128656 = bytes_119766;
    }
    if (mem_120289_cached_sizze_128657 < (size_t) bytes_119766) {
        mem_120289 = realloc(mem_120289, bytes_119766);
        mem_120289_cached_sizze_128657 = bytes_119766;
    }
    if (mem_120306_cached_sizze_128658 < (size_t) bytes_120242) {
        mem_120306 = realloc(mem_120306, bytes_120242);
        mem_120306_cached_sizze_128658 = bytes_120242;
    }
    if (mem_120309_cached_sizze_128659 < (size_t) bytes_120242) {
        mem_120309 = realloc(mem_120309, bytes_120242);
        mem_120309_cached_sizze_128659 = bytes_120242;
    }
    for (; iter_124172 < end; iter_124172++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124249 = m_112803;
        int64_t gtid_116452 = iter_124172;
        int64_t remnant_124250 = iter_124172 - gtid_116452;
        
        for (int64_t i_124173 = 0; i_124173 < l_n_m_112854; i_124173++) {
            int64_t x_124176 = ((int64_t *) mem_119820.mem)[gtid_116452 *
                                                            l_n_m_112854 +
                                                            i_124173];
            float x_124177 = ((float *) mem_119824.mem)[gtid_116452 *
                                                        l_n_m_112854 +
                                                        i_124173];
            int64_t min_arg_124178 = mul64(t_jump_112811, i_124173);
            int64_t min_res_124179 = smin64(i_112880, min_arg_124178);
            float defunc_0_f_res_124180 = sitofp_i64_f32(min_res_124179);
            float defunc_2_reduce_res_124183;
            float defunc_2_reduce_res_124184;
            float defunc_2_reduce_res_124185;
            float redout_124189;
            float redout_124190;
            float redout_124191;
            
            redout_124189 = 0.0F;
            redout_124190 = 0.0F;
            redout_124191 = 0.0F;
            for (int64_t i_124188 = 0; i_124188 < l_window_112808; i_124188++) {
                bool cond_124194 = sle64(n_112804, i_124188);
                float defunc_0_f_res_124195;
                
                if (cond_124194) {
                    defunc_0_f_res_124195 = 0.0F;
                } else {
                    int64_t i_124196 = add64(x_124176, i_124188);
                    float index_primexp_124197 = sitofp_i64_f32(i_124196);
                    float defunc_0_f_res_f_res_124198 = 1.0F +
                          index_primexp_124197;
                    
                    defunc_0_f_res_124195 = defunc_0_f_res_f_res_124198;
                }
                
                float defunc_0_f_res_124199;
                
                if (cond_124194) {
                    defunc_0_f_res_124199 = 0.0F;
                } else {
                    int64_t i_124200 = add64(x_124176, i_124188);
                    float x_124201 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_116452 *
                                                            ctx_param_ext_119914 +
                                                            i_124200 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_124199 = x_124201;
                }
                
                float x_j_124202 = defunc_0_f_res_124195 -
                      defunc_0_f_res_124180;
                float abs_res_124203 = (float) fabs(x_j_124202);
                float tmp1_124204 = abs_res_124203 / x_124177;
                float x_124205 = tmp1_124204 * tmp1_124204;
                float y_124206 = tmp1_124204 * x_124205;
                float tmp2_124207 = 1.0F - y_124206;
                float x_124208 = tmp2_124207 * tmp2_124207;
                float tmp3_124209 = tmp2_124207 * x_124208;
                float tmp4_124210 = defunc_0_f_res_124199 * tmp3_124209;
                float defunc_1_f_res_124211 = x_j_124202 * tmp4_124210;
                float defunc_1_f_res_124212 = x_j_124202 *
                      defunc_1_f_res_124211;
                float defunc_1_op_res_124213 = tmp4_124210 + redout_124189;
                float defunc_1_op_res_124214 = defunc_1_f_res_124211 +
                      redout_124190;
                float defunc_1_op_res_124215 = defunc_1_f_res_124212 +
                      redout_124191;
                
                ((float *) mem_120306)[i_124188] = defunc_1_f_res_124211;
                ((float *) mem_120309)[i_124188] = tmp4_124210;
                
                float redout_tmp_124253 = defunc_1_op_res_124213;
                float redout_tmp_124254 = defunc_1_op_res_124214;
                float redout_tmp_124255 = defunc_1_op_res_124215;
                
                redout_124189 = redout_tmp_124253;
                redout_124190 = redout_tmp_124254;
                redout_124191 = redout_tmp_124255;
            }
            defunc_2_reduce_res_124183 = redout_124189;
            defunc_2_reduce_res_124184 = redout_124190;
            defunc_2_reduce_res_124185 = redout_124191;
            
            float x_124218 = defunc_2_reduce_res_124183 *
                  defunc_2_reduce_res_124185;
            float y_124219 = defunc_2_reduce_res_124184 *
                  defunc_2_reduce_res_124184;
            float y_124220 = x_124218 - y_124219;
            float det1_124221 = 1.0F / y_124220;
            float a11_124222 = defunc_2_reduce_res_124185 * det1_124221;
            float negate_arg_124223 = defunc_2_reduce_res_124184 * det1_124221;
            float b11_124224 = 0.0F - negate_arg_124223;
            float c11_124225 = defunc_2_reduce_res_124183 * det1_124221;
            float defunc_2_reduce_res_124226;
            float defunc_2_reduce_res_124227;
            float redout_124229;
            float redout_124230;
            
            redout_124229 = 0.0F;
            redout_124230 = 0.0F;
            for (int64_t i_124228 = 0; i_124228 < l_window_112808; i_124228++) {
                float x_124231 = ((float *) mem_120309)[i_124228];
                float x_124232 = ((float *) mem_120306)[i_124228];
                bool cond_124233 = sle64(n_112804, i_124228);
                float defunc_0_f_res_124234;
                
                if (cond_124233) {
                    defunc_0_f_res_124234 = 0.0F;
                } else {
                    int64_t i_124235 = add64(x_124176, i_124228);
                    float x_124236 = ((float *) mem_120064.mem)[gtid_116452 *
                                                                n_112804 +
                                                                i_124235];
                    
                    defunc_0_f_res_124234 = x_124236;
                }
                
                float x_124237 = a11_124222 * x_124231;
                float y_124238 = b11_124224 * x_124232;
                float x_124239 = x_124237 + y_124238;
                float defunc_9_fit_fun_res_124240 = defunc_0_f_res_124234 *
                      x_124239;
                float x_124241 = b11_124224 * x_124231;
                float y_124242 = c11_124225 * x_124232;
                float x_124243 = x_124241 + y_124242;
                float defunc_9_slope_fun_res_124244 = defunc_0_f_res_124234 *
                      x_124243;
                float defunc_1_op_res_124245 = defunc_9_fit_fun_res_124240 +
                      redout_124229;
                float defunc_1_op_res_124246 = defunc_9_slope_fun_res_124244 +
                      redout_124230;
                float redout_tmp_124258 = defunc_1_op_res_124245;
                float redout_tmp_124259 = defunc_1_op_res_124246;
                
                redout_124229 = redout_tmp_124258;
                redout_124230 = redout_tmp_124259;
            }
            defunc_2_reduce_res_124226 = redout_124229;
            defunc_2_reduce_res_124227 = redout_124230;
            ((float *) mem_120286)[i_124173] = defunc_2_reduce_res_124226;
            ((float *) mem_120289)[i_124173] = defunc_2_reduce_res_124227;
        }
        memmove(mem_120347.mem + gtid_116452 * l_n_m_112854 * (int64_t) 4,
                mem_120286 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120351.mem + gtid_116452 * l_n_m_112854 * (int64_t) 4,
                mem_120289 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120286);
    free(mem_120289);
    free(mem_120306);
    free(mem_120309);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128655_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128655_end -
                 futhark_mc_segmap_parloop_128655_start;
        
        ctx->futhark_mc_segmap_parloop_128655_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128655_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128655_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128653(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116451 = tid;
    int num_tasks_124171 = info.nsubtasks;
    struct futhark_mc_task_128652 *futhark_mc_task_128652 =
                                  (struct futhark_mc_task_128652 *) args;
    struct futhark_context *ctx = futhark_mc_task_128652->ctx;
    uint64_t futhark_mc_segmap_task_128653_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128653_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128652->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128652->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128652->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128652->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128652->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128652->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128652->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128652->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128652->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128652->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128652->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128652->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128652->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128652->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 = futhark_mc_task_128652->free_bytes_120242;
    struct memblock mem_120347 = {.desc ="mem_120347", .mem =
                                  futhark_mc_task_128652->free_mem_120347,
                                  .size =0, .references =NULL};
    struct memblock mem_120351 = {.desc ="mem_120351", .mem =
                                  futhark_mc_task_128652->free_mem_120351,
                                  .size =0, .references =NULL};
    int64_t iter_124172;
    struct futhark_mc_segmap_parloop_struct_128654
    futhark_mc_segmap_parloop_struct_128654;
    
    futhark_mc_segmap_parloop_struct_128654.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128654.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128654.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128654.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128654.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128654.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128654.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128654.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128654.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128654.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128654.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128654.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128654.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128654.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128654.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128654.free_bytes_120242 = bytes_120242;
    futhark_mc_segmap_parloop_struct_128654.free_mem_120347 = mem_120347.mem;
    futhark_mc_segmap_parloop_struct_128654.free_mem_120351 = mem_120351.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128655_task;
    
    futhark_mc_segmap_parloop_128655_task.name =
        "futhark_mc_segmap_parloop_128655";
    futhark_mc_segmap_parloop_128655_task.fn = futhark_mc_segmap_parloop_128655;
    futhark_mc_segmap_parloop_128655_task.args =
        &futhark_mc_segmap_parloop_struct_128654;
    futhark_mc_segmap_parloop_128655_task.iterations = iterations;
    futhark_mc_segmap_parloop_128655_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128655_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128655_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128655_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128655_task);
    
    if (futhark_mc_segmap_parloop_128655_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128655_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128655_total_end -
                 futhark_mc_segmap_parloop_128655_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128655_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128655_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128655_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128653_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128653_end -
                 futhark_mc_segmap_task_128653_start;
        
        ctx->futhark_mc_segmap_task_128653_runs[tid]++;
        ctx->futhark_mc_segmap_task_128653_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128653_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128661 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120347;
    char *free_mem_120351;
};
struct futhark_mc_task_128665 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116454;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120280;
    char *free_mem_120283;
};
struct futhark_mc_segmap_parloop_struct_128667 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116454;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120280;
    char *free_mem_120283;
};
static int futhark_mc_segmap_parloop_128668(void *args, int64_t start,
                                            int64_t end, int flat_tid_116455,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128667
    *futhark_mc_segmap_parloop_struct_128667 =
    (struct futhark_mc_segmap_parloop_struct_128667 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128667->ctx;
    uint64_t futhark_mc_segmap_parloop_128668_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128668_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128667->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128667->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128667->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128667->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128667->free_i_112880;
    int64_t gtid_116454 =
            futhark_mc_segmap_parloop_struct_128667->free_gtid_116454;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128667->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128667->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128667->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128667->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128667->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128667->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128667->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 =
            futhark_mc_segmap_parloop_struct_128667->free_bytes_120242;
    struct memblock mem_120280 = {.desc ="mem_120280", .mem =
                                  futhark_mc_segmap_parloop_struct_128667->free_mem_120280,
                                  .size =0, .references =NULL};
    struct memblock mem_120283 = {.desc ="mem_120283", .mem =
                                  futhark_mc_segmap_parloop_struct_128667->free_mem_120283,
                                  .size =0, .references =NULL};
    size_t mem_124336_cached_sizze_128669 = 0;
    char *mem_124336 = NULL;
    size_t mem_124338_cached_sizze_128670 = 0;
    char *mem_124338 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124407 = start;
    
    if (mem_124336_cached_sizze_128669 < (size_t) bytes_120242) {
        mem_124336 = realloc(mem_124336, bytes_120242);
        mem_124336_cached_sizze_128669 = bytes_120242;
    }
    if (mem_124338_cached_sizze_128670 < (size_t) bytes_120242) {
        mem_124338 = realloc(mem_124338, bytes_120242);
        mem_124338_cached_sizze_128670 = bytes_120242;
    }
    for (; iter_124407 < end; iter_124407++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124457 = l_n_m_112854;
        int64_t gtid_116456 = iter_124407;
        int64_t remnant_124458 = iter_124407 - gtid_116456;
        int64_t x_124331 = ((int64_t *) mem_119820.mem)[gtid_116454 *
                                                        l_n_m_112854 +
                                                        gtid_116456];
        float x_124332 = ((float *) mem_119824.mem)[gtid_116454 * l_n_m_112854 +
                                                    gtid_116456];
        int64_t min_arg_124333 = mul64(t_jump_112811, gtid_116456);
        int64_t min_res_124334 = smin64(i_112880, min_arg_124333);
        float defunc_0_f_res_124335 = sitofp_i64_f32(min_res_124334);
        float defunc_2_reduce_res_124340;
        float defunc_2_reduce_res_124341;
        float defunc_2_reduce_res_124342;
        float redout_124409;
        float redout_124410;
        float redout_124411;
        
        redout_124409 = 0.0F;
        redout_124410 = 0.0F;
        redout_124411 = 0.0F;
        for (int64_t i_124408 = 0; i_124408 < l_window_112808; i_124408++) {
            bool cond_124414 = sle64(n_112804, i_124408);
            float defunc_0_f_res_124415;
            
            if (cond_124414) {
                defunc_0_f_res_124415 = 0.0F;
            } else {
                int64_t i_124416 = add64(x_124331, i_124408);
                float index_primexp_124417 = sitofp_i64_f32(i_124416);
                float defunc_0_f_res_f_res_124418 = 1.0F + index_primexp_124417;
                
                defunc_0_f_res_124415 = defunc_0_f_res_f_res_124418;
            }
            
            float defunc_0_f_res_124419;
            
            if (cond_124414) {
                defunc_0_f_res_124419 = 0.0F;
            } else {
                int64_t i_124420 = add64(x_124331, i_124408);
                float x_124421 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_116454 *
                                                        ctx_param_ext_119914 +
                                                        i_124420 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_124419 = x_124421;
            }
            
            float x_j_124422 = defunc_0_f_res_124415 - defunc_0_f_res_124335;
            float abs_res_124423 = (float) fabs(x_j_124422);
            float tmp1_124424 = abs_res_124423 / x_124332;
            float x_124425 = tmp1_124424 * tmp1_124424;
            float y_124426 = tmp1_124424 * x_124425;
            float tmp2_124427 = 1.0F - y_124426;
            float x_124428 = tmp2_124427 * tmp2_124427;
            float tmp3_124429 = tmp2_124427 * x_124428;
            float tmp4_124430 = defunc_0_f_res_124419 * tmp3_124429;
            float defunc_1_f_res_124431 = x_j_124422 * tmp4_124430;
            float defunc_1_f_res_124432 = x_j_124422 * defunc_1_f_res_124431;
            float defunc_1_op_res_124433 = tmp4_124430 + redout_124409;
            float defunc_1_op_res_124434 = defunc_1_f_res_124431 +
                  redout_124410;
            float defunc_1_op_res_124435 = defunc_1_f_res_124432 +
                  redout_124411;
            
            ((float *) mem_124336)[i_124408] = defunc_1_f_res_124431;
            ((float *) mem_124338)[i_124408] = tmp4_124430;
            
            float redout_tmp_124459 = defunc_1_op_res_124433;
            float redout_tmp_124460 = defunc_1_op_res_124434;
            float redout_tmp_124461 = defunc_1_op_res_124435;
            
            redout_124409 = redout_tmp_124459;
            redout_124410 = redout_tmp_124460;
            redout_124411 = redout_tmp_124461;
        }
        defunc_2_reduce_res_124340 = redout_124409;
        defunc_2_reduce_res_124341 = redout_124410;
        defunc_2_reduce_res_124342 = redout_124411;
        
        float x_124375 = defunc_2_reduce_res_124340 *
              defunc_2_reduce_res_124342;
        float y_124376 = defunc_2_reduce_res_124341 *
              defunc_2_reduce_res_124341;
        float y_124377 = x_124375 - y_124376;
        float det1_124378 = 1.0F / y_124377;
        float a11_124379 = defunc_2_reduce_res_124342 * det1_124378;
        float negate_arg_124380 = defunc_2_reduce_res_124341 * det1_124378;
        float b11_124381 = 0.0F - negate_arg_124380;
        float c11_124382 = defunc_2_reduce_res_124340 * det1_124378;
        float defunc_2_reduce_res_124383;
        float defunc_2_reduce_res_124384;
        float redout_124439;
        float redout_124440;
        
        redout_124439 = 0.0F;
        redout_124440 = 0.0F;
        for (int64_t i_124438 = 0; i_124438 < l_window_112808; i_124438++) {
            float x_124441 = ((float *) mem_124338)[i_124438];
            float x_124442 = ((float *) mem_124336)[i_124438];
            bool cond_124443 = sle64(n_112804, i_124438);
            float defunc_0_f_res_124444;
            
            if (cond_124443) {
                defunc_0_f_res_124444 = 0.0F;
            } else {
                int64_t i_124445 = add64(x_124331, i_124438);
                float x_124446 = ((float *) mem_120064.mem)[gtid_116454 *
                                                            n_112804 +
                                                            i_124445];
                
                defunc_0_f_res_124444 = x_124446;
            }
            
            float x_124447 = a11_124379 * x_124441;
            float y_124448 = b11_124381 * x_124442;
            float x_124449 = x_124447 + y_124448;
            float defunc_9_fit_fun_res_124450 = defunc_0_f_res_124444 *
                  x_124449;
            float x_124451 = b11_124381 * x_124441;
            float y_124452 = c11_124382 * x_124442;
            float x_124453 = x_124451 + y_124452;
            float defunc_9_slope_fun_res_124454 = defunc_0_f_res_124444 *
                  x_124453;
            float defunc_1_op_res_124455 = defunc_9_fit_fun_res_124450 +
                  redout_124439;
            float defunc_1_op_res_124456 = defunc_9_slope_fun_res_124454 +
                  redout_124440;
            float redout_tmp_124464 = defunc_1_op_res_124455;
            float redout_tmp_124465 = defunc_1_op_res_124456;
            
            redout_124439 = redout_tmp_124464;
            redout_124440 = redout_tmp_124465;
        }
        defunc_2_reduce_res_124383 = redout_124439;
        defunc_2_reduce_res_124384 = redout_124440;
        ((float *) mem_120280.mem)[gtid_116456] = defunc_2_reduce_res_124383;
        ((float *) mem_120283.mem)[gtid_116456] = defunc_2_reduce_res_124384;
    }
    
  cleanup:
    { }
    free(mem_124336);
    free(mem_124338);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128668_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128668_end -
                 futhark_mc_segmap_parloop_128668_start;
        
        ctx->futhark_mc_segmap_parloop_128668_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128668_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128668_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128666(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116455 = tid;
    int num_tasks_124406 = info.nsubtasks;
    struct futhark_mc_task_128665 *futhark_mc_task_128665 =
                                  (struct futhark_mc_task_128665 *) args;
    struct futhark_context *ctx = futhark_mc_task_128665->ctx;
    uint64_t futhark_mc_segmap_task_128666_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128666_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128665->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128665->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128665->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128665->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128665->free_i_112880;
    int64_t gtid_116454 = futhark_mc_task_128665->free_gtid_116454;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128665->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128665->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128665->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128665->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128665->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128665->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128665->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 = futhark_mc_task_128665->free_bytes_120242;
    struct memblock mem_120280 = {.desc ="mem_120280", .mem =
                                  futhark_mc_task_128665->free_mem_120280,
                                  .size =0, .references =NULL};
    struct memblock mem_120283 = {.desc ="mem_120283", .mem =
                                  futhark_mc_task_128665->free_mem_120283,
                                  .size =0, .references =NULL};
    int64_t iter_124407;
    struct futhark_mc_segmap_parloop_struct_128667
    futhark_mc_segmap_parloop_struct_128667;
    
    futhark_mc_segmap_parloop_struct_128667.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128667.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128667.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128667.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128667.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128667.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128667.free_gtid_116454 = gtid_116454;
    futhark_mc_segmap_parloop_struct_128667.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128667.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128667.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128667.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128667.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128667.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128667.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128667.free_bytes_120242 = bytes_120242;
    futhark_mc_segmap_parloop_struct_128667.free_mem_120280 = mem_120280.mem;
    futhark_mc_segmap_parloop_struct_128667.free_mem_120283 = mem_120283.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128668_task;
    
    futhark_mc_segmap_parloop_128668_task.name =
        "futhark_mc_segmap_parloop_128668";
    futhark_mc_segmap_parloop_128668_task.fn = futhark_mc_segmap_parloop_128668;
    futhark_mc_segmap_parloop_128668_task.args =
        &futhark_mc_segmap_parloop_struct_128667;
    futhark_mc_segmap_parloop_128668_task.iterations = iterations;
    futhark_mc_segmap_parloop_128668_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128668_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128668_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128668_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128668_task);
    
    if (futhark_mc_segmap_parloop_128668_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128668_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128668_total_end -
                 futhark_mc_segmap_parloop_128668_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128668_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128668_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128668_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128666_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128666_end -
                 futhark_mc_segmap_task_128666_start;
        
        ctx->futhark_mc_segmap_task_128666_runs[tid]++;
        ctx->futhark_mc_segmap_task_128666_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128666_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128672 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116454;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120242;
    char *free_mem_120280;
    char *free_mem_120283;
};
struct futhark_mc_task_128676 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116454;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_124261;
    float free_x_124262;
    float free_defunc_0_f_res_124265;
    float *retval_defunc_2_reduce_res_124268;
    float *retval_defunc_2_reduce_res_124269;
    float *retval_defunc_2_reduce_res_124270;
    char *retval_mem_124266;
    char *retval_mem_124267;
};
struct futhark_mc_segred_stage_1_parloop_struct_128681 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116454;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_124261;
    float free_x_124262;
    float free_defunc_0_f_res_124265;
    char *free_mem_124266;
    char *free_mem_124267;
    char *free_reduce_stage_1_tid_res_arr_mem_124518;
    char *free_reduce_stage_1_tid_res_arr_mem_124520;
    char *free_reduce_stage_1_tid_res_arr_mem_124522;
};
static int futhark_mc_segred_stage_1_parloop_128682(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116459,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128681
    *futhark_mc_segred_stage_1_parloop_struct_128681 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128681 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128681->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128682_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128682_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_n_112804;
    int64_t gtid_116454 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_gtid_116454;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segred_stage_1_parloop_struct_128681->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_124261 =
            futhark_mc_segred_stage_1_parloop_struct_128681->free_x_124261;
    float x_124262 =
          futhark_mc_segred_stage_1_parloop_struct_128681->free_x_124262;
    float defunc_0_f_res_124265 =
          futhark_mc_segred_stage_1_parloop_struct_128681->free_defunc_0_f_res_124265;
    struct memblock mem_124266 = {.desc ="mem_124266", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128681->free_mem_124266,
                                  .size =0, .references =NULL};
    struct memblock mem_124267 = {.desc ="mem_124267", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128681->free_mem_124267,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124518 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124518",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128681->free_reduce_stage_1_tid_res_arr_mem_124518,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124520 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124520",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128681->free_reduce_stage_1_tid_res_arr_mem_124520,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124522 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124522",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128681->free_reduce_stage_1_tid_res_arr_mem_124522,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124524 = start;
    float x_124467;
    float x_124468;
    float x_124470;
    float x_124471;
    float x_124473;
    float x_124474;
    float local_acc_124525 = 0.0F;
    float local_acc_124526 = 0.0F;
    float local_acc_124527 = 0.0F;
    
    for (; iter_124524 < end; iter_124524++) {
        int64_t gtid_116460 = iter_124524;
        bool cond_124476 = sle64(n_112804, gtid_116460);
        float defunc_0_f_res_124477;
        
        if (cond_124476) {
            defunc_0_f_res_124477 = 0.0F;
        } else {
            int64_t i_124478 = add64(gtid_116460, x_124261);
            float index_primexp_124479 = sitofp_i64_f32(i_124478);
            float defunc_0_f_res_f_res_124480 = 1.0F + index_primexp_124479;
            
            defunc_0_f_res_124477 = defunc_0_f_res_f_res_124480;
        }
        
        float defunc_0_f_res_124481;
        
        if (cond_124476) {
            defunc_0_f_res_124481 = 0.0F;
        } else {
            int64_t i_124482 = add64(gtid_116460, x_124261);
            float x_124483 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_116454 *
                                                    ctx_param_ext_119914 +
                                                    i_124482 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_124481 = x_124483;
        }
        
        float x_j_124484 = defunc_0_f_res_124477 - defunc_0_f_res_124265;
        float abs_res_124485 = (float) fabs(x_j_124484);
        float tmp1_124486 = abs_res_124485 / x_124262;
        float x_124487 = tmp1_124486 * tmp1_124486;
        float y_124488 = tmp1_124486 * x_124487;
        float tmp2_124489 = 1.0F - y_124488;
        float x_124490 = tmp2_124489 * tmp2_124489;
        float tmp3_124491 = tmp2_124489 * x_124490;
        float tmp4_124492 = defunc_0_f_res_124481 * tmp3_124491;
        float defunc_1_f_res_124493 = x_j_124484 * tmp4_124492;
        float defunc_1_f_res_124494 = x_j_124484 * defunc_1_f_res_124493;
        
        // save map-out results
        {
            ((float *) mem_124266.mem)[gtid_116460] = defunc_1_f_res_124493;
            ((float *) mem_124267.mem)[gtid_116460] = tmp4_124492;
        }
        // Load accum params
        {
            x_124467 = local_acc_124525;
        }
        // Load next params
        {
            x_124468 = tmp4_124492;
        }
        // Red body
        {
            float defunc_1_op_res_124469 = x_124467 + x_124468;
            
            local_acc_124525 = defunc_1_op_res_124469;
        }
        // Load accum params
        {
            x_124470 = local_acc_124526;
        }
        // Load next params
        {
            x_124471 = defunc_1_f_res_124493;
        }
        // Red body
        {
            float defunc_1_op_res_124472 = x_124470 + x_124471;
            
            local_acc_124526 = defunc_1_op_res_124472;
        }
        // Load accum params
        {
            x_124473 = local_acc_124527;
        }
        // Load next params
        {
            x_124474 = defunc_1_f_res_124494;
        }
        // Red body
        {
            float defunc_1_op_res_124475 = x_124473 + x_124474;
            
            local_acc_124527 = defunc_1_op_res_124475;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124518.mem)[flat_tid_116459] =
        local_acc_124525;
    ((float *) reduce_stage_1_tid_res_arr_mem_124520.mem)[flat_tid_116459] =
        local_acc_124526;
    ((float *) reduce_stage_1_tid_res_arr_mem_124522.mem)[flat_tid_116459] =
        local_acc_124527;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128682_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128682_end -
                 futhark_mc_segred_stage_1_parloop_128682_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128682_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128682_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128682_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128677(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116459 = tid;
    int num_tasks_124517 = info.nsubtasks;
    struct futhark_mc_task_128676 *futhark_mc_task_128676 =
                                  (struct futhark_mc_task_128676 *) args;
    struct futhark_context *ctx = futhark_mc_task_128676->ctx;
    uint64_t futhark_mc_segred_task_128677_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128677_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128676->free_n_112804;
    int64_t gtid_116454 = futhark_mc_task_128676->free_gtid_116454;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128676->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128676->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128676->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128676->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_124261 = futhark_mc_task_128676->free_x_124261;
    float x_124262 = futhark_mc_task_128676->free_x_124262;
    float defunc_0_f_res_124265 =
          futhark_mc_task_128676->free_defunc_0_f_res_124265;
    float defunc_2_reduce_res_124268 =
          *futhark_mc_task_128676->retval_defunc_2_reduce_res_124268;
    float defunc_2_reduce_res_124269 =
          *futhark_mc_task_128676->retval_defunc_2_reduce_res_124269;
    float defunc_2_reduce_res_124270 =
          *futhark_mc_task_128676->retval_defunc_2_reduce_res_124270;
    struct memblock mem_124266 = {.desc ="mem_124266", .mem =
                                  futhark_mc_task_128676->retval_mem_124266,
                                  .size =0, .references =NULL};
    struct memblock mem_124267 = {.desc ="mem_124267", .mem =
                                  futhark_mc_task_128676->retval_mem_124267,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_124518_cached_sizze_128678 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124518 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124520_cached_sizze_128679 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124520 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124522_cached_sizze_128680 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124522 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124518_cached_sizze_128678 <
        (size_t) ((int64_t) 4 * num_tasks_124517)) {
        reduce_stage_1_tid_res_arr_mem_124518 =
            realloc(reduce_stage_1_tid_res_arr_mem_124518, (int64_t) 4 *
                    num_tasks_124517);
        reduce_stage_1_tid_res_arr_mem_124518_cached_sizze_128678 =
            (int64_t) 4 * num_tasks_124517;
    }
    if (reduce_stage_1_tid_res_arr_mem_124520_cached_sizze_128679 <
        (size_t) ((int64_t) 4 * num_tasks_124517)) {
        reduce_stage_1_tid_res_arr_mem_124520 =
            realloc(reduce_stage_1_tid_res_arr_mem_124520, (int64_t) 4 *
                    num_tasks_124517);
        reduce_stage_1_tid_res_arr_mem_124520_cached_sizze_128679 =
            (int64_t) 4 * num_tasks_124517;
    }
    if (reduce_stage_1_tid_res_arr_mem_124522_cached_sizze_128680 <
        (size_t) ((int64_t) 4 * num_tasks_124517)) {
        reduce_stage_1_tid_res_arr_mem_124522 =
            realloc(reduce_stage_1_tid_res_arr_mem_124522, (int64_t) 4 *
                    num_tasks_124517);
        reduce_stage_1_tid_res_arr_mem_124522_cached_sizze_128680 =
            (int64_t) 4 * num_tasks_124517;
    }
    
    int64_t iter_124524;
    struct futhark_mc_segred_stage_1_parloop_struct_128681
    futhark_mc_segred_stage_1_parloop_struct_128681;
    
    futhark_mc_segred_stage_1_parloop_struct_128681.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_gtid_116454 =
        gtid_116454;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_x_124261 = x_124261;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_x_124262 = x_124262;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_defunc_0_f_res_124265 =
        defunc_0_f_res_124265;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_mem_124266 =
        mem_124266.mem;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_mem_124267 =
        mem_124267.mem;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_reduce_stage_1_tid_res_arr_mem_124518 =
        reduce_stage_1_tid_res_arr_mem_124518;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_reduce_stage_1_tid_res_arr_mem_124520 =
        reduce_stage_1_tid_res_arr_mem_124520;
    futhark_mc_segred_stage_1_parloop_struct_128681.free_reduce_stage_1_tid_res_arr_mem_124522 =
        reduce_stage_1_tid_res_arr_mem_124522;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128682_task;
    
    futhark_mc_segred_stage_1_parloop_128682_task.name =
        "futhark_mc_segred_stage_1_parloop_128682";
    futhark_mc_segred_stage_1_parloop_128682_task.fn =
        futhark_mc_segred_stage_1_parloop_128682;
    futhark_mc_segred_stage_1_parloop_128682_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128681;
    futhark_mc_segred_stage_1_parloop_128682_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128682_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128682_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128682_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128682_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128682_task);
    
    if (futhark_mc_segred_stage_1_parloop_128682_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128682_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128682_total_end -
                 futhark_mc_segred_stage_1_parloop_128682_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128682_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128682_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128682_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124268 = 0.0F;
        defunc_2_reduce_res_124269 = 0.0F;
        defunc_2_reduce_res_124270 = 0.0F;
    }
    
    float x_124528;
    float x_124529;
    float x_124531;
    float x_124532;
    float x_124534;
    float x_124535;
    
    for (int32_t i_124537 = 0; i_124537 < num_tasks_124517; i_124537++) {
        flat_tid_116459 = i_124537;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124528 = defunc_2_reduce_res_124268;
            }
            // load next params
            {
                x_124529 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124518)[flat_tid_116459];
            }
            // red body
            {
                float defunc_1_op_res_124530 = x_124528 + x_124529;
                
                defunc_2_reduce_res_124268 = defunc_1_op_res_124530;
            }
            // load acc params
            {
                x_124531 = defunc_2_reduce_res_124269;
            }
            // load next params
            {
                x_124532 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124520)[flat_tid_116459];
            }
            // red body
            {
                float defunc_1_op_res_124533 = x_124531 + x_124532;
                
                defunc_2_reduce_res_124269 = defunc_1_op_res_124533;
            }
            // load acc params
            {
                x_124534 = defunc_2_reduce_res_124270;
            }
            // load next params
            {
                x_124535 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124522)[flat_tid_116459];
            }
            // red body
            {
                float defunc_1_op_res_124536 = x_124534 + x_124535;
                
                defunc_2_reduce_res_124270 = defunc_1_op_res_124536;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124518);
    free(reduce_stage_1_tid_res_arr_mem_124520);
    free(reduce_stage_1_tid_res_arr_mem_124522);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128677_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128677_end -
                 futhark_mc_segred_task_128677_start;
        
        ctx->futhark_mc_segred_task_128677_runs[tid]++;
        ctx->futhark_mc_segred_task_128677_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128677_iter[tid] += iterations;
    }
    *futhark_mc_task_128676->retval_defunc_2_reduce_res_124268 =
        defunc_2_reduce_res_124268;
    *futhark_mc_task_128676->retval_defunc_2_reduce_res_124269 =
        defunc_2_reduce_res_124269;
    *futhark_mc_task_128676->retval_defunc_2_reduce_res_124270 =
        defunc_2_reduce_res_124270;
    futhark_mc_task_128676->retval_mem_124266 = mem_124266.mem;
    futhark_mc_task_128676->retval_mem_124267 = mem_124267.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128683 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116454;
    char *free_mem_120064;
    int64_t free_x_124261;
    char *free_mem_124266;
    char *free_mem_124267;
    float free_a11_124305;
    float free_b11_124307;
    float free_c11_124308;
    float *retval_defunc_2_reduce_res_124309;
    float *retval_defunc_2_reduce_res_124310;
};
struct futhark_mc_segred_stage_1_parloop_struct_128687 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116454;
    char *free_mem_120064;
    int64_t free_x_124261;
    char *free_mem_124266;
    char *free_mem_124267;
    float free_a11_124305;
    float free_b11_124307;
    float free_c11_124308;
    char *free_reduce_stage_1_tid_res_arr_mem_124539;
    char *free_reduce_stage_1_tid_res_arr_mem_124541;
};
static int futhark_mc_segred_stage_1_parloop_128688(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116461,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128687
    *futhark_mc_segred_stage_1_parloop_struct_128687 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128687 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128687->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128688_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128688_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128687->free_n_112804;
    int64_t gtid_116454 =
            futhark_mc_segred_stage_1_parloop_struct_128687->free_gtid_116454;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128687->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_124261 =
            futhark_mc_segred_stage_1_parloop_struct_128687->free_x_124261;
    struct memblock mem_124266 = {.desc ="mem_124266", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128687->free_mem_124266,
                                  .size =0, .references =NULL};
    struct memblock mem_124267 = {.desc ="mem_124267", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128687->free_mem_124267,
                                  .size =0, .references =NULL};
    float a11_124305 =
          futhark_mc_segred_stage_1_parloop_struct_128687->free_a11_124305;
    float b11_124307 =
          futhark_mc_segred_stage_1_parloop_struct_128687->free_b11_124307;
    float c11_124308 =
          futhark_mc_segred_stage_1_parloop_struct_128687->free_c11_124308;
    struct memblock reduce_stage_1_tid_res_arr_mem_124539 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124539",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128687->free_reduce_stage_1_tid_res_arr_mem_124539,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_124541 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_124541",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128687->free_reduce_stage_1_tid_res_arr_mem_124541,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_124543 = start;
    float x_124495;
    float x_124496;
    float x_124498;
    float x_124499;
    float local_acc_124544 = 0.0F;
    float local_acc_124545 = 0.0F;
    
    for (; iter_124543 < end; iter_124543++) {
        int64_t gtid_116462 = iter_124543;
        float x_124501 = ((float *) mem_124267.mem)[gtid_116462];
        float x_124502 = ((float *) mem_124266.mem)[gtid_116462];
        bool cond_124503 = sle64(n_112804, gtid_116462);
        float defunc_0_f_res_124504;
        
        if (cond_124503) {
            defunc_0_f_res_124504 = 0.0F;
        } else {
            int64_t i_124505 = add64(gtid_116462, x_124261);
            float x_124506 = ((float *) mem_120064.mem)[gtid_116454 * n_112804 +
                                                        i_124505];
            
            defunc_0_f_res_124504 = x_124506;
        }
        
        float x_124507 = a11_124305 * x_124501;
        float y_124508 = b11_124307 * x_124502;
        float x_124509 = x_124507 + y_124508;
        float defunc_9_fit_fun_res_124510 = defunc_0_f_res_124504 * x_124509;
        float x_124511 = b11_124307 * x_124501;
        float y_124512 = c11_124308 * x_124502;
        float x_124513 = x_124511 + y_124512;
        float defunc_9_slope_fun_res_124514 = defunc_0_f_res_124504 * x_124513;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_124495 = local_acc_124544;
        }
        // Load next params
        {
            x_124496 = defunc_9_fit_fun_res_124510;
        }
        // Red body
        {
            float defunc_1_op_res_124497 = x_124495 + x_124496;
            
            local_acc_124544 = defunc_1_op_res_124497;
        }
        // Load accum params
        {
            x_124498 = local_acc_124545;
        }
        // Load next params
        {
            x_124499 = defunc_9_slope_fun_res_124514;
        }
        // Red body
        {
            float defunc_1_op_res_124500 = x_124498 + x_124499;
            
            local_acc_124545 = defunc_1_op_res_124500;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_124539.mem)[flat_tid_116461] =
        local_acc_124544;
    ((float *) reduce_stage_1_tid_res_arr_mem_124541.mem)[flat_tid_116461] =
        local_acc_124545;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128688_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128688_end -
                 futhark_mc_segred_stage_1_parloop_128688_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128688_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128688_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128688_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128684(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116461 = tid;
    int num_tasks_124538 = info.nsubtasks;
    struct futhark_mc_task_128683 *futhark_mc_task_128683 =
                                  (struct futhark_mc_task_128683 *) args;
    struct futhark_context *ctx = futhark_mc_task_128683->ctx;
    uint64_t futhark_mc_segred_task_128684_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128684_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128683->free_n_112804;
    int64_t gtid_116454 = futhark_mc_task_128683->free_gtid_116454;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128683->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_124261 = futhark_mc_task_128683->free_x_124261;
    struct memblock mem_124266 = {.desc ="mem_124266", .mem =
                                  futhark_mc_task_128683->free_mem_124266,
                                  .size =0, .references =NULL};
    struct memblock mem_124267 = {.desc ="mem_124267", .mem =
                                  futhark_mc_task_128683->free_mem_124267,
                                  .size =0, .references =NULL};
    float a11_124305 = futhark_mc_task_128683->free_a11_124305;
    float b11_124307 = futhark_mc_task_128683->free_b11_124307;
    float c11_124308 = futhark_mc_task_128683->free_c11_124308;
    float defunc_2_reduce_res_124309 =
          *futhark_mc_task_128683->retval_defunc_2_reduce_res_124309;
    float defunc_2_reduce_res_124310 =
          *futhark_mc_task_128683->retval_defunc_2_reduce_res_124310;
    size_t reduce_stage_1_tid_res_arr_mem_124539_cached_sizze_128685 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124539 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_124541_cached_sizze_128686 = 0;
    char *reduce_stage_1_tid_res_arr_mem_124541 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_124539_cached_sizze_128685 <
        (size_t) ((int64_t) 4 * num_tasks_124538)) {
        reduce_stage_1_tid_res_arr_mem_124539 =
            realloc(reduce_stage_1_tid_res_arr_mem_124539, (int64_t) 4 *
                    num_tasks_124538);
        reduce_stage_1_tid_res_arr_mem_124539_cached_sizze_128685 =
            (int64_t) 4 * num_tasks_124538;
    }
    if (reduce_stage_1_tid_res_arr_mem_124541_cached_sizze_128686 <
        (size_t) ((int64_t) 4 * num_tasks_124538)) {
        reduce_stage_1_tid_res_arr_mem_124541 =
            realloc(reduce_stage_1_tid_res_arr_mem_124541, (int64_t) 4 *
                    num_tasks_124538);
        reduce_stage_1_tid_res_arr_mem_124541_cached_sizze_128686 =
            (int64_t) 4 * num_tasks_124538;
    }
    
    int64_t iter_124543;
    struct futhark_mc_segred_stage_1_parloop_struct_128687
    futhark_mc_segred_stage_1_parloop_struct_128687;
    
    futhark_mc_segred_stage_1_parloop_struct_128687.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_gtid_116454 =
        gtid_116454;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_x_124261 = x_124261;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_mem_124266 =
        mem_124266.mem;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_mem_124267 =
        mem_124267.mem;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_a11_124305 =
        a11_124305;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_b11_124307 =
        b11_124307;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_c11_124308 =
        c11_124308;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_reduce_stage_1_tid_res_arr_mem_124539 =
        reduce_stage_1_tid_res_arr_mem_124539;
    futhark_mc_segred_stage_1_parloop_struct_128687.free_reduce_stage_1_tid_res_arr_mem_124541 =
        reduce_stage_1_tid_res_arr_mem_124541;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128688_task;
    
    futhark_mc_segred_stage_1_parloop_128688_task.name =
        "futhark_mc_segred_stage_1_parloop_128688";
    futhark_mc_segred_stage_1_parloop_128688_task.fn =
        futhark_mc_segred_stage_1_parloop_128688;
    futhark_mc_segred_stage_1_parloop_128688_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128687;
    futhark_mc_segred_stage_1_parloop_128688_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128688_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128688_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128688_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128688_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128688_task);
    
    if (futhark_mc_segred_stage_1_parloop_128688_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128688_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128688_total_end -
                 futhark_mc_segred_stage_1_parloop_128688_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128688_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128688_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128688_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124309 = 0.0F;
        defunc_2_reduce_res_124310 = 0.0F;
    }
    
    float x_124546;
    float x_124547;
    float x_124549;
    float x_124550;
    
    for (int32_t i_124552 = 0; i_124552 < num_tasks_124538; i_124552++) {
        flat_tid_116461 = i_124552;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_124546 = defunc_2_reduce_res_124309;
            }
            // load next params
            {
                x_124547 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124539)[flat_tid_116461];
            }
            // red body
            {
                float defunc_1_op_res_124548 = x_124546 + x_124547;
                
                defunc_2_reduce_res_124309 = defunc_1_op_res_124548;
            }
            // load acc params
            {
                x_124549 = defunc_2_reduce_res_124310;
            }
            // load next params
            {
                x_124550 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_124541)[flat_tid_116461];
            }
            // red body
            {
                float defunc_1_op_res_124551 = x_124549 + x_124550;
                
                defunc_2_reduce_res_124310 = defunc_1_op_res_124551;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_124539);
    free(reduce_stage_1_tid_res_arr_mem_124541);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128684_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128684_end -
                 futhark_mc_segred_task_128684_start;
        
        ctx->futhark_mc_segred_task_128684_runs[tid]++;
        ctx->futhark_mc_segred_task_128684_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128684_iter[tid] += iterations;
    }
    *futhark_mc_task_128683->retval_defunc_2_reduce_res_124309 =
        defunc_2_reduce_res_124309;
    *futhark_mc_task_128683->retval_defunc_2_reduce_res_124310 =
        defunc_2_reduce_res_124310;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128673(void *args, int64_t start,
                                            int64_t end, int flat_tid_116457,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128672
    *futhark_mc_segmap_parloop_struct_128672 =
    (struct futhark_mc_segmap_parloop_struct_128672 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128672->ctx;
    uint64_t futhark_mc_segmap_parloop_128673_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128673_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128672->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128672->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128672->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128672->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128672->free_i_112880;
    int64_t gtid_116454 =
            futhark_mc_segmap_parloop_struct_128672->free_gtid_116454;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128672->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128672->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128672->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128672->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128672->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128672->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128672->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 =
            futhark_mc_segmap_parloop_struct_128672->free_bytes_120242;
    struct memblock mem_120280 = {.desc ="mem_120280", .mem =
                                  futhark_mc_segmap_parloop_struct_128672->free_mem_120280,
                                  .size =0, .references =NULL};
    struct memblock mem_120283 = {.desc ="mem_120283", .mem =
                                  futhark_mc_segmap_parloop_struct_128672->free_mem_120283,
                                  .size =0, .references =NULL};
    size_t mem_124266_cached_sizze_128674 = 0;
    char *mem_124266 = NULL;
    size_t mem_124267_cached_sizze_128675 = 0;
    char *mem_124267 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124466 = start;
    
    if (mem_124266_cached_sizze_128674 < (size_t) bytes_120242) {
        mem_124266 = realloc(mem_124266, bytes_120242);
        mem_124266_cached_sizze_128674 = bytes_120242;
    }
    if (mem_124267_cached_sizze_128675 < (size_t) bytes_120242) {
        mem_124267 = realloc(mem_124267, bytes_120242);
        mem_124267_cached_sizze_128675 = bytes_120242;
    }
    for (; iter_124466 < end; iter_124466++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124515 = l_n_m_112854;
        int64_t gtid_116458 = iter_124466;
        int64_t remnant_124516 = iter_124466 - gtid_116458;
        int64_t x_124261 = ((int64_t *) mem_119820.mem)[gtid_116454 *
                                                        l_n_m_112854 +
                                                        gtid_116458];
        float x_124262 = ((float *) mem_119824.mem)[gtid_116454 * l_n_m_112854 +
                                                    gtid_116458];
        int64_t min_arg_124263 = mul64(t_jump_112811, gtid_116458);
        int64_t min_res_124264 = smin64(i_112880, min_arg_124263);
        float defunc_0_f_res_124265 = sitofp_i64_f32(min_res_124264);
        float defunc_2_reduce_res_124268;
        float defunc_2_reduce_res_124269;
        float defunc_2_reduce_res_124270;
        int64_t flat_tid_116459 = (int64_t) 0;
        int32_t num_tasks_124517;
        struct futhark_mc_task_128676 futhark_mc_task_128676;
        
        futhark_mc_task_128676.ctx = ctx;
        futhark_mc_task_128676.free_n_112804 = n_112804;
        futhark_mc_task_128676.free_gtid_116454 = gtid_116454;
        futhark_mc_task_128676.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128676.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128676.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128676.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128676.free_x_124261 = x_124261;
        futhark_mc_task_128676.free_x_124262 = x_124262;
        futhark_mc_task_128676.free_defunc_0_f_res_124265 =
            defunc_0_f_res_124265;
        futhark_mc_task_128676.retval_defunc_2_reduce_res_124268 =
            &defunc_2_reduce_res_124268;
        futhark_mc_task_128676.retval_defunc_2_reduce_res_124269 =
            &defunc_2_reduce_res_124269;
        futhark_mc_task_128676.retval_defunc_2_reduce_res_124270 =
            &defunc_2_reduce_res_124270;
        futhark_mc_task_128676.retval_mem_124266 = mem_124266;
        futhark_mc_task_128676.retval_mem_124267 = mem_124267;
        
        struct scheduler_segop futhark_mc_task_128676_task;
        
        futhark_mc_task_128676_task.args = &futhark_mc_task_128676;
        futhark_mc_task_128676_task.top_level_fn =
            futhark_mc_segred_task_128677;
        futhark_mc_task_128676_task.name = "futhark_mc_segred_task_128677";
        futhark_mc_task_128676_task.iterations = l_window_112808;
        futhark_mc_task_128676_task.task_time =
            &ctx->futhark_mc_segred_task_128677_total_time;
        futhark_mc_task_128676_task.task_iter =
            &ctx->futhark_mc_segred_task_128677_total_iter;
        futhark_mc_task_128676_task.sched = STATIC;
        futhark_mc_task_128676_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128677_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128676_task);
        
        if (futhark_mc_segred_task_128677_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_124301 = defunc_2_reduce_res_124268 *
              defunc_2_reduce_res_124270;
        float y_124302 = defunc_2_reduce_res_124269 *
              defunc_2_reduce_res_124269;
        float y_124303 = x_124301 - y_124302;
        float det1_124304 = 1.0F / y_124303;
        float a11_124305 = defunc_2_reduce_res_124270 * det1_124304;
        float negate_arg_124306 = defunc_2_reduce_res_124269 * det1_124304;
        float b11_124307 = 0.0F - negate_arg_124306;
        float c11_124308 = defunc_2_reduce_res_124268 * det1_124304;
        float defunc_2_reduce_res_124309;
        float defunc_2_reduce_res_124310;
        int64_t flat_tid_116461 = (int64_t) 0;
        int32_t num_tasks_124538;
        struct futhark_mc_task_128683 futhark_mc_task_128683;
        
        futhark_mc_task_128683.ctx = ctx;
        futhark_mc_task_128683.free_n_112804 = n_112804;
        futhark_mc_task_128683.free_gtid_116454 = gtid_116454;
        futhark_mc_task_128683.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128683.free_x_124261 = x_124261;
        futhark_mc_task_128683.free_mem_124266 = mem_124266;
        futhark_mc_task_128683.free_mem_124267 = mem_124267;
        futhark_mc_task_128683.free_a11_124305 = a11_124305;
        futhark_mc_task_128683.free_b11_124307 = b11_124307;
        futhark_mc_task_128683.free_c11_124308 = c11_124308;
        futhark_mc_task_128683.retval_defunc_2_reduce_res_124309 =
            &defunc_2_reduce_res_124309;
        futhark_mc_task_128683.retval_defunc_2_reduce_res_124310 =
            &defunc_2_reduce_res_124310;
        
        struct scheduler_segop futhark_mc_task_128683_task;
        
        futhark_mc_task_128683_task.args = &futhark_mc_task_128683;
        futhark_mc_task_128683_task.top_level_fn =
            futhark_mc_segred_task_128684;
        futhark_mc_task_128683_task.name = "futhark_mc_segred_task_128684";
        futhark_mc_task_128683_task.iterations = l_window_112808;
        futhark_mc_task_128683_task.task_time =
            &ctx->futhark_mc_segred_task_128684_total_time;
        futhark_mc_task_128683_task.task_iter =
            &ctx->futhark_mc_segred_task_128684_total_iter;
        futhark_mc_task_128683_task.sched = STATIC;
        futhark_mc_task_128683_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128684_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128683_task);
        
        if (futhark_mc_segred_task_128684_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120280.mem)[gtid_116458] = defunc_2_reduce_res_124309;
        ((float *) mem_120283.mem)[gtid_116458] = defunc_2_reduce_res_124310;
    }
    
  cleanup:
    { }
    free(mem_124266);
    free(mem_124267);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128673_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128673_end -
                 futhark_mc_segmap_parloop_128673_start;
        
        ctx->futhark_mc_segmap_parloop_128673_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128673_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128673_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128671(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116457 = tid;
    int num_tasks_124406 = info.nsubtasks;
    struct futhark_mc_task_128665 *futhark_mc_task_128665 =
                                  (struct futhark_mc_task_128665 *) args;
    struct futhark_context *ctx = futhark_mc_task_128665->ctx;
    uint64_t futhark_mc_segmap_nested_task_128671_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128671_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128665->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128665->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128665->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128665->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128665->free_i_112880;
    int64_t gtid_116454 = futhark_mc_task_128665->free_gtid_116454;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128665->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128665->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128665->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128665->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128665->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128665->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128665->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 = futhark_mc_task_128665->free_bytes_120242;
    struct memblock mem_120280 = {.desc ="mem_120280", .mem =
                                  futhark_mc_task_128665->free_mem_120280,
                                  .size =0, .references =NULL};
    struct memblock mem_120283 = {.desc ="mem_120283", .mem =
                                  futhark_mc_task_128665->free_mem_120283,
                                  .size =0, .references =NULL};
    int64_t iter_124466;
    struct futhark_mc_segmap_parloop_struct_128672
    futhark_mc_segmap_parloop_struct_128672;
    
    futhark_mc_segmap_parloop_struct_128672.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128672.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128672.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128672.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128672.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128672.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128672.free_gtid_116454 = gtid_116454;
    futhark_mc_segmap_parloop_struct_128672.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128672.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128672.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128672.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128672.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128672.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128672.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128672.free_bytes_120242 = bytes_120242;
    futhark_mc_segmap_parloop_struct_128672.free_mem_120280 = mem_120280.mem;
    futhark_mc_segmap_parloop_struct_128672.free_mem_120283 = mem_120283.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128673_task;
    
    futhark_mc_segmap_parloop_128673_task.name =
        "futhark_mc_segmap_parloop_128673";
    futhark_mc_segmap_parloop_128673_task.fn = futhark_mc_segmap_parloop_128673;
    futhark_mc_segmap_parloop_128673_task.args =
        &futhark_mc_segmap_parloop_struct_128672;
    futhark_mc_segmap_parloop_128673_task.iterations = iterations;
    futhark_mc_segmap_parloop_128673_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128673_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128673_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128673_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128673_task);
    
    if (futhark_mc_segmap_parloop_128673_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128673_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128673_total_end -
                 futhark_mc_segmap_parloop_128673_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128673_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128673_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128673_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128671_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128671_end -
                 futhark_mc_segmap_nested_task_128671_start;
        
        ctx->futhark_mc_segmap_nested_task_128671_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128671_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128671_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128662(void *args, int64_t start,
                                            int64_t end, int flat_tid_116453,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128661
    *futhark_mc_segmap_parloop_struct_128661 =
    (struct futhark_mc_segmap_parloop_struct_128661 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128661->ctx;
    uint64_t futhark_mc_segmap_parloop_128662_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128662_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128661->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128661->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128661->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128661->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128661->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128661->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128661->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128661->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128661->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128661->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128661->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128661->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128661->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128661->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 =
            futhark_mc_segmap_parloop_struct_128661->free_bytes_120242;
    struct memblock mem_120347 = {.desc ="mem_120347", .mem =
                                  futhark_mc_segmap_parloop_struct_128661->free_mem_120347,
                                  .size =0, .references =NULL};
    struct memblock mem_120351 = {.desc ="mem_120351", .mem =
                                  futhark_mc_segmap_parloop_struct_128661->free_mem_120351,
                                  .size =0, .references =NULL};
    size_t mem_120280_cached_sizze_128663 = 0;
    char *mem_120280 = NULL;
    size_t mem_120283_cached_sizze_128664 = 0;
    char *mem_120283 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124260 = start;
    
    if (mem_120280_cached_sizze_128663 < (size_t) bytes_119766) {
        mem_120280 = realloc(mem_120280, bytes_119766);
        mem_120280_cached_sizze_128663 = bytes_119766;
    }
    if (mem_120283_cached_sizze_128664 < (size_t) bytes_119766) {
        mem_120283 = realloc(mem_120283, bytes_119766);
        mem_120283_cached_sizze_128664 = bytes_119766;
    }
    for (; iter_124260 < end; iter_124260++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124404 = m_112803;
        int64_t gtid_116454 = iter_124260;
        int64_t remnant_124405 = iter_124260 - gtid_116454;
        int64_t flat_tid_116455 = (int64_t) 0;
        int32_t num_tasks_124406;
        int64_t flat_tid_116457 = (int64_t) 0;
        struct futhark_mc_task_128665 futhark_mc_task_128665;
        
        futhark_mc_task_128665.ctx = ctx;
        futhark_mc_task_128665.free_n_112804 = n_112804;
        futhark_mc_task_128665.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128665.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128665.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128665.free_i_112880 = i_112880;
        futhark_mc_task_128665.free_gtid_116454 = gtid_116454;
        futhark_mc_task_128665.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128665.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128665.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128665.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128665.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128665.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128665.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128665.free_bytes_120242 = bytes_120242;
        futhark_mc_task_128665.free_mem_120280 = mem_120280;
        futhark_mc_task_128665.free_mem_120283 = mem_120283;
        
        struct scheduler_segop futhark_mc_task_128665_task;
        
        futhark_mc_task_128665_task.args = &futhark_mc_task_128665;
        futhark_mc_task_128665_task.top_level_fn =
            futhark_mc_segmap_task_128666;
        futhark_mc_task_128665_task.name = "futhark_mc_segmap_task_128666";
        futhark_mc_task_128665_task.iterations = l_n_m_112854;
        futhark_mc_task_128665_task.task_time =
            &ctx->futhark_mc_segmap_task_128666_total_time;
        futhark_mc_task_128665_task.task_iter =
            &ctx->futhark_mc_segmap_task_128666_total_iter;
        futhark_mc_task_128665_task.sched = STATIC;
        futhark_mc_task_128665_task.nested_fn =
            futhark_mc_segmap_nested_task_128671;
        
        int futhark_mc_segmap_task_128666_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128665_task);
        
        if (futhark_mc_segmap_task_128666_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120347.mem + gtid_116454 * l_n_m_112854 * (int64_t) 4,
                mem_120280 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120351.mem + gtid_116454 * l_n_m_112854 * (int64_t) 4,
                mem_120283 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120280);
    free(mem_120283);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128662_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128662_end -
                 futhark_mc_segmap_parloop_128662_start;
        
        ctx->futhark_mc_segmap_parloop_128662_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128662_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128662_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128660(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116453 = tid;
    int num_tasks_124171 = info.nsubtasks;
    struct futhark_mc_task_128652 *futhark_mc_task_128652 =
                                  (struct futhark_mc_task_128652 *) args;
    struct futhark_context *ctx = futhark_mc_task_128652->ctx;
    uint64_t futhark_mc_segmap_nested_task_128660_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128660_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128652->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128652->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128652->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128652->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128652->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128652->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128652->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128652->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128652->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128652->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128652->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128652->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128652->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128652->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120242 = futhark_mc_task_128652->free_bytes_120242;
    struct memblock mem_120347 = {.desc ="mem_120347", .mem =
                                  futhark_mc_task_128652->free_mem_120347,
                                  .size =0, .references =NULL};
    struct memblock mem_120351 = {.desc ="mem_120351", .mem =
                                  futhark_mc_task_128652->free_mem_120351,
                                  .size =0, .references =NULL};
    int64_t iter_124260;
    struct futhark_mc_segmap_parloop_struct_128661
    futhark_mc_segmap_parloop_struct_128661;
    
    futhark_mc_segmap_parloop_struct_128661.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128661.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128661.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128661.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128661.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128661.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128661.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128661.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128661.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128661.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128661.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128661.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128661.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128661.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128661.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128661.free_bytes_120242 = bytes_120242;
    futhark_mc_segmap_parloop_struct_128661.free_mem_120347 = mem_120347.mem;
    futhark_mc_segmap_parloop_struct_128661.free_mem_120351 = mem_120351.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128662_task;
    
    futhark_mc_segmap_parloop_128662_task.name =
        "futhark_mc_segmap_parloop_128662";
    futhark_mc_segmap_parloop_128662_task.fn = futhark_mc_segmap_parloop_128662;
    futhark_mc_segmap_parloop_128662_task.args =
        &futhark_mc_segmap_parloop_struct_128661;
    futhark_mc_segmap_parloop_128662_task.iterations = iterations;
    futhark_mc_segmap_parloop_128662_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128662_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128662_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128662_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128662_task);
    
    if (futhark_mc_segmap_parloop_128662_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128662_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128662_total_end -
                 futhark_mc_segmap_parloop_128662_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128662_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128662_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128662_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128660_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128660_end -
                 futhark_mc_segmap_nested_task_128660_start;
        
        ctx->futhark_mc_segmap_nested_task_128660_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128660_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128660_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128689 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120523;
    char *free_mem_120527;
};
struct futhark_mc_segmap_parloop_struct_128691 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120523;
    char *free_mem_120527;
};
static int futhark_mc_segmap_parloop_128692(void *args, int64_t start,
                                            int64_t end, int flat_tid_116682,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128691
    *futhark_mc_segmap_parloop_struct_128691 =
    (struct futhark_mc_segmap_parloop_struct_128691 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128691->ctx;
    uint64_t futhark_mc_segmap_parloop_128692_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128692_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128691->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128691->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128691->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128691->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128691->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128691->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128691->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128691->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128691->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128691->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128691->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128691->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128691->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128691->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 =
            futhark_mc_segmap_parloop_struct_128691->free_bytes_120352;
    struct memblock mem_120523 = {.desc ="mem_120523", .mem =
                                  futhark_mc_segmap_parloop_struct_128691->free_mem_120523,
                                  .size =0, .references =NULL};
    struct memblock mem_120527 = {.desc ="mem_120527", .mem =
                                  futhark_mc_segmap_parloop_struct_128691->free_mem_120527,
                                  .size =0, .references =NULL};
    size_t mem_120432_cached_sizze_128693 = 0;
    char *mem_120432 = NULL;
    size_t mem_120435_cached_sizze_128694 = 0;
    char *mem_120435 = NULL;
    size_t mem_120452_cached_sizze_128695 = 0;
    char *mem_120452 = NULL;
    size_t mem_120455_cached_sizze_128696 = 0;
    char *mem_120455 = NULL;
    size_t mem_120482_cached_sizze_128697 = 0;
    char *mem_120482 = NULL;
    size_t mem_120485_cached_sizze_128698 = 0;
    char *mem_120485 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124554 = start;
    
    if (mem_120432_cached_sizze_128693 < (size_t) bytes_119766) {
        mem_120432 = realloc(mem_120432, bytes_119766);
        mem_120432_cached_sizze_128693 = bytes_119766;
    }
    if (mem_120435_cached_sizze_128694 < (size_t) bytes_119766) {
        mem_120435 = realloc(mem_120435, bytes_119766);
        mem_120435_cached_sizze_128694 = bytes_119766;
    }
    if (mem_120452_cached_sizze_128695 < (size_t) bytes_120352) {
        mem_120452 = realloc(mem_120452, bytes_120352);
        mem_120452_cached_sizze_128695 = bytes_120352;
    }
    if (mem_120455_cached_sizze_128696 < (size_t) bytes_120352) {
        mem_120455 = realloc(mem_120455, bytes_120352);
        mem_120455_cached_sizze_128696 = bytes_120352;
    }
    if (mem_120482_cached_sizze_128697 < (size_t) bytes_120352) {
        mem_120482 = realloc(mem_120482, bytes_120352);
        mem_120482_cached_sizze_128697 = bytes_120352;
    }
    if (mem_120485_cached_sizze_128698 < (size_t) bytes_120352) {
        mem_120485 = realloc(mem_120485, bytes_120352);
        mem_120485_cached_sizze_128698 = bytes_120352;
    }
    for (; iter_124554 < end; iter_124554++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124672 = m_112803;
        int64_t gtid_116683 = iter_124554;
        int64_t remnant_124673 = iter_124554 - gtid_116683;
        
        for (int64_t i_124555 = 0; i_124555 < l_n_m_112854; i_124555++) {
            int64_t x_124558 = ((int64_t *) mem_119820.mem)[gtid_116683 *
                                                            l_n_m_112854 +
                                                            i_124555];
            float x_124559 = ((float *) mem_119824.mem)[gtid_116683 *
                                                        l_n_m_112854 +
                                                        i_124555];
            int64_t min_arg_124560 = mul64(t_jump_112811, i_124555);
            int64_t min_res_124561 = smin64(i_112880, min_arg_124560);
            float defunc_0_f_res_124562 = sitofp_i64_f32(min_res_124561);
            
            for (int64_t i_124567 = 0; i_124567 < l_window_112808; i_124567++) {
                bool cond_124570 = sle64(n_112804, i_124567);
                float defunc_0_f_res_124571;
                
                if (cond_124570) {
                    defunc_0_f_res_124571 = 0.0F;
                } else {
                    int64_t i_124572 = add64(x_124558, i_124567);
                    float index_primexp_124573 = sitofp_i64_f32(i_124572);
                    float defunc_0_f_res_f_res_124574 = 1.0F +
                          index_primexp_124573;
                    
                    defunc_0_f_res_124571 = defunc_0_f_res_f_res_124574;
                }
                
                float defunc_0_f_res_124575;
                
                if (cond_124570) {
                    defunc_0_f_res_124575 = 0.0F;
                } else {
                    int64_t i_124576 = add64(x_124558, i_124567);
                    float x_124577 =
                          ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                           (gtid_116683 *
                                                            ctx_param_ext_119914 +
                                                            i_124576 *
                                                            ctx_param_ext_119916)];
                    
                    defunc_0_f_res_124575 = x_124577;
                }
                
                float x_j_124578 = defunc_0_f_res_124571 -
                      defunc_0_f_res_124562;
                float abs_res_124579 = (float) fabs(x_j_124578);
                float tmp1_124580 = abs_res_124579 / x_124559;
                float x_124581 = tmp1_124580 * tmp1_124580;
                float y_124582 = tmp1_124580 * x_124581;
                float tmp2_124583 = 1.0F - y_124582;
                float x_124584 = tmp2_124583 * tmp2_124583;
                float tmp3_124585 = tmp2_124583 * x_124584;
                float tmp4_124586 = defunc_0_f_res_124575 * tmp3_124585;
                
                ((float *) mem_120452)[i_124567] = x_j_124578;
                ((float *) mem_120455)[i_124567] = tmp4_124586;
            }
            
            float defunc_2_reduce_res_124591;
            float defunc_2_reduce_res_124592;
            float defunc_2_reduce_res_124593;
            float defunc_2_reduce_res_124594;
            float defunc_2_reduce_res_124595;
            float redout_124599;
            float redout_124600;
            float redout_124601;
            float redout_124602;
            float redout_124603;
            
            redout_124599 = 0.0F;
            redout_124600 = 0.0F;
            redout_124601 = 0.0F;
            redout_124602 = 0.0F;
            redout_124603 = 0.0F;
            for (int64_t i_124598 = 0; i_124598 < l_window_112808; i_124598++) {
                float x_124606 = ((float *) mem_120452)[i_124598];
                float x_124607 = ((float *) mem_120455)[i_124598];
                float defunc_1_f_res_124608 = x_124606 * x_124607;
                float defunc_1_f_res_124609 = x_124606 * defunc_1_f_res_124608;
                float defunc_1_f_res_124610 = x_124606 * defunc_1_f_res_124609;
                float defunc_1_f_res_124611 = x_124606 * defunc_1_f_res_124610;
                float defunc_1_op_res_124612 = x_124607 + redout_124599;
                float defunc_1_op_res_124613 = defunc_1_f_res_124608 +
                      redout_124600;
                float defunc_1_op_res_124614 = defunc_1_f_res_124609 +
                      redout_124601;
                float defunc_1_op_res_124615 = defunc_1_f_res_124610 +
                      redout_124602;
                float defunc_1_op_res_124616 = defunc_1_f_res_124611 +
                      redout_124603;
                
                ((float *) mem_120482)[i_124598] = defunc_1_f_res_124609;
                ((float *) mem_120485)[i_124598] = defunc_1_f_res_124608;
                
                float redout_tmp_124678 = defunc_1_op_res_124612;
                float redout_tmp_124679 = defunc_1_op_res_124613;
                float redout_tmp_124680 = defunc_1_op_res_124614;
                float redout_tmp_124681 = defunc_1_op_res_124615;
                float redout_tmp_124682 = defunc_1_op_res_124616;
                
                redout_124599 = redout_tmp_124678;
                redout_124600 = redout_tmp_124679;
                redout_124601 = redout_tmp_124680;
                redout_124602 = redout_tmp_124681;
                redout_124603 = redout_tmp_124682;
            }
            defunc_2_reduce_res_124591 = redout_124599;
            defunc_2_reduce_res_124592 = redout_124600;
            defunc_2_reduce_res_124593 = redout_124601;
            defunc_2_reduce_res_124594 = redout_124602;
            defunc_2_reduce_res_124595 = redout_124603;
            
            float x_124619 = defunc_2_reduce_res_124593 *
                  defunc_2_reduce_res_124595;
            float y_124620 = defunc_2_reduce_res_124594 *
                  defunc_2_reduce_res_124594;
            float a12_124621 = x_124619 - y_124620;
            float x_124622 = defunc_2_reduce_res_124593 *
                  defunc_2_reduce_res_124594;
            float y_124623 = defunc_2_reduce_res_124592 *
                  defunc_2_reduce_res_124595;
            float b12_124624 = x_124622 - y_124623;
            float x_124625 = defunc_2_reduce_res_124592 *
                  defunc_2_reduce_res_124594;
            float y_124626 = defunc_2_reduce_res_124593 *
                  defunc_2_reduce_res_124593;
            float c12_124627 = x_124625 - y_124626;
            float x_124628 = defunc_2_reduce_res_124591 *
                  defunc_2_reduce_res_124595;
            float b2_124629 = x_124628 - y_124626;
            float x_124630 = defunc_2_reduce_res_124592 *
                  defunc_2_reduce_res_124593;
            float y_124631 = defunc_2_reduce_res_124591 *
                  defunc_2_reduce_res_124594;
            float c2_124632 = x_124630 - y_124631;
            float x_124633 = defunc_2_reduce_res_124591 * a12_124621;
            float y_124634 = defunc_2_reduce_res_124592 * b12_124624;
            float x_124635 = x_124633 + y_124634;
            float y_124636 = defunc_2_reduce_res_124593 * c12_124627;
            float y_124637 = x_124635 + y_124636;
            float det_124638 = 1.0F / y_124637;
            float a12_124639 = a12_124621 * det_124638;
            float b12_124640 = b12_124624 * det_124638;
            float c12_124641 = c12_124627 * det_124638;
            float b2_124642 = b2_124629 * det_124638;
            float c2_124643 = c2_124632 * det_124638;
            float defunc_2_reduce_res_124644;
            float defunc_2_reduce_res_124645;
            float redout_124647;
            float redout_124648;
            
            redout_124647 = 0.0F;
            redout_124648 = 0.0F;
            for (int64_t i_124646 = 0; i_124646 < l_window_112808; i_124646++) {
                float x_124649 = ((float *) mem_120455)[i_124646];
                float x_124650 = ((float *) mem_120485)[i_124646];
                float x_124651 = ((float *) mem_120482)[i_124646];
                bool cond_124652 = sle64(n_112804, i_124646);
                float defunc_0_f_res_124653;
                
                if (cond_124652) {
                    defunc_0_f_res_124653 = 0.0F;
                } else {
                    int64_t i_124654 = add64(x_124558, i_124646);
                    float x_124655 = ((float *) mem_120064.mem)[gtid_116683 *
                                                                n_112804 +
                                                                i_124654];
                    
                    defunc_0_f_res_124653 = x_124655;
                }
                
                float x_124656 = a12_124639 * x_124649;
                float y_124657 = b12_124640 * x_124650;
                float x_124658 = x_124656 + y_124657;
                float y_124659 = c12_124641 * x_124651;
                float x_124660 = x_124658 + y_124659;
                float defunc_9_fit_fun_res_124661 = defunc_0_f_res_124653 *
                      x_124660;
                float x_124662 = b12_124640 * x_124649;
                float y_124663 = b2_124642 * x_124650;
                float x_124664 = x_124662 + y_124663;
                float y_124665 = c2_124643 * x_124651;
                float x_124666 = x_124664 + y_124665;
                float defunc_9_slope_fun_res_124667 = defunc_0_f_res_124653 *
                      x_124666;
                float defunc_1_op_res_124668 = defunc_9_fit_fun_res_124661 +
                      redout_124647;
                float defunc_1_op_res_124669 = defunc_9_slope_fun_res_124667 +
                      redout_124648;
                float redout_tmp_124685 = defunc_1_op_res_124668;
                float redout_tmp_124686 = defunc_1_op_res_124669;
                
                redout_124647 = redout_tmp_124685;
                redout_124648 = redout_tmp_124686;
            }
            defunc_2_reduce_res_124644 = redout_124647;
            defunc_2_reduce_res_124645 = redout_124648;
            ((float *) mem_120432)[i_124555] = defunc_2_reduce_res_124644;
            ((float *) mem_120435)[i_124555] = defunc_2_reduce_res_124645;
        }
        memmove(mem_120523.mem + gtid_116683 * l_n_m_112854 * (int64_t) 4,
                mem_120432 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120527.mem + gtid_116683 * l_n_m_112854 * (int64_t) 4,
                mem_120435 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120432);
    free(mem_120435);
    free(mem_120452);
    free(mem_120455);
    free(mem_120482);
    free(mem_120485);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128692_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128692_end -
                 futhark_mc_segmap_parloop_128692_start;
        
        ctx->futhark_mc_segmap_parloop_128692_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128692_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128692_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128690(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116682 = tid;
    int num_tasks_124553 = info.nsubtasks;
    struct futhark_mc_task_128689 *futhark_mc_task_128689 =
                                  (struct futhark_mc_task_128689 *) args;
    struct futhark_context *ctx = futhark_mc_task_128689->ctx;
    uint64_t futhark_mc_segmap_task_128690_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128690_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128689->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128689->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128689->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128689->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128689->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128689->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128689->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128689->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128689->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128689->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128689->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128689->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128689->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128689->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 = futhark_mc_task_128689->free_bytes_120352;
    struct memblock mem_120523 = {.desc ="mem_120523", .mem =
                                  futhark_mc_task_128689->free_mem_120523,
                                  .size =0, .references =NULL};
    struct memblock mem_120527 = {.desc ="mem_120527", .mem =
                                  futhark_mc_task_128689->free_mem_120527,
                                  .size =0, .references =NULL};
    int64_t iter_124554;
    struct futhark_mc_segmap_parloop_struct_128691
    futhark_mc_segmap_parloop_struct_128691;
    
    futhark_mc_segmap_parloop_struct_128691.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128691.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128691.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128691.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128691.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128691.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128691.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128691.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128691.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128691.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128691.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128691.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128691.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128691.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128691.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128691.free_bytes_120352 = bytes_120352;
    futhark_mc_segmap_parloop_struct_128691.free_mem_120523 = mem_120523.mem;
    futhark_mc_segmap_parloop_struct_128691.free_mem_120527 = mem_120527.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128692_task;
    
    futhark_mc_segmap_parloop_128692_task.name =
        "futhark_mc_segmap_parloop_128692";
    futhark_mc_segmap_parloop_128692_task.fn = futhark_mc_segmap_parloop_128692;
    futhark_mc_segmap_parloop_128692_task.args =
        &futhark_mc_segmap_parloop_struct_128691;
    futhark_mc_segmap_parloop_128692_task.iterations = iterations;
    futhark_mc_segmap_parloop_128692_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128692_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128692_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128692_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128692_task);
    
    if (futhark_mc_segmap_parloop_128692_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128692_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128692_total_end -
                 futhark_mc_segmap_parloop_128692_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128692_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128692_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128692_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128690_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128690_end -
                 futhark_mc_segmap_task_128690_start;
        
        ctx->futhark_mc_segmap_task_128690_runs[tid]++;
        ctx->futhark_mc_segmap_task_128690_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128690_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128700 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_bytes_119766;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120523;
    char *free_mem_120527;
};
struct futhark_mc_task_128704 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116685;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120426;
    char *free_mem_120429;
};
struct futhark_mc_segmap_parloop_struct_128706 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116685;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120426;
    char *free_mem_120429;
};
static int futhark_mc_segmap_parloop_128707(void *args, int64_t start,
                                            int64_t end, int flat_tid_116686,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128706
    *futhark_mc_segmap_parloop_struct_128706 =
    (struct futhark_mc_segmap_parloop_struct_128706 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128706->ctx;
    uint64_t futhark_mc_segmap_parloop_128707_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128707_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128706->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128706->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128706->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128706->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128706->free_i_112880;
    int64_t gtid_116685 =
            futhark_mc_segmap_parloop_struct_128706->free_gtid_116685;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128706->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128706->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128706->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128706->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128706->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128706->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128706->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 =
            futhark_mc_segmap_parloop_struct_128706->free_bytes_120352;
    struct memblock mem_120426 = {.desc ="mem_120426", .mem =
                                  futhark_mc_segmap_parloop_struct_128706->free_mem_120426,
                                  .size =0, .references =NULL};
    struct memblock mem_120429 = {.desc ="mem_120429", .mem =
                                  futhark_mc_segmap_parloop_struct_128706->free_mem_120429,
                                  .size =0, .references =NULL};
    size_t mem_124801_cached_sizze_128708 = 0;
    char *mem_124801 = NULL;
    size_t mem_124803_cached_sizze_128709 = 0;
    char *mem_124803 = NULL;
    size_t mem_124829_cached_sizze_128710 = 0;
    char *mem_124829 = NULL;
    size_t mem_124831_cached_sizze_128711 = 0;
    char *mem_124831 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124915 = start;
    
    if (mem_124801_cached_sizze_128708 < (size_t) bytes_120352) {
        mem_124801 = realloc(mem_124801, bytes_120352);
        mem_124801_cached_sizze_128708 = bytes_120352;
    }
    if (mem_124803_cached_sizze_128709 < (size_t) bytes_120352) {
        mem_124803 = realloc(mem_124803, bytes_120352);
        mem_124803_cached_sizze_128709 = bytes_120352;
    }
    if (mem_124829_cached_sizze_128710 < (size_t) bytes_120352) {
        mem_124829 = realloc(mem_124829, bytes_120352);
        mem_124829_cached_sizze_128710 = bytes_120352;
    }
    if (mem_124831_cached_sizze_128711 < (size_t) bytes_120352) {
        mem_124831 = realloc(mem_124831, bytes_120352);
        mem_124831_cached_sizze_128711 = bytes_120352;
    }
    for (; iter_124915 < end; iter_124915++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124983 = l_n_m_112854;
        int64_t gtid_116687 = iter_124915;
        int64_t remnant_124984 = iter_124915 - gtid_116687;
        int64_t x_124796 = ((int64_t *) mem_119820.mem)[gtid_116685 *
                                                        l_n_m_112854 +
                                                        gtid_116687];
        float x_124797 = ((float *) mem_119824.mem)[gtid_116685 * l_n_m_112854 +
                                                    gtid_116687];
        int64_t min_arg_124798 = mul64(t_jump_112811, gtid_116687);
        int64_t min_res_124799 = smin64(i_112880, min_arg_124798);
        float defunc_0_f_res_124800 = sitofp_i64_f32(min_res_124799);
        
        for (int64_t i_124916 = 0; i_124916 < l_window_112808; i_124916++) {
            bool cond_124919 = sle64(n_112804, i_124916);
            float defunc_0_f_res_124920;
            
            if (cond_124919) {
                defunc_0_f_res_124920 = 0.0F;
            } else {
                int64_t i_124921 = add64(x_124796, i_124916);
                float index_primexp_124922 = sitofp_i64_f32(i_124921);
                float defunc_0_f_res_f_res_124923 = 1.0F + index_primexp_124922;
                
                defunc_0_f_res_124920 = defunc_0_f_res_f_res_124923;
            }
            
            float defunc_0_f_res_124924;
            
            if (cond_124919) {
                defunc_0_f_res_124924 = 0.0F;
            } else {
                int64_t i_124925 = add64(x_124796, i_124916);
                float x_124926 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_116685 *
                                                        ctx_param_ext_119914 +
                                                        i_124925 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_124924 = x_124926;
            }
            
            float x_j_124927 = defunc_0_f_res_124920 - defunc_0_f_res_124800;
            float abs_res_124928 = (float) fabs(x_j_124927);
            float tmp1_124929 = abs_res_124928 / x_124797;
            float x_124930 = tmp1_124929 * tmp1_124929;
            float y_124931 = tmp1_124929 * x_124930;
            float tmp2_124932 = 1.0F - y_124931;
            float x_124933 = tmp2_124932 * tmp2_124932;
            float tmp3_124934 = tmp2_124932 * x_124933;
            float tmp4_124935 = defunc_0_f_res_124924 * tmp3_124934;
            
            ((float *) mem_124801)[i_124916] = x_j_124927;
            ((float *) mem_124803)[i_124916] = tmp4_124935;
        }
        
        float defunc_2_reduce_res_124833;
        float defunc_2_reduce_res_124834;
        float defunc_2_reduce_res_124835;
        float defunc_2_reduce_res_124836;
        float defunc_2_reduce_res_124837;
        float redout_124939;
        float redout_124940;
        float redout_124941;
        float redout_124942;
        float redout_124943;
        
        redout_124939 = 0.0F;
        redout_124940 = 0.0F;
        redout_124941 = 0.0F;
        redout_124942 = 0.0F;
        redout_124943 = 0.0F;
        for (int64_t i_124938 = 0; i_124938 < l_window_112808; i_124938++) {
            float x_124946 = ((float *) mem_124801)[i_124938];
            float x_124947 = ((float *) mem_124803)[i_124938];
            float defunc_1_f_res_124948 = x_124946 * x_124947;
            float defunc_1_f_res_124949 = x_124946 * defunc_1_f_res_124948;
            float defunc_1_f_res_124950 = x_124946 * defunc_1_f_res_124949;
            float defunc_1_f_res_124951 = x_124946 * defunc_1_f_res_124950;
            float defunc_1_op_res_124952 = x_124947 + redout_124939;
            float defunc_1_op_res_124953 = defunc_1_f_res_124948 +
                  redout_124940;
            float defunc_1_op_res_124954 = defunc_1_f_res_124949 +
                  redout_124941;
            float defunc_1_op_res_124955 = defunc_1_f_res_124950 +
                  redout_124942;
            float defunc_1_op_res_124956 = defunc_1_f_res_124951 +
                  redout_124943;
            
            ((float *) mem_124829)[i_124938] = defunc_1_f_res_124949;
            ((float *) mem_124831)[i_124938] = defunc_1_f_res_124948;
            
            float redout_tmp_124987 = defunc_1_op_res_124952;
            float redout_tmp_124988 = defunc_1_op_res_124953;
            float redout_tmp_124989 = defunc_1_op_res_124954;
            float redout_tmp_124990 = defunc_1_op_res_124955;
            float redout_tmp_124991 = defunc_1_op_res_124956;
            
            redout_124939 = redout_tmp_124987;
            redout_124940 = redout_tmp_124988;
            redout_124941 = redout_tmp_124989;
            redout_124942 = redout_tmp_124990;
            redout_124943 = redout_tmp_124991;
        }
        defunc_2_reduce_res_124833 = redout_124939;
        defunc_2_reduce_res_124834 = redout_124940;
        defunc_2_reduce_res_124835 = redout_124941;
        defunc_2_reduce_res_124836 = redout_124942;
        defunc_2_reduce_res_124837 = redout_124943;
        
        float x_124861 = defunc_2_reduce_res_124835 *
              defunc_2_reduce_res_124837;
        float y_124862 = defunc_2_reduce_res_124836 *
              defunc_2_reduce_res_124836;
        float a12_124863 = x_124861 - y_124862;
        float x_124864 = defunc_2_reduce_res_124835 *
              defunc_2_reduce_res_124836;
        float y_124865 = defunc_2_reduce_res_124834 *
              defunc_2_reduce_res_124837;
        float b12_124866 = x_124864 - y_124865;
        float x_124867 = defunc_2_reduce_res_124834 *
              defunc_2_reduce_res_124836;
        float y_124868 = defunc_2_reduce_res_124835 *
              defunc_2_reduce_res_124835;
        float c12_124869 = x_124867 - y_124868;
        float x_124870 = defunc_2_reduce_res_124833 *
              defunc_2_reduce_res_124837;
        float b2_124871 = x_124870 - y_124868;
        float x_124872 = defunc_2_reduce_res_124834 *
              defunc_2_reduce_res_124835;
        float y_124873 = defunc_2_reduce_res_124833 *
              defunc_2_reduce_res_124836;
        float c2_124874 = x_124872 - y_124873;
        float x_124875 = defunc_2_reduce_res_124833 * a12_124863;
        float y_124876 = defunc_2_reduce_res_124834 * b12_124866;
        float x_124877 = x_124875 + y_124876;
        float y_124878 = defunc_2_reduce_res_124835 * c12_124869;
        float y_124879 = x_124877 + y_124878;
        float det_124880 = 1.0F / y_124879;
        float a12_124881 = a12_124863 * det_124880;
        float b12_124882 = b12_124866 * det_124880;
        float c12_124883 = c12_124869 * det_124880;
        float b2_124884 = b2_124871 * det_124880;
        float c2_124885 = c2_124874 * det_124880;
        float defunc_2_reduce_res_124886;
        float defunc_2_reduce_res_124887;
        float redout_124960;
        float redout_124961;
        
        redout_124960 = 0.0F;
        redout_124961 = 0.0F;
        for (int64_t i_124959 = 0; i_124959 < l_window_112808; i_124959++) {
            float x_124962 = ((float *) mem_124803)[i_124959];
            float x_124963 = ((float *) mem_124831)[i_124959];
            float x_124964 = ((float *) mem_124829)[i_124959];
            bool cond_124965 = sle64(n_112804, i_124959);
            float defunc_0_f_res_124966;
            
            if (cond_124965) {
                defunc_0_f_res_124966 = 0.0F;
            } else {
                int64_t i_124967 = add64(x_124796, i_124959);
                float x_124968 = ((float *) mem_120064.mem)[gtid_116685 *
                                                            n_112804 +
                                                            i_124967];
                
                defunc_0_f_res_124966 = x_124968;
            }
            
            float x_124969 = a12_124881 * x_124962;
            float y_124970 = b12_124882 * x_124963;
            float x_124971 = x_124969 + y_124970;
            float y_124972 = c12_124883 * x_124964;
            float x_124973 = x_124971 + y_124972;
            float defunc_9_fit_fun_res_124974 = defunc_0_f_res_124966 *
                  x_124973;
            float x_124975 = b12_124882 * x_124962;
            float y_124976 = b2_124884 * x_124963;
            float x_124977 = x_124975 + y_124976;
            float y_124978 = c2_124885 * x_124964;
            float x_124979 = x_124977 + y_124978;
            float defunc_9_slope_fun_res_124980 = defunc_0_f_res_124966 *
                  x_124979;
            float defunc_1_op_res_124981 = defunc_9_fit_fun_res_124974 +
                  redout_124960;
            float defunc_1_op_res_124982 = defunc_9_slope_fun_res_124980 +
                  redout_124961;
            float redout_tmp_124994 = defunc_1_op_res_124981;
            float redout_tmp_124995 = defunc_1_op_res_124982;
            
            redout_124960 = redout_tmp_124994;
            redout_124961 = redout_tmp_124995;
        }
        defunc_2_reduce_res_124886 = redout_124960;
        defunc_2_reduce_res_124887 = redout_124961;
        ((float *) mem_120426.mem)[gtid_116687] = defunc_2_reduce_res_124886;
        ((float *) mem_120429.mem)[gtid_116687] = defunc_2_reduce_res_124887;
    }
    
  cleanup:
    { }
    free(mem_124801);
    free(mem_124803);
    free(mem_124829);
    free(mem_124831);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128707_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128707_end -
                 futhark_mc_segmap_parloop_128707_start;
        
        ctx->futhark_mc_segmap_parloop_128707_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128707_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128707_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128705(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116686 = tid;
    int num_tasks_124914 = info.nsubtasks;
    struct futhark_mc_task_128704 *futhark_mc_task_128704 =
                                  (struct futhark_mc_task_128704 *) args;
    struct futhark_context *ctx = futhark_mc_task_128704->ctx;
    uint64_t futhark_mc_segmap_task_128705_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128705_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128704->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128704->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128704->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128704->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128704->free_i_112880;
    int64_t gtid_116685 = futhark_mc_task_128704->free_gtid_116685;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128704->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128704->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128704->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128704->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128704->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128704->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128704->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 = futhark_mc_task_128704->free_bytes_120352;
    struct memblock mem_120426 = {.desc ="mem_120426", .mem =
                                  futhark_mc_task_128704->free_mem_120426,
                                  .size =0, .references =NULL};
    struct memblock mem_120429 = {.desc ="mem_120429", .mem =
                                  futhark_mc_task_128704->free_mem_120429,
                                  .size =0, .references =NULL};
    int64_t iter_124915;
    struct futhark_mc_segmap_parloop_struct_128706
    futhark_mc_segmap_parloop_struct_128706;
    
    futhark_mc_segmap_parloop_struct_128706.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128706.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128706.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128706.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128706.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128706.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128706.free_gtid_116685 = gtid_116685;
    futhark_mc_segmap_parloop_struct_128706.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128706.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128706.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128706.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128706.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128706.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128706.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128706.free_bytes_120352 = bytes_120352;
    futhark_mc_segmap_parloop_struct_128706.free_mem_120426 = mem_120426.mem;
    futhark_mc_segmap_parloop_struct_128706.free_mem_120429 = mem_120429.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128707_task;
    
    futhark_mc_segmap_parloop_128707_task.name =
        "futhark_mc_segmap_parloop_128707";
    futhark_mc_segmap_parloop_128707_task.fn = futhark_mc_segmap_parloop_128707;
    futhark_mc_segmap_parloop_128707_task.args =
        &futhark_mc_segmap_parloop_struct_128706;
    futhark_mc_segmap_parloop_128707_task.iterations = iterations;
    futhark_mc_segmap_parloop_128707_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128707_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128707_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128707_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128707_task);
    
    if (futhark_mc_segmap_parloop_128707_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128707_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128707_total_end -
                 futhark_mc_segmap_parloop_128707_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128707_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128707_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128707_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128705_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128705_end -
                 futhark_mc_segmap_task_128705_start;
        
        ctx->futhark_mc_segmap_task_128705_runs[tid]++;
        ctx->futhark_mc_segmap_task_128705_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128705_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128713 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_t_jump_112811;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_gtid_116685;
    char *free_mem_119820;
    char *free_mem_119824;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120064;
    int64_t free_bytes_120352;
    char *free_mem_120426;
    char *free_mem_120429;
};
struct futhark_mc_task_128719 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_gtid_116685;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_124688;
    float free_x_124689;
    float free_defunc_0_f_res_124692;
    char *free_mem_124693;
    char *free_mem_124694;
};
struct futhark_mc_segmap_parloop_struct_128721 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_window_112808;
    int64_t free_gtid_116685;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    int64_t free_x_124688;
    float free_x_124689;
    float free_defunc_0_f_res_124692;
    char *free_mem_124693;
    char *free_mem_124694;
};
static int futhark_mc_segmap_parloop_128722(void *args, int64_t start,
                                            int64_t end, int flat_tid_116690,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128721
    *futhark_mc_segmap_parloop_struct_128721 =
    (struct futhark_mc_segmap_parloop_struct_128721 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128721->ctx;
    uint64_t futhark_mc_segmap_parloop_128722_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128722_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128721->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128721->free_l_window_112808;
    int64_t gtid_116685 =
            futhark_mc_segmap_parloop_struct_128721->free_gtid_116685;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128721->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128721->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128721->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128721->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_124688 = futhark_mc_segmap_parloop_struct_128721->free_x_124688;
    float x_124689 = futhark_mc_segmap_parloop_struct_128721->free_x_124689;
    float defunc_0_f_res_124692 =
          futhark_mc_segmap_parloop_struct_128721->free_defunc_0_f_res_124692;
    struct memblock mem_124693 = {.desc ="mem_124693", .mem =
                                  futhark_mc_segmap_parloop_struct_128721->free_mem_124693,
                                  .size =0, .references =NULL};
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_segmap_parloop_struct_128721->free_mem_124694,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125063 = start;
    
    for (; iter_125063 < end; iter_125063++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125069 = l_window_112808;
        int64_t gtid_116691 = iter_125063;
        int64_t remnant_125070 = iter_125063 - gtid_116691;
        bool cond_124997 = sle64(n_112804, gtid_116691);
        float defunc_0_f_res_124998;
        
        if (cond_124997) {
            defunc_0_f_res_124998 = 0.0F;
        } else {
            int64_t i_125064 = add64(gtid_116691, x_124688);
            float index_primexp_125065 = sitofp_i64_f32(i_125064);
            float defunc_0_f_res_f_res_125066 = 1.0F + index_primexp_125065;
            
            defunc_0_f_res_124998 = defunc_0_f_res_f_res_125066;
        }
        
        float defunc_0_f_res_125002;
        
        if (cond_124997) {
            defunc_0_f_res_125002 = 0.0F;
        } else {
            int64_t i_125067 = add64(gtid_116691, x_124688);
            float x_125068 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_116685 *
                                                    ctx_param_ext_119914 +
                                                    i_125067 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_125002 = x_125068;
        }
        
        float x_j_125005 = defunc_0_f_res_124998 - defunc_0_f_res_124692;
        float abs_res_125006 = (float) fabs(x_j_125005);
        float tmp1_125007 = abs_res_125006 / x_124689;
        float x_125008 = tmp1_125007 * tmp1_125007;
        float y_125009 = tmp1_125007 * x_125008;
        float tmp2_125010 = 1.0F - y_125009;
        float x_125011 = tmp2_125010 * tmp2_125010;
        float tmp3_125012 = tmp2_125010 * x_125011;
        float tmp4_125013 = defunc_0_f_res_125002 * tmp3_125012;
        
        ((float *) mem_124693.mem)[gtid_116691] = x_j_125005;
        ((float *) mem_124694.mem)[gtid_116691] = tmp4_125013;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128722_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128722_end -
                 futhark_mc_segmap_parloop_128722_start;
        
        ctx->futhark_mc_segmap_parloop_128722_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128722_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128722_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128720(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116690 = tid;
    int num_tasks_125062 = info.nsubtasks;
    struct futhark_mc_task_128719 *futhark_mc_task_128719 =
                                  (struct futhark_mc_task_128719 *) args;
    struct futhark_context *ctx = futhark_mc_task_128719->ctx;
    uint64_t futhark_mc_segmap_task_128720_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128720_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128719->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128719->free_l_window_112808;
    int64_t gtid_116685 = futhark_mc_task_128719->free_gtid_116685;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128719->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128719->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128719->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128719->free_mem_param_119918,
                                        .size =0, .references =NULL};
    int64_t x_124688 = futhark_mc_task_128719->free_x_124688;
    float x_124689 = futhark_mc_task_128719->free_x_124689;
    float defunc_0_f_res_124692 =
          futhark_mc_task_128719->free_defunc_0_f_res_124692;
    struct memblock mem_124693 = {.desc ="mem_124693", .mem =
                                  futhark_mc_task_128719->free_mem_124693,
                                  .size =0, .references =NULL};
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_task_128719->free_mem_124694,
                                  .size =0, .references =NULL};
    int64_t iter_125063;
    struct futhark_mc_segmap_parloop_struct_128721
    futhark_mc_segmap_parloop_struct_128721;
    
    futhark_mc_segmap_parloop_struct_128721.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128721.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128721.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128721.free_gtid_116685 = gtid_116685;
    futhark_mc_segmap_parloop_struct_128721.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128721.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128721.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128721.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128721.free_x_124688 = x_124688;
    futhark_mc_segmap_parloop_struct_128721.free_x_124689 = x_124689;
    futhark_mc_segmap_parloop_struct_128721.free_defunc_0_f_res_124692 =
        defunc_0_f_res_124692;
    futhark_mc_segmap_parloop_struct_128721.free_mem_124693 = mem_124693.mem;
    futhark_mc_segmap_parloop_struct_128721.free_mem_124694 = mem_124694.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128722_task;
    
    futhark_mc_segmap_parloop_128722_task.name =
        "futhark_mc_segmap_parloop_128722";
    futhark_mc_segmap_parloop_128722_task.fn = futhark_mc_segmap_parloop_128722;
    futhark_mc_segmap_parloop_128722_task.args =
        &futhark_mc_segmap_parloop_struct_128721;
    futhark_mc_segmap_parloop_128722_task.iterations = iterations;
    futhark_mc_segmap_parloop_128722_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128722_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128722_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128722_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128722_task);
    
    if (futhark_mc_segmap_parloop_128722_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128722_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128722_total_end -
                 futhark_mc_segmap_parloop_128722_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128722_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128722_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128722_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128720_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128720_end -
                 futhark_mc_segmap_task_128720_start;
        
        ctx->futhark_mc_segmap_task_128720_runs[tid]++;
        ctx->futhark_mc_segmap_task_128720_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128720_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128723 {
    struct futhark_context *ctx;
    char *free_mem_124693;
    char *free_mem_124694;
    float *retval_defunc_2_reduce_res_124716;
    float *retval_defunc_2_reduce_res_124717;
    float *retval_defunc_2_reduce_res_124718;
    float *retval_defunc_2_reduce_res_124719;
    float *retval_defunc_2_reduce_res_124720;
    char *retval_mem_124714;
    char *retval_mem_124715;
};
struct futhark_mc_segred_stage_1_parloop_struct_128730 {
    struct futhark_context *ctx;
    char *free_mem_124693;
    char *free_mem_124694;
    char *free_mem_124714;
    char *free_mem_124715;
    char *free_reduce_stage_1_tid_res_arr_mem_125072;
    char *free_reduce_stage_1_tid_res_arr_mem_125074;
    char *free_reduce_stage_1_tid_res_arr_mem_125076;
    char *free_reduce_stage_1_tid_res_arr_mem_125078;
    char *free_reduce_stage_1_tid_res_arr_mem_125080;
};
static int futhark_mc_segred_stage_1_parloop_128731(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116692,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128730
    *futhark_mc_segred_stage_1_parloop_struct_128730 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128730 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128730->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128731_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128731_start = get_wall_time();
    
    struct memblock mem_124693 = {.desc ="mem_124693", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128730->free_mem_124693,
                                  .size =0, .references =NULL};
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128730->free_mem_124694,
                                  .size =0, .references =NULL};
    struct memblock mem_124714 = {.desc ="mem_124714", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128730->free_mem_124714,
                                  .size =0, .references =NULL};
    struct memblock mem_124715 = {.desc ="mem_124715", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128730->free_mem_124715,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125072 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125072",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128730->free_reduce_stage_1_tid_res_arr_mem_125072,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125074 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125074",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128730->free_reduce_stage_1_tid_res_arr_mem_125074,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125076 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125076",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128730->free_reduce_stage_1_tid_res_arr_mem_125076,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125078 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125078",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128730->free_reduce_stage_1_tid_res_arr_mem_125078,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125080 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125080",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128730->free_reduce_stage_1_tid_res_arr_mem_125080,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125082 = start;
    float x_125014;
    float x_125015;
    float x_125017;
    float x_125018;
    float x_125020;
    float x_125021;
    float x_125023;
    float x_125024;
    float x_125026;
    float x_125027;
    float local_acc_125083 = 0.0F;
    float local_acc_125084 = 0.0F;
    float local_acc_125085 = 0.0F;
    float local_acc_125086 = 0.0F;
    float local_acc_125087 = 0.0F;
    
    for (; iter_125082 < end; iter_125082++) {
        int64_t gtid_116693 = iter_125082;
        float x_125029 = ((float *) mem_124693.mem)[gtid_116693];
        float x_125030 = ((float *) mem_124694.mem)[gtid_116693];
        float defunc_1_f_res_125031 = x_125029 * x_125030;
        float defunc_1_f_res_125032 = x_125029 * defunc_1_f_res_125031;
        float defunc_1_f_res_125033 = x_125029 * defunc_1_f_res_125032;
        float defunc_1_f_res_125034 = x_125029 * defunc_1_f_res_125033;
        
        // save map-out results
        {
            ((float *) mem_124714.mem)[gtid_116693] = defunc_1_f_res_125032;
            ((float *) mem_124715.mem)[gtid_116693] = defunc_1_f_res_125031;
        }
        // Load accum params
        {
            x_125014 = local_acc_125083;
        }
        // Load next params
        {
            x_125015 = x_125030;
        }
        // Red body
        {
            float defunc_1_op_res_125016 = x_125014 + x_125015;
            
            local_acc_125083 = defunc_1_op_res_125016;
        }
        // Load accum params
        {
            x_125017 = local_acc_125084;
        }
        // Load next params
        {
            x_125018 = defunc_1_f_res_125031;
        }
        // Red body
        {
            float defunc_1_op_res_125019 = x_125017 + x_125018;
            
            local_acc_125084 = defunc_1_op_res_125019;
        }
        // Load accum params
        {
            x_125020 = local_acc_125085;
        }
        // Load next params
        {
            x_125021 = defunc_1_f_res_125032;
        }
        // Red body
        {
            float defunc_1_op_res_125022 = x_125020 + x_125021;
            
            local_acc_125085 = defunc_1_op_res_125022;
        }
        // Load accum params
        {
            x_125023 = local_acc_125086;
        }
        // Load next params
        {
            x_125024 = defunc_1_f_res_125033;
        }
        // Red body
        {
            float defunc_1_op_res_125025 = x_125023 + x_125024;
            
            local_acc_125086 = defunc_1_op_res_125025;
        }
        // Load accum params
        {
            x_125026 = local_acc_125087;
        }
        // Load next params
        {
            x_125027 = defunc_1_f_res_125034;
        }
        // Red body
        {
            float defunc_1_op_res_125028 = x_125026 + x_125027;
            
            local_acc_125087 = defunc_1_op_res_125028;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125072.mem)[flat_tid_116692] =
        local_acc_125083;
    ((float *) reduce_stage_1_tid_res_arr_mem_125074.mem)[flat_tid_116692] =
        local_acc_125084;
    ((float *) reduce_stage_1_tid_res_arr_mem_125076.mem)[flat_tid_116692] =
        local_acc_125085;
    ((float *) reduce_stage_1_tid_res_arr_mem_125078.mem)[flat_tid_116692] =
        local_acc_125086;
    ((float *) reduce_stage_1_tid_res_arr_mem_125080.mem)[flat_tid_116692] =
        local_acc_125087;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128731_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128731_end -
                 futhark_mc_segred_stage_1_parloop_128731_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128731_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128731_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128731_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128724(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116692 = tid;
    int num_tasks_125071 = info.nsubtasks;
    struct futhark_mc_task_128723 *futhark_mc_task_128723 =
                                  (struct futhark_mc_task_128723 *) args;
    struct futhark_context *ctx = futhark_mc_task_128723->ctx;
    uint64_t futhark_mc_segred_task_128724_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128724_start = get_wall_time();
    
    struct memblock mem_124693 = {.desc ="mem_124693", .mem =
                                  futhark_mc_task_128723->free_mem_124693,
                                  .size =0, .references =NULL};
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_task_128723->free_mem_124694,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_124716 =
          *futhark_mc_task_128723->retval_defunc_2_reduce_res_124716;
    float defunc_2_reduce_res_124717 =
          *futhark_mc_task_128723->retval_defunc_2_reduce_res_124717;
    float defunc_2_reduce_res_124718 =
          *futhark_mc_task_128723->retval_defunc_2_reduce_res_124718;
    float defunc_2_reduce_res_124719 =
          *futhark_mc_task_128723->retval_defunc_2_reduce_res_124719;
    float defunc_2_reduce_res_124720 =
          *futhark_mc_task_128723->retval_defunc_2_reduce_res_124720;
    struct memblock mem_124714 = {.desc ="mem_124714", .mem =
                                  futhark_mc_task_128723->retval_mem_124714,
                                  .size =0, .references =NULL};
    struct memblock mem_124715 = {.desc ="mem_124715", .mem =
                                  futhark_mc_task_128723->retval_mem_124715,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_125072_cached_sizze_128725 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125072 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125074_cached_sizze_128726 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125074 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125076_cached_sizze_128727 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125076 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125078_cached_sizze_128728 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125078 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125080_cached_sizze_128729 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125080 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125072_cached_sizze_128725 <
        (size_t) ((int64_t) 4 * num_tasks_125071)) {
        reduce_stage_1_tid_res_arr_mem_125072 =
            realloc(reduce_stage_1_tid_res_arr_mem_125072, (int64_t) 4 *
                    num_tasks_125071);
        reduce_stage_1_tid_res_arr_mem_125072_cached_sizze_128725 =
            (int64_t) 4 * num_tasks_125071;
    }
    if (reduce_stage_1_tid_res_arr_mem_125074_cached_sizze_128726 <
        (size_t) ((int64_t) 4 * num_tasks_125071)) {
        reduce_stage_1_tid_res_arr_mem_125074 =
            realloc(reduce_stage_1_tid_res_arr_mem_125074, (int64_t) 4 *
                    num_tasks_125071);
        reduce_stage_1_tid_res_arr_mem_125074_cached_sizze_128726 =
            (int64_t) 4 * num_tasks_125071;
    }
    if (reduce_stage_1_tid_res_arr_mem_125076_cached_sizze_128727 <
        (size_t) ((int64_t) 4 * num_tasks_125071)) {
        reduce_stage_1_tid_res_arr_mem_125076 =
            realloc(reduce_stage_1_tid_res_arr_mem_125076, (int64_t) 4 *
                    num_tasks_125071);
        reduce_stage_1_tid_res_arr_mem_125076_cached_sizze_128727 =
            (int64_t) 4 * num_tasks_125071;
    }
    if (reduce_stage_1_tid_res_arr_mem_125078_cached_sizze_128728 <
        (size_t) ((int64_t) 4 * num_tasks_125071)) {
        reduce_stage_1_tid_res_arr_mem_125078 =
            realloc(reduce_stage_1_tid_res_arr_mem_125078, (int64_t) 4 *
                    num_tasks_125071);
        reduce_stage_1_tid_res_arr_mem_125078_cached_sizze_128728 =
            (int64_t) 4 * num_tasks_125071;
    }
    if (reduce_stage_1_tid_res_arr_mem_125080_cached_sizze_128729 <
        (size_t) ((int64_t) 4 * num_tasks_125071)) {
        reduce_stage_1_tid_res_arr_mem_125080 =
            realloc(reduce_stage_1_tid_res_arr_mem_125080, (int64_t) 4 *
                    num_tasks_125071);
        reduce_stage_1_tid_res_arr_mem_125080_cached_sizze_128729 =
            (int64_t) 4 * num_tasks_125071;
    }
    
    int64_t iter_125082;
    struct futhark_mc_segred_stage_1_parloop_struct_128730
    futhark_mc_segred_stage_1_parloop_struct_128730;
    
    futhark_mc_segred_stage_1_parloop_struct_128730.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_mem_124693 =
        mem_124693.mem;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_mem_124694 =
        mem_124694.mem;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_mem_124714 =
        mem_124714.mem;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_mem_124715 =
        mem_124715.mem;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_reduce_stage_1_tid_res_arr_mem_125072 =
        reduce_stage_1_tid_res_arr_mem_125072;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_reduce_stage_1_tid_res_arr_mem_125074 =
        reduce_stage_1_tid_res_arr_mem_125074;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_reduce_stage_1_tid_res_arr_mem_125076 =
        reduce_stage_1_tid_res_arr_mem_125076;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_reduce_stage_1_tid_res_arr_mem_125078 =
        reduce_stage_1_tid_res_arr_mem_125078;
    futhark_mc_segred_stage_1_parloop_struct_128730.free_reduce_stage_1_tid_res_arr_mem_125080 =
        reduce_stage_1_tid_res_arr_mem_125080;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128731_task;
    
    futhark_mc_segred_stage_1_parloop_128731_task.name =
        "futhark_mc_segred_stage_1_parloop_128731";
    futhark_mc_segred_stage_1_parloop_128731_task.fn =
        futhark_mc_segred_stage_1_parloop_128731;
    futhark_mc_segred_stage_1_parloop_128731_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128730;
    futhark_mc_segred_stage_1_parloop_128731_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128731_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128731_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128731_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128731_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128731_task);
    
    if (futhark_mc_segred_stage_1_parloop_128731_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128731_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128731_total_end -
                 futhark_mc_segred_stage_1_parloop_128731_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128731_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128731_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128731_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124716 = 0.0F;
        defunc_2_reduce_res_124717 = 0.0F;
        defunc_2_reduce_res_124718 = 0.0F;
        defunc_2_reduce_res_124719 = 0.0F;
        defunc_2_reduce_res_124720 = 0.0F;
    }
    
    float x_125088;
    float x_125089;
    float x_125091;
    float x_125092;
    float x_125094;
    float x_125095;
    float x_125097;
    float x_125098;
    float x_125100;
    float x_125101;
    
    for (int32_t i_125103 = 0; i_125103 < num_tasks_125071; i_125103++) {
        flat_tid_116692 = i_125103;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125088 = defunc_2_reduce_res_124716;
            }
            // load next params
            {
                x_125089 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125072)[flat_tid_116692];
            }
            // red body
            {
                float defunc_1_op_res_125090 = x_125088 + x_125089;
                
                defunc_2_reduce_res_124716 = defunc_1_op_res_125090;
            }
            // load acc params
            {
                x_125091 = defunc_2_reduce_res_124717;
            }
            // load next params
            {
                x_125092 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125074)[flat_tid_116692];
            }
            // red body
            {
                float defunc_1_op_res_125093 = x_125091 + x_125092;
                
                defunc_2_reduce_res_124717 = defunc_1_op_res_125093;
            }
            // load acc params
            {
                x_125094 = defunc_2_reduce_res_124718;
            }
            // load next params
            {
                x_125095 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125076)[flat_tid_116692];
            }
            // red body
            {
                float defunc_1_op_res_125096 = x_125094 + x_125095;
                
                defunc_2_reduce_res_124718 = defunc_1_op_res_125096;
            }
            // load acc params
            {
                x_125097 = defunc_2_reduce_res_124719;
            }
            // load next params
            {
                x_125098 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125078)[flat_tid_116692];
            }
            // red body
            {
                float defunc_1_op_res_125099 = x_125097 + x_125098;
                
                defunc_2_reduce_res_124719 = defunc_1_op_res_125099;
            }
            // load acc params
            {
                x_125100 = defunc_2_reduce_res_124720;
            }
            // load next params
            {
                x_125101 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125080)[flat_tid_116692];
            }
            // red body
            {
                float defunc_1_op_res_125102 = x_125100 + x_125101;
                
                defunc_2_reduce_res_124720 = defunc_1_op_res_125102;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125072);
    free(reduce_stage_1_tid_res_arr_mem_125074);
    free(reduce_stage_1_tid_res_arr_mem_125076);
    free(reduce_stage_1_tid_res_arr_mem_125078);
    free(reduce_stage_1_tid_res_arr_mem_125080);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128724_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128724_end -
                 futhark_mc_segred_task_128724_start;
        
        ctx->futhark_mc_segred_task_128724_runs[tid]++;
        ctx->futhark_mc_segred_task_128724_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128724_iter[tid] += iterations;
    }
    *futhark_mc_task_128723->retval_defunc_2_reduce_res_124716 =
        defunc_2_reduce_res_124716;
    *futhark_mc_task_128723->retval_defunc_2_reduce_res_124717 =
        defunc_2_reduce_res_124717;
    *futhark_mc_task_128723->retval_defunc_2_reduce_res_124718 =
        defunc_2_reduce_res_124718;
    *futhark_mc_task_128723->retval_defunc_2_reduce_res_124719 =
        defunc_2_reduce_res_124719;
    *futhark_mc_task_128723->retval_defunc_2_reduce_res_124720 =
        defunc_2_reduce_res_124720;
    futhark_mc_task_128723->retval_mem_124714 = mem_124714.mem;
    futhark_mc_task_128723->retval_mem_124715 = mem_124715.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128732 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116685;
    char *free_mem_120064;
    int64_t free_x_124688;
    char *free_mem_124694;
    char *free_mem_124714;
    char *free_mem_124715;
    float free_a12_124764;
    float free_b12_124765;
    float free_c12_124766;
    float free_b2_124767;
    float free_c2_124768;
    float *retval_defunc_2_reduce_res_124769;
    float *retval_defunc_2_reduce_res_124770;
};
struct futhark_mc_segred_stage_1_parloop_struct_128736 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_116685;
    char *free_mem_120064;
    int64_t free_x_124688;
    char *free_mem_124694;
    char *free_mem_124714;
    char *free_mem_124715;
    float free_a12_124764;
    float free_b12_124765;
    float free_c12_124766;
    float free_b2_124767;
    float free_c2_124768;
    char *free_reduce_stage_1_tid_res_arr_mem_125105;
    char *free_reduce_stage_1_tid_res_arr_mem_125107;
};
static int futhark_mc_segred_stage_1_parloop_128737(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_116694,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128736
    *futhark_mc_segred_stage_1_parloop_struct_128736 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128736 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128736->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128737_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128737_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128736->free_n_112804;
    int64_t gtid_116685 =
            futhark_mc_segred_stage_1_parloop_struct_128736->free_gtid_116685;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128736->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_124688 =
            futhark_mc_segred_stage_1_parloop_struct_128736->free_x_124688;
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128736->free_mem_124694,
                                  .size =0, .references =NULL};
    struct memblock mem_124714 = {.desc ="mem_124714", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128736->free_mem_124714,
                                  .size =0, .references =NULL};
    struct memblock mem_124715 = {.desc ="mem_124715", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128736->free_mem_124715,
                                  .size =0, .references =NULL};
    float a12_124764 =
          futhark_mc_segred_stage_1_parloop_struct_128736->free_a12_124764;
    float b12_124765 =
          futhark_mc_segred_stage_1_parloop_struct_128736->free_b12_124765;
    float c12_124766 =
          futhark_mc_segred_stage_1_parloop_struct_128736->free_c12_124766;
    float b2_124767 =
          futhark_mc_segred_stage_1_parloop_struct_128736->free_b2_124767;
    float c2_124768 =
          futhark_mc_segred_stage_1_parloop_struct_128736->free_c2_124768;
    struct memblock reduce_stage_1_tid_res_arr_mem_125105 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125105",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128736->free_reduce_stage_1_tid_res_arr_mem_125105,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125107 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125107",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128736->free_reduce_stage_1_tid_res_arr_mem_125107,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125109 = start;
    float x_125035;
    float x_125036;
    float x_125038;
    float x_125039;
    float local_acc_125110 = 0.0F;
    float local_acc_125111 = 0.0F;
    
    for (; iter_125109 < end; iter_125109++) {
        int64_t gtid_116695 = iter_125109;
        float x_125041 = ((float *) mem_124694.mem)[gtid_116695];
        float x_125042 = ((float *) mem_124715.mem)[gtid_116695];
        float x_125043 = ((float *) mem_124714.mem)[gtid_116695];
        bool cond_125044 = sle64(n_112804, gtid_116695);
        float defunc_0_f_res_125045;
        
        if (cond_125044) {
            defunc_0_f_res_125045 = 0.0F;
        } else {
            int64_t i_125046 = add64(gtid_116695, x_124688);
            float x_125047 = ((float *) mem_120064.mem)[gtid_116685 * n_112804 +
                                                        i_125046];
            
            defunc_0_f_res_125045 = x_125047;
        }
        
        float x_125048 = a12_124764 * x_125041;
        float y_125049 = b12_124765 * x_125042;
        float x_125050 = x_125048 + y_125049;
        float y_125051 = c12_124766 * x_125043;
        float x_125052 = x_125050 + y_125051;
        float defunc_9_fit_fun_res_125053 = defunc_0_f_res_125045 * x_125052;
        float x_125054 = b12_124765 * x_125041;
        float y_125055 = b2_124767 * x_125042;
        float x_125056 = x_125054 + y_125055;
        float y_125057 = c2_124768 * x_125043;
        float x_125058 = x_125056 + y_125057;
        float defunc_9_slope_fun_res_125059 = defunc_0_f_res_125045 * x_125058;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125035 = local_acc_125110;
        }
        // Load next params
        {
            x_125036 = defunc_9_fit_fun_res_125053;
        }
        // Red body
        {
            float defunc_1_op_res_125037 = x_125035 + x_125036;
            
            local_acc_125110 = defunc_1_op_res_125037;
        }
        // Load accum params
        {
            x_125038 = local_acc_125111;
        }
        // Load next params
        {
            x_125039 = defunc_9_slope_fun_res_125059;
        }
        // Red body
        {
            float defunc_1_op_res_125040 = x_125038 + x_125039;
            
            local_acc_125111 = defunc_1_op_res_125040;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125105.mem)[flat_tid_116694] =
        local_acc_125110;
    ((float *) reduce_stage_1_tid_res_arr_mem_125107.mem)[flat_tid_116694] =
        local_acc_125111;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128737_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128737_end -
                 futhark_mc_segred_stage_1_parloop_128737_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128737_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128737_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128737_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128733(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116694 = tid;
    int num_tasks_125104 = info.nsubtasks;
    struct futhark_mc_task_128732 *futhark_mc_task_128732 =
                                  (struct futhark_mc_task_128732 *) args;
    struct futhark_context *ctx = futhark_mc_task_128732->ctx;
    uint64_t futhark_mc_segred_task_128733_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128733_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128732->free_n_112804;
    int64_t gtid_116685 = futhark_mc_task_128732->free_gtid_116685;
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128732->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t x_124688 = futhark_mc_task_128732->free_x_124688;
    struct memblock mem_124694 = {.desc ="mem_124694", .mem =
                                  futhark_mc_task_128732->free_mem_124694,
                                  .size =0, .references =NULL};
    struct memblock mem_124714 = {.desc ="mem_124714", .mem =
                                  futhark_mc_task_128732->free_mem_124714,
                                  .size =0, .references =NULL};
    struct memblock mem_124715 = {.desc ="mem_124715", .mem =
                                  futhark_mc_task_128732->free_mem_124715,
                                  .size =0, .references =NULL};
    float a12_124764 = futhark_mc_task_128732->free_a12_124764;
    float b12_124765 = futhark_mc_task_128732->free_b12_124765;
    float c12_124766 = futhark_mc_task_128732->free_c12_124766;
    float b2_124767 = futhark_mc_task_128732->free_b2_124767;
    float c2_124768 = futhark_mc_task_128732->free_c2_124768;
    float defunc_2_reduce_res_124769 =
          *futhark_mc_task_128732->retval_defunc_2_reduce_res_124769;
    float defunc_2_reduce_res_124770 =
          *futhark_mc_task_128732->retval_defunc_2_reduce_res_124770;
    size_t reduce_stage_1_tid_res_arr_mem_125105_cached_sizze_128734 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125105 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125107_cached_sizze_128735 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125107 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125105_cached_sizze_128734 <
        (size_t) ((int64_t) 4 * num_tasks_125104)) {
        reduce_stage_1_tid_res_arr_mem_125105 =
            realloc(reduce_stage_1_tid_res_arr_mem_125105, (int64_t) 4 *
                    num_tasks_125104);
        reduce_stage_1_tid_res_arr_mem_125105_cached_sizze_128734 =
            (int64_t) 4 * num_tasks_125104;
    }
    if (reduce_stage_1_tid_res_arr_mem_125107_cached_sizze_128735 <
        (size_t) ((int64_t) 4 * num_tasks_125104)) {
        reduce_stage_1_tid_res_arr_mem_125107 =
            realloc(reduce_stage_1_tid_res_arr_mem_125107, (int64_t) 4 *
                    num_tasks_125104);
        reduce_stage_1_tid_res_arr_mem_125107_cached_sizze_128735 =
            (int64_t) 4 * num_tasks_125104;
    }
    
    int64_t iter_125109;
    struct futhark_mc_segred_stage_1_parloop_struct_128736
    futhark_mc_segred_stage_1_parloop_struct_128736;
    
    futhark_mc_segred_stage_1_parloop_struct_128736.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_gtid_116685 =
        gtid_116685;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_mem_120064 =
        mem_120064.mem;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_x_124688 = x_124688;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_mem_124694 =
        mem_124694.mem;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_mem_124714 =
        mem_124714.mem;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_mem_124715 =
        mem_124715.mem;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_a12_124764 =
        a12_124764;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_b12_124765 =
        b12_124765;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_c12_124766 =
        c12_124766;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_b2_124767 = b2_124767;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_c2_124768 = c2_124768;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_reduce_stage_1_tid_res_arr_mem_125105 =
        reduce_stage_1_tid_res_arr_mem_125105;
    futhark_mc_segred_stage_1_parloop_struct_128736.free_reduce_stage_1_tid_res_arr_mem_125107 =
        reduce_stage_1_tid_res_arr_mem_125107;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128737_task;
    
    futhark_mc_segred_stage_1_parloop_128737_task.name =
        "futhark_mc_segred_stage_1_parloop_128737";
    futhark_mc_segred_stage_1_parloop_128737_task.fn =
        futhark_mc_segred_stage_1_parloop_128737;
    futhark_mc_segred_stage_1_parloop_128737_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128736;
    futhark_mc_segred_stage_1_parloop_128737_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128737_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128737_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128737_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128737_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128737_task);
    
    if (futhark_mc_segred_stage_1_parloop_128737_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128737_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128737_total_end -
                 futhark_mc_segred_stage_1_parloop_128737_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128737_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128737_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128737_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_124769 = 0.0F;
        defunc_2_reduce_res_124770 = 0.0F;
    }
    
    float x_125112;
    float x_125113;
    float x_125115;
    float x_125116;
    
    for (int32_t i_125118 = 0; i_125118 < num_tasks_125104; i_125118++) {
        flat_tid_116694 = i_125118;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125112 = defunc_2_reduce_res_124769;
            }
            // load next params
            {
                x_125113 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125105)[flat_tid_116694];
            }
            // red body
            {
                float defunc_1_op_res_125114 = x_125112 + x_125113;
                
                defunc_2_reduce_res_124769 = defunc_1_op_res_125114;
            }
            // load acc params
            {
                x_125115 = defunc_2_reduce_res_124770;
            }
            // load next params
            {
                x_125116 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125107)[flat_tid_116694];
            }
            // red body
            {
                float defunc_1_op_res_125117 = x_125115 + x_125116;
                
                defunc_2_reduce_res_124770 = defunc_1_op_res_125117;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125105);
    free(reduce_stage_1_tid_res_arr_mem_125107);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128733_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128733_end -
                 futhark_mc_segred_task_128733_start;
        
        ctx->futhark_mc_segred_task_128733_runs[tid]++;
        ctx->futhark_mc_segred_task_128733_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128733_iter[tid] += iterations;
    }
    *futhark_mc_task_128732->retval_defunc_2_reduce_res_124769 =
        defunc_2_reduce_res_124769;
    *futhark_mc_task_128732->retval_defunc_2_reduce_res_124770 =
        defunc_2_reduce_res_124770;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128714(void *args, int64_t start,
                                            int64_t end, int flat_tid_116688,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128713
    *futhark_mc_segmap_parloop_struct_128713 =
    (struct futhark_mc_segmap_parloop_struct_128713 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128713->ctx;
    uint64_t futhark_mc_segmap_parloop_128714_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128714_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128713->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128713->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128713->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128713->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128713->free_i_112880;
    int64_t gtid_116685 =
            futhark_mc_segmap_parloop_struct_128713->free_gtid_116685;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128713->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128713->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128713->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128713->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 =
            futhark_mc_segmap_parloop_struct_128713->free_bytes_120352;
    struct memblock mem_120426 = {.desc ="mem_120426", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_120426,
                                  .size =0, .references =NULL};
    struct memblock mem_120429 = {.desc ="mem_120429", .mem =
                                  futhark_mc_segmap_parloop_struct_128713->free_mem_120429,
                                  .size =0, .references =NULL};
    size_t mem_124693_cached_sizze_128715 = 0;
    char *mem_124693 = NULL;
    size_t mem_124694_cached_sizze_128716 = 0;
    char *mem_124694 = NULL;
    size_t mem_124714_cached_sizze_128717 = 0;
    char *mem_124714 = NULL;
    size_t mem_124715_cached_sizze_128718 = 0;
    char *mem_124715 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124996 = start;
    
    if (mem_124693_cached_sizze_128715 < (size_t) bytes_120352) {
        mem_124693 = realloc(mem_124693, bytes_120352);
        mem_124693_cached_sizze_128715 = bytes_120352;
    }
    if (mem_124694_cached_sizze_128716 < (size_t) bytes_120352) {
        mem_124694 = realloc(mem_124694, bytes_120352);
        mem_124694_cached_sizze_128716 = bytes_120352;
    }
    if (mem_124714_cached_sizze_128717 < (size_t) bytes_120352) {
        mem_124714 = realloc(mem_124714, bytes_120352);
        mem_124714_cached_sizze_128717 = bytes_120352;
    }
    if (mem_124715_cached_sizze_128718 < (size_t) bytes_120352) {
        mem_124715 = realloc(mem_124715, bytes_120352);
        mem_124715_cached_sizze_128718 = bytes_120352;
    }
    for (; iter_124996 < end; iter_124996++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125060 = l_n_m_112854;
        int64_t gtid_116689 = iter_124996;
        int64_t remnant_125061 = iter_124996 - gtid_116689;
        int64_t x_124688 = ((int64_t *) mem_119820.mem)[gtid_116685 *
                                                        l_n_m_112854 +
                                                        gtid_116689];
        float x_124689 = ((float *) mem_119824.mem)[gtid_116685 * l_n_m_112854 +
                                                    gtid_116689];
        int64_t min_arg_124690 = mul64(t_jump_112811, gtid_116689);
        int64_t min_res_124691 = smin64(i_112880, min_arg_124690);
        float defunc_0_f_res_124692 = sitofp_i64_f32(min_res_124691);
        int64_t flat_tid_116690 = (int64_t) 0;
        int32_t num_tasks_125062;
        struct futhark_mc_task_128719 futhark_mc_task_128719;
        
        futhark_mc_task_128719.ctx = ctx;
        futhark_mc_task_128719.free_n_112804 = n_112804;
        futhark_mc_task_128719.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128719.free_gtid_116685 = gtid_116685;
        futhark_mc_task_128719.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128719.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128719.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128719.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128719.free_x_124688 = x_124688;
        futhark_mc_task_128719.free_x_124689 = x_124689;
        futhark_mc_task_128719.free_defunc_0_f_res_124692 =
            defunc_0_f_res_124692;
        futhark_mc_task_128719.free_mem_124693 = mem_124693;
        futhark_mc_task_128719.free_mem_124694 = mem_124694;
        
        struct scheduler_segop futhark_mc_task_128719_task;
        
        futhark_mc_task_128719_task.args = &futhark_mc_task_128719;
        futhark_mc_task_128719_task.top_level_fn =
            futhark_mc_segmap_task_128720;
        futhark_mc_task_128719_task.name = "futhark_mc_segmap_task_128720";
        futhark_mc_task_128719_task.iterations = l_window_112808;
        futhark_mc_task_128719_task.task_time =
            &ctx->futhark_mc_segmap_task_128720_total_time;
        futhark_mc_task_128719_task.task_iter =
            &ctx->futhark_mc_segmap_task_128720_total_iter;
        futhark_mc_task_128719_task.sched = STATIC;
        futhark_mc_task_128719_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128720_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128719_task);
        
        if (futhark_mc_segmap_task_128720_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_124716;
        float defunc_2_reduce_res_124717;
        float defunc_2_reduce_res_124718;
        float defunc_2_reduce_res_124719;
        float defunc_2_reduce_res_124720;
        int64_t flat_tid_116692 = (int64_t) 0;
        int32_t num_tasks_125071;
        struct futhark_mc_task_128723 futhark_mc_task_128723;
        
        futhark_mc_task_128723.ctx = ctx;
        futhark_mc_task_128723.free_mem_124693 = mem_124693;
        futhark_mc_task_128723.free_mem_124694 = mem_124694;
        futhark_mc_task_128723.retval_defunc_2_reduce_res_124716 =
            &defunc_2_reduce_res_124716;
        futhark_mc_task_128723.retval_defunc_2_reduce_res_124717 =
            &defunc_2_reduce_res_124717;
        futhark_mc_task_128723.retval_defunc_2_reduce_res_124718 =
            &defunc_2_reduce_res_124718;
        futhark_mc_task_128723.retval_defunc_2_reduce_res_124719 =
            &defunc_2_reduce_res_124719;
        futhark_mc_task_128723.retval_defunc_2_reduce_res_124720 =
            &defunc_2_reduce_res_124720;
        futhark_mc_task_128723.retval_mem_124714 = mem_124714;
        futhark_mc_task_128723.retval_mem_124715 = mem_124715;
        
        struct scheduler_segop futhark_mc_task_128723_task;
        
        futhark_mc_task_128723_task.args = &futhark_mc_task_128723;
        futhark_mc_task_128723_task.top_level_fn =
            futhark_mc_segred_task_128724;
        futhark_mc_task_128723_task.name = "futhark_mc_segred_task_128724";
        futhark_mc_task_128723_task.iterations = l_window_112808;
        futhark_mc_task_128723_task.task_time =
            &ctx->futhark_mc_segred_task_128724_total_time;
        futhark_mc_task_128723_task.task_iter =
            &ctx->futhark_mc_segred_task_128724_total_iter;
        futhark_mc_task_128723_task.sched = STATIC;
        futhark_mc_task_128723_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128724_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128723_task);
        
        if (futhark_mc_segred_task_128724_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_124744 = defunc_2_reduce_res_124718 *
              defunc_2_reduce_res_124720;
        float y_124745 = defunc_2_reduce_res_124719 *
              defunc_2_reduce_res_124719;
        float a12_124746 = x_124744 - y_124745;
        float x_124747 = defunc_2_reduce_res_124718 *
              defunc_2_reduce_res_124719;
        float y_124748 = defunc_2_reduce_res_124717 *
              defunc_2_reduce_res_124720;
        float b12_124749 = x_124747 - y_124748;
        float x_124750 = defunc_2_reduce_res_124717 *
              defunc_2_reduce_res_124719;
        float y_124751 = defunc_2_reduce_res_124718 *
              defunc_2_reduce_res_124718;
        float c12_124752 = x_124750 - y_124751;
        float x_124753 = defunc_2_reduce_res_124716 *
              defunc_2_reduce_res_124720;
        float b2_124754 = x_124753 - y_124751;
        float x_124755 = defunc_2_reduce_res_124717 *
              defunc_2_reduce_res_124718;
        float y_124756 = defunc_2_reduce_res_124716 *
              defunc_2_reduce_res_124719;
        float c2_124757 = x_124755 - y_124756;
        float x_124758 = defunc_2_reduce_res_124716 * a12_124746;
        float y_124759 = defunc_2_reduce_res_124717 * b12_124749;
        float x_124760 = x_124758 + y_124759;
        float y_124761 = defunc_2_reduce_res_124718 * c12_124752;
        float y_124762 = x_124760 + y_124761;
        float det_124763 = 1.0F / y_124762;
        float a12_124764 = a12_124746 * det_124763;
        float b12_124765 = b12_124749 * det_124763;
        float c12_124766 = c12_124752 * det_124763;
        float b2_124767 = b2_124754 * det_124763;
        float c2_124768 = c2_124757 * det_124763;
        float defunc_2_reduce_res_124769;
        float defunc_2_reduce_res_124770;
        int64_t flat_tid_116694 = (int64_t) 0;
        int32_t num_tasks_125104;
        struct futhark_mc_task_128732 futhark_mc_task_128732;
        
        futhark_mc_task_128732.ctx = ctx;
        futhark_mc_task_128732.free_n_112804 = n_112804;
        futhark_mc_task_128732.free_gtid_116685 = gtid_116685;
        futhark_mc_task_128732.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128732.free_x_124688 = x_124688;
        futhark_mc_task_128732.free_mem_124694 = mem_124694;
        futhark_mc_task_128732.free_mem_124714 = mem_124714;
        futhark_mc_task_128732.free_mem_124715 = mem_124715;
        futhark_mc_task_128732.free_a12_124764 = a12_124764;
        futhark_mc_task_128732.free_b12_124765 = b12_124765;
        futhark_mc_task_128732.free_c12_124766 = c12_124766;
        futhark_mc_task_128732.free_b2_124767 = b2_124767;
        futhark_mc_task_128732.free_c2_124768 = c2_124768;
        futhark_mc_task_128732.retval_defunc_2_reduce_res_124769 =
            &defunc_2_reduce_res_124769;
        futhark_mc_task_128732.retval_defunc_2_reduce_res_124770 =
            &defunc_2_reduce_res_124770;
        
        struct scheduler_segop futhark_mc_task_128732_task;
        
        futhark_mc_task_128732_task.args = &futhark_mc_task_128732;
        futhark_mc_task_128732_task.top_level_fn =
            futhark_mc_segred_task_128733;
        futhark_mc_task_128732_task.name = "futhark_mc_segred_task_128733";
        futhark_mc_task_128732_task.iterations = l_window_112808;
        futhark_mc_task_128732_task.task_time =
            &ctx->futhark_mc_segred_task_128733_total_time;
        futhark_mc_task_128732_task.task_iter =
            &ctx->futhark_mc_segred_task_128733_total_iter;
        futhark_mc_task_128732_task.sched = STATIC;
        futhark_mc_task_128732_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128733_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128732_task);
        
        if (futhark_mc_segred_task_128733_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120426.mem)[gtid_116689] = defunc_2_reduce_res_124769;
        ((float *) mem_120429.mem)[gtid_116689] = defunc_2_reduce_res_124770;
    }
    
  cleanup:
    { }
    free(mem_124693);
    free(mem_124694);
    free(mem_124714);
    free(mem_124715);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128714_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128714_end -
                 futhark_mc_segmap_parloop_128714_start;
        
        ctx->futhark_mc_segmap_parloop_128714_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128714_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128714_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128712(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116688 = tid;
    int num_tasks_124914 = info.nsubtasks;
    struct futhark_mc_task_128704 *futhark_mc_task_128704 =
                                  (struct futhark_mc_task_128704 *) args;
    struct futhark_context *ctx = futhark_mc_task_128704->ctx;
    uint64_t futhark_mc_segmap_nested_task_128712_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128712_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128704->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128704->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128704->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128704->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128704->free_i_112880;
    int64_t gtid_116685 = futhark_mc_task_128704->free_gtid_116685;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128704->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128704->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128704->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128704->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128704->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128704->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128704->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 = futhark_mc_task_128704->free_bytes_120352;
    struct memblock mem_120426 = {.desc ="mem_120426", .mem =
                                  futhark_mc_task_128704->free_mem_120426,
                                  .size =0, .references =NULL};
    struct memblock mem_120429 = {.desc ="mem_120429", .mem =
                                  futhark_mc_task_128704->free_mem_120429,
                                  .size =0, .references =NULL};
    int64_t iter_124996;
    struct futhark_mc_segmap_parloop_struct_128713
    futhark_mc_segmap_parloop_struct_128713;
    
    futhark_mc_segmap_parloop_struct_128713.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128713.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128713.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128713.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128713.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128713.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128713.free_gtid_116685 = gtid_116685;
    futhark_mc_segmap_parloop_struct_128713.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128713.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128713.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128713.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128713.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128713.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128713.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128713.free_bytes_120352 = bytes_120352;
    futhark_mc_segmap_parloop_struct_128713.free_mem_120426 = mem_120426.mem;
    futhark_mc_segmap_parloop_struct_128713.free_mem_120429 = mem_120429.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128714_task;
    
    futhark_mc_segmap_parloop_128714_task.name =
        "futhark_mc_segmap_parloop_128714";
    futhark_mc_segmap_parloop_128714_task.fn = futhark_mc_segmap_parloop_128714;
    futhark_mc_segmap_parloop_128714_task.args =
        &futhark_mc_segmap_parloop_struct_128713;
    futhark_mc_segmap_parloop_128714_task.iterations = iterations;
    futhark_mc_segmap_parloop_128714_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128714_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128714_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128714_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128714_task);
    
    if (futhark_mc_segmap_parloop_128714_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128714_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128714_total_end -
                 futhark_mc_segmap_parloop_128714_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128714_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128712_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128712_end -
                 futhark_mc_segmap_nested_task_128712_start;
        
        ctx->futhark_mc_segmap_nested_task_128712_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128712_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128712_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128701(void *args, int64_t start,
                                            int64_t end, int flat_tid_116684,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128700
    *futhark_mc_segmap_parloop_struct_128700 =
    (struct futhark_mc_segmap_parloop_struct_128700 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128700->ctx;
    uint64_t futhark_mc_segmap_parloop_128701_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128701_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128700->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128700->free_n_112804;
    int64_t l_window_112808 =
            futhark_mc_segmap_parloop_struct_128700->free_l_window_112808;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128700->free_t_jump_112811;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128700->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128700->free_i_112880;
    int64_t bytes_119766 =
            futhark_mc_segmap_parloop_struct_128700->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_segmap_parloop_struct_128700->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_segmap_parloop_struct_128700->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128700->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128700->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128700->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128700->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_segmap_parloop_struct_128700->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 =
            futhark_mc_segmap_parloop_struct_128700->free_bytes_120352;
    struct memblock mem_120523 = {.desc ="mem_120523", .mem =
                                  futhark_mc_segmap_parloop_struct_128700->free_mem_120523,
                                  .size =0, .references =NULL};
    struct memblock mem_120527 = {.desc ="mem_120527", .mem =
                                  futhark_mc_segmap_parloop_struct_128700->free_mem_120527,
                                  .size =0, .references =NULL};
    size_t mem_120426_cached_sizze_128702 = 0;
    char *mem_120426 = NULL;
    size_t mem_120429_cached_sizze_128703 = 0;
    char *mem_120429 = NULL;
    int64_t iterations = end - start;
    int64_t iter_124687 = start;
    
    if (mem_120426_cached_sizze_128702 < (size_t) bytes_119766) {
        mem_120426 = realloc(mem_120426, bytes_119766);
        mem_120426_cached_sizze_128702 = bytes_119766;
    }
    if (mem_120429_cached_sizze_128703 < (size_t) bytes_119766) {
        mem_120429 = realloc(mem_120429, bytes_119766);
        mem_120429_cached_sizze_128703 = bytes_119766;
    }
    for (; iter_124687 < end; iter_124687++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_124912 = m_112803;
        int64_t gtid_116685 = iter_124687;
        int64_t remnant_124913 = iter_124687 - gtid_116685;
        int64_t flat_tid_116686 = (int64_t) 0;
        int32_t num_tasks_124914;
        int64_t flat_tid_116688 = (int64_t) 0;
        struct futhark_mc_task_128704 futhark_mc_task_128704;
        
        futhark_mc_task_128704.ctx = ctx;
        futhark_mc_task_128704.free_n_112804 = n_112804;
        futhark_mc_task_128704.free_l_window_112808 = l_window_112808;
        futhark_mc_task_128704.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128704.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128704.free_i_112880 = i_112880;
        futhark_mc_task_128704.free_gtid_116685 = gtid_116685;
        futhark_mc_task_128704.free_mem_119820 = mem_119820.mem;
        futhark_mc_task_128704.free_mem_119824 = mem_119824.mem;
        futhark_mc_task_128704.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128704.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128704.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128704.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128704.free_mem_120064 = mem_120064.mem;
        futhark_mc_task_128704.free_bytes_120352 = bytes_120352;
        futhark_mc_task_128704.free_mem_120426 = mem_120426;
        futhark_mc_task_128704.free_mem_120429 = mem_120429;
        
        struct scheduler_segop futhark_mc_task_128704_task;
        
        futhark_mc_task_128704_task.args = &futhark_mc_task_128704;
        futhark_mc_task_128704_task.top_level_fn =
            futhark_mc_segmap_task_128705;
        futhark_mc_task_128704_task.name = "futhark_mc_segmap_task_128705";
        futhark_mc_task_128704_task.iterations = l_n_m_112854;
        futhark_mc_task_128704_task.task_time =
            &ctx->futhark_mc_segmap_task_128705_total_time;
        futhark_mc_task_128704_task.task_iter =
            &ctx->futhark_mc_segmap_task_128705_total_iter;
        futhark_mc_task_128704_task.sched = STATIC;
        futhark_mc_task_128704_task.nested_fn =
            futhark_mc_segmap_nested_task_128712;
        
        int futhark_mc_segmap_task_128705_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128704_task);
        
        if (futhark_mc_segmap_task_128705_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120523.mem + gtid_116685 * l_n_m_112854 * (int64_t) 4,
                mem_120426 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
        memmove(mem_120527.mem + gtid_116685 * l_n_m_112854 * (int64_t) 4,
                mem_120429 + (int64_t) 0, l_n_m_112854 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120426);
    free(mem_120429);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128701_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128701_end -
                 futhark_mc_segmap_parloop_128701_start;
        
        ctx->futhark_mc_segmap_parloop_128701_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128701_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128701_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128699(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_116684 = tid;
    int num_tasks_124553 = info.nsubtasks;
    struct futhark_mc_task_128689 *futhark_mc_task_128689 =
                                  (struct futhark_mc_task_128689 *) args;
    struct futhark_context *ctx = futhark_mc_task_128689->ctx;
    uint64_t futhark_mc_segmap_nested_task_128699_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128699_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128689->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128689->free_n_112804;
    int64_t l_window_112808 = futhark_mc_task_128689->free_l_window_112808;
    int64_t t_jump_112811 = futhark_mc_task_128689->free_t_jump_112811;
    int64_t l_n_m_112854 = futhark_mc_task_128689->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128689->free_i_112880;
    int64_t bytes_119766 = futhark_mc_task_128689->free_bytes_119766;
    struct memblock mem_119820 = {.desc ="mem_119820", .mem =
                                  futhark_mc_task_128689->free_mem_119820,
                                  .size =0, .references =NULL};
    struct memblock mem_119824 = {.desc ="mem_119824", .mem =
                                  futhark_mc_task_128689->free_mem_119824,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128689->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128689->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128689->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128689->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120064 = {.desc ="mem_120064", .mem =
                                  futhark_mc_task_128689->free_mem_120064,
                                  .size =0, .references =NULL};
    int64_t bytes_120352 = futhark_mc_task_128689->free_bytes_120352;
    struct memblock mem_120523 = {.desc ="mem_120523", .mem =
                                  futhark_mc_task_128689->free_mem_120523,
                                  .size =0, .references =NULL};
    struct memblock mem_120527 = {.desc ="mem_120527", .mem =
                                  futhark_mc_task_128689->free_mem_120527,
                                  .size =0, .references =NULL};
    int64_t iter_124687;
    struct futhark_mc_segmap_parloop_struct_128700
    futhark_mc_segmap_parloop_struct_128700;
    
    futhark_mc_segmap_parloop_struct_128700.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128700.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128700.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128700.free_l_window_112808 =
        l_window_112808;
    futhark_mc_segmap_parloop_struct_128700.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128700.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128700.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128700.free_bytes_119766 = bytes_119766;
    futhark_mc_segmap_parloop_struct_128700.free_mem_119820 = mem_119820.mem;
    futhark_mc_segmap_parloop_struct_128700.free_mem_119824 = mem_119824.mem;
    futhark_mc_segmap_parloop_struct_128700.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128700.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128700.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128700.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128700.free_mem_120064 = mem_120064.mem;
    futhark_mc_segmap_parloop_struct_128700.free_bytes_120352 = bytes_120352;
    futhark_mc_segmap_parloop_struct_128700.free_mem_120523 = mem_120523.mem;
    futhark_mc_segmap_parloop_struct_128700.free_mem_120527 = mem_120527.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128701_task;
    
    futhark_mc_segmap_parloop_128701_task.name =
        "futhark_mc_segmap_parloop_128701";
    futhark_mc_segmap_parloop_128701_task.fn = futhark_mc_segmap_parloop_128701;
    futhark_mc_segmap_parloop_128701_task.args =
        &futhark_mc_segmap_parloop_struct_128700;
    futhark_mc_segmap_parloop_128701_task.iterations = iterations;
    futhark_mc_segmap_parloop_128701_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128701_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128701_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128701_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128701_task);
    
    if (futhark_mc_segmap_parloop_128701_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128701_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128701_total_end -
                 futhark_mc_segmap_parloop_128701_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128701_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128701_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128701_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128699_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128699_end -
                 futhark_mc_segmap_nested_task_128699_start;
        
        ctx->futhark_mc_segmap_nested_task_128699_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128699_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128699_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128738 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_y_113992;
    int64_t free_bytes_119697;
    char *free_ext_mem_120532;
    char *free_ext_mem_120533;
    char *free_mem_120555;
};
struct futhark_mc_segmap_parloop_struct_128740 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_y_113992;
    int64_t free_bytes_119697;
    char *free_ext_mem_120532;
    char *free_ext_mem_120533;
    char *free_mem_120555;
};
static int futhark_mc_segmap_parloop_128741(void *args, int64_t start,
                                            int64_t end, int flat_tid_117023,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128740
    *futhark_mc_segmap_parloop_struct_128740 =
    (struct futhark_mc_segmap_parloop_struct_128740 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128740->ctx;
    uint64_t futhark_mc_segmap_parloop_128741_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128741_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128740->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128740->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128740->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128740->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128740->free_i_112880;
    int64_t y_113992 = futhark_mc_segmap_parloop_struct_128740->free_y_113992;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128740->free_bytes_119697;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_segmap_parloop_struct_128740->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_segmap_parloop_struct_128740->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120555 = {.desc ="mem_120555", .mem =
                                  futhark_mc_segmap_parloop_struct_128740->free_mem_120555,
                                  .size =0, .references =NULL};
    size_t mem_120539_cached_sizze_128742 = 0;
    char *mem_120539 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125120 = start;
    
    if (mem_120539_cached_sizze_128742 < (size_t) bytes_119697) {
        mem_120539 = realloc(mem_120539, bytes_119697);
        mem_120539_cached_sizze_128742 = bytes_119697;
    }
    for (; iter_125120 < end; iter_125120++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125170 = m_112803;
        int64_t gtid_117024 = iter_125120;
        int64_t remnant_125171 = iter_125120 - gtid_117024;
        
        for (int64_t i_125121 = 0; i_125121 < n_112804; i_125121++) {
            int64_t m_v_125123 = sdiv64(i_125121, l_jump_112812);
            bool cond_125124 = m_v_125123 == y_113992;
            int64_t j_125125;
            
            if (cond_125124) {
                int64_t j_t_res_125126 = sub64(m_v_125123, (int64_t) 1);
                
                j_125125 = j_t_res_125126;
            } else {
                j_125125 = m_v_125123;
            }
            
            int64_t min_arg_125127 = mul64(l_jump_112812, j_125125);
            int64_t min_res_125128 = smin64(i_112880, min_arg_125127);
            int64_t defunc_0_m_fun_arg_125129 = add64((int64_t) 1, j_125125);
            int64_t min_arg_125130 = mul64(l_jump_112812,
                                           defunc_0_m_fun_arg_125129);
            int64_t min_res_125131 = smin64(i_112880, min_arg_125130);
            int64_t i64_arg_125132 = sub64(min_res_125131, min_res_125128);
            float i64_res_125133 = sitofp_i64_f32(i64_arg_125132);
            int64_t i64_arg_125134 = sub64(i_125121, min_res_125128);
            float i64_res_125135 = sitofp_i64_f32(i64_arg_125134);
            float u_125136 = i64_res_125135 / i64_res_125133;
            float u2_125137 = u_125136 * u_125136;
            float u3_125138 = u_125136 * u2_125137;
            float x_125139 = 2.0F * u3_125138;
            float y_125140 = 3.0F * u2_125137;
            float x_125141 = x_125139 - y_125140;
            float x_125142 = 1.0F + x_125141;
            bool x_125143 = sle64((int64_t) 0, j_125125);
            bool y_125144 = slt64(j_125125, l_n_m_112854);
            bool bounds_check_125145 = x_125143 && y_125144;
            bool index_certs_125146;
            
            if (!bounds_check_125145) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_125125,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_112854, "].",
                              "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_125147 = ((float *) ext_mem_120533.mem)[gtid_117024 *
                                                            l_n_m_112854 +
                                                            j_125125];
            float x_125148 = x_125142 * y_125147;
            float x_125149 = y_125140 - x_125139;
            bool x_125150 = sle64((int64_t) 0, defunc_0_m_fun_arg_125129);
            bool y_125151 = slt64(defunc_0_m_fun_arg_125129, l_n_m_112854);
            bool bounds_check_125152 = x_125150 && y_125151;
            bool index_certs_125153;
            
            if (!bounds_check_125152) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_125129,
                              "] out of bounds for array of shape [",
                              (long long) l_n_m_112854, "].",
                              "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_125154 = ((float *) ext_mem_120533.mem)[gtid_117024 *
                                                            l_n_m_112854 +
                                                            defunc_0_m_fun_arg_125129];
            float y_125155 = x_125149 * y_125154;
            float x_125156 = x_125148 + y_125155;
            float y_125157 = 2.0F * u2_125137;
            float x_125158 = u3_125138 - y_125157;
            float x_125159 = u_125136 + x_125158;
            float y_125160 = ((float *) ext_mem_120532.mem)[gtid_117024 *
                                                            l_n_m_112854 +
                                                            j_125125];
            float x_125161 = x_125159 * y_125160;
            float y_125162 = i64_res_125133 * x_125161;
            float x_125163 = x_125156 + y_125162;
            float x_125164 = u3_125138 - u2_125137;
            float y_125165 = ((float *) ext_mem_120532.mem)[gtid_117024 *
                                                            l_n_m_112854 +
                                                            defunc_0_m_fun_arg_125129];
            float x_125166 = x_125164 * y_125165;
            float y_125167 = i64_res_125133 * x_125166;
            float defunc_0_f_res_125168 = x_125163 + y_125167;
            
            ((float *) mem_120539)[i_125121] = defunc_0_f_res_125168;
        }
        memmove(mem_120555.mem + gtid_117024 * n_112804 * (int64_t) 4,
                mem_120539 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120539);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128741_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128741_end -
                 futhark_mc_segmap_parloop_128741_start;
        
        ctx->futhark_mc_segmap_parloop_128741_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128741_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128741_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128739(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117023 = tid;
    int num_tasks_125119 = info.nsubtasks;
    struct futhark_mc_task_128738 *futhark_mc_task_128738 =
                                  (struct futhark_mc_task_128738 *) args;
    struct futhark_context *ctx = futhark_mc_task_128738->ctx;
    uint64_t futhark_mc_segmap_task_128739_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128739_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128738->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128738->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128738->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128738->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128738->free_i_112880;
    int64_t y_113992 = futhark_mc_task_128738->free_y_113992;
    int64_t bytes_119697 = futhark_mc_task_128738->free_bytes_119697;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_task_128738->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_task_128738->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120555 = {.desc ="mem_120555", .mem =
                                  futhark_mc_task_128738->free_mem_120555,
                                  .size =0, .references =NULL};
    int64_t iter_125120;
    struct futhark_mc_segmap_parloop_struct_128740
    futhark_mc_segmap_parloop_struct_128740;
    
    futhark_mc_segmap_parloop_struct_128740.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128740.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128740.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128740.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128740.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128740.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128740.free_y_113992 = y_113992;
    futhark_mc_segmap_parloop_struct_128740.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128740.free_ext_mem_120532 =
        ext_mem_120532.mem;
    futhark_mc_segmap_parloop_struct_128740.free_ext_mem_120533 =
        ext_mem_120533.mem;
    futhark_mc_segmap_parloop_struct_128740.free_mem_120555 = mem_120555.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128741_task;
    
    futhark_mc_segmap_parloop_128741_task.name =
        "futhark_mc_segmap_parloop_128741";
    futhark_mc_segmap_parloop_128741_task.fn = futhark_mc_segmap_parloop_128741;
    futhark_mc_segmap_parloop_128741_task.args =
        &futhark_mc_segmap_parloop_struct_128740;
    futhark_mc_segmap_parloop_128741_task.iterations = iterations;
    futhark_mc_segmap_parloop_128741_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128741_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128741_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128741_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128741_task);
    
    if (futhark_mc_segmap_parloop_128741_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128741_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128741_total_end -
                 futhark_mc_segmap_parloop_128741_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128741_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128741_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128741_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128739_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128739_end -
                 futhark_mc_segmap_task_128739_start;
        
        ctx->futhark_mc_segmap_task_128739_runs[tid]++;
        ctx->futhark_mc_segmap_task_128739_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128739_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128744 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_y_113992;
    int64_t free_bytes_119697;
    char *free_ext_mem_120532;
    char *free_ext_mem_120533;
    char *free_mem_120555;
};
struct futhark_mc_task_128747 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_y_113992;
    int64_t free_gtid_117026;
    char *free_ext_mem_120532;
    char *free_ext_mem_120533;
    char *free_mem_120536;
};
struct futhark_mc_segmap_parloop_struct_128749 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_l_jump_112812;
    int64_t free_l_n_m_112854;
    int64_t free_i_112880;
    int64_t free_y_113992;
    int64_t free_gtid_117026;
    char *free_ext_mem_120532;
    char *free_ext_mem_120533;
    char *free_mem_120536;
};
static int futhark_mc_segmap_parloop_128750(void *args, int64_t start,
                                            int64_t end, int flat_tid_117027,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128749
    *futhark_mc_segmap_parloop_struct_128749 =
    (struct futhark_mc_segmap_parloop_struct_128749 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128749->ctx;
    uint64_t futhark_mc_segmap_parloop_128750_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128750_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128749->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128749->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128749->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128749->free_i_112880;
    int64_t y_113992 = futhark_mc_segmap_parloop_struct_128749->free_y_113992;
    int64_t gtid_117026 =
            futhark_mc_segmap_parloop_struct_128749->free_gtid_117026;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_segmap_parloop_struct_128749->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_segmap_parloop_struct_128749->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120536 = {.desc ="mem_120536", .mem =
                                  futhark_mc_segmap_parloop_struct_128749->free_mem_120536,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125223 = start;
    
    for (; iter_125223 < end; iter_125223++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125225 = n_112804;
        int64_t gtid_117028 = iter_125223;
        int64_t remnant_125226 = iter_125223 - gtid_117028;
        int64_t m_v_125174 = sdiv64(gtid_117028, l_jump_112812);
        bool cond_125175 = m_v_125174 == y_113992;
        int64_t j_125176;
        
        if (cond_125175) {
            int64_t j_t_res_125224 = sub64(m_v_125174, (int64_t) 1);
            
            j_125176 = j_t_res_125224;
        } else {
            j_125176 = m_v_125174;
        }
        
        int64_t min_arg_125178 = mul64(l_jump_112812, j_125176);
        int64_t min_res_125179 = smin64(i_112880, min_arg_125178);
        int64_t defunc_0_m_fun_arg_125180 = add64((int64_t) 1, j_125176);
        int64_t min_arg_125181 = mul64(l_jump_112812,
                                       defunc_0_m_fun_arg_125180);
        int64_t min_res_125182 = smin64(i_112880, min_arg_125181);
        int64_t i64_arg_125183 = sub64(min_res_125182, min_res_125179);
        float i64_res_125184 = sitofp_i64_f32(i64_arg_125183);
        int64_t i64_arg_125185 = sub64(gtid_117028, min_res_125179);
        float i64_res_125186 = sitofp_i64_f32(i64_arg_125185);
        float u_125187 = i64_res_125186 / i64_res_125184;
        float u2_125188 = u_125187 * u_125187;
        float u3_125189 = u_125187 * u2_125188;
        float x_125190 = 2.0F * u3_125189;
        float y_125191 = 3.0F * u2_125188;
        float x_125192 = x_125190 - y_125191;
        float x_125193 = 1.0F + x_125192;
        bool x_125194 = sle64((int64_t) 0, j_125176);
        bool y_125195 = slt64(j_125176, l_n_m_112854);
        bool bounds_check_125196 = x_125194 && y_125195;
        bool index_certs_125197;
        
        if (!bounds_check_125196) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_125176,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_112854, "].",
                                   "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_125198 = ((float *) ext_mem_120533.mem)[gtid_117026 *
                                                        l_n_m_112854 +
                                                        j_125176];
        float x_125199 = x_125193 * y_125198;
        float x_125200 = y_125191 - x_125190;
        bool x_125201 = sle64((int64_t) 0, defunc_0_m_fun_arg_125180);
        bool y_125202 = slt64(defunc_0_m_fun_arg_125180, l_n_m_112854);
        bool bounds_check_125203 = x_125201 && y_125202;
        bool index_certs_125204;
        
        if (!bounds_check_125203) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_125180,
                                   "] out of bounds for array of shape [",
                                   (long long) l_n_m_112854, "].",
                                   "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_125205 = ((float *) ext_mem_120533.mem)[gtid_117026 *
                                                        l_n_m_112854 +
                                                        defunc_0_m_fun_arg_125180];
        float y_125206 = x_125200 * y_125205;
        float x_125207 = x_125199 + y_125206;
        float y_125208 = 2.0F * u2_125188;
        float x_125209 = u3_125189 - y_125208;
        float x_125210 = u_125187 + x_125209;
        float y_125211 = ((float *) ext_mem_120532.mem)[gtid_117026 *
                                                        l_n_m_112854 +
                                                        j_125176];
        float x_125212 = x_125210 * y_125211;
        float y_125213 = i64_res_125184 * x_125212;
        float x_125214 = x_125207 + y_125213;
        float x_125215 = u3_125189 - u2_125188;
        float y_125216 = ((float *) ext_mem_120532.mem)[gtid_117026 *
                                                        l_n_m_112854 +
                                                        defunc_0_m_fun_arg_125180];
        float x_125217 = x_125215 * y_125216;
        float y_125218 = i64_res_125184 * x_125217;
        float defunc_0_f_res_125219 = x_125214 + y_125218;
        
        ((float *) mem_120536.mem)[gtid_117028] = defunc_0_f_res_125219;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128750_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128750_end -
                 futhark_mc_segmap_parloop_128750_start;
        
        ctx->futhark_mc_segmap_parloop_128750_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128750_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128750_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128748(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117027 = tid;
    int num_tasks_125222 = info.nsubtasks;
    struct futhark_mc_task_128747 *futhark_mc_task_128747 =
                                  (struct futhark_mc_task_128747 *) args;
    struct futhark_context *ctx = futhark_mc_task_128747->ctx;
    uint64_t futhark_mc_segmap_task_128748_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128748_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128747->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128747->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128747->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128747->free_i_112880;
    int64_t y_113992 = futhark_mc_task_128747->free_y_113992;
    int64_t gtid_117026 = futhark_mc_task_128747->free_gtid_117026;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_task_128747->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_task_128747->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120536 = {.desc ="mem_120536", .mem =
                                  futhark_mc_task_128747->free_mem_120536,
                                  .size =0, .references =NULL};
    int64_t iter_125223;
    struct futhark_mc_segmap_parloop_struct_128749
    futhark_mc_segmap_parloop_struct_128749;
    
    futhark_mc_segmap_parloop_struct_128749.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128749.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128749.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128749.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128749.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128749.free_y_113992 = y_113992;
    futhark_mc_segmap_parloop_struct_128749.free_gtid_117026 = gtid_117026;
    futhark_mc_segmap_parloop_struct_128749.free_ext_mem_120532 =
        ext_mem_120532.mem;
    futhark_mc_segmap_parloop_struct_128749.free_ext_mem_120533 =
        ext_mem_120533.mem;
    futhark_mc_segmap_parloop_struct_128749.free_mem_120536 = mem_120536.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128750_task;
    
    futhark_mc_segmap_parloop_128750_task.name =
        "futhark_mc_segmap_parloop_128750";
    futhark_mc_segmap_parloop_128750_task.fn = futhark_mc_segmap_parloop_128750;
    futhark_mc_segmap_parloop_128750_task.args =
        &futhark_mc_segmap_parloop_struct_128749;
    futhark_mc_segmap_parloop_128750_task.iterations = iterations;
    futhark_mc_segmap_parloop_128750_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128750_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128750_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128750_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128750_task);
    
    if (futhark_mc_segmap_parloop_128750_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128750_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128750_total_end -
                 futhark_mc_segmap_parloop_128750_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128750_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128750_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128750_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128748_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128748_end -
                 futhark_mc_segmap_task_128748_start;
        
        ctx->futhark_mc_segmap_task_128748_runs[tid]++;
        ctx->futhark_mc_segmap_task_128748_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128748_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128745(void *args, int64_t start,
                                            int64_t end, int flat_tid_117025,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128744
    *futhark_mc_segmap_parloop_struct_128744 =
    (struct futhark_mc_segmap_parloop_struct_128744 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128744->ctx;
    uint64_t futhark_mc_segmap_parloop_128745_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128745_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128744->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128744->free_n_112804;
    int64_t l_jump_112812 =
            futhark_mc_segmap_parloop_struct_128744->free_l_jump_112812;
    int64_t l_n_m_112854 =
            futhark_mc_segmap_parloop_struct_128744->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128744->free_i_112880;
    int64_t y_113992 = futhark_mc_segmap_parloop_struct_128744->free_y_113992;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128744->free_bytes_119697;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_segmap_parloop_struct_128744->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_segmap_parloop_struct_128744->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120555 = {.desc ="mem_120555", .mem =
                                  futhark_mc_segmap_parloop_struct_128744->free_mem_120555,
                                  .size =0, .references =NULL};
    size_t mem_120536_cached_sizze_128746 = 0;
    char *mem_120536 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125173 = start;
    
    if (mem_120536_cached_sizze_128746 < (size_t) bytes_119697) {
        mem_120536 = realloc(mem_120536, bytes_119697);
        mem_120536_cached_sizze_128746 = bytes_119697;
    }
    for (; iter_125173 < end; iter_125173++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125220 = m_112803;
        int64_t gtid_117026 = iter_125173;
        int64_t remnant_125221 = iter_125173 - gtid_117026;
        int64_t flat_tid_117027 = (int64_t) 0;
        int32_t num_tasks_125222;
        struct futhark_mc_task_128747 futhark_mc_task_128747;
        
        futhark_mc_task_128747.ctx = ctx;
        futhark_mc_task_128747.free_n_112804 = n_112804;
        futhark_mc_task_128747.free_l_jump_112812 = l_jump_112812;
        futhark_mc_task_128747.free_l_n_m_112854 = l_n_m_112854;
        futhark_mc_task_128747.free_i_112880 = i_112880;
        futhark_mc_task_128747.free_y_113992 = y_113992;
        futhark_mc_task_128747.free_gtid_117026 = gtid_117026;
        futhark_mc_task_128747.free_ext_mem_120532 = ext_mem_120532.mem;
        futhark_mc_task_128747.free_ext_mem_120533 = ext_mem_120533.mem;
        futhark_mc_task_128747.free_mem_120536 = mem_120536;
        
        struct scheduler_segop futhark_mc_task_128747_task;
        
        futhark_mc_task_128747_task.args = &futhark_mc_task_128747;
        futhark_mc_task_128747_task.top_level_fn =
            futhark_mc_segmap_task_128748;
        futhark_mc_task_128747_task.name = "futhark_mc_segmap_task_128748";
        futhark_mc_task_128747_task.iterations = n_112804;
        futhark_mc_task_128747_task.task_time =
            &ctx->futhark_mc_segmap_task_128748_total_time;
        futhark_mc_task_128747_task.task_iter =
            &ctx->futhark_mc_segmap_task_128748_total_iter;
        futhark_mc_task_128747_task.sched = STATIC;
        futhark_mc_task_128747_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128748_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128747_task);
        
        if (futhark_mc_segmap_task_128748_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120555.mem + gtid_117026 * n_112804 * (int64_t) 4,
                mem_120536 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120536);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128745_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128745_end -
                 futhark_mc_segmap_parloop_128745_start;
        
        ctx->futhark_mc_segmap_parloop_128745_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128745_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128745_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128743(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117025 = tid;
    int num_tasks_125119 = info.nsubtasks;
    struct futhark_mc_task_128738 *futhark_mc_task_128738 =
                                  (struct futhark_mc_task_128738 *) args;
    struct futhark_context *ctx = futhark_mc_task_128738->ctx;
    uint64_t futhark_mc_segmap_nested_task_128743_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128743_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128738->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128738->free_n_112804;
    int64_t l_jump_112812 = futhark_mc_task_128738->free_l_jump_112812;
    int64_t l_n_m_112854 = futhark_mc_task_128738->free_l_n_m_112854;
    int64_t i_112880 = futhark_mc_task_128738->free_i_112880;
    int64_t y_113992 = futhark_mc_task_128738->free_y_113992;
    int64_t bytes_119697 = futhark_mc_task_128738->free_bytes_119697;
    struct memblock ext_mem_120532 = {.desc ="ext_mem_120532", .mem =
                                      futhark_mc_task_128738->free_ext_mem_120532,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_120533 = {.desc ="ext_mem_120533", .mem =
                                      futhark_mc_task_128738->free_ext_mem_120533,
                                      .size =0, .references =NULL};
    struct memblock mem_120555 = {.desc ="mem_120555", .mem =
                                  futhark_mc_task_128738->free_mem_120555,
                                  .size =0, .references =NULL};
    int64_t iter_125173;
    struct futhark_mc_segmap_parloop_struct_128744
    futhark_mc_segmap_parloop_struct_128744;
    
    futhark_mc_segmap_parloop_struct_128744.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128744.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128744.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128744.free_l_jump_112812 = l_jump_112812;
    futhark_mc_segmap_parloop_struct_128744.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_segmap_parloop_struct_128744.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128744.free_y_113992 = y_113992;
    futhark_mc_segmap_parloop_struct_128744.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128744.free_ext_mem_120532 =
        ext_mem_120532.mem;
    futhark_mc_segmap_parloop_struct_128744.free_ext_mem_120533 =
        ext_mem_120533.mem;
    futhark_mc_segmap_parloop_struct_128744.free_mem_120555 = mem_120555.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128745_task;
    
    futhark_mc_segmap_parloop_128745_task.name =
        "futhark_mc_segmap_parloop_128745";
    futhark_mc_segmap_parloop_128745_task.fn = futhark_mc_segmap_parloop_128745;
    futhark_mc_segmap_parloop_128745_task.args =
        &futhark_mc_segmap_parloop_struct_128744;
    futhark_mc_segmap_parloop_128745_task.iterations = iterations;
    futhark_mc_segmap_parloop_128745_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128745_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128745_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128745_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128745_task);
    
    if (futhark_mc_segmap_parloop_128745_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128745_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128745_total_end -
                 futhark_mc_segmap_parloop_128745_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128745_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128743_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128743_end -
                 futhark_mc_segmap_nested_task_128743_start;
        
        ctx->futhark_mc_segmap_nested_task_128743_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128743_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128743_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128751 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_Y_mem_119653;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120006;
    char *free_ext_mem_120556;
    int64_t free_ext_120557;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120641;
};
struct futhark_mc_segmap_parloop_struct_128753 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_Y_mem_119653;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120006;
    char *free_ext_mem_120556;
    int64_t free_ext_120557;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120641;
};
static int futhark_mc_segmap_parloop_128754(void *args, int64_t start,
                                            int64_t end, int flat_tid_117079,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128753
    *futhark_mc_segmap_parloop_struct_128753 =
    (struct futhark_mc_segmap_parloop_struct_128753 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128753->ctx;
    uint64_t futhark_mc_segmap_parloop_128754_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128754_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128753->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128753->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128753->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128753->free_C_len_112852;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128753->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128753->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128753->free_bytes_119697;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128753->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128753->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128753->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128753->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128753->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_segmap_parloop_struct_128753->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 =
            futhark_mc_segmap_parloop_struct_128753->free_ext_120557;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128753->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128753->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120641 = {.desc ="mem_120641", .mem =
                                  futhark_mc_segmap_parloop_struct_128753->free_mem_120641,
                                  .size =0, .references =NULL};
    size_t mem_120572_cached_sizze_128755 = 0;
    char *mem_120572 = NULL;
    size_t mem_120575_cached_sizze_128756 = 0;
    char *mem_120575 = NULL;
    size_t mem_120602_cached_sizze_128757 = 0;
    char *mem_120602 = NULL;
    size_t mem_120605_cached_sizze_128758 = 0;
    char *mem_120605 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125228 = start;
    
    if (mem_120572_cached_sizze_128755 < (size_t) bytes_119697) {
        mem_120572 = realloc(mem_120572, bytes_119697);
        mem_120572_cached_sizze_128755 = bytes_119697;
    }
    if (mem_120575_cached_sizze_128756 < (size_t) bytes_119697) {
        mem_120575 = realloc(mem_120575, bytes_119697);
        mem_120575_cached_sizze_128756 = bytes_119697;
    }
    if (mem_120602_cached_sizze_128757 < (size_t) bytes_119697) {
        mem_120602 = realloc(mem_120602, bytes_119697);
        mem_120602_cached_sizze_128757 = bytes_119697;
    }
    if (mem_120605_cached_sizze_128758 < (size_t) bytes_119697) {
        mem_120605 = realloc(mem_120605, bytes_119697);
        mem_120605_cached_sizze_128758 = bytes_119697;
    }
    for (; iter_125228 < end; iter_125228++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125257 = m_112803;
        int64_t gtid_117080 = iter_125228;
        int64_t remnant_125258 = iter_125228 - gtid_117080;
        
        for (int64_t i_125229 = 0; i_125229 < n_112804; i_125229++) {
            int64_t slice_125232 = n_p_112806 + i_125229;
            float x_125233 = ((float *) mem_120006.mem)[gtid_117080 *
                                                        C_len_112852 +
                                                        slice_125232];
            float x_125234 = ((float *) ext_mem_120556.mem)[gtid_117080 *
                                                            ext_120557 +
                                                            i_125229];
            float x_125235 = ((float *) Y_mem_119653.mem)[gtid_117080 *
                                                          n_112804 + i_125229];
            float defunc_1_f_res_125236 = x_125233 - x_125234;
            float defunc_1_f_res_125237 = x_125235 - defunc_1_f_res_125236;
            
            ((float *) mem_120572)[i_125229] = defunc_1_f_res_125237;
            ((float *) mem_120575)[i_125229] = defunc_1_f_res_125236;
        }
        for (int64_t i_125240 = 0; i_125240 < n_112804; i_125240++) {
            int64_t x_125243 = ((int64_t *) mem_119693.mem)[gtid_117080 *
                                                            n_112804 +
                                                            i_125240];
            bool cond_125244 = sle64((int64_t) 0, x_125243);
            float defunc_0_f_res_125245;
            
            if (cond_125244) {
                bool y_125246 = slt64(x_125243, n_112804);
                bool bounds_check_125247 = cond_125244 && y_125246;
                bool index_certs_125248;
                
                if (!bounds_check_125247) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_125243,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_125249 =
                      ((float *) mem_120572)[x_125243];
                
                defunc_0_f_res_125245 = defunc_0_f_res_t_res_125249;
            } else {
                defunc_0_f_res_125245 = 0.0F;
            }
            
            float defunc_0_f_res_125250;
            
            if (cond_125244) {
                bool y_125251 = slt64(x_125243, n_112804);
                bool bounds_check_125252 = cond_125244 && y_125251;
                bool index_certs_125253;
                
                if (!bounds_check_125252) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_125243,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_125254 =
                      ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                       (gtid_117080 *
                                                        ctx_param_ext_119914 +
                                                        x_125243 *
                                                        ctx_param_ext_119916)];
                
                defunc_0_f_res_125250 = defunc_0_f_res_t_res_125254;
            } else {
                defunc_0_f_res_125250 = 0.0F;
            }
            ((float *) mem_120602)[i_125240] = defunc_0_f_res_125250;
            ((float *) mem_120605)[i_125240] = defunc_0_f_res_125245;
        }
        memmove(mem_120633.mem + gtid_117080 * n_112804 * (int64_t) 4,
                mem_120605 + (int64_t) 0, n_112804 * (int64_t) 4);
        memmove(mem_120637.mem + gtid_117080 * n_112804 * (int64_t) 4,
                mem_120602 + (int64_t) 0, n_112804 * (int64_t) 4);
        memmove(mem_120641.mem + gtid_117080 * n_112804 * (int64_t) 4,
                mem_120575 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120572);
    free(mem_120575);
    free(mem_120602);
    free(mem_120605);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128754_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128754_end -
                 futhark_mc_segmap_parloop_128754_start;
        
        ctx->futhark_mc_segmap_parloop_128754_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128754_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128754_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128752(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117079 = tid;
    int num_tasks_125227 = info.nsubtasks;
    struct futhark_mc_task_128751 *futhark_mc_task_128751 =
                                  (struct futhark_mc_task_128751 *) args;
    struct futhark_context *ctx = futhark_mc_task_128751->ctx;
    uint64_t futhark_mc_segmap_task_128752_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128752_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128751->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128751->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128751->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128751->free_C_len_112852;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128751->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128751->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128751->free_bytes_119697;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128751->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128751->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128751->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128751->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128751->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_task_128751->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 = futhark_mc_task_128751->free_ext_120557;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128751->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128751->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120641 = {.desc ="mem_120641", .mem =
                                  futhark_mc_task_128751->free_mem_120641,
                                  .size =0, .references =NULL};
    int64_t iter_125228;
    struct futhark_mc_segmap_parloop_struct_128753
    futhark_mc_segmap_parloop_struct_128753;
    
    futhark_mc_segmap_parloop_struct_128753.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128753.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128753.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128753.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128753.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128753.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128753.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128753.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128753.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128753.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128753.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128753.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128753.free_mem_120006 = mem_120006.mem;
    futhark_mc_segmap_parloop_struct_128753.free_ext_mem_120556 =
        ext_mem_120556.mem;
    futhark_mc_segmap_parloop_struct_128753.free_ext_120557 = ext_120557;
    futhark_mc_segmap_parloop_struct_128753.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128753.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128753.free_mem_120641 = mem_120641.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128754_task;
    
    futhark_mc_segmap_parloop_128754_task.name =
        "futhark_mc_segmap_parloop_128754";
    futhark_mc_segmap_parloop_128754_task.fn = futhark_mc_segmap_parloop_128754;
    futhark_mc_segmap_parloop_128754_task.args =
        &futhark_mc_segmap_parloop_struct_128753;
    futhark_mc_segmap_parloop_128754_task.iterations = iterations;
    futhark_mc_segmap_parloop_128754_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128754_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128754_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128754_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128754_task);
    
    if (futhark_mc_segmap_parloop_128754_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128754_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128754_total_end -
                 futhark_mc_segmap_parloop_128754_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128754_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128754_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128754_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128752_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128752_end -
                 futhark_mc_segmap_task_128752_start;
        
        ctx->futhark_mc_segmap_task_128752_runs[tid]++;
        ctx->futhark_mc_segmap_task_128752_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128752_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128760 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    char *free_Y_mem_119653;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120006;
    char *free_ext_mem_120556;
    int64_t free_ext_120557;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120641;
};
struct futhark_mc_task_128766 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    int64_t free_gtid_117082;
    char *free_Y_mem_119653;
    char *free_mem_120006;
    char *free_ext_mem_120556;
    int64_t free_ext_120557;
    char *free_mem_120560;
    char *free_mem_120563;
};
struct futhark_mc_segmap_parloop_struct_128768 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_n_p_112806;
    int64_t free_C_len_112852;
    int64_t free_gtid_117082;
    char *free_Y_mem_119653;
    char *free_mem_120006;
    char *free_ext_mem_120556;
    int64_t free_ext_120557;
    char *free_mem_120560;
    char *free_mem_120563;
};
static int futhark_mc_segmap_parloop_128769(void *args, int64_t start,
                                            int64_t end, int flat_tid_117083,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128768
    *futhark_mc_segmap_parloop_struct_128768 =
    (struct futhark_mc_segmap_parloop_struct_128768 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128768->ctx;
    uint64_t futhark_mc_segmap_parloop_128769_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128769_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128768->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128768->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128768->free_C_len_112852;
    int64_t gtid_117082 =
            futhark_mc_segmap_parloop_struct_128768->free_gtid_117082;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128768->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128768->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_segmap_parloop_struct_128768->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 =
            futhark_mc_segmap_parloop_struct_128768->free_ext_120557;
    struct memblock mem_120560 = {.desc ="mem_120560", .mem =
                                  futhark_mc_segmap_parloop_struct_128768->free_mem_120560,
                                  .size =0, .references =NULL};
    struct memblock mem_120563 = {.desc ="mem_120563", .mem =
                                  futhark_mc_segmap_parloop_struct_128768->free_mem_120563,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125285 = start;
    
    for (; iter_125285 < end; iter_125285++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125286 = n_112804;
        int64_t gtid_117084 = iter_125285;
        int64_t remnant_125287 = iter_125285 - gtid_117084;
        int64_t slice_125264 = n_p_112806 + gtid_117084;
        float x_125265 = ((float *) mem_120006.mem)[gtid_117082 * C_len_112852 +
                                                    slice_125264];
        float x_125266 = ((float *) ext_mem_120556.mem)[gtid_117082 *
                                                        ext_120557 +
                                                        gtid_117084];
        float x_125267 = ((float *) Y_mem_119653.mem)[gtid_117082 * n_112804 +
                                                      gtid_117084];
        float defunc_1_f_res_125268 = x_125265 - x_125266;
        float defunc_1_f_res_125269 = x_125267 - defunc_1_f_res_125268;
        
        ((float *) mem_120560.mem)[gtid_117084] = defunc_1_f_res_125269;
        ((float *) mem_120563.mem)[gtid_117084] = defunc_1_f_res_125268;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128769_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128769_end -
                 futhark_mc_segmap_parloop_128769_start;
        
        ctx->futhark_mc_segmap_parloop_128769_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128769_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128769_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128767(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117083 = tid;
    int num_tasks_125284 = info.nsubtasks;
    struct futhark_mc_task_128766 *futhark_mc_task_128766 =
                                  (struct futhark_mc_task_128766 *) args;
    struct futhark_context *ctx = futhark_mc_task_128766->ctx;
    uint64_t futhark_mc_segmap_task_128767_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128767_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128766->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128766->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128766->free_C_len_112852;
    int64_t gtid_117082 = futhark_mc_task_128766->free_gtid_117082;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128766->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128766->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_task_128766->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 = futhark_mc_task_128766->free_ext_120557;
    struct memblock mem_120560 = {.desc ="mem_120560", .mem =
                                  futhark_mc_task_128766->free_mem_120560,
                                  .size =0, .references =NULL};
    struct memblock mem_120563 = {.desc ="mem_120563", .mem =
                                  futhark_mc_task_128766->free_mem_120563,
                                  .size =0, .references =NULL};
    int64_t iter_125285;
    struct futhark_mc_segmap_parloop_struct_128768
    futhark_mc_segmap_parloop_struct_128768;
    
    futhark_mc_segmap_parloop_struct_128768.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128768.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128768.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128768.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128768.free_gtid_117082 = gtid_117082;
    futhark_mc_segmap_parloop_struct_128768.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128768.free_mem_120006 = mem_120006.mem;
    futhark_mc_segmap_parloop_struct_128768.free_ext_mem_120556 =
        ext_mem_120556.mem;
    futhark_mc_segmap_parloop_struct_128768.free_ext_120557 = ext_120557;
    futhark_mc_segmap_parloop_struct_128768.free_mem_120560 = mem_120560.mem;
    futhark_mc_segmap_parloop_struct_128768.free_mem_120563 = mem_120563.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128769_task;
    
    futhark_mc_segmap_parloop_128769_task.name =
        "futhark_mc_segmap_parloop_128769";
    futhark_mc_segmap_parloop_128769_task.fn = futhark_mc_segmap_parloop_128769;
    futhark_mc_segmap_parloop_128769_task.args =
        &futhark_mc_segmap_parloop_struct_128768;
    futhark_mc_segmap_parloop_128769_task.iterations = iterations;
    futhark_mc_segmap_parloop_128769_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128769_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128769_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128769_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128769_task);
    
    if (futhark_mc_segmap_parloop_128769_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128769_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128769_total_end -
                 futhark_mc_segmap_parloop_128769_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128769_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128769_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128769_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128767_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128767_end -
                 futhark_mc_segmap_task_128767_start;
        
        ctx->futhark_mc_segmap_task_128767_runs[tid]++;
        ctx->futhark_mc_segmap_task_128767_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128767_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128770 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117082;
    char *free_mem_119693;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120560;
    char *free_mem_120566;
    char *free_mem_120569;
};
struct futhark_mc_segmap_parloop_struct_128772 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117082;
    char *free_mem_119693;
    int64_t free_ctx_param_ext_119913;
    int64_t free_ctx_param_ext_119914;
    int64_t free_ctx_param_ext_119916;
    char *free_mem_param_119918;
    char *free_mem_120560;
    char *free_mem_120566;
    char *free_mem_120569;
};
static int futhark_mc_segmap_parloop_128773(void *args, int64_t start,
                                            int64_t end, int flat_tid_117085,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128772
    *futhark_mc_segmap_parloop_struct_128772 =
    (struct futhark_mc_segmap_parloop_struct_128772 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128772->ctx;
    uint64_t futhark_mc_segmap_parloop_128773_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128773_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128772->free_n_112804;
    int64_t gtid_117082 =
            futhark_mc_segmap_parloop_struct_128772->free_gtid_117082;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128772->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128772->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128772->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128772->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128772->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120560 = {.desc ="mem_120560", .mem =
                                  futhark_mc_segmap_parloop_struct_128772->free_mem_120560,
                                  .size =0, .references =NULL};
    struct memblock mem_120566 = {.desc ="mem_120566", .mem =
                                  futhark_mc_segmap_parloop_struct_128772->free_mem_120566,
                                  .size =0, .references =NULL};
    struct memblock mem_120569 = {.desc ="mem_120569", .mem =
                                  futhark_mc_segmap_parloop_struct_128772->free_mem_120569,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125289 = start;
    
    for (; iter_125289 < end; iter_125289++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125298 = n_112804;
        int64_t gtid_117086 = iter_125289;
        int64_t remnant_125299 = iter_125289 - gtid_117086;
        int64_t x_125270 = ((int64_t *) mem_119693.mem)[gtid_117082 * n_112804 +
                                                        gtid_117086];
        bool cond_125271 = sle64((int64_t) 0, x_125270);
        float defunc_0_f_res_125272;
        
        if (cond_125271) {
            bool y_125290 = slt64(x_125270, n_112804);
            bool bounds_check_125291 = cond_125271 && y_125290;
            bool index_certs_125292;
            
            if (!bounds_check_125291) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_125270,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:248:33-53\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125293 =
                  ((float *) mem_120560.mem)[x_125270];
            
            defunc_0_f_res_125272 = defunc_0_f_res_t_res_125293;
        } else {
            defunc_0_f_res_125272 = 0.0F;
        }
        
        float defunc_0_f_res_125277;
        
        if (cond_125271) {
            bool y_125294 = slt64(x_125270, n_112804);
            bool bounds_check_125295 = cond_125271 && y_125294;
            bool index_certs_125296;
            
            if (!bounds_check_125295) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_125270,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:249:33-59\n   #3  /prelude/soacs.fut:75:22-28\n   #4  /prelude/soacs.fut:75:3-45\n   #5  stl.fut:246:13-251:41\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_125297 =
                  ((float *) mem_param_119918.mem)[ctx_param_ext_119913 +
                                                   (gtid_117082 *
                                                    ctx_param_ext_119914 +
                                                    x_125270 *
                                                    ctx_param_ext_119916)];
            
            defunc_0_f_res_125277 = defunc_0_f_res_t_res_125297;
        } else {
            defunc_0_f_res_125277 = 0.0F;
        }
        ((float *) mem_120566.mem)[gtid_117086] = defunc_0_f_res_125277;
        ((float *) mem_120569.mem)[gtid_117086] = defunc_0_f_res_125272;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128773_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128773_end -
                 futhark_mc_segmap_parloop_128773_start;
        
        ctx->futhark_mc_segmap_parloop_128773_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128773_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128773_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128771(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117085 = tid;
    int num_tasks_125288 = info.nsubtasks;
    struct futhark_mc_task_128770 *futhark_mc_task_128770 =
                                  (struct futhark_mc_task_128770 *) args;
    struct futhark_context *ctx = futhark_mc_task_128770->ctx;
    uint64_t futhark_mc_segmap_task_128771_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128771_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128770->free_n_112804;
    int64_t gtid_117082 = futhark_mc_task_128770->free_gtid_117082;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128770->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128770->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128770->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128770->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128770->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120560 = {.desc ="mem_120560", .mem =
                                  futhark_mc_task_128770->free_mem_120560,
                                  .size =0, .references =NULL};
    struct memblock mem_120566 = {.desc ="mem_120566", .mem =
                                  futhark_mc_task_128770->free_mem_120566,
                                  .size =0, .references =NULL};
    struct memblock mem_120569 = {.desc ="mem_120569", .mem =
                                  futhark_mc_task_128770->free_mem_120569,
                                  .size =0, .references =NULL};
    int64_t iter_125289;
    struct futhark_mc_segmap_parloop_struct_128772
    futhark_mc_segmap_parloop_struct_128772;
    
    futhark_mc_segmap_parloop_struct_128772.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128772.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128772.free_gtid_117082 = gtid_117082;
    futhark_mc_segmap_parloop_struct_128772.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128772.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128772.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128772.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128772.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128772.free_mem_120560 = mem_120560.mem;
    futhark_mc_segmap_parloop_struct_128772.free_mem_120566 = mem_120566.mem;
    futhark_mc_segmap_parloop_struct_128772.free_mem_120569 = mem_120569.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128773_task;
    
    futhark_mc_segmap_parloop_128773_task.name =
        "futhark_mc_segmap_parloop_128773";
    futhark_mc_segmap_parloop_128773_task.fn = futhark_mc_segmap_parloop_128773;
    futhark_mc_segmap_parloop_128773_task.args =
        &futhark_mc_segmap_parloop_struct_128772;
    futhark_mc_segmap_parloop_128773_task.iterations = iterations;
    futhark_mc_segmap_parloop_128773_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128773_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128773_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128773_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128773_task);
    
    if (futhark_mc_segmap_parloop_128773_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128773_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128773_total_end -
                 futhark_mc_segmap_parloop_128773_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128773_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128773_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128773_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128771_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128771_end -
                 futhark_mc_segmap_task_128771_start;
        
        ctx->futhark_mc_segmap_task_128771_runs[tid]++;
        ctx->futhark_mc_segmap_task_128771_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128771_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128761(void *args, int64_t start,
                                            int64_t end, int flat_tid_117081,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128760
    *futhark_mc_segmap_parloop_struct_128760 =
    (struct futhark_mc_segmap_parloop_struct_128760 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128760->ctx;
    uint64_t futhark_mc_segmap_parloop_128761_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128761_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128760->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128760->free_n_112804;
    int64_t n_p_112806 =
            futhark_mc_segmap_parloop_struct_128760->free_n_p_112806;
    int64_t C_len_112852 =
            futhark_mc_segmap_parloop_struct_128760->free_C_len_112852;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128760->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_128760->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128760->free_bytes_119697;
    int64_t ctx_param_ext_119913 =
            futhark_mc_segmap_parloop_struct_128760->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_segmap_parloop_struct_128760->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_segmap_parloop_struct_128760->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_segmap_parloop_struct_128760->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_segmap_parloop_struct_128760->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_segmap_parloop_struct_128760->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 =
            futhark_mc_segmap_parloop_struct_128760->free_ext_120557;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128760->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128760->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120641 = {.desc ="mem_120641", .mem =
                                  futhark_mc_segmap_parloop_struct_128760->free_mem_120641,
                                  .size =0, .references =NULL};
    size_t mem_120560_cached_sizze_128762 = 0;
    char *mem_120560 = NULL;
    size_t mem_120563_cached_sizze_128763 = 0;
    char *mem_120563 = NULL;
    size_t mem_120566_cached_sizze_128764 = 0;
    char *mem_120566 = NULL;
    size_t mem_120569_cached_sizze_128765 = 0;
    char *mem_120569 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125263 = start;
    
    if (mem_120560_cached_sizze_128762 < (size_t) bytes_119697) {
        mem_120560 = realloc(mem_120560, bytes_119697);
        mem_120560_cached_sizze_128762 = bytes_119697;
    }
    if (mem_120563_cached_sizze_128763 < (size_t) bytes_119697) {
        mem_120563 = realloc(mem_120563, bytes_119697);
        mem_120563_cached_sizze_128763 = bytes_119697;
    }
    if (mem_120566_cached_sizze_128764 < (size_t) bytes_119697) {
        mem_120566 = realloc(mem_120566, bytes_119697);
        mem_120566_cached_sizze_128764 = bytes_119697;
    }
    if (mem_120569_cached_sizze_128765 < (size_t) bytes_119697) {
        mem_120569 = realloc(mem_120569, bytes_119697);
        mem_120569_cached_sizze_128765 = bytes_119697;
    }
    for (; iter_125263 < end; iter_125263++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125282 = m_112803;
        int64_t gtid_117082 = iter_125263;
        int64_t remnant_125283 = iter_125263 - gtid_117082;
        int64_t flat_tid_117083 = (int64_t) 0;
        int32_t num_tasks_125284;
        struct futhark_mc_task_128766 futhark_mc_task_128766;
        
        futhark_mc_task_128766.ctx = ctx;
        futhark_mc_task_128766.free_n_112804 = n_112804;
        futhark_mc_task_128766.free_n_p_112806 = n_p_112806;
        futhark_mc_task_128766.free_C_len_112852 = C_len_112852;
        futhark_mc_task_128766.free_gtid_117082 = gtid_117082;
        futhark_mc_task_128766.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_128766.free_mem_120006 = mem_120006.mem;
        futhark_mc_task_128766.free_ext_mem_120556 = ext_mem_120556.mem;
        futhark_mc_task_128766.free_ext_120557 = ext_120557;
        futhark_mc_task_128766.free_mem_120560 = mem_120560;
        futhark_mc_task_128766.free_mem_120563 = mem_120563;
        
        struct scheduler_segop futhark_mc_task_128766_task;
        
        futhark_mc_task_128766_task.args = &futhark_mc_task_128766;
        futhark_mc_task_128766_task.top_level_fn =
            futhark_mc_segmap_task_128767;
        futhark_mc_task_128766_task.name = "futhark_mc_segmap_task_128767";
        futhark_mc_task_128766_task.iterations = n_112804;
        futhark_mc_task_128766_task.task_time =
            &ctx->futhark_mc_segmap_task_128767_total_time;
        futhark_mc_task_128766_task.task_iter =
            &ctx->futhark_mc_segmap_task_128767_total_iter;
        futhark_mc_task_128766_task.sched = STATIC;
        futhark_mc_task_128766_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128767_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128766_task);
        
        if (futhark_mc_segmap_task_128767_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        int64_t flat_tid_117085 = (int64_t) 0;
        int32_t num_tasks_125288;
        struct futhark_mc_task_128770 futhark_mc_task_128770;
        
        futhark_mc_task_128770.ctx = ctx;
        futhark_mc_task_128770.free_n_112804 = n_112804;
        futhark_mc_task_128770.free_gtid_117082 = gtid_117082;
        futhark_mc_task_128770.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_128770.free_ctx_param_ext_119913 = ctx_param_ext_119913;
        futhark_mc_task_128770.free_ctx_param_ext_119914 = ctx_param_ext_119914;
        futhark_mc_task_128770.free_ctx_param_ext_119916 = ctx_param_ext_119916;
        futhark_mc_task_128770.free_mem_param_119918 = mem_param_119918.mem;
        futhark_mc_task_128770.free_mem_120560 = mem_120560;
        futhark_mc_task_128770.free_mem_120566 = mem_120566;
        futhark_mc_task_128770.free_mem_120569 = mem_120569;
        
        struct scheduler_segop futhark_mc_task_128770_task;
        
        futhark_mc_task_128770_task.args = &futhark_mc_task_128770;
        futhark_mc_task_128770_task.top_level_fn =
            futhark_mc_segmap_task_128771;
        futhark_mc_task_128770_task.name = "futhark_mc_segmap_task_128771";
        futhark_mc_task_128770_task.iterations = n_112804;
        futhark_mc_task_128770_task.task_time =
            &ctx->futhark_mc_segmap_task_128771_total_time;
        futhark_mc_task_128770_task.task_iter =
            &ctx->futhark_mc_segmap_task_128771_total_iter;
        futhark_mc_task_128770_task.sched = STATIC;
        futhark_mc_task_128770_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128771_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128770_task);
        
        if (futhark_mc_segmap_task_128771_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120633.mem + gtid_117082 * n_112804 * (int64_t) 4,
                mem_120569 + (int64_t) 0, n_112804 * (int64_t) 4);
        memmove(mem_120637.mem + gtid_117082 * n_112804 * (int64_t) 4,
                mem_120566 + (int64_t) 0, n_112804 * (int64_t) 4);
        memmove(mem_120641.mem + gtid_117082 * n_112804 * (int64_t) 4,
                mem_120563 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120560);
    free(mem_120563);
    free(mem_120566);
    free(mem_120569);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128761_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128761_end -
                 futhark_mc_segmap_parloop_128761_start;
        
        ctx->futhark_mc_segmap_parloop_128761_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128761_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128761_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128759(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117081 = tid;
    int num_tasks_125227 = info.nsubtasks;
    struct futhark_mc_task_128751 *futhark_mc_task_128751 =
                                  (struct futhark_mc_task_128751 *) args;
    struct futhark_context *ctx = futhark_mc_task_128751->ctx;
    uint64_t futhark_mc_segmap_nested_task_128759_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128759_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128751->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128751->free_n_112804;
    int64_t n_p_112806 = futhark_mc_task_128751->free_n_p_112806;
    int64_t C_len_112852 = futhark_mc_task_128751->free_C_len_112852;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128751->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_128751->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128751->free_bytes_119697;
    int64_t ctx_param_ext_119913 =
            futhark_mc_task_128751->free_ctx_param_ext_119913;
    int64_t ctx_param_ext_119914 =
            futhark_mc_task_128751->free_ctx_param_ext_119914;
    int64_t ctx_param_ext_119916 =
            futhark_mc_task_128751->free_ctx_param_ext_119916;
    struct memblock mem_param_119918 = {.desc ="mem_param_119918", .mem =
                                        futhark_mc_task_128751->free_mem_param_119918,
                                        .size =0, .references =NULL};
    struct memblock mem_120006 = {.desc ="mem_120006", .mem =
                                  futhark_mc_task_128751->free_mem_120006,
                                  .size =0, .references =NULL};
    struct memblock ext_mem_120556 = {.desc ="ext_mem_120556", .mem =
                                      futhark_mc_task_128751->free_ext_mem_120556,
                                      .size =0, .references =NULL};
    int64_t ext_120557 = futhark_mc_task_128751->free_ext_120557;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128751->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128751->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120641 = {.desc ="mem_120641", .mem =
                                  futhark_mc_task_128751->free_mem_120641,
                                  .size =0, .references =NULL};
    int64_t iter_125263;
    struct futhark_mc_segmap_parloop_struct_128760
    futhark_mc_segmap_parloop_struct_128760;
    
    futhark_mc_segmap_parloop_struct_128760.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128760.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128760.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128760.free_n_p_112806 = n_p_112806;
    futhark_mc_segmap_parloop_struct_128760.free_C_len_112852 = C_len_112852;
    futhark_mc_segmap_parloop_struct_128760.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128760.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_128760.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128760.free_ctx_param_ext_119913 =
        ctx_param_ext_119913;
    futhark_mc_segmap_parloop_struct_128760.free_ctx_param_ext_119914 =
        ctx_param_ext_119914;
    futhark_mc_segmap_parloop_struct_128760.free_ctx_param_ext_119916 =
        ctx_param_ext_119916;
    futhark_mc_segmap_parloop_struct_128760.free_mem_param_119918 =
        mem_param_119918.mem;
    futhark_mc_segmap_parloop_struct_128760.free_mem_120006 = mem_120006.mem;
    futhark_mc_segmap_parloop_struct_128760.free_ext_mem_120556 =
        ext_mem_120556.mem;
    futhark_mc_segmap_parloop_struct_128760.free_ext_120557 = ext_120557;
    futhark_mc_segmap_parloop_struct_128760.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128760.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128760.free_mem_120641 = mem_120641.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128761_task;
    
    futhark_mc_segmap_parloop_128761_task.name =
        "futhark_mc_segmap_parloop_128761";
    futhark_mc_segmap_parloop_128761_task.fn = futhark_mc_segmap_parloop_128761;
    futhark_mc_segmap_parloop_128761_task.args =
        &futhark_mc_segmap_parloop_struct_128760;
    futhark_mc_segmap_parloop_128761_task.iterations = iterations;
    futhark_mc_segmap_parloop_128761_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128761_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128761_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128761_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128761_task);
    
    if (futhark_mc_segmap_parloop_128761_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128761_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128761_total_end -
                 futhark_mc_segmap_parloop_128761_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128761_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128761_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128761_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128759_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128759_end -
                 futhark_mc_segmap_nested_task_128759_start;
        
        ctx->futhark_mc_segmap_nested_task_128759_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128759_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128759_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128774 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120667;
};
struct futhark_mc_segmap_parloop_struct_128776 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120667;
};
static int futhark_mc_segmap_parloop_128777(void *args, int64_t start,
                                            int64_t end, int flat_tid_117113,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128776
    *futhark_mc_segmap_parloop_struct_128776 =
    (struct futhark_mc_segmap_parloop_struct_128776 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128776->ctx;
    uint64_t futhark_mc_segmap_parloop_128777_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128777_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128776->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128776->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128776->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128776->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128776->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128776->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128776->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120667 = {.desc ="mem_120667", .mem =
                                  futhark_mc_segmap_parloop_struct_128776->free_mem_120667,
                                  .size =0, .references =NULL};
    size_t mem_120651_cached_sizze_128778 = 0;
    char *mem_120651 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125303 = start;
    
    if (mem_120651_cached_sizze_128778 < (size_t) bytes_119828) {
        mem_120651 = realloc(mem_120651, bytes_119828);
        mem_120651_cached_sizze_128778 = bytes_119828;
    }
    for (; iter_125303 < end; iter_125303++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125360 = m_112803;
        int64_t gtid_117114 = iter_125303;
        int64_t remnant_125361 = iter_125303 - gtid_117114;
        int64_t x_114108 = ((int64_t *) mem_119696.mem)[gtid_117114];
        
        for (int64_t i_125304 = 0; i_125304 < t_n_m_112861; i_125304++) {
            int64_t x_125306 = ((int64_t *) mem_119882.mem)[gtid_117114 *
                                                            t_n_m_112861 +
                                                            i_125304];
            float x_125307 = ((float *) mem_119886.mem)[gtid_117114 *
                                                        t_n_m_112861 +
                                                        i_125304];
            int64_t min_arg_125308 = mul64(t_jump_112811, i_125304);
            int64_t min_res_125309 = smin64(i_112880, min_arg_125308);
            float defunc_0_f_res_125310 = sitofp_i64_f32(min_res_125309);
            float defunc_2_reduce_res_125311;
            float redout_125313 = 0.0F;
            
            for (int64_t i_125312 = 0; i_125312 < t_window_112807; i_125312++) {
                bool cond_125314 = sle64(x_114108, i_125312);
                float defunc_0_f_res_125315;
                
                if (cond_125314) {
                    defunc_0_f_res_125315 = 0.0F;
                } else {
                    int64_t i_125316 = add64(x_125306, i_125312);
                    float x_125317 = ((float *) mem_119718.mem)[gtid_117114 *
                                                                n_112804 +
                                                                i_125316];
                    float defunc_0_f_res_f_res_125318 = 1.0F + x_125317;
                    
                    defunc_0_f_res_125315 = defunc_0_f_res_f_res_125318;
                }
                
                float defunc_0_f_res_125319;
                
                if (cond_125314) {
                    defunc_0_f_res_125319 = 0.0F;
                } else {
                    int64_t i_125320 = add64(x_125306, i_125312);
                    float x_125321 = ((float *) mem_120637.mem)[gtid_117114 *
                                                                n_112804 +
                                                                i_125320];
                    
                    defunc_0_f_res_125319 = x_125321;
                }
                
                float x_j_125322 = defunc_0_f_res_125315 -
                      defunc_0_f_res_125310;
                float abs_res_125323 = (float) fabs(x_j_125322);
                float tmp1_125324 = abs_res_125323 / x_125307;
                float x_125325 = tmp1_125324 * tmp1_125324;
                float y_125326 = tmp1_125324 * x_125325;
                float tmp2_125327 = 1.0F - y_125326;
                float x_125328 = tmp2_125327 * tmp2_125327;
                float tmp3_125329 = tmp2_125327 * x_125328;
                float w_j_125330 = defunc_0_f_res_125319 * tmp3_125329;
                float defunc_1_op_res_125331 = w_j_125330 + redout_125313;
                float redout_tmp_125363 = defunc_1_op_res_125331;
                
                redout_125313 = redout_tmp_125363;
            }
            defunc_2_reduce_res_125311 = redout_125313;
            
            float a0_125332 = 1.0F / defunc_2_reduce_res_125311;
            float defunc_2_reduce_res_125333;
            float redout_125335 = 0.0F;
            
            for (int64_t i_125334 = 0; i_125334 < t_window_112807; i_125334++) {
                bool cond_125336 = sle64(x_114108, i_125334);
                float defunc_0_f_res_125337;
                
                if (cond_125336) {
                    defunc_0_f_res_125337 = 0.0F;
                } else {
                    int64_t i_125338 = add64(x_125306, i_125334);
                    float x_125339 = ((float *) mem_119718.mem)[gtid_117114 *
                                                                n_112804 +
                                                                i_125338];
                    float defunc_0_f_res_f_res_125340 = 1.0F + x_125339;
                    
                    defunc_0_f_res_125337 = defunc_0_f_res_f_res_125340;
                }
                
                float defunc_0_f_res_125341;
                
                if (cond_125336) {
                    defunc_0_f_res_125341 = 0.0F;
                } else {
                    int64_t i_125342 = add64(x_125306, i_125334);
                    float x_125343 = ((float *) mem_120637.mem)[gtid_117114 *
                                                                n_112804 +
                                                                i_125342];
                    
                    defunc_0_f_res_125341 = x_125343;
                }
                
                float x_j_125344 = defunc_0_f_res_125337 -
                      defunc_0_f_res_125310;
                float abs_res_125345 = (float) fabs(x_j_125344);
                float tmp1_125346 = abs_res_125345 / x_125307;
                float x_125347 = tmp1_125346 * tmp1_125346;
                float y_125348 = tmp1_125346 * x_125347;
                float tmp2_125349 = 1.0F - y_125348;
                float x_125350 = tmp2_125349 * tmp2_125349;
                float tmp3_125351 = tmp2_125349 * x_125350;
                float tmp4_125352 = defunc_0_f_res_125341 * tmp3_125351;
                float defunc_0_f_res_125353;
                
                if (cond_125336) {
                    defunc_0_f_res_125353 = 0.0F;
                } else {
                    int64_t i_125354 = add64(x_125306, i_125334);
                    float x_125355 = ((float *) mem_120633.mem)[gtid_117114 *
                                                                n_112804 +
                                                                i_125354];
                    
                    defunc_0_f_res_125353 = x_125355;
                }
                
                float x_125356 = a0_125332 * tmp4_125352;
                float defunc_9_fit_fun_res_125357 = defunc_0_f_res_125353 *
                      x_125356;
                float defunc_1_op_res_125358 = defunc_9_fit_fun_res_125357 +
                      redout_125335;
                float redout_tmp_125364 = defunc_1_op_res_125358;
                
                redout_125335 = redout_tmp_125364;
            }
            defunc_2_reduce_res_125333 = redout_125335;
            ((float *) mem_120651)[i_125304] = defunc_2_reduce_res_125333;
        }
        memmove(mem_120667.mem + gtid_117114 * t_n_m_112861 * (int64_t) 4,
                mem_120651 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120651);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128777_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128777_end -
                 futhark_mc_segmap_parloop_128777_start;
        
        ctx->futhark_mc_segmap_parloop_128777_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128777_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128777_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128775(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117113 = tid;
    int num_tasks_125302 = info.nsubtasks;
    struct futhark_mc_task_128774 *futhark_mc_task_128774 =
                                  (struct futhark_mc_task_128774 *) args;
    struct futhark_context *ctx = futhark_mc_task_128774->ctx;
    uint64_t futhark_mc_segmap_task_128775_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128775_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128774->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128774->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128774->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128774->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128774->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128774->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128774->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128774->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128774->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128774->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128774->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128774->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128774->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120667 = {.desc ="mem_120667", .mem =
                                  futhark_mc_task_128774->free_mem_120667,
                                  .size =0, .references =NULL};
    int64_t iter_125303;
    struct futhark_mc_segmap_parloop_struct_128776
    futhark_mc_segmap_parloop_struct_128776;
    
    futhark_mc_segmap_parloop_struct_128776.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128776.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128776.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128776.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128776.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128776.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128776.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128776.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128776.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128776.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128776.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128776.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128776.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128776.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128776.free_mem_120667 = mem_120667.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128777_task;
    
    futhark_mc_segmap_parloop_128777_task.name =
        "futhark_mc_segmap_parloop_128777";
    futhark_mc_segmap_parloop_128777_task.fn = futhark_mc_segmap_parloop_128777;
    futhark_mc_segmap_parloop_128777_task.args =
        &futhark_mc_segmap_parloop_struct_128776;
    futhark_mc_segmap_parloop_128777_task.iterations = iterations;
    futhark_mc_segmap_parloop_128777_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128777_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128777_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128777_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128777_task);
    
    if (futhark_mc_segmap_parloop_128777_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128777_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128777_total_end -
                 futhark_mc_segmap_parloop_128777_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128777_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128777_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128777_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128775_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128775_end -
                 futhark_mc_segmap_task_128775_start;
        
        ctx->futhark_mc_segmap_task_128775_runs[tid]++;
        ctx->futhark_mc_segmap_task_128775_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128775_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128780 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120667;
};
struct futhark_mc_task_128783 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120648;
};
struct futhark_mc_segmap_parloop_struct_128785 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120648;
};
static int futhark_mc_segmap_parloop_128786(void *args, int64_t start,
                                            int64_t end, int flat_tid_117117,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128785
    *futhark_mc_segmap_parloop_struct_128785 =
    (struct futhark_mc_segmap_parloop_struct_128785 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128785->ctx;
    uint64_t futhark_mc_segmap_parloop_128786_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128786_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128785->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128785->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128785->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128785->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128785->free_i_112880;
    int64_t gtid_117116 =
            futhark_mc_segmap_parloop_struct_128785->free_gtid_117116;
    int64_t x_117186 = futhark_mc_segmap_parloop_struct_128785->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_segmap_parloop_struct_128785->free_mem_120648,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125475 = start;
    
    for (; iter_125475 < end; iter_125475++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125521 = t_n_m_112861;
        int64_t gtid_117118 = iter_125475;
        int64_t remnant_125522 = iter_125475 - gtid_117118;
        int64_t x_125419 = ((int64_t *) mem_119882.mem)[gtid_117116 *
                                                        t_n_m_112861 +
                                                        gtid_117118];
        float x_125420 = ((float *) mem_119886.mem)[gtid_117116 * t_n_m_112861 +
                                                    gtid_117118];
        int64_t min_arg_125421 = mul64(t_jump_112811, gtid_117118);
        int64_t min_res_125422 = smin64(i_112880, min_arg_125421);
        float defunc_0_f_res_125423 = sitofp_i64_f32(min_res_125422);
        float defunc_2_reduce_res_125424;
        float redout_125477 = 0.0F;
        
        for (int64_t i_125476 = 0; i_125476 < t_window_112807; i_125476++) {
            bool cond_125478 = sle64(x_117186, i_125476);
            float defunc_0_f_res_125479;
            
            if (cond_125478) {
                defunc_0_f_res_125479 = 0.0F;
            } else {
                int64_t i_125480 = add64(x_125419, i_125476);
                float x_125481 = ((float *) mem_119718.mem)[gtid_117116 *
                                                            n_112804 +
                                                            i_125480];
                float defunc_0_f_res_f_res_125482 = 1.0F + x_125481;
                
                defunc_0_f_res_125479 = defunc_0_f_res_f_res_125482;
            }
            
            float defunc_0_f_res_125483;
            
            if (cond_125478) {
                defunc_0_f_res_125483 = 0.0F;
            } else {
                int64_t i_125484 = add64(x_125419, i_125476);
                float x_125485 = ((float *) mem_120637.mem)[gtid_117116 *
                                                            n_112804 +
                                                            i_125484];
                
                defunc_0_f_res_125483 = x_125485;
            }
            
            float x_j_125486 = defunc_0_f_res_125479 - defunc_0_f_res_125423;
            float abs_res_125487 = (float) fabs(x_j_125486);
            float tmp1_125488 = abs_res_125487 / x_125420;
            float x_125489 = tmp1_125488 * tmp1_125488;
            float y_125490 = tmp1_125488 * x_125489;
            float tmp2_125491 = 1.0F - y_125490;
            float x_125492 = tmp2_125491 * tmp2_125491;
            float tmp3_125493 = tmp2_125491 * x_125492;
            float w_j_125494 = defunc_0_f_res_125483 * tmp3_125493;
            float defunc_1_op_res_125495 = w_j_125494 + redout_125477;
            float redout_tmp_125523 = defunc_1_op_res_125495;
            
            redout_125477 = redout_tmp_125523;
        }
        defunc_2_reduce_res_125424 = redout_125477;
        
        float a0_125445 = 1.0F / defunc_2_reduce_res_125424;
        float defunc_2_reduce_res_125446;
        float redout_125497 = 0.0F;
        
        for (int64_t i_125496 = 0; i_125496 < t_window_112807; i_125496++) {
            bool cond_125498 = sle64(x_117186, i_125496);
            float defunc_0_f_res_125499;
            
            if (cond_125498) {
                defunc_0_f_res_125499 = 0.0F;
            } else {
                int64_t i_125500 = add64(x_125419, i_125496);
                float x_125501 = ((float *) mem_119718.mem)[gtid_117116 *
                                                            n_112804 +
                                                            i_125500];
                float defunc_0_f_res_f_res_125502 = 1.0F + x_125501;
                
                defunc_0_f_res_125499 = defunc_0_f_res_f_res_125502;
            }
            
            float defunc_0_f_res_125503;
            
            if (cond_125498) {
                defunc_0_f_res_125503 = 0.0F;
            } else {
                int64_t i_125504 = add64(x_125419, i_125496);
                float x_125505 = ((float *) mem_120637.mem)[gtid_117116 *
                                                            n_112804 +
                                                            i_125504];
                
                defunc_0_f_res_125503 = x_125505;
            }
            
            float x_j_125506 = defunc_0_f_res_125499 - defunc_0_f_res_125423;
            float abs_res_125507 = (float) fabs(x_j_125506);
            float tmp1_125508 = abs_res_125507 / x_125420;
            float x_125509 = tmp1_125508 * tmp1_125508;
            float y_125510 = tmp1_125508 * x_125509;
            float tmp2_125511 = 1.0F - y_125510;
            float x_125512 = tmp2_125511 * tmp2_125511;
            float tmp3_125513 = tmp2_125511 * x_125512;
            float tmp4_125514 = defunc_0_f_res_125503 * tmp3_125513;
            float defunc_0_f_res_125515;
            
            if (cond_125498) {
                defunc_0_f_res_125515 = 0.0F;
            } else {
                int64_t i_125516 = add64(x_125419, i_125496);
                float x_125517 = ((float *) mem_120633.mem)[gtid_117116 *
                                                            n_112804 +
                                                            i_125516];
                
                defunc_0_f_res_125515 = x_125517;
            }
            
            float x_125518 = a0_125445 * tmp4_125514;
            float defunc_9_fit_fun_res_125519 = defunc_0_f_res_125515 *
                  x_125518;
            float defunc_1_op_res_125520 = defunc_9_fit_fun_res_125519 +
                  redout_125497;
            float redout_tmp_125524 = defunc_1_op_res_125520;
            
            redout_125497 = redout_tmp_125524;
        }
        defunc_2_reduce_res_125446 = redout_125497;
        ((float *) mem_120648.mem)[gtid_117118] = defunc_2_reduce_res_125446;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128786_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128786_end -
                 futhark_mc_segmap_parloop_128786_start;
        
        ctx->futhark_mc_segmap_parloop_128786_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128786_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128786_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128784(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117117 = tid;
    int num_tasks_125474 = info.nsubtasks;
    struct futhark_mc_task_128783 *futhark_mc_task_128783 =
                                  (struct futhark_mc_task_128783 *) args;
    struct futhark_context *ctx = futhark_mc_task_128783->ctx;
    uint64_t futhark_mc_segmap_task_128784_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128784_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128783->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128783->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128783->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128783->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128783->free_i_112880;
    int64_t gtid_117116 = futhark_mc_task_128783->free_gtid_117116;
    int64_t x_117186 = futhark_mc_task_128783->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128783->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128783->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128783->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128783->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128783->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_task_128783->free_mem_120648,
                                  .size =0, .references =NULL};
    int64_t iter_125475;
    struct futhark_mc_segmap_parloop_struct_128785
    futhark_mc_segmap_parloop_struct_128785;
    
    futhark_mc_segmap_parloop_struct_128785.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128785.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128785.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128785.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128785.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128785.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128785.free_gtid_117116 = gtid_117116;
    futhark_mc_segmap_parloop_struct_128785.free_x_117186 = x_117186;
    futhark_mc_segmap_parloop_struct_128785.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128785.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128785.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128785.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128785.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128785.free_mem_120648 = mem_120648.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128786_task;
    
    futhark_mc_segmap_parloop_128786_task.name =
        "futhark_mc_segmap_parloop_128786";
    futhark_mc_segmap_parloop_128786_task.fn = futhark_mc_segmap_parloop_128786;
    futhark_mc_segmap_parloop_128786_task.args =
        &futhark_mc_segmap_parloop_struct_128785;
    futhark_mc_segmap_parloop_128786_task.iterations = iterations;
    futhark_mc_segmap_parloop_128786_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128786_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128786_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128786_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128786_task);
    
    if (futhark_mc_segmap_parloop_128786_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128786_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128786_total_end -
                 futhark_mc_segmap_parloop_128786_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128786_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128786_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128786_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128784_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128784_end -
                 futhark_mc_segmap_task_128784_start;
        
        ctx->futhark_mc_segmap_task_128784_runs[tid]++;
        ctx->futhark_mc_segmap_task_128784_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128784_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128788 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120648;
};
struct futhark_mc_task_128790 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_125366;
    float free_x_125367;
    float free_defunc_0_f_res_125370;
    float *retval_defunc_2_reduce_res_125371;
};
struct futhark_mc_segred_stage_1_parloop_struct_128793 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_125366;
    float free_x_125367;
    float free_defunc_0_f_res_125370;
    char *free_reduce_stage_1_tid_res_arr_mem_125574;
};
static int futhark_mc_segred_stage_1_parloop_128794(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117121,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128793
    *futhark_mc_segred_stage_1_parloop_struct_128793 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128793 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128793->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128794_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128794_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128793->free_n_112804;
    int64_t gtid_117116 =
            futhark_mc_segred_stage_1_parloop_struct_128793->free_gtid_117116;
    int64_t x_117186 =
            futhark_mc_segred_stage_1_parloop_struct_128793->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128793->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128793->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125366 =
            futhark_mc_segred_stage_1_parloop_struct_128793->free_x_125366;
    float x_125367 =
          futhark_mc_segred_stage_1_parloop_struct_128793->free_x_125367;
    float defunc_0_f_res_125370 =
          futhark_mc_segred_stage_1_parloop_struct_128793->free_defunc_0_f_res_125370;
    struct memblock reduce_stage_1_tid_res_arr_mem_125574 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125574",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128793->free_reduce_stage_1_tid_res_arr_mem_125574,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125576 = start;
    float x_125526;
    float x_125527;
    float local_acc_125577 = 0.0F;
    
    for (; iter_125576 < end; iter_125576++) {
        int64_t gtid_117122 = iter_125576;
        bool cond_125529 = sle64(x_117186, gtid_117122);
        float defunc_0_f_res_125530;
        
        if (cond_125529) {
            defunc_0_f_res_125530 = 0.0F;
        } else {
            int64_t i_125531 = add64(gtid_117122, x_125366);
            float x_125532 = ((float *) mem_119718.mem)[gtid_117116 * n_112804 +
                                                        i_125531];
            float defunc_0_f_res_f_res_125533 = 1.0F + x_125532;
            
            defunc_0_f_res_125530 = defunc_0_f_res_f_res_125533;
        }
        
        float defunc_0_f_res_125534;
        
        if (cond_125529) {
            defunc_0_f_res_125534 = 0.0F;
        } else {
            int64_t i_125535 = add64(gtid_117122, x_125366);
            float x_125536 = ((float *) mem_120637.mem)[gtid_117116 * n_112804 +
                                                        i_125535];
            
            defunc_0_f_res_125534 = x_125536;
        }
        
        float x_j_125537 = defunc_0_f_res_125530 - defunc_0_f_res_125370;
        float abs_res_125538 = (float) fabs(x_j_125537);
        float tmp1_125539 = abs_res_125538 / x_125367;
        float x_125540 = tmp1_125539 * tmp1_125539;
        float y_125541 = tmp1_125539 * x_125540;
        float tmp2_125542 = 1.0F - y_125541;
        float x_125543 = tmp2_125542 * tmp2_125542;
        float tmp3_125544 = tmp2_125542 * x_125543;
        float w_j_125545 = defunc_0_f_res_125534 * tmp3_125544;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125526 = local_acc_125577;
        }
        // Load next params
        {
            x_125527 = w_j_125545;
        }
        // Red body
        {
            float defunc_1_op_res_125528 = x_125526 + x_125527;
            
            local_acc_125577 = defunc_1_op_res_125528;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125574.mem)[flat_tid_117121] =
        local_acc_125577;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128794_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128794_end -
                 futhark_mc_segred_stage_1_parloop_128794_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128794_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128794_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128794_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128791(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117121 = tid;
    int num_tasks_125573 = info.nsubtasks;
    struct futhark_mc_task_128790 *futhark_mc_task_128790 =
                                  (struct futhark_mc_task_128790 *) args;
    struct futhark_context *ctx = futhark_mc_task_128790->ctx;
    uint64_t futhark_mc_segred_task_128791_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128791_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128790->free_n_112804;
    int64_t gtid_117116 = futhark_mc_task_128790->free_gtid_117116;
    int64_t x_117186 = futhark_mc_task_128790->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128790->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128790->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125366 = futhark_mc_task_128790->free_x_125366;
    float x_125367 = futhark_mc_task_128790->free_x_125367;
    float defunc_0_f_res_125370 =
          futhark_mc_task_128790->free_defunc_0_f_res_125370;
    float defunc_2_reduce_res_125371 =
          *futhark_mc_task_128790->retval_defunc_2_reduce_res_125371;
    size_t reduce_stage_1_tid_res_arr_mem_125574_cached_sizze_128792 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125574 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125574_cached_sizze_128792 <
        (size_t) ((int64_t) 4 * num_tasks_125573)) {
        reduce_stage_1_tid_res_arr_mem_125574 =
            realloc(reduce_stage_1_tid_res_arr_mem_125574, (int64_t) 4 *
                    num_tasks_125573);
        reduce_stage_1_tid_res_arr_mem_125574_cached_sizze_128792 =
            (int64_t) 4 * num_tasks_125573;
    }
    
    int64_t iter_125576;
    struct futhark_mc_segred_stage_1_parloop_struct_128793
    futhark_mc_segred_stage_1_parloop_struct_128793;
    
    futhark_mc_segred_stage_1_parloop_struct_128793.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_gtid_117116 =
        gtid_117116;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_x_117186 = x_117186;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_x_125366 = x_125366;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_x_125367 = x_125367;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_defunc_0_f_res_125370 =
        defunc_0_f_res_125370;
    futhark_mc_segred_stage_1_parloop_struct_128793.free_reduce_stage_1_tid_res_arr_mem_125574 =
        reduce_stage_1_tid_res_arr_mem_125574;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128794_task;
    
    futhark_mc_segred_stage_1_parloop_128794_task.name =
        "futhark_mc_segred_stage_1_parloop_128794";
    futhark_mc_segred_stage_1_parloop_128794_task.fn =
        futhark_mc_segred_stage_1_parloop_128794;
    futhark_mc_segred_stage_1_parloop_128794_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128793;
    futhark_mc_segred_stage_1_parloop_128794_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128794_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128794_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128794_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128794_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128794_task);
    
    if (futhark_mc_segred_stage_1_parloop_128794_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128794_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128794_total_end -
                 futhark_mc_segred_stage_1_parloop_128794_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128794_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128794_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128794_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125371 = 0.0F;
    }
    
    float x_125578;
    float x_125579;
    
    for (int32_t i_125581 = 0; i_125581 < num_tasks_125573; i_125581++) {
        flat_tid_117121 = i_125581;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125578 = defunc_2_reduce_res_125371;
            }
            // load next params
            {
                x_125579 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125574)[flat_tid_117121];
            }
            // red body
            {
                float defunc_1_op_res_125580 = x_125578 + x_125579;
                
                defunc_2_reduce_res_125371 = defunc_1_op_res_125580;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125574);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128791_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128791_end -
                 futhark_mc_segred_task_128791_start;
        
        ctx->futhark_mc_segred_task_128791_runs[tid]++;
        ctx->futhark_mc_segred_task_128791_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128791_iter[tid] += iterations;
    }
    *futhark_mc_task_128790->retval_defunc_2_reduce_res_125371 =
        defunc_2_reduce_res_125371;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128795 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_125366;
    float free_x_125367;
    float free_defunc_0_f_res_125370;
    float free_a0_125392;
    float *retval_defunc_2_reduce_res_125393;
};
struct futhark_mc_segred_stage_1_parloop_struct_128798 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117116;
    int64_t free_x_117186;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_125366;
    float free_x_125367;
    float free_defunc_0_f_res_125370;
    float free_a0_125392;
    char *free_reduce_stage_1_tid_res_arr_mem_125583;
};
static int futhark_mc_segred_stage_1_parloop_128799(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117123,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128798
    *futhark_mc_segred_stage_1_parloop_struct_128798 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128798 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128798->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128799_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128799_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128798->free_n_112804;
    int64_t gtid_117116 =
            futhark_mc_segred_stage_1_parloop_struct_128798->free_gtid_117116;
    int64_t x_117186 =
            futhark_mc_segred_stage_1_parloop_struct_128798->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128798->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128798->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128798->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125366 =
            futhark_mc_segred_stage_1_parloop_struct_128798->free_x_125366;
    float x_125367 =
          futhark_mc_segred_stage_1_parloop_struct_128798->free_x_125367;
    float defunc_0_f_res_125370 =
          futhark_mc_segred_stage_1_parloop_struct_128798->free_defunc_0_f_res_125370;
    float a0_125392 =
          futhark_mc_segred_stage_1_parloop_struct_128798->free_a0_125392;
    struct memblock reduce_stage_1_tid_res_arr_mem_125583 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125583",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128798->free_reduce_stage_1_tid_res_arr_mem_125583,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125585 = start;
    float x_125546;
    float x_125547;
    float local_acc_125586 = 0.0F;
    
    for (; iter_125585 < end; iter_125585++) {
        int64_t gtid_117124 = iter_125585;
        bool cond_125549 = sle64(x_117186, gtid_117124);
        float defunc_0_f_res_125550;
        
        if (cond_125549) {
            defunc_0_f_res_125550 = 0.0F;
        } else {
            int64_t i_125551 = add64(gtid_117124, x_125366);
            float x_125552 = ((float *) mem_119718.mem)[gtid_117116 * n_112804 +
                                                        i_125551];
            float defunc_0_f_res_f_res_125553 = 1.0F + x_125552;
            
            defunc_0_f_res_125550 = defunc_0_f_res_f_res_125553;
        }
        
        float defunc_0_f_res_125554;
        
        if (cond_125549) {
            defunc_0_f_res_125554 = 0.0F;
        } else {
            int64_t i_125555 = add64(gtid_117124, x_125366);
            float x_125556 = ((float *) mem_120637.mem)[gtid_117116 * n_112804 +
                                                        i_125555];
            
            defunc_0_f_res_125554 = x_125556;
        }
        
        float x_j_125557 = defunc_0_f_res_125550 - defunc_0_f_res_125370;
        float abs_res_125558 = (float) fabs(x_j_125557);
        float tmp1_125559 = abs_res_125558 / x_125367;
        float x_125560 = tmp1_125559 * tmp1_125559;
        float y_125561 = tmp1_125559 * x_125560;
        float tmp2_125562 = 1.0F - y_125561;
        float x_125563 = tmp2_125562 * tmp2_125562;
        float tmp3_125564 = tmp2_125562 * x_125563;
        float tmp4_125565 = defunc_0_f_res_125554 * tmp3_125564;
        float defunc_0_f_res_125566;
        
        if (cond_125549) {
            defunc_0_f_res_125566 = 0.0F;
        } else {
            int64_t i_125567 = add64(gtid_117124, x_125366);
            float x_125568 = ((float *) mem_120633.mem)[gtid_117116 * n_112804 +
                                                        i_125567];
            
            defunc_0_f_res_125566 = x_125568;
        }
        
        float x_125569 = a0_125392 * tmp4_125565;
        float defunc_9_fit_fun_res_125570 = defunc_0_f_res_125566 * x_125569;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125546 = local_acc_125586;
        }
        // Load next params
        {
            x_125547 = defunc_9_fit_fun_res_125570;
        }
        // Red body
        {
            float defunc_1_op_res_125548 = x_125546 + x_125547;
            
            local_acc_125586 = defunc_1_op_res_125548;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125583.mem)[flat_tid_117123] =
        local_acc_125586;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128799_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128799_end -
                 futhark_mc_segred_stage_1_parloop_128799_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128799_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128799_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128799_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128796(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117123 = tid;
    int num_tasks_125582 = info.nsubtasks;
    struct futhark_mc_task_128795 *futhark_mc_task_128795 =
                                  (struct futhark_mc_task_128795 *) args;
    struct futhark_context *ctx = futhark_mc_task_128795->ctx;
    uint64_t futhark_mc_segred_task_128796_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128796_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128795->free_n_112804;
    int64_t gtid_117116 = futhark_mc_task_128795->free_gtid_117116;
    int64_t x_117186 = futhark_mc_task_128795->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128795->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128795->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128795->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125366 = futhark_mc_task_128795->free_x_125366;
    float x_125367 = futhark_mc_task_128795->free_x_125367;
    float defunc_0_f_res_125370 =
          futhark_mc_task_128795->free_defunc_0_f_res_125370;
    float a0_125392 = futhark_mc_task_128795->free_a0_125392;
    float defunc_2_reduce_res_125393 =
          *futhark_mc_task_128795->retval_defunc_2_reduce_res_125393;
    size_t reduce_stage_1_tid_res_arr_mem_125583_cached_sizze_128797 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125583 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125583_cached_sizze_128797 <
        (size_t) ((int64_t) 4 * num_tasks_125582)) {
        reduce_stage_1_tid_res_arr_mem_125583 =
            realloc(reduce_stage_1_tid_res_arr_mem_125583, (int64_t) 4 *
                    num_tasks_125582);
        reduce_stage_1_tid_res_arr_mem_125583_cached_sizze_128797 =
            (int64_t) 4 * num_tasks_125582;
    }
    
    int64_t iter_125585;
    struct futhark_mc_segred_stage_1_parloop_struct_128798
    futhark_mc_segred_stage_1_parloop_struct_128798;
    
    futhark_mc_segred_stage_1_parloop_struct_128798.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_gtid_117116 =
        gtid_117116;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_x_117186 = x_117186;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_x_125366 = x_125366;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_x_125367 = x_125367;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_defunc_0_f_res_125370 =
        defunc_0_f_res_125370;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_a0_125392 = a0_125392;
    futhark_mc_segred_stage_1_parloop_struct_128798.free_reduce_stage_1_tid_res_arr_mem_125583 =
        reduce_stage_1_tid_res_arr_mem_125583;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128799_task;
    
    futhark_mc_segred_stage_1_parloop_128799_task.name =
        "futhark_mc_segred_stage_1_parloop_128799";
    futhark_mc_segred_stage_1_parloop_128799_task.fn =
        futhark_mc_segred_stage_1_parloop_128799;
    futhark_mc_segred_stage_1_parloop_128799_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128798;
    futhark_mc_segred_stage_1_parloop_128799_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128799_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128799_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128799_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128799_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128799_task);
    
    if (futhark_mc_segred_stage_1_parloop_128799_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128799_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128799_total_end -
                 futhark_mc_segred_stage_1_parloop_128799_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128799_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128799_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128799_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125393 = 0.0F;
    }
    
    float x_125587;
    float x_125588;
    
    for (int32_t i_125590 = 0; i_125590 < num_tasks_125582; i_125590++) {
        flat_tid_117123 = i_125590;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125587 = defunc_2_reduce_res_125393;
            }
            // load next params
            {
                x_125588 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125583)[flat_tid_117123];
            }
            // red body
            {
                float defunc_1_op_res_125589 = x_125587 + x_125588;
                
                defunc_2_reduce_res_125393 = defunc_1_op_res_125589;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125583);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128796_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128796_end -
                 futhark_mc_segred_task_128796_start;
        
        ctx->futhark_mc_segred_task_128796_runs[tid]++;
        ctx->futhark_mc_segred_task_128796_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128796_iter[tid] += iterations;
    }
    *futhark_mc_task_128795->retval_defunc_2_reduce_res_125393 =
        defunc_2_reduce_res_125393;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128789(void *args, int64_t start,
                                            int64_t end, int flat_tid_117119,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128788
    *futhark_mc_segmap_parloop_struct_128788 =
    (struct futhark_mc_segmap_parloop_struct_128788 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128788->ctx;
    uint64_t futhark_mc_segmap_parloop_128789_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128789_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128788->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128788->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128788->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128788->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128788->free_i_112880;
    int64_t gtid_117116 =
            futhark_mc_segmap_parloop_struct_128788->free_gtid_117116;
    int64_t x_117186 = futhark_mc_segmap_parloop_struct_128788->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_segmap_parloop_struct_128788->free_mem_120648,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125525 = start;
    
    for (; iter_125525 < end; iter_125525++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125571 = t_n_m_112861;
        int64_t gtid_117120 = iter_125525;
        int64_t remnant_125572 = iter_125525 - gtid_117120;
        int64_t x_125366 = ((int64_t *) mem_119882.mem)[gtid_117116 *
                                                        t_n_m_112861 +
                                                        gtid_117120];
        float x_125367 = ((float *) mem_119886.mem)[gtid_117116 * t_n_m_112861 +
                                                    gtid_117120];
        int64_t min_arg_125368 = mul64(t_jump_112811, gtid_117120);
        int64_t min_res_125369 = smin64(i_112880, min_arg_125368);
        float defunc_0_f_res_125370 = sitofp_i64_f32(min_res_125369);
        float defunc_2_reduce_res_125371;
        int64_t flat_tid_117121 = (int64_t) 0;
        int32_t num_tasks_125573;
        struct futhark_mc_task_128790 futhark_mc_task_128790;
        
        futhark_mc_task_128790.ctx = ctx;
        futhark_mc_task_128790.free_n_112804 = n_112804;
        futhark_mc_task_128790.free_gtid_117116 = gtid_117116;
        futhark_mc_task_128790.free_x_117186 = x_117186;
        futhark_mc_task_128790.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128790.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128790.free_x_125366 = x_125366;
        futhark_mc_task_128790.free_x_125367 = x_125367;
        futhark_mc_task_128790.free_defunc_0_f_res_125370 =
            defunc_0_f_res_125370;
        futhark_mc_task_128790.retval_defunc_2_reduce_res_125371 =
            &defunc_2_reduce_res_125371;
        
        struct scheduler_segop futhark_mc_task_128790_task;
        
        futhark_mc_task_128790_task.args = &futhark_mc_task_128790;
        futhark_mc_task_128790_task.top_level_fn =
            futhark_mc_segred_task_128791;
        futhark_mc_task_128790_task.name = "futhark_mc_segred_task_128791";
        futhark_mc_task_128790_task.iterations = t_window_112807;
        futhark_mc_task_128790_task.task_time =
            &ctx->futhark_mc_segred_task_128791_total_time;
        futhark_mc_task_128790_task.task_iter =
            &ctx->futhark_mc_segred_task_128791_total_iter;
        futhark_mc_task_128790_task.sched = STATIC;
        futhark_mc_task_128790_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128791_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128790_task);
        
        if (futhark_mc_segred_task_128791_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_125392 = 1.0F / defunc_2_reduce_res_125371;
        float defunc_2_reduce_res_125393;
        int64_t flat_tid_117123 = (int64_t) 0;
        int32_t num_tasks_125582;
        struct futhark_mc_task_128795 futhark_mc_task_128795;
        
        futhark_mc_task_128795.ctx = ctx;
        futhark_mc_task_128795.free_n_112804 = n_112804;
        futhark_mc_task_128795.free_gtid_117116 = gtid_117116;
        futhark_mc_task_128795.free_x_117186 = x_117186;
        futhark_mc_task_128795.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128795.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128795.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128795.free_x_125366 = x_125366;
        futhark_mc_task_128795.free_x_125367 = x_125367;
        futhark_mc_task_128795.free_defunc_0_f_res_125370 =
            defunc_0_f_res_125370;
        futhark_mc_task_128795.free_a0_125392 = a0_125392;
        futhark_mc_task_128795.retval_defunc_2_reduce_res_125393 =
            &defunc_2_reduce_res_125393;
        
        struct scheduler_segop futhark_mc_task_128795_task;
        
        futhark_mc_task_128795_task.args = &futhark_mc_task_128795;
        futhark_mc_task_128795_task.top_level_fn =
            futhark_mc_segred_task_128796;
        futhark_mc_task_128795_task.name = "futhark_mc_segred_task_128796";
        futhark_mc_task_128795_task.iterations = t_window_112807;
        futhark_mc_task_128795_task.task_time =
            &ctx->futhark_mc_segred_task_128796_total_time;
        futhark_mc_task_128795_task.task_iter =
            &ctx->futhark_mc_segred_task_128796_total_iter;
        futhark_mc_task_128795_task.sched = STATIC;
        futhark_mc_task_128795_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128796_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128795_task);
        
        if (futhark_mc_segred_task_128796_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120648.mem)[gtid_117120] = defunc_2_reduce_res_125393;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128789_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128789_end -
                 futhark_mc_segmap_parloop_128789_start;
        
        ctx->futhark_mc_segmap_parloop_128789_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128789_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128789_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128787(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117119 = tid;
    int num_tasks_125474 = info.nsubtasks;
    struct futhark_mc_task_128783 *futhark_mc_task_128783 =
                                  (struct futhark_mc_task_128783 *) args;
    struct futhark_context *ctx = futhark_mc_task_128783->ctx;
    uint64_t futhark_mc_segmap_nested_task_128787_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128787_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128783->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128783->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128783->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128783->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128783->free_i_112880;
    int64_t gtid_117116 = futhark_mc_task_128783->free_gtid_117116;
    int64_t x_117186 = futhark_mc_task_128783->free_x_117186;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128783->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128783->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128783->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128783->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128783->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120648 = {.desc ="mem_120648", .mem =
                                  futhark_mc_task_128783->free_mem_120648,
                                  .size =0, .references =NULL};
    int64_t iter_125525;
    struct futhark_mc_segmap_parloop_struct_128788
    futhark_mc_segmap_parloop_struct_128788;
    
    futhark_mc_segmap_parloop_struct_128788.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128788.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128788.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128788.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128788.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128788.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128788.free_gtid_117116 = gtid_117116;
    futhark_mc_segmap_parloop_struct_128788.free_x_117186 = x_117186;
    futhark_mc_segmap_parloop_struct_128788.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128788.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128788.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128788.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128788.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128788.free_mem_120648 = mem_120648.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128789_task;
    
    futhark_mc_segmap_parloop_128789_task.name =
        "futhark_mc_segmap_parloop_128789";
    futhark_mc_segmap_parloop_128789_task.fn = futhark_mc_segmap_parloop_128789;
    futhark_mc_segmap_parloop_128789_task.args =
        &futhark_mc_segmap_parloop_struct_128788;
    futhark_mc_segmap_parloop_128789_task.iterations = iterations;
    futhark_mc_segmap_parloop_128789_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128789_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128789_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128789_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128789_task);
    
    if (futhark_mc_segmap_parloop_128789_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128789_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128789_total_end -
                 futhark_mc_segmap_parloop_128789_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128789_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128789_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128789_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128787_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128787_end -
                 futhark_mc_segmap_nested_task_128787_start;
        
        ctx->futhark_mc_segmap_nested_task_128787_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128787_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128787_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128781(void *args, int64_t start,
                                            int64_t end, int flat_tid_117115,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128780
    *futhark_mc_segmap_parloop_struct_128780 =
    (struct futhark_mc_segmap_parloop_struct_128780 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128780->ctx;
    uint64_t futhark_mc_segmap_parloop_128781_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128781_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128780->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128780->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128780->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128780->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128780->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128780->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128780->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120667 = {.desc ="mem_120667", .mem =
                                  futhark_mc_segmap_parloop_struct_128780->free_mem_120667,
                                  .size =0, .references =NULL};
    size_t mem_120648_cached_sizze_128782 = 0;
    char *mem_120648 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125365 = start;
    
    if (mem_120648_cached_sizze_128782 < (size_t) bytes_119828) {
        mem_120648 = realloc(mem_120648, bytes_119828);
        mem_120648_cached_sizze_128782 = bytes_119828;
    }
    for (; iter_125365 < end; iter_125365++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125472 = m_112803;
        int64_t gtid_117116 = iter_125365;
        int64_t remnant_125473 = iter_125365 - gtid_117116;
        int64_t x_117186 = ((int64_t *) mem_119696.mem)[gtid_117116];
        int64_t flat_tid_117117 = (int64_t) 0;
        int32_t num_tasks_125474;
        int64_t flat_tid_117119 = (int64_t) 0;
        struct futhark_mc_task_128783 futhark_mc_task_128783;
        
        futhark_mc_task_128783.ctx = ctx;
        futhark_mc_task_128783.free_n_112804 = n_112804;
        futhark_mc_task_128783.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128783.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128783.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128783.free_i_112880 = i_112880;
        futhark_mc_task_128783.free_gtid_117116 = gtid_117116;
        futhark_mc_task_128783.free_x_117186 = x_117186;
        futhark_mc_task_128783.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128783.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128783.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128783.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128783.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128783.free_mem_120648 = mem_120648;
        
        struct scheduler_segop futhark_mc_task_128783_task;
        
        futhark_mc_task_128783_task.args = &futhark_mc_task_128783;
        futhark_mc_task_128783_task.top_level_fn =
            futhark_mc_segmap_task_128784;
        futhark_mc_task_128783_task.name = "futhark_mc_segmap_task_128784";
        futhark_mc_task_128783_task.iterations = t_n_m_112861;
        futhark_mc_task_128783_task.task_time =
            &ctx->futhark_mc_segmap_task_128784_total_time;
        futhark_mc_task_128783_task.task_iter =
            &ctx->futhark_mc_segmap_task_128784_total_iter;
        futhark_mc_task_128783_task.sched = STATIC;
        futhark_mc_task_128783_task.nested_fn =
            futhark_mc_segmap_nested_task_128787;
        
        int futhark_mc_segmap_task_128784_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128783_task);
        
        if (futhark_mc_segmap_task_128784_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120667.mem + gtid_117116 * t_n_m_112861 * (int64_t) 4,
                mem_120648 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120648);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128781_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128781_end -
                 futhark_mc_segmap_parloop_128781_start;
        
        ctx->futhark_mc_segmap_parloop_128781_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128781_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128781_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128779(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117115 = tid;
    int num_tasks_125302 = info.nsubtasks;
    struct futhark_mc_task_128774 *futhark_mc_task_128774 =
                                  (struct futhark_mc_task_128774 *) args;
    struct futhark_context *ctx = futhark_mc_task_128774->ctx;
    uint64_t futhark_mc_segmap_nested_task_128779_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128779_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128774->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128774->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128774->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128774->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128774->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128774->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128774->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128774->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128774->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128774->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128774->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128774->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128774->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120667 = {.desc ="mem_120667", .mem =
                                  futhark_mc_task_128774->free_mem_120667,
                                  .size =0, .references =NULL};
    int64_t iter_125365;
    struct futhark_mc_segmap_parloop_struct_128780
    futhark_mc_segmap_parloop_struct_128780;
    
    futhark_mc_segmap_parloop_struct_128780.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128780.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128780.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128780.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128780.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128780.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128780.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128780.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128780.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128780.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128780.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128780.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128780.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128780.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128780.free_mem_120667 = mem_120667.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128781_task;
    
    futhark_mc_segmap_parloop_128781_task.name =
        "futhark_mc_segmap_parloop_128781";
    futhark_mc_segmap_parloop_128781_task.fn = futhark_mc_segmap_parloop_128781;
    futhark_mc_segmap_parloop_128781_task.args =
        &futhark_mc_segmap_parloop_struct_128780;
    futhark_mc_segmap_parloop_128781_task.iterations = iterations;
    futhark_mc_segmap_parloop_128781_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128781_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128781_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128781_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128781_task);
    
    if (futhark_mc_segmap_parloop_128781_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128781_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128781_total_end -
                 futhark_mc_segmap_parloop_128781_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128781_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128781_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128781_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128779_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128779_end -
                 futhark_mc_segmap_nested_task_128779_start;
        
        ctx->futhark_mc_segmap_nested_task_128779_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128779_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128779_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128800 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120707;
    char *free_mem_120711;
};
struct futhark_mc_segmap_parloop_struct_128802 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120707;
    char *free_mem_120711;
};
static int futhark_mc_segmap_parloop_128803(void *args, int64_t start,
                                            int64_t end, int flat_tid_117300,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128802
    *futhark_mc_segmap_parloop_struct_128802 =
    (struct futhark_mc_segmap_parloop_struct_128802 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128802->ctx;
    uint64_t futhark_mc_segmap_parloop_128803_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128803_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128802->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128802->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128802->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128802->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128802->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128802->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128802->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120707 = {.desc ="mem_120707", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_120707,
                                  .size =0, .references =NULL};
    struct memblock mem_120711 = {.desc ="mem_120711", .mem =
                                  futhark_mc_segmap_parloop_struct_128802->free_mem_120711,
                                  .size =0, .references =NULL};
    size_t mem_120676_cached_sizze_128804 = 0;
    char *mem_120676 = NULL;
    size_t mem_120679_cached_sizze_128805 = 0;
    char *mem_120679 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125592 = start;
    
    if (mem_120676_cached_sizze_128804 < (size_t) bytes_119828) {
        mem_120676 = realloc(mem_120676, bytes_119828);
        mem_120676_cached_sizze_128804 = bytes_119828;
    }
    if (mem_120679_cached_sizze_128805 < (size_t) bytes_119828) {
        mem_120679 = realloc(mem_120679, bytes_119828);
        mem_120679_cached_sizze_128805 = bytes_119828;
    }
    for (; iter_125592 < end; iter_125592++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125676 = m_112803;
        int64_t gtid_117301 = iter_125592;
        int64_t remnant_125677 = iter_125592 - gtid_117301;
        int64_t x_114179 = ((int64_t *) mem_119696.mem)[gtid_117301];
        
        for (int64_t i_125593 = 0; i_125593 < t_n_m_112861; i_125593++) {
            int64_t x_125596 = ((int64_t *) mem_119882.mem)[gtid_117301 *
                                                            t_n_m_112861 +
                                                            i_125593];
            float x_125597 = ((float *) mem_119886.mem)[gtid_117301 *
                                                        t_n_m_112861 +
                                                        i_125593];
            int64_t min_arg_125598 = mul64(t_jump_112811, i_125593);
            int64_t min_res_125599 = smin64(i_112880, min_arg_125598);
            float defunc_0_f_res_125600 = sitofp_i64_f32(min_res_125599);
            float defunc_2_reduce_res_125601;
            float defunc_2_reduce_res_125602;
            float defunc_2_reduce_res_125603;
            float redout_125605;
            float redout_125606;
            float redout_125607;
            
            redout_125605 = 0.0F;
            redout_125606 = 0.0F;
            redout_125607 = 0.0F;
            for (int64_t i_125604 = 0; i_125604 < t_window_112807; i_125604++) {
                bool cond_125608 = sle64(x_114179, i_125604);
                float defunc_0_f_res_125609;
                
                if (cond_125608) {
                    defunc_0_f_res_125609 = 0.0F;
                } else {
                    int64_t i_125610 = add64(x_125596, i_125604);
                    float x_125611 = ((float *) mem_119718.mem)[gtid_117301 *
                                                                n_112804 +
                                                                i_125610];
                    float defunc_0_f_res_f_res_125612 = 1.0F + x_125611;
                    
                    defunc_0_f_res_125609 = defunc_0_f_res_f_res_125612;
                }
                
                float defunc_0_f_res_125613;
                
                if (cond_125608) {
                    defunc_0_f_res_125613 = 0.0F;
                } else {
                    int64_t i_125614 = add64(x_125596, i_125604);
                    float x_125615 = ((float *) mem_120637.mem)[gtid_117301 *
                                                                n_112804 +
                                                                i_125614];
                    
                    defunc_0_f_res_125613 = x_125615;
                }
                
                float x_j_125616 = defunc_0_f_res_125609 -
                      defunc_0_f_res_125600;
                float abs_res_125617 = (float) fabs(x_j_125616);
                float tmp1_125618 = abs_res_125617 / x_125597;
                float x_125619 = tmp1_125618 * tmp1_125618;
                float y_125620 = tmp1_125618 * x_125619;
                float tmp2_125621 = 1.0F - y_125620;
                float x_125622 = tmp2_125621 * tmp2_125621;
                float tmp3_125623 = tmp2_125621 * x_125622;
                float w_j_125624 = defunc_0_f_res_125613 * tmp3_125623;
                float xw_j_125625 = x_j_125616 * w_j_125624;
                float x2w_j_125626 = x_j_125616 * xw_j_125625;
                float defunc_1_op_res_125627 = w_j_125624 + redout_125605;
                float defunc_1_op_res_125628 = xw_j_125625 + redout_125606;
                float defunc_1_op_res_125629 = x2w_j_125626 + redout_125607;
                float redout_tmp_125680 = defunc_1_op_res_125627;
                float redout_tmp_125681 = defunc_1_op_res_125628;
                float redout_tmp_125682 = defunc_1_op_res_125629;
                
                redout_125605 = redout_tmp_125680;
                redout_125606 = redout_tmp_125681;
                redout_125607 = redout_tmp_125682;
            }
            defunc_2_reduce_res_125601 = redout_125605;
            defunc_2_reduce_res_125602 = redout_125606;
            defunc_2_reduce_res_125603 = redout_125607;
            
            float x_125630 = defunc_2_reduce_res_125601 *
                  defunc_2_reduce_res_125603;
            float y_125631 = defunc_2_reduce_res_125602 *
                  defunc_2_reduce_res_125602;
            float y_125632 = x_125630 - y_125631;
            float det1_125633 = 1.0F / y_125632;
            float a11_125634 = defunc_2_reduce_res_125603 * det1_125633;
            float negate_arg_125635 = defunc_2_reduce_res_125602 * det1_125633;
            float b11_125636 = 0.0F - negate_arg_125635;
            float c11_125637 = defunc_2_reduce_res_125601 * det1_125633;
            float defunc_2_reduce_res_125638;
            float defunc_2_reduce_res_125639;
            float redout_125641;
            float redout_125642;
            
            redout_125641 = 0.0F;
            redout_125642 = 0.0F;
            for (int64_t i_125640 = 0; i_125640 < t_window_112807; i_125640++) {
                bool cond_125643 = sle64(x_114179, i_125640);
                float defunc_0_f_res_125644;
                
                if (cond_125643) {
                    defunc_0_f_res_125644 = 0.0F;
                } else {
                    int64_t i_125645 = add64(x_125596, i_125640);
                    float x_125646 = ((float *) mem_119718.mem)[gtid_117301 *
                                                                n_112804 +
                                                                i_125645];
                    float defunc_0_f_res_f_res_125647 = 1.0F + x_125646;
                    
                    defunc_0_f_res_125644 = defunc_0_f_res_f_res_125647;
                }
                
                float defunc_0_f_res_125648;
                
                if (cond_125643) {
                    defunc_0_f_res_125648 = 0.0F;
                } else {
                    int64_t i_125649 = add64(x_125596, i_125640);
                    float x_125650 = ((float *) mem_120637.mem)[gtid_117301 *
                                                                n_112804 +
                                                                i_125649];
                    
                    defunc_0_f_res_125648 = x_125650;
                }
                
                float x_j_125651 = defunc_0_f_res_125644 -
                      defunc_0_f_res_125600;
                float abs_res_125652 = (float) fabs(x_j_125651);
                float tmp1_125653 = abs_res_125652 / x_125597;
                float x_125654 = tmp1_125653 * tmp1_125653;
                float y_125655 = tmp1_125653 * x_125654;
                float tmp2_125656 = 1.0F - y_125655;
                float x_125657 = tmp2_125656 * tmp2_125656;
                float tmp3_125658 = tmp2_125656 * x_125657;
                float tmp4_125659 = defunc_0_f_res_125648 * tmp3_125658;
                float defunc_1_f_res_125660 = x_j_125651 * tmp4_125659;
                float defunc_0_f_res_125661;
                
                if (cond_125643) {
                    defunc_0_f_res_125661 = 0.0F;
                } else {
                    int64_t i_125662 = add64(x_125596, i_125640);
                    float x_125663 = ((float *) mem_120633.mem)[gtid_117301 *
                                                                n_112804 +
                                                                i_125662];
                    
                    defunc_0_f_res_125661 = x_125663;
                }
                
                float x_125664 = a11_125634 * tmp4_125659;
                float y_125665 = b11_125636 * defunc_1_f_res_125660;
                float x_125666 = x_125664 + y_125665;
                float defunc_9_fit_fun_res_125667 = defunc_0_f_res_125661 *
                      x_125666;
                float x_125668 = b11_125636 * tmp4_125659;
                float y_125669 = c11_125637 * defunc_1_f_res_125660;
                float x_125670 = x_125668 + y_125669;
                float defunc_9_slope_fun_res_125671 = defunc_0_f_res_125661 *
                      x_125670;
                float defunc_1_op_res_125672 = defunc_9_fit_fun_res_125667 +
                      redout_125641;
                float defunc_1_op_res_125673 = defunc_9_slope_fun_res_125671 +
                      redout_125642;
                float redout_tmp_125683 = defunc_1_op_res_125672;
                float redout_tmp_125684 = defunc_1_op_res_125673;
                
                redout_125641 = redout_tmp_125683;
                redout_125642 = redout_tmp_125684;
            }
            defunc_2_reduce_res_125638 = redout_125641;
            defunc_2_reduce_res_125639 = redout_125642;
            ((float *) mem_120676)[i_125593] = defunc_2_reduce_res_125638;
            ((float *) mem_120679)[i_125593] = defunc_2_reduce_res_125639;
        }
        memmove(mem_120707.mem + gtid_117301 * t_n_m_112861 * (int64_t) 4,
                mem_120676 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120711.mem + gtid_117301 * t_n_m_112861 * (int64_t) 4,
                mem_120679 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120676);
    free(mem_120679);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128803_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128803_end -
                 futhark_mc_segmap_parloop_128803_start;
        
        ctx->futhark_mc_segmap_parloop_128803_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128803_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128803_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128801(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117300 = tid;
    int num_tasks_125591 = info.nsubtasks;
    struct futhark_mc_task_128800 *futhark_mc_task_128800 =
                                  (struct futhark_mc_task_128800 *) args;
    struct futhark_context *ctx = futhark_mc_task_128800->ctx;
    uint64_t futhark_mc_segmap_task_128801_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128801_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128800->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128800->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128800->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128800->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128800->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128800->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128800->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128800->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128800->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128800->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128800->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128800->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128800->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120707 = {.desc ="mem_120707", .mem =
                                  futhark_mc_task_128800->free_mem_120707,
                                  .size =0, .references =NULL};
    struct memblock mem_120711 = {.desc ="mem_120711", .mem =
                                  futhark_mc_task_128800->free_mem_120711,
                                  .size =0, .references =NULL};
    int64_t iter_125592;
    struct futhark_mc_segmap_parloop_struct_128802
    futhark_mc_segmap_parloop_struct_128802;
    
    futhark_mc_segmap_parloop_struct_128802.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128802.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128802.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128802.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128802.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128802.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128802.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128802.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128802.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128802.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_120707 = mem_120707.mem;
    futhark_mc_segmap_parloop_struct_128802.free_mem_120711 = mem_120711.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128803_task;
    
    futhark_mc_segmap_parloop_128803_task.name =
        "futhark_mc_segmap_parloop_128803";
    futhark_mc_segmap_parloop_128803_task.fn = futhark_mc_segmap_parloop_128803;
    futhark_mc_segmap_parloop_128803_task.args =
        &futhark_mc_segmap_parloop_struct_128802;
    futhark_mc_segmap_parloop_128803_task.iterations = iterations;
    futhark_mc_segmap_parloop_128803_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128803_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128803_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128803_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128803_task);
    
    if (futhark_mc_segmap_parloop_128803_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128803_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128803_total_end -
                 futhark_mc_segmap_parloop_128803_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128803_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128803_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128803_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128801_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128801_end -
                 futhark_mc_segmap_task_128801_start;
        
        ctx->futhark_mc_segmap_task_128801_runs[tid]++;
        ctx->futhark_mc_segmap_task_128801_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128801_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128807 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120707;
    char *free_mem_120711;
};
struct futhark_mc_task_128811 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120670;
    char *free_mem_120673;
};
struct futhark_mc_segmap_parloop_struct_128813 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120670;
    char *free_mem_120673;
};
static int futhark_mc_segmap_parloop_128814(void *args, int64_t start,
                                            int64_t end, int flat_tid_117304,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128813
    *futhark_mc_segmap_parloop_struct_128813 =
    (struct futhark_mc_segmap_parloop_struct_128813 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128813->ctx;
    uint64_t futhark_mc_segmap_parloop_128814_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128814_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128813->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128813->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128813->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128813->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128813->free_i_112880;
    int64_t gtid_117303 =
            futhark_mc_segmap_parloop_struct_128813->free_gtid_117303;
    int64_t x_117401 = futhark_mc_segmap_parloop_struct_128813->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120670 = {.desc ="mem_120670", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_120670,
                                  .size =0, .references =NULL};
    struct memblock mem_120673 = {.desc ="mem_120673", .mem =
                                  futhark_mc_segmap_parloop_struct_128813->free_mem_120673,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125848 = start;
    
    for (; iter_125848 < end; iter_125848++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125909 = t_n_m_112861;
        int64_t gtid_117305 = iter_125848;
        int64_t remnant_125910 = iter_125848 - gtid_117305;
        int64_t x_125767 = ((int64_t *) mem_119882.mem)[gtid_117303 *
                                                        t_n_m_112861 +
                                                        gtid_117305];
        float x_125768 = ((float *) mem_119886.mem)[gtid_117303 * t_n_m_112861 +
                                                    gtid_117305];
        int64_t min_arg_125769 = mul64(t_jump_112811, gtid_117305);
        int64_t min_res_125770 = smin64(i_112880, min_arg_125769);
        float defunc_0_f_res_125771 = sitofp_i64_f32(min_res_125770);
        float defunc_2_reduce_res_125772;
        float defunc_2_reduce_res_125773;
        float defunc_2_reduce_res_125774;
        float redout_125850;
        float redout_125851;
        float redout_125852;
        
        redout_125850 = 0.0F;
        redout_125851 = 0.0F;
        redout_125852 = 0.0F;
        for (int64_t i_125849 = 0; i_125849 < t_window_112807; i_125849++) {
            bool cond_125853 = sle64(x_117401, i_125849);
            float defunc_0_f_res_125854;
            
            if (cond_125853) {
                defunc_0_f_res_125854 = 0.0F;
            } else {
                int64_t i_125855 = add64(x_125767, i_125849);
                float x_125856 = ((float *) mem_119718.mem)[gtid_117303 *
                                                            n_112804 +
                                                            i_125855];
                float defunc_0_f_res_f_res_125857 = 1.0F + x_125856;
                
                defunc_0_f_res_125854 = defunc_0_f_res_f_res_125857;
            }
            
            float defunc_0_f_res_125858;
            
            if (cond_125853) {
                defunc_0_f_res_125858 = 0.0F;
            } else {
                int64_t i_125859 = add64(x_125767, i_125849);
                float x_125860 = ((float *) mem_120637.mem)[gtid_117303 *
                                                            n_112804 +
                                                            i_125859];
                
                defunc_0_f_res_125858 = x_125860;
            }
            
            float x_j_125861 = defunc_0_f_res_125854 - defunc_0_f_res_125771;
            float abs_res_125862 = (float) fabs(x_j_125861);
            float tmp1_125863 = abs_res_125862 / x_125768;
            float x_125864 = tmp1_125863 * tmp1_125863;
            float y_125865 = tmp1_125863 * x_125864;
            float tmp2_125866 = 1.0F - y_125865;
            float x_125867 = tmp2_125866 * tmp2_125866;
            float tmp3_125868 = tmp2_125866 * x_125867;
            float w_j_125869 = defunc_0_f_res_125858 * tmp3_125868;
            float xw_j_125870 = x_j_125861 * w_j_125869;
            float x2w_j_125871 = x_j_125861 * xw_j_125870;
            float defunc_1_op_res_125872 = w_j_125869 + redout_125850;
            float defunc_1_op_res_125873 = xw_j_125870 + redout_125851;
            float defunc_1_op_res_125874 = x2w_j_125871 + redout_125852;
            float redout_tmp_125911 = defunc_1_op_res_125872;
            float redout_tmp_125912 = defunc_1_op_res_125873;
            float redout_tmp_125913 = defunc_1_op_res_125874;
            
            redout_125850 = redout_tmp_125911;
            redout_125851 = redout_tmp_125912;
            redout_125852 = redout_tmp_125913;
        }
        defunc_2_reduce_res_125772 = redout_125850;
        defunc_2_reduce_res_125773 = redout_125851;
        defunc_2_reduce_res_125774 = redout_125852;
        
        float x_125801 = defunc_2_reduce_res_125772 *
              defunc_2_reduce_res_125774;
        float y_125802 = defunc_2_reduce_res_125773 *
              defunc_2_reduce_res_125773;
        float y_125803 = x_125801 - y_125802;
        float det1_125804 = 1.0F / y_125803;
        float a11_125805 = defunc_2_reduce_res_125774 * det1_125804;
        float negate_arg_125806 = defunc_2_reduce_res_125773 * det1_125804;
        float b11_125807 = 0.0F - negate_arg_125806;
        float c11_125808 = defunc_2_reduce_res_125772 * det1_125804;
        float defunc_2_reduce_res_125809;
        float defunc_2_reduce_res_125810;
        float redout_125876;
        float redout_125877;
        
        redout_125876 = 0.0F;
        redout_125877 = 0.0F;
        for (int64_t i_125875 = 0; i_125875 < t_window_112807; i_125875++) {
            bool cond_125878 = sle64(x_117401, i_125875);
            float defunc_0_f_res_125879;
            
            if (cond_125878) {
                defunc_0_f_res_125879 = 0.0F;
            } else {
                int64_t i_125880 = add64(x_125767, i_125875);
                float x_125881 = ((float *) mem_119718.mem)[gtid_117303 *
                                                            n_112804 +
                                                            i_125880];
                float defunc_0_f_res_f_res_125882 = 1.0F + x_125881;
                
                defunc_0_f_res_125879 = defunc_0_f_res_f_res_125882;
            }
            
            float defunc_0_f_res_125883;
            
            if (cond_125878) {
                defunc_0_f_res_125883 = 0.0F;
            } else {
                int64_t i_125884 = add64(x_125767, i_125875);
                float x_125885 = ((float *) mem_120637.mem)[gtid_117303 *
                                                            n_112804 +
                                                            i_125884];
                
                defunc_0_f_res_125883 = x_125885;
            }
            
            float x_j_125886 = defunc_0_f_res_125879 - defunc_0_f_res_125771;
            float abs_res_125887 = (float) fabs(x_j_125886);
            float tmp1_125888 = abs_res_125887 / x_125768;
            float x_125889 = tmp1_125888 * tmp1_125888;
            float y_125890 = tmp1_125888 * x_125889;
            float tmp2_125891 = 1.0F - y_125890;
            float x_125892 = tmp2_125891 * tmp2_125891;
            float tmp3_125893 = tmp2_125891 * x_125892;
            float tmp4_125894 = defunc_0_f_res_125883 * tmp3_125893;
            float defunc_1_f_res_125895 = x_j_125886 * tmp4_125894;
            float defunc_0_f_res_125896;
            
            if (cond_125878) {
                defunc_0_f_res_125896 = 0.0F;
            } else {
                int64_t i_125897 = add64(x_125767, i_125875);
                float x_125898 = ((float *) mem_120633.mem)[gtid_117303 *
                                                            n_112804 +
                                                            i_125897];
                
                defunc_0_f_res_125896 = x_125898;
            }
            
            float x_125899 = a11_125805 * tmp4_125894;
            float y_125900 = b11_125807 * defunc_1_f_res_125895;
            float x_125901 = x_125899 + y_125900;
            float defunc_9_fit_fun_res_125902 = defunc_0_f_res_125896 *
                  x_125901;
            float x_125903 = b11_125807 * tmp4_125894;
            float y_125904 = c11_125808 * defunc_1_f_res_125895;
            float x_125905 = x_125903 + y_125904;
            float defunc_9_slope_fun_res_125906 = defunc_0_f_res_125896 *
                  x_125905;
            float defunc_1_op_res_125907 = defunc_9_fit_fun_res_125902 +
                  redout_125876;
            float defunc_1_op_res_125908 = defunc_9_slope_fun_res_125906 +
                  redout_125877;
            float redout_tmp_125914 = defunc_1_op_res_125907;
            float redout_tmp_125915 = defunc_1_op_res_125908;
            
            redout_125876 = redout_tmp_125914;
            redout_125877 = redout_tmp_125915;
        }
        defunc_2_reduce_res_125809 = redout_125876;
        defunc_2_reduce_res_125810 = redout_125877;
        ((float *) mem_120670.mem)[gtid_117305] = defunc_2_reduce_res_125809;
        ((float *) mem_120673.mem)[gtid_117305] = defunc_2_reduce_res_125810;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128814_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128814_end -
                 futhark_mc_segmap_parloop_128814_start;
        
        ctx->futhark_mc_segmap_parloop_128814_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128814_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128814_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128812(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117304 = tid;
    int num_tasks_125847 = info.nsubtasks;
    struct futhark_mc_task_128811 *futhark_mc_task_128811 =
                                  (struct futhark_mc_task_128811 *) args;
    struct futhark_context *ctx = futhark_mc_task_128811->ctx;
    uint64_t futhark_mc_segmap_task_128812_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128812_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128811->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128811->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128811->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128811->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128811->free_i_112880;
    int64_t gtid_117303 = futhark_mc_task_128811->free_gtid_117303;
    int64_t x_117401 = futhark_mc_task_128811->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128811->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128811->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128811->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128811->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128811->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120670 = {.desc ="mem_120670", .mem =
                                  futhark_mc_task_128811->free_mem_120670,
                                  .size =0, .references =NULL};
    struct memblock mem_120673 = {.desc ="mem_120673", .mem =
                                  futhark_mc_task_128811->free_mem_120673,
                                  .size =0, .references =NULL};
    int64_t iter_125848;
    struct futhark_mc_segmap_parloop_struct_128813
    futhark_mc_segmap_parloop_struct_128813;
    
    futhark_mc_segmap_parloop_struct_128813.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128813.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128813.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128813.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128813.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128813.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128813.free_gtid_117303 = gtid_117303;
    futhark_mc_segmap_parloop_struct_128813.free_x_117401 = x_117401;
    futhark_mc_segmap_parloop_struct_128813.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_120670 = mem_120670.mem;
    futhark_mc_segmap_parloop_struct_128813.free_mem_120673 = mem_120673.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128814_task;
    
    futhark_mc_segmap_parloop_128814_task.name =
        "futhark_mc_segmap_parloop_128814";
    futhark_mc_segmap_parloop_128814_task.fn = futhark_mc_segmap_parloop_128814;
    futhark_mc_segmap_parloop_128814_task.args =
        &futhark_mc_segmap_parloop_struct_128813;
    futhark_mc_segmap_parloop_128814_task.iterations = iterations;
    futhark_mc_segmap_parloop_128814_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128814_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128814_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128814_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128814_task);
    
    if (futhark_mc_segmap_parloop_128814_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128814_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128814_total_end -
                 futhark_mc_segmap_parloop_128814_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128814_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128814_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128814_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128812_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128812_end -
                 futhark_mc_segmap_task_128812_start;
        
        ctx->futhark_mc_segmap_task_128812_runs[tid]++;
        ctx->futhark_mc_segmap_task_128812_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128812_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128816 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120670;
    char *free_mem_120673;
};
struct futhark_mc_task_128818 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_125686;
    float free_x_125687;
    float free_defunc_0_f_res_125690;
    float *retval_defunc_2_reduce_res_125691;
    float *retval_defunc_2_reduce_res_125692;
    float *retval_defunc_2_reduce_res_125693;
};
struct futhark_mc_segred_stage_1_parloop_struct_128823 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_125686;
    float free_x_125687;
    float free_defunc_0_f_res_125690;
    char *free_reduce_stage_1_tid_res_arr_mem_125983;
    char *free_reduce_stage_1_tid_res_arr_mem_125985;
    char *free_reduce_stage_1_tid_res_arr_mem_125987;
};
static int futhark_mc_segred_stage_1_parloop_128824(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117308,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128823
    *futhark_mc_segred_stage_1_parloop_struct_128823 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128823 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128823->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128824_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128824_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128823->free_n_112804;
    int64_t gtid_117303 =
            futhark_mc_segred_stage_1_parloop_struct_128823->free_gtid_117303;
    int64_t x_117401 =
            futhark_mc_segred_stage_1_parloop_struct_128823->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128823->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128823->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125686 =
            futhark_mc_segred_stage_1_parloop_struct_128823->free_x_125686;
    float x_125687 =
          futhark_mc_segred_stage_1_parloop_struct_128823->free_x_125687;
    float defunc_0_f_res_125690 =
          futhark_mc_segred_stage_1_parloop_struct_128823->free_defunc_0_f_res_125690;
    struct memblock reduce_stage_1_tid_res_arr_mem_125983 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125983",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128823->free_reduce_stage_1_tid_res_arr_mem_125983,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125985 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125985",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128823->free_reduce_stage_1_tid_res_arr_mem_125985,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_125987 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_125987",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128823->free_reduce_stage_1_tid_res_arr_mem_125987,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125989 = start;
    float x_125917;
    float x_125918;
    float x_125920;
    float x_125921;
    float x_125923;
    float x_125924;
    float local_acc_125990 = 0.0F;
    float local_acc_125991 = 0.0F;
    float local_acc_125992 = 0.0F;
    
    for (; iter_125989 < end; iter_125989++) {
        int64_t gtid_117309 = iter_125989;
        bool cond_125926 = sle64(x_117401, gtid_117309);
        float defunc_0_f_res_125927;
        
        if (cond_125926) {
            defunc_0_f_res_125927 = 0.0F;
        } else {
            int64_t i_125928 = add64(gtid_117309, x_125686);
            float x_125929 = ((float *) mem_119718.mem)[gtid_117303 * n_112804 +
                                                        i_125928];
            float defunc_0_f_res_f_res_125930 = 1.0F + x_125929;
            
            defunc_0_f_res_125927 = defunc_0_f_res_f_res_125930;
        }
        
        float defunc_0_f_res_125931;
        
        if (cond_125926) {
            defunc_0_f_res_125931 = 0.0F;
        } else {
            int64_t i_125932 = add64(gtid_117309, x_125686);
            float x_125933 = ((float *) mem_120637.mem)[gtid_117303 * n_112804 +
                                                        i_125932];
            
            defunc_0_f_res_125931 = x_125933;
        }
        
        float x_j_125934 = defunc_0_f_res_125927 - defunc_0_f_res_125690;
        float abs_res_125935 = (float) fabs(x_j_125934);
        float tmp1_125936 = abs_res_125935 / x_125687;
        float x_125937 = tmp1_125936 * tmp1_125936;
        float y_125938 = tmp1_125936 * x_125937;
        float tmp2_125939 = 1.0F - y_125938;
        float x_125940 = tmp2_125939 * tmp2_125939;
        float tmp3_125941 = tmp2_125939 * x_125940;
        float w_j_125942 = defunc_0_f_res_125931 * tmp3_125941;
        float xw_j_125943 = x_j_125934 * w_j_125942;
        float x2w_j_125944 = x_j_125934 * xw_j_125943;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125917 = local_acc_125990;
        }
        // Load next params
        {
            x_125918 = w_j_125942;
        }
        // Red body
        {
            float defunc_1_op_res_125919 = x_125917 + x_125918;
            
            local_acc_125990 = defunc_1_op_res_125919;
        }
        // Load accum params
        {
            x_125920 = local_acc_125991;
        }
        // Load next params
        {
            x_125921 = xw_j_125943;
        }
        // Red body
        {
            float defunc_1_op_res_125922 = x_125920 + x_125921;
            
            local_acc_125991 = defunc_1_op_res_125922;
        }
        // Load accum params
        {
            x_125923 = local_acc_125992;
        }
        // Load next params
        {
            x_125924 = x2w_j_125944;
        }
        // Red body
        {
            float defunc_1_op_res_125925 = x_125923 + x_125924;
            
            local_acc_125992 = defunc_1_op_res_125925;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_125983.mem)[flat_tid_117308] =
        local_acc_125990;
    ((float *) reduce_stage_1_tid_res_arr_mem_125985.mem)[flat_tid_117308] =
        local_acc_125991;
    ((float *) reduce_stage_1_tid_res_arr_mem_125987.mem)[flat_tid_117308] =
        local_acc_125992;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128824_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128824_end -
                 futhark_mc_segred_stage_1_parloop_128824_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128824_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128824_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128824_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128819(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117308 = tid;
    int num_tasks_125982 = info.nsubtasks;
    struct futhark_mc_task_128818 *futhark_mc_task_128818 =
                                  (struct futhark_mc_task_128818 *) args;
    struct futhark_context *ctx = futhark_mc_task_128818->ctx;
    uint64_t futhark_mc_segred_task_128819_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128819_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128818->free_n_112804;
    int64_t gtid_117303 = futhark_mc_task_128818->free_gtid_117303;
    int64_t x_117401 = futhark_mc_task_128818->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128818->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128818->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125686 = futhark_mc_task_128818->free_x_125686;
    float x_125687 = futhark_mc_task_128818->free_x_125687;
    float defunc_0_f_res_125690 =
          futhark_mc_task_128818->free_defunc_0_f_res_125690;
    float defunc_2_reduce_res_125691 =
          *futhark_mc_task_128818->retval_defunc_2_reduce_res_125691;
    float defunc_2_reduce_res_125692 =
          *futhark_mc_task_128818->retval_defunc_2_reduce_res_125692;
    float defunc_2_reduce_res_125693 =
          *futhark_mc_task_128818->retval_defunc_2_reduce_res_125693;
    size_t reduce_stage_1_tid_res_arr_mem_125983_cached_sizze_128820 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125983 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125985_cached_sizze_128821 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125985 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_125987_cached_sizze_128822 = 0;
    char *reduce_stage_1_tid_res_arr_mem_125987 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_125983_cached_sizze_128820 <
        (size_t) ((int64_t) 4 * num_tasks_125982)) {
        reduce_stage_1_tid_res_arr_mem_125983 =
            realloc(reduce_stage_1_tid_res_arr_mem_125983, (int64_t) 4 *
                    num_tasks_125982);
        reduce_stage_1_tid_res_arr_mem_125983_cached_sizze_128820 =
            (int64_t) 4 * num_tasks_125982;
    }
    if (reduce_stage_1_tid_res_arr_mem_125985_cached_sizze_128821 <
        (size_t) ((int64_t) 4 * num_tasks_125982)) {
        reduce_stage_1_tid_res_arr_mem_125985 =
            realloc(reduce_stage_1_tid_res_arr_mem_125985, (int64_t) 4 *
                    num_tasks_125982);
        reduce_stage_1_tid_res_arr_mem_125985_cached_sizze_128821 =
            (int64_t) 4 * num_tasks_125982;
    }
    if (reduce_stage_1_tid_res_arr_mem_125987_cached_sizze_128822 <
        (size_t) ((int64_t) 4 * num_tasks_125982)) {
        reduce_stage_1_tid_res_arr_mem_125987 =
            realloc(reduce_stage_1_tid_res_arr_mem_125987, (int64_t) 4 *
                    num_tasks_125982);
        reduce_stage_1_tid_res_arr_mem_125987_cached_sizze_128822 =
            (int64_t) 4 * num_tasks_125982;
    }
    
    int64_t iter_125989;
    struct futhark_mc_segred_stage_1_parloop_struct_128823
    futhark_mc_segred_stage_1_parloop_struct_128823;
    
    futhark_mc_segred_stage_1_parloop_struct_128823.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_gtid_117303 =
        gtid_117303;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_x_117401 = x_117401;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_x_125686 = x_125686;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_x_125687 = x_125687;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_defunc_0_f_res_125690 =
        defunc_0_f_res_125690;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_reduce_stage_1_tid_res_arr_mem_125983 =
        reduce_stage_1_tid_res_arr_mem_125983;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_reduce_stage_1_tid_res_arr_mem_125985 =
        reduce_stage_1_tid_res_arr_mem_125985;
    futhark_mc_segred_stage_1_parloop_struct_128823.free_reduce_stage_1_tid_res_arr_mem_125987 =
        reduce_stage_1_tid_res_arr_mem_125987;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128824_task;
    
    futhark_mc_segred_stage_1_parloop_128824_task.name =
        "futhark_mc_segred_stage_1_parloop_128824";
    futhark_mc_segred_stage_1_parloop_128824_task.fn =
        futhark_mc_segred_stage_1_parloop_128824;
    futhark_mc_segred_stage_1_parloop_128824_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128823;
    futhark_mc_segred_stage_1_parloop_128824_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128824_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128824_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128824_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128824_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128824_task);
    
    if (futhark_mc_segred_stage_1_parloop_128824_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128824_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128824_total_end -
                 futhark_mc_segred_stage_1_parloop_128824_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128824_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128824_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128824_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125691 = 0.0F;
        defunc_2_reduce_res_125692 = 0.0F;
        defunc_2_reduce_res_125693 = 0.0F;
    }
    
    float x_125993;
    float x_125994;
    float x_125996;
    float x_125997;
    float x_125999;
    float x_126000;
    
    for (int32_t i_126002 = 0; i_126002 < num_tasks_125982; i_126002++) {
        flat_tid_117308 = i_126002;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_125993 = defunc_2_reduce_res_125691;
            }
            // load next params
            {
                x_125994 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125983)[flat_tid_117308];
            }
            // red body
            {
                float defunc_1_op_res_125995 = x_125993 + x_125994;
                
                defunc_2_reduce_res_125691 = defunc_1_op_res_125995;
            }
            // load acc params
            {
                x_125996 = defunc_2_reduce_res_125692;
            }
            // load next params
            {
                x_125997 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125985)[flat_tid_117308];
            }
            // red body
            {
                float defunc_1_op_res_125998 = x_125996 + x_125997;
                
                defunc_2_reduce_res_125692 = defunc_1_op_res_125998;
            }
            // load acc params
            {
                x_125999 = defunc_2_reduce_res_125693;
            }
            // load next params
            {
                x_126000 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_125987)[flat_tid_117308];
            }
            // red body
            {
                float defunc_1_op_res_126001 = x_125999 + x_126000;
                
                defunc_2_reduce_res_125693 = defunc_1_op_res_126001;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_125983);
    free(reduce_stage_1_tid_res_arr_mem_125985);
    free(reduce_stage_1_tid_res_arr_mem_125987);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128819_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128819_end -
                 futhark_mc_segred_task_128819_start;
        
        ctx->futhark_mc_segred_task_128819_runs[tid]++;
        ctx->futhark_mc_segred_task_128819_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128819_iter[tid] += iterations;
    }
    *futhark_mc_task_128818->retval_defunc_2_reduce_res_125691 =
        defunc_2_reduce_res_125691;
    *futhark_mc_task_128818->retval_defunc_2_reduce_res_125692 =
        defunc_2_reduce_res_125692;
    *futhark_mc_task_128818->retval_defunc_2_reduce_res_125693 =
        defunc_2_reduce_res_125693;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128825 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_125686;
    float free_x_125687;
    float free_defunc_0_f_res_125690;
    float free_a11_125726;
    float free_b11_125728;
    float free_c11_125729;
    float *retval_defunc_2_reduce_res_125730;
    float *retval_defunc_2_reduce_res_125731;
};
struct futhark_mc_segred_stage_1_parloop_struct_128829 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117303;
    int64_t free_x_117401;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_125686;
    float free_x_125687;
    float free_defunc_0_f_res_125690;
    float free_a11_125726;
    float free_b11_125728;
    float free_c11_125729;
    char *free_reduce_stage_1_tid_res_arr_mem_126004;
    char *free_reduce_stage_1_tid_res_arr_mem_126006;
};
static int futhark_mc_segred_stage_1_parloop_128830(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117310,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128829
    *futhark_mc_segred_stage_1_parloop_struct_128829 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128829 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128829->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128830_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128830_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128829->free_n_112804;
    int64_t gtid_117303 =
            futhark_mc_segred_stage_1_parloop_struct_128829->free_gtid_117303;
    int64_t x_117401 =
            futhark_mc_segred_stage_1_parloop_struct_128829->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128829->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128829->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128829->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125686 =
            futhark_mc_segred_stage_1_parloop_struct_128829->free_x_125686;
    float x_125687 =
          futhark_mc_segred_stage_1_parloop_struct_128829->free_x_125687;
    float defunc_0_f_res_125690 =
          futhark_mc_segred_stage_1_parloop_struct_128829->free_defunc_0_f_res_125690;
    float a11_125726 =
          futhark_mc_segred_stage_1_parloop_struct_128829->free_a11_125726;
    float b11_125728 =
          futhark_mc_segred_stage_1_parloop_struct_128829->free_b11_125728;
    float c11_125729 =
          futhark_mc_segred_stage_1_parloop_struct_128829->free_c11_125729;
    struct memblock reduce_stage_1_tid_res_arr_mem_126004 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126004",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128829->free_reduce_stage_1_tid_res_arr_mem_126004,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126006 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126006",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128829->free_reduce_stage_1_tid_res_arr_mem_126006,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126008 = start;
    float x_125945;
    float x_125946;
    float x_125948;
    float x_125949;
    float local_acc_126009 = 0.0F;
    float local_acc_126010 = 0.0F;
    
    for (; iter_126008 < end; iter_126008++) {
        int64_t gtid_117311 = iter_126008;
        bool cond_125951 = sle64(x_117401, gtid_117311);
        float defunc_0_f_res_125952;
        
        if (cond_125951) {
            defunc_0_f_res_125952 = 0.0F;
        } else {
            int64_t i_125953 = add64(gtid_117311, x_125686);
            float x_125954 = ((float *) mem_119718.mem)[gtid_117303 * n_112804 +
                                                        i_125953];
            float defunc_0_f_res_f_res_125955 = 1.0F + x_125954;
            
            defunc_0_f_res_125952 = defunc_0_f_res_f_res_125955;
        }
        
        float defunc_0_f_res_125956;
        
        if (cond_125951) {
            defunc_0_f_res_125956 = 0.0F;
        } else {
            int64_t i_125957 = add64(gtid_117311, x_125686);
            float x_125958 = ((float *) mem_120637.mem)[gtid_117303 * n_112804 +
                                                        i_125957];
            
            defunc_0_f_res_125956 = x_125958;
        }
        
        float x_j_125959 = defunc_0_f_res_125952 - defunc_0_f_res_125690;
        float abs_res_125960 = (float) fabs(x_j_125959);
        float tmp1_125961 = abs_res_125960 / x_125687;
        float x_125962 = tmp1_125961 * tmp1_125961;
        float y_125963 = tmp1_125961 * x_125962;
        float tmp2_125964 = 1.0F - y_125963;
        float x_125965 = tmp2_125964 * tmp2_125964;
        float tmp3_125966 = tmp2_125964 * x_125965;
        float tmp4_125967 = defunc_0_f_res_125956 * tmp3_125966;
        float defunc_1_f_res_125968 = x_j_125959 * tmp4_125967;
        float defunc_0_f_res_125969;
        
        if (cond_125951) {
            defunc_0_f_res_125969 = 0.0F;
        } else {
            int64_t i_125970 = add64(gtid_117311, x_125686);
            float x_125971 = ((float *) mem_120633.mem)[gtid_117303 * n_112804 +
                                                        i_125970];
            
            defunc_0_f_res_125969 = x_125971;
        }
        
        float x_125972 = a11_125726 * tmp4_125967;
        float y_125973 = b11_125728 * defunc_1_f_res_125968;
        float x_125974 = x_125972 + y_125973;
        float defunc_9_fit_fun_res_125975 = defunc_0_f_res_125969 * x_125974;
        float x_125976 = b11_125728 * tmp4_125967;
        float y_125977 = c11_125729 * defunc_1_f_res_125968;
        float x_125978 = x_125976 + y_125977;
        float defunc_9_slope_fun_res_125979 = defunc_0_f_res_125969 * x_125978;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_125945 = local_acc_126009;
        }
        // Load next params
        {
            x_125946 = defunc_9_fit_fun_res_125975;
        }
        // Red body
        {
            float defunc_1_op_res_125947 = x_125945 + x_125946;
            
            local_acc_126009 = defunc_1_op_res_125947;
        }
        // Load accum params
        {
            x_125948 = local_acc_126010;
        }
        // Load next params
        {
            x_125949 = defunc_9_slope_fun_res_125979;
        }
        // Red body
        {
            float defunc_1_op_res_125950 = x_125948 + x_125949;
            
            local_acc_126010 = defunc_1_op_res_125950;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126004.mem)[flat_tid_117310] =
        local_acc_126009;
    ((float *) reduce_stage_1_tid_res_arr_mem_126006.mem)[flat_tid_117310] =
        local_acc_126010;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128830_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128830_end -
                 futhark_mc_segred_stage_1_parloop_128830_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128830_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128830_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128830_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128826(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117310 = tid;
    int num_tasks_126003 = info.nsubtasks;
    struct futhark_mc_task_128825 *futhark_mc_task_128825 =
                                  (struct futhark_mc_task_128825 *) args;
    struct futhark_context *ctx = futhark_mc_task_128825->ctx;
    uint64_t futhark_mc_segred_task_128826_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128826_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128825->free_n_112804;
    int64_t gtid_117303 = futhark_mc_task_128825->free_gtid_117303;
    int64_t x_117401 = futhark_mc_task_128825->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128825->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128825->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128825->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_125686 = futhark_mc_task_128825->free_x_125686;
    float x_125687 = futhark_mc_task_128825->free_x_125687;
    float defunc_0_f_res_125690 =
          futhark_mc_task_128825->free_defunc_0_f_res_125690;
    float a11_125726 = futhark_mc_task_128825->free_a11_125726;
    float b11_125728 = futhark_mc_task_128825->free_b11_125728;
    float c11_125729 = futhark_mc_task_128825->free_c11_125729;
    float defunc_2_reduce_res_125730 =
          *futhark_mc_task_128825->retval_defunc_2_reduce_res_125730;
    float defunc_2_reduce_res_125731 =
          *futhark_mc_task_128825->retval_defunc_2_reduce_res_125731;
    size_t reduce_stage_1_tid_res_arr_mem_126004_cached_sizze_128827 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126004 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126006_cached_sizze_128828 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126006 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126004_cached_sizze_128827 <
        (size_t) ((int64_t) 4 * num_tasks_126003)) {
        reduce_stage_1_tid_res_arr_mem_126004 =
            realloc(reduce_stage_1_tid_res_arr_mem_126004, (int64_t) 4 *
                    num_tasks_126003);
        reduce_stage_1_tid_res_arr_mem_126004_cached_sizze_128827 =
            (int64_t) 4 * num_tasks_126003;
    }
    if (reduce_stage_1_tid_res_arr_mem_126006_cached_sizze_128828 <
        (size_t) ((int64_t) 4 * num_tasks_126003)) {
        reduce_stage_1_tid_res_arr_mem_126006 =
            realloc(reduce_stage_1_tid_res_arr_mem_126006, (int64_t) 4 *
                    num_tasks_126003);
        reduce_stage_1_tid_res_arr_mem_126006_cached_sizze_128828 =
            (int64_t) 4 * num_tasks_126003;
    }
    
    int64_t iter_126008;
    struct futhark_mc_segred_stage_1_parloop_struct_128829
    futhark_mc_segred_stage_1_parloop_struct_128829;
    
    futhark_mc_segred_stage_1_parloop_struct_128829.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_gtid_117303 =
        gtid_117303;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_x_117401 = x_117401;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_x_125686 = x_125686;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_x_125687 = x_125687;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_defunc_0_f_res_125690 =
        defunc_0_f_res_125690;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_a11_125726 =
        a11_125726;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_b11_125728 =
        b11_125728;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_c11_125729 =
        c11_125729;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_reduce_stage_1_tid_res_arr_mem_126004 =
        reduce_stage_1_tid_res_arr_mem_126004;
    futhark_mc_segred_stage_1_parloop_struct_128829.free_reduce_stage_1_tid_res_arr_mem_126006 =
        reduce_stage_1_tid_res_arr_mem_126006;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128830_task;
    
    futhark_mc_segred_stage_1_parloop_128830_task.name =
        "futhark_mc_segred_stage_1_parloop_128830";
    futhark_mc_segred_stage_1_parloop_128830_task.fn =
        futhark_mc_segred_stage_1_parloop_128830;
    futhark_mc_segred_stage_1_parloop_128830_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128829;
    futhark_mc_segred_stage_1_parloop_128830_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128830_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128830_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128830_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128830_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128830_task);
    
    if (futhark_mc_segred_stage_1_parloop_128830_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128830_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128830_total_end -
                 futhark_mc_segred_stage_1_parloop_128830_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128830_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128830_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128830_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_125730 = 0.0F;
        defunc_2_reduce_res_125731 = 0.0F;
    }
    
    float x_126011;
    float x_126012;
    float x_126014;
    float x_126015;
    
    for (int32_t i_126017 = 0; i_126017 < num_tasks_126003; i_126017++) {
        flat_tid_117310 = i_126017;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126011 = defunc_2_reduce_res_125730;
            }
            // load next params
            {
                x_126012 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126004)[flat_tid_117310];
            }
            // red body
            {
                float defunc_1_op_res_126013 = x_126011 + x_126012;
                
                defunc_2_reduce_res_125730 = defunc_1_op_res_126013;
            }
            // load acc params
            {
                x_126014 = defunc_2_reduce_res_125731;
            }
            // load next params
            {
                x_126015 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126006)[flat_tid_117310];
            }
            // red body
            {
                float defunc_1_op_res_126016 = x_126014 + x_126015;
                
                defunc_2_reduce_res_125731 = defunc_1_op_res_126016;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126004);
    free(reduce_stage_1_tid_res_arr_mem_126006);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128826_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128826_end -
                 futhark_mc_segred_task_128826_start;
        
        ctx->futhark_mc_segred_task_128826_runs[tid]++;
        ctx->futhark_mc_segred_task_128826_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128826_iter[tid] += iterations;
    }
    *futhark_mc_task_128825->retval_defunc_2_reduce_res_125730 =
        defunc_2_reduce_res_125730;
    *futhark_mc_task_128825->retval_defunc_2_reduce_res_125731 =
        defunc_2_reduce_res_125731;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128817(void *args, int64_t start,
                                            int64_t end, int flat_tid_117306,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128816
    *futhark_mc_segmap_parloop_struct_128816 =
    (struct futhark_mc_segmap_parloop_struct_128816 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128816->ctx;
    uint64_t futhark_mc_segmap_parloop_128817_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128817_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128816->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128816->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128816->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128816->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128816->free_i_112880;
    int64_t gtid_117303 =
            futhark_mc_segmap_parloop_struct_128816->free_gtid_117303;
    int64_t x_117401 = futhark_mc_segmap_parloop_struct_128816->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120670 = {.desc ="mem_120670", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_120670,
                                  .size =0, .references =NULL};
    struct memblock mem_120673 = {.desc ="mem_120673", .mem =
                                  futhark_mc_segmap_parloop_struct_128816->free_mem_120673,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_125916 = start;
    
    for (; iter_125916 < end; iter_125916++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125980 = t_n_m_112861;
        int64_t gtid_117307 = iter_125916;
        int64_t remnant_125981 = iter_125916 - gtid_117307;
        int64_t x_125686 = ((int64_t *) mem_119882.mem)[gtid_117303 *
                                                        t_n_m_112861 +
                                                        gtid_117307];
        float x_125687 = ((float *) mem_119886.mem)[gtid_117303 * t_n_m_112861 +
                                                    gtid_117307];
        int64_t min_arg_125688 = mul64(t_jump_112811, gtid_117307);
        int64_t min_res_125689 = smin64(i_112880, min_arg_125688);
        float defunc_0_f_res_125690 = sitofp_i64_f32(min_res_125689);
        float defunc_2_reduce_res_125691;
        float defunc_2_reduce_res_125692;
        float defunc_2_reduce_res_125693;
        int64_t flat_tid_117308 = (int64_t) 0;
        int32_t num_tasks_125982;
        struct futhark_mc_task_128818 futhark_mc_task_128818;
        
        futhark_mc_task_128818.ctx = ctx;
        futhark_mc_task_128818.free_n_112804 = n_112804;
        futhark_mc_task_128818.free_gtid_117303 = gtid_117303;
        futhark_mc_task_128818.free_x_117401 = x_117401;
        futhark_mc_task_128818.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128818.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128818.free_x_125686 = x_125686;
        futhark_mc_task_128818.free_x_125687 = x_125687;
        futhark_mc_task_128818.free_defunc_0_f_res_125690 =
            defunc_0_f_res_125690;
        futhark_mc_task_128818.retval_defunc_2_reduce_res_125691 =
            &defunc_2_reduce_res_125691;
        futhark_mc_task_128818.retval_defunc_2_reduce_res_125692 =
            &defunc_2_reduce_res_125692;
        futhark_mc_task_128818.retval_defunc_2_reduce_res_125693 =
            &defunc_2_reduce_res_125693;
        
        struct scheduler_segop futhark_mc_task_128818_task;
        
        futhark_mc_task_128818_task.args = &futhark_mc_task_128818;
        futhark_mc_task_128818_task.top_level_fn =
            futhark_mc_segred_task_128819;
        futhark_mc_task_128818_task.name = "futhark_mc_segred_task_128819";
        futhark_mc_task_128818_task.iterations = t_window_112807;
        futhark_mc_task_128818_task.task_time =
            &ctx->futhark_mc_segred_task_128819_total_time;
        futhark_mc_task_128818_task.task_iter =
            &ctx->futhark_mc_segred_task_128819_total_iter;
        futhark_mc_task_128818_task.sched = STATIC;
        futhark_mc_task_128818_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128819_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128818_task);
        
        if (futhark_mc_segred_task_128819_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_125722 = defunc_2_reduce_res_125691 *
              defunc_2_reduce_res_125693;
        float y_125723 = defunc_2_reduce_res_125692 *
              defunc_2_reduce_res_125692;
        float y_125724 = x_125722 - y_125723;
        float det1_125725 = 1.0F / y_125724;
        float a11_125726 = defunc_2_reduce_res_125693 * det1_125725;
        float negate_arg_125727 = defunc_2_reduce_res_125692 * det1_125725;
        float b11_125728 = 0.0F - negate_arg_125727;
        float c11_125729 = defunc_2_reduce_res_125691 * det1_125725;
        float defunc_2_reduce_res_125730;
        float defunc_2_reduce_res_125731;
        int64_t flat_tid_117310 = (int64_t) 0;
        int32_t num_tasks_126003;
        struct futhark_mc_task_128825 futhark_mc_task_128825;
        
        futhark_mc_task_128825.ctx = ctx;
        futhark_mc_task_128825.free_n_112804 = n_112804;
        futhark_mc_task_128825.free_gtid_117303 = gtid_117303;
        futhark_mc_task_128825.free_x_117401 = x_117401;
        futhark_mc_task_128825.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128825.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128825.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128825.free_x_125686 = x_125686;
        futhark_mc_task_128825.free_x_125687 = x_125687;
        futhark_mc_task_128825.free_defunc_0_f_res_125690 =
            defunc_0_f_res_125690;
        futhark_mc_task_128825.free_a11_125726 = a11_125726;
        futhark_mc_task_128825.free_b11_125728 = b11_125728;
        futhark_mc_task_128825.free_c11_125729 = c11_125729;
        futhark_mc_task_128825.retval_defunc_2_reduce_res_125730 =
            &defunc_2_reduce_res_125730;
        futhark_mc_task_128825.retval_defunc_2_reduce_res_125731 =
            &defunc_2_reduce_res_125731;
        
        struct scheduler_segop futhark_mc_task_128825_task;
        
        futhark_mc_task_128825_task.args = &futhark_mc_task_128825;
        futhark_mc_task_128825_task.top_level_fn =
            futhark_mc_segred_task_128826;
        futhark_mc_task_128825_task.name = "futhark_mc_segred_task_128826";
        futhark_mc_task_128825_task.iterations = t_window_112807;
        futhark_mc_task_128825_task.task_time =
            &ctx->futhark_mc_segred_task_128826_total_time;
        futhark_mc_task_128825_task.task_iter =
            &ctx->futhark_mc_segred_task_128826_total_iter;
        futhark_mc_task_128825_task.sched = STATIC;
        futhark_mc_task_128825_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128826_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128825_task);
        
        if (futhark_mc_segred_task_128826_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120670.mem)[gtid_117307] = defunc_2_reduce_res_125730;
        ((float *) mem_120673.mem)[gtid_117307] = defunc_2_reduce_res_125731;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128817_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128817_end -
                 futhark_mc_segmap_parloop_128817_start;
        
        ctx->futhark_mc_segmap_parloop_128817_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128817_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128817_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128815(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117306 = tid;
    int num_tasks_125847 = info.nsubtasks;
    struct futhark_mc_task_128811 *futhark_mc_task_128811 =
                                  (struct futhark_mc_task_128811 *) args;
    struct futhark_context *ctx = futhark_mc_task_128811->ctx;
    uint64_t futhark_mc_segmap_nested_task_128815_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128815_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128811->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128811->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128811->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128811->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128811->free_i_112880;
    int64_t gtid_117303 = futhark_mc_task_128811->free_gtid_117303;
    int64_t x_117401 = futhark_mc_task_128811->free_x_117401;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128811->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128811->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128811->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128811->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128811->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120670 = {.desc ="mem_120670", .mem =
                                  futhark_mc_task_128811->free_mem_120670,
                                  .size =0, .references =NULL};
    struct memblock mem_120673 = {.desc ="mem_120673", .mem =
                                  futhark_mc_task_128811->free_mem_120673,
                                  .size =0, .references =NULL};
    int64_t iter_125916;
    struct futhark_mc_segmap_parloop_struct_128816
    futhark_mc_segmap_parloop_struct_128816;
    
    futhark_mc_segmap_parloop_struct_128816.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128816.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128816.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128816.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128816.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128816.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128816.free_gtid_117303 = gtid_117303;
    futhark_mc_segmap_parloop_struct_128816.free_x_117401 = x_117401;
    futhark_mc_segmap_parloop_struct_128816.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_120670 = mem_120670.mem;
    futhark_mc_segmap_parloop_struct_128816.free_mem_120673 = mem_120673.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128817_task;
    
    futhark_mc_segmap_parloop_128817_task.name =
        "futhark_mc_segmap_parloop_128817";
    futhark_mc_segmap_parloop_128817_task.fn = futhark_mc_segmap_parloop_128817;
    futhark_mc_segmap_parloop_128817_task.args =
        &futhark_mc_segmap_parloop_struct_128816;
    futhark_mc_segmap_parloop_128817_task.iterations = iterations;
    futhark_mc_segmap_parloop_128817_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128817_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128817_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128817_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128817_task);
    
    if (futhark_mc_segmap_parloop_128817_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128817_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128817_total_end -
                 futhark_mc_segmap_parloop_128817_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128817_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128817_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128817_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128815_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128815_end -
                 futhark_mc_segmap_nested_task_128815_start;
        
        ctx->futhark_mc_segmap_nested_task_128815_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128815_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128815_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128808(void *args, int64_t start,
                                            int64_t end, int flat_tid_117302,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128807
    *futhark_mc_segmap_parloop_struct_128807 =
    (struct futhark_mc_segmap_parloop_struct_128807 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128807->ctx;
    uint64_t futhark_mc_segmap_parloop_128808_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128808_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128807->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128807->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128807->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128807->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128807->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128807->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128807->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120707 = {.desc ="mem_120707", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_120707,
                                  .size =0, .references =NULL};
    struct memblock mem_120711 = {.desc ="mem_120711", .mem =
                                  futhark_mc_segmap_parloop_struct_128807->free_mem_120711,
                                  .size =0, .references =NULL};
    size_t mem_120670_cached_sizze_128809 = 0;
    char *mem_120670 = NULL;
    size_t mem_120673_cached_sizze_128810 = 0;
    char *mem_120673 = NULL;
    int64_t iterations = end - start;
    int64_t iter_125685 = start;
    
    if (mem_120670_cached_sizze_128809 < (size_t) bytes_119828) {
        mem_120670 = realloc(mem_120670, bytes_119828);
        mem_120670_cached_sizze_128809 = bytes_119828;
    }
    if (mem_120673_cached_sizze_128810 < (size_t) bytes_119828) {
        mem_120673 = realloc(mem_120673, bytes_119828);
        mem_120673_cached_sizze_128810 = bytes_119828;
    }
    for (; iter_125685 < end; iter_125685++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_125845 = m_112803;
        int64_t gtid_117303 = iter_125685;
        int64_t remnant_125846 = iter_125685 - gtid_117303;
        int64_t x_117401 = ((int64_t *) mem_119696.mem)[gtid_117303];
        int64_t flat_tid_117304 = (int64_t) 0;
        int32_t num_tasks_125847;
        int64_t flat_tid_117306 = (int64_t) 0;
        struct futhark_mc_task_128811 futhark_mc_task_128811;
        
        futhark_mc_task_128811.ctx = ctx;
        futhark_mc_task_128811.free_n_112804 = n_112804;
        futhark_mc_task_128811.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128811.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128811.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128811.free_i_112880 = i_112880;
        futhark_mc_task_128811.free_gtid_117303 = gtid_117303;
        futhark_mc_task_128811.free_x_117401 = x_117401;
        futhark_mc_task_128811.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128811.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128811.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128811.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128811.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128811.free_mem_120670 = mem_120670;
        futhark_mc_task_128811.free_mem_120673 = mem_120673;
        
        struct scheduler_segop futhark_mc_task_128811_task;
        
        futhark_mc_task_128811_task.args = &futhark_mc_task_128811;
        futhark_mc_task_128811_task.top_level_fn =
            futhark_mc_segmap_task_128812;
        futhark_mc_task_128811_task.name = "futhark_mc_segmap_task_128812";
        futhark_mc_task_128811_task.iterations = t_n_m_112861;
        futhark_mc_task_128811_task.task_time =
            &ctx->futhark_mc_segmap_task_128812_total_time;
        futhark_mc_task_128811_task.task_iter =
            &ctx->futhark_mc_segmap_task_128812_total_iter;
        futhark_mc_task_128811_task.sched = STATIC;
        futhark_mc_task_128811_task.nested_fn =
            futhark_mc_segmap_nested_task_128815;
        
        int futhark_mc_segmap_task_128812_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128811_task);
        
        if (futhark_mc_segmap_task_128812_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120707.mem + gtid_117303 * t_n_m_112861 * (int64_t) 4,
                mem_120670 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120711.mem + gtid_117303 * t_n_m_112861 * (int64_t) 4,
                mem_120673 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120670);
    free(mem_120673);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128808_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128808_end -
                 futhark_mc_segmap_parloop_128808_start;
        
        ctx->futhark_mc_segmap_parloop_128808_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128808_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128808_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128806(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117302 = tid;
    int num_tasks_125591 = info.nsubtasks;
    struct futhark_mc_task_128800 *futhark_mc_task_128800 =
                                  (struct futhark_mc_task_128800 *) args;
    struct futhark_context *ctx = futhark_mc_task_128800->ctx;
    uint64_t futhark_mc_segmap_nested_task_128806_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128806_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128800->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128800->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128800->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128800->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128800->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128800->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128800->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128800->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128800->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128800->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128800->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128800->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128800->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120707 = {.desc ="mem_120707", .mem =
                                  futhark_mc_task_128800->free_mem_120707,
                                  .size =0, .references =NULL};
    struct memblock mem_120711 = {.desc ="mem_120711", .mem =
                                  futhark_mc_task_128800->free_mem_120711,
                                  .size =0, .references =NULL};
    int64_t iter_125685;
    struct futhark_mc_segmap_parloop_struct_128807
    futhark_mc_segmap_parloop_struct_128807;
    
    futhark_mc_segmap_parloop_struct_128807.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128807.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128807.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128807.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128807.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128807.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128807.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128807.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128807.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128807.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_120707 = mem_120707.mem;
    futhark_mc_segmap_parloop_struct_128807.free_mem_120711 = mem_120711.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128808_task;
    
    futhark_mc_segmap_parloop_128808_task.name =
        "futhark_mc_segmap_parloop_128808";
    futhark_mc_segmap_parloop_128808_task.fn = futhark_mc_segmap_parloop_128808;
    futhark_mc_segmap_parloop_128808_task.args =
        &futhark_mc_segmap_parloop_struct_128807;
    futhark_mc_segmap_parloop_128808_task.iterations = iterations;
    futhark_mc_segmap_parloop_128808_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128808_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128808_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128808_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128808_task);
    
    if (futhark_mc_segmap_parloop_128808_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128808_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128808_total_end -
                 futhark_mc_segmap_parloop_128808_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128808_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128808_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128808_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128806_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128806_end -
                 futhark_mc_segmap_nested_task_128806_start;
        
        ctx->futhark_mc_segmap_nested_task_128806_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128806_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128806_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128831 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120751;
    char *free_mem_120755;
};
struct futhark_mc_segmap_parloop_struct_128833 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120751;
    char *free_mem_120755;
};
static int futhark_mc_segmap_parloop_128834(void *args, int64_t start,
                                            int64_t end, int flat_tid_117572,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128833
    *futhark_mc_segmap_parloop_struct_128833 =
    (struct futhark_mc_segmap_parloop_struct_128833 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128833->ctx;
    uint64_t futhark_mc_segmap_parloop_128834_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128834_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128833->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128833->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128833->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128833->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128833->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128833->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128833->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120751 = {.desc ="mem_120751", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_120751,
                                  .size =0, .references =NULL};
    struct memblock mem_120755 = {.desc ="mem_120755", .mem =
                                  futhark_mc_segmap_parloop_struct_128833->free_mem_120755,
                                  .size =0, .references =NULL};
    size_t mem_120720_cached_sizze_128835 = 0;
    char *mem_120720 = NULL;
    size_t mem_120723_cached_sizze_128836 = 0;
    char *mem_120723 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126019 = start;
    
    if (mem_120720_cached_sizze_128835 < (size_t) bytes_119828) {
        mem_120720 = realloc(mem_120720, bytes_119828);
        mem_120720_cached_sizze_128835 = bytes_119828;
    }
    if (mem_120723_cached_sizze_128836 < (size_t) bytes_119828) {
        mem_120723 = realloc(mem_120723, bytes_119828);
        mem_120723_cached_sizze_128836 = bytes_119828;
    }
    for (; iter_126019 < end; iter_126019++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126133 = m_112803;
        int64_t gtid_117573 = iter_126019;
        int64_t remnant_126134 = iter_126019 - gtid_117573;
        int64_t x_114276 = ((int64_t *) mem_119696.mem)[gtid_117573];
        
        for (int64_t i_126020 = 0; i_126020 < t_n_m_112861; i_126020++) {
            int64_t x_126023 = ((int64_t *) mem_119882.mem)[gtid_117573 *
                                                            t_n_m_112861 +
                                                            i_126020];
            float x_126024 = ((float *) mem_119886.mem)[gtid_117573 *
                                                        t_n_m_112861 +
                                                        i_126020];
            int64_t min_arg_126025 = mul64(t_jump_112811, i_126020);
            int64_t min_res_126026 = smin64(i_112880, min_arg_126025);
            float defunc_0_f_res_126027 = sitofp_i64_f32(min_res_126026);
            float defunc_2_reduce_res_126028;
            float defunc_2_reduce_res_126029;
            float defunc_2_reduce_res_126030;
            float defunc_2_reduce_res_126031;
            float defunc_2_reduce_res_126032;
            float redout_126034;
            float redout_126035;
            float redout_126036;
            float redout_126037;
            float redout_126038;
            
            redout_126034 = 0.0F;
            redout_126035 = 0.0F;
            redout_126036 = 0.0F;
            redout_126037 = 0.0F;
            redout_126038 = 0.0F;
            for (int64_t i_126033 = 0; i_126033 < t_window_112807; i_126033++) {
                bool cond_126039 = sle64(x_114276, i_126033);
                float defunc_0_f_res_126040;
                
                if (cond_126039) {
                    defunc_0_f_res_126040 = 0.0F;
                } else {
                    int64_t i_126041 = add64(x_126023, i_126033);
                    float x_126042 = ((float *) mem_119718.mem)[gtid_117573 *
                                                                n_112804 +
                                                                i_126041];
                    float defunc_0_f_res_f_res_126043 = 1.0F + x_126042;
                    
                    defunc_0_f_res_126040 = defunc_0_f_res_f_res_126043;
                }
                
                float defunc_0_f_res_126044;
                
                if (cond_126039) {
                    defunc_0_f_res_126044 = 0.0F;
                } else {
                    int64_t i_126045 = add64(x_126023, i_126033);
                    float x_126046 = ((float *) mem_120637.mem)[gtid_117573 *
                                                                n_112804 +
                                                                i_126045];
                    
                    defunc_0_f_res_126044 = x_126046;
                }
                
                float x_j_126047 = defunc_0_f_res_126040 -
                      defunc_0_f_res_126027;
                float abs_res_126048 = (float) fabs(x_j_126047);
                float tmp1_126049 = abs_res_126048 / x_126024;
                float x_126050 = tmp1_126049 * tmp1_126049;
                float y_126051 = tmp1_126049 * x_126050;
                float tmp2_126052 = 1.0F - y_126051;
                float x_126053 = tmp2_126052 * tmp2_126052;
                float tmp3_126054 = tmp2_126052 * x_126053;
                float w_j_126055 = defunc_0_f_res_126044 * tmp3_126054;
                float xw_j_126056 = x_j_126047 * w_j_126055;
                float x2w_j_126057 = x_j_126047 * xw_j_126056;
                float x3w_j_126058 = x_j_126047 * x2w_j_126057;
                float x4w_j_126059 = x_j_126047 * x3w_j_126058;
                float defunc_1_op_res_126060 = w_j_126055 + redout_126034;
                float defunc_1_op_res_126061 = xw_j_126056 + redout_126035;
                float defunc_1_op_res_126062 = x2w_j_126057 + redout_126036;
                float defunc_1_op_res_126063 = x3w_j_126058 + redout_126037;
                float defunc_1_op_res_126064 = x4w_j_126059 + redout_126038;
                float redout_tmp_126137 = defunc_1_op_res_126060;
                float redout_tmp_126138 = defunc_1_op_res_126061;
                float redout_tmp_126139 = defunc_1_op_res_126062;
                float redout_tmp_126140 = defunc_1_op_res_126063;
                float redout_tmp_126141 = defunc_1_op_res_126064;
                
                redout_126034 = redout_tmp_126137;
                redout_126035 = redout_tmp_126138;
                redout_126036 = redout_tmp_126139;
                redout_126037 = redout_tmp_126140;
                redout_126038 = redout_tmp_126141;
            }
            defunc_2_reduce_res_126028 = redout_126034;
            defunc_2_reduce_res_126029 = redout_126035;
            defunc_2_reduce_res_126030 = redout_126036;
            defunc_2_reduce_res_126031 = redout_126037;
            defunc_2_reduce_res_126032 = redout_126038;
            
            float x_126065 = defunc_2_reduce_res_126030 *
                  defunc_2_reduce_res_126032;
            float y_126066 = defunc_2_reduce_res_126031 *
                  defunc_2_reduce_res_126031;
            float a12_126067 = x_126065 - y_126066;
            float x_126068 = defunc_2_reduce_res_126030 *
                  defunc_2_reduce_res_126031;
            float y_126069 = defunc_2_reduce_res_126029 *
                  defunc_2_reduce_res_126032;
            float b12_126070 = x_126068 - y_126069;
            float x_126071 = defunc_2_reduce_res_126029 *
                  defunc_2_reduce_res_126031;
            float y_126072 = defunc_2_reduce_res_126030 *
                  defunc_2_reduce_res_126030;
            float c12_126073 = x_126071 - y_126072;
            float x_126074 = defunc_2_reduce_res_126028 *
                  defunc_2_reduce_res_126032;
            float b2_126075 = x_126074 - y_126072;
            float x_126076 = defunc_2_reduce_res_126029 *
                  defunc_2_reduce_res_126030;
            float y_126077 = defunc_2_reduce_res_126028 *
                  defunc_2_reduce_res_126031;
            float c2_126078 = x_126076 - y_126077;
            float x_126079 = defunc_2_reduce_res_126028 * a12_126067;
            float y_126080 = defunc_2_reduce_res_126029 * b12_126070;
            float x_126081 = x_126079 + y_126080;
            float y_126082 = defunc_2_reduce_res_126030 * c12_126073;
            float y_126083 = x_126081 + y_126082;
            float det_126084 = 1.0F / y_126083;
            float a12_126085 = a12_126067 * det_126084;
            float b12_126086 = b12_126070 * det_126084;
            float c12_126087 = c12_126073 * det_126084;
            float b2_126088 = b2_126075 * det_126084;
            float c2_126089 = c2_126078 * det_126084;
            float defunc_2_reduce_res_126090;
            float defunc_2_reduce_res_126091;
            float redout_126093;
            float redout_126094;
            
            redout_126093 = 0.0F;
            redout_126094 = 0.0F;
            for (int64_t i_126092 = 0; i_126092 < t_window_112807; i_126092++) {
                bool cond_126095 = sle64(x_114276, i_126092);
                float defunc_0_f_res_126096;
                
                if (cond_126095) {
                    defunc_0_f_res_126096 = 0.0F;
                } else {
                    int64_t i_126097 = add64(x_126023, i_126092);
                    float x_126098 = ((float *) mem_119718.mem)[gtid_117573 *
                                                                n_112804 +
                                                                i_126097];
                    float defunc_0_f_res_f_res_126099 = 1.0F + x_126098;
                    
                    defunc_0_f_res_126096 = defunc_0_f_res_f_res_126099;
                }
                
                float defunc_0_f_res_126100;
                
                if (cond_126095) {
                    defunc_0_f_res_126100 = 0.0F;
                } else {
                    int64_t i_126101 = add64(x_126023, i_126092);
                    float x_126102 = ((float *) mem_120637.mem)[gtid_117573 *
                                                                n_112804 +
                                                                i_126101];
                    
                    defunc_0_f_res_126100 = x_126102;
                }
                
                float x_j_126103 = defunc_0_f_res_126096 -
                      defunc_0_f_res_126027;
                float abs_res_126104 = (float) fabs(x_j_126103);
                float tmp1_126105 = abs_res_126104 / x_126024;
                float x_126106 = tmp1_126105 * tmp1_126105;
                float y_126107 = tmp1_126105 * x_126106;
                float tmp2_126108 = 1.0F - y_126107;
                float x_126109 = tmp2_126108 * tmp2_126108;
                float tmp3_126110 = tmp2_126108 * x_126109;
                float tmp4_126111 = defunc_0_f_res_126100 * tmp3_126110;
                float defunc_1_f_res_126112 = x_j_126103 * tmp4_126111;
                float defunc_1_f_res_126113 = x_j_126103 *
                      defunc_1_f_res_126112;
                float defunc_0_f_res_126114;
                
                if (cond_126095) {
                    defunc_0_f_res_126114 = 0.0F;
                } else {
                    int64_t i_126115 = add64(x_126023, i_126092);
                    float x_126116 = ((float *) mem_120633.mem)[gtid_117573 *
                                                                n_112804 +
                                                                i_126115];
                    
                    defunc_0_f_res_126114 = x_126116;
                }
                
                float x_126117 = a12_126085 * tmp4_126111;
                float y_126118 = b12_126086 * defunc_1_f_res_126112;
                float x_126119 = x_126117 + y_126118;
                float y_126120 = c12_126087 * defunc_1_f_res_126113;
                float x_126121 = x_126119 + y_126120;
                float defunc_9_fit_fun_res_126122 = defunc_0_f_res_126114 *
                      x_126121;
                float x_126123 = b12_126086 * tmp4_126111;
                float y_126124 = b2_126088 * defunc_1_f_res_126112;
                float x_126125 = x_126123 + y_126124;
                float y_126126 = c2_126089 * defunc_1_f_res_126113;
                float x_126127 = x_126125 + y_126126;
                float defunc_9_slope_fun_res_126128 = defunc_0_f_res_126114 *
                      x_126127;
                float defunc_1_op_res_126129 = defunc_9_fit_fun_res_126122 +
                      redout_126093;
                float defunc_1_op_res_126130 = defunc_9_slope_fun_res_126128 +
                      redout_126094;
                float redout_tmp_126142 = defunc_1_op_res_126129;
                float redout_tmp_126143 = defunc_1_op_res_126130;
                
                redout_126093 = redout_tmp_126142;
                redout_126094 = redout_tmp_126143;
            }
            defunc_2_reduce_res_126090 = redout_126093;
            defunc_2_reduce_res_126091 = redout_126094;
            ((float *) mem_120720)[i_126020] = defunc_2_reduce_res_126090;
            ((float *) mem_120723)[i_126020] = defunc_2_reduce_res_126091;
        }
        memmove(mem_120751.mem + gtid_117573 * t_n_m_112861 * (int64_t) 4,
                mem_120720 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120755.mem + gtid_117573 * t_n_m_112861 * (int64_t) 4,
                mem_120723 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120720);
    free(mem_120723);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128834_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128834_end -
                 futhark_mc_segmap_parloop_128834_start;
        
        ctx->futhark_mc_segmap_parloop_128834_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128834_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128834_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128832(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117572 = tid;
    int num_tasks_126018 = info.nsubtasks;
    struct futhark_mc_task_128831 *futhark_mc_task_128831 =
                                  (struct futhark_mc_task_128831 *) args;
    struct futhark_context *ctx = futhark_mc_task_128831->ctx;
    uint64_t futhark_mc_segmap_task_128832_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128832_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128831->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128831->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128831->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128831->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128831->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128831->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128831->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128831->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128831->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128831->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128831->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128831->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128831->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120751 = {.desc ="mem_120751", .mem =
                                  futhark_mc_task_128831->free_mem_120751,
                                  .size =0, .references =NULL};
    struct memblock mem_120755 = {.desc ="mem_120755", .mem =
                                  futhark_mc_task_128831->free_mem_120755,
                                  .size =0, .references =NULL};
    int64_t iter_126019;
    struct futhark_mc_segmap_parloop_struct_128833
    futhark_mc_segmap_parloop_struct_128833;
    
    futhark_mc_segmap_parloop_struct_128833.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128833.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128833.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128833.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128833.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128833.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128833.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128833.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128833.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128833.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_120751 = mem_120751.mem;
    futhark_mc_segmap_parloop_struct_128833.free_mem_120755 = mem_120755.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128834_task;
    
    futhark_mc_segmap_parloop_128834_task.name =
        "futhark_mc_segmap_parloop_128834";
    futhark_mc_segmap_parloop_128834_task.fn = futhark_mc_segmap_parloop_128834;
    futhark_mc_segmap_parloop_128834_task.args =
        &futhark_mc_segmap_parloop_struct_128833;
    futhark_mc_segmap_parloop_128834_task.iterations = iterations;
    futhark_mc_segmap_parloop_128834_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128834_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128834_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128834_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128834_task);
    
    if (futhark_mc_segmap_parloop_128834_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128834_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128834_total_end -
                 futhark_mc_segmap_parloop_128834_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128834_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128834_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128834_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128832_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128832_end -
                 futhark_mc_segmap_task_128832_start;
        
        ctx->futhark_mc_segmap_task_128832_runs[tid]++;
        ctx->futhark_mc_segmap_task_128832_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128832_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128838 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120751;
    char *free_mem_120755;
};
struct futhark_mc_task_128842 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120714;
    char *free_mem_120717;
};
struct futhark_mc_segmap_parloop_struct_128844 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120714;
    char *free_mem_120717;
};
static int futhark_mc_segmap_parloop_128845(void *args, int64_t start,
                                            int64_t end, int flat_tid_117576,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128844
    *futhark_mc_segmap_parloop_struct_128844 =
    (struct futhark_mc_segmap_parloop_struct_128844 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128844->ctx;
    uint64_t futhark_mc_segmap_parloop_128845_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128845_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128844->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128844->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128844->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128844->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128844->free_i_112880;
    int64_t gtid_117575 =
            futhark_mc_segmap_parloop_struct_128844->free_gtid_117575;
    int64_t x_117705 = futhark_mc_segmap_parloop_struct_128844->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120714 = {.desc ="mem_120714", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_120714,
                                  .size =0, .references =NULL};
    struct memblock mem_120717 = {.desc ="mem_120717", .mem =
                                  futhark_mc_segmap_parloop_struct_128844->free_mem_120717,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126369 = start;
    
    for (; iter_126369 < end; iter_126369++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126441 = t_n_m_112861;
        int64_t gtid_117577 = iter_126369;
        int64_t remnant_126442 = iter_126369 - gtid_117577;
        int64_t x_126258 = ((int64_t *) mem_119882.mem)[gtid_117575 *
                                                        t_n_m_112861 +
                                                        gtid_117577];
        float x_126259 = ((float *) mem_119886.mem)[gtid_117575 * t_n_m_112861 +
                                                    gtid_117577];
        int64_t min_arg_126260 = mul64(t_jump_112811, gtid_117577);
        int64_t min_res_126261 = smin64(i_112880, min_arg_126260);
        float defunc_0_f_res_126262 = sitofp_i64_f32(min_res_126261);
        float defunc_2_reduce_res_126263;
        float defunc_2_reduce_res_126264;
        float defunc_2_reduce_res_126265;
        float defunc_2_reduce_res_126266;
        float defunc_2_reduce_res_126267;
        float redout_126371;
        float redout_126372;
        float redout_126373;
        float redout_126374;
        float redout_126375;
        
        redout_126371 = 0.0F;
        redout_126372 = 0.0F;
        redout_126373 = 0.0F;
        redout_126374 = 0.0F;
        redout_126375 = 0.0F;
        for (int64_t i_126370 = 0; i_126370 < t_window_112807; i_126370++) {
            bool cond_126376 = sle64(x_117705, i_126370);
            float defunc_0_f_res_126377;
            
            if (cond_126376) {
                defunc_0_f_res_126377 = 0.0F;
            } else {
                int64_t i_126378 = add64(x_126258, i_126370);
                float x_126379 = ((float *) mem_119718.mem)[gtid_117575 *
                                                            n_112804 +
                                                            i_126378];
                float defunc_0_f_res_f_res_126380 = 1.0F + x_126379;
                
                defunc_0_f_res_126377 = defunc_0_f_res_f_res_126380;
            }
            
            float defunc_0_f_res_126381;
            
            if (cond_126376) {
                defunc_0_f_res_126381 = 0.0F;
            } else {
                int64_t i_126382 = add64(x_126258, i_126370);
                float x_126383 = ((float *) mem_120637.mem)[gtid_117575 *
                                                            n_112804 +
                                                            i_126382];
                
                defunc_0_f_res_126381 = x_126383;
            }
            
            float x_j_126384 = defunc_0_f_res_126377 - defunc_0_f_res_126262;
            float abs_res_126385 = (float) fabs(x_j_126384);
            float tmp1_126386 = abs_res_126385 / x_126259;
            float x_126387 = tmp1_126386 * tmp1_126386;
            float y_126388 = tmp1_126386 * x_126387;
            float tmp2_126389 = 1.0F - y_126388;
            float x_126390 = tmp2_126389 * tmp2_126389;
            float tmp3_126391 = tmp2_126389 * x_126390;
            float w_j_126392 = defunc_0_f_res_126381 * tmp3_126391;
            float xw_j_126393 = x_j_126384 * w_j_126392;
            float x2w_j_126394 = x_j_126384 * xw_j_126393;
            float x3w_j_126395 = x_j_126384 * x2w_j_126394;
            float x4w_j_126396 = x_j_126384 * x3w_j_126395;
            float defunc_1_op_res_126397 = w_j_126392 + redout_126371;
            float defunc_1_op_res_126398 = xw_j_126393 + redout_126372;
            float defunc_1_op_res_126399 = x2w_j_126394 + redout_126373;
            float defunc_1_op_res_126400 = x3w_j_126395 + redout_126374;
            float defunc_1_op_res_126401 = x4w_j_126396 + redout_126375;
            float redout_tmp_126443 = defunc_1_op_res_126397;
            float redout_tmp_126444 = defunc_1_op_res_126398;
            float redout_tmp_126445 = defunc_1_op_res_126399;
            float redout_tmp_126446 = defunc_1_op_res_126400;
            float redout_tmp_126447 = defunc_1_op_res_126401;
            
            redout_126371 = redout_tmp_126443;
            redout_126372 = redout_tmp_126444;
            redout_126373 = redout_tmp_126445;
            redout_126374 = redout_tmp_126446;
            redout_126375 = redout_tmp_126447;
        }
        defunc_2_reduce_res_126263 = redout_126371;
        defunc_2_reduce_res_126264 = redout_126372;
        defunc_2_reduce_res_126265 = redout_126373;
        defunc_2_reduce_res_126266 = redout_126374;
        defunc_2_reduce_res_126267 = redout_126375;
        
        float x_126300 = defunc_2_reduce_res_126265 *
              defunc_2_reduce_res_126267;
        float y_126301 = defunc_2_reduce_res_126266 *
              defunc_2_reduce_res_126266;
        float a12_126302 = x_126300 - y_126301;
        float x_126303 = defunc_2_reduce_res_126265 *
              defunc_2_reduce_res_126266;
        float y_126304 = defunc_2_reduce_res_126264 *
              defunc_2_reduce_res_126267;
        float b12_126305 = x_126303 - y_126304;
        float x_126306 = defunc_2_reduce_res_126264 *
              defunc_2_reduce_res_126266;
        float y_126307 = defunc_2_reduce_res_126265 *
              defunc_2_reduce_res_126265;
        float c12_126308 = x_126306 - y_126307;
        float x_126309 = defunc_2_reduce_res_126263 *
              defunc_2_reduce_res_126267;
        float b2_126310 = x_126309 - y_126307;
        float x_126311 = defunc_2_reduce_res_126264 *
              defunc_2_reduce_res_126265;
        float y_126312 = defunc_2_reduce_res_126263 *
              defunc_2_reduce_res_126266;
        float c2_126313 = x_126311 - y_126312;
        float x_126314 = defunc_2_reduce_res_126263 * a12_126302;
        float y_126315 = defunc_2_reduce_res_126264 * b12_126305;
        float x_126316 = x_126314 + y_126315;
        float y_126317 = defunc_2_reduce_res_126265 * c12_126308;
        float y_126318 = x_126316 + y_126317;
        float det_126319 = 1.0F / y_126318;
        float a12_126320 = a12_126302 * det_126319;
        float b12_126321 = b12_126305 * det_126319;
        float c12_126322 = c12_126308 * det_126319;
        float b2_126323 = b2_126310 * det_126319;
        float c2_126324 = c2_126313 * det_126319;
        float defunc_2_reduce_res_126325;
        float defunc_2_reduce_res_126326;
        float redout_126403;
        float redout_126404;
        
        redout_126403 = 0.0F;
        redout_126404 = 0.0F;
        for (int64_t i_126402 = 0; i_126402 < t_window_112807; i_126402++) {
            bool cond_126405 = sle64(x_117705, i_126402);
            float defunc_0_f_res_126406;
            
            if (cond_126405) {
                defunc_0_f_res_126406 = 0.0F;
            } else {
                int64_t i_126407 = add64(x_126258, i_126402);
                float x_126408 = ((float *) mem_119718.mem)[gtid_117575 *
                                                            n_112804 +
                                                            i_126407];
                float defunc_0_f_res_f_res_126409 = 1.0F + x_126408;
                
                defunc_0_f_res_126406 = defunc_0_f_res_f_res_126409;
            }
            
            float defunc_0_f_res_126410;
            
            if (cond_126405) {
                defunc_0_f_res_126410 = 0.0F;
            } else {
                int64_t i_126411 = add64(x_126258, i_126402);
                float x_126412 = ((float *) mem_120637.mem)[gtid_117575 *
                                                            n_112804 +
                                                            i_126411];
                
                defunc_0_f_res_126410 = x_126412;
            }
            
            float x_j_126413 = defunc_0_f_res_126406 - defunc_0_f_res_126262;
            float abs_res_126414 = (float) fabs(x_j_126413);
            float tmp1_126415 = abs_res_126414 / x_126259;
            float x_126416 = tmp1_126415 * tmp1_126415;
            float y_126417 = tmp1_126415 * x_126416;
            float tmp2_126418 = 1.0F - y_126417;
            float x_126419 = tmp2_126418 * tmp2_126418;
            float tmp3_126420 = tmp2_126418 * x_126419;
            float tmp4_126421 = defunc_0_f_res_126410 * tmp3_126420;
            float defunc_1_f_res_126422 = x_j_126413 * tmp4_126421;
            float defunc_1_f_res_126423 = x_j_126413 * defunc_1_f_res_126422;
            float defunc_0_f_res_126424;
            
            if (cond_126405) {
                defunc_0_f_res_126424 = 0.0F;
            } else {
                int64_t i_126425 = add64(x_126258, i_126402);
                float x_126426 = ((float *) mem_120633.mem)[gtid_117575 *
                                                            n_112804 +
                                                            i_126425];
                
                defunc_0_f_res_126424 = x_126426;
            }
            
            float x_126427 = a12_126320 * tmp4_126421;
            float y_126428 = b12_126321 * defunc_1_f_res_126422;
            float x_126429 = x_126427 + y_126428;
            float y_126430 = c12_126322 * defunc_1_f_res_126423;
            float x_126431 = x_126429 + y_126430;
            float defunc_9_fit_fun_res_126432 = defunc_0_f_res_126424 *
                  x_126431;
            float x_126433 = b12_126321 * tmp4_126421;
            float y_126434 = b2_126323 * defunc_1_f_res_126422;
            float x_126435 = x_126433 + y_126434;
            float y_126436 = c2_126324 * defunc_1_f_res_126423;
            float x_126437 = x_126435 + y_126436;
            float defunc_9_slope_fun_res_126438 = defunc_0_f_res_126424 *
                  x_126437;
            float defunc_1_op_res_126439 = defunc_9_fit_fun_res_126432 +
                  redout_126403;
            float defunc_1_op_res_126440 = defunc_9_slope_fun_res_126438 +
                  redout_126404;
            float redout_tmp_126448 = defunc_1_op_res_126439;
            float redout_tmp_126449 = defunc_1_op_res_126440;
            
            redout_126403 = redout_tmp_126448;
            redout_126404 = redout_tmp_126449;
        }
        defunc_2_reduce_res_126325 = redout_126403;
        defunc_2_reduce_res_126326 = redout_126404;
        ((float *) mem_120714.mem)[gtid_117577] = defunc_2_reduce_res_126325;
        ((float *) mem_120717.mem)[gtid_117577] = defunc_2_reduce_res_126326;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128845_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128845_end -
                 futhark_mc_segmap_parloop_128845_start;
        
        ctx->futhark_mc_segmap_parloop_128845_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128845_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128845_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128843(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117576 = tid;
    int num_tasks_126368 = info.nsubtasks;
    struct futhark_mc_task_128842 *futhark_mc_task_128842 =
                                  (struct futhark_mc_task_128842 *) args;
    struct futhark_context *ctx = futhark_mc_task_128842->ctx;
    uint64_t futhark_mc_segmap_task_128843_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128843_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128842->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128842->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128842->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128842->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128842->free_i_112880;
    int64_t gtid_117575 = futhark_mc_task_128842->free_gtid_117575;
    int64_t x_117705 = futhark_mc_task_128842->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128842->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128842->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128842->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128842->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128842->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120714 = {.desc ="mem_120714", .mem =
                                  futhark_mc_task_128842->free_mem_120714,
                                  .size =0, .references =NULL};
    struct memblock mem_120717 = {.desc ="mem_120717", .mem =
                                  futhark_mc_task_128842->free_mem_120717,
                                  .size =0, .references =NULL};
    int64_t iter_126369;
    struct futhark_mc_segmap_parloop_struct_128844
    futhark_mc_segmap_parloop_struct_128844;
    
    futhark_mc_segmap_parloop_struct_128844.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128844.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128844.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128844.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128844.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128844.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128844.free_gtid_117575 = gtid_117575;
    futhark_mc_segmap_parloop_struct_128844.free_x_117705 = x_117705;
    futhark_mc_segmap_parloop_struct_128844.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_120714 = mem_120714.mem;
    futhark_mc_segmap_parloop_struct_128844.free_mem_120717 = mem_120717.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128845_task;
    
    futhark_mc_segmap_parloop_128845_task.name =
        "futhark_mc_segmap_parloop_128845";
    futhark_mc_segmap_parloop_128845_task.fn = futhark_mc_segmap_parloop_128845;
    futhark_mc_segmap_parloop_128845_task.args =
        &futhark_mc_segmap_parloop_struct_128844;
    futhark_mc_segmap_parloop_128845_task.iterations = iterations;
    futhark_mc_segmap_parloop_128845_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128845_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128845_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128845_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128845_task);
    
    if (futhark_mc_segmap_parloop_128845_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128845_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128845_total_end -
                 futhark_mc_segmap_parloop_128845_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128845_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128845_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128845_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128843_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128843_end -
                 futhark_mc_segmap_task_128843_start;
        
        ctx->futhark_mc_segmap_task_128843_runs[tid]++;
        ctx->futhark_mc_segmap_task_128843_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128843_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128847 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    char *free_mem_120714;
    char *free_mem_120717;
};
struct futhark_mc_task_128849 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126145;
    float free_x_126146;
    float free_defunc_0_f_res_126149;
    float *retval_defunc_2_reduce_res_126150;
    float *retval_defunc_2_reduce_res_126151;
    float *retval_defunc_2_reduce_res_126152;
    float *retval_defunc_2_reduce_res_126153;
    float *retval_defunc_2_reduce_res_126154;
};
struct futhark_mc_segred_stage_1_parloop_struct_128856 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126145;
    float free_x_126146;
    float free_defunc_0_f_res_126149;
    char *free_reduce_stage_1_tid_res_arr_mem_126530;
    char *free_reduce_stage_1_tid_res_arr_mem_126532;
    char *free_reduce_stage_1_tid_res_arr_mem_126534;
    char *free_reduce_stage_1_tid_res_arr_mem_126536;
    char *free_reduce_stage_1_tid_res_arr_mem_126538;
};
static int futhark_mc_segred_stage_1_parloop_128857(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117580,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128856
    *futhark_mc_segred_stage_1_parloop_struct_128856 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128856 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128856->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128857_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128857_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128856->free_n_112804;
    int64_t gtid_117575 =
            futhark_mc_segred_stage_1_parloop_struct_128856->free_gtid_117575;
    int64_t x_117705 =
            futhark_mc_segred_stage_1_parloop_struct_128856->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128856->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128856->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126145 =
            futhark_mc_segred_stage_1_parloop_struct_128856->free_x_126145;
    float x_126146 =
          futhark_mc_segred_stage_1_parloop_struct_128856->free_x_126146;
    float defunc_0_f_res_126149 =
          futhark_mc_segred_stage_1_parloop_struct_128856->free_defunc_0_f_res_126149;
    struct memblock reduce_stage_1_tid_res_arr_mem_126530 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126530",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128856->free_reduce_stage_1_tid_res_arr_mem_126530,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126532 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126532",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128856->free_reduce_stage_1_tid_res_arr_mem_126532,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126534 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126534",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128856->free_reduce_stage_1_tid_res_arr_mem_126534,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126536 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126536",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128856->free_reduce_stage_1_tid_res_arr_mem_126536,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126538 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126538",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128856->free_reduce_stage_1_tid_res_arr_mem_126538,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126540 = start;
    float x_126451;
    float x_126452;
    float x_126454;
    float x_126455;
    float x_126457;
    float x_126458;
    float x_126460;
    float x_126461;
    float x_126463;
    float x_126464;
    float local_acc_126541 = 0.0F;
    float local_acc_126542 = 0.0F;
    float local_acc_126543 = 0.0F;
    float local_acc_126544 = 0.0F;
    float local_acc_126545 = 0.0F;
    
    for (; iter_126540 < end; iter_126540++) {
        int64_t gtid_117581 = iter_126540;
        bool cond_126466 = sle64(x_117705, gtid_117581);
        float defunc_0_f_res_126467;
        
        if (cond_126466) {
            defunc_0_f_res_126467 = 0.0F;
        } else {
            int64_t i_126468 = add64(gtid_117581, x_126145);
            float x_126469 = ((float *) mem_119718.mem)[gtid_117575 * n_112804 +
                                                        i_126468];
            float defunc_0_f_res_f_res_126470 = 1.0F + x_126469;
            
            defunc_0_f_res_126467 = defunc_0_f_res_f_res_126470;
        }
        
        float defunc_0_f_res_126471;
        
        if (cond_126466) {
            defunc_0_f_res_126471 = 0.0F;
        } else {
            int64_t i_126472 = add64(gtid_117581, x_126145);
            float x_126473 = ((float *) mem_120637.mem)[gtid_117575 * n_112804 +
                                                        i_126472];
            
            defunc_0_f_res_126471 = x_126473;
        }
        
        float x_j_126474 = defunc_0_f_res_126467 - defunc_0_f_res_126149;
        float abs_res_126475 = (float) fabs(x_j_126474);
        float tmp1_126476 = abs_res_126475 / x_126146;
        float x_126477 = tmp1_126476 * tmp1_126476;
        float y_126478 = tmp1_126476 * x_126477;
        float tmp2_126479 = 1.0F - y_126478;
        float x_126480 = tmp2_126479 * tmp2_126479;
        float tmp3_126481 = tmp2_126479 * x_126480;
        float w_j_126482 = defunc_0_f_res_126471 * tmp3_126481;
        float xw_j_126483 = x_j_126474 * w_j_126482;
        float x2w_j_126484 = x_j_126474 * xw_j_126483;
        float x3w_j_126485 = x_j_126474 * x2w_j_126484;
        float x4w_j_126486 = x_j_126474 * x3w_j_126485;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126451 = local_acc_126541;
        }
        // Load next params
        {
            x_126452 = w_j_126482;
        }
        // Red body
        {
            float defunc_1_op_res_126453 = x_126451 + x_126452;
            
            local_acc_126541 = defunc_1_op_res_126453;
        }
        // Load accum params
        {
            x_126454 = local_acc_126542;
        }
        // Load next params
        {
            x_126455 = xw_j_126483;
        }
        // Red body
        {
            float defunc_1_op_res_126456 = x_126454 + x_126455;
            
            local_acc_126542 = defunc_1_op_res_126456;
        }
        // Load accum params
        {
            x_126457 = local_acc_126543;
        }
        // Load next params
        {
            x_126458 = x2w_j_126484;
        }
        // Red body
        {
            float defunc_1_op_res_126459 = x_126457 + x_126458;
            
            local_acc_126543 = defunc_1_op_res_126459;
        }
        // Load accum params
        {
            x_126460 = local_acc_126544;
        }
        // Load next params
        {
            x_126461 = x3w_j_126485;
        }
        // Red body
        {
            float defunc_1_op_res_126462 = x_126460 + x_126461;
            
            local_acc_126544 = defunc_1_op_res_126462;
        }
        // Load accum params
        {
            x_126463 = local_acc_126545;
        }
        // Load next params
        {
            x_126464 = x4w_j_126486;
        }
        // Red body
        {
            float defunc_1_op_res_126465 = x_126463 + x_126464;
            
            local_acc_126545 = defunc_1_op_res_126465;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126530.mem)[flat_tid_117580] =
        local_acc_126541;
    ((float *) reduce_stage_1_tid_res_arr_mem_126532.mem)[flat_tid_117580] =
        local_acc_126542;
    ((float *) reduce_stage_1_tid_res_arr_mem_126534.mem)[flat_tid_117580] =
        local_acc_126543;
    ((float *) reduce_stage_1_tid_res_arr_mem_126536.mem)[flat_tid_117580] =
        local_acc_126544;
    ((float *) reduce_stage_1_tid_res_arr_mem_126538.mem)[flat_tid_117580] =
        local_acc_126545;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128857_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128857_end -
                 futhark_mc_segred_stage_1_parloop_128857_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128857_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128857_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128857_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128850(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117580 = tid;
    int num_tasks_126529 = info.nsubtasks;
    struct futhark_mc_task_128849 *futhark_mc_task_128849 =
                                  (struct futhark_mc_task_128849 *) args;
    struct futhark_context *ctx = futhark_mc_task_128849->ctx;
    uint64_t futhark_mc_segred_task_128850_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128850_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128849->free_n_112804;
    int64_t gtid_117575 = futhark_mc_task_128849->free_gtid_117575;
    int64_t x_117705 = futhark_mc_task_128849->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128849->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128849->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126145 = futhark_mc_task_128849->free_x_126145;
    float x_126146 = futhark_mc_task_128849->free_x_126146;
    float defunc_0_f_res_126149 =
          futhark_mc_task_128849->free_defunc_0_f_res_126149;
    float defunc_2_reduce_res_126150 =
          *futhark_mc_task_128849->retval_defunc_2_reduce_res_126150;
    float defunc_2_reduce_res_126151 =
          *futhark_mc_task_128849->retval_defunc_2_reduce_res_126151;
    float defunc_2_reduce_res_126152 =
          *futhark_mc_task_128849->retval_defunc_2_reduce_res_126152;
    float defunc_2_reduce_res_126153 =
          *futhark_mc_task_128849->retval_defunc_2_reduce_res_126153;
    float defunc_2_reduce_res_126154 =
          *futhark_mc_task_128849->retval_defunc_2_reduce_res_126154;
    size_t reduce_stage_1_tid_res_arr_mem_126530_cached_sizze_128851 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126530 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126532_cached_sizze_128852 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126532 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126534_cached_sizze_128853 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126534 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126536_cached_sizze_128854 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126536 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126538_cached_sizze_128855 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126538 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126530_cached_sizze_128851 <
        (size_t) ((int64_t) 4 * num_tasks_126529)) {
        reduce_stage_1_tid_res_arr_mem_126530 =
            realloc(reduce_stage_1_tid_res_arr_mem_126530, (int64_t) 4 *
                    num_tasks_126529);
        reduce_stage_1_tid_res_arr_mem_126530_cached_sizze_128851 =
            (int64_t) 4 * num_tasks_126529;
    }
    if (reduce_stage_1_tid_res_arr_mem_126532_cached_sizze_128852 <
        (size_t) ((int64_t) 4 * num_tasks_126529)) {
        reduce_stage_1_tid_res_arr_mem_126532 =
            realloc(reduce_stage_1_tid_res_arr_mem_126532, (int64_t) 4 *
                    num_tasks_126529);
        reduce_stage_1_tid_res_arr_mem_126532_cached_sizze_128852 =
            (int64_t) 4 * num_tasks_126529;
    }
    if (reduce_stage_1_tid_res_arr_mem_126534_cached_sizze_128853 <
        (size_t) ((int64_t) 4 * num_tasks_126529)) {
        reduce_stage_1_tid_res_arr_mem_126534 =
            realloc(reduce_stage_1_tid_res_arr_mem_126534, (int64_t) 4 *
                    num_tasks_126529);
        reduce_stage_1_tid_res_arr_mem_126534_cached_sizze_128853 =
            (int64_t) 4 * num_tasks_126529;
    }
    if (reduce_stage_1_tid_res_arr_mem_126536_cached_sizze_128854 <
        (size_t) ((int64_t) 4 * num_tasks_126529)) {
        reduce_stage_1_tid_res_arr_mem_126536 =
            realloc(reduce_stage_1_tid_res_arr_mem_126536, (int64_t) 4 *
                    num_tasks_126529);
        reduce_stage_1_tid_res_arr_mem_126536_cached_sizze_128854 =
            (int64_t) 4 * num_tasks_126529;
    }
    if (reduce_stage_1_tid_res_arr_mem_126538_cached_sizze_128855 <
        (size_t) ((int64_t) 4 * num_tasks_126529)) {
        reduce_stage_1_tid_res_arr_mem_126538 =
            realloc(reduce_stage_1_tid_res_arr_mem_126538, (int64_t) 4 *
                    num_tasks_126529);
        reduce_stage_1_tid_res_arr_mem_126538_cached_sizze_128855 =
            (int64_t) 4 * num_tasks_126529;
    }
    
    int64_t iter_126540;
    struct futhark_mc_segred_stage_1_parloop_struct_128856
    futhark_mc_segred_stage_1_parloop_struct_128856;
    
    futhark_mc_segred_stage_1_parloop_struct_128856.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_gtid_117575 =
        gtid_117575;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_x_117705 = x_117705;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_x_126145 = x_126145;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_x_126146 = x_126146;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_defunc_0_f_res_126149 =
        defunc_0_f_res_126149;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_reduce_stage_1_tid_res_arr_mem_126530 =
        reduce_stage_1_tid_res_arr_mem_126530;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_reduce_stage_1_tid_res_arr_mem_126532 =
        reduce_stage_1_tid_res_arr_mem_126532;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_reduce_stage_1_tid_res_arr_mem_126534 =
        reduce_stage_1_tid_res_arr_mem_126534;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_reduce_stage_1_tid_res_arr_mem_126536 =
        reduce_stage_1_tid_res_arr_mem_126536;
    futhark_mc_segred_stage_1_parloop_struct_128856.free_reduce_stage_1_tid_res_arr_mem_126538 =
        reduce_stage_1_tid_res_arr_mem_126538;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128857_task;
    
    futhark_mc_segred_stage_1_parloop_128857_task.name =
        "futhark_mc_segred_stage_1_parloop_128857";
    futhark_mc_segred_stage_1_parloop_128857_task.fn =
        futhark_mc_segred_stage_1_parloop_128857;
    futhark_mc_segred_stage_1_parloop_128857_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128856;
    futhark_mc_segred_stage_1_parloop_128857_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128857_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128857_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128857_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128857_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128857_task);
    
    if (futhark_mc_segred_stage_1_parloop_128857_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128857_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128857_total_end -
                 futhark_mc_segred_stage_1_parloop_128857_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128857_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128857_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128857_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126150 = 0.0F;
        defunc_2_reduce_res_126151 = 0.0F;
        defunc_2_reduce_res_126152 = 0.0F;
        defunc_2_reduce_res_126153 = 0.0F;
        defunc_2_reduce_res_126154 = 0.0F;
    }
    
    float x_126546;
    float x_126547;
    float x_126549;
    float x_126550;
    float x_126552;
    float x_126553;
    float x_126555;
    float x_126556;
    float x_126558;
    float x_126559;
    
    for (int32_t i_126561 = 0; i_126561 < num_tasks_126529; i_126561++) {
        flat_tid_117580 = i_126561;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126546 = defunc_2_reduce_res_126150;
            }
            // load next params
            {
                x_126547 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126530)[flat_tid_117580];
            }
            // red body
            {
                float defunc_1_op_res_126548 = x_126546 + x_126547;
                
                defunc_2_reduce_res_126150 = defunc_1_op_res_126548;
            }
            // load acc params
            {
                x_126549 = defunc_2_reduce_res_126151;
            }
            // load next params
            {
                x_126550 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126532)[flat_tid_117580];
            }
            // red body
            {
                float defunc_1_op_res_126551 = x_126549 + x_126550;
                
                defunc_2_reduce_res_126151 = defunc_1_op_res_126551;
            }
            // load acc params
            {
                x_126552 = defunc_2_reduce_res_126152;
            }
            // load next params
            {
                x_126553 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126534)[flat_tid_117580];
            }
            // red body
            {
                float defunc_1_op_res_126554 = x_126552 + x_126553;
                
                defunc_2_reduce_res_126152 = defunc_1_op_res_126554;
            }
            // load acc params
            {
                x_126555 = defunc_2_reduce_res_126153;
            }
            // load next params
            {
                x_126556 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126536)[flat_tid_117580];
            }
            // red body
            {
                float defunc_1_op_res_126557 = x_126555 + x_126556;
                
                defunc_2_reduce_res_126153 = defunc_1_op_res_126557;
            }
            // load acc params
            {
                x_126558 = defunc_2_reduce_res_126154;
            }
            // load next params
            {
                x_126559 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126538)[flat_tid_117580];
            }
            // red body
            {
                float defunc_1_op_res_126560 = x_126558 + x_126559;
                
                defunc_2_reduce_res_126154 = defunc_1_op_res_126560;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126530);
    free(reduce_stage_1_tid_res_arr_mem_126532);
    free(reduce_stage_1_tid_res_arr_mem_126534);
    free(reduce_stage_1_tid_res_arr_mem_126536);
    free(reduce_stage_1_tid_res_arr_mem_126538);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128850_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128850_end -
                 futhark_mc_segred_task_128850_start;
        
        ctx->futhark_mc_segred_task_128850_runs[tid]++;
        ctx->futhark_mc_segred_task_128850_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128850_iter[tid] += iterations;
    }
    *futhark_mc_task_128849->retval_defunc_2_reduce_res_126150 =
        defunc_2_reduce_res_126150;
    *futhark_mc_task_128849->retval_defunc_2_reduce_res_126151 =
        defunc_2_reduce_res_126151;
    *futhark_mc_task_128849->retval_defunc_2_reduce_res_126152 =
        defunc_2_reduce_res_126152;
    *futhark_mc_task_128849->retval_defunc_2_reduce_res_126153 =
        defunc_2_reduce_res_126153;
    *futhark_mc_task_128849->retval_defunc_2_reduce_res_126154 =
        defunc_2_reduce_res_126154;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128858 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_126145;
    float free_x_126146;
    float free_defunc_0_f_res_126149;
    float free_a12_126211;
    float free_b12_126212;
    float free_c12_126213;
    float free_b2_126214;
    float free_c2_126215;
    float *retval_defunc_2_reduce_res_126216;
    float *retval_defunc_2_reduce_res_126217;
};
struct futhark_mc_segred_stage_1_parloop_struct_128862 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117575;
    int64_t free_x_117705;
    char *free_mem_119718;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_x_126145;
    float free_x_126146;
    float free_defunc_0_f_res_126149;
    float free_a12_126211;
    float free_b12_126212;
    float free_c12_126213;
    float free_b2_126214;
    float free_c2_126215;
    char *free_reduce_stage_1_tid_res_arr_mem_126563;
    char *free_reduce_stage_1_tid_res_arr_mem_126565;
};
static int futhark_mc_segred_stage_1_parloop_128863(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117582,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128862
    *futhark_mc_segred_stage_1_parloop_struct_128862 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128862 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128862->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128863_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128863_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128862->free_n_112804;
    int64_t gtid_117575 =
            futhark_mc_segred_stage_1_parloop_struct_128862->free_gtid_117575;
    int64_t x_117705 =
            futhark_mc_segred_stage_1_parloop_struct_128862->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128862->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128862->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128862->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126145 =
            futhark_mc_segred_stage_1_parloop_struct_128862->free_x_126145;
    float x_126146 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_x_126146;
    float defunc_0_f_res_126149 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_defunc_0_f_res_126149;
    float a12_126211 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_a12_126211;
    float b12_126212 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_b12_126212;
    float c12_126213 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_c12_126213;
    float b2_126214 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_b2_126214;
    float c2_126215 =
          futhark_mc_segred_stage_1_parloop_struct_128862->free_c2_126215;
    struct memblock reduce_stage_1_tid_res_arr_mem_126563 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126563",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128862->free_reduce_stage_1_tid_res_arr_mem_126563,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126565 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126565",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128862->free_reduce_stage_1_tid_res_arr_mem_126565,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126567 = start;
    float x_126487;
    float x_126488;
    float x_126490;
    float x_126491;
    float local_acc_126568 = 0.0F;
    float local_acc_126569 = 0.0F;
    
    for (; iter_126567 < end; iter_126567++) {
        int64_t gtid_117583 = iter_126567;
        bool cond_126493 = sle64(x_117705, gtid_117583);
        float defunc_0_f_res_126494;
        
        if (cond_126493) {
            defunc_0_f_res_126494 = 0.0F;
        } else {
            int64_t i_126495 = add64(gtid_117583, x_126145);
            float x_126496 = ((float *) mem_119718.mem)[gtid_117575 * n_112804 +
                                                        i_126495];
            float defunc_0_f_res_f_res_126497 = 1.0F + x_126496;
            
            defunc_0_f_res_126494 = defunc_0_f_res_f_res_126497;
        }
        
        float defunc_0_f_res_126498;
        
        if (cond_126493) {
            defunc_0_f_res_126498 = 0.0F;
        } else {
            int64_t i_126499 = add64(gtid_117583, x_126145);
            float x_126500 = ((float *) mem_120637.mem)[gtid_117575 * n_112804 +
                                                        i_126499];
            
            defunc_0_f_res_126498 = x_126500;
        }
        
        float x_j_126501 = defunc_0_f_res_126494 - defunc_0_f_res_126149;
        float abs_res_126502 = (float) fabs(x_j_126501);
        float tmp1_126503 = abs_res_126502 / x_126146;
        float x_126504 = tmp1_126503 * tmp1_126503;
        float y_126505 = tmp1_126503 * x_126504;
        float tmp2_126506 = 1.0F - y_126505;
        float x_126507 = tmp2_126506 * tmp2_126506;
        float tmp3_126508 = tmp2_126506 * x_126507;
        float tmp4_126509 = defunc_0_f_res_126498 * tmp3_126508;
        float defunc_1_f_res_126510 = x_j_126501 * tmp4_126509;
        float defunc_1_f_res_126511 = x_j_126501 * defunc_1_f_res_126510;
        float defunc_0_f_res_126512;
        
        if (cond_126493) {
            defunc_0_f_res_126512 = 0.0F;
        } else {
            int64_t i_126513 = add64(gtid_117583, x_126145);
            float x_126514 = ((float *) mem_120633.mem)[gtid_117575 * n_112804 +
                                                        i_126513];
            
            defunc_0_f_res_126512 = x_126514;
        }
        
        float x_126515 = a12_126211 * tmp4_126509;
        float y_126516 = b12_126212 * defunc_1_f_res_126510;
        float x_126517 = x_126515 + y_126516;
        float y_126518 = c12_126213 * defunc_1_f_res_126511;
        float x_126519 = x_126517 + y_126518;
        float defunc_9_fit_fun_res_126520 = defunc_0_f_res_126512 * x_126519;
        float x_126521 = b12_126212 * tmp4_126509;
        float y_126522 = b2_126214 * defunc_1_f_res_126510;
        float x_126523 = x_126521 + y_126522;
        float y_126524 = c2_126215 * defunc_1_f_res_126511;
        float x_126525 = x_126523 + y_126524;
        float defunc_9_slope_fun_res_126526 = defunc_0_f_res_126512 * x_126525;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126487 = local_acc_126568;
        }
        // Load next params
        {
            x_126488 = defunc_9_fit_fun_res_126520;
        }
        // Red body
        {
            float defunc_1_op_res_126489 = x_126487 + x_126488;
            
            local_acc_126568 = defunc_1_op_res_126489;
        }
        // Load accum params
        {
            x_126490 = local_acc_126569;
        }
        // Load next params
        {
            x_126491 = defunc_9_slope_fun_res_126526;
        }
        // Red body
        {
            float defunc_1_op_res_126492 = x_126490 + x_126491;
            
            local_acc_126569 = defunc_1_op_res_126492;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126563.mem)[flat_tid_117582] =
        local_acc_126568;
    ((float *) reduce_stage_1_tid_res_arr_mem_126565.mem)[flat_tid_117582] =
        local_acc_126569;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128863_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128863_end -
                 futhark_mc_segred_stage_1_parloop_128863_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128863_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128863_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128863_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128859(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117582 = tid;
    int num_tasks_126562 = info.nsubtasks;
    struct futhark_mc_task_128858 *futhark_mc_task_128858 =
                                  (struct futhark_mc_task_128858 *) args;
    struct futhark_context *ctx = futhark_mc_task_128858->ctx;
    uint64_t futhark_mc_segred_task_128859_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128859_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128858->free_n_112804;
    int64_t gtid_117575 = futhark_mc_task_128858->free_gtid_117575;
    int64_t x_117705 = futhark_mc_task_128858->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128858->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128858->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128858->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126145 = futhark_mc_task_128858->free_x_126145;
    float x_126146 = futhark_mc_task_128858->free_x_126146;
    float defunc_0_f_res_126149 =
          futhark_mc_task_128858->free_defunc_0_f_res_126149;
    float a12_126211 = futhark_mc_task_128858->free_a12_126211;
    float b12_126212 = futhark_mc_task_128858->free_b12_126212;
    float c12_126213 = futhark_mc_task_128858->free_c12_126213;
    float b2_126214 = futhark_mc_task_128858->free_b2_126214;
    float c2_126215 = futhark_mc_task_128858->free_c2_126215;
    float defunc_2_reduce_res_126216 =
          *futhark_mc_task_128858->retval_defunc_2_reduce_res_126216;
    float defunc_2_reduce_res_126217 =
          *futhark_mc_task_128858->retval_defunc_2_reduce_res_126217;
    size_t reduce_stage_1_tid_res_arr_mem_126563_cached_sizze_128860 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126563 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_126565_cached_sizze_128861 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126565 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126563_cached_sizze_128860 <
        (size_t) ((int64_t) 4 * num_tasks_126562)) {
        reduce_stage_1_tid_res_arr_mem_126563 =
            realloc(reduce_stage_1_tid_res_arr_mem_126563, (int64_t) 4 *
                    num_tasks_126562);
        reduce_stage_1_tid_res_arr_mem_126563_cached_sizze_128860 =
            (int64_t) 4 * num_tasks_126562;
    }
    if (reduce_stage_1_tid_res_arr_mem_126565_cached_sizze_128861 <
        (size_t) ((int64_t) 4 * num_tasks_126562)) {
        reduce_stage_1_tid_res_arr_mem_126565 =
            realloc(reduce_stage_1_tid_res_arr_mem_126565, (int64_t) 4 *
                    num_tasks_126562);
        reduce_stage_1_tid_res_arr_mem_126565_cached_sizze_128861 =
            (int64_t) 4 * num_tasks_126562;
    }
    
    int64_t iter_126567;
    struct futhark_mc_segred_stage_1_parloop_struct_128862
    futhark_mc_segred_stage_1_parloop_struct_128862;
    
    futhark_mc_segred_stage_1_parloop_struct_128862.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_gtid_117575 =
        gtid_117575;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_x_117705 = x_117705;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_x_126145 = x_126145;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_x_126146 = x_126146;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_defunc_0_f_res_126149 =
        defunc_0_f_res_126149;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_a12_126211 =
        a12_126211;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_b12_126212 =
        b12_126212;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_c12_126213 =
        c12_126213;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_b2_126214 = b2_126214;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_c2_126215 = c2_126215;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_reduce_stage_1_tid_res_arr_mem_126563 =
        reduce_stage_1_tid_res_arr_mem_126563;
    futhark_mc_segred_stage_1_parloop_struct_128862.free_reduce_stage_1_tid_res_arr_mem_126565 =
        reduce_stage_1_tid_res_arr_mem_126565;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128863_task;
    
    futhark_mc_segred_stage_1_parloop_128863_task.name =
        "futhark_mc_segred_stage_1_parloop_128863";
    futhark_mc_segred_stage_1_parloop_128863_task.fn =
        futhark_mc_segred_stage_1_parloop_128863;
    futhark_mc_segred_stage_1_parloop_128863_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128862;
    futhark_mc_segred_stage_1_parloop_128863_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128863_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128863_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128863_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128863_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128863_task);
    
    if (futhark_mc_segred_stage_1_parloop_128863_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128863_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128863_total_end -
                 futhark_mc_segred_stage_1_parloop_128863_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128863_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128863_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128863_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126216 = 0.0F;
        defunc_2_reduce_res_126217 = 0.0F;
    }
    
    float x_126570;
    float x_126571;
    float x_126573;
    float x_126574;
    
    for (int32_t i_126576 = 0; i_126576 < num_tasks_126562; i_126576++) {
        flat_tid_117582 = i_126576;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126570 = defunc_2_reduce_res_126216;
            }
            // load next params
            {
                x_126571 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126563)[flat_tid_117582];
            }
            // red body
            {
                float defunc_1_op_res_126572 = x_126570 + x_126571;
                
                defunc_2_reduce_res_126216 = defunc_1_op_res_126572;
            }
            // load acc params
            {
                x_126573 = defunc_2_reduce_res_126217;
            }
            // load next params
            {
                x_126574 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126565)[flat_tid_117582];
            }
            // red body
            {
                float defunc_1_op_res_126575 = x_126573 + x_126574;
                
                defunc_2_reduce_res_126217 = defunc_1_op_res_126575;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126563);
    free(reduce_stage_1_tid_res_arr_mem_126565);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128859_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128859_end -
                 futhark_mc_segred_task_128859_start;
        
        ctx->futhark_mc_segred_task_128859_runs[tid]++;
        ctx->futhark_mc_segred_task_128859_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128859_iter[tid] += iterations;
    }
    *futhark_mc_task_128858->retval_defunc_2_reduce_res_126216 =
        defunc_2_reduce_res_126216;
    *futhark_mc_task_128858->retval_defunc_2_reduce_res_126217 =
        defunc_2_reduce_res_126217;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128848(void *args, int64_t start,
                                            int64_t end, int flat_tid_117578,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128847
    *futhark_mc_segmap_parloop_struct_128847 =
    (struct futhark_mc_segmap_parloop_struct_128847 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128847->ctx;
    uint64_t futhark_mc_segmap_parloop_128848_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128848_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128847->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128847->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128847->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128847->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128847->free_i_112880;
    int64_t gtid_117575 =
            futhark_mc_segmap_parloop_struct_128847->free_gtid_117575;
    int64_t x_117705 = futhark_mc_segmap_parloop_struct_128847->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120714 = {.desc ="mem_120714", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_120714,
                                  .size =0, .references =NULL};
    struct memblock mem_120717 = {.desc ="mem_120717", .mem =
                                  futhark_mc_segmap_parloop_struct_128847->free_mem_120717,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126450 = start;
    
    for (; iter_126450 < end; iter_126450++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126527 = t_n_m_112861;
        int64_t gtid_117579 = iter_126450;
        int64_t remnant_126528 = iter_126450 - gtid_117579;
        int64_t x_126145 = ((int64_t *) mem_119882.mem)[gtid_117575 *
                                                        t_n_m_112861 +
                                                        gtid_117579];
        float x_126146 = ((float *) mem_119886.mem)[gtid_117575 * t_n_m_112861 +
                                                    gtid_117579];
        int64_t min_arg_126147 = mul64(t_jump_112811, gtid_117579);
        int64_t min_res_126148 = smin64(i_112880, min_arg_126147);
        float defunc_0_f_res_126149 = sitofp_i64_f32(min_res_126148);
        float defunc_2_reduce_res_126150;
        float defunc_2_reduce_res_126151;
        float defunc_2_reduce_res_126152;
        float defunc_2_reduce_res_126153;
        float defunc_2_reduce_res_126154;
        int64_t flat_tid_117580 = (int64_t) 0;
        int32_t num_tasks_126529;
        struct futhark_mc_task_128849 futhark_mc_task_128849;
        
        futhark_mc_task_128849.ctx = ctx;
        futhark_mc_task_128849.free_n_112804 = n_112804;
        futhark_mc_task_128849.free_gtid_117575 = gtid_117575;
        futhark_mc_task_128849.free_x_117705 = x_117705;
        futhark_mc_task_128849.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128849.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128849.free_x_126145 = x_126145;
        futhark_mc_task_128849.free_x_126146 = x_126146;
        futhark_mc_task_128849.free_defunc_0_f_res_126149 =
            defunc_0_f_res_126149;
        futhark_mc_task_128849.retval_defunc_2_reduce_res_126150 =
            &defunc_2_reduce_res_126150;
        futhark_mc_task_128849.retval_defunc_2_reduce_res_126151 =
            &defunc_2_reduce_res_126151;
        futhark_mc_task_128849.retval_defunc_2_reduce_res_126152 =
            &defunc_2_reduce_res_126152;
        futhark_mc_task_128849.retval_defunc_2_reduce_res_126153 =
            &defunc_2_reduce_res_126153;
        futhark_mc_task_128849.retval_defunc_2_reduce_res_126154 =
            &defunc_2_reduce_res_126154;
        
        struct scheduler_segop futhark_mc_task_128849_task;
        
        futhark_mc_task_128849_task.args = &futhark_mc_task_128849;
        futhark_mc_task_128849_task.top_level_fn =
            futhark_mc_segred_task_128850;
        futhark_mc_task_128849_task.name = "futhark_mc_segred_task_128850";
        futhark_mc_task_128849_task.iterations = t_window_112807;
        futhark_mc_task_128849_task.task_time =
            &ctx->futhark_mc_segred_task_128850_total_time;
        futhark_mc_task_128849_task.task_iter =
            &ctx->futhark_mc_segred_task_128850_total_iter;
        futhark_mc_task_128849_task.sched = STATIC;
        futhark_mc_task_128849_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128850_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128849_task);
        
        if (futhark_mc_segred_task_128850_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126191 = defunc_2_reduce_res_126152 *
              defunc_2_reduce_res_126154;
        float y_126192 = defunc_2_reduce_res_126153 *
              defunc_2_reduce_res_126153;
        float a12_126193 = x_126191 - y_126192;
        float x_126194 = defunc_2_reduce_res_126152 *
              defunc_2_reduce_res_126153;
        float y_126195 = defunc_2_reduce_res_126151 *
              defunc_2_reduce_res_126154;
        float b12_126196 = x_126194 - y_126195;
        float x_126197 = defunc_2_reduce_res_126151 *
              defunc_2_reduce_res_126153;
        float y_126198 = defunc_2_reduce_res_126152 *
              defunc_2_reduce_res_126152;
        float c12_126199 = x_126197 - y_126198;
        float x_126200 = defunc_2_reduce_res_126150 *
              defunc_2_reduce_res_126154;
        float b2_126201 = x_126200 - y_126198;
        float x_126202 = defunc_2_reduce_res_126151 *
              defunc_2_reduce_res_126152;
        float y_126203 = defunc_2_reduce_res_126150 *
              defunc_2_reduce_res_126153;
        float c2_126204 = x_126202 - y_126203;
        float x_126205 = defunc_2_reduce_res_126150 * a12_126193;
        float y_126206 = defunc_2_reduce_res_126151 * b12_126196;
        float x_126207 = x_126205 + y_126206;
        float y_126208 = defunc_2_reduce_res_126152 * c12_126199;
        float y_126209 = x_126207 + y_126208;
        float det_126210 = 1.0F / y_126209;
        float a12_126211 = a12_126193 * det_126210;
        float b12_126212 = b12_126196 * det_126210;
        float c12_126213 = c12_126199 * det_126210;
        float b2_126214 = b2_126201 * det_126210;
        float c2_126215 = c2_126204 * det_126210;
        float defunc_2_reduce_res_126216;
        float defunc_2_reduce_res_126217;
        int64_t flat_tid_117582 = (int64_t) 0;
        int32_t num_tasks_126562;
        struct futhark_mc_task_128858 futhark_mc_task_128858;
        
        futhark_mc_task_128858.ctx = ctx;
        futhark_mc_task_128858.free_n_112804 = n_112804;
        futhark_mc_task_128858.free_gtid_117575 = gtid_117575;
        futhark_mc_task_128858.free_x_117705 = x_117705;
        futhark_mc_task_128858.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128858.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128858.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128858.free_x_126145 = x_126145;
        futhark_mc_task_128858.free_x_126146 = x_126146;
        futhark_mc_task_128858.free_defunc_0_f_res_126149 =
            defunc_0_f_res_126149;
        futhark_mc_task_128858.free_a12_126211 = a12_126211;
        futhark_mc_task_128858.free_b12_126212 = b12_126212;
        futhark_mc_task_128858.free_c12_126213 = c12_126213;
        futhark_mc_task_128858.free_b2_126214 = b2_126214;
        futhark_mc_task_128858.free_c2_126215 = c2_126215;
        futhark_mc_task_128858.retval_defunc_2_reduce_res_126216 =
            &defunc_2_reduce_res_126216;
        futhark_mc_task_128858.retval_defunc_2_reduce_res_126217 =
            &defunc_2_reduce_res_126217;
        
        struct scheduler_segop futhark_mc_task_128858_task;
        
        futhark_mc_task_128858_task.args = &futhark_mc_task_128858;
        futhark_mc_task_128858_task.top_level_fn =
            futhark_mc_segred_task_128859;
        futhark_mc_task_128858_task.name = "futhark_mc_segred_task_128859";
        futhark_mc_task_128858_task.iterations = t_window_112807;
        futhark_mc_task_128858_task.task_time =
            &ctx->futhark_mc_segred_task_128859_total_time;
        futhark_mc_task_128858_task.task_iter =
            &ctx->futhark_mc_segred_task_128859_total_iter;
        futhark_mc_task_128858_task.sched = STATIC;
        futhark_mc_task_128858_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128859_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128858_task);
        
        if (futhark_mc_segred_task_128859_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120714.mem)[gtid_117579] = defunc_2_reduce_res_126216;
        ((float *) mem_120717.mem)[gtid_117579] = defunc_2_reduce_res_126217;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128848_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128848_end -
                 futhark_mc_segmap_parloop_128848_start;
        
        ctx->futhark_mc_segmap_parloop_128848_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128848_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128848_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128846(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117578 = tid;
    int num_tasks_126368 = info.nsubtasks;
    struct futhark_mc_task_128842 *futhark_mc_task_128842 =
                                  (struct futhark_mc_task_128842 *) args;
    struct futhark_context *ctx = futhark_mc_task_128842->ctx;
    uint64_t futhark_mc_segmap_nested_task_128846_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128846_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128842->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128842->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128842->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128842->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128842->free_i_112880;
    int64_t gtid_117575 = futhark_mc_task_128842->free_gtid_117575;
    int64_t x_117705 = futhark_mc_task_128842->free_x_117705;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128842->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128842->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128842->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128842->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128842->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120714 = {.desc ="mem_120714", .mem =
                                  futhark_mc_task_128842->free_mem_120714,
                                  .size =0, .references =NULL};
    struct memblock mem_120717 = {.desc ="mem_120717", .mem =
                                  futhark_mc_task_128842->free_mem_120717,
                                  .size =0, .references =NULL};
    int64_t iter_126450;
    struct futhark_mc_segmap_parloop_struct_128847
    futhark_mc_segmap_parloop_struct_128847;
    
    futhark_mc_segmap_parloop_struct_128847.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128847.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128847.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128847.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128847.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128847.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128847.free_gtid_117575 = gtid_117575;
    futhark_mc_segmap_parloop_struct_128847.free_x_117705 = x_117705;
    futhark_mc_segmap_parloop_struct_128847.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_120714 = mem_120714.mem;
    futhark_mc_segmap_parloop_struct_128847.free_mem_120717 = mem_120717.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128848_task;
    
    futhark_mc_segmap_parloop_128848_task.name =
        "futhark_mc_segmap_parloop_128848";
    futhark_mc_segmap_parloop_128848_task.fn = futhark_mc_segmap_parloop_128848;
    futhark_mc_segmap_parloop_128848_task.args =
        &futhark_mc_segmap_parloop_struct_128847;
    futhark_mc_segmap_parloop_128848_task.iterations = iterations;
    futhark_mc_segmap_parloop_128848_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128848_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128848_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128848_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128848_task);
    
    if (futhark_mc_segmap_parloop_128848_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128848_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128848_total_end -
                 futhark_mc_segmap_parloop_128848_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128848_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128848_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128848_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128846_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128846_end -
                 futhark_mc_segmap_nested_task_128846_start;
        
        ctx->futhark_mc_segmap_nested_task_128846_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128846_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128846_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128839(void *args, int64_t start,
                                            int64_t end, int flat_tid_117574,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128838
    *futhark_mc_segmap_parloop_struct_128838 =
    (struct futhark_mc_segmap_parloop_struct_128838 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128838->ctx;
    uint64_t futhark_mc_segmap_parloop_128839_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128839_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128838->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128838->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128838->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128838->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128838->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128838->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128838->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120751 = {.desc ="mem_120751", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_120751,
                                  .size =0, .references =NULL};
    struct memblock mem_120755 = {.desc ="mem_120755", .mem =
                                  futhark_mc_segmap_parloop_struct_128838->free_mem_120755,
                                  .size =0, .references =NULL};
    size_t mem_120714_cached_sizze_128840 = 0;
    char *mem_120714 = NULL;
    size_t mem_120717_cached_sizze_128841 = 0;
    char *mem_120717 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126144 = start;
    
    if (mem_120714_cached_sizze_128840 < (size_t) bytes_119828) {
        mem_120714 = realloc(mem_120714, bytes_119828);
        mem_120714_cached_sizze_128840 = bytes_119828;
    }
    if (mem_120717_cached_sizze_128841 < (size_t) bytes_119828) {
        mem_120717 = realloc(mem_120717, bytes_119828);
        mem_120717_cached_sizze_128841 = bytes_119828;
    }
    for (; iter_126144 < end; iter_126144++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126366 = m_112803;
        int64_t gtid_117575 = iter_126144;
        int64_t remnant_126367 = iter_126144 - gtid_117575;
        int64_t x_117705 = ((int64_t *) mem_119696.mem)[gtid_117575];
        int64_t flat_tid_117576 = (int64_t) 0;
        int32_t num_tasks_126368;
        int64_t flat_tid_117578 = (int64_t) 0;
        struct futhark_mc_task_128842 futhark_mc_task_128842;
        
        futhark_mc_task_128842.ctx = ctx;
        futhark_mc_task_128842.free_n_112804 = n_112804;
        futhark_mc_task_128842.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128842.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128842.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128842.free_i_112880 = i_112880;
        futhark_mc_task_128842.free_gtid_117575 = gtid_117575;
        futhark_mc_task_128842.free_x_117705 = x_117705;
        futhark_mc_task_128842.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128842.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128842.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128842.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128842.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128842.free_mem_120714 = mem_120714;
        futhark_mc_task_128842.free_mem_120717 = mem_120717;
        
        struct scheduler_segop futhark_mc_task_128842_task;
        
        futhark_mc_task_128842_task.args = &futhark_mc_task_128842;
        futhark_mc_task_128842_task.top_level_fn =
            futhark_mc_segmap_task_128843;
        futhark_mc_task_128842_task.name = "futhark_mc_segmap_task_128843";
        futhark_mc_task_128842_task.iterations = t_n_m_112861;
        futhark_mc_task_128842_task.task_time =
            &ctx->futhark_mc_segmap_task_128843_total_time;
        futhark_mc_task_128842_task.task_iter =
            &ctx->futhark_mc_segmap_task_128843_total_iter;
        futhark_mc_task_128842_task.sched = STATIC;
        futhark_mc_task_128842_task.nested_fn =
            futhark_mc_segmap_nested_task_128846;
        
        int futhark_mc_segmap_task_128843_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128842_task);
        
        if (futhark_mc_segmap_task_128843_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120751.mem + gtid_117575 * t_n_m_112861 * (int64_t) 4,
                mem_120714 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120755.mem + gtid_117575 * t_n_m_112861 * (int64_t) 4,
                mem_120717 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120714);
    free(mem_120717);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128839_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128839_end -
                 futhark_mc_segmap_parloop_128839_start;
        
        ctx->futhark_mc_segmap_parloop_128839_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128839_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128839_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128837(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117574 = tid;
    int num_tasks_126018 = info.nsubtasks;
    struct futhark_mc_task_128831 *futhark_mc_task_128831 =
                                  (struct futhark_mc_task_128831 *) args;
    struct futhark_context *ctx = futhark_mc_task_128831->ctx;
    uint64_t futhark_mc_segmap_nested_task_128837_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128837_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128831->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128831->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128831->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128831->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128831->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128831->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128831->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128831->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128831->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128831->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128831->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128831->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128831->free_mem_120637,
                                  .size =0, .references =NULL};
    struct memblock mem_120751 = {.desc ="mem_120751", .mem =
                                  futhark_mc_task_128831->free_mem_120751,
                                  .size =0, .references =NULL};
    struct memblock mem_120755 = {.desc ="mem_120755", .mem =
                                  futhark_mc_task_128831->free_mem_120755,
                                  .size =0, .references =NULL};
    int64_t iter_126144;
    struct futhark_mc_segmap_parloop_struct_128838
    futhark_mc_segmap_parloop_struct_128838;
    
    futhark_mc_segmap_parloop_struct_128838.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128838.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128838.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128838.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128838.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128838.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128838.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128838.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128838.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128838.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_120751 = mem_120751.mem;
    futhark_mc_segmap_parloop_struct_128838.free_mem_120755 = mem_120755.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128839_task;
    
    futhark_mc_segmap_parloop_128839_task.name =
        "futhark_mc_segmap_parloop_128839";
    futhark_mc_segmap_parloop_128839_task.fn = futhark_mc_segmap_parloop_128839;
    futhark_mc_segmap_parloop_128839_task.args =
        &futhark_mc_segmap_parloop_struct_128838;
    futhark_mc_segmap_parloop_128839_task.iterations = iterations;
    futhark_mc_segmap_parloop_128839_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128839_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128839_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128839_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128839_task);
    
    if (futhark_mc_segmap_parloop_128839_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128839_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128839_total_end -
                 futhark_mc_segmap_parloop_128839_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128839_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128839_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128839_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128837_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128837_end -
                 futhark_mc_segmap_nested_task_128837_start;
        
        ctx->futhark_mc_segmap_nested_task_128837_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128837_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128837_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128864 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120818;
};
struct futhark_mc_segmap_parloop_struct_128866 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120818;
};
static int futhark_mc_segmap_parloop_128867(void *args, int64_t start,
                                            int64_t end, int flat_tid_117940,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128866
    *futhark_mc_segmap_parloop_struct_128866 =
    (struct futhark_mc_segmap_parloop_struct_128866 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128866->ctx;
    uint64_t futhark_mc_segmap_parloop_128867_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128867_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128866->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128866->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128866->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128866->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128866->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128866->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128866->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 =
            futhark_mc_segmap_parloop_struct_128866->free_bytes_120764;
    struct memblock mem_120818 = {.desc ="mem_120818", .mem =
                                  futhark_mc_segmap_parloop_struct_128866->free_mem_120818,
                                  .size =0, .references =NULL};
    size_t mem_120787_cached_sizze_128868 = 0;
    char *mem_120787 = NULL;
    size_t mem_120797_cached_sizze_128869 = 0;
    char *mem_120797 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126580 = start;
    
    if (mem_120787_cached_sizze_128868 < (size_t) bytes_119828) {
        mem_120787 = realloc(mem_120787, bytes_119828);
        mem_120787_cached_sizze_128868 = bytes_119828;
    }
    if (mem_120797_cached_sizze_128869 < (size_t) bytes_120764) {
        mem_120797 = realloc(mem_120797, bytes_120764);
        mem_120797_cached_sizze_128869 = bytes_120764;
    }
    for (; iter_126580 < end; iter_126580++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126626 = m_112803;
        int64_t gtid_117941 = iter_126580;
        int64_t remnant_126627 = iter_126580 - gtid_117941;
        int64_t x_114408 = ((int64_t *) mem_119696.mem)[gtid_117941];
        
        for (int64_t i_126581 = 0; i_126581 < t_n_m_112861; i_126581++) {
            int64_t x_126583 = ((int64_t *) mem_119882.mem)[gtid_117941 *
                                                            t_n_m_112861 +
                                                            i_126581];
            float x_126584 = ((float *) mem_119886.mem)[gtid_117941 *
                                                        t_n_m_112861 +
                                                        i_126581];
            int64_t min_arg_126585 = mul64(t_jump_112811, i_126581);
            int64_t min_res_126586 = smin64(i_112880, min_arg_126585);
            float defunc_0_f_res_126587 = sitofp_i64_f32(min_res_126586);
            float defunc_2_reduce_res_126589;
            float redout_126592 = 0.0F;
            
            for (int64_t i_126591 = 0; i_126591 < t_window_112807; i_126591++) {
                bool cond_126594 = sle64(x_114408, i_126591);
                float defunc_0_f_res_126595;
                
                if (cond_126594) {
                    defunc_0_f_res_126595 = 0.0F;
                } else {
                    int64_t i_126596 = add64(x_126583, i_126591);
                    float x_126597 = ((float *) mem_119718.mem)[gtid_117941 *
                                                                n_112804 +
                                                                i_126596];
                    float defunc_0_f_res_f_res_126598 = 1.0F + x_126597;
                    
                    defunc_0_f_res_126595 = defunc_0_f_res_f_res_126598;
                }
                
                float defunc_0_f_res_126599;
                
                if (cond_126594) {
                    defunc_0_f_res_126599 = 0.0F;
                } else {
                    int64_t i_126600 = add64(x_126583, i_126591);
                    float x_126601 = ((float *) mem_120637.mem)[gtid_117941 *
                                                                n_112804 +
                                                                i_126600];
                    
                    defunc_0_f_res_126599 = x_126601;
                }
                
                float x_j_126602 = defunc_0_f_res_126595 -
                      defunc_0_f_res_126587;
                float abs_res_126603 = (float) fabs(x_j_126602);
                float tmp1_126604 = abs_res_126603 / x_126584;
                float x_126605 = tmp1_126604 * tmp1_126604;
                float y_126606 = tmp1_126604 * x_126605;
                float tmp2_126607 = 1.0F - y_126606;
                float x_126608 = tmp2_126607 * tmp2_126607;
                float tmp3_126609 = tmp2_126607 * x_126608;
                float tmp4_126610 = defunc_0_f_res_126599 * tmp3_126609;
                float defunc_1_op_res_126611 = tmp4_126610 + redout_126592;
                
                ((float *) mem_120797)[i_126591] = tmp4_126610;
                
                float redout_tmp_126629 = defunc_1_op_res_126611;
                
                redout_126592 = redout_tmp_126629;
            }
            defunc_2_reduce_res_126589 = redout_126592;
            
            float a0_126613 = 1.0F / defunc_2_reduce_res_126589;
            float defunc_2_reduce_res_126614;
            float redout_126616 = 0.0F;
            
            for (int64_t i_126615 = 0; i_126615 < t_window_112807; i_126615++) {
                float x_126617 = ((float *) mem_120797)[i_126615];
                bool cond_126618 = sle64(x_114408, i_126615);
                float defunc_0_f_res_126619;
                
                if (cond_126618) {
                    defunc_0_f_res_126619 = 0.0F;
                } else {
                    int64_t i_126620 = add64(x_126583, i_126615);
                    float x_126621 = ((float *) mem_120633.mem)[gtid_117941 *
                                                                n_112804 +
                                                                i_126620];
                    
                    defunc_0_f_res_126619 = x_126621;
                }
                
                float x_126622 = a0_126613 * x_126617;
                float defunc_9_fit_fun_res_126623 = defunc_0_f_res_126619 *
                      x_126622;
                float defunc_1_op_res_126624 = defunc_9_fit_fun_res_126623 +
                      redout_126616;
                float redout_tmp_126631 = defunc_1_op_res_126624;
                
                redout_126616 = redout_tmp_126631;
            }
            defunc_2_reduce_res_126614 = redout_126616;
            ((float *) mem_120787)[i_126581] = defunc_2_reduce_res_126614;
        }
        memmove(mem_120818.mem + gtid_117941 * t_n_m_112861 * (int64_t) 4,
                mem_120787 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120787);
    free(mem_120797);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128867_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128867_end -
                 futhark_mc_segmap_parloop_128867_start;
        
        ctx->futhark_mc_segmap_parloop_128867_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128867_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128867_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128865(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117940 = tid;
    int num_tasks_126579 = info.nsubtasks;
    struct futhark_mc_task_128864 *futhark_mc_task_128864 =
                                  (struct futhark_mc_task_128864 *) args;
    struct futhark_context *ctx = futhark_mc_task_128864->ctx;
    uint64_t futhark_mc_segmap_task_128865_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128865_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128864->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128864->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128864->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128864->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128864->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128864->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128864->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128864->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128864->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128864->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128864->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128864->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128864->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 = futhark_mc_task_128864->free_bytes_120764;
    struct memblock mem_120818 = {.desc ="mem_120818", .mem =
                                  futhark_mc_task_128864->free_mem_120818,
                                  .size =0, .references =NULL};
    int64_t iter_126580;
    struct futhark_mc_segmap_parloop_struct_128866
    futhark_mc_segmap_parloop_struct_128866;
    
    futhark_mc_segmap_parloop_struct_128866.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128866.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128866.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128866.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128866.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128866.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128866.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128866.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128866.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128866.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128866.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128866.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128866.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128866.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128866.free_bytes_120764 = bytes_120764;
    futhark_mc_segmap_parloop_struct_128866.free_mem_120818 = mem_120818.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128867_task;
    
    futhark_mc_segmap_parloop_128867_task.name =
        "futhark_mc_segmap_parloop_128867";
    futhark_mc_segmap_parloop_128867_task.fn = futhark_mc_segmap_parloop_128867;
    futhark_mc_segmap_parloop_128867_task.args =
        &futhark_mc_segmap_parloop_struct_128866;
    futhark_mc_segmap_parloop_128867_task.iterations = iterations;
    futhark_mc_segmap_parloop_128867_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128867_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128867_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128867_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128867_task);
    
    if (futhark_mc_segmap_parloop_128867_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128867_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128867_total_end -
                 futhark_mc_segmap_parloop_128867_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128867_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128867_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128867_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128865_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128865_end -
                 futhark_mc_segmap_task_128865_start;
        
        ctx->futhark_mc_segmap_task_128865_runs[tid]++;
        ctx->futhark_mc_segmap_task_128865_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128865_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128871 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120818;
};
struct futhark_mc_task_128874 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120784;
};
struct futhark_mc_segmap_parloop_struct_128876 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120784;
};
static int futhark_mc_segmap_parloop_128877(void *args, int64_t start,
                                            int64_t end, int flat_tid_117944,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128876
    *futhark_mc_segmap_parloop_struct_128876 =
    (struct futhark_mc_segmap_parloop_struct_128876 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128876->ctx;
    uint64_t futhark_mc_segmap_parloop_128877_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128877_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128876->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128876->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128876->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128876->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128876->free_i_112880;
    int64_t gtid_117943 =
            futhark_mc_segmap_parloop_struct_128876->free_gtid_117943;
    int64_t x_117999 = futhark_mc_segmap_parloop_struct_128876->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 =
            futhark_mc_segmap_parloop_struct_128876->free_bytes_120764;
    struct memblock mem_120784 = {.desc ="mem_120784", .mem =
                                  futhark_mc_segmap_parloop_struct_128876->free_mem_120784,
                                  .size =0, .references =NULL};
    size_t mem_126678_cached_sizze_128878 = 0;
    char *mem_126678 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126719 = start;
    
    if (mem_126678_cached_sizze_128878 < (size_t) bytes_120764) {
        mem_126678 = realloc(mem_126678, bytes_120764);
        mem_126678_cached_sizze_128878 = bytes_120764;
    }
    for (; iter_126719 < end; iter_126719++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126752 = t_n_m_112861;
        int64_t gtid_117945 = iter_126719;
        int64_t remnant_126753 = iter_126719 - gtid_117945;
        int64_t x_126673 = ((int64_t *) mem_119882.mem)[gtid_117943 *
                                                        t_n_m_112861 +
                                                        gtid_117945];
        float x_126674 = ((float *) mem_119886.mem)[gtid_117943 * t_n_m_112861 +
                                                    gtid_117945];
        int64_t min_arg_126675 = mul64(t_jump_112811, gtid_117945);
        int64_t min_res_126676 = smin64(i_112880, min_arg_126675);
        float defunc_0_f_res_126677 = sitofp_i64_f32(min_res_126676);
        float defunc_2_reduce_res_126680;
        float redout_126721 = 0.0F;
        
        for (int64_t i_126720 = 0; i_126720 < t_window_112807; i_126720++) {
            bool cond_126723 = sle64(x_117999, i_126720);
            float defunc_0_f_res_126724;
            
            if (cond_126723) {
                defunc_0_f_res_126724 = 0.0F;
            } else {
                int64_t i_126725 = add64(x_126673, i_126720);
                float x_126726 = ((float *) mem_119718.mem)[gtid_117943 *
                                                            n_112804 +
                                                            i_126725];
                float defunc_0_f_res_f_res_126727 = 1.0F + x_126726;
                
                defunc_0_f_res_126724 = defunc_0_f_res_f_res_126727;
            }
            
            float defunc_0_f_res_126728;
            
            if (cond_126723) {
                defunc_0_f_res_126728 = 0.0F;
            } else {
                int64_t i_126729 = add64(x_126673, i_126720);
                float x_126730 = ((float *) mem_120637.mem)[gtid_117943 *
                                                            n_112804 +
                                                            i_126729];
                
                defunc_0_f_res_126728 = x_126730;
            }
            
            float x_j_126731 = defunc_0_f_res_126724 - defunc_0_f_res_126677;
            float abs_res_126732 = (float) fabs(x_j_126731);
            float tmp1_126733 = abs_res_126732 / x_126674;
            float x_126734 = tmp1_126733 * tmp1_126733;
            float y_126735 = tmp1_126733 * x_126734;
            float tmp2_126736 = 1.0F - y_126735;
            float x_126737 = tmp2_126736 * tmp2_126736;
            float tmp3_126738 = tmp2_126736 * x_126737;
            float tmp4_126739 = defunc_0_f_res_126728 * tmp3_126738;
            float defunc_1_op_res_126740 = tmp4_126739 + redout_126721;
            
            ((float *) mem_126678)[i_126720] = tmp4_126739;
            
            float redout_tmp_126754 = defunc_1_op_res_126740;
            
            redout_126721 = redout_tmp_126754;
        }
        defunc_2_reduce_res_126680 = redout_126721;
        
        float a0_126704 = 1.0F / defunc_2_reduce_res_126680;
        float defunc_2_reduce_res_126705;
        float redout_126743 = 0.0F;
        
        for (int64_t i_126742 = 0; i_126742 < t_window_112807; i_126742++) {
            float x_126744 = ((float *) mem_126678)[i_126742];
            bool cond_126745 = sle64(x_117999, i_126742);
            float defunc_0_f_res_126746;
            
            if (cond_126745) {
                defunc_0_f_res_126746 = 0.0F;
            } else {
                int64_t i_126747 = add64(x_126673, i_126742);
                float x_126748 = ((float *) mem_120633.mem)[gtid_117943 *
                                                            n_112804 +
                                                            i_126747];
                
                defunc_0_f_res_126746 = x_126748;
            }
            
            float x_126749 = a0_126704 * x_126744;
            float defunc_9_fit_fun_res_126750 = defunc_0_f_res_126746 *
                  x_126749;
            float defunc_1_op_res_126751 = defunc_9_fit_fun_res_126750 +
                  redout_126743;
            float redout_tmp_126756 = defunc_1_op_res_126751;
            
            redout_126743 = redout_tmp_126756;
        }
        defunc_2_reduce_res_126705 = redout_126743;
        ((float *) mem_120784.mem)[gtid_117945] = defunc_2_reduce_res_126705;
    }
    
  cleanup:
    { }
    free(mem_126678);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128877_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128877_end -
                 futhark_mc_segmap_parloop_128877_start;
        
        ctx->futhark_mc_segmap_parloop_128877_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128877_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128877_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128875(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117944 = tid;
    int num_tasks_126718 = info.nsubtasks;
    struct futhark_mc_task_128874 *futhark_mc_task_128874 =
                                  (struct futhark_mc_task_128874 *) args;
    struct futhark_context *ctx = futhark_mc_task_128874->ctx;
    uint64_t futhark_mc_segmap_task_128875_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128875_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128874->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128874->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128874->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128874->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128874->free_i_112880;
    int64_t gtid_117943 = futhark_mc_task_128874->free_gtid_117943;
    int64_t x_117999 = futhark_mc_task_128874->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128874->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128874->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128874->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128874->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128874->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 = futhark_mc_task_128874->free_bytes_120764;
    struct memblock mem_120784 = {.desc ="mem_120784", .mem =
                                  futhark_mc_task_128874->free_mem_120784,
                                  .size =0, .references =NULL};
    int64_t iter_126719;
    struct futhark_mc_segmap_parloop_struct_128876
    futhark_mc_segmap_parloop_struct_128876;
    
    futhark_mc_segmap_parloop_struct_128876.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128876.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128876.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128876.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128876.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128876.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128876.free_gtid_117943 = gtid_117943;
    futhark_mc_segmap_parloop_struct_128876.free_x_117999 = x_117999;
    futhark_mc_segmap_parloop_struct_128876.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128876.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128876.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128876.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128876.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128876.free_bytes_120764 = bytes_120764;
    futhark_mc_segmap_parloop_struct_128876.free_mem_120784 = mem_120784.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128877_task;
    
    futhark_mc_segmap_parloop_128877_task.name =
        "futhark_mc_segmap_parloop_128877";
    futhark_mc_segmap_parloop_128877_task.fn = futhark_mc_segmap_parloop_128877;
    futhark_mc_segmap_parloop_128877_task.args =
        &futhark_mc_segmap_parloop_struct_128876;
    futhark_mc_segmap_parloop_128877_task.iterations = iterations;
    futhark_mc_segmap_parloop_128877_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128877_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128877_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128877_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128877_task);
    
    if (futhark_mc_segmap_parloop_128877_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128877_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128877_total_end -
                 futhark_mc_segmap_parloop_128877_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128877_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128877_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128877_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128875_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128875_end -
                 futhark_mc_segmap_task_128875_start;
        
        ctx->futhark_mc_segmap_task_128875_runs[tid]++;
        ctx->futhark_mc_segmap_task_128875_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128875_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128880 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120764;
    char *free_mem_120784;
};
struct futhark_mc_task_128883 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126633;
    float free_x_126634;
    float free_defunc_0_f_res_126637;
    float *retval_defunc_2_reduce_res_126639;
    char *retval_mem_126638;
};
struct futhark_mc_segred_stage_1_parloop_struct_128886 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126633;
    float free_x_126634;
    float free_defunc_0_f_res_126637;
    char *free_mem_126638;
    char *free_reduce_stage_1_tid_res_arr_mem_126791;
};
static int futhark_mc_segred_stage_1_parloop_128887(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117948,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128886
    *futhark_mc_segred_stage_1_parloop_struct_128886 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128886 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128886->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128887_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128887_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128886->free_n_112804;
    int64_t gtid_117943 =
            futhark_mc_segred_stage_1_parloop_struct_128886->free_gtid_117943;
    int64_t x_117999 =
            futhark_mc_segred_stage_1_parloop_struct_128886->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128886->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128886->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126633 =
            futhark_mc_segred_stage_1_parloop_struct_128886->free_x_126633;
    float x_126634 =
          futhark_mc_segred_stage_1_parloop_struct_128886->free_x_126634;
    float defunc_0_f_res_126637 =
          futhark_mc_segred_stage_1_parloop_struct_128886->free_defunc_0_f_res_126637;
    struct memblock mem_126638 = {.desc ="mem_126638", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128886->free_mem_126638,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_126791 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126791",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128886->free_reduce_stage_1_tid_res_arr_mem_126791,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126793 = start;
    float x_126758;
    float x_126759;
    float local_acc_126794 = 0.0F;
    
    for (; iter_126793 < end; iter_126793++) {
        int64_t gtid_117949 = iter_126793;
        bool cond_126761 = sle64(x_117999, gtid_117949);
        float defunc_0_f_res_126762;
        
        if (cond_126761) {
            defunc_0_f_res_126762 = 0.0F;
        } else {
            int64_t i_126763 = add64(gtid_117949, x_126633);
            float x_126764 = ((float *) mem_119718.mem)[gtid_117943 * n_112804 +
                                                        i_126763];
            float defunc_0_f_res_f_res_126765 = 1.0F + x_126764;
            
            defunc_0_f_res_126762 = defunc_0_f_res_f_res_126765;
        }
        
        float defunc_0_f_res_126766;
        
        if (cond_126761) {
            defunc_0_f_res_126766 = 0.0F;
        } else {
            int64_t i_126767 = add64(gtid_117949, x_126633);
            float x_126768 = ((float *) mem_120637.mem)[gtid_117943 * n_112804 +
                                                        i_126767];
            
            defunc_0_f_res_126766 = x_126768;
        }
        
        float x_j_126769 = defunc_0_f_res_126762 - defunc_0_f_res_126637;
        float abs_res_126770 = (float) fabs(x_j_126769);
        float tmp1_126771 = abs_res_126770 / x_126634;
        float x_126772 = tmp1_126771 * tmp1_126771;
        float y_126773 = tmp1_126771 * x_126772;
        float tmp2_126774 = 1.0F - y_126773;
        float x_126775 = tmp2_126774 * tmp2_126774;
        float tmp3_126776 = tmp2_126774 * x_126775;
        float tmp4_126777 = defunc_0_f_res_126766 * tmp3_126776;
        
        // save map-out results
        {
            ((float *) mem_126638.mem)[gtid_117949] = tmp4_126777;
        }
        // Load accum params
        {
            x_126758 = local_acc_126794;
        }
        // Load next params
        {
            x_126759 = tmp4_126777;
        }
        // Red body
        {
            float defunc_1_op_res_126760 = x_126758 + x_126759;
            
            local_acc_126794 = defunc_1_op_res_126760;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126791.mem)[flat_tid_117948] =
        local_acc_126794;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128887_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128887_end -
                 futhark_mc_segred_stage_1_parloop_128887_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128887_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128887_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128887_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128884(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117948 = tid;
    int num_tasks_126790 = info.nsubtasks;
    struct futhark_mc_task_128883 *futhark_mc_task_128883 =
                                  (struct futhark_mc_task_128883 *) args;
    struct futhark_context *ctx = futhark_mc_task_128883->ctx;
    uint64_t futhark_mc_segred_task_128884_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128884_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128883->free_n_112804;
    int64_t gtid_117943 = futhark_mc_task_128883->free_gtid_117943;
    int64_t x_117999 = futhark_mc_task_128883->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128883->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128883->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126633 = futhark_mc_task_128883->free_x_126633;
    float x_126634 = futhark_mc_task_128883->free_x_126634;
    float defunc_0_f_res_126637 =
          futhark_mc_task_128883->free_defunc_0_f_res_126637;
    float defunc_2_reduce_res_126639 =
          *futhark_mc_task_128883->retval_defunc_2_reduce_res_126639;
    struct memblock mem_126638 = {.desc ="mem_126638", .mem =
                                  futhark_mc_task_128883->retval_mem_126638,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_126791_cached_sizze_128885 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126791 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126791_cached_sizze_128885 <
        (size_t) ((int64_t) 4 * num_tasks_126790)) {
        reduce_stage_1_tid_res_arr_mem_126791 =
            realloc(reduce_stage_1_tid_res_arr_mem_126791, (int64_t) 4 *
                    num_tasks_126790);
        reduce_stage_1_tid_res_arr_mem_126791_cached_sizze_128885 =
            (int64_t) 4 * num_tasks_126790;
    }
    
    int64_t iter_126793;
    struct futhark_mc_segred_stage_1_parloop_struct_128886
    futhark_mc_segred_stage_1_parloop_struct_128886;
    
    futhark_mc_segred_stage_1_parloop_struct_128886.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_gtid_117943 =
        gtid_117943;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_x_117999 = x_117999;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_x_126633 = x_126633;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_x_126634 = x_126634;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_defunc_0_f_res_126637 =
        defunc_0_f_res_126637;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_mem_126638 =
        mem_126638.mem;
    futhark_mc_segred_stage_1_parloop_struct_128886.free_reduce_stage_1_tid_res_arr_mem_126791 =
        reduce_stage_1_tid_res_arr_mem_126791;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128887_task;
    
    futhark_mc_segred_stage_1_parloop_128887_task.name =
        "futhark_mc_segred_stage_1_parloop_128887";
    futhark_mc_segred_stage_1_parloop_128887_task.fn =
        futhark_mc_segred_stage_1_parloop_128887;
    futhark_mc_segred_stage_1_parloop_128887_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128886;
    futhark_mc_segred_stage_1_parloop_128887_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128887_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128887_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128887_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128887_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128887_task);
    
    if (futhark_mc_segred_stage_1_parloop_128887_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128887_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128887_total_end -
                 futhark_mc_segred_stage_1_parloop_128887_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128887_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128887_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128887_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126639 = 0.0F;
    }
    
    float x_126795;
    float x_126796;
    
    for (int32_t i_126798 = 0; i_126798 < num_tasks_126790; i_126798++) {
        flat_tid_117948 = i_126798;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126795 = defunc_2_reduce_res_126639;
            }
            // load next params
            {
                x_126796 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126791)[flat_tid_117948];
            }
            // red body
            {
                float defunc_1_op_res_126797 = x_126795 + x_126796;
                
                defunc_2_reduce_res_126639 = defunc_1_op_res_126797;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126791);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128884_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128884_end -
                 futhark_mc_segred_task_128884_start;
        
        ctx->futhark_mc_segred_task_128884_runs[tid]++;
        ctx->futhark_mc_segred_task_128884_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128884_iter[tid] += iterations;
    }
    *futhark_mc_task_128883->retval_defunc_2_reduce_res_126639 =
        defunc_2_reduce_res_126639;
    futhark_mc_task_128883->retval_mem_126638 = mem_126638.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128888 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_120633;
    int64_t free_x_126633;
    char *free_mem_126638;
    float free_a0_126661;
    float *retval_defunc_2_reduce_res_126662;
};
struct futhark_mc_segred_stage_1_parloop_struct_128891 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_117943;
    int64_t free_x_117999;
    char *free_mem_120633;
    int64_t free_x_126633;
    char *free_mem_126638;
    float free_a0_126661;
    char *free_reduce_stage_1_tid_res_arr_mem_126800;
};
static int futhark_mc_segred_stage_1_parloop_128892(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_117950,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128891
    *futhark_mc_segred_stage_1_parloop_struct_128891 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128891 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128891->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128892_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128892_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128891->free_n_112804;
    int64_t gtid_117943 =
            futhark_mc_segred_stage_1_parloop_struct_128891->free_gtid_117943;
    int64_t x_117999 =
            futhark_mc_segred_stage_1_parloop_struct_128891->free_x_117999;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128891->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_126633 =
            futhark_mc_segred_stage_1_parloop_struct_128891->free_x_126633;
    struct memblock mem_126638 = {.desc ="mem_126638", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128891->free_mem_126638,
                                  .size =0, .references =NULL};
    float a0_126661 =
          futhark_mc_segred_stage_1_parloop_struct_128891->free_a0_126661;
    struct memblock reduce_stage_1_tid_res_arr_mem_126800 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_126800",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128891->free_reduce_stage_1_tid_res_arr_mem_126800,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_126802 = start;
    float x_126778;
    float x_126779;
    float local_acc_126803 = 0.0F;
    
    for (; iter_126802 < end; iter_126802++) {
        int64_t gtid_117951 = iter_126802;
        float x_126781 = ((float *) mem_126638.mem)[gtid_117951];
        bool cond_126782 = sle64(x_117999, gtid_117951);
        float defunc_0_f_res_126783;
        
        if (cond_126782) {
            defunc_0_f_res_126783 = 0.0F;
        } else {
            int64_t i_126784 = add64(gtid_117951, x_126633);
            float x_126785 = ((float *) mem_120633.mem)[gtid_117943 * n_112804 +
                                                        i_126784];
            
            defunc_0_f_res_126783 = x_126785;
        }
        
        float x_126786 = a0_126661 * x_126781;
        float defunc_9_fit_fun_res_126787 = defunc_0_f_res_126783 * x_126786;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_126778 = local_acc_126803;
        }
        // Load next params
        {
            x_126779 = defunc_9_fit_fun_res_126787;
        }
        // Red body
        {
            float defunc_1_op_res_126780 = x_126778 + x_126779;
            
            local_acc_126803 = defunc_1_op_res_126780;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_126800.mem)[flat_tid_117950] =
        local_acc_126803;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128892_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128892_end -
                 futhark_mc_segred_stage_1_parloop_128892_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128892_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128892_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128892_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128889(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117950 = tid;
    int num_tasks_126799 = info.nsubtasks;
    struct futhark_mc_task_128888 *futhark_mc_task_128888 =
                                  (struct futhark_mc_task_128888 *) args;
    struct futhark_context *ctx = futhark_mc_task_128888->ctx;
    uint64_t futhark_mc_segred_task_128889_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128889_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128888->free_n_112804;
    int64_t gtid_117943 = futhark_mc_task_128888->free_gtid_117943;
    int64_t x_117999 = futhark_mc_task_128888->free_x_117999;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128888->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_126633 = futhark_mc_task_128888->free_x_126633;
    struct memblock mem_126638 = {.desc ="mem_126638", .mem =
                                  futhark_mc_task_128888->free_mem_126638,
                                  .size =0, .references =NULL};
    float a0_126661 = futhark_mc_task_128888->free_a0_126661;
    float defunc_2_reduce_res_126662 =
          *futhark_mc_task_128888->retval_defunc_2_reduce_res_126662;
    size_t reduce_stage_1_tid_res_arr_mem_126800_cached_sizze_128890 = 0;
    char *reduce_stage_1_tid_res_arr_mem_126800 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_126800_cached_sizze_128890 <
        (size_t) ((int64_t) 4 * num_tasks_126799)) {
        reduce_stage_1_tid_res_arr_mem_126800 =
            realloc(reduce_stage_1_tid_res_arr_mem_126800, (int64_t) 4 *
                    num_tasks_126799);
        reduce_stage_1_tid_res_arr_mem_126800_cached_sizze_128890 =
            (int64_t) 4 * num_tasks_126799;
    }
    
    int64_t iter_126802;
    struct futhark_mc_segred_stage_1_parloop_struct_128891
    futhark_mc_segred_stage_1_parloop_struct_128891;
    
    futhark_mc_segred_stage_1_parloop_struct_128891.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_gtid_117943 =
        gtid_117943;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_x_117999 = x_117999;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_x_126633 = x_126633;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_mem_126638 =
        mem_126638.mem;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_a0_126661 = a0_126661;
    futhark_mc_segred_stage_1_parloop_struct_128891.free_reduce_stage_1_tid_res_arr_mem_126800 =
        reduce_stage_1_tid_res_arr_mem_126800;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128892_task;
    
    futhark_mc_segred_stage_1_parloop_128892_task.name =
        "futhark_mc_segred_stage_1_parloop_128892";
    futhark_mc_segred_stage_1_parloop_128892_task.fn =
        futhark_mc_segred_stage_1_parloop_128892;
    futhark_mc_segred_stage_1_parloop_128892_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128891;
    futhark_mc_segred_stage_1_parloop_128892_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128892_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128892_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128892_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128892_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128892_task);
    
    if (futhark_mc_segred_stage_1_parloop_128892_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128892_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128892_total_end -
                 futhark_mc_segred_stage_1_parloop_128892_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128892_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128892_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128892_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126662 = 0.0F;
    }
    
    float x_126804;
    float x_126805;
    
    for (int32_t i_126807 = 0; i_126807 < num_tasks_126799; i_126807++) {
        flat_tid_117950 = i_126807;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_126804 = defunc_2_reduce_res_126662;
            }
            // load next params
            {
                x_126805 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_126800)[flat_tid_117950];
            }
            // red body
            {
                float defunc_1_op_res_126806 = x_126804 + x_126805;
                
                defunc_2_reduce_res_126662 = defunc_1_op_res_126806;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_126800);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128889_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128889_end -
                 futhark_mc_segred_task_128889_start;
        
        ctx->futhark_mc_segred_task_128889_runs[tid]++;
        ctx->futhark_mc_segred_task_128889_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128889_iter[tid] += iterations;
    }
    *futhark_mc_task_128888->retval_defunc_2_reduce_res_126662 =
        defunc_2_reduce_res_126662;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128881(void *args, int64_t start,
                                            int64_t end, int flat_tid_117946,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128880
    *futhark_mc_segmap_parloop_struct_128880 =
    (struct futhark_mc_segmap_parloop_struct_128880 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128880->ctx;
    uint64_t futhark_mc_segmap_parloop_128881_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128881_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128880->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128880->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128880->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128880->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128880->free_i_112880;
    int64_t gtid_117943 =
            futhark_mc_segmap_parloop_struct_128880->free_gtid_117943;
    int64_t x_117999 = futhark_mc_segmap_parloop_struct_128880->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 =
            futhark_mc_segmap_parloop_struct_128880->free_bytes_120764;
    struct memblock mem_120784 = {.desc ="mem_120784", .mem =
                                  futhark_mc_segmap_parloop_struct_128880->free_mem_120784,
                                  .size =0, .references =NULL};
    size_t mem_126638_cached_sizze_128882 = 0;
    char *mem_126638 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126757 = start;
    
    if (mem_126638_cached_sizze_128882 < (size_t) bytes_120764) {
        mem_126638 = realloc(mem_126638, bytes_120764);
        mem_126638_cached_sizze_128882 = bytes_120764;
    }
    for (; iter_126757 < end; iter_126757++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126788 = t_n_m_112861;
        int64_t gtid_117947 = iter_126757;
        int64_t remnant_126789 = iter_126757 - gtid_117947;
        int64_t x_126633 = ((int64_t *) mem_119882.mem)[gtid_117943 *
                                                        t_n_m_112861 +
                                                        gtid_117947];
        float x_126634 = ((float *) mem_119886.mem)[gtid_117943 * t_n_m_112861 +
                                                    gtid_117947];
        int64_t min_arg_126635 = mul64(t_jump_112811, gtid_117947);
        int64_t min_res_126636 = smin64(i_112880, min_arg_126635);
        float defunc_0_f_res_126637 = sitofp_i64_f32(min_res_126636);
        float defunc_2_reduce_res_126639;
        int64_t flat_tid_117948 = (int64_t) 0;
        int32_t num_tasks_126790;
        struct futhark_mc_task_128883 futhark_mc_task_128883;
        
        futhark_mc_task_128883.ctx = ctx;
        futhark_mc_task_128883.free_n_112804 = n_112804;
        futhark_mc_task_128883.free_gtid_117943 = gtid_117943;
        futhark_mc_task_128883.free_x_117999 = x_117999;
        futhark_mc_task_128883.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128883.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128883.free_x_126633 = x_126633;
        futhark_mc_task_128883.free_x_126634 = x_126634;
        futhark_mc_task_128883.free_defunc_0_f_res_126637 =
            defunc_0_f_res_126637;
        futhark_mc_task_128883.retval_defunc_2_reduce_res_126639 =
            &defunc_2_reduce_res_126639;
        futhark_mc_task_128883.retval_mem_126638 = mem_126638;
        
        struct scheduler_segop futhark_mc_task_128883_task;
        
        futhark_mc_task_128883_task.args = &futhark_mc_task_128883;
        futhark_mc_task_128883_task.top_level_fn =
            futhark_mc_segred_task_128884;
        futhark_mc_task_128883_task.name = "futhark_mc_segred_task_128884";
        futhark_mc_task_128883_task.iterations = t_window_112807;
        futhark_mc_task_128883_task.task_time =
            &ctx->futhark_mc_segred_task_128884_total_time;
        futhark_mc_task_128883_task.task_iter =
            &ctx->futhark_mc_segred_task_128884_total_iter;
        futhark_mc_task_128883_task.sched = STATIC;
        futhark_mc_task_128883_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128884_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128883_task);
        
        if (futhark_mc_segred_task_128884_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float a0_126661 = 1.0F / defunc_2_reduce_res_126639;
        float defunc_2_reduce_res_126662;
        int64_t flat_tid_117950 = (int64_t) 0;
        int32_t num_tasks_126799;
        struct futhark_mc_task_128888 futhark_mc_task_128888;
        
        futhark_mc_task_128888.ctx = ctx;
        futhark_mc_task_128888.free_n_112804 = n_112804;
        futhark_mc_task_128888.free_gtid_117943 = gtid_117943;
        futhark_mc_task_128888.free_x_117999 = x_117999;
        futhark_mc_task_128888.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128888.free_x_126633 = x_126633;
        futhark_mc_task_128888.free_mem_126638 = mem_126638;
        futhark_mc_task_128888.free_a0_126661 = a0_126661;
        futhark_mc_task_128888.retval_defunc_2_reduce_res_126662 =
            &defunc_2_reduce_res_126662;
        
        struct scheduler_segop futhark_mc_task_128888_task;
        
        futhark_mc_task_128888_task.args = &futhark_mc_task_128888;
        futhark_mc_task_128888_task.top_level_fn =
            futhark_mc_segred_task_128889;
        futhark_mc_task_128888_task.name = "futhark_mc_segred_task_128889";
        futhark_mc_task_128888_task.iterations = t_window_112807;
        futhark_mc_task_128888_task.task_time =
            &ctx->futhark_mc_segred_task_128889_total_time;
        futhark_mc_task_128888_task.task_iter =
            &ctx->futhark_mc_segred_task_128889_total_iter;
        futhark_mc_task_128888_task.sched = STATIC;
        futhark_mc_task_128888_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128889_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128888_task);
        
        if (futhark_mc_segred_task_128889_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120784.mem)[gtid_117947] = defunc_2_reduce_res_126662;
    }
    
  cleanup:
    { }
    free(mem_126638);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128881_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128881_end -
                 futhark_mc_segmap_parloop_128881_start;
        
        ctx->futhark_mc_segmap_parloop_128881_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128881_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128881_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128879(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117946 = tid;
    int num_tasks_126718 = info.nsubtasks;
    struct futhark_mc_task_128874 *futhark_mc_task_128874 =
                                  (struct futhark_mc_task_128874 *) args;
    struct futhark_context *ctx = futhark_mc_task_128874->ctx;
    uint64_t futhark_mc_segmap_nested_task_128879_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128879_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128874->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128874->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128874->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128874->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128874->free_i_112880;
    int64_t gtid_117943 = futhark_mc_task_128874->free_gtid_117943;
    int64_t x_117999 = futhark_mc_task_128874->free_x_117999;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128874->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128874->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128874->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128874->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128874->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 = futhark_mc_task_128874->free_bytes_120764;
    struct memblock mem_120784 = {.desc ="mem_120784", .mem =
                                  futhark_mc_task_128874->free_mem_120784,
                                  .size =0, .references =NULL};
    int64_t iter_126757;
    struct futhark_mc_segmap_parloop_struct_128880
    futhark_mc_segmap_parloop_struct_128880;
    
    futhark_mc_segmap_parloop_struct_128880.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128880.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128880.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128880.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128880.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128880.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128880.free_gtid_117943 = gtid_117943;
    futhark_mc_segmap_parloop_struct_128880.free_x_117999 = x_117999;
    futhark_mc_segmap_parloop_struct_128880.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128880.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128880.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128880.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128880.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128880.free_bytes_120764 = bytes_120764;
    futhark_mc_segmap_parloop_struct_128880.free_mem_120784 = mem_120784.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128881_task;
    
    futhark_mc_segmap_parloop_128881_task.name =
        "futhark_mc_segmap_parloop_128881";
    futhark_mc_segmap_parloop_128881_task.fn = futhark_mc_segmap_parloop_128881;
    futhark_mc_segmap_parloop_128881_task.args =
        &futhark_mc_segmap_parloop_struct_128880;
    futhark_mc_segmap_parloop_128881_task.iterations = iterations;
    futhark_mc_segmap_parloop_128881_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128881_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128881_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128881_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128881_task);
    
    if (futhark_mc_segmap_parloop_128881_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128881_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128881_total_end -
                 futhark_mc_segmap_parloop_128881_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128881_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128881_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128881_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128879_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128879_end -
                 futhark_mc_segmap_nested_task_128879_start;
        
        ctx->futhark_mc_segmap_nested_task_128879_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128879_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128879_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128872(void *args, int64_t start,
                                            int64_t end, int flat_tid_117942,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128871
    *futhark_mc_segmap_parloop_struct_128871 =
    (struct futhark_mc_segmap_parloop_struct_128871 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128871->ctx;
    uint64_t futhark_mc_segmap_parloop_128872_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128872_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128871->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128871->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128871->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128871->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128871->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128871->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128871->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 =
            futhark_mc_segmap_parloop_struct_128871->free_bytes_120764;
    struct memblock mem_120818 = {.desc ="mem_120818", .mem =
                                  futhark_mc_segmap_parloop_struct_128871->free_mem_120818,
                                  .size =0, .references =NULL};
    size_t mem_120784_cached_sizze_128873 = 0;
    char *mem_120784 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126632 = start;
    
    if (mem_120784_cached_sizze_128873 < (size_t) bytes_119828) {
        mem_120784 = realloc(mem_120784, bytes_119828);
        mem_120784_cached_sizze_128873 = bytes_119828;
    }
    for (; iter_126632 < end; iter_126632++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126716 = m_112803;
        int64_t gtid_117943 = iter_126632;
        int64_t remnant_126717 = iter_126632 - gtid_117943;
        int64_t x_117999 = ((int64_t *) mem_119696.mem)[gtid_117943];
        int64_t flat_tid_117944 = (int64_t) 0;
        int32_t num_tasks_126718;
        int64_t flat_tid_117946 = (int64_t) 0;
        struct futhark_mc_task_128874 futhark_mc_task_128874;
        
        futhark_mc_task_128874.ctx = ctx;
        futhark_mc_task_128874.free_n_112804 = n_112804;
        futhark_mc_task_128874.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128874.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128874.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128874.free_i_112880 = i_112880;
        futhark_mc_task_128874.free_gtid_117943 = gtid_117943;
        futhark_mc_task_128874.free_x_117999 = x_117999;
        futhark_mc_task_128874.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128874.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128874.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128874.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128874.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128874.free_bytes_120764 = bytes_120764;
        futhark_mc_task_128874.free_mem_120784 = mem_120784;
        
        struct scheduler_segop futhark_mc_task_128874_task;
        
        futhark_mc_task_128874_task.args = &futhark_mc_task_128874;
        futhark_mc_task_128874_task.top_level_fn =
            futhark_mc_segmap_task_128875;
        futhark_mc_task_128874_task.name = "futhark_mc_segmap_task_128875";
        futhark_mc_task_128874_task.iterations = t_n_m_112861;
        futhark_mc_task_128874_task.task_time =
            &ctx->futhark_mc_segmap_task_128875_total_time;
        futhark_mc_task_128874_task.task_iter =
            &ctx->futhark_mc_segmap_task_128875_total_iter;
        futhark_mc_task_128874_task.sched = STATIC;
        futhark_mc_task_128874_task.nested_fn =
            futhark_mc_segmap_nested_task_128879;
        
        int futhark_mc_segmap_task_128875_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128874_task);
        
        if (futhark_mc_segmap_task_128875_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120818.mem + gtid_117943 * t_n_m_112861 * (int64_t) 4,
                mem_120784 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120784);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128872_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128872_end -
                 futhark_mc_segmap_parloop_128872_start;
        
        ctx->futhark_mc_segmap_parloop_128872_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128872_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128872_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128870(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_117942 = tid;
    int num_tasks_126579 = info.nsubtasks;
    struct futhark_mc_task_128864 *futhark_mc_task_128864 =
                                  (struct futhark_mc_task_128864 *) args;
    struct futhark_context *ctx = futhark_mc_task_128864->ctx;
    uint64_t futhark_mc_segmap_nested_task_128870_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128870_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128864->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128864->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128864->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128864->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128864->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128864->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128864->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128864->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128864->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128864->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128864->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128864->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128864->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120764 = futhark_mc_task_128864->free_bytes_120764;
    struct memblock mem_120818 = {.desc ="mem_120818", .mem =
                                  futhark_mc_task_128864->free_mem_120818,
                                  .size =0, .references =NULL};
    int64_t iter_126632;
    struct futhark_mc_segmap_parloop_struct_128871
    futhark_mc_segmap_parloop_struct_128871;
    
    futhark_mc_segmap_parloop_struct_128871.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128871.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128871.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128871.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128871.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128871.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128871.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128871.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128871.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128871.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128871.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128871.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128871.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128871.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128871.free_bytes_120764 = bytes_120764;
    futhark_mc_segmap_parloop_struct_128871.free_mem_120818 = mem_120818.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128872_task;
    
    futhark_mc_segmap_parloop_128872_task.name =
        "futhark_mc_segmap_parloop_128872";
    futhark_mc_segmap_parloop_128872_task.fn = futhark_mc_segmap_parloop_128872;
    futhark_mc_segmap_parloop_128872_task.args =
        &futhark_mc_segmap_parloop_struct_128871;
    futhark_mc_segmap_parloop_128872_task.iterations = iterations;
    futhark_mc_segmap_parloop_128872_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128872_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128872_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128872_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128872_task);
    
    if (futhark_mc_segmap_parloop_128872_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128872_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128872_total_end -
                 futhark_mc_segmap_parloop_128872_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128872_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128872_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128872_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128870_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128870_end -
                 futhark_mc_segmap_nested_task_128870_start;
        
        ctx->futhark_mc_segmap_nested_task_128870_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128870_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128870_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128893 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120924;
    char *free_mem_120928;
};
struct futhark_mc_segmap_parloop_struct_128895 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120924;
    char *free_mem_120928;
};
static int futhark_mc_segmap_parloop_128896(void *args, int64_t start,
                                            int64_t end, int flat_tid_118085,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128895
    *futhark_mc_segmap_parloop_struct_128895 =
    (struct futhark_mc_segmap_parloop_struct_128895 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128895->ctx;
    uint64_t futhark_mc_segmap_parloop_128896_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128896_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128895->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128895->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128895->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128895->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128895->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128895->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128895->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 =
            futhark_mc_segmap_parloop_struct_128895->free_bytes_120819;
    struct memblock mem_120924 = {.desc ="mem_120924", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_120924,
                                  .size =0, .references =NULL};
    struct memblock mem_120928 = {.desc ="mem_120928", .mem =
                                  futhark_mc_segmap_parloop_struct_128895->free_mem_120928,
                                  .size =0, .references =NULL};
    size_t mem_120863_cached_sizze_128897 = 0;
    char *mem_120863 = NULL;
    size_t mem_120866_cached_sizze_128898 = 0;
    char *mem_120866 = NULL;
    size_t mem_120883_cached_sizze_128899 = 0;
    char *mem_120883 = NULL;
    size_t mem_120886_cached_sizze_128900 = 0;
    char *mem_120886 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126809 = start;
    
    if (mem_120863_cached_sizze_128897 < (size_t) bytes_119828) {
        mem_120863 = realloc(mem_120863, bytes_119828);
        mem_120863_cached_sizze_128897 = bytes_119828;
    }
    if (mem_120866_cached_sizze_128898 < (size_t) bytes_119828) {
        mem_120866 = realloc(mem_120866, bytes_119828);
        mem_120866_cached_sizze_128898 = bytes_119828;
    }
    if (mem_120883_cached_sizze_128899 < (size_t) bytes_120819) {
        mem_120883 = realloc(mem_120883, bytes_120819);
        mem_120883_cached_sizze_128899 = bytes_120819;
    }
    if (mem_120886_cached_sizze_128900 < (size_t) bytes_120819) {
        mem_120886 = realloc(mem_120886, bytes_120819);
        mem_120886_cached_sizze_128900 = bytes_120819;
    }
    for (; iter_126809 < end; iter_126809++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_126886 = m_112803;
        int64_t gtid_118086 = iter_126809;
        int64_t remnant_126887 = iter_126809 - gtid_118086;
        int64_t x_114465 = ((int64_t *) mem_119696.mem)[gtid_118086];
        
        for (int64_t i_126810 = 0; i_126810 < t_n_m_112861; i_126810++) {
            int64_t x_126813 = ((int64_t *) mem_119882.mem)[gtid_118086 *
                                                            t_n_m_112861 +
                                                            i_126810];
            float x_126814 = ((float *) mem_119886.mem)[gtid_118086 *
                                                        t_n_m_112861 +
                                                        i_126810];
            int64_t min_arg_126815 = mul64(t_jump_112811, i_126810);
            int64_t min_res_126816 = smin64(i_112880, min_arg_126815);
            float defunc_0_f_res_126817 = sitofp_i64_f32(min_res_126816);
            float defunc_2_reduce_res_126820;
            float defunc_2_reduce_res_126821;
            float defunc_2_reduce_res_126822;
            float redout_126826;
            float redout_126827;
            float redout_126828;
            
            redout_126826 = 0.0F;
            redout_126827 = 0.0F;
            redout_126828 = 0.0F;
            for (int64_t i_126825 = 0; i_126825 < t_window_112807; i_126825++) {
                bool cond_126831 = sle64(x_114465, i_126825);
                float defunc_0_f_res_126832;
                
                if (cond_126831) {
                    defunc_0_f_res_126832 = 0.0F;
                } else {
                    int64_t i_126833 = add64(x_126813, i_126825);
                    float x_126834 = ((float *) mem_119718.mem)[gtid_118086 *
                                                                n_112804 +
                                                                i_126833];
                    float defunc_0_f_res_f_res_126835 = 1.0F + x_126834;
                    
                    defunc_0_f_res_126832 = defunc_0_f_res_f_res_126835;
                }
                
                float defunc_0_f_res_126836;
                
                if (cond_126831) {
                    defunc_0_f_res_126836 = 0.0F;
                } else {
                    int64_t i_126837 = add64(x_126813, i_126825);
                    float x_126838 = ((float *) mem_120637.mem)[gtid_118086 *
                                                                n_112804 +
                                                                i_126837];
                    
                    defunc_0_f_res_126836 = x_126838;
                }
                
                float x_j_126839 = defunc_0_f_res_126832 -
                      defunc_0_f_res_126817;
                float abs_res_126840 = (float) fabs(x_j_126839);
                float tmp1_126841 = abs_res_126840 / x_126814;
                float x_126842 = tmp1_126841 * tmp1_126841;
                float y_126843 = tmp1_126841 * x_126842;
                float tmp2_126844 = 1.0F - y_126843;
                float x_126845 = tmp2_126844 * tmp2_126844;
                float tmp3_126846 = tmp2_126844 * x_126845;
                float tmp4_126847 = defunc_0_f_res_126836 * tmp3_126846;
                float defunc_1_f_res_126848 = x_j_126839 * tmp4_126847;
                float defunc_1_f_res_126849 = x_j_126839 *
                      defunc_1_f_res_126848;
                float defunc_1_op_res_126850 = tmp4_126847 + redout_126826;
                float defunc_1_op_res_126851 = defunc_1_f_res_126848 +
                      redout_126827;
                float defunc_1_op_res_126852 = defunc_1_f_res_126849 +
                      redout_126828;
                
                ((float *) mem_120883)[i_126825] = defunc_1_f_res_126848;
                ((float *) mem_120886)[i_126825] = tmp4_126847;
                
                float redout_tmp_126890 = defunc_1_op_res_126850;
                float redout_tmp_126891 = defunc_1_op_res_126851;
                float redout_tmp_126892 = defunc_1_op_res_126852;
                
                redout_126826 = redout_tmp_126890;
                redout_126827 = redout_tmp_126891;
                redout_126828 = redout_tmp_126892;
            }
            defunc_2_reduce_res_126820 = redout_126826;
            defunc_2_reduce_res_126821 = redout_126827;
            defunc_2_reduce_res_126822 = redout_126828;
            
            float x_126855 = defunc_2_reduce_res_126820 *
                  defunc_2_reduce_res_126822;
            float y_126856 = defunc_2_reduce_res_126821 *
                  defunc_2_reduce_res_126821;
            float y_126857 = x_126855 - y_126856;
            float det1_126858 = 1.0F / y_126857;
            float a11_126859 = defunc_2_reduce_res_126822 * det1_126858;
            float negate_arg_126860 = defunc_2_reduce_res_126821 * det1_126858;
            float b11_126861 = 0.0F - negate_arg_126860;
            float c11_126862 = defunc_2_reduce_res_126820 * det1_126858;
            float defunc_2_reduce_res_126863;
            float defunc_2_reduce_res_126864;
            float redout_126866;
            float redout_126867;
            
            redout_126866 = 0.0F;
            redout_126867 = 0.0F;
            for (int64_t i_126865 = 0; i_126865 < t_window_112807; i_126865++) {
                float x_126868 = ((float *) mem_120886)[i_126865];
                float x_126869 = ((float *) mem_120883)[i_126865];
                bool cond_126870 = sle64(x_114465, i_126865);
                float defunc_0_f_res_126871;
                
                if (cond_126870) {
                    defunc_0_f_res_126871 = 0.0F;
                } else {
                    int64_t i_126872 = add64(x_126813, i_126865);
                    float x_126873 = ((float *) mem_120633.mem)[gtid_118086 *
                                                                n_112804 +
                                                                i_126872];
                    
                    defunc_0_f_res_126871 = x_126873;
                }
                
                float x_126874 = a11_126859 * x_126868;
                float y_126875 = b11_126861 * x_126869;
                float x_126876 = x_126874 + y_126875;
                float defunc_9_fit_fun_res_126877 = defunc_0_f_res_126871 *
                      x_126876;
                float x_126878 = b11_126861 * x_126868;
                float y_126879 = c11_126862 * x_126869;
                float x_126880 = x_126878 + y_126879;
                float defunc_9_slope_fun_res_126881 = defunc_0_f_res_126871 *
                      x_126880;
                float defunc_1_op_res_126882 = defunc_9_fit_fun_res_126877 +
                      redout_126866;
                float defunc_1_op_res_126883 = defunc_9_slope_fun_res_126881 +
                      redout_126867;
                float redout_tmp_126895 = defunc_1_op_res_126882;
                float redout_tmp_126896 = defunc_1_op_res_126883;
                
                redout_126866 = redout_tmp_126895;
                redout_126867 = redout_tmp_126896;
            }
            defunc_2_reduce_res_126863 = redout_126866;
            defunc_2_reduce_res_126864 = redout_126867;
            ((float *) mem_120863)[i_126810] = defunc_2_reduce_res_126863;
            ((float *) mem_120866)[i_126810] = defunc_2_reduce_res_126864;
        }
        memmove(mem_120924.mem + gtid_118086 * t_n_m_112861 * (int64_t) 4,
                mem_120863 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120928.mem + gtid_118086 * t_n_m_112861 * (int64_t) 4,
                mem_120866 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120863);
    free(mem_120866);
    free(mem_120883);
    free(mem_120886);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128896_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128896_end -
                 futhark_mc_segmap_parloop_128896_start;
        
        ctx->futhark_mc_segmap_parloop_128896_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128896_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128896_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128894(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118085 = tid;
    int num_tasks_126808 = info.nsubtasks;
    struct futhark_mc_task_128893 *futhark_mc_task_128893 =
                                  (struct futhark_mc_task_128893 *) args;
    struct futhark_context *ctx = futhark_mc_task_128893->ctx;
    uint64_t futhark_mc_segmap_task_128894_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128894_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128893->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128893->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128893->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128893->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128893->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128893->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128893->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128893->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128893->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128893->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128893->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128893->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128893->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 = futhark_mc_task_128893->free_bytes_120819;
    struct memblock mem_120924 = {.desc ="mem_120924", .mem =
                                  futhark_mc_task_128893->free_mem_120924,
                                  .size =0, .references =NULL};
    struct memblock mem_120928 = {.desc ="mem_120928", .mem =
                                  futhark_mc_task_128893->free_mem_120928,
                                  .size =0, .references =NULL};
    int64_t iter_126809;
    struct futhark_mc_segmap_parloop_struct_128895
    futhark_mc_segmap_parloop_struct_128895;
    
    futhark_mc_segmap_parloop_struct_128895.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128895.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128895.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128895.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128895.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128895.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128895.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128895.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128895.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128895.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128895.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128895.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128895.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128895.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128895.free_bytes_120819 = bytes_120819;
    futhark_mc_segmap_parloop_struct_128895.free_mem_120924 = mem_120924.mem;
    futhark_mc_segmap_parloop_struct_128895.free_mem_120928 = mem_120928.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128896_task;
    
    futhark_mc_segmap_parloop_128896_task.name =
        "futhark_mc_segmap_parloop_128896";
    futhark_mc_segmap_parloop_128896_task.fn = futhark_mc_segmap_parloop_128896;
    futhark_mc_segmap_parloop_128896_task.args =
        &futhark_mc_segmap_parloop_struct_128895;
    futhark_mc_segmap_parloop_128896_task.iterations = iterations;
    futhark_mc_segmap_parloop_128896_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128896_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128896_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128896_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128896_task);
    
    if (futhark_mc_segmap_parloop_128896_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128896_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128896_total_end -
                 futhark_mc_segmap_parloop_128896_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128896_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128896_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128896_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128894_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128894_end -
                 futhark_mc_segmap_task_128894_start;
        
        ctx->futhark_mc_segmap_task_128894_runs[tid]++;
        ctx->futhark_mc_segmap_task_128894_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128894_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128902 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120924;
    char *free_mem_120928;
};
struct futhark_mc_task_128906 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120857;
    char *free_mem_120860;
};
struct futhark_mc_segmap_parloop_struct_128908 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120857;
    char *free_mem_120860;
};
static int futhark_mc_segmap_parloop_128909(void *args, int64_t start,
                                            int64_t end, int flat_tid_118089,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128908
    *futhark_mc_segmap_parloop_struct_128908 =
    (struct futhark_mc_segmap_parloop_struct_128908 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128908->ctx;
    uint64_t futhark_mc_segmap_parloop_128909_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128909_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128908->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128908->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128908->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128908->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128908->free_i_112880;
    int64_t gtid_118088 =
            futhark_mc_segmap_parloop_struct_128908->free_gtid_118088;
    int64_t x_118173 = futhark_mc_segmap_parloop_struct_128908->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 =
            futhark_mc_segmap_parloop_struct_128908->free_bytes_120819;
    struct memblock mem_120857 = {.desc ="mem_120857", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_120857,
                                  .size =0, .references =NULL};
    struct memblock mem_120860 = {.desc ="mem_120860", .mem =
                                  futhark_mc_segmap_parloop_struct_128908->free_mem_120860,
                                  .size =0, .references =NULL};
    size_t mem_126973_cached_sizze_128910 = 0;
    char *mem_126973 = NULL;
    size_t mem_126975_cached_sizze_128911 = 0;
    char *mem_126975 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127044 = start;
    
    if (mem_126973_cached_sizze_128910 < (size_t) bytes_120819) {
        mem_126973 = realloc(mem_126973, bytes_120819);
        mem_126973_cached_sizze_128910 = bytes_120819;
    }
    if (mem_126975_cached_sizze_128911 < (size_t) bytes_120819) {
        mem_126975 = realloc(mem_126975, bytes_120819);
        mem_126975_cached_sizze_128911 = bytes_120819;
    }
    for (; iter_127044 < end; iter_127044++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127094 = t_n_m_112861;
        int64_t gtid_118090 = iter_127044;
        int64_t remnant_127095 = iter_127044 - gtid_118090;
        int64_t x_126968 = ((int64_t *) mem_119882.mem)[gtid_118088 *
                                                        t_n_m_112861 +
                                                        gtid_118090];
        float x_126969 = ((float *) mem_119886.mem)[gtid_118088 * t_n_m_112861 +
                                                    gtid_118090];
        int64_t min_arg_126970 = mul64(t_jump_112811, gtid_118090);
        int64_t min_res_126971 = smin64(i_112880, min_arg_126970);
        float defunc_0_f_res_126972 = sitofp_i64_f32(min_res_126971);
        float defunc_2_reduce_res_126977;
        float defunc_2_reduce_res_126978;
        float defunc_2_reduce_res_126979;
        float redout_127046;
        float redout_127047;
        float redout_127048;
        
        redout_127046 = 0.0F;
        redout_127047 = 0.0F;
        redout_127048 = 0.0F;
        for (int64_t i_127045 = 0; i_127045 < t_window_112807; i_127045++) {
            bool cond_127051 = sle64(x_118173, i_127045);
            float defunc_0_f_res_127052;
            
            if (cond_127051) {
                defunc_0_f_res_127052 = 0.0F;
            } else {
                int64_t i_127053 = add64(x_126968, i_127045);
                float x_127054 = ((float *) mem_119718.mem)[gtid_118088 *
                                                            n_112804 +
                                                            i_127053];
                float defunc_0_f_res_f_res_127055 = 1.0F + x_127054;
                
                defunc_0_f_res_127052 = defunc_0_f_res_f_res_127055;
            }
            
            float defunc_0_f_res_127056;
            
            if (cond_127051) {
                defunc_0_f_res_127056 = 0.0F;
            } else {
                int64_t i_127057 = add64(x_126968, i_127045);
                float x_127058 = ((float *) mem_120637.mem)[gtid_118088 *
                                                            n_112804 +
                                                            i_127057];
                
                defunc_0_f_res_127056 = x_127058;
            }
            
            float x_j_127059 = defunc_0_f_res_127052 - defunc_0_f_res_126972;
            float abs_res_127060 = (float) fabs(x_j_127059);
            float tmp1_127061 = abs_res_127060 / x_126969;
            float x_127062 = tmp1_127061 * tmp1_127061;
            float y_127063 = tmp1_127061 * x_127062;
            float tmp2_127064 = 1.0F - y_127063;
            float x_127065 = tmp2_127064 * tmp2_127064;
            float tmp3_127066 = tmp2_127064 * x_127065;
            float tmp4_127067 = defunc_0_f_res_127056 * tmp3_127066;
            float defunc_1_f_res_127068 = x_j_127059 * tmp4_127067;
            float defunc_1_f_res_127069 = x_j_127059 * defunc_1_f_res_127068;
            float defunc_1_op_res_127070 = tmp4_127067 + redout_127046;
            float defunc_1_op_res_127071 = defunc_1_f_res_127068 +
                  redout_127047;
            float defunc_1_op_res_127072 = defunc_1_f_res_127069 +
                  redout_127048;
            
            ((float *) mem_126973)[i_127045] = defunc_1_f_res_127068;
            ((float *) mem_126975)[i_127045] = tmp4_127067;
            
            float redout_tmp_127096 = defunc_1_op_res_127070;
            float redout_tmp_127097 = defunc_1_op_res_127071;
            float redout_tmp_127098 = defunc_1_op_res_127072;
            
            redout_127046 = redout_tmp_127096;
            redout_127047 = redout_tmp_127097;
            redout_127048 = redout_tmp_127098;
        }
        defunc_2_reduce_res_126977 = redout_127046;
        defunc_2_reduce_res_126978 = redout_127047;
        defunc_2_reduce_res_126979 = redout_127048;
        
        float x_127012 = defunc_2_reduce_res_126977 *
              defunc_2_reduce_res_126979;
        float y_127013 = defunc_2_reduce_res_126978 *
              defunc_2_reduce_res_126978;
        float y_127014 = x_127012 - y_127013;
        float det1_127015 = 1.0F / y_127014;
        float a11_127016 = defunc_2_reduce_res_126979 * det1_127015;
        float negate_arg_127017 = defunc_2_reduce_res_126978 * det1_127015;
        float b11_127018 = 0.0F - negate_arg_127017;
        float c11_127019 = defunc_2_reduce_res_126977 * det1_127015;
        float defunc_2_reduce_res_127020;
        float defunc_2_reduce_res_127021;
        float redout_127076;
        float redout_127077;
        
        redout_127076 = 0.0F;
        redout_127077 = 0.0F;
        for (int64_t i_127075 = 0; i_127075 < t_window_112807; i_127075++) {
            float x_127078 = ((float *) mem_126975)[i_127075];
            float x_127079 = ((float *) mem_126973)[i_127075];
            bool cond_127080 = sle64(x_118173, i_127075);
            float defunc_0_f_res_127081;
            
            if (cond_127080) {
                defunc_0_f_res_127081 = 0.0F;
            } else {
                int64_t i_127082 = add64(x_126968, i_127075);
                float x_127083 = ((float *) mem_120633.mem)[gtid_118088 *
                                                            n_112804 +
                                                            i_127082];
                
                defunc_0_f_res_127081 = x_127083;
            }
            
            float x_127084 = a11_127016 * x_127078;
            float y_127085 = b11_127018 * x_127079;
            float x_127086 = x_127084 + y_127085;
            float defunc_9_fit_fun_res_127087 = defunc_0_f_res_127081 *
                  x_127086;
            float x_127088 = b11_127018 * x_127078;
            float y_127089 = c11_127019 * x_127079;
            float x_127090 = x_127088 + y_127089;
            float defunc_9_slope_fun_res_127091 = defunc_0_f_res_127081 *
                  x_127090;
            float defunc_1_op_res_127092 = defunc_9_fit_fun_res_127087 +
                  redout_127076;
            float defunc_1_op_res_127093 = defunc_9_slope_fun_res_127091 +
                  redout_127077;
            float redout_tmp_127101 = defunc_1_op_res_127092;
            float redout_tmp_127102 = defunc_1_op_res_127093;
            
            redout_127076 = redout_tmp_127101;
            redout_127077 = redout_tmp_127102;
        }
        defunc_2_reduce_res_127020 = redout_127076;
        defunc_2_reduce_res_127021 = redout_127077;
        ((float *) mem_120857.mem)[gtid_118090] = defunc_2_reduce_res_127020;
        ((float *) mem_120860.mem)[gtid_118090] = defunc_2_reduce_res_127021;
    }
    
  cleanup:
    { }
    free(mem_126973);
    free(mem_126975);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128909_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128909_end -
                 futhark_mc_segmap_parloop_128909_start;
        
        ctx->futhark_mc_segmap_parloop_128909_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128909_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128909_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128907(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118089 = tid;
    int num_tasks_127043 = info.nsubtasks;
    struct futhark_mc_task_128906 *futhark_mc_task_128906 =
                                  (struct futhark_mc_task_128906 *) args;
    struct futhark_context *ctx = futhark_mc_task_128906->ctx;
    uint64_t futhark_mc_segmap_task_128907_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128907_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128906->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128906->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128906->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128906->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128906->free_i_112880;
    int64_t gtid_118088 = futhark_mc_task_128906->free_gtid_118088;
    int64_t x_118173 = futhark_mc_task_128906->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128906->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128906->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128906->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128906->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128906->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 = futhark_mc_task_128906->free_bytes_120819;
    struct memblock mem_120857 = {.desc ="mem_120857", .mem =
                                  futhark_mc_task_128906->free_mem_120857,
                                  .size =0, .references =NULL};
    struct memblock mem_120860 = {.desc ="mem_120860", .mem =
                                  futhark_mc_task_128906->free_mem_120860,
                                  .size =0, .references =NULL};
    int64_t iter_127044;
    struct futhark_mc_segmap_parloop_struct_128908
    futhark_mc_segmap_parloop_struct_128908;
    
    futhark_mc_segmap_parloop_struct_128908.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128908.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128908.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128908.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128908.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128908.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128908.free_gtid_118088 = gtid_118088;
    futhark_mc_segmap_parloop_struct_128908.free_x_118173 = x_118173;
    futhark_mc_segmap_parloop_struct_128908.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128908.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128908.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128908.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128908.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128908.free_bytes_120819 = bytes_120819;
    futhark_mc_segmap_parloop_struct_128908.free_mem_120857 = mem_120857.mem;
    futhark_mc_segmap_parloop_struct_128908.free_mem_120860 = mem_120860.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128909_task;
    
    futhark_mc_segmap_parloop_128909_task.name =
        "futhark_mc_segmap_parloop_128909";
    futhark_mc_segmap_parloop_128909_task.fn = futhark_mc_segmap_parloop_128909;
    futhark_mc_segmap_parloop_128909_task.args =
        &futhark_mc_segmap_parloop_struct_128908;
    futhark_mc_segmap_parloop_128909_task.iterations = iterations;
    futhark_mc_segmap_parloop_128909_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128909_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128909_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128909_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128909_task);
    
    if (futhark_mc_segmap_parloop_128909_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128909_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128909_total_end -
                 futhark_mc_segmap_parloop_128909_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128909_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128909_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128909_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128907_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128907_end -
                 futhark_mc_segmap_task_128907_start;
        
        ctx->futhark_mc_segmap_task_128907_runs[tid]++;
        ctx->futhark_mc_segmap_task_128907_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128907_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128913 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120819;
    char *free_mem_120857;
    char *free_mem_120860;
};
struct futhark_mc_task_128917 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126898;
    float free_x_126899;
    float free_defunc_0_f_res_126902;
    float *retval_defunc_2_reduce_res_126905;
    float *retval_defunc_2_reduce_res_126906;
    float *retval_defunc_2_reduce_res_126907;
    char *retval_mem_126903;
    char *retval_mem_126904;
};
struct futhark_mc_segred_stage_1_parloop_struct_128922 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_126898;
    float free_x_126899;
    float free_defunc_0_f_res_126902;
    char *free_mem_126903;
    char *free_mem_126904;
    char *free_reduce_stage_1_tid_res_arr_mem_127155;
    char *free_reduce_stage_1_tid_res_arr_mem_127157;
    char *free_reduce_stage_1_tid_res_arr_mem_127159;
};
static int futhark_mc_segred_stage_1_parloop_128923(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118093,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128922
    *futhark_mc_segred_stage_1_parloop_struct_128922 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128922 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128922->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128923_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128923_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128922->free_n_112804;
    int64_t gtid_118088 =
            futhark_mc_segred_stage_1_parloop_struct_128922->free_gtid_118088;
    int64_t x_118173 =
            futhark_mc_segred_stage_1_parloop_struct_128922->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128922->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128922->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126898 =
            futhark_mc_segred_stage_1_parloop_struct_128922->free_x_126898;
    float x_126899 =
          futhark_mc_segred_stage_1_parloop_struct_128922->free_x_126899;
    float defunc_0_f_res_126902 =
          futhark_mc_segred_stage_1_parloop_struct_128922->free_defunc_0_f_res_126902;
    struct memblock mem_126903 = {.desc ="mem_126903", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128922->free_mem_126903,
                                  .size =0, .references =NULL};
    struct memblock mem_126904 = {.desc ="mem_126904", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128922->free_mem_126904,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127155 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127155",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128922->free_reduce_stage_1_tid_res_arr_mem_127155,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127157 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127157",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128922->free_reduce_stage_1_tid_res_arr_mem_127157,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127159 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127159",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128922->free_reduce_stage_1_tid_res_arr_mem_127159,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127161 = start;
    float x_127104;
    float x_127105;
    float x_127107;
    float x_127108;
    float x_127110;
    float x_127111;
    float local_acc_127162 = 0.0F;
    float local_acc_127163 = 0.0F;
    float local_acc_127164 = 0.0F;
    
    for (; iter_127161 < end; iter_127161++) {
        int64_t gtid_118094 = iter_127161;
        bool cond_127113 = sle64(x_118173, gtid_118094);
        float defunc_0_f_res_127114;
        
        if (cond_127113) {
            defunc_0_f_res_127114 = 0.0F;
        } else {
            int64_t i_127115 = add64(gtid_118094, x_126898);
            float x_127116 = ((float *) mem_119718.mem)[gtid_118088 * n_112804 +
                                                        i_127115];
            float defunc_0_f_res_f_res_127117 = 1.0F + x_127116;
            
            defunc_0_f_res_127114 = defunc_0_f_res_f_res_127117;
        }
        
        float defunc_0_f_res_127118;
        
        if (cond_127113) {
            defunc_0_f_res_127118 = 0.0F;
        } else {
            int64_t i_127119 = add64(gtid_118094, x_126898);
            float x_127120 = ((float *) mem_120637.mem)[gtid_118088 * n_112804 +
                                                        i_127119];
            
            defunc_0_f_res_127118 = x_127120;
        }
        
        float x_j_127121 = defunc_0_f_res_127114 - defunc_0_f_res_126902;
        float abs_res_127122 = (float) fabs(x_j_127121);
        float tmp1_127123 = abs_res_127122 / x_126899;
        float x_127124 = tmp1_127123 * tmp1_127123;
        float y_127125 = tmp1_127123 * x_127124;
        float tmp2_127126 = 1.0F - y_127125;
        float x_127127 = tmp2_127126 * tmp2_127126;
        float tmp3_127128 = tmp2_127126 * x_127127;
        float tmp4_127129 = defunc_0_f_res_127118 * tmp3_127128;
        float defunc_1_f_res_127130 = x_j_127121 * tmp4_127129;
        float defunc_1_f_res_127131 = x_j_127121 * defunc_1_f_res_127130;
        
        // save map-out results
        {
            ((float *) mem_126903.mem)[gtid_118094] = defunc_1_f_res_127130;
            ((float *) mem_126904.mem)[gtid_118094] = tmp4_127129;
        }
        // Load accum params
        {
            x_127104 = local_acc_127162;
        }
        // Load next params
        {
            x_127105 = tmp4_127129;
        }
        // Red body
        {
            float defunc_1_op_res_127106 = x_127104 + x_127105;
            
            local_acc_127162 = defunc_1_op_res_127106;
        }
        // Load accum params
        {
            x_127107 = local_acc_127163;
        }
        // Load next params
        {
            x_127108 = defunc_1_f_res_127130;
        }
        // Red body
        {
            float defunc_1_op_res_127109 = x_127107 + x_127108;
            
            local_acc_127163 = defunc_1_op_res_127109;
        }
        // Load accum params
        {
            x_127110 = local_acc_127164;
        }
        // Load next params
        {
            x_127111 = defunc_1_f_res_127131;
        }
        // Red body
        {
            float defunc_1_op_res_127112 = x_127110 + x_127111;
            
            local_acc_127164 = defunc_1_op_res_127112;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127155.mem)[flat_tid_118093] =
        local_acc_127162;
    ((float *) reduce_stage_1_tid_res_arr_mem_127157.mem)[flat_tid_118093] =
        local_acc_127163;
    ((float *) reduce_stage_1_tid_res_arr_mem_127159.mem)[flat_tid_118093] =
        local_acc_127164;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128923_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128923_end -
                 futhark_mc_segred_stage_1_parloop_128923_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128923_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128923_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128923_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128918(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118093 = tid;
    int num_tasks_127154 = info.nsubtasks;
    struct futhark_mc_task_128917 *futhark_mc_task_128917 =
                                  (struct futhark_mc_task_128917 *) args;
    struct futhark_context *ctx = futhark_mc_task_128917->ctx;
    uint64_t futhark_mc_segred_task_128918_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128918_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128917->free_n_112804;
    int64_t gtid_118088 = futhark_mc_task_128917->free_gtid_118088;
    int64_t x_118173 = futhark_mc_task_128917->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128917->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128917->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_126898 = futhark_mc_task_128917->free_x_126898;
    float x_126899 = futhark_mc_task_128917->free_x_126899;
    float defunc_0_f_res_126902 =
          futhark_mc_task_128917->free_defunc_0_f_res_126902;
    float defunc_2_reduce_res_126905 =
          *futhark_mc_task_128917->retval_defunc_2_reduce_res_126905;
    float defunc_2_reduce_res_126906 =
          *futhark_mc_task_128917->retval_defunc_2_reduce_res_126906;
    float defunc_2_reduce_res_126907 =
          *futhark_mc_task_128917->retval_defunc_2_reduce_res_126907;
    struct memblock mem_126903 = {.desc ="mem_126903", .mem =
                                  futhark_mc_task_128917->retval_mem_126903,
                                  .size =0, .references =NULL};
    struct memblock mem_126904 = {.desc ="mem_126904", .mem =
                                  futhark_mc_task_128917->retval_mem_126904,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127155_cached_sizze_128919 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127155 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127157_cached_sizze_128920 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127157 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127159_cached_sizze_128921 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127159 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127155_cached_sizze_128919 <
        (size_t) ((int64_t) 4 * num_tasks_127154)) {
        reduce_stage_1_tid_res_arr_mem_127155 =
            realloc(reduce_stage_1_tid_res_arr_mem_127155, (int64_t) 4 *
                    num_tasks_127154);
        reduce_stage_1_tid_res_arr_mem_127155_cached_sizze_128919 =
            (int64_t) 4 * num_tasks_127154;
    }
    if (reduce_stage_1_tid_res_arr_mem_127157_cached_sizze_128920 <
        (size_t) ((int64_t) 4 * num_tasks_127154)) {
        reduce_stage_1_tid_res_arr_mem_127157 =
            realloc(reduce_stage_1_tid_res_arr_mem_127157, (int64_t) 4 *
                    num_tasks_127154);
        reduce_stage_1_tid_res_arr_mem_127157_cached_sizze_128920 =
            (int64_t) 4 * num_tasks_127154;
    }
    if (reduce_stage_1_tid_res_arr_mem_127159_cached_sizze_128921 <
        (size_t) ((int64_t) 4 * num_tasks_127154)) {
        reduce_stage_1_tid_res_arr_mem_127159 =
            realloc(reduce_stage_1_tid_res_arr_mem_127159, (int64_t) 4 *
                    num_tasks_127154);
        reduce_stage_1_tid_res_arr_mem_127159_cached_sizze_128921 =
            (int64_t) 4 * num_tasks_127154;
    }
    
    int64_t iter_127161;
    struct futhark_mc_segred_stage_1_parloop_struct_128922
    futhark_mc_segred_stage_1_parloop_struct_128922;
    
    futhark_mc_segred_stage_1_parloop_struct_128922.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_gtid_118088 =
        gtid_118088;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_x_118173 = x_118173;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_mem_119718 =
        mem_119718.mem;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_mem_120637 =
        mem_120637.mem;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_x_126898 = x_126898;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_x_126899 = x_126899;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_defunc_0_f_res_126902 =
        defunc_0_f_res_126902;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_mem_126903 =
        mem_126903.mem;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_mem_126904 =
        mem_126904.mem;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_reduce_stage_1_tid_res_arr_mem_127155 =
        reduce_stage_1_tid_res_arr_mem_127155;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_reduce_stage_1_tid_res_arr_mem_127157 =
        reduce_stage_1_tid_res_arr_mem_127157;
    futhark_mc_segred_stage_1_parloop_struct_128922.free_reduce_stage_1_tid_res_arr_mem_127159 =
        reduce_stage_1_tid_res_arr_mem_127159;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128923_task;
    
    futhark_mc_segred_stage_1_parloop_128923_task.name =
        "futhark_mc_segred_stage_1_parloop_128923";
    futhark_mc_segred_stage_1_parloop_128923_task.fn =
        futhark_mc_segred_stage_1_parloop_128923;
    futhark_mc_segred_stage_1_parloop_128923_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128922;
    futhark_mc_segred_stage_1_parloop_128923_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128923_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128923_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128923_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128923_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128923_task);
    
    if (futhark_mc_segred_stage_1_parloop_128923_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128923_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128923_total_end -
                 futhark_mc_segred_stage_1_parloop_128923_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128923_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128923_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128923_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126905 = 0.0F;
        defunc_2_reduce_res_126906 = 0.0F;
        defunc_2_reduce_res_126907 = 0.0F;
    }
    
    float x_127165;
    float x_127166;
    float x_127168;
    float x_127169;
    float x_127171;
    float x_127172;
    
    for (int32_t i_127174 = 0; i_127174 < num_tasks_127154; i_127174++) {
        flat_tid_118093 = i_127174;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127165 = defunc_2_reduce_res_126905;
            }
            // load next params
            {
                x_127166 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127155)[flat_tid_118093];
            }
            // red body
            {
                float defunc_1_op_res_127167 = x_127165 + x_127166;
                
                defunc_2_reduce_res_126905 = defunc_1_op_res_127167;
            }
            // load acc params
            {
                x_127168 = defunc_2_reduce_res_126906;
            }
            // load next params
            {
                x_127169 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127157)[flat_tid_118093];
            }
            // red body
            {
                float defunc_1_op_res_127170 = x_127168 + x_127169;
                
                defunc_2_reduce_res_126906 = defunc_1_op_res_127170;
            }
            // load acc params
            {
                x_127171 = defunc_2_reduce_res_126907;
            }
            // load next params
            {
                x_127172 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127159)[flat_tid_118093];
            }
            // red body
            {
                float defunc_1_op_res_127173 = x_127171 + x_127172;
                
                defunc_2_reduce_res_126907 = defunc_1_op_res_127173;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127155);
    free(reduce_stage_1_tid_res_arr_mem_127157);
    free(reduce_stage_1_tid_res_arr_mem_127159);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128918_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128918_end -
                 futhark_mc_segred_task_128918_start;
        
        ctx->futhark_mc_segred_task_128918_runs[tid]++;
        ctx->futhark_mc_segred_task_128918_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128918_iter[tid] += iterations;
    }
    *futhark_mc_task_128917->retval_defunc_2_reduce_res_126905 =
        defunc_2_reduce_res_126905;
    *futhark_mc_task_128917->retval_defunc_2_reduce_res_126906 =
        defunc_2_reduce_res_126906;
    *futhark_mc_task_128917->retval_defunc_2_reduce_res_126907 =
        defunc_2_reduce_res_126907;
    futhark_mc_task_128917->retval_mem_126903 = mem_126903.mem;
    futhark_mc_task_128917->retval_mem_126904 = mem_126904.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128924 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_120633;
    int64_t free_x_126898;
    char *free_mem_126903;
    char *free_mem_126904;
    float free_a11_126942;
    float free_b11_126944;
    float free_c11_126945;
    float *retval_defunc_2_reduce_res_126946;
    float *retval_defunc_2_reduce_res_126947;
};
struct futhark_mc_segred_stage_1_parloop_struct_128928 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118088;
    int64_t free_x_118173;
    char *free_mem_120633;
    int64_t free_x_126898;
    char *free_mem_126903;
    char *free_mem_126904;
    float free_a11_126942;
    float free_b11_126944;
    float free_c11_126945;
    char *free_reduce_stage_1_tid_res_arr_mem_127176;
    char *free_reduce_stage_1_tid_res_arr_mem_127178;
};
static int futhark_mc_segred_stage_1_parloop_128929(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118095,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128928
    *futhark_mc_segred_stage_1_parloop_struct_128928 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128928 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128928->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128929_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128929_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128928->free_n_112804;
    int64_t gtid_118088 =
            futhark_mc_segred_stage_1_parloop_struct_128928->free_gtid_118088;
    int64_t x_118173 =
            futhark_mc_segred_stage_1_parloop_struct_128928->free_x_118173;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128928->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_126898 =
            futhark_mc_segred_stage_1_parloop_struct_128928->free_x_126898;
    struct memblock mem_126903 = {.desc ="mem_126903", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128928->free_mem_126903,
                                  .size =0, .references =NULL};
    struct memblock mem_126904 = {.desc ="mem_126904", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128928->free_mem_126904,
                                  .size =0, .references =NULL};
    float a11_126942 =
          futhark_mc_segred_stage_1_parloop_struct_128928->free_a11_126942;
    float b11_126944 =
          futhark_mc_segred_stage_1_parloop_struct_128928->free_b11_126944;
    float c11_126945 =
          futhark_mc_segred_stage_1_parloop_struct_128928->free_c11_126945;
    struct memblock reduce_stage_1_tid_res_arr_mem_127176 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127176",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128928->free_reduce_stage_1_tid_res_arr_mem_127176,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127178 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127178",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128928->free_reduce_stage_1_tid_res_arr_mem_127178,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127180 = start;
    float x_127132;
    float x_127133;
    float x_127135;
    float x_127136;
    float local_acc_127181 = 0.0F;
    float local_acc_127182 = 0.0F;
    
    for (; iter_127180 < end; iter_127180++) {
        int64_t gtid_118096 = iter_127180;
        float x_127138 = ((float *) mem_126904.mem)[gtid_118096];
        float x_127139 = ((float *) mem_126903.mem)[gtid_118096];
        bool cond_127140 = sle64(x_118173, gtid_118096);
        float defunc_0_f_res_127141;
        
        if (cond_127140) {
            defunc_0_f_res_127141 = 0.0F;
        } else {
            int64_t i_127142 = add64(gtid_118096, x_126898);
            float x_127143 = ((float *) mem_120633.mem)[gtid_118088 * n_112804 +
                                                        i_127142];
            
            defunc_0_f_res_127141 = x_127143;
        }
        
        float x_127144 = a11_126942 * x_127138;
        float y_127145 = b11_126944 * x_127139;
        float x_127146 = x_127144 + y_127145;
        float defunc_9_fit_fun_res_127147 = defunc_0_f_res_127141 * x_127146;
        float x_127148 = b11_126944 * x_127138;
        float y_127149 = c11_126945 * x_127139;
        float x_127150 = x_127148 + y_127149;
        float defunc_9_slope_fun_res_127151 = defunc_0_f_res_127141 * x_127150;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127132 = local_acc_127181;
        }
        // Load next params
        {
            x_127133 = defunc_9_fit_fun_res_127147;
        }
        // Red body
        {
            float defunc_1_op_res_127134 = x_127132 + x_127133;
            
            local_acc_127181 = defunc_1_op_res_127134;
        }
        // Load accum params
        {
            x_127135 = local_acc_127182;
        }
        // Load next params
        {
            x_127136 = defunc_9_slope_fun_res_127151;
        }
        // Red body
        {
            float defunc_1_op_res_127137 = x_127135 + x_127136;
            
            local_acc_127182 = defunc_1_op_res_127137;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127176.mem)[flat_tid_118095] =
        local_acc_127181;
    ((float *) reduce_stage_1_tid_res_arr_mem_127178.mem)[flat_tid_118095] =
        local_acc_127182;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128929_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128929_end -
                 futhark_mc_segred_stage_1_parloop_128929_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128929_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128929_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128929_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128925(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118095 = tid;
    int num_tasks_127175 = info.nsubtasks;
    struct futhark_mc_task_128924 *futhark_mc_task_128924 =
                                  (struct futhark_mc_task_128924 *) args;
    struct futhark_context *ctx = futhark_mc_task_128924->ctx;
    uint64_t futhark_mc_segred_task_128925_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128925_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128924->free_n_112804;
    int64_t gtid_118088 = futhark_mc_task_128924->free_gtid_118088;
    int64_t x_118173 = futhark_mc_task_128924->free_x_118173;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128924->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_126898 = futhark_mc_task_128924->free_x_126898;
    struct memblock mem_126903 = {.desc ="mem_126903", .mem =
                                  futhark_mc_task_128924->free_mem_126903,
                                  .size =0, .references =NULL};
    struct memblock mem_126904 = {.desc ="mem_126904", .mem =
                                  futhark_mc_task_128924->free_mem_126904,
                                  .size =0, .references =NULL};
    float a11_126942 = futhark_mc_task_128924->free_a11_126942;
    float b11_126944 = futhark_mc_task_128924->free_b11_126944;
    float c11_126945 = futhark_mc_task_128924->free_c11_126945;
    float defunc_2_reduce_res_126946 =
          *futhark_mc_task_128924->retval_defunc_2_reduce_res_126946;
    float defunc_2_reduce_res_126947 =
          *futhark_mc_task_128924->retval_defunc_2_reduce_res_126947;
    size_t reduce_stage_1_tid_res_arr_mem_127176_cached_sizze_128926 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127176 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127178_cached_sizze_128927 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127178 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127176_cached_sizze_128926 <
        (size_t) ((int64_t) 4 * num_tasks_127175)) {
        reduce_stage_1_tid_res_arr_mem_127176 =
            realloc(reduce_stage_1_tid_res_arr_mem_127176, (int64_t) 4 *
                    num_tasks_127175);
        reduce_stage_1_tid_res_arr_mem_127176_cached_sizze_128926 =
            (int64_t) 4 * num_tasks_127175;
    }
    if (reduce_stage_1_tid_res_arr_mem_127178_cached_sizze_128927 <
        (size_t) ((int64_t) 4 * num_tasks_127175)) {
        reduce_stage_1_tid_res_arr_mem_127178 =
            realloc(reduce_stage_1_tid_res_arr_mem_127178, (int64_t) 4 *
                    num_tasks_127175);
        reduce_stage_1_tid_res_arr_mem_127178_cached_sizze_128927 =
            (int64_t) 4 * num_tasks_127175;
    }
    
    int64_t iter_127180;
    struct futhark_mc_segred_stage_1_parloop_struct_128928
    futhark_mc_segred_stage_1_parloop_struct_128928;
    
    futhark_mc_segred_stage_1_parloop_struct_128928.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_gtid_118088 =
        gtid_118088;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_x_118173 = x_118173;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_x_126898 = x_126898;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_mem_126903 =
        mem_126903.mem;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_mem_126904 =
        mem_126904.mem;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_a11_126942 =
        a11_126942;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_b11_126944 =
        b11_126944;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_c11_126945 =
        c11_126945;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_reduce_stage_1_tid_res_arr_mem_127176 =
        reduce_stage_1_tid_res_arr_mem_127176;
    futhark_mc_segred_stage_1_parloop_struct_128928.free_reduce_stage_1_tid_res_arr_mem_127178 =
        reduce_stage_1_tid_res_arr_mem_127178;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128929_task;
    
    futhark_mc_segred_stage_1_parloop_128929_task.name =
        "futhark_mc_segred_stage_1_parloop_128929";
    futhark_mc_segred_stage_1_parloop_128929_task.fn =
        futhark_mc_segred_stage_1_parloop_128929;
    futhark_mc_segred_stage_1_parloop_128929_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128928;
    futhark_mc_segred_stage_1_parloop_128929_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128929_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128929_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128929_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128929_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128929_task);
    
    if (futhark_mc_segred_stage_1_parloop_128929_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128929_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128929_total_end -
                 futhark_mc_segred_stage_1_parloop_128929_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128929_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128929_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128929_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_126946 = 0.0F;
        defunc_2_reduce_res_126947 = 0.0F;
    }
    
    float x_127183;
    float x_127184;
    float x_127186;
    float x_127187;
    
    for (int32_t i_127189 = 0; i_127189 < num_tasks_127175; i_127189++) {
        flat_tid_118095 = i_127189;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127183 = defunc_2_reduce_res_126946;
            }
            // load next params
            {
                x_127184 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127176)[flat_tid_118095];
            }
            // red body
            {
                float defunc_1_op_res_127185 = x_127183 + x_127184;
                
                defunc_2_reduce_res_126946 = defunc_1_op_res_127185;
            }
            // load acc params
            {
                x_127186 = defunc_2_reduce_res_126947;
            }
            // load next params
            {
                x_127187 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127178)[flat_tid_118095];
            }
            // red body
            {
                float defunc_1_op_res_127188 = x_127186 + x_127187;
                
                defunc_2_reduce_res_126947 = defunc_1_op_res_127188;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127176);
    free(reduce_stage_1_tid_res_arr_mem_127178);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128925_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128925_end -
                 futhark_mc_segred_task_128925_start;
        
        ctx->futhark_mc_segred_task_128925_runs[tid]++;
        ctx->futhark_mc_segred_task_128925_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128925_iter[tid] += iterations;
    }
    *futhark_mc_task_128924->retval_defunc_2_reduce_res_126946 =
        defunc_2_reduce_res_126946;
    *futhark_mc_task_128924->retval_defunc_2_reduce_res_126947 =
        defunc_2_reduce_res_126947;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128914(void *args, int64_t start,
                                            int64_t end, int flat_tid_118091,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128913
    *futhark_mc_segmap_parloop_struct_128913 =
    (struct futhark_mc_segmap_parloop_struct_128913 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128913->ctx;
    uint64_t futhark_mc_segmap_parloop_128914_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128914_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128913->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128913->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128913->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128913->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128913->free_i_112880;
    int64_t gtid_118088 =
            futhark_mc_segmap_parloop_struct_128913->free_gtid_118088;
    int64_t x_118173 = futhark_mc_segmap_parloop_struct_128913->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 =
            futhark_mc_segmap_parloop_struct_128913->free_bytes_120819;
    struct memblock mem_120857 = {.desc ="mem_120857", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_120857,
                                  .size =0, .references =NULL};
    struct memblock mem_120860 = {.desc ="mem_120860", .mem =
                                  futhark_mc_segmap_parloop_struct_128913->free_mem_120860,
                                  .size =0, .references =NULL};
    size_t mem_126903_cached_sizze_128915 = 0;
    char *mem_126903 = NULL;
    size_t mem_126904_cached_sizze_128916 = 0;
    char *mem_126904 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127103 = start;
    
    if (mem_126903_cached_sizze_128915 < (size_t) bytes_120819) {
        mem_126903 = realloc(mem_126903, bytes_120819);
        mem_126903_cached_sizze_128915 = bytes_120819;
    }
    if (mem_126904_cached_sizze_128916 < (size_t) bytes_120819) {
        mem_126904 = realloc(mem_126904, bytes_120819);
        mem_126904_cached_sizze_128916 = bytes_120819;
    }
    for (; iter_127103 < end; iter_127103++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127152 = t_n_m_112861;
        int64_t gtid_118092 = iter_127103;
        int64_t remnant_127153 = iter_127103 - gtid_118092;
        int64_t x_126898 = ((int64_t *) mem_119882.mem)[gtid_118088 *
                                                        t_n_m_112861 +
                                                        gtid_118092];
        float x_126899 = ((float *) mem_119886.mem)[gtid_118088 * t_n_m_112861 +
                                                    gtid_118092];
        int64_t min_arg_126900 = mul64(t_jump_112811, gtid_118092);
        int64_t min_res_126901 = smin64(i_112880, min_arg_126900);
        float defunc_0_f_res_126902 = sitofp_i64_f32(min_res_126901);
        float defunc_2_reduce_res_126905;
        float defunc_2_reduce_res_126906;
        float defunc_2_reduce_res_126907;
        int64_t flat_tid_118093 = (int64_t) 0;
        int32_t num_tasks_127154;
        struct futhark_mc_task_128917 futhark_mc_task_128917;
        
        futhark_mc_task_128917.ctx = ctx;
        futhark_mc_task_128917.free_n_112804 = n_112804;
        futhark_mc_task_128917.free_gtid_118088 = gtid_118088;
        futhark_mc_task_128917.free_x_118173 = x_118173;
        futhark_mc_task_128917.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128917.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128917.free_x_126898 = x_126898;
        futhark_mc_task_128917.free_x_126899 = x_126899;
        futhark_mc_task_128917.free_defunc_0_f_res_126902 =
            defunc_0_f_res_126902;
        futhark_mc_task_128917.retval_defunc_2_reduce_res_126905 =
            &defunc_2_reduce_res_126905;
        futhark_mc_task_128917.retval_defunc_2_reduce_res_126906 =
            &defunc_2_reduce_res_126906;
        futhark_mc_task_128917.retval_defunc_2_reduce_res_126907 =
            &defunc_2_reduce_res_126907;
        futhark_mc_task_128917.retval_mem_126903 = mem_126903;
        futhark_mc_task_128917.retval_mem_126904 = mem_126904;
        
        struct scheduler_segop futhark_mc_task_128917_task;
        
        futhark_mc_task_128917_task.args = &futhark_mc_task_128917;
        futhark_mc_task_128917_task.top_level_fn =
            futhark_mc_segred_task_128918;
        futhark_mc_task_128917_task.name = "futhark_mc_segred_task_128918";
        futhark_mc_task_128917_task.iterations = t_window_112807;
        futhark_mc_task_128917_task.task_time =
            &ctx->futhark_mc_segred_task_128918_total_time;
        futhark_mc_task_128917_task.task_iter =
            &ctx->futhark_mc_segred_task_128918_total_iter;
        futhark_mc_task_128917_task.sched = STATIC;
        futhark_mc_task_128917_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128918_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128917_task);
        
        if (futhark_mc_segred_task_128918_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_126938 = defunc_2_reduce_res_126905 *
              defunc_2_reduce_res_126907;
        float y_126939 = defunc_2_reduce_res_126906 *
              defunc_2_reduce_res_126906;
        float y_126940 = x_126938 - y_126939;
        float det1_126941 = 1.0F / y_126940;
        float a11_126942 = defunc_2_reduce_res_126907 * det1_126941;
        float negate_arg_126943 = defunc_2_reduce_res_126906 * det1_126941;
        float b11_126944 = 0.0F - negate_arg_126943;
        float c11_126945 = defunc_2_reduce_res_126905 * det1_126941;
        float defunc_2_reduce_res_126946;
        float defunc_2_reduce_res_126947;
        int64_t flat_tid_118095 = (int64_t) 0;
        int32_t num_tasks_127175;
        struct futhark_mc_task_128924 futhark_mc_task_128924;
        
        futhark_mc_task_128924.ctx = ctx;
        futhark_mc_task_128924.free_n_112804 = n_112804;
        futhark_mc_task_128924.free_gtid_118088 = gtid_118088;
        futhark_mc_task_128924.free_x_118173 = x_118173;
        futhark_mc_task_128924.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128924.free_x_126898 = x_126898;
        futhark_mc_task_128924.free_mem_126903 = mem_126903;
        futhark_mc_task_128924.free_mem_126904 = mem_126904;
        futhark_mc_task_128924.free_a11_126942 = a11_126942;
        futhark_mc_task_128924.free_b11_126944 = b11_126944;
        futhark_mc_task_128924.free_c11_126945 = c11_126945;
        futhark_mc_task_128924.retval_defunc_2_reduce_res_126946 =
            &defunc_2_reduce_res_126946;
        futhark_mc_task_128924.retval_defunc_2_reduce_res_126947 =
            &defunc_2_reduce_res_126947;
        
        struct scheduler_segop futhark_mc_task_128924_task;
        
        futhark_mc_task_128924_task.args = &futhark_mc_task_128924;
        futhark_mc_task_128924_task.top_level_fn =
            futhark_mc_segred_task_128925;
        futhark_mc_task_128924_task.name = "futhark_mc_segred_task_128925";
        futhark_mc_task_128924_task.iterations = t_window_112807;
        futhark_mc_task_128924_task.task_time =
            &ctx->futhark_mc_segred_task_128925_total_time;
        futhark_mc_task_128924_task.task_iter =
            &ctx->futhark_mc_segred_task_128925_total_iter;
        futhark_mc_task_128924_task.sched = STATIC;
        futhark_mc_task_128924_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128925_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128924_task);
        
        if (futhark_mc_segred_task_128925_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_120857.mem)[gtid_118092] = defunc_2_reduce_res_126946;
        ((float *) mem_120860.mem)[gtid_118092] = defunc_2_reduce_res_126947;
    }
    
  cleanup:
    { }
    free(mem_126903);
    free(mem_126904);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128914_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128914_end -
                 futhark_mc_segmap_parloop_128914_start;
        
        ctx->futhark_mc_segmap_parloop_128914_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128914_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128914_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128912(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118091 = tid;
    int num_tasks_127043 = info.nsubtasks;
    struct futhark_mc_task_128906 *futhark_mc_task_128906 =
                                  (struct futhark_mc_task_128906 *) args;
    struct futhark_context *ctx = futhark_mc_task_128906->ctx;
    uint64_t futhark_mc_segmap_nested_task_128912_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128912_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128906->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128906->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128906->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128906->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128906->free_i_112880;
    int64_t gtid_118088 = futhark_mc_task_128906->free_gtid_118088;
    int64_t x_118173 = futhark_mc_task_128906->free_x_118173;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128906->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128906->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128906->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128906->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128906->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 = futhark_mc_task_128906->free_bytes_120819;
    struct memblock mem_120857 = {.desc ="mem_120857", .mem =
                                  futhark_mc_task_128906->free_mem_120857,
                                  .size =0, .references =NULL};
    struct memblock mem_120860 = {.desc ="mem_120860", .mem =
                                  futhark_mc_task_128906->free_mem_120860,
                                  .size =0, .references =NULL};
    int64_t iter_127103;
    struct futhark_mc_segmap_parloop_struct_128913
    futhark_mc_segmap_parloop_struct_128913;
    
    futhark_mc_segmap_parloop_struct_128913.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128913.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128913.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128913.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128913.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128913.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128913.free_gtid_118088 = gtid_118088;
    futhark_mc_segmap_parloop_struct_128913.free_x_118173 = x_118173;
    futhark_mc_segmap_parloop_struct_128913.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128913.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128913.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128913.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128913.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128913.free_bytes_120819 = bytes_120819;
    futhark_mc_segmap_parloop_struct_128913.free_mem_120857 = mem_120857.mem;
    futhark_mc_segmap_parloop_struct_128913.free_mem_120860 = mem_120860.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128914_task;
    
    futhark_mc_segmap_parloop_128914_task.name =
        "futhark_mc_segmap_parloop_128914";
    futhark_mc_segmap_parloop_128914_task.fn = futhark_mc_segmap_parloop_128914;
    futhark_mc_segmap_parloop_128914_task.args =
        &futhark_mc_segmap_parloop_struct_128913;
    futhark_mc_segmap_parloop_128914_task.iterations = iterations;
    futhark_mc_segmap_parloop_128914_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128914_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128914_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128914_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128914_task);
    
    if (futhark_mc_segmap_parloop_128914_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128914_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128914_total_end -
                 futhark_mc_segmap_parloop_128914_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128914_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128914_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128914_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128912_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128912_end -
                 futhark_mc_segmap_nested_task_128912_start;
        
        ctx->futhark_mc_segmap_nested_task_128912_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128912_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128912_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128903(void *args, int64_t start,
                                            int64_t end, int flat_tid_118087,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128902
    *futhark_mc_segmap_parloop_struct_128902 =
    (struct futhark_mc_segmap_parloop_struct_128902 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128902->ctx;
    uint64_t futhark_mc_segmap_parloop_128903_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128903_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128902->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128902->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128902->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128902->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128902->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128902->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128902->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 =
            futhark_mc_segmap_parloop_struct_128902->free_bytes_120819;
    struct memblock mem_120924 = {.desc ="mem_120924", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_120924,
                                  .size =0, .references =NULL};
    struct memblock mem_120928 = {.desc ="mem_120928", .mem =
                                  futhark_mc_segmap_parloop_struct_128902->free_mem_120928,
                                  .size =0, .references =NULL};
    size_t mem_120857_cached_sizze_128904 = 0;
    char *mem_120857 = NULL;
    size_t mem_120860_cached_sizze_128905 = 0;
    char *mem_120860 = NULL;
    int64_t iterations = end - start;
    int64_t iter_126897 = start;
    
    if (mem_120857_cached_sizze_128904 < (size_t) bytes_119828) {
        mem_120857 = realloc(mem_120857, bytes_119828);
        mem_120857_cached_sizze_128904 = bytes_119828;
    }
    if (mem_120860_cached_sizze_128905 < (size_t) bytes_119828) {
        mem_120860 = realloc(mem_120860, bytes_119828);
        mem_120860_cached_sizze_128905 = bytes_119828;
    }
    for (; iter_126897 < end; iter_126897++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127041 = m_112803;
        int64_t gtid_118088 = iter_126897;
        int64_t remnant_127042 = iter_126897 - gtid_118088;
        int64_t x_118173 = ((int64_t *) mem_119696.mem)[gtid_118088];
        int64_t flat_tid_118089 = (int64_t) 0;
        int32_t num_tasks_127043;
        int64_t flat_tid_118091 = (int64_t) 0;
        struct futhark_mc_task_128906 futhark_mc_task_128906;
        
        futhark_mc_task_128906.ctx = ctx;
        futhark_mc_task_128906.free_n_112804 = n_112804;
        futhark_mc_task_128906.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128906.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128906.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128906.free_i_112880 = i_112880;
        futhark_mc_task_128906.free_gtid_118088 = gtid_118088;
        futhark_mc_task_128906.free_x_118173 = x_118173;
        futhark_mc_task_128906.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128906.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128906.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128906.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128906.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128906.free_bytes_120819 = bytes_120819;
        futhark_mc_task_128906.free_mem_120857 = mem_120857;
        futhark_mc_task_128906.free_mem_120860 = mem_120860;
        
        struct scheduler_segop futhark_mc_task_128906_task;
        
        futhark_mc_task_128906_task.args = &futhark_mc_task_128906;
        futhark_mc_task_128906_task.top_level_fn =
            futhark_mc_segmap_task_128907;
        futhark_mc_task_128906_task.name = "futhark_mc_segmap_task_128907";
        futhark_mc_task_128906_task.iterations = t_n_m_112861;
        futhark_mc_task_128906_task.task_time =
            &ctx->futhark_mc_segmap_task_128907_total_time;
        futhark_mc_task_128906_task.task_iter =
            &ctx->futhark_mc_segmap_task_128907_total_iter;
        futhark_mc_task_128906_task.sched = STATIC;
        futhark_mc_task_128906_task.nested_fn =
            futhark_mc_segmap_nested_task_128912;
        
        int futhark_mc_segmap_task_128907_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128906_task);
        
        if (futhark_mc_segmap_task_128907_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_120924.mem + gtid_118088 * t_n_m_112861 * (int64_t) 4,
                mem_120857 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_120928.mem + gtid_118088 * t_n_m_112861 * (int64_t) 4,
                mem_120860 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_120857);
    free(mem_120860);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128903_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128903_end -
                 futhark_mc_segmap_parloop_128903_start;
        
        ctx->futhark_mc_segmap_parloop_128903_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128903_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128903_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128901(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118087 = tid;
    int num_tasks_126808 = info.nsubtasks;
    struct futhark_mc_task_128893 *futhark_mc_task_128893 =
                                  (struct futhark_mc_task_128893 *) args;
    struct futhark_context *ctx = futhark_mc_task_128893->ctx;
    uint64_t futhark_mc_segmap_nested_task_128901_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128901_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128893->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128893->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128893->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128893->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128893->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128893->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128893->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128893->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128893->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128893->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128893->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128893->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128893->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120819 = futhark_mc_task_128893->free_bytes_120819;
    struct memblock mem_120924 = {.desc ="mem_120924", .mem =
                                  futhark_mc_task_128893->free_mem_120924,
                                  .size =0, .references =NULL};
    struct memblock mem_120928 = {.desc ="mem_120928", .mem =
                                  futhark_mc_task_128893->free_mem_120928,
                                  .size =0, .references =NULL};
    int64_t iter_126897;
    struct futhark_mc_segmap_parloop_struct_128902
    futhark_mc_segmap_parloop_struct_128902;
    
    futhark_mc_segmap_parloop_struct_128902.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128902.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128902.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128902.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128902.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128902.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128902.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128902.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128902.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128902.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128902.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128902.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128902.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128902.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128902.free_bytes_120819 = bytes_120819;
    futhark_mc_segmap_parloop_struct_128902.free_mem_120924 = mem_120924.mem;
    futhark_mc_segmap_parloop_struct_128902.free_mem_120928 = mem_120928.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128903_task;
    
    futhark_mc_segmap_parloop_128903_task.name =
        "futhark_mc_segmap_parloop_128903";
    futhark_mc_segmap_parloop_128903_task.fn = futhark_mc_segmap_parloop_128903;
    futhark_mc_segmap_parloop_128903_task.args =
        &futhark_mc_segmap_parloop_struct_128902;
    futhark_mc_segmap_parloop_128903_task.iterations = iterations;
    futhark_mc_segmap_parloop_128903_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128903_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128903_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128903_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128903_task);
    
    if (futhark_mc_segmap_parloop_128903_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128903_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128903_total_end -
                 futhark_mc_segmap_parloop_128903_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128903_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128903_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128903_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128901_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128901_end -
                 futhark_mc_segmap_nested_task_128901_start;
        
        ctx->futhark_mc_segmap_nested_task_128901_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128901_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128901_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128930 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121100;
    char *free_mem_121104;
};
struct futhark_mc_segmap_parloop_struct_128932 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121100;
    char *free_mem_121104;
};
static int futhark_mc_segmap_parloop_128933(void *args, int64_t start,
                                            int64_t end, int flat_tid_118318,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128932
    *futhark_mc_segmap_parloop_struct_128932 =
    (struct futhark_mc_segmap_parloop_struct_128932 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128932->ctx;
    uint64_t futhark_mc_segmap_parloop_128933_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128933_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128932->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128932->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128932->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128932->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128932->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128932->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128932->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 =
            futhark_mc_segmap_parloop_struct_128932->free_bytes_120929;
    struct memblock mem_121100 = {.desc ="mem_121100", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_121100,
                                  .size =0, .references =NULL};
    struct memblock mem_121104 = {.desc ="mem_121104", .mem =
                                  futhark_mc_segmap_parloop_struct_128932->free_mem_121104,
                                  .size =0, .references =NULL};
    size_t mem_121009_cached_sizze_128934 = 0;
    char *mem_121009 = NULL;
    size_t mem_121012_cached_sizze_128935 = 0;
    char *mem_121012 = NULL;
    size_t mem_121029_cached_sizze_128936 = 0;
    char *mem_121029 = NULL;
    size_t mem_121032_cached_sizze_128937 = 0;
    char *mem_121032 = NULL;
    size_t mem_121059_cached_sizze_128938 = 0;
    char *mem_121059 = NULL;
    size_t mem_121062_cached_sizze_128939 = 0;
    char *mem_121062 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127191 = start;
    
    if (mem_121009_cached_sizze_128934 < (size_t) bytes_119828) {
        mem_121009 = realloc(mem_121009, bytes_119828);
        mem_121009_cached_sizze_128934 = bytes_119828;
    }
    if (mem_121012_cached_sizze_128935 < (size_t) bytes_119828) {
        mem_121012 = realloc(mem_121012, bytes_119828);
        mem_121012_cached_sizze_128935 = bytes_119828;
    }
    if (mem_121029_cached_sizze_128936 < (size_t) bytes_120929) {
        mem_121029 = realloc(mem_121029, bytes_120929);
        mem_121029_cached_sizze_128936 = bytes_120929;
    }
    if (mem_121032_cached_sizze_128937 < (size_t) bytes_120929) {
        mem_121032 = realloc(mem_121032, bytes_120929);
        mem_121032_cached_sizze_128937 = bytes_120929;
    }
    if (mem_121059_cached_sizze_128938 < (size_t) bytes_120929) {
        mem_121059 = realloc(mem_121059, bytes_120929);
        mem_121059_cached_sizze_128938 = bytes_120929;
    }
    if (mem_121062_cached_sizze_128939 < (size_t) bytes_120929) {
        mem_121062 = realloc(mem_121062, bytes_120929);
        mem_121062_cached_sizze_128939 = bytes_120929;
    }
    for (; iter_127191 < end; iter_127191++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127309 = m_112803;
        int64_t gtid_118319 = iter_127191;
        int64_t remnant_127310 = iter_127191 - gtid_118319;
        int64_t x_114576 = ((int64_t *) mem_119696.mem)[gtid_118319];
        
        for (int64_t i_127192 = 0; i_127192 < t_n_m_112861; i_127192++) {
            int64_t x_127195 = ((int64_t *) mem_119882.mem)[gtid_118319 *
                                                            t_n_m_112861 +
                                                            i_127192];
            float x_127196 = ((float *) mem_119886.mem)[gtid_118319 *
                                                        t_n_m_112861 +
                                                        i_127192];
            int64_t min_arg_127197 = mul64(t_jump_112811, i_127192);
            int64_t min_res_127198 = smin64(i_112880, min_arg_127197);
            float defunc_0_f_res_127199 = sitofp_i64_f32(min_res_127198);
            
            for (int64_t i_127204 = 0; i_127204 < t_window_112807; i_127204++) {
                bool cond_127207 = sle64(x_114576, i_127204);
                float defunc_0_f_res_127208;
                
                if (cond_127207) {
                    defunc_0_f_res_127208 = 0.0F;
                } else {
                    int64_t i_127209 = add64(x_127195, i_127204);
                    float x_127210 = ((float *) mem_119718.mem)[gtid_118319 *
                                                                n_112804 +
                                                                i_127209];
                    float defunc_0_f_res_f_res_127211 = 1.0F + x_127210;
                    
                    defunc_0_f_res_127208 = defunc_0_f_res_f_res_127211;
                }
                
                float defunc_0_f_res_127212;
                
                if (cond_127207) {
                    defunc_0_f_res_127212 = 0.0F;
                } else {
                    int64_t i_127213 = add64(x_127195, i_127204);
                    float x_127214 = ((float *) mem_120637.mem)[gtid_118319 *
                                                                n_112804 +
                                                                i_127213];
                    
                    defunc_0_f_res_127212 = x_127214;
                }
                
                float x_j_127215 = defunc_0_f_res_127208 -
                      defunc_0_f_res_127199;
                float abs_res_127216 = (float) fabs(x_j_127215);
                float tmp1_127217 = abs_res_127216 / x_127196;
                float x_127218 = tmp1_127217 * tmp1_127217;
                float y_127219 = tmp1_127217 * x_127218;
                float tmp2_127220 = 1.0F - y_127219;
                float x_127221 = tmp2_127220 * tmp2_127220;
                float tmp3_127222 = tmp2_127220 * x_127221;
                float tmp4_127223 = defunc_0_f_res_127212 * tmp3_127222;
                
                ((float *) mem_121029)[i_127204] = x_j_127215;
                ((float *) mem_121032)[i_127204] = tmp4_127223;
            }
            
            float defunc_2_reduce_res_127228;
            float defunc_2_reduce_res_127229;
            float defunc_2_reduce_res_127230;
            float defunc_2_reduce_res_127231;
            float defunc_2_reduce_res_127232;
            float redout_127236;
            float redout_127237;
            float redout_127238;
            float redout_127239;
            float redout_127240;
            
            redout_127236 = 0.0F;
            redout_127237 = 0.0F;
            redout_127238 = 0.0F;
            redout_127239 = 0.0F;
            redout_127240 = 0.0F;
            for (int64_t i_127235 = 0; i_127235 < t_window_112807; i_127235++) {
                float x_127243 = ((float *) mem_121029)[i_127235];
                float x_127244 = ((float *) mem_121032)[i_127235];
                float defunc_1_f_res_127245 = x_127243 * x_127244;
                float defunc_1_f_res_127246 = x_127243 * defunc_1_f_res_127245;
                float defunc_1_f_res_127247 = x_127243 * defunc_1_f_res_127246;
                float defunc_1_f_res_127248 = x_127243 * defunc_1_f_res_127247;
                float defunc_1_op_res_127249 = x_127244 + redout_127236;
                float defunc_1_op_res_127250 = defunc_1_f_res_127245 +
                      redout_127237;
                float defunc_1_op_res_127251 = defunc_1_f_res_127246 +
                      redout_127238;
                float defunc_1_op_res_127252 = defunc_1_f_res_127247 +
                      redout_127239;
                float defunc_1_op_res_127253 = defunc_1_f_res_127248 +
                      redout_127240;
                
                ((float *) mem_121059)[i_127235] = defunc_1_f_res_127246;
                ((float *) mem_121062)[i_127235] = defunc_1_f_res_127245;
                
                float redout_tmp_127315 = defunc_1_op_res_127249;
                float redout_tmp_127316 = defunc_1_op_res_127250;
                float redout_tmp_127317 = defunc_1_op_res_127251;
                float redout_tmp_127318 = defunc_1_op_res_127252;
                float redout_tmp_127319 = defunc_1_op_res_127253;
                
                redout_127236 = redout_tmp_127315;
                redout_127237 = redout_tmp_127316;
                redout_127238 = redout_tmp_127317;
                redout_127239 = redout_tmp_127318;
                redout_127240 = redout_tmp_127319;
            }
            defunc_2_reduce_res_127228 = redout_127236;
            defunc_2_reduce_res_127229 = redout_127237;
            defunc_2_reduce_res_127230 = redout_127238;
            defunc_2_reduce_res_127231 = redout_127239;
            defunc_2_reduce_res_127232 = redout_127240;
            
            float x_127256 = defunc_2_reduce_res_127230 *
                  defunc_2_reduce_res_127232;
            float y_127257 = defunc_2_reduce_res_127231 *
                  defunc_2_reduce_res_127231;
            float a12_127258 = x_127256 - y_127257;
            float x_127259 = defunc_2_reduce_res_127230 *
                  defunc_2_reduce_res_127231;
            float y_127260 = defunc_2_reduce_res_127229 *
                  defunc_2_reduce_res_127232;
            float b12_127261 = x_127259 - y_127260;
            float x_127262 = defunc_2_reduce_res_127229 *
                  defunc_2_reduce_res_127231;
            float y_127263 = defunc_2_reduce_res_127230 *
                  defunc_2_reduce_res_127230;
            float c12_127264 = x_127262 - y_127263;
            float x_127265 = defunc_2_reduce_res_127228 *
                  defunc_2_reduce_res_127232;
            float b2_127266 = x_127265 - y_127263;
            float x_127267 = defunc_2_reduce_res_127229 *
                  defunc_2_reduce_res_127230;
            float y_127268 = defunc_2_reduce_res_127228 *
                  defunc_2_reduce_res_127231;
            float c2_127269 = x_127267 - y_127268;
            float x_127270 = defunc_2_reduce_res_127228 * a12_127258;
            float y_127271 = defunc_2_reduce_res_127229 * b12_127261;
            float x_127272 = x_127270 + y_127271;
            float y_127273 = defunc_2_reduce_res_127230 * c12_127264;
            float y_127274 = x_127272 + y_127273;
            float det_127275 = 1.0F / y_127274;
            float a12_127276 = a12_127258 * det_127275;
            float b12_127277 = b12_127261 * det_127275;
            float c12_127278 = c12_127264 * det_127275;
            float b2_127279 = b2_127266 * det_127275;
            float c2_127280 = c2_127269 * det_127275;
            float defunc_2_reduce_res_127281;
            float defunc_2_reduce_res_127282;
            float redout_127284;
            float redout_127285;
            
            redout_127284 = 0.0F;
            redout_127285 = 0.0F;
            for (int64_t i_127283 = 0; i_127283 < t_window_112807; i_127283++) {
                float x_127286 = ((float *) mem_121032)[i_127283];
                float x_127287 = ((float *) mem_121062)[i_127283];
                float x_127288 = ((float *) mem_121059)[i_127283];
                bool cond_127289 = sle64(x_114576, i_127283);
                float defunc_0_f_res_127290;
                
                if (cond_127289) {
                    defunc_0_f_res_127290 = 0.0F;
                } else {
                    int64_t i_127291 = add64(x_127195, i_127283);
                    float x_127292 = ((float *) mem_120633.mem)[gtid_118319 *
                                                                n_112804 +
                                                                i_127291];
                    
                    defunc_0_f_res_127290 = x_127292;
                }
                
                float x_127293 = a12_127276 * x_127286;
                float y_127294 = b12_127277 * x_127287;
                float x_127295 = x_127293 + y_127294;
                float y_127296 = c12_127278 * x_127288;
                float x_127297 = x_127295 + y_127296;
                float defunc_9_fit_fun_res_127298 = defunc_0_f_res_127290 *
                      x_127297;
                float x_127299 = b12_127277 * x_127286;
                float y_127300 = b2_127279 * x_127287;
                float x_127301 = x_127299 + y_127300;
                float y_127302 = c2_127280 * x_127288;
                float x_127303 = x_127301 + y_127302;
                float defunc_9_slope_fun_res_127304 = defunc_0_f_res_127290 *
                      x_127303;
                float defunc_1_op_res_127305 = defunc_9_fit_fun_res_127298 +
                      redout_127284;
                float defunc_1_op_res_127306 = defunc_9_slope_fun_res_127304 +
                      redout_127285;
                float redout_tmp_127322 = defunc_1_op_res_127305;
                float redout_tmp_127323 = defunc_1_op_res_127306;
                
                redout_127284 = redout_tmp_127322;
                redout_127285 = redout_tmp_127323;
            }
            defunc_2_reduce_res_127281 = redout_127284;
            defunc_2_reduce_res_127282 = redout_127285;
            ((float *) mem_121009)[i_127192] = defunc_2_reduce_res_127281;
            ((float *) mem_121012)[i_127192] = defunc_2_reduce_res_127282;
        }
        memmove(mem_121100.mem + gtid_118319 * t_n_m_112861 * (int64_t) 4,
                mem_121009 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_121104.mem + gtid_118319 * t_n_m_112861 * (int64_t) 4,
                mem_121012 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121009);
    free(mem_121012);
    free(mem_121029);
    free(mem_121032);
    free(mem_121059);
    free(mem_121062);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128933_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128933_end -
                 futhark_mc_segmap_parloop_128933_start;
        
        ctx->futhark_mc_segmap_parloop_128933_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128933_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128933_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128931(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118318 = tid;
    int num_tasks_127190 = info.nsubtasks;
    struct futhark_mc_task_128930 *futhark_mc_task_128930 =
                                  (struct futhark_mc_task_128930 *) args;
    struct futhark_context *ctx = futhark_mc_task_128930->ctx;
    uint64_t futhark_mc_segmap_task_128931_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128931_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128930->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128930->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128930->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128930->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128930->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128930->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128930->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128930->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128930->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128930->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128930->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128930->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128930->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 = futhark_mc_task_128930->free_bytes_120929;
    struct memblock mem_121100 = {.desc ="mem_121100", .mem =
                                  futhark_mc_task_128930->free_mem_121100,
                                  .size =0, .references =NULL};
    struct memblock mem_121104 = {.desc ="mem_121104", .mem =
                                  futhark_mc_task_128930->free_mem_121104,
                                  .size =0, .references =NULL};
    int64_t iter_127191;
    struct futhark_mc_segmap_parloop_struct_128932
    futhark_mc_segmap_parloop_struct_128932;
    
    futhark_mc_segmap_parloop_struct_128932.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128932.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128932.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128932.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128932.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128932.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128932.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128932.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128932.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128932.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128932.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128932.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128932.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128932.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128932.free_bytes_120929 = bytes_120929;
    futhark_mc_segmap_parloop_struct_128932.free_mem_121100 = mem_121100.mem;
    futhark_mc_segmap_parloop_struct_128932.free_mem_121104 = mem_121104.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128933_task;
    
    futhark_mc_segmap_parloop_128933_task.name =
        "futhark_mc_segmap_parloop_128933";
    futhark_mc_segmap_parloop_128933_task.fn = futhark_mc_segmap_parloop_128933;
    futhark_mc_segmap_parloop_128933_task.args =
        &futhark_mc_segmap_parloop_struct_128932;
    futhark_mc_segmap_parloop_128933_task.iterations = iterations;
    futhark_mc_segmap_parloop_128933_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128933_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128933_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128933_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128933_task);
    
    if (futhark_mc_segmap_parloop_128933_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128933_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128933_total_end -
                 futhark_mc_segmap_parloop_128933_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128933_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128933_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128933_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128931_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128931_end -
                 futhark_mc_segmap_task_128931_start;
        
        ctx->futhark_mc_segmap_task_128931_runs[tid]++;
        ctx->futhark_mc_segmap_task_128931_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128931_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128941 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    char *free_mem_119696;
    char *free_mem_119718;
    int64_t free_bytes_119828;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121100;
    char *free_mem_121104;
};
struct futhark_mc_task_128945 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121003;
    char *free_mem_121006;
};
struct futhark_mc_segmap_parloop_struct_128947 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121003;
    char *free_mem_121006;
};
static int futhark_mc_segmap_parloop_128948(void *args, int64_t start,
                                            int64_t end, int flat_tid_118322,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128947
    *futhark_mc_segmap_parloop_struct_128947 =
    (struct futhark_mc_segmap_parloop_struct_128947 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128947->ctx;
    uint64_t futhark_mc_segmap_parloop_128948_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128948_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128947->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128947->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128947->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128947->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128947->free_i_112880;
    int64_t gtid_118321 =
            futhark_mc_segmap_parloop_struct_128947->free_gtid_118321;
    int64_t x_118444 = futhark_mc_segmap_parloop_struct_128947->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 =
            futhark_mc_segmap_parloop_struct_128947->free_bytes_120929;
    struct memblock mem_121003 = {.desc ="mem_121003", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_121003,
                                  .size =0, .references =NULL};
    struct memblock mem_121006 = {.desc ="mem_121006", .mem =
                                  futhark_mc_segmap_parloop_struct_128947->free_mem_121006,
                                  .size =0, .references =NULL};
    size_t mem_127438_cached_sizze_128949 = 0;
    char *mem_127438 = NULL;
    size_t mem_127440_cached_sizze_128950 = 0;
    char *mem_127440 = NULL;
    size_t mem_127466_cached_sizze_128951 = 0;
    char *mem_127466 = NULL;
    size_t mem_127468_cached_sizze_128952 = 0;
    char *mem_127468 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127552 = start;
    
    if (mem_127438_cached_sizze_128949 < (size_t) bytes_120929) {
        mem_127438 = realloc(mem_127438, bytes_120929);
        mem_127438_cached_sizze_128949 = bytes_120929;
    }
    if (mem_127440_cached_sizze_128950 < (size_t) bytes_120929) {
        mem_127440 = realloc(mem_127440, bytes_120929);
        mem_127440_cached_sizze_128950 = bytes_120929;
    }
    if (mem_127466_cached_sizze_128951 < (size_t) bytes_120929) {
        mem_127466 = realloc(mem_127466, bytes_120929);
        mem_127466_cached_sizze_128951 = bytes_120929;
    }
    if (mem_127468_cached_sizze_128952 < (size_t) bytes_120929) {
        mem_127468 = realloc(mem_127468, bytes_120929);
        mem_127468_cached_sizze_128952 = bytes_120929;
    }
    for (; iter_127552 < end; iter_127552++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127620 = t_n_m_112861;
        int64_t gtid_118323 = iter_127552;
        int64_t remnant_127621 = iter_127552 - gtid_118323;
        int64_t x_127433 = ((int64_t *) mem_119882.mem)[gtid_118321 *
                                                        t_n_m_112861 +
                                                        gtid_118323];
        float x_127434 = ((float *) mem_119886.mem)[gtid_118321 * t_n_m_112861 +
                                                    gtid_118323];
        int64_t min_arg_127435 = mul64(t_jump_112811, gtid_118323);
        int64_t min_res_127436 = smin64(i_112880, min_arg_127435);
        float defunc_0_f_res_127437 = sitofp_i64_f32(min_res_127436);
        
        for (int64_t i_127553 = 0; i_127553 < t_window_112807; i_127553++) {
            bool cond_127556 = sle64(x_118444, i_127553);
            float defunc_0_f_res_127557;
            
            if (cond_127556) {
                defunc_0_f_res_127557 = 0.0F;
            } else {
                int64_t i_127558 = add64(x_127433, i_127553);
                float x_127559 = ((float *) mem_119718.mem)[gtid_118321 *
                                                            n_112804 +
                                                            i_127558];
                float defunc_0_f_res_f_res_127560 = 1.0F + x_127559;
                
                defunc_0_f_res_127557 = defunc_0_f_res_f_res_127560;
            }
            
            float defunc_0_f_res_127561;
            
            if (cond_127556) {
                defunc_0_f_res_127561 = 0.0F;
            } else {
                int64_t i_127562 = add64(x_127433, i_127553);
                float x_127563 = ((float *) mem_120637.mem)[gtid_118321 *
                                                            n_112804 +
                                                            i_127562];
                
                defunc_0_f_res_127561 = x_127563;
            }
            
            float x_j_127564 = defunc_0_f_res_127557 - defunc_0_f_res_127437;
            float abs_res_127565 = (float) fabs(x_j_127564);
            float tmp1_127566 = abs_res_127565 / x_127434;
            float x_127567 = tmp1_127566 * tmp1_127566;
            float y_127568 = tmp1_127566 * x_127567;
            float tmp2_127569 = 1.0F - y_127568;
            float x_127570 = tmp2_127569 * tmp2_127569;
            float tmp3_127571 = tmp2_127569 * x_127570;
            float tmp4_127572 = defunc_0_f_res_127561 * tmp3_127571;
            
            ((float *) mem_127438)[i_127553] = x_j_127564;
            ((float *) mem_127440)[i_127553] = tmp4_127572;
        }
        
        float defunc_2_reduce_res_127470;
        float defunc_2_reduce_res_127471;
        float defunc_2_reduce_res_127472;
        float defunc_2_reduce_res_127473;
        float defunc_2_reduce_res_127474;
        float redout_127576;
        float redout_127577;
        float redout_127578;
        float redout_127579;
        float redout_127580;
        
        redout_127576 = 0.0F;
        redout_127577 = 0.0F;
        redout_127578 = 0.0F;
        redout_127579 = 0.0F;
        redout_127580 = 0.0F;
        for (int64_t i_127575 = 0; i_127575 < t_window_112807; i_127575++) {
            float x_127583 = ((float *) mem_127438)[i_127575];
            float x_127584 = ((float *) mem_127440)[i_127575];
            float defunc_1_f_res_127585 = x_127583 * x_127584;
            float defunc_1_f_res_127586 = x_127583 * defunc_1_f_res_127585;
            float defunc_1_f_res_127587 = x_127583 * defunc_1_f_res_127586;
            float defunc_1_f_res_127588 = x_127583 * defunc_1_f_res_127587;
            float defunc_1_op_res_127589 = x_127584 + redout_127576;
            float defunc_1_op_res_127590 = defunc_1_f_res_127585 +
                  redout_127577;
            float defunc_1_op_res_127591 = defunc_1_f_res_127586 +
                  redout_127578;
            float defunc_1_op_res_127592 = defunc_1_f_res_127587 +
                  redout_127579;
            float defunc_1_op_res_127593 = defunc_1_f_res_127588 +
                  redout_127580;
            
            ((float *) mem_127466)[i_127575] = defunc_1_f_res_127586;
            ((float *) mem_127468)[i_127575] = defunc_1_f_res_127585;
            
            float redout_tmp_127624 = defunc_1_op_res_127589;
            float redout_tmp_127625 = defunc_1_op_res_127590;
            float redout_tmp_127626 = defunc_1_op_res_127591;
            float redout_tmp_127627 = defunc_1_op_res_127592;
            float redout_tmp_127628 = defunc_1_op_res_127593;
            
            redout_127576 = redout_tmp_127624;
            redout_127577 = redout_tmp_127625;
            redout_127578 = redout_tmp_127626;
            redout_127579 = redout_tmp_127627;
            redout_127580 = redout_tmp_127628;
        }
        defunc_2_reduce_res_127470 = redout_127576;
        defunc_2_reduce_res_127471 = redout_127577;
        defunc_2_reduce_res_127472 = redout_127578;
        defunc_2_reduce_res_127473 = redout_127579;
        defunc_2_reduce_res_127474 = redout_127580;
        
        float x_127498 = defunc_2_reduce_res_127472 *
              defunc_2_reduce_res_127474;
        float y_127499 = defunc_2_reduce_res_127473 *
              defunc_2_reduce_res_127473;
        float a12_127500 = x_127498 - y_127499;
        float x_127501 = defunc_2_reduce_res_127472 *
              defunc_2_reduce_res_127473;
        float y_127502 = defunc_2_reduce_res_127471 *
              defunc_2_reduce_res_127474;
        float b12_127503 = x_127501 - y_127502;
        float x_127504 = defunc_2_reduce_res_127471 *
              defunc_2_reduce_res_127473;
        float y_127505 = defunc_2_reduce_res_127472 *
              defunc_2_reduce_res_127472;
        float c12_127506 = x_127504 - y_127505;
        float x_127507 = defunc_2_reduce_res_127470 *
              defunc_2_reduce_res_127474;
        float b2_127508 = x_127507 - y_127505;
        float x_127509 = defunc_2_reduce_res_127471 *
              defunc_2_reduce_res_127472;
        float y_127510 = defunc_2_reduce_res_127470 *
              defunc_2_reduce_res_127473;
        float c2_127511 = x_127509 - y_127510;
        float x_127512 = defunc_2_reduce_res_127470 * a12_127500;
        float y_127513 = defunc_2_reduce_res_127471 * b12_127503;
        float x_127514 = x_127512 + y_127513;
        float y_127515 = defunc_2_reduce_res_127472 * c12_127506;
        float y_127516 = x_127514 + y_127515;
        float det_127517 = 1.0F / y_127516;
        float a12_127518 = a12_127500 * det_127517;
        float b12_127519 = b12_127503 * det_127517;
        float c12_127520 = c12_127506 * det_127517;
        float b2_127521 = b2_127508 * det_127517;
        float c2_127522 = c2_127511 * det_127517;
        float defunc_2_reduce_res_127523;
        float defunc_2_reduce_res_127524;
        float redout_127597;
        float redout_127598;
        
        redout_127597 = 0.0F;
        redout_127598 = 0.0F;
        for (int64_t i_127596 = 0; i_127596 < t_window_112807; i_127596++) {
            float x_127599 = ((float *) mem_127440)[i_127596];
            float x_127600 = ((float *) mem_127468)[i_127596];
            float x_127601 = ((float *) mem_127466)[i_127596];
            bool cond_127602 = sle64(x_118444, i_127596);
            float defunc_0_f_res_127603;
            
            if (cond_127602) {
                defunc_0_f_res_127603 = 0.0F;
            } else {
                int64_t i_127604 = add64(x_127433, i_127596);
                float x_127605 = ((float *) mem_120633.mem)[gtid_118321 *
                                                            n_112804 +
                                                            i_127604];
                
                defunc_0_f_res_127603 = x_127605;
            }
            
            float x_127606 = a12_127518 * x_127599;
            float y_127607 = b12_127519 * x_127600;
            float x_127608 = x_127606 + y_127607;
            float y_127609 = c12_127520 * x_127601;
            float x_127610 = x_127608 + y_127609;
            float defunc_9_fit_fun_res_127611 = defunc_0_f_res_127603 *
                  x_127610;
            float x_127612 = b12_127519 * x_127599;
            float y_127613 = b2_127521 * x_127600;
            float x_127614 = x_127612 + y_127613;
            float y_127615 = c2_127522 * x_127601;
            float x_127616 = x_127614 + y_127615;
            float defunc_9_slope_fun_res_127617 = defunc_0_f_res_127603 *
                  x_127616;
            float defunc_1_op_res_127618 = defunc_9_fit_fun_res_127611 +
                  redout_127597;
            float defunc_1_op_res_127619 = defunc_9_slope_fun_res_127617 +
                  redout_127598;
            float redout_tmp_127631 = defunc_1_op_res_127618;
            float redout_tmp_127632 = defunc_1_op_res_127619;
            
            redout_127597 = redout_tmp_127631;
            redout_127598 = redout_tmp_127632;
        }
        defunc_2_reduce_res_127523 = redout_127597;
        defunc_2_reduce_res_127524 = redout_127598;
        ((float *) mem_121003.mem)[gtid_118323] = defunc_2_reduce_res_127523;
        ((float *) mem_121006.mem)[gtid_118323] = defunc_2_reduce_res_127524;
    }
    
  cleanup:
    { }
    free(mem_127438);
    free(mem_127440);
    free(mem_127466);
    free(mem_127468);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128948_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128948_end -
                 futhark_mc_segmap_parloop_128948_start;
        
        ctx->futhark_mc_segmap_parloop_128948_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128948_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128948_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128946(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118322 = tid;
    int num_tasks_127551 = info.nsubtasks;
    struct futhark_mc_task_128945 *futhark_mc_task_128945 =
                                  (struct futhark_mc_task_128945 *) args;
    struct futhark_context *ctx = futhark_mc_task_128945->ctx;
    uint64_t futhark_mc_segmap_task_128946_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128946_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128945->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128945->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128945->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128945->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128945->free_i_112880;
    int64_t gtid_118321 = futhark_mc_task_128945->free_gtid_118321;
    int64_t x_118444 = futhark_mc_task_128945->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128945->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128945->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128945->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128945->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128945->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 = futhark_mc_task_128945->free_bytes_120929;
    struct memblock mem_121003 = {.desc ="mem_121003", .mem =
                                  futhark_mc_task_128945->free_mem_121003,
                                  .size =0, .references =NULL};
    struct memblock mem_121006 = {.desc ="mem_121006", .mem =
                                  futhark_mc_task_128945->free_mem_121006,
                                  .size =0, .references =NULL};
    int64_t iter_127552;
    struct futhark_mc_segmap_parloop_struct_128947
    futhark_mc_segmap_parloop_struct_128947;
    
    futhark_mc_segmap_parloop_struct_128947.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128947.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128947.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128947.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128947.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128947.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128947.free_gtid_118321 = gtid_118321;
    futhark_mc_segmap_parloop_struct_128947.free_x_118444 = x_118444;
    futhark_mc_segmap_parloop_struct_128947.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128947.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128947.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128947.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128947.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128947.free_bytes_120929 = bytes_120929;
    futhark_mc_segmap_parloop_struct_128947.free_mem_121003 = mem_121003.mem;
    futhark_mc_segmap_parloop_struct_128947.free_mem_121006 = mem_121006.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128948_task;
    
    futhark_mc_segmap_parloop_128948_task.name =
        "futhark_mc_segmap_parloop_128948";
    futhark_mc_segmap_parloop_128948_task.fn = futhark_mc_segmap_parloop_128948;
    futhark_mc_segmap_parloop_128948_task.args =
        &futhark_mc_segmap_parloop_struct_128947;
    futhark_mc_segmap_parloop_128948_task.iterations = iterations;
    futhark_mc_segmap_parloop_128948_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128948_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128948_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128948_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128948_task);
    
    if (futhark_mc_segmap_parloop_128948_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128948_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128948_total_end -
                 futhark_mc_segmap_parloop_128948_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128948_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128948_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128948_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128946_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128946_end -
                 futhark_mc_segmap_task_128946_start;
        
        ctx->futhark_mc_segmap_task_128946_runs[tid]++;
        ctx->futhark_mc_segmap_task_128946_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128946_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128954 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_119718;
    char *free_mem_119882;
    char *free_mem_119886;
    char *free_mem_120633;
    char *free_mem_120637;
    int64_t free_bytes_120929;
    char *free_mem_121003;
    char *free_mem_121006;
};
struct futhark_mc_task_128960 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_127325;
    float free_x_127326;
    float free_defunc_0_f_res_127329;
    char *free_mem_127330;
    char *free_mem_127331;
};
struct futhark_mc_segmap_parloop_struct_128962 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_window_112807;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_119718;
    char *free_mem_120637;
    int64_t free_x_127325;
    float free_x_127326;
    float free_defunc_0_f_res_127329;
    char *free_mem_127330;
    char *free_mem_127331;
};
static int futhark_mc_segmap_parloop_128963(void *args, int64_t start,
                                            int64_t end, int flat_tid_118326,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128962
    *futhark_mc_segmap_parloop_struct_128962 =
    (struct futhark_mc_segmap_parloop_struct_128962 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128962->ctx;
    uint64_t futhark_mc_segmap_parloop_128963_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128963_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128962->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128962->free_t_window_112807;
    int64_t gtid_118321 =
            futhark_mc_segmap_parloop_struct_128962->free_gtid_118321;
    int64_t x_118444 = futhark_mc_segmap_parloop_struct_128962->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128962->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128962->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_127325 = futhark_mc_segmap_parloop_struct_128962->free_x_127325;
    float x_127326 = futhark_mc_segmap_parloop_struct_128962->free_x_127326;
    float defunc_0_f_res_127329 =
          futhark_mc_segmap_parloop_struct_128962->free_defunc_0_f_res_127329;
    struct memblock mem_127330 = {.desc ="mem_127330", .mem =
                                  futhark_mc_segmap_parloop_struct_128962->free_mem_127330,
                                  .size =0, .references =NULL};
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_segmap_parloop_struct_128962->free_mem_127331,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127700 = start;
    
    for (; iter_127700 < end; iter_127700++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127706 = t_window_112807;
        int64_t gtid_118327 = iter_127700;
        int64_t remnant_127707 = iter_127700 - gtid_118327;
        bool cond_127634 = sle64(x_118444, gtid_118327);
        float defunc_0_f_res_127635;
        
        if (cond_127634) {
            defunc_0_f_res_127635 = 0.0F;
        } else {
            int64_t i_127701 = add64(gtid_118327, x_127325);
            float x_127702 = ((float *) mem_119718.mem)[gtid_118321 * n_112804 +
                                                        i_127701];
            float defunc_0_f_res_f_res_127703 = 1.0F + x_127702;
            
            defunc_0_f_res_127635 = defunc_0_f_res_f_res_127703;
        }
        
        float defunc_0_f_res_127639;
        
        if (cond_127634) {
            defunc_0_f_res_127639 = 0.0F;
        } else {
            int64_t i_127704 = add64(gtid_118327, x_127325);
            float x_127705 = ((float *) mem_120637.mem)[gtid_118321 * n_112804 +
                                                        i_127704];
            
            defunc_0_f_res_127639 = x_127705;
        }
        
        float x_j_127642 = defunc_0_f_res_127635 - defunc_0_f_res_127329;
        float abs_res_127643 = (float) fabs(x_j_127642);
        float tmp1_127644 = abs_res_127643 / x_127326;
        float x_127645 = tmp1_127644 * tmp1_127644;
        float y_127646 = tmp1_127644 * x_127645;
        float tmp2_127647 = 1.0F - y_127646;
        float x_127648 = tmp2_127647 * tmp2_127647;
        float tmp3_127649 = tmp2_127647 * x_127648;
        float tmp4_127650 = defunc_0_f_res_127639 * tmp3_127649;
        
        ((float *) mem_127330.mem)[gtid_118327] = x_j_127642;
        ((float *) mem_127331.mem)[gtid_118327] = tmp4_127650;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128963_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128963_end -
                 futhark_mc_segmap_parloop_128963_start;
        
        ctx->futhark_mc_segmap_parloop_128963_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128963_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128963_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128961(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118326 = tid;
    int num_tasks_127699 = info.nsubtasks;
    struct futhark_mc_task_128960 *futhark_mc_task_128960 =
                                  (struct futhark_mc_task_128960 *) args;
    struct futhark_context *ctx = futhark_mc_task_128960->ctx;
    uint64_t futhark_mc_segmap_task_128961_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128961_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128960->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128960->free_t_window_112807;
    int64_t gtid_118321 = futhark_mc_task_128960->free_gtid_118321;
    int64_t x_118444 = futhark_mc_task_128960->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128960->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128960->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t x_127325 = futhark_mc_task_128960->free_x_127325;
    float x_127326 = futhark_mc_task_128960->free_x_127326;
    float defunc_0_f_res_127329 =
          futhark_mc_task_128960->free_defunc_0_f_res_127329;
    struct memblock mem_127330 = {.desc ="mem_127330", .mem =
                                  futhark_mc_task_128960->free_mem_127330,
                                  .size =0, .references =NULL};
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_task_128960->free_mem_127331,
                                  .size =0, .references =NULL};
    int64_t iter_127700;
    struct futhark_mc_segmap_parloop_struct_128962
    futhark_mc_segmap_parloop_struct_128962;
    
    futhark_mc_segmap_parloop_struct_128962.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128962.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128962.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128962.free_gtid_118321 = gtid_118321;
    futhark_mc_segmap_parloop_struct_128962.free_x_118444 = x_118444;
    futhark_mc_segmap_parloop_struct_128962.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128962.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128962.free_x_127325 = x_127325;
    futhark_mc_segmap_parloop_struct_128962.free_x_127326 = x_127326;
    futhark_mc_segmap_parloop_struct_128962.free_defunc_0_f_res_127329 =
        defunc_0_f_res_127329;
    futhark_mc_segmap_parloop_struct_128962.free_mem_127330 = mem_127330.mem;
    futhark_mc_segmap_parloop_struct_128962.free_mem_127331 = mem_127331.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128963_task;
    
    futhark_mc_segmap_parloop_128963_task.name =
        "futhark_mc_segmap_parloop_128963";
    futhark_mc_segmap_parloop_128963_task.fn = futhark_mc_segmap_parloop_128963;
    futhark_mc_segmap_parloop_128963_task.args =
        &futhark_mc_segmap_parloop_struct_128962;
    futhark_mc_segmap_parloop_128963_task.iterations = iterations;
    futhark_mc_segmap_parloop_128963_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128963_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128963_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128963_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128963_task);
    
    if (futhark_mc_segmap_parloop_128963_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128963_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128963_total_end -
                 futhark_mc_segmap_parloop_128963_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128963_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128963_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128963_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128961_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128961_end -
                 futhark_mc_segmap_task_128961_start;
        
        ctx->futhark_mc_segmap_task_128961_runs[tid]++;
        ctx->futhark_mc_segmap_task_128961_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128961_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128964 {
    struct futhark_context *ctx;
    char *free_mem_127330;
    char *free_mem_127331;
    float *retval_defunc_2_reduce_res_127353;
    float *retval_defunc_2_reduce_res_127354;
    float *retval_defunc_2_reduce_res_127355;
    float *retval_defunc_2_reduce_res_127356;
    float *retval_defunc_2_reduce_res_127357;
    char *retval_mem_127351;
    char *retval_mem_127352;
};
struct futhark_mc_segred_stage_1_parloop_struct_128971 {
    struct futhark_context *ctx;
    char *free_mem_127330;
    char *free_mem_127331;
    char *free_mem_127351;
    char *free_mem_127352;
    char *free_reduce_stage_1_tid_res_arr_mem_127709;
    char *free_reduce_stage_1_tid_res_arr_mem_127711;
    char *free_reduce_stage_1_tid_res_arr_mem_127713;
    char *free_reduce_stage_1_tid_res_arr_mem_127715;
    char *free_reduce_stage_1_tid_res_arr_mem_127717;
};
static int futhark_mc_segred_stage_1_parloop_128972(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118328,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128971
    *futhark_mc_segred_stage_1_parloop_struct_128971 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128971 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128971->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128972_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128972_start = get_wall_time();
    
    struct memblock mem_127330 = {.desc ="mem_127330", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128971->free_mem_127330,
                                  .size =0, .references =NULL};
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128971->free_mem_127331,
                                  .size =0, .references =NULL};
    struct memblock mem_127351 = {.desc ="mem_127351", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128971->free_mem_127351,
                                  .size =0, .references =NULL};
    struct memblock mem_127352 = {.desc ="mem_127352", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128971->free_mem_127352,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127709 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127709",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128971->free_reduce_stage_1_tid_res_arr_mem_127709,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127711 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127711",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128971->free_reduce_stage_1_tid_res_arr_mem_127711,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127713 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127713",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128971->free_reduce_stage_1_tid_res_arr_mem_127713,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127715 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127715",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128971->free_reduce_stage_1_tid_res_arr_mem_127715,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127717 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127717",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128971->free_reduce_stage_1_tid_res_arr_mem_127717,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127719 = start;
    float x_127651;
    float x_127652;
    float x_127654;
    float x_127655;
    float x_127657;
    float x_127658;
    float x_127660;
    float x_127661;
    float x_127663;
    float x_127664;
    float local_acc_127720 = 0.0F;
    float local_acc_127721 = 0.0F;
    float local_acc_127722 = 0.0F;
    float local_acc_127723 = 0.0F;
    float local_acc_127724 = 0.0F;
    
    for (; iter_127719 < end; iter_127719++) {
        int64_t gtid_118329 = iter_127719;
        float x_127666 = ((float *) mem_127330.mem)[gtid_118329];
        float x_127667 = ((float *) mem_127331.mem)[gtid_118329];
        float defunc_1_f_res_127668 = x_127666 * x_127667;
        float defunc_1_f_res_127669 = x_127666 * defunc_1_f_res_127668;
        float defunc_1_f_res_127670 = x_127666 * defunc_1_f_res_127669;
        float defunc_1_f_res_127671 = x_127666 * defunc_1_f_res_127670;
        
        // save map-out results
        {
            ((float *) mem_127351.mem)[gtid_118329] = defunc_1_f_res_127669;
            ((float *) mem_127352.mem)[gtid_118329] = defunc_1_f_res_127668;
        }
        // Load accum params
        {
            x_127651 = local_acc_127720;
        }
        // Load next params
        {
            x_127652 = x_127667;
        }
        // Red body
        {
            float defunc_1_op_res_127653 = x_127651 + x_127652;
            
            local_acc_127720 = defunc_1_op_res_127653;
        }
        // Load accum params
        {
            x_127654 = local_acc_127721;
        }
        // Load next params
        {
            x_127655 = defunc_1_f_res_127668;
        }
        // Red body
        {
            float defunc_1_op_res_127656 = x_127654 + x_127655;
            
            local_acc_127721 = defunc_1_op_res_127656;
        }
        // Load accum params
        {
            x_127657 = local_acc_127722;
        }
        // Load next params
        {
            x_127658 = defunc_1_f_res_127669;
        }
        // Red body
        {
            float defunc_1_op_res_127659 = x_127657 + x_127658;
            
            local_acc_127722 = defunc_1_op_res_127659;
        }
        // Load accum params
        {
            x_127660 = local_acc_127723;
        }
        // Load next params
        {
            x_127661 = defunc_1_f_res_127670;
        }
        // Red body
        {
            float defunc_1_op_res_127662 = x_127660 + x_127661;
            
            local_acc_127723 = defunc_1_op_res_127662;
        }
        // Load accum params
        {
            x_127663 = local_acc_127724;
        }
        // Load next params
        {
            x_127664 = defunc_1_f_res_127671;
        }
        // Red body
        {
            float defunc_1_op_res_127665 = x_127663 + x_127664;
            
            local_acc_127724 = defunc_1_op_res_127665;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127709.mem)[flat_tid_118328] =
        local_acc_127720;
    ((float *) reduce_stage_1_tid_res_arr_mem_127711.mem)[flat_tid_118328] =
        local_acc_127721;
    ((float *) reduce_stage_1_tid_res_arr_mem_127713.mem)[flat_tid_118328] =
        local_acc_127722;
    ((float *) reduce_stage_1_tid_res_arr_mem_127715.mem)[flat_tid_118328] =
        local_acc_127723;
    ((float *) reduce_stage_1_tid_res_arr_mem_127717.mem)[flat_tid_118328] =
        local_acc_127724;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128972_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128972_end -
                 futhark_mc_segred_stage_1_parloop_128972_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128972_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128972_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128972_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128965(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118328 = tid;
    int num_tasks_127708 = info.nsubtasks;
    struct futhark_mc_task_128964 *futhark_mc_task_128964 =
                                  (struct futhark_mc_task_128964 *) args;
    struct futhark_context *ctx = futhark_mc_task_128964->ctx;
    uint64_t futhark_mc_segred_task_128965_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128965_start = get_wall_time();
    
    struct memblock mem_127330 = {.desc ="mem_127330", .mem =
                                  futhark_mc_task_128964->free_mem_127330,
                                  .size =0, .references =NULL};
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_task_128964->free_mem_127331,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_127353 =
          *futhark_mc_task_128964->retval_defunc_2_reduce_res_127353;
    float defunc_2_reduce_res_127354 =
          *futhark_mc_task_128964->retval_defunc_2_reduce_res_127354;
    float defunc_2_reduce_res_127355 =
          *futhark_mc_task_128964->retval_defunc_2_reduce_res_127355;
    float defunc_2_reduce_res_127356 =
          *futhark_mc_task_128964->retval_defunc_2_reduce_res_127356;
    float defunc_2_reduce_res_127357 =
          *futhark_mc_task_128964->retval_defunc_2_reduce_res_127357;
    struct memblock mem_127351 = {.desc ="mem_127351", .mem =
                                  futhark_mc_task_128964->retval_mem_127351,
                                  .size =0, .references =NULL};
    struct memblock mem_127352 = {.desc ="mem_127352", .mem =
                                  futhark_mc_task_128964->retval_mem_127352,
                                  .size =0, .references =NULL};
    size_t reduce_stage_1_tid_res_arr_mem_127709_cached_sizze_128966 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127709 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127711_cached_sizze_128967 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127711 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127713_cached_sizze_128968 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127713 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127715_cached_sizze_128969 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127715 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127717_cached_sizze_128970 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127717 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127709_cached_sizze_128966 <
        (size_t) ((int64_t) 4 * num_tasks_127708)) {
        reduce_stage_1_tid_res_arr_mem_127709 =
            realloc(reduce_stage_1_tid_res_arr_mem_127709, (int64_t) 4 *
                    num_tasks_127708);
        reduce_stage_1_tid_res_arr_mem_127709_cached_sizze_128966 =
            (int64_t) 4 * num_tasks_127708;
    }
    if (reduce_stage_1_tid_res_arr_mem_127711_cached_sizze_128967 <
        (size_t) ((int64_t) 4 * num_tasks_127708)) {
        reduce_stage_1_tid_res_arr_mem_127711 =
            realloc(reduce_stage_1_tid_res_arr_mem_127711, (int64_t) 4 *
                    num_tasks_127708);
        reduce_stage_1_tid_res_arr_mem_127711_cached_sizze_128967 =
            (int64_t) 4 * num_tasks_127708;
    }
    if (reduce_stage_1_tid_res_arr_mem_127713_cached_sizze_128968 <
        (size_t) ((int64_t) 4 * num_tasks_127708)) {
        reduce_stage_1_tid_res_arr_mem_127713 =
            realloc(reduce_stage_1_tid_res_arr_mem_127713, (int64_t) 4 *
                    num_tasks_127708);
        reduce_stage_1_tid_res_arr_mem_127713_cached_sizze_128968 =
            (int64_t) 4 * num_tasks_127708;
    }
    if (reduce_stage_1_tid_res_arr_mem_127715_cached_sizze_128969 <
        (size_t) ((int64_t) 4 * num_tasks_127708)) {
        reduce_stage_1_tid_res_arr_mem_127715 =
            realloc(reduce_stage_1_tid_res_arr_mem_127715, (int64_t) 4 *
                    num_tasks_127708);
        reduce_stage_1_tid_res_arr_mem_127715_cached_sizze_128969 =
            (int64_t) 4 * num_tasks_127708;
    }
    if (reduce_stage_1_tid_res_arr_mem_127717_cached_sizze_128970 <
        (size_t) ((int64_t) 4 * num_tasks_127708)) {
        reduce_stage_1_tid_res_arr_mem_127717 =
            realloc(reduce_stage_1_tid_res_arr_mem_127717, (int64_t) 4 *
                    num_tasks_127708);
        reduce_stage_1_tid_res_arr_mem_127717_cached_sizze_128970 =
            (int64_t) 4 * num_tasks_127708;
    }
    
    int64_t iter_127719;
    struct futhark_mc_segred_stage_1_parloop_struct_128971
    futhark_mc_segred_stage_1_parloop_struct_128971;
    
    futhark_mc_segred_stage_1_parloop_struct_128971.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_mem_127330 =
        mem_127330.mem;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_mem_127331 =
        mem_127331.mem;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_mem_127351 =
        mem_127351.mem;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_mem_127352 =
        mem_127352.mem;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_reduce_stage_1_tid_res_arr_mem_127709 =
        reduce_stage_1_tid_res_arr_mem_127709;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_reduce_stage_1_tid_res_arr_mem_127711 =
        reduce_stage_1_tid_res_arr_mem_127711;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_reduce_stage_1_tid_res_arr_mem_127713 =
        reduce_stage_1_tid_res_arr_mem_127713;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_reduce_stage_1_tid_res_arr_mem_127715 =
        reduce_stage_1_tid_res_arr_mem_127715;
    futhark_mc_segred_stage_1_parloop_struct_128971.free_reduce_stage_1_tid_res_arr_mem_127717 =
        reduce_stage_1_tid_res_arr_mem_127717;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128972_task;
    
    futhark_mc_segred_stage_1_parloop_128972_task.name =
        "futhark_mc_segred_stage_1_parloop_128972";
    futhark_mc_segred_stage_1_parloop_128972_task.fn =
        futhark_mc_segred_stage_1_parloop_128972;
    futhark_mc_segred_stage_1_parloop_128972_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128971;
    futhark_mc_segred_stage_1_parloop_128972_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128972_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128972_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128972_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128972_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128972_task);
    
    if (futhark_mc_segred_stage_1_parloop_128972_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128972_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128972_total_end -
                 futhark_mc_segred_stage_1_parloop_128972_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128972_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128972_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128972_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127353 = 0.0F;
        defunc_2_reduce_res_127354 = 0.0F;
        defunc_2_reduce_res_127355 = 0.0F;
        defunc_2_reduce_res_127356 = 0.0F;
        defunc_2_reduce_res_127357 = 0.0F;
    }
    
    float x_127725;
    float x_127726;
    float x_127728;
    float x_127729;
    float x_127731;
    float x_127732;
    float x_127734;
    float x_127735;
    float x_127737;
    float x_127738;
    
    for (int32_t i_127740 = 0; i_127740 < num_tasks_127708; i_127740++) {
        flat_tid_118328 = i_127740;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127725 = defunc_2_reduce_res_127353;
            }
            // load next params
            {
                x_127726 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127709)[flat_tid_118328];
            }
            // red body
            {
                float defunc_1_op_res_127727 = x_127725 + x_127726;
                
                defunc_2_reduce_res_127353 = defunc_1_op_res_127727;
            }
            // load acc params
            {
                x_127728 = defunc_2_reduce_res_127354;
            }
            // load next params
            {
                x_127729 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127711)[flat_tid_118328];
            }
            // red body
            {
                float defunc_1_op_res_127730 = x_127728 + x_127729;
                
                defunc_2_reduce_res_127354 = defunc_1_op_res_127730;
            }
            // load acc params
            {
                x_127731 = defunc_2_reduce_res_127355;
            }
            // load next params
            {
                x_127732 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127713)[flat_tid_118328];
            }
            // red body
            {
                float defunc_1_op_res_127733 = x_127731 + x_127732;
                
                defunc_2_reduce_res_127355 = defunc_1_op_res_127733;
            }
            // load acc params
            {
                x_127734 = defunc_2_reduce_res_127356;
            }
            // load next params
            {
                x_127735 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127715)[flat_tid_118328];
            }
            // red body
            {
                float defunc_1_op_res_127736 = x_127734 + x_127735;
                
                defunc_2_reduce_res_127356 = defunc_1_op_res_127736;
            }
            // load acc params
            {
                x_127737 = defunc_2_reduce_res_127357;
            }
            // load next params
            {
                x_127738 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127717)[flat_tid_118328];
            }
            // red body
            {
                float defunc_1_op_res_127739 = x_127737 + x_127738;
                
                defunc_2_reduce_res_127357 = defunc_1_op_res_127739;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127709);
    free(reduce_stage_1_tid_res_arr_mem_127711);
    free(reduce_stage_1_tid_res_arr_mem_127713);
    free(reduce_stage_1_tid_res_arr_mem_127715);
    free(reduce_stage_1_tid_res_arr_mem_127717);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128965_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128965_end -
                 futhark_mc_segred_task_128965_start;
        
        ctx->futhark_mc_segred_task_128965_runs[tid]++;
        ctx->futhark_mc_segred_task_128965_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128965_iter[tid] += iterations;
    }
    *futhark_mc_task_128964->retval_defunc_2_reduce_res_127353 =
        defunc_2_reduce_res_127353;
    *futhark_mc_task_128964->retval_defunc_2_reduce_res_127354 =
        defunc_2_reduce_res_127354;
    *futhark_mc_task_128964->retval_defunc_2_reduce_res_127355 =
        defunc_2_reduce_res_127355;
    *futhark_mc_task_128964->retval_defunc_2_reduce_res_127356 =
        defunc_2_reduce_res_127356;
    *futhark_mc_task_128964->retval_defunc_2_reduce_res_127357 =
        defunc_2_reduce_res_127357;
    futhark_mc_task_128964->retval_mem_127351 = mem_127351.mem;
    futhark_mc_task_128964->retval_mem_127352 = mem_127352.mem;
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128973 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_120633;
    int64_t free_x_127325;
    char *free_mem_127331;
    char *free_mem_127351;
    char *free_mem_127352;
    float free_a12_127401;
    float free_b12_127402;
    float free_c12_127403;
    float free_b2_127404;
    float free_c2_127405;
    float *retval_defunc_2_reduce_res_127406;
    float *retval_defunc_2_reduce_res_127407;
};
struct futhark_mc_segred_stage_1_parloop_struct_128977 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118321;
    int64_t free_x_118444;
    char *free_mem_120633;
    int64_t free_x_127325;
    char *free_mem_127331;
    char *free_mem_127351;
    char *free_mem_127352;
    float free_a12_127401;
    float free_b12_127402;
    float free_c12_127403;
    float free_b2_127404;
    float free_c2_127405;
    char *free_reduce_stage_1_tid_res_arr_mem_127742;
    char *free_reduce_stage_1_tid_res_arr_mem_127744;
};
static int futhark_mc_segred_stage_1_parloop_128978(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118330,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_128977
    *futhark_mc_segred_stage_1_parloop_struct_128977 =
    (struct futhark_mc_segred_stage_1_parloop_struct_128977 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_128977->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_128978_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128978_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_128977->free_n_112804;
    int64_t gtid_118321 =
            futhark_mc_segred_stage_1_parloop_struct_128977->free_gtid_118321;
    int64_t x_118444 =
            futhark_mc_segred_stage_1_parloop_struct_128977->free_x_118444;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128977->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_127325 =
            futhark_mc_segred_stage_1_parloop_struct_128977->free_x_127325;
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128977->free_mem_127331,
                                  .size =0, .references =NULL};
    struct memblock mem_127351 = {.desc ="mem_127351", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128977->free_mem_127351,
                                  .size =0, .references =NULL};
    struct memblock mem_127352 = {.desc ="mem_127352", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_128977->free_mem_127352,
                                  .size =0, .references =NULL};
    float a12_127401 =
          futhark_mc_segred_stage_1_parloop_struct_128977->free_a12_127401;
    float b12_127402 =
          futhark_mc_segred_stage_1_parloop_struct_128977->free_b12_127402;
    float c12_127403 =
          futhark_mc_segred_stage_1_parloop_struct_128977->free_c12_127403;
    float b2_127404 =
          futhark_mc_segred_stage_1_parloop_struct_128977->free_b2_127404;
    float c2_127405 =
          futhark_mc_segred_stage_1_parloop_struct_128977->free_c2_127405;
    struct memblock reduce_stage_1_tid_res_arr_mem_127742 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127742",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128977->free_reduce_stage_1_tid_res_arr_mem_127742,
                                                             .size =0,
                                                             .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_127744 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_127744",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_128977->free_reduce_stage_1_tid_res_arr_mem_127744,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127746 = start;
    float x_127672;
    float x_127673;
    float x_127675;
    float x_127676;
    float local_acc_127747 = 0.0F;
    float local_acc_127748 = 0.0F;
    
    for (; iter_127746 < end; iter_127746++) {
        int64_t gtid_118331 = iter_127746;
        float x_127678 = ((float *) mem_127331.mem)[gtid_118331];
        float x_127679 = ((float *) mem_127352.mem)[gtid_118331];
        float x_127680 = ((float *) mem_127351.mem)[gtid_118331];
        bool cond_127681 = sle64(x_118444, gtid_118331);
        float defunc_0_f_res_127682;
        
        if (cond_127681) {
            defunc_0_f_res_127682 = 0.0F;
        } else {
            int64_t i_127683 = add64(gtid_118331, x_127325);
            float x_127684 = ((float *) mem_120633.mem)[gtid_118321 * n_112804 +
                                                        i_127683];
            
            defunc_0_f_res_127682 = x_127684;
        }
        
        float x_127685 = a12_127401 * x_127678;
        float y_127686 = b12_127402 * x_127679;
        float x_127687 = x_127685 + y_127686;
        float y_127688 = c12_127403 * x_127680;
        float x_127689 = x_127687 + y_127688;
        float defunc_9_fit_fun_res_127690 = defunc_0_f_res_127682 * x_127689;
        float x_127691 = b12_127402 * x_127678;
        float y_127692 = b2_127404 * x_127679;
        float x_127693 = x_127691 + y_127692;
        float y_127694 = c2_127405 * x_127680;
        float x_127695 = x_127693 + y_127694;
        float defunc_9_slope_fun_res_127696 = defunc_0_f_res_127682 * x_127695;
        
        // save map-out results
        { }
        // Load accum params
        {
            x_127672 = local_acc_127747;
        }
        // Load next params
        {
            x_127673 = defunc_9_fit_fun_res_127690;
        }
        // Red body
        {
            float defunc_1_op_res_127674 = x_127672 + x_127673;
            
            local_acc_127747 = defunc_1_op_res_127674;
        }
        // Load accum params
        {
            x_127675 = local_acc_127748;
        }
        // Load next params
        {
            x_127676 = defunc_9_slope_fun_res_127696;
        }
        // Red body
        {
            float defunc_1_op_res_127677 = x_127675 + x_127676;
            
            local_acc_127748 = defunc_1_op_res_127677;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_127742.mem)[flat_tid_118330] =
        local_acc_127747;
    ((float *) reduce_stage_1_tid_res_arr_mem_127744.mem)[flat_tid_118330] =
        local_acc_127748;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128978_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128978_end -
                 futhark_mc_segred_stage_1_parloop_128978_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_128978_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_128978_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_128978_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_128974(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118330 = tid;
    int num_tasks_127741 = info.nsubtasks;
    struct futhark_mc_task_128973 *futhark_mc_task_128973 =
                                  (struct futhark_mc_task_128973 *) args;
    struct futhark_context *ctx = futhark_mc_task_128973->ctx;
    uint64_t futhark_mc_segred_task_128974_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_128974_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128973->free_n_112804;
    int64_t gtid_118321 = futhark_mc_task_128973->free_gtid_118321;
    int64_t x_118444 = futhark_mc_task_128973->free_x_118444;
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128973->free_mem_120633,
                                  .size =0, .references =NULL};
    int64_t x_127325 = futhark_mc_task_128973->free_x_127325;
    struct memblock mem_127331 = {.desc ="mem_127331", .mem =
                                  futhark_mc_task_128973->free_mem_127331,
                                  .size =0, .references =NULL};
    struct memblock mem_127351 = {.desc ="mem_127351", .mem =
                                  futhark_mc_task_128973->free_mem_127351,
                                  .size =0, .references =NULL};
    struct memblock mem_127352 = {.desc ="mem_127352", .mem =
                                  futhark_mc_task_128973->free_mem_127352,
                                  .size =0, .references =NULL};
    float a12_127401 = futhark_mc_task_128973->free_a12_127401;
    float b12_127402 = futhark_mc_task_128973->free_b12_127402;
    float c12_127403 = futhark_mc_task_128973->free_c12_127403;
    float b2_127404 = futhark_mc_task_128973->free_b2_127404;
    float c2_127405 = futhark_mc_task_128973->free_c2_127405;
    float defunc_2_reduce_res_127406 =
          *futhark_mc_task_128973->retval_defunc_2_reduce_res_127406;
    float defunc_2_reduce_res_127407 =
          *futhark_mc_task_128973->retval_defunc_2_reduce_res_127407;
    size_t reduce_stage_1_tid_res_arr_mem_127742_cached_sizze_128975 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127742 = NULL;
    size_t reduce_stage_1_tid_res_arr_mem_127744_cached_sizze_128976 = 0;
    char *reduce_stage_1_tid_res_arr_mem_127744 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_127742_cached_sizze_128975 <
        (size_t) ((int64_t) 4 * num_tasks_127741)) {
        reduce_stage_1_tid_res_arr_mem_127742 =
            realloc(reduce_stage_1_tid_res_arr_mem_127742, (int64_t) 4 *
                    num_tasks_127741);
        reduce_stage_1_tid_res_arr_mem_127742_cached_sizze_128975 =
            (int64_t) 4 * num_tasks_127741;
    }
    if (reduce_stage_1_tid_res_arr_mem_127744_cached_sizze_128976 <
        (size_t) ((int64_t) 4 * num_tasks_127741)) {
        reduce_stage_1_tid_res_arr_mem_127744 =
            realloc(reduce_stage_1_tid_res_arr_mem_127744, (int64_t) 4 *
                    num_tasks_127741);
        reduce_stage_1_tid_res_arr_mem_127744_cached_sizze_128976 =
            (int64_t) 4 * num_tasks_127741;
    }
    
    int64_t iter_127746;
    struct futhark_mc_segred_stage_1_parloop_struct_128977
    futhark_mc_segred_stage_1_parloop_struct_128977;
    
    futhark_mc_segred_stage_1_parloop_struct_128977.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_gtid_118321 =
        gtid_118321;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_x_118444 = x_118444;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_mem_120633 =
        mem_120633.mem;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_x_127325 = x_127325;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_mem_127331 =
        mem_127331.mem;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_mem_127351 =
        mem_127351.mem;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_mem_127352 =
        mem_127352.mem;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_a12_127401 =
        a12_127401;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_b12_127402 =
        b12_127402;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_c12_127403 =
        c12_127403;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_b2_127404 = b2_127404;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_c2_127405 = c2_127405;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_reduce_stage_1_tid_res_arr_mem_127742 =
        reduce_stage_1_tid_res_arr_mem_127742;
    futhark_mc_segred_stage_1_parloop_struct_128977.free_reduce_stage_1_tid_res_arr_mem_127744 =
        reduce_stage_1_tid_res_arr_mem_127744;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_128978_task;
    
    futhark_mc_segred_stage_1_parloop_128978_task.name =
        "futhark_mc_segred_stage_1_parloop_128978";
    futhark_mc_segred_stage_1_parloop_128978_task.fn =
        futhark_mc_segred_stage_1_parloop_128978;
    futhark_mc_segred_stage_1_parloop_128978_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_128977;
    futhark_mc_segred_stage_1_parloop_128978_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_128978_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_128978_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_128978_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_128978_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_128978_task);
    
    if (futhark_mc_segred_stage_1_parloop_128978_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_128978_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_128978_total_end -
                 futhark_mc_segred_stage_1_parloop_128978_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128978_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128978_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_128978_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_127406 = 0.0F;
        defunc_2_reduce_res_127407 = 0.0F;
    }
    
    float x_127749;
    float x_127750;
    float x_127752;
    float x_127753;
    
    for (int32_t i_127755 = 0; i_127755 < num_tasks_127741; i_127755++) {
        flat_tid_118330 = i_127755;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_127749 = defunc_2_reduce_res_127406;
            }
            // load next params
            {
                x_127750 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127742)[flat_tid_118330];
            }
            // red body
            {
                float defunc_1_op_res_127751 = x_127749 + x_127750;
                
                defunc_2_reduce_res_127406 = defunc_1_op_res_127751;
            }
            // load acc params
            {
                x_127752 = defunc_2_reduce_res_127407;
            }
            // load next params
            {
                x_127753 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_127744)[flat_tid_118330];
            }
            // red body
            {
                float defunc_1_op_res_127754 = x_127752 + x_127753;
                
                defunc_2_reduce_res_127407 = defunc_1_op_res_127754;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_127742);
    free(reduce_stage_1_tid_res_arr_mem_127744);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_128974_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_128974_end -
                 futhark_mc_segred_task_128974_start;
        
        ctx->futhark_mc_segred_task_128974_runs[tid]++;
        ctx->futhark_mc_segred_task_128974_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_128974_iter[tid] += iterations;
    }
    *futhark_mc_task_128973->retval_defunc_2_reduce_res_127406 =
        defunc_2_reduce_res_127406;
    *futhark_mc_task_128973->retval_defunc_2_reduce_res_127407 =
        defunc_2_reduce_res_127407;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128955(void *args, int64_t start,
                                            int64_t end, int flat_tid_118324,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128954
    *futhark_mc_segmap_parloop_struct_128954 =
    (struct futhark_mc_segmap_parloop_struct_128954 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128954->ctx;
    uint64_t futhark_mc_segmap_parloop_128955_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128955_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128954->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128954->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128954->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128954->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128954->free_i_112880;
    int64_t gtid_118321 =
            futhark_mc_segmap_parloop_struct_128954->free_gtid_118321;
    int64_t x_118444 = futhark_mc_segmap_parloop_struct_128954->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 =
            futhark_mc_segmap_parloop_struct_128954->free_bytes_120929;
    struct memblock mem_121003 = {.desc ="mem_121003", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_121003,
                                  .size =0, .references =NULL};
    struct memblock mem_121006 = {.desc ="mem_121006", .mem =
                                  futhark_mc_segmap_parloop_struct_128954->free_mem_121006,
                                  .size =0, .references =NULL};
    size_t mem_127330_cached_sizze_128956 = 0;
    char *mem_127330 = NULL;
    size_t mem_127331_cached_sizze_128957 = 0;
    char *mem_127331 = NULL;
    size_t mem_127351_cached_sizze_128958 = 0;
    char *mem_127351 = NULL;
    size_t mem_127352_cached_sizze_128959 = 0;
    char *mem_127352 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127633 = start;
    
    if (mem_127330_cached_sizze_128956 < (size_t) bytes_120929) {
        mem_127330 = realloc(mem_127330, bytes_120929);
        mem_127330_cached_sizze_128956 = bytes_120929;
    }
    if (mem_127331_cached_sizze_128957 < (size_t) bytes_120929) {
        mem_127331 = realloc(mem_127331, bytes_120929);
        mem_127331_cached_sizze_128957 = bytes_120929;
    }
    if (mem_127351_cached_sizze_128958 < (size_t) bytes_120929) {
        mem_127351 = realloc(mem_127351, bytes_120929);
        mem_127351_cached_sizze_128958 = bytes_120929;
    }
    if (mem_127352_cached_sizze_128959 < (size_t) bytes_120929) {
        mem_127352 = realloc(mem_127352, bytes_120929);
        mem_127352_cached_sizze_128959 = bytes_120929;
    }
    for (; iter_127633 < end; iter_127633++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127697 = t_n_m_112861;
        int64_t gtid_118325 = iter_127633;
        int64_t remnant_127698 = iter_127633 - gtid_118325;
        int64_t x_127325 = ((int64_t *) mem_119882.mem)[gtid_118321 *
                                                        t_n_m_112861 +
                                                        gtid_118325];
        float x_127326 = ((float *) mem_119886.mem)[gtid_118321 * t_n_m_112861 +
                                                    gtid_118325];
        int64_t min_arg_127327 = mul64(t_jump_112811, gtid_118325);
        int64_t min_res_127328 = smin64(i_112880, min_arg_127327);
        float defunc_0_f_res_127329 = sitofp_i64_f32(min_res_127328);
        int64_t flat_tid_118326 = (int64_t) 0;
        int32_t num_tasks_127699;
        struct futhark_mc_task_128960 futhark_mc_task_128960;
        
        futhark_mc_task_128960.ctx = ctx;
        futhark_mc_task_128960.free_n_112804 = n_112804;
        futhark_mc_task_128960.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128960.free_gtid_118321 = gtid_118321;
        futhark_mc_task_128960.free_x_118444 = x_118444;
        futhark_mc_task_128960.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128960.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128960.free_x_127325 = x_127325;
        futhark_mc_task_128960.free_x_127326 = x_127326;
        futhark_mc_task_128960.free_defunc_0_f_res_127329 =
            defunc_0_f_res_127329;
        futhark_mc_task_128960.free_mem_127330 = mem_127330;
        futhark_mc_task_128960.free_mem_127331 = mem_127331;
        
        struct scheduler_segop futhark_mc_task_128960_task;
        
        futhark_mc_task_128960_task.args = &futhark_mc_task_128960;
        futhark_mc_task_128960_task.top_level_fn =
            futhark_mc_segmap_task_128961;
        futhark_mc_task_128960_task.name = "futhark_mc_segmap_task_128961";
        futhark_mc_task_128960_task.iterations = t_window_112807;
        futhark_mc_task_128960_task.task_time =
            &ctx->futhark_mc_segmap_task_128961_total_time;
        futhark_mc_task_128960_task.task_iter =
            &ctx->futhark_mc_segmap_task_128961_total_iter;
        futhark_mc_task_128960_task.sched = STATIC;
        futhark_mc_task_128960_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128961_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128960_task);
        
        if (futhark_mc_segmap_task_128961_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float defunc_2_reduce_res_127353;
        float defunc_2_reduce_res_127354;
        float defunc_2_reduce_res_127355;
        float defunc_2_reduce_res_127356;
        float defunc_2_reduce_res_127357;
        int64_t flat_tid_118328 = (int64_t) 0;
        int32_t num_tasks_127708;
        struct futhark_mc_task_128964 futhark_mc_task_128964;
        
        futhark_mc_task_128964.ctx = ctx;
        futhark_mc_task_128964.free_mem_127330 = mem_127330;
        futhark_mc_task_128964.free_mem_127331 = mem_127331;
        futhark_mc_task_128964.retval_defunc_2_reduce_res_127353 =
            &defunc_2_reduce_res_127353;
        futhark_mc_task_128964.retval_defunc_2_reduce_res_127354 =
            &defunc_2_reduce_res_127354;
        futhark_mc_task_128964.retval_defunc_2_reduce_res_127355 =
            &defunc_2_reduce_res_127355;
        futhark_mc_task_128964.retval_defunc_2_reduce_res_127356 =
            &defunc_2_reduce_res_127356;
        futhark_mc_task_128964.retval_defunc_2_reduce_res_127357 =
            &defunc_2_reduce_res_127357;
        futhark_mc_task_128964.retval_mem_127351 = mem_127351;
        futhark_mc_task_128964.retval_mem_127352 = mem_127352;
        
        struct scheduler_segop futhark_mc_task_128964_task;
        
        futhark_mc_task_128964_task.args = &futhark_mc_task_128964;
        futhark_mc_task_128964_task.top_level_fn =
            futhark_mc_segred_task_128965;
        futhark_mc_task_128964_task.name = "futhark_mc_segred_task_128965";
        futhark_mc_task_128964_task.iterations = t_window_112807;
        futhark_mc_task_128964_task.task_time =
            &ctx->futhark_mc_segred_task_128965_total_time;
        futhark_mc_task_128964_task.task_iter =
            &ctx->futhark_mc_segred_task_128965_total_iter;
        futhark_mc_task_128964_task.sched = STATIC;
        futhark_mc_task_128964_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128965_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128964_task);
        
        if (futhark_mc_segred_task_128965_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float x_127381 = defunc_2_reduce_res_127355 *
              defunc_2_reduce_res_127357;
        float y_127382 = defunc_2_reduce_res_127356 *
              defunc_2_reduce_res_127356;
        float a12_127383 = x_127381 - y_127382;
        float x_127384 = defunc_2_reduce_res_127355 *
              defunc_2_reduce_res_127356;
        float y_127385 = defunc_2_reduce_res_127354 *
              defunc_2_reduce_res_127357;
        float b12_127386 = x_127384 - y_127385;
        float x_127387 = defunc_2_reduce_res_127354 *
              defunc_2_reduce_res_127356;
        float y_127388 = defunc_2_reduce_res_127355 *
              defunc_2_reduce_res_127355;
        float c12_127389 = x_127387 - y_127388;
        float x_127390 = defunc_2_reduce_res_127353 *
              defunc_2_reduce_res_127357;
        float b2_127391 = x_127390 - y_127388;
        float x_127392 = defunc_2_reduce_res_127354 *
              defunc_2_reduce_res_127355;
        float y_127393 = defunc_2_reduce_res_127353 *
              defunc_2_reduce_res_127356;
        float c2_127394 = x_127392 - y_127393;
        float x_127395 = defunc_2_reduce_res_127353 * a12_127383;
        float y_127396 = defunc_2_reduce_res_127354 * b12_127386;
        float x_127397 = x_127395 + y_127396;
        float y_127398 = defunc_2_reduce_res_127355 * c12_127389;
        float y_127399 = x_127397 + y_127398;
        float det_127400 = 1.0F / y_127399;
        float a12_127401 = a12_127383 * det_127400;
        float b12_127402 = b12_127386 * det_127400;
        float c12_127403 = c12_127389 * det_127400;
        float b2_127404 = b2_127391 * det_127400;
        float c2_127405 = c2_127394 * det_127400;
        float defunc_2_reduce_res_127406;
        float defunc_2_reduce_res_127407;
        int64_t flat_tid_118330 = (int64_t) 0;
        int32_t num_tasks_127741;
        struct futhark_mc_task_128973 futhark_mc_task_128973;
        
        futhark_mc_task_128973.ctx = ctx;
        futhark_mc_task_128973.free_n_112804 = n_112804;
        futhark_mc_task_128973.free_gtid_118321 = gtid_118321;
        futhark_mc_task_128973.free_x_118444 = x_118444;
        futhark_mc_task_128973.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128973.free_x_127325 = x_127325;
        futhark_mc_task_128973.free_mem_127331 = mem_127331;
        futhark_mc_task_128973.free_mem_127351 = mem_127351;
        futhark_mc_task_128973.free_mem_127352 = mem_127352;
        futhark_mc_task_128973.free_a12_127401 = a12_127401;
        futhark_mc_task_128973.free_b12_127402 = b12_127402;
        futhark_mc_task_128973.free_c12_127403 = c12_127403;
        futhark_mc_task_128973.free_b2_127404 = b2_127404;
        futhark_mc_task_128973.free_c2_127405 = c2_127405;
        futhark_mc_task_128973.retval_defunc_2_reduce_res_127406 =
            &defunc_2_reduce_res_127406;
        futhark_mc_task_128973.retval_defunc_2_reduce_res_127407 =
            &defunc_2_reduce_res_127407;
        
        struct scheduler_segop futhark_mc_task_128973_task;
        
        futhark_mc_task_128973_task.args = &futhark_mc_task_128973;
        futhark_mc_task_128973_task.top_level_fn =
            futhark_mc_segred_task_128974;
        futhark_mc_task_128973_task.name = "futhark_mc_segred_task_128974";
        futhark_mc_task_128973_task.iterations = t_window_112807;
        futhark_mc_task_128973_task.task_time =
            &ctx->futhark_mc_segred_task_128974_total_time;
        futhark_mc_task_128973_task.task_iter =
            &ctx->futhark_mc_segred_task_128974_total_iter;
        futhark_mc_task_128973_task.sched = STATIC;
        futhark_mc_task_128973_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_128974_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128973_task);
        
        if (futhark_mc_segred_task_128974_err != 0) {
            err = 1;
            goto cleanup;
        }
        ((float *) mem_121003.mem)[gtid_118325] = defunc_2_reduce_res_127406;
        ((float *) mem_121006.mem)[gtid_118325] = defunc_2_reduce_res_127407;
    }
    
  cleanup:
    { }
    free(mem_127330);
    free(mem_127331);
    free(mem_127351);
    free(mem_127352);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128955_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128955_end -
                 futhark_mc_segmap_parloop_128955_start;
        
        ctx->futhark_mc_segmap_parloop_128955_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128955_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128955_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128953(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118324 = tid;
    int num_tasks_127551 = info.nsubtasks;
    struct futhark_mc_task_128945 *futhark_mc_task_128945 =
                                  (struct futhark_mc_task_128945 *) args;
    struct futhark_context *ctx = futhark_mc_task_128945->ctx;
    uint64_t futhark_mc_segmap_nested_task_128953_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128953_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128945->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128945->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128945->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128945->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128945->free_i_112880;
    int64_t gtid_118321 = futhark_mc_task_128945->free_gtid_118321;
    int64_t x_118444 = futhark_mc_task_128945->free_x_118444;
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128945->free_mem_119718,
                                  .size =0, .references =NULL};
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128945->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128945->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128945->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128945->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 = futhark_mc_task_128945->free_bytes_120929;
    struct memblock mem_121003 = {.desc ="mem_121003", .mem =
                                  futhark_mc_task_128945->free_mem_121003,
                                  .size =0, .references =NULL};
    struct memblock mem_121006 = {.desc ="mem_121006", .mem =
                                  futhark_mc_task_128945->free_mem_121006,
                                  .size =0, .references =NULL};
    int64_t iter_127633;
    struct futhark_mc_segmap_parloop_struct_128954
    futhark_mc_segmap_parloop_struct_128954;
    
    futhark_mc_segmap_parloop_struct_128954.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128954.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128954.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128954.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128954.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128954.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128954.free_gtid_118321 = gtid_118321;
    futhark_mc_segmap_parloop_struct_128954.free_x_118444 = x_118444;
    futhark_mc_segmap_parloop_struct_128954.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128954.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128954.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128954.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128954.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128954.free_bytes_120929 = bytes_120929;
    futhark_mc_segmap_parloop_struct_128954.free_mem_121003 = mem_121003.mem;
    futhark_mc_segmap_parloop_struct_128954.free_mem_121006 = mem_121006.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128955_task;
    
    futhark_mc_segmap_parloop_128955_task.name =
        "futhark_mc_segmap_parloop_128955";
    futhark_mc_segmap_parloop_128955_task.fn = futhark_mc_segmap_parloop_128955;
    futhark_mc_segmap_parloop_128955_task.args =
        &futhark_mc_segmap_parloop_struct_128954;
    futhark_mc_segmap_parloop_128955_task.iterations = iterations;
    futhark_mc_segmap_parloop_128955_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128955_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128955_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128955_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128955_task);
    
    if (futhark_mc_segmap_parloop_128955_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128955_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128955_total_end -
                 futhark_mc_segmap_parloop_128955_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128955_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128955_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128955_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128953_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128953_end -
                 futhark_mc_segmap_nested_task_128953_start;
        
        ctx->futhark_mc_segmap_nested_task_128953_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128953_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128953_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128942(void *args, int64_t start,
                                            int64_t end, int flat_tid_118320,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128941
    *futhark_mc_segmap_parloop_struct_128941 =
    (struct futhark_mc_segmap_parloop_struct_128941 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128941->ctx;
    uint64_t futhark_mc_segmap_parloop_128942_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128942_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128941->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128941->free_n_112804;
    int64_t t_window_112807 =
            futhark_mc_segmap_parloop_struct_128941->free_t_window_112807;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128941->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128941->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128941->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 =
            futhark_mc_segmap_parloop_struct_128941->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 =
            futhark_mc_segmap_parloop_struct_128941->free_bytes_120929;
    struct memblock mem_121100 = {.desc ="mem_121100", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_121100,
                                  .size =0, .references =NULL};
    struct memblock mem_121104 = {.desc ="mem_121104", .mem =
                                  futhark_mc_segmap_parloop_struct_128941->free_mem_121104,
                                  .size =0, .references =NULL};
    size_t mem_121003_cached_sizze_128943 = 0;
    char *mem_121003 = NULL;
    size_t mem_121006_cached_sizze_128944 = 0;
    char *mem_121006 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127324 = start;
    
    if (mem_121003_cached_sizze_128943 < (size_t) bytes_119828) {
        mem_121003 = realloc(mem_121003, bytes_119828);
        mem_121003_cached_sizze_128943 = bytes_119828;
    }
    if (mem_121006_cached_sizze_128944 < (size_t) bytes_119828) {
        mem_121006 = realloc(mem_121006, bytes_119828);
        mem_121006_cached_sizze_128944 = bytes_119828;
    }
    for (; iter_127324 < end; iter_127324++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127549 = m_112803;
        int64_t gtid_118321 = iter_127324;
        int64_t remnant_127550 = iter_127324 - gtid_118321;
        int64_t x_118444 = ((int64_t *) mem_119696.mem)[gtid_118321];
        int64_t flat_tid_118322 = (int64_t) 0;
        int32_t num_tasks_127551;
        int64_t flat_tid_118324 = (int64_t) 0;
        struct futhark_mc_task_128945 futhark_mc_task_128945;
        
        futhark_mc_task_128945.ctx = ctx;
        futhark_mc_task_128945.free_n_112804 = n_112804;
        futhark_mc_task_128945.free_t_window_112807 = t_window_112807;
        futhark_mc_task_128945.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128945.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128945.free_i_112880 = i_112880;
        futhark_mc_task_128945.free_gtid_118321 = gtid_118321;
        futhark_mc_task_128945.free_x_118444 = x_118444;
        futhark_mc_task_128945.free_mem_119718 = mem_119718.mem;
        futhark_mc_task_128945.free_mem_119882 = mem_119882.mem;
        futhark_mc_task_128945.free_mem_119886 = mem_119886.mem;
        futhark_mc_task_128945.free_mem_120633 = mem_120633.mem;
        futhark_mc_task_128945.free_mem_120637 = mem_120637.mem;
        futhark_mc_task_128945.free_bytes_120929 = bytes_120929;
        futhark_mc_task_128945.free_mem_121003 = mem_121003;
        futhark_mc_task_128945.free_mem_121006 = mem_121006;
        
        struct scheduler_segop futhark_mc_task_128945_task;
        
        futhark_mc_task_128945_task.args = &futhark_mc_task_128945;
        futhark_mc_task_128945_task.top_level_fn =
            futhark_mc_segmap_task_128946;
        futhark_mc_task_128945_task.name = "futhark_mc_segmap_task_128946";
        futhark_mc_task_128945_task.iterations = t_n_m_112861;
        futhark_mc_task_128945_task.task_time =
            &ctx->futhark_mc_segmap_task_128946_total_time;
        futhark_mc_task_128945_task.task_iter =
            &ctx->futhark_mc_segmap_task_128946_total_iter;
        futhark_mc_task_128945_task.sched = STATIC;
        futhark_mc_task_128945_task.nested_fn =
            futhark_mc_segmap_nested_task_128953;
        
        int futhark_mc_segmap_task_128946_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128945_task);
        
        if (futhark_mc_segmap_task_128946_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121100.mem + gtid_118321 * t_n_m_112861 * (int64_t) 4,
                mem_121003 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
        memmove(mem_121104.mem + gtid_118321 * t_n_m_112861 * (int64_t) 4,
                mem_121006 + (int64_t) 0, t_n_m_112861 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121003);
    free(mem_121006);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128942_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128942_end -
                 futhark_mc_segmap_parloop_128942_start;
        
        ctx->futhark_mc_segmap_parloop_128942_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128942_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128942_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128940(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118320 = tid;
    int num_tasks_127190 = info.nsubtasks;
    struct futhark_mc_task_128930 *futhark_mc_task_128930 =
                                  (struct futhark_mc_task_128930 *) args;
    struct futhark_context *ctx = futhark_mc_task_128930->ctx;
    uint64_t futhark_mc_segmap_nested_task_128940_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128940_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128930->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128930->free_n_112804;
    int64_t t_window_112807 = futhark_mc_task_128930->free_t_window_112807;
    int64_t t_jump_112811 = futhark_mc_task_128930->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128930->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128930->free_i_112880;
    struct memblock mem_119696 = {.desc ="mem_119696", .mem =
                                  futhark_mc_task_128930->free_mem_119696,
                                  .size =0, .references =NULL};
    struct memblock mem_119718 = {.desc ="mem_119718", .mem =
                                  futhark_mc_task_128930->free_mem_119718,
                                  .size =0, .references =NULL};
    int64_t bytes_119828 = futhark_mc_task_128930->free_bytes_119828;
    struct memblock mem_119882 = {.desc ="mem_119882", .mem =
                                  futhark_mc_task_128930->free_mem_119882,
                                  .size =0, .references =NULL};
    struct memblock mem_119886 = {.desc ="mem_119886", .mem =
                                  futhark_mc_task_128930->free_mem_119886,
                                  .size =0, .references =NULL};
    struct memblock mem_120633 = {.desc ="mem_120633", .mem =
                                  futhark_mc_task_128930->free_mem_120633,
                                  .size =0, .references =NULL};
    struct memblock mem_120637 = {.desc ="mem_120637", .mem =
                                  futhark_mc_task_128930->free_mem_120637,
                                  .size =0, .references =NULL};
    int64_t bytes_120929 = futhark_mc_task_128930->free_bytes_120929;
    struct memblock mem_121100 = {.desc ="mem_121100", .mem =
                                  futhark_mc_task_128930->free_mem_121100,
                                  .size =0, .references =NULL};
    struct memblock mem_121104 = {.desc ="mem_121104", .mem =
                                  futhark_mc_task_128930->free_mem_121104,
                                  .size =0, .references =NULL};
    int64_t iter_127324;
    struct futhark_mc_segmap_parloop_struct_128941
    futhark_mc_segmap_parloop_struct_128941;
    
    futhark_mc_segmap_parloop_struct_128941.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128941.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128941.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128941.free_t_window_112807 =
        t_window_112807;
    futhark_mc_segmap_parloop_struct_128941.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128941.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128941.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128941.free_mem_119696 = mem_119696.mem;
    futhark_mc_segmap_parloop_struct_128941.free_mem_119718 = mem_119718.mem;
    futhark_mc_segmap_parloop_struct_128941.free_bytes_119828 = bytes_119828;
    futhark_mc_segmap_parloop_struct_128941.free_mem_119882 = mem_119882.mem;
    futhark_mc_segmap_parloop_struct_128941.free_mem_119886 = mem_119886.mem;
    futhark_mc_segmap_parloop_struct_128941.free_mem_120633 = mem_120633.mem;
    futhark_mc_segmap_parloop_struct_128941.free_mem_120637 = mem_120637.mem;
    futhark_mc_segmap_parloop_struct_128941.free_bytes_120929 = bytes_120929;
    futhark_mc_segmap_parloop_struct_128941.free_mem_121100 = mem_121100.mem;
    futhark_mc_segmap_parloop_struct_128941.free_mem_121104 = mem_121104.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128942_task;
    
    futhark_mc_segmap_parloop_128942_task.name =
        "futhark_mc_segmap_parloop_128942";
    futhark_mc_segmap_parloop_128942_task.fn = futhark_mc_segmap_parloop_128942;
    futhark_mc_segmap_parloop_128942_task.args =
        &futhark_mc_segmap_parloop_struct_128941;
    futhark_mc_segmap_parloop_128942_task.iterations = iterations;
    futhark_mc_segmap_parloop_128942_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128942_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128942_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128942_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128942_task);
    
    if (futhark_mc_segmap_parloop_128942_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128942_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128942_total_end -
                 futhark_mc_segmap_parloop_128942_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128942_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128942_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128942_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128940_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128940_end -
                 futhark_mc_segmap_nested_task_128940_start;
        
        ctx->futhark_mc_segmap_nested_task_128940_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128940_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128940_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128979 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_y_114705;
    int64_t free_bytes_119697;
    char *free_ext_mem_121109;
    char *free_ext_mem_121110;
    char *free_mem_121132;
};
struct futhark_mc_segmap_parloop_struct_128981 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_y_114705;
    int64_t free_bytes_119697;
    char *free_ext_mem_121109;
    char *free_ext_mem_121110;
    char *free_mem_121132;
};
static int futhark_mc_segmap_parloop_128982(void *args, int64_t start,
                                            int64_t end, int flat_tid_118661,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128981
    *futhark_mc_segmap_parloop_struct_128981 =
    (struct futhark_mc_segmap_parloop_struct_128981 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128981->ctx;
    uint64_t futhark_mc_segmap_parloop_128982_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128982_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128981->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128981->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128981->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128981->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128981->free_i_112880;
    int64_t y_114705 = futhark_mc_segmap_parloop_struct_128981->free_y_114705;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128981->free_bytes_119697;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_segmap_parloop_struct_128981->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_segmap_parloop_struct_128981->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121132 = {.desc ="mem_121132", .mem =
                                  futhark_mc_segmap_parloop_struct_128981->free_mem_121132,
                                  .size =0, .references =NULL};
    size_t mem_121116_cached_sizze_128983 = 0;
    char *mem_121116 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127757 = start;
    
    if (mem_121116_cached_sizze_128983 < (size_t) bytes_119697) {
        mem_121116 = realloc(mem_121116, bytes_119697);
        mem_121116_cached_sizze_128983 = bytes_119697;
    }
    for (; iter_127757 < end; iter_127757++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127807 = m_112803;
        int64_t gtid_118662 = iter_127757;
        int64_t remnant_127808 = iter_127757 - gtid_118662;
        
        for (int64_t i_127758 = 0; i_127758 < n_112804; i_127758++) {
            int64_t m_v_127760 = sdiv64(i_127758, t_jump_112811);
            bool cond_127761 = m_v_127760 == y_114705;
            int64_t j_127762;
            
            if (cond_127761) {
                int64_t j_t_res_127763 = sub64(m_v_127760, (int64_t) 1);
                
                j_127762 = j_t_res_127763;
            } else {
                j_127762 = m_v_127760;
            }
            
            int64_t min_arg_127764 = mul64(t_jump_112811, j_127762);
            int64_t min_res_127765 = smin64(i_112880, min_arg_127764);
            int64_t defunc_0_m_fun_arg_127766 = add64((int64_t) 1, j_127762);
            int64_t min_arg_127767 = mul64(t_jump_112811,
                                           defunc_0_m_fun_arg_127766);
            int64_t min_res_127768 = smin64(i_112880, min_arg_127767);
            int64_t i64_arg_127769 = sub64(min_res_127768, min_res_127765);
            float i64_res_127770 = sitofp_i64_f32(i64_arg_127769);
            int64_t i64_arg_127771 = sub64(i_127758, min_res_127765);
            float i64_res_127772 = sitofp_i64_f32(i64_arg_127771);
            float u_127773 = i64_res_127772 / i64_res_127770;
            float u2_127774 = u_127773 * u_127773;
            float u3_127775 = u_127773 * u2_127774;
            float x_127776 = 2.0F * u3_127775;
            float y_127777 = 3.0F * u2_127774;
            float x_127778 = x_127776 - y_127777;
            float x_127779 = 1.0F + x_127778;
            bool x_127780 = sle64((int64_t) 0, j_127762);
            bool y_127781 = slt64(j_127762, t_n_m_112861);
            bool bounds_check_127782 = x_127780 && y_127781;
            bool index_certs_127783;
            
            if (!bounds_check_127782) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) j_127762,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_112861, "].",
                              "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127784 = ((float *) ext_mem_121110.mem)[gtid_118662 *
                                                            t_n_m_112861 +
                                                            j_127762];
            float x_127785 = x_127779 * y_127784;
            float x_127786 = y_127777 - x_127776;
            bool x_127787 = sle64((int64_t) 0, defunc_0_m_fun_arg_127766);
            bool y_127788 = slt64(defunc_0_m_fun_arg_127766, t_n_m_112861);
            bool bounds_check_127789 = x_127787 && y_127788;
            bool index_certs_127790;
            
            if (!bounds_check_127789) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) defunc_0_m_fun_arg_127766,
                              "] out of bounds for array of shape [",
                              (long long) t_n_m_112861, "].",
                              "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float y_127791 = ((float *) ext_mem_121110.mem)[gtid_118662 *
                                                            t_n_m_112861 +
                                                            defunc_0_m_fun_arg_127766];
            float y_127792 = x_127786 * y_127791;
            float x_127793 = x_127785 + y_127792;
            float y_127794 = 2.0F * u2_127774;
            float x_127795 = u3_127775 - y_127794;
            float x_127796 = u_127773 + x_127795;
            float y_127797 = ((float *) ext_mem_121109.mem)[gtid_118662 *
                                                            t_n_m_112861 +
                                                            j_127762];
            float x_127798 = x_127796 * y_127797;
            float y_127799 = i64_res_127770 * x_127798;
            float x_127800 = x_127793 + y_127799;
            float x_127801 = u3_127775 - u2_127774;
            float y_127802 = ((float *) ext_mem_121109.mem)[gtid_118662 *
                                                            t_n_m_112861 +
                                                            defunc_0_m_fun_arg_127766];
            float x_127803 = x_127801 * y_127802;
            float y_127804 = i64_res_127770 * x_127803;
            float defunc_0_f_res_127805 = x_127800 + y_127804;
            
            ((float *) mem_121116)[i_127758] = defunc_0_f_res_127805;
        }
        memmove(mem_121132.mem + gtid_118662 * n_112804 * (int64_t) 4,
                mem_121116 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121116);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128982_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128982_end -
                 futhark_mc_segmap_parloop_128982_start;
        
        ctx->futhark_mc_segmap_parloop_128982_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128982_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128982_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128980(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118661 = tid;
    int num_tasks_127756 = info.nsubtasks;
    struct futhark_mc_task_128979 *futhark_mc_task_128979 =
                                  (struct futhark_mc_task_128979 *) args;
    struct futhark_context *ctx = futhark_mc_task_128979->ctx;
    uint64_t futhark_mc_segmap_task_128980_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128980_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128979->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128979->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128979->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128979->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128979->free_i_112880;
    int64_t y_114705 = futhark_mc_task_128979->free_y_114705;
    int64_t bytes_119697 = futhark_mc_task_128979->free_bytes_119697;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_task_128979->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_task_128979->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121132 = {.desc ="mem_121132", .mem =
                                  futhark_mc_task_128979->free_mem_121132,
                                  .size =0, .references =NULL};
    int64_t iter_127757;
    struct futhark_mc_segmap_parloop_struct_128981
    futhark_mc_segmap_parloop_struct_128981;
    
    futhark_mc_segmap_parloop_struct_128981.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128981.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128981.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128981.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128981.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128981.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128981.free_y_114705 = y_114705;
    futhark_mc_segmap_parloop_struct_128981.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128981.free_ext_mem_121109 =
        ext_mem_121109.mem;
    futhark_mc_segmap_parloop_struct_128981.free_ext_mem_121110 =
        ext_mem_121110.mem;
    futhark_mc_segmap_parloop_struct_128981.free_mem_121132 = mem_121132.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128982_task;
    
    futhark_mc_segmap_parloop_128982_task.name =
        "futhark_mc_segmap_parloop_128982";
    futhark_mc_segmap_parloop_128982_task.fn = futhark_mc_segmap_parloop_128982;
    futhark_mc_segmap_parloop_128982_task.args =
        &futhark_mc_segmap_parloop_struct_128981;
    futhark_mc_segmap_parloop_128982_task.iterations = iterations;
    futhark_mc_segmap_parloop_128982_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128982_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128982_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128982_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128982_task);
    
    if (futhark_mc_segmap_parloop_128982_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128982_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128982_total_end -
                 futhark_mc_segmap_parloop_128982_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128982_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128982_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128982_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128980_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128980_end -
                 futhark_mc_segmap_task_128980_start;
        
        ctx->futhark_mc_segmap_task_128980_runs[tid]++;
        ctx->futhark_mc_segmap_task_128980_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128980_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128985 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_y_114705;
    int64_t free_bytes_119697;
    char *free_ext_mem_121109;
    char *free_ext_mem_121110;
    char *free_mem_121132;
};
struct futhark_mc_task_128988 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_y_114705;
    int64_t free_gtid_118664;
    char *free_ext_mem_121109;
    char *free_ext_mem_121110;
    char *free_mem_121113;
};
struct futhark_mc_segmap_parloop_struct_128990 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_t_jump_112811;
    int64_t free_t_n_m_112861;
    int64_t free_i_112880;
    int64_t free_y_114705;
    int64_t free_gtid_118664;
    char *free_ext_mem_121109;
    char *free_ext_mem_121110;
    char *free_mem_121113;
};
static int futhark_mc_segmap_parloop_128991(void *args, int64_t start,
                                            int64_t end, int flat_tid_118665,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128990
    *futhark_mc_segmap_parloop_struct_128990 =
    (struct futhark_mc_segmap_parloop_struct_128990 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128990->ctx;
    uint64_t futhark_mc_segmap_parloop_128991_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128991_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128990->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128990->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128990->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128990->free_i_112880;
    int64_t y_114705 = futhark_mc_segmap_parloop_struct_128990->free_y_114705;
    int64_t gtid_118664 =
            futhark_mc_segmap_parloop_struct_128990->free_gtid_118664;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_segmap_parloop_struct_128990->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_segmap_parloop_struct_128990->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121113 = {.desc ="mem_121113", .mem =
                                  futhark_mc_segmap_parloop_struct_128990->free_mem_121113,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127860 = start;
    
    for (; iter_127860 < end; iter_127860++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127862 = n_112804;
        int64_t gtid_118666 = iter_127860;
        int64_t remnant_127863 = iter_127860 - gtid_118666;
        int64_t m_v_127811 = sdiv64(gtid_118666, t_jump_112811);
        bool cond_127812 = m_v_127811 == y_114705;
        int64_t j_127813;
        
        if (cond_127812) {
            int64_t j_t_res_127861 = sub64(m_v_127811, (int64_t) 1);
            
            j_127813 = j_t_res_127861;
        } else {
            j_127813 = m_v_127811;
        }
        
        int64_t min_arg_127815 = mul64(t_jump_112811, j_127813);
        int64_t min_res_127816 = smin64(i_112880, min_arg_127815);
        int64_t defunc_0_m_fun_arg_127817 = add64((int64_t) 1, j_127813);
        int64_t min_arg_127818 = mul64(t_jump_112811,
                                       defunc_0_m_fun_arg_127817);
        int64_t min_res_127819 = smin64(i_112880, min_arg_127818);
        int64_t i64_arg_127820 = sub64(min_res_127819, min_res_127816);
        float i64_res_127821 = sitofp_i64_f32(i64_arg_127820);
        int64_t i64_arg_127822 = sub64(gtid_118666, min_res_127816);
        float i64_res_127823 = sitofp_i64_f32(i64_arg_127822);
        float u_127824 = i64_res_127823 / i64_res_127821;
        float u2_127825 = u_127824 * u_127824;
        float u3_127826 = u_127824 * u2_127825;
        float x_127827 = 2.0F * u3_127826;
        float y_127828 = 3.0F * u2_127825;
        float x_127829 = x_127827 - y_127828;
        float x_127830 = 1.0F + x_127829;
        bool x_127831 = sle64((int64_t) 0, j_127813);
        bool y_127832 = slt64(j_127813, t_n_m_112861);
        bool bounds_check_127833 = x_127831 && y_127832;
        bool index_certs_127834;
        
        if (!bounds_check_127833) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [", (long long) j_127813,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_112861, "].",
                                   "-> #0  loess.fut:482:41-47\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127835 = ((float *) ext_mem_121110.mem)[gtid_118664 *
                                                        t_n_m_112861 +
                                                        j_127813];
        float x_127836 = x_127830 * y_127835;
        float x_127837 = y_127828 - x_127827;
        bool x_127838 = sle64((int64_t) 0, defunc_0_m_fun_arg_127817);
        bool y_127839 = slt64(defunc_0_m_fun_arg_127817, t_n_m_112861);
        bool bounds_check_127840 = x_127838 && y_127839;
        bool index_certs_127841;
        
        if (!bounds_check_127840) {
            ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                   "Index [",
                                   (long long) defunc_0_m_fun_arg_127817,
                                   "] out of bounds for array of shape [",
                                   (long long) t_n_m_112861, "].",
                                   "-> #0  loess.fut:483:41-51\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
            return 1;
        }
        
        float y_127842 = ((float *) ext_mem_121110.mem)[gtid_118664 *
                                                        t_n_m_112861 +
                                                        defunc_0_m_fun_arg_127817];
        float y_127843 = x_127837 * y_127842;
        float x_127844 = x_127836 + y_127843;
        float y_127845 = 2.0F * u2_127825;
        float x_127846 = u3_127826 - y_127845;
        float x_127847 = u_127824 + x_127846;
        float y_127848 = ((float *) ext_mem_121109.mem)[gtid_118664 *
                                                        t_n_m_112861 +
                                                        j_127813];
        float x_127849 = x_127847 * y_127848;
        float y_127850 = i64_res_127821 * x_127849;
        float x_127851 = x_127844 + y_127850;
        float x_127852 = u3_127826 - u2_127825;
        float y_127853 = ((float *) ext_mem_121109.mem)[gtid_118664 *
                                                        t_n_m_112861 +
                                                        defunc_0_m_fun_arg_127817];
        float x_127854 = x_127852 * y_127853;
        float y_127855 = i64_res_127821 * x_127854;
        float defunc_0_f_res_127856 = x_127851 + y_127855;
        
        ((float *) mem_121113.mem)[gtid_118666] = defunc_0_f_res_127856;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128991_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128991_end -
                 futhark_mc_segmap_parloop_128991_start;
        
        ctx->futhark_mc_segmap_parloop_128991_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128991_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128991_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128989(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118665 = tid;
    int num_tasks_127859 = info.nsubtasks;
    struct futhark_mc_task_128988 *futhark_mc_task_128988 =
                                  (struct futhark_mc_task_128988 *) args;
    struct futhark_context *ctx = futhark_mc_task_128988->ctx;
    uint64_t futhark_mc_segmap_task_128989_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128989_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_128988->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128988->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128988->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128988->free_i_112880;
    int64_t y_114705 = futhark_mc_task_128988->free_y_114705;
    int64_t gtid_118664 = futhark_mc_task_128988->free_gtid_118664;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_task_128988->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_task_128988->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121113 = {.desc ="mem_121113", .mem =
                                  futhark_mc_task_128988->free_mem_121113,
                                  .size =0, .references =NULL};
    int64_t iter_127860;
    struct futhark_mc_segmap_parloop_struct_128990
    futhark_mc_segmap_parloop_struct_128990;
    
    futhark_mc_segmap_parloop_struct_128990.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128990.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128990.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128990.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128990.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128990.free_y_114705 = y_114705;
    futhark_mc_segmap_parloop_struct_128990.free_gtid_118664 = gtid_118664;
    futhark_mc_segmap_parloop_struct_128990.free_ext_mem_121109 =
        ext_mem_121109.mem;
    futhark_mc_segmap_parloop_struct_128990.free_ext_mem_121110 =
        ext_mem_121110.mem;
    futhark_mc_segmap_parloop_struct_128990.free_mem_121113 = mem_121113.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128991_task;
    
    futhark_mc_segmap_parloop_128991_task.name =
        "futhark_mc_segmap_parloop_128991";
    futhark_mc_segmap_parloop_128991_task.fn = futhark_mc_segmap_parloop_128991;
    futhark_mc_segmap_parloop_128991_task.args =
        &futhark_mc_segmap_parloop_struct_128990;
    futhark_mc_segmap_parloop_128991_task.iterations = iterations;
    futhark_mc_segmap_parloop_128991_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128991_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128991_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128991_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128991_task);
    
    if (futhark_mc_segmap_parloop_128991_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128991_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128991_total_end -
                 futhark_mc_segmap_parloop_128991_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128991_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128991_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128991_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128989_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128989_end -
                 futhark_mc_segmap_task_128989_start;
        
        ctx->futhark_mc_segmap_task_128989_runs[tid]++;
        ctx->futhark_mc_segmap_task_128989_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128989_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128986(void *args, int64_t start,
                                            int64_t end, int flat_tid_118663,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128985
    *futhark_mc_segmap_parloop_struct_128985 =
    (struct futhark_mc_segmap_parloop_struct_128985 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128985->ctx;
    uint64_t futhark_mc_segmap_parloop_128986_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128986_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128985->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128985->free_n_112804;
    int64_t t_jump_112811 =
            futhark_mc_segmap_parloop_struct_128985->free_t_jump_112811;
    int64_t t_n_m_112861 =
            futhark_mc_segmap_parloop_struct_128985->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_128985->free_i_112880;
    int64_t y_114705 = futhark_mc_segmap_parloop_struct_128985->free_y_114705;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128985->free_bytes_119697;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_segmap_parloop_struct_128985->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_segmap_parloop_struct_128985->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121132 = {.desc ="mem_121132", .mem =
                                  futhark_mc_segmap_parloop_struct_128985->free_mem_121132,
                                  .size =0, .references =NULL};
    size_t mem_121113_cached_sizze_128987 = 0;
    char *mem_121113 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127810 = start;
    
    if (mem_121113_cached_sizze_128987 < (size_t) bytes_119697) {
        mem_121113 = realloc(mem_121113, bytes_119697);
        mem_121113_cached_sizze_128987 = bytes_119697;
    }
    for (; iter_127810 < end; iter_127810++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127857 = m_112803;
        int64_t gtid_118664 = iter_127810;
        int64_t remnant_127858 = iter_127810 - gtid_118664;
        int64_t flat_tid_118665 = (int64_t) 0;
        int32_t num_tasks_127859;
        struct futhark_mc_task_128988 futhark_mc_task_128988;
        
        futhark_mc_task_128988.ctx = ctx;
        futhark_mc_task_128988.free_n_112804 = n_112804;
        futhark_mc_task_128988.free_t_jump_112811 = t_jump_112811;
        futhark_mc_task_128988.free_t_n_m_112861 = t_n_m_112861;
        futhark_mc_task_128988.free_i_112880 = i_112880;
        futhark_mc_task_128988.free_y_114705 = y_114705;
        futhark_mc_task_128988.free_gtid_118664 = gtid_118664;
        futhark_mc_task_128988.free_ext_mem_121109 = ext_mem_121109.mem;
        futhark_mc_task_128988.free_ext_mem_121110 = ext_mem_121110.mem;
        futhark_mc_task_128988.free_mem_121113 = mem_121113;
        
        struct scheduler_segop futhark_mc_task_128988_task;
        
        futhark_mc_task_128988_task.args = &futhark_mc_task_128988;
        futhark_mc_task_128988_task.top_level_fn =
            futhark_mc_segmap_task_128989;
        futhark_mc_task_128988_task.name = "futhark_mc_segmap_task_128989";
        futhark_mc_task_128988_task.iterations = n_112804;
        futhark_mc_task_128988_task.task_time =
            &ctx->futhark_mc_segmap_task_128989_total_time;
        futhark_mc_task_128988_task.task_iter =
            &ctx->futhark_mc_segmap_task_128989_total_iter;
        futhark_mc_task_128988_task.sched = STATIC;
        futhark_mc_task_128988_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_128989_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_128988_task);
        
        if (futhark_mc_segmap_task_128989_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121132.mem + gtid_118664 * n_112804 * (int64_t) 4,
                mem_121113 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121113);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128986_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128986_end -
                 futhark_mc_segmap_parloop_128986_start;
        
        ctx->futhark_mc_segmap_parloop_128986_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128986_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128986_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128984(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118663 = tid;
    int num_tasks_127756 = info.nsubtasks;
    struct futhark_mc_task_128979 *futhark_mc_task_128979 =
                                  (struct futhark_mc_task_128979 *) args;
    struct futhark_context *ctx = futhark_mc_task_128979->ctx;
    uint64_t futhark_mc_segmap_nested_task_128984_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128984_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128979->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128979->free_n_112804;
    int64_t t_jump_112811 = futhark_mc_task_128979->free_t_jump_112811;
    int64_t t_n_m_112861 = futhark_mc_task_128979->free_t_n_m_112861;
    int64_t i_112880 = futhark_mc_task_128979->free_i_112880;
    int64_t y_114705 = futhark_mc_task_128979->free_y_114705;
    int64_t bytes_119697 = futhark_mc_task_128979->free_bytes_119697;
    struct memblock ext_mem_121109 = {.desc ="ext_mem_121109", .mem =
                                      futhark_mc_task_128979->free_ext_mem_121109,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121110 = {.desc ="ext_mem_121110", .mem =
                                      futhark_mc_task_128979->free_ext_mem_121110,
                                      .size =0, .references =NULL};
    struct memblock mem_121132 = {.desc ="mem_121132", .mem =
                                  futhark_mc_task_128979->free_mem_121132,
                                  .size =0, .references =NULL};
    int64_t iter_127810;
    struct futhark_mc_segmap_parloop_struct_128985
    futhark_mc_segmap_parloop_struct_128985;
    
    futhark_mc_segmap_parloop_struct_128985.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128985.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128985.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128985.free_t_jump_112811 = t_jump_112811;
    futhark_mc_segmap_parloop_struct_128985.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_segmap_parloop_struct_128985.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_128985.free_y_114705 = y_114705;
    futhark_mc_segmap_parloop_struct_128985.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128985.free_ext_mem_121109 =
        ext_mem_121109.mem;
    futhark_mc_segmap_parloop_struct_128985.free_ext_mem_121110 =
        ext_mem_121110.mem;
    futhark_mc_segmap_parloop_struct_128985.free_mem_121132 = mem_121132.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128986_task;
    
    futhark_mc_segmap_parloop_128986_task.name =
        "futhark_mc_segmap_parloop_128986";
    futhark_mc_segmap_parloop_128986_task.fn = futhark_mc_segmap_parloop_128986;
    futhark_mc_segmap_parloop_128986_task.args =
        &futhark_mc_segmap_parloop_struct_128985;
    futhark_mc_segmap_parloop_128986_task.iterations = iterations;
    futhark_mc_segmap_parloop_128986_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128986_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128986_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128986_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128986_task);
    
    if (futhark_mc_segmap_parloop_128986_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128986_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128986_total_end -
                 futhark_mc_segmap_parloop_128986_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128986_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128986_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128986_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128984_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128984_end -
                 futhark_mc_segmap_nested_task_128984_start;
        
        ctx->futhark_mc_segmap_nested_task_128984_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128984_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128984_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_128992 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121139;
    char *free_ext_mem_121140;
    int64_t free_ext_121144;
    char *free_mem_121176;
};
struct futhark_mc_segmap_parloop_struct_128994 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121139;
    char *free_ext_mem_121140;
    int64_t free_ext_121144;
    char *free_mem_121176;
};
static int futhark_mc_segmap_parloop_128995(void *args, int64_t start,
                                            int64_t end, int flat_tid_118717,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128994
    *futhark_mc_segmap_parloop_struct_128994 =
    (struct futhark_mc_segmap_parloop_struct_128994 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128994->ctx;
    uint64_t futhark_mc_segmap_parloop_128995_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128995_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128994->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128994->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128994->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128994->free_bytes_119697;
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_segmap_parloop_struct_128994->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_segmap_parloop_struct_128994->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 =
            futhark_mc_segmap_parloop_struct_128994->free_ext_121144;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_128994->free_mem_121176,
                                  .size =0, .references =NULL};
    size_t mem_121160_cached_sizze_128996 = 0;
    char *mem_121160 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127865 = start;
    
    if (mem_121160_cached_sizze_128996 < (size_t) bytes_119697) {
        mem_121160 = realloc(mem_121160, bytes_119697);
        mem_121160_cached_sizze_128996 = bytes_119697;
    }
    for (; iter_127865 < end; iter_127865++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127877 = m_112803;
        int64_t gtid_118718 = iter_127865;
        int64_t remnant_127878 = iter_127865 - gtid_118718;
        
        for (int64_t i_127866 = 0; i_127866 < n_112804; i_127866++) {
            float x_127868 = ((float *) Y_mem_119653.mem)[gtid_118718 *
                                                          n_112804 + i_127866];
            float x_127869 = ((float *) ext_mem_121140.mem)[gtid_118718 *
                                                            n_112804 +
                                                            i_127866];
            float x_127870 = ((float *) ext_mem_121139.mem)[gtid_118718 *
                                                            ext_121144 +
                                                            i_127866];
            float x_127871 = x_127868 - x_127869;
            float defunc_2_f_res_127872 = x_127871 - x_127870;
            bool isnan_res_127873;
            
            isnan_res_127873 = futrts_isnan32(defunc_2_f_res_127872);
            
            float defunc_0_f_res_127874;
            
            if (isnan_res_127873) {
                defunc_0_f_res_127874 = NAN;
            } else {
                float abs_res_127875 = (float) fabs(defunc_2_f_res_127872);
                
                defunc_0_f_res_127874 = abs_res_127875;
            }
            ((float *) mem_121160)[i_127866] = defunc_0_f_res_127874;
        }
        memmove(mem_121176.mem + gtid_118718 * n_112804 * (int64_t) 4,
                mem_121160 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121160);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128995_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128995_end -
                 futhark_mc_segmap_parloop_128995_start;
        
        ctx->futhark_mc_segmap_parloop_128995_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128995_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128995_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_128993(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118717 = tid;
    int num_tasks_127864 = info.nsubtasks;
    struct futhark_mc_task_128992 *futhark_mc_task_128992 =
                                  (struct futhark_mc_task_128992 *) args;
    struct futhark_context *ctx = futhark_mc_task_128992->ctx;
    uint64_t futhark_mc_segmap_task_128993_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_128993_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128992->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128992->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128992->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128992->free_bytes_119697;
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_task_128992->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_task_128992->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 = futhark_mc_task_128992->free_ext_121144;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_128992->free_mem_121176,
                                  .size =0, .references =NULL};
    int64_t iter_127865;
    struct futhark_mc_segmap_parloop_struct_128994
    futhark_mc_segmap_parloop_struct_128994;
    
    futhark_mc_segmap_parloop_struct_128994.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128994.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128994.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128994.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128994.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128994.free_ext_mem_121139 =
        ext_mem_121139.mem;
    futhark_mc_segmap_parloop_struct_128994.free_ext_mem_121140 =
        ext_mem_121140.mem;
    futhark_mc_segmap_parloop_struct_128994.free_ext_121144 = ext_121144;
    futhark_mc_segmap_parloop_struct_128994.free_mem_121176 = mem_121176.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128995_task;
    
    futhark_mc_segmap_parloop_128995_task.name =
        "futhark_mc_segmap_parloop_128995";
    futhark_mc_segmap_parloop_128995_task.fn = futhark_mc_segmap_parloop_128995;
    futhark_mc_segmap_parloop_128995_task.args =
        &futhark_mc_segmap_parloop_struct_128994;
    futhark_mc_segmap_parloop_128995_task.iterations = iterations;
    futhark_mc_segmap_parloop_128995_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128995_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128995_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128995_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128995_task);
    
    if (futhark_mc_segmap_parloop_128995_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128995_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128995_total_end -
                 futhark_mc_segmap_parloop_128995_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128995_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128995_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128995_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_128993_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_128993_end -
                 futhark_mc_segmap_task_128993_start;
        
        ctx->futhark_mc_segmap_task_128993_runs[tid]++;
        ctx->futhark_mc_segmap_task_128993_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_128993_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_128998 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121139;
    char *free_ext_mem_121140;
    int64_t free_ext_121144;
    char *free_mem_121176;
};
struct futhark_mc_task_129001 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118720;
    char *free_Y_mem_119653;
    char *free_ext_mem_121139;
    char *free_ext_mem_121140;
    int64_t free_ext_121144;
    char *free_mem_121157;
};
struct futhark_mc_segmap_parloop_struct_129003 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118720;
    char *free_Y_mem_119653;
    char *free_ext_mem_121139;
    char *free_ext_mem_121140;
    int64_t free_ext_121144;
    char *free_mem_121157;
};
static int futhark_mc_segmap_parloop_129004(void *args, int64_t start,
                                            int64_t end, int flat_tid_118721,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129003
    *futhark_mc_segmap_parloop_struct_129003 =
    (struct futhark_mc_segmap_parloop_struct_129003 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129003->ctx;
    uint64_t futhark_mc_segmap_parloop_129004_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129004_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129003->free_n_112804;
    int64_t gtid_118720 =
            futhark_mc_segmap_parloop_struct_129003->free_gtid_118720;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_129003->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_segmap_parloop_struct_129003->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_segmap_parloop_struct_129003->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 =
            futhark_mc_segmap_parloop_struct_129003->free_ext_121144;
    struct memblock mem_121157 = {.desc ="mem_121157", .mem =
                                  futhark_mc_segmap_parloop_struct_129003->free_mem_121157,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127892 = start;
    
    for (; iter_127892 < end; iter_127892++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127894 = n_112804;
        int64_t gtid_118722 = iter_127892;
        int64_t remnant_127895 = iter_127892 - gtid_118722;
        float x_127881 = ((float *) Y_mem_119653.mem)[gtid_118720 * n_112804 +
                                                      gtid_118722];
        float x_127882 = ((float *) ext_mem_121140.mem)[gtid_118720 * n_112804 +
                                                        gtid_118722];
        float x_127883 = ((float *) ext_mem_121139.mem)[gtid_118720 *
                                                        ext_121144 +
                                                        gtid_118722];
        float x_127884 = x_127881 - x_127882;
        float defunc_2_f_res_127885 = x_127884 - x_127883;
        bool isnan_res_127886;
        
        isnan_res_127886 = futrts_isnan32(defunc_2_f_res_127885);
        
        float defunc_0_f_res_127887;
        
        if (isnan_res_127886) {
            defunc_0_f_res_127887 = NAN;
        } else {
            float abs_res_127893 = (float) fabs(defunc_2_f_res_127885);
            
            defunc_0_f_res_127887 = abs_res_127893;
        }
        ((float *) mem_121157.mem)[gtid_118722] = defunc_0_f_res_127887;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129004_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129004_end -
                 futhark_mc_segmap_parloop_129004_start;
        
        ctx->futhark_mc_segmap_parloop_129004_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129004_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129004_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129002(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118721 = tid;
    int num_tasks_127891 = info.nsubtasks;
    struct futhark_mc_task_129001 *futhark_mc_task_129001 =
                                  (struct futhark_mc_task_129001 *) args;
    struct futhark_context *ctx = futhark_mc_task_129001->ctx;
    uint64_t futhark_mc_segmap_task_129002_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129002_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129001->free_n_112804;
    int64_t gtid_118720 = futhark_mc_task_129001->free_gtid_118720;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_129001->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_task_129001->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_task_129001->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 = futhark_mc_task_129001->free_ext_121144;
    struct memblock mem_121157 = {.desc ="mem_121157", .mem =
                                  futhark_mc_task_129001->free_mem_121157,
                                  .size =0, .references =NULL};
    int64_t iter_127892;
    struct futhark_mc_segmap_parloop_struct_129003
    futhark_mc_segmap_parloop_struct_129003;
    
    futhark_mc_segmap_parloop_struct_129003.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129003.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129003.free_gtid_118720 = gtid_118720;
    futhark_mc_segmap_parloop_struct_129003.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_129003.free_ext_mem_121139 =
        ext_mem_121139.mem;
    futhark_mc_segmap_parloop_struct_129003.free_ext_mem_121140 =
        ext_mem_121140.mem;
    futhark_mc_segmap_parloop_struct_129003.free_ext_121144 = ext_121144;
    futhark_mc_segmap_parloop_struct_129003.free_mem_121157 = mem_121157.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129004_task;
    
    futhark_mc_segmap_parloop_129004_task.name =
        "futhark_mc_segmap_parloop_129004";
    futhark_mc_segmap_parloop_129004_task.fn = futhark_mc_segmap_parloop_129004;
    futhark_mc_segmap_parloop_129004_task.args =
        &futhark_mc_segmap_parloop_struct_129003;
    futhark_mc_segmap_parloop_129004_task.iterations = iterations;
    futhark_mc_segmap_parloop_129004_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129004_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129004_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129004_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129004_task);
    
    if (futhark_mc_segmap_parloop_129004_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129004_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129004_total_end -
                 futhark_mc_segmap_parloop_129004_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129004_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129004_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129004_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129002_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129002_end -
                 futhark_mc_segmap_task_129002_start;
        
        ctx->futhark_mc_segmap_task_129002_runs[tid]++;
        ctx->futhark_mc_segmap_task_129002_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129002_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_128999(void *args, int64_t start,
                                            int64_t end, int flat_tid_118719,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_128998
    *futhark_mc_segmap_parloop_struct_128998 =
    (struct futhark_mc_segmap_parloop_struct_128998 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_128998->ctx;
    uint64_t futhark_mc_segmap_parloop_128999_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128999_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_128998->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_128998->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_128998->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_128998->free_bytes_119697;
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_segmap_parloop_struct_128998->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_segmap_parloop_struct_128998->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 =
            futhark_mc_segmap_parloop_struct_128998->free_ext_121144;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_128998->free_mem_121176,
                                  .size =0, .references =NULL};
    size_t mem_121157_cached_sizze_129000 = 0;
    char *mem_121157 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127880 = start;
    
    if (mem_121157_cached_sizze_129000 < (size_t) bytes_119697) {
        mem_121157 = realloc(mem_121157, bytes_119697);
        mem_121157_cached_sizze_129000 = bytes_119697;
    }
    for (; iter_127880 < end; iter_127880++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127889 = m_112803;
        int64_t gtid_118720 = iter_127880;
        int64_t remnant_127890 = iter_127880 - gtid_118720;
        int64_t flat_tid_118721 = (int64_t) 0;
        int32_t num_tasks_127891;
        struct futhark_mc_task_129001 futhark_mc_task_129001;
        
        futhark_mc_task_129001.ctx = ctx;
        futhark_mc_task_129001.free_n_112804 = n_112804;
        futhark_mc_task_129001.free_gtid_118720 = gtid_118720;
        futhark_mc_task_129001.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_129001.free_ext_mem_121139 = ext_mem_121139.mem;
        futhark_mc_task_129001.free_ext_mem_121140 = ext_mem_121140.mem;
        futhark_mc_task_129001.free_ext_121144 = ext_121144;
        futhark_mc_task_129001.free_mem_121157 = mem_121157;
        
        struct scheduler_segop futhark_mc_task_129001_task;
        
        futhark_mc_task_129001_task.args = &futhark_mc_task_129001;
        futhark_mc_task_129001_task.top_level_fn =
            futhark_mc_segmap_task_129002;
        futhark_mc_task_129001_task.name = "futhark_mc_segmap_task_129002";
        futhark_mc_task_129001_task.iterations = n_112804;
        futhark_mc_task_129001_task.task_time =
            &ctx->futhark_mc_segmap_task_129002_total_time;
        futhark_mc_task_129001_task.task_iter =
            &ctx->futhark_mc_segmap_task_129002_total_iter;
        futhark_mc_task_129001_task.sched = STATIC;
        futhark_mc_task_129001_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_129002_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_129001_task);
        
        if (futhark_mc_segmap_task_129002_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121176.mem + gtid_118720 * n_112804 * (int64_t) 4,
                mem_121157 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121157);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128999_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128999_end -
                 futhark_mc_segmap_parloop_128999_start;
        
        ctx->futhark_mc_segmap_parloop_128999_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_128999_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_128999_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_128997(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118719 = tid;
    int num_tasks_127864 = info.nsubtasks;
    struct futhark_mc_task_128992 *futhark_mc_task_128992 =
                                  (struct futhark_mc_task_128992 *) args;
    struct futhark_context *ctx = futhark_mc_task_128992->ctx;
    uint64_t futhark_mc_segmap_nested_task_128997_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_128997_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_128992->free_m_112803;
    int64_t n_112804 = futhark_mc_task_128992->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_128992->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_128992->free_bytes_119697;
    struct memblock ext_mem_121139 = {.desc ="ext_mem_121139", .mem =
                                      futhark_mc_task_128992->free_ext_mem_121139,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121140 = {.desc ="ext_mem_121140", .mem =
                                      futhark_mc_task_128992->free_ext_mem_121140,
                                      .size =0, .references =NULL};
    int64_t ext_121144 = futhark_mc_task_128992->free_ext_121144;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_128992->free_mem_121176,
                                  .size =0, .references =NULL};
    int64_t iter_127880;
    struct futhark_mc_segmap_parloop_struct_128998
    futhark_mc_segmap_parloop_struct_128998;
    
    futhark_mc_segmap_parloop_struct_128998.ctx = ctx;
    futhark_mc_segmap_parloop_struct_128998.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_128998.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_128998.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_128998.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_128998.free_ext_mem_121139 =
        ext_mem_121139.mem;
    futhark_mc_segmap_parloop_struct_128998.free_ext_mem_121140 =
        ext_mem_121140.mem;
    futhark_mc_segmap_parloop_struct_128998.free_ext_121144 = ext_121144;
    futhark_mc_segmap_parloop_struct_128998.free_mem_121176 = mem_121176.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_128999_task;
    
    futhark_mc_segmap_parloop_128999_task.name =
        "futhark_mc_segmap_parloop_128999";
    futhark_mc_segmap_parloop_128999_task.fn = futhark_mc_segmap_parloop_128999;
    futhark_mc_segmap_parloop_128999_task.args =
        &futhark_mc_segmap_parloop_struct_128998;
    futhark_mc_segmap_parloop_128999_task.iterations = iterations;
    futhark_mc_segmap_parloop_128999_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_128999_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_128999_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_128999_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_128999_task);
    
    if (futhark_mc_segmap_parloop_128999_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_128999_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_128999_total_end -
                 futhark_mc_segmap_parloop_128999_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128999_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128999_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_128999_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_128997_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_128997_end -
                 futhark_mc_segmap_nested_task_128997_start;
        
        ctx->futhark_mc_segmap_nested_task_128997_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_128997_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_128997_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129005 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121198;
};
struct futhark_mc_segmap_parloop_struct_129007 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121198;
};
static int futhark_mc_segmap_parloop_129008(void *args, int64_t start,
                                            int64_t end, int flat_tid_118735,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129007
    *futhark_mc_segmap_parloop_struct_129007 =
    (struct futhark_mc_segmap_parloop_struct_129007 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129007->ctx;
    uint64_t futhark_mc_segmap_parloop_129008_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129008_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129007->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129007->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_129007->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129007->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129007->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_segmap_parloop_struct_129007->free_mem_121198,
                                  .size =0, .references =NULL};
    size_t mem_121182_cached_sizze_129009 = 0;
    char *mem_121182 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127897 = start;
    
    if (mem_121182_cached_sizze_129009 < (size_t) bytes_119697) {
        mem_121182 = realloc(mem_121182, bytes_119697);
        mem_121182_cached_sizze_129009 = bytes_119697;
    }
    for (; iter_127897 < end; iter_127897++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127908 = m_112803;
        int64_t gtid_118736 = iter_127897;
        int64_t remnant_127909 = iter_127897 - gtid_118736;
        
        for (int64_t i_127898 = 0; i_127898 < n_112804; i_127898++) {
            int64_t x_127900 = ((int64_t *) mem_119693.mem)[gtid_118736 *
                                                            n_112804 +
                                                            i_127898];
            bool cond_127901 = sle64((int64_t) 0, x_127900);
            float defunc_0_f_res_127902;
            
            if (cond_127901) {
                bool y_127903 = slt64(x_127900, n_112804);
                bool bounds_check_127904 = cond_127901 && y_127903;
                bool index_certs_127905;
                
                if (!bounds_check_127904) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Index [", (long long) x_127900,
                                  "] out of bounds for array of shape [",
                                  (long long) n_112804, "].",
                                  "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                    return 1;
                }
                
                float defunc_0_f_res_t_res_127906 =
                      ((float *) mem_121176.mem)[gtid_118736 * n_112804 +
                                                 x_127900];
                
                defunc_0_f_res_127902 = defunc_0_f_res_t_res_127906;
            } else {
                defunc_0_f_res_127902 = INFINITY;
            }
            ((float *) mem_121182)[i_127898] = defunc_0_f_res_127902;
        }
        memmove(mem_121198.mem + gtid_118736 * n_112804 * (int64_t) 4,
                mem_121182 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121182);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129008_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129008_end -
                 futhark_mc_segmap_parloop_129008_start;
        
        ctx->futhark_mc_segmap_parloop_129008_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129008_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129008_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129006(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118735 = tid;
    int num_tasks_127896 = info.nsubtasks;
    struct futhark_mc_task_129005 *futhark_mc_task_129005 =
                                  (struct futhark_mc_task_129005 *) args;
    struct futhark_context *ctx = futhark_mc_task_129005->ctx;
    uint64_t futhark_mc_segmap_task_129006_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129006_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129005->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129005->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_129005->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_129005->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129005->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_task_129005->free_mem_121198,
                                  .size =0, .references =NULL};
    int64_t iter_127897;
    struct futhark_mc_segmap_parloop_struct_129007
    futhark_mc_segmap_parloop_struct_129007;
    
    futhark_mc_segmap_parloop_struct_129007.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129007.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129007.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129007.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_129007.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129007.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129007.free_mem_121198 = mem_121198.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129008_task;
    
    futhark_mc_segmap_parloop_129008_task.name =
        "futhark_mc_segmap_parloop_129008";
    futhark_mc_segmap_parloop_129008_task.fn = futhark_mc_segmap_parloop_129008;
    futhark_mc_segmap_parloop_129008_task.args =
        &futhark_mc_segmap_parloop_struct_129007;
    futhark_mc_segmap_parloop_129008_task.iterations = iterations;
    futhark_mc_segmap_parloop_129008_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129008_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129008_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129008_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129008_task);
    
    if (futhark_mc_segmap_parloop_129008_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129008_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129008_total_end -
                 futhark_mc_segmap_parloop_129008_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129008_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129008_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129008_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129006_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129006_end -
                 futhark_mc_segmap_task_129006_start;
        
        ctx->futhark_mc_segmap_task_129006_runs[tid]++;
        ctx->futhark_mc_segmap_task_129006_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129006_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_129011 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_mem_119693;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121198;
};
struct futhark_mc_task_129014 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118738;
    char *free_mem_119693;
    char *free_mem_121176;
    char *free_mem_121179;
};
struct futhark_mc_segmap_parloop_struct_129016 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118738;
    char *free_mem_119693;
    char *free_mem_121176;
    char *free_mem_121179;
};
static int futhark_mc_segmap_parloop_129017(void *args, int64_t start,
                                            int64_t end, int flat_tid_118739,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129016
    *futhark_mc_segmap_parloop_struct_129016 =
    (struct futhark_mc_segmap_parloop_struct_129016 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129016->ctx;
    uint64_t futhark_mc_segmap_parloop_129017_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129017_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129016->free_n_112804;
    int64_t gtid_118738 =
            futhark_mc_segmap_parloop_struct_129016->free_gtid_118738;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_129016->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129016->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121179 = {.desc ="mem_121179", .mem =
                                  futhark_mc_segmap_parloop_struct_129016->free_mem_121179,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_127922 = start;
    
    for (; iter_127922 < end; iter_127922++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127927 = n_112804;
        int64_t gtid_118740 = iter_127922;
        int64_t remnant_127928 = iter_127922 - gtid_118740;
        int64_t x_127912 = ((int64_t *) mem_119693.mem)[gtid_118738 * n_112804 +
                                                        gtid_118740];
        bool cond_127913 = sle64((int64_t) 0, x_127912);
        float defunc_0_f_res_127914;
        
        if (cond_127913) {
            bool y_127923 = slt64(x_127912, n_112804);
            bool bounds_check_127924 = cond_127913 && y_127923;
            bool index_certs_127925;
            
            if (!bounds_check_127924) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) x_127912,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  utils.fut:18:29-33\n   #1  utils.fut:18:3-49\n   #2  stl.fut:301:21-49\n   #3  /prelude/soacs.fut:67:19-23\n   #4  /prelude/soacs.fut:67:3-37\n   #5  stl.fut:299:13-302:35\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                return 1;
            }
            
            float defunc_0_f_res_t_res_127926 =
                  ((float *) mem_121176.mem)[gtid_118738 * n_112804 + x_127912];
            
            defunc_0_f_res_127914 = defunc_0_f_res_t_res_127926;
        } else {
            defunc_0_f_res_127914 = INFINITY;
        }
        ((float *) mem_121179.mem)[gtid_118740] = defunc_0_f_res_127914;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129017_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129017_end -
                 futhark_mc_segmap_parloop_129017_start;
        
        ctx->futhark_mc_segmap_parloop_129017_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129017_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129017_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129015(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118739 = tid;
    int num_tasks_127921 = info.nsubtasks;
    struct futhark_mc_task_129014 *futhark_mc_task_129014 =
                                  (struct futhark_mc_task_129014 *) args;
    struct futhark_context *ctx = futhark_mc_task_129014->ctx;
    uint64_t futhark_mc_segmap_task_129015_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129015_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129014->free_n_112804;
    int64_t gtid_118738 = futhark_mc_task_129014->free_gtid_118738;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_129014->free_mem_119693,
                                  .size =0, .references =NULL};
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129014->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121179 = {.desc ="mem_121179", .mem =
                                  futhark_mc_task_129014->free_mem_121179,
                                  .size =0, .references =NULL};
    int64_t iter_127922;
    struct futhark_mc_segmap_parloop_struct_129016
    futhark_mc_segmap_parloop_struct_129016;
    
    futhark_mc_segmap_parloop_struct_129016.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129016.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129016.free_gtid_118738 = gtid_118738;
    futhark_mc_segmap_parloop_struct_129016.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_129016.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129016.free_mem_121179 = mem_121179.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129017_task;
    
    futhark_mc_segmap_parloop_129017_task.name =
        "futhark_mc_segmap_parloop_129017";
    futhark_mc_segmap_parloop_129017_task.fn = futhark_mc_segmap_parloop_129017;
    futhark_mc_segmap_parloop_129017_task.args =
        &futhark_mc_segmap_parloop_struct_129016;
    futhark_mc_segmap_parloop_129017_task.iterations = iterations;
    futhark_mc_segmap_parloop_129017_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129017_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129017_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129017_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129017_task);
    
    if (futhark_mc_segmap_parloop_129017_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129017_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129017_total_end -
                 futhark_mc_segmap_parloop_129017_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129017_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129017_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129017_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129015_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129015_end -
                 futhark_mc_segmap_task_129015_start;
        
        ctx->futhark_mc_segmap_task_129015_runs[tid]++;
        ctx->futhark_mc_segmap_task_129015_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129015_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_129012(void *args, int64_t start,
                                            int64_t end, int flat_tid_118737,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129011
    *futhark_mc_segmap_parloop_struct_129011 =
    (struct futhark_mc_segmap_parloop_struct_129011 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129011->ctx;
    uint64_t futhark_mc_segmap_parloop_129012_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129012_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129011->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129011->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_segmap_parloop_struct_129011->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129011->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129011->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_segmap_parloop_struct_129011->free_mem_121198,
                                  .size =0, .references =NULL};
    size_t mem_121179_cached_sizze_129013 = 0;
    char *mem_121179 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127911 = start;
    
    if (mem_121179_cached_sizze_129013 < (size_t) bytes_119697) {
        mem_121179 = realloc(mem_121179, bytes_119697);
        mem_121179_cached_sizze_129013 = bytes_119697;
    }
    for (; iter_127911 < end; iter_127911++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_127919 = m_112803;
        int64_t gtid_118738 = iter_127911;
        int64_t remnant_127920 = iter_127911 - gtid_118738;
        int64_t flat_tid_118739 = (int64_t) 0;
        int32_t num_tasks_127921;
        struct futhark_mc_task_129014 futhark_mc_task_129014;
        
        futhark_mc_task_129014.ctx = ctx;
        futhark_mc_task_129014.free_n_112804 = n_112804;
        futhark_mc_task_129014.free_gtid_118738 = gtid_118738;
        futhark_mc_task_129014.free_mem_119693 = mem_119693.mem;
        futhark_mc_task_129014.free_mem_121176 = mem_121176.mem;
        futhark_mc_task_129014.free_mem_121179 = mem_121179;
        
        struct scheduler_segop futhark_mc_task_129014_task;
        
        futhark_mc_task_129014_task.args = &futhark_mc_task_129014;
        futhark_mc_task_129014_task.top_level_fn =
            futhark_mc_segmap_task_129015;
        futhark_mc_task_129014_task.name = "futhark_mc_segmap_task_129015";
        futhark_mc_task_129014_task.iterations = n_112804;
        futhark_mc_task_129014_task.task_time =
            &ctx->futhark_mc_segmap_task_129015_total_time;
        futhark_mc_task_129014_task.task_iter =
            &ctx->futhark_mc_segmap_task_129015_total_iter;
        futhark_mc_task_129014_task.sched = STATIC;
        futhark_mc_task_129014_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_129015_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_129014_task);
        
        if (futhark_mc_segmap_task_129015_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121198.mem + gtid_118738 * n_112804 * (int64_t) 4,
                mem_121179 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121179);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129012_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129012_end -
                 futhark_mc_segmap_parloop_129012_start;
        
        ctx->futhark_mc_segmap_parloop_129012_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129012_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129012_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_129010(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118737 = tid;
    int num_tasks_127896 = info.nsubtasks;
    struct futhark_mc_task_129005 *futhark_mc_task_129005 =
                                  (struct futhark_mc_task_129005 *) args;
    struct futhark_context *ctx = futhark_mc_task_129005->ctx;
    uint64_t futhark_mc_segmap_nested_task_129010_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_129010_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129005->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129005->free_n_112804;
    struct memblock mem_119693 = {.desc ="mem_119693", .mem =
                                  futhark_mc_task_129005->free_mem_119693,
                                  .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_129005->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129005->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_task_129005->free_mem_121198,
                                  .size =0, .references =NULL};
    int64_t iter_127911;
    struct futhark_mc_segmap_parloop_struct_129011
    futhark_mc_segmap_parloop_struct_129011;
    
    futhark_mc_segmap_parloop_struct_129011.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129011.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129011.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129011.free_mem_119693 = mem_119693.mem;
    futhark_mc_segmap_parloop_struct_129011.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129011.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129011.free_mem_121198 = mem_121198.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129012_task;
    
    futhark_mc_segmap_parloop_129012_task.name =
        "futhark_mc_segmap_parloop_129012";
    futhark_mc_segmap_parloop_129012_task.fn = futhark_mc_segmap_parloop_129012;
    futhark_mc_segmap_parloop_129012_task.args =
        &futhark_mc_segmap_parloop_struct_129011;
    futhark_mc_segmap_parloop_129012_task.iterations = iterations;
    futhark_mc_segmap_parloop_129012_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129012_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129012_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129012_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129012_task);
    
    if (futhark_mc_segmap_parloop_129012_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129012_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129012_total_end -
                 futhark_mc_segmap_parloop_129012_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129012_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129012_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129012_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_129010_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_129010_end -
                 futhark_mc_segmap_nested_task_129010_start;
        
        ctx->futhark_mc_segmap_nested_task_129010_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_129010_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_129010_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129018 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    int32_t free_iters_114789;
    int64_t free_bytes_119654;
    int64_t free_bytes_119697;
    char *free_mem_121198;
    char *free_mem_121352;
    int64_t free_double_buffer_sizze_121496;
    int64_t free_double_buffer_sizze_121500;
};
struct futhark_mc_segmap_parloop_struct_129020 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    int32_t free_iters_114789;
    int64_t free_bytes_119654;
    int64_t free_bytes_119697;
    char *free_mem_121198;
    char *free_mem_121352;
    int64_t free_double_buffer_sizze_121500;
};
static int futhark_mc_segmap_parloop_129021(void *args, int64_t start,
                                            int64_t end, int flat_tid_118751,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129020
    *futhark_mc_segmap_parloop_struct_129020 =
    (struct futhark_mc_segmap_parloop_struct_129020 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129020->ctx;
    uint64_t futhark_mc_segmap_parloop_129021_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129021_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129020->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129020->free_n_112804;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_129020->free_i_112880;
    int32_t iters_114789 =
            futhark_mc_segmap_parloop_struct_129020->free_iters_114789;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_129020->free_bytes_119654;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129020->free_bytes_119697;
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_segmap_parloop_struct_129020->free_mem_121198,
                                  .size =0, .references =NULL};
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_segmap_parloop_struct_129020->free_mem_121352,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121500 =
            futhark_mc_segmap_parloop_struct_129020->free_double_buffer_sizze_121500;
    size_t mem_121256_cached_sizze_129022 = 0;
    char *mem_121256 = NULL;
    size_t mem_121259_cached_sizze_129023 = 0;
    char *mem_121259 = NULL;
    size_t mem_121262_cached_sizze_129024 = 0;
    char *mem_121262 = NULL;
    size_t mem_121265_cached_sizze_129025 = 0;
    char *mem_121265 = NULL;
    size_t mem_121268_cached_sizze_129026 = 0;
    char *mem_121268 = NULL;
    size_t mem_121331_cached_sizze_129027 = 0;
    char *mem_121331 = NULL;
    size_t double_buffer_mem_121498_cached_sizze_129028 = 0;
    char *double_buffer_mem_121498 = NULL;
    int64_t iterations = end - start;
    int64_t iter_127930 = start;
    
    if (mem_121256_cached_sizze_129022 < (size_t) bytes_119654) {
        mem_121256 = realloc(mem_121256, bytes_119654);
        mem_121256_cached_sizze_129022 = bytes_119654;
    }
    if (mem_121259_cached_sizze_129023 < (size_t) bytes_119654) {
        mem_121259 = realloc(mem_121259, bytes_119654);
        mem_121259_cached_sizze_129023 = bytes_119654;
    }
    if (mem_121262_cached_sizze_129024 < (size_t) bytes_119654) {
        mem_121262 = realloc(mem_121262, bytes_119654);
        mem_121262_cached_sizze_129024 = bytes_119654;
    }
    if (mem_121265_cached_sizze_129025 < (size_t) bytes_119654) {
        mem_121265 = realloc(mem_121265, bytes_119654);
        mem_121265_cached_sizze_129025 = bytes_119654;
    }
    if (mem_121268_cached_sizze_129026 < (size_t) bytes_119697) {
        mem_121268 = realloc(mem_121268, bytes_119697);
        mem_121268_cached_sizze_129026 = bytes_119697;
    }
    if (double_buffer_mem_121498_cached_sizze_129028 <
        (size_t) double_buffer_sizze_121500) {
        double_buffer_mem_121498 = realloc(double_buffer_mem_121498,
                                           double_buffer_sizze_121500);
        double_buffer_mem_121498_cached_sizze_129028 =
            double_buffer_sizze_121500;
    }
    if (mem_121331_cached_sizze_129027 < (size_t) bytes_119697) {
        mem_121331 = realloc(mem_121331, bytes_119697);
        mem_121331_cached_sizze_129027 = bytes_119697;
    }
    for (; iter_127930 < end; iter_127930++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128034 = m_112803;
        int64_t gtid_118752 = iter_127930;
        int64_t remnant_128035 = iter_127930 - gtid_118752;
        
        memmove(double_buffer_mem_121498 + (int64_t) 0, mem_121198.mem +
                gtid_118752 * n_112804 * (int64_t) 4, n_112804 * (int64_t) 4);
        for (int32_t i_127931 = 0; i_127931 < iters_114789; i_127931++) {
            int32_t defunc_2_radix_sort_step_arg_127933 = mul32(2, i_127931);
            int32_t defunc_0_get_bit_arg_127934 = add32(1,
                                                        defunc_2_radix_sort_step_arg_127933);
            bool cond_f_res_127935 = defunc_0_get_bit_arg_127934 == 31;
            bool cond_f_res_127936 = defunc_2_radix_sort_step_arg_127933 == 31;
            int64_t discard_127942;
            int64_t discard_127943;
            int64_t discard_127944;
            int64_t discard_127945;
            int64_t scanacc_127952;
            int64_t scanacc_127953;
            int64_t scanacc_127954;
            int64_t scanacc_127955;
            
            scanacc_127952 = (int64_t) 0;
            scanacc_127953 = (int64_t) 0;
            scanacc_127954 = (int64_t) 0;
            scanacc_127955 = (int64_t) 0;
            for (int64_t i_127951 = 0; i_127951 < n_112804; i_127951++) {
                float x_127961 = ((float *) double_buffer_mem_121498)[i_127951];
                int32_t i32_arg_127962;
                
                i32_arg_127962 = futrts_to_bits32(x_127961);
                
                int32_t unsign_arg_127963 = ashr32(i32_arg_127962,
                                                   defunc_0_get_bit_arg_127934);
                int32_t unsign_arg_127964 = 1 & unsign_arg_127963;
                int32_t unsign_arg_127965 = ashr32(i32_arg_127962, 31);
                int32_t unsign_arg_127966 = 1 & unsign_arg_127965;
                bool cond_127967 = unsign_arg_127966 == 1;
                bool x_127968 = !cond_127967;
                bool y_127969 = cond_f_res_127935 && x_127968;
                bool cond_127970 = cond_127967 || y_127969;
                int32_t defunc_1_get_bit_res_127971;
                
                if (cond_127970) {
                    int32_t defunc_1_get_bit_res_t_res_127972 = 1 ^
                            unsign_arg_127964;
                    
                    defunc_1_get_bit_res_127971 =
                        defunc_1_get_bit_res_t_res_127972;
                } else {
                    defunc_1_get_bit_res_127971 = unsign_arg_127964;
                }
                
                int32_t x_127973 = mul32(2, defunc_1_get_bit_res_127971);
                int32_t unsign_arg_127974 = ashr32(i32_arg_127962,
                                                   defunc_2_radix_sort_step_arg_127933);
                int32_t unsign_arg_127975 = 1 & unsign_arg_127974;
                bool y_127976 = cond_f_res_127936 && x_127968;
                bool cond_127977 = cond_127967 || y_127976;
                int32_t defunc_1_get_bit_res_127978;
                
                if (cond_127977) {
                    int32_t defunc_1_get_bit_res_t_res_127979 = 1 ^
                            unsign_arg_127975;
                    
                    defunc_1_get_bit_res_127978 =
                        defunc_1_get_bit_res_t_res_127979;
                } else {
                    defunc_1_get_bit_res_127978 = unsign_arg_127975;
                }
                
                int32_t defunc_0_f_res_127980 = add32(x_127973,
                                                      defunc_1_get_bit_res_127978);
                bool cond_127981 = defunc_0_f_res_127980 == 0;
                int64_t defunc_0_f_res_127982 = btoi_bool_i64(cond_127981);
                int64_t defunc_0_f_res_127983;
                int64_t defunc_0_f_res_127984;
                int64_t defunc_0_f_res_127985;
                
                if (cond_127981) {
                    defunc_0_f_res_127983 = (int64_t) 0;
                    defunc_0_f_res_127984 = (int64_t) 0;
                    defunc_0_f_res_127985 = (int64_t) 0;
                } else {
                    bool cond_127986 = defunc_0_f_res_127980 == 1;
                    int64_t defunc_0_f_res_f_res_127987 =
                            btoi_bool_i64(cond_127986);
                    int64_t defunc_0_f_res_f_res_127988;
                    int64_t defunc_0_f_res_f_res_127989;
                    
                    if (cond_127986) {
                        defunc_0_f_res_f_res_127988 = (int64_t) 0;
                        defunc_0_f_res_f_res_127989 = (int64_t) 0;
                    } else {
                        bool cond_127990 = defunc_0_f_res_127980 == 2;
                        int64_t defunc_0_f_res_f_res_f_res_127991 =
                                btoi_bool_i64(cond_127990);
                        bool cond_neg_127992 = !cond_127990;
                        int64_t defunc_0_f_res_f_res_f_res_127993 =
                                btoi_bool_i64(cond_neg_127992);
                        
                        defunc_0_f_res_f_res_127988 =
                            defunc_0_f_res_f_res_f_res_127991;
                        defunc_0_f_res_f_res_127989 =
                            defunc_0_f_res_f_res_f_res_127993;
                    }
                    defunc_0_f_res_127983 = defunc_0_f_res_f_res_127987;
                    defunc_0_f_res_127984 = defunc_0_f_res_f_res_127988;
                    defunc_0_f_res_127985 = defunc_0_f_res_f_res_127989;
                }
                
                int64_t defunc_1_op_res_127994 = add64(defunc_0_f_res_127982,
                                                       scanacc_127952);
                int64_t defunc_1_op_res_127995 = add64(defunc_0_f_res_127983,
                                                       scanacc_127953);
                int64_t defunc_1_op_res_127996 = add64(defunc_0_f_res_127984,
                                                       scanacc_127954);
                int64_t defunc_1_op_res_127997 = add64(defunc_0_f_res_127985,
                                                       scanacc_127955);
                
                ((int64_t *) mem_121256)[i_127951] = defunc_1_op_res_127994;
                ((int64_t *) mem_121259)[i_127951] = defunc_1_op_res_127995;
                ((int64_t *) mem_121262)[i_127951] = defunc_1_op_res_127996;
                ((int64_t *) mem_121265)[i_127951] = defunc_1_op_res_127997;
                ((int32_t *) mem_121268)[i_127951] = defunc_0_f_res_127980;
                
                int64_t scanacc_tmp_128037 = defunc_1_op_res_127994;
                int64_t scanacc_tmp_128038 = defunc_1_op_res_127995;
                int64_t scanacc_tmp_128039 = defunc_1_op_res_127996;
                int64_t scanacc_tmp_128040 = defunc_1_op_res_127997;
                
                scanacc_127952 = scanacc_tmp_128037;
                scanacc_127953 = scanacc_tmp_128038;
                scanacc_127954 = scanacc_tmp_128039;
                scanacc_127955 = scanacc_tmp_128040;
            }
            discard_127942 = scanacc_127952;
            discard_127943 = scanacc_127953;
            discard_127944 = scanacc_127954;
            discard_127945 = scanacc_127955;
            
            int64_t last_res_128003 = ((int64_t *) mem_121256)[i_112880];
            int64_t last_res_128004 = ((int64_t *) mem_121259)[i_112880];
            int64_t last_res_128005 = ((int64_t *) mem_121262)[i_112880];
            
            memmove(mem_121331 + (int64_t) 0, double_buffer_mem_121498 +
                    (int64_t) 0, n_112804 * (int64_t) 4);
            for (int64_t write_iter_128008 = 0; write_iter_128008 < n_112804;
                 write_iter_128008++) {
                int32_t write_iv_128010 =
                        ((int32_t *) mem_121268)[write_iter_128008];
                bool match_lit_128011 = 0 == write_iv_128010;
                int64_t defunc_1_f_res_128012;
                
                if (match_lit_128011) {
                    int64_t write_iv_128013 =
                            ((int64_t *) mem_121256)[write_iter_128008];
                    int64_t case_res_128014 = sub64(write_iv_128013,
                                                    (int64_t) 1);
                    
                    defunc_1_f_res_128012 = case_res_128014;
                } else {
                    bool match_lit_128015 = 1 == write_iv_128010;
                    int64_t x_128016;
                    
                    if (match_lit_128015) {
                        int64_t write_iv_128017 =
                                ((int64_t *) mem_121259)[write_iter_128008];
                        int64_t x_128018 = add64(last_res_128003,
                                                 write_iv_128017);
                        int64_t case_res_128019 = sub64(x_128018, (int64_t) 1);
                        
                        x_128016 = case_res_128019;
                    } else {
                        bool match_lit_128020 = 2 == write_iv_128010;
                        int64_t x_128021;
                        
                        if (match_lit_128020) {
                            int64_t write_iv_128022 =
                                    ((int64_t *) mem_121262)[write_iter_128008];
                            int64_t x_128023 = add64(last_res_128003,
                                                     last_res_128004);
                            int64_t x_128024 = add64(x_128023, write_iv_128022);
                            int64_t case_res_128025 = sub64(x_128024,
                                                            (int64_t) 1);
                            
                            x_128021 = case_res_128025;
                        } else {
                            int64_t write_iv_128026 =
                                    ((int64_t *) mem_121265)[write_iter_128008];
                            int64_t x_128027 = add64(last_res_128003,
                                                     last_res_128004);
                            int64_t x_128028 = add64(last_res_128005, x_128027);
                            int64_t x_128029 = add64(x_128028, write_iv_128026);
                            int64_t defunc_1_f_res_res_128030 = sub64(x_128029,
                                                                      (int64_t) 1);
                            
                            x_128021 = defunc_1_f_res_res_128030;
                        }
                        x_128016 = x_128021;
                    }
                    defunc_1_f_res_128012 = x_128016;
                }
                if (sle64((int64_t) 0, defunc_1_f_res_128012) &&
                    slt64(defunc_1_f_res_128012, n_112804)) {
                    memmove(mem_121331 + defunc_1_f_res_128012 * (int64_t) 4,
                            double_buffer_mem_121498 + write_iter_128008 *
                            (int64_t) 4, (int64_t) 4);
                }
            }
            memmove(double_buffer_mem_121498 + (int64_t) 0, mem_121331 +
                    (int64_t) 0, n_112804 * (int64_t) 4);
        }
        memmove(mem_121352.mem + gtid_118752 * n_112804 * (int64_t) 4,
                double_buffer_mem_121498 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121256);
    free(mem_121259);
    free(mem_121262);
    free(mem_121265);
    free(mem_121268);
    free(mem_121331);
    free(double_buffer_mem_121498);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129021_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129021_end -
                 futhark_mc_segmap_parloop_129021_start;
        
        ctx->futhark_mc_segmap_parloop_129021_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129021_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129021_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129019(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118751 = tid;
    int num_tasks_127929 = info.nsubtasks;
    struct futhark_mc_task_129018 *futhark_mc_task_129018 =
                                  (struct futhark_mc_task_129018 *) args;
    struct futhark_context *ctx = futhark_mc_task_129018->ctx;
    uint64_t futhark_mc_segmap_task_129019_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129019_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129018->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129018->free_n_112804;
    int64_t i_112880 = futhark_mc_task_129018->free_i_112880;
    int32_t iters_114789 = futhark_mc_task_129018->free_iters_114789;
    int64_t bytes_119654 = futhark_mc_task_129018->free_bytes_119654;
    int64_t bytes_119697 = futhark_mc_task_129018->free_bytes_119697;
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_task_129018->free_mem_121198,
                                  .size =0, .references =NULL};
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_task_129018->free_mem_121352,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121496 =
            futhark_mc_task_129018->free_double_buffer_sizze_121496;
    int64_t double_buffer_sizze_121500 =
            futhark_mc_task_129018->free_double_buffer_sizze_121500;
    int64_t iter_127930;
    struct futhark_mc_segmap_parloop_struct_129020
    futhark_mc_segmap_parloop_struct_129020;
    
    futhark_mc_segmap_parloop_struct_129020.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129020.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129020.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129020.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_129020.free_iters_114789 = iters_114789;
    futhark_mc_segmap_parloop_struct_129020.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_129020.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129020.free_mem_121198 = mem_121198.mem;
    futhark_mc_segmap_parloop_struct_129020.free_mem_121352 = mem_121352.mem;
    futhark_mc_segmap_parloop_struct_129020.free_double_buffer_sizze_121500 =
        double_buffer_sizze_121500;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129021_task;
    
    futhark_mc_segmap_parloop_129021_task.name =
        "futhark_mc_segmap_parloop_129021";
    futhark_mc_segmap_parloop_129021_task.fn = futhark_mc_segmap_parloop_129021;
    futhark_mc_segmap_parloop_129021_task.args =
        &futhark_mc_segmap_parloop_struct_129020;
    futhark_mc_segmap_parloop_129021_task.iterations = iterations;
    futhark_mc_segmap_parloop_129021_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129021_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129021_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129021_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129021_task);
    
    if (futhark_mc_segmap_parloop_129021_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129021_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129021_total_end -
                 futhark_mc_segmap_parloop_129021_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129021_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129021_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129021_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129019_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129019_end -
                 futhark_mc_segmap_task_129019_start;
        
        ctx->futhark_mc_segmap_task_129019_runs[tid]++;
        ctx->futhark_mc_segmap_task_129019_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129019_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_129030 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_i_112880;
    int32_t free_iters_114789;
    int64_t free_bytes_119654;
    int64_t free_bytes_119697;
    char *free_mem_121198;
    char *free_mem_121352;
    int64_t free_double_buffer_sizze_121496;
};
struct futhark_mc_task_129039 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    char *free_mem_121216;
    char *free_mem_121219;
    char *free_mem_121222;
    char *free_mem_121225;
    char *free_mem_121228;
    char *free_double_buffer_mem_121494;
    int32_t free_defunc_2_radix_sort_step_arg_128050;
    int32_t free_defunc_0_get_bit_arg_128051;
    bool free_cond_f_res_128052;
    bool free_cond_f_res_128053;
};
struct futhark_mc_scan_stage_1_parloop_struct_129045 {
    struct futhark_context *ctx;
    char *free_mem_121216;
    char *free_mem_121219;
    char *free_mem_121222;
    char *free_mem_121225;
    char *free_mem_121228;
    char *free_double_buffer_mem_121494;
    int32_t free_defunc_2_radix_sort_step_arg_128050;
    int32_t free_defunc_0_get_bit_arg_128051;
    bool free_cond_f_res_128052;
    bool free_cond_f_res_128053;
};
static int futhark_mc_scan_stage_1_parloop_129046(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_118755, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_1_parloop_struct_129045
    *futhark_mc_scan_stage_1_parloop_struct_129045 =
    (struct futhark_mc_scan_stage_1_parloop_struct_129045 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_1_parloop_struct_129045->ctx;
    uint64_t futhark_mc_scan_stage_1_parloop_129046_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_129046_start = get_wall_time();
    
    struct memblock mem_121216 = {.desc ="mem_121216", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_129045->free_mem_121216,
                                  .size =0, .references =NULL};
    struct memblock mem_121219 = {.desc ="mem_121219", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_129045->free_mem_121219,
                                  .size =0, .references =NULL};
    struct memblock mem_121222 = {.desc ="mem_121222", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_129045->free_mem_121222,
                                  .size =0, .references =NULL};
    struct memblock mem_121225 = {.desc ="mem_121225", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_129045->free_mem_121225,
                                  .size =0, .references =NULL};
    struct memblock mem_121228 = {.desc ="mem_121228", .mem =
                                  futhark_mc_scan_stage_1_parloop_struct_129045->free_mem_121228,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121494 = {.desc =
                                                "double_buffer_mem_121494",
                                                .mem =
                                                futhark_mc_scan_stage_1_parloop_struct_129045->free_double_buffer_mem_121494,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_128050 =
            futhark_mc_scan_stage_1_parloop_struct_129045->free_defunc_2_radix_sort_step_arg_128050;
    int32_t defunc_0_get_bit_arg_128051 =
            futhark_mc_scan_stage_1_parloop_struct_129045->free_defunc_0_get_bit_arg_128051;
    bool cond_f_res_128052 =
         futhark_mc_scan_stage_1_parloop_struct_129045->free_cond_f_res_128052;
    bool cond_f_res_128053 =
         futhark_mc_scan_stage_1_parloop_struct_129045->free_cond_f_res_128053;
    int64_t iterations = end - start;
    int64_t iter_128136 = start;
    int64_t x_128059;
    int64_t x_128060;
    int64_t x_128061;
    int64_t x_128062;
    int64_t x_128063;
    int64_t x_128064;
    int64_t x_128065;
    int64_t x_128066;
    
    x_128059 = (int64_t) 0;
    x_128060 = (int64_t) 0;
    x_128061 = (int64_t) 0;
    x_128062 = (int64_t) 0;
    for (; iter_128136 < end; iter_128136++) {
        int64_t gtid_118756 = iter_128136;
        
        // stage 1 scan body
        {
            float x_128071 =
                  ((float *) double_buffer_mem_121494.mem)[gtid_118756];
            int32_t i32_arg_128072;
            
            i32_arg_128072 = futrts_to_bits32(x_128071);
            
            int32_t unsign_arg_128073 = ashr32(i32_arg_128072,
                                               defunc_0_get_bit_arg_128051);
            int32_t unsign_arg_128074 = 1 & unsign_arg_128073;
            int32_t unsign_arg_128075 = ashr32(i32_arg_128072, 31);
            int32_t unsign_arg_128076 = 1 & unsign_arg_128075;
            bool cond_128077 = unsign_arg_128076 == 1;
            bool x_128078 = !cond_128077;
            bool y_128079 = cond_f_res_128052 && x_128078;
            bool cond_128080 = cond_128077 || y_128079;
            int32_t defunc_1_get_bit_res_128081;
            
            if (cond_128080) {
                int32_t defunc_1_get_bit_res_t_res_128082 = 1 ^
                        unsign_arg_128074;
                
                defunc_1_get_bit_res_128081 = defunc_1_get_bit_res_t_res_128082;
            } else {
                defunc_1_get_bit_res_128081 = unsign_arg_128074;
            }
            
            int32_t x_128083 = mul32(2, defunc_1_get_bit_res_128081);
            int32_t unsign_arg_128084 = ashr32(i32_arg_128072,
                                               defunc_2_radix_sort_step_arg_128050);
            int32_t unsign_arg_128085 = 1 & unsign_arg_128084;
            bool y_128086 = cond_f_res_128053 && x_128078;
            bool cond_128087 = cond_128077 || y_128086;
            int32_t defunc_1_get_bit_res_128088;
            
            if (cond_128087) {
                int32_t defunc_1_get_bit_res_t_res_128089 = 1 ^
                        unsign_arg_128085;
                
                defunc_1_get_bit_res_128088 = defunc_1_get_bit_res_t_res_128089;
            } else {
                defunc_1_get_bit_res_128088 = unsign_arg_128085;
            }
            
            int32_t defunc_0_f_res_128090 = add32(x_128083,
                                                  defunc_1_get_bit_res_128088);
            bool cond_128091 = defunc_0_f_res_128090 == 0;
            int64_t defunc_0_f_res_128092 = btoi_bool_i64(cond_128091);
            int64_t defunc_0_f_res_128093;
            int64_t defunc_0_f_res_128094;
            int64_t defunc_0_f_res_128095;
            
            if (cond_128091) {
                defunc_0_f_res_128093 = (int64_t) 0;
                defunc_0_f_res_128094 = (int64_t) 0;
                defunc_0_f_res_128095 = (int64_t) 0;
            } else {
                bool cond_128096 = defunc_0_f_res_128090 == 1;
                int64_t defunc_0_f_res_f_res_128097 =
                        btoi_bool_i64(cond_128096);
                int64_t defunc_0_f_res_f_res_128098;
                int64_t defunc_0_f_res_f_res_128099;
                
                if (cond_128096) {
                    defunc_0_f_res_f_res_128098 = (int64_t) 0;
                    defunc_0_f_res_f_res_128099 = (int64_t) 0;
                } else {
                    bool cond_128100 = defunc_0_f_res_128090 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_128101 =
                            btoi_bool_i64(cond_128100);
                    bool cond_neg_128102 = !cond_128100;
                    int64_t defunc_0_f_res_f_res_f_res_128103 =
                            btoi_bool_i64(cond_neg_128102);
                    
                    defunc_0_f_res_f_res_128098 =
                        defunc_0_f_res_f_res_f_res_128101;
                    defunc_0_f_res_f_res_128099 =
                        defunc_0_f_res_f_res_f_res_128103;
                }
                defunc_0_f_res_128093 = defunc_0_f_res_f_res_128097;
                defunc_0_f_res_128094 = defunc_0_f_res_f_res_128098;
                defunc_0_f_res_128095 = defunc_0_f_res_f_res_128099;
            }
            // write mapped values results to memory
            {
                ((int32_t *) mem_121228.mem)[gtid_118756] =
                    defunc_0_f_res_128090;
            }
            x_128059 = x_128059;
            x_128060 = x_128060;
            x_128061 = x_128061;
            x_128062 = x_128062;
            // Read next values
            {
                x_128063 = defunc_0_f_res_128092;
                x_128064 = defunc_0_f_res_128093;
                x_128065 = defunc_0_f_res_128094;
                x_128066 = defunc_0_f_res_128095;
            }
            
            int64_t defunc_1_op_res_128067 = add64(x_128059, x_128063);
            int64_t defunc_1_op_res_128068 = add64(x_128060, x_128064);
            int64_t defunc_1_op_res_128069 = add64(x_128061, x_128065);
            int64_t defunc_1_op_res_128070 = add64(x_128062, x_128066);
            
            ((int64_t *) mem_121216.mem)[gtid_118756] = defunc_1_op_res_128067;
            x_128059 = defunc_1_op_res_128067;
            ((int64_t *) mem_121219.mem)[gtid_118756] = defunc_1_op_res_128068;
            x_128060 = defunc_1_op_res_128068;
            ((int64_t *) mem_121222.mem)[gtid_118756] = defunc_1_op_res_128069;
            x_128061 = defunc_1_op_res_128069;
            ((int64_t *) mem_121225.mem)[gtid_118756] = defunc_1_op_res_128070;
            x_128062 = defunc_1_op_res_128070;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_129046_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_129046_end -
                 futhark_mc_scan_stage_1_parloop_129046_start;
        
        ctx->futhark_mc_scan_stage_1_parloop_129046_runs[tid]++;
        ctx->futhark_mc_scan_stage_1_parloop_129046_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_1_parloop_129046_iter[tid] += iterations;
    }
    return err;
}
struct futhark_mc_scan_stage_3_parloop_struct_129047 {
    struct futhark_context *ctx;
    char *free_mem_121216;
    char *free_mem_121219;
    char *free_mem_121222;
    char *free_mem_121225;
    char *free_double_buffer_mem_121494;
    int32_t free_defunc_2_radix_sort_step_arg_128050;
    int32_t free_defunc_0_get_bit_arg_128051;
    bool free_cond_f_res_128052;
    bool free_cond_f_res_128053;
};
static int futhark_mc_scan_stage_3_parloop_129048(void *args, int64_t start,
                                                  int64_t end,
                                                  int flat_tid_118755, int tid)
{
    int err = 0;
    struct futhark_mc_scan_stage_3_parloop_struct_129047
    *futhark_mc_scan_stage_3_parloop_struct_129047 =
    (struct futhark_mc_scan_stage_3_parloop_struct_129047 *) args;
    struct futhark_context *ctx =
                           futhark_mc_scan_stage_3_parloop_struct_129047->ctx;
    uint64_t futhark_mc_scan_stage_3_parloop_129048_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_3_parloop_129048_start = get_wall_time();
    
    struct memblock mem_121216 = {.desc ="mem_121216", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_129047->free_mem_121216,
                                  .size =0, .references =NULL};
    struct memblock mem_121219 = {.desc ="mem_121219", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_129047->free_mem_121219,
                                  .size =0, .references =NULL};
    struct memblock mem_121222 = {.desc ="mem_121222", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_129047->free_mem_121222,
                                  .size =0, .references =NULL};
    struct memblock mem_121225 = {.desc ="mem_121225", .mem =
                                  futhark_mc_scan_stage_3_parloop_struct_129047->free_mem_121225,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121494 = {.desc =
                                                "double_buffer_mem_121494",
                                                .mem =
                                                futhark_mc_scan_stage_3_parloop_struct_129047->free_double_buffer_mem_121494,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_128050 =
            futhark_mc_scan_stage_3_parloop_struct_129047->free_defunc_2_radix_sort_step_arg_128050;
    int32_t defunc_0_get_bit_arg_128051 =
            futhark_mc_scan_stage_3_parloop_struct_129047->free_defunc_0_get_bit_arg_128051;
    bool cond_f_res_128052 =
         futhark_mc_scan_stage_3_parloop_struct_129047->free_cond_f_res_128052;
    bool cond_f_res_128053 =
         futhark_mc_scan_stage_3_parloop_struct_129047->free_cond_f_res_128053;
    int64_t iterations = end - start;
    int64_t iter_128172 = start;
    int64_t x_128160;
    int64_t x_128161;
    int64_t x_128162;
    int64_t x_128163;
    int64_t x_128164;
    int64_t x_128165;
    int64_t x_128166;
    int64_t x_128167;
    
    if (iter_128172 == (int64_t) 0) {
        x_128160 = (int64_t) 0;
    } else {
        x_128160 = ((int64_t *) mem_121216.mem)[iter_128172 - (int64_t) 1];
    }
    if (iter_128172 == (int64_t) 0) {
        x_128161 = (int64_t) 0;
    } else {
        x_128161 = ((int64_t *) mem_121219.mem)[iter_128172 - (int64_t) 1];
    }
    if (iter_128172 == (int64_t) 0) {
        x_128162 = (int64_t) 0;
    } else {
        x_128162 = ((int64_t *) mem_121222.mem)[iter_128172 - (int64_t) 1];
    }
    if (iter_128172 == (int64_t) 0) {
        x_128163 = (int64_t) 0;
    } else {
        x_128163 = ((int64_t *) mem_121225.mem)[iter_128172 - (int64_t) 1];
    }
    for (; iter_128172 < end; iter_128172++) {
        int64_t gtid_118756 = iter_128172;
        
        // stage 3 scan body
        {
            float x_128071 =
                  ((float *) double_buffer_mem_121494.mem)[gtid_118756];
            int32_t i32_arg_128072;
            
            i32_arg_128072 = futrts_to_bits32(x_128071);
            
            int32_t unsign_arg_128073 = ashr32(i32_arg_128072,
                                               defunc_0_get_bit_arg_128051);
            int32_t unsign_arg_128074 = 1 & unsign_arg_128073;
            int32_t unsign_arg_128075 = ashr32(i32_arg_128072, 31);
            int32_t unsign_arg_128076 = 1 & unsign_arg_128075;
            bool cond_128077 = unsign_arg_128076 == 1;
            bool x_128078 = !cond_128077;
            bool y_128079 = cond_f_res_128052 && x_128078;
            bool cond_128080 = cond_128077 || y_128079;
            int32_t defunc_1_get_bit_res_128081;
            
            if (cond_128080) {
                int32_t defunc_1_get_bit_res_t_res_128082 = 1 ^
                        unsign_arg_128074;
                
                defunc_1_get_bit_res_128081 = defunc_1_get_bit_res_t_res_128082;
            } else {
                defunc_1_get_bit_res_128081 = unsign_arg_128074;
            }
            
            int32_t x_128083 = mul32(2, defunc_1_get_bit_res_128081);
            int32_t unsign_arg_128084 = ashr32(i32_arg_128072,
                                               defunc_2_radix_sort_step_arg_128050);
            int32_t unsign_arg_128085 = 1 & unsign_arg_128084;
            bool y_128086 = cond_f_res_128053 && x_128078;
            bool cond_128087 = cond_128077 || y_128086;
            int32_t defunc_1_get_bit_res_128088;
            
            if (cond_128087) {
                int32_t defunc_1_get_bit_res_t_res_128089 = 1 ^
                        unsign_arg_128085;
                
                defunc_1_get_bit_res_128088 = defunc_1_get_bit_res_t_res_128089;
            } else {
                defunc_1_get_bit_res_128088 = unsign_arg_128085;
            }
            
            int32_t defunc_0_f_res_128090 = add32(x_128083,
                                                  defunc_1_get_bit_res_128088);
            bool cond_128091 = defunc_0_f_res_128090 == 0;
            int64_t defunc_0_f_res_128092 = btoi_bool_i64(cond_128091);
            int64_t defunc_0_f_res_128093;
            int64_t defunc_0_f_res_128094;
            int64_t defunc_0_f_res_128095;
            
            if (cond_128091) {
                defunc_0_f_res_128093 = (int64_t) 0;
                defunc_0_f_res_128094 = (int64_t) 0;
                defunc_0_f_res_128095 = (int64_t) 0;
            } else {
                bool cond_128096 = defunc_0_f_res_128090 == 1;
                int64_t defunc_0_f_res_f_res_128097 =
                        btoi_bool_i64(cond_128096);
                int64_t defunc_0_f_res_f_res_128098;
                int64_t defunc_0_f_res_f_res_128099;
                
                if (cond_128096) {
                    defunc_0_f_res_f_res_128098 = (int64_t) 0;
                    defunc_0_f_res_f_res_128099 = (int64_t) 0;
                } else {
                    bool cond_128100 = defunc_0_f_res_128090 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_128101 =
                            btoi_bool_i64(cond_128100);
                    bool cond_neg_128102 = !cond_128100;
                    int64_t defunc_0_f_res_f_res_f_res_128103 =
                            btoi_bool_i64(cond_neg_128102);
                    
                    defunc_0_f_res_f_res_128098 =
                        defunc_0_f_res_f_res_f_res_128101;
                    defunc_0_f_res_f_res_128099 =
                        defunc_0_f_res_f_res_f_res_128103;
                }
                defunc_0_f_res_128093 = defunc_0_f_res_f_res_128097;
                defunc_0_f_res_128094 = defunc_0_f_res_f_res_128098;
                defunc_0_f_res_128095 = defunc_0_f_res_f_res_128099;
            }
            x_128160 = x_128160;
            x_128161 = x_128161;
            x_128162 = x_128162;
            x_128163 = x_128163;
            x_128164 = defunc_0_f_res_128092;
            x_128165 = defunc_0_f_res_128093;
            x_128166 = defunc_0_f_res_128094;
            x_128167 = defunc_0_f_res_128095;
            
            int64_t defunc_1_op_res_128168 = add64(x_128160, x_128164);
            int64_t defunc_1_op_res_128169 = add64(x_128161, x_128165);
            int64_t defunc_1_op_res_128170 = add64(x_128162, x_128166);
            int64_t defunc_1_op_res_128171 = add64(x_128163, x_128167);
            
            ((int64_t *) mem_121216.mem)[gtid_118756] = defunc_1_op_res_128168;
            x_128160 = defunc_1_op_res_128168;
            ((int64_t *) mem_121219.mem)[gtid_118756] = defunc_1_op_res_128169;
            x_128161 = defunc_1_op_res_128169;
            ((int64_t *) mem_121222.mem)[gtid_118756] = defunc_1_op_res_128170;
            x_128162 = defunc_1_op_res_128170;
            ((int64_t *) mem_121225.mem)[gtid_118756] = defunc_1_op_res_128171;
            x_128163 = defunc_1_op_res_128171;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_3_parloop_129048_end = get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_3_parloop_129048_end -
                 futhark_mc_scan_stage_3_parloop_129048_start;
        
        ctx->futhark_mc_scan_stage_3_parloop_129048_runs[tid]++;
        ctx->futhark_mc_scan_stage_3_parloop_129048_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_scan_stage_3_parloop_129048_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segscan_task_129040(void *args, int64_t iterations, int tid,
                                   struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118755 = tid;
    int num_tasks_128135 = info.nsubtasks;
    struct futhark_mc_task_129039 *futhark_mc_task_129039 =
                                  (struct futhark_mc_task_129039 *) args;
    struct futhark_context *ctx = futhark_mc_task_129039->ctx;
    uint64_t futhark_mc_segscan_task_129040_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segscan_task_129040_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129039->free_n_112804;
    struct memblock mem_121216 = {.desc ="mem_121216", .mem =
                                  futhark_mc_task_129039->free_mem_121216,
                                  .size =0, .references =NULL};
    struct memblock mem_121219 = {.desc ="mem_121219", .mem =
                                  futhark_mc_task_129039->free_mem_121219,
                                  .size =0, .references =NULL};
    struct memblock mem_121222 = {.desc ="mem_121222", .mem =
                                  futhark_mc_task_129039->free_mem_121222,
                                  .size =0, .references =NULL};
    struct memblock mem_121225 = {.desc ="mem_121225", .mem =
                                  futhark_mc_task_129039->free_mem_121225,
                                  .size =0, .references =NULL};
    struct memblock mem_121228 = {.desc ="mem_121228", .mem =
                                  futhark_mc_task_129039->free_mem_121228,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121494 = {.desc =
                                                "double_buffer_mem_121494",
                                                .mem =
                                                futhark_mc_task_129039->free_double_buffer_mem_121494,
                                                .size =0, .references =NULL};
    int32_t defunc_2_radix_sort_step_arg_128050 =
            futhark_mc_task_129039->free_defunc_2_radix_sort_step_arg_128050;
    int32_t defunc_0_get_bit_arg_128051 =
            futhark_mc_task_129039->free_defunc_0_get_bit_arg_128051;
    bool cond_f_res_128052 = futhark_mc_task_129039->free_cond_f_res_128052;
    bool cond_f_res_128053 = futhark_mc_task_129039->free_cond_f_res_128053;
    size_t scan_stage_2_accum_mem_128151_cached_sizze_129041 = 0;
    char *scan_stage_2_accum_mem_128151 = NULL;
    size_t scan_stage_2_accum_mem_128153_cached_sizze_129042 = 0;
    char *scan_stage_2_accum_mem_128153 = NULL;
    size_t scan_stage_2_accum_mem_128155_cached_sizze_129043 = 0;
    char *scan_stage_2_accum_mem_128155 = NULL;
    size_t scan_stage_2_accum_mem_128157_cached_sizze_129044 = 0;
    char *scan_stage_2_accum_mem_128157 = NULL;
    int64_t iter_128136;
    struct futhark_mc_scan_stage_1_parloop_struct_129045
    futhark_mc_scan_stage_1_parloop_struct_129045;
    
    futhark_mc_scan_stage_1_parloop_struct_129045.ctx = ctx;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_mem_121216 =
        mem_121216.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_mem_121219 =
        mem_121219.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_mem_121222 =
        mem_121222.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_mem_121225 =
        mem_121225.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_mem_121228 =
        mem_121228.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_double_buffer_mem_121494 =
        double_buffer_mem_121494.mem;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_defunc_2_radix_sort_step_arg_128050 =
        defunc_2_radix_sort_step_arg_128050;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_defunc_0_get_bit_arg_128051 =
        defunc_0_get_bit_arg_128051;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_cond_f_res_128052 =
        cond_f_res_128052;
    futhark_mc_scan_stage_1_parloop_struct_129045.free_cond_f_res_128053 =
        cond_f_res_128053;
    
    struct scheduler_parloop futhark_mc_scan_stage_1_parloop_129046_task;
    
    futhark_mc_scan_stage_1_parloop_129046_task.name =
        "futhark_mc_scan_stage_1_parloop_129046";
    futhark_mc_scan_stage_1_parloop_129046_task.fn =
        futhark_mc_scan_stage_1_parloop_129046;
    futhark_mc_scan_stage_1_parloop_129046_task.args =
        &futhark_mc_scan_stage_1_parloop_struct_129045;
    futhark_mc_scan_stage_1_parloop_129046_task.iterations = iterations;
    futhark_mc_scan_stage_1_parloop_129046_task.info = info;
    
    uint64_t futhark_mc_scan_stage_1_parloop_129046_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_scan_stage_1_parloop_129046_total_start = get_wall_time();
    
    int futhark_mc_scan_stage_1_parloop_129046_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_scan_stage_1_parloop_129046_task);
    
    if (futhark_mc_scan_stage_1_parloop_129046_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_scan_stage_1_parloop_129046_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_scan_stage_1_parloop_129046_total_end -
                 futhark_mc_scan_stage_1_parloop_129046_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_129046_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_129046_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_scan_stage_1_parloop_129046_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (slt32(1, num_tasks_128135)) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "nonsegmentedScan stage 2");
        
        int64_t x_128137;
        int64_t x_128138;
        int64_t x_128139;
        int64_t x_128140;
        int64_t x_128141;
        int64_t x_128142;
        int64_t x_128143;
        int64_t x_128144;
        int64_t offset_128149 = (int64_t) 0;
        int64_t offset_index_128150 = (int64_t) 0;
        
        if (scan_stage_2_accum_mem_128151_cached_sizze_129041 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_128151 =
                realloc(scan_stage_2_accum_mem_128151, (int64_t) 8);
            scan_stage_2_accum_mem_128151_cached_sizze_129041 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_128153_cached_sizze_129042 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_128153 =
                realloc(scan_stage_2_accum_mem_128153, (int64_t) 8);
            scan_stage_2_accum_mem_128153_cached_sizze_129042 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_128155_cached_sizze_129043 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_128155 =
                realloc(scan_stage_2_accum_mem_128155, (int64_t) 8);
            scan_stage_2_accum_mem_128155_cached_sizze_129043 = (int64_t) 8;
        }
        if (scan_stage_2_accum_mem_128157_cached_sizze_129044 <
            (size_t) (int64_t) 8) {
            scan_stage_2_accum_mem_128157 =
                realloc(scan_stage_2_accum_mem_128157, (int64_t) 8);
            scan_stage_2_accum_mem_128157_cached_sizze_129044 = (int64_t) 8;
        }
        ((int64_t *) scan_stage_2_accum_mem_128151)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_128153)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_128155)[(int64_t) 0] = (int64_t) 0;
        ((int64_t *) scan_stage_2_accum_mem_128157)[(int64_t) 0] = (int64_t) 0;
        for (int32_t i_128159 = 0; i_128159 < num_tasks_128135 - 1;
             i_128159++) {
            offset_128149 = squot64(n_112804, sext_i32_i64(num_tasks_128135));
            if (slt64(sext_i32_i64(i_128159), srem64(n_112804,
                                                     sext_i32_i64(num_tasks_128135)))) {
                offset_128149 += (int64_t) 1;
            }
            offset_index_128150 += offset_128149;
            
            int64_t gtid_118756 = offset_index_128150;
            float x_128071 =
                  ((float *) double_buffer_mem_121494.mem)[gtid_118756];
            int32_t i32_arg_128072;
            
            i32_arg_128072 = futrts_to_bits32(x_128071);
            
            int32_t unsign_arg_128073 = ashr32(i32_arg_128072,
                                               defunc_0_get_bit_arg_128051);
            int32_t unsign_arg_128074 = 1 & unsign_arg_128073;
            int32_t unsign_arg_128075 = ashr32(i32_arg_128072, 31);
            int32_t unsign_arg_128076 = 1 & unsign_arg_128075;
            bool cond_128077 = unsign_arg_128076 == 1;
            bool x_128078 = !cond_128077;
            bool y_128079 = cond_f_res_128052 && x_128078;
            bool cond_128080 = cond_128077 || y_128079;
            int32_t defunc_1_get_bit_res_128081;
            
            if (cond_128080) {
                int32_t defunc_1_get_bit_res_t_res_128082 = 1 ^
                        unsign_arg_128074;
                
                defunc_1_get_bit_res_128081 = defunc_1_get_bit_res_t_res_128082;
            } else {
                defunc_1_get_bit_res_128081 = unsign_arg_128074;
            }
            
            int32_t x_128083 = mul32(2, defunc_1_get_bit_res_128081);
            int32_t unsign_arg_128084 = ashr32(i32_arg_128072,
                                               defunc_2_radix_sort_step_arg_128050);
            int32_t unsign_arg_128085 = 1 & unsign_arg_128084;
            bool y_128086 = cond_f_res_128053 && x_128078;
            bool cond_128087 = cond_128077 || y_128086;
            int32_t defunc_1_get_bit_res_128088;
            
            if (cond_128087) {
                int32_t defunc_1_get_bit_res_t_res_128089 = 1 ^
                        unsign_arg_128085;
                
                defunc_1_get_bit_res_128088 = defunc_1_get_bit_res_t_res_128089;
            } else {
                defunc_1_get_bit_res_128088 = unsign_arg_128085;
            }
            
            int32_t defunc_0_f_res_128090 = add32(x_128083,
                                                  defunc_1_get_bit_res_128088);
            bool cond_128091 = defunc_0_f_res_128090 == 0;
            int64_t defunc_0_f_res_128092 = btoi_bool_i64(cond_128091);
            int64_t defunc_0_f_res_128093;
            int64_t defunc_0_f_res_128094;
            int64_t defunc_0_f_res_128095;
            
            if (cond_128091) {
                defunc_0_f_res_128093 = (int64_t) 0;
                defunc_0_f_res_128094 = (int64_t) 0;
                defunc_0_f_res_128095 = (int64_t) 0;
            } else {
                bool cond_128096 = defunc_0_f_res_128090 == 1;
                int64_t defunc_0_f_res_f_res_128097 =
                        btoi_bool_i64(cond_128096);
                int64_t defunc_0_f_res_f_res_128098;
                int64_t defunc_0_f_res_f_res_128099;
                
                if (cond_128096) {
                    defunc_0_f_res_f_res_128098 = (int64_t) 0;
                    defunc_0_f_res_f_res_128099 = (int64_t) 0;
                } else {
                    bool cond_128100 = defunc_0_f_res_128090 == 2;
                    int64_t defunc_0_f_res_f_res_f_res_128101 =
                            btoi_bool_i64(cond_128100);
                    bool cond_neg_128102 = !cond_128100;
                    int64_t defunc_0_f_res_f_res_f_res_128103 =
                            btoi_bool_i64(cond_neg_128102);
                    
                    defunc_0_f_res_f_res_128098 =
                        defunc_0_f_res_f_res_f_res_128101;
                    defunc_0_f_res_f_res_128099 =
                        defunc_0_f_res_f_res_f_res_128103;
                }
                defunc_0_f_res_128093 = defunc_0_f_res_f_res_128097;
                defunc_0_f_res_128094 = defunc_0_f_res_f_res_128098;
                defunc_0_f_res_128095 = defunc_0_f_res_f_res_128099;
            }
            // Read carry in
            {
                x_128137 =
                    ((int64_t *) scan_stage_2_accum_mem_128151)[(int64_t) 0];
                x_128138 =
                    ((int64_t *) scan_stage_2_accum_mem_128153)[(int64_t) 0];
                x_128139 =
                    ((int64_t *) scan_stage_2_accum_mem_128155)[(int64_t) 0];
                x_128140 =
                    ((int64_t *) scan_stage_2_accum_mem_128157)[(int64_t) 0];
            }
            // Read next values
            {
                x_128141 = ((int64_t *) mem_121216.mem)[offset_index_128150 -
                                                        (int64_t) 1];
                x_128142 = ((int64_t *) mem_121219.mem)[offset_index_128150 -
                                                        (int64_t) 1];
                x_128143 = ((int64_t *) mem_121222.mem)[offset_index_128150 -
                                                        (int64_t) 1];
                x_128144 = ((int64_t *) mem_121225.mem)[offset_index_128150 -
                                                        (int64_t) 1];
            }
            
            int64_t defunc_1_op_res_128145 = add64(x_128137, x_128141);
            int64_t defunc_1_op_res_128146 = add64(x_128138, x_128142);
            int64_t defunc_1_op_res_128147 = add64(x_128139, x_128143);
            int64_t defunc_1_op_res_128148 = add64(x_128140, x_128144);
            
            ((int64_t *) mem_121216.mem)[offset_index_128150 - (int64_t) 1] =
                defunc_1_op_res_128145;
            ((int64_t *) scan_stage_2_accum_mem_128151)[(int64_t) 0] =
                defunc_1_op_res_128145;
            ((int64_t *) mem_121219.mem)[offset_index_128150 - (int64_t) 1] =
                defunc_1_op_res_128146;
            ((int64_t *) scan_stage_2_accum_mem_128153)[(int64_t) 0] =
                defunc_1_op_res_128146;
            ((int64_t *) mem_121222.mem)[offset_index_128150 - (int64_t) 1] =
                defunc_1_op_res_128147;
            ((int64_t *) scan_stage_2_accum_mem_128155)[(int64_t) 0] =
                defunc_1_op_res_128147;
            ((int64_t *) mem_121225.mem)[offset_index_128150 - (int64_t) 1] =
                defunc_1_op_res_128148;
            ((int64_t *) scan_stage_2_accum_mem_128157)[(int64_t) 0] =
                defunc_1_op_res_128148;
        }
        
        int64_t iter_128172 = (int64_t) 0;
        struct futhark_mc_scan_stage_3_parloop_struct_129047
        futhark_mc_scan_stage_3_parloop_struct_129047;
        
        futhark_mc_scan_stage_3_parloop_struct_129047.ctx = ctx;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_mem_121216 =
            mem_121216.mem;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_mem_121219 =
            mem_121219.mem;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_mem_121222 =
            mem_121222.mem;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_mem_121225 =
            mem_121225.mem;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_double_buffer_mem_121494 =
            double_buffer_mem_121494.mem;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_defunc_2_radix_sort_step_arg_128050 =
            defunc_2_radix_sort_step_arg_128050;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_defunc_0_get_bit_arg_128051 =
            defunc_0_get_bit_arg_128051;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_cond_f_res_128052 =
            cond_f_res_128052;
        futhark_mc_scan_stage_3_parloop_struct_129047.free_cond_f_res_128053 =
            cond_f_res_128053;
        
        struct scheduler_parloop futhark_mc_scan_stage_3_parloop_129048_task;
        
        futhark_mc_scan_stage_3_parloop_129048_task.name =
            "futhark_mc_scan_stage_3_parloop_129048";
        futhark_mc_scan_stage_3_parloop_129048_task.fn =
            futhark_mc_scan_stage_3_parloop_129048;
        futhark_mc_scan_stage_3_parloop_129048_task.args =
            &futhark_mc_scan_stage_3_parloop_struct_129047;
        futhark_mc_scan_stage_3_parloop_129048_task.iterations = iterations;
        futhark_mc_scan_stage_3_parloop_129048_task.info = info;
        
        uint64_t futhark_mc_scan_stage_3_parloop_129048_total_start = 0;
        
        if (ctx->profiling && !ctx->profiling_paused)
            futhark_mc_scan_stage_3_parloop_129048_total_start =
                get_wall_time();
        
        int futhark_mc_scan_stage_3_parloop_129048_err =
            scheduler_execute_task(&ctx->scheduler,
                                   &futhark_mc_scan_stage_3_parloop_129048_task);
        
        if (futhark_mc_scan_stage_3_parloop_129048_err != 0) {
            err = 1;
            goto cleanup;
        }
        if (ctx->profiling && !ctx->profiling_paused) {
            uint64_t futhark_mc_scan_stage_3_parloop_129048_total_end =
                     get_wall_time();
            uint64_t elapsed =
                     futhark_mc_scan_stage_3_parloop_129048_total_end -
                     futhark_mc_scan_stage_3_parloop_129048_total_start;
            
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_129048_total_runs,
                               1, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_129048_total_total_runtime,
                               elapsed, __ATOMIC_RELAXED);
            __atomic_fetch_add(&ctx->futhark_mc_scan_stage_3_parloop_129048_total_iter,
                               iterations, __ATOMIC_RELAXED);
        }
    }
    free(scan_stage_2_accum_mem_128151);
    free(scan_stage_2_accum_mem_128153);
    free(scan_stage_2_accum_mem_128155);
    free(scan_stage_2_accum_mem_128157);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segscan_task_129040_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segscan_task_129040_end -
                 futhark_mc_segscan_task_129040_start;
        
        ctx->futhark_mc_segscan_task_129040_runs[tid]++;
        ctx->futhark_mc_segscan_task_129040_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segscan_task_129040_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129049 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    char *free_mem_121216;
    char *free_mem_121219;
    char *free_mem_121222;
    char *free_mem_121225;
    char *free_mem_121228;
    char *free_mem_121231;
    char *free_double_buffer_mem_121494;
    int64_t free_last_res_128104;
    int64_t free_last_res_128105;
    int64_t free_last_res_128106;
};
struct futhark_mc_segmap_parloop_struct_129051 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    char *free_mem_121216;
    char *free_mem_121219;
    char *free_mem_121222;
    char *free_mem_121225;
    char *free_mem_121228;
    char *free_mem_121231;
    char *free_double_buffer_mem_121494;
    int64_t free_last_res_128104;
    int64_t free_last_res_128105;
    int64_t free_last_res_128106;
};
static int futhark_mc_segmap_parloop_129052(void *args, int64_t start,
                                            int64_t end, int flat_tid_118757,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129051
    *futhark_mc_segmap_parloop_struct_129051 =
    (struct futhark_mc_segmap_parloop_struct_129051 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129051->ctx;
    uint64_t futhark_mc_segmap_parloop_129052_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129052_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129051->free_n_112804;
    struct memblock mem_121216 = {.desc ="mem_121216", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121216,
                                  .size =0, .references =NULL};
    struct memblock mem_121219 = {.desc ="mem_121219", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121219,
                                  .size =0, .references =NULL};
    struct memblock mem_121222 = {.desc ="mem_121222", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121222,
                                  .size =0, .references =NULL};
    struct memblock mem_121225 = {.desc ="mem_121225", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121225,
                                  .size =0, .references =NULL};
    struct memblock mem_121228 = {.desc ="mem_121228", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121228,
                                  .size =0, .references =NULL};
    struct memblock mem_121231 = {.desc ="mem_121231", .mem =
                                  futhark_mc_segmap_parloop_struct_129051->free_mem_121231,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121494 = {.desc =
                                                "double_buffer_mem_121494",
                                                .mem =
                                                futhark_mc_segmap_parloop_struct_129051->free_double_buffer_mem_121494,
                                                .size =0, .references =NULL};
    int64_t last_res_128104 =
            futhark_mc_segmap_parloop_struct_129051->free_last_res_128104;
    int64_t last_res_128105 =
            futhark_mc_segmap_parloop_struct_129051->free_last_res_128105;
    int64_t last_res_128106 =
            futhark_mc_segmap_parloop_struct_129051->free_last_res_128106;
    int64_t iterations = end - start;
    int64_t iter_128174 = start;
    
    for (; iter_128174 < end; iter_128174++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128193 = n_112804;
        int64_t gtid_118758 = iter_128174;
        int64_t remnant_128194 = iter_128174 - gtid_118758;
        int32_t x_128109 = ((int32_t *) mem_121228.mem)[gtid_118758];
        float write_value_128110 =
              ((float *) double_buffer_mem_121494.mem)[gtid_118758];
        bool match_lit_128111 = 0 == x_128109;
        int64_t defunc_1_f_res_128112;
        
        if (match_lit_128111) {
            int64_t x_128175 = ((int64_t *) mem_121216.mem)[gtid_118758];
            int64_t case_res_128176 = sub64(x_128175, (int64_t) 1);
            
            defunc_1_f_res_128112 = case_res_128176;
        } else {
            bool match_lit_128177 = 1 == x_128109;
            int64_t x_128178;
            
            if (match_lit_128177) {
                int64_t x_128179 = ((int64_t *) mem_121219.mem)[gtid_118758];
                int64_t x_128180 = add64(last_res_128104, x_128179);
                int64_t case_res_128181 = sub64(x_128180, (int64_t) 1);
                
                x_128178 = case_res_128181;
            } else {
                bool match_lit_128182 = 2 == x_128109;
                int64_t x_128183;
                
                if (match_lit_128182) {
                    int64_t x_128184 =
                            ((int64_t *) mem_121222.mem)[gtid_118758];
                    int64_t x_128185 = add64(last_res_128104, last_res_128105);
                    int64_t x_128186 = add64(x_128184, x_128185);
                    int64_t case_res_128187 = sub64(x_128186, (int64_t) 1);
                    
                    x_128183 = case_res_128187;
                } else {
                    int64_t x_128188 =
                            ((int64_t *) mem_121225.mem)[gtid_118758];
                    int64_t x_128189 = add64(last_res_128104, last_res_128105);
                    int64_t x_128190 = add64(last_res_128106, x_128189);
                    int64_t x_128191 = add64(x_128188, x_128190);
                    int64_t defunc_1_f_res_res_128192 = sub64(x_128191,
                                                              (int64_t) 1);
                    
                    x_128183 = defunc_1_f_res_res_128192;
                }
                x_128178 = x_128183;
            }
            defunc_1_f_res_128112 = x_128178;
        }
        if (sle64((int64_t) 0, defunc_1_f_res_128112) &&
            slt64(defunc_1_f_res_128112, n_112804)) {
            ((float *) mem_121231.mem)[defunc_1_f_res_128112] =
                write_value_128110;
        }
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129052_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129052_end -
                 futhark_mc_segmap_parloop_129052_start;
        
        ctx->futhark_mc_segmap_parloop_129052_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129052_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129052_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129050(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118757 = tid;
    int num_tasks_128173 = info.nsubtasks;
    struct futhark_mc_task_129049 *futhark_mc_task_129049 =
                                  (struct futhark_mc_task_129049 *) args;
    struct futhark_context *ctx = futhark_mc_task_129049->ctx;
    uint64_t futhark_mc_segmap_task_129050_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129050_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129049->free_n_112804;
    struct memblock mem_121216 = {.desc ="mem_121216", .mem =
                                  futhark_mc_task_129049->free_mem_121216,
                                  .size =0, .references =NULL};
    struct memblock mem_121219 = {.desc ="mem_121219", .mem =
                                  futhark_mc_task_129049->free_mem_121219,
                                  .size =0, .references =NULL};
    struct memblock mem_121222 = {.desc ="mem_121222", .mem =
                                  futhark_mc_task_129049->free_mem_121222,
                                  .size =0, .references =NULL};
    struct memblock mem_121225 = {.desc ="mem_121225", .mem =
                                  futhark_mc_task_129049->free_mem_121225,
                                  .size =0, .references =NULL};
    struct memblock mem_121228 = {.desc ="mem_121228", .mem =
                                  futhark_mc_task_129049->free_mem_121228,
                                  .size =0, .references =NULL};
    struct memblock mem_121231 = {.desc ="mem_121231", .mem =
                                  futhark_mc_task_129049->free_mem_121231,
                                  .size =0, .references =NULL};
    struct memblock double_buffer_mem_121494 = {.desc =
                                                "double_buffer_mem_121494",
                                                .mem =
                                                futhark_mc_task_129049->free_double_buffer_mem_121494,
                                                .size =0, .references =NULL};
    int64_t last_res_128104 = futhark_mc_task_129049->free_last_res_128104;
    int64_t last_res_128105 = futhark_mc_task_129049->free_last_res_128105;
    int64_t last_res_128106 = futhark_mc_task_129049->free_last_res_128106;
    int64_t iter_128174;
    struct futhark_mc_segmap_parloop_struct_129051
    futhark_mc_segmap_parloop_struct_129051;
    
    futhark_mc_segmap_parloop_struct_129051.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129051.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121216 = mem_121216.mem;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121219 = mem_121219.mem;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121222 = mem_121222.mem;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121225 = mem_121225.mem;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121228 = mem_121228.mem;
    futhark_mc_segmap_parloop_struct_129051.free_mem_121231 = mem_121231.mem;
    futhark_mc_segmap_parloop_struct_129051.free_double_buffer_mem_121494 =
        double_buffer_mem_121494.mem;
    futhark_mc_segmap_parloop_struct_129051.free_last_res_128104 =
        last_res_128104;
    futhark_mc_segmap_parloop_struct_129051.free_last_res_128105 =
        last_res_128105;
    futhark_mc_segmap_parloop_struct_129051.free_last_res_128106 =
        last_res_128106;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129052_task;
    
    futhark_mc_segmap_parloop_129052_task.name =
        "futhark_mc_segmap_parloop_129052";
    futhark_mc_segmap_parloop_129052_task.fn = futhark_mc_segmap_parloop_129052;
    futhark_mc_segmap_parloop_129052_task.args =
        &futhark_mc_segmap_parloop_struct_129051;
    futhark_mc_segmap_parloop_129052_task.iterations = iterations;
    futhark_mc_segmap_parloop_129052_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129052_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129052_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129052_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129052_task);
    
    if (futhark_mc_segmap_parloop_129052_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129052_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129052_total_end -
                 futhark_mc_segmap_parloop_129052_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129052_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129052_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129052_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129050_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129050_end -
                 futhark_mc_segmap_task_129050_start;
        
        ctx->futhark_mc_segmap_task_129050_runs[tid]++;
        ctx->futhark_mc_segmap_task_129050_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129050_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_129031(void *args, int64_t start,
                                            int64_t end, int flat_tid_118753,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129030
    *futhark_mc_segmap_parloop_struct_129030 =
    (struct futhark_mc_segmap_parloop_struct_129030 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129030->ctx;
    uint64_t futhark_mc_segmap_parloop_129031_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129031_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129030->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129030->free_n_112804;
    int64_t i_112880 = futhark_mc_segmap_parloop_struct_129030->free_i_112880;
    int32_t iters_114789 =
            futhark_mc_segmap_parloop_struct_129030->free_iters_114789;
    int64_t bytes_119654 =
            futhark_mc_segmap_parloop_struct_129030->free_bytes_119654;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129030->free_bytes_119697;
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_segmap_parloop_struct_129030->free_mem_121198,
                                  .size =0, .references =NULL};
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_segmap_parloop_struct_129030->free_mem_121352,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121496 =
            futhark_mc_segmap_parloop_struct_129030->free_double_buffer_sizze_121496;
    size_t mem_121216_cached_sizze_129032 = 0;
    char *mem_121216 = NULL;
    size_t mem_121219_cached_sizze_129033 = 0;
    char *mem_121219 = NULL;
    size_t mem_121222_cached_sizze_129034 = 0;
    char *mem_121222 = NULL;
    size_t mem_121225_cached_sizze_129035 = 0;
    char *mem_121225 = NULL;
    size_t mem_121228_cached_sizze_129036 = 0;
    char *mem_121228 = NULL;
    size_t mem_121231_cached_sizze_129037 = 0;
    char *mem_121231 = NULL;
    size_t double_buffer_mem_121494_cached_sizze_129038 = 0;
    char *double_buffer_mem_121494 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128047 = start;
    
    if (mem_121216_cached_sizze_129032 < (size_t) bytes_119654) {
        mem_121216 = realloc(mem_121216, bytes_119654);
        mem_121216_cached_sizze_129032 = bytes_119654;
    }
    if (mem_121219_cached_sizze_129033 < (size_t) bytes_119654) {
        mem_121219 = realloc(mem_121219, bytes_119654);
        mem_121219_cached_sizze_129033 = bytes_119654;
    }
    if (mem_121222_cached_sizze_129034 < (size_t) bytes_119654) {
        mem_121222 = realloc(mem_121222, bytes_119654);
        mem_121222_cached_sizze_129034 = bytes_119654;
    }
    if (mem_121225_cached_sizze_129035 < (size_t) bytes_119654) {
        mem_121225 = realloc(mem_121225, bytes_119654);
        mem_121225_cached_sizze_129035 = bytes_119654;
    }
    if (mem_121228_cached_sizze_129036 < (size_t) bytes_119697) {
        mem_121228 = realloc(mem_121228, bytes_119697);
        mem_121228_cached_sizze_129036 = bytes_119697;
    }
    if (double_buffer_mem_121494_cached_sizze_129038 <
        (size_t) double_buffer_sizze_121496) {
        double_buffer_mem_121494 = realloc(double_buffer_mem_121494,
                                           double_buffer_sizze_121496);
        double_buffer_mem_121494_cached_sizze_129038 =
            double_buffer_sizze_121496;
    }
    if (mem_121231_cached_sizze_129037 < (size_t) bytes_119697) {
        mem_121231 = realloc(mem_121231, bytes_119697);
        mem_121231_cached_sizze_129037 = bytes_119697;
    }
    for (; iter_128047 < end; iter_128047++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128132 = m_112803;
        int64_t gtid_118754 = iter_128047;
        int64_t remnant_128133 = iter_128047 - gtid_118754;
        
        memmove(double_buffer_mem_121494 + (int64_t) 0, mem_121198.mem +
                gtid_118754 * n_112804 * (int64_t) 4, n_112804 * (int64_t) 4);
        for (int32_t i_128048 = 0; i_128048 < iters_114789; i_128048++) {
            int32_t defunc_2_radix_sort_step_arg_128050 = mul32(2, i_128048);
            int32_t defunc_0_get_bit_arg_128051 = add32(1,
                                                        defunc_2_radix_sort_step_arg_128050);
            bool cond_f_res_128052 = defunc_0_get_bit_arg_128051 == 31;
            bool cond_f_res_128053 = defunc_2_radix_sort_step_arg_128050 == 31;
            int64_t flat_tid_118755 = (int64_t) 0;
            int32_t num_tasks_128135;
            
            if (ctx->debugging)
                fprintf(ctx->log, "%s\n", "nonsegmented segScan");
            
            struct futhark_mc_task_129039 futhark_mc_task_129039;
            
            futhark_mc_task_129039.ctx = ctx;
            futhark_mc_task_129039.free_n_112804 = n_112804;
            futhark_mc_task_129039.free_mem_121216 = mem_121216;
            futhark_mc_task_129039.free_mem_121219 = mem_121219;
            futhark_mc_task_129039.free_mem_121222 = mem_121222;
            futhark_mc_task_129039.free_mem_121225 = mem_121225;
            futhark_mc_task_129039.free_mem_121228 = mem_121228;
            futhark_mc_task_129039.free_double_buffer_mem_121494 =
                double_buffer_mem_121494;
            futhark_mc_task_129039.free_defunc_2_radix_sort_step_arg_128050 =
                defunc_2_radix_sort_step_arg_128050;
            futhark_mc_task_129039.free_defunc_0_get_bit_arg_128051 =
                defunc_0_get_bit_arg_128051;
            futhark_mc_task_129039.free_cond_f_res_128052 = cond_f_res_128052;
            futhark_mc_task_129039.free_cond_f_res_128053 = cond_f_res_128053;
            
            struct scheduler_segop futhark_mc_task_129039_task;
            
            futhark_mc_task_129039_task.args = &futhark_mc_task_129039;
            futhark_mc_task_129039_task.top_level_fn =
                futhark_mc_segscan_task_129040;
            futhark_mc_task_129039_task.name = "futhark_mc_segscan_task_129040";
            futhark_mc_task_129039_task.iterations = n_112804;
            futhark_mc_task_129039_task.task_time =
                &ctx->futhark_mc_segscan_task_129040_total_time;
            futhark_mc_task_129039_task.task_iter =
                &ctx->futhark_mc_segscan_task_129040_total_iter;
            futhark_mc_task_129039_task.sched = STATIC;
            futhark_mc_task_129039_task.nested_fn = NULL;
            
            int futhark_mc_segscan_task_129040_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129039_task);
            
            if (futhark_mc_segscan_task_129040_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t last_res_128104 = ((int64_t *) mem_121216)[i_112880];
            int64_t last_res_128105 = ((int64_t *) mem_121219)[i_112880];
            int64_t last_res_128106 = ((int64_t *) mem_121222)[i_112880];
            
            memmove(mem_121231 + (int64_t) 0, double_buffer_mem_121494 +
                    (int64_t) 0, n_112804 * (int64_t) 4);
            
            int64_t flat_tid_118757 = (int64_t) 0;
            int32_t num_tasks_128173;
            struct futhark_mc_task_129049 futhark_mc_task_129049;
            
            futhark_mc_task_129049.ctx = ctx;
            futhark_mc_task_129049.free_n_112804 = n_112804;
            futhark_mc_task_129049.free_mem_121216 = mem_121216;
            futhark_mc_task_129049.free_mem_121219 = mem_121219;
            futhark_mc_task_129049.free_mem_121222 = mem_121222;
            futhark_mc_task_129049.free_mem_121225 = mem_121225;
            futhark_mc_task_129049.free_mem_121228 = mem_121228;
            futhark_mc_task_129049.free_mem_121231 = mem_121231;
            futhark_mc_task_129049.free_double_buffer_mem_121494 =
                double_buffer_mem_121494;
            futhark_mc_task_129049.free_last_res_128104 = last_res_128104;
            futhark_mc_task_129049.free_last_res_128105 = last_res_128105;
            futhark_mc_task_129049.free_last_res_128106 = last_res_128106;
            
            struct scheduler_segop futhark_mc_task_129049_task;
            
            futhark_mc_task_129049_task.args = &futhark_mc_task_129049;
            futhark_mc_task_129049_task.top_level_fn =
                futhark_mc_segmap_task_129050;
            futhark_mc_task_129049_task.name = "futhark_mc_segmap_task_129050";
            futhark_mc_task_129049_task.iterations = n_112804;
            futhark_mc_task_129049_task.task_time =
                &ctx->futhark_mc_segmap_task_129050_total_time;
            futhark_mc_task_129049_task.task_iter =
                &ctx->futhark_mc_segmap_task_129050_total_iter;
            futhark_mc_task_129049_task.sched = STATIC;
            futhark_mc_task_129049_task.nested_fn = NULL;
            
            int futhark_mc_segmap_task_129050_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129049_task);
            
            if (futhark_mc_segmap_task_129050_err != 0) {
                err = 1;
                goto cleanup;
            }
            memmove(double_buffer_mem_121494 + (int64_t) 0, mem_121231 +
                    (int64_t) 0, n_112804 * (int64_t) 4);
        }
        memmove(mem_121352.mem + gtid_118754 * n_112804 * (int64_t) 4,
                double_buffer_mem_121494 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121216);
    free(mem_121219);
    free(mem_121222);
    free(mem_121225);
    free(mem_121228);
    free(mem_121231);
    free(double_buffer_mem_121494);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129031_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129031_end -
                 futhark_mc_segmap_parloop_129031_start;
        
        ctx->futhark_mc_segmap_parloop_129031_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129031_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129031_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_129029(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118753 = tid;
    int num_tasks_127929 = info.nsubtasks;
    struct futhark_mc_task_129018 *futhark_mc_task_129018 =
                                  (struct futhark_mc_task_129018 *) args;
    struct futhark_context *ctx = futhark_mc_task_129018->ctx;
    uint64_t futhark_mc_segmap_nested_task_129029_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_129029_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129018->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129018->free_n_112804;
    int64_t i_112880 = futhark_mc_task_129018->free_i_112880;
    int32_t iters_114789 = futhark_mc_task_129018->free_iters_114789;
    int64_t bytes_119654 = futhark_mc_task_129018->free_bytes_119654;
    int64_t bytes_119697 = futhark_mc_task_129018->free_bytes_119697;
    struct memblock mem_121198 = {.desc ="mem_121198", .mem =
                                  futhark_mc_task_129018->free_mem_121198,
                                  .size =0, .references =NULL};
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_task_129018->free_mem_121352,
                                  .size =0, .references =NULL};
    int64_t double_buffer_sizze_121496 =
            futhark_mc_task_129018->free_double_buffer_sizze_121496;
    int64_t double_buffer_sizze_121500 =
            futhark_mc_task_129018->free_double_buffer_sizze_121500;
    int64_t iter_128047;
    struct futhark_mc_segmap_parloop_struct_129030
    futhark_mc_segmap_parloop_struct_129030;
    
    futhark_mc_segmap_parloop_struct_129030.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129030.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129030.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129030.free_i_112880 = i_112880;
    futhark_mc_segmap_parloop_struct_129030.free_iters_114789 = iters_114789;
    futhark_mc_segmap_parloop_struct_129030.free_bytes_119654 = bytes_119654;
    futhark_mc_segmap_parloop_struct_129030.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129030.free_mem_121198 = mem_121198.mem;
    futhark_mc_segmap_parloop_struct_129030.free_mem_121352 = mem_121352.mem;
    futhark_mc_segmap_parloop_struct_129030.free_double_buffer_sizze_121496 =
        double_buffer_sizze_121496;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129031_task;
    
    futhark_mc_segmap_parloop_129031_task.name =
        "futhark_mc_segmap_parloop_129031";
    futhark_mc_segmap_parloop_129031_task.fn = futhark_mc_segmap_parloop_129031;
    futhark_mc_segmap_parloop_129031_task.args =
        &futhark_mc_segmap_parloop_struct_129030;
    futhark_mc_segmap_parloop_129031_task.iterations = iterations;
    futhark_mc_segmap_parloop_129031_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129031_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129031_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129031_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129031_task);
    
    if (futhark_mc_segmap_parloop_129031_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129031_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129031_total_end -
                 futhark_mc_segmap_parloop_129031_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129031_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129031_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129031_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_129029_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_129029_end -
                 futhark_mc_segmap_nested_task_129029_start;
        
        ctx->futhark_mc_segmap_nested_task_129029_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_129029_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_129029_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129053 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_stl_res_112874;
    int64_t free_j_m_i_113240;
    char *free_mem_121352;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
};
struct futhark_mc_segmap_parloop_struct_129055 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_stl_res_112874;
    int64_t free_j_m_i_113240;
    char *free_mem_121352;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
};
static int futhark_mc_segmap_parloop_129056(void *args, int64_t start,
                                            int64_t end, int flat_tid_118844,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129055
    *futhark_mc_segmap_parloop_struct_129055 =
    (struct futhark_mc_segmap_parloop_struct_129055 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129055->ctx;
    uint64_t futhark_mc_segmap_parloop_129056_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129056_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129055->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129055->free_n_112804;
    int64_t stl_res_112874 =
            futhark_mc_segmap_parloop_struct_129055->free_stl_res_112874;
    int64_t j_m_i_113240 =
            futhark_mc_segmap_parloop_struct_129055->free_j_m_i_113240;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_segmap_parloop_struct_129055->free_mem_121352,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_segmap_parloop_struct_129055->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_segmap_parloop_struct_129055->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_segmap_parloop_struct_129055->free_mem_121361,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128196 = start;
    
    for (; iter_128196 < end; iter_128196++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128202 = m_112803;
        int64_t gtid_118845 = iter_128196;
        int64_t remnant_128203 = iter_128196 - gtid_118845;
        float defunc_2_reduce_res_114925;
        float redout_128198 = 0.0F;
        
        for (int64_t i_128197 = 0; i_128197 < j_m_i_113240; i_128197++) {
            int64_t slice_128199 = stl_res_112874 + i_128197;
            float x_128200 = ((float *) mem_121352.mem)[gtid_118845 * n_112804 +
                                                        slice_128199];
            float defunc_1_op_res_128201 = x_128200 + redout_128198;
            float redout_tmp_128204 = defunc_1_op_res_128201;
            
            redout_128198 = redout_tmp_128204;
        }
        defunc_2_reduce_res_114925 = redout_128198;
        
        float h_114930 = 3.0F * defunc_2_reduce_res_114925;
        float h9_114931 = 0.999F * h_114930;
        float h1_114932 = 1.0e-3F * h_114930;
        
        ((float *) mem_121355.mem)[gtid_118845] = h_114930;
        ((float *) mem_121358.mem)[gtid_118845] = h9_114931;
        ((float *) mem_121361.mem)[gtid_118845] = h1_114932;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129056_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129056_end -
                 futhark_mc_segmap_parloop_129056_start;
        
        ctx->futhark_mc_segmap_parloop_129056_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129056_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129056_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129054(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118844 = tid;
    int num_tasks_128195 = info.nsubtasks;
    struct futhark_mc_task_129053 *futhark_mc_task_129053 =
                                  (struct futhark_mc_task_129053 *) args;
    struct futhark_context *ctx = futhark_mc_task_129053->ctx;
    uint64_t futhark_mc_segmap_task_129054_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129054_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129053->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129053->free_n_112804;
    int64_t stl_res_112874 = futhark_mc_task_129053->free_stl_res_112874;
    int64_t j_m_i_113240 = futhark_mc_task_129053->free_j_m_i_113240;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_task_129053->free_mem_121352,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_task_129053->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_task_129053->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_task_129053->free_mem_121361,
                                  .size =0, .references =NULL};
    int64_t iter_128196;
    struct futhark_mc_segmap_parloop_struct_129055
    futhark_mc_segmap_parloop_struct_129055;
    
    futhark_mc_segmap_parloop_struct_129055.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129055.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129055.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129055.free_stl_res_112874 =
        stl_res_112874;
    futhark_mc_segmap_parloop_struct_129055.free_j_m_i_113240 = j_m_i_113240;
    futhark_mc_segmap_parloop_struct_129055.free_mem_121352 = mem_121352.mem;
    futhark_mc_segmap_parloop_struct_129055.free_mem_121355 = mem_121355.mem;
    futhark_mc_segmap_parloop_struct_129055.free_mem_121358 = mem_121358.mem;
    futhark_mc_segmap_parloop_struct_129055.free_mem_121361 = mem_121361.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129056_task;
    
    futhark_mc_segmap_parloop_129056_task.name =
        "futhark_mc_segmap_parloop_129056";
    futhark_mc_segmap_parloop_129056_task.fn = futhark_mc_segmap_parloop_129056;
    futhark_mc_segmap_parloop_129056_task.args =
        &futhark_mc_segmap_parloop_struct_129055;
    futhark_mc_segmap_parloop_129056_task.iterations = iterations;
    futhark_mc_segmap_parloop_129056_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129056_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129056_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129056_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129056_task);
    
    if (futhark_mc_segmap_parloop_129056_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129056_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129056_total_end -
                 futhark_mc_segmap_parloop_129056_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129056_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129056_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129056_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129054_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129054_end -
                 futhark_mc_segmap_task_129054_start;
        
        ctx->futhark_mc_segmap_task_129054_runs[tid]++;
        ctx->futhark_mc_segmap_task_129054_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129054_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_129058 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_stl_res_112874;
    int64_t free_j_m_i_113240;
    char *free_mem_121352;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
};
struct futhark_mc_task_129060 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_stl_res_112874;
    int64_t free_gtid_118847;
    char *free_mem_121352;
    float *retval_defunc_2_reduce_res_118851;
};
struct futhark_mc_segred_stage_1_parloop_struct_129063 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_stl_res_112874;
    int64_t free_gtid_118847;
    char *free_mem_121352;
    char *free_reduce_stage_1_tid_res_arr_mem_128214;
};
static int futhark_mc_segred_stage_1_parloop_129064(void *args, int64_t start,
                                                    int64_t end,
                                                    int flat_tid_118848,
                                                    int tid)
{
    int err = 0;
    struct futhark_mc_segred_stage_1_parloop_struct_129063
    *futhark_mc_segred_stage_1_parloop_struct_129063 =
    (struct futhark_mc_segred_stage_1_parloop_struct_129063 *) args;
    struct futhark_context *ctx =
                           futhark_mc_segred_stage_1_parloop_struct_129063->ctx;
    uint64_t futhark_mc_segred_stage_1_parloop_129064_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_129064_start = get_wall_time();
    
    int64_t n_112804 =
            futhark_mc_segred_stage_1_parloop_struct_129063->free_n_112804;
    int64_t stl_res_112874 =
            futhark_mc_segred_stage_1_parloop_struct_129063->free_stl_res_112874;
    int64_t gtid_118847 =
            futhark_mc_segred_stage_1_parloop_struct_129063->free_gtid_118847;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_segred_stage_1_parloop_struct_129063->free_mem_121352,
                                  .size =0, .references =NULL};
    struct memblock reduce_stage_1_tid_res_arr_mem_128214 = {.desc =
                                                             "reduce_stage_1_tid_res_arr_mem_128214",
                                                             .mem =
                                                             futhark_mc_segred_stage_1_parloop_struct_129063->free_reduce_stage_1_tid_res_arr_mem_128214,
                                                             .size =0,
                                                             .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128216 = start;
    float x_128206;
    float x_128207;
    float local_acc_128217 = 0.0F;
    
    for (; iter_128216 < end; iter_128216++) {
        int64_t gtid_118849 = iter_128216;
        int64_t slice_128209 = stl_res_112874 + gtid_118849;
        float x_128210 = ((float *) mem_121352.mem)[gtid_118847 * n_112804 +
                                                    slice_128209];
        
        // save map-out results
        { }
        // Load accum params
        {
            x_128206 = local_acc_128217;
        }
        // Load next params
        {
            x_128207 = x_128210;
        }
        // Red body
        {
            float defunc_1_op_res_128208 = x_128206 + x_128207;
            
            local_acc_128217 = defunc_1_op_res_128208;
        }
    }
    ((float *) reduce_stage_1_tid_res_arr_mem_128214.mem)[flat_tid_118848] =
        local_acc_128217;
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_129064_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_129064_end -
                 futhark_mc_segred_stage_1_parloop_129064_start;
        
        ctx->futhark_mc_segred_stage_1_parloop_129064_runs[tid]++;
        ctx->futhark_mc_segred_stage_1_parloop_129064_total_runtime[tid] +=
            elapsed;
        ctx->futhark_mc_segred_stage_1_parloop_129064_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segred_task_129061(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118848 = tid;
    int num_tasks_128213 = info.nsubtasks;
    struct futhark_mc_task_129060 *futhark_mc_task_129060 =
                                  (struct futhark_mc_task_129060 *) args;
    struct futhark_context *ctx = futhark_mc_task_129060->ctx;
    uint64_t futhark_mc_segred_task_129061_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_task_129061_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129060->free_n_112804;
    int64_t stl_res_112874 = futhark_mc_task_129060->free_stl_res_112874;
    int64_t gtid_118847 = futhark_mc_task_129060->free_gtid_118847;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_task_129060->free_mem_121352,
                                  .size =0, .references =NULL};
    float defunc_2_reduce_res_118851 =
          *futhark_mc_task_129060->retval_defunc_2_reduce_res_118851;
    size_t reduce_stage_1_tid_res_arr_mem_128214_cached_sizze_129062 = 0;
    char *reduce_stage_1_tid_res_arr_mem_128214 = NULL;
    
    if (reduce_stage_1_tid_res_arr_mem_128214_cached_sizze_129062 <
        (size_t) ((int64_t) 4 * num_tasks_128213)) {
        reduce_stage_1_tid_res_arr_mem_128214 =
            realloc(reduce_stage_1_tid_res_arr_mem_128214, (int64_t) 4 *
                    num_tasks_128213);
        reduce_stage_1_tid_res_arr_mem_128214_cached_sizze_129062 =
            (int64_t) 4 * num_tasks_128213;
    }
    
    int64_t iter_128216;
    struct futhark_mc_segred_stage_1_parloop_struct_129063
    futhark_mc_segred_stage_1_parloop_struct_129063;
    
    futhark_mc_segred_stage_1_parloop_struct_129063.ctx = ctx;
    futhark_mc_segred_stage_1_parloop_struct_129063.free_n_112804 = n_112804;
    futhark_mc_segred_stage_1_parloop_struct_129063.free_stl_res_112874 =
        stl_res_112874;
    futhark_mc_segred_stage_1_parloop_struct_129063.free_gtid_118847 =
        gtid_118847;
    futhark_mc_segred_stage_1_parloop_struct_129063.free_mem_121352 =
        mem_121352.mem;
    futhark_mc_segred_stage_1_parloop_struct_129063.free_reduce_stage_1_tid_res_arr_mem_128214 =
        reduce_stage_1_tid_res_arr_mem_128214;
    
    struct scheduler_parloop futhark_mc_segred_stage_1_parloop_129064_task;
    
    futhark_mc_segred_stage_1_parloop_129064_task.name =
        "futhark_mc_segred_stage_1_parloop_129064";
    futhark_mc_segred_stage_1_parloop_129064_task.fn =
        futhark_mc_segred_stage_1_parloop_129064;
    futhark_mc_segred_stage_1_parloop_129064_task.args =
        &futhark_mc_segred_stage_1_parloop_struct_129063;
    futhark_mc_segred_stage_1_parloop_129064_task.iterations = iterations;
    futhark_mc_segred_stage_1_parloop_129064_task.info = info;
    
    uint64_t futhark_mc_segred_stage_1_parloop_129064_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segred_stage_1_parloop_129064_total_start = get_wall_time();
    
    int futhark_mc_segred_stage_1_parloop_129064_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segred_stage_1_parloop_129064_task);
    
    if (futhark_mc_segred_stage_1_parloop_129064_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_stage_1_parloop_129064_total_end =
                 get_wall_time();
        uint64_t elapsed = futhark_mc_segred_stage_1_parloop_129064_total_end -
                 futhark_mc_segred_stage_1_parloop_129064_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_129064_total_runs,
                           1, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_129064_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segred_stage_1_parloop_129064_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    // neutral-initialise the output
    {
        defunc_2_reduce_res_118851 = 0.0F;
    }
    
    float x_128218;
    float x_128219;
    
    for (int32_t i_128221 = 0; i_128221 < num_tasks_128213; i_128221++) {
        flat_tid_118848 = i_128221;
        // Apply main thread reduction
        {
            // load acc params
            {
                x_128218 = defunc_2_reduce_res_118851;
            }
            // load next params
            {
                x_128219 =
                    ((float *) reduce_stage_1_tid_res_arr_mem_128214)[flat_tid_118848];
            }
            // red body
            {
                float defunc_1_op_res_128220 = x_128218 + x_128219;
                
                defunc_2_reduce_res_118851 = defunc_1_op_res_128220;
            }
        }
    }
    free(reduce_stage_1_tid_res_arr_mem_128214);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segred_task_129061_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segred_task_129061_end -
                 futhark_mc_segred_task_129061_start;
        
        ctx->futhark_mc_segred_task_129061_runs[tid]++;
        ctx->futhark_mc_segred_task_129061_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segred_task_129061_iter[tid] += iterations;
    }
    *futhark_mc_task_129060->retval_defunc_2_reduce_res_118851 =
        defunc_2_reduce_res_118851;
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_129059(void *args, int64_t start,
                                            int64_t end, int flat_tid_118846,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129058
    *futhark_mc_segmap_parloop_struct_129058 =
    (struct futhark_mc_segmap_parloop_struct_129058 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129058->ctx;
    uint64_t futhark_mc_segmap_parloop_129059_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129059_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129058->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129058->free_n_112804;
    int64_t stl_res_112874 =
            futhark_mc_segmap_parloop_struct_129058->free_stl_res_112874;
    int64_t j_m_i_113240 =
            futhark_mc_segmap_parloop_struct_129058->free_j_m_i_113240;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_segmap_parloop_struct_129058->free_mem_121352,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_segmap_parloop_struct_129058->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_segmap_parloop_struct_129058->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_segmap_parloop_struct_129058->free_mem_121361,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128205 = start;
    
    for (; iter_128205 < end; iter_128205++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128211 = m_112803;
        int64_t gtid_118847 = iter_128205;
        int64_t remnant_128212 = iter_128205 - gtid_118847;
        float defunc_2_reduce_res_118851;
        int64_t flat_tid_118848 = (int64_t) 0;
        int32_t num_tasks_128213;
        struct futhark_mc_task_129060 futhark_mc_task_129060;
        
        futhark_mc_task_129060.ctx = ctx;
        futhark_mc_task_129060.free_n_112804 = n_112804;
        futhark_mc_task_129060.free_stl_res_112874 = stl_res_112874;
        futhark_mc_task_129060.free_gtid_118847 = gtid_118847;
        futhark_mc_task_129060.free_mem_121352 = mem_121352.mem;
        futhark_mc_task_129060.retval_defunc_2_reduce_res_118851 =
            &defunc_2_reduce_res_118851;
        
        struct scheduler_segop futhark_mc_task_129060_task;
        
        futhark_mc_task_129060_task.args = &futhark_mc_task_129060;
        futhark_mc_task_129060_task.top_level_fn =
            futhark_mc_segred_task_129061;
        futhark_mc_task_129060_task.name = "futhark_mc_segred_task_129061";
        futhark_mc_task_129060_task.iterations = j_m_i_113240;
        futhark_mc_task_129060_task.task_time =
            &ctx->futhark_mc_segred_task_129061_total_time;
        futhark_mc_task_129060_task.task_iter =
            &ctx->futhark_mc_segred_task_129061_total_iter;
        futhark_mc_task_129060_task.sched = STATIC;
        futhark_mc_task_129060_task.nested_fn = NULL;
        
        int futhark_mc_segred_task_129061_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_129060_task);
        
        if (futhark_mc_segred_task_129061_err != 0) {
            err = 1;
            goto cleanup;
        }
        
        float h_118856 = 3.0F * defunc_2_reduce_res_118851;
        float h9_118857 = 0.999F * h_118856;
        float h1_118858 = 1.0e-3F * h_118856;
        
        ((float *) mem_121355.mem)[gtid_118847] = h_118856;
        ((float *) mem_121358.mem)[gtid_118847] = h9_118857;
        ((float *) mem_121361.mem)[gtid_118847] = h1_118858;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129059_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129059_end -
                 futhark_mc_segmap_parloop_129059_start;
        
        ctx->futhark_mc_segmap_parloop_129059_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129059_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129059_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_129057(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118846 = tid;
    int num_tasks_128195 = info.nsubtasks;
    struct futhark_mc_task_129053 *futhark_mc_task_129053 =
                                  (struct futhark_mc_task_129053 *) args;
    struct futhark_context *ctx = futhark_mc_task_129053->ctx;
    uint64_t futhark_mc_segmap_nested_task_129057_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_129057_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129053->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129053->free_n_112804;
    int64_t stl_res_112874 = futhark_mc_task_129053->free_stl_res_112874;
    int64_t j_m_i_113240 = futhark_mc_task_129053->free_j_m_i_113240;
    struct memblock mem_121352 = {.desc ="mem_121352", .mem =
                                  futhark_mc_task_129053->free_mem_121352,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_task_129053->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_task_129053->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_task_129053->free_mem_121361,
                                  .size =0, .references =NULL};
    int64_t iter_128205;
    struct futhark_mc_segmap_parloop_struct_129058
    futhark_mc_segmap_parloop_struct_129058;
    
    futhark_mc_segmap_parloop_struct_129058.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129058.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129058.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129058.free_stl_res_112874 =
        stl_res_112874;
    futhark_mc_segmap_parloop_struct_129058.free_j_m_i_113240 = j_m_i_113240;
    futhark_mc_segmap_parloop_struct_129058.free_mem_121352 = mem_121352.mem;
    futhark_mc_segmap_parloop_struct_129058.free_mem_121355 = mem_121355.mem;
    futhark_mc_segmap_parloop_struct_129058.free_mem_121358 = mem_121358.mem;
    futhark_mc_segmap_parloop_struct_129058.free_mem_121361 = mem_121361.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129059_task;
    
    futhark_mc_segmap_parloop_129059_task.name =
        "futhark_mc_segmap_parloop_129059";
    futhark_mc_segmap_parloop_129059_task.fn = futhark_mc_segmap_parloop_129059;
    futhark_mc_segmap_parloop_129059_task.args =
        &futhark_mc_segmap_parloop_struct_129058;
    futhark_mc_segmap_parloop_129059_task.iterations = iterations;
    futhark_mc_segmap_parloop_129059_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129059_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129059_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129059_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129059_task);
    
    if (futhark_mc_segmap_parloop_129059_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129059_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129059_total_end -
                 futhark_mc_segmap_parloop_129059_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129059_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129059_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129059_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_129057_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_129057_end -
                 futhark_mc_segmap_nested_task_129057_start;
        
        ctx->futhark_mc_segmap_nested_task_129057_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_129057_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_129057_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129065 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
    char *free_mem_121383;
};
struct futhark_mc_segmap_parloop_struct_129067 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
    char *free_mem_121383;
};
static int futhark_mc_segmap_parloop_129068(void *args, int64_t start,
                                            int64_t end, int flat_tid_118859,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129067
    *futhark_mc_segmap_parloop_struct_129067 =
    (struct futhark_mc_segmap_parloop_struct_129067 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129067->ctx;
    uint64_t futhark_mc_segmap_parloop_129068_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129068_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129067->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129067->free_n_112804;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129067->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129067->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_segmap_parloop_struct_129067->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_segmap_parloop_struct_129067->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_segmap_parloop_struct_129067->free_mem_121361,
                                  .size =0, .references =NULL};
    struct memblock mem_121383 = {.desc ="mem_121383", .mem =
                                  futhark_mc_segmap_parloop_struct_129067->free_mem_121383,
                                  .size =0, .references =NULL};
    size_t mem_121367_cached_sizze_129069 = 0;
    char *mem_121367 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128223 = start;
    
    if (mem_121367_cached_sizze_129069 < (size_t) bytes_119697) {
        mem_121367 = realloc(mem_121367, bytes_119697);
        mem_121367_cached_sizze_129069 = bytes_119697;
    }
    for (; iter_128223 < end; iter_128223++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128244 = m_112803;
        int64_t gtid_118860 = iter_128223;
        int64_t remnant_128245 = iter_128223 - gtid_118860;
        float x_114938 = ((float *) mem_121355.mem)[gtid_118860];
        float x_114939 = ((float *) mem_121358.mem)[gtid_118860];
        float x_114940 = ((float *) mem_121361.mem)[gtid_118860];
        
        for (int64_t i_128224 = 0; i_128224 < n_112804; i_128224++) {
            float x_128226 = ((float *) mem_121176.mem)[gtid_118860 * n_112804 +
                                                        i_128224];
            float x_128227 = x_128226 / x_114938;
            float y_128228 = fpow32(x_128227, 2.0F);
            float x_128229 = 1.0F - y_128228;
            float bicube_128230 = fpow32(x_128229, 2.0F);
            bool isnan_res_128231;
            
            isnan_res_128231 = futrts_isnan32(x_128226);
            
            bool cond_f_res_128232 = x_128226 <= x_114940;
            bool x_128233 = !isnan_res_128231;
            bool y_128234 = cond_f_res_128232 && x_128233;
            bool cond_128235 = isnan_res_128231 || y_128234;
            float defunc_0_f_res_128236;
            
            if (cond_128235) {
                defunc_0_f_res_128236 = 1.0F;
            } else {
                bool cond_128237 = x_114939 <= x_128226;
                bool cond_f_res_128238 = x_128226 <= 1.0e-6F;
                bool x_128239 = !cond_128237;
                bool y_128240 = cond_f_res_128238 && x_128239;
                bool cond_128241 = cond_128237 || y_128240;
                float defunc_0_f_res_f_res_128242;
                
                if (cond_128241) {
                    defunc_0_f_res_f_res_128242 = 1.0e-6F;
                } else {
                    defunc_0_f_res_f_res_128242 = bicube_128230;
                }
                defunc_0_f_res_128236 = defunc_0_f_res_f_res_128242;
            }
            ((float *) mem_121367)[i_128224] = defunc_0_f_res_128236;
        }
        memmove(mem_121383.mem + gtid_118860 * n_112804 * (int64_t) 4,
                mem_121367 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121367);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129068_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129068_end -
                 futhark_mc_segmap_parloop_129068_start;
        
        ctx->futhark_mc_segmap_parloop_129068_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129068_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129068_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129066(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118859 = tid;
    int num_tasks_128222 = info.nsubtasks;
    struct futhark_mc_task_129065 *futhark_mc_task_129065 =
                                  (struct futhark_mc_task_129065 *) args;
    struct futhark_context *ctx = futhark_mc_task_129065->ctx;
    uint64_t futhark_mc_segmap_task_129066_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129066_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129065->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129065->free_n_112804;
    int64_t bytes_119697 = futhark_mc_task_129065->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129065->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_task_129065->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_task_129065->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_task_129065->free_mem_121361,
                                  .size =0, .references =NULL};
    struct memblock mem_121383 = {.desc ="mem_121383", .mem =
                                  futhark_mc_task_129065->free_mem_121383,
                                  .size =0, .references =NULL};
    int64_t iter_128223;
    struct futhark_mc_segmap_parloop_struct_129067
    futhark_mc_segmap_parloop_struct_129067;
    
    futhark_mc_segmap_parloop_struct_129067.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129067.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129067.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129067.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129067.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129067.free_mem_121355 = mem_121355.mem;
    futhark_mc_segmap_parloop_struct_129067.free_mem_121358 = mem_121358.mem;
    futhark_mc_segmap_parloop_struct_129067.free_mem_121361 = mem_121361.mem;
    futhark_mc_segmap_parloop_struct_129067.free_mem_121383 = mem_121383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129068_task;
    
    futhark_mc_segmap_parloop_129068_task.name =
        "futhark_mc_segmap_parloop_129068";
    futhark_mc_segmap_parloop_129068_task.fn = futhark_mc_segmap_parloop_129068;
    futhark_mc_segmap_parloop_129068_task.args =
        &futhark_mc_segmap_parloop_struct_129067;
    futhark_mc_segmap_parloop_129068_task.iterations = iterations;
    futhark_mc_segmap_parloop_129068_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129068_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129068_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129068_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129068_task);
    
    if (futhark_mc_segmap_parloop_129068_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129068_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129068_total_end -
                 futhark_mc_segmap_parloop_129068_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129068_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129068_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129068_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129066_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129066_end -
                 futhark_mc_segmap_task_129066_start;
        
        ctx->futhark_mc_segmap_task_129066_runs[tid]++;
        ctx->futhark_mc_segmap_task_129066_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129066_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_129071 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    int64_t free_bytes_119697;
    char *free_mem_121176;
    char *free_mem_121355;
    char *free_mem_121358;
    char *free_mem_121361;
    char *free_mem_121383;
};
struct futhark_mc_task_129074 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118862;
    float free_x_118866;
    float free_x_118867;
    float free_x_118868;
    char *free_mem_121176;
    char *free_mem_121364;
};
struct futhark_mc_segmap_parloop_struct_129076 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118862;
    float free_x_118866;
    float free_x_118867;
    float free_x_118868;
    char *free_mem_121176;
    char *free_mem_121364;
};
static int futhark_mc_segmap_parloop_129077(void *args, int64_t start,
                                            int64_t end, int flat_tid_118863,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129076
    *futhark_mc_segmap_parloop_struct_129076 =
    (struct futhark_mc_segmap_parloop_struct_129076 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129076->ctx;
    uint64_t futhark_mc_segmap_parloop_129077_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129077_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129076->free_n_112804;
    int64_t gtid_118862 =
            futhark_mc_segmap_parloop_struct_129076->free_gtid_118862;
    float x_118866 = futhark_mc_segmap_parloop_struct_129076->free_x_118866;
    float x_118867 = futhark_mc_segmap_parloop_struct_129076->free_x_118867;
    float x_118868 = futhark_mc_segmap_parloop_struct_129076->free_x_118868;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129076->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121364 = {.desc ="mem_121364", .mem =
                                  futhark_mc_segmap_parloop_struct_129076->free_mem_121364,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128268 = start;
    
    for (; iter_128268 < end; iter_128268++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128275 = n_112804;
        int64_t gtid_118864 = iter_128268;
        int64_t remnant_128276 = iter_128268 - gtid_118864;
        float x_128248 = ((float *) mem_121176.mem)[gtid_118862 * n_112804 +
                                                    gtid_118864];
        float x_128249 = x_128248 / x_118866;
        float y_128250 = fpow32(x_128249, 2.0F);
        float x_128251 = 1.0F - y_128250;
        float bicube_128252 = fpow32(x_128251, 2.0F);
        bool isnan_res_128253;
        
        isnan_res_128253 = futrts_isnan32(x_128248);
        
        bool cond_f_res_128254 = x_128248 <= x_118868;
        bool x_128255 = !isnan_res_128253;
        bool y_128256 = cond_f_res_128254 && x_128255;
        bool cond_128257 = isnan_res_128253 || y_128256;
        float defunc_0_f_res_128258;
        
        if (cond_128257) {
            defunc_0_f_res_128258 = 1.0F;
        } else {
            bool cond_128269 = x_118867 <= x_128248;
            bool cond_f_res_128270 = x_128248 <= 1.0e-6F;
            bool x_128271 = !cond_128269;
            bool y_128272 = cond_f_res_128270 && x_128271;
            bool cond_128273 = cond_128269 || y_128272;
            float defunc_0_f_res_f_res_128274;
            
            if (cond_128273) {
                defunc_0_f_res_f_res_128274 = 1.0e-6F;
            } else {
                defunc_0_f_res_f_res_128274 = bicube_128252;
            }
            defunc_0_f_res_128258 = defunc_0_f_res_f_res_128274;
        }
        ((float *) mem_121364.mem)[gtid_118864] = defunc_0_f_res_128258;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129077_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129077_end -
                 futhark_mc_segmap_parloop_129077_start;
        
        ctx->futhark_mc_segmap_parloop_129077_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129077_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129077_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129075(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118863 = tid;
    int num_tasks_128267 = info.nsubtasks;
    struct futhark_mc_task_129074 *futhark_mc_task_129074 =
                                  (struct futhark_mc_task_129074 *) args;
    struct futhark_context *ctx = futhark_mc_task_129074->ctx;
    uint64_t futhark_mc_segmap_task_129075_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129075_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129074->free_n_112804;
    int64_t gtid_118862 = futhark_mc_task_129074->free_gtid_118862;
    float x_118866 = futhark_mc_task_129074->free_x_118866;
    float x_118867 = futhark_mc_task_129074->free_x_118867;
    float x_118868 = futhark_mc_task_129074->free_x_118868;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129074->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121364 = {.desc ="mem_121364", .mem =
                                  futhark_mc_task_129074->free_mem_121364,
                                  .size =0, .references =NULL};
    int64_t iter_128268;
    struct futhark_mc_segmap_parloop_struct_129076
    futhark_mc_segmap_parloop_struct_129076;
    
    futhark_mc_segmap_parloop_struct_129076.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129076.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129076.free_gtid_118862 = gtid_118862;
    futhark_mc_segmap_parloop_struct_129076.free_x_118866 = x_118866;
    futhark_mc_segmap_parloop_struct_129076.free_x_118867 = x_118867;
    futhark_mc_segmap_parloop_struct_129076.free_x_118868 = x_118868;
    futhark_mc_segmap_parloop_struct_129076.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129076.free_mem_121364 = mem_121364.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129077_task;
    
    futhark_mc_segmap_parloop_129077_task.name =
        "futhark_mc_segmap_parloop_129077";
    futhark_mc_segmap_parloop_129077_task.fn = futhark_mc_segmap_parloop_129077;
    futhark_mc_segmap_parloop_129077_task.args =
        &futhark_mc_segmap_parloop_struct_129076;
    futhark_mc_segmap_parloop_129077_task.iterations = iterations;
    futhark_mc_segmap_parloop_129077_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129077_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129077_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129077_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129077_task);
    
    if (futhark_mc_segmap_parloop_129077_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129077_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129077_total_end -
                 futhark_mc_segmap_parloop_129077_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129077_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129077_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129077_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129075_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129075_end -
                 futhark_mc_segmap_task_129075_start;
        
        ctx->futhark_mc_segmap_task_129075_runs[tid]++;
        ctx->futhark_mc_segmap_task_129075_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129075_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_129072(void *args, int64_t start,
                                            int64_t end, int flat_tid_118861,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129071
    *futhark_mc_segmap_parloop_struct_129071 =
    (struct futhark_mc_segmap_parloop_struct_129071 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129071->ctx;
    uint64_t futhark_mc_segmap_parloop_129072_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129072_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129071->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129071->free_n_112804;
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129071->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_segmap_parloop_struct_129071->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_segmap_parloop_struct_129071->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_segmap_parloop_struct_129071->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_segmap_parloop_struct_129071->free_mem_121361,
                                  .size =0, .references =NULL};
    struct memblock mem_121383 = {.desc ="mem_121383", .mem =
                                  futhark_mc_segmap_parloop_struct_129071->free_mem_121383,
                                  .size =0, .references =NULL};
    size_t mem_121364_cached_sizze_129073 = 0;
    char *mem_121364 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128247 = start;
    
    if (mem_121364_cached_sizze_129073 < (size_t) bytes_119697) {
        mem_121364 = realloc(mem_121364, bytes_119697);
        mem_121364_cached_sizze_129073 = bytes_119697;
    }
    for (; iter_128247 < end; iter_128247++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128265 = m_112803;
        int64_t gtid_118862 = iter_128247;
        int64_t remnant_128266 = iter_128247 - gtid_118862;
        float x_118866 = ((float *) mem_121355.mem)[gtid_118862];
        float x_118867 = ((float *) mem_121358.mem)[gtid_118862];
        float x_118868 = ((float *) mem_121361.mem)[gtid_118862];
        int64_t flat_tid_118863 = (int64_t) 0;
        int32_t num_tasks_128267;
        struct futhark_mc_task_129074 futhark_mc_task_129074;
        
        futhark_mc_task_129074.ctx = ctx;
        futhark_mc_task_129074.free_n_112804 = n_112804;
        futhark_mc_task_129074.free_gtid_118862 = gtid_118862;
        futhark_mc_task_129074.free_x_118866 = x_118866;
        futhark_mc_task_129074.free_x_118867 = x_118867;
        futhark_mc_task_129074.free_x_118868 = x_118868;
        futhark_mc_task_129074.free_mem_121176 = mem_121176.mem;
        futhark_mc_task_129074.free_mem_121364 = mem_121364;
        
        struct scheduler_segop futhark_mc_task_129074_task;
        
        futhark_mc_task_129074_task.args = &futhark_mc_task_129074;
        futhark_mc_task_129074_task.top_level_fn =
            futhark_mc_segmap_task_129075;
        futhark_mc_task_129074_task.name = "futhark_mc_segmap_task_129075";
        futhark_mc_task_129074_task.iterations = n_112804;
        futhark_mc_task_129074_task.task_time =
            &ctx->futhark_mc_segmap_task_129075_total_time;
        futhark_mc_task_129074_task.task_iter =
            &ctx->futhark_mc_segmap_task_129075_total_iter;
        futhark_mc_task_129074_task.sched = STATIC;
        futhark_mc_task_129074_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_129075_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_129074_task);
        
        if (futhark_mc_segmap_task_129075_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121383.mem + gtid_118862 * n_112804 * (int64_t) 4,
                mem_121364 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121364);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129072_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129072_end -
                 futhark_mc_segmap_parloop_129072_start;
        
        ctx->futhark_mc_segmap_parloop_129072_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129072_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129072_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_129070(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118861 = tid;
    int num_tasks_128222 = info.nsubtasks;
    struct futhark_mc_task_129065 *futhark_mc_task_129065 =
                                  (struct futhark_mc_task_129065 *) args;
    struct futhark_context *ctx = futhark_mc_task_129065->ctx;
    uint64_t futhark_mc_segmap_nested_task_129070_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_129070_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129065->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129065->free_n_112804;
    int64_t bytes_119697 = futhark_mc_task_129065->free_bytes_119697;
    struct memblock mem_121176 = {.desc ="mem_121176", .mem =
                                  futhark_mc_task_129065->free_mem_121176,
                                  .size =0, .references =NULL};
    struct memblock mem_121355 = {.desc ="mem_121355", .mem =
                                  futhark_mc_task_129065->free_mem_121355,
                                  .size =0, .references =NULL};
    struct memblock mem_121358 = {.desc ="mem_121358", .mem =
                                  futhark_mc_task_129065->free_mem_121358,
                                  .size =0, .references =NULL};
    struct memblock mem_121361 = {.desc ="mem_121361", .mem =
                                  futhark_mc_task_129065->free_mem_121361,
                                  .size =0, .references =NULL};
    struct memblock mem_121383 = {.desc ="mem_121383", .mem =
                                  futhark_mc_task_129065->free_mem_121383,
                                  .size =0, .references =NULL};
    int64_t iter_128247;
    struct futhark_mc_segmap_parloop_struct_129071
    futhark_mc_segmap_parloop_struct_129071;
    
    futhark_mc_segmap_parloop_struct_129071.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129071.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129071.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129071.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129071.free_mem_121176 = mem_121176.mem;
    futhark_mc_segmap_parloop_struct_129071.free_mem_121355 = mem_121355.mem;
    futhark_mc_segmap_parloop_struct_129071.free_mem_121358 = mem_121358.mem;
    futhark_mc_segmap_parloop_struct_129071.free_mem_121361 = mem_121361.mem;
    futhark_mc_segmap_parloop_struct_129071.free_mem_121383 = mem_121383.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129072_task;
    
    futhark_mc_segmap_parloop_129072_task.name =
        "futhark_mc_segmap_parloop_129072";
    futhark_mc_segmap_parloop_129072_task.fn = futhark_mc_segmap_parloop_129072;
    futhark_mc_segmap_parloop_129072_task.args =
        &futhark_mc_segmap_parloop_struct_129071;
    futhark_mc_segmap_parloop_129072_task.iterations = iterations;
    futhark_mc_segmap_parloop_129072_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129072_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129072_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129072_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129072_task);
    
    if (futhark_mc_segmap_parloop_129072_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129072_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129072_total_end -
                 futhark_mc_segmap_parloop_129072_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129072_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129072_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129072_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_129070_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_129070_end -
                 futhark_mc_segmap_nested_task_129070_start;
        
        ctx->futhark_mc_segmap_nested_task_129070_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_129070_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_129070_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_task_129078 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121393;
    char *free_ext_mem_121394;
    int64_t free_ext_121405;
    char *free_mem_121437;
};
struct futhark_mc_segmap_parloop_struct_129080 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121393;
    char *free_ext_mem_121394;
    int64_t free_ext_121405;
    char *free_mem_121437;
};
static int futhark_mc_segmap_parloop_129081(void *args, int64_t start,
                                            int64_t end, int flat_tid_118887,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129080
    *futhark_mc_segmap_parloop_struct_129080 =
    (struct futhark_mc_segmap_parloop_struct_129080 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129080->ctx;
    uint64_t futhark_mc_segmap_parloop_129081_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129081_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129080->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129080->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_129080->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129080->free_bytes_119697;
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_segmap_parloop_struct_129080->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_segmap_parloop_struct_129080->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 =
            futhark_mc_segmap_parloop_struct_129080->free_ext_121405;
    struct memblock mem_121437 = {.desc ="mem_121437", .mem =
                                  futhark_mc_segmap_parloop_struct_129080->free_mem_121437,
                                  .size =0, .references =NULL};
    size_t mem_121421_cached_sizze_129082 = 0;
    char *mem_121421 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128278 = start;
    
    if (mem_121421_cached_sizze_129082 < (size_t) bytes_119697) {
        mem_121421 = realloc(mem_121421, bytes_119697);
        mem_121421_cached_sizze_129082 = bytes_119697;
    }
    for (; iter_128278 < end; iter_128278++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128287 = m_112803;
        int64_t gtid_118888 = iter_128278;
        int64_t remnant_128288 = iter_128278 - gtid_118888;
        
        for (int64_t i_128279 = 0; i_128279 < n_112804; i_128279++) {
            float x_128281 = ((float *) Y_mem_119653.mem)[gtid_118888 *
                                                          n_112804 + i_128279];
            float x_128282 = ((float *) ext_mem_121394.mem)[gtid_118888 *
                                                            n_112804 +
                                                            i_128279];
            float x_128283 = ((float *) ext_mem_121393.mem)[gtid_118888 *
                                                            ext_121405 +
                                                            i_128279];
            float x_128284 = x_128281 - x_128282;
            float defunc_2_f_res_128285 = x_128284 - x_128283;
            
            ((float *) mem_121421)[i_128279] = defunc_2_f_res_128285;
        }
        memmove(mem_121437.mem + gtid_118888 * n_112804 * (int64_t) 4,
                mem_121421 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121421);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129081_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129081_end -
                 futhark_mc_segmap_parloop_129081_start;
        
        ctx->futhark_mc_segmap_parloop_129081_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129081_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129081_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129079(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118887 = tid;
    int num_tasks_128277 = info.nsubtasks;
    struct futhark_mc_task_129078 *futhark_mc_task_129078 =
                                  (struct futhark_mc_task_129078 *) args;
    struct futhark_context *ctx = futhark_mc_task_129078->ctx;
    uint64_t futhark_mc_segmap_task_129079_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129079_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129078->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129078->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_129078->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_129078->free_bytes_119697;
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_task_129078->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_task_129078->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 = futhark_mc_task_129078->free_ext_121405;
    struct memblock mem_121437 = {.desc ="mem_121437", .mem =
                                  futhark_mc_task_129078->free_mem_121437,
                                  .size =0, .references =NULL};
    int64_t iter_128278;
    struct futhark_mc_segmap_parloop_struct_129080
    futhark_mc_segmap_parloop_struct_129080;
    
    futhark_mc_segmap_parloop_struct_129080.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129080.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129080.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129080.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_129080.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129080.free_ext_mem_121393 =
        ext_mem_121393.mem;
    futhark_mc_segmap_parloop_struct_129080.free_ext_mem_121394 =
        ext_mem_121394.mem;
    futhark_mc_segmap_parloop_struct_129080.free_ext_121405 = ext_121405;
    futhark_mc_segmap_parloop_struct_129080.free_mem_121437 = mem_121437.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129081_task;
    
    futhark_mc_segmap_parloop_129081_task.name =
        "futhark_mc_segmap_parloop_129081";
    futhark_mc_segmap_parloop_129081_task.fn = futhark_mc_segmap_parloop_129081;
    futhark_mc_segmap_parloop_129081_task.args =
        &futhark_mc_segmap_parloop_struct_129080;
    futhark_mc_segmap_parloop_129081_task.iterations = iterations;
    futhark_mc_segmap_parloop_129081_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129081_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129081_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129081_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129081_task);
    
    if (futhark_mc_segmap_parloop_129081_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129081_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129081_total_end -
                 futhark_mc_segmap_parloop_129081_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129081_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129081_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129081_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129079_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129079_end -
                 futhark_mc_segmap_task_129079_start;
        
        ctx->futhark_mc_segmap_task_129079_runs[tid]++;
        ctx->futhark_mc_segmap_task_129079_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129079_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_mc_segmap_parloop_struct_129084 {
    struct futhark_context *ctx;
    int64_t free_m_112803;
    int64_t free_n_112804;
    char *free_Y_mem_119653;
    int64_t free_bytes_119697;
    char *free_ext_mem_121393;
    char *free_ext_mem_121394;
    int64_t free_ext_121405;
    char *free_mem_121437;
};
struct futhark_mc_task_129087 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118890;
    char *free_Y_mem_119653;
    char *free_ext_mem_121393;
    char *free_ext_mem_121394;
    int64_t free_ext_121405;
    char *free_mem_121418;
};
struct futhark_mc_segmap_parloop_struct_129089 {
    struct futhark_context *ctx;
    int64_t free_n_112804;
    int64_t free_gtid_118890;
    char *free_Y_mem_119653;
    char *free_ext_mem_121393;
    char *free_ext_mem_121394;
    int64_t free_ext_121405;
    char *free_mem_121418;
};
static int futhark_mc_segmap_parloop_129090(void *args, int64_t start,
                                            int64_t end, int flat_tid_118891,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129089
    *futhark_mc_segmap_parloop_struct_129089 =
    (struct futhark_mc_segmap_parloop_struct_129089 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129089->ctx;
    uint64_t futhark_mc_segmap_parloop_129090_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129090_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129089->free_n_112804;
    int64_t gtid_118890 =
            futhark_mc_segmap_parloop_struct_129089->free_gtid_118890;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_129089->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_segmap_parloop_struct_129089->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_segmap_parloop_struct_129089->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 =
            futhark_mc_segmap_parloop_struct_129089->free_ext_121405;
    struct memblock mem_121418 = {.desc ="mem_121418", .mem =
                                  futhark_mc_segmap_parloop_struct_129089->free_mem_121418,
                                  .size =0, .references =NULL};
    int64_t iterations = end - start;
    int64_t iter_128299 = start;
    
    for (; iter_128299 < end; iter_128299++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128300 = n_112804;
        int64_t gtid_118892 = iter_128299;
        int64_t remnant_128301 = iter_128299 - gtid_118892;
        float x_128291 = ((float *) Y_mem_119653.mem)[gtid_118890 * n_112804 +
                                                      gtid_118892];
        float x_128292 = ((float *) ext_mem_121394.mem)[gtid_118890 * n_112804 +
                                                        gtid_118892];
        float x_128293 = ((float *) ext_mem_121393.mem)[gtid_118890 *
                                                        ext_121405 +
                                                        gtid_118892];
        float x_128294 = x_128291 - x_128292;
        float defunc_2_f_res_128295 = x_128294 - x_128293;
        
        ((float *) mem_121418.mem)[gtid_118892] = defunc_2_f_res_128295;
    }
    
  cleanup:
    { }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129090_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129090_end -
                 futhark_mc_segmap_parloop_129090_start;
        
        ctx->futhark_mc_segmap_parloop_129090_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129090_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129090_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_task_129088(void *args, int64_t iterations, int tid,
                                  struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118891 = tid;
    int num_tasks_128298 = info.nsubtasks;
    struct futhark_mc_task_129087 *futhark_mc_task_129087 =
                                  (struct futhark_mc_task_129087 *) args;
    struct futhark_context *ctx = futhark_mc_task_129087->ctx;
    uint64_t futhark_mc_segmap_task_129088_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_task_129088_start = get_wall_time();
    
    int64_t n_112804 = futhark_mc_task_129087->free_n_112804;
    int64_t gtid_118890 = futhark_mc_task_129087->free_gtid_118890;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_129087->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_task_129087->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_task_129087->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 = futhark_mc_task_129087->free_ext_121405;
    struct memblock mem_121418 = {.desc ="mem_121418", .mem =
                                  futhark_mc_task_129087->free_mem_121418,
                                  .size =0, .references =NULL};
    int64_t iter_128299;
    struct futhark_mc_segmap_parloop_struct_129089
    futhark_mc_segmap_parloop_struct_129089;
    
    futhark_mc_segmap_parloop_struct_129089.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129089.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129089.free_gtid_118890 = gtid_118890;
    futhark_mc_segmap_parloop_struct_129089.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_129089.free_ext_mem_121393 =
        ext_mem_121393.mem;
    futhark_mc_segmap_parloop_struct_129089.free_ext_mem_121394 =
        ext_mem_121394.mem;
    futhark_mc_segmap_parloop_struct_129089.free_ext_121405 = ext_121405;
    futhark_mc_segmap_parloop_struct_129089.free_mem_121418 = mem_121418.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129090_task;
    
    futhark_mc_segmap_parloop_129090_task.name =
        "futhark_mc_segmap_parloop_129090";
    futhark_mc_segmap_parloop_129090_task.fn = futhark_mc_segmap_parloop_129090;
    futhark_mc_segmap_parloop_129090_task.args =
        &futhark_mc_segmap_parloop_struct_129089;
    futhark_mc_segmap_parloop_129090_task.iterations = iterations;
    futhark_mc_segmap_parloop_129090_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129090_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129090_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129090_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129090_task);
    
    if (futhark_mc_segmap_parloop_129090_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129090_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129090_total_end -
                 futhark_mc_segmap_parloop_129090_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129090_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129090_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129090_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_task_129088_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_task_129088_end -
                 futhark_mc_segmap_task_129088_start;
        
        ctx->futhark_mc_segmap_task_129088_runs[tid]++;
        ctx->futhark_mc_segmap_task_129088_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_task_129088_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
static int futhark_mc_segmap_parloop_129085(void *args, int64_t start,
                                            int64_t end, int flat_tid_118889,
                                            int tid)
{
    int err = 0;
    struct futhark_mc_segmap_parloop_struct_129084
    *futhark_mc_segmap_parloop_struct_129084 =
    (struct futhark_mc_segmap_parloop_struct_129084 *) args;
    struct futhark_context *ctx = futhark_mc_segmap_parloop_struct_129084->ctx;
    uint64_t futhark_mc_segmap_parloop_129085_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129085_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_segmap_parloop_struct_129084->free_m_112803;
    int64_t n_112804 = futhark_mc_segmap_parloop_struct_129084->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_segmap_parloop_struct_129084->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 =
            futhark_mc_segmap_parloop_struct_129084->free_bytes_119697;
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_segmap_parloop_struct_129084->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_segmap_parloop_struct_129084->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 =
            futhark_mc_segmap_parloop_struct_129084->free_ext_121405;
    struct memblock mem_121437 = {.desc ="mem_121437", .mem =
                                  futhark_mc_segmap_parloop_struct_129084->free_mem_121437,
                                  .size =0, .references =NULL};
    size_t mem_121418_cached_sizze_129086 = 0;
    char *mem_121418 = NULL;
    int64_t iterations = end - start;
    int64_t iter_128290 = start;
    
    if (mem_121418_cached_sizze_129086 < (size_t) bytes_119697) {
        mem_121418 = realloc(mem_121418, bytes_119697);
        mem_121418_cached_sizze_129086 = bytes_119697;
    }
    for (; iter_128290 < end; iter_128290++) {
        if (ctx->debugging)
            fprintf(ctx->log, "%s\n", "SegMap fbody");
        
        int64_t slice_128296 = m_112803;
        int64_t gtid_118890 = iter_128290;
        int64_t remnant_128297 = iter_128290 - gtid_118890;
        int64_t flat_tid_118891 = (int64_t) 0;
        int32_t num_tasks_128298;
        struct futhark_mc_task_129087 futhark_mc_task_129087;
        
        futhark_mc_task_129087.ctx = ctx;
        futhark_mc_task_129087.free_n_112804 = n_112804;
        futhark_mc_task_129087.free_gtid_118890 = gtid_118890;
        futhark_mc_task_129087.free_Y_mem_119653 = Y_mem_119653.mem;
        futhark_mc_task_129087.free_ext_mem_121393 = ext_mem_121393.mem;
        futhark_mc_task_129087.free_ext_mem_121394 = ext_mem_121394.mem;
        futhark_mc_task_129087.free_ext_121405 = ext_121405;
        futhark_mc_task_129087.free_mem_121418 = mem_121418;
        
        struct scheduler_segop futhark_mc_task_129087_task;
        
        futhark_mc_task_129087_task.args = &futhark_mc_task_129087;
        futhark_mc_task_129087_task.top_level_fn =
            futhark_mc_segmap_task_129088;
        futhark_mc_task_129087_task.name = "futhark_mc_segmap_task_129088";
        futhark_mc_task_129087_task.iterations = n_112804;
        futhark_mc_task_129087_task.task_time =
            &ctx->futhark_mc_segmap_task_129088_total_time;
        futhark_mc_task_129087_task.task_iter =
            &ctx->futhark_mc_segmap_task_129088_total_iter;
        futhark_mc_task_129087_task.sched = STATIC;
        futhark_mc_task_129087_task.nested_fn = NULL;
        
        int futhark_mc_segmap_task_129088_err =
            scheduler_prepare_task(&ctx->scheduler,
                                   &futhark_mc_task_129087_task);
        
        if (futhark_mc_segmap_task_129088_err != 0) {
            err = 1;
            goto cleanup;
        }
        memmove(mem_121437.mem + gtid_118890 * n_112804 * (int64_t) 4,
                mem_121418 + (int64_t) 0, n_112804 * (int64_t) 4);
    }
    
  cleanup:
    { }
    free(mem_121418);
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129085_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129085_end -
                 futhark_mc_segmap_parloop_129085_start;
        
        ctx->futhark_mc_segmap_parloop_129085_runs[tid]++;
        ctx->futhark_mc_segmap_parloop_129085_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_parloop_129085_iter[tid] += iterations;
    }
    return err;
}
int futhark_mc_segmap_nested_task_129083(void *args, int64_t iterations,
                                         int tid, struct scheduler_info info)
{
    int err = 0;
    int flat_tid_118889 = tid;
    int num_tasks_128277 = info.nsubtasks;
    struct futhark_mc_task_129078 *futhark_mc_task_129078 =
                                  (struct futhark_mc_task_129078 *) args;
    struct futhark_context *ctx = futhark_mc_task_129078->ctx;
    uint64_t futhark_mc_segmap_nested_task_129083_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_nested_task_129083_start = get_wall_time();
    
    int64_t m_112803 = futhark_mc_task_129078->free_m_112803;
    int64_t n_112804 = futhark_mc_task_129078->free_n_112804;
    struct memblock Y_mem_119653 = {.desc ="Y_mem_119653", .mem =
                                    futhark_mc_task_129078->free_Y_mem_119653,
                                    .size =0, .references =NULL};
    int64_t bytes_119697 = futhark_mc_task_129078->free_bytes_119697;
    struct memblock ext_mem_121393 = {.desc ="ext_mem_121393", .mem =
                                      futhark_mc_task_129078->free_ext_mem_121393,
                                      .size =0, .references =NULL};
    struct memblock ext_mem_121394 = {.desc ="ext_mem_121394", .mem =
                                      futhark_mc_task_129078->free_ext_mem_121394,
                                      .size =0, .references =NULL};
    int64_t ext_121405 = futhark_mc_task_129078->free_ext_121405;
    struct memblock mem_121437 = {.desc ="mem_121437", .mem =
                                  futhark_mc_task_129078->free_mem_121437,
                                  .size =0, .references =NULL};
    int64_t iter_128290;
    struct futhark_mc_segmap_parloop_struct_129084
    futhark_mc_segmap_parloop_struct_129084;
    
    futhark_mc_segmap_parloop_struct_129084.ctx = ctx;
    futhark_mc_segmap_parloop_struct_129084.free_m_112803 = m_112803;
    futhark_mc_segmap_parloop_struct_129084.free_n_112804 = n_112804;
    futhark_mc_segmap_parloop_struct_129084.free_Y_mem_119653 =
        Y_mem_119653.mem;
    futhark_mc_segmap_parloop_struct_129084.free_bytes_119697 = bytes_119697;
    futhark_mc_segmap_parloop_struct_129084.free_ext_mem_121393 =
        ext_mem_121393.mem;
    futhark_mc_segmap_parloop_struct_129084.free_ext_mem_121394 =
        ext_mem_121394.mem;
    futhark_mc_segmap_parloop_struct_129084.free_ext_121405 = ext_121405;
    futhark_mc_segmap_parloop_struct_129084.free_mem_121437 = mem_121437.mem;
    
    struct scheduler_parloop futhark_mc_segmap_parloop_129085_task;
    
    futhark_mc_segmap_parloop_129085_task.name =
        "futhark_mc_segmap_parloop_129085";
    futhark_mc_segmap_parloop_129085_task.fn = futhark_mc_segmap_parloop_129085;
    futhark_mc_segmap_parloop_129085_task.args =
        &futhark_mc_segmap_parloop_struct_129084;
    futhark_mc_segmap_parloop_129085_task.iterations = iterations;
    futhark_mc_segmap_parloop_129085_task.info = info;
    
    uint64_t futhark_mc_segmap_parloop_129085_total_start = 0;
    
    if (ctx->profiling && !ctx->profiling_paused)
        futhark_mc_segmap_parloop_129085_total_start = get_wall_time();
    
    int futhark_mc_segmap_parloop_129085_err =
        scheduler_execute_task(&ctx->scheduler,
                               &futhark_mc_segmap_parloop_129085_task);
    
    if (futhark_mc_segmap_parloop_129085_err != 0) {
        err = 1;
        goto cleanup;
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_parloop_129085_total_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_parloop_129085_total_end -
                 futhark_mc_segmap_parloop_129085_total_start;
        
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129085_total_runs, 1,
                           __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129085_total_total_runtime,
                           elapsed, __ATOMIC_RELAXED);
        __atomic_fetch_add(&ctx->futhark_mc_segmap_parloop_129085_total_iter,
                           iterations, __ATOMIC_RELAXED);
    }
    if (ctx->profiling && !ctx->profiling_paused) {
        uint64_t futhark_mc_segmap_nested_task_129083_end = get_wall_time();
        uint64_t elapsed = futhark_mc_segmap_nested_task_129083_end -
                 futhark_mc_segmap_nested_task_129083_start;
        
        ctx->futhark_mc_segmap_nested_task_129083_runs[tid]++;
        ctx->futhark_mc_segmap_nested_task_129083_total_runtime[tid] += elapsed;
        ctx->futhark_mc_segmap_nested_task_129083_iter[tid] += iterations;
    }
    
  cleanup:
    { }
    return err;
}
struct futhark_f32_2d {
    struct memblock mem;
    int64_t shape[2];
};
struct futhark_f32_2d *futhark_new_f32_2d(struct futhark_context *ctx, const
                                          float *data, int64_t dim0,
                                          int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + 0, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
struct futhark_f32_2d *futhark_new_raw_f32_2d(struct futhark_context *ctx, const
                                              char *data, int offset,
                                              int64_t dim0, int64_t dim1)
{
    struct futhark_f32_2d *bad = NULL;
    struct futhark_f32_2d *arr =
                          (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d));
    
    if (arr == NULL)
        return bad;
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    arr->mem.references = NULL;
    if (memblock_alloc(ctx, &arr->mem, (size_t) (dim0 * dim1) * 4, "arr->mem"))
        return NULL;
    arr->shape[0] = dim0;
    arr->shape[1] = dim1;
    memmove(arr->mem.mem + 0, data + offset, (size_t) (dim0 * dim1) * 4);
    lock_unlock(&ctx->lock);
    return arr;
}
int futhark_free_f32_2d(struct futhark_context *ctx, struct futhark_f32_2d *arr)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    if (memblock_unref(ctx, &arr->mem, "arr->mem") != 0)
        return 1;
    lock_unlock(&ctx->lock);
    free(arr);
    return 0;
}
int futhark_values_f32_2d(struct futhark_context *ctx,
                          struct futhark_f32_2d *arr, float *data)
{
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    memmove(data + 0, arr->mem.mem + 0, (size_t) (arr->shape[0] *
                                                  arr->shape[1]) * 4);
    lock_unlock(&ctx->lock);
    return 0;
}
char *futhark_values_raw_f32_2d(struct futhark_context *ctx,
                                struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->mem.mem;
}
const int64_t *futhark_shape_f32_2d(struct futhark_context *ctx,
                                    struct futhark_f32_2d *arr)
{
    (void) ctx;
    return arr->shape;
}
static int futrts_entry_main(struct futhark_context *ctx,
                             struct memblock *mem_out_p_128302,
                             struct memblock *mem_out_p_128303,
                             struct memblock *mem_out_p_128304,
                             struct memblock Y_mem_119653, int64_t m_112803,
                             int64_t n_112804, int64_t n_p_112806,
                             int64_t t_window_112807, int64_t l_window_112808,
                             int64_t t_degree_112809, int64_t l_degree_112810,
                             int64_t t_jump_112811, int64_t l_jump_112812,
                             int64_t inner_112813, int64_t outer_112814,
                             int64_t jump_threshold_112815,
                             int64_t max_group_sizze_112816)
{
    (void) ctx;
    
    int err = 0;
    size_t mem_119693_cached_sizze_128305 = 0;
    char *mem_119693 = NULL;
    size_t mem_119696_cached_sizze_128306 = 0;
    char *mem_119696 = NULL;
    size_t mem_119718_cached_sizze_128307 = 0;
    char *mem_119718 = NULL;
    size_t mem_119740_cached_sizze_128308 = 0;
    char *mem_119740 = NULL;
    size_t mem_119762_cached_sizze_128309 = 0;
    char *mem_119762 = NULL;
    size_t mem_119820_cached_sizze_128310 = 0;
    char *mem_119820 = NULL;
    size_t mem_119824_cached_sizze_128311 = 0;
    char *mem_119824 = NULL;
    size_t mem_119882_cached_sizze_128312 = 0;
    char *mem_119882 = NULL;
    size_t mem_119886_cached_sizze_128313 = 0;
    char *mem_119886 = NULL;
    size_t mem_119962_cached_sizze_128314 = 0;
    char *mem_119962 = NULL;
    size_t mem_119984_cached_sizze_128315 = 0;
    char *mem_119984 = NULL;
    size_t mem_120006_cached_sizze_128316 = 0;
    char *mem_120006 = NULL;
    size_t mem_120064_cached_sizze_128317 = 0;
    char *mem_120064 = NULL;
    size_t mem_120633_cached_sizze_128318 = 0;
    char *mem_120633 = NULL;
    size_t mem_120637_cached_sizze_128319 = 0;
    char *mem_120637 = NULL;
    size_t mem_121176_cached_sizze_128320 = 0;
    char *mem_121176 = NULL;
    size_t mem_121198_cached_sizze_128321 = 0;
    char *mem_121198 = NULL;
    size_t mem_121352_cached_sizze_128322 = 0;
    char *mem_121352 = NULL;
    size_t mem_121355_cached_sizze_128323 = 0;
    char *mem_121355 = NULL;
    size_t mem_121358_cached_sizze_128324 = 0;
    char *mem_121358 = NULL;
    size_t mem_121361_cached_sizze_128325 = 0;
    char *mem_121361 = NULL;
    struct memblock mem_out_121506;
    
    mem_out_121506.references = NULL;
    
    struct memblock mem_out_121507;
    
    mem_out_121507.references = NULL;
    
    struct memblock mem_out_121508;
    
    mem_out_121508.references = NULL;
    
    bool assert_cond_112817 = sle64((int64_t) 4, n_p_112806);
    bool assert_c_112818;
    
    if (!assert_cond_112817) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (n_p >= 4)",
                               "-> #0  stl.fut:67:13-33\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_112819 = smod64(t_window_112807, (int64_t) 2);
    bool assert_cond_112820 = x_112819 == (int64_t) 1;
    bool assert_c_112821;
    
    if (!assert_cond_112820) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112822 = slt64((int64_t) 0, t_window_112807);
    bool assert_c_112823;
    
    if (!assert_cond_112822) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:69:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_112824 = smod64(l_window_112808, (int64_t) 2);
    bool assert_cond_112825 = x_112824 == (int64_t) 1;
    bool assert_c_112826;
    
    if (!assert_cond_112825) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x % 2 == 1)",
                               "-> #0  utils.fut:5:3-23\n   #1  /prelude/functional.fut:39:62-64\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112827 = slt64((int64_t) 0, l_window_112808);
    bool assert_c_112828;
    
    if (!assert_cond_112827) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  /prelude/functional.fut:39:59-65\n   #2  stl.fut:70:18-35\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool cond_112829 = sle64((int64_t) 0, t_degree_112809);
    bool assert_cond_t_res_112830 = sle64(t_degree_112809, (int64_t) 2);
    bool x_112831 = cond_112829 && assert_cond_t_res_112830;
    bool assert_c_112832;
    
    if (!x_112831) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:72:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool cond_112833 = sle64((int64_t) 0, l_degree_112810);
    bool assert_cond_t_res_112834 = sle64(l_degree_112810, (int64_t) 2);
    bool x_112835 = cond_112833 && assert_cond_t_res_112834;
    bool assert_c_112836;
    
    if (!x_112835) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0 && x <= 2)",
                               "-> #0  utils.fut:8:3-29\n   #1  stl.fut:73:18-35\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112837 = sle64((int64_t) 0, t_jump_112811);
    bool assert_c_112838;
    
    if (!assert_cond_112837) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:75:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112839 = sle64((int64_t) 0, l_jump_112812);
    bool assert_c_112840;
    
    if (!assert_cond_112839) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:76:16-34\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112841 = slt64((int64_t) 0, inner_112813);
    bool assert_c_112842;
    
    if (!assert_cond_112841) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x > 0)",
                               "-> #0  utils.fut:2:3-18\n   #1  stl.fut:78:15-29\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool assert_cond_112843 = sle64((int64_t) 0, outer_112814);
    bool assert_c_112844;
    
    if (!assert_cond_112843) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "Assertion is false: (x >= 0)",
                               "-> #0  utils.fut:14:3-19\n   #1  stl.fut:79:15-32\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    float i64_res_112845 = sitofp_i64_f32(n_112804);
    float i64_res_112846 = sitofp_i64_f32(n_p_112806);
    float binop_p_112847 = i64_res_112845 / i64_res_112846;
    float defunc_0_f_res_112848;
    
    defunc_0_f_res_112848 = futrts_ceil32(binop_p_112847);
    
    int64_t defunc_0_f_res_112849 = fptosi_f32_i64(defunc_0_f_res_112848);
    int64_t css_chunk_len_112850 = add64((int64_t) 2, defunc_0_f_res_112849);
    int64_t y_112851 = mul64((int64_t) 2, n_p_112806);
    int64_t C_len_112852 = add64(n_112804, y_112851);
    bool cond_112853 = l_jump_112812 == (int64_t) 1;
    int64_t l_n_m_112854;
    
    if (cond_112853) {
        l_n_m_112854 = n_112804;
    } else {
        bool zzero_112855 = l_jump_112812 == (int64_t) 0;
        bool nonzzero_112856 = !zzero_112855;
        bool nonzzero_cert_112857;
        
        if (!nonzzero_112856) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:87:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_112858 = sdiv64(n_112804, l_jump_112812);
        int64_t l_n_m_f_res_112859 = add64((int64_t) 1, x_112858);
        
        l_n_m_112854 = l_n_m_f_res_112859;
    }
    
    bool cond_112860 = t_jump_112811 == (int64_t) 1;
    int64_t t_n_m_112861;
    
    if (cond_112860) {
        t_n_m_112861 = n_112804;
    } else {
        bool zzero_112862 = t_jump_112811 == (int64_t) 0;
        bool nonzzero_112863 = !zzero_112862;
        bool nonzzero_cert_112864;
        
        if (!nonzzero_112863) {
            ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                   "division by zero",
                                   "-> #0  stl.fut:91:42-51\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
            if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
                return 1;
            return 1;
        }
        
        int64_t x_112865 = sdiv64(n_112804, t_jump_112811);
        int64_t t_n_m_f_res_112866 = add64((int64_t) 1, x_112865);
        
        t_n_m_112861 = t_n_m_f_res_112866;
    }
    
    float x_112867 = i64_res_112845 / 2.0F;
    float floor_arg_112868 = 1.0F + x_112867;
    float floor_res_112869;
    
    floor_res_112869 = futrts_floor32(floor_arg_112868);
    
    int64_t defunc_0_f_res_112870 = fptosi_f32_i64(floor_res_112869);
    int64_t x_112871 = sub64(n_112804, defunc_0_f_res_112870);
    int64_t mid2_112872 = add64((int64_t) 1, x_112871);
    bool cond_112873 = defunc_0_f_res_112870 == mid2_112872;
    int64_t stl_res_112874;
    int64_t stl_res_112875;
    
    if (cond_112873) {
        int64_t stl_res_t_res_112876 = sub64(defunc_0_f_res_112870,
                                             (int64_t) 1);
        
        stl_res_112874 = stl_res_t_res_112876;
        stl_res_112875 = defunc_0_f_res_112870;
    } else {
        int64_t min_res_112877 = smin64(defunc_0_f_res_112870, mid2_112872);
        int64_t stl_res_f_res_112878 = sub64(min_res_112877, (int64_t) 1);
        int64_t max_res_112879 = smax64(defunc_0_f_res_112870, mid2_112872);
        
        stl_res_112874 = stl_res_f_res_112878;
        stl_res_112875 = max_res_112879;
    }
    
    int64_t i_112880 = sub64(n_112804, (int64_t) 1);
    bool x_112881 = sle64((int64_t) 0, i_112880);
    bool y_112882 = slt64(i_112880, n_112804);
    bool bounds_check_112883 = x_112881 && y_112882;
    bool index_certs_112884;
    
    if (!bounds_check_112883) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) i_112880,
                               "] out of bounds for array of shape [",
                               (long long) n_112804, "].",
                               "-> #0  /prelude/array.fut:26:29-34\n   #1  utils.fut:38:13-20\n   #2  stl.fut:105:31-49\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_119691 = m_112803 * n_112804;
    int64_t binop_y_119692 = (int64_t) 8 * binop_x_119691;
    int64_t bytes_119690 = smax64((int64_t) 0, binop_y_119692);
    
    if (mem_119693_cached_sizze_128305 < (size_t) bytes_119690) {
        mem_119693 = realloc(mem_119693, bytes_119690);
        mem_119693_cached_sizze_128305 = bytes_119690;
    }
    
    int64_t binop_y_119695 = (int64_t) 8 * m_112803;
    int64_t bytes_119694 = smax64((int64_t) 0, binop_y_119695);
    
    if (mem_119696_cached_sizze_128306 < (size_t) bytes_119694) {
        mem_119696 = realloc(mem_119696, bytes_119694);
        mem_119696_cached_sizze_128306 = bytes_119694;
    }
    
    int64_t binop_y_119655 = (int64_t) 8 * n_112804;
    int64_t bytes_119654 = smax64((int64_t) 0, binop_y_119655);
    int64_t flat_tid_114971 = (int64_t) 0;
    int32_t num_tasks_121509;
    int64_t flat_tid_114973 = (int64_t) 0;
    struct futhark_mc_task_128326 futhark_mc_task_128326;
    
    futhark_mc_task_128326.ctx = ctx;
    futhark_mc_task_128326.free_m_112803 = m_112803;
    futhark_mc_task_128326.free_n_112804 = n_112804;
    futhark_mc_task_128326.free_i_112880 = i_112880;
    futhark_mc_task_128326.free_Y_mem_119653 = Y_mem_119653.mem;
    futhark_mc_task_128326.free_bytes_119654 = bytes_119654;
    futhark_mc_task_128326.free_mem_119693 = mem_119693;
    futhark_mc_task_128326.free_mem_119696 = mem_119696;
    
    struct scheduler_segop futhark_mc_task_128326_task;
    
    futhark_mc_task_128326_task.args = &futhark_mc_task_128326;
    futhark_mc_task_128326_task.top_level_fn = futhark_mc_segmap_task_128327;
    futhark_mc_task_128326_task.name = "futhark_mc_segmap_task_128327";
    futhark_mc_task_128326_task.iterations = m_112803;
    futhark_mc_task_128326_task.task_time =
        &ctx->futhark_mc_segmap_task_128327_total_time;
    futhark_mc_task_128326_task.task_iter =
        &ctx->futhark_mc_segmap_task_128327_total_iter;
    futhark_mc_task_128326_task.sched = STATIC;
    futhark_mc_task_128326_task.nested_fn =
        futhark_mc_segmap_nested_task_128332;
    
    int futhark_mc_segmap_task_128327_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128326_task);
    
    if (futhark_mc_segmap_task_128327_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_y_119717 = (int64_t) 4 * binop_x_119691;
    int64_t bytes_119715 = smax64((int64_t) 0, binop_y_119717);
    
    if (mem_119718_cached_sizze_128307 < (size_t) bytes_119715) {
        mem_119718 = realloc(mem_119718, bytes_119715);
        mem_119718_cached_sizze_128307 = bytes_119715;
    }
    
    int64_t binop_y_119698 = (int64_t) 4 * n_112804;
    int64_t bytes_119697 = smax64((int64_t) 0, binop_y_119698);
    int64_t flat_tid_114998 = (int64_t) 0;
    int32_t num_tasks_121572;
    int64_t flat_tid_115000 = (int64_t) 0;
    struct futhark_mc_task_128348 futhark_mc_task_128348;
    
    futhark_mc_task_128348.ctx = ctx;
    futhark_mc_task_128348.free_m_112803 = m_112803;
    futhark_mc_task_128348.free_n_112804 = n_112804;
    futhark_mc_task_128348.free_mem_119693 = mem_119693;
    futhark_mc_task_128348.free_bytes_119697 = bytes_119697;
    futhark_mc_task_128348.free_mem_119718 = mem_119718;
    
    struct scheduler_segop futhark_mc_task_128348_task;
    
    futhark_mc_task_128348_task.args = &futhark_mc_task_128348;
    futhark_mc_task_128348_task.top_level_fn = futhark_mc_segmap_task_128349;
    futhark_mc_task_128348_task.name = "futhark_mc_segmap_task_128349";
    futhark_mc_task_128348_task.iterations = m_112803;
    futhark_mc_task_128348_task.task_time =
        &ctx->futhark_mc_segmap_task_128349_total_time;
    futhark_mc_task_128348_task.task_iter =
        &ctx->futhark_mc_segmap_task_128349_total_iter;
    futhark_mc_task_128348_task.sched = STATIC;
    futhark_mc_task_128348_task.nested_fn =
        futhark_mc_segmap_nested_task_128353;
    
    int futhark_mc_segmap_task_128349_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128348_task);
    
    if (futhark_mc_segmap_task_128349_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    bool bounds_invalid_upwards_112915 = slt64(n_p_112806, (int64_t) 0);
    bool valid_112916 = !bounds_invalid_upwards_112915;
    bool range_valid_c_112917;
    
    if (!valid_112916) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) n_p_112806, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:111:5-121:14\n   #3  stl.fut:365:3-376:33\n   #4  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_112919 = slt64(css_chunk_len_112850,
                                               (int64_t) 0);
    bool valid_112920 = !bounds_invalid_upwards_112919;
    bool range_valid_c_112921;
    
    if (!valid_112920) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) css_chunk_len_112850, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:114:17-120:39\n   #3  /prelude/soacs.fut:59:3-10\n   #4  /prelude/array.fut:195:3-17\n   #5  stl.fut:111:5-121:14\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t binop_x_119738 = n_p_112806 * css_chunk_len_112850;
    int64_t binop_y_119739 = (int64_t) 8 * binop_x_119738;
    int64_t bytes_119737 = smax64((int64_t) 0, binop_y_119739);
    
    if (mem_119740_cached_sizze_128308 < (size_t) bytes_119737) {
        mem_119740 = realloc(mem_119740, bytes_119737);
        mem_119740_cached_sizze_128308 = bytes_119737;
    }
    
    int64_t binop_y_119720 = (int64_t) 8 * css_chunk_len_112850;
    int64_t bytes_119719 = smax64((int64_t) 0, binop_y_119720);
    int64_t flat_tid_115008 = (int64_t) 0;
    int32_t num_tasks_121591;
    int64_t flat_tid_115010 = (int64_t) 0;
    struct futhark_mc_task_128361 futhark_mc_task_128361;
    
    futhark_mc_task_128361.ctx = ctx;
    futhark_mc_task_128361.free_n_p_112806 = n_p_112806;
    futhark_mc_task_128361.free_css_chunk_len_112850 = css_chunk_len_112850;
    futhark_mc_task_128361.free_i_112880 = i_112880;
    futhark_mc_task_128361.free_bytes_119719 = bytes_119719;
    futhark_mc_task_128361.free_mem_119740 = mem_119740;
    
    struct scheduler_segop futhark_mc_task_128361_task;
    
    futhark_mc_task_128361_task.args = &futhark_mc_task_128361;
    futhark_mc_task_128361_task.top_level_fn = futhark_mc_segmap_task_128362;
    futhark_mc_task_128361_task.name = "futhark_mc_segmap_task_128362";
    futhark_mc_task_128361_task.iterations = n_p_112806;
    futhark_mc_task_128361_task.task_time =
        &ctx->futhark_mc_segmap_task_128362_total_time;
    futhark_mc_task_128361_task.task_iter =
        &ctx->futhark_mc_segmap_task_128362_total_iter;
    futhark_mc_task_128361_task.sched = STATIC;
    futhark_mc_task_128361_task.nested_fn =
        futhark_mc_segmap_nested_task_128366;
    
    int futhark_mc_segmap_task_128362_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128361_task);
    
    if (futhark_mc_segmap_task_128362_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t binop_x_119760 = m_112803 * n_p_112806;
    int64_t binop_y_119761 = (int64_t) 4 * binop_x_119760;
    int64_t bytes_119759 = smax64((int64_t) 0, binop_y_119761);
    
    if (mem_119762_cached_sizze_128309 < (size_t) bytes_119759) {
        mem_119762 = realloc(mem_119762, bytes_119759);
        mem_119762_cached_sizze_128309 = bytes_119759;
    }
    
    int64_t binop_y_119742 = (int64_t) 4 * n_p_112806;
    int64_t bytes_119741 = smax64((int64_t) 0, binop_y_119742);
    int64_t flat_tid_115021 = (int64_t) 0;
    int32_t num_tasks_121614;
    int64_t flat_tid_115023 = (int64_t) 0;
    struct futhark_mc_task_128374 futhark_mc_task_128374;
    
    futhark_mc_task_128374.ctx = ctx;
    futhark_mc_task_128374.free_m_112803 = m_112803;
    futhark_mc_task_128374.free_n_112804 = n_112804;
    futhark_mc_task_128374.free_n_p_112806 = n_p_112806;
    futhark_mc_task_128374.free_css_chunk_len_112850 = css_chunk_len_112850;
    futhark_mc_task_128374.free_Y_mem_119653 = Y_mem_119653.mem;
    futhark_mc_task_128374.free_mem_119740 = mem_119740;
    futhark_mc_task_128374.free_bytes_119741 = bytes_119741;
    futhark_mc_task_128374.free_mem_119762 = mem_119762;
    
    struct scheduler_segop futhark_mc_task_128374_task;
    
    futhark_mc_task_128374_task.args = &futhark_mc_task_128374;
    futhark_mc_task_128374_task.top_level_fn = futhark_mc_segmap_task_128375;
    futhark_mc_task_128374_task.name = "futhark_mc_segmap_task_128375";
    futhark_mc_task_128374_task.iterations = m_112803;
    futhark_mc_task_128374_task.task_time =
        &ctx->futhark_mc_segmap_task_128375_total_time;
    futhark_mc_task_128374_task.task_iter =
        &ctx->futhark_mc_segmap_task_128375_total_iter;
    futhark_mc_task_128374_task.sched = STATIC;
    futhark_mc_task_128374_task.nested_fn =
        futhark_mc_segmap_nested_task_128379;
    
    int futhark_mc_segmap_task_128375_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128374_task);
    
    if (futhark_mc_segmap_task_128375_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_112952 = smin64(n_112804, l_window_112808);
    bool bounds_invalid_upwards_112953 = slt64(l_n_m_112854, (int64_t) 0);
    bool valid_112954 = !bounds_invalid_upwards_112953;
    bool range_valid_c_112955;
    
    if (!valid_112954) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) l_n_m_112854, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-373:7\n   #3  loess.fut:460:15-58\n   #4  stl.fut:143:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:141:5-144:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_112957 = slt64((int64_t) 1, min_res_112952);
    float i64_res_112958 = sitofp_i64_f32(l_window_112808);
    int64_t binop_x_119818 = m_112803 * l_n_m_112854;
    int64_t binop_y_119819 = (int64_t) 8 * binop_x_119818;
    int64_t bytes_119817 = smax64((int64_t) 0, binop_y_119819);
    
    if (mem_119820_cached_sizze_128310 < (size_t) bytes_119817) {
        mem_119820 = realloc(mem_119820, bytes_119817);
        mem_119820_cached_sizze_128310 = bytes_119817;
    }
    
    int64_t binop_y_119823 = (int64_t) 4 * binop_x_119818;
    int64_t bytes_119821 = smax64((int64_t) 0, binop_y_119823);
    
    if (mem_119824_cached_sizze_128311 < (size_t) bytes_119821) {
        mem_119824 = realloc(mem_119824, bytes_119821);
        mem_119824_cached_sizze_128311 = bytes_119821;
    }
    
    int64_t binop_y_119767 = (int64_t) 4 * l_n_m_112854;
    int64_t bytes_119766 = smax64((int64_t) 0, binop_y_119767);
    int64_t binop_y_119770 = (int64_t) 8 * l_n_m_112854;
    int64_t bytes_119769 = smax64((int64_t) 0, binop_y_119770);
    int64_t flat_tid_115081 = (int64_t) 0;
    int32_t num_tasks_121712;
    int64_t flat_tid_115083 = (int64_t) 0;
    struct futhark_mc_task_128395 futhark_mc_task_128395;
    
    futhark_mc_task_128395.ctx = ctx;
    futhark_mc_task_128395.free_m_112803 = m_112803;
    futhark_mc_task_128395.free_n_112804 = n_112804;
    futhark_mc_task_128395.free_l_jump_112812 = l_jump_112812;
    futhark_mc_task_128395.free_l_n_m_112854 = l_n_m_112854;
    futhark_mc_task_128395.free_i_112880 = i_112880;
    futhark_mc_task_128395.free_x_112881 = x_112881;
    futhark_mc_task_128395.free_min_res_112952 = min_res_112952;
    futhark_mc_task_128395.free_loop_cond_112957 = loop_cond_112957;
    futhark_mc_task_128395.free_i64_res_112958 = i64_res_112958;
    futhark_mc_task_128395.free_bytes_119654 = bytes_119654;
    futhark_mc_task_128395.free_mem_119693 = mem_119693;
    futhark_mc_task_128395.free_mem_119696 = mem_119696;
    futhark_mc_task_128395.free_bytes_119766 = bytes_119766;
    futhark_mc_task_128395.free_bytes_119769 = bytes_119769;
    futhark_mc_task_128395.free_mem_119820 = mem_119820;
    futhark_mc_task_128395.free_mem_119824 = mem_119824;
    
    struct scheduler_segop futhark_mc_task_128395_task;
    
    futhark_mc_task_128395_task.args = &futhark_mc_task_128395;
    futhark_mc_task_128395_task.top_level_fn = futhark_mc_segmap_task_128396;
    futhark_mc_task_128395_task.name = "futhark_mc_segmap_task_128396";
    futhark_mc_task_128395_task.iterations = m_112803;
    futhark_mc_task_128395_task.task_time =
        &ctx->futhark_mc_segmap_task_128396_total_time;
    futhark_mc_task_128395_task.task_iter =
        &ctx->futhark_mc_segmap_task_128396_total_iter;
    futhark_mc_task_128395_task.sched = DYNAMIC;
    futhark_mc_task_128395_task.nested_fn =
        futhark_mc_segmap_nested_task_128402;
    
    int futhark_mc_segmap_task_128396_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128395_task);
    
    if (futhark_mc_segmap_task_128396_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    int64_t min_res_113062 = smin64(n_112804, t_window_112807);
    bool bounds_invalid_upwards_113063 = slt64(t_n_m_112861, (int64_t) 0);
    bool valid_113064 = !bounds_invalid_upwards_113063;
    bool range_valid_c_113065;
    
    if (!valid_113064) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) t_n_m_112861, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  loess.fut:345:3-373:7\n   #3  loess.fut:460:15-58\n   #4  stl.fut:150:13-65\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:148:5-151:26\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool loop_cond_113067 = slt64((int64_t) 1, min_res_113062);
    float i64_res_113068 = sitofp_i64_f32(t_window_112807);
    int64_t binop_x_119880 = m_112803 * t_n_m_112861;
    int64_t binop_y_119881 = (int64_t) 8 * binop_x_119880;
    int64_t bytes_119879 = smax64((int64_t) 0, binop_y_119881);
    
    if (mem_119882_cached_sizze_128312 < (size_t) bytes_119879) {
        mem_119882 = realloc(mem_119882, bytes_119879);
        mem_119882_cached_sizze_128312 = bytes_119879;
    }
    
    int64_t binop_y_119885 = (int64_t) 4 * binop_x_119880;
    int64_t bytes_119883 = smax64((int64_t) 0, binop_y_119885);
    
    if (mem_119886_cached_sizze_128313 < (size_t) bytes_119883) {
        mem_119886 = realloc(mem_119886, bytes_119883);
        mem_119886_cached_sizze_128313 = bytes_119883;
    }
    
    int64_t binop_y_119829 = (int64_t) 4 * t_n_m_112861;
    int64_t bytes_119828 = smax64((int64_t) 0, binop_y_119829);
    int64_t binop_y_119832 = (int64_t) 8 * t_n_m_112861;
    int64_t bytes_119831 = smax64((int64_t) 0, binop_y_119832);
    int64_t flat_tid_115188 = (int64_t) 0;
    int32_t num_tasks_121981;
    int64_t flat_tid_115190 = (int64_t) 0;
    struct futhark_mc_task_128416 futhark_mc_task_128416;
    
    futhark_mc_task_128416.ctx = ctx;
    futhark_mc_task_128416.free_m_112803 = m_112803;
    futhark_mc_task_128416.free_n_112804 = n_112804;
    futhark_mc_task_128416.free_t_jump_112811 = t_jump_112811;
    futhark_mc_task_128416.free_t_n_m_112861 = t_n_m_112861;
    futhark_mc_task_128416.free_i_112880 = i_112880;
    futhark_mc_task_128416.free_x_112881 = x_112881;
    futhark_mc_task_128416.free_min_res_113062 = min_res_113062;
    futhark_mc_task_128416.free_loop_cond_113067 = loop_cond_113067;
    futhark_mc_task_128416.free_i64_res_113068 = i64_res_113068;
    futhark_mc_task_128416.free_bytes_119654 = bytes_119654;
    futhark_mc_task_128416.free_mem_119693 = mem_119693;
    futhark_mc_task_128416.free_mem_119696 = mem_119696;
    futhark_mc_task_128416.free_bytes_119828 = bytes_119828;
    futhark_mc_task_128416.free_bytes_119831 = bytes_119831;
    futhark_mc_task_128416.free_mem_119882 = mem_119882;
    futhark_mc_task_128416.free_mem_119886 = mem_119886;
    
    struct scheduler_segop futhark_mc_task_128416_task;
    
    futhark_mc_task_128416_task.args = &futhark_mc_task_128416;
    futhark_mc_task_128416_task.top_level_fn = futhark_mc_segmap_task_128417;
    futhark_mc_task_128416_task.name = "futhark_mc_segmap_task_128417";
    futhark_mc_task_128416_task.iterations = m_112803;
    futhark_mc_task_128416_task.task_time =
        &ctx->futhark_mc_segmap_task_128417_total_time;
    futhark_mc_task_128416_task.task_iter =
        &ctx->futhark_mc_segmap_task_128417_total_iter;
    futhark_mc_task_128416_task.sched = DYNAMIC;
    futhark_mc_task_128416_task.nested_fn =
        futhark_mc_segmap_nested_task_128423;
    
    int futhark_mc_segmap_task_128417_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_128416_task);
    
    if (futhark_mc_segmap_task_128417_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_119890;
    
    mem_119890.references = NULL;
    if (memblock_alloc(ctx, &mem_119890, bytes_119715, "mem_119890")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_122250 = 0; i_122250 < m_112803; i_122250++) {
        for (int64_t i_122251 = 0; i_122251 < n_112804; i_122251++) {
            ((float *) mem_119890.mem)[i_122250 * n_112804 + i_122251] = 0.0F;
        }
    }
    
    struct memblock mem_119894;
    
    mem_119894.references = NULL;
    if (memblock_alloc(ctx, &mem_119894, bytes_119715, "mem_119894")) {
        err = 1;
        goto cleanup;
    }
    for (int64_t i_122252 = 0; i_122252 < m_112803; i_122252++) {
        for (int64_t i_122253 = 0; i_122253 < n_112804; i_122253++) {
            ((float *) mem_119894.mem)[i_122252 * n_112804 + i_122253] = 1.0F;
        }
    }
    
    bool cond_113174 = slt64((int64_t) 1, l_jump_112812);
    bool cond_113175 = slt64((int64_t) 1, t_jump_112811);
    int64_t y_113176 = sub64(outer_112814, (int64_t) 1);
    bool loop_nonempty_113177 = slt64((int64_t) 0, outer_112814);
    bool bounds_invalid_upwards_113178 = slt64(C_len_112852, (int64_t) 0);
    bool valid_113179 = !bounds_invalid_upwards_113178;
    bool loop_not_taken_113180 = !assert_cond_112841;
    bool protect_assert_disj_113181 = valid_113179 || loop_not_taken_113180;
    bool loop_not_taken_113182 = !loop_nonempty_113177;
    bool protect_assert_disj_113183 = protect_assert_disj_113181 ||
         loop_not_taken_113182;
    bool range_valid_c_113184;
    
    if (!protect_assert_disj_113183) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) C_len_112852, " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:194:20-59\n   #3  stl.fut:192:13-195:24\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool zzero_113186 = n_p_112806 == (int64_t) 0;
    bool nonzzero_113187 = !zzero_113186;
    bool protect_assert_disj_113188 = loop_not_taken_113180 || nonzzero_113187;
    bool protect_assert_disj_113189 = loop_not_taken_113182 ||
         protect_assert_disj_113188;
    bool nonzzero_cert_113190;
    
    if (!protect_assert_disj_113189) {
        ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                               "division by zero",
                               "-> #0  stl.fut:194:51-57\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  stl.fut:194:20-59\n   #4  stl.fut:192:13-195:24\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t x_113191 = add64(n_112804, n_p_112806);
    int64_t lifted_single_ma_arg_113192 = add64((int64_t) 1, x_113191);
    int64_t m_113193 = sub64(n_p_112806, (int64_t) 1);
    bool zzero_leq_i_p_m_t_s_113194 = sle64((int64_t) 0, m_113193);
    bool i_p_m_t_s_leq_w_113195 = slt64(m_113193, C_len_112852);
    bool i_lte_j_113196 = sle64((int64_t) 0, n_p_112806);
    bool y_113197 = zzero_leq_i_p_m_t_s_113194 && i_p_m_t_s_leq_w_113195;
    bool y_113198 = i_lte_j_113196 && y_113197;
    bool ok_or_empty_113199 = zzero_113186 || y_113198;
    bool protect_assert_disj_113200 = loop_not_taken_113180 ||
         ok_or_empty_113199;
    bool protect_assert_disj_113201 = loop_not_taken_113182 ||
         protect_assert_disj_113200;
    bool index_certs_113202;
    
    if (!protect_assert_disj_113201) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_112806,
                               "] out of bounds for array of shape [",
                               (long long) C_len_112852, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  stl.fut:43:3-32\n   #2  stl.fut:200:30-50\n   #3  stl.fut:199:23-201:31\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_113203 = slt64(lifted_single_ma_arg_113192,
                                               (int64_t) 0);
    bool valid_113204 = !bounds_invalid_upwards_113203;
    bool protect_assert_disj_113205 = loop_not_taken_113180 || valid_113204;
    bool protect_assert_disj_113206 = loop_not_taken_113182 ||
         protect_assert_disj_113205;
    bool range_valid_c_113207;
    
    if (!protect_assert_disj_113206) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_113192,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  stl.fut:43:3-32\n   #4  stl.fut:200:30-50\n   #5  stl.fut:199:23-201:31\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t lifted_single_ma_arg_113209 = add64((int64_t) 2, n_112804);
    bool i_p_m_t_s_leq_w_113210 = slt64(m_113193, lifted_single_ma_arg_113192);
    bool y_113211 = zzero_leq_i_p_m_t_s_113194 && i_p_m_t_s_leq_w_113210;
    bool y_113212 = i_lte_j_113196 && y_113211;
    bool ok_or_empty_113213 = zzero_113186 || y_113212;
    bool protect_assert_disj_113214 = loop_not_taken_113180 ||
         ok_or_empty_113213;
    bool protect_assert_disj_113215 = loop_not_taken_113182 ||
         protect_assert_disj_113214;
    bool index_certs_113216;
    
    if (!protect_assert_disj_113215) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) n_p_112806,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_113192, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-58\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool bounds_invalid_upwards_113217 = slt64(lifted_single_ma_arg_113209,
                                               (int64_t) 0);
    bool valid_113218 = !bounds_invalid_upwards_113217;
    bool protect_assert_disj_113219 = loop_not_taken_113180 || valid_113218;
    bool protect_assert_disj_113220 = loop_not_taken_113182 ||
         protect_assert_disj_113219;
    bool range_valid_c_113221;
    
    if (!protect_assert_disj_113220) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Range ", (long long) (int64_t) 0, "..",
                               (long long) (int64_t) 1, "..<",
                               (long long) lifted_single_ma_arg_113209,
                               " is invalid.",
                               "-> #0  /prelude/array.fut:90:3-10\n   #1  /prelude/array.fut:195:11-16\n   #2  stl.fut:33:9-39:16\n   #3  /prelude/functional.fut:9:42-44\n   #4  stl.fut:43:3-58\n   #5  stl.fut:200:30-50\n   #6  stl.fut:199:23-201:31\n   #7  stl.fut:365:3-376:33\n   #8  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool i_p_m_t_s_leq_w_113223 = slt64((int64_t) 2,
                                        lifted_single_ma_arg_113209);
    bool protect_assert_disj_113224 = loop_not_taken_113180 ||
         i_p_m_t_s_leq_w_113223;
    bool protect_assert_disj_113225 = loop_not_taken_113182 ||
         protect_assert_disj_113224;
    bool index_certs_113226;
    
    if (!protect_assert_disj_113225) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [:", (long long) (int64_t) 3,
                               "] out of bounds for array of shape [",
                               (long long) lifted_single_ma_arg_113209, "].",
                               "-> #0  stl.fut:30:24-30\n   #1  /prelude/functional.fut:9:42-44\n   #2  stl.fut:43:3-76\n   #3  stl.fut:200:30-50\n   #4  stl.fut:199:23-201:31\n   #5  stl.fut:365:3-376:33\n   #6  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    bool empty_slice_113227 = n_112804 == (int64_t) 0;
    int64_t i_p_m_t_s_113228 = add64(n_p_112806, i_112880);
    bool zzero_leq_i_p_m_t_s_113229 = sle64((int64_t) 0, i_p_m_t_s_113228);
    bool i_p_m_t_s_leq_w_113230 = slt64(i_p_m_t_s_113228, C_len_112852);
    bool i_lte_j_113231 = sle64(n_p_112806, x_113191);
    bool y_113232 = i_lte_j_113196 && i_p_m_t_s_leq_w_113230;
    bool y_113233 = zzero_leq_i_p_m_t_s_113229 && y_113232;
    bool y_113234 = i_lte_j_113231 && y_113233;
    bool forwards_ok_113235 = i_lte_j_113196 && y_113234;
    bool ok_or_empty_113236 = empty_slice_113227 || forwards_ok_113235;
    bool protect_assert_disj_113237 = loop_not_taken_113180 ||
         ok_or_empty_113236;
    bool protect_assert_disj_113238 = loop_not_taken_113182 ||
         protect_assert_disj_113237;
    bool index_certs_113239;
    
    if (!protect_assert_disj_113238) {
        ctx->error = msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                               "Index [", (long long) n_p_112806, ":",
                               (long long) x_113191,
                               "] out of bounds for array of shape [",
                               (long long) C_len_112852, "].",
                               "-> #0  stl.fut:231:35-50\n   #1  /prelude/soacs.fut:67:19-23\n   #2  /prelude/soacs.fut:67:3-37\n   #3  stl.fut:229:13-234:26\n   #4  stl.fut:365:3-376:33\n   #5  stl.fut:352:1-376:33\n");
        if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
            return 1;
        return 1;
    }
    
    int64_t j_m_i_113240 = sub64(stl_res_112875, stl_res_112874);
    bool cond_113241 = slt64(l_jump_112812, jump_threshold_112815);
    bool cond_f_res_113242 = slt64(max_group_sizze_112816, l_window_112808);
    bool x_113243 = !cond_113241;
    bool y_113244 = cond_f_res_113242 && x_113243;
    bool cond_113245 = cond_113241 || y_113244;
    bool cond_113246 = slt64(t_jump_112811, jump_threshold_112815);
    bool cond_f_res_113247 = slt64(max_group_sizze_112816, t_window_112807);
    bool x_113248 = !cond_113246;
    bool y_113249 = cond_f_res_113247 && x_113248;
    bool cond_113250 = cond_113246 || y_113249;
    
    if (mem_119962_cached_sizze_128314 < (size_t) bytes_119715) {
        mem_119962 = realloc(mem_119962, bytes_119715);
        mem_119962_cached_sizze_128314 = bytes_119715;
    }
    if (mem_119984_cached_sizze_128315 < (size_t) bytes_119759) {
        mem_119984 = realloc(mem_119984, bytes_119759);
        mem_119984_cached_sizze_128315 = bytes_119759;
    }
    
    int64_t binop_x_120004 = m_112803 * C_len_112852;
    int64_t binop_y_120005 = (int64_t) 4 * binop_x_120004;
    int64_t bytes_120003 = smax64((int64_t) 0, binop_y_120005);
    
    if (mem_120006_cached_sizze_128316 < (size_t) bytes_120003) {
        mem_120006 = realloc(mem_120006, bytes_120003);
        mem_120006_cached_sizze_128316 = bytes_120003;
    }
    
    int64_t binop_y_119986 = (int64_t) 4 * C_len_112852;
    int64_t bytes_119985 = smax64((int64_t) 0, binop_y_119986);
    
    if (mem_120064_cached_sizze_128317 < (size_t) bytes_119715) {
        mem_120064 = realloc(mem_120064, bytes_119715);
        mem_120064_cached_sizze_128317 = bytes_119715;
    }
    
    int64_t binop_y_120008 = (int64_t) 4 * lifted_single_ma_arg_113192;
    int64_t bytes_120007 = smax64((int64_t) 0, binop_y_120008);
    int64_t binop_y_120011 = (int64_t) 4 * lifted_single_ma_arg_113209;
    int64_t bytes_120010 = smax64((int64_t) 0, binop_y_120011);
    int64_t ext_120557;
    
    if (cond_113174) {
        ext_120557 = n_112804;
    } else {
        ext_120557 = l_n_m_112854;
    }
    if (mem_120633_cached_sizze_128318 < (size_t) bytes_119715) {
        mem_120633 = realloc(mem_120633, bytes_119715);
        mem_120633_cached_sizze_128318 = bytes_119715;
    }
    if (mem_120637_cached_sizze_128319 < (size_t) bytes_119715) {
        mem_120637 = realloc(mem_120637, bytes_119715);
        mem_120637_cached_sizze_128319 = bytes_119715;
    }
    
    int64_t ext_121134;
    
    if (cond_113175) {
        ext_121134 = n_112804;
    } else {
        ext_121134 = t_n_m_112861;
    }
    
    int64_t ext_121407;
    int64_t ext_121405;
    int64_t ext_121401;
    int64_t ext_121400;
    int64_t ext_121399;
    int64_t ext_121398;
    int64_t ext_121397;
    int64_t ext_121396;
    int64_t ext_121395;
    struct memblock ext_mem_121394;
    
    ext_mem_121394.references = NULL;
    
    struct memblock ext_mem_121393;
    
    ext_mem_121393.references = NULL;
    
    struct memblock ext_mem_121392;
    
    ext_mem_121392.references = NULL;
    
    struct memblock mem_param_119902;
    
    mem_param_119902.references = NULL;
    
    int64_t ctx_param_ext_119904;
    int64_t ctx_param_ext_119906;
    struct memblock mem_param_119910;
    
    mem_param_119910.references = NULL;
    
    int64_t ctx_param_ext_119911;
    int64_t ctx_param_ext_119912;
    int64_t ctx_param_ext_119913;
    int64_t ctx_param_ext_119914;
    int64_t ctx_param_ext_119915;
    int64_t ctx_param_ext_119916;
    int64_t ctx_param_ext_119917;
    struct memblock mem_param_119918;
    
    mem_param_119918.references = NULL;
    ctx_param_ext_119904 = n_112804;
    ctx_param_ext_119906 = n_112804;
    ctx_param_ext_119911 = m_112803;
    ctx_param_ext_119912 = n_112804;
    ctx_param_ext_119913 = (int64_t) 0;
    ctx_param_ext_119914 = n_112804;
    ctx_param_ext_119915 = m_112803;
    ctx_param_ext_119916 = (int64_t) 1;
    ctx_param_ext_119917 = n_112804;
    if (memblock_set(ctx, &mem_param_119902, &mem_119890, "mem_119890") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_119910, &mem_119890, "mem_119890") != 0)
        return 1;
    if (memblock_set(ctx, &mem_param_119918, &mem_119894, "mem_119894") != 0)
        return 1;
    for (int64_t i_outer_113254 = 0; i_outer_113254 < outer_112814;
         i_outer_113254++) {
        int64_t ext_121146;
        int64_t ext_121144;
        struct memblock ext_mem_121140;
        
        ext_mem_121140.references = NULL;
        
        struct memblock ext_mem_121139;
        
        ext_mem_121139.references = NULL;
        
        struct memblock mem_param_119932;
        
        mem_param_119932.references = NULL;
        
        int64_t ctx_param_ext_119934;
        int64_t ctx_param_ext_119936;
        struct memblock mem_param_119940;
        
        mem_param_119940.references = NULL;
        ctx_param_ext_119934 = ctx_param_ext_119904;
        ctx_param_ext_119936 = ctx_param_ext_119906;
        if (memblock_set(ctx, &mem_param_119932, &mem_param_119902,
                         "mem_param_119902") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119940, &mem_param_119910,
                         "mem_param_119910") != 0)
            return 1;
        for (int64_t _i_inner_113260 = 0; _i_inner_113260 < inner_112813;
             _i_inner_113260++) {
            int64_t flat_tid_115295 = (int64_t) 0;
            int32_t num_tasks_122275;
            int64_t flat_tid_115297 = (int64_t) 0;
            struct futhark_mc_task_128437 futhark_mc_task_128437;
            
            futhark_mc_task_128437.ctx = ctx;
            futhark_mc_task_128437.free_m_112803 = m_112803;
            futhark_mc_task_128437.free_n_112804 = n_112804;
            futhark_mc_task_128437.free_Y_mem_119653 = Y_mem_119653.mem;
            futhark_mc_task_128437.free_bytes_119697 = bytes_119697;
            futhark_mc_task_128437.free_ctx_param_ext_119936 =
                ctx_param_ext_119936;
            futhark_mc_task_128437.free_mem_param_119940 = mem_param_119940.mem;
            futhark_mc_task_128437.free_mem_119962 = mem_119962;
            
            struct scheduler_segop futhark_mc_task_128437_task;
            
            futhark_mc_task_128437_task.args = &futhark_mc_task_128437;
            futhark_mc_task_128437_task.top_level_fn =
                futhark_mc_segmap_task_128438;
            futhark_mc_task_128437_task.name = "futhark_mc_segmap_task_128438";
            futhark_mc_task_128437_task.iterations = m_112803;
            futhark_mc_task_128437_task.task_time =
                &ctx->futhark_mc_segmap_task_128438_total_time;
            futhark_mc_task_128437_task.task_iter =
                &ctx->futhark_mc_segmap_task_128438_total_iter;
            futhark_mc_task_128437_task.sched = STATIC;
            futhark_mc_task_128437_task.nested_fn =
                futhark_mc_segmap_nested_task_128442;
            
            int futhark_mc_segmap_task_128438_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128437_task);
            
            if (futhark_mc_segmap_task_128438_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115307 = (int64_t) 0;
            int32_t num_tasks_122296;
            int64_t flat_tid_115309 = (int64_t) 0;
            struct futhark_mc_task_128450 futhark_mc_task_128450;
            
            futhark_mc_task_128450.ctx = ctx;
            futhark_mc_task_128450.free_m_112803 = m_112803;
            futhark_mc_task_128450.free_n_112804 = n_112804;
            futhark_mc_task_128450.free_n_p_112806 = n_p_112806;
            futhark_mc_task_128450.free_css_chunk_len_112850 =
                css_chunk_len_112850;
            futhark_mc_task_128450.free_mem_119740 = mem_119740;
            futhark_mc_task_128450.free_bytes_119741 = bytes_119741;
            futhark_mc_task_128450.free_mem_119762 = mem_119762;
            futhark_mc_task_128450.free_mem_119962 = mem_119962;
            futhark_mc_task_128450.free_mem_119984 = mem_119984;
            
            struct scheduler_segop futhark_mc_task_128450_task;
            
            futhark_mc_task_128450_task.args = &futhark_mc_task_128450;
            futhark_mc_task_128450_task.top_level_fn =
                futhark_mc_segmap_task_128451;
            futhark_mc_task_128450_task.name = "futhark_mc_segmap_task_128451";
            futhark_mc_task_128450_task.iterations = m_112803;
            futhark_mc_task_128450_task.task_time =
                &ctx->futhark_mc_segmap_task_128451_total_time;
            futhark_mc_task_128450_task.task_iter =
                &ctx->futhark_mc_segmap_task_128451_total_iter;
            futhark_mc_task_128450_task.sched = STATIC;
            futhark_mc_task_128450_task.nested_fn =
                futhark_mc_segmap_nested_task_128455;
            
            int futhark_mc_segmap_task_128451_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128450_task);
            
            if (futhark_mc_segmap_task_128451_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115368 = (int64_t) 0;
            int32_t num_tasks_122394;
            int64_t flat_tid_115370 = (int64_t) 0;
            struct futhark_mc_task_128471 futhark_mc_task_128471;
            
            futhark_mc_task_128471.ctx = ctx;
            futhark_mc_task_128471.free_m_112803 = m_112803;
            futhark_mc_task_128471.free_n_p_112806 = n_p_112806;
            futhark_mc_task_128471.free_C_len_112852 = C_len_112852;
            futhark_mc_task_128471.free_mem_119984 = mem_119984;
            futhark_mc_task_128471.free_bytes_119985 = bytes_119985;
            futhark_mc_task_128471.free_mem_120006 = mem_120006;
            
            struct scheduler_segop futhark_mc_task_128471_task;
            
            futhark_mc_task_128471_task.args = &futhark_mc_task_128471;
            futhark_mc_task_128471_task.top_level_fn =
                futhark_mc_segmap_task_128472;
            futhark_mc_task_128471_task.name = "futhark_mc_segmap_task_128472";
            futhark_mc_task_128471_task.iterations = m_112803;
            futhark_mc_task_128471_task.task_time =
                &ctx->futhark_mc_segmap_task_128472_total_time;
            futhark_mc_task_128471_task.task_iter =
                &ctx->futhark_mc_segmap_task_128472_total_iter;
            futhark_mc_task_128471_task.sched = STATIC;
            futhark_mc_task_128471_task.nested_fn =
                futhark_mc_segmap_nested_task_128476;
            
            int futhark_mc_segmap_task_128472_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128471_task);
            
            if (futhark_mc_segmap_task_128472_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_115383 = (int64_t) 0;
            int32_t num_tasks_122421;
            int64_t flat_tid_115385 = (int64_t) 0;
            struct futhark_mc_task_128484 futhark_mc_task_128484;
            
            futhark_mc_task_128484.ctx = ctx;
            futhark_mc_task_128484.free_m_112803 = m_112803;
            futhark_mc_task_128484.free_n_112804 = n_112804;
            futhark_mc_task_128484.free_n_p_112806 = n_p_112806;
            futhark_mc_task_128484.free_i64_res_112846 = i64_res_112846;
            futhark_mc_task_128484.free_C_len_112852 = C_len_112852;
            futhark_mc_task_128484.free_lifted_single_ma_arg_113192 =
                lifted_single_ma_arg_113192;
            futhark_mc_task_128484.free_lifted_single_ma_arg_113209 =
                lifted_single_ma_arg_113209;
            futhark_mc_task_128484.free_bytes_119697 = bytes_119697;
            futhark_mc_task_128484.free_mem_120006 = mem_120006;
            futhark_mc_task_128484.free_bytes_120007 = bytes_120007;
            futhark_mc_task_128484.free_bytes_120010 = bytes_120010;
            futhark_mc_task_128484.free_mem_120064 = mem_120064;
            
            struct scheduler_segop futhark_mc_task_128484_task;
            
            futhark_mc_task_128484_task.args = &futhark_mc_task_128484;
            futhark_mc_task_128484_task.top_level_fn =
                futhark_mc_segmap_task_128485;
            futhark_mc_task_128484_task.name = "futhark_mc_segmap_task_128485";
            futhark_mc_task_128484_task.iterations = m_112803;
            futhark_mc_task_128484_task.task_time =
                &ctx->futhark_mc_segmap_task_128485_total_time;
            futhark_mc_task_128484_task.task_iter =
                &ctx->futhark_mc_segmap_task_128485_total_iter;
            futhark_mc_task_128484_task.sched = STATIC;
            futhark_mc_task_128484_task.nested_fn =
                futhark_mc_segmap_nested_task_128491;
            
            int futhark_mc_segmap_task_128485_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128484_task);
            
            if (futhark_mc_segmap_task_128485_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock ext_mem_120533;
            
            ext_mem_120533.references = NULL;
            
            struct memblock ext_mem_120532;
            
            ext_mem_120532.references = NULL;
            if (cond_113245) {
                bool match_lit_113396 = (int64_t) 0 == l_degree_112810;
                struct memblock ext_mem_120182;
                
                ext_mem_120182.references = NULL;
                
                struct memblock ext_mem_120181;
                
                ext_mem_120181.references = NULL;
                if (match_lit_113396) {
                    struct memblock mem_120068;
                    
                    mem_120068.references = NULL;
                    if (memblock_alloc(ctx, &mem_120068, bytes_119821,
                                       "mem_120068")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_122663 = 0; i_122663 < m_112803;
                         i_122663++) {
                        for (int64_t i_122664 = 0; i_122664 < l_n_m_112854;
                             i_122664++) {
                            ((float *) mem_120068.mem)[i_122663 * l_n_m_112854 +
                                                       i_122664] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120090;
                    
                    mem_120090.references = NULL;
                    if (memblock_alloc(ctx, &mem_120090, bytes_119821,
                                       "mem_120090")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_115487 = (int64_t) 0;
                    int32_t num_tasks_122665;
                    int64_t flat_tid_115489 = (int64_t) 0;
                    struct futhark_mc_task_128533 futhark_mc_task_128533;
                    
                    futhark_mc_task_128533.ctx = ctx;
                    futhark_mc_task_128533.free_m_112803 = m_112803;
                    futhark_mc_task_128533.free_n_112804 = n_112804;
                    futhark_mc_task_128533.free_l_window_112808 =
                        l_window_112808;
                    futhark_mc_task_128533.free_t_jump_112811 = t_jump_112811;
                    futhark_mc_task_128533.free_l_n_m_112854 = l_n_m_112854;
                    futhark_mc_task_128533.free_i_112880 = i_112880;
                    futhark_mc_task_128533.free_bytes_119766 = bytes_119766;
                    futhark_mc_task_128533.free_mem_119820 = mem_119820;
                    futhark_mc_task_128533.free_mem_119824 = mem_119824;
                    futhark_mc_task_128533.free_ctx_param_ext_119913 =
                        ctx_param_ext_119913;
                    futhark_mc_task_128533.free_ctx_param_ext_119914 =
                        ctx_param_ext_119914;
                    futhark_mc_task_128533.free_ctx_param_ext_119916 =
                        ctx_param_ext_119916;
                    futhark_mc_task_128533.free_mem_param_119918 =
                        mem_param_119918.mem;
                    futhark_mc_task_128533.free_mem_120064 = mem_120064;
                    futhark_mc_task_128533.free_mem_120090 = mem_120090.mem;
                    
                    struct scheduler_segop futhark_mc_task_128533_task;
                    
                    futhark_mc_task_128533_task.args = &futhark_mc_task_128533;
                    futhark_mc_task_128533_task.top_level_fn =
                        futhark_mc_segmap_task_128534;
                    futhark_mc_task_128533_task.name =
                        "futhark_mc_segmap_task_128534";
                    futhark_mc_task_128533_task.iterations = m_112803;
                    futhark_mc_task_128533_task.task_time =
                        &ctx->futhark_mc_segmap_task_128534_total_time;
                    futhark_mc_task_128533_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128534_total_iter;
                    futhark_mc_task_128533_task.sched = STATIC;
                    futhark_mc_task_128533_task.nested_fn =
                        futhark_mc_segmap_nested_task_128538;
                    
                    int futhark_mc_segmap_task_128534_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128533_task);
                    
                    if (futhark_mc_segmap_task_128534_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120182, &mem_120090,
                                     "mem_120090") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120181, &mem_120068,
                                     "mem_120068") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120090, "mem_120090") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120068, "mem_120068") != 0)
                        return 1;
                } else {
                    bool match_lit_113465 = (int64_t) 1 == l_degree_112810;
                    struct memblock ext_mem_120180;
                    
                    ext_mem_120180.references = NULL;
                    
                    struct memblock ext_mem_120179;
                    
                    ext_mem_120179.references = NULL;
                    if (match_lit_113465) {
                        struct memblock mem_120130;
                        
                        mem_120130.references = NULL;
                        if (memblock_alloc(ctx, &mem_120130, bytes_119821,
                                           "mem_120130")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120134;
                        
                        mem_120134.references = NULL;
                        if (memblock_alloc(ctx, &mem_120134, bytes_119821,
                                           "mem_120134")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_115672 = (int64_t) 0;
                        int32_t num_tasks_122954;
                        int64_t flat_tid_115674 = (int64_t) 0;
                        struct futhark_mc_task_128559 futhark_mc_task_128559;
                        
                        futhark_mc_task_128559.ctx = ctx;
                        futhark_mc_task_128559.free_m_112803 = m_112803;
                        futhark_mc_task_128559.free_n_112804 = n_112804;
                        futhark_mc_task_128559.free_l_window_112808 =
                            l_window_112808;
                        futhark_mc_task_128559.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128559.free_l_n_m_112854 = l_n_m_112854;
                        futhark_mc_task_128559.free_i_112880 = i_112880;
                        futhark_mc_task_128559.free_bytes_119766 = bytes_119766;
                        futhark_mc_task_128559.free_mem_119820 = mem_119820;
                        futhark_mc_task_128559.free_mem_119824 = mem_119824;
                        futhark_mc_task_128559.free_ctx_param_ext_119913 =
                            ctx_param_ext_119913;
                        futhark_mc_task_128559.free_ctx_param_ext_119914 =
                            ctx_param_ext_119914;
                        futhark_mc_task_128559.free_ctx_param_ext_119916 =
                            ctx_param_ext_119916;
                        futhark_mc_task_128559.free_mem_param_119918 =
                            mem_param_119918.mem;
                        futhark_mc_task_128559.free_mem_120064 = mem_120064;
                        futhark_mc_task_128559.free_mem_120130 = mem_120130.mem;
                        futhark_mc_task_128559.free_mem_120134 = mem_120134.mem;
                        
                        struct scheduler_segop futhark_mc_task_128559_task;
                        
                        futhark_mc_task_128559_task.args =
                            &futhark_mc_task_128559;
                        futhark_mc_task_128559_task.top_level_fn =
                            futhark_mc_segmap_task_128560;
                        futhark_mc_task_128559_task.name =
                            "futhark_mc_segmap_task_128560";
                        futhark_mc_task_128559_task.iterations = m_112803;
                        futhark_mc_task_128559_task.task_time =
                            &ctx->futhark_mc_segmap_task_128560_total_time;
                        futhark_mc_task_128559_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128560_total_iter;
                        futhark_mc_task_128559_task.sched = STATIC;
                        futhark_mc_task_128559_task.nested_fn =
                            futhark_mc_segmap_nested_task_128565;
                        
                        int futhark_mc_segmap_task_128560_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128559_task);
                        
                        if (futhark_mc_segmap_task_128560_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120180, &mem_120130,
                                         "mem_120130") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120179, &mem_120134,
                                         "mem_120134") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120134, "mem_120134") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120130, "mem_120130") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120174;
                        
                        mem_120174.references = NULL;
                        if (memblock_alloc(ctx, &mem_120174, bytes_119821,
                                           "mem_120174")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120178;
                        
                        mem_120178.references = NULL;
                        if (memblock_alloc(ctx, &mem_120178, bytes_119821,
                                           "mem_120178")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_115942 = (int64_t) 0;
                        int32_t num_tasks_123381;
                        int64_t flat_tid_115944 = (int64_t) 0;
                        struct futhark_mc_task_128590 futhark_mc_task_128590;
                        
                        futhark_mc_task_128590.ctx = ctx;
                        futhark_mc_task_128590.free_m_112803 = m_112803;
                        futhark_mc_task_128590.free_n_112804 = n_112804;
                        futhark_mc_task_128590.free_l_window_112808 =
                            l_window_112808;
                        futhark_mc_task_128590.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128590.free_l_n_m_112854 = l_n_m_112854;
                        futhark_mc_task_128590.free_i_112880 = i_112880;
                        futhark_mc_task_128590.free_bytes_119766 = bytes_119766;
                        futhark_mc_task_128590.free_mem_119820 = mem_119820;
                        futhark_mc_task_128590.free_mem_119824 = mem_119824;
                        futhark_mc_task_128590.free_ctx_param_ext_119913 =
                            ctx_param_ext_119913;
                        futhark_mc_task_128590.free_ctx_param_ext_119914 =
                            ctx_param_ext_119914;
                        futhark_mc_task_128590.free_ctx_param_ext_119916 =
                            ctx_param_ext_119916;
                        futhark_mc_task_128590.free_mem_param_119918 =
                            mem_param_119918.mem;
                        futhark_mc_task_128590.free_mem_120064 = mem_120064;
                        futhark_mc_task_128590.free_mem_120174 = mem_120174.mem;
                        futhark_mc_task_128590.free_mem_120178 = mem_120178.mem;
                        
                        struct scheduler_segop futhark_mc_task_128590_task;
                        
                        futhark_mc_task_128590_task.args =
                            &futhark_mc_task_128590;
                        futhark_mc_task_128590_task.top_level_fn =
                            futhark_mc_segmap_task_128591;
                        futhark_mc_task_128590_task.name =
                            "futhark_mc_segmap_task_128591";
                        futhark_mc_task_128590_task.iterations = m_112803;
                        futhark_mc_task_128590_task.task_time =
                            &ctx->futhark_mc_segmap_task_128591_total_time;
                        futhark_mc_task_128590_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128591_total_iter;
                        futhark_mc_task_128590_task.sched = STATIC;
                        futhark_mc_task_128590_task.nested_fn =
                            futhark_mc_segmap_nested_task_128596;
                        
                        int futhark_mc_segmap_task_128591_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128590_task);
                        
                        if (futhark_mc_segmap_task_128591_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120180, &mem_120174,
                                         "mem_120174") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120179, &mem_120178,
                                         "mem_120178") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120178, "mem_120178") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120174, "mem_120174") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120182, &ext_mem_120180,
                                     "ext_mem_120180") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120181, &ext_mem_120179,
                                     "ext_mem_120179") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120179,
                                       "ext_mem_120179") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120180,
                                       "ext_mem_120180") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120533, &ext_mem_120182,
                                 "ext_mem_120182") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120532, &ext_mem_120181,
                                 "ext_mem_120181") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120181, "ext_mem_120181") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120182, "ext_mem_120182") != 0)
                    return 1;
            } else {
                bool match_lit_113690 = (int64_t) 0 == l_degree_112810;
                struct memblock ext_mem_120531;
                
                ext_mem_120531.references = NULL;
                
                struct memblock ext_mem_120530;
                
                ext_mem_120530.references = NULL;
                if (match_lit_113690) {
                    struct memblock mem_120186;
                    
                    mem_120186.references = NULL;
                    if (memblock_alloc(ctx, &mem_120186, bytes_119821,
                                       "mem_120186")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_123940 = 0; i_123940 < m_112803;
                         i_123940++) {
                        for (int64_t i_123941 = 0; i_123941 < l_n_m_112854;
                             i_123941++) {
                            ((float *) mem_120186.mem)[i_123940 * l_n_m_112854 +
                                                       i_123941] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120241;
                    
                    mem_120241.references = NULL;
                    if (memblock_alloc(ctx, &mem_120241, bytes_119821,
                                       "mem_120241")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_120188 = (int64_t) 4 * l_window_112808;
                    int64_t bytes_120187 = smax64((int64_t) 0, binop_y_120188);
                    int64_t flat_tid_116308 = (int64_t) 0;
                    int32_t num_tasks_123942;
                    int64_t flat_tid_116310 = (int64_t) 0;
                    struct futhark_mc_task_128623 futhark_mc_task_128623;
                    
                    futhark_mc_task_128623.ctx = ctx;
                    futhark_mc_task_128623.free_m_112803 = m_112803;
                    futhark_mc_task_128623.free_n_112804 = n_112804;
                    futhark_mc_task_128623.free_l_window_112808 =
                        l_window_112808;
                    futhark_mc_task_128623.free_t_jump_112811 = t_jump_112811;
                    futhark_mc_task_128623.free_l_n_m_112854 = l_n_m_112854;
                    futhark_mc_task_128623.free_i_112880 = i_112880;
                    futhark_mc_task_128623.free_bytes_119766 = bytes_119766;
                    futhark_mc_task_128623.free_mem_119820 = mem_119820;
                    futhark_mc_task_128623.free_mem_119824 = mem_119824;
                    futhark_mc_task_128623.free_ctx_param_ext_119913 =
                        ctx_param_ext_119913;
                    futhark_mc_task_128623.free_ctx_param_ext_119914 =
                        ctx_param_ext_119914;
                    futhark_mc_task_128623.free_ctx_param_ext_119916 =
                        ctx_param_ext_119916;
                    futhark_mc_task_128623.free_mem_param_119918 =
                        mem_param_119918.mem;
                    futhark_mc_task_128623.free_mem_120064 = mem_120064;
                    futhark_mc_task_128623.free_bytes_120187 = bytes_120187;
                    futhark_mc_task_128623.free_mem_120241 = mem_120241.mem;
                    
                    struct scheduler_segop futhark_mc_task_128623_task;
                    
                    futhark_mc_task_128623_task.args = &futhark_mc_task_128623;
                    futhark_mc_task_128623_task.top_level_fn =
                        futhark_mc_segmap_task_128624;
                    futhark_mc_task_128623_task.name =
                        "futhark_mc_segmap_task_128624";
                    futhark_mc_task_128623_task.iterations = m_112803;
                    futhark_mc_task_128623_task.task_time =
                        &ctx->futhark_mc_segmap_task_128624_total_time;
                    futhark_mc_task_128623_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128624_total_iter;
                    futhark_mc_task_128623_task.sched = STATIC;
                    futhark_mc_task_128623_task.nested_fn =
                        futhark_mc_segmap_nested_task_128629;
                    
                    int futhark_mc_segmap_task_128624_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128623_task);
                    
                    if (futhark_mc_segmap_task_128624_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120531, &mem_120241,
                                     "mem_120241") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120530, &mem_120186,
                                     "mem_120186") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120241, "mem_120241") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120186, "mem_120186") != 0)
                        return 1;
                } else {
                    bool match_lit_113745 = (int64_t) 1 == l_degree_112810;
                    struct memblock ext_mem_120529;
                    
                    ext_mem_120529.references = NULL;
                    
                    struct memblock ext_mem_120528;
                    
                    ext_mem_120528.references = NULL;
                    if (match_lit_113745) {
                        struct memblock mem_120347;
                        
                        mem_120347.references = NULL;
                        if (memblock_alloc(ctx, &mem_120347, bytes_119821,
                                           "mem_120347")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120351;
                        
                        mem_120351.references = NULL;
                        if (memblock_alloc(ctx, &mem_120351, bytes_119821,
                                           "mem_120351")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120243 = (int64_t) 4 * l_window_112808;
                        int64_t bytes_120242 = smax64((int64_t) 0,
                                                      binop_y_120243);
                        int64_t flat_tid_116451 = (int64_t) 0;
                        int32_t num_tasks_124171;
                        int64_t flat_tid_116453 = (int64_t) 0;
                        struct futhark_mc_task_128652 futhark_mc_task_128652;
                        
                        futhark_mc_task_128652.ctx = ctx;
                        futhark_mc_task_128652.free_m_112803 = m_112803;
                        futhark_mc_task_128652.free_n_112804 = n_112804;
                        futhark_mc_task_128652.free_l_window_112808 =
                            l_window_112808;
                        futhark_mc_task_128652.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128652.free_l_n_m_112854 = l_n_m_112854;
                        futhark_mc_task_128652.free_i_112880 = i_112880;
                        futhark_mc_task_128652.free_bytes_119766 = bytes_119766;
                        futhark_mc_task_128652.free_mem_119820 = mem_119820;
                        futhark_mc_task_128652.free_mem_119824 = mem_119824;
                        futhark_mc_task_128652.free_ctx_param_ext_119913 =
                            ctx_param_ext_119913;
                        futhark_mc_task_128652.free_ctx_param_ext_119914 =
                            ctx_param_ext_119914;
                        futhark_mc_task_128652.free_ctx_param_ext_119916 =
                            ctx_param_ext_119916;
                        futhark_mc_task_128652.free_mem_param_119918 =
                            mem_param_119918.mem;
                        futhark_mc_task_128652.free_mem_120064 = mem_120064;
                        futhark_mc_task_128652.free_bytes_120242 = bytes_120242;
                        futhark_mc_task_128652.free_mem_120347 = mem_120347.mem;
                        futhark_mc_task_128652.free_mem_120351 = mem_120351.mem;
                        
                        struct scheduler_segop futhark_mc_task_128652_task;
                        
                        futhark_mc_task_128652_task.args =
                            &futhark_mc_task_128652;
                        futhark_mc_task_128652_task.top_level_fn =
                            futhark_mc_segmap_task_128653;
                        futhark_mc_task_128652_task.name =
                            "futhark_mc_segmap_task_128653";
                        futhark_mc_task_128652_task.iterations = m_112803;
                        futhark_mc_task_128652_task.task_time =
                            &ctx->futhark_mc_segmap_task_128653_total_time;
                        futhark_mc_task_128652_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128653_total_iter;
                        futhark_mc_task_128652_task.sched = STATIC;
                        futhark_mc_task_128652_task.nested_fn =
                            futhark_mc_segmap_nested_task_128660;
                        
                        int futhark_mc_segmap_task_128653_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128652_task);
                        
                        if (futhark_mc_segmap_task_128653_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120529, &mem_120347,
                                         "mem_120347") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120528, &mem_120351,
                                         "mem_120351") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120351, "mem_120351") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120347, "mem_120347") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120523;
                        
                        mem_120523.references = NULL;
                        if (memblock_alloc(ctx, &mem_120523, bytes_119821,
                                           "mem_120523")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120527;
                        
                        mem_120527.references = NULL;
                        if (memblock_alloc(ctx, &mem_120527, bytes_119821,
                                           "mem_120527")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120353 = (int64_t) 4 * l_window_112808;
                        int64_t bytes_120352 = smax64((int64_t) 0,
                                                      binop_y_120353);
                        int64_t flat_tid_116682 = (int64_t) 0;
                        int32_t num_tasks_124553;
                        int64_t flat_tid_116684 = (int64_t) 0;
                        struct futhark_mc_task_128689 futhark_mc_task_128689;
                        
                        futhark_mc_task_128689.ctx = ctx;
                        futhark_mc_task_128689.free_m_112803 = m_112803;
                        futhark_mc_task_128689.free_n_112804 = n_112804;
                        futhark_mc_task_128689.free_l_window_112808 =
                            l_window_112808;
                        futhark_mc_task_128689.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128689.free_l_n_m_112854 = l_n_m_112854;
                        futhark_mc_task_128689.free_i_112880 = i_112880;
                        futhark_mc_task_128689.free_bytes_119766 = bytes_119766;
                        futhark_mc_task_128689.free_mem_119820 = mem_119820;
                        futhark_mc_task_128689.free_mem_119824 = mem_119824;
                        futhark_mc_task_128689.free_ctx_param_ext_119913 =
                            ctx_param_ext_119913;
                        futhark_mc_task_128689.free_ctx_param_ext_119914 =
                            ctx_param_ext_119914;
                        futhark_mc_task_128689.free_ctx_param_ext_119916 =
                            ctx_param_ext_119916;
                        futhark_mc_task_128689.free_mem_param_119918 =
                            mem_param_119918.mem;
                        futhark_mc_task_128689.free_mem_120064 = mem_120064;
                        futhark_mc_task_128689.free_bytes_120352 = bytes_120352;
                        futhark_mc_task_128689.free_mem_120523 = mem_120523.mem;
                        futhark_mc_task_128689.free_mem_120527 = mem_120527.mem;
                        
                        struct scheduler_segop futhark_mc_task_128689_task;
                        
                        futhark_mc_task_128689_task.args =
                            &futhark_mc_task_128689;
                        futhark_mc_task_128689_task.top_level_fn =
                            futhark_mc_segmap_task_128690;
                        futhark_mc_task_128689_task.name =
                            "futhark_mc_segmap_task_128690";
                        futhark_mc_task_128689_task.iterations = m_112803;
                        futhark_mc_task_128689_task.task_time =
                            &ctx->futhark_mc_segmap_task_128690_total_time;
                        futhark_mc_task_128689_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128690_total_iter;
                        futhark_mc_task_128689_task.sched = STATIC;
                        futhark_mc_task_128689_task.nested_fn =
                            futhark_mc_segmap_nested_task_128699;
                        
                        int futhark_mc_segmap_task_128690_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128689_task);
                        
                        if (futhark_mc_segmap_task_128690_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120529, &mem_120523,
                                         "mem_120523") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120528, &mem_120527,
                                         "mem_120527") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120527, "mem_120527") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120523, "mem_120523") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120531, &ext_mem_120529,
                                     "ext_mem_120529") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120530, &ext_mem_120528,
                                     "ext_mem_120528") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120528,
                                       "ext_mem_120528") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120529,
                                       "ext_mem_120529") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_120533, &ext_mem_120531,
                                 "ext_mem_120531") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_120532, &ext_mem_120530,
                                 "ext_mem_120530") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120530, "ext_mem_120530") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120531, "ext_mem_120531") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_120556;
            
            ext_mem_120556.references = NULL;
            if (cond_113174) {
                bool zzero_113989 = l_jump_112812 == (int64_t) 0;
                bool nonzzero_113990 = !zzero_113989;
                bool nonzzero_cert_113991;
                
                if (!nonzzero_113990) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:474:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:221:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:219:15-222:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120556,
                                       "ext_mem_120556") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120532,
                                       "ext_mem_120532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120533,
                                       "ext_mem_120533") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119940,
                                       "mem_param_119940") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119932,
                                       "mem_param_119932") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121139,
                                       "ext_mem_121139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121140,
                                       "ext_mem_121140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119918,
                                       "mem_param_119918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119910,
                                       "mem_param_119910") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119902,
                                       "mem_param_119902") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121392,
                                       "ext_mem_121392") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121393,
                                       "ext_mem_121393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121394,
                                       "ext_mem_121394") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121508,
                                       "mem_out_121508") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121507,
                                       "mem_out_121507") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121506,
                                       "mem_out_121506") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_113992 = sub64(l_n_m_112854, (int64_t) 1);
                struct memblock mem_120555;
                
                mem_120555.references = NULL;
                if (memblock_alloc(ctx, &mem_120555, bytes_119715,
                                   "mem_120555")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_117023 = (int64_t) 0;
                int32_t num_tasks_125119;
                int64_t flat_tid_117025 = (int64_t) 0;
                struct futhark_mc_task_128738 futhark_mc_task_128738;
                
                futhark_mc_task_128738.ctx = ctx;
                futhark_mc_task_128738.free_m_112803 = m_112803;
                futhark_mc_task_128738.free_n_112804 = n_112804;
                futhark_mc_task_128738.free_l_jump_112812 = l_jump_112812;
                futhark_mc_task_128738.free_l_n_m_112854 = l_n_m_112854;
                futhark_mc_task_128738.free_i_112880 = i_112880;
                futhark_mc_task_128738.free_y_113992 = y_113992;
                futhark_mc_task_128738.free_bytes_119697 = bytes_119697;
                futhark_mc_task_128738.free_ext_mem_120532 = ext_mem_120532.mem;
                futhark_mc_task_128738.free_ext_mem_120533 = ext_mem_120533.mem;
                futhark_mc_task_128738.free_mem_120555 = mem_120555.mem;
                
                struct scheduler_segop futhark_mc_task_128738_task;
                
                futhark_mc_task_128738_task.args = &futhark_mc_task_128738;
                futhark_mc_task_128738_task.top_level_fn =
                    futhark_mc_segmap_task_128739;
                futhark_mc_task_128738_task.name =
                    "futhark_mc_segmap_task_128739";
                futhark_mc_task_128738_task.iterations = m_112803;
                futhark_mc_task_128738_task.task_time =
                    &ctx->futhark_mc_segmap_task_128739_total_time;
                futhark_mc_task_128738_task.task_iter =
                    &ctx->futhark_mc_segmap_task_128739_total_iter;
                futhark_mc_task_128738_task.sched = STATIC;
                futhark_mc_task_128738_task.nested_fn =
                    futhark_mc_segmap_nested_task_128743;
                
                int futhark_mc_segmap_task_128739_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_128738_task);
                
                if (futhark_mc_segmap_task_128739_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_120556, &mem_120555,
                                 "mem_120555") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_120555, "mem_120555") != 0)
                    return 1;
            } else {
                bool dim_match_114044 = n_112804 == l_n_m_112854;
                bool empty_or_match_cert_114045;
                
                if (!dim_match_114044) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_112803, ", ",
                                  (long long) l_n_m_112854,
                                  ") cannot match shape of type `[",
                                  (long long) m_112803, "][",
                                  (long long) n_112804, "]t`.",
                                  "-> #0  stl.fut:224:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_120556,
                                       "ext_mem_120556") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120532,
                                       "ext_mem_120532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120533,
                                       "ext_mem_120533") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119940,
                                       "mem_param_119940") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119932,
                                       "mem_param_119932") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121139,
                                       "ext_mem_121139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121140,
                                       "ext_mem_121140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119918,
                                       "mem_param_119918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119910,
                                       "mem_param_119910") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119902,
                                       "mem_param_119902") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121392,
                                       "ext_mem_121392") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121393,
                                       "ext_mem_121393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121394,
                                       "ext_mem_121394") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121508,
                                       "mem_out_121508") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121507,
                                       "mem_out_121507") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121506,
                                       "mem_out_121506") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_120556, &ext_mem_120533,
                                 "ext_mem_120533") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_120532, "ext_mem_120532") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120533, "ext_mem_120533") != 0)
                return 1;
            
            struct memblock mem_120641;
            
            mem_120641.references = NULL;
            if (memblock_alloc(ctx, &mem_120641, bytes_119715, "mem_120641")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_117079 = (int64_t) 0;
            int32_t num_tasks_125227;
            int64_t flat_tid_117081 = (int64_t) 0;
            struct futhark_mc_task_128751 futhark_mc_task_128751;
            
            futhark_mc_task_128751.ctx = ctx;
            futhark_mc_task_128751.free_m_112803 = m_112803;
            futhark_mc_task_128751.free_n_112804 = n_112804;
            futhark_mc_task_128751.free_n_p_112806 = n_p_112806;
            futhark_mc_task_128751.free_C_len_112852 = C_len_112852;
            futhark_mc_task_128751.free_Y_mem_119653 = Y_mem_119653.mem;
            futhark_mc_task_128751.free_mem_119693 = mem_119693;
            futhark_mc_task_128751.free_bytes_119697 = bytes_119697;
            futhark_mc_task_128751.free_ctx_param_ext_119913 =
                ctx_param_ext_119913;
            futhark_mc_task_128751.free_ctx_param_ext_119914 =
                ctx_param_ext_119914;
            futhark_mc_task_128751.free_ctx_param_ext_119916 =
                ctx_param_ext_119916;
            futhark_mc_task_128751.free_mem_param_119918 = mem_param_119918.mem;
            futhark_mc_task_128751.free_mem_120006 = mem_120006;
            futhark_mc_task_128751.free_ext_mem_120556 = ext_mem_120556.mem;
            futhark_mc_task_128751.free_ext_120557 = ext_120557;
            futhark_mc_task_128751.free_mem_120633 = mem_120633;
            futhark_mc_task_128751.free_mem_120637 = mem_120637;
            futhark_mc_task_128751.free_mem_120641 = mem_120641.mem;
            
            struct scheduler_segop futhark_mc_task_128751_task;
            
            futhark_mc_task_128751_task.args = &futhark_mc_task_128751;
            futhark_mc_task_128751_task.top_level_fn =
                futhark_mc_segmap_task_128752;
            futhark_mc_task_128751_task.name = "futhark_mc_segmap_task_128752";
            futhark_mc_task_128751_task.iterations = m_112803;
            futhark_mc_task_128751_task.task_time =
                &ctx->futhark_mc_segmap_task_128752_total_time;
            futhark_mc_task_128751_task.task_iter =
                &ctx->futhark_mc_segmap_task_128752_total_iter;
            futhark_mc_task_128751_task.sched = STATIC;
            futhark_mc_task_128751_task.nested_fn =
                futhark_mc_segmap_nested_task_128759;
            
            int futhark_mc_segmap_task_128752_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128751_task);
            
            if (futhark_mc_segmap_task_128752_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_unref(ctx, &ext_mem_120556, "ext_mem_120556") != 0)
                return 1;
            
            struct memblock ext_mem_121110;
            
            ext_mem_121110.references = NULL;
            
            struct memblock ext_mem_121109;
            
            ext_mem_121109.references = NULL;
            if (cond_113250) {
                bool match_lit_114097 = (int64_t) 0 == t_degree_112809;
                struct memblock ext_mem_120759;
                
                ext_mem_120759.references = NULL;
                
                struct memblock ext_mem_120758;
                
                ext_mem_120758.references = NULL;
                if (match_lit_114097) {
                    struct memblock mem_120645;
                    
                    mem_120645.references = NULL;
                    if (memblock_alloc(ctx, &mem_120645, bytes_119883,
                                       "mem_120645")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_125300 = 0; i_125300 < m_112803;
                         i_125300++) {
                        for (int64_t i_125301 = 0; i_125301 < t_n_m_112861;
                             i_125301++) {
                            ((float *) mem_120645.mem)[i_125300 * t_n_m_112861 +
                                                       i_125301] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120667;
                    
                    mem_120667.references = NULL;
                    if (memblock_alloc(ctx, &mem_120667, bytes_119883,
                                       "mem_120667")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t flat_tid_117113 = (int64_t) 0;
                    int32_t num_tasks_125302;
                    int64_t flat_tid_117115 = (int64_t) 0;
                    struct futhark_mc_task_128774 futhark_mc_task_128774;
                    
                    futhark_mc_task_128774.ctx = ctx;
                    futhark_mc_task_128774.free_m_112803 = m_112803;
                    futhark_mc_task_128774.free_n_112804 = n_112804;
                    futhark_mc_task_128774.free_t_window_112807 =
                        t_window_112807;
                    futhark_mc_task_128774.free_t_jump_112811 = t_jump_112811;
                    futhark_mc_task_128774.free_t_n_m_112861 = t_n_m_112861;
                    futhark_mc_task_128774.free_i_112880 = i_112880;
                    futhark_mc_task_128774.free_mem_119696 = mem_119696;
                    futhark_mc_task_128774.free_mem_119718 = mem_119718;
                    futhark_mc_task_128774.free_bytes_119828 = bytes_119828;
                    futhark_mc_task_128774.free_mem_119882 = mem_119882;
                    futhark_mc_task_128774.free_mem_119886 = mem_119886;
                    futhark_mc_task_128774.free_mem_120633 = mem_120633;
                    futhark_mc_task_128774.free_mem_120637 = mem_120637;
                    futhark_mc_task_128774.free_mem_120667 = mem_120667.mem;
                    
                    struct scheduler_segop futhark_mc_task_128774_task;
                    
                    futhark_mc_task_128774_task.args = &futhark_mc_task_128774;
                    futhark_mc_task_128774_task.top_level_fn =
                        futhark_mc_segmap_task_128775;
                    futhark_mc_task_128774_task.name =
                        "futhark_mc_segmap_task_128775";
                    futhark_mc_task_128774_task.iterations = m_112803;
                    futhark_mc_task_128774_task.task_time =
                        &ctx->futhark_mc_segmap_task_128775_total_time;
                    futhark_mc_task_128774_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128775_total_iter;
                    futhark_mc_task_128774_task.sched = STATIC;
                    futhark_mc_task_128774_task.nested_fn =
                        futhark_mc_segmap_nested_task_128779;
                    
                    int futhark_mc_segmap_task_128775_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128774_task);
                    
                    if (futhark_mc_segmap_task_128775_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_120759, &mem_120667,
                                     "mem_120667") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120758, &mem_120645,
                                     "mem_120645") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120667, "mem_120667") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120645, "mem_120645") != 0)
                        return 1;
                } else {
                    bool match_lit_114168 = (int64_t) 1 == t_degree_112809;
                    struct memblock ext_mem_120757;
                    
                    ext_mem_120757.references = NULL;
                    
                    struct memblock ext_mem_120756;
                    
                    ext_mem_120756.references = NULL;
                    if (match_lit_114168) {
                        struct memblock mem_120707;
                        
                        mem_120707.references = NULL;
                        if (memblock_alloc(ctx, &mem_120707, bytes_119883,
                                           "mem_120707")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120711;
                        
                        mem_120711.references = NULL;
                        if (memblock_alloc(ctx, &mem_120711, bytes_119883,
                                           "mem_120711")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117300 = (int64_t) 0;
                        int32_t num_tasks_125591;
                        int64_t flat_tid_117302 = (int64_t) 0;
                        struct futhark_mc_task_128800 futhark_mc_task_128800;
                        
                        futhark_mc_task_128800.ctx = ctx;
                        futhark_mc_task_128800.free_m_112803 = m_112803;
                        futhark_mc_task_128800.free_n_112804 = n_112804;
                        futhark_mc_task_128800.free_t_window_112807 =
                            t_window_112807;
                        futhark_mc_task_128800.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128800.free_t_n_m_112861 = t_n_m_112861;
                        futhark_mc_task_128800.free_i_112880 = i_112880;
                        futhark_mc_task_128800.free_mem_119696 = mem_119696;
                        futhark_mc_task_128800.free_mem_119718 = mem_119718;
                        futhark_mc_task_128800.free_bytes_119828 = bytes_119828;
                        futhark_mc_task_128800.free_mem_119882 = mem_119882;
                        futhark_mc_task_128800.free_mem_119886 = mem_119886;
                        futhark_mc_task_128800.free_mem_120633 = mem_120633;
                        futhark_mc_task_128800.free_mem_120637 = mem_120637;
                        futhark_mc_task_128800.free_mem_120707 = mem_120707.mem;
                        futhark_mc_task_128800.free_mem_120711 = mem_120711.mem;
                        
                        struct scheduler_segop futhark_mc_task_128800_task;
                        
                        futhark_mc_task_128800_task.args =
                            &futhark_mc_task_128800;
                        futhark_mc_task_128800_task.top_level_fn =
                            futhark_mc_segmap_task_128801;
                        futhark_mc_task_128800_task.name =
                            "futhark_mc_segmap_task_128801";
                        futhark_mc_task_128800_task.iterations = m_112803;
                        futhark_mc_task_128800_task.task_time =
                            &ctx->futhark_mc_segmap_task_128801_total_time;
                        futhark_mc_task_128800_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128801_total_iter;
                        futhark_mc_task_128800_task.sched = STATIC;
                        futhark_mc_task_128800_task.nested_fn =
                            futhark_mc_segmap_nested_task_128806;
                        
                        int futhark_mc_segmap_task_128801_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128800_task);
                        
                        if (futhark_mc_segmap_task_128801_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120757, &mem_120707,
                                         "mem_120707") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120756, &mem_120711,
                                         "mem_120711") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120711, "mem_120711") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120707, "mem_120707") != 0)
                            return 1;
                    } else {
                        struct memblock mem_120751;
                        
                        mem_120751.references = NULL;
                        if (memblock_alloc(ctx, &mem_120751, bytes_119883,
                                           "mem_120751")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120755;
                        
                        mem_120755.references = NULL;
                        if (memblock_alloc(ctx, &mem_120755, bytes_119883,
                                           "mem_120755")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t flat_tid_117572 = (int64_t) 0;
                        int32_t num_tasks_126018;
                        int64_t flat_tid_117574 = (int64_t) 0;
                        struct futhark_mc_task_128831 futhark_mc_task_128831;
                        
                        futhark_mc_task_128831.ctx = ctx;
                        futhark_mc_task_128831.free_m_112803 = m_112803;
                        futhark_mc_task_128831.free_n_112804 = n_112804;
                        futhark_mc_task_128831.free_t_window_112807 =
                            t_window_112807;
                        futhark_mc_task_128831.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128831.free_t_n_m_112861 = t_n_m_112861;
                        futhark_mc_task_128831.free_i_112880 = i_112880;
                        futhark_mc_task_128831.free_mem_119696 = mem_119696;
                        futhark_mc_task_128831.free_mem_119718 = mem_119718;
                        futhark_mc_task_128831.free_bytes_119828 = bytes_119828;
                        futhark_mc_task_128831.free_mem_119882 = mem_119882;
                        futhark_mc_task_128831.free_mem_119886 = mem_119886;
                        futhark_mc_task_128831.free_mem_120633 = mem_120633;
                        futhark_mc_task_128831.free_mem_120637 = mem_120637;
                        futhark_mc_task_128831.free_mem_120751 = mem_120751.mem;
                        futhark_mc_task_128831.free_mem_120755 = mem_120755.mem;
                        
                        struct scheduler_segop futhark_mc_task_128831_task;
                        
                        futhark_mc_task_128831_task.args =
                            &futhark_mc_task_128831;
                        futhark_mc_task_128831_task.top_level_fn =
                            futhark_mc_segmap_task_128832;
                        futhark_mc_task_128831_task.name =
                            "futhark_mc_segmap_task_128832";
                        futhark_mc_task_128831_task.iterations = m_112803;
                        futhark_mc_task_128831_task.task_time =
                            &ctx->futhark_mc_segmap_task_128832_total_time;
                        futhark_mc_task_128831_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128832_total_iter;
                        futhark_mc_task_128831_task.sched = STATIC;
                        futhark_mc_task_128831_task.nested_fn =
                            futhark_mc_segmap_nested_task_128837;
                        
                        int futhark_mc_segmap_task_128832_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128831_task);
                        
                        if (futhark_mc_segmap_task_128832_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_120757, &mem_120751,
                                         "mem_120751") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_120756, &mem_120755,
                                         "mem_120755") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120755, "mem_120755") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120751, "mem_120751") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_120759, &ext_mem_120757,
                                     "ext_mem_120757") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_120758, &ext_mem_120756,
                                     "ext_mem_120756") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120756,
                                       "ext_mem_120756") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120757,
                                       "ext_mem_120757") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_121110, &ext_mem_120759,
                                 "ext_mem_120759") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_121109, &ext_mem_120758,
                                 "ext_mem_120758") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120758, "ext_mem_120758") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_120759, "ext_mem_120759") != 0)
                    return 1;
            } else {
                bool match_lit_114397 = (int64_t) 0 == t_degree_112809;
                struct memblock ext_mem_121108;
                
                ext_mem_121108.references = NULL;
                
                struct memblock ext_mem_121107;
                
                ext_mem_121107.references = NULL;
                if (match_lit_114397) {
                    struct memblock mem_120763;
                    
                    mem_120763.references = NULL;
                    if (memblock_alloc(ctx, &mem_120763, bytes_119883,
                                       "mem_120763")) {
                        err = 1;
                        goto cleanup;
                    }
                    for (int64_t i_126577 = 0; i_126577 < m_112803;
                         i_126577++) {
                        for (int64_t i_126578 = 0; i_126578 < t_n_m_112861;
                             i_126578++) {
                            ((float *) mem_120763.mem)[i_126577 * t_n_m_112861 +
                                                       i_126578] = 0.0F;
                        }
                    }
                    
                    struct memblock mem_120818;
                    
                    mem_120818.references = NULL;
                    if (memblock_alloc(ctx, &mem_120818, bytes_119883,
                                       "mem_120818")) {
                        err = 1;
                        goto cleanup;
                    }
                    
                    int64_t binop_y_120765 = (int64_t) 4 * t_window_112807;
                    int64_t bytes_120764 = smax64((int64_t) 0, binop_y_120765);
                    int64_t flat_tid_117940 = (int64_t) 0;
                    int32_t num_tasks_126579;
                    int64_t flat_tid_117942 = (int64_t) 0;
                    struct futhark_mc_task_128864 futhark_mc_task_128864;
                    
                    futhark_mc_task_128864.ctx = ctx;
                    futhark_mc_task_128864.free_m_112803 = m_112803;
                    futhark_mc_task_128864.free_n_112804 = n_112804;
                    futhark_mc_task_128864.free_t_window_112807 =
                        t_window_112807;
                    futhark_mc_task_128864.free_t_jump_112811 = t_jump_112811;
                    futhark_mc_task_128864.free_t_n_m_112861 = t_n_m_112861;
                    futhark_mc_task_128864.free_i_112880 = i_112880;
                    futhark_mc_task_128864.free_mem_119696 = mem_119696;
                    futhark_mc_task_128864.free_mem_119718 = mem_119718;
                    futhark_mc_task_128864.free_bytes_119828 = bytes_119828;
                    futhark_mc_task_128864.free_mem_119882 = mem_119882;
                    futhark_mc_task_128864.free_mem_119886 = mem_119886;
                    futhark_mc_task_128864.free_mem_120633 = mem_120633;
                    futhark_mc_task_128864.free_mem_120637 = mem_120637;
                    futhark_mc_task_128864.free_bytes_120764 = bytes_120764;
                    futhark_mc_task_128864.free_mem_120818 = mem_120818.mem;
                    
                    struct scheduler_segop futhark_mc_task_128864_task;
                    
                    futhark_mc_task_128864_task.args = &futhark_mc_task_128864;
                    futhark_mc_task_128864_task.top_level_fn =
                        futhark_mc_segmap_task_128865;
                    futhark_mc_task_128864_task.name =
                        "futhark_mc_segmap_task_128865";
                    futhark_mc_task_128864_task.iterations = m_112803;
                    futhark_mc_task_128864_task.task_time =
                        &ctx->futhark_mc_segmap_task_128865_total_time;
                    futhark_mc_task_128864_task.task_iter =
                        &ctx->futhark_mc_segmap_task_128865_total_iter;
                    futhark_mc_task_128864_task.sched = STATIC;
                    futhark_mc_task_128864_task.nested_fn =
                        futhark_mc_segmap_nested_task_128870;
                    
                    int futhark_mc_segmap_task_128865_err =
                        scheduler_prepare_task(&ctx->scheduler,
                                               &futhark_mc_task_128864_task);
                    
                    if (futhark_mc_segmap_task_128865_err != 0) {
                        err = 1;
                        goto cleanup;
                    }
                    if (memblock_set(ctx, &ext_mem_121108, &mem_120818,
                                     "mem_120818") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_121107, &mem_120763,
                                     "mem_120763") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120818, "mem_120818") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120763, "mem_120763") != 0)
                        return 1;
                } else {
                    bool match_lit_114454 = (int64_t) 1 == t_degree_112809;
                    struct memblock ext_mem_121106;
                    
                    ext_mem_121106.references = NULL;
                    
                    struct memblock ext_mem_121105;
                    
                    ext_mem_121105.references = NULL;
                    if (match_lit_114454) {
                        struct memblock mem_120924;
                        
                        mem_120924.references = NULL;
                        if (memblock_alloc(ctx, &mem_120924, bytes_119883,
                                           "mem_120924")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_120928;
                        
                        mem_120928.references = NULL;
                        if (memblock_alloc(ctx, &mem_120928, bytes_119883,
                                           "mem_120928")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120820 = (int64_t) 4 * t_window_112807;
                        int64_t bytes_120819 = smax64((int64_t) 0,
                                                      binop_y_120820);
                        int64_t flat_tid_118085 = (int64_t) 0;
                        int32_t num_tasks_126808;
                        int64_t flat_tid_118087 = (int64_t) 0;
                        struct futhark_mc_task_128893 futhark_mc_task_128893;
                        
                        futhark_mc_task_128893.ctx = ctx;
                        futhark_mc_task_128893.free_m_112803 = m_112803;
                        futhark_mc_task_128893.free_n_112804 = n_112804;
                        futhark_mc_task_128893.free_t_window_112807 =
                            t_window_112807;
                        futhark_mc_task_128893.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128893.free_t_n_m_112861 = t_n_m_112861;
                        futhark_mc_task_128893.free_i_112880 = i_112880;
                        futhark_mc_task_128893.free_mem_119696 = mem_119696;
                        futhark_mc_task_128893.free_mem_119718 = mem_119718;
                        futhark_mc_task_128893.free_bytes_119828 = bytes_119828;
                        futhark_mc_task_128893.free_mem_119882 = mem_119882;
                        futhark_mc_task_128893.free_mem_119886 = mem_119886;
                        futhark_mc_task_128893.free_mem_120633 = mem_120633;
                        futhark_mc_task_128893.free_mem_120637 = mem_120637;
                        futhark_mc_task_128893.free_bytes_120819 = bytes_120819;
                        futhark_mc_task_128893.free_mem_120924 = mem_120924.mem;
                        futhark_mc_task_128893.free_mem_120928 = mem_120928.mem;
                        
                        struct scheduler_segop futhark_mc_task_128893_task;
                        
                        futhark_mc_task_128893_task.args =
                            &futhark_mc_task_128893;
                        futhark_mc_task_128893_task.top_level_fn =
                            futhark_mc_segmap_task_128894;
                        futhark_mc_task_128893_task.name =
                            "futhark_mc_segmap_task_128894";
                        futhark_mc_task_128893_task.iterations = m_112803;
                        futhark_mc_task_128893_task.task_time =
                            &ctx->futhark_mc_segmap_task_128894_total_time;
                        futhark_mc_task_128893_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128894_total_iter;
                        futhark_mc_task_128893_task.sched = STATIC;
                        futhark_mc_task_128893_task.nested_fn =
                            futhark_mc_segmap_nested_task_128901;
                        
                        int futhark_mc_segmap_task_128894_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128893_task);
                        
                        if (futhark_mc_segmap_task_128894_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_121106, &mem_120924,
                                         "mem_120924") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_121105, &mem_120928,
                                         "mem_120928") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120928, "mem_120928") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_120924, "mem_120924") != 0)
                            return 1;
                    } else {
                        struct memblock mem_121100;
                        
                        mem_121100.references = NULL;
                        if (memblock_alloc(ctx, &mem_121100, bytes_119883,
                                           "mem_121100")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        struct memblock mem_121104;
                        
                        mem_121104.references = NULL;
                        if (memblock_alloc(ctx, &mem_121104, bytes_119883,
                                           "mem_121104")) {
                            err = 1;
                            goto cleanup;
                        }
                        
                        int64_t binop_y_120930 = (int64_t) 4 * t_window_112807;
                        int64_t bytes_120929 = smax64((int64_t) 0,
                                                      binop_y_120930);
                        int64_t flat_tid_118318 = (int64_t) 0;
                        int32_t num_tasks_127190;
                        int64_t flat_tid_118320 = (int64_t) 0;
                        struct futhark_mc_task_128930 futhark_mc_task_128930;
                        
                        futhark_mc_task_128930.ctx = ctx;
                        futhark_mc_task_128930.free_m_112803 = m_112803;
                        futhark_mc_task_128930.free_n_112804 = n_112804;
                        futhark_mc_task_128930.free_t_window_112807 =
                            t_window_112807;
                        futhark_mc_task_128930.free_t_jump_112811 =
                            t_jump_112811;
                        futhark_mc_task_128930.free_t_n_m_112861 = t_n_m_112861;
                        futhark_mc_task_128930.free_i_112880 = i_112880;
                        futhark_mc_task_128930.free_mem_119696 = mem_119696;
                        futhark_mc_task_128930.free_mem_119718 = mem_119718;
                        futhark_mc_task_128930.free_bytes_119828 = bytes_119828;
                        futhark_mc_task_128930.free_mem_119882 = mem_119882;
                        futhark_mc_task_128930.free_mem_119886 = mem_119886;
                        futhark_mc_task_128930.free_mem_120633 = mem_120633;
                        futhark_mc_task_128930.free_mem_120637 = mem_120637;
                        futhark_mc_task_128930.free_bytes_120929 = bytes_120929;
                        futhark_mc_task_128930.free_mem_121100 = mem_121100.mem;
                        futhark_mc_task_128930.free_mem_121104 = mem_121104.mem;
                        
                        struct scheduler_segop futhark_mc_task_128930_task;
                        
                        futhark_mc_task_128930_task.args =
                            &futhark_mc_task_128930;
                        futhark_mc_task_128930_task.top_level_fn =
                            futhark_mc_segmap_task_128931;
                        futhark_mc_task_128930_task.name =
                            "futhark_mc_segmap_task_128931";
                        futhark_mc_task_128930_task.iterations = m_112803;
                        futhark_mc_task_128930_task.task_time =
                            &ctx->futhark_mc_segmap_task_128931_total_time;
                        futhark_mc_task_128930_task.task_iter =
                            &ctx->futhark_mc_segmap_task_128931_total_iter;
                        futhark_mc_task_128930_task.sched = STATIC;
                        futhark_mc_task_128930_task.nested_fn =
                            futhark_mc_segmap_nested_task_128940;
                        
                        int futhark_mc_segmap_task_128931_err =
                            scheduler_prepare_task(&ctx->scheduler,
                                                   &futhark_mc_task_128930_task);
                        
                        if (futhark_mc_segmap_task_128931_err != 0) {
                            err = 1;
                            goto cleanup;
                        }
                        if (memblock_set(ctx, &ext_mem_121106, &mem_121100,
                                         "mem_121100") != 0)
                            return 1;
                        if (memblock_set(ctx, &ext_mem_121105, &mem_121104,
                                         "mem_121104") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_121104, "mem_121104") != 0)
                            return 1;
                        if (memblock_unref(ctx, &mem_121100, "mem_121100") != 0)
                            return 1;
                    }
                    if (memblock_set(ctx, &ext_mem_121108, &ext_mem_121106,
                                     "ext_mem_121106") != 0)
                        return 1;
                    if (memblock_set(ctx, &ext_mem_121107, &ext_mem_121105,
                                     "ext_mem_121105") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121105,
                                       "ext_mem_121105") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121106,
                                       "ext_mem_121106") != 0)
                        return 1;
                }
                if (memblock_set(ctx, &ext_mem_121110, &ext_mem_121108,
                                 "ext_mem_121108") != 0)
                    return 1;
                if (memblock_set(ctx, &ext_mem_121109, &ext_mem_121107,
                                 "ext_mem_121107") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121107, "ext_mem_121107") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121108, "ext_mem_121108") != 0)
                    return 1;
            }
            
            struct memblock ext_mem_121133;
            
            ext_mem_121133.references = NULL;
            if (cond_113175) {
                bool zzero_114702 = t_jump_112811 == (int64_t) 0;
                bool nonzzero_114703 = !zzero_114702;
                bool nonzzero_cert_114704;
                
                if (!nonzzero_114703) {
                    ctx->error = msgprintf("Error: %s\n\nBacktrace:\n%s",
                                           "division by zero",
                                           "-> #0  loess.fut:474:27-34\n   #1  /prelude/soacs.fut:59:3-10\n   #2  /prelude/array.fut:195:3-17\n   #3  loess.fut:473:3-486:14\n   #4  stl.fut:271:23-75\n   #5  /prelude/soacs.fut:67:19-23\n   #6  /prelude/soacs.fut:67:3-37\n   #7  stl.fut:270:15-272:43\n   #8  stl.fut:365:3-376:33\n   #9  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_121133,
                                       "ext_mem_121133") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121109,
                                       "ext_mem_121109") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121110,
                                       "ext_mem_121110") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120641, "mem_120641") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120556,
                                       "ext_mem_120556") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120532,
                                       "ext_mem_120532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120533,
                                       "ext_mem_120533") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119940,
                                       "mem_param_119940") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119932,
                                       "mem_param_119932") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121139,
                                       "ext_mem_121139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121140,
                                       "ext_mem_121140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119918,
                                       "mem_param_119918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119910,
                                       "mem_param_119910") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119902,
                                       "mem_param_119902") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121392,
                                       "ext_mem_121392") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121393,
                                       "ext_mem_121393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121394,
                                       "ext_mem_121394") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121508,
                                       "mem_out_121508") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121507,
                                       "mem_out_121507") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121506,
                                       "mem_out_121506") != 0)
                        return 1;
                    return 1;
                }
                
                int64_t y_114705 = sub64(t_n_m_112861, (int64_t) 1);
                struct memblock mem_121132;
                
                mem_121132.references = NULL;
                if (memblock_alloc(ctx, &mem_121132, bytes_119715,
                                   "mem_121132")) {
                    err = 1;
                    goto cleanup;
                }
                
                int64_t flat_tid_118661 = (int64_t) 0;
                int32_t num_tasks_127756;
                int64_t flat_tid_118663 = (int64_t) 0;
                struct futhark_mc_task_128979 futhark_mc_task_128979;
                
                futhark_mc_task_128979.ctx = ctx;
                futhark_mc_task_128979.free_m_112803 = m_112803;
                futhark_mc_task_128979.free_n_112804 = n_112804;
                futhark_mc_task_128979.free_t_jump_112811 = t_jump_112811;
                futhark_mc_task_128979.free_t_n_m_112861 = t_n_m_112861;
                futhark_mc_task_128979.free_i_112880 = i_112880;
                futhark_mc_task_128979.free_y_114705 = y_114705;
                futhark_mc_task_128979.free_bytes_119697 = bytes_119697;
                futhark_mc_task_128979.free_ext_mem_121109 = ext_mem_121109.mem;
                futhark_mc_task_128979.free_ext_mem_121110 = ext_mem_121110.mem;
                futhark_mc_task_128979.free_mem_121132 = mem_121132.mem;
                
                struct scheduler_segop futhark_mc_task_128979_task;
                
                futhark_mc_task_128979_task.args = &futhark_mc_task_128979;
                futhark_mc_task_128979_task.top_level_fn =
                    futhark_mc_segmap_task_128980;
                futhark_mc_task_128979_task.name =
                    "futhark_mc_segmap_task_128980";
                futhark_mc_task_128979_task.iterations = m_112803;
                futhark_mc_task_128979_task.task_time =
                    &ctx->futhark_mc_segmap_task_128980_total_time;
                futhark_mc_task_128979_task.task_iter =
                    &ctx->futhark_mc_segmap_task_128980_total_iter;
                futhark_mc_task_128979_task.sched = STATIC;
                futhark_mc_task_128979_task.nested_fn =
                    futhark_mc_segmap_nested_task_128984;
                
                int futhark_mc_segmap_task_128980_err =
                    scheduler_prepare_task(&ctx->scheduler,
                                           &futhark_mc_task_128979_task);
                
                if (futhark_mc_segmap_task_128980_err != 0) {
                    err = 1;
                    goto cleanup;
                }
                if (memblock_set(ctx, &ext_mem_121133, &mem_121132,
                                 "mem_121132") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_121132, "mem_121132") != 0)
                    return 1;
            } else {
                bool dim_match_114758 = n_112804 == t_n_m_112861;
                bool empty_or_match_cert_114759;
                
                if (!dim_match_114758) {
                    ctx->error =
                        msgprintf("Error: %s%lld%s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                                  "Value of (core language) shape (",
                                  (long long) m_112803, ", ",
                                  (long long) t_n_m_112861,
                                  ") cannot match shape of type `[",
                                  (long long) m_112803, "][",
                                  (long long) n_112804, "]t`.",
                                  "-> #0  stl.fut:274:15-36\n   #1  stl.fut:365:3-376:33\n   #2  stl.fut:352:1-376:33\n");
                    if (memblock_unref(ctx, &ext_mem_121133,
                                       "ext_mem_121133") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121109,
                                       "ext_mem_121109") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121110,
                                       "ext_mem_121110") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_120641, "mem_120641") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120556,
                                       "ext_mem_120556") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120532,
                                       "ext_mem_120532") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_120533,
                                       "ext_mem_120533") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119940,
                                       "mem_param_119940") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119932,
                                       "mem_param_119932") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121139,
                                       "ext_mem_121139") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121140,
                                       "ext_mem_121140") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119918,
                                       "mem_param_119918") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119910,
                                       "mem_param_119910") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_param_119902,
                                       "mem_param_119902") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121392,
                                       "ext_mem_121392") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121393,
                                       "ext_mem_121393") != 0)
                        return 1;
                    if (memblock_unref(ctx, &ext_mem_121394,
                                       "ext_mem_121394") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121508,
                                       "mem_out_121508") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121507,
                                       "mem_out_121507") != 0)
                        return 1;
                    if (memblock_unref(ctx, &mem_out_121506,
                                       "mem_out_121506") != 0)
                        return 1;
                    return 1;
                }
                if (memblock_set(ctx, &ext_mem_121133, &ext_mem_121110,
                                 "ext_mem_121110") != 0)
                    return 1;
            }
            if (memblock_unref(ctx, &ext_mem_121109, "ext_mem_121109") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_121110, "ext_mem_121110") != 0)
                return 1;
            
            int64_t ctx_param_ext_tmp_122269 = ext_121134;
            int64_t ctx_param_ext_tmp_122270 = ext_121134;
            struct memblock mem_param_tmp_122271;
            
            mem_param_tmp_122271.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_122271, &mem_120641,
                             "mem_120641") != 0)
                return 1;
            
            struct memblock mem_param_tmp_122272;
            
            mem_param_tmp_122272.references = NULL;
            if (memblock_set(ctx, &mem_param_tmp_122272, &ext_mem_121133,
                             "ext_mem_121133") != 0)
                return 1;
            ctx_param_ext_119934 = ctx_param_ext_tmp_122269;
            ctx_param_ext_119936 = ctx_param_ext_tmp_122270;
            if (memblock_set(ctx, &mem_param_119932, &mem_param_tmp_122271,
                             "mem_param_tmp_122271") != 0)
                return 1;
            if (memblock_set(ctx, &mem_param_119940, &mem_param_tmp_122272,
                             "mem_param_tmp_122272") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_122272,
                               "mem_param_tmp_122272") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_param_tmp_122271,
                               "mem_param_tmp_122271") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_121133, "ext_mem_121133") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_121109, "ext_mem_121109") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_121110, "ext_mem_121110") != 0)
                return 1;
            if (memblock_unref(ctx, &mem_120641, "mem_120641") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120556, "ext_mem_120556") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120532, "ext_mem_120532") != 0)
                return 1;
            if (memblock_unref(ctx, &ext_mem_120533, "ext_mem_120533") != 0)
                return 1;
        }
        ext_121146 = ctx_param_ext_119934;
        ext_121144 = ctx_param_ext_119936;
        if (memblock_set(ctx, &ext_mem_121140, &mem_param_119932,
                         "mem_param_119932") != 0)
            return 1;
        if (memblock_set(ctx, &ext_mem_121139, &mem_param_119940,
                         "mem_param_119940") != 0)
            return 1;
        
        bool cond_114761 = slt64(i_outer_113254, y_113176);
        int64_t ext_121391;
        
        if (cond_114761) {
            ext_121391 = m_112803;
        } else {
            ext_121391 = ctx_param_ext_119915;
        }
        
        int64_t ext_121390;
        
        if (cond_114761) {
            ext_121390 = n_112804;
        } else {
            ext_121390 = ctx_param_ext_119917;
        }
        
        int64_t ext_121389;
        
        if (cond_114761) {
            ext_121389 = m_112803;
        } else {
            ext_121389 = ctx_param_ext_119911;
        }
        
        int64_t ext_121388;
        
        if (cond_114761) {
            ext_121388 = n_112804;
        } else {
            ext_121388 = ctx_param_ext_119912;
        }
        
        int64_t ext_121387;
        
        if (cond_114761) {
            ext_121387 = n_112804;
        } else {
            ext_121387 = ctx_param_ext_119914;
        }
        
        int64_t ext_121386;
        
        if (cond_114761) {
            ext_121386 = (int64_t) 1;
        } else {
            ext_121386 = ctx_param_ext_119916;
        }
        
        int64_t ext_121385;
        
        if (cond_114761) {
            ext_121385 = (int64_t) 0;
        } else {
            ext_121385 = ctx_param_ext_119913;
        }
        
        struct memblock ext_mem_121384;
        
        ext_mem_121384.references = NULL;
        if (cond_114761) {
            if (mem_121176_cached_sizze_128320 < (size_t) bytes_119715) {
                mem_121176 = realloc(mem_121176, bytes_119715);
                mem_121176_cached_sizze_128320 = bytes_119715;
            }
            
            int64_t flat_tid_118717 = (int64_t) 0;
            int32_t num_tasks_127864;
            int64_t flat_tid_118719 = (int64_t) 0;
            struct futhark_mc_task_128992 futhark_mc_task_128992;
            
            futhark_mc_task_128992.ctx = ctx;
            futhark_mc_task_128992.free_m_112803 = m_112803;
            futhark_mc_task_128992.free_n_112804 = n_112804;
            futhark_mc_task_128992.free_Y_mem_119653 = Y_mem_119653.mem;
            futhark_mc_task_128992.free_bytes_119697 = bytes_119697;
            futhark_mc_task_128992.free_ext_mem_121139 = ext_mem_121139.mem;
            futhark_mc_task_128992.free_ext_mem_121140 = ext_mem_121140.mem;
            futhark_mc_task_128992.free_ext_121144 = ext_121144;
            futhark_mc_task_128992.free_mem_121176 = mem_121176;
            
            struct scheduler_segop futhark_mc_task_128992_task;
            
            futhark_mc_task_128992_task.args = &futhark_mc_task_128992;
            futhark_mc_task_128992_task.top_level_fn =
                futhark_mc_segmap_task_128993;
            futhark_mc_task_128992_task.name = "futhark_mc_segmap_task_128993";
            futhark_mc_task_128992_task.iterations = m_112803;
            futhark_mc_task_128992_task.task_time =
                &ctx->futhark_mc_segmap_task_128993_total_time;
            futhark_mc_task_128992_task.task_iter =
                &ctx->futhark_mc_segmap_task_128993_total_iter;
            futhark_mc_task_128992_task.sched = STATIC;
            futhark_mc_task_128992_task.nested_fn =
                futhark_mc_segmap_nested_task_128997;
            
            int futhark_mc_segmap_task_128993_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_128992_task);
            
            if (futhark_mc_segmap_task_128993_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (mem_121198_cached_sizze_128321 < (size_t) bytes_119715) {
                mem_121198 = realloc(mem_121198, bytes_119715);
                mem_121198_cached_sizze_128321 = bytes_119715;
            }
            
            int64_t flat_tid_118735 = (int64_t) 0;
            int32_t num_tasks_127896;
            int64_t flat_tid_118737 = (int64_t) 0;
            struct futhark_mc_task_129005 futhark_mc_task_129005;
            
            futhark_mc_task_129005.ctx = ctx;
            futhark_mc_task_129005.free_m_112803 = m_112803;
            futhark_mc_task_129005.free_n_112804 = n_112804;
            futhark_mc_task_129005.free_mem_119693 = mem_119693;
            futhark_mc_task_129005.free_bytes_119697 = bytes_119697;
            futhark_mc_task_129005.free_mem_121176 = mem_121176;
            futhark_mc_task_129005.free_mem_121198 = mem_121198;
            
            struct scheduler_segop futhark_mc_task_129005_task;
            
            futhark_mc_task_129005_task.args = &futhark_mc_task_129005;
            futhark_mc_task_129005_task.top_level_fn =
                futhark_mc_segmap_task_129006;
            futhark_mc_task_129005_task.name = "futhark_mc_segmap_task_129006";
            futhark_mc_task_129005_task.iterations = m_112803;
            futhark_mc_task_129005_task.task_time =
                &ctx->futhark_mc_segmap_task_129006_total_time;
            futhark_mc_task_129005_task.task_iter =
                &ctx->futhark_mc_segmap_task_129006_total_iter;
            futhark_mc_task_129005_task.sched = STATIC;
            futhark_mc_task_129005_task.nested_fn =
                futhark_mc_segmap_nested_task_129010;
            
            int futhark_mc_segmap_task_129006_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129005_task);
            
            if (futhark_mc_segmap_task_129006_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            int32_t iters_114789;
            
            if (empty_slice_113227) {
                iters_114789 = 0;
            } else {
                iters_114789 = 16;
            }
            
            bool loop_nonempty_114790 = slt32(0, iters_114789);
            bool loop_not_taken_114791 = !loop_nonempty_114790;
            bool protect_assert_disj_114792 = bounds_check_112883 ||
                 loop_not_taken_114791;
            bool index_certs_114793;
            
            if (!protect_assert_disj_114792) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) i_112880,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  /prelude/array.fut:26:29-34\n   #1  lib/github.com/diku-dk/sorts/radix_sort.fut:25:24-35\n   #2  lib/github.com/diku-dk/sorts/radix_sort.fut:53:31-62\n   #3  lib/github.com/diku-dk/sorts/radix_sort.fut:104:6-36\n   #4  stl.fut:305:35-77\n   #5  stl.fut:304:28-306:40\n   #6  stl.fut:365:3-376:33\n   #7  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_121384, "ext_mem_121384") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119940,
                                   "mem_param_119940") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119932,
                                   "mem_param_119932") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121139, "ext_mem_121139") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121140, "ext_mem_121140") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119918,
                                   "mem_param_119918") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119910,
                                   "mem_param_119910") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119902,
                                   "mem_param_119902") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121392, "ext_mem_121392") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121393, "ext_mem_121393") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121394, "ext_mem_121394") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
                    return 1;
                return 1;
            }
            if (mem_121352_cached_sizze_128322 < (size_t) bytes_119715) {
                mem_121352 = realloc(mem_121352, bytes_119715);
                mem_121352_cached_sizze_128322 = bytes_119715;
            }
            
            int64_t double_buffer_sizze_121496 = (int64_t) 4 * n_112804;
            int64_t double_buffer_sizze_121500 = (int64_t) 4 * n_112804;
            int64_t flat_tid_118751 = (int64_t) 0;
            int32_t num_tasks_127929;
            int64_t flat_tid_118753 = (int64_t) 0;
            struct futhark_mc_task_129018 futhark_mc_task_129018;
            
            futhark_mc_task_129018.ctx = ctx;
            futhark_mc_task_129018.free_m_112803 = m_112803;
            futhark_mc_task_129018.free_n_112804 = n_112804;
            futhark_mc_task_129018.free_i_112880 = i_112880;
            futhark_mc_task_129018.free_iters_114789 = iters_114789;
            futhark_mc_task_129018.free_bytes_119654 = bytes_119654;
            futhark_mc_task_129018.free_bytes_119697 = bytes_119697;
            futhark_mc_task_129018.free_mem_121198 = mem_121198;
            futhark_mc_task_129018.free_mem_121352 = mem_121352;
            futhark_mc_task_129018.free_double_buffer_sizze_121496 =
                double_buffer_sizze_121496;
            futhark_mc_task_129018.free_double_buffer_sizze_121500 =
                double_buffer_sizze_121500;
            
            struct scheduler_segop futhark_mc_task_129018_task;
            
            futhark_mc_task_129018_task.args = &futhark_mc_task_129018;
            futhark_mc_task_129018_task.top_level_fn =
                futhark_mc_segmap_task_129019;
            futhark_mc_task_129018_task.name = "futhark_mc_segmap_task_129019";
            futhark_mc_task_129018_task.iterations = m_112803;
            futhark_mc_task_129018_task.task_time =
                &ctx->futhark_mc_segmap_task_129019_total_time;
            futhark_mc_task_129018_task.task_iter =
                &ctx->futhark_mc_segmap_task_129019_total_iter;
            futhark_mc_task_129018_task.sched = STATIC;
            futhark_mc_task_129018_task.nested_fn =
                futhark_mc_segmap_nested_task_129029;
            
            int futhark_mc_segmap_task_129019_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129018_task);
            
            if (futhark_mc_segmap_task_129019_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            bool empty_slice_114907 = j_m_i_113240 == (int64_t) 0;
            int64_t m_114908 = sub64(j_m_i_113240, (int64_t) 1);
            int64_t i_p_m_t_s_114909 = add64(stl_res_112874, m_114908);
            bool zzero_leq_i_p_m_t_s_114910 = sle64((int64_t) 0,
                                                    i_p_m_t_s_114909);
            bool i_p_m_t_s_leq_w_114911 = slt64(i_p_m_t_s_114909, n_112804);
            bool zzero_lte_i_114912 = sle64((int64_t) 0, stl_res_112874);
            bool i_lte_j_114913 = sle64(stl_res_112874, stl_res_112875);
            bool y_114914 = i_p_m_t_s_leq_w_114911 && zzero_lte_i_114912;
            bool y_114915 = zzero_leq_i_p_m_t_s_114910 && y_114914;
            bool y_114916 = i_lte_j_114913 && y_114915;
            bool forwards_ok_114917 = zzero_lte_i_114912 && y_114916;
            bool ok_or_empty_114918 = empty_slice_114907 || forwards_ok_114917;
            bool index_certs_114919;
            
            if (!ok_or_empty_114918) {
                ctx->error =
                    msgprintf("Error: %s%lld%s%lld%s%lld%s\n\nBacktrace:\n%s",
                              "Index [", (long long) stl_res_112874, ":",
                              (long long) stl_res_112875,
                              "] out of bounds for array of shape [",
                              (long long) n_112804, "].",
                              "-> #0  stl.fut:311:33-51\n   #1  stl.fut:309:13-316:28\n   #2  stl.fut:365:3-376:33\n   #3  stl.fut:352:1-376:33\n");
                if (memblock_unref(ctx, &ext_mem_121384, "ext_mem_121384") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119940,
                                   "mem_param_119940") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119932,
                                   "mem_param_119932") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121139, "ext_mem_121139") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121140, "ext_mem_121140") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119918,
                                   "mem_param_119918") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119910,
                                   "mem_param_119910") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_param_119902,
                                   "mem_param_119902") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121392, "ext_mem_121392") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121393, "ext_mem_121393") != 0)
                    return 1;
                if (memblock_unref(ctx, &ext_mem_121394, "ext_mem_121394") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
                    return 1;
                if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
                    return 1;
                return 1;
            }
            
            int64_t binop_y_121354 = (int64_t) 4 * m_112803;
            int64_t bytes_121353 = smax64((int64_t) 0, binop_y_121354);
            
            if (mem_121355_cached_sizze_128323 < (size_t) bytes_121353) {
                mem_121355 = realloc(mem_121355, bytes_121353);
                mem_121355_cached_sizze_128323 = bytes_121353;
            }
            if (mem_121358_cached_sizze_128324 < (size_t) bytes_121353) {
                mem_121358 = realloc(mem_121358, bytes_121353);
                mem_121358_cached_sizze_128324 = bytes_121353;
            }
            if (mem_121361_cached_sizze_128325 < (size_t) bytes_121353) {
                mem_121361 = realloc(mem_121361, bytes_121353);
                mem_121361_cached_sizze_128325 = bytes_121353;
            }
            
            int64_t flat_tid_118844 = (int64_t) 0;
            int32_t num_tasks_128195;
            int64_t flat_tid_118846 = (int64_t) 0;
            struct futhark_mc_task_129053 futhark_mc_task_129053;
            
            futhark_mc_task_129053.ctx = ctx;
            futhark_mc_task_129053.free_m_112803 = m_112803;
            futhark_mc_task_129053.free_n_112804 = n_112804;
            futhark_mc_task_129053.free_stl_res_112874 = stl_res_112874;
            futhark_mc_task_129053.free_j_m_i_113240 = j_m_i_113240;
            futhark_mc_task_129053.free_mem_121352 = mem_121352;
            futhark_mc_task_129053.free_mem_121355 = mem_121355;
            futhark_mc_task_129053.free_mem_121358 = mem_121358;
            futhark_mc_task_129053.free_mem_121361 = mem_121361;
            
            struct scheduler_segop futhark_mc_task_129053_task;
            
            futhark_mc_task_129053_task.args = &futhark_mc_task_129053;
            futhark_mc_task_129053_task.top_level_fn =
                futhark_mc_segmap_task_129054;
            futhark_mc_task_129053_task.name = "futhark_mc_segmap_task_129054";
            futhark_mc_task_129053_task.iterations = m_112803;
            futhark_mc_task_129053_task.task_time =
                &ctx->futhark_mc_segmap_task_129054_total_time;
            futhark_mc_task_129053_task.task_iter =
                &ctx->futhark_mc_segmap_task_129054_total_iter;
            futhark_mc_task_129053_task.sched = STATIC;
            futhark_mc_task_129053_task.nested_fn =
                futhark_mc_segmap_nested_task_129057;
            
            int futhark_mc_segmap_task_129054_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129053_task);
            
            if (futhark_mc_segmap_task_129054_err != 0) {
                err = 1;
                goto cleanup;
            }
            
            struct memblock mem_121383;
            
            mem_121383.references = NULL;
            if (memblock_alloc(ctx, &mem_121383, bytes_119715, "mem_121383")) {
                err = 1;
                goto cleanup;
            }
            
            int64_t flat_tid_118859 = (int64_t) 0;
            int32_t num_tasks_128222;
            int64_t flat_tid_118861 = (int64_t) 0;
            struct futhark_mc_task_129065 futhark_mc_task_129065;
            
            futhark_mc_task_129065.ctx = ctx;
            futhark_mc_task_129065.free_m_112803 = m_112803;
            futhark_mc_task_129065.free_n_112804 = n_112804;
            futhark_mc_task_129065.free_bytes_119697 = bytes_119697;
            futhark_mc_task_129065.free_mem_121176 = mem_121176;
            futhark_mc_task_129065.free_mem_121355 = mem_121355;
            futhark_mc_task_129065.free_mem_121358 = mem_121358;
            futhark_mc_task_129065.free_mem_121361 = mem_121361;
            futhark_mc_task_129065.free_mem_121383 = mem_121383.mem;
            
            struct scheduler_segop futhark_mc_task_129065_task;
            
            futhark_mc_task_129065_task.args = &futhark_mc_task_129065;
            futhark_mc_task_129065_task.top_level_fn =
                futhark_mc_segmap_task_129066;
            futhark_mc_task_129065_task.name = "futhark_mc_segmap_task_129066";
            futhark_mc_task_129065_task.iterations = m_112803;
            futhark_mc_task_129065_task.task_time =
                &ctx->futhark_mc_segmap_task_129066_total_time;
            futhark_mc_task_129065_task.task_iter =
                &ctx->futhark_mc_segmap_task_129066_total_iter;
            futhark_mc_task_129065_task.sched = STATIC;
            futhark_mc_task_129065_task.nested_fn =
                futhark_mc_segmap_nested_task_129070;
            
            int futhark_mc_segmap_task_129066_err =
                scheduler_prepare_task(&ctx->scheduler,
                                       &futhark_mc_task_129065_task);
            
            if (futhark_mc_segmap_task_129066_err != 0) {
                err = 1;
                goto cleanup;
            }
            if (memblock_set(ctx, &ext_mem_121384, &mem_121383, "mem_121383") !=
                0)
                return 1;
            if (memblock_unref(ctx, &mem_121383, "mem_121383") != 0)
                return 1;
        } else {
            if (memblock_set(ctx, &ext_mem_121384, &mem_param_119918,
                             "mem_param_119918") != 0)
                return 1;
        }
        
        int64_t ctx_param_ext_tmp_122254 = ext_121146;
        int64_t ctx_param_ext_tmp_122255 = ext_121144;
        int64_t ctx_param_ext_tmp_122256 = ext_121389;
        int64_t ctx_param_ext_tmp_122257 = ext_121388;
        int64_t ctx_param_ext_tmp_122258 = ext_121385;
        int64_t ctx_param_ext_tmp_122259 = ext_121387;
        int64_t ctx_param_ext_tmp_122260 = ext_121391;
        int64_t ctx_param_ext_tmp_122261 = ext_121386;
        int64_t ctx_param_ext_tmp_122262 = ext_121390;
        struct memblock mem_param_tmp_122263;
        
        mem_param_tmp_122263.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_122263, &ext_mem_121140,
                         "ext_mem_121140") != 0)
            return 1;
        
        struct memblock mem_param_tmp_122264;
        
        mem_param_tmp_122264.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_122264, &ext_mem_121139,
                         "ext_mem_121139") != 0)
            return 1;
        
        struct memblock mem_param_tmp_122265;
        
        mem_param_tmp_122265.references = NULL;
        if (memblock_set(ctx, &mem_param_tmp_122265, &ext_mem_121384,
                         "ext_mem_121384") != 0)
            return 1;
        ctx_param_ext_119904 = ctx_param_ext_tmp_122254;
        ctx_param_ext_119906 = ctx_param_ext_tmp_122255;
        ctx_param_ext_119911 = ctx_param_ext_tmp_122256;
        ctx_param_ext_119912 = ctx_param_ext_tmp_122257;
        ctx_param_ext_119913 = ctx_param_ext_tmp_122258;
        ctx_param_ext_119914 = ctx_param_ext_tmp_122259;
        ctx_param_ext_119915 = ctx_param_ext_tmp_122260;
        ctx_param_ext_119916 = ctx_param_ext_tmp_122261;
        ctx_param_ext_119917 = ctx_param_ext_tmp_122262;
        if (memblock_set(ctx, &mem_param_119902, &mem_param_tmp_122263,
                         "mem_param_tmp_122263") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119910, &mem_param_tmp_122264,
                         "mem_param_tmp_122264") != 0)
            return 1;
        if (memblock_set(ctx, &mem_param_119918, &mem_param_tmp_122265,
                         "mem_param_tmp_122265") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_122265,
                           "mem_param_tmp_122265") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_122264,
                           "mem_param_tmp_122264") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_tmp_122263,
                           "mem_param_tmp_122263") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_121384, "ext_mem_121384") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_119940, "mem_param_119940") != 0)
            return 1;
        if (memblock_unref(ctx, &mem_param_119932, "mem_param_119932") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_121139, "ext_mem_121139") != 0)
            return 1;
        if (memblock_unref(ctx, &ext_mem_121140, "ext_mem_121140") != 0)
            return 1;
    }
    ext_121407 = ctx_param_ext_119904;
    ext_121405 = ctx_param_ext_119906;
    ext_121401 = ctx_param_ext_119911;
    ext_121400 = ctx_param_ext_119912;
    ext_121399 = ctx_param_ext_119913;
    ext_121398 = ctx_param_ext_119914;
    ext_121397 = ctx_param_ext_119915;
    ext_121396 = ctx_param_ext_119916;
    ext_121395 = ctx_param_ext_119917;
    if (memblock_set(ctx, &ext_mem_121394, &mem_param_119902,
                     "mem_param_119902") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_121393, &mem_param_119910,
                     "mem_param_119910") != 0)
        return 1;
    if (memblock_set(ctx, &ext_mem_121392, &mem_param_119918,
                     "mem_param_119918") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
        return 1;
    
    struct memblock mem_121437;
    
    mem_121437.references = NULL;
    if (memblock_alloc(ctx, &mem_121437, bytes_119715, "mem_121437")) {
        err = 1;
        goto cleanup;
    }
    
    int64_t flat_tid_118887 = (int64_t) 0;
    int32_t num_tasks_128277;
    int64_t flat_tid_118889 = (int64_t) 0;
    struct futhark_mc_task_129078 futhark_mc_task_129078;
    
    futhark_mc_task_129078.ctx = ctx;
    futhark_mc_task_129078.free_m_112803 = m_112803;
    futhark_mc_task_129078.free_n_112804 = n_112804;
    futhark_mc_task_129078.free_Y_mem_119653 = Y_mem_119653.mem;
    futhark_mc_task_129078.free_bytes_119697 = bytes_119697;
    futhark_mc_task_129078.free_ext_mem_121393 = ext_mem_121393.mem;
    futhark_mc_task_129078.free_ext_mem_121394 = ext_mem_121394.mem;
    futhark_mc_task_129078.free_ext_121405 = ext_121405;
    futhark_mc_task_129078.free_mem_121437 = mem_121437.mem;
    
    struct scheduler_segop futhark_mc_task_129078_task;
    
    futhark_mc_task_129078_task.args = &futhark_mc_task_129078;
    futhark_mc_task_129078_task.top_level_fn = futhark_mc_segmap_task_129079;
    futhark_mc_task_129078_task.name = "futhark_mc_segmap_task_129079";
    futhark_mc_task_129078_task.iterations = m_112803;
    futhark_mc_task_129078_task.task_time =
        &ctx->futhark_mc_segmap_task_129079_total_time;
    futhark_mc_task_129078_task.task_iter =
        &ctx->futhark_mc_segmap_task_129079_total_iter;
    futhark_mc_task_129078_task.sched = STATIC;
    futhark_mc_task_129078_task.nested_fn =
        futhark_mc_segmap_nested_task_129083;
    
    int futhark_mc_segmap_task_129079_err =
        scheduler_prepare_task(&ctx->scheduler, &futhark_mc_task_129078_task);
    
    if (futhark_mc_segmap_task_129079_err != 0) {
        err = 1;
        goto cleanup;
    }
    
    struct memblock mem_121441;
    
    mem_121441.references = NULL;
    if (memblock_alloc(ctx, &mem_121441, bytes_119715, "mem_121441")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_121441.mem + (int64_t) 0, ext_mem_121394.mem + (int64_t) 0,
            m_112803 * n_112804 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_121394, "ext_mem_121394") != 0)
        return 1;
    
    struct memblock mem_121446;
    
    mem_121446.references = NULL;
    if (memblock_alloc(ctx, &mem_121446, bytes_119715, "mem_121446")) {
        err = 1;
        goto cleanup;
    }
    memmove(mem_121446.mem + (int64_t) 0, ext_mem_121393.mem + (int64_t) 0,
            m_112803 * n_112804 * (int64_t) 4);
    if (memblock_unref(ctx, &ext_mem_121393, "ext_mem_121393") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121506, &mem_121441, "mem_121441") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121507, &mem_121446, "mem_121446") != 0)
        return 1;
    if (memblock_set(ctx, &mem_out_121508, &mem_121437, "mem_121437") != 0)
        return 1;
    (*mem_out_p_128302).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128302, &mem_out_121506,
                     "mem_out_121506") != 0)
        return 1;
    (*mem_out_p_128303).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128303, &mem_out_121507,
                     "mem_out_121507") != 0)
        return 1;
    (*mem_out_p_128304).references = NULL;
    if (memblock_set(ctx, &*mem_out_p_128304, &mem_out_121508,
                     "mem_out_121508") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121446, "mem_121446") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121441, "mem_121441") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_121437, "mem_121437") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119918, "mem_param_119918") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119910, "mem_param_119910") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_param_119902, "mem_param_119902") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121392, "ext_mem_121392") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121393, "ext_mem_121393") != 0)
        return 1;
    if (memblock_unref(ctx, &ext_mem_121394, "ext_mem_121394") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119894, "mem_119894") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_119890, "mem_119890") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121508, "mem_out_121508") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121507, "mem_out_121507") != 0)
        return 1;
    if (memblock_unref(ctx, &mem_out_121506, "mem_out_121506") != 0)
        return 1;
    
  cleanup:
    { }
    free(mem_119693);
    free(mem_119696);
    free(mem_119718);
    free(mem_119740);
    free(mem_119762);
    free(mem_119820);
    free(mem_119824);
    free(mem_119882);
    free(mem_119886);
    free(mem_119962);
    free(mem_119984);
    free(mem_120006);
    free(mem_120064);
    free(mem_120633);
    free(mem_120637);
    free(mem_121176);
    free(mem_121198);
    free(mem_121352);
    free(mem_121355);
    free(mem_121358);
    free(mem_121361);
    return err;
}
int futhark_entry_main(struct futhark_context *ctx,
                       struct futhark_f32_2d **out0,
                       struct futhark_f32_2d **out1,
                       struct futhark_f32_2d **out2, const
                       struct futhark_f32_2d *in0, const int64_t in1, const
                       int64_t in2, const int64_t in3, const int64_t in4, const
                       int64_t in5, const int64_t in6, const int64_t in7, const
                       int64_t in8, const int64_t in9, const int64_t in10, const
                       int64_t in11)
{
    struct memblock Y_mem_119653;
    
    Y_mem_119653.references = NULL;
    
    int64_t m_112803;
    int64_t n_112804;
    int64_t n_p_112806;
    int64_t t_window_112807;
    int64_t l_window_112808;
    int64_t t_degree_112809;
    int64_t l_degree_112810;
    int64_t t_jump_112811;
    int64_t l_jump_112812;
    int64_t inner_112813;
    int64_t outer_112814;
    int64_t jump_threshold_112815;
    int64_t max_group_sizze_112816;
    struct memblock mem_out_121506;
    
    mem_out_121506.references = NULL;
    
    struct memblock mem_out_121507;
    
    mem_out_121507.references = NULL;
    
    struct memblock mem_out_121508;
    
    mem_out_121508.references = NULL;
    
    int ret = 0;
    
    lock_lock(&ctx->lock);
    worker_local = &ctx->scheduler.workers[0];
    Y_mem_119653 = in0->mem;
    m_112803 = in0->shape[0];
    n_112804 = in0->shape[1];
    n_p_112806 = in1;
    t_window_112807 = in2;
    l_window_112808 = in3;
    t_degree_112809 = in4;
    l_degree_112810 = in5;
    t_jump_112811 = in6;
    l_jump_112812 = in7;
    inner_112813 = in8;
    outer_112814 = in9;
    jump_threshold_112815 = in10;
    max_group_sizze_112816 = in11;
    if (!(m_112803 == in0->shape[0] && n_112804 == in0->shape[1])) {
        ret = 1;
        if (!ctx->error)
            ctx->error =
                msgprintf("Error: entry point arguments have invalid sizes.\n");
    }
    if (ret == 0) {
        ret = futrts_entry_main(ctx, &mem_out_121506, &mem_out_121507,
                                &mem_out_121508, Y_mem_119653, m_112803,
                                n_112804, n_p_112806, t_window_112807,
                                l_window_112808, t_degree_112809,
                                l_degree_112810, t_jump_112811, l_jump_112812,
                                inner_112813, outer_112814,
                                jump_threshold_112815, max_group_sizze_112816);
        if (ret == 0) {
            assert((*out0 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out0)->mem = mem_out_121506;
            (*out0)->shape[0] = m_112803;
            (*out0)->shape[1] = n_112804;
            assert((*out1 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out1)->mem = mem_out_121507;
            (*out1)->shape[0] = m_112803;
            (*out1)->shape[1] = n_112804;
            assert((*out2 =
                    (struct futhark_f32_2d *) malloc(sizeof(struct futhark_f32_2d))) !=
                NULL);
            (*out2)->mem = mem_out_121508;
            (*out2)->shape[0] = m_112803;
            (*out2)->shape[1] = n_112804;
        }
    }
    lock_unlock(&ctx->lock);
    return ret;
}
